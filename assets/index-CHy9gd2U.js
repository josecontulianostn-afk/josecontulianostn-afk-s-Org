function Qx(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ro(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Vd(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var d1={exports:{}},Qc={},f1={exports:{}},bt={};var p2;function V6(){if(p2)return bt;p2=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function E(te){return te===null||typeof te!="object"?null:(te=v&&te[v]||te["@@iterator"],typeof te=="function"?te:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,P={};function N(te,pe,Fe){this.props=te,this.context=pe,this.refs=P,this.updater=Fe||C}N.prototype.isReactComponent={},N.prototype.setState=function(te,pe){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,pe,"setState")},N.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function D(){}D.prototype=N.prototype;function F(te,pe,Fe){this.props=te,this.context=pe,this.refs=P,this.updater=Fe||C}var L=F.prototype=new D;L.constructor=F,I(L,N.prototype),L.isPureReactComponent=!0;var V=Array.isArray,G=Object.prototype.hasOwnProperty,q={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function Z(te,pe,Fe){var Le,lt={},Ne=null,ct=null;if(pe!=null)for(Le in pe.ref!==void 0&&(ct=pe.ref),pe.key!==void 0&&(Ne=""+pe.key),pe)G.call(pe,Le)&&!W.hasOwnProperty(Le)&&(lt[Le]=pe[Le]);var rt=arguments.length-2;if(rt===1)lt.children=Fe;else if(1<rt){for(var Ee=Array(rt),et=0;et<rt;et++)Ee[et]=arguments[et+2];lt.children=Ee}if(te&&te.defaultProps)for(Le in rt=te.defaultProps,rt)lt[Le]===void 0&&(lt[Le]=rt[Le]);return{$$typeof:e,type:te,key:Ne,ref:ct,props:lt,_owner:q.current}}function X(te,pe){return{$$typeof:e,type:te.type,key:pe,ref:te.ref,props:te.props,_owner:te._owner}}function fe(te){return typeof te=="object"&&te!==null&&te.$$typeof===e}function se(te){var pe={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(Fe){return pe[Fe]})}var ae=/\/+/g;function be(te,pe){return typeof te=="object"&&te!==null&&te.key!=null?se(""+te.key):pe.toString(36)}function he(te,pe,Fe,Le,lt){var Ne=typeof te;(Ne==="undefined"||Ne==="boolean")&&(te=null);var ct=!1;if(te===null)ct=!0;else switch(Ne){case"string":case"number":ct=!0;break;case"object":switch(te.$$typeof){case e:case t:ct=!0}}if(ct)return ct=te,lt=lt(ct),te=Le===""?"."+be(ct,0):Le,V(lt)?(Fe="",te!=null&&(Fe=te.replace(ae,"$&/")+"/"),he(lt,pe,Fe,"",function(et){return et})):lt!=null&&(fe(lt)&&(lt=X(lt,Fe+(!lt.key||ct&&ct.key===lt.key?"":(""+lt.key).replace(ae,"$&/")+"/")+te)),pe.push(lt)),1;if(ct=0,Le=Le===""?".":Le+":",V(te))for(var rt=0;rt<te.length;rt++){Ne=te[rt];var Ee=Le+be(Ne,rt);ct+=he(Ne,pe,Fe,Ee,lt)}else if(Ee=E(te),typeof Ee=="function")for(te=Ee.call(te),rt=0;!(Ne=te.next()).done;)Ne=Ne.value,Ee=Le+be(Ne,rt++),ct+=he(Ne,pe,Fe,Ee,lt);else if(Ne==="object")throw pe=String(te),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.");return ct}function ne(te,pe,Fe){if(te==null)return te;var Le=[],lt=0;return he(te,Le,"","",function(Ne){return pe.call(Fe,Ne,lt++)}),Le}function we(te){if(te._status===-1){var pe=te._result;pe=pe(),pe.then(function(Fe){(te._status===0||te._status===-1)&&(te._status=1,te._result=Fe)},function(Fe){(te._status===0||te._status===-1)&&(te._status=2,te._result=Fe)}),te._status===-1&&(te._status=0,te._result=pe)}if(te._status===1)return te._result.default;throw te._result}var ve={current:null},xe={transition:null},Se={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:xe,ReactCurrentOwner:q};function Ce(){throw Error("act(...) is not supported in production builds of React.")}return bt.Children={map:ne,forEach:function(te,pe,Fe){ne(te,function(){pe.apply(this,arguments)},Fe)},count:function(te){var pe=0;return ne(te,function(){pe++}),pe},toArray:function(te){return ne(te,function(pe){return pe})||[]},only:function(te){if(!fe(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},bt.Component=N,bt.Fragment=n,bt.Profiler=i,bt.PureComponent=F,bt.StrictMode=r,bt.Suspense=f,bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Se,bt.act=Ce,bt.cloneElement=function(te,pe,Fe){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var Le=I({},te.props),lt=te.key,Ne=te.ref,ct=te._owner;if(pe!=null){if(pe.ref!==void 0&&(Ne=pe.ref,ct=q.current),pe.key!==void 0&&(lt=""+pe.key),te.type&&te.type.defaultProps)var rt=te.type.defaultProps;for(Ee in pe)G.call(pe,Ee)&&!W.hasOwnProperty(Ee)&&(Le[Ee]=pe[Ee]===void 0&&rt!==void 0?rt[Ee]:pe[Ee])}var Ee=arguments.length-2;if(Ee===1)Le.children=Fe;else if(1<Ee){rt=Array(Ee);for(var et=0;et<Ee;et++)rt[et]=arguments[et+2];Le.children=rt}return{$$typeof:e,type:te.type,key:lt,ref:Ne,props:Le,_owner:ct}},bt.createContext=function(te){return te={$$typeof:a,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:o,_context:te},te.Consumer=te},bt.createElement=Z,bt.createFactory=function(te){var pe=Z.bind(null,te);return pe.type=te,pe},bt.createRef=function(){return{current:null}},bt.forwardRef=function(te){return{$$typeof:c,render:te}},bt.isValidElement=fe,bt.lazy=function(te){return{$$typeof:m,_payload:{_status:-1,_result:te},_init:we}},bt.memo=function(te,pe){return{$$typeof:d,type:te,compare:pe===void 0?null:pe}},bt.startTransition=function(te){var pe=xe.transition;xe.transition={};try{te()}finally{xe.transition=pe}},bt.unstable_act=Ce,bt.useCallback=function(te,pe){return ve.current.useCallback(te,pe)},bt.useContext=function(te){return ve.current.useContext(te)},bt.useDebugValue=function(){},bt.useDeferredValue=function(te){return ve.current.useDeferredValue(te)},bt.useEffect=function(te,pe){return ve.current.useEffect(te,pe)},bt.useId=function(){return ve.current.useId()},bt.useImperativeHandle=function(te,pe,Fe){return ve.current.useImperativeHandle(te,pe,Fe)},bt.useInsertionEffect=function(te,pe){return ve.current.useInsertionEffect(te,pe)},bt.useLayoutEffect=function(te,pe){return ve.current.useLayoutEffect(te,pe)},bt.useMemo=function(te,pe){return ve.current.useMemo(te,pe)},bt.useReducer=function(te,pe,Fe){return ve.current.useReducer(te,pe,Fe)},bt.useRef=function(te){return ve.current.useRef(te)},bt.useState=function(te){return ve.current.useState(te)},bt.useSyncExternalStore=function(te,pe,Fe){return ve.current.useSyncExternalStore(te,pe,Fe)},bt.useTransition=function(){return ve.current.useTransition()},bt.version="18.3.1",bt}var m2;function qu(){return m2||(m2=1,f1.exports=V6()),f1.exports}var g2;function $6(){if(g2)return Qc;g2=1;var e=qu(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(c,f,d){var m,v={},E=null,C=null;d!==void 0&&(E=""+d),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(C=f.ref);for(m in f)r.call(f,m)&&!o.hasOwnProperty(m)&&(v[m]=f[m]);if(c&&c.defaultProps)for(m in f=c.defaultProps,f)v[m]===void 0&&(v[m]=f[m]);return{$$typeof:t,type:c,key:E,ref:C,props:v,_owner:i.current}}return Qc.Fragment=n,Qc.jsx=a,Qc.jsxs=a,Qc}var v2;function z6(){return v2||(v2=1,d1.exports=$6()),d1.exports}var R=z6(),M=qu();const dn=ro(M),G6=Qx({__proto__:null,default:dn},[M]);var Ch={},h1={exports:{}},ai={},p1={exports:{}},m1={};var y2;function H6(){return y2||(y2=1,(function(e){function t(xe,Se){var Ce=xe.length;xe.push(Se);e:for(;0<Ce;){var te=Ce-1>>>1,pe=xe[te];if(0<i(pe,Se))xe[te]=Se,xe[Ce]=pe,Ce=te;else break e}}function n(xe){return xe.length===0?null:xe[0]}function r(xe){if(xe.length===0)return null;var Se=xe[0],Ce=xe.pop();if(Ce!==Se){xe[0]=Ce;e:for(var te=0,pe=xe.length,Fe=pe>>>1;te<Fe;){var Le=2*(te+1)-1,lt=xe[Le],Ne=Le+1,ct=xe[Ne];if(0>i(lt,Ce))Ne<pe&&0>i(ct,lt)?(xe[te]=ct,xe[Ne]=Ce,te=Ne):(xe[te]=lt,xe[Le]=Ce,te=Le);else if(Ne<pe&&0>i(ct,Ce))xe[te]=ct,xe[Ne]=Ce,te=Ne;else break e}}return Se}function i(xe,Se){var Ce=xe.sortIndex-Se.sortIndex;return Ce!==0?Ce:xe.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();e.unstable_now=function(){return a.now()-c}}var f=[],d=[],m=1,v=null,E=3,C=!1,I=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(xe){for(var Se=n(d);Se!==null;){if(Se.callback===null)r(d);else if(Se.startTime<=xe)r(d),Se.sortIndex=Se.expirationTime,t(f,Se);else break;Se=n(d)}}function V(xe){if(P=!1,L(xe),!I)if(n(f)!==null)I=!0,we(G);else{var Se=n(d);Se!==null&&ve(V,Se.startTime-xe)}}function G(xe,Se){I=!1,P&&(P=!1,D(Z),Z=-1),C=!0;var Ce=E;try{for(L(Se),v=n(f);v!==null&&(!(v.expirationTime>Se)||xe&&!se());){var te=v.callback;if(typeof te=="function"){v.callback=null,E=v.priorityLevel;var pe=te(v.expirationTime<=Se);Se=e.unstable_now(),typeof pe=="function"?v.callback=pe:v===n(f)&&r(f),L(Se)}else r(f);v=n(f)}if(v!==null)var Fe=!0;else{var Le=n(d);Le!==null&&ve(V,Le.startTime-Se),Fe=!1}return Fe}finally{v=null,E=Ce,C=!1}}var q=!1,W=null,Z=-1,X=5,fe=-1;function se(){return!(e.unstable_now()-fe<X)}function ae(){if(W!==null){var xe=e.unstable_now();fe=xe;var Se=!0;try{Se=W(!0,xe)}finally{Se?be():(q=!1,W=null)}}else q=!1}var be;if(typeof F=="function")be=function(){F(ae)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,ne=he.port2;he.port1.onmessage=ae,be=function(){ne.postMessage(null)}}else be=function(){N(ae,0)};function we(xe){W=xe,q||(q=!0,be())}function ve(xe,Se){Z=N(function(){xe(e.unstable_now())},Se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(xe){xe.callback=null},e.unstable_continueExecution=function(){I||C||(I=!0,we(G))},e.unstable_forceFrameRate=function(xe){0>xe||125<xe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<xe?Math.floor(1e3/xe):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(xe){switch(E){case 1:case 2:case 3:var Se=3;break;default:Se=E}var Ce=E;E=Se;try{return xe()}finally{E=Ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(xe,Se){switch(xe){case 1:case 2:case 3:case 4:case 5:break;default:xe=3}var Ce=E;E=xe;try{return Se()}finally{E=Ce}},e.unstable_scheduleCallback=function(xe,Se,Ce){var te=e.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?te+Ce:te):Ce=te,xe){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Ce+pe,xe={id:m++,callback:Se,priorityLevel:xe,startTime:Ce,expirationTime:pe,sortIndex:-1},Ce>te?(xe.sortIndex=Ce,t(d,xe),n(f)===null&&xe===n(d)&&(P?(D(Z),Z=-1):P=!0,ve(V,Ce-te))):(xe.sortIndex=pe,t(f,xe),I||C||(I=!0,we(G))),xe},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(xe){var Se=E;return function(){var Ce=E;E=Se;try{return xe.apply(this,arguments)}finally{E=Ce}}}})(m1)),m1}var x2;function q6(){return x2||(x2=1,p1.exports=H6()),p1.exports}var w2;function W6(){if(w2)return ai;w2=1;var e=qu(),t=q6();function n(l){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+l,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+l+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(l,p){a(l,p),a(l+"Capture",p)}function a(l,p){for(i[l]=p,l=0;l<p.length;l++)r.add(p[l])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function E(l){return f.call(v,l)?!0:f.call(m,l)?!1:d.test(l)?v[l]=!0:(m[l]=!0,!1)}function C(l,p,w,A){if(w!==null&&w.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return A?!1:w!==null?!w.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function I(l,p,w,A){if(p===null||typeof p>"u"||C(l,p,w,A))return!0;if(A)return!1;if(w!==null)switch(w.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function P(l,p,w,A,k,B,z){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=A,this.attributeNamespace=k,this.mustUseProperty=w,this.propertyName=l,this.type=p,this.sanitizeURL=B,this.removeEmptyString=z}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){N[l]=new P(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var p=l[0];N[p]=new P(p,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){N[l]=new P(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){N[l]=new P(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){N[l]=new P(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){N[l]=new P(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){N[l]=new P(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){N[l]=new P(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){N[l]=new P(l,5,!1,l.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function F(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var p=l.replace(D,F);N[p]=new P(p,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var p=l.replace(D,F);N[p]=new P(p,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var p=l.replace(D,F);N[p]=new P(p,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){N[l]=new P(l,1,!1,l.toLowerCase(),null,!1,!1)}),N.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){N[l]=new P(l,1,!1,l.toLowerCase(),null,!0,!0)});function L(l,p,w,A){var k=N.hasOwnProperty(p)?N[p]:null;(k!==null?k.type!==0:A||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(I(p,w,k,A)&&(w=null),A||k===null?E(p)&&(w===null?l.removeAttribute(p):l.setAttribute(p,""+w)):k.mustUseProperty?l[k.propertyName]=w===null?k.type===3?!1:"":w:(p=k.attributeName,A=k.attributeNamespace,w===null?l.removeAttribute(p):(k=k.type,w=k===3||k===4&&w===!0?"":""+w,A?l.setAttributeNS(A,p,w):l.setAttribute(p,w))))}var V=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),q=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),fe=Symbol.for("react.provider"),se=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),xe=Symbol.iterator;function Se(l){return l===null||typeof l!="object"?null:(l=xe&&l[xe]||l["@@iterator"],typeof l=="function"?l:null)}var Ce=Object.assign,te;function pe(l){if(te===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);te=p&&p[1]||""}return`
`+te+l}var Fe=!1;function Le(l,p){if(!l||Fe)return"";Fe=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(ye){var A=ye}Reflect.construct(l,[],p)}else{try{p.call()}catch(ye){A=ye}l.call(p.prototype)}else{try{throw Error()}catch(ye){A=ye}l()}}catch(ye){if(ye&&A&&typeof ye.stack=="string"){for(var k=ye.stack.split(`
`),B=A.stack.split(`
`),z=k.length-1,J=B.length-1;1<=z&&0<=J&&k[z]!==B[J];)J--;for(;1<=z&&0<=J;z--,J--)if(k[z]!==B[J]){if(z!==1||J!==1)do if(z--,J--,0>J||k[z]!==B[J]){var ee=`
`+k[z].replace(" at new "," at ");return l.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",l.displayName)),ee}while(1<=z&&0<=J);break}}}finally{Fe=!1,Error.prepareStackTrace=w}return(l=l?l.displayName||l.name:"")?pe(l):""}function lt(l){switch(l.tag){case 5:return pe(l.type);case 16:return pe("Lazy");case 13:return pe("Suspense");case 19:return pe("SuspenseList");case 0:case 2:case 15:return l=Le(l.type,!1),l;case 11:return l=Le(l.type.render,!1),l;case 1:return l=Le(l.type,!0),l;default:return""}}function Ne(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case W:return"Fragment";case q:return"Portal";case X:return"Profiler";case Z:return"StrictMode";case be:return"Suspense";case he:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case se:return(l.displayName||"Context")+".Consumer";case fe:return(l._context.displayName||"Context")+".Provider";case ae:var p=l.render;return l=l.displayName,l||(l=p.displayName||p.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case ne:return p=l.displayName||null,p!==null?p:Ne(l.type)||"Memo";case we:p=l._payload,l=l._init;try{return Ne(l(p))}catch{}}return null}function ct(l){var p=l.type;switch(l.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=p.render,l=l.displayName||l.name||"",p.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(p);case 8:return p===Z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function rt(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ee(l){var p=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function et(l){var p=Ee(l)?"checked":"value",w=Object.getOwnPropertyDescriptor(l.constructor.prototype,p),A=""+l[p];if(!l.hasOwnProperty(p)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var k=w.get,B=w.set;return Object.defineProperty(l,p,{configurable:!0,get:function(){return k.call(this)},set:function(z){A=""+z,B.call(this,z)}}),Object.defineProperty(l,p,{enumerable:w.enumerable}),{getValue:function(){return A},setValue:function(z){A=""+z},stopTracking:function(){l._valueTracker=null,delete l[p]}}}}function Me(l){l._valueTracker||(l._valueTracker=et(l))}function _e(l){if(!l)return!1;var p=l._valueTracker;if(!p)return!0;var w=p.getValue(),A="";return l&&(A=Ee(l)?l.checked?"true":"false":l.value),l=A,l!==w?(p.setValue(l),!0):!1}function Ke(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function dt(l,p){var w=p.checked;return Ce({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??l._wrapperState.initialChecked})}function It(l,p){var w=p.defaultValue==null?"":p.defaultValue,A=p.checked!=null?p.checked:p.defaultChecked;w=rt(p.value!=null?p.value:w),l._wrapperState={initialChecked:A,initialValue:w,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function An(l,p){p=p.checked,p!=null&&L(l,"checked",p,!1)}function $t(l,p){An(l,p);var w=rt(p.value),A=p.type;if(w!=null)A==="number"?(w===0&&l.value===""||l.value!=w)&&(l.value=""+w):l.value!==""+w&&(l.value=""+w);else if(A==="submit"||A==="reset"){l.removeAttribute("value");return}p.hasOwnProperty("value")?_t(l,p.type,w):p.hasOwnProperty("defaultValue")&&_t(l,p.type,rt(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(l.defaultChecked=!!p.defaultChecked)}function Rt(l,p,w){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var A=p.type;if(!(A!=="submit"&&A!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+l._wrapperState.initialValue,w||p===l.value||(l.value=p),l.defaultValue=p}w=l.name,w!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,w!==""&&(l.name=w)}function _t(l,p,w){(p!=="number"||Ke(l.ownerDocument)!==l)&&(w==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+w&&(l.defaultValue=""+w))}var Po=Array.isArray;function $e(l,p,w,A){if(l=l.options,p){p={};for(var k=0;k<w.length;k++)p["$"+w[k]]=!0;for(w=0;w<l.length;w++)k=p.hasOwnProperty("$"+l[w].value),l[w].selected!==k&&(l[w].selected=k),k&&A&&(l[w].defaultSelected=!0)}else{for(w=""+rt(w),p=null,k=0;k<l.length;k++){if(l[k].value===w){l[k].selected=!0,A&&(l[k].defaultSelected=!0);return}p!==null||l[k].disabled||(p=l[k])}p!==null&&(p.selected=!0)}}function Bs(l,p){if(p.dangerouslySetInnerHTML!=null)throw Error(n(91));return Ce({},p,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function fc(l,p){var w=p.value;if(w==null){if(w=p.children,p=p.defaultValue,w!=null){if(p!=null)throw Error(n(92));if(Po(w)){if(1<w.length)throw Error(n(93));w=w[0]}p=w}p==null&&(p=""),w=p}l._wrapperState={initialValue:rt(w)}}function Di(l,p){var w=rt(p.value),A=rt(p.defaultValue);w!=null&&(w=""+w,w!==l.value&&(l.value=w),p.defaultValue==null&&l.defaultValue!==w&&(l.defaultValue=w)),A!=null&&(l.defaultValue=""+A)}function Ll(l){var p=l.textContent;p===l._wrapperState.initialValue&&p!==""&&p!==null&&(l.value=p)}function Zr(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bl(l,p){return l==null||l==="http://www.w3.org/1999/xhtml"?Zr(p):l==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var pi,lr=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,w,A,k){MSApp.execUnsafeLocalFunction(function(){return l(p,w,A,k)})}:l})(function(l,p){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=p;else{for(pi=pi||document.createElement("div"),pi.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=pi.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;p.firstChild;)l.appendChild(p.firstChild)}});function Fs(l,p){if(p){var w=l.firstChild;if(w&&w===l.lastChild&&w.nodeType===3){w.nodeValue=p;return}}l.textContent=p}var No={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gm=["Webkit","ms","Moz","O"];Object.keys(No).forEach(function(l){Gm.forEach(function(p){p=p+l.charAt(0).toUpperCase()+l.substring(1),No[p]=No[l]})});function xn(l,p,w){return p==null||typeof p=="boolean"||p===""?"":w||typeof p!="number"||p===0||No.hasOwnProperty(l)&&No[l]?(""+p).trim():p+"px"}function Be(l,p){l=l.style;for(var w in p)if(p.hasOwnProperty(w)){var A=w.indexOf("--")===0,k=xn(w,p[w],A);w==="float"&&(w="cssFloat"),A?l.setProperty(w,k):l[w]=k}}var Mn=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lt(l,p){if(p){if(Mn[l]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(n(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(n(61))}if(p.style!=null&&typeof p.style!="object")throw Error(n(62))}}function Qt(l,p){if(l.indexOf("-")===-1)return typeof p.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ko=null;function Ia(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Fl=null,Et=null,Qr=null;function hc(l){if(l=Fc(l)){if(typeof Fl!="function")throw Error(n(280));var p=l.stateNode;p&&(p=Uf(p),Fl(l.stateNode,l.type,p))}}function pc(l){Et?Qr?Qr.push(l):Qr=[l]:Et=l}function ei(){if(Et){var l=Et,p=Qr;if(Qr=Et=null,hc(l),p)for(l=0;l<p.length;l++)hc(p[l])}}function Ul(l,p){return l(p)}function Xn(){}var Ro=!1;function Pa(l,p,w){if(Ro)return l(p,w);Ro=!0;try{return Ul(l,p,w)}finally{Ro=!1,(Et!==null||Qr!==null)&&(Xn(),ei())}}function Rr(l,p){var w=l.stateNode;if(w===null)return null;var A=Uf(w);if(A===null)return null;w=A[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(l=l.type,A=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!A;break e;default:l=!1}if(l)return null;if(w&&typeof w!="function")throw Error(n(231,p,typeof w));return w}var mc=!1;if(c)try{var mi={};Object.defineProperty(mi,"passive",{get:function(){mc=!0}}),window.addEventListener("test",mi,mi),window.removeEventListener("test",mi,mi)}catch{mc=!1}function gc(l,p,w,A,k,B,z,J,ee){var ye=Array.prototype.slice.call(arguments,3);try{p.apply(w,ye)}catch(Pe){this.onError(Pe)}}var $n=!1,Li=null,wr=!1,je=null,Us={onError:function(l){$n=!0,Li=l}};function vc(l,p,w,A,k,B,z,J,ee){$n=!1,Li=null,gc.apply(Us,arguments)}function Or(l,p,w,A,k,B,z,J,ee){if(vc.apply(this,arguments),$n){if($n){var ye=Li;$n=!1,Li=null}else throw Error(n(198));wr||(wr=!0,je=ye)}}function ti(l){var p=l,w=l;if(l.alternate)for(;p.return;)p=p.return;else{l=p;do p=l,(p.flags&4098)!==0&&(w=p.return),l=p.return;while(l)}return p.tag===3?w:null}function Na(l){if(l.tag===13){var p=l.memoizedState;if(p===null&&(l=l.alternate,l!==null&&(p=l.memoizedState)),p!==null)return p.dehydrated}return null}function Ra(l){if(ti(l)!==l)throw Error(n(188))}function Bi(l){var p=l.alternate;if(!p){if(p=ti(l),p===null)throw Error(n(188));return p!==l?null:l}for(var w=l,A=p;;){var k=w.return;if(k===null)break;var B=k.alternate;if(B===null){if(A=k.return,A!==null){w=A;continue}break}if(k.child===B.child){for(B=k.child;B;){if(B===w)return Ra(k),l;if(B===A)return Ra(k),p;B=B.sibling}throw Error(n(188))}if(w.return!==A.return)w=k,A=B;else{for(var z=!1,J=k.child;J;){if(J===w){z=!0,w=k,A=B;break}if(J===A){z=!0,A=k,w=B;break}J=J.sibling}if(!z){for(J=B.child;J;){if(J===w){z=!0,w=B,A=k;break}if(J===A){z=!0,A=B,w=k;break}J=J.sibling}if(!z)throw Error(n(189))}}if(w.alternate!==A)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?l:p}function yf(l){return l=Bi(l),l!==null?xf(l):null}function xf(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var p=xf(l);if(p!==null)return p;l=l.sibling}return null}var gi=t.unstable_scheduleCallback,ur=t.unstable_cancelCallback,en=t.unstable_shouldYield,wf=t.unstable_requestPaint,Ut=t.unstable_now,yc=t.unstable_getCurrentPriorityLevel,Ae=t.unstable_ImmediatePriority,Ef=t.unstable_UserBlockingPriority,Kt=t.unstable_NormalPriority,js=t.unstable_LowPriority,bf=t.unstable_IdlePriority,Tt=null,vt=null;function St(l){if(vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Tt,l,void 0,(l.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:Dn,xc=Math.log,wc=Math.LN2;function Dn(l){return l>>>=0,l===0?32:31-(xc(l)/wc|0)|0}var vi=64,jl=4194304;function Yt(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function yi(l,p){var w=l.pendingLanes;if(w===0)return 0;var A=0,k=l.suspendedLanes,B=l.pingedLanes,z=w&268435455;if(z!==0){var J=z&~k;J!==0?A=Yt(J):(B&=z,B!==0&&(A=Yt(B)))}else z=w&~k,z!==0?A=Yt(z):B!==0&&(A=Yt(B));if(A===0)return 0;if(p!==0&&p!==A&&(p&k)===0&&(k=A&-A,B=p&-p,k>=B||k===16&&(B&4194240)!==0))return p;if((A&4)!==0&&(A|=w&16),p=l.entangledLanes,p!==0)for(l=l.entanglements,p&=A;0<p;)w=31-Gr(p),k=1<<w,A|=l[w],p&=~k;return A}function Hm(l,p){switch(l){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vs(l,p){for(var w=l.suspendedLanes,A=l.pingedLanes,k=l.expirationTimes,B=l.pendingLanes;0<B;){var z=31-Gr(B),J=1<<z,ee=k[z];ee===-1?((J&w)===0||(J&A)!==0)&&(k[z]=Hm(J,p)):ee<=p&&(l.expiredLanes|=J),B&=~J}}function jt(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Jn(){var l=vi;return vi<<=1,(vi&4194240)===0&&(vi=64),l}function le(l){for(var p=[],w=0;31>w;w++)p.push(l);return p}function K(l,p,w){l.pendingLanes|=p,p!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,p=31-Gr(p),l[p]=w}function tt(l,p){var w=l.pendingLanes&~p;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=p,l.mutableReadLanes&=p,l.entangledLanes&=p,p=l.entanglements;var A=l.eventTimes;for(l=l.expirationTimes;0<w;){var k=31-Gr(w),B=1<<k;p[k]=0,A[k]=-1,l[k]=-1,w&=~B}}function Tn(l,p){var w=l.entangledLanes|=p;for(l=l.entanglements;w;){var A=31-Gr(w),k=1<<A;k&p|l[A]&p&&(l[A]|=p),w&=~k}}var yt=0;function _f(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var Vl,kr,nt,tn,Ec,bc=!1,$s=[],xi=null,Fi=null,Oo=null,hn=new Map,so=new Map,Er=[],at="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sf(l,p){switch(l){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":hn.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":so.delete(p.pointerId)}}function ht(l,p,w,A,k,B){return l===null||l.nativeEvent!==B?(l={blockedOn:p,domEventName:w,eventSystemFlags:A,nativeEvent:B,targetContainers:[k]},p!==null&&(p=Fc(p),p!==null&&kr(p)),l):(l.eventSystemFlags|=A,p=l.targetContainers,k!==null&&p.indexOf(k)===-1&&p.push(k),l)}function Zn(l,p,w,A,k){switch(p){case"focusin":return xi=ht(xi,l,p,w,A,k),!0;case"dragenter":return Fi=ht(Fi,l,p,w,A,k),!0;case"mouseover":return Oo=ht(Oo,l,p,w,A,k),!0;case"pointerover":var B=k.pointerId;return hn.set(B,ht(hn.get(B)||null,l,p,w,A,k)),!0;case"gotpointercapture":return B=k.pointerId,so.set(B,ht(so.get(B)||null,l,p,w,A,k)),!0}return!1}function Cf(l){var p=Va(l.target);if(p!==null){var w=ti(p);if(w!==null){if(p=w.tag,p===13){if(p=Na(w),p!==null){l.blockedOn=p,Ec(l.priority,function(){nt(w)});return}}else if(p===3&&w.stateNode.current.memoizedState.isDehydrated){l.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}l.blockedOn=null}function zs(l){if(l.blockedOn!==null)return!1;for(var p=l.targetContainers;0<p.length;){var w=$l(l.domEventName,l.eventSystemFlags,p[0],l.nativeEvent);if(w===null){w=l.nativeEvent;var A=new w.constructor(w.type,w);Ko=A,w.target.dispatchEvent(A),Ko=null}else return p=Fc(w),p!==null&&kr(p),l.blockedOn=w,!1;p.shift()}return!0}function _c(l,p,w){zs(l)&&w.delete(p)}function Yo(){bc=!1,xi!==null&&zs(xi)&&(xi=null),Fi!==null&&zs(Fi)&&(Fi=null),Oo!==null&&zs(Oo)&&(Oo=null),hn.forEach(_c),so.forEach(_c)}function Oa(l,p){l.blockedOn===p&&(l.blockedOn=null,bc||(bc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Yo)))}function ao(l){function p(k){return Oa(k,l)}if(0<$s.length){Oa($s[0],l);for(var w=1;w<$s.length;w++){var A=$s[w];A.blockedOn===l&&(A.blockedOn=null)}}for(xi!==null&&Oa(xi,l),Fi!==null&&Oa(Fi,l),Oo!==null&&Oa(Oo,l),hn.forEach(p),so.forEach(p),w=0;w<Er.length;w++)A=Er[w],A.blockedOn===l&&(A.blockedOn=null);for(;0<Er.length&&(w=Er[0],w.blockedOn===null);)Cf(w),w.blockedOn===null&&Er.shift()}var Ui=V.ReactCurrentBatchConfig,ko=!0;function Af(l,p,w,A){var k=yt,B=Ui.transition;Ui.transition=null;try{yt=1,Xo(l,p,w,A)}finally{yt=k,Ui.transition=B}}function ka(l,p,w,A){var k=yt,B=Ui.transition;Ui.transition=null;try{yt=4,Xo(l,p,w,A)}finally{yt=k,Ui.transition=B}}function Xo(l,p,w,A){if(ko){var k=$l(l,p,w,A);if(k===null)tg(l,p,A,Qn,w),Sf(l,A);else if(Zn(k,l,p,w,A))A.stopPropagation();else if(Sf(l,A),p&4&&-1<at.indexOf(l)){for(;k!==null;){var B=Fc(k);if(B!==null&&Vl(B),B=$l(l,p,w,A),B===null&&tg(l,p,A,Qn,w),B===k)break;k=B}k!==null&&A.stopPropagation()}else tg(l,p,A,null,w)}}var Qn=null;function $l(l,p,w,A){if(Qn=null,l=Ia(A),l=Va(l),l!==null)if(p=ti(l),p===null)l=null;else if(w=p.tag,w===13){if(l=Na(p),l!==null)return l;l=null}else if(w===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;l=null}else p!==l&&(l=null);return Qn=l,null}function Sc(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yc()){case Ae:return 1;case Ef:return 4;case Kt:case js:return 16;case bf:return 536870912;default:return 16}default:return 16}}var lo=null,Cc=null,zl=null;function Tf(){if(zl)return zl;var l,p=Cc,w=p.length,A,k="value"in lo?lo.value:lo.textContent,B=k.length;for(l=0;l<w&&p[l]===k[l];l++);var z=w-l;for(A=1;A<=z&&p[w-A]===k[B-A];A++);return zl=k.slice(l,1<A?1-A:void 0)}function Pt(l){var p=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&p===13&&(l=13)):l=p,l===10&&(l=13),32<=l||l===13?l:0}function Ma(){return!0}function Da(){return!1}function In(l){function p(w,A,k,B,z){this._reactName=w,this._targetInst=k,this.type=A,this.nativeEvent=B,this.target=z,this.currentTarget=null;for(var J in l)l.hasOwnProperty(J)&&(w=l[J],this[J]=w?w(B):B[J]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?Ma:Da,this.isPropagationStopped=Da,this}return Ce(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),p}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ge=In(Gs),mt=Ce({},Gs,{view:0,detail:0}),er=In(mt),Hs,Gl,La,Hl=Ce({},mt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ba,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==La&&(La&&l.type==="mousemove"?(Hs=l.screenX-La.screenX,Gl=l.screenY-La.screenY):Gl=Hs=0,La=l),Hs)},movementY:function(l){return"movementY"in l?l.movementY:Gl}}),If=In(Hl),Ac=Ce({},Hl,{dataTransfer:0}),Ln=In(Ac),Tc=Ce({},mt,{relatedTarget:0}),nn=In(Tc),ql=Ce({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),Jo=In(ql),zt=Ce({},Gs,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),it=In(zt),qm=Ce({},Gs,{data:0}),qt=In(qm),Zo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ji(l){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(l):(l=Wm[l])?!!p[l]:!1}function Ba(){return ji}var Pf=Ce({},mt,{key:function(l){if(l.key){var p=Zo[l.key]||l.key;if(p!=="Unidentified")return p}return l.type==="keypress"?(l=Pt(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?qs[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ba,charCode:function(l){return l.type==="keypress"?Pt(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Pt(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Ic=In(Pf),Nf=Ce({},Hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pc=In(Nf),Km=Ce({},mt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ba}),Ws=In(Km),Nc=Ce({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ym=In(Nc),Fa=Ce({},Hl,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Xm=In(Fa),Mo=[9,13,27,32],Ks=c&&"CompositionEvent"in window,cr=null;c&&"documentMode"in document&&(cr=document.documentMode);var Rf=c&&"TextEvent"in window&&!cr,wi=c&&(!Ks||cr&&8<cr&&11>=cr),Of=" ",Wl=!1;function kf(l,p){switch(l){case"keyup":return Mo.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rc(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var br=!1;function Jm(l,p){switch(l){case"compositionend":return Rc(p);case"keypress":return p.which!==32?null:(Wl=!0,Of);case"textInput":return l=p.data,l===Of&&Wl?null:l;default:return null}}function Oc(l,p){if(br)return l==="compositionend"||!Ks&&kf(l,p)?(l=Tf(),zl=Cc=lo=null,br=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return wi&&p.locale!=="ko"?null:p.data;default:return null}}var Ua={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function At(l){var p=l&&l.nodeName&&l.nodeName.toLowerCase();return p==="input"?!!Ua[l.type]:p==="textarea"}function ja(l,p,w,A){pc(A),p=Lf(p,"onChange"),0<p.length&&(w=new ge("onChange","change",null,w,A),l.push({event:w,listeners:p}))}var j=null,s=null;function u(l){Nb(l,0)}function h(l){var p=Xl(l);if(_e(p))return l}function g(l,p){if(l==="change")return p}var y=!1;if(c){var x;if(c){var _="oninput"in document;if(!_){var T=document.createElement("div");T.setAttribute("oninput","return;"),_=typeof T.oninput=="function"}x=_}else x=!1;y=x&&(!document.documentMode||9<document.documentMode)}function O(){j&&(j.detachEvent("onpropertychange",U),s=j=null)}function U(l){if(l.propertyName==="value"&&h(s)){var p=[];ja(p,s,l,Ia(l)),Pa(u,p)}}function $(l,p,w){l==="focusin"?(O(),j=p,s=w,j.attachEvent("onpropertychange",U)):l==="focusout"&&O()}function H(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return h(s)}function Y(l,p){if(l==="click")return h(p)}function Q(l,p){if(l==="input"||l==="change")return h(p)}function re(l,p){return l===p&&(l!==0||1/l===1/p)||l!==l&&p!==p}var oe=typeof Object.is=="function"?Object.is:re;function me(l,p){if(oe(l,p))return!0;if(typeof l!="object"||l===null||typeof p!="object"||p===null)return!1;var w=Object.keys(l),A=Object.keys(p);if(w.length!==A.length)return!1;for(A=0;A<w.length;A++){var k=w[A];if(!f.call(p,k)||!oe(l[k],p[k]))return!1}return!0}function Oe(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function ke(l,p){var w=Oe(l);l=0;for(var A;w;){if(w.nodeType===3){if(A=l+w.textContent.length,l<=p&&A>=p)return{node:w,offset:p-l};l=A}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Oe(w)}}function Ie(l,p){return l&&p?l===p?!0:l&&l.nodeType===3?!1:p&&p.nodeType===3?Ie(l,p.parentNode):"contains"in l?l.contains(p):l.compareDocumentPosition?!!(l.compareDocumentPosition(p)&16):!1:!1}function wt(){for(var l=window,p=Ke();p instanceof l.HTMLIFrameElement;){try{var w=typeof p.contentWindow.location.href=="string"}catch{w=!1}if(w)l=p.contentWindow;else break;p=Ke(l.document)}return p}function pt(l){var p=l&&l.nodeName&&l.nodeName.toLowerCase();return p&&(p==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||p==="textarea"||l.contentEditable==="true")}function Mr(l){var p=wt(),w=l.focusedElem,A=l.selectionRange;if(p!==w&&w&&w.ownerDocument&&Ie(w.ownerDocument.documentElement,w)){if(A!==null&&pt(w)){if(p=A.start,l=A.end,l===void 0&&(l=p),"selectionStart"in w)w.selectionStart=p,w.selectionEnd=Math.min(l,w.value.length);else if(l=(p=w.ownerDocument||document)&&p.defaultView||window,l.getSelection){l=l.getSelection();var k=w.textContent.length,B=Math.min(A.start,k);A=A.end===void 0?B:Math.min(A.end,k),!l.extend&&B>A&&(k=A,A=B,B=k),k=ke(w,B);var z=ke(w,A);k&&z&&(l.rangeCount!==1||l.anchorNode!==k.node||l.anchorOffset!==k.offset||l.focusNode!==z.node||l.focusOffset!==z.offset)&&(p=p.createRange(),p.setStart(k.node,k.offset),l.removeAllRanges(),B>A?(l.addRange(p),l.extend(z.node,z.offset)):(p.setEnd(z.node,z.offset),l.addRange(p)))}}for(p=[],l=w;l=l.parentNode;)l.nodeType===1&&p.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<p.length;w++)l=p[w],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var Ei=c&&"documentMode"in document&&11>=document.documentMode,Bn=null,Bt=null,wn=null,_r=!1;function Qo(l,p,w){var A=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;_r||Bn==null||Bn!==Ke(A)||(A=Bn,"selectionStart"in A&&pt(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),wn&&me(wn,A)||(wn=A,A=Lf(Bt,"onSelect"),0<A.length&&(p=new ge("onSelect","select",null,p,w),l.push({event:p,listeners:A}),p.target=Bn)))}function uo(l,p){var w={};return w[l.toLowerCase()]=p.toLowerCase(),w["Webkit"+l]="webkit"+p,w["Moz"+l]="moz"+p,w}var Ys={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionend:uo("Transition","TransitionEnd")},kc={},bb={};c&&(bb=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function Mf(l){if(kc[l])return kc[l];if(!Ys[l])return l;var p=Ys[l],w;for(w in p)if(p.hasOwnProperty(w)&&w in bb)return kc[l]=p[w];return l}var _b=Mf("animationend"),Sb=Mf("animationiteration"),Cb=Mf("animationstart"),Ab=Mf("transitionend"),Tb=new Map,Ib="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(l,p){Tb.set(l,p),o(p,[l])}for(var Zm=0;Zm<Ib.length;Zm++){var Qm=Ib[Zm],XD=Qm.toLowerCase(),JD=Qm[0].toUpperCase()+Qm.slice(1);Xs(XD,"on"+JD)}Xs(_b,"onAnimationEnd"),Xs(Sb,"onAnimationIteration"),Xs(Cb,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(Ab,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mc));function Pb(l,p,w){var A=l.type||"unknown-event";l.currentTarget=w,Or(A,p,void 0,l),l.currentTarget=null}function Nb(l,p){p=(p&4)!==0;for(var w=0;w<l.length;w++){var A=l[w],k=A.event;A=A.listeners;e:{var B=void 0;if(p)for(var z=A.length-1;0<=z;z--){var J=A[z],ee=J.instance,ye=J.currentTarget;if(J=J.listener,ee!==B&&k.isPropagationStopped())break e;Pb(k,J,ye),B=ee}else for(z=0;z<A.length;z++){if(J=A[z],ee=J.instance,ye=J.currentTarget,J=J.listener,ee!==B&&k.isPropagationStopped())break e;Pb(k,J,ye),B=ee}}}if(wr)throw l=je,wr=!1,je=null,l}function ln(l,p){var w=p[ag];w===void 0&&(w=p[ag]=new Set);var A=l+"__bubble";w.has(A)||(Rb(p,l,2,!1),w.add(A))}function eg(l,p,w){var A=0;p&&(A|=4),Rb(w,l,A,p)}var Df="_reactListening"+Math.random().toString(36).slice(2);function Dc(l){if(!l[Df]){l[Df]=!0,r.forEach(function(w){w!=="selectionchange"&&(ZD.has(w)||eg(w,!1,l),eg(w,!0,l))});var p=l.nodeType===9?l:l.ownerDocument;p===null||p[Df]||(p[Df]=!0,eg("selectionchange",!1,p))}}function Rb(l,p,w,A){switch(Sc(p)){case 1:var k=Af;break;case 4:k=ka;break;default:k=Xo}w=k.bind(null,p,w,l),k=void 0,!mc||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(k=!0),A?k!==void 0?l.addEventListener(p,w,{capture:!0,passive:k}):l.addEventListener(p,w,!0):k!==void 0?l.addEventListener(p,w,{passive:k}):l.addEventListener(p,w,!1)}function tg(l,p,w,A,k){var B=A;if((p&1)===0&&(p&2)===0&&A!==null)e:for(;;){if(A===null)return;var z=A.tag;if(z===3||z===4){var J=A.stateNode.containerInfo;if(J===k||J.nodeType===8&&J.parentNode===k)break;if(z===4)for(z=A.return;z!==null;){var ee=z.tag;if((ee===3||ee===4)&&(ee=z.stateNode.containerInfo,ee===k||ee.nodeType===8&&ee.parentNode===k))return;z=z.return}for(;J!==null;){if(z=Va(J),z===null)return;if(ee=z.tag,ee===5||ee===6){A=B=z;continue e}J=J.parentNode}}A=A.return}Pa(function(){var ye=B,Pe=Ia(w),Re=[];e:{var Te=Tb.get(l);if(Te!==void 0){var Ve=ge,Ye=l;switch(l){case"keypress":if(Pt(w)===0)break e;case"keydown":case"keyup":Ve=Ic;break;case"focusin":Ye="focus",Ve=nn;break;case"focusout":Ye="blur",Ve=nn;break;case"beforeblur":case"afterblur":Ve=nn;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=If;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=Ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=Ws;break;case _b:case Sb:case Cb:Ve=Jo;break;case Ab:Ve=Ym;break;case"scroll":Ve=er;break;case"wheel":Ve=Xm;break;case"copy":case"cut":case"paste":Ve=it;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Pc}var Xe=(p&4)!==0,Fn=!Xe&&l==="scroll",ue=Xe?Te!==null?Te+"Capture":null:Te;Xe=[];for(var ie=ye,ce;ie!==null;){ce=ie;var De=ce.stateNode;if(ce.tag===5&&De!==null&&(ce=De,ue!==null&&(De=Rr(ie,ue),De!=null&&Xe.push(Lc(ie,De,ce)))),Fn)break;ie=ie.return}0<Xe.length&&(Te=new Ve(Te,Ye,null,w,Pe),Re.push({event:Te,listeners:Xe}))}}if((p&7)===0){e:{if(Te=l==="mouseover"||l==="pointerover",Ve=l==="mouseout"||l==="pointerout",Te&&w!==Ko&&(Ye=w.relatedTarget||w.fromElement)&&(Va(Ye)||Ye[es]))break e;if((Ve||Te)&&(Te=Pe.window===Pe?Pe:(Te=Pe.ownerDocument)?Te.defaultView||Te.parentWindow:window,Ve?(Ye=w.relatedTarget||w.toElement,Ve=ye,Ye=Ye?Va(Ye):null,Ye!==null&&(Fn=ti(Ye),Ye!==Fn||Ye.tag!==5&&Ye.tag!==6)&&(Ye=null)):(Ve=null,Ye=ye),Ve!==Ye)){if(Xe=If,De="onMouseLeave",ue="onMouseEnter",ie="mouse",(l==="pointerout"||l==="pointerover")&&(Xe=Pc,De="onPointerLeave",ue="onPointerEnter",ie="pointer"),Fn=Ve==null?Te:Xl(Ve),ce=Ye==null?Te:Xl(Ye),Te=new Xe(De,ie+"leave",Ve,w,Pe),Te.target=Fn,Te.relatedTarget=ce,De=null,Va(Pe)===ye&&(Xe=new Xe(ue,ie+"enter",Ye,w,Pe),Xe.target=ce,Xe.relatedTarget=Fn,De=Xe),Fn=De,Ve&&Ye)t:{for(Xe=Ve,ue=Ye,ie=0,ce=Xe;ce;ce=Kl(ce))ie++;for(ce=0,De=ue;De;De=Kl(De))ce++;for(;0<ie-ce;)Xe=Kl(Xe),ie--;for(;0<ce-ie;)ue=Kl(ue),ce--;for(;ie--;){if(Xe===ue||ue!==null&&Xe===ue.alternate)break t;Xe=Kl(Xe),ue=Kl(ue)}Xe=null}else Xe=null;Ve!==null&&Ob(Re,Te,Ve,Xe,!1),Ye!==null&&Fn!==null&&Ob(Re,Fn,Ye,Xe,!0)}}e:{if(Te=ye?Xl(ye):window,Ve=Te.nodeName&&Te.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Te.type==="file")var Ze=g;else if(At(Te))if(y)Ze=Q;else{Ze=H;var ot=$}else(Ve=Te.nodeName)&&Ve.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(Ze=Y);if(Ze&&(Ze=Ze(l,ye))){ja(Re,Ze,w,Pe);break e}ot&&ot(l,Te,ye),l==="focusout"&&(ot=Te._wrapperState)&&ot.controlled&&Te.type==="number"&&_t(Te,"number",Te.value)}switch(ot=ye?Xl(ye):window,l){case"focusin":(At(ot)||ot.contentEditable==="true")&&(Bn=ot,Bt=ye,wn=null);break;case"focusout":wn=Bt=Bn=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Qo(Re,w,Pe);break;case"selectionchange":if(Ei)break;case"keydown":case"keyup":Qo(Re,w,Pe)}var st;if(Ks)e:{switch(l){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else br?kf(l,w)&&(ft="onCompositionEnd"):l==="keydown"&&w.keyCode===229&&(ft="onCompositionStart");ft&&(wi&&w.locale!=="ko"&&(br||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&br&&(st=Tf()):(lo=Pe,Cc="value"in lo?lo.value:lo.textContent,br=!0)),ot=Lf(ye,ft),0<ot.length&&(ft=new qt(ft,l,null,w,Pe),Re.push({event:ft,listeners:ot}),st?ft.data=st:(st=Rc(w),st!==null&&(ft.data=st)))),(st=Rf?Jm(l,w):Oc(l,w))&&(ye=Lf(ye,"onBeforeInput"),0<ye.length&&(Pe=new qt("onBeforeInput","beforeinput",null,w,Pe),Re.push({event:Pe,listeners:ye}),Pe.data=st))}Nb(Re,p)})}function Lc(l,p,w){return{instance:l,listener:p,currentTarget:w}}function Lf(l,p){for(var w=p+"Capture",A=[];l!==null;){var k=l,B=k.stateNode;k.tag===5&&B!==null&&(k=B,B=Rr(l,w),B!=null&&A.unshift(Lc(l,B,k)),B=Rr(l,p),B!=null&&A.push(Lc(l,B,k))),l=l.return}return A}function Kl(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Ob(l,p,w,A,k){for(var B=p._reactName,z=[];w!==null&&w!==A;){var J=w,ee=J.alternate,ye=J.stateNode;if(ee!==null&&ee===A)break;J.tag===5&&ye!==null&&(J=ye,k?(ee=Rr(w,B),ee!=null&&z.unshift(Lc(w,ee,J))):k||(ee=Rr(w,B),ee!=null&&z.push(Lc(w,ee,J)))),w=w.return}z.length!==0&&l.push({event:p,listeners:z})}var QD=/\r\n?/g,e6=/\u0000|\uFFFD/g;function kb(l){return(typeof l=="string"?l:""+l).replace(QD,`
`).replace(e6,"")}function Bf(l,p,w){if(p=kb(p),kb(l)!==p&&w)throw Error(n(425))}function Ff(){}var ng=null,rg=null;function ig(l,p){return l==="textarea"||l==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var og=typeof setTimeout=="function"?setTimeout:void 0,t6=typeof clearTimeout=="function"?clearTimeout:void 0,Mb=typeof Promise=="function"?Promise:void 0,n6=typeof queueMicrotask=="function"?queueMicrotask:typeof Mb<"u"?function(l){return Mb.resolve(null).then(l).catch(r6)}:og;function r6(l){setTimeout(function(){throw l})}function sg(l,p){var w=p,A=0;do{var k=w.nextSibling;if(l.removeChild(w),k&&k.nodeType===8)if(w=k.data,w==="/$"){if(A===0){l.removeChild(k),ao(p);return}A--}else w!=="$"&&w!=="$?"&&w!=="$!"||A++;w=k}while(w);ao(p)}function Js(l){for(;l!=null;l=l.nextSibling){var p=l.nodeType;if(p===1||p===3)break;if(p===8){if(p=l.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return l}function Db(l){l=l.previousSibling;for(var p=0;l;){if(l.nodeType===8){var w=l.data;if(w==="$"||w==="$!"||w==="$?"){if(p===0)return l;p--}else w==="/$"&&p++}l=l.previousSibling}return null}var Yl=Math.random().toString(36).slice(2),Do="__reactFiber$"+Yl,Bc="__reactProps$"+Yl,es="__reactContainer$"+Yl,ag="__reactEvents$"+Yl,i6="__reactListeners$"+Yl,o6="__reactHandles$"+Yl;function Va(l){var p=l[Do];if(p)return p;for(var w=l.parentNode;w;){if(p=w[es]||w[Do]){if(w=p.alternate,p.child!==null||w!==null&&w.child!==null)for(l=Db(l);l!==null;){if(w=l[Do])return w;l=Db(l)}return p}l=w,w=l.parentNode}return null}function Fc(l){return l=l[Do]||l[es],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Xl(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function Uf(l){return l[Bc]||null}var lg=[],Jl=-1;function Zs(l){return{current:l}}function un(l){0>Jl||(l.current=lg[Jl],lg[Jl]=null,Jl--)}function rn(l,p){Jl++,lg[Jl]=l.current,l.current=p}var Qs={},Dr=Zs(Qs),ni=Zs(!1),$a=Qs;function Zl(l,p){var w=l.type.contextTypes;if(!w)return Qs;var A=l.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===p)return A.__reactInternalMemoizedMaskedChildContext;var k={},B;for(B in w)k[B]=p[B];return A&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=p,l.__reactInternalMemoizedMaskedChildContext=k),k}function ri(l){return l=l.childContextTypes,l!=null}function jf(){un(ni),un(Dr)}function Lb(l,p,w){if(Dr.current!==Qs)throw Error(n(168));rn(Dr,p),rn(ni,w)}function Bb(l,p,w){var A=l.stateNode;if(p=p.childContextTypes,typeof A.getChildContext!="function")return w;A=A.getChildContext();for(var k in A)if(!(k in p))throw Error(n(108,ct(l)||"Unknown",k));return Ce({},w,A)}function Vf(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Qs,$a=Dr.current,rn(Dr,l),rn(ni,ni.current),!0}function Fb(l,p,w){var A=l.stateNode;if(!A)throw Error(n(169));w?(l=Bb(l,p,$a),A.__reactInternalMemoizedMergedChildContext=l,un(ni),un(Dr),rn(Dr,l)):un(ni),rn(ni,w)}var ts=null,$f=!1,ug=!1;function Ub(l){ts===null?ts=[l]:ts.push(l)}function s6(l){$f=!0,Ub(l)}function ea(){if(!ug&&ts!==null){ug=!0;var l=0,p=yt;try{var w=ts;for(yt=1;l<w.length;l++){var A=w[l];do A=A(!0);while(A!==null)}ts=null,$f=!1}catch(k){throw ts!==null&&(ts=ts.slice(l+1)),gi(Ae,ea),k}finally{yt=p,ug=!1}}return null}var Ql=[],eu=0,zf=null,Gf=0,Vi=[],$i=0,za=null,ns=1,rs="";function Ga(l,p){Ql[eu++]=Gf,Ql[eu++]=zf,zf=l,Gf=p}function jb(l,p,w){Vi[$i++]=ns,Vi[$i++]=rs,Vi[$i++]=za,za=l;var A=ns;l=rs;var k=32-Gr(A)-1;A&=~(1<<k),w+=1;var B=32-Gr(p)+k;if(30<B){var z=k-k%5;B=(A&(1<<z)-1).toString(32),A>>=z,k-=z,ns=1<<32-Gr(p)+k|w<<k|A,rs=B+l}else ns=1<<B|w<<k|A,rs=l}function cg(l){l.return!==null&&(Ga(l,1),jb(l,1,0))}function dg(l){for(;l===zf;)zf=Ql[--eu],Ql[eu]=null,Gf=Ql[--eu],Ql[eu]=null;for(;l===za;)za=Vi[--$i],Vi[$i]=null,rs=Vi[--$i],Vi[$i]=null,ns=Vi[--$i],Vi[$i]=null}var bi=null,_i=null,pn=!1,co=null;function Vb(l,p){var w=qi(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=l,p=l.deletions,p===null?(l.deletions=[w],l.flags|=16):p.push(w)}function $b(l,p){switch(l.tag){case 5:var w=l.type;return p=p.nodeType!==1||w.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(l.stateNode=p,bi=l,_i=Js(p.firstChild),!0):!1;case 6:return p=l.pendingProps===""||p.nodeType!==3?null:p,p!==null?(l.stateNode=p,bi=l,_i=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(w=za!==null?{id:ns,overflow:rs}:null,l.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=qi(18,null,null,0),w.stateNode=p,w.return=l,l.child=w,bi=l,_i=null,!0):!1;default:return!1}}function fg(l){return(l.mode&1)!==0&&(l.flags&128)===0}function hg(l){if(pn){var p=_i;if(p){var w=p;if(!$b(l,p)){if(fg(l))throw Error(n(418));p=Js(w.nextSibling);var A=bi;p&&$b(l,p)?Vb(A,w):(l.flags=l.flags&-4097|2,pn=!1,bi=l)}}else{if(fg(l))throw Error(n(418));l.flags=l.flags&-4097|2,pn=!1,bi=l}}}function zb(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;bi=l}function Hf(l){if(l!==bi)return!1;if(!pn)return zb(l),pn=!0,!1;var p;if((p=l.tag!==3)&&!(p=l.tag!==5)&&(p=l.type,p=p!=="head"&&p!=="body"&&!ig(l.type,l.memoizedProps)),p&&(p=_i)){if(fg(l))throw Gb(),Error(n(418));for(;p;)Vb(l,p),p=Js(p.nextSibling)}if(zb(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,p=0;l;){if(l.nodeType===8){var w=l.data;if(w==="/$"){if(p===0){_i=Js(l.nextSibling);break e}p--}else w!=="$"&&w!=="$!"&&w!=="$?"||p++}l=l.nextSibling}_i=null}}else _i=bi?Js(l.stateNode.nextSibling):null;return!0}function Gb(){for(var l=_i;l;)l=Js(l.nextSibling)}function tu(){_i=bi=null,pn=!1}function pg(l){co===null?co=[l]:co.push(l)}var a6=V.ReactCurrentBatchConfig;function Uc(l,p,w){if(l=w.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var A=w.stateNode}if(!A)throw Error(n(147,l));var k=A,B=""+l;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===B?p.ref:(p=function(z){var J=k.refs;z===null?delete J[B]:J[B]=z},p._stringRef=B,p)}if(typeof l!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,l))}return l}function qf(l,p){throw l=Object.prototype.toString.call(p),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":l))}function Hb(l){var p=l._init;return p(l._payload)}function qb(l){function p(ue,ie){if(l){var ce=ue.deletions;ce===null?(ue.deletions=[ie],ue.flags|=16):ce.push(ie)}}function w(ue,ie){if(!l)return null;for(;ie!==null;)p(ue,ie),ie=ie.sibling;return null}function A(ue,ie){for(ue=new Map;ie!==null;)ie.key!==null?ue.set(ie.key,ie):ue.set(ie.index,ie),ie=ie.sibling;return ue}function k(ue,ie){return ue=la(ue,ie),ue.index=0,ue.sibling=null,ue}function B(ue,ie,ce){return ue.index=ce,l?(ce=ue.alternate,ce!==null?(ce=ce.index,ce<ie?(ue.flags|=2,ie):ce):(ue.flags|=2,ie)):(ue.flags|=1048576,ie)}function z(ue){return l&&ue.alternate===null&&(ue.flags|=2),ue}function J(ue,ie,ce,De){return ie===null||ie.tag!==6?(ie=o1(ce,ue.mode,De),ie.return=ue,ie):(ie=k(ie,ce),ie.return=ue,ie)}function ee(ue,ie,ce,De){var Ze=ce.type;return Ze===W?Pe(ue,ie,ce.props.children,De,ce.key):ie!==null&&(ie.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===we&&Hb(Ze)===ie.type)?(De=k(ie,ce.props),De.ref=Uc(ue,ie,ce),De.return=ue,De):(De=gh(ce.type,ce.key,ce.props,null,ue.mode,De),De.ref=Uc(ue,ie,ce),De.return=ue,De)}function ye(ue,ie,ce,De){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ce.containerInfo||ie.stateNode.implementation!==ce.implementation?(ie=s1(ce,ue.mode,De),ie.return=ue,ie):(ie=k(ie,ce.children||[]),ie.return=ue,ie)}function Pe(ue,ie,ce,De,Ze){return ie===null||ie.tag!==7?(ie=Za(ce,ue.mode,De,Ze),ie.return=ue,ie):(ie=k(ie,ce),ie.return=ue,ie)}function Re(ue,ie,ce){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=o1(""+ie,ue.mode,ce),ie.return=ue,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case G:return ce=gh(ie.type,ie.key,ie.props,null,ue.mode,ce),ce.ref=Uc(ue,null,ie),ce.return=ue,ce;case q:return ie=s1(ie,ue.mode,ce),ie.return=ue,ie;case we:var De=ie._init;return Re(ue,De(ie._payload),ce)}if(Po(ie)||Se(ie))return ie=Za(ie,ue.mode,ce,null),ie.return=ue,ie;qf(ue,ie)}return null}function Te(ue,ie,ce,De){var Ze=ie!==null?ie.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return Ze!==null?null:J(ue,ie,""+ce,De);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case G:return ce.key===Ze?ee(ue,ie,ce,De):null;case q:return ce.key===Ze?ye(ue,ie,ce,De):null;case we:return Ze=ce._init,Te(ue,ie,Ze(ce._payload),De)}if(Po(ce)||Se(ce))return Ze!==null?null:Pe(ue,ie,ce,De,null);qf(ue,ce)}return null}function Ve(ue,ie,ce,De,Ze){if(typeof De=="string"&&De!==""||typeof De=="number")return ue=ue.get(ce)||null,J(ie,ue,""+De,Ze);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case G:return ue=ue.get(De.key===null?ce:De.key)||null,ee(ie,ue,De,Ze);case q:return ue=ue.get(De.key===null?ce:De.key)||null,ye(ie,ue,De,Ze);case we:var ot=De._init;return Ve(ue,ie,ce,ot(De._payload),Ze)}if(Po(De)||Se(De))return ue=ue.get(ce)||null,Pe(ie,ue,De,Ze,null);qf(ie,De)}return null}function Ye(ue,ie,ce,De){for(var Ze=null,ot=null,st=ie,ft=ie=0,hr=null;st!==null&&ft<ce.length;ft++){st.index>ft?(hr=st,st=null):hr=st.sibling;var Ot=Te(ue,st,ce[ft],De);if(Ot===null){st===null&&(st=hr);break}l&&st&&Ot.alternate===null&&p(ue,st),ie=B(Ot,ie,ft),ot===null?Ze=Ot:ot.sibling=Ot,ot=Ot,st=hr}if(ft===ce.length)return w(ue,st),pn&&Ga(ue,ft),Ze;if(st===null){for(;ft<ce.length;ft++)st=Re(ue,ce[ft],De),st!==null&&(ie=B(st,ie,ft),ot===null?Ze=st:ot.sibling=st,ot=st);return pn&&Ga(ue,ft),Ze}for(st=A(ue,st);ft<ce.length;ft++)hr=Ve(st,ue,ft,ce[ft],De),hr!==null&&(l&&hr.alternate!==null&&st.delete(hr.key===null?ft:hr.key),ie=B(hr,ie,ft),ot===null?Ze=hr:ot.sibling=hr,ot=hr);return l&&st.forEach(function(ua){return p(ue,ua)}),pn&&Ga(ue,ft),Ze}function Xe(ue,ie,ce,De){var Ze=Se(ce);if(typeof Ze!="function")throw Error(n(150));if(ce=Ze.call(ce),ce==null)throw Error(n(151));for(var ot=Ze=null,st=ie,ft=ie=0,hr=null,Ot=ce.next();st!==null&&!Ot.done;ft++,Ot=ce.next()){st.index>ft?(hr=st,st=null):hr=st.sibling;var ua=Te(ue,st,Ot.value,De);if(ua===null){st===null&&(st=hr);break}l&&st&&ua.alternate===null&&p(ue,st),ie=B(ua,ie,ft),ot===null?Ze=ua:ot.sibling=ua,ot=ua,st=hr}if(Ot.done)return w(ue,st),pn&&Ga(ue,ft),Ze;if(st===null){for(;!Ot.done;ft++,Ot=ce.next())Ot=Re(ue,Ot.value,De),Ot!==null&&(ie=B(Ot,ie,ft),ot===null?Ze=Ot:ot.sibling=Ot,ot=Ot);return pn&&Ga(ue,ft),Ze}for(st=A(ue,st);!Ot.done;ft++,Ot=ce.next())Ot=Ve(st,ue,ft,Ot.value,De),Ot!==null&&(l&&Ot.alternate!==null&&st.delete(Ot.key===null?ft:Ot.key),ie=B(Ot,ie,ft),ot===null?Ze=Ot:ot.sibling=Ot,ot=Ot);return l&&st.forEach(function(j6){return p(ue,j6)}),pn&&Ga(ue,ft),Ze}function Fn(ue,ie,ce,De){if(typeof ce=="object"&&ce!==null&&ce.type===W&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case G:e:{for(var Ze=ce.key,ot=ie;ot!==null;){if(ot.key===Ze){if(Ze=ce.type,Ze===W){if(ot.tag===7){w(ue,ot.sibling),ie=k(ot,ce.props.children),ie.return=ue,ue=ie;break e}}else if(ot.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===we&&Hb(Ze)===ot.type){w(ue,ot.sibling),ie=k(ot,ce.props),ie.ref=Uc(ue,ot,ce),ie.return=ue,ue=ie;break e}w(ue,ot);break}else p(ue,ot);ot=ot.sibling}ce.type===W?(ie=Za(ce.props.children,ue.mode,De,ce.key),ie.return=ue,ue=ie):(De=gh(ce.type,ce.key,ce.props,null,ue.mode,De),De.ref=Uc(ue,ie,ce),De.return=ue,ue=De)}return z(ue);case q:e:{for(ot=ce.key;ie!==null;){if(ie.key===ot)if(ie.tag===4&&ie.stateNode.containerInfo===ce.containerInfo&&ie.stateNode.implementation===ce.implementation){w(ue,ie.sibling),ie=k(ie,ce.children||[]),ie.return=ue,ue=ie;break e}else{w(ue,ie);break}else p(ue,ie);ie=ie.sibling}ie=s1(ce,ue.mode,De),ie.return=ue,ue=ie}return z(ue);case we:return ot=ce._init,Fn(ue,ie,ot(ce._payload),De)}if(Po(ce))return Ye(ue,ie,ce,De);if(Se(ce))return Xe(ue,ie,ce,De);qf(ue,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,ie!==null&&ie.tag===6?(w(ue,ie.sibling),ie=k(ie,ce),ie.return=ue,ue=ie):(w(ue,ie),ie=o1(ce,ue.mode,De),ie.return=ue,ue=ie),z(ue)):w(ue,ie)}return Fn}var nu=qb(!0),Wb=qb(!1),Wf=Zs(null),Kf=null,ru=null,mg=null;function gg(){mg=ru=Kf=null}function vg(l){var p=Wf.current;un(Wf),l._currentValue=p}function yg(l,p,w){for(;l!==null;){var A=l.alternate;if((l.childLanes&p)!==p?(l.childLanes|=p,A!==null&&(A.childLanes|=p)):A!==null&&(A.childLanes&p)!==p&&(A.childLanes|=p),l===w)break;l=l.return}}function iu(l,p){Kf=l,mg=ru=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&p)!==0&&(ii=!0),l.firstContext=null)}function zi(l){var p=l._currentValue;if(mg!==l)if(l={context:l,memoizedValue:p,next:null},ru===null){if(Kf===null)throw Error(n(308));ru=l,Kf.dependencies={lanes:0,firstContext:l}}else ru=ru.next=l;return p}var Ha=null;function xg(l){Ha===null?Ha=[l]:Ha.push(l)}function Kb(l,p,w,A){var k=p.interleaved;return k===null?(w.next=w,xg(p)):(w.next=k.next,k.next=w),p.interleaved=w,is(l,A)}function is(l,p){l.lanes|=p;var w=l.alternate;for(w!==null&&(w.lanes|=p),w=l,l=l.return;l!==null;)l.childLanes|=p,w=l.alternate,w!==null&&(w.childLanes|=p),w=l,l=l.return;return w.tag===3?w.stateNode:null}var ta=!1;function wg(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yb(l,p){l=l.updateQueue,p.updateQueue===l&&(p.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function os(l,p){return{eventTime:l,lane:p,tag:0,payload:null,callback:null,next:null}}function na(l,p,w){var A=l.updateQueue;if(A===null)return null;if(A=A.shared,(Nt&2)!==0){var k=A.pending;return k===null?p.next=p:(p.next=k.next,k.next=p),A.pending=p,is(l,w)}return k=A.interleaved,k===null?(p.next=p,xg(A)):(p.next=k.next,k.next=p),A.interleaved=p,is(l,w)}function Yf(l,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var A=p.lanes;A&=l.pendingLanes,w|=A,p.lanes=w,Tn(l,w)}}function Xb(l,p){var w=l.updateQueue,A=l.alternate;if(A!==null&&(A=A.updateQueue,w===A)){var k=null,B=null;if(w=w.firstBaseUpdate,w!==null){do{var z={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};B===null?k=B=z:B=B.next=z,w=w.next}while(w!==null);B===null?k=B=p:B=B.next=p}else k=B=p;w={baseState:A.baseState,firstBaseUpdate:k,lastBaseUpdate:B,shared:A.shared,effects:A.effects},l.updateQueue=w;return}l=w.lastBaseUpdate,l===null?w.firstBaseUpdate=p:l.next=p,w.lastBaseUpdate=p}function Xf(l,p,w,A){var k=l.updateQueue;ta=!1;var B=k.firstBaseUpdate,z=k.lastBaseUpdate,J=k.shared.pending;if(J!==null){k.shared.pending=null;var ee=J,ye=ee.next;ee.next=null,z===null?B=ye:z.next=ye,z=ee;var Pe=l.alternate;Pe!==null&&(Pe=Pe.updateQueue,J=Pe.lastBaseUpdate,J!==z&&(J===null?Pe.firstBaseUpdate=ye:J.next=ye,Pe.lastBaseUpdate=ee))}if(B!==null){var Re=k.baseState;z=0,Pe=ye=ee=null,J=B;do{var Te=J.lane,Ve=J.eventTime;if((A&Te)===Te){Pe!==null&&(Pe=Pe.next={eventTime:Ve,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var Ye=l,Xe=J;switch(Te=p,Ve=w,Xe.tag){case 1:if(Ye=Xe.payload,typeof Ye=="function"){Re=Ye.call(Ve,Re,Te);break e}Re=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=Xe.payload,Te=typeof Ye=="function"?Ye.call(Ve,Re,Te):Ye,Te==null)break e;Re=Ce({},Re,Te);break e;case 2:ta=!0}}J.callback!==null&&J.lane!==0&&(l.flags|=64,Te=k.effects,Te===null?k.effects=[J]:Te.push(J))}else Ve={eventTime:Ve,lane:Te,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Pe===null?(ye=Pe=Ve,ee=Re):Pe=Pe.next=Ve,z|=Te;if(J=J.next,J===null){if(J=k.shared.pending,J===null)break;Te=J,J=Te.next,Te.next=null,k.lastBaseUpdate=Te,k.shared.pending=null}}while(!0);if(Pe===null&&(ee=Re),k.baseState=ee,k.firstBaseUpdate=ye,k.lastBaseUpdate=Pe,p=k.shared.interleaved,p!==null){k=p;do z|=k.lane,k=k.next;while(k!==p)}else B===null&&(k.shared.lanes=0);Ka|=z,l.lanes=z,l.memoizedState=Re}}function Jb(l,p,w){if(l=p.effects,p.effects=null,l!==null)for(p=0;p<l.length;p++){var A=l[p],k=A.callback;if(k!==null){if(A.callback=null,A=w,typeof k!="function")throw Error(n(191,k));k.call(A)}}}var jc={},Lo=Zs(jc),Vc=Zs(jc),$c=Zs(jc);function qa(l){if(l===jc)throw Error(n(174));return l}function Eg(l,p){switch(rn($c,p),rn(Vc,l),rn(Lo,jc),l=p.nodeType,l){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Bl(null,"");break;default:l=l===8?p.parentNode:p,p=l.namespaceURI||null,l=l.tagName,p=Bl(p,l)}un(Lo),rn(Lo,p)}function ou(){un(Lo),un(Vc),un($c)}function Zb(l){qa($c.current);var p=qa(Lo.current),w=Bl(p,l.type);p!==w&&(rn(Vc,l),rn(Lo,w))}function bg(l){Vc.current===l&&(un(Lo),un(Vc))}var En=Zs(0);function Jf(l){for(var p=l;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var _g=[];function Sg(){for(var l=0;l<_g.length;l++)_g[l]._workInProgressVersionPrimary=null;_g.length=0}var Zf=V.ReactCurrentDispatcher,Cg=V.ReactCurrentBatchConfig,Wa=0,bn=null,tr=null,dr=null,Qf=!1,zc=!1,Gc=0,l6=0;function Lr(){throw Error(n(321))}function Ag(l,p){if(p===null)return!1;for(var w=0;w<p.length&&w<l.length;w++)if(!oe(l[w],p[w]))return!1;return!0}function Tg(l,p,w,A,k,B){if(Wa=B,bn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Zf.current=l===null||l.memoizedState===null?f6:h6,l=w(A,k),zc){B=0;do{if(zc=!1,Gc=0,25<=B)throw Error(n(301));B+=1,dr=tr=null,p.updateQueue=null,Zf.current=p6,l=w(A,k)}while(zc)}if(Zf.current=nh,p=tr!==null&&tr.next!==null,Wa=0,dr=tr=bn=null,Qf=!1,p)throw Error(n(300));return l}function Ig(){var l=Gc!==0;return Gc=0,l}function Bo(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?bn.memoizedState=dr=l:dr=dr.next=l,dr}function Gi(){if(tr===null){var l=bn.alternate;l=l!==null?l.memoizedState:null}else l=tr.next;var p=dr===null?bn.memoizedState:dr.next;if(p!==null)dr=p,tr=l;else{if(l===null)throw Error(n(310));tr=l,l={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},dr===null?bn.memoizedState=dr=l:dr=dr.next=l}return dr}function Hc(l,p){return typeof p=="function"?p(l):p}function Pg(l){var p=Gi(),w=p.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=l;var A=tr,k=A.baseQueue,B=w.pending;if(B!==null){if(k!==null){var z=k.next;k.next=B.next,B.next=z}A.baseQueue=k=B,w.pending=null}if(k!==null){B=k.next,A=A.baseState;var J=z=null,ee=null,ye=B;do{var Pe=ye.lane;if((Wa&Pe)===Pe)ee!==null&&(ee=ee.next={lane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),A=ye.hasEagerState?ye.eagerState:l(A,ye.action);else{var Re={lane:Pe,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null};ee===null?(J=ee=Re,z=A):ee=ee.next=Re,bn.lanes|=Pe,Ka|=Pe}ye=ye.next}while(ye!==null&&ye!==B);ee===null?z=A:ee.next=J,oe(A,p.memoizedState)||(ii=!0),p.memoizedState=A,p.baseState=z,p.baseQueue=ee,w.lastRenderedState=A}if(l=w.interleaved,l!==null){k=l;do B=k.lane,bn.lanes|=B,Ka|=B,k=k.next;while(k!==l)}else k===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function Ng(l){var p=Gi(),w=p.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=l;var A=w.dispatch,k=w.pending,B=p.memoizedState;if(k!==null){w.pending=null;var z=k=k.next;do B=l(B,z.action),z=z.next;while(z!==k);oe(B,p.memoizedState)||(ii=!0),p.memoizedState=B,p.baseQueue===null&&(p.baseState=B),w.lastRenderedState=B}return[B,A]}function Qb(){}function e_(l,p){var w=bn,A=Gi(),k=p(),B=!oe(A.memoizedState,k);if(B&&(A.memoizedState=k,ii=!0),A=A.queue,Rg(r_.bind(null,w,A,l),[l]),A.getSnapshot!==p||B||dr!==null&&dr.memoizedState.tag&1){if(w.flags|=2048,qc(9,n_.bind(null,w,A,k,p),void 0,null),fr===null)throw Error(n(349));(Wa&30)!==0||t_(w,p,k)}return k}function t_(l,p,w){l.flags|=16384,l={getSnapshot:p,value:w},p=bn.updateQueue,p===null?(p={lastEffect:null,stores:null},bn.updateQueue=p,p.stores=[l]):(w=p.stores,w===null?p.stores=[l]:w.push(l))}function n_(l,p,w,A){p.value=w,p.getSnapshot=A,i_(p)&&o_(l)}function r_(l,p,w){return w(function(){i_(p)&&o_(l)})}function i_(l){var p=l.getSnapshot;l=l.value;try{var w=p();return!oe(l,w)}catch{return!0}}function o_(l){var p=is(l,1);p!==null&&mo(p,l,1,-1)}function s_(l){var p=Bo();return typeof l=="function"&&(l=l()),p.memoizedState=p.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hc,lastRenderedState:l},p.queue=l,l=l.dispatch=d6.bind(null,bn,l),[p.memoizedState,l]}function qc(l,p,w,A){return l={tag:l,create:p,destroy:w,deps:A,next:null},p=bn.updateQueue,p===null?(p={lastEffect:null,stores:null},bn.updateQueue=p,p.lastEffect=l.next=l):(w=p.lastEffect,w===null?p.lastEffect=l.next=l:(A=w.next,w.next=l,l.next=A,p.lastEffect=l)),l}function a_(){return Gi().memoizedState}function eh(l,p,w,A){var k=Bo();bn.flags|=l,k.memoizedState=qc(1|p,w,void 0,A===void 0?null:A)}function th(l,p,w,A){var k=Gi();A=A===void 0?null:A;var B=void 0;if(tr!==null){var z=tr.memoizedState;if(B=z.destroy,A!==null&&Ag(A,z.deps)){k.memoizedState=qc(p,w,B,A);return}}bn.flags|=l,k.memoizedState=qc(1|p,w,B,A)}function l_(l,p){return eh(8390656,8,l,p)}function Rg(l,p){return th(2048,8,l,p)}function u_(l,p){return th(4,2,l,p)}function c_(l,p){return th(4,4,l,p)}function d_(l,p){if(typeof p=="function")return l=l(),p(l),function(){p(null)};if(p!=null)return l=l(),p.current=l,function(){p.current=null}}function f_(l,p,w){return w=w!=null?w.concat([l]):null,th(4,4,d_.bind(null,p,l),w)}function Og(){}function h_(l,p){var w=Gi();p=p===void 0?null:p;var A=w.memoizedState;return A!==null&&p!==null&&Ag(p,A[1])?A[0]:(w.memoizedState=[l,p],l)}function p_(l,p){var w=Gi();p=p===void 0?null:p;var A=w.memoizedState;return A!==null&&p!==null&&Ag(p,A[1])?A[0]:(l=l(),w.memoizedState=[l,p],l)}function m_(l,p,w){return(Wa&21)===0?(l.baseState&&(l.baseState=!1,ii=!0),l.memoizedState=w):(oe(w,p)||(w=Jn(),bn.lanes|=w,Ka|=w,l.baseState=!0),p)}function u6(l,p){var w=yt;yt=w!==0&&4>w?w:4,l(!0);var A=Cg.transition;Cg.transition={};try{l(!1),p()}finally{yt=w,Cg.transition=A}}function g_(){return Gi().memoizedState}function c6(l,p,w){var A=sa(l);if(w={lane:A,action:w,hasEagerState:!1,eagerState:null,next:null},v_(l))y_(p,w);else if(w=Kb(l,p,w,A),w!==null){var k=qr();mo(w,l,A,k),x_(w,p,A)}}function d6(l,p,w){var A=sa(l),k={lane:A,action:w,hasEagerState:!1,eagerState:null,next:null};if(v_(l))y_(p,k);else{var B=l.alternate;if(l.lanes===0&&(B===null||B.lanes===0)&&(B=p.lastRenderedReducer,B!==null))try{var z=p.lastRenderedState,J=B(z,w);if(k.hasEagerState=!0,k.eagerState=J,oe(J,z)){var ee=p.interleaved;ee===null?(k.next=k,xg(p)):(k.next=ee.next,ee.next=k),p.interleaved=k;return}}catch{}finally{}w=Kb(l,p,k,A),w!==null&&(k=qr(),mo(w,l,A,k),x_(w,p,A))}}function v_(l){var p=l.alternate;return l===bn||p!==null&&p===bn}function y_(l,p){zc=Qf=!0;var w=l.pending;w===null?p.next=p:(p.next=w.next,w.next=p),l.pending=p}function x_(l,p,w){if((w&4194240)!==0){var A=p.lanes;A&=l.pendingLanes,w|=A,p.lanes=w,Tn(l,w)}}var nh={readContext:zi,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},f6={readContext:zi,useCallback:function(l,p){return Bo().memoizedState=[l,p===void 0?null:p],l},useContext:zi,useEffect:l_,useImperativeHandle:function(l,p,w){return w=w!=null?w.concat([l]):null,eh(4194308,4,d_.bind(null,p,l),w)},useLayoutEffect:function(l,p){return eh(4194308,4,l,p)},useInsertionEffect:function(l,p){return eh(4,2,l,p)},useMemo:function(l,p){var w=Bo();return p=p===void 0?null:p,l=l(),w.memoizedState=[l,p],l},useReducer:function(l,p,w){var A=Bo();return p=w!==void 0?w(p):p,A.memoizedState=A.baseState=p,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:p},A.queue=l,l=l.dispatch=c6.bind(null,bn,l),[A.memoizedState,l]},useRef:function(l){var p=Bo();return l={current:l},p.memoizedState=l},useState:s_,useDebugValue:Og,useDeferredValue:function(l){return Bo().memoizedState=l},useTransition:function(){var l=s_(!1),p=l[0];return l=u6.bind(null,l[1]),Bo().memoizedState=l,[p,l]},useMutableSource:function(){},useSyncExternalStore:function(l,p,w){var A=bn,k=Bo();if(pn){if(w===void 0)throw Error(n(407));w=w()}else{if(w=p(),fr===null)throw Error(n(349));(Wa&30)!==0||t_(A,p,w)}k.memoizedState=w;var B={value:w,getSnapshot:p};return k.queue=B,l_(r_.bind(null,A,B,l),[l]),A.flags|=2048,qc(9,n_.bind(null,A,B,w,p),void 0,null),w},useId:function(){var l=Bo(),p=fr.identifierPrefix;if(pn){var w=rs,A=ns;w=(A&~(1<<32-Gr(A)-1)).toString(32)+w,p=":"+p+"R"+w,w=Gc++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=l6++,p=":"+p+"r"+w.toString(32)+":";return l.memoizedState=p},unstable_isNewReconciler:!1},h6={readContext:zi,useCallback:h_,useContext:zi,useEffect:Rg,useImperativeHandle:f_,useInsertionEffect:u_,useLayoutEffect:c_,useMemo:p_,useReducer:Pg,useRef:a_,useState:function(){return Pg(Hc)},useDebugValue:Og,useDeferredValue:function(l){var p=Gi();return m_(p,tr.memoizedState,l)},useTransition:function(){var l=Pg(Hc)[0],p=Gi().memoizedState;return[l,p]},useMutableSource:Qb,useSyncExternalStore:e_,useId:g_,unstable_isNewReconciler:!1},p6={readContext:zi,useCallback:h_,useContext:zi,useEffect:Rg,useImperativeHandle:f_,useInsertionEffect:u_,useLayoutEffect:c_,useMemo:p_,useReducer:Ng,useRef:a_,useState:function(){return Ng(Hc)},useDebugValue:Og,useDeferredValue:function(l){var p=Gi();return tr===null?p.memoizedState=l:m_(p,tr.memoizedState,l)},useTransition:function(){var l=Ng(Hc)[0],p=Gi().memoizedState;return[l,p]},useMutableSource:Qb,useSyncExternalStore:e_,useId:g_,unstable_isNewReconciler:!1};function fo(l,p){if(l&&l.defaultProps){p=Ce({},p),l=l.defaultProps;for(var w in l)p[w]===void 0&&(p[w]=l[w]);return p}return p}function kg(l,p,w,A){p=l.memoizedState,w=w(A,p),w=w==null?p:Ce({},p,w),l.memoizedState=w,l.lanes===0&&(l.updateQueue.baseState=w)}var rh={isMounted:function(l){return(l=l._reactInternals)?ti(l)===l:!1},enqueueSetState:function(l,p,w){l=l._reactInternals;var A=qr(),k=sa(l),B=os(A,k);B.payload=p,w!=null&&(B.callback=w),p=na(l,B,k),p!==null&&(mo(p,l,k,A),Yf(p,l,k))},enqueueReplaceState:function(l,p,w){l=l._reactInternals;var A=qr(),k=sa(l),B=os(A,k);B.tag=1,B.payload=p,w!=null&&(B.callback=w),p=na(l,B,k),p!==null&&(mo(p,l,k,A),Yf(p,l,k))},enqueueForceUpdate:function(l,p){l=l._reactInternals;var w=qr(),A=sa(l),k=os(w,A);k.tag=2,p!=null&&(k.callback=p),p=na(l,k,A),p!==null&&(mo(p,l,A,w),Yf(p,l,A))}};function w_(l,p,w,A,k,B,z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(A,B,z):p.prototype&&p.prototype.isPureReactComponent?!me(w,A)||!me(k,B):!0}function E_(l,p,w){var A=!1,k=Qs,B=p.contextType;return typeof B=="object"&&B!==null?B=zi(B):(k=ri(p)?$a:Dr.current,A=p.contextTypes,B=(A=A!=null)?Zl(l,k):Qs),p=new p(w,B),l.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=rh,l.stateNode=p,p._reactInternals=l,A&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=k,l.__reactInternalMemoizedMaskedChildContext=B),p}function b_(l,p,w,A){l=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,A),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,A),p.state!==l&&rh.enqueueReplaceState(p,p.state,null)}function Mg(l,p,w,A){var k=l.stateNode;k.props=w,k.state=l.memoizedState,k.refs={},wg(l);var B=p.contextType;typeof B=="object"&&B!==null?k.context=zi(B):(B=ri(p)?$a:Dr.current,k.context=Zl(l,B)),k.state=l.memoizedState,B=p.getDerivedStateFromProps,typeof B=="function"&&(kg(l,p,B,w),k.state=l.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(p=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),p!==k.state&&rh.enqueueReplaceState(k,k.state,null),Xf(l,w,k,A),k.state=l.memoizedState),typeof k.componentDidMount=="function"&&(l.flags|=4194308)}function su(l,p){try{var w="",A=p;do w+=lt(A),A=A.return;while(A);var k=w}catch(B){k=`
Error generating stack: `+B.message+`
`+B.stack}return{value:l,source:p,stack:k,digest:null}}function Dg(l,p,w){return{value:l,source:null,stack:w??null,digest:p??null}}function Lg(l,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var m6=typeof WeakMap=="function"?WeakMap:Map;function __(l,p,w){w=os(-1,w),w.tag=3,w.payload={element:null};var A=p.value;return w.callback=function(){ch||(ch=!0,Jg=A),Lg(l,p)},w}function S_(l,p,w){w=os(-1,w),w.tag=3;var A=l.type.getDerivedStateFromError;if(typeof A=="function"){var k=p.value;w.payload=function(){return A(k)},w.callback=function(){Lg(l,p)}}var B=l.stateNode;return B!==null&&typeof B.componentDidCatch=="function"&&(w.callback=function(){Lg(l,p),typeof A!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var z=p.stack;this.componentDidCatch(p.value,{componentStack:z!==null?z:""})}),w}function C_(l,p,w){var A=l.pingCache;if(A===null){A=l.pingCache=new m6;var k=new Set;A.set(p,k)}else k=A.get(p),k===void 0&&(k=new Set,A.set(p,k));k.has(w)||(k.add(w),l=P6.bind(null,l,p,w),p.then(l,l))}function A_(l){do{var p;if((p=l.tag===13)&&(p=l.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return l;l=l.return}while(l!==null);return null}function T_(l,p,w,A,k){return(l.mode&1)===0?(l===p?l.flags|=65536:(l.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=os(-1,1),p.tag=2,na(w,p,1))),w.lanes|=1),l):(l.flags|=65536,l.lanes=k,l)}var g6=V.ReactCurrentOwner,ii=!1;function Hr(l,p,w,A){p.child=l===null?Wb(p,null,w,A):nu(p,l.child,w,A)}function I_(l,p,w,A,k){w=w.render;var B=p.ref;return iu(p,k),A=Tg(l,p,w,A,B,k),w=Ig(),l!==null&&!ii?(p.updateQueue=l.updateQueue,p.flags&=-2053,l.lanes&=~k,ss(l,p,k)):(pn&&w&&cg(p),p.flags|=1,Hr(l,p,A,k),p.child)}function P_(l,p,w,A,k){if(l===null){var B=w.type;return typeof B=="function"&&!i1(B)&&B.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=B,N_(l,p,B,A,k)):(l=gh(w.type,null,A,p,p.mode,k),l.ref=p.ref,l.return=p,p.child=l)}if(B=l.child,(l.lanes&k)===0){var z=B.memoizedProps;if(w=w.compare,w=w!==null?w:me,w(z,A)&&l.ref===p.ref)return ss(l,p,k)}return p.flags|=1,l=la(B,A),l.ref=p.ref,l.return=p,p.child=l}function N_(l,p,w,A,k){if(l!==null){var B=l.memoizedProps;if(me(B,A)&&l.ref===p.ref)if(ii=!1,p.pendingProps=A=B,(l.lanes&k)!==0)(l.flags&131072)!==0&&(ii=!0);else return p.lanes=l.lanes,ss(l,p,k)}return Bg(l,p,w,A,k)}function R_(l,p,w){var A=p.pendingProps,k=A.children,B=l!==null?l.memoizedState:null;if(A.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(lu,Si),Si|=w;else{if((w&1073741824)===0)return l=B!==null?B.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:l,cachePool:null,transitions:null},p.updateQueue=null,rn(lu,Si),Si|=l,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},A=B!==null?B.baseLanes:w,rn(lu,Si),Si|=A}else B!==null?(A=B.baseLanes|w,p.memoizedState=null):A=w,rn(lu,Si),Si|=A;return Hr(l,p,k,w),p.child}function O_(l,p){var w=p.ref;(l===null&&w!==null||l!==null&&l.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function Bg(l,p,w,A,k){var B=ri(w)?$a:Dr.current;return B=Zl(p,B),iu(p,k),w=Tg(l,p,w,A,B,k),A=Ig(),l!==null&&!ii?(p.updateQueue=l.updateQueue,p.flags&=-2053,l.lanes&=~k,ss(l,p,k)):(pn&&A&&cg(p),p.flags|=1,Hr(l,p,w,k),p.child)}function k_(l,p,w,A,k){if(ri(w)){var B=!0;Vf(p)}else B=!1;if(iu(p,k),p.stateNode===null)oh(l,p),E_(p,w,A),Mg(p,w,A,k),A=!0;else if(l===null){var z=p.stateNode,J=p.memoizedProps;z.props=J;var ee=z.context,ye=w.contextType;typeof ye=="object"&&ye!==null?ye=zi(ye):(ye=ri(w)?$a:Dr.current,ye=Zl(p,ye));var Pe=w.getDerivedStateFromProps,Re=typeof Pe=="function"||typeof z.getSnapshotBeforeUpdate=="function";Re||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(J!==A||ee!==ye)&&b_(p,z,A,ye),ta=!1;var Te=p.memoizedState;z.state=Te,Xf(p,A,z,k),ee=p.memoizedState,J!==A||Te!==ee||ni.current||ta?(typeof Pe=="function"&&(kg(p,w,Pe,A),ee=p.memoizedState),(J=ta||w_(p,w,J,A,Te,ee,ye))?(Re||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(p.flags|=4194308)):(typeof z.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=A,p.memoizedState=ee),z.props=A,z.state=ee,z.context=ye,A=J):(typeof z.componentDidMount=="function"&&(p.flags|=4194308),A=!1)}else{z=p.stateNode,Yb(l,p),J=p.memoizedProps,ye=p.type===p.elementType?J:fo(p.type,J),z.props=ye,Re=p.pendingProps,Te=z.context,ee=w.contextType,typeof ee=="object"&&ee!==null?ee=zi(ee):(ee=ri(w)?$a:Dr.current,ee=Zl(p,ee));var Ve=w.getDerivedStateFromProps;(Pe=typeof Ve=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(J!==Re||Te!==ee)&&b_(p,z,A,ee),ta=!1,Te=p.memoizedState,z.state=Te,Xf(p,A,z,k);var Ye=p.memoizedState;J!==Re||Te!==Ye||ni.current||ta?(typeof Ve=="function"&&(kg(p,w,Ve,A),Ye=p.memoizedState),(ye=ta||w_(p,w,ye,A,Te,Ye,ee)||!1)?(Pe||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(A,Ye,ee),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(A,Ye,ee)),typeof z.componentDidUpdate=="function"&&(p.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof z.componentDidUpdate!="function"||J===l.memoizedProps&&Te===l.memoizedState||(p.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||J===l.memoizedProps&&Te===l.memoizedState||(p.flags|=1024),p.memoizedProps=A,p.memoizedState=Ye),z.props=A,z.state=Ye,z.context=ee,A=ye):(typeof z.componentDidUpdate!="function"||J===l.memoizedProps&&Te===l.memoizedState||(p.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||J===l.memoizedProps&&Te===l.memoizedState||(p.flags|=1024),A=!1)}return Fg(l,p,w,A,B,k)}function Fg(l,p,w,A,k,B){O_(l,p);var z=(p.flags&128)!==0;if(!A&&!z)return k&&Fb(p,w,!1),ss(l,p,B);A=p.stateNode,g6.current=p;var J=z&&typeof w.getDerivedStateFromError!="function"?null:A.render();return p.flags|=1,l!==null&&z?(p.child=nu(p,l.child,null,B),p.child=nu(p,null,J,B)):Hr(l,p,J,B),p.memoizedState=A.state,k&&Fb(p,w,!0),p.child}function M_(l){var p=l.stateNode;p.pendingContext?Lb(l,p.pendingContext,p.pendingContext!==p.context):p.context&&Lb(l,p.context,!1),Eg(l,p.containerInfo)}function D_(l,p,w,A,k){return tu(),pg(k),p.flags|=256,Hr(l,p,w,A),p.child}var Ug={dehydrated:null,treeContext:null,retryLane:0};function jg(l){return{baseLanes:l,cachePool:null,transitions:null}}function L_(l,p,w){var A=p.pendingProps,k=En.current,B=!1,z=(p.flags&128)!==0,J;if((J=z)||(J=l!==null&&l.memoizedState===null?!1:(k&2)!==0),J?(B=!0,p.flags&=-129):(l===null||l.memoizedState!==null)&&(k|=1),rn(En,k&1),l===null)return hg(p),l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((p.mode&1)===0?p.lanes=1:l.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(z=A.children,l=A.fallback,B?(A=p.mode,B=p.child,z={mode:"hidden",children:z},(A&1)===0&&B!==null?(B.childLanes=0,B.pendingProps=z):B=vh(z,A,0,null),l=Za(l,A,w,null),B.return=p,l.return=p,B.sibling=l,p.child=B,p.child.memoizedState=jg(w),p.memoizedState=Ug,l):Vg(p,z));if(k=l.memoizedState,k!==null&&(J=k.dehydrated,J!==null))return v6(l,p,z,A,J,k,w);if(B){B=A.fallback,z=p.mode,k=l.child,J=k.sibling;var ee={mode:"hidden",children:A.children};return(z&1)===0&&p.child!==k?(A=p.child,A.childLanes=0,A.pendingProps=ee,p.deletions=null):(A=la(k,ee),A.subtreeFlags=k.subtreeFlags&14680064),J!==null?B=la(J,B):(B=Za(B,z,w,null),B.flags|=2),B.return=p,A.return=p,A.sibling=B,p.child=A,A=B,B=p.child,z=l.child.memoizedState,z=z===null?jg(w):{baseLanes:z.baseLanes|w,cachePool:null,transitions:z.transitions},B.memoizedState=z,B.childLanes=l.childLanes&~w,p.memoizedState=Ug,A}return B=l.child,l=B.sibling,A=la(B,{mode:"visible",children:A.children}),(p.mode&1)===0&&(A.lanes=w),A.return=p,A.sibling=null,l!==null&&(w=p.deletions,w===null?(p.deletions=[l],p.flags|=16):w.push(l)),p.child=A,p.memoizedState=null,A}function Vg(l,p){return p=vh({mode:"visible",children:p},l.mode,0,null),p.return=l,l.child=p}function ih(l,p,w,A){return A!==null&&pg(A),nu(p,l.child,null,w),l=Vg(p,p.pendingProps.children),l.flags|=2,p.memoizedState=null,l}function v6(l,p,w,A,k,B,z){if(w)return p.flags&256?(p.flags&=-257,A=Dg(Error(n(422))),ih(l,p,z,A)):p.memoizedState!==null?(p.child=l.child,p.flags|=128,null):(B=A.fallback,k=p.mode,A=vh({mode:"visible",children:A.children},k,0,null),B=Za(B,k,z,null),B.flags|=2,A.return=p,B.return=p,A.sibling=B,p.child=A,(p.mode&1)!==0&&nu(p,l.child,null,z),p.child.memoizedState=jg(z),p.memoizedState=Ug,B);if((p.mode&1)===0)return ih(l,p,z,null);if(k.data==="$!"){if(A=k.nextSibling&&k.nextSibling.dataset,A)var J=A.dgst;return A=J,B=Error(n(419)),A=Dg(B,A,void 0),ih(l,p,z,A)}if(J=(z&l.childLanes)!==0,ii||J){if(A=fr,A!==null){switch(z&-z){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(A.suspendedLanes|z))!==0?0:k,k!==0&&k!==B.retryLane&&(B.retryLane=k,is(l,k),mo(A,l,k,-1))}return r1(),A=Dg(Error(n(421))),ih(l,p,z,A)}return k.data==="$?"?(p.flags|=128,p.child=l.child,p=N6.bind(null,l),k._reactRetry=p,null):(l=B.treeContext,_i=Js(k.nextSibling),bi=p,pn=!0,co=null,l!==null&&(Vi[$i++]=ns,Vi[$i++]=rs,Vi[$i++]=za,ns=l.id,rs=l.overflow,za=p),p=Vg(p,A.children),p.flags|=4096,p)}function B_(l,p,w){l.lanes|=p;var A=l.alternate;A!==null&&(A.lanes|=p),yg(l.return,p,w)}function $g(l,p,w,A,k){var B=l.memoizedState;B===null?l.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:A,tail:w,tailMode:k}:(B.isBackwards=p,B.rendering=null,B.renderingStartTime=0,B.last=A,B.tail=w,B.tailMode=k)}function F_(l,p,w){var A=p.pendingProps,k=A.revealOrder,B=A.tail;if(Hr(l,p,A.children,w),A=En.current,(A&2)!==0)A=A&1|2,p.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=p.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&B_(l,w,p);else if(l.tag===19)B_(l,w,p);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===p)break e;for(;l.sibling===null;){if(l.return===null||l.return===p)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}A&=1}if(rn(En,A),(p.mode&1)===0)p.memoizedState=null;else switch(k){case"forwards":for(w=p.child,k=null;w!==null;)l=w.alternate,l!==null&&Jf(l)===null&&(k=w),w=w.sibling;w=k,w===null?(k=p.child,p.child=null):(k=w.sibling,w.sibling=null),$g(p,!1,k,w,B);break;case"backwards":for(w=null,k=p.child,p.child=null;k!==null;){if(l=k.alternate,l!==null&&Jf(l)===null){p.child=k;break}l=k.sibling,k.sibling=w,w=k,k=l}$g(p,!0,w,null,B);break;case"together":$g(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function oh(l,p){(p.mode&1)===0&&l!==null&&(l.alternate=null,p.alternate=null,p.flags|=2)}function ss(l,p,w){if(l!==null&&(p.dependencies=l.dependencies),Ka|=p.lanes,(w&p.childLanes)===0)return null;if(l!==null&&p.child!==l.child)throw Error(n(153));if(p.child!==null){for(l=p.child,w=la(l,l.pendingProps),p.child=w,w.return=p;l.sibling!==null;)l=l.sibling,w=w.sibling=la(l,l.pendingProps),w.return=p;w.sibling=null}return p.child}function y6(l,p,w){switch(p.tag){case 3:M_(p),tu();break;case 5:Zb(p);break;case 1:ri(p.type)&&Vf(p);break;case 4:Eg(p,p.stateNode.containerInfo);break;case 10:var A=p.type._context,k=p.memoizedProps.value;rn(Wf,A._currentValue),A._currentValue=k;break;case 13:if(A=p.memoizedState,A!==null)return A.dehydrated!==null?(rn(En,En.current&1),p.flags|=128,null):(w&p.child.childLanes)!==0?L_(l,p,w):(rn(En,En.current&1),l=ss(l,p,w),l!==null?l.sibling:null);rn(En,En.current&1);break;case 19:if(A=(w&p.childLanes)!==0,(l.flags&128)!==0){if(A)return F_(l,p,w);p.flags|=128}if(k=p.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),rn(En,En.current),A)break;return null;case 22:case 23:return p.lanes=0,R_(l,p,w)}return ss(l,p,w)}var U_,zg,j_,V_;U_=function(l,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)l.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},zg=function(){},j_=function(l,p,w,A){var k=l.memoizedProps;if(k!==A){l=p.stateNode,qa(Lo.current);var B=null;switch(w){case"input":k=dt(l,k),A=dt(l,A),B=[];break;case"select":k=Ce({},k,{value:void 0}),A=Ce({},A,{value:void 0}),B=[];break;case"textarea":k=Bs(l,k),A=Bs(l,A),B=[];break;default:typeof k.onClick!="function"&&typeof A.onClick=="function"&&(l.onclick=Ff)}Lt(w,A);var z;w=null;for(ye in k)if(!A.hasOwnProperty(ye)&&k.hasOwnProperty(ye)&&k[ye]!=null)if(ye==="style"){var J=k[ye];for(z in J)J.hasOwnProperty(z)&&(w||(w={}),w[z]="")}else ye!=="dangerouslySetInnerHTML"&&ye!=="children"&&ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&ye!=="autoFocus"&&(i.hasOwnProperty(ye)?B||(B=[]):(B=B||[]).push(ye,null));for(ye in A){var ee=A[ye];if(J=k?.[ye],A.hasOwnProperty(ye)&&ee!==J&&(ee!=null||J!=null))if(ye==="style")if(J){for(z in J)!J.hasOwnProperty(z)||ee&&ee.hasOwnProperty(z)||(w||(w={}),w[z]="");for(z in ee)ee.hasOwnProperty(z)&&J[z]!==ee[z]&&(w||(w={}),w[z]=ee[z])}else w||(B||(B=[]),B.push(ye,w)),w=ee;else ye==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,J=J?J.__html:void 0,ee!=null&&J!==ee&&(B=B||[]).push(ye,ee)):ye==="children"?typeof ee!="string"&&typeof ee!="number"||(B=B||[]).push(ye,""+ee):ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&(i.hasOwnProperty(ye)?(ee!=null&&ye==="onScroll"&&ln("scroll",l),B||J===ee||(B=[])):(B=B||[]).push(ye,ee))}w&&(B=B||[]).push("style",w);var ye=B;(p.updateQueue=ye)&&(p.flags|=4)}},V_=function(l,p,w,A){w!==A&&(p.flags|=4)};function Wc(l,p){if(!pn)switch(l.tailMode){case"hidden":p=l.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?l.tail=null:w.sibling=null;break;case"collapsed":w=l.tail;for(var A=null;w!==null;)w.alternate!==null&&(A=w),w=w.sibling;A===null?p||l.tail===null?l.tail=null:l.tail.sibling=null:A.sibling=null}}function Br(l){var p=l.alternate!==null&&l.alternate.child===l.child,w=0,A=0;if(p)for(var k=l.child;k!==null;)w|=k.lanes|k.childLanes,A|=k.subtreeFlags&14680064,A|=k.flags&14680064,k.return=l,k=k.sibling;else for(k=l.child;k!==null;)w|=k.lanes|k.childLanes,A|=k.subtreeFlags,A|=k.flags,k.return=l,k=k.sibling;return l.subtreeFlags|=A,l.childLanes=w,p}function x6(l,p,w){var A=p.pendingProps;switch(dg(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(p),null;case 1:return ri(p.type)&&jf(),Br(p),null;case 3:return A=p.stateNode,ou(),un(ni),un(Dr),Sg(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(l===null||l.child===null)&&(Hf(p)?p.flags|=4:l===null||l.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,co!==null&&(e1(co),co=null))),zg(l,p),Br(p),null;case 5:bg(p);var k=qa($c.current);if(w=p.type,l!==null&&p.stateNode!=null)j_(l,p,w,A,k),l.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!A){if(p.stateNode===null)throw Error(n(166));return Br(p),null}if(l=qa(Lo.current),Hf(p)){A=p.stateNode,w=p.type;var B=p.memoizedProps;switch(A[Do]=p,A[Bc]=B,l=(p.mode&1)!==0,w){case"dialog":ln("cancel",A),ln("close",A);break;case"iframe":case"object":case"embed":ln("load",A);break;case"video":case"audio":for(k=0;k<Mc.length;k++)ln(Mc[k],A);break;case"source":ln("error",A);break;case"img":case"image":case"link":ln("error",A),ln("load",A);break;case"details":ln("toggle",A);break;case"input":It(A,B),ln("invalid",A);break;case"select":A._wrapperState={wasMultiple:!!B.multiple},ln("invalid",A);break;case"textarea":fc(A,B),ln("invalid",A)}Lt(w,B),k=null;for(var z in B)if(B.hasOwnProperty(z)){var J=B[z];z==="children"?typeof J=="string"?A.textContent!==J&&(B.suppressHydrationWarning!==!0&&Bf(A.textContent,J,l),k=["children",J]):typeof J=="number"&&A.textContent!==""+J&&(B.suppressHydrationWarning!==!0&&Bf(A.textContent,J,l),k=["children",""+J]):i.hasOwnProperty(z)&&J!=null&&z==="onScroll"&&ln("scroll",A)}switch(w){case"input":Me(A),Rt(A,B,!0);break;case"textarea":Me(A),Ll(A);break;case"select":case"option":break;default:typeof B.onClick=="function"&&(A.onclick=Ff)}A=k,p.updateQueue=A,A!==null&&(p.flags|=4)}else{z=k.nodeType===9?k:k.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Zr(w)),l==="http://www.w3.org/1999/xhtml"?w==="script"?(l=z.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof A.is=="string"?l=z.createElement(w,{is:A.is}):(l=z.createElement(w),w==="select"&&(z=l,A.multiple?z.multiple=!0:A.size&&(z.size=A.size))):l=z.createElementNS(l,w),l[Do]=p,l[Bc]=A,U_(l,p,!1,!1),p.stateNode=l;e:{switch(z=Qt(w,A),w){case"dialog":ln("cancel",l),ln("close",l),k=A;break;case"iframe":case"object":case"embed":ln("load",l),k=A;break;case"video":case"audio":for(k=0;k<Mc.length;k++)ln(Mc[k],l);k=A;break;case"source":ln("error",l),k=A;break;case"img":case"image":case"link":ln("error",l),ln("load",l),k=A;break;case"details":ln("toggle",l),k=A;break;case"input":It(l,A),k=dt(l,A),ln("invalid",l);break;case"option":k=A;break;case"select":l._wrapperState={wasMultiple:!!A.multiple},k=Ce({},A,{value:void 0}),ln("invalid",l);break;case"textarea":fc(l,A),k=Bs(l,A),ln("invalid",l);break;default:k=A}Lt(w,k),J=k;for(B in J)if(J.hasOwnProperty(B)){var ee=J[B];B==="style"?Be(l,ee):B==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&lr(l,ee)):B==="children"?typeof ee=="string"?(w!=="textarea"||ee!=="")&&Fs(l,ee):typeof ee=="number"&&Fs(l,""+ee):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(i.hasOwnProperty(B)?ee!=null&&B==="onScroll"&&ln("scroll",l):ee!=null&&L(l,B,ee,z))}switch(w){case"input":Me(l),Rt(l,A,!1);break;case"textarea":Me(l),Ll(l);break;case"option":A.value!=null&&l.setAttribute("value",""+rt(A.value));break;case"select":l.multiple=!!A.multiple,B=A.value,B!=null?$e(l,!!A.multiple,B,!1):A.defaultValue!=null&&$e(l,!!A.multiple,A.defaultValue,!0);break;default:typeof k.onClick=="function"&&(l.onclick=Ff)}switch(w){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}}A&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Br(p),null;case 6:if(l&&p.stateNode!=null)V_(l,p,l.memoizedProps,A);else{if(typeof A!="string"&&p.stateNode===null)throw Error(n(166));if(w=qa($c.current),qa(Lo.current),Hf(p)){if(A=p.stateNode,w=p.memoizedProps,A[Do]=p,(B=A.nodeValue!==w)&&(l=bi,l!==null))switch(l.tag){case 3:Bf(A.nodeValue,w,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Bf(A.nodeValue,w,(l.mode&1)!==0)}B&&(p.flags|=4)}else A=(w.nodeType===9?w:w.ownerDocument).createTextNode(A),A[Do]=p,p.stateNode=A}return Br(p),null;case 13:if(un(En),A=p.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(pn&&_i!==null&&(p.mode&1)!==0&&(p.flags&128)===0)Gb(),tu(),p.flags|=98560,B=!1;else if(B=Hf(p),A!==null&&A.dehydrated!==null){if(l===null){if(!B)throw Error(n(318));if(B=p.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(n(317));B[Do]=p}else tu(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Br(p),B=!1}else co!==null&&(e1(co),co=null),B=!0;if(!B)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=w,p):(A=A!==null,A!==(l!==null&&l.memoizedState!==null)&&A&&(p.child.flags|=8192,(p.mode&1)!==0&&(l===null||(En.current&1)!==0?nr===0&&(nr=3):r1())),p.updateQueue!==null&&(p.flags|=4),Br(p),null);case 4:return ou(),zg(l,p),l===null&&Dc(p.stateNode.containerInfo),Br(p),null;case 10:return vg(p.type._context),Br(p),null;case 17:return ri(p.type)&&jf(),Br(p),null;case 19:if(un(En),B=p.memoizedState,B===null)return Br(p),null;if(A=(p.flags&128)!==0,z=B.rendering,z===null)if(A)Wc(B,!1);else{if(nr!==0||l!==null&&(l.flags&128)!==0)for(l=p.child;l!==null;){if(z=Jf(l),z!==null){for(p.flags|=128,Wc(B,!1),A=z.updateQueue,A!==null&&(p.updateQueue=A,p.flags|=4),p.subtreeFlags=0,A=w,w=p.child;w!==null;)B=w,l=A,B.flags&=14680066,z=B.alternate,z===null?(B.childLanes=0,B.lanes=l,B.child=null,B.subtreeFlags=0,B.memoizedProps=null,B.memoizedState=null,B.updateQueue=null,B.dependencies=null,B.stateNode=null):(B.childLanes=z.childLanes,B.lanes=z.lanes,B.child=z.child,B.subtreeFlags=0,B.deletions=null,B.memoizedProps=z.memoizedProps,B.memoizedState=z.memoizedState,B.updateQueue=z.updateQueue,B.type=z.type,l=z.dependencies,B.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),w=w.sibling;return rn(En,En.current&1|2),p.child}l=l.sibling}B.tail!==null&&Ut()>uu&&(p.flags|=128,A=!0,Wc(B,!1),p.lanes=4194304)}else{if(!A)if(l=Jf(z),l!==null){if(p.flags|=128,A=!0,w=l.updateQueue,w!==null&&(p.updateQueue=w,p.flags|=4),Wc(B,!0),B.tail===null&&B.tailMode==="hidden"&&!z.alternate&&!pn)return Br(p),null}else 2*Ut()-B.renderingStartTime>uu&&w!==1073741824&&(p.flags|=128,A=!0,Wc(B,!1),p.lanes=4194304);B.isBackwards?(z.sibling=p.child,p.child=z):(w=B.last,w!==null?w.sibling=z:p.child=z,B.last=z)}return B.tail!==null?(p=B.tail,B.rendering=p,B.tail=p.sibling,B.renderingStartTime=Ut(),p.sibling=null,w=En.current,rn(En,A?w&1|2:w&1),p):(Br(p),null);case 22:case 23:return n1(),A=p.memoizedState!==null,l!==null&&l.memoizedState!==null!==A&&(p.flags|=8192),A&&(p.mode&1)!==0?(Si&1073741824)!==0&&(Br(p),p.subtreeFlags&6&&(p.flags|=8192)):Br(p),null;case 24:return null;case 25:return null}throw Error(n(156,p.tag))}function w6(l,p){switch(dg(p),p.tag){case 1:return ri(p.type)&&jf(),l=p.flags,l&65536?(p.flags=l&-65537|128,p):null;case 3:return ou(),un(ni),un(Dr),Sg(),l=p.flags,(l&65536)!==0&&(l&128)===0?(p.flags=l&-65537|128,p):null;case 5:return bg(p),null;case 13:if(un(En),l=p.memoizedState,l!==null&&l.dehydrated!==null){if(p.alternate===null)throw Error(n(340));tu()}return l=p.flags,l&65536?(p.flags=l&-65537|128,p):null;case 19:return un(En),null;case 4:return ou(),null;case 10:return vg(p.type._context),null;case 22:case 23:return n1(),null;case 24:return null;default:return null}}var sh=!1,Fr=!1,E6=typeof WeakSet=="function"?WeakSet:Set,He=null;function au(l,p){var w=l.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(A){Pn(l,p,A)}else w.current=null}function Gg(l,p,w){try{w()}catch(A){Pn(l,p,A)}}var $_=!1;function b6(l,p){if(ng=ko,l=wt(),pt(l)){if("selectionStart"in l)var w={start:l.selectionStart,end:l.selectionEnd};else e:{w=(w=l.ownerDocument)&&w.defaultView||window;var A=w.getSelection&&w.getSelection();if(A&&A.rangeCount!==0){w=A.anchorNode;var k=A.anchorOffset,B=A.focusNode;A=A.focusOffset;try{w.nodeType,B.nodeType}catch{w=null;break e}var z=0,J=-1,ee=-1,ye=0,Pe=0,Re=l,Te=null;t:for(;;){for(var Ve;Re!==w||k!==0&&Re.nodeType!==3||(J=z+k),Re!==B||A!==0&&Re.nodeType!==3||(ee=z+A),Re.nodeType===3&&(z+=Re.nodeValue.length),(Ve=Re.firstChild)!==null;)Te=Re,Re=Ve;for(;;){if(Re===l)break t;if(Te===w&&++ye===k&&(J=z),Te===B&&++Pe===A&&(ee=z),(Ve=Re.nextSibling)!==null)break;Re=Te,Te=Re.parentNode}Re=Ve}w=J===-1||ee===-1?null:{start:J,end:ee}}else w=null}w=w||{start:0,end:0}}else w=null;for(rg={focusedElem:l,selectionRange:w},ko=!1,He=p;He!==null;)if(p=He,l=p.child,(p.subtreeFlags&1028)!==0&&l!==null)l.return=p,He=l;else for(;He!==null;){p=He;try{var Ye=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Ye!==null){var Xe=Ye.memoizedProps,Fn=Ye.memoizedState,ue=p.stateNode,ie=ue.getSnapshotBeforeUpdate(p.elementType===p.type?Xe:fo(p.type,Xe),Fn);ue.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var ce=p.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(De){Pn(p,p.return,De)}if(l=p.sibling,l!==null){l.return=p.return,He=l;break}He=p.return}return Ye=$_,$_=!1,Ye}function Kc(l,p,w){var A=p.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var k=A=A.next;do{if((k.tag&l)===l){var B=k.destroy;k.destroy=void 0,B!==void 0&&Gg(p,w,B)}k=k.next}while(k!==A)}}function ah(l,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&l)===l){var A=w.create;w.destroy=A()}w=w.next}while(w!==p)}}function Hg(l){var p=l.ref;if(p!==null){var w=l.stateNode;switch(l.tag){case 5:l=w;break;default:l=w}typeof p=="function"?p(l):p.current=l}}function z_(l){var p=l.alternate;p!==null&&(l.alternate=null,z_(p)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(p=l.stateNode,p!==null&&(delete p[Do],delete p[Bc],delete p[ag],delete p[i6],delete p[o6])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function G_(l){return l.tag===5||l.tag===3||l.tag===4}function H_(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||G_(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function qg(l,p,w){var A=l.tag;if(A===5||A===6)l=l.stateNode,p?w.nodeType===8?w.parentNode.insertBefore(l,p):w.insertBefore(l,p):(w.nodeType===8?(p=w.parentNode,p.insertBefore(l,w)):(p=w,p.appendChild(l)),w=w._reactRootContainer,w!=null||p.onclick!==null||(p.onclick=Ff));else if(A!==4&&(l=l.child,l!==null))for(qg(l,p,w),l=l.sibling;l!==null;)qg(l,p,w),l=l.sibling}function Wg(l,p,w){var A=l.tag;if(A===5||A===6)l=l.stateNode,p?w.insertBefore(l,p):w.appendChild(l);else if(A!==4&&(l=l.child,l!==null))for(Wg(l,p,w),l=l.sibling;l!==null;)Wg(l,p,w),l=l.sibling}var Sr=null,ho=!1;function ra(l,p,w){for(w=w.child;w!==null;)q_(l,p,w),w=w.sibling}function q_(l,p,w){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Tt,w)}catch{}switch(w.tag){case 5:Fr||au(w,p);case 6:var A=Sr,k=ho;Sr=null,ra(l,p,w),Sr=A,ho=k,Sr!==null&&(ho?(l=Sr,w=w.stateNode,l.nodeType===8?l.parentNode.removeChild(w):l.removeChild(w)):Sr.removeChild(w.stateNode));break;case 18:Sr!==null&&(ho?(l=Sr,w=w.stateNode,l.nodeType===8?sg(l.parentNode,w):l.nodeType===1&&sg(l,w),ao(l)):sg(Sr,w.stateNode));break;case 4:A=Sr,k=ho,Sr=w.stateNode.containerInfo,ho=!0,ra(l,p,w),Sr=A,ho=k;break;case 0:case 11:case 14:case 15:if(!Fr&&(A=w.updateQueue,A!==null&&(A=A.lastEffect,A!==null))){k=A=A.next;do{var B=k,z=B.destroy;B=B.tag,z!==void 0&&((B&2)!==0||(B&4)!==0)&&Gg(w,p,z),k=k.next}while(k!==A)}ra(l,p,w);break;case 1:if(!Fr&&(au(w,p),A=w.stateNode,typeof A.componentWillUnmount=="function"))try{A.props=w.memoizedProps,A.state=w.memoizedState,A.componentWillUnmount()}catch(J){Pn(w,p,J)}ra(l,p,w);break;case 21:ra(l,p,w);break;case 22:w.mode&1?(Fr=(A=Fr)||w.memoizedState!==null,ra(l,p,w),Fr=A):ra(l,p,w);break;default:ra(l,p,w)}}function W_(l){var p=l.updateQueue;if(p!==null){l.updateQueue=null;var w=l.stateNode;w===null&&(w=l.stateNode=new E6),p.forEach(function(A){var k=R6.bind(null,l,A);w.has(A)||(w.add(A),A.then(k,k))})}}function po(l,p){var w=p.deletions;if(w!==null)for(var A=0;A<w.length;A++){var k=w[A];try{var B=l,z=p,J=z;e:for(;J!==null;){switch(J.tag){case 5:Sr=J.stateNode,ho=!1;break e;case 3:Sr=J.stateNode.containerInfo,ho=!0;break e;case 4:Sr=J.stateNode.containerInfo,ho=!0;break e}J=J.return}if(Sr===null)throw Error(n(160));q_(B,z,k),Sr=null,ho=!1;var ee=k.alternate;ee!==null&&(ee.return=null),k.return=null}catch(ye){Pn(k,p,ye)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)K_(p,l),p=p.sibling}function K_(l,p){var w=l.alternate,A=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(po(p,l),Fo(l),A&4){try{Kc(3,l,l.return),ah(3,l)}catch(Xe){Pn(l,l.return,Xe)}try{Kc(5,l,l.return)}catch(Xe){Pn(l,l.return,Xe)}}break;case 1:po(p,l),Fo(l),A&512&&w!==null&&au(w,w.return);break;case 5:if(po(p,l),Fo(l),A&512&&w!==null&&au(w,w.return),l.flags&32){var k=l.stateNode;try{Fs(k,"")}catch(Xe){Pn(l,l.return,Xe)}}if(A&4&&(k=l.stateNode,k!=null)){var B=l.memoizedProps,z=w!==null?w.memoizedProps:B,J=l.type,ee=l.updateQueue;if(l.updateQueue=null,ee!==null)try{J==="input"&&B.type==="radio"&&B.name!=null&&An(k,B),Qt(J,z);var ye=Qt(J,B);for(z=0;z<ee.length;z+=2){var Pe=ee[z],Re=ee[z+1];Pe==="style"?Be(k,Re):Pe==="dangerouslySetInnerHTML"?lr(k,Re):Pe==="children"?Fs(k,Re):L(k,Pe,Re,ye)}switch(J){case"input":$t(k,B);break;case"textarea":Di(k,B);break;case"select":var Te=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!B.multiple;var Ve=B.value;Ve!=null?$e(k,!!B.multiple,Ve,!1):Te!==!!B.multiple&&(B.defaultValue!=null?$e(k,!!B.multiple,B.defaultValue,!0):$e(k,!!B.multiple,B.multiple?[]:"",!1))}k[Bc]=B}catch(Xe){Pn(l,l.return,Xe)}}break;case 6:if(po(p,l),Fo(l),A&4){if(l.stateNode===null)throw Error(n(162));k=l.stateNode,B=l.memoizedProps;try{k.nodeValue=B}catch(Xe){Pn(l,l.return,Xe)}}break;case 3:if(po(p,l),Fo(l),A&4&&w!==null&&w.memoizedState.isDehydrated)try{ao(p.containerInfo)}catch(Xe){Pn(l,l.return,Xe)}break;case 4:po(p,l),Fo(l);break;case 13:po(p,l),Fo(l),k=l.child,k.flags&8192&&(B=k.memoizedState!==null,k.stateNode.isHidden=B,!B||k.alternate!==null&&k.alternate.memoizedState!==null||(Xg=Ut())),A&4&&W_(l);break;case 22:if(Pe=w!==null&&w.memoizedState!==null,l.mode&1?(Fr=(ye=Fr)||Pe,po(p,l),Fr=ye):po(p,l),Fo(l),A&8192){if(ye=l.memoizedState!==null,(l.stateNode.isHidden=ye)&&!Pe&&(l.mode&1)!==0)for(He=l,Pe=l.child;Pe!==null;){for(Re=He=Pe;He!==null;){switch(Te=He,Ve=Te.child,Te.tag){case 0:case 11:case 14:case 15:Kc(4,Te,Te.return);break;case 1:au(Te,Te.return);var Ye=Te.stateNode;if(typeof Ye.componentWillUnmount=="function"){A=Te,w=Te.return;try{p=A,Ye.props=p.memoizedProps,Ye.state=p.memoizedState,Ye.componentWillUnmount()}catch(Xe){Pn(A,w,Xe)}}break;case 5:au(Te,Te.return);break;case 22:if(Te.memoizedState!==null){J_(Re);continue}}Ve!==null?(Ve.return=Te,He=Ve):J_(Re)}Pe=Pe.sibling}e:for(Pe=null,Re=l;;){if(Re.tag===5){if(Pe===null){Pe=Re;try{k=Re.stateNode,ye?(B=k.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none"):(J=Re.stateNode,ee=Re.memoizedProps.style,z=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,J.style.display=xn("display",z))}catch(Xe){Pn(l,l.return,Xe)}}}else if(Re.tag===6){if(Pe===null)try{Re.stateNode.nodeValue=ye?"":Re.memoizedProps}catch(Xe){Pn(l,l.return,Xe)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===l)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===l)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===l)break e;Pe===Re&&(Pe=null),Re=Re.return}Pe===Re&&(Pe=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:po(p,l),Fo(l),A&4&&W_(l);break;case 21:break;default:po(p,l),Fo(l)}}function Fo(l){var p=l.flags;if(p&2){try{e:{for(var w=l.return;w!==null;){if(G_(w)){var A=w;break e}w=w.return}throw Error(n(160))}switch(A.tag){case 5:var k=A.stateNode;A.flags&32&&(Fs(k,""),A.flags&=-33);var B=H_(l);Wg(l,B,k);break;case 3:case 4:var z=A.stateNode.containerInfo,J=H_(l);qg(l,J,z);break;default:throw Error(n(161))}}catch(ee){Pn(l,l.return,ee)}l.flags&=-3}p&4096&&(l.flags&=-4097)}function _6(l,p,w){He=l,Y_(l)}function Y_(l,p,w){for(var A=(l.mode&1)!==0;He!==null;){var k=He,B=k.child;if(k.tag===22&&A){var z=k.memoizedState!==null||sh;if(!z){var J=k.alternate,ee=J!==null&&J.memoizedState!==null||Fr;J=sh;var ye=Fr;if(sh=z,(Fr=ee)&&!ye)for(He=k;He!==null;)z=He,ee=z.child,z.tag===22&&z.memoizedState!==null?Z_(k):ee!==null?(ee.return=z,He=ee):Z_(k);for(;B!==null;)He=B,Y_(B),B=B.sibling;He=k,sh=J,Fr=ye}X_(l)}else(k.subtreeFlags&8772)!==0&&B!==null?(B.return=k,He=B):X_(l)}}function X_(l){for(;He!==null;){var p=He;if((p.flags&8772)!==0){var w=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Fr||ah(5,p);break;case 1:var A=p.stateNode;if(p.flags&4&&!Fr)if(w===null)A.componentDidMount();else{var k=p.elementType===p.type?w.memoizedProps:fo(p.type,w.memoizedProps);A.componentDidUpdate(k,w.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var B=p.updateQueue;B!==null&&Jb(p,B,A);break;case 3:var z=p.updateQueue;if(z!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=p.child.stateNode;break;case 1:w=p.child.stateNode}Jb(p,z,w)}break;case 5:var J=p.stateNode;if(w===null&&p.flags&4){w=J;var ee=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&w.focus();break;case"img":ee.src&&(w.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var ye=p.alternate;if(ye!==null){var Pe=ye.memoizedState;if(Pe!==null){var Re=Pe.dehydrated;Re!==null&&ao(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Fr||p.flags&512&&Hg(p)}catch(Te){Pn(p,p.return,Te)}}if(p===l){He=null;break}if(w=p.sibling,w!==null){w.return=p.return,He=w;break}He=p.return}}function J_(l){for(;He!==null;){var p=He;if(p===l){He=null;break}var w=p.sibling;if(w!==null){w.return=p.return,He=w;break}He=p.return}}function Z_(l){for(;He!==null;){var p=He;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{ah(4,p)}catch(ee){Pn(p,w,ee)}break;case 1:var A=p.stateNode;if(typeof A.componentDidMount=="function"){var k=p.return;try{A.componentDidMount()}catch(ee){Pn(p,k,ee)}}var B=p.return;try{Hg(p)}catch(ee){Pn(p,B,ee)}break;case 5:var z=p.return;try{Hg(p)}catch(ee){Pn(p,z,ee)}}}catch(ee){Pn(p,p.return,ee)}if(p===l){He=null;break}var J=p.sibling;if(J!==null){J.return=p.return,He=J;break}He=p.return}}var S6=Math.ceil,lh=V.ReactCurrentDispatcher,Kg=V.ReactCurrentOwner,Hi=V.ReactCurrentBatchConfig,Nt=0,fr=null,zn=null,Cr=0,Si=0,lu=Zs(0),nr=0,Yc=null,Ka=0,uh=0,Yg=0,Xc=null,oi=null,Xg=0,uu=1/0,as=null,ch=!1,Jg=null,ia=null,dh=!1,oa=null,fh=0,Jc=0,Zg=null,hh=-1,ph=0;function qr(){return(Nt&6)!==0?Ut():hh!==-1?hh:hh=Ut()}function sa(l){return(l.mode&1)===0?1:(Nt&2)!==0&&Cr!==0?Cr&-Cr:a6.transition!==null?(ph===0&&(ph=Jn()),ph):(l=yt,l!==0||(l=window.event,l=l===void 0?16:Sc(l.type)),l)}function mo(l,p,w,A){if(50<Jc)throw Jc=0,Zg=null,Error(n(185));K(l,w,A),((Nt&2)===0||l!==fr)&&(l===fr&&((Nt&2)===0&&(uh|=w),nr===4&&aa(l,Cr)),si(l,A),w===1&&Nt===0&&(p.mode&1)===0&&(uu=Ut()+500,$f&&ea()))}function si(l,p){var w=l.callbackNode;Vs(l,p);var A=yi(l,l===fr?Cr:0);if(A===0)w!==null&&ur(w),l.callbackNode=null,l.callbackPriority=0;else if(p=A&-A,l.callbackPriority!==p){if(w!=null&&ur(w),p===1)l.tag===0?s6(e2.bind(null,l)):Ub(e2.bind(null,l)),n6(function(){(Nt&6)===0&&ea()}),w=null;else{switch(_f(A)){case 1:w=Ae;break;case 4:w=Ef;break;case 16:w=Kt;break;case 536870912:w=bf;break;default:w=Kt}w=l2(w,Q_.bind(null,l))}l.callbackPriority=p,l.callbackNode=w}}function Q_(l,p){if(hh=-1,ph=0,(Nt&6)!==0)throw Error(n(327));var w=l.callbackNode;if(cu()&&l.callbackNode!==w)return null;var A=yi(l,l===fr?Cr:0);if(A===0)return null;if((A&30)!==0||(A&l.expiredLanes)!==0||p)p=mh(l,A);else{p=A;var k=Nt;Nt|=2;var B=n2();(fr!==l||Cr!==p)&&(as=null,uu=Ut()+500,Xa(l,p));do try{T6();break}catch(J){t2(l,J)}while(!0);gg(),lh.current=B,Nt=k,zn!==null?p=0:(fr=null,Cr=0,p=nr)}if(p!==0){if(p===2&&(k=jt(l),k!==0&&(A=k,p=Qg(l,k))),p===1)throw w=Yc,Xa(l,0),aa(l,A),si(l,Ut()),w;if(p===6)aa(l,A);else{if(k=l.current.alternate,(A&30)===0&&!C6(k)&&(p=mh(l,A),p===2&&(B=jt(l),B!==0&&(A=B,p=Qg(l,B))),p===1))throw w=Yc,Xa(l,0),aa(l,A),si(l,Ut()),w;switch(l.finishedWork=k,l.finishedLanes=A,p){case 0:case 1:throw Error(n(345));case 2:Ja(l,oi,as);break;case 3:if(aa(l,A),(A&130023424)===A&&(p=Xg+500-Ut(),10<p)){if(yi(l,0)!==0)break;if(k=l.suspendedLanes,(k&A)!==A){qr(),l.pingedLanes|=l.suspendedLanes&k;break}l.timeoutHandle=og(Ja.bind(null,l,oi,as),p);break}Ja(l,oi,as);break;case 4:if(aa(l,A),(A&4194240)===A)break;for(p=l.eventTimes,k=-1;0<A;){var z=31-Gr(A);B=1<<z,z=p[z],z>k&&(k=z),A&=~B}if(A=k,A=Ut()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*S6(A/1960))-A,10<A){l.timeoutHandle=og(Ja.bind(null,l,oi,as),A);break}Ja(l,oi,as);break;case 5:Ja(l,oi,as);break;default:throw Error(n(329))}}}return si(l,Ut()),l.callbackNode===w?Q_.bind(null,l):null}function Qg(l,p){var w=Xc;return l.current.memoizedState.isDehydrated&&(Xa(l,p).flags|=256),l=mh(l,p),l!==2&&(p=oi,oi=w,p!==null&&e1(p)),l}function e1(l){oi===null?oi=l:oi.push.apply(oi,l)}function C6(l){for(var p=l;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var A=0;A<w.length;A++){var k=w[A],B=k.getSnapshot;k=k.value;try{if(!oe(B(),k))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function aa(l,p){for(p&=~Yg,p&=~uh,l.suspendedLanes|=p,l.pingedLanes&=~p,l=l.expirationTimes;0<p;){var w=31-Gr(p),A=1<<w;l[w]=-1,p&=~A}}function e2(l){if((Nt&6)!==0)throw Error(n(327));cu();var p=yi(l,0);if((p&1)===0)return si(l,Ut()),null;var w=mh(l,p);if(l.tag!==0&&w===2){var A=jt(l);A!==0&&(p=A,w=Qg(l,A))}if(w===1)throw w=Yc,Xa(l,0),aa(l,p),si(l,Ut()),w;if(w===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=p,Ja(l,oi,as),si(l,Ut()),null}function t1(l,p){var w=Nt;Nt|=1;try{return l(p)}finally{Nt=w,Nt===0&&(uu=Ut()+500,$f&&ea())}}function Ya(l){oa!==null&&oa.tag===0&&(Nt&6)===0&&cu();var p=Nt;Nt|=1;var w=Hi.transition,A=yt;try{if(Hi.transition=null,yt=1,l)return l()}finally{yt=A,Hi.transition=w,Nt=p,(Nt&6)===0&&ea()}}function n1(){Si=lu.current,un(lu)}function Xa(l,p){l.finishedWork=null,l.finishedLanes=0;var w=l.timeoutHandle;if(w!==-1&&(l.timeoutHandle=-1,t6(w)),zn!==null)for(w=zn.return;w!==null;){var A=w;switch(dg(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&jf();break;case 3:ou(),un(ni),un(Dr),Sg();break;case 5:bg(A);break;case 4:ou();break;case 13:un(En);break;case 19:un(En);break;case 10:vg(A.type._context);break;case 22:case 23:n1()}w=w.return}if(fr=l,zn=l=la(l.current,null),Cr=Si=p,nr=0,Yc=null,Yg=uh=Ka=0,oi=Xc=null,Ha!==null){for(p=0;p<Ha.length;p++)if(w=Ha[p],A=w.interleaved,A!==null){w.interleaved=null;var k=A.next,B=w.pending;if(B!==null){var z=B.next;B.next=k,A.next=z}w.pending=A}Ha=null}return l}function t2(l,p){do{var w=zn;try{if(gg(),Zf.current=nh,Qf){for(var A=bn.memoizedState;A!==null;){var k=A.queue;k!==null&&(k.pending=null),A=A.next}Qf=!1}if(Wa=0,dr=tr=bn=null,zc=!1,Gc=0,Kg.current=null,w===null||w.return===null){nr=1,Yc=p,zn=null;break}e:{var B=l,z=w.return,J=w,ee=p;if(p=Cr,J.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var ye=ee,Pe=J,Re=Pe.tag;if((Pe.mode&1)===0&&(Re===0||Re===11||Re===15)){var Te=Pe.alternate;Te?(Pe.updateQueue=Te.updateQueue,Pe.memoizedState=Te.memoizedState,Pe.lanes=Te.lanes):(Pe.updateQueue=null,Pe.memoizedState=null)}var Ve=A_(z);if(Ve!==null){Ve.flags&=-257,T_(Ve,z,J,B,p),Ve.mode&1&&C_(B,ye,p),p=Ve,ee=ye;var Ye=p.updateQueue;if(Ye===null){var Xe=new Set;Xe.add(ee),p.updateQueue=Xe}else Ye.add(ee);break e}else{if((p&1)===0){C_(B,ye,p),r1();break e}ee=Error(n(426))}}else if(pn&&J.mode&1){var Fn=A_(z);if(Fn!==null){(Fn.flags&65536)===0&&(Fn.flags|=256),T_(Fn,z,J,B,p),pg(su(ee,J));break e}}B=ee=su(ee,J),nr!==4&&(nr=2),Xc===null?Xc=[B]:Xc.push(B),B=z;do{switch(B.tag){case 3:B.flags|=65536,p&=-p,B.lanes|=p;var ue=__(B,ee,p);Xb(B,ue);break e;case 1:J=ee;var ie=B.type,ce=B.stateNode;if((B.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(ia===null||!ia.has(ce)))){B.flags|=65536,p&=-p,B.lanes|=p;var De=S_(B,J,p);Xb(B,De);break e}}B=B.return}while(B!==null)}i2(w)}catch(Ze){p=Ze,zn===w&&w!==null&&(zn=w=w.return);continue}break}while(!0)}function n2(){var l=lh.current;return lh.current=nh,l===null?nh:l}function r1(){(nr===0||nr===3||nr===2)&&(nr=4),fr===null||(Ka&268435455)===0&&(uh&268435455)===0||aa(fr,Cr)}function mh(l,p){var w=Nt;Nt|=2;var A=n2();(fr!==l||Cr!==p)&&(as=null,Xa(l,p));do try{A6();break}catch(k){t2(l,k)}while(!0);if(gg(),Nt=w,lh.current=A,zn!==null)throw Error(n(261));return fr=null,Cr=0,nr}function A6(){for(;zn!==null;)r2(zn)}function T6(){for(;zn!==null&&!en();)r2(zn)}function r2(l){var p=a2(l.alternate,l,Si);l.memoizedProps=l.pendingProps,p===null?i2(l):zn=p,Kg.current=null}function i2(l){var p=l;do{var w=p.alternate;if(l=p.return,(p.flags&32768)===0){if(w=x6(w,p,Si),w!==null){zn=w;return}}else{if(w=w6(w,p),w!==null){w.flags&=32767,zn=w;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{nr=6,zn=null;return}}if(p=p.sibling,p!==null){zn=p;return}zn=p=l}while(p!==null);nr===0&&(nr=5)}function Ja(l,p,w){var A=yt,k=Hi.transition;try{Hi.transition=null,yt=1,I6(l,p,w,A)}finally{Hi.transition=k,yt=A}return null}function I6(l,p,w,A){do cu();while(oa!==null);if((Nt&6)!==0)throw Error(n(327));w=l.finishedWork;var k=l.finishedLanes;if(w===null)return null;if(l.finishedWork=null,l.finishedLanes=0,w===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var B=w.lanes|w.childLanes;if(tt(l,B),l===fr&&(zn=fr=null,Cr=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||dh||(dh=!0,l2(Kt,function(){return cu(),null})),B=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||B){B=Hi.transition,Hi.transition=null;var z=yt;yt=1;var J=Nt;Nt|=4,Kg.current=null,b6(l,w),K_(w,l),Mr(rg),ko=!!ng,rg=ng=null,l.current=w,_6(w),wf(),Nt=J,yt=z,Hi.transition=B}else l.current=w;if(dh&&(dh=!1,oa=l,fh=k),B=l.pendingLanes,B===0&&(ia=null),St(w.stateNode),si(l,Ut()),p!==null)for(A=l.onRecoverableError,w=0;w<p.length;w++)k=p[w],A(k.value,{componentStack:k.stack,digest:k.digest});if(ch)throw ch=!1,l=Jg,Jg=null,l;return(fh&1)!==0&&l.tag!==0&&cu(),B=l.pendingLanes,(B&1)!==0?l===Zg?Jc++:(Jc=0,Zg=l):Jc=0,ea(),null}function cu(){if(oa!==null){var l=_f(fh),p=Hi.transition,w=yt;try{if(Hi.transition=null,yt=16>l?16:l,oa===null)var A=!1;else{if(l=oa,oa=null,fh=0,(Nt&6)!==0)throw Error(n(331));var k=Nt;for(Nt|=4,He=l.current;He!==null;){var B=He,z=B.child;if((He.flags&16)!==0){var J=B.deletions;if(J!==null){for(var ee=0;ee<J.length;ee++){var ye=J[ee];for(He=ye;He!==null;){var Pe=He;switch(Pe.tag){case 0:case 11:case 15:Kc(8,Pe,B)}var Re=Pe.child;if(Re!==null)Re.return=Pe,He=Re;else for(;He!==null;){Pe=He;var Te=Pe.sibling,Ve=Pe.return;if(z_(Pe),Pe===ye){He=null;break}if(Te!==null){Te.return=Ve,He=Te;break}He=Ve}}}var Ye=B.alternate;if(Ye!==null){var Xe=Ye.child;if(Xe!==null){Ye.child=null;do{var Fn=Xe.sibling;Xe.sibling=null,Xe=Fn}while(Xe!==null)}}He=B}}if((B.subtreeFlags&2064)!==0&&z!==null)z.return=B,He=z;else e:for(;He!==null;){if(B=He,(B.flags&2048)!==0)switch(B.tag){case 0:case 11:case 15:Kc(9,B,B.return)}var ue=B.sibling;if(ue!==null){ue.return=B.return,He=ue;break e}He=B.return}}var ie=l.current;for(He=ie;He!==null;){z=He;var ce=z.child;if((z.subtreeFlags&2064)!==0&&ce!==null)ce.return=z,He=ce;else e:for(z=ie;He!==null;){if(J=He,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:ah(9,J)}}catch(Ze){Pn(J,J.return,Ze)}if(J===z){He=null;break e}var De=J.sibling;if(De!==null){De.return=J.return,He=De;break e}He=J.return}}if(Nt=k,ea(),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Tt,l)}catch{}A=!0}return A}finally{yt=w,Hi.transition=p}}return!1}function o2(l,p,w){p=su(w,p),p=__(l,p,1),l=na(l,p,1),p=qr(),l!==null&&(K(l,1,p),si(l,p))}function Pn(l,p,w){if(l.tag===3)o2(l,l,w);else for(;p!==null;){if(p.tag===3){o2(p,l,w);break}else if(p.tag===1){var A=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(ia===null||!ia.has(A))){l=su(w,l),l=S_(p,l,1),p=na(p,l,1),l=qr(),p!==null&&(K(p,1,l),si(p,l));break}}p=p.return}}function P6(l,p,w){var A=l.pingCache;A!==null&&A.delete(p),p=qr(),l.pingedLanes|=l.suspendedLanes&w,fr===l&&(Cr&w)===w&&(nr===4||nr===3&&(Cr&130023424)===Cr&&500>Ut()-Xg?Xa(l,0):Yg|=w),si(l,p)}function s2(l,p){p===0&&((l.mode&1)===0?p=1:(p=jl,jl<<=1,(jl&130023424)===0&&(jl=4194304)));var w=qr();l=is(l,p),l!==null&&(K(l,p,w),si(l,w))}function N6(l){var p=l.memoizedState,w=0;p!==null&&(w=p.retryLane),s2(l,w)}function R6(l,p){var w=0;switch(l.tag){case 13:var A=l.stateNode,k=l.memoizedState;k!==null&&(w=k.retryLane);break;case 19:A=l.stateNode;break;default:throw Error(n(314))}A!==null&&A.delete(p),s2(l,w)}var a2;a2=function(l,p,w){if(l!==null)if(l.memoizedProps!==p.pendingProps||ni.current)ii=!0;else{if((l.lanes&w)===0&&(p.flags&128)===0)return ii=!1,y6(l,p,w);ii=(l.flags&131072)!==0}else ii=!1,pn&&(p.flags&1048576)!==0&&jb(p,Gf,p.index);switch(p.lanes=0,p.tag){case 2:var A=p.type;oh(l,p),l=p.pendingProps;var k=Zl(p,Dr.current);iu(p,w),k=Tg(null,p,A,l,k,w);var B=Ig();return p.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ri(A)?(B=!0,Vf(p)):B=!1,p.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,wg(p),k.updater=rh,p.stateNode=k,k._reactInternals=p,Mg(p,A,l,w),p=Fg(null,p,A,!0,B,w)):(p.tag=0,pn&&B&&cg(p),Hr(null,p,k,w),p=p.child),p;case 16:A=p.elementType;e:{switch(oh(l,p),l=p.pendingProps,k=A._init,A=k(A._payload),p.type=A,k=p.tag=k6(A),l=fo(A,l),k){case 0:p=Bg(null,p,A,l,w);break e;case 1:p=k_(null,p,A,l,w);break e;case 11:p=I_(null,p,A,l,w);break e;case 14:p=P_(null,p,A,fo(A.type,l),w);break e}throw Error(n(306,A,""))}return p;case 0:return A=p.type,k=p.pendingProps,k=p.elementType===A?k:fo(A,k),Bg(l,p,A,k,w);case 1:return A=p.type,k=p.pendingProps,k=p.elementType===A?k:fo(A,k),k_(l,p,A,k,w);case 3:e:{if(M_(p),l===null)throw Error(n(387));A=p.pendingProps,B=p.memoizedState,k=B.element,Yb(l,p),Xf(p,A,null,w);var z=p.memoizedState;if(A=z.element,B.isDehydrated)if(B={element:A,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},p.updateQueue.baseState=B,p.memoizedState=B,p.flags&256){k=su(Error(n(423)),p),p=D_(l,p,A,w,k);break e}else if(A!==k){k=su(Error(n(424)),p),p=D_(l,p,A,w,k);break e}else for(_i=Js(p.stateNode.containerInfo.firstChild),bi=p,pn=!0,co=null,w=Wb(p,null,A,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(tu(),A===k){p=ss(l,p,w);break e}Hr(l,p,A,w)}p=p.child}return p;case 5:return Zb(p),l===null&&hg(p),A=p.type,k=p.pendingProps,B=l!==null?l.memoizedProps:null,z=k.children,ig(A,k)?z=null:B!==null&&ig(A,B)&&(p.flags|=32),O_(l,p),Hr(l,p,z,w),p.child;case 6:return l===null&&hg(p),null;case 13:return L_(l,p,w);case 4:return Eg(p,p.stateNode.containerInfo),A=p.pendingProps,l===null?p.child=nu(p,null,A,w):Hr(l,p,A,w),p.child;case 11:return A=p.type,k=p.pendingProps,k=p.elementType===A?k:fo(A,k),I_(l,p,A,k,w);case 7:return Hr(l,p,p.pendingProps,w),p.child;case 8:return Hr(l,p,p.pendingProps.children,w),p.child;case 12:return Hr(l,p,p.pendingProps.children,w),p.child;case 10:e:{if(A=p.type._context,k=p.pendingProps,B=p.memoizedProps,z=k.value,rn(Wf,A._currentValue),A._currentValue=z,B!==null)if(oe(B.value,z)){if(B.children===k.children&&!ni.current){p=ss(l,p,w);break e}}else for(B=p.child,B!==null&&(B.return=p);B!==null;){var J=B.dependencies;if(J!==null){z=B.child;for(var ee=J.firstContext;ee!==null;){if(ee.context===A){if(B.tag===1){ee=os(-1,w&-w),ee.tag=2;var ye=B.updateQueue;if(ye!==null){ye=ye.shared;var Pe=ye.pending;Pe===null?ee.next=ee:(ee.next=Pe.next,Pe.next=ee),ye.pending=ee}}B.lanes|=w,ee=B.alternate,ee!==null&&(ee.lanes|=w),yg(B.return,w,p),J.lanes|=w;break}ee=ee.next}}else if(B.tag===10)z=B.type===p.type?null:B.child;else if(B.tag===18){if(z=B.return,z===null)throw Error(n(341));z.lanes|=w,J=z.alternate,J!==null&&(J.lanes|=w),yg(z,w,p),z=B.sibling}else z=B.child;if(z!==null)z.return=B;else for(z=B;z!==null;){if(z===p){z=null;break}if(B=z.sibling,B!==null){B.return=z.return,z=B;break}z=z.return}B=z}Hr(l,p,k.children,w),p=p.child}return p;case 9:return k=p.type,A=p.pendingProps.children,iu(p,w),k=zi(k),A=A(k),p.flags|=1,Hr(l,p,A,w),p.child;case 14:return A=p.type,k=fo(A,p.pendingProps),k=fo(A.type,k),P_(l,p,A,k,w);case 15:return N_(l,p,p.type,p.pendingProps,w);case 17:return A=p.type,k=p.pendingProps,k=p.elementType===A?k:fo(A,k),oh(l,p),p.tag=1,ri(A)?(l=!0,Vf(p)):l=!1,iu(p,w),E_(p,A,k),Mg(p,A,k,w),Fg(null,p,A,!0,l,w);case 19:return F_(l,p,w);case 22:return R_(l,p,w)}throw Error(n(156,p.tag))};function l2(l,p){return gi(l,p)}function O6(l,p,w,A){this.tag=l,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qi(l,p,w,A){return new O6(l,p,w,A)}function i1(l){return l=l.prototype,!(!l||!l.isReactComponent)}function k6(l){if(typeof l=="function")return i1(l)?1:0;if(l!=null){if(l=l.$$typeof,l===ae)return 11;if(l===ne)return 14}return 2}function la(l,p){var w=l.alternate;return w===null?(w=qi(l.tag,p,l.key,l.mode),w.elementType=l.elementType,w.type=l.type,w.stateNode=l.stateNode,w.alternate=l,l.alternate=w):(w.pendingProps=p,w.type=l.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=l.flags&14680064,w.childLanes=l.childLanes,w.lanes=l.lanes,w.child=l.child,w.memoizedProps=l.memoizedProps,w.memoizedState=l.memoizedState,w.updateQueue=l.updateQueue,p=l.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=l.sibling,w.index=l.index,w.ref=l.ref,w}function gh(l,p,w,A,k,B){var z=2;if(A=l,typeof l=="function")i1(l)&&(z=1);else if(typeof l=="string")z=5;else e:switch(l){case W:return Za(w.children,k,B,p);case Z:z=8,k|=8;break;case X:return l=qi(12,w,p,k|2),l.elementType=X,l.lanes=B,l;case be:return l=qi(13,w,p,k),l.elementType=be,l.lanes=B,l;case he:return l=qi(19,w,p,k),l.elementType=he,l.lanes=B,l;case ve:return vh(w,k,B,p);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case fe:z=10;break e;case se:z=9;break e;case ae:z=11;break e;case ne:z=14;break e;case we:z=16,A=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return p=qi(z,w,p,k),p.elementType=l,p.type=A,p.lanes=B,p}function Za(l,p,w,A){return l=qi(7,l,A,p),l.lanes=w,l}function vh(l,p,w,A){return l=qi(22,l,A,p),l.elementType=ve,l.lanes=w,l.stateNode={isHidden:!1},l}function o1(l,p,w){return l=qi(6,l,null,p),l.lanes=w,l}function s1(l,p,w){return p=qi(4,l.children!==null?l.children:[],l.key,p),p.lanes=w,p.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},p}function M6(l,p,w,A,k){this.tag=p,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=le(0),this.expirationTimes=le(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=le(0),this.identifierPrefix=A,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function a1(l,p,w,A,k,B,z,J,ee){return l=new M6(l,p,w,J,ee),p===1?(p=1,B===!0&&(p|=8)):p=0,B=qi(3,null,null,p),l.current=B,B.stateNode=l,B.memoizedState={element:A,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},wg(B),l}function D6(l,p,w){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:A==null?null:""+A,children:l,containerInfo:p,implementation:w}}function u2(l){if(!l)return Qs;l=l._reactInternals;e:{if(ti(l)!==l||l.tag!==1)throw Error(n(170));var p=l;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ri(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(n(171))}if(l.tag===1){var w=l.type;if(ri(w))return Bb(l,w,p)}return p}function c2(l,p,w,A,k,B,z,J,ee){return l=a1(w,A,!0,l,k,B,z,J,ee),l.context=u2(null),w=l.current,A=qr(),k=sa(w),B=os(A,k),B.callback=p??null,na(w,B,k),l.current.lanes=k,K(l,k,A),si(l,A),l}function yh(l,p,w,A){var k=p.current,B=qr(),z=sa(k);return w=u2(w),p.context===null?p.context=w:p.pendingContext=w,p=os(B,z),p.payload={element:l},A=A===void 0?null:A,A!==null&&(p.callback=A),l=na(k,p,z),l!==null&&(mo(l,k,z,B),Yf(l,k,z)),z}function xh(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function d2(l,p){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var w=l.retryLane;l.retryLane=w!==0&&w<p?w:p}}function l1(l,p){d2(l,p),(l=l.alternate)&&d2(l,p)}function L6(){return null}var f2=typeof reportError=="function"?reportError:function(l){console.error(l)};function u1(l){this._internalRoot=l}wh.prototype.render=u1.prototype.render=function(l){var p=this._internalRoot;if(p===null)throw Error(n(409));yh(l,p,null,null)},wh.prototype.unmount=u1.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var p=l.containerInfo;Ya(function(){yh(null,l,null,null)}),p[es]=null}};function wh(l){this._internalRoot=l}wh.prototype.unstable_scheduleHydration=function(l){if(l){var p=tn();l={blockedOn:null,target:l,priority:p};for(var w=0;w<Er.length&&p!==0&&p<Er[w].priority;w++);Er.splice(w,0,l),w===0&&Cf(l)}};function c1(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Eh(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function h2(){}function B6(l,p,w,A,k){if(k){if(typeof A=="function"){var B=A;A=function(){var ye=xh(z);B.call(ye)}}var z=c2(p,A,l,0,null,!1,!1,"",h2);return l._reactRootContainer=z,l[es]=z.current,Dc(l.nodeType===8?l.parentNode:l),Ya(),z}for(;k=l.lastChild;)l.removeChild(k);if(typeof A=="function"){var J=A;A=function(){var ye=xh(ee);J.call(ye)}}var ee=a1(l,0,!1,null,null,!1,!1,"",h2);return l._reactRootContainer=ee,l[es]=ee.current,Dc(l.nodeType===8?l.parentNode:l),Ya(function(){yh(p,ee,w,A)}),ee}function bh(l,p,w,A,k){var B=w._reactRootContainer;if(B){var z=B;if(typeof k=="function"){var J=k;k=function(){var ee=xh(z);J.call(ee)}}yh(p,z,l,k)}else z=B6(w,p,l,k,A);return xh(z)}Vl=function(l){switch(l.tag){case 3:var p=l.stateNode;if(p.current.memoizedState.isDehydrated){var w=Yt(p.pendingLanes);w!==0&&(Tn(p,w|1),si(p,Ut()),(Nt&6)===0&&(uu=Ut()+500,ea()))}break;case 13:Ya(function(){var A=is(l,1);if(A!==null){var k=qr();mo(A,l,1,k)}}),l1(l,1)}},kr=function(l){if(l.tag===13){var p=is(l,134217728);if(p!==null){var w=qr();mo(p,l,134217728,w)}l1(l,134217728)}},nt=function(l){if(l.tag===13){var p=sa(l),w=is(l,p);if(w!==null){var A=qr();mo(w,l,p,A)}l1(l,p)}},tn=function(){return yt},Ec=function(l,p){var w=yt;try{return yt=l,p()}finally{yt=w}},Fl=function(l,p,w){switch(p){case"input":if($t(l,w),p=w.name,w.type==="radio"&&p!=null){for(w=l;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<w.length;p++){var A=w[p];if(A!==l&&A.form===l.form){var k=Uf(A);if(!k)throw Error(n(90));_e(A),$t(A,k)}}}break;case"textarea":Di(l,w);break;case"select":p=w.value,p!=null&&$e(l,!!w.multiple,p,!1)}},Ul=t1,Xn=Ya;var F6={usingClientEntryPoint:!1,Events:[Fc,Xl,Uf,pc,ei,t1]},Zc={findFiberByHostInstance:Va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},U6={bundleType:Zc.bundleType,version:Zc.version,rendererPackageName:Zc.rendererPackageName,rendererConfig:Zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=yf(l),l===null?null:l.stateNode},findFiberByHostInstance:Zc.findFiberByHostInstance||L6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_h.isDisabled&&_h.supportsFiber)try{Tt=_h.inject(U6),vt=_h}catch{}}return ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F6,ai.createPortal=function(l,p){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c1(p))throw Error(n(200));return D6(l,p,null,w)},ai.createRoot=function(l,p){if(!c1(l))throw Error(n(299));var w=!1,A="",k=f2;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onRecoverableError!==void 0&&(k=p.onRecoverableError)),p=a1(l,1,!1,null,null,w,!1,A,k),l[es]=p.current,Dc(l.nodeType===8?l.parentNode:l),new u1(p)},ai.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var p=l._reactInternals;if(p===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=yf(p),l=l===null?null:l.stateNode,l},ai.flushSync=function(l){return Ya(l)},ai.hydrate=function(l,p,w){if(!Eh(p))throw Error(n(200));return bh(null,l,p,!0,w)},ai.hydrateRoot=function(l,p,w){if(!c1(l))throw Error(n(405));var A=w!=null&&w.hydratedSources||null,k=!1,B="",z=f2;if(w!=null&&(w.unstable_strictMode===!0&&(k=!0),w.identifierPrefix!==void 0&&(B=w.identifierPrefix),w.onRecoverableError!==void 0&&(z=w.onRecoverableError)),p=c2(p,null,l,1,w??null,k,!1,B,z),l[es]=p.current,Dc(l),A)for(l=0;l<A.length;l++)w=A[l],k=w._getVersion,k=k(w._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[w,k]:p.mutableSourceEagerHydrationData.push(w,k);return new wh(p)},ai.render=function(l,p,w){if(!Eh(p))throw Error(n(200));return bh(null,l,p,!1,w)},ai.unmountComponentAtNode=function(l){if(!Eh(l))throw Error(n(40));return l._reactRootContainer?(Ya(function(){bh(null,null,l,!1,function(){l._reactRootContainer=null,l[es]=null})}),!0):!1},ai.unstable_batchedUpdates=t1,ai.unstable_renderSubtreeIntoContainer=function(l,p,w,A){if(!Eh(w))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return bh(l,p,w,!1,A)},ai.version="18.3.1-next-f1338f8080-20240426",ai}var E2;function KN(){if(E2)return h1.exports;E2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),h1.exports=W6(),h1.exports}var b2;function K6(){if(b2)return Ch;b2=1;var e=KN();return Ch.createRoot=e.createRoot,Ch.hydrateRoot=e.hydrateRoot,Ch}var Y6=K6();const X6=ro(Y6);var _2="popstate";function J6(e={}){function t(r,i){let{pathname:o,search:a,hash:c}=r.location;return fy("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ed(i)}return Q6(t,n,null,e)}function Sn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Co(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Z6(){return Math.random().toString(36).substring(2,10)}function S2(e,t){return{usr:e.state,key:e.key,idx:t}}function fy(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Wu(t):t,state:n,key:t&&t.key||r||Z6()}}function Ed({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Wu(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Q6(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,c="POP",f=null,d=m();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function m(){return(a.state||{idx:null}).idx}function v(){c="POP";let N=m(),D=N==null?null:N-d;d=N,f&&f({action:c,location:P.location,delta:D})}function E(N,D){c="PUSH";let F=fy(P.location,N,D);d=m()+1;let L=S2(F,d),V=P.createHref(F);try{a.pushState(L,"",V)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(V)}o&&f&&f({action:c,location:P.location,delta:1})}function C(N,D){c="REPLACE";let F=fy(P.location,N,D);d=m();let L=S2(F,d),V=P.createHref(F);a.replaceState(L,"",V),o&&f&&f({action:c,location:P.location,delta:0})}function I(N){return eL(N)}let P={get action(){return c},get location(){return e(i,a)},listen(N){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(_2,v),f=N,()=>{i.removeEventListener(_2,v),f=null}},createHref(N){return t(i,N)},createURL:I,encodeLocation(N){let D=I(N);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:E,replace:C,go(N){return a.go(N)}};return P}function eL(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Sn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Ed(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function YN(e,t,n="/"){return tL(e,t,n,!1)}function tL(e,t,n,r){let i=typeof t=="string"?Wu(t):t,o=xs(i.pathname||"/",n);if(o==null)return null;let a=XN(e);nL(a);let c=null;for(let f=0;c==null&&f<a.length;++f){let d=hL(o);c=dL(a[f],d,r)}return c}function XN(e,t=[],n=[],r="",i=!1){let o=(a,c,f=i,d)=>{let m={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&f)return;Sn(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let v=gs([r,m.relativePath]),E=n.concat(m);a.children&&a.children.length>0&&(Sn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),XN(a.children,t,E,v,f)),!(a.path==null&&!a.index)&&t.push({path:v,score:uL(v,a.index),routesMeta:E})};return e.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))o(a,c);else for(let f of JN(a.path))o(a,c,!0,f)}),t}function JN(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=JN(r.join("/")),c=[];return c.push(...a.map(f=>f===""?o:[o,f].join("/"))),i&&c.push(...a),c.map(f=>e.startsWith("/")&&f===""?"/":f)}function nL(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:cL(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var rL=/^:[\w-]+$/,iL=3,oL=2,sL=1,aL=10,lL=-2,C2=e=>e==="*";function uL(e,t){let n=e.split("/"),r=n.length;return n.some(C2)&&(r+=lL),t&&(r+=oL),n.filter(i=>!C2(i)).reduce((i,o)=>i+(rL.test(o)?iL:o===""?sL:aL),r)}function cL(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function dL(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",a=[];for(let c=0;c<r.length;++c){let f=r[c],d=c===r.length-1,m=o==="/"?t:t.slice(o.length)||"/",v=y0({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},m),E=f.route;if(!v&&d&&n&&!r[r.length-1].route.index&&(v=y0({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!v)return null;Object.assign(i,v.params),a.push({params:i,pathname:gs([o,v.pathname]),pathnameBase:vL(gs([o,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(o=gs([o,v.pathnameBase]))}return a}function y0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=fL(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:m,isOptional:v},E)=>{if(m==="*"){let I=c[E]||"";a=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const C=c[E];return v&&!C?d[m]=void 0:d[m]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:e}}function fL(e,t=!1,n=!0){Co(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,f)=>(r.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function hL(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Co(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function xs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var ZN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pL=e=>ZN.test(e);function mL(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Wu(e):e,o;if(n)if(pL(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Co(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?o=A2(n.substring(1),"/"):o=A2(n,t)}else o=t;return{pathname:o,search:yL(r),hash:xL(i)}}function A2(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function g1(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gL(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function QN(e){let t=gL(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function eR(e,t,n,r=!1){let i;typeof e=="string"?i=Wu(e):(i={...e},Sn(!i.pathname||!i.pathname.includes("?"),g1("?","pathname","search",i)),Sn(!i.pathname||!i.pathname.includes("#"),g1("#","pathname","hash",i)),Sn(!i.search||!i.search.includes("#"),g1("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,c;if(a==null)c=n;else{let v=t.length-1;if(!r&&a.startsWith("..")){let E=a.split("/");for(;E[0]==="..";)E.shift(),v-=1;i.pathname=E.join("/")}c=v>=0?t[v]:"/"}let f=mL(i,c),d=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(d||m)&&(f.pathname+="/"),f}var gs=e=>e.join("/").replace(/\/\/+/g,"/"),vL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,xL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,wL=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function EL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function bL(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var tR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nR(e,t){let n=e;if(typeof n!="string"||!ZN.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(tR)try{let o=new URL(window.location.href),a=n.startsWith("//")?new URL(o.protocol+n):new URL(n),c=xs(a.pathname,t);a.origin===o.origin&&c!=null?n=c+a.search+a.hash:i=!0}catch{Co(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rR=["POST","PUT","PATCH","DELETE"];new Set(rR);var _L=["GET",...rR];new Set(_L);var Ku=M.createContext(null);Ku.displayName="DataRouter";var Mp=M.createContext(null);Mp.displayName="DataRouterState";var SL=M.createContext(!1),iR=M.createContext({isTransitioning:!1});iR.displayName="ViewTransition";var CL=M.createContext(new Map);CL.displayName="Fetchers";var AL=M.createContext(null);AL.displayName="Await";var io=M.createContext(null);io.displayName="Navigation";var $d=M.createContext(null);$d.displayName="Location";var Is=M.createContext({outlet:null,matches:[],isDataRoute:!1});Is.displayName="Route";var ew=M.createContext(null);ew.displayName="RouteError";var oR="REACT_ROUTER_ERROR",TL="REDIRECT",IL="ROUTE_ERROR_RESPONSE";function PL(e){if(e.startsWith(`${oR}:${TL}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function NL(e){if(e.startsWith(`${oR}:${IL}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new wL(t.status,t.statusText,t.data)}catch{}}function RL(e,{relative:t}={}){Sn(zd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=M.useContext(io),{hash:i,pathname:o,search:a}=Gd(e,{relative:t}),c=o;return n!=="/"&&(c=o==="/"?n:gs([n,o])),r.createHref({pathname:c,search:a,hash:i})}function zd(){return M.useContext($d)!=null}function Ho(){return Sn(zd(),"useLocation() may be used only in the context of a <Router> component."),M.useContext($d).location}var sR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aR(e){M.useContext(io).static||M.useLayoutEffect(e)}function lR(){let{isDataRoute:e}=M.useContext(Is);return e?GL():OL()}function OL(){Sn(zd(),"useNavigate() may be used only in the context of a <Router> component.");let e=M.useContext(Ku),{basename:t,navigator:n}=M.useContext(io),{matches:r}=M.useContext(Is),{pathname:i}=Ho(),o=JSON.stringify(QN(r)),a=M.useRef(!1);return aR(()=>{a.current=!0}),M.useCallback((f,d={})=>{if(Co(a.current,sR),!a.current)return;if(typeof f=="number"){n.go(f);return}let m=eR(f,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:gs([t,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[t,n,o,i,e])}M.createContext(null);function Gd(e,{relative:t}={}){let{matches:n}=M.useContext(Is),{pathname:r}=Ho(),i=JSON.stringify(QN(n));return M.useMemo(()=>eR(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function kL(e,t){return uR(e,t)}function uR(e,t,n,r,i){Sn(zd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=M.useContext(io),{matches:a}=M.useContext(Is),c=a[a.length-1],f=c?c.params:{},d=c?c.pathname:"/",m=c?c.pathnameBase:"/",v=c&&c.route;{let F=v&&v.path||"";dR(d,!v||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let E=Ho(),C;if(t){let F=typeof t=="string"?Wu(t):t;Sn(m==="/"||F.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${F.pathname}" was given in the \`location\` prop.`),C=F}else C=E;let I=C.pathname||"/",P=I;if(m!=="/"){let F=m.replace(/^\//,"").split("/");P="/"+I.replace(/^\//,"").split("/").slice(F.length).join("/")}let N=YN(e,{pathname:P});Co(v||N!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Co(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=FL(N&&N.map(F=>Object.assign({},F,{params:Object.assign({},f,F.params),pathname:gs([m,o.encodeLocation?o.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?m:gs([m,o.encodeLocation?o.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),a,n,r,i);return t&&D?M.createElement($d.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},D):D}function ML(){let e=zL(),t=EL(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),n?M.createElement("pre",{style:i},n):null,a)}var DL=M.createElement(ML,null),cR=class extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=NL(e.digest);n&&(e=n)}let t=e!==void 0?M.createElement(Is.Provider,{value:this.props.routeContext},M.createElement(ew.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?M.createElement(LL,{error:e},t):t}};cR.contextType=SL;var v1=new WeakMap;function LL({children:e,error:t}){let{basename:n}=M.useContext(io);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=PL(t.digest);if(r){let i=v1.get(t);if(i)throw i;let o=nR(r.location,n);if(tR&&!v1.get(t))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw v1.set(t,a),a}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return e}function BL({routeContext:e,match:t,children:n}){let r=M.useContext(Ku);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(Is.Provider,{value:e},n)}function FL(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=n?.errors;if(a!=null){let m=o.findIndex(v=>v.route.id&&a?.[v.route.id]!==void 0);Sn(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,f=-1;if(n)for(let m=0;m<o.length;m++){let v=o[m];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(f=m),v.route.id){let{loaderData:E,errors:C}=n,I=v.route.loader&&!E.hasOwnProperty(v.route.id)&&(!C||C[v.route.id]===void 0);if(v.route.lazy||I){c=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let d=n&&r?(m,v)=>{r(m,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:bL(n.matches),errorInfo:v})}:void 0;return o.reduceRight((m,v,E)=>{let C,I=!1,P=null,N=null;n&&(C=a&&v.route.id?a[v.route.id]:void 0,P=v.route.errorElement||DL,c&&(f<0&&E===0?(dR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,N=null):f===E&&(I=!0,N=v.route.hydrateFallbackElement||null)));let D=t.concat(o.slice(0,E+1)),F=()=>{let L;return C?L=P:I?L=N:v.route.Component?L=M.createElement(v.route.Component,null):v.route.element?L=v.route.element:L=m,M.createElement(BL,{match:v,routeContext:{outlet:m,matches:D,isDataRoute:n!=null},children:L})};return n&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?M.createElement(cR,{location:n.location,revalidation:n.revalidation,component:P,error:C,children:F(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:d}):F()},null)}function tw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UL(e){let t=M.useContext(Ku);return Sn(t,tw(e)),t}function jL(e){let t=M.useContext(Mp);return Sn(t,tw(e)),t}function VL(e){let t=M.useContext(Is);return Sn(t,tw(e)),t}function nw(e){let t=VL(e),n=t.matches[t.matches.length-1];return Sn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function $L(){return nw("useRouteId")}function zL(){let e=M.useContext(ew),t=jL("useRouteError"),n=nw("useRouteError");return e!==void 0?e:t.errors?.[n]}function GL(){let{router:e}=UL("useNavigate"),t=nw("useNavigate"),n=M.useRef(!1);return aR(()=>{n.current=!0}),M.useCallback(async(i,o={})=>{Co(n.current,sR),n.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var T2={};function dR(e,t,n){!t&&!T2[e]&&(T2[e]=!0,Co(!1,n))}M.memo(HL);function HL({routes:e,future:t,state:n,onError:r}){return uR(e,void 0,n,r,t)}function ca(e){Sn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qL({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:a}){Sn(!zd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),f=M.useMemo(()=>({basename:c,navigator:i,static:o,unstable_useTransitions:a,future:{}}),[c,i,o,a]);typeof n=="string"&&(n=Wu(n));let{pathname:d="/",search:m="",hash:v="",state:E=null,key:C="default"}=n,I=M.useMemo(()=>{let P=xs(d,c);return P==null?null:{location:{pathname:P,search:m,hash:v,state:E,key:C},navigationType:r}},[c,d,m,v,E,C,r]);return Co(I!=null,`<Router basename="${c}"> is not able to match the URL "${d}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:M.createElement(io.Provider,{value:f},M.createElement($d.Provider,{children:t,value:I}))}function WL({children:e,location:t}){return kL(hy(e),t)}function hy(e,t=[]){let n=[];return M.Children.forEach(e,(r,i)=>{if(!M.isValidElement(r))return;let o=[...t,i];if(r.type===M.Fragment){n.push.apply(n,hy(r.props.children,o));return}Sn(r.type===ca,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Sn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=hy(r.props.children,o)),n.push(a)}),n}var o0="get",s0="application/x-www-form-urlencoded";function Dp(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function KL(e){return Dp(e)&&e.tagName.toLowerCase()==="button"}function YL(e){return Dp(e)&&e.tagName.toLowerCase()==="form"}function XL(e){return Dp(e)&&e.tagName.toLowerCase()==="input"}function JL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ZL(e,t){return e.button===0&&(!t||t==="_self")&&!JL(e)}var Ah=null;function QL(){if(Ah===null)try{new FormData(document.createElement("form"),0),Ah=!1}catch{Ah=!0}return Ah}var e5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function y1(e){return e!=null&&!e5.has(e)?(Co(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${s0}"`),null):e}function t5(e,t){let n,r,i,o,a;if(YL(e)){let c=e.getAttribute("action");r=c?xs(c,t):null,n=e.getAttribute("method")||o0,i=y1(e.getAttribute("enctype"))||s0,o=new FormData(e)}else if(KL(e)||XL(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||c.getAttribute("action");if(r=f?xs(f,t):null,n=e.getAttribute("formmethod")||c.getAttribute("method")||o0,i=y1(e.getAttribute("formenctype"))||y1(c.getAttribute("enctype"))||s0,o=new FormData(c,e),!QL()){let{name:d,type:m,value:v}=e;if(m==="image"){let E=d?`${d}.`:"";o.append(`${E}x`,"0"),o.append(`${E}y`,"0")}else d&&o.append(d,v)}}else{if(Dp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=o0,r=null,i=s0,a=e}return o&&i==="text/plain"&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function rw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function n5(e,t,n,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:t&&xs(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function r5(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function i5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function o5(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let a=await r5(o,n);return a.links?a.links():[]}return[]}));return u5(r.flat(1).filter(i5).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function I2(e,t,n,r,i,o){let a=(f,d)=>n[d]?f.route.id!==n[d].route.id:!0,c=(f,d)=>n[d].pathname!==f.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==f.params["*"];return o==="assets"?t.filter((f,d)=>a(f,d)||c(f,d)):o==="data"?t.filter((f,d)=>{let m=r.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(a(f,d)||c(f,d))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function s5(e,t,{includeHydrateFallback:n}={}){return a5(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function a5(e){return[...new Set(e)]}function l5(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function u5(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(l5(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function fR(){let e=M.useContext(Ku);return rw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function c5(){let e=M.useContext(Mp);return rw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var iw=M.createContext(void 0);iw.displayName="FrameworkContext";function hR(){let e=M.useContext(iw);return rw(e,"You must render this element inside a <HydratedRouter> element"),e}function d5(e,t){let n=M.useContext(iw),[r,i]=M.useState(!1),[o,a]=M.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:d,onMouseLeave:m,onTouchStart:v}=t,E=M.useRef(null);M.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let P=D=>{D.forEach(F=>{a(F.isIntersecting)})},N=new IntersectionObserver(P,{threshold:.5});return E.current&&N.observe(E.current),()=>{N.disconnect()}}},[e]),M.useEffect(()=>{if(r){let P=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(P)}}},[r]);let C=()=>{i(!0)},I=()=>{i(!1),a(!1)};return n?e!=="intent"?[o,E,{}]:[o,E,{onFocus:ed(c,C),onBlur:ed(f,I),onMouseEnter:ed(d,C),onMouseLeave:ed(m,I),onTouchStart:ed(v,C)}]:[!1,E,{}]}function ed(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function f5({page:e,...t}){let{router:n}=fR(),r=M.useMemo(()=>YN(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?M.createElement(p5,{page:e,matches:r,...t}):null}function h5(e){let{manifest:t,routeModules:n}=hR(),[r,i]=M.useState([]);return M.useEffect(()=>{let o=!1;return o5(e,t,n).then(a=>{o||i(a)}),()=>{o=!0}},[e,t,n]),r}function p5({page:e,matches:t,...n}){let r=Ho(),{future:i,manifest:o,routeModules:a}=hR(),{basename:c}=fR(),{loaderData:f,matches:d}=c5(),m=M.useMemo(()=>I2(e,t,d,o,r,"data"),[e,t,d,o,r]),v=M.useMemo(()=>I2(e,t,d,o,r,"assets"),[e,t,d,o,r]),E=M.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let P=new Set,N=!1;if(t.forEach(F=>{let L=o.routes[F.route.id];!L||!L.hasLoader||(!m.some(V=>V.route.id===F.route.id)&&F.route.id in f&&a[F.route.id]?.shouldRevalidate||L.hasClientLoader?N=!0:P.add(F.route.id))}),P.size===0)return[];let D=n5(e,c,i.unstable_trailingSlashAwareDataRequests,"data");return N&&P.size>0&&D.searchParams.set("_routes",t.filter(F=>P.has(F.route.id)).map(F=>F.route.id).join(",")),[D.pathname+D.search]},[c,i.unstable_trailingSlashAwareDataRequests,f,r,o,m,t,e,a]),C=M.useMemo(()=>s5(v,o),[v,o]),I=h5(v);return M.createElement(M.Fragment,null,E.map(P=>M.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...n})),C.map(P=>M.createElement("link",{key:P,rel:"modulepreload",href:P,...n})),I.map(({key:P,link:N})=>M.createElement("link",{key:P,nonce:n.nonce,...N})))}function m5(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var g5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{g5&&(window.__reactRouterVersion="7.12.0")}catch{}function v5({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=M.useRef();i.current==null&&(i.current=J6({window:r,v5Compat:!0}));let o=i.current,[a,c]=M.useState({action:o.action,location:o.location}),f=M.useCallback(d=>{n===!1?c(d):M.startTransition(()=>c(d))},[n]);return M.useLayoutEffect(()=>o.listen(f),[o,f]),M.createElement(qL,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,unstable_useTransitions:n})}var pR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ll=M.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:a,state:c,target:f,to:d,preventScrollReset:m,viewTransition:v,unstable_defaultShouldRevalidate:E,...C},I){let{basename:P,unstable_useTransitions:N}=M.useContext(io),D=typeof d=="string"&&pR.test(d),F=nR(d,P);d=F.to;let L=RL(d,{relative:i}),[V,G,q]=d5(r,C),W=E5(d,{replace:a,state:c,target:f,preventScrollReset:m,relative:i,viewTransition:v,unstable_defaultShouldRevalidate:E,unstable_useTransitions:N});function Z(fe){t&&t(fe),fe.defaultPrevented||W(fe)}let X=M.createElement("a",{...C,...q,href:F.absoluteURL||L,onClick:F.isExternal||o?t:Z,ref:m5(I,G),target:f,"data-discover":!D&&n==="render"?"true":void 0});return V&&!D?M.createElement(M.Fragment,null,X,M.createElement(f5,{page:L})):X});ll.displayName="Link";var y5=M.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:a,viewTransition:c,children:f,...d},m){let v=Gd(a,{relative:d.relative}),E=Ho(),C=M.useContext(Mp),{navigator:I,basename:P}=M.useContext(io),N=C!=null&&A5(v)&&c===!0,D=I.encodeLocation?I.encodeLocation(v).pathname:v.pathname,F=E.pathname,L=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(F=F.toLowerCase(),L=L?L.toLowerCase():null,D=D.toLowerCase()),L&&P&&(L=xs(L,P)||L);const V=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let G=F===D||!i&&F.startsWith(D)&&F.charAt(V)==="/",q=L!=null&&(L===D||!i&&L.startsWith(D)&&L.charAt(D.length)==="/"),W={isActive:G,isPending:q,isTransitioning:N},Z=G?t:void 0,X;typeof r=="function"?X=r(W):X=[r,G?"active":null,q?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let fe=typeof o=="function"?o(W):o;return M.createElement(ll,{...d,"aria-current":Z,className:X,ref:m,style:fe,to:a,viewTransition:c},typeof f=="function"?f(W):f)});y5.displayName="NavLink";var x5=M.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:a=o0,action:c,onSubmit:f,relative:d,preventScrollReset:m,viewTransition:v,unstable_defaultShouldRevalidate:E,...C},I)=>{let{unstable_useTransitions:P}=M.useContext(io),N=S5(),D=C5(c,{relative:d}),F=a.toLowerCase()==="get"?"get":"post",L=typeof c=="string"&&pR.test(c),V=G=>{if(f&&f(G),G.defaultPrevented)return;G.preventDefault();let q=G.nativeEvent.submitter,W=q?.getAttribute("formmethod")||a,Z=()=>N(q||G.currentTarget,{fetcherKey:t,method:W,navigate:n,replace:i,state:o,relative:d,preventScrollReset:m,viewTransition:v,unstable_defaultShouldRevalidate:E});P&&n!==!1?M.startTransition(()=>Z()):Z()};return M.createElement("form",{ref:I,method:F,action:D,onSubmit:r?f:V,...C,"data-discover":!L&&e==="render"?"true":void 0})});x5.displayName="Form";function w5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mR(e){let t=M.useContext(Ku);return Sn(t,w5(e)),t}function E5(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:c,unstable_useTransitions:f}={}){let d=lR(),m=Ho(),v=Gd(e,{relative:o});return M.useCallback(E=>{if(ZL(E,t)){E.preventDefault();let C=n!==void 0?n:Ed(m)===Ed(v),I=()=>d(e,{replace:C,state:r,preventScrollReset:i,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:c});f?M.startTransition(()=>I()):I()}},[m,d,v,n,r,t,e,i,o,a,c,f])}var b5=0,_5=()=>`__${String(++b5)}__`;function S5(){let{router:e}=mR("useSubmit"),{basename:t}=M.useContext(io),n=$L(),r=e.fetch,i=e.navigate;return M.useCallback(async(o,a={})=>{let{action:c,method:f,encType:d,formData:m,body:v}=t5(o,t);if(a.navigate===!1){let E=a.fetcherKey||_5();await r(E,n,a.action||c,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:m,body:v,formMethod:a.method||f,formEncType:a.encType||d,flushSync:a.flushSync})}else await i(a.action||c,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:m,body:v,formMethod:a.method||f,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,t,n])}function C5(e,{relative:t}={}){let{basename:n}=M.useContext(io),r=M.useContext(Is);Sn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Gd(e||".",{relative:t})},a=Ho();if(e==null){o.search=a.search;let c=new URLSearchParams(o.search),f=c.getAll("index");if(f.some(m=>m==="")){c.delete("index"),f.filter(v=>v).forEach(v=>c.append("index",v));let m=c.toString();o.search=m?`?${m}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:gs([n,o.pathname])),Ed(o)}function A5(e,{relative:t}={}){let n=M.useContext(iR);Sn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=mR("useViewTransitionState"),i=Gd(e,{relative:t});if(!n.isTransitioning)return!1;let o=xs(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=xs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return y0(i.pathname,a)!=null||y0(i.pathname,o)!=null}var ow=KN(),T5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const I5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xt=(e,t)=>{const n=M.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:c,...f},d)=>M.createElement("svg",{ref:d,...T5,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:`lucide lucide-${I5(e)}`,...f},[...t.map(([m,v])=>M.createElement(m,v)),...(Array.isArray(c)?c:[c])||[]]));return n.displayName=`${e}`,n},P5=xt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),N5=xt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),R5=xt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),O5=xt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),gR=xt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),k5=xt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),M5=xt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),D5=xt("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),L5=xt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),B5=xt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),sw=xt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),F5=xt("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]),U5=xt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),j5=xt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),V5=xt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),$5=xt("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),x0=xt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),vR=xt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),z5=xt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),aw=xt("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),G5=xt("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),H5=xt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),q5=xt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),W5=xt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),K5=xt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),Y5=xt("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),X5=xt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),J5=xt("ScatterChart",[["circle",{cx:"7.5",cy:"7.5",r:".5",key:"1x97lo"}],["circle",{cx:"18.5",cy:"5.5",r:".5",key:"56iowl"}],["circle",{cx:"11.5",cy:"11.5",r:".5",key:"m9xkw9"}],["circle",{cx:"7.5",cy:"16.5",r:".5",key:"14ln9z"}],["circle",{cx:"17.5",cy:"14.5",r:".5",key:"14qxqt"}],["path",{d:"M3 3v18h18",key:"1s2lah"}]]),yR=xt("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),lw=xt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),xR=xt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Z5=xt("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Q5=xt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),bd=xt("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),eB=xt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),_d=xt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),tB=xt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),P2=xt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),nB=xt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),rB=xt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Hd=xt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),iB=xt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),oB=()=>{const[e,t]=M.useState(!1),[n,r]=M.useState(!1),i=Ho(),o=lR();M.useEffect(()=>{const m=()=>{t(window.scrollY>50)};return window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)},[]);const a=`fixed w-full z-50 transition-all duration-300 ${e?"bg-white/90 backdrop-blur-md shadow-sm py-2":"bg-transparent py-4"}`,c=m=>`cursor-pointer font-medium tracking-wide transition-colors ${i.pathname===m?"text-stone-900 border-b-2 border-stone-800":e?"text-stone-600 hover:text-stone-900":"text-stone-800 hover:text-stone-600"}`,f=m=>{o(m),r(!1)},d=()=>{const m=i.pathname;return m==="/perfum"?R.jsxs("div",{className:"flex flex-col items-start leading-none",children:[R.jsx("span",{className:"serif text-4xl font-bold tracking-tight text-amber-500",children:"Perfum"}),R.jsx("span",{className:"text-stone-600 text-[10px] md:text-xs font-medium tracking-[0.2em] ml-1 uppercase",children:"by tus3b"})]}):m==="/regalos"?R.jsxs("div",{className:"flex flex-col items-start leading-none",children:[R.jsx("span",{className:"serif text-3xl font-bold tracking-tight text-stone-900",children:"Regala Amor"}),R.jsx("span",{className:"text-stone-600 text-[10px] md:text-xs font-medium tracking-[0.2em] ml-1 uppercase",children:"by tus3b"})]}):R.jsxs("div",{className:"flex flex-col items-start leading-none",children:[R.jsx("span",{className:"serif text-4xl font-bold italic tracking-tighter text-stone-900",children:"Style"}),R.jsx("span",{className:"text-stone-600 text-[10px] md:text-xs font-medium tracking-[0.2em] ml-1 uppercase",children:"by tus3b"})]})};return R.jsxs("nav",{className:a,children:[R.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:R.jsxs("div",{className:"flex justify-between items-center h-16",children:[R.jsx(ll,{to:"/",className:"flex-shrink-0 flex items-center cursor-pointer no-underline group",children:d()}),R.jsxs("div",{className:"hidden md:flex space-x-12 items-center",children:[R.jsx(ll,{to:"/",className:c("/"),children:"Inicio"}),R.jsx(ll,{to:"/",className:c("/booking"),children:"Servicios"}),R.jsx(ll,{to:"/perfum",className:c("/perfum"),children:"Perfumes (Decants)"}),R.jsx(ll,{to:"/regalos",className:c("/regalos"),children:"Regalos"}),R.jsx("button",{onClick:()=>f("/"),className:"bg-stone-900 text-white px-6 py-2 rounded-full text-sm uppercase tracking-wider hover:bg-stone-800 transition shadow-lg",children:"Reservar"})]}),R.jsx("div",{className:"md:hidden flex items-center",children:R.jsx("button",{onClick:()=>r(!n),className:"text-stone-800 focus:outline-none",children:n?R.jsx(Hd,{size:28}):R.jsx(z5,{size:28})})})]})}),n&&R.jsxs("div",{className:"md:hidden fixed inset-0 top-16 bg-white z-40 flex flex-col p-6 space-y-8 animate-in slide-in-from-right-10",children:[R.jsxs("button",{onClick:()=>f("/"),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[R.jsx(yR,{size:24}),R.jsx("span",{children:"Style (Inicio)"})]}),R.jsxs("button",{onClick:()=>f("/perfum"),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[R.jsx(bd,{size:24}),R.jsx("span",{children:"Perfumes"})]}),R.jsxs("button",{onClick:()=>f("/regalos"),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[R.jsx(sw,{size:24}),R.jsx("span",{children:"Regalos"})]}),R.jsx("div",{className:"mt-auto pb-8",children:R.jsx("button",{onClick:()=>f("/"),className:"w-full bg-stone-900 text-white py-4 rounded-xl text-center uppercase tracking-widest font-bold shadow-lg active:scale-95 transition-transform",children:"Agendar Cita"})})]})]})},sB=({onCtaClick:e})=>R.jsxs("div",{className:"relative h-screen min-h-[600px] w-full overflow-hidden",children:[R.jsxs("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/images/greici/greici-main-new.jpg')"},children:[R.jsx("div",{className:"absolute inset-0 bg-black/20 mix-blend-multiply"}),R.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-stone-900/60 via-transparent to-transparent"})]}),R.jsxs("div",{className:"relative h-full flex flex-col justify-center items-center text-center px-4",children:[R.jsx("h2",{className:"text-white text-base md:text-xl uppercase tracking-[0.3em] mb-4 font-light",children:"Belleza & Elegancia"}),R.jsxs("h1",{className:"text-white text-4xl md:text-7xl lg:text-8xl serif font-light mb-6 md:mb-8 max-w-4xl leading-tight",children:["Redefine Tu Estilo ",R.jsx("br",{})," ",R.jsx("span",{className:"italic",children:"Tu Esencia"})]}),R.jsx("p",{className:"text-stone-200 max-w-lg mx-auto text-lg mb-10 font-light",children:"Cortes profesionales a domicilio y perfumera de alta gama. Descubre nuestras ofertas de verano."}),R.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:R.jsx("button",{onClick:e,className:"px-8 py-4 bg-white text-stone-900 rounded-full font-bold uppercase tracking-widest hover:bg-stone-100 transition shadow-lg",children:"Reserva Tu Cita"})}),R.jsxs("div",{className:"mt-12 flex items-center justify-center space-x-8 text-white/90 text-sm font-medium",children:[R.jsxs("div",{className:"flex items-center bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10",children:[R.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),"Disponible Hoy"]}),R.jsxs("div",{className:"flex items-center bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10",children:[R.jsx("span",{className:"mr-1",children:"Desde"}),R.jsx("span",{className:"font-bold text-lg",children:"$7.000"})]})]})]})]}),Pu="56984524774",aB="https://www.instagram.com/tus3bstyle/?igsh=MWtnc2R5MjQ0c21kOQ%3D%3D#",bu=[{id:"cut-1",name:"Corte de Puntas / Flequillos",description:"Mantenimiento esencial para eliminar horquillas y sanear el cabello.",price:7e3,durationMin:30,includes:["Corte tcnico de puntas o flequillo","Sellado de puntas"]},{id:"cut-2",name:"Corte Bordado",description:"Elimina el frizz y puntas daadas sin afectar el largo de tu cabello.",price:1e4,durationMin:45,includes:["Corte con mquina bordadora","Limpieza de puntas"]},{id:"wash-1",name:"Lavado",description:"Lavado profesional refrescante.",price:5e3,durationMin:20,includes:["Shampoo profesional","Acondicionador"],homeServiceOnly:!0},{id:"massage-1",name:"Masaje Capilar",description:"Tratamiento profundo para hidratar y revitalizar tu cabello.",price:5e3,durationMin:30,includes:["Ampolla o crema de tratamiento","Masaje craneal"]},{id:"brushing-1",name:"Brushing",description:"Peinado profesional para dar volumen, brillo y movimiento.",price:14e3,durationMin:45,includes:["Secado","Modelado con cepillo"]},{id:"color-1",name:"Aplicacin de Tintura",description:"Aplicacin profesional de tu color (tintura no incluida).",price:1e4,durationMin:60,includes:["Aplicacin uniforme","Lavado final"],homeServiceOnly:!0}],lB=3e3,uB=30,cB=["Santiago Centro","uoa"],ya=[{id:"l1",brand:"Lancme",name:"La Vie Est Belle EDP",description:"La fragancia de la felicidad. Iris pallida, Jazmn Sambac y Azahar.",price5ml:6990,price10ml:12990,margin5ml:0,margin10ml:0,image:"/images/perfumes/la-vie-est-belle.png",notes:["Iris","Vainilla","Pralin"],category:"classic",stock:!1},{id:"l2",brand:"Carolina Herrera",name:"Good Girl EDP",description:"Audaz y sexy, elegante y enigmtica. El famoso tacn.",price5ml:7990,price10ml:14990,margin5ml:0,margin10ml:0,image:"/images/perfumes/good-girl.png",notes:["Tuberosa","Jazmn","Cacao"],category:"classic",stock:!1},{id:"l3",brand:"Lancme",name:"Idle EDP",description:"Para la mujer que suea a lo grande. Limpio y luminoso.",price5ml:6990,price10ml:12990,margin5ml:0,margin10ml:0,image:"/images/perfumes/idole.png",notes:["Rosa","Jazmn","Chipre Blanco"],category:"classic",stock:!1},{id:"l4",brand:"Giorgio Armani",name:"Acqua Di Gioia EDP",description:"La esencia de la alegra. Fresco, acutico y ctrico.",price5ml:6990,price10ml:12990,margin5ml:0,margin10ml:0,image:"/images/perfumes/acqua-di-gioia.png",notes:["Limn","Menta","Jazmn de Agua"],category:"classic",stock:!1},{id:"l5",brand:"Yves Saint Laurent",name:"Black Opium EDP",description:"Adrenalina y energa. Caf negro y flores blancas.",price5ml:7990,price10ml:14990,margin5ml:0,margin10ml:0,image:"/images/perfumes/black-opium.png",notes:["Caf","Vainilla","Flores Blancas"],category:"classic",stock:!1},{id:"l6",brand:"Dolce & Gabbana",name:"Light Blue EDT",description:"La alegra de vivir el Mediterrneo. Fresco y frutal.",price5ml:5990,price10ml:9990,margin5ml:0,margin10ml:0,image:"/images/perfumes/light-blue.png",notes:["Limn Siciliano","Manzana","Cedro"],category:"classic",stock:!1},{id:"a1",brand:"Lattafa",name:"Yara (Rosa) EDP",description:"El viral de TikTok. Dulce, cremoso y adictivo.",price5ml:5990,price10ml:8990,margin5ml:2803,margin10ml:4616,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-yara-rosa.png",secondaryImage:"/images/perfumes/yara-rosa-notes.jpg",notes:["Orqudea","Heliotropo","Frutas Tropicales"],category:"arab"},{id:"a2",brand:"Lattafa",name:"Yara Tous",description:"La versin tropical y solar de Yara. Mango y maracuy.",price5ml:5990,price10ml:8990,margin5ml:2850,margin10ml:4711,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-yara-tous.png",secondaryImage:"/images/perfumes/yara-tous-notes.jpg",notes:["Mango","Coco","Vainilla"],category:"arab"},{id:"a3",brand:"Lattafa",name:"Rave Now Women",description:"Dulce, frutal y vibrante. Energa pura en una botella.",price5ml:4990,price10ml:7990,margin5ml:2040,margin10ml:4091,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-rave-now-women.png",notes:["Frutas Rojas","Malvavisco","Almizcle"],category:"arab"},{id:"a4",brand:"Fragrance World",name:"Valentia Rome Intense",description:"Inspirada en el lujo italiano. Floral y moderna.",price5ml:5990,price10ml:8990,margin5ml:2898,margin10ml:4806,stock:!0,priceFullBottle:29990,image:"/images/perfumes/fw-valentia-rome.png",notes:["Jazmn","Grosella Negra","Vainilla Bourbon"],category:"arab"},{id:"a5",brand:"Maison Alhambra",name:"Leonie EDP",description:"Elegancia y sofisticacin. Una fragancia que impone presencia.",price5ml:4990,price10ml:6990,margin5ml:2183,margin10ml:3376,stock:!0,priceFullBottle:27990,image:"/images/perfumes/maison-alhambra-leonie.png",notes:["Floral","mbar","Vainilla"],category:"arab"},{id:"a6",brand:"Lattafa",name:"Ana Abiyedh",description:"Limpio, almizclado y frutal. Un aroma que dura todo el da.",price5ml:6990,price10ml:9990,margin5ml:3487,margin10ml:4983,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-ana-abiyedh.png",notes:["Almizcle Blanco","Pera","Bergamota"],category:"arab"},{id:"a7",brand:"Maison Alhambra",name:"Bad Femme",description:"Atrevida y seductora. Ideal para la noche.",price5ml:4990,price10ml:6990,margin5ml:2135,margin10ml:3281,stock:!0,priceFullBottle:27990,image:"/images/perfumes/maison-alhambra-bad-femme.png",notes:["Tuberosa","Jazmn","Cacao"],category:"arab"},{id:"d1",brand:"Lattafa",name:"Yara Desodorante Spray",description:"El complemento perfecto para tu perfume Yara.",price5ml:0,price10ml:0,margin5ml:0,margin10ml:0,stock:!0,priceFullBottle:5990,isSpray:!0,image:"/images/perfumes/yara-spray.png",notes:["Tropical","Dulce","Cremoso"],category:"arab"},{id:"d2",brand:"Lattafa",name:"Qaed Al Fursan Desodorante",description:"Fresco, pia ahumada y maderas.",price5ml:0,price10ml:0,margin5ml:0,margin10ml:0,stock:!0,priceFullBottle:5990,isSpray:!0,image:"/images/perfumes/qaed-al-fursan-spray.png",notes:["Pia","Musgo","Azafrn"],category:"arab"},{id:"a8",brand:"Armaf",name:"Club de Nuit Intense Woman EDP",description:"Un chipre floral intenso y elegante. Misterioso.",price5ml:5990,price10ml:8990,margin5ml:0,margin10ml:0,image:"/images/perfumes/club-de-nuit-intense-woman.png",notes:["Rosa","Azafrn","Geranio"],category:"arab",stock:!1},{id:"a9",brand:"Lattafa",name:"Eclaire EDP",description:"Dulce y envolvente, con notas gourmand irresistibles.",price5ml:5990,price10ml:8990,margin5ml:0,margin10ml:0,image:"/images/perfumes/lattafa-eclaire.png",notes:["Caramelo","Leche","Miel"],category:"arab",stock:!1},{id:"a10",brand:"Armaf",name:"Club de Nuit Untold EDP",description:"El dupe perfecto de Baccarat Rouge 540. Lujoso y dulce.",price5ml:6990,price10ml:9990,margin5ml:0,margin10ml:0,image:"/images/perfumes/club-de-nuit-untold.png",notes:["Azafrn","Jazmn","Amberwood"],category:"arab",stock:!1},{id:"a11",brand:"Lattafa",name:"Khamrah EDP",description:"Clido y especiado. Canela, dtiles y pralin.",price5ml:6990,price10ml:9990,margin5ml:0,margin10ml:0,image:"/images/perfumes/lattafa-khamrah.png",notes:["Canela","Dtiles","Pralin"],category:"arab",stock:!1},{id:"a12",brand:"Armaf",name:"Club de Nuit Imperiale",description:"Floral, fresco y frutal. Elegancia moderna.",price5ml:5990,price10ml:8990,margin5ml:0,margin10ml:0,image:"/images/perfumes/club-de-nuit-imperiale.png",notes:["Litchi","Bergamota","Rosa Turca"],category:"arab",stock:!1}],N2=[{id:"1",url:"/images/greici/greici-portrait.jpg",category:"Cortes",description:"Estilista Greici Nataly"},{id:"2",url:"/images/greici/greici-salon-wide.jpg",category:"Color",description:"Atencin Personalizada"},{id:"3",url:"/images/greici/greici-back-view.jpg",category:"Cortes",description:"Acabados Perfectos"},{id:"4",url:"/images/greici/greici-red-shirt.jpg",category:"Cortes",description:"Precisin y Estilo"},{id:"5",url:"/images/greici/greici-side-work.jpg",category:"Color",description:"Tcnica Profesional"}],dB=[{id:"r1",name:"Maria Paz",rating:5,comment:"Me encant el servicio, muy profesionales y puntuales. El corte que me hicieron fue exactamente lo que peda.",date:"Hace 2 semanas"},{id:"r2",name:"Carla S.",rating:5,comment:"Increble la atencin a domicilio. Todo muy limpio y ordenado, y los perfumes huelen delicioso. Totalmente recomendada.",date:"Hace 1 mes"},{id:"r3",name:"Valentina R.",rating:5,comment:"Compr el Lattafa Yara y es exquisito, lleg super rpido. Adems aprovech de hacerme un masaje capilar y qued como nueva.",date:"Hace 3 semanas"},{id:"r4",name:"Isidora M.",rating:5,comment:"Excelente experiencia con Tus3B. La calidad de los productos y la dedicacin en el servicio se notan. Volver a comprar seguro.",date:"Hace 1 mes"},{id:"r5",name:"Fernanda L.",rating:5,comment:"Muy buena disposicin y asesora para elegir mi perfume. Los precios son muy convenientes para la calidad que ofrecen.",date:"Hace 2 semanas"},{id:"r6",name:"Camila J.",rating:4,comment:"Todo super bien, el perfume lleg en perfecto estado. Solo demor un poquito ms de lo esperado la coordinacin, pero la atencin un 7.",date:"Hace 1 mes"}],fB=[{id:"gift-1",name:"Regalito A",price:19990,includes:["Perfume 10ml","Chocolates Ferrero","Tarjeta Personalizada"]},{id:"gift-2",name:"Regalito B",price:29990,includes:["Perfume 10ml","Crema de Manos","Chocolates Finos","Globo Corazn"]},{id:"gift-custom",name:"Arma tu regalito",price:0,includes:["Chocolates Ferrero Roche","Los Perfumes en Stock","Globo de corazn","Y mucho ms..."]}];var ls={},Th={},py=function(e,t){return py=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},py(e,t)};function wR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");py(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var w0=function(){return w0=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},w0.apply(this,arguments)};function Yu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function ER(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function bR(e,t){return function(n,r){t(n,r,e)}}function _R(e,t,n,r,i,o){function a(D){if(D!==void 0&&typeof D!="function")throw new TypeError("Function expected");return D}for(var c=r.kind,f=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&e?r.static?e:e.prototype:null,m=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),v,E=!1,C=n.length-1;C>=0;C--){var I={};for(var P in r)I[P]=P==="access"?{}:r[P];for(var P in r.access)I.access[P]=r.access[P];I.addInitializer=function(D){if(E)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(D||null))};var N=(0,n[C])(c==="accessor"?{get:m.get,set:m.set}:m[f],I);if(c==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(v=a(N.get))&&(m.get=v),(v=a(N.set))&&(m.set=v),(v=a(N.init))&&i.unshift(v)}else(v=a(N))&&(c==="field"?i.unshift(v):m[f]=v)}d&&Object.defineProperty(d,r.name,m),E=!0}function SR(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function CR(e){return typeof e=="symbol"?e:"".concat(e)}function AR(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function TR(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function qe(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(m){try{d(r.next(m))}catch(v){a(v)}}function f(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(c,f)}d((r=r.apply(e,t||[])).next())})}function IR(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Lp=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]});function PR(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Lp(t,e,n)}function E0(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function uw(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function NR(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(uw(arguments[t]));return e}function RR(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,c=o.length;a<c;a++,i++)r[i]=o[a];return r}function OR(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Lu(e){return this instanceof Lu?(this.v=e,this):new Lu(e)}function kR(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(C){return function(I){return Promise.resolve(I).then(C,v)}}function c(C,I){r[C]&&(i[C]=function(P){return new Promise(function(N,D){o.push([C,P,N,D])>1||f(C,P)})},I&&(i[C]=I(i[C])))}function f(C,I){try{d(r[C](I))}catch(P){E(o[0][3],P)}}function d(C){C.value instanceof Lu?Promise.resolve(C.value.v).then(m,v):E(o[0][2],C)}function m(C){f("next",C)}function v(C){f("throw",C)}function E(C,I){C(I),o.shift(),o.length&&f(o[0][0],o[0][1])}}function MR(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=e[i]?function(a){return(n=!n)?{value:Lu(e[i](a)),done:!1}:o?o(a):a}:o}}function DR(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof E0=="function"?E0(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(c,f){a=e[o](a),i(c,f,a.done,a.value)})}}function i(o,a,c,f){Promise.resolve(f).then(function(d){o({value:d,done:c})},a)}}function LR(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var hB=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},my=function(e){return my=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},my(e)};function BR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=my(e),r=0;r<n.length;r++)n[r]!=="default"&&Lp(t,e,n[r]);return hB(t,e),t}function FR(e){return e&&e.__esModule?e:{default:e}}function UR(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function jR(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function VR(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function $R(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var pB=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function zR(e){function t(o){e.error=e.hasError?new pB(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(i,function(a){return t(a),i()})}else r|=1}catch(a){t(a)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function GR(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,o,a){return r?t?".jsx":".js":i&&(!o||!a)?n:i+o+"."+a.toLowerCase()+"js"}):e}const mB={__extends:wR,__assign:w0,__rest:Yu,__decorate:ER,__param:bR,__esDecorate:_R,__runInitializers:SR,__propKey:CR,__setFunctionName:AR,__metadata:TR,__awaiter:qe,__generator:IR,__createBinding:Lp,__exportStar:PR,__values:E0,__read:uw,__spread:NR,__spreadArrays:RR,__spreadArray:OR,__await:Lu,__asyncGenerator:kR,__asyncDelegator:MR,__asyncValues:DR,__makeTemplateObject:LR,__importStar:BR,__importDefault:FR,__classPrivateFieldGet:UR,__classPrivateFieldSet:jR,__classPrivateFieldIn:VR,__addDisposableResource:$R,__disposeResources:zR,__rewriteRelativeImportExtension:GR},gB=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:$R,get __assign(){return w0},__asyncDelegator:MR,__asyncGenerator:kR,__asyncValues:DR,__await:Lu,__awaiter:qe,__classPrivateFieldGet:UR,__classPrivateFieldIn:VR,__classPrivateFieldSet:jR,__createBinding:Lp,__decorate:ER,__disposeResources:zR,__esDecorate:_R,__exportStar:PR,__extends:wR,__generator:IR,__importDefault:FR,__importStar:BR,__makeTemplateObject:LR,__metadata:TR,__param:bR,__propKey:CR,__read:uw,__rest:Yu,__rewriteRelativeImportExtension:GR,__runInitializers:SR,__setFunctionName:AR,__spread:NR,__spreadArray:OR,__spreadArrays:RR,__values:E0,default:mB},Symbol.toStringTag,{value:"Module"})),vB=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Bp=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},HR=class extends Bp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},gy=class extends Bp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},vy=class extends Bp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var b0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(b0||(b0={}));class yB{constructor(t,{headers:n={},customFetch:r,region:i=b0.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=vB(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return qe(this,arguments,void 0,function*(n,r={}){var i;let o,a;try{const{headers:c,method:f,body:d,signal:m,timeout:v}=r;let E={},{region:C}=r;C||(C=this.region);const I=new URL(`${this.url}/${n}`);C&&C!=="any"&&(E["x-region"]=C,I.searchParams.set("forceFunctionRegion",C));let P;d&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",P=d):typeof d=="string"?(E["Content-Type"]="text/plain",P=d):typeof FormData<"u"&&d instanceof FormData?P=d:(E["Content-Type"]="application/json",P=JSON.stringify(d)):P=d;let N=m;v&&(a=new AbortController,o=setTimeout(()=>a.abort(),v),m?(N=a.signal,m.addEventListener("abort",()=>a.abort())):N=a.signal);const D=yield this.fetch(I.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),c),body:P,signal:N}).catch(G=>{throw new HR(G)}),F=D.headers.get("x-relay-error");if(F&&F==="true")throw new gy(D);if(!D.ok)throw new vy(D);let L=((i=D.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),V;return L==="application/json"?V=yield D.json():L==="application/octet-stream"||L==="application/pdf"?V=yield D.blob():L==="text/event-stream"?V=D:L==="multipart/form-data"?V=yield D.formData():V=yield D.text(),{data:V,error:null,response:D}}catch(c){return{data:null,error:c,response:c instanceof vy||c instanceof gy?c.context:void 0}}finally{o&&clearTimeout(o)}})}}const xB=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return b0},FunctionsClient:yB,FunctionsError:Bp,FunctionsFetchError:HR,FunctionsHttpError:vy,FunctionsRelayError:gy},Symbol.toStringTag,{value:"Module"})),qR=Vd(xB);var Ur={};const Xu=Vd(gB);var Ih={},Ph={},Nh={},Rh={},Oh={},kh={},R2;function WR(){if(R2)return kh;R2=1,Object.defineProperty(kh,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return kh.default=e,kh}var O2;function KR(){if(O2)return Oh;O2=1,Object.defineProperty(Oh,"__esModule",{value:!0});const t=Xu.__importDefault(WR());let n=class{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let c=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var d,m,v,E;let C=null,I=null,P=null,N=f.status,D=f.statusText;if(f.ok){if(this.method!=="HEAD"){const G=await f.text();G===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?I=G:I=JSON.parse(G))}const L=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),V=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");L&&V&&V.length>1&&(P=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(I)&&(I.length>1?(C={code:"PGRST116",details:`Results contain ${I.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},I=null,P=null,N=406,D="Not Acceptable"):I.length===1?I=I[0]:I=null)}else{const L=await f.text();try{C=JSON.parse(L),Array.isArray(C)&&f.status===404&&(I=[],C=null,N=200,D="OK")}catch{f.status===404&&L===""?(N=204,D="No Content"):C={message:L}}if(C&&this.isMaybeSingle&&(!((E=C?.details)===null||E===void 0)&&E.includes("0 rows"))&&(C=null,N=200,D="OK"),C&&this.shouldThrowOnError)throw new t.default(C)}return{error:C,data:I,count:P,status:N,statusText:D}});return this.shouldThrowOnError||(c=c.catch(f=>{var d,m,v,E,C,I;let P="";const N=f?.cause;if(N){const D=(d=N?.message)!==null&&d!==void 0?d:"",F=(m=N?.code)!==null&&m!==void 0?m:"";P=`${(v=f?.name)!==null&&v!==void 0?v:"FetchError"}: ${f?.message}`,P+=`

Caused by: ${(E=N?.name)!==null&&E!==void 0?E:"Error"}: ${D}`,F&&(P+=` (${F})`),N?.stack&&(P+=`
${N.stack}`)}else P=(C=f?.stack)!==null&&C!==void 0?C:"";return{error:{message:`${(I=f?.name)!==null&&I!==void 0?I:"FetchError"}: ${f?.message}`,details:P,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(i,o)}returns(){return this}overrideTypes(){return this}};return Oh.default=n,Oh}var k2;function YR(){if(k2)return Rh;k2=1,Object.defineProperty(Rh,"__esModule",{value:!0});const t=Xu.__importDefault(KR());let n=class extends t.default{select(i){let o=!1;const a=(i??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:c,referencedTable:f=c}={}){const d=f?`${f}.order`:"order",m=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${m?`${m},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:c=a}={}){const f=typeof c>"u"?"offset":`${c}.offset`,d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${i}`),this.url.searchParams.set(d,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:c=!1,wal:f=!1,format:d="text"}={}){var m;const v=[i?"analyze":null,o?"verbose":null,a?"settings":null,c?"buffers":null,f?"wal":null].filter(Boolean).join("|"),E=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${E}"; options=${v};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return Rh.default=n,Rh}var M2;function cw(){if(M2)return Nh;M2=1,Object.defineProperty(Nh,"__esModule",{value:!0});const t=Xu.__importDefault(YR()),n=new RegExp("[,()]");let r=class extends t.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}regexMatch(o,a){return this.url.searchParams.append(o,`match.${a}`),this}regexIMatch(o,a){return this.url.searchParams.append(o,`imatch.${a}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}isDistinct(o,a){return this.url.searchParams.append(o,`isdistinct.${a}`),this}in(o,a){const c=Array.from(new Set(a)).map(f=>typeof f=="string"&&n.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${c})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:c,type:f}={}){let d="";f==="plain"?d="pl":f==="phrase"?d="ph":f==="websearch"&&(d="w");const m=c===void 0?"":`(${c})`;return this.url.searchParams.append(o,`${d}fts${m}.${a}`),this}match(o){return Object.entries(o).forEach(([a,c])=>{this.url.searchParams.append(a,`eq.${c}`)}),this}not(o,a,c){return this.url.searchParams.append(o,`not.${a}.${c}`),this}or(o,{foreignTable:a,referencedTable:c=a}={}){const f=c?`${c}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,a,c){return this.url.searchParams.append(o,`${a}.${c}`),this}};return Nh.default=r,Nh}var D2;function XR(){if(D2)return Ph;D2=1,Object.defineProperty(Ph,"__esModule",{value:!0});const t=Xu.__importDefault(cw());let n=class{constructor(i,{headers:o={},schema:a,fetch:c}){this.url=i,this.headers=new Headers(o),this.schema=a,this.fetch=c}select(i,o){const{head:a=!1,count:c}=o??{},f=a?"HEAD":"GET";let d=!1;const m=(i??"*").split("").map(v=>/\s/.test(v)&&!d?"":(v==='"'&&(d=!d),v)).join("");return this.url.searchParams.set("select",m),c&&this.headers.append("Prefer",`count=${c}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:a=!0}={}){var c;const f="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((m,v)=>m.concat(Object.keys(v)),[]);if(d.length>0){const m=[...new Set(d)].map(v=>`"${v}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:c,defaultToNull:f=!0}={}){var d;const m="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),c&&this.headers.append("Prefer",`count=${c}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const v=i.reduce((E,C)=>E.concat(Object.keys(C)),[]);if(v.length>0){const E=[...new Set(v)].map(C=>`"${C}"`);this.url.searchParams.set("columns",E.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:o}={}){var a;const c="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var o;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};return Ph.default=n,Ph}var L2;function wB(){if(L2)return Ih;L2=1,Object.defineProperty(Ih,"__esModule",{value:!0});const e=Xu,t=e.__importDefault(XR()),n=e.__importDefault(cw());let r=class JR{constructor(o,{headers:a={},schema:c,fetch:f}={}){this.url=o,this.headers=new Headers(a),this.schemaName=c,this.fetch=f}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${o}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new JR(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:c=!1,get:f=!1,count:d}={}){var m;let v;const E=new URL(`${this.url}/rpc/${o}`);let C;c||f?(v=c?"HEAD":"GET",Object.entries(a).filter(([P,N])=>N!==void 0).map(([P,N])=>[P,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([P,N])=>{E.searchParams.append(P,N)})):(v="POST",C=a);const I=new Headers(this.headers);return d&&I.set("Prefer",`count=${d}`),new n.default({method:v,url:E,headers:I,schema:this.schemaName,body:C,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}};return Ih.default=r,Ih}var B2;function ZR(){if(B2)return Ur;B2=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.PostgrestError=Ur.PostgrestBuilder=Ur.PostgrestTransformBuilder=Ur.PostgrestFilterBuilder=Ur.PostgrestQueryBuilder=Ur.PostgrestClient=void 0;const e=Xu,t=e.__importDefault(wB());Ur.PostgrestClient=t.default;const n=e.__importDefault(XR());Ur.PostgrestQueryBuilder=n.default;const r=e.__importDefault(cw());Ur.PostgrestFilterBuilder=r.default;const i=e.__importDefault(YR());Ur.PostgrestTransformBuilder=i.default;const o=e.__importDefault(KR());Ur.PostgrestBuilder=o.default;const a=e.__importDefault(WR());return Ur.PostgrestError=a.default,Ur.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:a.default},Ur}class QR{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const EB="2.87.1",bB=`realtime-js/${EB}`,eO="1.0.0",_B="2.0.0",F2=eO,yy=1e4,SB=1e3,CB=100;var ul;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ul||(ul={}));var Gn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Gn||(Gn={}));var yo;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(yo||(yo={}));var xy;(function(e){e.websocket="websocket"})(xy||(xy={}));var cl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(cl||(cl={}));class AB{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,n,r){var i,o;const a=t.topic,c=(i=t.ref)!==null&&i!==void 0?i:"",f=(o=t.join_ref)!==null&&o!==void 0?o:"",d=t.payload.event,m=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},v=Object.keys(m).length===0?"":JSON.stringify(m);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+c.length+a.length+d.length+v.length,C=new ArrayBuffer(this.HEADER_LENGTH+E);let I=new DataView(C),P=0;I.setUint8(P++,this.KINDS.userBroadcastPush),I.setUint8(P++,f.length),I.setUint8(P++,c.length),I.setUint8(P++,a.length),I.setUint8(P++,d.length),I.setUint8(P++,v.length),I.setUint8(P++,n),Array.from(f,D=>I.setUint8(P++,D.charCodeAt(0))),Array.from(c,D=>I.setUint8(P++,D.charCodeAt(0))),Array.from(a,D=>I.setUint8(P++,D.charCodeAt(0))),Array.from(d,D=>I.setUint8(P++,D.charCodeAt(0))),Array.from(v,D=>I.setUint8(P++,D.charCodeAt(0)));var N=new Uint8Array(C.byteLength+r.byteLength);return N.set(new Uint8Array(C),0),N.set(new Uint8Array(r),C.byteLength),N.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,o,a,c,f]=r;return n({join_ref:i,ref:o,topic:a,event:c,payload:f})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),c=n.getUint8(4);let f=this.HEADER_LENGTH+4;const d=r.decode(t.slice(f,f+i));f=f+i;const m=r.decode(t.slice(f,f+o));f=f+o;const v=r.decode(t.slice(f,f+a));f=f+a;const E=t.slice(f,t.byteLength),C=c===this.JSON_ENCODING?JSON.parse(r.decode(E)):E,I={type:this.BROADCAST_EVENT,event:m,payload:C};return a>0&&(I.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:I}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class tO{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var on;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(on||(on={}));const U2=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,a)=>(o[a]=TB(a,e,t,i),o),{}):{}},TB=(e,t,n,r)=>{const i=t.find(c=>c.name===e),o=i?.type,a=n[e];return o&&!r.includes(o)?nO(o,a):wy(a)},nO=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return RB(t,n)}switch(e){case on.bool:return IB(t);case on.float4:case on.float8:case on.int2:case on.int4:case on.int8:case on.numeric:case on.oid:return PB(t);case on.json:case on.jsonb:return NB(t);case on.timestamp:return OB(t);case on.abstime:case on.date:case on.daterange:case on.int4range:case on.int8range:case on.money:case on.reltime:case on.text:case on.time:case on.timestamptz:case on.timetz:case on.tsrange:case on.tstzrange:return wy(t);default:return wy(t)}},wy=e=>e,IB=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},PB=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},NB=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},RB=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const a=e.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(c=>nO(t,c))}return e},OB=e=>typeof e=="string"?e.replace(" ","T"):e,rO=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class x1{constructor(t,n,r={},i=yy){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ey;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ey||(Ey={}));let iO=class a0{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=a0.syncState(this.state,i,o,a),this.pendingDiffs.forEach(f=>{this.state=a0.syncDiff(this.state,f,o,a)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=a0.syncDiff(this.state,i,o,a),c())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const o=this.cloneDeep(t),a=this.transformState(n),c={},f={};return this.map(o,(d,m)=>{a[d]||(f[d]=m)}),this.map(a,(d,m)=>{const v=o[d];if(v){const E=m.map(N=>N.presence_ref),C=v.map(N=>N.presence_ref),I=m.filter(N=>C.indexOf(N.presence_ref)<0),P=v.filter(N=>E.indexOf(N.presence_ref)<0);I.length>0&&(c[d]=I),P.length>0&&(f[d]=P)}else c[d]=m}),this.syncDiff(o,{joins:c,leaves:f},r,i)}static syncDiff(t,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(c,f)=>{var d;const m=(d=t[c])!==null&&d!==void 0?d:[];if(t[c]=this.cloneDeep(f),m.length>0){const v=t[c].map(C=>C.presence_ref),E=m.filter(C=>v.indexOf(C.presence_ref)<0);t[c].unshift(...E)}r(c,m,f)}),this.map(a,(c,f)=>{let d=t[c];if(!d)return;const m=f.map(v=>v.presence_ref);d=d.filter(v=>m.indexOf(v.presence_ref)<0),t[c]=d,i(c,d,f),d.length===0&&delete t[c]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var by;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(by||(by={}));var Nu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Nu||(Nu={}));var jo;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(jo||(jo={}));const kB=Gn;let oO=class fd{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Gn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new x1(this,yo.join,this.params,this.timeout),this.rejoinTimer=new tO(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Gn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Gn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(yo.reply,{},(a,c)=>{this._trigger(this._replyEventName(c),a)}),this.presence=new iO(this),this.broadcastEndpointURL=rO(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Gn.closed){const{config:{broadcast:a,presence:c,private:f}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(C=>C.filter))!==null&&i!==void 0?i:[],m=!!this.bindings[Nu.PRESENCE]&&this.bindings[Nu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,v={},E={broadcast:a,presence:Object.assign(Object.assign({},c),{enabled:m}),postgres_changes:d,private:f};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(C=>t?.(jo.CHANNEL_ERROR,C)),this._onClose(()=>t?.(jo.CLOSED)),this.updateJoinPayload(Object.assign({config:E},v)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:C})=>{var I;if(this.socket._isManualToken()||this.socket.setAuth(),C===void 0){t?.(jo.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,N=(I=P?.length)!==null&&I!==void 0?I:0,D=[];for(let F=0;F<N;F++){const L=P[F],{filter:{event:V,schema:G,table:q,filter:W}}=L,Z=C&&C[F];if(Z&&Z.event===V&&fd.isFilterValueEqual(Z.schema,G)&&fd.isFilterValueEqual(Z.table,q)&&fd.isFilterValueEqual(Z.filter,W))D.push(Object.assign(Object.assign({},L),{id:Z.id}));else{this.unsubscribe(),this.state=Gn.errored,t?.(jo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,t&&t(jo.SUBSCRIBED);return}}).receive("error",C=>{this.state=Gn.errored,t?.(jo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{t?.(jo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Gn.joined&&t===Nu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let f=c.statusText;try{const d=await c.json();f=d.error||d.message||f}catch{}return Promise.reject(new Error(f))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,c,f;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Gn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(yo.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new x1(this,yo.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Gn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new x1(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>CB){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;const a=t.toLocaleLowerCase(),{close:c,error:f,leave:d,join:m}=yo;if(r&&[c,f,d,m].indexOf(a)>=0&&r!==this._joinRef())return;let E=this._onMessage(a,n,r);if(n&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(C=>{var I,P,N;return((I=C.filter)===null||I===void 0?void 0:I.event)==="*"||((N=(P=C.filter)===null||P===void 0?void 0:P.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===a}).map(C=>C.callback(E,r)):(o=this.bindings[a])===null||o===void 0||o.filter(C=>{var I,P,N,D,F,L;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in C){const V=C.id,G=(I=C.filter)===null||I===void 0?void 0:I.event;return V&&((P=n.ids)===null||P===void 0?void 0:P.includes(V))&&(G==="*"||G?.toLocaleLowerCase()===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const V=(F=(D=C?.filter)===null||D===void 0?void 0:D.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return V==="*"||V===((L=n?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===a}).map(C=>{if(typeof E=="object"&&"ids"in E){const I=E.data,{schema:P,table:N,commit_timestamp:D,type:F,errors:L}=I;E=Object.assign(Object.assign({},{schema:P,table:N,commit_timestamp:D,eventType:F,new:{},old:{},errors:L}),this._getPayloadRecords(I))}C.callback(E,r)})}_isClosed(){return this.state===Gn.closed}_isJoined(){return this.state===Gn.joined}_isJoining(){return this.state===Gn.joining}_isLeaving(){return this.state===Gn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&fd.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(yo.close,{},t)}_onError(t){this._on(yo.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=U2(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=U2(t.columns,t.old_record)),n}};const w1=()=>{},Mh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},MB=[1e3,2e3,5e3,1e4],DB=1e4,LB=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let BB=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yy,this.transport=null,this.heartbeatIntervalMs=Mh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=w1,this.ref=0,this.reconnectTimer=null,this.vsn=F2,this.logger=w1,this.conn=null,this.sendBuffer=[],this.serializer=new AB,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${xy.websocket}`,this.httpEndpoint=rO(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=QR.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ul.connecting:return cl.Connecting;case ul.open:return cl.Open;case ul.closing:return cl.Closing;default:return cl.Closed}}isConnected(){return this.connectionState()===cl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new oO(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:i,ref:o}=t,a=()=>{this.encode(t,c=>{var f;(f=this.conn)===null||f===void 0||f.send(c)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(SB,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Mh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:a}=n,c=a?`(${a})`:"",f=o.status||"";this.log("receive",`${f} ${r} ${i} ${c}`.trim(),o),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ul.open||this.conn.readyState===ul.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(yo.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([LB],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:bB};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(yo.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new tO(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,a,c,f,d,m,v,E,C;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:yy,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Mh.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=t?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(c=t?.heartbeatCallback)!==null&&c!==void 0?c:w1,this.vsn=(f=t?.vsn)!==null&&f!==void 0?f:F2,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t?.reconnectAfterMs)!==null&&d!==void 0?d:(I=>MB[I-1]||DB),this.vsn){case eO:this.encode=(m=t?.encode)!==null&&m!==void 0?m:((I,P)=>P(JSON.stringify(I))),this.decode=(v=t?.decode)!==null&&v!==void 0?v:((I,P)=>P(JSON.parse(I)));break;case _B:this.encode=(E=t?.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(C=t?.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const FB=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:kB,get REALTIME_LISTEN_TYPES(){return Nu},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return by},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Ey},get REALTIME_SUBSCRIBE_STATES(){return jo},RealtimeChannel:oO,RealtimeClient:BB,RealtimePresence:iO,WebSocketFactory:QR},Symbol.toStringTag,{value:"Module"})),sO=Vd(FB);class qd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function mn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class aO extends qd{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _0 extends qd{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const dw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),UB=()=>Response,_y=e=>{if(Array.isArray(e))return e.map(n=>_y(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=_y(r)}),t},jB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},VB=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),E1=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},$B=(e,t,n)=>qe(void 0,void 0,void 0,function*(){const r=yield UB();e instanceof r&&!n?.noResolveJson?e.json().then(i=>{const o=e.status||500,a=i?.statusCode||o+"";t(new aO(E1(i),o,a))}).catch(i=>{t(new _0(E1(i),i))}):t(new _0(E1(e),e))}),zB=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!r?i:(jB(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Wd(e,t,n,r,i,o){return qe(this,void 0,void 0,function*(){return new Promise((a,c)=>{e(n,zB(t,r,i,o)).then(f=>{if(!f.ok)throw f;return r?.noResolveJson?f:f.json()}).then(f=>a(f)).catch(f=>$B(f,c,r))})})}function Sd(e,t,n,r){return qe(this,void 0,void 0,function*(){return Wd(e,"GET",t,n,r)})}function vo(e,t,n,r,i){return qe(this,void 0,void 0,function*(){return Wd(e,"POST",t,r,i,n)})}function Sy(e,t,n,r,i){return qe(this,void 0,void 0,function*(){return Wd(e,"PUT",t,r,i,n)})}function GB(e,t,n,r){return qe(this,void 0,void 0,function*(){return Wd(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function fw(e,t,n,r,i){return qe(this,void 0,void 0,function*(){return Wd(e,"DELETE",t,r,i,n)})}class HB{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return qe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(mn(t))return{data:null,error:t};throw t}})}}var lO;class qB{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[lO]="BlobDownloadBuilder",this.promise=null}asStream(){return new HB(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return qe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(mn(t))return{data:null,error:t};throw t}})}}lO=Symbol.toStringTag;const WB={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},j2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class KB{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=dw(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return qe(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},j2),i);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const f=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),f&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(f))):(o=r,c["cache-control"]=`max-age=${a.cacheControl}`,c["content-type"]=a.contentType,f&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(f))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),i?.headers&&(c=Object.assign(Object.assign({},c),i.headers));const d=this._removeEmptyFolders(n),m=this._getFinalPath(d),v=yield(t=="PUT"?Sy:vo)(this.fetch,`${this.url}/object/${m}`,o,Object.assign({headers:c},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:v.Id,fullPath:v.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(mn(o))return{data:null,error:o};throw o}})}upload(t,n,r){return qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return qe(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),a=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${a}`);c.searchParams.set("token",n);try{let f;const d=Object.assign({upsert:j2.upsert},i),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",d.cacheControl)):(f=r,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType);const v=yield Sy(this.fetch,c.toString(),f,{headers:m});return{data:{path:o,fullPath:v.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(mn(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(t,n){return qe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const o=yield vo(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+o.url),c=a.searchParams.get("token");if(!c)throw new qd("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}})}update(t,n,r){return qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return qe(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}copy(t,n,r){return qe(this,void 0,void 0,function*(){try{return{data:{path:(yield vo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return qe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield vo(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return qe(this,void 0,void 0,function*(){try{const i=yield vo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),a=o?`?${o}`:"",c=this._getFinalPath(t),f=()=>Sd(this.fetch,`${this.url}/${i}/${c}${a}`,{headers:this.headers,noResolveJson:!0});return new qB(f,this.shouldThrowOnError)}info(t){return qe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Sd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:_y(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}})}exists(t){return qe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield GB(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mn(r)&&r instanceof _0){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const c=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&i.push(f);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(t){return qe(this,void 0,void 0,function*(){try{return{data:yield fw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}list(t,n,r){return qe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},WB),n),{prefix:t||""});return{data:yield vo(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}listV2(t,n){return qe(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield vo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const uO="2.87.1",cO={"X-Client-Info":`storage-js/${uO}`};class YB{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cO),n),this.fetch=dw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return qe(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Sd(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}getBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Sd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}createBucket(t){return qe(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield vo(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return qe(this,void 0,void 0,function*(){try{return{data:yield Sy(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield fw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var Cd=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function XB(e,t,n){const r=new URL(t,e);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function JB(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function ZB(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:a}){const c=XB(e.baseUrl,r,i),f=await JB(e.auth),d=await t(c,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...f,...a},body:o?JSON.stringify(o):void 0}),m=await d.text(),v=(d.headers.get("content-type")||"").includes("application/json"),E=v&&m?JSON.parse(m):m;if(!d.ok){const C=v?E:void 0,I=C?.error;throw new Cd(I?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:I?.type,icebergCode:I?.code,details:C})}return{status:d.status,headers:d.headers,data:E}}}}function Dh(e){return e.join("")}var QB=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Dh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Dh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Dh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Dh(e.namespace)}`}),!0}catch(t){if(t instanceof Cd&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Cd&&n.status===409)return;throw n}}};function du(e){return e.join("")}var eF=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${du(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${du(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${du(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${du(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${du(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${du(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Cd&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Cd&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},tF=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=ZB({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new QB(this.client,t),this.tableOps=new eF(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class dO{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cO),n),this.fetch=dw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}listBuckets(t){return qe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Sd(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield fw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}from(t){if(!VB(t))throw new qd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new tF({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>qe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(o,a){const c=o[a];return typeof c!="function"?c:(...f)=>qe(this,void 0,void 0,function*(){try{return{data:yield c.apply(o,f),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}})}})}}const hw={"X-Client-Info":`storage-js/${uO}`,"Content-Type":"application/json"};class pw extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ui(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class l0 extends pw{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fO extends pw{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Cy;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Cy||(Cy={}));const Fp=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),nF=()=>Response,hO=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},rF=e=>Array.from(new Float32Array(e)),iF=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},V2=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oF=(e,t,n)=>qe(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){const i=e.status||500,o=e;if(typeof o.json=="function")o.json().then(a=>{const c=a?.statusCode||a?.code||i+"";t(new l0(V2(a),i,c))}).catch(()=>{const a=i+"",c=o.statusText||`HTTP ${i} error`;t(new l0(c,i,a))});else{const a=i+"",c=o.statusText||`HTTP ${i} error`;t(new l0(c,i,a))}}else t(new fO(V2(e),e))}),sF=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return r?(hO(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function aF(e,t,n,r,i,o){return qe(this,void 0,void 0,function*(){return new Promise((a,c)=>{e(n,sF(t,r,i,o)).then(f=>{if(!f.ok)throw f;if(r?.noResolveJson)return f;const d=f.headers.get("content-type");return!d||!d.includes("application/json")?{}:f.json()}).then(f=>a(f)).catch(f=>oF(f,c,r))})})}function Ti(e,t,n,r,i){return qe(this,void 0,void 0,function*(){return aF(e,"POST",t,r,i,n)})}class pO{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hw),n),this.fetch=Fp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return qe(this,void 0,void 0,function*(){try{return{data:(yield Ti(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}getIndex(t,n){return qe(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ui(r))return{data:null,error:r};throw r}})}listIndexes(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return qe(this,void 0,void 0,function*(){try{return{data:(yield Ti(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ui(r))return{data:null,error:r};throw r}})}}class mO{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hw),n),this.fetch=Fp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return qe(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ti(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}getVectors(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}listVectors(t){return qe(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Ti(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}queryVectors(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}deleteVectors(t){return qe(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ti(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}}class gO{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hw),n),this.fetch=Fp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:(yield Ti(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}getBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}listBuckets(){return qe(this,arguments,void 0,function*(t={}){try{return{data:yield Ti(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}deleteBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:(yield Ti(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}}class vO extends gO{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new yO(this.url,this.headers,t,this.fetch)}createBucket(t){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return qe(this,void 0,void 0,function*(){return n.createBucket.call(this,t)})}getBucket(t){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return qe(this,void 0,void 0,function*(){return n.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return qe(this,arguments,void 0,function*(n={}){return t.listBuckets.call(this,n)})}deleteBucket(t){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return qe(this,void 0,void 0,function*(){return n.deleteBucket.call(this,t)})}}class yO extends pO{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return qe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return qe(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return qe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return qe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new xO(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class xO extends mO{constructor(t,n,r,i,o){super(t,n,o),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return qe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return qe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return qe(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return qe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return qe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class lF extends YB{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new KB(this.url,this.headers,t,this.fetch)}get vectors(){return new vO(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new dO(this.url+"/iceberg",this.headers,this.fetch)}}const uF=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:dO,StorageApiError:aO,StorageClient:lF,StorageError:qd,StorageUnknownError:_0,StorageVectorsApiError:l0,StorageVectorsClient:vO,StorageVectorsError:pw,get StorageVectorsErrorCode(){return Cy},StorageVectorsUnknownError:fO,VectorBucketApi:gO,VectorBucketScope:yO,VectorDataApi:mO,VectorIndexApi:pO,VectorIndexScope:xO,isPlainObject:hO,isStorageError:mn,isStorageVectorsError:ui,normalizeToFloat32:rF,resolveFetch:Fp,resolveResponse:nF,validateVectorDimension:iF},Symbol.toStringTag,{value:"Module"})),cF=Vd(uF);var b1={},td={},$2;function dF(){return $2||($2=1,Object.defineProperty(td,"__esModule",{value:!0}),td.version=void 0,td.version="2.87.1"),td}var z2;function fF(){return z2||(z2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=dF();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(b1)),b1}var _1={},G2;function hF(){return G2||(G2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=i=>i?(...o)=>i(...o):(...o)=>fetch(...o);e.resolveFetch=t;const n=()=>Headers;e.resolveHeadersConstructor=n;const r=(i,o,a)=>{const c=(0,e.resolveFetch)(a),f=(0,e.resolveHeadersConstructor)();return async(d,m)=>{var v;const E=(v=await o())!==null&&v!==void 0?v:i;let C=new f(m?.headers);return C.has("apikey")||C.set("apikey",i),C.has("Authorization")||C.set("Authorization",`Bearer ${E}`),c(d,Object.assign(Object.assign({},m),{headers:C}))}};e.fetchWithAuth=r})(_1)),_1}var us={},H2;function pF(){if(H2)return us;H2=1,Object.defineProperty(us,"__esModule",{value:!0}),us.isBrowser=void 0,us.uuid=e,us.ensureTrailingSlash=t,us.applySettingDefaults=r,us.validateSupabaseUrl=i;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var a=Math.random()*16|0,c=o=="x"?a:a&3|8;return c.toString(16)})}function t(o){return o.endsWith("/")?o:o+"/"}const n=()=>typeof window<"u";us.isBrowser=n;function r(o,a){var c,f;const{db:d,auth:m,realtime:v,global:E}=o,{db:C,auth:I,realtime:P,global:N}=a,D={db:Object.assign(Object.assign({},C),d),auth:Object.assign(Object.assign({},I),m),realtime:Object.assign(Object.assign({},P),v),storage:{},global:Object.assign(Object.assign(Object.assign({},N),E),{headers:Object.assign(Object.assign({},(c=N?.headers)!==null&&c!==void 0?c:{}),(f=E?.headers)!==null&&f!==void 0?f:{})}),accessToken:async()=>""};return o.accessToken?D.accessToken=o.accessToken:delete D.accessToken,D}function i(o){const a=o?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return us}var nd={};const wO="2.87.1",yu=30*1e3,Ay=3,S1=Ay*yu,mF="http://localhost:9999",gF="supabase.auth.token",vF={"X-Client-Info":`gotrue-js/${wO}`},Ty="X-Supabase-Api-Version",EO={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yF=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xF=600*1e3;let Bu=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function Qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let bO=class extends Bu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function _O(e){return Qe(e)&&e.name==="AuthApiError"}let ha=class extends Bu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},Ps=class extends Bu{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}},li=class extends Ps{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function SO(e){return Qe(e)&&e.name==="AuthSessionMissingError"}let tl=class extends Ps{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},hd=class extends Ps{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},pd=class extends Ps{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function CO(e){return Qe(e)&&e.name==="AuthImplicitGrantRedirectError"}let Iy=class extends Ps{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},S0=class extends Ps{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function u0(e){return Qe(e)&&e.name==="AuthRetryableFetchError"}let Py=class extends Ps{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function wF(e){return Qe(e)&&e.name==="AuthWeakPasswordError"}let C0=class extends Ps{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const A0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),q2=` 	
\r=`.split(""),EF=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<q2.length;t+=1)e[q2[t].charCodeAt(0)]=-2;for(let t=0;t<A0.length;t+=1)e[A0[t].charCodeAt(0)]=t;return e})();function W2(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(A0[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(A0[r]),t.queuedBits-=6}}function AO(e,t,n){const r=EF[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function K2(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{SF(a,r,n)};for(let a=0;a<e.length;a+=1)AO(e.charCodeAt(a),i,o);return t.join("")}function bF(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function _F(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}bF(r,t)}}function SF(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ru(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)AO(e.charCodeAt(i),n,r);return new Uint8Array(t)}function CF(e){const t=[];return _F(e,n=>t.push(n)),new Uint8Array(t)}function dl(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>W2(i,n,r)),W2(null,n,r),t.join("")}function AF(e){return Math.round(Date.now()/1e3)+e}function TF(){return Symbol("auth-callback")}const Tr=()=>typeof window<"u"&&typeof document<"u",Qa={tested:!1,writable:!1},TO=()=>{if(!Tr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qa.tested)return Qa.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Qa.tested=!0,Qa.writable=!0}catch{Qa.tested=!0,Qa.writable=!1}return Qa.writable};function IF(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const IO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),PF=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",xu=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},el=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ar=async(e,t)=>{await e.removeItem(t)};class Up{constructor(){this.promise=new Up.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Up.promiseConstructor=Promise;function C1(e){const t=e.split(".");if(t.length!==3)throw new C0("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!yF.test(t[r]))throw new C0("JWT not in base64url format");return{header:JSON.parse(K2(t[0])),payload:JSON.parse(K2(t[1])),signature:Ru(t[2]),raw:{header:t[0],payload:t[1]}}}async function NF(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function RF(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){r(a);return}}catch(a){if(!t(o,a)){i(a);return}}})()})}function OF(e){return("0"+e.toString(16)).substr(-2)}function kF(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,OF).join("")}async function MF(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function DF(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await MF(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fu(e,t,n=!1){const r=kF();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await xu(e,`${t}-code-verifier`,i);const o=await DF(r);return[o,r===o?"plain":"s256"]}const LF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function BF(e){const t=e.headers.get(Ty);if(!t||!t.match(LF))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function FF(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function UF(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hu(e){if(!jF.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function A1(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function VF(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function Y2(e){return JSON.parse(JSON.stringify(e))}const nl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$F=[502,503,504];async function X2(e){var t;if(!PF(e))throw new S0(nl(e),0);if($F.includes(e.status))throw new S0(nl(e),e.status);let n;try{n=await e.json()}catch(o){throw new ha(nl(o),o)}let r;const i=BF(e);if(i&&i.getTime()>=EO["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Py(nl(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new li}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Py(nl(n),e.status,n.weak_password.reasons);throw new bO(nl(n),e.status||500,r)}const zF=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ut(e,t,n,r){var i;const o=Object.assign({},r?.headers);o[Ty]||(o[Ty]=EO["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",f=await GF(e,t,n+c,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(f):{data:Object.assign({},f),error:null}}async function GF(e,t,n,r,i,o){const a=zF(t,r,i,o);let c;try{c=await e(n,Object.assign({},a))}catch(f){throw console.error(f),new S0(nl(f),0)}if(c.ok||await X2(c),r?.noResolveJson)return c;try{return await c.json()}catch(f){await X2(f)}}function go(e){var t;let n=null;WF(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=AF(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function J2(e){const t=go(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function pa(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function HF(e){return{data:e,error:null}}function qF(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,a=Yu(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},f=Object.assign({},a);return{data:{properties:c,user:f},error:null}}function Z2(e){return e}function WF(e){return e.access_token&&e.refresh_token&&e.expires_in}const c0=["global","local","others"];let mw=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=IO(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=c0[0]){if(c0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${c0.join(", ")}`);try{return await ut(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ut(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:pa})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Yu(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await ut(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:qF,redirectTo:n?.redirectTo})}catch(n){if(Qe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ut(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:pa})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,a,c,f;try{const d={nextPage:null,lastPage:0,total:0},m=await ut(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Z2});if(m.error)throw m.error;const v=await m.json(),E=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,C=(f=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&f!==void 0?f:[];return C.length>0&&(C.forEach(I=>{const P=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(I.split(";")[1].split("=")[1]);d[`${N}Page`]=P}),d.total=parseInt(E)),{data:Object.assign(Object.assign({},v),d),error:null}}catch(d){if(Qe(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){hu(t);try{return await ut(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:pa})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){hu(t);try{return await ut(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:pa})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){hu(t);try{return await ut(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:pa})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){hu(t.userId);try{const{data:n,error:r}=await ut(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){hu(t.userId),hu(t.id);try{return{data:await ut(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,a,c,f;try{const d={nextPage:null,lastPage:0,total:0},m=await ut(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Z2});if(m.error)throw m.error;const v=await m.json(),E=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,C=(f=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&f!==void 0?f:[];return C.length>0&&(C.forEach(I=>{const P=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(I.split(";")[1].split("=")[1]);d[`${N}Page`]=P}),d.total=parseInt(E)),{data:Object.assign(Object.assign({},v),d),error:null}}catch(d){if(Qe(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await ut(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ut(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await ut(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await ut(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ut(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}};function Q2(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const rl={debug:!!(globalThis&&TO()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gw extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let PO=class extends gw{};class KF extends gw{}async function NO(e,t,n){rl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),rl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){rl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{rl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw rl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new PO(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(rl.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const eS={};async function YF(e,t,n){var r;const i=(r=eS[e])!==null&&r!==void 0?r:Promise.resolve(),o=Promise.race([i.catch(()=>null),t>=0?new Promise((a,c)=>{setTimeout(()=>{c(new KF(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(a=>a)).catch(a=>{if(a&&a.isAcquireTimeout)throw a;return null}).then(async()=>await n());return eS[e]=o.catch(async a=>{if(a&&a.isAcquireTimeout)return await i,null;throw a}),await o}function XF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function RO(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function JF(e){return parseInt(e,16)}function ZF(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function QF(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:c,requestId:f,resources:d,scheme:m,uri:v,version:E}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const C=RO(e.address),I=m?`${m}://${r}`:r,P=e.statement?`${e.statement}
`:"",N=`${I} wants you to sign in with your Ethereum account:
${C}

${P}`;let D=`URI: ${v}
Version: ${E}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(D+=`
Expiration Time: ${i.toISOString()}`),c&&(D+=`
Not Before: ${c.toISOString()}`),f&&(D+=`
Request ID: ${f}`),d){let F=`
Resources:`;for(const L of d){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);F+=`
- ${L}`}D+=F}return`${N}
${D}`}class Hn extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class T0 extends Hn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function e7({error:e,options:t}){var n,r,i;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Hn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Hn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Hn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Hn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Hn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Hn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new Hn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Hn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(OO(a)){if(o.rp.id!==a)return new Hn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Hn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Hn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Hn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Hn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function t7({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Hn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Hn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(OO(r)){if(n.rpId!==r)return new Hn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Hn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Hn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Hn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class n7{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const r7=new n7;function i7(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=Yu(e,["challenge","user","excludeCredentials"]),o=Ru(t).buffer,a=Object.assign(Object.assign({},n),{id:Ru(n.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const d=r[f];c.excludeCredentials[f]=Object.assign(Object.assign({},d),{id:Ru(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function o7(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Yu(e,["challenge","allowCredentials"]),i=Ru(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const c=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},c),{id:Ru(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function s7(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:dl(new Uint8Array(e.response.attestationObject)),clientDataJSON:dl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function a7(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:dl(new Uint8Array(i.authenticatorData)),clientDataJSON:dl(new Uint8Array(i.clientDataJSON)),signature:dl(new Uint8Array(i.signature)),userHandle:i.userHandle?dl(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function OO(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function tS(){var e,t;return!!(Tr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function l7(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new T0("Browser returned unexpected credential type",t)}:{data:null,error:new T0("Empty credential response",t)}}catch(t){return{data:null,error:e7({error:t,options:e})}}}async function u7(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new T0("Browser returned unexpected credential type",t)}:{data:null,error:new T0("Empty credential response",t)}}catch(t){return{data:null,error:t7({error:t,options:e})}}}const c7={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},d7={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function I0(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(t(a)){const c=r[o];t(c)?r[o]=I0(c,a):r[o]=I0(a)}else r[o]=a}return r}function f7(e,t){return I0(c7,e,t||{})}function h7(e,t){return I0(d7,e,t||{})}class p7{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){try{const{data:a,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:c};const f=i??r7.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=f7(a.webauthn.credential_options.publicKey,o?.create),{data:m,error:v}=await l7({publicKey:d,signal:f});return m?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:v}}case"request":{const d=h7(a.webauthn.credential_options.publicKey,o?.request),{data:m,error:v}=await u7(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:f}));return m?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:v}}}}catch(a){return Qe(a)?{data:null,error:a}:{data:null,error:new ha("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Bu("rpId is required for WebAuthn authentication")};try{if(!tS())return{data:null,error:new ha("Browser does not support WebAuthn",null)};const{data:a,error:c}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:c};const{webauthn:f}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:r,credential_response:f.credential_response}})}catch(a){return Qe(a)?{data:null,error:a}:{data:null,error:new ha("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Bu("rpId is required for WebAuthn registration")};try{if(!tS())return{data:null,error:new ha("Browser does not support WebAuthn",null)};const{data:a,error:c}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(m=>{var v;return(v=m.data)===null||v===void 0?void 0:v.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===t&&E.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m?.id}):void 0),{data:null,error:c};const{data:f,error:d}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return f?this._verify({factorId:a.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:d}}catch(a){return Qe(a)?{data:null,error:a}:{data:null,error:new ha("Unexpected error in register",a)}}}}XF();const m7={url:mF,storageKey:gF,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vF,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function nS(e,t,n){return await n()}const pu={};let vw=class Ny{get jwks(){var t,n;return(n=(t=pu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){pu[this.storageKey]=Object.assign(Object.assign({},pu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=pu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){pu[this.storageKey]=Object.assign(Object.assign({},pu[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},m7),t);if(this.storageKey=o.storageKey,this.instanceID=(n=Ny.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Ny.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Tr()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new mw({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=IO(o.fetch),this.lock=o.lock||nS,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Tr()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=NO:this.lock=nS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new p7(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:TO()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Q2(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Q2(this.memoryStorage)),Tr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${wO}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Tr()&&(n=IF(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Tr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),CO(o)){const f=(t=o.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Qe(n)?this._returnResult({error:n}):this._returnResult({error:new ha("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const o=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:go}),{data:a,error:c}=o;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});const f=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(o){if(Qe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var n,r,i;try{let o;if("email"in t){const{email:m,password:v,options:E}=t;let C=null,I=null;this.flowType==="pkce"&&([C,I]=await fu(this.storage,this.storageKey)),o=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E?.emailRedirectTo,body:{email:m,password:v,data:(n=E?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:E?.captchaToken},code_challenge:C,code_challenge_method:I},xform:go})}else if("phone"in t){const{phone:m,password:v,options:E}=t;o=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:v,data:(r=E?.data)!==null&&r!==void 0?r:{},channel:(i=E?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:E?.captchaToken}},xform:go})}else throw new hd("You must provide either an email or phone number and a password");const{data:a,error:c}=o;if(c||!a)return await Ar(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const f=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(o){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Qe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:a,options:c}=t;n=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:J2})}else if("phone"in t){const{phone:o,password:a,options:c}=t;n=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:J2})}else throw new hd("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new tl;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Qe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,o,a,c,f,d,m,v,E;let C,I;if("message"in t)C=t.message,I=t.signature;else{const{chain:P,wallet:N,statement:D,options:F}=t;let L;if(Tr())if(typeof N=="object")L=N;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")L=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!F?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=N}const V=new URL((n=F?.url)!==null&&n!==void 0?n:window.location.href),G=await L.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!G||G.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const q=RO(G[0]);let W=(r=F?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!W){const X=await L.request({method:"eth_chainId"});W=JF(X)}const Z={domain:V.host,address:q,statement:D,uri:V.href,version:"1",chainId:W,nonce:(i=F?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=F?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=F?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(f=F?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(d=F?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(m=F?.signInWithEthereum)===null||m===void 0?void 0:m.resources};C=QF(Z),I=await L.request({method:"personal_sign",params:[ZF(C),q]})}try{const{data:P,error:N}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:I},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(E=t.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:go});if(N)throw N;if(!P||!P.session||!P.user){const D=new tl;return this._returnResult({data:{user:null,session:null},error:D})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:N})}catch(P){if(Qe(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async signInWithSolana(t){var n,r,i,o,a,c,f,d,m,v,E,C;let I,P;if("message"in t)I=t.message,P=t.signature;else{const{chain:N,wallet:D,statement:F,options:L}=t;let V;if(Tr())if(typeof D=="object")V=D;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))V=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=D}const G=new URL((n=L?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in V&&V.signIn){const q=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),F?{statement:F}:null));let W;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")W=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)W=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)I=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),P=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${G.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...F?["",F,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(i=(r=L?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=L?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((a=L?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((c=L?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((f=L?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((d=L?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((v=(m=L?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||v===void 0)&&v.length?["Resources",...L.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const q=await V.signMessage(new TextEncoder().encode(I),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=q}}try{const{data:N,error:D}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:I,signature:dl(P)},!((E=t.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(C=t.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:go});if(D)throw D;if(!N||!N.session||!N.user){const F=new tl;return this._returnResult({data:{user:null,session:null},error:F})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:D})}catch(N){if(Qe(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(t){const n=await el(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:a}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:go});if(await Ar(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const c=new tl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Qe(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=t,c=await ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:go}),{data:f,error:d}=c;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!f||!f.session||!f.user){const m=new tl;return this._returnResult({data:{user:null,session:null},error:m})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:d})}catch(n){if(Qe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,o,a;try{if("email"in t){const{email:c,options:f}=t;let d=null,m=null;this.flowType==="pkce"&&([d,m]=await fu(this.storage,this.storageKey));const{error:v}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:d,code_challenge_method:m},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in t){const{phone:c,options:f}=t,{data:d,error:m}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=f?.data)!==null&&i!==void 0?i:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(a=f?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:m})}throw new hd("You must provide either an email or phone number.")}catch(c){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Qe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(t){var n,r;try{let i,o;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:c}=await ut(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:go});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");const f=a.session,d=a.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(i){if(Qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,o,a;try{let c=null,f=null;this.flowType==="pkce"&&([c,f]=await fu(this.storage,this.storageKey));const d=await ut(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:f}),headers:this.headers,xform:HF});return!((o=d.data)===null||o===void 0)&&o.url&&Tr()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(c){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Qe(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new li;const{error:i}=await ut(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(Qe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:o}=t,{error:a}=await ut(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:i,options:o}=t,{data:a,error:c}=await ut(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new hd("You must provide either an email or phone number and a type")}catch(n){if(Qe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await el(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<S1:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await el(this.userStorage,this.storageKey+"-user");a?.user?t.user=a.user:t.user=A1()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=VF(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:pa}):await this._useSession(async n=>{var r,i,o;const{data:a,error:c}=n;if(c)throw c;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new li}:await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:pa})})}catch(n){if(Qe(n))return SO(n)&&(await this._removeSession(),await Ar(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new li;const a=i.session;let c=null,f=null;this.flowType==="pkce"&&t.email!=null&&([c,f]=await fu(this.storage,this.storageKey));const{data:d,error:m}=await ut(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:f}),jwt:a.access_token,xform:pa});if(m)throw m;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Qe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new li;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=C1(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:c,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:f}=await this._getUser(t.access_token);if(f)throw f;o={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(Qe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:c}=n;if(c)throw c;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!t?.refresh_token)throw new li;const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Qe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Tr())throw new pd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new pd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Iy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Iy("No code detected.");const{data:F,error:L}=await this._exchangeCodeForSession(t.code);if(L)throw L;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:F.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:c,expires_at:f,token_type:d}=t;if(!o||!c||!a||!d)throw new pd("No session defined in URL");const m=Math.round(Date.now()/1e3),v=parseInt(c);let E=m+v;f&&(E=parseInt(f));const C=E-m;C*1e3<=yu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${v}s`);const I=E-v;m-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,E,m):m-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,E,m);const{data:P,error:N}=await this._getUser(o);if(N)throw N;const D={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:v,expires_at:E,refresh_token:a,token_type:d,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:t.type},error:null})}catch(r){if(Qe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await el(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({error:o});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:c}=await this.admin.signOut(a,t);if(c&&!(_O(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return t!=="others"&&(await this._removeSession(),await Ar(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=TF(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await fu(this.storage,this.storageKey,!0));try{return await ut(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Qe(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,c,f,d,m;const{data:v,error:E}=o;if(E)throw E;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ut(this.fetch,"GET",C,{headers:this.headers,jwt:(m=(d=v.session)===null||d===void 0?void 0:d.access_token)!==null&&m!==void 0?m:void 0})});if(i)throw i;return Tr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:t.provider,url:r?.url},error:null})}catch(r){if(Qe(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:c,token:f,access_token:d,nonce:m}=t,v=await ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:f,access_token:d,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:go}),{data:E,error:C}=v;return C?this._returnResult({data:{user:null,session:null},error:C}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new tl}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:C}))}catch(i){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await ut(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await RF(async i=>(i>0&&await NF(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ut(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:go})),(i,o)=>{const a=200*Math.pow(2,i);return o&&u0(o)&&Date.now()+a-r<yu})}catch(r){if(this._debug(n,"error",r),Qe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Tr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await el(this.storage,this.storageKey);if(i&&this.userStorage){let a=await el(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await xu(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a?.user)!==null&&t!==void 0?t:A1()}else if(i&&!i.user&&!i.user){const a=await el(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,await Ar(this.storage,this.storageKey+"-user"),await xu(this.storage,this.storageKey,i)):i.user=A1()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<S1;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${S1}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),u0(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:c}=await this._getUser(i.access_token);!c&&a?.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new li;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Up;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new li;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(i,"error",o),Qe(o)){const a={data:null,error:o};return u0(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,n)}catch(f){o.push(f)}});if(await Promise.all(a),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ar(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await xu(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Y2(i);await xu(this.storage,this.storageKey,o)}else{const i=Y2(n);await xu(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ar(this.storage,this.storageKey),await Ar(this.storage,this.storageKey+"-code-verifier"),await Ar(this.storage,this.storageKey+"-user"),this.userStorage&&await Ar(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Tr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),yu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/yu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${yu}ms, refresh threshold is ${Ay} ticks`),i<=Ay&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof gw)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await fu(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(c.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await ut(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:d}=await ut(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&f.type==="totp"&&(!((i=f?.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?s7(t.webauthn.credential_response):a7(t.webauthn.credential_response)})}:{code:t.code}),{data:c,error:f}=await ut(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:f}))})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await ut(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:i7(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:o7(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n?.factors)!==null&&t!==void 0?t:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=C1(r.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ut(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new li})})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new li});const a=await ut(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Tr()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Qe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new li});const a=await ut(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Tr()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Qe(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await ut(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new li})})}catch(t){if(Qe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ut(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new li})})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(c=>c.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===t),r&&this.jwks_cached_at+xF>i)return r;const{data:o,error:a}=await ut(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(c=>c.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:C,error:I}=await this.getSession();if(I||!C.session)return this._returnResult({data:null,error:I});r=C.session.access_token}const{header:i,payload:o,signature:a,raw:{header:c,payload:f}}=C1(r);n?.allowExpired||FF(o.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!d){const{error:C}=await this.getUser(r);if(C)throw C;return{data:{claims:o,header:i,signature:a},error:null}}const m=UF(i.alg),v=await crypto.subtle.importKey("jwk",d,m,!0,["verify"]);if(!await crypto.subtle.verify(m,v,a,CF(`${c}.${f}`)))throw new C0("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(Qe(r))return this._returnResult({data:null,error:r});throw r}}};vw.nextInstanceID={};const g7=mw,v7=vw,y7=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:g7,AuthApiError:bO,AuthClient:v7,AuthError:Bu,AuthImplicitGrantRedirectError:pd,AuthInvalidCredentialsError:hd,AuthInvalidJwtError:C0,AuthInvalidTokenResponseError:tl,AuthPKCEGrantCodeExchangeError:Iy,AuthRetryableFetchError:S0,AuthSessionMissingError:li,AuthUnknownError:ha,AuthWeakPasswordError:Py,CustomAuthError:Ps,GoTrueAdminApi:mw,GoTrueClient:vw,NavigatorLockAcquireTimeoutError:PO,SIGN_OUT_SCOPES:c0,isAuthApiError:_O,isAuthError:Qe,isAuthImplicitGrantRedirectError:CO,isAuthRetryableFetchError:u0,isAuthSessionMissingError:SO,isAuthWeakPasswordError:wF,lockInternals:rl,navigatorLock:NO,processLock:YF},Symbol.toStringTag,{value:"Module"})),kO=Vd(y7);var rS;function x7(){if(rS)return nd;rS=1,Object.defineProperty(nd,"__esModule",{value:!0}),nd.SupabaseAuthClient=void 0;const e=kO;let t=class extends e.AuthClient{constructor(r){super(r)}};return nd.SupabaseAuthClient=t,nd}var iS;function oS(){if(iS)return Th;iS=1,Object.defineProperty(Th,"__esModule",{value:!0});const e=qR,t=ZR(),n=sO,r=cF,i=fF(),o=hF(),a=pF(),c=x7();class f{constructor(m,v,E){var C,I,P;this.supabaseUrl=m,this.supabaseKey=v;const N=(0,a.validateSupabaseUrl)(m);if(!v)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",N),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",N),this.storageUrl=new URL("storage/v1",N),this.functionsUrl=new URL("functions/v1",N);const D=`sb-${N.hostname.split(".")[0]}-auth-token`,F={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:D}),global:i.DEFAULT_GLOBAL_OPTIONS},L=(0,a.applySettingDefaults)(E??{},F);this.storageKey=(C=L.auth.storageKey)!==null&&C!==void 0?C:"",this.headers=(I=L.global.headers)!==null&&I!==void 0?I:{},L.accessToken?(this.accessToken=L.accessToken,this.auth=new Proxy({},{get:(V,G)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(G)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((P=L.auth)!==null&&P!==void 0?P:{},this.headers,L.global.fetch),this.fetch=(0,o.fetchWithAuth)(v,this._getAccessToken.bind(this),L.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},L.realtime)),this.accessToken&&this.accessToken().then(V=>this.realtime.setAuth(V)).catch(V=>console.warn("Failed to set initial Realtime auth token:",V)),this.rest=new t.PostgrestClient(new URL("rest/v1",N).href,{headers:this.headers,schema:L.db.schema,fetch:this.fetch}),this.storage=new r.StorageClient(this.storageUrl.href,this.headers,this.fetch,E?.storage),L.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(m){return this.rest.from(m)}schema(m){return this.rest.schema(m)}rpc(m,v={},E={head:!1,get:!1,count:void 0}){return this.rest.rpc(m,v,E)}channel(m,v={config:{}}){return this.realtime.channel(m,v)}getChannels(){return this.realtime.getChannels()}removeChannel(m){return this.realtime.removeChannel(m)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var m,v;if(this.accessToken)return await this.accessToken();const{data:E}=await this.auth.getSession();return(v=(m=E.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:m,persistSession:v,detectSessionInUrl:E,storage:C,userStorage:I,storageKey:P,flowType:N,lock:D,debug:F,throwOnError:L},V,G){const q={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},q),V),storageKey:P,autoRefreshToken:m,persistSession:v,detectSessionInUrl:E,storage:C,userStorage:I,flowType:N,lock:D,debug:F,throwOnError:L,fetch:G,hasCustomAuthorizationHeader:Object.keys(this.headers).some(W=>W.toLowerCase()==="authorization")})}_initRealtimeClient(m){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},m),{params:Object.assign({apikey:this.supabaseKey},m?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((v,E)=>{this._handleTokenChanged(v,"CLIENT",E?.access_token)})}_handleTokenChanged(m,v,E){(m==="TOKEN_REFRESHED"||m==="SIGNED_IN")&&this.changedAccessToken!==E?(this.changedAccessToken=E,this.realtime.setAuth(E)):m==="SIGNED_OUT"&&(this.realtime.setAuth(),v=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Th.default=f,Th}var sS;function w7(){return sS||(sS=1,(function(e){var t=ls&&ls.__createBinding||(Object.create?(function(m,v,E,C){C===void 0&&(C=E);var I=Object.getOwnPropertyDescriptor(v,E);(!I||("get"in I?!v.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return v[E]}}),Object.defineProperty(m,C,I)}):(function(m,v,E,C){C===void 0&&(C=E),m[C]=v[E]})),n=ls&&ls.__exportStar||function(m,v){for(var E in m)E!=="default"&&!Object.prototype.hasOwnProperty.call(v,E)&&t(v,m,E)},r=ls&&ls.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const i=r(oS());n(kO,e);var o=ZR();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return o.PostgrestError}});var a=qR;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return a.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return a.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return a.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return a.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return a.FunctionRegion}}),n(sO,e);var c=oS();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return r(c).default}});const f=(m,v,E)=>new i.default(m,v,E);e.createClient=f;function d(){if(typeof window<"u"||typeof process>"u")return!1;const m=process.version;if(m==null)return!1;const v=m.match(/^v(\d+)\./);return v?parseInt(v[1],10)<=18:!1}d()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(ls)),ls}var MO=w7();const DO=ro(MO),E7=Qx({__proto__:null,default:DO},[MO]),{PostgrestError:Mde,FunctionsHttpError:Dde,FunctionsFetchError:Lde,FunctionsRelayError:Bde,FunctionsError:Fde,FunctionRegion:Ude,SupabaseClient:jde,createClient:b7,GoTrueAdminApi:Vde,GoTrueClient:$de,AuthAdminApi:zde,AuthClient:Gde,navigatorLock:Hde,NavigatorLockAcquireTimeoutError:qde,lockInternals:Wde,processLock:Kde,SIGN_OUT_SCOPES:Yde,AuthError:Xde,AuthApiError:Jde,AuthUnknownError:Zde,CustomAuthError:Qde,AuthSessionMissingError:efe,AuthInvalidTokenResponseError:tfe,AuthInvalidCredentialsError:nfe,AuthImplicitGrantRedirectError:rfe,AuthPKCEGrantCodeExchangeError:ife,AuthRetryableFetchError:ofe,AuthWeakPasswordError:sfe,AuthInvalidJwtError:afe,isAuthError:lfe,isAuthApiError:ufe,isAuthSessionMissingError:cfe,isAuthImplicitGrantRedirectError:dfe,isAuthRetryableFetchError:ffe,isAuthWeakPasswordError:hfe,RealtimePresence:pfe,RealtimeChannel:mfe,RealtimeClient:gfe,REALTIME_LISTEN_TYPES:vfe,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:yfe,REALTIME_PRESENCE_LISTEN_EVENTS:xfe,REALTIME_SUBSCRIBE_STATES:wfe,REALTIME_CHANNEL_STATES:Efe}=DO||E7,T1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GEMINI_API_KEY:"",VITE_SUPABASE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hYmpsaGpsa2VlaGFjenhyZ2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4Mzg5MDMsImV4cCI6MjA4MTQxNDkwM30.eHuUAZMQ9eGffxCwYwOczhzZuRksv41QoUaIulebpT4",VITE_SUPABASE_URL:"https://mabjlhjlkeehaczxrgcy.supabase.co"},LO=e=>T1&&T1[e]?T1[e]:"",I1=LO("VITE_SUPABASE_URL"),aS=LO("VITE_SUPABASE_KEY");let BO=null;if(I1&&aS&&I1!=="https://placeholder.supabase.co")try{BO=b7(I1,aS)}catch(e){console.error("Error initializing Supabase:",e)}else console.warn("VITE_SUPABASE_URL o VITE_SUPABASE_KEY no configuradas. El backend funcionar en modo MOCK (sin persistencia).");const Ht=BO,_7=({onSuccess:e})=>{const[t,n]=M.useState(bu[0].id),r=bu.find(we=>we.id===t)||bu[0],[i,o]=M.useState({name:"",email:"",phone:"+569 ",date:"",time:"",isHomeService:!1,address:"",serviceId:r.id,serviceName:r.name,referral:""}),[a,c]=M.useState(!1),[f,d]=M.useState(!1),[m,v]=M.useState([]),[E,C]=M.useState([]),[I,P]=M.useState({}),[N,D]=M.useState(null),[F,L]=M.useState(!1);M.useEffect(()=>{o(we=>({...we,serviceId:r.id,serviceName:r.name,isHomeService:r.homeServiceOnly?!0:we.isHomeService}))},[r]);const V=r.durationMin+(i.isHomeService?uB:0),G=r.price+(i.isHomeService?lB:0);M.useEffect(()=>{i.date&&q(i.date)},[i.date]),M.useEffect(()=>{i.date&&W()},[i.date,E,V]),M.useEffect(()=>{const ve=setTimeout(()=>{if(i.name.length>3&&i.phone.length>8){const Se=JSON.parse(localStorage.getItem("mock_bookings")||"[]").find(Ce=>Ce.phone.replace(/\s/g,"")===i.phone.replace(/\s/g,"")&&Ce.name.toLowerCase()===i.name.toLowerCase());Se&&(D(Se),L(!0))}},1e3);return()=>clearTimeout(ve)},[i.name,i.phone]);const q=async we=>{d(!0);try{let ve=[];if(Ht){const{data:te,error:pe}=await Ht.from("bookings").select("time, duration_minutes").eq("date",we);!pe&&te&&(ve=te.map(Fe=>{const[Le,lt]=Fe.time.split(":").map(Number),Ne=Le*60+lt;return{start:Ne,end:Ne+Fe.duration_minutes}}))}const Ce=JSON.parse(localStorage.getItem("mock_bookings")||"[]").filter(te=>te.date===we).map(te=>{const[pe,Fe]=te.time.split(":").map(Number),Le=pe*60+Fe,lt=te.duration_minutes||60;return{start:Le,end:Le+lt}});C([...ve,...Ce])}catch(ve){console.warn("Error fetching slots",ve),C([])}finally{d(!1)}},W=()=>{const xe=[];for(let Se=9;Se<20;Se++)for(let Ce=0;Ce<60;Ce+=30){const te=Se*60+Ce,pe=te+V;if(pe>1200)continue;if(!E.some(Le=>te>=Le.start&&te<Le.end||pe>Le.start&&pe<=Le.end||te<=Le.start&&pe>=Le.end)){const Le=`${Se.toString().padStart(2,"0")}:${Ce.toString().padStart(2,"0")}`;xe.push(Le)}}v(xe),i.time&&!xe.includes(i.time)&&o(Se=>({...Se,time:""}))},Z=()=>{const we={};return i.name||(we.name="El nombre es obligatorio"),(!i.phone||i.phone.trim()==="+569")&&(we.phone="El telfono es obligatorio"),i.email?/\S+@\S+\.\S+/.test(i.email)||(we.email="El formato del email no es vlido"):we.email="El email es obligatorio",i.date||(we.date="Selecciona una fecha"),i.time||(we.time="Selecciona una hora"),i.isHomeService&&!i.address&&(we.address="La direccin es obligatoria para servicio a domicilio"),P(we),Object.keys(we).length===0},X=we=>{const{name:ve,value:xe,type:Se}=we.target,Ce=we.target.checked;o(te=>({...te,[ve]:Se==="checkbox"?Ce:xe})),I[ve]&&P(te=>{const pe={...te};return delete pe[ve],pe})},fe=we=>{o(ve=>({...ve,time:we})),I.time&&P(ve=>{const xe={...ve};return delete xe.time,xe})},se=async()=>{const we=JSON.parse(localStorage.getItem("mock_bookings")||"[]"),ve={id:Date.now(),...i,duration_minutes:V,created_at:new Date().toISOString()};if(we.push(ve),localStorage.setItem("mock_bookings",JSON.stringify(we)),Ht)try{const{error:xe}=await Ht.from("leads").upsert({phone:i.phone,name:i.name,email:i.email,last_booking_date:i.date},{onConflict:"phone"});xe&&console.warn("Error saving lead:",xe),await Ht.from("bookings").insert([{name:i.name,email:i.email,phone:i.phone,date:i.date,time:i.time,is_home_service:i.isHomeService,address:i.address||null,duration_minutes:V}])}catch(xe){console.warn("Supabase save failed, relying on local:",xe)}},ae=we=>{const xe=JSON.parse(localStorage.getItem("mock_bookings")||"[]").filter(Se=>Se.id!==we);localStorage.setItem("mock_bookings",JSON.stringify(xe))},be=()=>{N&&(ae(N.id),D(null),L(!1))},he=()=>{L(!1),o(we=>({...we,name:"",phone:"+569 "})),alert(`Entendido. Tu cita anterior (${N.date} a las ${N.time}) se mantiene. Gracias!`)},ne=async we=>{if(!Z())return;c(!0),await se();const ve=`${r.name}${i.isHomeService?" + Domicilio":" (En Studio)"}`,xe=new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(G),Se=`
Hola Tus3B Style, acabo de reservar en la web.
--------------------------------
*Cliente:* ${i.name}
*Telfono:* ${i.phone}
*Servicio:* ${ve}
*Fecha:* ${i.date}
*Hora:* ${i.time}
*Duracin:* ${V} min
${i.isHomeService?`*Direccin:* ${i.address}`:""}
${i.referral?`*Referido por:* ${i.referral}`:""}
*Total:* ${xe}
--------------------------------
Espero su confirmacin final. Gracias.
    `.trim();await new Promise(Ce=>setTimeout(Ce,800)),c(!1),e&&e(i);{const Ce=`https://wa.me/${Pu}?text=${encodeURIComponent(Se)}`;window.open(Ce,"_blank")}};return R.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start fade-in pb-12 relative",children:[F&&N&&R.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 bg-white/95 backdrop-blur-sm rounded-2xl animate-in fade-in zoom-in-95",children:R.jsxs("div",{className:"bg-white border border-stone-200 shadow-2xl p-8 rounded-2xl max-w-sm text-center",children:[R.jsx(P5,{className:"mx-auto text-amber-500 mb-4 h-12 w-12"}),R.jsx("h3",{className:"serif text-2xl font-bold text-stone-900 mb-2",children:"Ya tienes una reserva"}),R.jsxs("p",{className:"text-stone-600 mb-6 text-sm",children:["Hemos encontrado una cita para ",R.jsx("strong",{children:N.name})," el da ",R.jsx("strong",{children:N.date})," a las ",R.jsx("strong",{children:N.time}),"."]}),R.jsx("p",{className:"font-bold text-stone-900 mb-6 text-lg",children:"Deseas cambiar tu reserva?"}),R.jsxs("div",{className:"space-y-3",children:[R.jsx("button",{onClick:be,className:"w-full bg-stone-900 text-white py-3 rounded-xl font-bold hover:bg-stone-700 transition",children:"S, cambiar cita"}),R.jsx("button",{onClick:he,className:"w-full bg-stone-100 text-stone-600 py-3 rounded-xl font-bold hover:bg-stone-200 transition",children:"No, mantener la anterior"})]})]})}),R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 relative",children:[!Ht&&R.jsxs("div",{className:"absolute top-0 right-0 bg-amber-100 text-amber-800 text-[10px] font-bold px-3 py-1 rounded-bl-lg flex items-center gap-1 z-10",children:[R.jsx(V5,{size:12})," MODO DEMO"]}),R.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Elige tu Servicio"}),R.jsxs("div",{className:"relative mb-6",children:[R.jsx("select",{value:t,onChange:we=>n(we.target.value),className:"w-full p-4 rounded-xl bg-stone-50 border border-stone-200 text-stone-900 font-serif text-lg focus:ring-2 focus:ring-stone-900 outline-none appearance-none",children:bu.map(we=>R.jsxs("option",{value:we.id,children:[we.name," - $",we.price.toLocaleString("es-CL")]},we.id))}),R.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:R.jsx("svg",{className:"w-5 h-5 text-stone-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),R.jsx("p",{className:"text-stone-500 font-light text-sm mb-4",children:r.description}),R.jsxs("div",{className:"flex justify-between items-center bg-stone-50 p-4 rounded-xl mb-4",children:[R.jsxs("div",{children:[R.jsx("span",{className:"block text-2xl font-semibold text-stone-900",children:new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(G)}),R.jsx("span",{className:"text-xs text-stone-500 uppercase tracking-wide",children:"Precio Estimado"})]}),R.jsxs("div",{className:"text-right",children:[R.jsxs("span",{className:"block text-lg font-medium text-stone-900",children:[V," min"]}),R.jsx("span",{className:"text-xs text-stone-500 uppercase tracking-wide",children:"Duracin"})]})]}),R.jsx("div",{className:"mb-4",children:R.jsxs("div",{className:`flex items-start p-3 rounded-lg border relative transition-colors ${r.homeServiceOnly?"bg-amber-50 border-amber-200":"bg-blue-50/50 border-blue-100"}`,children:[R.jsx("div",{className:"flex items-center h-5 mt-0.5",children:R.jsx("input",{id:"isHomeService",name:"isHomeService",type:"checkbox",checked:i.isHomeService,onChange:X,disabled:r.homeServiceOnly,className:"focus:ring-stone-500 h-5 w-5 text-stone-900 border-gray-300 rounded cursor-pointer disabled:opacity-50"})}),R.jsxs("div",{className:"ml-3",children:[R.jsx("label",{htmlFor:"isHomeService",className:"font-bold text-stone-900 cursor-pointer",children:r.homeServiceOnly?"Servicio Exclusivo a Domicilio":"Servicio a Domicilio? (+ $3.000)"}),R.jsxs("p",{className:"text-xs text-stone-500 mt-1 leading-relaxed",children:["Vamos a tu casa en ",cB.join(", "),". ",R.jsx("br",{}),R.jsx("span",{className:"text-blue-600 font-medium",children:"Incluye +30 min de traslado."})]})]})]})}),R.jsx("h4",{className:"text-xs uppercase tracking-widest text-stone-400 mb-3 font-bold mt-6",children:"Incluye"}),R.jsx("ul",{className:"space-y-2",children:r.includes.map((we,ve)=>R.jsxs("li",{className:"flex items-center text-sm text-stone-700",children:[R.jsx(gR,{size:14,className:"text-stone-900 mr-2"}),we]},ve))})]}),R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[R.jsxs("h3",{className:"serif text-xl text-stone-900 mb-4 flex items-center gap-2",children:[R.jsx("span",{className:"bg-stone-900 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center font-sans",children:"1"}),"Tus Datos"]}),R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Nombre y Apellido"}),R.jsx("input",{type:"text",name:"name",value:i.name,onChange:X,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${I.name?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"Ej: Mara Prez"}),I.name&&R.jsx("p",{className:"text-red-500 text-xs mt-1",children:I.name})]}),R.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Telfono"}),R.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:X,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${I.phone?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"+569...",inputMode:"numeric"}),I.phone&&R.jsx("p",{className:"text-red-500 text-xs mt-1",children:I.phone})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Email"}),R.jsx("input",{type:"email",name:"email",value:i.email,onChange:X,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${I.email?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"correo@ejemplo.com"}),I.email&&R.jsx("p",{className:"text-red-500 text-xs mt-1",children:I.email})]})]}),R.jsxs("div",{className:"animate-in fade-in pt-2",children:[R.jsxs("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1 flex items-center gap-1",children:[R.jsx(nB,{size:12})," Quin te recomend? (Opcional)"]}),R.jsx("input",{type:"text",name:"referral",value:i.referral,onChange:X,className:"w-full px-4 py-3 rounded-lg bg-purple-50 border border-purple-100 focus:border-purple-300 focus:ring-1 outline-none transition-all placeholder-purple-300 text-purple-900",placeholder:"Nombre o Telfono de tu amiga"})]}),i.isHomeService&&R.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 pt-2",children:[R.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Direccin (Comuna y Calle)"}),R.jsxs("div",{className:"relative",children:[R.jsx("input",{type:"text",name:"address",value:i.address,onChange:X,className:`w-full px-4 py-3 rounded-lg bg-amber-50 border ${I.address?"border-red-300 focus:border-red-500":"border-amber-200 focus:border-amber-500"} focus:ring-1 pl-10 outline-none transition-all`,placeholder:"Av. Irarrzaval 1234, uoa"}),R.jsx(vR,{size:18,className:"absolute left-3 top-3.5 text-amber-500"})]}),I.address&&R.jsx("p",{className:"text-red-500 text-xs mt-1",children:I.address})]})]})]})]}),R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[R.jsxs("h3",{className:"serif text-xl text-stone-900 mb-4 flex items-center gap-2",children:[R.jsx("span",{className:"bg-stone-900 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center font-sans",children:"2"}),"Fecha y Hora"]}),R.jsxs("div",{className:"mb-6",children:[R.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Selecciona un da"}),R.jsxs("div",{className:"relative",children:[R.jsx("input",{type:"date",name:"date",min:new Date().toISOString().split("T")[0],value:i.date,onChange:X,className:`w-full px-4 py-4 rounded-xl bg-stone-50 border ${I.date?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} text-lg font-medium shadow-sm outline-none`}),R.jsx(O5,{size:20,className:"absolute right-4 top-4.5 text-stone-400 pointer-events-none"})]}),I.date&&R.jsx("p",{className:"text-red-500 text-xs mt-1",children:I.date})]}),i.date&&R.jsxs("div",{className:"animate-in fade-in",children:[R.jsxs("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-3 flex justify-between",children:[R.jsx("span",{children:"Horas Disponibles"}),f&&R.jsxs("span",{className:"flex items-center text-stone-400",children:[R.jsx(x0,{size:12,className:"animate-spin mr-1"})," Buscando..."]})]}),m.length>0?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-4 gap-3",children:m.map(we=>R.jsx("button",{onClick:()=>fe(we),className:`py-3 px-2 rounded-lg text-sm font-bold transition-all transform active:scale-95 ${i.time===we?"bg-stone-900 text-white shadow-md scale-105 ring-2 ring-offset-2 ring-stone-900":"bg-white border border-stone-200 text-stone-600 hover:border-stone-900 hover:bg-stone-50"}`,children:we},we))}),I.time&&R.jsx("p",{className:"text-red-500 text-xs mt-2 text-center bg-red-50 p-2 rounded",children:I.time})]}):R.jsx("div",{className:"bg-stone-50 p-4 rounded-lg text-center text-stone-500 text-sm",children:f?"Cargando...":"No hay horas disponibles para este da. Intenta otra fecha."})]}),!i.date&&R.jsxs("div",{className:"text-center py-8 text-stone-400 text-sm italic",children:[R.jsx(M5,{size:32,className:"mx-auto mb-2 opacity-20"}),"Selecciona una fecha para ver disponibilidad"]})]}),R.jsxs("div",{className:"pt-2 sticky bottom-4 z-10",children:[R.jsxs("button",{onClick:()=>ne(),disabled:a,className:"w-full flex justify-center items-center space-x-2 bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-xl shadow-xl transition-all transform hover:-translate-y-1 disabled:opacity-75 disabled:cursor-not-allowed disabled:transform-none",children:[a?R.jsx(x0,{className:"animate-spin"}):R.jsx(eB,{size:22}),R.jsx("span",{className:"text-lg",children:a?"Procesando...":"Confirmar y Enviar WhatsApp"})]}),R.jsx("p",{className:"text-xs text-center text-stone-400 mt-3 px-4",children:"Al confirmar, volvers al inicio y se abrir WhatsApp."})]})]})]})},S7=({onSelectPerfume:e})=>{const[t,n]=M.useState(!1),[r,i]=M.useState(""),[o,a]=M.useState([]),[c,f]=M.useState(!1),d=v=>{if(v.preventDefault(),!r.trim())return;const E=r.toLowerCase().split(/[\s,]+/).filter(P=>P.length>2),I=ya.map(P=>{let N=0;const D=[],F=(L,V)=>{E.forEach(G=>{L.toLowerCase().includes(G)&&(N+=V,D.includes(G)||D.push(G))})};return F(P.name,3),F(P.description,1),F(P.brand,2),P.notes.forEach(L=>F(L,2)),F(P.category==="arab"?"arabe":"clasico",2),{perfume:P,score:N,matches:D}}).filter(P=>P.score>0).sort((P,N)=>N.score-P.score).slice(0,3);a(I),f(!0)},m=()=>{i(""),a([]),f(!1)};return R.jsxs(R.Fragment,{children:[R.jsxs("button",{onClick:()=>n(!0),className:"fixed bottom-6 right-6 z-40 bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-4 rounded-full shadow-2xl hover:scale-105 transition-transform flex items-center gap-2",children:[R.jsx(_d,{size:24,className:"animate-pulse"}),R.jsx("span",{className:"font-bold pr-1 hidden md:block",children:"Asesor IA"})]}),t&&R.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:R.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[R.jsxs("div",{className:"bg-gradient-to-r from-purple-700 to-indigo-800 p-6 text-white relative",children:[R.jsx("button",{onClick:()=>n(!1),className:"absolute top-4 right-4 text-white/80 hover:text-white",children:R.jsx(Hd,{size:24})}),R.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2 mb-1",children:[R.jsx(_d,{className:"text-yellow-300"})," Asesor de Aromas"]}),R.jsx("p",{className:"text-white/80 text-sm",children:"Cuntame qu te gusta y te recomendar tu perfume ideal."})]}),R.jsx("div",{className:"p-6 flex-1 overflow-y-auto",children:c?R.jsx("div",{className:"space-y-4",children:o.length>0?R.jsxs(R.Fragment,{children:[R.jsx("h3",{className:"font-bold text-stone-700 text-sm uppercase tracking-wider mb-2",children:"Mejores Coincidencias:"}),o.map(({perfume:v,matches:E},C)=>R.jsxs("div",{onClick:()=>{e(v.id),n(!1)},className:"border border-stone-200 rounded-xl p-3 flex gap-3 hover:border-purple-500 hover:shadow-md transition cursor-pointer bg-white group",children:[R.jsxs("div",{className:"w-16 h-16 bg-stone-100 rounded-lg flex-shrink-0 overflow-hidden relative",children:[C===0&&R.jsx("div",{className:"absolute top-0 left-0 bg-yellow-400 text-yellow-900 text-[10px] font-bold px-1.5 py-0.5 rounded-br",children:"#1"}),R.jsx("img",{src:v.image,alt:v.name,className:"w-full h-full object-cover"})]}),R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsx("h4",{className:"font-bold text-stone-900 truncate group-hover:text-purple-700",children:v.name}),R.jsx("p",{className:"text-xs text-stone-500 mb-2 truncate",children:v.brand}),R.jsx("div",{className:"flex flex-wrap gap-1",children:E.map(I=>R.jsxs("span",{className:"bg-purple-100 text-purple-700 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:[" ",I]},I))})]})]},v.id)),R.jsx("button",{onClick:m,className:"w-full text-center text-sm text-stone-400 hover:text-stone-600 mt-4 underline",children:"Probar otra bsqueda"})]}):R.jsxs("div",{className:"text-center py-8",children:[R.jsx("p",{className:"text-stone-500 mb-4",children:"No encontr coincidencias exactas. "}),R.jsx("button",{onClick:m,className:"bg-stone-100 text-stone-700 px-4 py-2 rounded-lg font-bold",children:"Intentar de nuevo"})]})}):R.jsxs("div",{className:"text-center py-8",children:[R.jsx("div",{className:"bg-purple-50 inline-flex p-4 rounded-full mb-4",children:R.jsx(aw,{size:48,className:"text-purple-400"})}),R.jsx("h3",{className:"font-bold text-stone-700 mb-2",children:"Qu buscas hoy?"}),R.jsxs("p",{className:"text-stone-500 text-sm mb-6",children:["Ejemplos: ",R.jsx("br",{}),'"Algo dulce con vainilla"',R.jsx("br",{}),'"Fresco y ctrico para el da"',R.jsx("br",{}),'"Intenso y sexy para fiesta"']})]})}),R.jsx("form",{onSubmit:d,className:"p-4 border-t border-stone-100 bg-stone-50",children:R.jsxs("div",{className:"relative",children:[R.jsx("input",{type:"text",value:r,onChange:v=>i(v.target.value),placeholder:"Escribe aqu...",className:"w-full pl-4 pr-12 py-3 rounded-xl border border-stone-300 focus:ring-2 focus:ring-purple-500 outline-none shadow-sm",autoFocus:!0}),R.jsx("button",{type:"submit",disabled:!r.trim(),className:"absolute right-2 top-2 p-1.5 bg-purple-600 text-white rounded-lg disabled:bg-stone-300 disabled:cursor-not-allowed transition",children:c?R.jsx(lw,{size:20}):R.jsx(xR,{size:20})})]})})]})})]})},C7=()=>{const[e,t]=M.useState(""),[n,r]=M.useState(null),[i,o]=M.useState("all"),[a,c]=M.useState({});M.useEffect(()=>{f()},[]);const f=async()=>{const{data:F}=await Ht.from("inventory").select("product_id, quantity");if(F){const L={};F.forEach(V=>{L[V.product_id]=V.quantity}),c(L)}},d=F=>{t("");const L=ya.find(V=>V.id===F);L&&(o(L.category),setTimeout(()=>{const V=document.getElementById(`perfume-${F}`);V&&V.scrollIntoView({behavior:"smooth",block:"center"}),V?.classList.add("ring-4","ring-purple-500","ring-opacity-50"),setTimeout(()=>V?.classList.remove("ring-4","ring-purple-500","ring-opacity-50"),2e3)},100))},m=M.useMemo(()=>{const F=new Set;return ya.forEach(L=>L.notes.forEach(V=>F.add(V))),Array.from(F).sort()},[]),v=M.useMemo(()=>ya.filter(F=>{const L=F.name.toLowerCase().includes(e.toLowerCase())||F.brand.toLowerCase().includes(e.toLowerCase()),V=n?F.notes.includes(n):!0,G=i==="all"||F.category===i;return L&&V&&G}).sort((F,L)=>{const V=a[F.id]!==void 0?a[F.id]>0:F.stock,G=a[L.id]!==void 0?a[L.id]>0:L.stock;return V===G?0:V?-1:1}),[e,n,i,a]),E=v.filter(F=>F.category==="classic"),C=v.filter(F=>F.category==="arab"),I=(F,L)=>{const V=L==="5ml"?F.price5ml:F.price10ml,G=`Hola Tus3B Style, quiero comprar el decant de *${F.brand} - ${F.name}* en formato *${L}* por $${V}. Tienen disponibilidad?`,q=`https://wa.me/${Pu}?text=${encodeURIComponent(G)}`;window.open(q,"_blank")},P=F=>{if(!F.priceFullBottle)return;const L=`Hola Tus3B Style, quiero comprar la botella completa de *${F.brand} - ${F.name}* por $${F.priceFullBottle.toLocaleString("es-CL")}. Tienen disponibilidad?`,V=`https://wa.me/${Pu}?text=${encodeURIComponent(L)}`;window.open(V,"_blank")},N=()=>{window.open(`https://wa.me/${Pu}?text=${encodeURIComponent("Hola Tus3B Style, me gustara cotizar/encargar un perfume que no veo en el catlogo.")}`,"_blank")},D=F=>R.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12",children:F.map((L,V)=>R.jsxs("div",{className:"group flex flex-col h-full",children:[R.jsxs("div",{className:"relative aspect-[4/5] overflow-hidden bg-white rounded-2xl mb-5 shadow-[0_2px_10px_-4px_rgba(0,0,0,0.05)] border border-stone-100 transition-all duration-300 group-hover:shadow-[0_8px_30px_-4px_rgba(0,0,0,0.1)]",children:[!e&&!n&&R.jsx("div",{className:"absolute top-0 left-0 bg-stone-900 text-white w-8 h-8 flex items-center justify-center font-serif text-sm border-br-xl z-10",children:V+1}),R.jsxs("div",{className:"relative w-full h-full p-8 transition-transform duration-700 ease-out group-hover:scale-105",children:[R.jsx("img",{src:L.image,alt:L.name,className:`w-full h-full object-contain ${L.secondaryImage?"transition-opacity duration-500 group-hover:opacity-0":""}`}),L.secondaryImage&&R.jsx("img",{src:L.secondaryImage,alt:`${L.name} detalle`,className:"absolute inset-0 w-full h-full object-contain p-0 transition-opacity duration-500 opacity-0 group-hover:opacity-100"})]}),R.jsx("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity bg-stone-900/90 text-white text-[10px] uppercase font-bold px-2 py-1 rounded",children:"Original"}),!L.stock&&R.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-[1px] flex items-center justify-center z-20",children:R.jsx("span",{className:"bg-stone-900 text-white px-4 py-2 rounded-lg font-bold uppercase tracking-widest text-xs shadow-lg",children:"Agotado"})})]}),R.jsxs("div",{className:"flex-1 flex flex-col",children:[R.jsx("h4",{className:"text-xs uppercase tracking-wider text-stone-500 font-bold mb-1",children:L.brand}),R.jsx("h3",{className:"serif text-2xl text-stone-900 mb-2 group-hover:text-stone-700 transition-colors",children:L.name}),R.jsx("p",{className:"text-stone-600 text-sm mb-4 line-clamp-3 leading-relaxed flex-grow",children:L.description}),R.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:L.notes.slice(0,3).map(G=>R.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-stone-50 text-stone-500 px-2 py-1 rounded border border-stone-100",children:G},G))}),R.jsxs("div",{className:"mt-auto space-y-3",children:[!L.isSpray&&R.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[R.jsxs("button",{onClick:()=>I(L,"5ml"),disabled:!L.stock,className:`group/btn flex flex-col items-center justify-center p-2.5 border rounded-lg transition-all duration-300 ${L.stock?"border-stone-200 hover:border-stone-900 hover:bg-stone-900":"border-stone-100 bg-stone-50 opacity-50 cursor-not-allowed"}`,children:[R.jsx("span",{className:"text-[10px] font-bold text-stone-500 uppercase mb-0.5 group-hover/btn:text-stone-400",children:"5 ML"}),R.jsxs("span",{className:"text-stone-900 font-semibold group-hover/btn:text-white",children:["$",L.price5ml.toLocaleString("es-CL")]})]}),R.jsxs("button",{onClick:()=>I(L,"10ml"),disabled:!L.stock,className:`group/btn flex flex-col items-center justify-center p-2.5 border rounded-lg transition-all duration-300 ${L.stock?"border-stone-200 hover:border-stone-900 hover:bg-stone-900":"border-stone-100 bg-stone-50 opacity-50 cursor-not-allowed"}`,children:[R.jsx("span",{className:"text-[10px] font-bold text-stone-500 uppercase mb-0.5 group-hover/btn:text-stone-400",children:"10 ML"}),R.jsxs("span",{className:"text-stone-900 font-semibold group-hover/btn:text-white",children:["$",L.price10ml.toLocaleString("es-CL")]})]})]}),L.priceFullBottle&&R.jsxs("button",{onClick:()=>P(L),disabled:!(a[L.id]!==void 0?a[L.id]>0:L.stock),className:`w-full flex items-center justify-center gap-2 p-3 rounded-lg font-bold uppercase text-xs tracking-wider transition-all ${(a[L.id]!==void 0?a[L.id]>0:L.stock)?"bg-stone-900 text-white hover:bg-stone-800 shadow-md hover:shadow-lg":"bg-stone-100 text-stone-400 cursor-not-allowed"}`,children:[R.jsx(bd,{size:14}),R.jsxs("span",{children:["Botella ",L.isSpray?"200ml":"100ml"," - $",L.priceFullBottle.toLocaleString("es-CL")]})]})]})]})]},L.id))});return R.jsxs("div",{className:"space-y-16 fade-in",children:[R.jsxs("div",{className:"flex flex-col border-b border-stone-200 pb-8 gap-6",children:[R.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"serif text-4xl text-stone-900",children:"Catlogo de Decants"}),R.jsx("p",{className:"text-stone-500 mt-2 max-w-xl",children:"Descubre tu firma olfativa con nuestra curadura de perfumes 100% originales."})]}),R.jsxs("div",{className:"relative w-full md:w-72",children:[R.jsx("input",{type:"text",placeholder:"Buscar marca o nombre...",className:"pl-10 pr-4 py-3 border border-stone-300 rounded-xl focus:ring-stone-900 focus:border-stone-900 w-full transition-shadow hover:shadow-sm",value:e,onChange:F=>t(F.target.value)}),R.jsx(lw,{size:18,className:"absolute left-3 top-3.5 text-stone-400"})]})]}),R.jsx("div",{className:"w-full overflow-x-auto pb-2 -mx-4 px-4 md:mx-0 md:px-0 scrollbar-hide",children:R.jsxs("div",{className:"flex flex-nowrap md:flex-wrap gap-2 items-center min-w-max",children:[R.jsx("span",{className:"text-xs font-bold uppercase text-stone-400 mr-2 sticky left-0 bg-white pl-2 md:pl-0",children:"Filtrar:"}),m.map(F=>R.jsx("button",{onClick:()=>r(n===F?null:F),className:`text-xs px-4 py-2 rounded-full border transition-all duration-200 whitespace-nowrap ${n===F?"bg-stone-900 text-white border-stone-900 shadow-md":"bg-white text-stone-600 border-stone-200 active:bg-stone-100"}`,children:F},F))]})})]}),(()=>{const F=G=>G.some(q=>a[q.id]!==void 0?a[q.id]>0:q.stock),V=[{id:"classic",originalIndex:0,items:E,render:()=>R.jsxs("section",{children:[R.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[R.jsx("div",{className:"bg-stone-100 p-2 rounded-full",children:R.jsx(D5,{size:24,className:"text-stone-800"})}),R.jsxs("div",{children:[R.jsx("h2",{className:"serif text-3xl text-stone-900",children:"Clsicos del Lujo"}),R.jsx("p",{className:"text-sm text-stone-500 uppercase tracking-widest font-bold mt-1",children:"Ranking de Tendencia 2025-26"})]})]}),D(E)]},"classic")},{id:"arab",originalIndex:1,items:C,render:()=>R.jsxs("section",{children:[R.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[R.jsx("div",{className:"bg-amber-50 p-2 rounded-full",children:R.jsx(_d,{size:24,className:"text-amber-600"})}),R.jsxs("div",{children:[R.jsx("h2",{className:"serif text-3xl text-stone-900",children:"Tendencia rabe"}),R.jsx("p",{className:"text-sm text-amber-600/80 uppercase tracking-widest font-bold mt-1",children:"Exclusividad & Notas Gourmand"})]})]}),D(C)]},"arab")}].sort((G,q)=>{const W=F(G.items),Z=F(q.items);return W===Z?G.originalIndex-q.originalIndex:W?-1:1});return V.map((G,q)=>R.jsxs(dn.Fragment,{children:[G.items.length>0&&G.render(),q===0&&V.length>1&&V[1].items.length>0&&V[0].items.length>0&&R.jsx("div",{className:"border-t border-stone-100 my-16"})]},G.id))})(),v.length===0&&R.jsxs("div",{className:"text-center py-24 bg-stone-50 rounded-2xl border border-dashed border-stone-200",children:[R.jsx(bd,{size:48,className:"mx-auto text-stone-300 mb-4"}),R.jsx("h4",{className:"text-stone-900 font-bold text-lg mb-1",children:"No encontramos resultados"}),R.jsx("p",{className:"text-stone-500 text-sm",children:"Prueba ajustando tus filtros de bsqueda."})]}),R.jsxs("div",{className:"mt-20 bg-stone-900 rounded-3xl p-8 md:p-14 text-center text-white relative overflow-hidden shadow-2xl ring-1 ring-white/10",children:[R.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[R.jsx("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-full mb-6 ring-1 ring-white/20",children:R.jsx(G5,{size:32,className:"text-yellow-200"})}),R.jsx("h3",{className:"serif text-3xl md:text-5xl mb-6",children:"Buscas algo exclusivo?"}),R.jsx("p",{className:"text-stone-300 mb-10 max-w-2xl mx-auto text-lg font-light leading-relaxed",children:"Si no encuentras tu fragancia favorita en nuestro catlogo, contctanos. Hacemos encargos especiales para que encuentres tu firma olfativa perfecta."}),R.jsxs("button",{onClick:N,className:"group inline-flex items-center bg-white text-stone-900 px-8 py-4 rounded-full font-bold uppercase tracking-widest hover:bg-stone-100 transition-all transform hover:-translate-y-1 shadow-[0_10px_20px_-10px_rgba(255,255,255,0.3)]",children:[R.jsx(aw,{className:"mr-3 group-hover:text-amber-600 transition-colors",size:20}),"Cotizar Encargo"]})]}),R.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://images.unsplash.com/photo-1541643600914-78b084683601?auto=format&fit=crop&q=80')] opacity-20 bg-cover bg-center mix-blend-overlay grayscale"})]}),R.jsx(S7,{onSelectPerfume:d})]})},A7=()=>R.jsx("footer",{className:"bg-stone-900 text-white py-12 md:py-16",children:R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 text-center md:text-left",children:[R.jsxs("div",{children:[R.jsxs("span",{className:"serif text-3xl font-bold italic tracking-tighter block mb-4",children:["Tus3B ",R.jsx("span",{className:"text-stone-400 not-italic font-light text-xl ml-1",children:"Style"})]}),R.jsx("p",{className:"text-stone-400 font-light max-w-xs mx-auto md:mx-0",children:"Elevando tu estilo con servicios de peluquera premium a domicilio y lo mejor de la perfumera internacional."})]}),R.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[R.jsx("h4",{className:"uppercase tracking-widest text-xs font-bold text-stone-500 mb-4",children:"Contacto"}),R.jsxs("a",{href:`https://wa.me/${Pu}`,className:"text-stone-300 hover:text-white mb-2 transition flex items-center gap-2",children:[R.jsx(aw,{size:16})," WhatsApp: +56 9 8452 4774"]}),R.jsx("span",{className:"text-stone-300 mb-2",children:"Santiago, Chile"}),R.jsx("span",{className:"text-stone-300",children:"contacto@tus3b.cl"})]}),R.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[R.jsx("h4",{className:"uppercase tracking-widest text-xs font-bold text-stone-500 mb-4",children:"Sguenos"}),R.jsx("div",{className:"flex space-x-4",children:R.jsx("a",{href:aB,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-stone-800 rounded-full hover:bg-stone-700 transition",children:R.jsx($5,{size:20})})})]})]}),R.jsxs("div",{className:"border-t border-stone-800 mt-12 pt-8 text-center text-stone-500 text-sm font-light",children:[" ",new Date().getFullYear()," Tus3B Style. Todos los derechos reservados."]})]})});var T7={};let I7,P7;function N7(){return{geminiUrl:I7,vertexUrl:P7}}function R7(e,t,n,r){var i,o;if(!e?.baseUrl){const a=N7();return t?(i=a.vertexUrl)!==null&&i!==void 0?i:n:(o=a.geminiUrl)!==null&&o!==void 0?o:r}return e.baseUrl}class Ns{}function Ue(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function S(e,t,n){for(let o=0;o<t.length-1;o++){const a=t[o];if(a.endsWith("[]")){const c=a.slice(0,-2);if(!(c in e))if(Array.isArray(n))e[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(e[c])){const f=e[c];if(Array.isArray(n))for(let d=0;d<f.length;d++){const m=f[d];S(m,t.slice(o+1),n[d])}else for(const d of f)S(d,t.slice(o+1),n)}return}else if(a.endsWith("[0]")){const c=a.slice(0,-3);c in e||(e[c]=[{}]);const f=e[c];S(f[0],t.slice(o+1),n);return}(!e[a]||typeof e[a]!="object")&&(e[a]={}),e=e[a]}const r=t[t.length-1],i=e[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function b(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const i=t[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in e){const a=e[o];return Array.isArray(a)?a.map(c=>b(c,t.slice(r+1),n)):n}else return n}else e=e[i]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function O7(e,t){for(const[n,r]of Object.entries(t)){const i=n.split("."),o=r.split("."),a=new Set;let c=-1;for(let f=0;f<i.length;f++)if(i[f]==="*"){c=f;break}if(c!==-1&&o.length>c)for(let f=c;f<o.length;f++){const d=o[f];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}Ry(e,i,o,0,a)}}function Ry(e,t,n,r,i){if(r>=t.length||typeof e!="object"||e===null)return;const o=t[r];if(o.endsWith("[]")){const a=o.slice(0,-2),c=e;if(a in c&&Array.isArray(c[a]))for(const f of c[a])Ry(f,t,n,r+1,i)}else if(o==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const a=e,c=Object.keys(a).filter(d=>!d.startsWith("_")&&!i.has(d)),f={};for(const d of c)f[d]=a[d];for(const[d,m]of Object.entries(f)){const v=[];for(const E of n.slice(r))E==="*"?v.push(d):v.push(E);S(a,v,m)}for(const d of c)delete a[d]}}else{const a=e;o in a&&Ry(a[o],t,n,r+1,i)}}function yw(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function k7(e){const t={},n=b(e,["operationName"]);n!=null&&S(t,["operationName"],n);const r=b(e,["resourceName"]);return r!=null&&S(t,["_url","resourceName"],r),t}function M7(e){const t={},n=b(e,["name"]);n!=null&&S(t,["name"],n);const r=b(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=b(e,["done"]);i!=null&&S(t,["done"],i);const o=b(e,["error"]);o!=null&&S(t,["error"],o);const a=b(e,["response","generateVideoResponse"]);return a!=null&&S(t,["response"],L7(a)),t}function D7(e){const t={},n=b(e,["name"]);n!=null&&S(t,["name"],n);const r=b(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=b(e,["done"]);i!=null&&S(t,["done"],i);const o=b(e,["error"]);o!=null&&S(t,["error"],o);const a=b(e,["response"]);return a!=null&&S(t,["response"],B7(a)),t}function L7(e){const t={},n=b(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>F7(a))),S(t,["generatedVideos"],o)}const r=b(e,["raiMediaFilteredCount"]);r!=null&&S(t,["raiMediaFilteredCount"],r);const i=b(e,["raiMediaFilteredReasons"]);return i!=null&&S(t,["raiMediaFilteredReasons"],i),t}function B7(e){const t={},n=b(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>U7(a))),S(t,["generatedVideos"],o)}const r=b(e,["raiMediaFilteredCount"]);r!=null&&S(t,["raiMediaFilteredCount"],r);const i=b(e,["raiMediaFilteredReasons"]);return i!=null&&S(t,["raiMediaFilteredReasons"],i),t}function F7(e){const t={},n=b(e,["video"]);return n!=null&&S(t,["video"],H7(n)),t}function U7(e){const t={},n=b(e,["_self"]);return n!=null&&S(t,["video"],q7(n)),t}function j7(e){const t={},n=b(e,["operationName"]);return n!=null&&S(t,["_url","operationName"],n),t}function V7(e){const t={},n=b(e,["operationName"]);return n!=null&&S(t,["_url","operationName"],n),t}function $7(e){const t={},n=b(e,["name"]);n!=null&&S(t,["name"],n);const r=b(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=b(e,["done"]);i!=null&&S(t,["done"],i);const o=b(e,["error"]);o!=null&&S(t,["error"],o);const a=b(e,["response"]);return a!=null&&S(t,["response"],z7(a)),t}function z7(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["parent"]);r!=null&&S(t,["parent"],r);const i=b(e,["documentName"]);return i!=null&&S(t,["documentName"],i),t}function FO(e){const t={},n=b(e,["name"]);n!=null&&S(t,["name"],n);const r=b(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=b(e,["done"]);i!=null&&S(t,["done"],i);const o=b(e,["error"]);o!=null&&S(t,["error"],o);const a=b(e,["response"]);return a!=null&&S(t,["response"],G7(a)),t}function G7(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["parent"]);r!=null&&S(t,["parent"],r);const i=b(e,["documentName"]);return i!=null&&S(t,["documentName"],i),t}function H7(e){const t={},n=b(e,["uri"]);n!=null&&S(t,["uri"],n);const r=b(e,["encodedVideo"]);r!=null&&S(t,["videoBytes"],yw(r));const i=b(e,["encoding"]);return i!=null&&S(t,["mimeType"],i),t}function q7(e){const t={},n=b(e,["gcsUri"]);n!=null&&S(t,["uri"],n);const r=b(e,["bytesBase64Encoded"]);r!=null&&S(t,["videoBytes"],yw(r));const i=b(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}var lS;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(lS||(lS={}));var uS;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(uS||(uS={}));var cS;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(cS||(cS={}));var ga;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(ga||(ga={}));var dS;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(dS||(dS={}));var fS;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(fS||(fS={}));var hS;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(hS||(hS={}));var pS;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(pS||(pS={}));var mS;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(mS||(mS={}));var gS;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})(gS||(gS={}));var vS;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(vS||(vS={}));var yS;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(yS||(yS={}));var xS;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(xS||(xS={}));var wS;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(wS||(wS={}));var ES;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(ES||(ES={}));var bS;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(bS||(bS={}));var _S;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(_S||(_S={}));var SS;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(SS||(SS={}));var CS;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(CS||(CS={}));var P0;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(P0||(P0={}));var AS;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(AS||(AS={}));var TS;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(TS||(TS={}));var IS;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(IS||(IS={}));var Oy;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Oy||(Oy={}));var PS;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(PS||(PS={}));var NS;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(NS||(NS={}));var RS;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(RS||(RS={}));var OS;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(OS||(OS={}));var kS;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(kS||(kS={}));var MS;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(MS||(MS={}));var DS;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(DS||(DS={}));var LS;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(LS||(LS={}));var BS;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(BS||(BS={}));var FS;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(FS||(FS={}));var US;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(US||(US={}));var jS;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(jS||(jS={}));var VS;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(VS||(VS={}));var $S;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})($S||($S={}));var zS;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(zS||(zS={}));var GS;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(GS||(GS={}));var HS;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(HS||(HS={}));var qS;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(qS||(qS={}));var WS;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(WS||(WS={}));var KS;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(KS||(KS={}));var YS;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(YS||(YS={}));var XS;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(XS||(XS={}));var JS;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(JS||(JS={}));var ZS;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(ZS||(ZS={}));var QS;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(QS||(QS={}));var eC;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(eC||(eC={}));var tC;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(tC||(tC={}));var nC;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(nC||(nC={}));var rC;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(rC||(rC={}));var iC;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(iC||(iC={}));var oC;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(oC||(oC={}));var _u;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(_u||(_u={}));class ky{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class rd{get text(){var t,n,r,i,o,a,c,f;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const v=[];for(const E of(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[C,I]of Object.entries(E))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(I!==null||I!==void 0)&&v.push(C);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;m=!0,d+=E.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var t,n,r,i,o,a,c,f;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const v of(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[E,C]of Object.entries(v))E!=="inlineData"&&(C!==null||C!==void 0)&&m.push(E);v.inlineData&&typeof v.inlineData.data=="string"&&(d+=atob(v.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,n,r,i,o,a,c,f;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if(d?.length!==0)return d}get executableCode(){var t,n,r,i,o,a,c,f,d;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if(m?.length!==0)return(d=m?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,n,r,i,o,a,c,f,d;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if(m?.length!==0)return(d=m?.[0])===null||d===void 0?void 0:d.output}}class sC{}class aC{}class W7{}class K7{}class Y7{}class X7{}class lC{}class uC{}class cC{}class J7{}class N0{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new N0;let i;const o=t;return n?i=D7(o):i=M7(o),Object.assign(r,i),r}}class dC{}class fC{}class hC{}class pC{}class Z7{}class Q7{}class e9{}class xw{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new xw,o=$7(t);return Object.assign(r,o),r}}class t9{}class n9{}class r9{}class mC{}class i9{get text(){var t,n,r;let i="",o=!1;const a=[];for(const c of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[f,d]of Object.entries(c))f!=="text"&&f!=="thought"&&d!==null&&a.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,i+=c.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var t,n,r;let i="";const o=[];for(const a of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(a))c!=="inlineData"&&f!==null&&o.push(c);a.inlineData&&typeof a.inlineData.data=="string"&&(i+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class o9{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ww{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new ww,o=FO(t);return Object.assign(r,o),r}}function kt(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function UO(e,t){const n=kt(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function jO(e){return Array.isArray(e)?e.map(t=>R0(t)):[R0(e)]}function R0(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function VO(e){const t=R0(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function $O(e){const t=R0(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function gC(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function zO(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>gC(t)):[gC(e)]}function My(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function vC(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function yC(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function $r(e){if(e==null)throw new Error("ContentUnion is required");return My(e)?e:{role:"user",parts:zO(e)}}function Ew(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=$r(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=$r(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>$r(n)):[$r(t)]}function Zi(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(vC(e)||yC(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[$r(e)]}const t=[],n=[],r=My(e[0]);for(const i of e){const o=My(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)t.push(i);else{if(vC(i)||yC(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||t.push({role:"user",parts:zO(n)}),t}function s9(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(ga).includes(n[0].toUpperCase())?n[0].toUpperCase():ga.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(ga).includes(r.toUpperCase())?r.toUpperCase():ga.TYPE_UNSPECIFIED})}}function Ou(e){const t={},n=["items"],r=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=e.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(t.nullable=!0,e=o[1]):o[1].type==="null"&&(t.nullable=!0,e=o[0])),e.type instanceof Array&&s9(e.type,t);for(const[a,c]of Object.entries(e))if(c!=null)if(a=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;t.type=Object.values(ga).includes(c.toUpperCase())?c.toUpperCase():ga.TYPE_UNSPECIFIED}else if(n.includes(a))t[a]=Ou(c);else if(r.includes(a)){const f=[];for(const d of c){if(d.type=="null"){t.nullable=!0;continue}f.push(Ou(d))}t[a]=f}else if(i.includes(a)){const f={};for(const[d,m]of Object.entries(c))f[d]=Ou(m);t[a]=f}else{if(a==="additionalProperties")continue;t[a]=c}return t}function bw(e){return Ou(e)}function _w(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Sw(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Ju(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Ou(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Ou(t.response));return e}function Zu(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function a9(e,t,n,r=1){const i=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:i?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:i?`${n}/${t}`:t}function Rs(e,t){if(typeof t!="string")throw new Error("name must be a string");return a9(e,t,"cachedContents")}function GO(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Ca(e){return yw(e)}function l9(e){return e!=null&&typeof e=="object"&&"name"in e}function u9(e){return e!=null&&typeof e=="object"&&"video"in e}function c9(e){return e!=null&&typeof e=="object"&&"uri"in e}function HO(e){var t;let n;if(l9(e)&&(n=e.name),!(c9(e)&&(n=e.uri,n===void 0))&&!(u9(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function qO(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function WO(e){for(const t of["models","tunedModels","publisherModels"])if(d9(e,t))return e[t];return[]}function d9(e,t){return e!==null&&typeof e=="object"&&t in e}function f9(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function h9(e,t={}){const n=[],r=new Set;for(const i of e){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const a=f9(i,t);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function KO(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function p9(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function YO(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return e;let o=!1;for(const a of i){if(typeof a!="object"||a===null)continue;const f=a.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){o=!0;break}}return o&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Qu(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function XO(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function m9(e){const t={},n=b(e,["responsesFile"]);n!=null&&S(t,["fileName"],n);const r=b(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Y9(a))),S(t,["inlinedResponses"],o)}const i=b(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["inlinedEmbedContentResponses"],o)}return t}function g9(e){const t={},n=b(e,["predictionsFormat"]);n!=null&&S(t,["format"],n);const r=b(e,["gcsDestination","outputUriPrefix"]);r!=null&&S(t,["gcsUri"],r);const i=b(e,["bigqueryDestination","outputUri"]);return i!=null&&S(t,["bigqueryUri"],i),t}function v9(e){const t={},n=b(e,["format"]);n!=null&&S(t,["predictionsFormat"],n);const r=b(e,["gcsUri"]);r!=null&&S(t,["gcsDestination","outputUriPrefix"],r);const i=b(e,["bigqueryUri"]);if(i!=null&&S(t,["bigqueryDestination","outputUri"],i),b(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(b(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(b(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function d0(e){const t={},n=b(e,["name"]);n!=null&&S(t,["name"],n);const r=b(e,["metadata","displayName"]);r!=null&&S(t,["displayName"],r);const i=b(e,["metadata","state"]);i!=null&&S(t,["state"],XO(i));const o=b(e,["metadata","createTime"]);o!=null&&S(t,["createTime"],o);const a=b(e,["metadata","endTime"]);a!=null&&S(t,["endTime"],a);const c=b(e,["metadata","updateTime"]);c!=null&&S(t,["updateTime"],c);const f=b(e,["metadata","model"]);f!=null&&S(t,["model"],f);const d=b(e,["metadata","output"]);return d!=null&&S(t,["dest"],m9(YO(d))),t}function Dy(e){const t={},n=b(e,["name"]);n!=null&&S(t,["name"],n);const r=b(e,["displayName"]);r!=null&&S(t,["displayName"],r);const i=b(e,["state"]);i!=null&&S(t,["state"],XO(i));const o=b(e,["error"]);o!=null&&S(t,["error"],o);const a=b(e,["createTime"]);a!=null&&S(t,["createTime"],a);const c=b(e,["startTime"]);c!=null&&S(t,["startTime"],c);const f=b(e,["endTime"]);f!=null&&S(t,["endTime"],f);const d=b(e,["updateTime"]);d!=null&&S(t,["updateTime"],d);const m=b(e,["model"]);m!=null&&S(t,["model"],m);const v=b(e,["inputConfig"]);v!=null&&S(t,["src"],y9(v));const E=b(e,["outputConfig"]);E!=null&&S(t,["dest"],g9(YO(E)));const C=b(e,["completionStats"]);return C!=null&&S(t,["completionStats"],C),t}function y9(e){const t={},n=b(e,["instancesFormat"]);n!=null&&S(t,["format"],n);const r=b(e,["gcsSource","uris"]);r!=null&&S(t,["gcsUri"],r);const i=b(e,["bigquerySource","inputUri"]);return i!=null&&S(t,["bigqueryUri"],i),t}function x9(e,t){const n={};if(b(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(b(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(b(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=b(t,["fileName"]);r!=null&&S(n,["fileName"],r);const i=b(t,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>K9(e,a))),S(n,["requests","requests"],o)}return n}function w9(e){const t={},n=b(e,["format"]);n!=null&&S(t,["instancesFormat"],n);const r=b(e,["gcsUri"]);r!=null&&S(t,["gcsSource","uris"],r);const i=b(e,["bigqueryUri"]);if(i!=null&&S(t,["bigquerySource","inputUri"],i),b(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(b(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function E9(e){const t={},n=b(e,["data"]);if(n!=null&&S(t,["data"],n),b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function b9(e,t){const n={},r=b(t,["name"]);return r!=null&&S(n,["_url","name"],Qu(e,r)),n}function _9(e,t){const n={},r=b(t,["name"]);return r!=null&&S(n,["_url","name"],Qu(e,r)),n}function S9(e){const t={},n=b(e,["content"]);n!=null&&S(t,["content"],n);const r=b(e,["citationMetadata"]);r!=null&&S(t,["citationMetadata"],C9(r));const i=b(e,["tokenCount"]);i!=null&&S(t,["tokenCount"],i);const o=b(e,["finishReason"]);o!=null&&S(t,["finishReason"],o);const a=b(e,["avgLogprobs"]);a!=null&&S(t,["avgLogprobs"],a);const c=b(e,["groundingMetadata"]);c!=null&&S(t,["groundingMetadata"],c);const f=b(e,["index"]);f!=null&&S(t,["index"],f);const d=b(e,["logprobsResult"]);d!=null&&S(t,["logprobsResult"],d);const m=b(e,["safetyRatings"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(C=>C)),S(t,["safetyRatings"],E)}const v=b(e,["urlContextMetadata"]);return v!=null&&S(t,["urlContextMetadata"],v),t}function C9(e){const t={},n=b(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),S(t,["citations"],r)}return t}function JO(e){const t={},n=b(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>nU(o))),S(t,["parts"],i)}const r=b(e,["role"]);return r!=null&&S(t,["role"],r),t}function A9(e,t){const n={},r=b(e,["displayName"]);if(t!==void 0&&r!=null&&S(t,["batch","displayName"],r),b(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function T9(e,t){const n={},r=b(e,["displayName"]);t!==void 0&&r!=null&&S(t,["displayName"],r);const i=b(e,["dest"]);return t!==void 0&&i!=null&&S(t,["outputConfig"],v9(p9(i))),n}function xC(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["src"]);i!=null&&S(n,["batch","inputConfig"],x9(e,KO(e,i)));const o=b(t,["config"]);return o!=null&&A9(o,n),n}function I9(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["model"],kt(e,r));const i=b(t,["src"]);i!=null&&S(n,["inputConfig"],w9(KO(e,i)));const o=b(t,["config"]);return o!=null&&T9(o,n),n}function P9(e,t){const n={},r=b(e,["displayName"]);return t!==void 0&&r!=null&&S(t,["batch","displayName"],r),n}function N9(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["src"]);i!=null&&S(n,["batch","inputConfig"],B9(e,i));const o=b(t,["config"]);return o!=null&&P9(o,n),n}function R9(e,t){const n={},r=b(t,["name"]);return r!=null&&S(n,["_url","name"],Qu(e,r)),n}function O9(e,t){const n={},r=b(t,["name"]);return r!=null&&S(n,["_url","name"],Qu(e,r)),n}function k9(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["name"]);r!=null&&S(t,["name"],r);const i=b(e,["done"]);i!=null&&S(t,["done"],i);const o=b(e,["error"]);return o!=null&&S(t,["error"],o),t}function M9(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["name"]);r!=null&&S(t,["name"],r);const i=b(e,["done"]);i!=null&&S(t,["done"],i);const o=b(e,["error"]);return o!=null&&S(t,["error"],o),t}function D9(e,t){const n={},r=b(t,["contents"]);if(r!=null){let o=Ew(e,r);Array.isArray(o)&&(o=o.map(a=>a)),S(n,["requests[]","request","content"],o)}const i=b(t,["config"]);return i!=null&&(S(n,["_self"],L9(i,n)),O7(n,{"requests[].*":"requests[].request.*"})),n}function L9(e,t){const n={},r=b(e,["taskType"]);t!==void 0&&r!=null&&S(t,["requests[]","taskType"],r);const i=b(e,["title"]);t!==void 0&&i!=null&&S(t,["requests[]","title"],i);const o=b(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&S(t,["requests[]","outputDimensionality"],o),b(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(b(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function B9(e,t){const n={},r=b(t,["fileName"]);r!=null&&S(n,["file_name"],r);const i=b(t,["inlinedRequests"]);return i!=null&&S(n,["requests"],D9(e,i)),n}function F9(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const r=b(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function U9(e){const t={},n=b(e,["id"]);n!=null&&S(t,["id"],n);const r=b(e,["args"]);r!=null&&S(t,["args"],r);const i=b(e,["name"]);if(i!=null&&S(t,["name"],i),b(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(b(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function j9(e){const t={},n=b(e,["mode"]);n!=null&&S(t,["mode"],n);const r=b(e,["allowedFunctionNames"]);if(r!=null&&S(t,["allowedFunctionNames"],r),b(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function V9(e,t,n){const r={},i=b(t,["systemInstruction"]);n!==void 0&&i!=null&&S(n,["systemInstruction"],JO($r(i)));const o=b(t,["temperature"]);o!=null&&S(r,["temperature"],o);const a=b(t,["topP"]);a!=null&&S(r,["topP"],a);const c=b(t,["topK"]);c!=null&&S(r,["topK"],c);const f=b(t,["candidateCount"]);f!=null&&S(r,["candidateCount"],f);const d=b(t,["maxOutputTokens"]);d!=null&&S(r,["maxOutputTokens"],d);const m=b(t,["stopSequences"]);m!=null&&S(r,["stopSequences"],m);const v=b(t,["responseLogprobs"]);v!=null&&S(r,["responseLogprobs"],v);const E=b(t,["logprobs"]);E!=null&&S(r,["logprobs"],E);const C=b(t,["presencePenalty"]);C!=null&&S(r,["presencePenalty"],C);const I=b(t,["frequencyPenalty"]);I!=null&&S(r,["frequencyPenalty"],I);const P=b(t,["seed"]);P!=null&&S(r,["seed"],P);const N=b(t,["responseMimeType"]);N!=null&&S(r,["responseMimeType"],N);const D=b(t,["responseSchema"]);D!=null&&S(r,["responseSchema"],bw(D));const F=b(t,["responseJsonSchema"]);if(F!=null&&S(r,["responseJsonSchema"],F),b(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=b(t,["safetySettings"]);if(n!==void 0&&L!=null){let be=L;Array.isArray(be)&&(be=be.map(he=>rU(he))),S(n,["safetySettings"],be)}const V=b(t,["tools"]);if(n!==void 0&&V!=null){let be=Zu(V);Array.isArray(be)&&(be=be.map(he=>oU(Ju(he)))),S(n,["tools"],be)}const G=b(t,["toolConfig"]);if(n!==void 0&&G!=null&&S(n,["toolConfig"],iU(G)),b(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=b(t,["cachedContent"]);n!==void 0&&q!=null&&S(n,["cachedContent"],Rs(e,q));const W=b(t,["responseModalities"]);W!=null&&S(r,["responseModalities"],W);const Z=b(t,["mediaResolution"]);Z!=null&&S(r,["mediaResolution"],Z);const X=b(t,["speechConfig"]);if(X!=null&&S(r,["speechConfig"],_w(X)),b(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const fe=b(t,["thinkingConfig"]);fe!=null&&S(r,["thinkingConfig"],fe);const se=b(t,["imageConfig"]);se!=null&&S(r,["imageConfig"],W9(se));const ae=b(t,["enableEnhancedCivicAnswers"]);return ae!=null&&S(r,["enableEnhancedCivicAnswers"],ae),r}function $9(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>S9(d))),S(t,["candidates"],f)}const i=b(e,["modelVersion"]);i!=null&&S(t,["modelVersion"],i);const o=b(e,["promptFeedback"]);o!=null&&S(t,["promptFeedback"],o);const a=b(e,["responseId"]);a!=null&&S(t,["responseId"],a);const c=b(e,["usageMetadata"]);return c!=null&&S(t,["usageMetadata"],c),t}function z9(e,t){const n={},r=b(t,["name"]);return r!=null&&S(n,["_url","name"],Qu(e,r)),n}function G9(e,t){const n={},r=b(t,["name"]);return r!=null&&S(n,["_url","name"],Qu(e,r)),n}function H9(e){const t={};if(b(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function q9(e){const t={};if(b(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function W9(e){const t={},n=b(e,["aspectRatio"]);n!=null&&S(t,["aspectRatio"],n);const r=b(e,["imageSize"]);if(r!=null&&S(t,["imageSize"],r),b(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(b(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function K9(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["request","model"],kt(e,r));const i=b(t,["contents"]);if(i!=null){let c=Zi(i);Array.isArray(c)&&(c=c.map(f=>JO(f))),S(n,["request","contents"],c)}const o=b(t,["metadata"]);o!=null&&S(n,["metadata"],o);const a=b(t,["config"]);return a!=null&&S(n,["request","generationConfig"],V9(e,a,b(n,["request"],{}))),n}function Y9(e){const t={},n=b(e,["response"]);n!=null&&S(t,["response"],$9(n));const r=b(e,["error"]);return r!=null&&S(t,["error"],r),t}function X9(e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=b(e,["pageToken"]);if(t!==void 0&&i!=null&&S(t,["_query","pageToken"],i),b(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function J9(e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=b(e,["pageToken"]);t!==void 0&&i!=null&&S(t,["_query","pageToken"],i);const o=b(e,["filter"]);return t!==void 0&&o!=null&&S(t,["_query","filter"],o),n}function Z9(e){const t={},n=b(e,["config"]);return n!=null&&X9(n,t),t}function Q9(e){const t={},n=b(e,["config"]);return n!=null&&J9(n,t),t}function eU(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=b(e,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>d0(a))),S(t,["batchJobs"],o)}return t}function tU(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=b(e,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Dy(a))),S(t,["batchJobs"],o)}return t}function nU(e){const t={},n=b(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const r=b(e,["codeExecutionResult"]);r!=null&&S(t,["codeExecutionResult"],r);const i=b(e,["executableCode"]);i!=null&&S(t,["executableCode"],i);const o=b(e,["fileData"]);o!=null&&S(t,["fileData"],F9(o));const a=b(e,["functionCall"]);a!=null&&S(t,["functionCall"],U9(a));const c=b(e,["functionResponse"]);c!=null&&S(t,["functionResponse"],c);const f=b(e,["inlineData"]);f!=null&&S(t,["inlineData"],E9(f));const d=b(e,["text"]);d!=null&&S(t,["text"],d);const m=b(e,["thought"]);m!=null&&S(t,["thought"],m);const v=b(e,["thoughtSignature"]);v!=null&&S(t,["thoughtSignature"],v);const E=b(e,["videoMetadata"]);return E!=null&&S(t,["videoMetadata"],E),t}function rU(e){const t={},n=b(e,["category"]);if(n!=null&&S(t,["category"],n),b(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=b(e,["threshold"]);return r!=null&&S(t,["threshold"],r),t}function iU(e){const t={},n=b(e,["functionCallingConfig"]);n!=null&&S(t,["functionCallingConfig"],j9(n));const r=b(e,["retrievalConfig"]);return r!=null&&S(t,["retrievalConfig"],r),t}function oU(e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>v)),S(t,["functionDeclarations"],m)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearchRetrieval"]);r!=null&&S(t,["googleSearchRetrieval"],r);const i=b(e,["computerUse"]);i!=null&&S(t,["computerUse"],i);const o=b(e,["fileSearch"]);o!=null&&S(t,["fileSearch"],o);const a=b(e,["codeExecution"]);if(a!=null&&S(t,["codeExecution"],a),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=b(e,["googleMaps"]);c!=null&&S(t,["googleMaps"],H9(c));const f=b(e,["googleSearch"]);f!=null&&S(t,["googleSearch"],q9(f));const d=b(e,["urlContext"]);return d!=null&&S(t,["urlContext"],d),t}var ws;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(ws||(ws={}));class Nl{constructor(t,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,i)}init(t,n,r){var i,o;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!r||Object.keys(r).length===0?a={config:{}}:typeof r=="object"?a=Object.assign({},r):a=r,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(i=a.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}class sU extends Ns{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Nl(ws.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=xC(this.apiClient,t),r=n._url,i=Ue("{model}:batchGenerateContent",r),c=n.batch.inputConfig.requests,f=c.requests,d=[];for(const m of f){const v=Object.assign({},m);if(v.systemInstruction){const E=v.systemInstruction;delete v.systemInstruction;const C=v.request;C.systemInstruction=E,v.request=C}d.push(v)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(t),a=this.getBigqueryUri(t);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(a)r.dest=`${a}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=I9(this.apiClient,t);return c=Ue("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>Dy(m))}else{const d=xC(this.apiClient,t);return c=Ue("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>d0(m))}}async createEmbeddingsInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=N9(this.apiClient,t);return o=Ue("{model}:asyncBatchEmbedContent",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>d0(f))}}async get(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=G9(this.apiClient,t);return c=Ue("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>Dy(m))}else{const d=z9(this.apiClient,t);return c=Ue("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>d0(m))}}async cancel(t){var n,r,i,o;let a="",c={};if(this.apiClient.isVertexAI()){const f=_9(this.apiClient,t);a=Ue("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=b9(this.apiClient,t);a=Ue("batches/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=Q9(t);return c=Ue("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=tU(m),E=new mC;return Object.assign(E,v),E})}else{const d=Z9(t);return c=Ue("batches",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=eU(m),E=new mC;return Object.assign(E,v),E})}}async delete(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=O9(this.apiClient,t);return c=Ue("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>M9(m))}else{const d=R9(this.apiClient,t);return c=Ue("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>k9(m))}}}function aU(e){const t={},n=b(e,["data"]);if(n!=null&&S(t,["data"],n),b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function wC(e){const t={},n=b(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>NU(o))),S(t,["parts"],i)}const r=b(e,["role"]);return r!=null&&S(t,["role"],r),t}function lU(e,t){const n={},r=b(e,["ttl"]);t!==void 0&&r!=null&&S(t,["ttl"],r);const i=b(e,["expireTime"]);t!==void 0&&i!=null&&S(t,["expireTime"],i);const o=b(e,["displayName"]);t!==void 0&&o!=null&&S(t,["displayName"],o);const a=b(e,["contents"]);if(t!==void 0&&a!=null){let m=Zi(a);Array.isArray(m)&&(m=m.map(v=>wC(v))),S(t,["contents"],m)}const c=b(e,["systemInstruction"]);t!==void 0&&c!=null&&S(t,["systemInstruction"],wC($r(c)));const f=b(e,["tools"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(v=>OU(v))),S(t,["tools"],m)}const d=b(e,["toolConfig"]);if(t!==void 0&&d!=null&&S(t,["toolConfig"],RU(d)),b(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function uU(e,t){const n={},r=b(e,["ttl"]);t!==void 0&&r!=null&&S(t,["ttl"],r);const i=b(e,["expireTime"]);t!==void 0&&i!=null&&S(t,["expireTime"],i);const o=b(e,["displayName"]);t!==void 0&&o!=null&&S(t,["displayName"],o);const a=b(e,["contents"]);if(t!==void 0&&a!=null){let v=Zi(a);Array.isArray(v)&&(v=v.map(E=>E)),S(t,["contents"],v)}const c=b(e,["systemInstruction"]);t!==void 0&&c!=null&&S(t,["systemInstruction"],$r(c));const f=b(e,["tools"]);if(t!==void 0&&f!=null){let v=f;Array.isArray(v)&&(v=v.map(E=>kU(E))),S(t,["tools"],v)}const d=b(e,["toolConfig"]);t!==void 0&&d!=null&&S(t,["toolConfig"],d);const m=b(e,["kmsKeyName"]);return t!==void 0&&m!=null&&S(t,["encryption_spec","kmsKeyName"],m),n}function cU(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["model"],UO(e,r));const i=b(t,["config"]);return i!=null&&lU(i,n),n}function dU(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["model"],UO(e,r));const i=b(t,["config"]);return i!=null&&uU(i,n),n}function fU(e,t){const n={},r=b(t,["name"]);return r!=null&&S(n,["_url","name"],Rs(e,r)),n}function hU(e,t){const n={},r=b(t,["name"]);return r!=null&&S(n,["_url","name"],Rs(e,r)),n}function pU(e){const t={},n=b(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function mU(e){const t={},n=b(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function gU(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const r=b(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function vU(e){const t={},n=b(e,["id"]);n!=null&&S(t,["id"],n);const r=b(e,["args"]);r!=null&&S(t,["args"],r);const i=b(e,["name"]);if(i!=null&&S(t,["name"],i),b(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(b(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function yU(e){const t={},n=b(e,["mode"]);n!=null&&S(t,["mode"],n);const r=b(e,["allowedFunctionNames"]);if(r!=null&&S(t,["allowedFunctionNames"],r),b(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function xU(e){const t={};if(b(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(e,["description"]);n!=null&&S(t,["description"],n);const r=b(e,["name"]);r!=null&&S(t,["name"],r);const i=b(e,["parameters"]);i!=null&&S(t,["parameters"],i);const o=b(e,["parametersJsonSchema"]);o!=null&&S(t,["parametersJsonSchema"],o);const a=b(e,["response"]);a!=null&&S(t,["response"],a);const c=b(e,["responseJsonSchema"]);return c!=null&&S(t,["responseJsonSchema"],c),t}function wU(e,t){const n={},r=b(t,["name"]);return r!=null&&S(n,["_url","name"],Rs(e,r)),n}function EU(e,t){const n={},r=b(t,["name"]);return r!=null&&S(n,["_url","name"],Rs(e,r)),n}function bU(e){const t={};if(b(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function _U(e){const t={};if(b(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function SU(e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=b(e,["pageToken"]);return t!==void 0&&i!=null&&S(t,["_query","pageToken"],i),n}function CU(e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=b(e,["pageToken"]);return t!==void 0&&i!=null&&S(t,["_query","pageToken"],i),n}function AU(e){const t={},n=b(e,["config"]);return n!=null&&SU(n,t),t}function TU(e){const t={},n=b(e,["config"]);return n!=null&&CU(n,t),t}function IU(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=b(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["cachedContents"],o)}return t}function PU(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=b(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["cachedContents"],o)}return t}function NU(e){const t={},n=b(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const r=b(e,["codeExecutionResult"]);r!=null&&S(t,["codeExecutionResult"],r);const i=b(e,["executableCode"]);i!=null&&S(t,["executableCode"],i);const o=b(e,["fileData"]);o!=null&&S(t,["fileData"],gU(o));const a=b(e,["functionCall"]);a!=null&&S(t,["functionCall"],vU(a));const c=b(e,["functionResponse"]);c!=null&&S(t,["functionResponse"],c);const f=b(e,["inlineData"]);f!=null&&S(t,["inlineData"],aU(f));const d=b(e,["text"]);d!=null&&S(t,["text"],d);const m=b(e,["thought"]);m!=null&&S(t,["thought"],m);const v=b(e,["thoughtSignature"]);v!=null&&S(t,["thoughtSignature"],v);const E=b(e,["videoMetadata"]);return E!=null&&S(t,["videoMetadata"],E),t}function RU(e){const t={},n=b(e,["functionCallingConfig"]);n!=null&&S(t,["functionCallingConfig"],yU(n));const r=b(e,["retrievalConfig"]);return r!=null&&S(t,["retrievalConfig"],r),t}function OU(e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>v)),S(t,["functionDeclarations"],m)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearchRetrieval"]);r!=null&&S(t,["googleSearchRetrieval"],r);const i=b(e,["computerUse"]);i!=null&&S(t,["computerUse"],i);const o=b(e,["fileSearch"]);o!=null&&S(t,["fileSearch"],o);const a=b(e,["codeExecution"]);if(a!=null&&S(t,["codeExecution"],a),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=b(e,["googleMaps"]);c!=null&&S(t,["googleMaps"],bU(c));const f=b(e,["googleSearch"]);f!=null&&S(t,["googleSearch"],_U(f));const d=b(e,["urlContext"]);return d!=null&&S(t,["urlContext"],d),t}function kU(e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>xU(E))),S(t,["functionDeclarations"],v)}const r=b(e,["retrieval"]);r!=null&&S(t,["retrieval"],r);const i=b(e,["googleSearchRetrieval"]);i!=null&&S(t,["googleSearchRetrieval"],i);const o=b(e,["computerUse"]);if(o!=null&&S(t,["computerUse"],o),b(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=b(e,["codeExecution"]);a!=null&&S(t,["codeExecution"],a);const c=b(e,["enterpriseWebSearch"]);c!=null&&S(t,["enterpriseWebSearch"],c);const f=b(e,["googleMaps"]);f!=null&&S(t,["googleMaps"],f);const d=b(e,["googleSearch"]);d!=null&&S(t,["googleSearch"],d);const m=b(e,["urlContext"]);return m!=null&&S(t,["urlContext"],m),t}function MU(e,t){const n={},r=b(e,["ttl"]);t!==void 0&&r!=null&&S(t,["ttl"],r);const i=b(e,["expireTime"]);return t!==void 0&&i!=null&&S(t,["expireTime"],i),n}function DU(e,t){const n={},r=b(e,["ttl"]);t!==void 0&&r!=null&&S(t,["ttl"],r);const i=b(e,["expireTime"]);return t!==void 0&&i!=null&&S(t,["expireTime"],i),n}function LU(e,t){const n={},r=b(t,["name"]);r!=null&&S(n,["_url","name"],Rs(e,r));const i=b(t,["config"]);return i!=null&&MU(i,n),n}function BU(e,t){const n={},r=b(t,["name"]);r!=null&&S(n,["_url","name"],Rs(e,r));const i=b(t,["config"]);return i!=null&&DU(i,n),n}class FU extends Ns{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Nl(ws.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=dU(this.apiClient,t);return c=Ue("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>m)}else{const d=cU(this.apiClient,t);return c=Ue("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async get(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=EU(this.apiClient,t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>m)}else{const d=wU(this.apiClient,t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=hU(this.apiClient,t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=mU(m),E=new hC;return Object.assign(E,v),E})}else{const d=fU(this.apiClient,t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=pU(m),E=new hC;return Object.assign(E,v),E})}}async update(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=BU(this.apiClient,t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>m)}else{const d=LU(this.apiClient,t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async listInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=TU(t);return c=Ue("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=PU(m),E=new pC;return Object.assign(E,v),E})}else{const d=AU(t);return c=Ue("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=IU(m),E=new pC;return Object.assign(E,v),E})}}}function O0(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function EC(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(e){return this instanceof gt?(this.v=e,this):new gt(e)}function bo(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(C){return function(I){return Promise.resolve(I).then(C,v)}}function c(C,I){r[C]&&(i[C]=function(P){return new Promise(function(N,D){o.push([C,P,N,D])>1||f(C,P)})},I&&(i[C]=I(i[C])))}function f(C,I){try{d(r[C](I))}catch(P){E(o[0][3],P)}}function d(C){C.value instanceof gt?Promise.resolve(C.value.v).then(m,v):E(o[0][2],C)}function m(C){f("next",C)}function v(C){f("throw",C)}function E(C,I){C(I),o.shift(),o.length&&f(o[0][0],o[0][1])}}function _o(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof EC=="function"?EC(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(c,f){a=e[o](a),i(c,f,a.done,a.value)})}}function i(o,a,c,f){Promise.resolve(f).then(function(d){o({value:d,done:c})},a)}}function UU(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:ZO(n)}function ZO(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function jU(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function bC(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const i=[];let o=!0;for(;r<n&&e[r].role==="model";)i.push(e[r]),o&&!ZO(e[r])&&(o=!1),r++;o?t.push(...i):t.pop()}return t}class VU{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new $U(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class $U{constructor(t,n,r,i={},o=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),jU(o)}async sendMessage(t){var n;await this.sendPromise;const r=$r(t.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,a,c;const f=await i,d=(a=(o=f.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,m=f.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let E=[];m!=null&&(E=(c=m.slice(v))!==null&&c!==void 0?c:[]);const C=d?[d]:[];this.recordHistory(r,C,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(t){var n;await this.sendPromise;const r=$r(t.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(t=!1){const n=t?bC(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return bo(this,arguments,function*(){var i,o,a,c,f,d;const m=[];try{for(var v=!0,E=_o(t),C;C=yield gt(E.next()),i=C.done,!i;v=!0){c=C.value,v=!1;const I=c;if(UU(I)){const P=(d=(f=I.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content;P!==void 0&&m.push(P)}yield yield gt(I)}}catch(I){o={error:I}}finally{try{!v&&!i&&(a=E.return)&&(yield gt(a.call(E)))}finally{if(o)throw o.error}}this.recordHistory(n,m)})}recordHistory(t,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...bC(r)):this.history.push(t),this.history.push(...i)}}class jp extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,jp.prototype)}}function zU(e){const t={},n=b(e,["file"]);return n!=null&&S(t,["file"],n),t}function GU(e){const t={},n=b(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function HU(e){const t={},n=b(e,["name"]);return n!=null&&S(t,["_url","file"],HO(n)),t}function qU(e){const t={},n=b(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function WU(e){const t={},n=b(e,["name"]);return n!=null&&S(t,["_url","file"],HO(n)),t}function KU(e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=b(e,["pageToken"]);return t!==void 0&&i!=null&&S(t,["_query","pageToken"],i),n}function YU(e){const t={},n=b(e,["config"]);return n!=null&&KU(n,t),t}function XU(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=b(e,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["files"],o)}return t}class JU extends Ns{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Nl(ws.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=YU(t);return o=Ue("files",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>{const d=XU(f),m=new t9;return Object.assign(m,d),m})}}async createInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=zU(t);return o=Ue("upload/v1beta/files",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=GU(f),m=new n9;return Object.assign(m,d),m})}}async get(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=WU(t);return o=Ue("files/{file}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=HU(t);return o=Ue("files/{file}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>{const d=qU(f),m=new r9;return Object.assign(m,d),m})}}}function f0(e){const t={},n=b(e,["data"]);if(n!=null&&S(t,["data"],n),b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function ZU(e){const t={},n=b(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>pj(o))),S(t,["parts"],i)}const r=b(e,["role"]);return r!=null&&S(t,["role"],r),t}function QU(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const r=b(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function ej(e){const t={},n=b(e,["id"]);n!=null&&S(t,["id"],n);const r=b(e,["args"]);r!=null&&S(t,["args"],r);const i=b(e,["name"]);if(i!=null&&S(t,["name"],i),b(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(b(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function tj(e){const t={};if(b(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(e,["description"]);n!=null&&S(t,["description"],n);const r=b(e,["name"]);r!=null&&S(t,["name"],r);const i=b(e,["parameters"]);i!=null&&S(t,["parameters"],i);const o=b(e,["parametersJsonSchema"]);o!=null&&S(t,["parametersJsonSchema"],o);const a=b(e,["response"]);a!=null&&S(t,["response"],a);const c=b(e,["responseJsonSchema"]);return c!=null&&S(t,["responseJsonSchema"],c),t}function nj(e){const t={},n=b(e,["modelSelectionConfig"]);n!=null&&S(t,["modelConfig"],n);const r=b(e,["responseJsonSchema"]);r!=null&&S(t,["responseJsonSchema"],r);const i=b(e,["audioTimestamp"]);i!=null&&S(t,["audioTimestamp"],i);const o=b(e,["candidateCount"]);o!=null&&S(t,["candidateCount"],o);const a=b(e,["enableAffectiveDialog"]);a!=null&&S(t,["enableAffectiveDialog"],a);const c=b(e,["frequencyPenalty"]);c!=null&&S(t,["frequencyPenalty"],c);const f=b(e,["logprobs"]);f!=null&&S(t,["logprobs"],f);const d=b(e,["maxOutputTokens"]);d!=null&&S(t,["maxOutputTokens"],d);const m=b(e,["mediaResolution"]);m!=null&&S(t,["mediaResolution"],m);const v=b(e,["presencePenalty"]);v!=null&&S(t,["presencePenalty"],v);const E=b(e,["responseLogprobs"]);E!=null&&S(t,["responseLogprobs"],E);const C=b(e,["responseMimeType"]);C!=null&&S(t,["responseMimeType"],C);const I=b(e,["responseModalities"]);I!=null&&S(t,["responseModalities"],I);const P=b(e,["responseSchema"]);P!=null&&S(t,["responseSchema"],P);const N=b(e,["routingConfig"]);N!=null&&S(t,["routingConfig"],N);const D=b(e,["seed"]);D!=null&&S(t,["seed"],D);const F=b(e,["speechConfig"]);F!=null&&S(t,["speechConfig"],QO(F));const L=b(e,["stopSequences"]);L!=null&&S(t,["stopSequences"],L);const V=b(e,["temperature"]);V!=null&&S(t,["temperature"],V);const G=b(e,["thinkingConfig"]);G!=null&&S(t,["thinkingConfig"],G);const q=b(e,["topK"]);q!=null&&S(t,["topK"],q);const W=b(e,["topP"]);if(W!=null&&S(t,["topP"],W),b(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function rj(e){const t={};if(b(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function ij(e){const t={};if(b(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function oj(e,t){const n={},r=b(e,["generationConfig"]);t!==void 0&&r!=null&&S(t,["setup","generationConfig"],r);const i=b(e,["responseModalities"]);t!==void 0&&i!=null&&S(t,["setup","generationConfig","responseModalities"],i);const o=b(e,["temperature"]);t!==void 0&&o!=null&&S(t,["setup","generationConfig","temperature"],o);const a=b(e,["topP"]);t!==void 0&&a!=null&&S(t,["setup","generationConfig","topP"],a);const c=b(e,["topK"]);t!==void 0&&c!=null&&S(t,["setup","generationConfig","topK"],c);const f=b(e,["maxOutputTokens"]);t!==void 0&&f!=null&&S(t,["setup","generationConfig","maxOutputTokens"],f);const d=b(e,["mediaResolution"]);t!==void 0&&d!=null&&S(t,["setup","generationConfig","mediaResolution"],d);const m=b(e,["seed"]);t!==void 0&&m!=null&&S(t,["setup","generationConfig","seed"],m);const v=b(e,["speechConfig"]);t!==void 0&&v!=null&&S(t,["setup","generationConfig","speechConfig"],Sw(v));const E=b(e,["thinkingConfig"]);t!==void 0&&E!=null&&S(t,["setup","generationConfig","thinkingConfig"],E);const C=b(e,["enableAffectiveDialog"]);t!==void 0&&C!=null&&S(t,["setup","generationConfig","enableAffectiveDialog"],C);const I=b(e,["systemInstruction"]);t!==void 0&&I!=null&&S(t,["setup","systemInstruction"],ZU($r(I)));const P=b(e,["tools"]);if(t!==void 0&&P!=null){let q=Zu(P);Array.isArray(q)&&(q=q.map(W=>gj(Ju(W)))),S(t,["setup","tools"],q)}const N=b(e,["sessionResumption"]);t!==void 0&&N!=null&&S(t,["setup","sessionResumption"],mj(N));const D=b(e,["inputAudioTranscription"]);t!==void 0&&D!=null&&S(t,["setup","inputAudioTranscription"],D);const F=b(e,["outputAudioTranscription"]);t!==void 0&&F!=null&&S(t,["setup","outputAudioTranscription"],F);const L=b(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&S(t,["setup","realtimeInputConfig"],L);const V=b(e,["contextWindowCompression"]);t!==void 0&&V!=null&&S(t,["setup","contextWindowCompression"],V);const G=b(e,["proactivity"]);if(t!==void 0&&G!=null&&S(t,["setup","proactivity"],G),b(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function sj(e,t){const n={},r=b(e,["generationConfig"]);t!==void 0&&r!=null&&S(t,["setup","generationConfig"],nj(r));const i=b(e,["responseModalities"]);t!==void 0&&i!=null&&S(t,["setup","generationConfig","responseModalities"],i);const o=b(e,["temperature"]);t!==void 0&&o!=null&&S(t,["setup","generationConfig","temperature"],o);const a=b(e,["topP"]);t!==void 0&&a!=null&&S(t,["setup","generationConfig","topP"],a);const c=b(e,["topK"]);t!==void 0&&c!=null&&S(t,["setup","generationConfig","topK"],c);const f=b(e,["maxOutputTokens"]);t!==void 0&&f!=null&&S(t,["setup","generationConfig","maxOutputTokens"],f);const d=b(e,["mediaResolution"]);t!==void 0&&d!=null&&S(t,["setup","generationConfig","mediaResolution"],d);const m=b(e,["seed"]);t!==void 0&&m!=null&&S(t,["setup","generationConfig","seed"],m);const v=b(e,["speechConfig"]);t!==void 0&&v!=null&&S(t,["setup","generationConfig","speechConfig"],QO(Sw(v)));const E=b(e,["thinkingConfig"]);t!==void 0&&E!=null&&S(t,["setup","generationConfig","thinkingConfig"],E);const C=b(e,["enableAffectiveDialog"]);t!==void 0&&C!=null&&S(t,["setup","generationConfig","enableAffectiveDialog"],C);const I=b(e,["systemInstruction"]);t!==void 0&&I!=null&&S(t,["setup","systemInstruction"],$r(I));const P=b(e,["tools"]);if(t!==void 0&&P!=null){let W=Zu(P);Array.isArray(W)&&(W=W.map(Z=>vj(Ju(Z)))),S(t,["setup","tools"],W)}const N=b(e,["sessionResumption"]);t!==void 0&&N!=null&&S(t,["setup","sessionResumption"],N);const D=b(e,["inputAudioTranscription"]);t!==void 0&&D!=null&&S(t,["setup","inputAudioTranscription"],D);const F=b(e,["outputAudioTranscription"]);t!==void 0&&F!=null&&S(t,["setup","outputAudioTranscription"],F);const L=b(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&S(t,["setup","realtimeInputConfig"],L);const V=b(e,["contextWindowCompression"]);t!==void 0&&V!=null&&S(t,["setup","contextWindowCompression"],V);const G=b(e,["proactivity"]);t!==void 0&&G!=null&&S(t,["setup","proactivity"],G);const q=b(e,["explicitVadSignal"]);return t!==void 0&&q!=null&&S(t,["setup","explicitVadSignal"],q),n}function aj(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["setup","model"],kt(e,r));const i=b(t,["config"]);return i!=null&&S(n,["config"],oj(i,n)),n}function lj(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["setup","model"],kt(e,r));const i=b(t,["config"]);return i!=null&&S(n,["config"],sj(i,n)),n}function uj(e){const t={},n=b(e,["musicGenerationConfig"]);return n!=null&&S(t,["musicGenerationConfig"],n),t}function cj(e){const t={},n=b(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),S(t,["weightedPrompts"],r)}return t}function dj(e){const t={},n=b(e,["media"]);if(n!=null){let d=jO(n);Array.isArray(d)&&(d=d.map(m=>f0(m))),S(t,["mediaChunks"],d)}const r=b(e,["audio"]);r!=null&&S(t,["audio"],f0($O(r)));const i=b(e,["audioStreamEnd"]);i!=null&&S(t,["audioStreamEnd"],i);const o=b(e,["video"]);o!=null&&S(t,["video"],f0(VO(o)));const a=b(e,["text"]);a!=null&&S(t,["text"],a);const c=b(e,["activityStart"]);c!=null&&S(t,["activityStart"],c);const f=b(e,["activityEnd"]);return f!=null&&S(t,["activityEnd"],f),t}function fj(e){const t={},n=b(e,["media"]);if(n!=null){let d=jO(n);Array.isArray(d)&&(d=d.map(m=>m)),S(t,["mediaChunks"],d)}const r=b(e,["audio"]);r!=null&&S(t,["audio"],$O(r));const i=b(e,["audioStreamEnd"]);i!=null&&S(t,["audioStreamEnd"],i);const o=b(e,["video"]);o!=null&&S(t,["video"],VO(o));const a=b(e,["text"]);a!=null&&S(t,["text"],a);const c=b(e,["activityStart"]);c!=null&&S(t,["activityStart"],c);const f=b(e,["activityEnd"]);return f!=null&&S(t,["activityEnd"],f),t}function hj(e){const t={},n=b(e,["setupComplete"]);n!=null&&S(t,["setupComplete"],n);const r=b(e,["serverContent"]);r!=null&&S(t,["serverContent"],r);const i=b(e,["toolCall"]);i!=null&&S(t,["toolCall"],i);const o=b(e,["toolCallCancellation"]);o!=null&&S(t,["toolCallCancellation"],o);const a=b(e,["usageMetadata"]);a!=null&&S(t,["usageMetadata"],yj(a));const c=b(e,["goAway"]);c!=null&&S(t,["goAway"],c);const f=b(e,["sessionResumptionUpdate"]);f!=null&&S(t,["sessionResumptionUpdate"],f);const d=b(e,["voiceActivityDetectionSignal"]);return d!=null&&S(t,["voiceActivityDetectionSignal"],d),t}function pj(e){const t={},n=b(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const r=b(e,["codeExecutionResult"]);r!=null&&S(t,["codeExecutionResult"],r);const i=b(e,["executableCode"]);i!=null&&S(t,["executableCode"],i);const o=b(e,["fileData"]);o!=null&&S(t,["fileData"],QU(o));const a=b(e,["functionCall"]);a!=null&&S(t,["functionCall"],ej(a));const c=b(e,["functionResponse"]);c!=null&&S(t,["functionResponse"],c);const f=b(e,["inlineData"]);f!=null&&S(t,["inlineData"],f0(f));const d=b(e,["text"]);d!=null&&S(t,["text"],d);const m=b(e,["thought"]);m!=null&&S(t,["thought"],m);const v=b(e,["thoughtSignature"]);v!=null&&S(t,["thoughtSignature"],v);const E=b(e,["videoMetadata"]);return E!=null&&S(t,["videoMetadata"],E),t}function mj(e){const t={},n=b(e,["handle"]);if(n!=null&&S(t,["handle"],n),b(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function QO(e){const t={},n=b(e,["voiceConfig"]);n!=null&&S(t,["voiceConfig"],n);const r=b(e,["languageCode"]);if(r!=null&&S(t,["languageCode"],r),b(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function gj(e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>v)),S(t,["functionDeclarations"],m)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearchRetrieval"]);r!=null&&S(t,["googleSearchRetrieval"],r);const i=b(e,["computerUse"]);i!=null&&S(t,["computerUse"],i);const o=b(e,["fileSearch"]);o!=null&&S(t,["fileSearch"],o);const a=b(e,["codeExecution"]);if(a!=null&&S(t,["codeExecution"],a),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=b(e,["googleMaps"]);c!=null&&S(t,["googleMaps"],rj(c));const f=b(e,["googleSearch"]);f!=null&&S(t,["googleSearch"],ij(f));const d=b(e,["urlContext"]);return d!=null&&S(t,["urlContext"],d),t}function vj(e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>tj(E))),S(t,["functionDeclarations"],v)}const r=b(e,["retrieval"]);r!=null&&S(t,["retrieval"],r);const i=b(e,["googleSearchRetrieval"]);i!=null&&S(t,["googleSearchRetrieval"],i);const o=b(e,["computerUse"]);if(o!=null&&S(t,["computerUse"],o),b(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=b(e,["codeExecution"]);a!=null&&S(t,["codeExecution"],a);const c=b(e,["enterpriseWebSearch"]);c!=null&&S(t,["enterpriseWebSearch"],c);const f=b(e,["googleMaps"]);f!=null&&S(t,["googleMaps"],f);const d=b(e,["googleSearch"]);d!=null&&S(t,["googleSearch"],d);const m=b(e,["urlContext"]);return m!=null&&S(t,["urlContext"],m),t}function yj(e){const t={},n=b(e,["promptTokenCount"]);n!=null&&S(t,["promptTokenCount"],n);const r=b(e,["cachedContentTokenCount"]);r!=null&&S(t,["cachedContentTokenCount"],r);const i=b(e,["candidatesTokenCount"]);i!=null&&S(t,["responseTokenCount"],i);const o=b(e,["toolUsePromptTokenCount"]);o!=null&&S(t,["toolUsePromptTokenCount"],o);const a=b(e,["thoughtsTokenCount"]);a!=null&&S(t,["thoughtsTokenCount"],a);const c=b(e,["totalTokenCount"]);c!=null&&S(t,["totalTokenCount"],c);const f=b(e,["promptTokensDetails"]);if(f!=null){let C=f;Array.isArray(C)&&(C=C.map(I=>I)),S(t,["promptTokensDetails"],C)}const d=b(e,["cacheTokensDetails"]);if(d!=null){let C=d;Array.isArray(C)&&(C=C.map(I=>I)),S(t,["cacheTokensDetails"],C)}const m=b(e,["candidatesTokensDetails"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(I=>I)),S(t,["responseTokensDetails"],C)}const v=b(e,["toolUsePromptTokensDetails"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(I=>I)),S(t,["toolUsePromptTokensDetails"],C)}const E=b(e,["trafficType"]);return E!=null&&S(t,["trafficType"],E),t}function xj(e){const t={},n=b(e,["data"]);if(n!=null&&S(t,["data"],n),b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function wj(e){const t={},n=b(e,["content"]);n!=null&&S(t,["content"],n);const r=b(e,["citationMetadata"]);r!=null&&S(t,["citationMetadata"],Ej(r));const i=b(e,["tokenCount"]);i!=null&&S(t,["tokenCount"],i);const o=b(e,["finishReason"]);o!=null&&S(t,["finishReason"],o);const a=b(e,["avgLogprobs"]);a!=null&&S(t,["avgLogprobs"],a);const c=b(e,["groundingMetadata"]);c!=null&&S(t,["groundingMetadata"],c);const f=b(e,["index"]);f!=null&&S(t,["index"],f);const d=b(e,["logprobsResult"]);d!=null&&S(t,["logprobsResult"],d);const m=b(e,["safetyRatings"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(C=>C)),S(t,["safetyRatings"],E)}const v=b(e,["urlContextMetadata"]);return v!=null&&S(t,["urlContextMetadata"],v),t}function Ej(e){const t={},n=b(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),S(t,["citations"],r)}return t}function bj(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["contents"]);if(i!=null){let o=Zi(i);Array.isArray(o)&&(o=o.map(a=>a)),S(n,["contents"],o)}return n}function _j(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),S(t,["tokensInfo"],i)}return t}function Sj(e){const t={},n=b(e,["values"]);n!=null&&S(t,["values"],n);const r=b(e,["statistics"]);return r!=null&&S(t,["statistics"],Cj(r)),t}function Cj(e){const t={},n=b(e,["truncated"]);n!=null&&S(t,["truncated"],n);const r=b(e,["token_count"]);return r!=null&&S(t,["tokenCount"],r),t}function Vp(e){const t={},n=b(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>MV(o))),S(t,["parts"],i)}const r=b(e,["role"]);return r!=null&&S(t,["role"],r),t}function Aj(e){const t={},n=b(e,["controlType"]);n!=null&&S(t,["controlType"],n);const r=b(e,["enableControlImageComputation"]);return r!=null&&S(t,["computeControl"],r),t}function Tj(e){const t={};if(b(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(b(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(b(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Ij(e,t){const n={},r=b(e,["systemInstruction"]);t!==void 0&&r!=null&&S(t,["systemInstruction"],$r(r));const i=b(e,["tools"]);if(t!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>i3(c))),S(t,["tools"],a)}const o=b(e,["generationConfig"]);return t!==void 0&&o!=null&&S(t,["generationConfig"],xV(o)),n}function Pj(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["contents"]);if(i!=null){let a=Zi(i);Array.isArray(a)&&(a=a.map(c=>Vp(c))),S(n,["contents"],a)}const o=b(t,["config"]);return o!=null&&Tj(o),n}function Nj(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["contents"]);if(i!=null){let a=Zi(i);Array.isArray(a)&&(a=a.map(c=>c)),S(n,["contents"],a)}const o=b(t,["config"]);return o!=null&&Ij(o,n),n}function Rj(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["totalTokens"]);r!=null&&S(t,["totalTokens"],r);const i=b(e,["cachedContentTokenCount"]);return i!=null&&S(t,["cachedContentTokenCount"],i),t}function Oj(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["totalTokens"]);return r!=null&&S(t,["totalTokens"],r),t}function kj(e,t){const n={},r=b(t,["model"]);return r!=null&&S(n,["_url","name"],kt(e,r)),n}function Mj(e,t){const n={},r=b(t,["model"]);return r!=null&&S(n,["_url","name"],kt(e,r)),n}function Dj(e){const t={},n=b(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function Lj(e){const t={},n=b(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function Bj(e,t){const n={},r=b(e,["outputGcsUri"]);t!==void 0&&r!=null&&S(t,["parameters","storageUri"],r);const i=b(e,["negativePrompt"]);t!==void 0&&i!=null&&S(t,["parameters","negativePrompt"],i);const o=b(e,["numberOfImages"]);t!==void 0&&o!=null&&S(t,["parameters","sampleCount"],o);const a=b(e,["aspectRatio"]);t!==void 0&&a!=null&&S(t,["parameters","aspectRatio"],a);const c=b(e,["guidanceScale"]);t!==void 0&&c!=null&&S(t,["parameters","guidanceScale"],c);const f=b(e,["seed"]);t!==void 0&&f!=null&&S(t,["parameters","seed"],f);const d=b(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&S(t,["parameters","safetySetting"],d);const m=b(e,["personGeneration"]);t!==void 0&&m!=null&&S(t,["parameters","personGeneration"],m);const v=b(e,["includeSafetyAttributes"]);t!==void 0&&v!=null&&S(t,["parameters","includeSafetyAttributes"],v);const E=b(e,["includeRaiReason"]);t!==void 0&&E!=null&&S(t,["parameters","includeRaiReason"],E);const C=b(e,["language"]);t!==void 0&&C!=null&&S(t,["parameters","language"],C);const I=b(e,["outputMimeType"]);t!==void 0&&I!=null&&S(t,["parameters","outputOptions","mimeType"],I);const P=b(e,["outputCompressionQuality"]);t!==void 0&&P!=null&&S(t,["parameters","outputOptions","compressionQuality"],P);const N=b(e,["addWatermark"]);t!==void 0&&N!=null&&S(t,["parameters","addWatermark"],N);const D=b(e,["labels"]);t!==void 0&&D!=null&&S(t,["labels"],D);const F=b(e,["editMode"]);t!==void 0&&F!=null&&S(t,["parameters","editMode"],F);const L=b(e,["baseSteps"]);return t!==void 0&&L!=null&&S(t,["parameters","editConfig","baseSteps"],L),n}function Fj(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const o=b(t,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>jV(f))),S(n,["instances[0]","referenceImages"],c)}const a=b(t,["config"]);return a!=null&&Bj(a,n),n}function Uj(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>$p(o))),S(t,["generatedImages"],i)}return t}function jj(e,t){const n={},r=b(e,["taskType"]);t!==void 0&&r!=null&&S(t,["requests[]","taskType"],r);const i=b(e,["title"]);t!==void 0&&i!=null&&S(t,["requests[]","title"],i);const o=b(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&S(t,["requests[]","outputDimensionality"],o),b(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(b(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Vj(e,t){const n={},r=b(e,["taskType"]);t!==void 0&&r!=null&&S(t,["instances[]","task_type"],r);const i=b(e,["title"]);t!==void 0&&i!=null&&S(t,["instances[]","title"],i);const o=b(e,["outputDimensionality"]);t!==void 0&&o!=null&&S(t,["parameters","outputDimensionality"],o);const a=b(e,["mimeType"]);t!==void 0&&a!=null&&S(t,["instances[]","mimeType"],a);const c=b(e,["autoTruncate"]);return t!==void 0&&c!=null&&S(t,["parameters","autoTruncate"],c),n}function $j(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["contents"]);if(i!=null){let c=Ew(e,i);Array.isArray(c)&&(c=c.map(f=>f)),S(n,["requests[]","content"],c)}const o=b(t,["config"]);o!=null&&jj(o,n);const a=b(t,["model"]);return a!==void 0&&S(n,["requests[]","model"],kt(e,a)),n}function zj(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["contents"]);if(i!=null){let a=Ew(e,i);Array.isArray(a)&&(a=a.map(c=>c)),S(n,["instances[]","content"],a)}const o=b(t,["config"]);return o!=null&&Vj(o,n),n}function Gj(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["embeddings"],o)}const i=b(e,["metadata"]);return i!=null&&S(t,["metadata"],i),t}function Hj(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Sj(a))),S(t,["embeddings"],o)}const i=b(e,["metadata"]);return i!=null&&S(t,["metadata"],i),t}function qj(e){const t={},n=b(e,["endpoint"]);n!=null&&S(t,["name"],n);const r=b(e,["deployedModelId"]);return r!=null&&S(t,["deployedModelId"],r),t}function Wj(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const r=b(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function Kj(e){const t={},n=b(e,["id"]);n!=null&&S(t,["id"],n);const r=b(e,["args"]);r!=null&&S(t,["args"],r);const i=b(e,["name"]);if(i!=null&&S(t,["name"],i),b(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(b(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Yj(e){const t={},n=b(e,["mode"]);n!=null&&S(t,["mode"],n);const r=b(e,["allowedFunctionNames"]);if(r!=null&&S(t,["allowedFunctionNames"],r),b(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Xj(e){const t={};if(b(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(e,["description"]);n!=null&&S(t,["description"],n);const r=b(e,["name"]);r!=null&&S(t,["name"],r);const i=b(e,["parameters"]);i!=null&&S(t,["parameters"],i);const o=b(e,["parametersJsonSchema"]);o!=null&&S(t,["parametersJsonSchema"],o);const a=b(e,["response"]);a!=null&&S(t,["response"],a);const c=b(e,["responseJsonSchema"]);return c!=null&&S(t,["responseJsonSchema"],c),t}function Jj(e,t,n){const r={},i=b(t,["systemInstruction"]);n!==void 0&&i!=null&&S(n,["systemInstruction"],Vp($r(i)));const o=b(t,["temperature"]);o!=null&&S(r,["temperature"],o);const a=b(t,["topP"]);a!=null&&S(r,["topP"],a);const c=b(t,["topK"]);c!=null&&S(r,["topK"],c);const f=b(t,["candidateCount"]);f!=null&&S(r,["candidateCount"],f);const d=b(t,["maxOutputTokens"]);d!=null&&S(r,["maxOutputTokens"],d);const m=b(t,["stopSequences"]);m!=null&&S(r,["stopSequences"],m);const v=b(t,["responseLogprobs"]);v!=null&&S(r,["responseLogprobs"],v);const E=b(t,["logprobs"]);E!=null&&S(r,["logprobs"],E);const C=b(t,["presencePenalty"]);C!=null&&S(r,["presencePenalty"],C);const I=b(t,["frequencyPenalty"]);I!=null&&S(r,["frequencyPenalty"],I);const P=b(t,["seed"]);P!=null&&S(r,["seed"],P);const N=b(t,["responseMimeType"]);N!=null&&S(r,["responseMimeType"],N);const D=b(t,["responseSchema"]);D!=null&&S(r,["responseSchema"],bw(D));const F=b(t,["responseJsonSchema"]);if(F!=null&&S(r,["responseJsonSchema"],F),b(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=b(t,["safetySettings"]);if(n!==void 0&&L!=null){let be=L;Array.isArray(be)&&(be=be.map(he=>VV(he))),S(n,["safetySettings"],be)}const V=b(t,["tools"]);if(n!==void 0&&V!=null){let be=Zu(V);Array.isArray(be)&&(be=be.map(he=>KV(Ju(he)))),S(n,["tools"],be)}const G=b(t,["toolConfig"]);if(n!==void 0&&G!=null&&S(n,["toolConfig"],WV(G)),b(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=b(t,["cachedContent"]);n!==void 0&&q!=null&&S(n,["cachedContent"],Rs(e,q));const W=b(t,["responseModalities"]);W!=null&&S(r,["responseModalities"],W);const Z=b(t,["mediaResolution"]);Z!=null&&S(r,["mediaResolution"],Z);const X=b(t,["speechConfig"]);if(X!=null&&S(r,["speechConfig"],_w(X)),b(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const fe=b(t,["thinkingConfig"]);fe!=null&&S(r,["thinkingConfig"],fe);const se=b(t,["imageConfig"]);se!=null&&S(r,["imageConfig"],SV(se));const ae=b(t,["enableEnhancedCivicAnswers"]);return ae!=null&&S(r,["enableEnhancedCivicAnswers"],ae),r}function Zj(e,t,n){const r={},i=b(t,["systemInstruction"]);n!==void 0&&i!=null&&S(n,["systemInstruction"],$r(i));const o=b(t,["temperature"]);o!=null&&S(r,["temperature"],o);const a=b(t,["topP"]);a!=null&&S(r,["topP"],a);const c=b(t,["topK"]);c!=null&&S(r,["topK"],c);const f=b(t,["candidateCount"]);f!=null&&S(r,["candidateCount"],f);const d=b(t,["maxOutputTokens"]);d!=null&&S(r,["maxOutputTokens"],d);const m=b(t,["stopSequences"]);m!=null&&S(r,["stopSequences"],m);const v=b(t,["responseLogprobs"]);v!=null&&S(r,["responseLogprobs"],v);const E=b(t,["logprobs"]);E!=null&&S(r,["logprobs"],E);const C=b(t,["presencePenalty"]);C!=null&&S(r,["presencePenalty"],C);const I=b(t,["frequencyPenalty"]);I!=null&&S(r,["frequencyPenalty"],I);const P=b(t,["seed"]);P!=null&&S(r,["seed"],P);const N=b(t,["responseMimeType"]);N!=null&&S(r,["responseMimeType"],N);const D=b(t,["responseSchema"]);D!=null&&S(r,["responseSchema"],bw(D));const F=b(t,["responseJsonSchema"]);F!=null&&S(r,["responseJsonSchema"],F);const L=b(t,["routingConfig"]);L!=null&&S(r,["routingConfig"],L);const V=b(t,["modelSelectionConfig"]);V!=null&&S(r,["modelConfig"],V);const G=b(t,["safetySettings"]);if(n!==void 0&&G!=null){let we=G;Array.isArray(we)&&(we=we.map(ve=>ve)),S(n,["safetySettings"],we)}const q=b(t,["tools"]);if(n!==void 0&&q!=null){let we=Zu(q);Array.isArray(we)&&(we=we.map(ve=>i3(Ju(ve)))),S(n,["tools"],we)}const W=b(t,["toolConfig"]);n!==void 0&&W!=null&&S(n,["toolConfig"],W);const Z=b(t,["labels"]);n!==void 0&&Z!=null&&S(n,["labels"],Z);const X=b(t,["cachedContent"]);n!==void 0&&X!=null&&S(n,["cachedContent"],Rs(e,X));const fe=b(t,["responseModalities"]);fe!=null&&S(r,["responseModalities"],fe);const se=b(t,["mediaResolution"]);se!=null&&S(r,["mediaResolution"],se);const ae=b(t,["speechConfig"]);ae!=null&&S(r,["speechConfig"],r3(_w(ae)));const be=b(t,["audioTimestamp"]);be!=null&&S(r,["audioTimestamp"],be);const he=b(t,["thinkingConfig"]);he!=null&&S(r,["thinkingConfig"],he);const ne=b(t,["imageConfig"]);if(ne!=null&&S(r,["imageConfig"],CV(ne)),b(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function _C(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["contents"]);if(i!=null){let a=Zi(i);Array.isArray(a)&&(a=a.map(c=>Vp(c))),S(n,["contents"],a)}const o=b(t,["config"]);return o!=null&&S(n,["generationConfig"],Jj(e,o,n)),n}function SC(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["contents"]);if(i!=null){let a=Zi(i);Array.isArray(a)&&(a=a.map(c=>c)),S(n,["contents"],a)}const o=b(t,["config"]);return o!=null&&S(n,["generationConfig"],Zj(e,o,n)),n}function CC(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>wj(d))),S(t,["candidates"],f)}const i=b(e,["modelVersion"]);i!=null&&S(t,["modelVersion"],i);const o=b(e,["promptFeedback"]);o!=null&&S(t,["promptFeedback"],o);const a=b(e,["responseId"]);a!=null&&S(t,["responseId"],a);const c=b(e,["usageMetadata"]);return c!=null&&S(t,["usageMetadata"],c),t}function AC(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(m=>m)),S(t,["candidates"],d)}const i=b(e,["createTime"]);i!=null&&S(t,["createTime"],i);const o=b(e,["modelVersion"]);o!=null&&S(t,["modelVersion"],o);const a=b(e,["promptFeedback"]);a!=null&&S(t,["promptFeedback"],a);const c=b(e,["responseId"]);c!=null&&S(t,["responseId"],c);const f=b(e,["usageMetadata"]);return f!=null&&S(t,["usageMetadata"],f),t}function Qj(e,t){const n={};if(b(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=b(e,["numberOfImages"]);t!==void 0&&r!=null&&S(t,["parameters","sampleCount"],r);const i=b(e,["aspectRatio"]);t!==void 0&&i!=null&&S(t,["parameters","aspectRatio"],i);const o=b(e,["guidanceScale"]);if(t!==void 0&&o!=null&&S(t,["parameters","guidanceScale"],o),b(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=b(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&S(t,["parameters","safetySetting"],a);const c=b(e,["personGeneration"]);t!==void 0&&c!=null&&S(t,["parameters","personGeneration"],c);const f=b(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&S(t,["parameters","includeSafetyAttributes"],f);const d=b(e,["includeRaiReason"]);t!==void 0&&d!=null&&S(t,["parameters","includeRaiReason"],d);const m=b(e,["language"]);t!==void 0&&m!=null&&S(t,["parameters","language"],m);const v=b(e,["outputMimeType"]);t!==void 0&&v!=null&&S(t,["parameters","outputOptions","mimeType"],v);const E=b(e,["outputCompressionQuality"]);if(t!==void 0&&E!=null&&S(t,["parameters","outputOptions","compressionQuality"],E),b(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(b(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=b(e,["imageSize"]);if(t!==void 0&&C!=null&&S(t,["parameters","sampleImageSize"],C),b(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function eV(e,t){const n={},r=b(e,["outputGcsUri"]);t!==void 0&&r!=null&&S(t,["parameters","storageUri"],r);const i=b(e,["negativePrompt"]);t!==void 0&&i!=null&&S(t,["parameters","negativePrompt"],i);const o=b(e,["numberOfImages"]);t!==void 0&&o!=null&&S(t,["parameters","sampleCount"],o);const a=b(e,["aspectRatio"]);t!==void 0&&a!=null&&S(t,["parameters","aspectRatio"],a);const c=b(e,["guidanceScale"]);t!==void 0&&c!=null&&S(t,["parameters","guidanceScale"],c);const f=b(e,["seed"]);t!==void 0&&f!=null&&S(t,["parameters","seed"],f);const d=b(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&S(t,["parameters","safetySetting"],d);const m=b(e,["personGeneration"]);t!==void 0&&m!=null&&S(t,["parameters","personGeneration"],m);const v=b(e,["includeSafetyAttributes"]);t!==void 0&&v!=null&&S(t,["parameters","includeSafetyAttributes"],v);const E=b(e,["includeRaiReason"]);t!==void 0&&E!=null&&S(t,["parameters","includeRaiReason"],E);const C=b(e,["language"]);t!==void 0&&C!=null&&S(t,["parameters","language"],C);const I=b(e,["outputMimeType"]);t!==void 0&&I!=null&&S(t,["parameters","outputOptions","mimeType"],I);const P=b(e,["outputCompressionQuality"]);t!==void 0&&P!=null&&S(t,["parameters","outputOptions","compressionQuality"],P);const N=b(e,["addWatermark"]);t!==void 0&&N!=null&&S(t,["parameters","addWatermark"],N);const D=b(e,["labels"]);t!==void 0&&D!=null&&S(t,["labels"],D);const F=b(e,["imageSize"]);t!==void 0&&F!=null&&S(t,["parameters","sampleImageSize"],F);const L=b(e,["enhancePrompt"]);return t!==void 0&&L!=null&&S(t,["parameters","enhancePrompt"],L),n}function tV(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const o=b(t,["config"]);return o!=null&&Qj(o,n),n}function nV(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const o=b(t,["config"]);return o!=null&&eV(o,n),n}function rV(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>mV(a))),S(t,["generatedImages"],o)}const i=b(e,["positivePromptSafetyAttributes"]);return i!=null&&S(t,["positivePromptSafetyAttributes"],t3(i)),t}function iV(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>$p(a))),S(t,["generatedImages"],o)}const i=b(e,["positivePromptSafetyAttributes"]);return i!=null&&S(t,["positivePromptSafetyAttributes"],n3(i)),t}function oV(e,t){const n={},r=b(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&S(t,["parameters","sampleCount"],r),b(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=b(e,["durationSeconds"]);if(t!==void 0&&i!=null&&S(t,["parameters","durationSeconds"],i),b(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=b(e,["aspectRatio"]);t!==void 0&&o!=null&&S(t,["parameters","aspectRatio"],o);const a=b(e,["resolution"]);t!==void 0&&a!=null&&S(t,["parameters","resolution"],a);const c=b(e,["personGeneration"]);if(t!==void 0&&c!=null&&S(t,["parameters","personGeneration"],c),b(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=b(e,["negativePrompt"]);t!==void 0&&f!=null&&S(t,["parameters","negativePrompt"],f);const d=b(e,["enhancePrompt"]);if(t!==void 0&&d!=null&&S(t,["parameters","enhancePrompt"],d),b(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=b(e,["lastFrame"]);t!==void 0&&m!=null&&S(t,["instances[0]","lastFrame"],zp(m));const v=b(e,["referenceImages"]);if(t!==void 0&&v!=null){let E=v;Array.isArray(E)&&(E=E.map(C=>a$(C))),S(t,["instances[0]","referenceImages"],E)}if(b(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(b(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function sV(e,t){const n={},r=b(e,["numberOfVideos"]);t!==void 0&&r!=null&&S(t,["parameters","sampleCount"],r);const i=b(e,["outputGcsUri"]);t!==void 0&&i!=null&&S(t,["parameters","storageUri"],i);const o=b(e,["fps"]);t!==void 0&&o!=null&&S(t,["parameters","fps"],o);const a=b(e,["durationSeconds"]);t!==void 0&&a!=null&&S(t,["parameters","durationSeconds"],a);const c=b(e,["seed"]);t!==void 0&&c!=null&&S(t,["parameters","seed"],c);const f=b(e,["aspectRatio"]);t!==void 0&&f!=null&&S(t,["parameters","aspectRatio"],f);const d=b(e,["resolution"]);t!==void 0&&d!=null&&S(t,["parameters","resolution"],d);const m=b(e,["personGeneration"]);t!==void 0&&m!=null&&S(t,["parameters","personGeneration"],m);const v=b(e,["pubsubTopic"]);t!==void 0&&v!=null&&S(t,["parameters","pubsubTopic"],v);const E=b(e,["negativePrompt"]);t!==void 0&&E!=null&&S(t,["parameters","negativePrompt"],E);const C=b(e,["enhancePrompt"]);t!==void 0&&C!=null&&S(t,["parameters","enhancePrompt"],C);const I=b(e,["generateAudio"]);t!==void 0&&I!=null&&S(t,["parameters","generateAudio"],I);const P=b(e,["lastFrame"]);t!==void 0&&P!=null&&S(t,["instances[0]","lastFrame"],To(P));const N=b(e,["referenceImages"]);if(t!==void 0&&N!=null){let L=N;Array.isArray(L)&&(L=L.map(V=>l$(V))),S(t,["instances[0]","referenceImages"],L)}const D=b(e,["mask"]);t!==void 0&&D!=null&&S(t,["instances[0]","mask"],s$(D));const F=b(e,["compressionQuality"]);return t!==void 0&&F!=null&&S(t,["parameters","compressionQuality"],F),n}function aV(e){const t={},n=b(e,["name"]);n!=null&&S(t,["name"],n);const r=b(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=b(e,["done"]);i!=null&&S(t,["done"],i);const o=b(e,["error"]);o!=null&&S(t,["error"],o);const a=b(e,["response","generateVideoResponse"]);return a!=null&&S(t,["response"],dV(a)),t}function lV(e){const t={},n=b(e,["name"]);n!=null&&S(t,["name"],n);const r=b(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=b(e,["done"]);i!=null&&S(t,["done"],i);const o=b(e,["error"]);o!=null&&S(t,["error"],o);const a=b(e,["response"]);return a!=null&&S(t,["response"],fV(a)),t}function uV(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const o=b(t,["image"]);o!=null&&S(n,["instances[0]","image"],zp(o));const a=b(t,["video"]);a!=null&&S(n,["instances[0]","video"],o3(a));const c=b(t,["source"]);c!=null&&hV(c,n);const f=b(t,["config"]);return f!=null&&oV(f,n),n}function cV(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const o=b(t,["image"]);o!=null&&S(n,["instances[0]","image"],To(o));const a=b(t,["video"]);a!=null&&S(n,["instances[0]","video"],s3(a));const c=b(t,["source"]);c!=null&&pV(c,n);const f=b(t,["config"]);return f!=null&&sV(f,n),n}function dV(e){const t={},n=b(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>vV(a))),S(t,["generatedVideos"],o)}const r=b(e,["raiMediaFilteredCount"]);r!=null&&S(t,["raiMediaFilteredCount"],r);const i=b(e,["raiMediaFilteredReasons"]);return i!=null&&S(t,["raiMediaFilteredReasons"],i),t}function fV(e){const t={},n=b(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>yV(a))),S(t,["generatedVideos"],o)}const r=b(e,["raiMediaFilteredCount"]);r!=null&&S(t,["raiMediaFilteredCount"],r);const i=b(e,["raiMediaFilteredReasons"]);return i!=null&&S(t,["raiMediaFilteredReasons"],i),t}function hV(e,t){const n={},r=b(e,["prompt"]);t!==void 0&&r!=null&&S(t,["instances[0]","prompt"],r);const i=b(e,["image"]);t!==void 0&&i!=null&&S(t,["instances[0]","image"],zp(i));const o=b(e,["video"]);return t!==void 0&&o!=null&&S(t,["instances[0]","video"],o3(o)),n}function pV(e,t){const n={},r=b(e,["prompt"]);t!==void 0&&r!=null&&S(t,["instances[0]","prompt"],r);const i=b(e,["image"]);t!==void 0&&i!=null&&S(t,["instances[0]","image"],To(i));const o=b(e,["video"]);return t!==void 0&&o!=null&&S(t,["instances[0]","video"],s3(o)),n}function mV(e){const t={},n=b(e,["_self"]);n!=null&&S(t,["image"],AV(n));const r=b(e,["raiFilteredReason"]);r!=null&&S(t,["raiFilteredReason"],r);const i=b(e,["_self"]);return i!=null&&S(t,["safetyAttributes"],t3(i)),t}function $p(e){const t={},n=b(e,["_self"]);n!=null&&S(t,["image"],e3(n));const r=b(e,["raiFilteredReason"]);r!=null&&S(t,["raiFilteredReason"],r);const i=b(e,["_self"]);i!=null&&S(t,["safetyAttributes"],n3(i));const o=b(e,["prompt"]);return o!=null&&S(t,["enhancedPrompt"],o),t}function gV(e){const t={},n=b(e,["_self"]);n!=null&&S(t,["mask"],e3(n));const r=b(e,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),S(t,["labels"],i)}return t}function vV(e){const t={},n=b(e,["video"]);return n!=null&&S(t,["video"],i$(n)),t}function yV(e){const t={},n=b(e,["_self"]);return n!=null&&S(t,["video"],o$(n)),t}function xV(e){const t={},n=b(e,["modelSelectionConfig"]);n!=null&&S(t,["modelConfig"],n);const r=b(e,["responseJsonSchema"]);r!=null&&S(t,["responseJsonSchema"],r);const i=b(e,["audioTimestamp"]);i!=null&&S(t,["audioTimestamp"],i);const o=b(e,["candidateCount"]);o!=null&&S(t,["candidateCount"],o);const a=b(e,["enableAffectiveDialog"]);a!=null&&S(t,["enableAffectiveDialog"],a);const c=b(e,["frequencyPenalty"]);c!=null&&S(t,["frequencyPenalty"],c);const f=b(e,["logprobs"]);f!=null&&S(t,["logprobs"],f);const d=b(e,["maxOutputTokens"]);d!=null&&S(t,["maxOutputTokens"],d);const m=b(e,["mediaResolution"]);m!=null&&S(t,["mediaResolution"],m);const v=b(e,["presencePenalty"]);v!=null&&S(t,["presencePenalty"],v);const E=b(e,["responseLogprobs"]);E!=null&&S(t,["responseLogprobs"],E);const C=b(e,["responseMimeType"]);C!=null&&S(t,["responseMimeType"],C);const I=b(e,["responseModalities"]);I!=null&&S(t,["responseModalities"],I);const P=b(e,["responseSchema"]);P!=null&&S(t,["responseSchema"],P);const N=b(e,["routingConfig"]);N!=null&&S(t,["routingConfig"],N);const D=b(e,["seed"]);D!=null&&S(t,["seed"],D);const F=b(e,["speechConfig"]);F!=null&&S(t,["speechConfig"],r3(F));const L=b(e,["stopSequences"]);L!=null&&S(t,["stopSequences"],L);const V=b(e,["temperature"]);V!=null&&S(t,["temperature"],V);const G=b(e,["thinkingConfig"]);G!=null&&S(t,["thinkingConfig"],G);const q=b(e,["topK"]);q!=null&&S(t,["topK"],q);const W=b(e,["topP"]);if(W!=null&&S(t,["topP"],W),b(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function wV(e,t){const n={},r=b(t,["model"]);return r!=null&&S(n,["_url","name"],kt(e,r)),n}function EV(e,t){const n={},r=b(t,["model"]);return r!=null&&S(n,["_url","name"],kt(e,r)),n}function bV(e){const t={};if(b(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function _V(e){const t={};if(b(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function SV(e){const t={},n=b(e,["aspectRatio"]);n!=null&&S(t,["aspectRatio"],n);const r=b(e,["imageSize"]);if(r!=null&&S(t,["imageSize"],r),b(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(b(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function CV(e){const t={},n=b(e,["aspectRatio"]);n!=null&&S(t,["aspectRatio"],n);const r=b(e,["imageSize"]);r!=null&&S(t,["imageSize"],r);const i=b(e,["outputMimeType"]);i!=null&&S(t,["imageOutputOptions","mimeType"],i);const o=b(e,["outputCompressionQuality"]);return o!=null&&S(t,["imageOutputOptions","compressionQuality"],o),t}function AV(e){const t={},n=b(e,["bytesBase64Encoded"]);n!=null&&S(t,["imageBytes"],Ca(n));const r=b(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function e3(e){const t={},n=b(e,["gcsUri"]);n!=null&&S(t,["gcsUri"],n);const r=b(e,["bytesBase64Encoded"]);r!=null&&S(t,["imageBytes"],Ca(r));const i=b(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function zp(e){const t={};if(b(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=b(e,["imageBytes"]);n!=null&&S(t,["bytesBase64Encoded"],Ca(n));const r=b(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function To(e){const t={},n=b(e,["gcsUri"]);n!=null&&S(t,["gcsUri"],n);const r=b(e,["imageBytes"]);r!=null&&S(t,["bytesBase64Encoded"],Ca(r));const i=b(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function TV(e,t,n){const r={},i=b(t,["pageSize"]);n!==void 0&&i!=null&&S(n,["_query","pageSize"],i);const o=b(t,["pageToken"]);n!==void 0&&o!=null&&S(n,["_query","pageToken"],o);const a=b(t,["filter"]);n!==void 0&&a!=null&&S(n,["_query","filter"],a);const c=b(t,["queryBase"]);return n!==void 0&&c!=null&&S(n,["_url","models_url"],qO(e,c)),r}function IV(e,t,n){const r={},i=b(t,["pageSize"]);n!==void 0&&i!=null&&S(n,["_query","pageSize"],i);const o=b(t,["pageToken"]);n!==void 0&&o!=null&&S(n,["_query","pageToken"],o);const a=b(t,["filter"]);n!==void 0&&a!=null&&S(n,["_query","filter"],a);const c=b(t,["queryBase"]);return n!==void 0&&c!=null&&S(n,["_url","models_url"],qO(e,c)),r}function PV(e,t){const n={},r=b(t,["config"]);return r!=null&&TV(e,r,n),n}function NV(e,t){const n={},r=b(t,["config"]);return r!=null&&IV(e,r,n),n}function RV(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=b(e,["_self"]);if(i!=null){let o=WO(i);Array.isArray(o)&&(o=o.map(a=>Ly(a))),S(t,["models"],o)}return t}function OV(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=b(e,["_self"]);if(i!=null){let o=WO(i);Array.isArray(o)&&(o=o.map(a=>By(a))),S(t,["models"],o)}return t}function kV(e){const t={},n=b(e,["maskMode"]);n!=null&&S(t,["maskMode"],n);const r=b(e,["segmentationClasses"]);r!=null&&S(t,["maskClasses"],r);const i=b(e,["maskDilation"]);return i!=null&&S(t,["dilation"],i),t}function Ly(e){const t={},n=b(e,["name"]);n!=null&&S(t,["name"],n);const r=b(e,["displayName"]);r!=null&&S(t,["displayName"],r);const i=b(e,["description"]);i!=null&&S(t,["description"],i);const o=b(e,["version"]);o!=null&&S(t,["version"],o);const a=b(e,["_self"]);a!=null&&S(t,["tunedModelInfo"],YV(a));const c=b(e,["inputTokenLimit"]);c!=null&&S(t,["inputTokenLimit"],c);const f=b(e,["outputTokenLimit"]);f!=null&&S(t,["outputTokenLimit"],f);const d=b(e,["supportedGenerationMethods"]);d!=null&&S(t,["supportedActions"],d);const m=b(e,["temperature"]);m!=null&&S(t,["temperature"],m);const v=b(e,["maxTemperature"]);v!=null&&S(t,["maxTemperature"],v);const E=b(e,["topP"]);E!=null&&S(t,["topP"],E);const C=b(e,["topK"]);C!=null&&S(t,["topK"],C);const I=b(e,["thinking"]);return I!=null&&S(t,["thinking"],I),t}function By(e){const t={},n=b(e,["name"]);n!=null&&S(t,["name"],n);const r=b(e,["displayName"]);r!=null&&S(t,["displayName"],r);const i=b(e,["description"]);i!=null&&S(t,["description"],i);const o=b(e,["versionId"]);o!=null&&S(t,["version"],o);const a=b(e,["deployedModels"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>qj(E))),S(t,["endpoints"],v)}const c=b(e,["labels"]);c!=null&&S(t,["labels"],c);const f=b(e,["_self"]);f!=null&&S(t,["tunedModelInfo"],XV(f));const d=b(e,["defaultCheckpointId"]);d!=null&&S(t,["defaultCheckpointId"],d);const m=b(e,["checkpoints"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(E=>E)),S(t,["checkpoints"],v)}return t}function MV(e){const t={},n=b(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const r=b(e,["codeExecutionResult"]);r!=null&&S(t,["codeExecutionResult"],r);const i=b(e,["executableCode"]);i!=null&&S(t,["executableCode"],i);const o=b(e,["fileData"]);o!=null&&S(t,["fileData"],Wj(o));const a=b(e,["functionCall"]);a!=null&&S(t,["functionCall"],Kj(a));const c=b(e,["functionResponse"]);c!=null&&S(t,["functionResponse"],c);const f=b(e,["inlineData"]);f!=null&&S(t,["inlineData"],xj(f));const d=b(e,["text"]);d!=null&&S(t,["text"],d);const m=b(e,["thought"]);m!=null&&S(t,["thought"],m);const v=b(e,["thoughtSignature"]);v!=null&&S(t,["thoughtSignature"],v);const E=b(e,["videoMetadata"]);return E!=null&&S(t,["videoMetadata"],E),t}function DV(e){const t={},n=b(e,["productImage"]);return n!=null&&S(t,["image"],To(n)),t}function LV(e,t){const n={},r=b(e,["numberOfImages"]);t!==void 0&&r!=null&&S(t,["parameters","sampleCount"],r);const i=b(e,["baseSteps"]);t!==void 0&&i!=null&&S(t,["parameters","baseSteps"],i);const o=b(e,["outputGcsUri"]);t!==void 0&&o!=null&&S(t,["parameters","storageUri"],o);const a=b(e,["seed"]);t!==void 0&&a!=null&&S(t,["parameters","seed"],a);const c=b(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&S(t,["parameters","safetySetting"],c);const f=b(e,["personGeneration"]);t!==void 0&&f!=null&&S(t,["parameters","personGeneration"],f);const d=b(e,["addWatermark"]);t!==void 0&&d!=null&&S(t,["parameters","addWatermark"],d);const m=b(e,["outputMimeType"]);t!==void 0&&m!=null&&S(t,["parameters","outputOptions","mimeType"],m);const v=b(e,["outputCompressionQuality"]);t!==void 0&&v!=null&&S(t,["parameters","outputOptions","compressionQuality"],v);const E=b(e,["enhancePrompt"]);t!==void 0&&E!=null&&S(t,["parameters","enhancePrompt"],E);const C=b(e,["labels"]);return t!==void 0&&C!=null&&S(t,["labels"],C),n}function BV(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["source"]);i!=null&&UV(i,n);const o=b(t,["config"]);return o!=null&&LV(o,n),n}function FV(e){const t={},n=b(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>$p(i))),S(t,["generatedImages"],r)}return t}function UV(e,t){const n={},r=b(e,["prompt"]);t!==void 0&&r!=null&&S(t,["instances[0]","prompt"],r);const i=b(e,["personImage"]);t!==void 0&&i!=null&&S(t,["instances[0]","personImage","image"],To(i));const o=b(e,["productImages"]);if(t!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>DV(c))),S(t,["instances[0]","productImages"],a)}return n}function jV(e){const t={},n=b(e,["referenceImage"]);n!=null&&S(t,["referenceImage"],To(n));const r=b(e,["referenceId"]);r!=null&&S(t,["referenceId"],r);const i=b(e,["referenceType"]);i!=null&&S(t,["referenceType"],i);const o=b(e,["maskImageConfig"]);o!=null&&S(t,["maskImageConfig"],kV(o));const a=b(e,["controlImageConfig"]);a!=null&&S(t,["controlImageConfig"],Aj(a));const c=b(e,["styleImageConfig"]);c!=null&&S(t,["styleImageConfig"],c);const f=b(e,["subjectImageConfig"]);return f!=null&&S(t,["subjectImageConfig"],f),t}function t3(e){const t={},n=b(e,["safetyAttributes","categories"]);n!=null&&S(t,["categories"],n);const r=b(e,["safetyAttributes","scores"]);r!=null&&S(t,["scores"],r);const i=b(e,["contentType"]);return i!=null&&S(t,["contentType"],i),t}function n3(e){const t={},n=b(e,["safetyAttributes","categories"]);n!=null&&S(t,["categories"],n);const r=b(e,["safetyAttributes","scores"]);r!=null&&S(t,["scores"],r);const i=b(e,["contentType"]);return i!=null&&S(t,["contentType"],i),t}function VV(e){const t={},n=b(e,["category"]);if(n!=null&&S(t,["category"],n),b(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=b(e,["threshold"]);return r!=null&&S(t,["threshold"],r),t}function $V(e){const t={},n=b(e,["image"]);return n!=null&&S(t,["image"],To(n)),t}function zV(e,t){const n={},r=b(e,["mode"]);t!==void 0&&r!=null&&S(t,["parameters","mode"],r);const i=b(e,["maxPredictions"]);t!==void 0&&i!=null&&S(t,["parameters","maxPredictions"],i);const o=b(e,["confidenceThreshold"]);t!==void 0&&o!=null&&S(t,["parameters","confidenceThreshold"],o);const a=b(e,["maskDilation"]);t!==void 0&&a!=null&&S(t,["parameters","maskDilation"],a);const c=b(e,["binaryColorThreshold"]);t!==void 0&&c!=null&&S(t,["parameters","binaryColorThreshold"],c);const f=b(e,["labels"]);return t!==void 0&&f!=null&&S(t,["labels"],f),n}function GV(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["source"]);i!=null&&qV(i,n);const o=b(t,["config"]);return o!=null&&zV(o,n),n}function HV(e){const t={},n=b(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>gV(i))),S(t,["generatedMasks"],r)}return t}function qV(e,t){const n={},r=b(e,["prompt"]);t!==void 0&&r!=null&&S(t,["instances[0]","prompt"],r);const i=b(e,["image"]);t!==void 0&&i!=null&&S(t,["instances[0]","image"],To(i));const o=b(e,["scribbleImage"]);return t!==void 0&&o!=null&&S(t,["instances[0]","scribble"],$V(o)),n}function r3(e){const t={},n=b(e,["voiceConfig"]);n!=null&&S(t,["voiceConfig"],n);const r=b(e,["languageCode"]);if(r!=null&&S(t,["languageCode"],r),b(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function WV(e){const t={},n=b(e,["functionCallingConfig"]);n!=null&&S(t,["functionCallingConfig"],Yj(n));const r=b(e,["retrievalConfig"]);return r!=null&&S(t,["retrievalConfig"],r),t}function KV(e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>v)),S(t,["functionDeclarations"],m)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearchRetrieval"]);r!=null&&S(t,["googleSearchRetrieval"],r);const i=b(e,["computerUse"]);i!=null&&S(t,["computerUse"],i);const o=b(e,["fileSearch"]);o!=null&&S(t,["fileSearch"],o);const a=b(e,["codeExecution"]);if(a!=null&&S(t,["codeExecution"],a),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=b(e,["googleMaps"]);c!=null&&S(t,["googleMaps"],bV(c));const f=b(e,["googleSearch"]);f!=null&&S(t,["googleSearch"],_V(f));const d=b(e,["urlContext"]);return d!=null&&S(t,["urlContext"],d),t}function i3(e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>Xj(E))),S(t,["functionDeclarations"],v)}const r=b(e,["retrieval"]);r!=null&&S(t,["retrieval"],r);const i=b(e,["googleSearchRetrieval"]);i!=null&&S(t,["googleSearchRetrieval"],i);const o=b(e,["computerUse"]);if(o!=null&&S(t,["computerUse"],o),b(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=b(e,["codeExecution"]);a!=null&&S(t,["codeExecution"],a);const c=b(e,["enterpriseWebSearch"]);c!=null&&S(t,["enterpriseWebSearch"],c);const f=b(e,["googleMaps"]);f!=null&&S(t,["googleMaps"],f);const d=b(e,["googleSearch"]);d!=null&&S(t,["googleSearch"],d);const m=b(e,["urlContext"]);return m!=null&&S(t,["urlContext"],m),t}function YV(e){const t={},n=b(e,["baseModel"]);n!=null&&S(t,["baseModel"],n);const r=b(e,["createTime"]);r!=null&&S(t,["createTime"],r);const i=b(e,["updateTime"]);return i!=null&&S(t,["updateTime"],i),t}function XV(e){const t={},n=b(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&S(t,["baseModel"],n);const r=b(e,["createTime"]);r!=null&&S(t,["createTime"],r);const i=b(e,["updateTime"]);return i!=null&&S(t,["updateTime"],i),t}function JV(e,t){const n={},r=b(e,["displayName"]);t!==void 0&&r!=null&&S(t,["displayName"],r);const i=b(e,["description"]);t!==void 0&&i!=null&&S(t,["description"],i);const o=b(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&S(t,["defaultCheckpointId"],o),n}function ZV(e,t){const n={},r=b(e,["displayName"]);t!==void 0&&r!=null&&S(t,["displayName"],r);const i=b(e,["description"]);t!==void 0&&i!=null&&S(t,["description"],i);const o=b(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&S(t,["defaultCheckpointId"],o),n}function QV(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","name"],kt(e,r));const i=b(t,["config"]);return i!=null&&JV(i,n),n}function e$(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["config"]);return i!=null&&ZV(i,n),n}function t$(e,t){const n={},r=b(e,["outputGcsUri"]);t!==void 0&&r!=null&&S(t,["parameters","storageUri"],r);const i=b(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&S(t,["parameters","safetySetting"],i);const o=b(e,["personGeneration"]);t!==void 0&&o!=null&&S(t,["parameters","personGeneration"],o);const a=b(e,["includeRaiReason"]);t!==void 0&&a!=null&&S(t,["parameters","includeRaiReason"],a);const c=b(e,["outputMimeType"]);t!==void 0&&c!=null&&S(t,["parameters","outputOptions","mimeType"],c);const f=b(e,["outputCompressionQuality"]);t!==void 0&&f!=null&&S(t,["parameters","outputOptions","compressionQuality"],f);const d=b(e,["enhanceInputImage"]);t!==void 0&&d!=null&&S(t,["parameters","upscaleConfig","enhanceInputImage"],d);const m=b(e,["imagePreservationFactor"]);t!==void 0&&m!=null&&S(t,["parameters","upscaleConfig","imagePreservationFactor"],m);const v=b(e,["labels"]);t!==void 0&&v!=null&&S(t,["labels"],v);const E=b(e,["numberOfImages"]);t!==void 0&&E!=null&&S(t,["parameters","sampleCount"],E);const C=b(e,["mode"]);return t!==void 0&&C!=null&&S(t,["parameters","mode"],C),n}function n$(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=b(t,["image"]);i!=null&&S(n,["instances[0]","image"],To(i));const o=b(t,["upscaleFactor"]);o!=null&&S(n,["parameters","upscaleConfig","upscaleFactor"],o);const a=b(t,["config"]);return a!=null&&t$(a,n),n}function r$(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>$p(o))),S(t,["generatedImages"],i)}return t}function i$(e){const t={},n=b(e,["uri"]);n!=null&&S(t,["uri"],n);const r=b(e,["encodedVideo"]);r!=null&&S(t,["videoBytes"],Ca(r));const i=b(e,["encoding"]);return i!=null&&S(t,["mimeType"],i),t}function o$(e){const t={},n=b(e,["gcsUri"]);n!=null&&S(t,["uri"],n);const r=b(e,["bytesBase64Encoded"]);r!=null&&S(t,["videoBytes"],Ca(r));const i=b(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function s$(e){const t={},n=b(e,["image"]);n!=null&&S(t,["_self"],To(n));const r=b(e,["maskMode"]);return r!=null&&S(t,["maskMode"],r),t}function a$(e){const t={},n=b(e,["image"]);n!=null&&S(t,["image"],zp(n));const r=b(e,["referenceType"]);return r!=null&&S(t,["referenceType"],r),t}function l$(e){const t={},n=b(e,["image"]);n!=null&&S(t,["image"],To(n));const r=b(e,["referenceType"]);return r!=null&&S(t,["referenceType"],r),t}function o3(e){const t={},n=b(e,["uri"]);n!=null&&S(t,["uri"],n);const r=b(e,["videoBytes"]);r!=null&&S(t,["encodedVideo"],Ca(r));const i=b(e,["mimeType"]);return i!=null&&S(t,["encoding"],i),t}function s3(e){const t={},n=b(e,["uri"]);n!=null&&S(t,["gcsUri"],n);const r=b(e,["videoBytes"]);r!=null&&S(t,["bytesBase64Encoded"],Ca(r));const i=b(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function u$(e,t){const n={},r=b(e,["displayName"]);return t!==void 0&&r!=null&&S(t,["displayName"],r),n}function c$(e){const t={},n=b(e,["config"]);return n!=null&&u$(n,t),t}function d$(e,t){const n={},r=b(e,["force"]);return t!==void 0&&r!=null&&S(t,["_query","force"],r),n}function f$(e){const t={},n=b(e,["name"]);n!=null&&S(t,["_url","name"],n);const r=b(e,["config"]);return r!=null&&d$(r,t),t}function h$(e){const t={},n=b(e,["name"]);return n!=null&&S(t,["_url","name"],n),t}function p$(e,t){const n={},r=b(e,["customMetadata"]);if(t!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["customMetadata"],o)}const i=b(e,["chunkingConfig"]);return t!==void 0&&i!=null&&S(t,["chunkingConfig"],i),n}function m$(e){const t={},n=b(e,["name"]);n!=null&&S(t,["name"],n);const r=b(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=b(e,["done"]);i!=null&&S(t,["done"],i);const o=b(e,["error"]);o!=null&&S(t,["error"],o);const a=b(e,["response"]);return a!=null&&S(t,["response"],v$(a)),t}function g$(e){const t={},n=b(e,["fileSearchStoreName"]);n!=null&&S(t,["_url","file_search_store_name"],n);const r=b(e,["fileName"]);r!=null&&S(t,["fileName"],r);const i=b(e,["config"]);return i!=null&&p$(i,t),t}function v$(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["parent"]);r!=null&&S(t,["parent"],r);const i=b(e,["documentName"]);return i!=null&&S(t,["documentName"],i),t}function y$(e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=b(e,["pageToken"]);return t!==void 0&&i!=null&&S(t,["_query","pageToken"],i),n}function x$(e){const t={},n=b(e,["config"]);return n!=null&&y$(n,t),t}function w$(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=b(e,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["fileSearchStores"],o)}return t}function a3(e,t){const n={},r=b(e,["mimeType"]);t!==void 0&&r!=null&&S(t,["mimeType"],r);const i=b(e,["displayName"]);t!==void 0&&i!=null&&S(t,["displayName"],i);const o=b(e,["customMetadata"]);if(t!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),S(t,["customMetadata"],c)}const a=b(e,["chunkingConfig"]);return t!==void 0&&a!=null&&S(t,["chunkingConfig"],a),n}function E$(e){const t={},n=b(e,["fileSearchStoreName"]);n!=null&&S(t,["_url","file_search_store_name"],n);const r=b(e,["config"]);return r!=null&&a3(r,t),t}function b$(e){const t={},n=b(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}const _$="Content-Type",S$="X-Server-Timeout",C$="User-Agent",Fy="x-goog-api-client",A$="1.33.0",T$=`google-genai-sdk/${A$}`,I$="v1beta1",P$="v1beta";class N${constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:I$,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:P$,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),t!==""&&i.push(t),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[a,c]of Object.entries(t.queryParams))i.searchParams.append(a,String(c));let o={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=t.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),t.abortSignal),this.unaryApiCall(i,o,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=t.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),t.abortSignal),this.streamApiCall(i,o,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,i){if(n&&n.timeout||i){const o=new AbortController,a=o.signal;if(n.timeout&&n?.timeout>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),t.signal=a}return n&&n.extraBody!==null&&R$(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await TC(i),new ky(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await TC(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(t){return bo(this,arguments,function*(){var r;const i=(r=t?.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let a="";const c="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:m}=yield gt(i.read());if(d){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=o.decode(m,{stream:!0});try{const I=JSON.parse(v);if("error"in I){const P=JSON.parse(JSON.stringify(I.error)),N=P.status,D=P.code,F=`got status: ${N}. ${JSON.stringify(I)}`;if(D>=400&&D<600)throw new jp({message:F,status:D})}}catch(I){if(I.name==="ApiError")throw I}a+=v;let E=-1,C=0;for(;;){E=-1,C=0;for(const N of f){const D=a.indexOf(N);D!==-1&&(E===-1||D<E)&&(E=D,C=N.length)}if(E===-1)break;const I=a.substring(0,E);a=a.substring(E+C);const P=I.trim();if(P.startsWith(c)){const N=P.substring(c.length).trim();try{const D=new Response(N,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield gt(new ky(D))}catch(D){throw new Error(`exception parsing stream chunk ${N}. ${D}`)}}}}}finally{i.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=T$+" "+this.clientOptions.userAgentExtra;return t[C$]=n,t[Fy]=n,t[_$]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[i,o]of Object.entries(t.headers))r.append(i,o);t.timeout&&t.timeout>0&&r.append(S$,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,a=await o.stat(t);i.sizeBytes=String(a.size);const c=(r=n?.mimeType)!==null&&r!==void 0?r:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=c;const f={file:i},d=this.getFileName(t),m=Ue("upload/v1beta/files",f._url),v=await this.fetchUploadUrl(m,i.sizeBytes,i.mimeType,d,f,n?.httpOptions);return o.upload(t,v,this)}async uploadFileToFileSearchStore(t,n,r){var i;const o=this.clientOptions.uploader,a=await o.stat(n),c=String(a.size),f=(i=r?.mimeType)!==null&&i!==void 0?i:a.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${t}:uploadToFileSearchStore`,m=this.getFileName(n),v={};r!=null&&a3(r,v);const E=await this.fetchUploadUrl(d,c,f,m,v,r?.httpOptions);return o.uploadToFileSearchStore(n,E,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,i,o,a){var c;let f={};a?f=a:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const d=await this.request({path:t,body:JSON.stringify(o),httpMethod:"POST",httpOptions:f});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(c=d?.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function TC(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new jp({message:i,status:n}):new Error(i)}}function R$(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const o=JSON.parse(e.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,a){const c=Object.assign({},o);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f)){const d=a[f],m=c[f];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?c[f]=r(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),c[f]=d)}return c}const i=r(n,t);e.body=JSON.stringify(i)}const O$="mcp_used/unknown";let k$=!1;function l3(e){for(const t of e)if(M$(t)||typeof t=="object"&&"inputSchema"in t)return!0;return k$}function u3(e){var t;const n=(t=e[Fy])!==null&&t!==void 0?t:"";e[Fy]=(n+` ${O$}`).trimStart()}function M$(e){return e!==null&&typeof e=="object"&&e instanceof Cw}function D$(e){return bo(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const a=yield gt(n.listTools({cursor:i}));for(const c of a.tools)yield yield gt(c),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class Cw{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Cw(t,n)}async initialize(){var t,n,r,i;if(this.mcpTools.length>0)return;const o={},a=[];for(const m of this.mcpClients)try{for(var c=!0,f=(n=void 0,_o(D$(m))),d;d=await f.next(),t=d.done,!t;c=!0){i=d.value,c=!1;const v=i;a.push(v);const E=v.name;if(o[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);o[E]=m}}catch(v){n={error:v}}finally{try{!c&&!t&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),h9(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:a.isError?{error:a}:a}})}return n}}async function L$(e,t,n){const r=new o9;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),t(r)}class B${constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=j$(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const m=new Promise(L=>{d=L}),v=t.callbacks,E=function(){d({})},C=this.apiClient,I={onopen:E,onmessage:L=>{L$(C,v.onmessage,L)},onerror:(n=v?.onerror)!==null&&n!==void 0?n:function(L){},onclose:(r=v?.onclose)!==null&&r!==void 0?r:function(L){}},P=this.webSocketFactory.create(f,U$(a),I);P.connect(),await m;const F={setup:{model:kt(this.apiClient,t.model)}};return P.send(JSON.stringify(F)),new F$(P,this.apiClient)}}class F${constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=cj(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=uj(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(_u.PLAY)}pause(){this.sendPlaybackControl(_u.PAUSE)}stop(){this.sendPlaybackControl(_u.STOP)}resetContext(){this.sendPlaybackControl(_u.RESET_CONTEXT)}close(){this.conn.close()}}function U$(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function j$(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}const V$="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function $$(e,t,n){const r=new i9;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(e.isVertexAI()){const a=hj(o);Object.assign(r,a)}else Object.assign(r,o);t(r)}class z${constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new B$(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,i,o,a,c;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const v=this.apiClient.getHeaders();t.config&&t.config.tools&&l3(t.config.tools)&&u3(v);const E=W$(v);if(this.apiClient.isVertexAI())m=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,m);else{const X=this.apiClient.getApiKey();let fe="BidiGenerateContent",se="key";X?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),fe="BidiGenerateContentConstrained",se="access_token"),m=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${fe}?${se}=${X}`}let C=()=>{};const I=new Promise(X=>{C=X}),P=t.callbacks,N=function(){var X;(X=P?.onopen)===null||X===void 0||X.call(P),C({})},D=this.apiClient,F={onopen:N,onmessage:X=>{$$(D,P.onmessage,X)},onerror:(n=P?.onerror)!==null&&n!==void 0?n:function(X){},onclose:(r=P?.onclose)!==null&&r!==void 0?r:function(X){}},L=this.webSocketFactory.create(m,q$(E),F);L.connect(),await I;let V=kt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const X=this.apiClient.getProject(),fe=this.apiClient.getLocation();V=`projects/${X}/locations/${fe}/`+V}let G={};this.apiClient.isVertexAI()&&((i=t.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[P0.AUDIO]}:t.config.responseModalities=[P0.AUDIO]),!((o=t.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const q=(c=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[],W=[];for(const X of q)if(this.isCallableTool(X)){const fe=X;W.push(await fe.tool())}else W.push(X);W.length>0&&(t.config.tools=W);const Z={model:V,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?G=lj(this.apiClient,Z):G=aj(this.apiClient,Z),delete G.config,L.send(JSON.stringify(G)),new H$(L,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const G$={turnComplete:!0};class H${constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Zi(n.turns),t.isVertexAI()||(r=r.map(i=>Vp(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!t.isVertexAI()&&!("id"in o))throw new Error(V$)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},G$),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:fj(t)}:n={realtimeInput:dj(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function q$(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function W$(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}const IC=10;function PC(e){var t,n,r;if(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let i=!1;for(const a of(n=e?.tools)!==null&&n!==void 0?n:[])if(ku(a)){i=!0;break}if(!i)return!0;const o=(r=e?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ku(e){return"callTool"in e&&typeof e.callTool=="function"}function K$(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(i=>ku(i)))!==null&&r!==void 0?r:!1}function NC(e){var t;const n=[];return!((t=e?.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,i)=>{if(ku(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function RC(e){var t;return!(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}class Y$ extends Ns{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,i,o,a,c;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!K$(n)||PC(n.config))return await this.generateContentInternal(f);const d=NC(n);if(d.length>0){const P=d.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let m,v;const E=Zi(f.contents),C=(o=(i=(r=f.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:IC;let I=0;for(;I<C&&(m=await this.generateContentInternal(f),!(!m.functionCalls||m.functionCalls.length===0));){const P=m.candidates[0].content,N=[];for(const D of(c=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[])if(ku(D)){const L=await D.callTool(m.functionCalls);N.push(...L)}I++,v={role:"user",parts:N},f.contents=Zi(f.contents),f.contents.push(P),f.contents.push(v),RC(f.config)&&(E.push(P),E.push(v))}return RC(f.config)&&(m.automaticFunctionCallingHistory=E),m},this.generateContentStream=async n=>{var r,i,o,a,c;if(this.maybeMoveToResponseJsonSchem(n),PC(n.config)){const v=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(v)}const f=NC(n);if(f.length>0){const v=f.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(o=(i=(r=n?.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,m=(c=(a=n?.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const a=[];if(r?.generatedImages)for(const f of r.generatedImages)f&&f?.safetyAttributes&&((i=f?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=f?.safetyAttributes:a.push(f);let c;return o?c={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:c={generatedImages:a,sdkHttpResponse:r.sdkHttpResponse},c}),this.list=async n=>{var r;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((r=a.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Nl(ws.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(a),a)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,a,c,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(o=n.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((f=(c=n.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,i;const o=(n=t.config)===null||n===void 0?void 0:n.tools;if(!o)return t;const a=await Promise.all(o.map(async f=>ku(f)?await f.tool():f)),c={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:a})};if(c.config.tools=a,t.config&&t.config.tools&&l3(t.config.tools)){const f=(i=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),u3(d),c.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(t){var n,r,i;const o=new Map;for(const a of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ku(a)){const c=a,f=await c.tool();for(const d of(i=f.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,c)}}return o}async processAfcStream(t){var n,r,i;const o=(i=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:IC;let a=!1,c=0;const f=await this.initAfcToolsMap(t);return(function(d,m,v){return bo(this,arguments,function*(){for(var E,C,I,P,N,D;c<o;){a&&(c++,a=!1);const G=yield gt(d.processParamsMaybeAddMcpUsage(v)),q=yield gt(d.generateContentStreamInternal(G)),W=[],Z=[];try{for(var F=!0,L=(C=void 0,_o(q)),V;V=yield gt(L.next()),E=V.done,!E;F=!0){P=V.value,F=!1;const X=P;if(yield yield gt(X),X.candidates&&(!((N=X.candidates[0])===null||N===void 0)&&N.content)){Z.push(X.candidates[0].content);for(const fe of(D=X.candidates[0].content.parts)!==null&&D!==void 0?D:[])if(c<o&&fe.functionCall){if(!fe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(fe.functionCall.name)){const se=yield gt(m.get(fe.functionCall.name).callTool([fe.functionCall]));W.push(...se)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${fe.functionCall.name}`)}}}}catch(X){C={error:X}}finally{try{!F&&!E&&(I=L.return)&&(yield gt(I.call(L)))}finally{if(C)throw C.error}}if(W.length>0){a=!0;const X=new rd;X.candidates=[{content:{role:"user",parts:W}}],yield yield gt(X);const fe=[];fe.push(...Z),fe.push({role:"user",parts:W});const se=Zi(v.contents).concat(fe);v.contents=se}else break}})})(this,f,t)}async generateContentInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=SC(this.apiClient,t);return c=Ue("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=AC(m),E=new rd;return Object.assign(E,v),E})}else{const d=_C(this.apiClient,t);return c=Ue("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=CC(m),E=new rd;return Object.assign(E,v),E})}}async generateContentStreamInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=SC(this.apiClient,t);return c=Ue("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(v){return bo(this,arguments,function*(){var E,C,I,P;try{for(var N=!0,D=_o(v),F;F=yield gt(D.next()),E=F.done,!E;N=!0){P=F.value,N=!1;const L=P,V=AC(yield gt(L.json()));V.sdkHttpResponse={headers:L.headers};const G=new rd;Object.assign(G,V),yield yield gt(G)}}catch(L){C={error:L}}finally{try{!N&&!E&&(I=D.return)&&(yield gt(I.call(D)))}finally{if(C)throw C.error}}})})}else{const d=_C(this.apiClient,t);return c=Ue("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(v){return bo(this,arguments,function*(){var E,C,I,P;try{for(var N=!0,D=_o(v),F;F=yield gt(D.next()),E=F.done,!E;N=!0){P=F.value,N=!1;const L=P,V=CC(yield gt(L.json()));V.sdkHttpResponse={headers:L.headers};const G=new rd;Object.assign(G,V),yield yield gt(G)}}catch(L){C={error:L}}finally{try{!N&&!E&&(I=D.return)&&(yield gt(I.call(D)))}finally{if(C)throw C.error}}})})}}async embedContent(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=zj(this.apiClient,t);return c=Ue("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=Hj(m),E=new sC;return Object.assign(E,v),E})}else{const d=$j(this.apiClient,t);return c=Ue("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=Gj(m),E=new sC;return Object.assign(E,v),E})}}async generateImagesInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=nV(this.apiClient,t);return c=Ue("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=iV(m),E=new aC;return Object.assign(E,v),E})}else{const d=tV(this.apiClient,t);return c=Ue("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=rV(m),E=new aC;return Object.assign(E,v),E})}}async editImageInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=Fj(this.apiClient,t);return o=Ue("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>{const d=Uj(f),m=new W7;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=n$(this.apiClient,t);return o=Ue("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>{const d=r$(f),m=new K7;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=BV(this.apiClient,t);return o=Ue("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=FV(f),m=new Y7;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=GV(this.apiClient,t);return o=Ue("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=HV(f),m=new X7;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=EV(this.apiClient,t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>By(m))}else{const d=wV(this.apiClient,t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>Ly(m))}}async listInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=NV(this.apiClient,t);return c=Ue("{models_url}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=OV(m),E=new lC;return Object.assign(E,v),E})}else{const d=PV(this.apiClient,t);return c=Ue("{models_url}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=RV(m),E=new lC;return Object.assign(E,v),E})}}async update(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=e$(this.apiClient,t);return c=Ue("{model}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>By(m))}else{const d=QV(this.apiClient,t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>Ly(m))}}async delete(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=Mj(this.apiClient,t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=Lj(m),E=new uC;return Object.assign(E,v),E})}else{const d=kj(this.apiClient,t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=Dj(m),E=new uC;return Object.assign(E,v),E})}}async countTokens(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=Nj(this.apiClient,t);return c=Ue("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=Oj(m),E=new cC;return Object.assign(E,v),E})}else{const d=Pj(this.apiClient,t);return c=Ue("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=Rj(m),E=new cC;return Object.assign(E,v),E})}}async computeTokens(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=bj(this.apiClient,t);return o=Ue("{model}:computeTokens",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>{const d=_j(f),m=new J7;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=cV(this.apiClient,t);return c=Ue("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>{const v=lV(m),E=new N0;return Object.assign(E,v),E})}else{const d=uV(this.apiClient,t);return c=Ue("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>{const v=aV(m),E=new N0;return Object.assign(E,v),E})}}}class X$ extends Ns{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=V7(t);return c=Ue("{operationName}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a}else{const d=j7(t);return c=Ue("{operationName}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a}}async fetchPredictVideosOperationInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=k7(t);return o=Ue("{resourceName}:fetchPredictOperation",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}function J$(e){const t={},n=b(e,["data"]);if(n!=null&&S(t,["data"],n),b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function Z$(e){const t={},n=b(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>az(o))),S(t,["parts"],i)}const r=b(e,["role"]);return r!=null&&S(t,["role"],r),t}function Q$(e,t,n){const r={},i=b(t,["expireTime"]);n!==void 0&&i!=null&&S(n,["expireTime"],i);const o=b(t,["newSessionExpireTime"]);n!==void 0&&o!=null&&S(n,["newSessionExpireTime"],o);const a=b(t,["uses"]);n!==void 0&&a!=null&&S(n,["uses"],a);const c=b(t,["liveConnectConstraints"]);n!==void 0&&c!=null&&S(n,["bidiGenerateContentSetup"],sz(e,c));const f=b(t,["lockAdditionalFields"]);return n!==void 0&&f!=null&&S(n,["fieldMask"],f),r}function ez(e,t){const n={},r=b(t,["config"]);return r!=null&&S(n,["config"],Q$(e,r,n)),n}function tz(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const r=b(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function nz(e){const t={},n=b(e,["id"]);n!=null&&S(t,["id"],n);const r=b(e,["args"]);r!=null&&S(t,["args"],r);const i=b(e,["name"]);if(i!=null&&S(t,["name"],i),b(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(b(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function rz(e){const t={};if(b(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function iz(e){const t={};if(b(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function oz(e,t){const n={},r=b(e,["generationConfig"]);t!==void 0&&r!=null&&S(t,["setup","generationConfig"],r);const i=b(e,["responseModalities"]);t!==void 0&&i!=null&&S(t,["setup","generationConfig","responseModalities"],i);const o=b(e,["temperature"]);t!==void 0&&o!=null&&S(t,["setup","generationConfig","temperature"],o);const a=b(e,["topP"]);t!==void 0&&a!=null&&S(t,["setup","generationConfig","topP"],a);const c=b(e,["topK"]);t!==void 0&&c!=null&&S(t,["setup","generationConfig","topK"],c);const f=b(e,["maxOutputTokens"]);t!==void 0&&f!=null&&S(t,["setup","generationConfig","maxOutputTokens"],f);const d=b(e,["mediaResolution"]);t!==void 0&&d!=null&&S(t,["setup","generationConfig","mediaResolution"],d);const m=b(e,["seed"]);t!==void 0&&m!=null&&S(t,["setup","generationConfig","seed"],m);const v=b(e,["speechConfig"]);t!==void 0&&v!=null&&S(t,["setup","generationConfig","speechConfig"],Sw(v));const E=b(e,["thinkingConfig"]);t!==void 0&&E!=null&&S(t,["setup","generationConfig","thinkingConfig"],E);const C=b(e,["enableAffectiveDialog"]);t!==void 0&&C!=null&&S(t,["setup","generationConfig","enableAffectiveDialog"],C);const I=b(e,["systemInstruction"]);t!==void 0&&I!=null&&S(t,["setup","systemInstruction"],Z$($r(I)));const P=b(e,["tools"]);if(t!==void 0&&P!=null){let q=Zu(P);Array.isArray(q)&&(q=q.map(W=>uz(Ju(W)))),S(t,["setup","tools"],q)}const N=b(e,["sessionResumption"]);t!==void 0&&N!=null&&S(t,["setup","sessionResumption"],lz(N));const D=b(e,["inputAudioTranscription"]);t!==void 0&&D!=null&&S(t,["setup","inputAudioTranscription"],D);const F=b(e,["outputAudioTranscription"]);t!==void 0&&F!=null&&S(t,["setup","outputAudioTranscription"],F);const L=b(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&S(t,["setup","realtimeInputConfig"],L);const V=b(e,["contextWindowCompression"]);t!==void 0&&V!=null&&S(t,["setup","contextWindowCompression"],V);const G=b(e,["proactivity"]);if(t!==void 0&&G!=null&&S(t,["setup","proactivity"],G),b(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function sz(e,t){const n={},r=b(t,["model"]);r!=null&&S(n,["setup","model"],kt(e,r));const i=b(t,["config"]);return i!=null&&S(n,["config"],oz(i,n)),n}function az(e){const t={},n=b(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const r=b(e,["codeExecutionResult"]);r!=null&&S(t,["codeExecutionResult"],r);const i=b(e,["executableCode"]);i!=null&&S(t,["executableCode"],i);const o=b(e,["fileData"]);o!=null&&S(t,["fileData"],tz(o));const a=b(e,["functionCall"]);a!=null&&S(t,["functionCall"],nz(a));const c=b(e,["functionResponse"]);c!=null&&S(t,["functionResponse"],c);const f=b(e,["inlineData"]);f!=null&&S(t,["inlineData"],J$(f));const d=b(e,["text"]);d!=null&&S(t,["text"],d);const m=b(e,["thought"]);m!=null&&S(t,["thought"],m);const v=b(e,["thoughtSignature"]);v!=null&&S(t,["thoughtSignature"],v);const E=b(e,["videoMetadata"]);return E!=null&&S(t,["videoMetadata"],E),t}function lz(e){const t={},n=b(e,["handle"]);if(n!=null&&S(t,["handle"],n),b(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function uz(e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>v)),S(t,["functionDeclarations"],m)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearchRetrieval"]);r!=null&&S(t,["googleSearchRetrieval"],r);const i=b(e,["computerUse"]);i!=null&&S(t,["computerUse"],i);const o=b(e,["fileSearch"]);o!=null&&S(t,["fileSearch"],o);const a=b(e,["codeExecution"]);if(a!=null&&S(t,["codeExecution"],a),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=b(e,["googleMaps"]);c!=null&&S(t,["googleMaps"],rz(c));const f=b(e,["googleSearch"]);f!=null&&S(t,["googleSearch"],iz(f));const d=b(e,["urlContext"]);return d!=null&&S(t,["urlContext"],d),t}function cz(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);t.push(...i)}else t.push(n)}return t.join(",")}function dz(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(e.bidiGenerateContentSetup=o,n=o):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const i=e.fieldMask;if(n){const o=cz(n);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)o?e.fieldMask=o:delete e.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];i.length>0&&(c=i.map(d=>a.includes(d)?`generationConfig.${d}`:d));const f=[];o&&f.push(o),c.length>0&&f.push(...c),f.length>0?e.fieldMask=f.join(","):delete e.fieldMask}else delete e.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}class fz extends Ns{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=ez(this.apiClient,t);o=Ue("auth_tokens",c._url),a=c._query,delete c.config,delete c._url,delete c._query;const f=dz(c,t.config);return i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}function hz(e,t){const n={},r=b(e,["force"]);return t!==void 0&&r!=null&&S(t,["_query","force"],r),n}function pz(e){const t={},n=b(e,["name"]);n!=null&&S(t,["_url","name"],n);const r=b(e,["config"]);return r!=null&&hz(r,t),t}function mz(e){const t={},n=b(e,["name"]);return n!=null&&S(t,["_url","name"],n),t}function gz(e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=b(e,["pageToken"]);return t!==void 0&&i!=null&&S(t,["_query","pageToken"],i),n}function vz(e){const t={},n=b(e,["parent"]);n!=null&&S(t,["_url","parent"],n);const r=b(e,["config"]);return r!=null&&gz(r,t),t}function yz(e){const t={},n=b(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=b(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=b(e,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["documents"],o)}return t}class xz extends Ns{constructor(t){super(),this.apiClient=t,this.list=async n=>new Nl(ws.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=mz(t);return o=Ue("{name}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(t){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=pz(t);i=Ue("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=vz(t);return o=Ue("{parent}/documents",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=yz(f),m=new Z7;return Object.assign(m,d),m})}}}class wz extends Ns{constructor(t,n=new xz(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new Nl(ws.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=c$(t);return o=Ue("fileSearchStores",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async get(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=h$(t);return o=Ue("{name}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(t){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=f$(t);i=Ue("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=x$(t);return o=Ue("fileSearchStores",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=w$(f),m=new Q7;return Object.assign(m,d),m})}}async uploadToFileSearchStoreInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=E$(t);return o=Ue("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=b$(f),m=new e9;return Object.assign(m,d),m})}}async importFile(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=g$(t);return o=Ue("{file_search_store_name}:importFile",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=m$(f),m=new xw;return Object.assign(m,d),m})}}}let c3=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return c3=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const Ez=()=>c3();function Uy(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const jy=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class Qi extends Error{}class Xr extends Qi{constructor(t,n,r,i){super(`${Xr.makeMessage(t,n,r)}`),this.status=t,this.headers=i,this.error=n}static makeMessage(t,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,n,r,i){if(!t||!i)return new Gp({message:r,cause:jy(n)});const o=n;return t===400?new f3(t,o,r,i):t===401?new h3(t,o,r,i):t===403?new p3(t,o,r,i):t===404?new m3(t,o,r,i):t===409?new g3(t,o,r,i):t===422?new v3(t,o,r,i):t===429?new y3(t,o,r,i):t>=500?new x3(t,o,r,i):new Xr(t,o,r,i)}}class Vy extends Xr{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Gp extends Xr{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class d3 extends Gp{constructor({message:t}={}){super({message:t??"Request timed out."})}}class f3 extends Xr{}class h3 extends Xr{}class p3 extends Xr{}class m3 extends Xr{}class g3 extends Xr{}class v3 extends Xr{}class y3 extends Xr{}class x3 extends Xr{}const bz=/^[a-z][a-z0-9+.-]*:/i,_z=e=>bz.test(e);let $y=e=>($y=Array.isArray,$y(e));const Sz=$y;let Cz=Sz;const OC=Cz;function Az(e){if(!e)return!0;for(const t in e)return!1;return!0}function Tz(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const Iz=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Qi(`${e} must be an integer`);if(t<0)throw new Qi(`${e} must be a positive integer`);return t},Pz=e=>{try{return JSON.parse(e)}catch{return}};const Nz=e=>new Promise(t=>setTimeout(t,e));const wu="0.0.1";function Rz(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Oz=()=>{var e,t,n,r,i;const o=Rz();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wu,"X-Stainless-OS":MC(Deno.build.os),"X-Stainless-Arch":kC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wu,"X-Stainless-OS":MC((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":kC((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const a=kz();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function kz(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,a=r[3]||0;return{browser:t,version:`${i}.${o}.${a}`}}}return null}const kC=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",MC=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Lh;const Mz=()=>Lh??(Lh=Oz());function Dz(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function w3(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function Lz(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return w3({start(){},async pull(n){const{done:r,value:i}=await t.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function E3(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Bz(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const r=e.getReader(),i=r.cancel();r.releaseLock(),await i}const Fz=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});const b3=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t?.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function P1(e,t,n){return b3(),new File(e,t??"unknown_file",n)}function Uz(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const jz=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";const _3=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",Vz=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&_3(e),$z=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function zz(e,t,n){if(b3(),e=await e,Vz(e))return e instanceof File?e:P1([await e.arrayBuffer()],e.name);if($z(e)){const i=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),P1(await zy(i),t,n)}const r=await zy(e);if(t||(t=Uz(e)),!n?.type){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return P1(r,t,n)}async function zy(e){var t,n,r,i,o;let a=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)a.push(e);else if(_3(e))a.push(e instanceof Blob?e:await e.arrayBuffer());else if(jz(e))try{for(var c=!0,f=_o(e),d;d=await f.next(),t=d.done,!t;c=!0){i=d.value,c=!1;const m=i;a.push(...await zy(m))}}catch(m){n={error:m}}finally{try{!c&&!t&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}else{const m=(o=e?.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof e}${m?`; constructor: ${m}`:""}${Gz(e)}`)}return a}function Gz(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}class S3{constructor(t){this._client=t}}S3._key=[];function C3(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const DC=Object.freeze(Object.create(null)),Hz=(e=C3)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],a=n.reduce((m,v,E)=>{var C,I,P;/[?#]/.test(v)&&(i=!0);const N=r[E];let D=(i?encodeURIComponent:e)(""+N);return E!==r.length&&(N==null||typeof N=="object"&&N.toString===((P=Object.getPrototypeOf((I=Object.getPrototypeOf((C=N.hasOwnProperty)!==null&&C!==void 0?C:DC))!==null&&I!==void 0?I:DC))===null||P===void 0?void 0:P.toString))&&(D=N+"",o.push({start:m.length+v.length,length:D.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),m+v+(E===r.length?"":D)},""),c=a.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(c))!==null;)o.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(o.sort((m,v)=>m.start-v.start),o.length>0){let m=0;const v=o.reduce((E,C)=>{const I=" ".repeat(C.start-m),P="^".repeat(C.length);return m=C.start+C.length,E+I+P},"");throw new Qi(`Path parameters result in path with invalid segments:
${o.map(E=>E.error).join(`
`)}
${a}
${v}`)}return a}),Bh=Hz(C3);class A3 extends S3{create(t,n){var r;const{api_version:i=this._client.apiVersion}=t,o=O0(t,["api_version"]);if("model"in o&&"agent_config"in o)throw new Qi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Qi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Bh`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=t.stream)!==null&&r!==void 0?r:!1}))}delete(t,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Bh`/${i}/interactions/${t}`,r)}cancel(t,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Bh`/${i}/interactions/${t}/cancel`,r)}get(t,n={},r){var i;const o=n??{},{api_version:a=this._client.apiVersion}=o,c=O0(o,["api_version"]);return this._client.get(Bh`/${a}/interactions/${t}`,Object.assign(Object.assign({query:c},r),{stream:(i=n?.stream)!==null&&i!==void 0?i:!1}))}}A3._key=Object.freeze(["interactions"]);class T3 extends A3{}function qz(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}let Fh;function Aw(e){let t;return(Fh??(t=new globalThis.TextEncoder,Fh=t.encode.bind(t)))(e)}let Uh;function LC(e){let t;return(Uh??(t=new globalThis.TextDecoder,Uh=t.decode.bind(t)))(e)}class Hp{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Aw(t):t;this.buffer=qz([this.buffer,n]);const r=[];let i;for(;(i=Wz(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(LC(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,a=LC(this.buffer.subarray(0,o));r.push(a),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Hp.NEWLINE_CHARS=new Set([`
`,"\r"]);Hp.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Wz(e,t){for(let i=t??0;i<e.length;i++){if(e[i]===10)return{preceding:i,index:i+1,carriage:!1};if(e[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Kz(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}const k0={off:0,error:200,warn:300,info:400,debug:500},BC=(e,t,n)=>{if(e){if(Tz(k0,e))return e;Wr(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(k0))}`)}};function md(){}function jh(e,t,n){return!t||k0[e]>k0[n]?md:t[e].bind(t)}const Yz={error:md,warn:md,info:md,debug:md};let FC=new WeakMap;function Wr(e){var t;const n=e.logger,r=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return Yz;const i=FC.get(n);if(i&&i[0]===r)return i[1];const o={error:jh("error",n,r),warn:jh("warn",n,r),info:jh("info",n,r),debug:jh("debug",n,r)};return FC.set(n,[r,o]),o}const il=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class Su{constructor(t,n,r){this.iterator=t,this.controller=n,this.client=r}static fromSSEResponse(t,n,r){let i=!1;const o=r?Wr(r):console;function a(){return bo(this,arguments,function*(){var f,d,m,v;if(i)throw new Qi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let E=!1;try{try{for(var C=!0,I=_o(Xz(t,n)),P;P=yield gt(I.next()),f=P.done,!f;C=!0){v=P.value,C=!1;const N=v;if(!E)if(N.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield gt(JSON.parse(N.data))}catch(D){throw o.error("Could not parse message into JSON:",N.data),o.error("From chunk:",N.raw),D}}}catch(N){d={error:N}}finally{try{!C&&!f&&(m=I.return)&&(yield gt(m.call(I)))}finally{if(d)throw d.error}}E=!0}catch(N){if(Uy(N))return yield gt(void 0);throw N}finally{E||n.abort()}})}return new Su(a,n,r)}static fromReadableStream(t,n,r){let i=!1;function o(){return bo(this,arguments,function*(){var f,d,m,v;const E=new Hp,C=E3(t);try{for(var I=!0,P=_o(C),N;N=yield gt(P.next()),f=N.done,!f;I=!0){v=N.value,I=!1;const D=v;for(const F of E.decode(D))yield yield gt(F)}}catch(D){d={error:D}}finally{try{!I&&!f&&(m=P.return)&&(yield gt(m.call(P)))}finally{if(d)throw d.error}}for(const D of E.flush())yield yield gt(D)})}function a(){return bo(this,arguments,function*(){var f,d,m,v;if(i)throw new Qi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let E=!1;try{try{for(var C=!0,I=_o(o()),P;P=yield gt(I.next()),f=P.done,!f;C=!0){v=P.value,C=!1;const N=v;E||N&&(yield yield gt(JSON.parse(N)))}}catch(N){d={error:N}}finally{try{!C&&!f&&(m=I.return)&&(yield gt(m.call(I)))}finally{if(d)throw d.error}}E=!0}catch(N){if(Uy(N))return yield gt(void 0);throw N}finally{E||n.abort()}})}return new Su(a,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const a=r.next();t.push(a),n.push(a)}return o.shift()}});return[new Su(()=>i(t),this.controller,this.client),new Su(()=>i(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return w3({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const a=Aw(JSON.stringify(i)+`
`);r.enqueue(a)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function Xz(e,t){return bo(this,arguments,function*(){var r,i,o,a;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Qi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Qi("Attempted to iterate over a response with no body");const c=new Zz,f=new Hp,d=E3(e.body);try{for(var m=!0,v=_o(Jz(d)),E;E=yield gt(v.next()),r=E.done,!r;m=!0){a=E.value,m=!1;const C=a;for(const I of f.decode(C)){const P=c.decode(I);P&&(yield yield gt(P))}}}catch(C){i={error:C}}finally{try{!m&&!r&&(o=v.return)&&(yield gt(o.call(v)))}finally{if(i)throw i.error}}for(const C of f.flush()){const I=c.decode(C);I&&(yield yield gt(I))}})}function Jz(e){return bo(this,arguments,function*(){var n,r,i,o;let a=new Uint8Array;try{for(var c=!0,f=_o(e),d;d=yield gt(f.next()),n=d.done,!n;c=!0){o=d.value,c=!1;const m=o;if(m==null)continue;const v=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?Aw(m):m;let E=new Uint8Array(a.length+v.length);E.set(a),E.set(v,a.length),a=E;let C;for(;(C=Kz(a))!==-1;)yield yield gt(a.slice(0,C)),a=a.slice(C)}}catch(m){r={error:m}}finally{try{!c&&!n&&(i=f.return)&&(yield gt(i.call(f)))}finally{if(r)throw r.error}}a.length>0&&(yield yield gt(a))})}class Zz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,i]=Qz(t,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Qz(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}async function eG(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=t,a=await(async()=>{var c;if(t.options.stream)return Wr(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Su.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const f=n.headers.get("content-type"),d=(c=f?.split(";")[0])===null||c===void 0?void 0:c.trim();return d?.includes("application/json")||d?.endsWith("+json")?await n.json():await n.text()})();return Wr(e).debug(`[${r}] response parsed`,il({retryOfRequestLogID:i,url:n.url,status:n.status,body:a,durationMs:Date.now()-o})),a}class Tw extends Promise{constructor(t,n,r=eG){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=t}_thenUnwrap(t){return new Tw(this.client,this.responsePromise,async(n,r)=>t(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}const I3=Symbol("brand.privateNullableHeaders");function*tG(e){if(!e)return;if(I3 in e){const{values:r,nulls:i}=e;yield*r.entries();for(const o of i)yield[o,null];return}let t=!1,n;e instanceof Headers?n=e.entries():OC(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=OC(r[1])?r[1]:[r[1]];let a=!1;for(const c of o)c!==void 0&&(t&&!a&&(a=!0,yield[i,null]),yield[i,c])}}const N1=e=>{const t=new Headers,n=new Set;for(const r of e){const i=new Set;for(const[o,a]of tG(r)){const c=o.toLowerCase();i.has(c)||(t.delete(o),i.add(c)),a===null?(t.delete(o),n.add(c)):(t.append(o,a),n.delete(c))}}return{[I3]:!0,values:t,nulls:n}};const R1=e=>{var t,n,r,i,o,a;if(typeof globalThis.process<"u")return(r=(n=(t=T7)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(a=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,e))===null||a===void 0?void 0:a.trim()};var P3;class qp{constructor(t){var n,r,i,o,a,c,f,d=t===void 0?{}:t,{baseURL:m=R1("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=R1("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=d,C=O0(d,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:v,apiVersion:E},C),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(r=I.timeout)!==null&&r!==void 0?r:qp.DEFAULT_TIMEOUT,this.logger=(i=I.logger)!==null&&i!==void 0?i:console;const P="warn";this.logLevel=P,this.logLevel=(a=(o=BC(I.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:BC(R1("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:P,this.fetchOptions=I.fetchOptions,this.maxRetries=(c=I.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(f=I.fetch)!==null&&f!==void 0?f:Dz(),this.encoder=Fz,this._options=I,this.apiKey=v,this.apiVersion=E}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){if(this.apiKey!=null)return N1([{"x-goog-api-key":this.apiKey}])}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Qi(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${wu}`}defaultIdempotencyKey(){return`stainless-node-retry-${Ez()}`}makeStatusError(t,n,r,i){return Xr.generate(t,n,r,i)}buildURL(t,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=_z(t)?new URL(t):new URL(i+(i.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),a=this.defaultQuery();return Az(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(t){}async prepareRequest(t,{url:n,options:r}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:t,path:n},i)))}request(t,n=null){return new Tw(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,r){var i,o,a;const c=await t,f=(i=c.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=f),await this.prepareOptions(c);const{req:d,url:m,timeout:v}=await this.buildRequest(c,{retryCount:f-n});await this.prepareRequest(d,{url:m,options:c});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=r===void 0?"":`, retryOf: ${r}`,I=Date.now();if(Wr(this).debug(`[${E}] sending request`,il({retryOfRequestLogID:r,method:c.method,url:m,options:c,headers:d.headers})),!((o=c.signal)===null||o===void 0)&&o.aborted)throw new Vy;const P=new AbortController,N=await this.fetchWithTimeout(m,d,v,P).catch(jy),D=Date.now();if(N instanceof globalThis.Error){const L=`retrying, ${n} attempts remaining`;if(!((a=c.signal)===null||a===void 0)&&a.aborted)throw new Vy;const V=Uy(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(n)return Wr(this).info(`[${E}] connection ${V?"timed out":"failed"} - ${L}`),Wr(this).debug(`[${E}] connection ${V?"timed out":"failed"} (${L})`,il({retryOfRequestLogID:r,url:m,durationMs:D-I,message:N.message})),this.retryRequest(c,n,r??E);throw Wr(this).info(`[${E}] connection ${V?"timed out":"failed"} - error; no more retries left`),Wr(this).debug(`[${E}] connection ${V?"timed out":"failed"} (error; no more retries left)`,il({retryOfRequestLogID:r,url:m,durationMs:D-I,message:N.message})),V?new d3:new Gp({cause:N})}const F=`[${E}${C}] ${d.method} ${m} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${D-I}ms`;if(!N.ok){const L=await this.shouldRetry(N);if(n&&L){const X=`retrying, ${n} attempts remaining`;return await Bz(N.body),Wr(this).info(`${F} - ${X}`),Wr(this).debug(`[${E}] response error (${X})`,il({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:D-I})),this.retryRequest(c,n,r??E,N.headers)}const V=L?"error; no more retries left":"error; not retryable";Wr(this).info(`${F} - ${V}`);const G=await N.text().catch(X=>jy(X).message),q=Pz(G),W=q?void 0:G;throw Wr(this).debug(`[${E}] response error (${V})`,il({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,message:W,durationMs:Date.now()-I})),this.makeStatusError(N.status,q,W,N.headers)}return Wr(this).info(F),Wr(this).debug(`[${E}] response start`,il({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:D-I})),{response:N,options:c,controller:P,requestLogID:E,retryOfRequestLogID:r,startTime:I}}async fetchWithTimeout(t,n,r,i){const o=n||{},{signal:a,method:c}=o,f=O0(o,["signal","method"]);a&&a.addEventListener("abort",()=>i.abort());const d=setTimeout(()=>i.abort(),r),m=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,v=Object.assign(Object.assign(Object.assign({signal:i.signal},m?{duplex:"half"}:{}),{method:"GET"}),f);c&&(v.method=c.toUpperCase());try{return await this.fetch.call(void 0,t,v)}finally{clearTimeout(d)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r,i){var o;let a;const c=i?.get("retry-after-ms");if(c){const d=parseFloat(c);Number.isNaN(d)||(a=d)}const f=i?.get("retry-after");if(f&&!a){const d=parseFloat(f);Number.isNaN(d)?a=Date.parse(f)-Date.now():a=d*1e3}if(!(a&&0<=a&&a<60*1e3)){const d=(o=t.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,d)}return await Nz(a),this.makeRequest(t,n-1,r)}calculateDefaultRetryTimeoutMillis(t,n){const o=n-t,a=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return a*c*1e3}async buildRequest(t,{retryCount:n=0}={}){var r,i,o;const a=Object.assign({},t),{method:c,path:f,query:d,defaultBaseURL:m}=a,v=this.buildURL(f,d,m);"timeout"in a&&Iz("timeout",a.timeout),a.timeout=(r=a.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:E,body:C}=this.buildBody({options:a}),I=await this.buildHeaders({options:t,method:c,bodyHeaders:E,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:I},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:v,timeout:a.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const a=N1([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),Mz()),await this.authHeaders(t),this._options.defaultHeaders,r,t.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const r=N1([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:Lz(t)}:this.encoder({body:t,headers:r})}}qp.DEFAULT_TIMEOUT=6e4;class yr extends qp{constructor(){super(...arguments),this.interactions=new T3(this)}}P3=yr;yr.GeminiNextGenAPIClient=P3;yr.GeminiNextGenAPIClientError=Qi;yr.APIError=Xr;yr.APIConnectionError=Gp;yr.APIConnectionTimeoutError=d3;yr.APIUserAbortError=Vy;yr.NotFoundError=m3;yr.ConflictError=g3;yr.RateLimitError=y3;yr.BadRequestError=f3;yr.AuthenticationError=h3;yr.InternalServerError=x3;yr.PermissionDeniedError=p3;yr.UnprocessableEntityError=v3;yr.toFile=zz;yr.Interactions=T3;function nG(e,t){const n={},r=b(e,["name"]);return r!=null&&S(n,["_url","name"],r),n}function rG(e,t){const n={},r=b(e,["name"]);return r!=null&&S(n,["_url","name"],r),n}function iG(e,t){const n={},r=b(e,["sdkHttpResponse"]);return r!=null&&S(n,["sdkHttpResponse"],r),n}function oG(e,t){const n={},r=b(e,["sdkHttpResponse"]);return r!=null&&S(n,["sdkHttpResponse"],r),n}function sG(e,t,n){const r={};if(b(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=b(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&S(t,["displayName"],i),b(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=b(e,["epochCount"]);t!==void 0&&o!=null&&S(t,["tuningTask","hyperparameters","epochCount"],o);const a=b(e,["learningRateMultiplier"]);if(a!=null&&S(r,["tuningTask","hyperparameters","learningRateMultiplier"],a),b(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(b(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(b(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=b(e,["batchSize"]);t!==void 0&&c!=null&&S(t,["tuningTask","hyperparameters","batchSize"],c);const f=b(e,["learningRate"]);if(t!==void 0&&f!=null&&S(t,["tuningTask","hyperparameters","learningRate"],f),b(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(b(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function aG(e,t,n){const r={};let i=b(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const C=b(e,["validationDataset"]);t!==void 0&&C!=null&&S(t,["supervisedTuningSpec"],UC(C))}else if(i==="PREFERENCE_TUNING"){const C=b(e,["validationDataset"]);t!==void 0&&C!=null&&S(t,["preferenceOptimizationSpec"],UC(C))}const o=b(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&S(t,["tunedModelDisplayName"],o);const a=b(e,["description"]);t!==void 0&&a!=null&&S(t,["description"],a);let c=b(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const C=b(e,["epochCount"]);t!==void 0&&C!=null&&S(t,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(c==="PREFERENCE_TUNING"){const C=b(e,["epochCount"]);t!==void 0&&C!=null&&S(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let f=b(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const C=b(e,["learningRateMultiplier"]);t!==void 0&&C!=null&&S(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(f==="PREFERENCE_TUNING"){const C=b(e,["learningRateMultiplier"]);t!==void 0&&C!=null&&S(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let d=b(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=b(e,["exportLastCheckpointOnly"]);t!==void 0&&C!=null&&S(t,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(d==="PREFERENCE_TUNING"){const C=b(e,["exportLastCheckpointOnly"]);t!==void 0&&C!=null&&S(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let m=b(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const C=b(e,["adapterSize"]);t!==void 0&&C!=null&&S(t,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(m==="PREFERENCE_TUNING"){const C=b(e,["adapterSize"]);t!==void 0&&C!=null&&S(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(b(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(b(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=b(e,["labels"]);t!==void 0&&v!=null&&S(t,["labels"],v);const E=b(e,["beta"]);return t!==void 0&&E!=null&&S(t,["preferenceOptimizationSpec","hyperParameters","beta"],E),r}function lG(e,t){const n={},r=b(e,["baseModel"]);r!=null&&S(n,["baseModel"],r);const i=b(e,["preTunedModel"]);i!=null&&S(n,["preTunedModel"],i);const o=b(e,["trainingDataset"]);o!=null&&xG(o);const a=b(e,["config"]);return a!=null&&sG(a,n),n}function uG(e,t){const n={},r=b(e,["baseModel"]);r!=null&&S(n,["baseModel"],r);const i=b(e,["preTunedModel"]);i!=null&&S(n,["preTunedModel"],i);const o=b(e,["trainingDataset"]);o!=null&&wG(o,n,t);const a=b(e,["config"]);return a!=null&&aG(a,n,t),n}function cG(e,t){const n={},r=b(e,["name"]);return r!=null&&S(n,["_url","name"],r),n}function dG(e,t){const n={},r=b(e,["name"]);return r!=null&&S(n,["_url","name"],r),n}function fG(e,t,n){const r={},i=b(e,["pageSize"]);t!==void 0&&i!=null&&S(t,["_query","pageSize"],i);const o=b(e,["pageToken"]);t!==void 0&&o!=null&&S(t,["_query","pageToken"],o);const a=b(e,["filter"]);return t!==void 0&&a!=null&&S(t,["_query","filter"],a),r}function hG(e,t,n){const r={},i=b(e,["pageSize"]);t!==void 0&&i!=null&&S(t,["_query","pageSize"],i);const o=b(e,["pageToken"]);t!==void 0&&o!=null&&S(t,["_query","pageToken"],o);const a=b(e,["filter"]);return t!==void 0&&a!=null&&S(t,["_query","filter"],a),r}function pG(e,t){const n={},r=b(e,["config"]);return r!=null&&fG(r,n),n}function mG(e,t){const n={},r=b(e,["config"]);return r!=null&&hG(r,n),n}function gG(e,t){const n={},r=b(e,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=b(e,["nextPageToken"]);i!=null&&S(n,["nextPageToken"],i);const o=b(e,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>N3(c))),S(n,["tuningJobs"],a)}return n}function vG(e,t){const n={},r=b(e,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=b(e,["nextPageToken"]);i!=null&&S(n,["nextPageToken"],i);const o=b(e,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>Gy(c))),S(n,["tuningJobs"],a)}return n}function yG(e,t){const n={},r=b(e,["name"]);r!=null&&S(n,["model"],r);const i=b(e,["name"]);return i!=null&&S(n,["endpoint"],i),n}function xG(e,t){const n={};if(b(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(b(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=b(e,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),S(n,["examples","examples"],i)}return n}function wG(e,t,n){const r={};let i=b(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const a=b(e,["gcsUri"]);t!==void 0&&a!=null&&S(t,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(i==="PREFERENCE_TUNING"){const a=b(e,["gcsUri"]);t!==void 0&&a!=null&&S(t,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=b(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=b(e,["vertexDatasetResource"]);t!==void 0&&a!=null&&S(t,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=b(e,["vertexDatasetResource"]);t!==void 0&&a!=null&&S(t,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(b(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function N3(e,t){const n={},r=b(e,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=b(e,["name"]);i!=null&&S(n,["name"],i);const o=b(e,["state"]);o!=null&&S(n,["state"],GO(o));const a=b(e,["createTime"]);a!=null&&S(n,["createTime"],a);const c=b(e,["tuningTask","startTime"]);c!=null&&S(n,["startTime"],c);const f=b(e,["tuningTask","completeTime"]);f!=null&&S(n,["endTime"],f);const d=b(e,["updateTime"]);d!=null&&S(n,["updateTime"],d);const m=b(e,["description"]);m!=null&&S(n,["description"],m);const v=b(e,["baseModel"]);v!=null&&S(n,["baseModel"],v);const E=b(e,["_self"]);return E!=null&&S(n,["tunedModel"],yG(E)),n}function Gy(e,t){const n={},r=b(e,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=b(e,["name"]);i!=null&&S(n,["name"],i);const o=b(e,["state"]);o!=null&&S(n,["state"],GO(o));const a=b(e,["createTime"]);a!=null&&S(n,["createTime"],a);const c=b(e,["startTime"]);c!=null&&S(n,["startTime"],c);const f=b(e,["endTime"]);f!=null&&S(n,["endTime"],f);const d=b(e,["updateTime"]);d!=null&&S(n,["updateTime"],d);const m=b(e,["error"]);m!=null&&S(n,["error"],m);const v=b(e,["description"]);v!=null&&S(n,["description"],v);const E=b(e,["baseModel"]);E!=null&&S(n,["baseModel"],E);const C=b(e,["tunedModel"]);C!=null&&S(n,["tunedModel"],C);const I=b(e,["preTunedModel"]);I!=null&&S(n,["preTunedModel"],I);const P=b(e,["supervisedTuningSpec"]);P!=null&&S(n,["supervisedTuningSpec"],P);const N=b(e,["preferenceOptimizationSpec"]);N!=null&&S(n,["preferenceOptimizationSpec"],N);const D=b(e,["tuningDataStats"]);D!=null&&S(n,["tuningDataStats"],D);const F=b(e,["encryptionSpec"]);F!=null&&S(n,["encryptionSpec"],F);const L=b(e,["partnerModelTuningSpec"]);L!=null&&S(n,["partnerModelTuningSpec"],L);const V=b(e,["customBaseModel"]);V!=null&&S(n,["customBaseModel"],V);const G=b(e,["experiment"]);G!=null&&S(n,["experiment"],G);const q=b(e,["labels"]);q!=null&&S(n,["labels"],q);const W=b(e,["outputUri"]);W!=null&&S(n,["outputUri"],W);const Z=b(e,["pipelineJob"]);Z!=null&&S(n,["pipelineJob"],Z);const X=b(e,["serviceAccount"]);X!=null&&S(n,["serviceAccount"],X);const fe=b(e,["tunedModelDisplayName"]);fe!=null&&S(n,["tunedModelDisplayName"],fe);const se=b(e,["veoTuningSpec"]);return se!=null&&S(n,["veoTuningSpec"],se),n}function EG(e,t){const n={},r=b(e,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=b(e,["name"]);i!=null&&S(n,["name"],i);const o=b(e,["metadata"]);o!=null&&S(n,["metadata"],o);const a=b(e,["done"]);a!=null&&S(n,["done"],a);const c=b(e,["error"]);return c!=null&&S(n,["error"],c),n}function UC(e,t){const n={},r=b(e,["gcsUri"]);r!=null&&S(n,["validationDatasetUri"],r);const i=b(e,["vertexDatasetResource"]);return i!=null&&S(n,["validationDatasetUri"],i),n}class bG extends Ns{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Nl(ws.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:Oy.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=dG(t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>Gy(m))}else{const d=cG(t);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>N3(m))}}async listInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=mG(t);return c=Ue("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=vG(m),E=new dC;return Object.assign(E,v),E})}else{const d=pG(t);return c=Ue("tunedModels",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=gG(m),E=new dC;return Object.assign(E,v),E})}}async cancel(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=rG(t);return c=Ue("{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=oG(m),E=new fC;return Object.assign(E,v),E})}else{const d=nG(t);return c=Ue("{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:m.headers},E})),a.then(m=>{const v=iG(m),E=new fC;return Object.assign(E,v),E})}}async tuneInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=uG(t,t);return o=Ue("tuningJobs",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>Gy(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=lG(t);return o=Ue("tunedModels",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>EG(f))}}}class _G{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const SG=1024*1024*8,CG=3,AG=1e3,TG=2,M0="x-goog-upload-status";async function IG(e,t,n){var r;const i=await R3(e,t,n),o=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[M0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function PG(e,t,n){var r;const i=await R3(e,t,n),o=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[M0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=FO(o),c=new ww;return Object.assign(c,a),c}async function R3(e,t,n){var r,i;let o=0,a=0,c=new ky(new Response),f="upload";for(o=e.size;a<o;){const d=Math.min(SG,o-a),m=e.slice(a,a+d);a+d>=o&&(f+=", finalize");let v=0,E=AG;for(;v<CG&&(c=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((r=c?.headers)===null||r===void 0)&&r[M0]));)v++,await RG(E),E=E*TG;if(a+=d,((i=c?.headers)===null||i===void 0?void 0:i[M0])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function NG(e){return{size:e.size,type:e.type}}function RG(e){return new Promise(t=>setTimeout(t,e))}class OG{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await IG(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await PG(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await NG(t)}}class kG{create(t,n,r){return new MG(t,n,r)}}class MG{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const jC="x-goog-api-key";class DG{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(jC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(jC,this.apiKey)}}}const LG="gl-node/";class BG{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new yr({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=R7(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const i=new DG(this.apiKey);this.apiClient=new N$({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:LG+"web",uploader:new OG,downloader:new _G}),this.models=new Y$(this.apiClient),this.live=new z$(this.apiClient,i,new kG),this.batches=new sU(this.apiClient),this.chats=new VU(this.models,this.apiClient),this.caches=new FU(this.apiClient),this.files=new JU(this.apiClient),this.operations=new X$(this.apiClient),this.authTokens=new fz(this.apiClient),this.tunings=new bG(this.apiClient),this.fileSearchStores=new wz(this.apiClient)}}const FG={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GEMINI_API_KEY:"",VITE_SUPABASE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hYmpsaGpsa2VlaGFjenhyZ2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4Mzg5MDMsImV4cCI6MjA4MTQxNDkwM30.eHuUAZMQ9eGffxCwYwOczhzZuRksv41QoUaIulebpT4",VITE_SUPABASE_URL:"https://mabjlhjlkeehaczxrgcy.supabase.co"},UG=()=>{},VC=UG();let Hy=null;if(VC)try{Hy=new BG({apiKey:VC})}catch(e){console.error("Error initializing Gemini:",e)}else console.warn("VITE_GEMINI_API_KEY no encontrada. El chat funcionar en modo DEMO.");const jG=async(e,t)=>{if(!Hy)return await new Promise(o=>setTimeout(o,800)),e.toLowerCase().includes("precio")||e.toLowerCase().includes("valor")?"Nuestros cortes parten desde $19.990. Los decants de perfumes tienen precios variados, por ejemplo Good Girl 5ml a $8.990. Te gustara ver el catlogo completo?":e.toLowerCase().includes("domicilio")||e.toLowerCase().includes("casa")?"S! Vamos a tu domicilio en Santiago Centro y uoa por un recargo de $3.000 adicional. Llevamos todo lo necesario para tu cambio de look.":e.toLowerCase().includes("hola")||e.toLowerCase().includes("buenos")?"Hola! Bienvenid@ a Tus3B Style. Soy tu asistente virtual (Modo Demo). Puedo ayudarte con precios, zonas de cobertura y recomendaciones de perfumes.":"Gracias por tu mensaje. Como estoy en Modo Demo (sin API Key configurada), mis respuestas son limitadas. Te sugiero contactarnos directamente por WhatsApp para una atencin personalizada.";const n=ya.map(o=>`- ID: ${o.id}
     - Marca: ${o.brand}
     - Nombre: ${o.name}
     - Descripcin: ${o.description}
     - Notas Olfativas: ${o.notes.join(", ")}
     - Categora: ${o.category==="arab"?"Perfumera rabe (Tendencia)":"Clsico de Lujo"}
     - Precios: 5ml $${o.price5ml} / 10ml $${o.price10ml} ${o.priceFullBottle?`/ Botella: $${o.priceFullBottle}`:""}
     - STOCK: ${o.stock?"DISPONIBLE (Recomendar)":"AGOTADO (No recomendar como primera opcin)"}
     - Spray: ${o.isSpray?"S, es formato desodorante/body spray":"No, es perfume concentrado"}`).join(`

`),r=bu.map(o=>`- ${o.name}: ${o.description}. Precio: ${o.price}. Incluye: ${o.includes.join(", ")}.`).join(`
`),i=`
    Eres "StyleBot", el asistente experto y vendedor estrella de "Tus3B Style".
    
    Tus objetivos principales:
    1. ASESORAR sobre perfumes basndote en las notas que busca el usuario (ej: dulce, fresco, amaderado).
    2. VENDER servicios de peluquera (Cortes desde $7.000).

    REGLAS DE ORO PARA PERFUMES (SGUELAS SIEMPRE):
    1. **VERIFICAR STOCK**: Antes de recomendar, mira el campo "STOCK".
       - Prioriza SIEMPRE recomendar perfumes con "STOCK: DISPONIBLE".
       - Si el usuario pide algo especfico que est "AGOTADO", avsale pero ofrece inmediatemente una alternativa disponible.
    2. **REGLA DE LAS 2 OPCIONES**: Cuando te pidan una recomendacin, SIEMPRE sugiere exactamente 2 opciones del catlogo que mejor se ajusten.
       - Opcin 1: La mejor coincidencia (Disponible).
       - Opcin 2: Una alternativa interesante o complementaria (Disponible).
    3. **Precios Claros**: Menciona los precios de los decants (5ml y 10ml) en tus recomendaciones.

    Contexto del Catlogo de Perfumes (BASE DE DATOS ACTUALIZADA):
    ${n}

    Contexto de Servicios:
    ${r}

    Tono y Estilo:
    - Eres cercana, experta y entusiasta (usa emojis con moderacin ).
    - Si te preguntan "qu me recomiendas", no des una lista larga. Cntrate en tus 2 mejores cartas.
    - Responde siempre en espaol de Chile.
    - Si preguntan por delivery/domicilio: $3.000 recargo en Stgo Centro y uoa.
  `;try{return(await Hy.models.generateContent({model:"gemini-1.5-flash",contents:[{role:"user",parts:[{text:i+`

 Historial de chat:
`+t.join(`
`)+`

Usuario: `+e}]}]})).text||"Lo siento, no pude procesar tu solicitud."}catch(o){return console.error("Error calling Gemini:",o),"Hubo un error al conectar con el asistente. Por favor intenta ms tarde."}},VG=()=>{const[e,t]=M.useState(!1),[n,r]=M.useState([{role:"bot",text:"Hola! Soy tu asistente de estilo. Buscas un perfume especial o tienes dudas sobre el corte a domicilio?"}]),[i,o]=M.useState(""),[a,c]=M.useState(!1),f=M.useRef(null),d=()=>{f.current?.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{d()},[n,e]);const m=async()=>{if(!i.trim()||a)return;const E=i;r(P=>[...P,{role:"user",text:E}]),o(""),c(!0);const C=n.map(P=>`${P.role==="user"?"Usuario":"Bot"}: ${P.text}`),I=await jG(E,C);r(P=>[...P,{role:"bot",text:I}]),c(!1)},v=E=>{E.key==="Enter"&&m()};return R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:()=>t(!e),className:`fixed bottom-6 right-6 z-50 p-4 rounded-full shadow-2xl transition-all duration-300 hover:scale-110 flex items-center justify-center ${e?"bg-stone-800 rotate-90":"bg-stone-900 rotate-0"}`,children:e?R.jsx(Hd,{color:"white"}):R.jsx(_d,{color:"white"})}),e&&R.jsxs("div",{className:"fixed bottom-24 right-6 w-80 sm:w-96 bg-white rounded-2xl shadow-2xl border border-stone-200 z-50 flex flex-col overflow-hidden animate-in slide-in-from-bottom-10 fade-in duration-300 h-[500px]",children:[R.jsxs("div",{className:"bg-stone-900 p-4 flex items-center space-x-3",children:[R.jsx("div",{className:"bg-stone-700 p-2 rounded-full",children:R.jsx(_d,{size:16,className:"text-yellow-400"})}),R.jsxs("div",{children:[R.jsx("h3",{className:"text-white font-serif font-bold",children:"Asistente Tus3B"}),R.jsx("p",{className:"text-stone-400 text-xs",children:"Te ayudo a elegir tu estilo"})]})]}),R.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-stone-50",children:[n.map((E,C)=>R.jsx("div",{className:`flex ${E.role==="user"?"justify-end":"justify-start"}`,children:R.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-sm ${E.role==="user"?"bg-stone-800 text-white rounded-br-none":"bg-white text-stone-800 border border-stone-200 rounded-bl-none shadow-sm"}`,children:E.text})},C)),a&&R.jsx("div",{className:"flex justify-start",children:R.jsxs("div",{className:"bg-white p-3 rounded-2xl rounded-bl-none border border-stone-200 shadow-sm flex items-center space-x-2",children:[R.jsx(x0,{size:16,className:"animate-spin text-stone-400"}),R.jsx("span",{className:"text-xs text-stone-400",children:"Escribiendo..."})]})}),R.jsx("div",{ref:f})]}),R.jsxs("div",{className:"p-3 bg-white border-t border-stone-100 flex items-center gap-2",children:[R.jsx("input",{type:"text",value:i,onChange:E=>o(E.target.value),onKeyDown:v,placeholder:"Pregunta por perfumes o cortes...",className:"flex-1 text-sm border-none focus:ring-0 bg-stone-100 rounded-full px-4 py-2 text-stone-800 placeholder-stone-400"}),R.jsx("button",{onClick:m,disabled:a||!i.trim(),className:"p-2 bg-stone-900 text-white rounded-full hover:bg-stone-700 disabled:opacity-50 transition",children:R.jsx(xR,{size:16})})]})]})]})},$G=({isHomeService:e,onGoHome:t,onGoCatalog:n})=>(M.useEffect(()=>{window.scrollTo(0,0)},[]),R.jsx("div",{className:"min-h-[70vh] flex items-center justify-center p-4 fade-in",children:R.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-3xl shadow-2xl border border-stone-100 max-w-2xl w-full text-center relative overflow-hidden",children:[R.jsx("div",{className:"absolute -top-20 -right-20 w-64 h-64 bg-green-50 rounded-full opacity-50 blur-3xl pointer-events-none"}),R.jsx("div",{className:"absolute -bottom-20 -left-20 w-64 h-64 bg-amber-50 rounded-full opacity-50 blur-3xl pointer-events-none"}),R.jsxs("div",{className:"relative z-10",children:[R.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 text-green-600 rounded-full mb-6 shadow-sm animate-in zoom-in spin-in-12 duration-700",children:R.jsx(gR,{size:40,strokeWidth:2.5})}),R.jsx("h2",{className:"serif text-4xl text-stone-900 mb-3",children:"Reserva Confirmada!"}),R.jsx("p",{className:"text-xl text-stone-600 font-light mb-8",children:"Gracias por tu confianza!"}),!e&&R.jsxs("div",{className:"bg-stone-50 p-6 rounded-2xl mb-8 border border-stone-100 transform transition hover:scale-105 duration-300",children:[R.jsxs("h3",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-3 flex items-center justify-center gap-2",children:[R.jsx(vR,{size:14})," Direccin del Servicio"]}),R.jsx("p",{className:"text-xl font-medium text-stone-800",children:"Diagonal Vicua Mackenna 2004"}),R.jsx("p",{className:"text-lg text-stone-600",children:"Torre B, Santiago"})]}),R.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-8",children:[R.jsxs("button",{onClick:t,className:"flex items-center justify-center gap-2 px-8 py-4 bg-stone-100 text-stone-700 rounded-xl font-bold hover:bg-stone-200 transition-colors w-full sm:w-auto",children:[R.jsx(j5,{size:20}),"Regresar al Inicio"]}),R.jsxs("button",{onClick:n,className:"flex items-center justify-center gap-2 px-8 py-4 bg-stone-900 text-white rounded-xl font-bold hover:bg-stone-800 transition-transform hover:-translate-y-1 shadow-lg w-full sm:w-auto",children:[R.jsx(bd,{size:20}),R.jsxs("span",{children:["Venta de Perfumes ",R.jsx("span",{className:"block text-[10px] font-normal opacity-80 leading-none mt-0.5",children:"Formatos 5ml y 10ml"})]})]})]})]})]})})),zG=()=>R.jsx("section",{className:"py-24 bg-white",children:R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[R.jsxs("div",{className:"text-center mb-16",children:[R.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Testimonios"}),R.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Lo que dicen nuestras clientas"})]}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:dB.map(e=>R.jsxs("div",{className:"bg-stone-50 p-8 rounded-sm hover:shadow-lg transition-shadow duration-300 relative",children:[R.jsx(Y5,{className:"absolute top-6 right-6 text-stone-200",size:40}),R.jsx("div",{className:"flex space-x-1 mb-4 text-amber-500",children:[...Array(5)].map((t,n)=>R.jsx(tB,{size:16,fill:n<e.rating?"currentColor":"none",className:n<e.rating?"text-amber-500":"text-stone-300"},n))}),R.jsxs("p",{className:"text-stone-600 italic mb-6 leading-relaxed relative z-10",children:['"',e.comment,'"']}),R.jsxs("div",{className:"flex justify-between items-end border-t border-stone-200 pt-4",children:[R.jsxs("div",{children:[R.jsx("h4",{className:"font-bold text-stone-900",children:e.name}),R.jsx("span",{className:"text-xs text-stone-400 font-medium",children:"Cliente Verificado"})]}),R.jsx("span",{className:"text-xs text-stone-400",children:e.date})]})]},e.id))})]})});var GG=Object.defineProperty,D0=Object.getOwnPropertySymbols,O3=Object.prototype.hasOwnProperty,k3=Object.prototype.propertyIsEnumerable,$C=(e,t,n)=>t in e?GG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qy=(e,t)=>{for(var n in t||(t={}))O3.call(t,n)&&$C(e,n,t[n]);if(D0)for(var n of D0(t))k3.call(t,n)&&$C(e,n,t[n]);return e},Wy=(e,t)=>{var n={};for(var r in e)O3.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&D0)for(var r of D0(e))t.indexOf(r)<0&&k3.call(e,r)&&(n[r]=e[r]);return n};var xl;(e=>{const t=class Ct{constructor(f,d,m,v){if(this.version=f,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],f<Ct.MIN_VERSION||f>Ct.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=f*4+17;let E=[];for(let I=0;I<this.size;I++)E.push(!1);for(let I=0;I<this.size;I++)this.modules.push(E.slice()),this.isFunction.push(E.slice());this.drawFunctionPatterns();const C=this.addEccAndInterleave(m);if(this.drawCodewords(C),v==-1){let I=1e9;for(let P=0;P<8;P++){this.applyMask(P),this.drawFormatBits(P);const N=this.getPenaltyScore();N<I&&(v=P,I=N),this.applyMask(P)}}i(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(f,d){const m=e.QrSegment.makeSegments(f);return Ct.encodeSegments(m,d)}static encodeBinary(f,d){const m=e.QrSegment.makeBytes(f);return Ct.encodeSegments([m],d)}static encodeSegments(f,d,m=1,v=40,E=-1,C=!0){if(!(Ct.MIN_VERSION<=m&&m<=v&&v<=Ct.MAX_VERSION)||E<-1||E>7)throw new RangeError("Invalid value");let I,P;for(I=m;;I++){const L=Ct.getNumDataCodewords(I,d)*8,V=a.getTotalBits(f,I);if(V<=L){P=V;break}if(I>=v)throw new RangeError("Data too long")}for(const L of[Ct.Ecc.MEDIUM,Ct.Ecc.QUARTILE,Ct.Ecc.HIGH])C&&P<=Ct.getNumDataCodewords(I,L)*8&&(d=L);let N=[];for(const L of f){n(L.mode.modeBits,4,N),n(L.numChars,L.mode.numCharCountBits(I),N);for(const V of L.getData())N.push(V)}i(N.length==P);const D=Ct.getNumDataCodewords(I,d)*8;i(N.length<=D),n(0,Math.min(4,D-N.length),N),n(0,(8-N.length%8)%8,N),i(N.length%8==0);for(let L=236;N.length<D;L^=253)n(L,8,N);let F=[];for(;F.length*8<N.length;)F.push(0);return N.forEach((L,V)=>F[V>>>3]|=L<<7-(V&7)),new Ct(I,d,F,E)}getModule(f,d){return 0<=f&&f<this.size&&0<=d&&d<this.size&&this.modules[d][f]}getModules(){return this.modules}drawFunctionPatterns(){for(let m=0;m<this.size;m++)this.setFunctionModule(6,m,m%2==0),this.setFunctionModule(m,6,m%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const f=this.getAlignmentPatternPositions(),d=f.length;for(let m=0;m<d;m++)for(let v=0;v<d;v++)m==0&&v==0||m==0&&v==d-1||m==d-1&&v==0||this.drawAlignmentPattern(f[m],f[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(f){const d=this.errorCorrectionLevel.formatBits<<3|f;let m=d;for(let E=0;E<10;E++)m=m<<1^(m>>>9)*1335;const v=(d<<10|m)^21522;i(v>>>15==0);for(let E=0;E<=5;E++)this.setFunctionModule(8,E,r(v,E));this.setFunctionModule(8,7,r(v,6)),this.setFunctionModule(8,8,r(v,7)),this.setFunctionModule(7,8,r(v,8));for(let E=9;E<15;E++)this.setFunctionModule(14-E,8,r(v,E));for(let E=0;E<8;E++)this.setFunctionModule(this.size-1-E,8,r(v,E));for(let E=8;E<15;E++)this.setFunctionModule(8,this.size-15+E,r(v,E));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let f=this.version;for(let m=0;m<12;m++)f=f<<1^(f>>>11)*7973;const d=this.version<<12|f;i(d>>>18==0);for(let m=0;m<18;m++){const v=r(d,m),E=this.size-11+m%3,C=Math.floor(m/3);this.setFunctionModule(E,C,v),this.setFunctionModule(C,E,v)}}drawFinderPattern(f,d){for(let m=-4;m<=4;m++)for(let v=-4;v<=4;v++){const E=Math.max(Math.abs(v),Math.abs(m)),C=f+v,I=d+m;0<=C&&C<this.size&&0<=I&&I<this.size&&this.setFunctionModule(C,I,E!=2&&E!=4)}}drawAlignmentPattern(f,d){for(let m=-2;m<=2;m++)for(let v=-2;v<=2;v++)this.setFunctionModule(f+v,d+m,Math.max(Math.abs(v),Math.abs(m))!=1)}setFunctionModule(f,d,m){this.modules[d][f]=m,this.isFunction[d][f]=!0}addEccAndInterleave(f){const d=this.version,m=this.errorCorrectionLevel;if(f.length!=Ct.getNumDataCodewords(d,m))throw new RangeError("Invalid argument");const v=Ct.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d],E=Ct.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d],C=Math.floor(Ct.getNumRawDataModules(d)/8),I=v-C%v,P=Math.floor(C/v);let N=[];const D=Ct.reedSolomonComputeDivisor(E);for(let L=0,V=0;L<v;L++){let G=f.slice(V,V+P-E+(L<I?0:1));V+=G.length;const q=Ct.reedSolomonComputeRemainder(G,D);L<I&&G.push(0),N.push(G.concat(q))}let F=[];for(let L=0;L<N[0].length;L++)N.forEach((V,G)=>{(L!=P-E||G>=I)&&F.push(V[L])});return i(F.length==C),F}drawCodewords(f){if(f.length!=Math.floor(Ct.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let m=this.size-1;m>=1;m-=2){m==6&&(m=5);for(let v=0;v<this.size;v++)for(let E=0;E<2;E++){const C=m-E,P=(m+1&2)==0?this.size-1-v:v;!this.isFunction[P][C]&&d<f.length*8&&(this.modules[P][C]=r(f[d>>>3],7-(d&7)),d++)}}i(d==f.length*8)}applyMask(f){if(f<0||f>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let m=0;m<this.size;m++){let v;switch(f){case 0:v=(m+d)%2==0;break;case 1:v=d%2==0;break;case 2:v=m%3==0;break;case 3:v=(m+d)%3==0;break;case 4:v=(Math.floor(m/3)+Math.floor(d/2))%2==0;break;case 5:v=m*d%2+m*d%3==0;break;case 6:v=(m*d%2+m*d%3)%2==0;break;case 7:v=((m+d)%2+m*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][m]&&v&&(this.modules[d][m]=!this.modules[d][m])}}getPenaltyScore(){let f=0;for(let E=0;E<this.size;E++){let C=!1,I=0,P=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[E][N]==C?(I++,I==5?f+=Ct.PENALTY_N1:I>5&&f++):(this.finderPenaltyAddHistory(I,P),C||(f+=this.finderPenaltyCountPatterns(P)*Ct.PENALTY_N3),C=this.modules[E][N],I=1);f+=this.finderPenaltyTerminateAndCount(C,I,P)*Ct.PENALTY_N3}for(let E=0;E<this.size;E++){let C=!1,I=0,P=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[N][E]==C?(I++,I==5?f+=Ct.PENALTY_N1:I>5&&f++):(this.finderPenaltyAddHistory(I,P),C||(f+=this.finderPenaltyCountPatterns(P)*Ct.PENALTY_N3),C=this.modules[N][E],I=1);f+=this.finderPenaltyTerminateAndCount(C,I,P)*Ct.PENALTY_N3}for(let E=0;E<this.size-1;E++)for(let C=0;C<this.size-1;C++){const I=this.modules[E][C];I==this.modules[E][C+1]&&I==this.modules[E+1][C]&&I==this.modules[E+1][C+1]&&(f+=Ct.PENALTY_N2)}let d=0;for(const E of this.modules)d=E.reduce((C,I)=>C+(I?1:0),d);const m=this.size*this.size,v=Math.ceil(Math.abs(d*20-m*10)/m)-1;return i(0<=v&&v<=9),f+=v*Ct.PENALTY_N4,i(0<=f&&f<=2568888),f}getAlignmentPatternPositions(){if(this.version==1)return[];{const f=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(f*2-2))*2;let m=[6];for(let v=this.size-7;m.length<f;v-=d)m.splice(1,0,v);return m}}static getNumRawDataModules(f){if(f<Ct.MIN_VERSION||f>Ct.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*f+128)*f+64;if(f>=2){const m=Math.floor(f/7)+2;d-=(25*m-10)*m-55,f>=7&&(d-=36)}return i(208<=d&&d<=29648),d}static getNumDataCodewords(f,d){return Math.floor(Ct.getNumRawDataModules(f)/8)-Ct.ECC_CODEWORDS_PER_BLOCK[d.ordinal][f]*Ct.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][f]}static reedSolomonComputeDivisor(f){if(f<1||f>255)throw new RangeError("Degree out of range");let d=[];for(let v=0;v<f-1;v++)d.push(0);d.push(1);let m=1;for(let v=0;v<f;v++){for(let E=0;E<d.length;E++)d[E]=Ct.reedSolomonMultiply(d[E],m),E+1<d.length&&(d[E]^=d[E+1]);m=Ct.reedSolomonMultiply(m,2)}return d}static reedSolomonComputeRemainder(f,d){let m=d.map(v=>0);for(const v of f){const E=v^m.shift();m.push(0),d.forEach((C,I)=>m[I]^=Ct.reedSolomonMultiply(C,E))}return m}static reedSolomonMultiply(f,d){if(f>>>8||d>>>8)throw new RangeError("Byte out of range");let m=0;for(let v=7;v>=0;v--)m=m<<1^(m>>>7)*285,m^=(d>>>v&1)*f;return i(m>>>8==0),m}finderPenaltyCountPatterns(f){const d=f[1];i(d<=this.size*3);const m=d>0&&f[2]==d&&f[3]==d*3&&f[4]==d&&f[5]==d;return(m&&f[0]>=d*4&&f[6]>=d?1:0)+(m&&f[6]>=d*4&&f[0]>=d?1:0)}finderPenaltyTerminateAndCount(f,d,m){return f&&(this.finderPenaltyAddHistory(d,m),d=0),d+=this.size,this.finderPenaltyAddHistory(d,m),this.finderPenaltyCountPatterns(m)}finderPenaltyAddHistory(f,d){d[0]==0&&(f+=this.size),d.pop(),d.unshift(f)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(c,f,d){if(f<0||f>31||c>>>f)throw new RangeError("Value out of range");for(let m=f-1;m>=0;m--)d.push(c>>>m&1)}function r(c,f){return(c>>>f&1)!=0}function i(c){if(!c)throw new Error("Assertion error")}const o=class Nn{constructor(f,d,m){if(this.mode=f,this.numChars=d,this.bitData=m,d<0)throw new RangeError("Invalid argument");this.bitData=m.slice()}static makeBytes(f){let d=[];for(const m of f)n(m,8,d);return new Nn(Nn.Mode.BYTE,f.length,d)}static makeNumeric(f){if(!Nn.isNumeric(f))throw new RangeError("String contains non-numeric characters");let d=[];for(let m=0;m<f.length;){const v=Math.min(f.length-m,3);n(parseInt(f.substring(m,m+v),10),v*3+1,d),m+=v}return new Nn(Nn.Mode.NUMERIC,f.length,d)}static makeAlphanumeric(f){if(!Nn.isAlphanumeric(f))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],m;for(m=0;m+2<=f.length;m+=2){let v=Nn.ALPHANUMERIC_CHARSET.indexOf(f.charAt(m))*45;v+=Nn.ALPHANUMERIC_CHARSET.indexOf(f.charAt(m+1)),n(v,11,d)}return m<f.length&&n(Nn.ALPHANUMERIC_CHARSET.indexOf(f.charAt(m)),6,d),new Nn(Nn.Mode.ALPHANUMERIC,f.length,d)}static makeSegments(f){return f==""?[]:Nn.isNumeric(f)?[Nn.makeNumeric(f)]:Nn.isAlphanumeric(f)?[Nn.makeAlphanumeric(f)]:[Nn.makeBytes(Nn.toUtf8ByteArray(f))]}static makeEci(f){let d=[];if(f<0)throw new RangeError("ECI assignment value out of range");if(f<128)n(f,8,d);else if(f<16384)n(2,2,d),n(f,14,d);else if(f<1e6)n(6,3,d),n(f,21,d);else throw new RangeError("ECI assignment value out of range");return new Nn(Nn.Mode.ECI,0,d)}static isNumeric(f){return Nn.NUMERIC_REGEX.test(f)}static isAlphanumeric(f){return Nn.ALPHANUMERIC_REGEX.test(f)}getData(){return this.bitData.slice()}static getTotalBits(f,d){let m=0;for(const v of f){const E=v.mode.numCharCountBits(d);if(v.numChars>=1<<E)return 1/0;m+=4+E+v.bitData.length}return m}static toUtf8ByteArray(f){f=encodeURI(f);let d=[];for(let m=0;m<f.length;m++)f.charAt(m)!="%"?d.push(f.charCodeAt(m)):(d.push(parseInt(f.substring(m+1,m+3),16)),m+=2);return d}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=o;e.QrSegment=o})(xl||(xl={}));(e=>{(t=>{const n=class{constructor(i,o){this.ordinal=i,this.formatBits=o}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(xl||(xl={}));(e=>{(t=>{const n=class{constructor(i,o){this.modeBits=i,this.numBitsCharCount=o}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(xl||(xl={}));var Cu=xl;var HG={L:Cu.QrCode.Ecc.LOW,M:Cu.QrCode.Ecc.MEDIUM,Q:Cu.QrCode.Ecc.QUARTILE,H:Cu.QrCode.Ecc.HIGH},M3=128,D3="L",L3="#FFFFFF",B3="#000000",F3=!1,U3=1,qG=4,WG=0,KG=.1;function j3(e,t=0){const n=[];return e.forEach(function(r,i){let o=null;r.forEach(function(a,c){if(!a&&o!==null){n.push(`M${o+t} ${i+t}h${c-o}v1H${o+t}z`),o=null;return}if(c===r.length-1){if(!a)return;o===null?n.push(`M${c+t},${i+t} h1v1H${c+t}z`):n.push(`M${o+t},${i+t} h${c+1-o}v1H${o+t}z`);return}a&&o===null&&(o=c)})}),n.join("")}function V3(e,t){return e.slice().map((n,r)=>r<t.y||r>=t.y+t.h?n:n.map((i,o)=>o<t.x||o>=t.x+t.w?i:!1))}function YG(e,t,n,r){if(r==null)return null;const i=e.length+n*2,o=Math.floor(t*KG),a=i/t,c=(r.width||o)*a,f=(r.height||o)*a,d=r.x==null?e.length/2-c/2:r.x*a,m=r.y==null?e.length/2-f/2:r.y*a,v=r.opacity==null?1:r.opacity;let E=null;if(r.excavate){let I=Math.floor(d),P=Math.floor(m),N=Math.ceil(c+d-I),D=Math.ceil(f+m-P);E={x:I,y:P,w:N,h:D}}const C=r.crossOrigin;return{x:d,y:m,h:f,w:c,excavation:E,opacity:v,crossOrigin:C}}function XG(e,t){return t!=null?Math.max(Math.floor(t),0):e?qG:WG}function $3({value:e,level:t,minVersion:n,includeMargin:r,marginSize:i,imageSettings:o,size:a,boostLevel:c}){let f=dn.useMemo(()=>{const I=(Array.isArray(e)?e:[e]).reduce((P,N)=>(P.push(...Cu.QrSegment.makeSegments(N)),P),[]);return Cu.QrCode.encodeSegments(I,HG[t],n,void 0,void 0,c)},[e,t,n,c]);const{cells:d,margin:m,numCells:v,calculatedImageSettings:E}=dn.useMemo(()=>{let C=f.getModules();const I=XG(r,i),P=C.length+I*2,N=YG(C,a,I,o);return{cells:C,margin:I,numCells:P,calculatedImageSettings:N}},[f,a,o,r,i]);return{qrcode:f,margin:m,cells:d,numCells:v,calculatedImageSettings:E}}var JG=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),ZG=dn.forwardRef(function(t,n){const r=t,{value:i,size:o=M3,level:a=D3,bgColor:c=L3,fgColor:f=B3,includeMargin:d=F3,minVersion:m=U3,boostLevel:v,marginSize:E,imageSettings:C}=r,P=Wy(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:N}=P,D=Wy(P,["style"]),F=C?.src,L=dn.useRef(null),V=dn.useRef(null),G=dn.useCallback(he=>{L.current=he,typeof n=="function"?n(he):n&&(n.current=he)},[n]),[q,W]=dn.useState(!1),{margin:Z,cells:X,numCells:fe,calculatedImageSettings:se}=$3({value:i,level:a,minVersion:m,boostLevel:v,includeMargin:d,marginSize:E,imageSettings:C,size:o});dn.useEffect(()=>{if(L.current!=null){const he=L.current,ne=he.getContext("2d");if(!ne)return;let we=X;const ve=V.current,xe=se!=null&&ve!==null&&ve.complete&&ve.naturalHeight!==0&&ve.naturalWidth!==0;xe&&se.excavation!=null&&(we=V3(X,se.excavation));const Se=window.devicePixelRatio||1;he.height=he.width=o*Se;const Ce=o/fe*Se;ne.scale(Ce,Ce),ne.fillStyle=c,ne.fillRect(0,0,fe,fe),ne.fillStyle=f,JG?ne.fill(new Path2D(j3(we,Z))):X.forEach(function(te,pe){te.forEach(function(Fe,Le){Fe&&ne.fillRect(Le+Z,pe+Z,1,1)})}),se&&(ne.globalAlpha=se.opacity),xe&&ne.drawImage(ve,se.x+Z,se.y+Z,se.w,se.h)}}),dn.useEffect(()=>{W(!1)},[F]);const ae=qy({height:o,width:o},N);let be=null;return F!=null&&(be=dn.createElement("img",{src:F,key:F,style:{display:"none"},onLoad:()=>{W(!0)},ref:V,crossOrigin:se?.crossOrigin})),dn.createElement(dn.Fragment,null,dn.createElement("canvas",qy({style:ae,height:o,width:o,ref:G,role:"img"},D)),be)});ZG.displayName="QRCodeCanvas";var z3=dn.forwardRef(function(t,n){const r=t,{value:i,size:o=M3,level:a=D3,bgColor:c=L3,fgColor:f=B3,includeMargin:d=F3,minVersion:m=U3,boostLevel:v,title:E,marginSize:C,imageSettings:I}=r,P=Wy(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:N,cells:D,numCells:F,calculatedImageSettings:L}=$3({value:i,level:a,minVersion:m,boostLevel:v,includeMargin:d,marginSize:C,imageSettings:I,size:o});let V=D,G=null;I!=null&&L!=null&&(L.excavation!=null&&(V=V3(D,L.excavation)),G=dn.createElement("image",{href:I.src,height:L.h,width:L.w,x:L.x+N,y:L.y+N,preserveAspectRatio:"none",opacity:L.opacity,crossOrigin:L.crossOrigin}));const q=j3(V,N);return dn.createElement("svg",qy({height:o,width:o,viewBox:`0 0 ${F} ${F}`,ref:n,role:"img"},P),!!E&&dn.createElement("title",null,E),dn.createElement("path",{fill:c,d:`M0,0 h${F}v${F}H0z`,shapeRendering:"crispEdges"}),dn.createElement("path",{fill:f,d:q,shapeRendering:"crispEdges"}),G)});z3.displayName="QRCodeSVG";const QG=({clientName:e,token:t,visits:n,nextReward:r,tier:i="Bronce"})=>{const[o,a]=M.useState(!1),f=(m=>{switch(m==="Silver"&&(m="Bronce"),m){case"Gold":return{name:"NIVEL GOLD",bgGradient:"bg-gradient-to-br from-amber-500 to-yellow-600",stampColor:"bg-amber-100 text-amber-700",benefit:"30% OFF"};case"Plata":return{name:"NIVEL PLATA",bgGradient:"bg-gradient-to-br from-slate-400 to-stone-400",stampColor:"bg-slate-50 text-slate-900",benefit:"15% OFF"};case"Bronce":default:return{name:"NIVEL BRONCE",bgGradient:"bg-gradient-to-br from-stone-800 to-stone-950",stampColor:"bg-white text-stone-950",benefit:"5% OFF"}}})(i||"Bronce");return R.jsxs("div",{className:"w-full max-w-sm mx-auto perspective-1000 group cursor-pointer",onClick:()=>a(!o),children:[R.jsxs("div",{className:`relative transition-transform duration-700 preserve-3d ${o?"rotate-y-180":""}`,children:[R.jsxs("div",{className:"backface-hidden w-full bg-stone-950 rounded-[24px] overflow-hidden shadow-2xl flex flex-col relative h-[560px] border border-stone-800",children:[R.jsxs("div",{className:"p-6 pb-2 flex justify-between items-start z-10",children:[R.jsxs("div",{children:[R.jsxs("h2",{className:"font-serif italic text-2xl text-white tracking-tight",children:["Tus3B ",R.jsx("span",{className:"text-amber-500",children:"Style"})]}),R.jsx("span",{className:"text-[9px] uppercase tracking-[0.3em] text-stone-400 font-bold block mt-1",children:f.name})]}),R.jsxs("div",{className:"text-right",children:[R.jsx("p",{className:"text-[10px] text-stone-500 uppercase font-bold mb-0.5",children:"Cliente"}),R.jsx("p",{className:"text-white font-bold text-lg leading-none",children:e.split(" ")[0]})]})]}),R.jsxs("div",{className:"px-6 py-4 z-10",children:[R.jsx("div",{className:"grid grid-cols-5 gap-3 mb-2",children:[...Array(10)].map((m,v)=>R.jsx("div",{className:`aspect-square rounded-full flex items-center justify-center border-2 transition-all duration-500 ${v<n?"bg-white border-white scale-100 shadow-[0_0_10px_rgba(255,255,255,0.5)]":"bg-stone-900/50 border-stone-700 scale-90"}`,children:v<n&&R.jsx(k5,{size:20,className:"text-stone-950 stroke-[4]"})},v))}),R.jsxs("div",{className:"flex justify-between text-[10px] text-stone-500 font-mono mt-2 px-1",children:[R.jsx("span",{className:n>=5?"text-slate-400 font-bold":"",children:"PLATA (5)"}),R.jsx("span",{className:n>=10?"text-amber-500 font-bold":"",children:"GOLD (10)"})]})]}),R.jsxs("div",{className:"px-8 py-2 flex justify-between items-center z-10 mt-2",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-[10px] uppercase font-bold text-stone-400 tracking-wider mb-1",children:"Total Servicios"}),R.jsx("p",{className:"text-4xl font-black text-white",children:n})]}),R.jsx("div",{className:"w-px h-10 bg-stone-800"}),R.jsxs("div",{className:"text-right",children:[R.jsx("p",{className:"text-[10px] uppercase font-bold text-stone-400 tracking-wider mb-1",children:"Nivel Actual"}),R.jsx("p",{className:"text-xl font-black text-white",children:i||"Bronce"})]})]}),R.jsxs("div",{className:"flex-grow flex items-center justify-center p-6 relative",children:[R.jsxs("div",{className:"absolute top-0 left-0 w-full flex justify-between items-center",children:[R.jsx("div",{className:"w-6 h-6 bg-[#1c1917] rounded-r-full -ml-3"}),R.jsx("div",{className:"w-full border-t-2 border-dashed border-stone-800 mx-2"}),R.jsx("div",{className:"w-6 h-6 bg-[#1c1917] rounded-l-full -mr-3"})]}),R.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg relative group-hover:scale-105 transition-transform duration-300",children:[R.jsx(z3,{value:t,size:160,level:"M"}),R.jsx("p",{className:"text-center text-[9px] font-mono mt-2 text-stone-500 tracking-widest",children:t})]})]}),R.jsx("div",{className:`absolute top-0 left-0 w-full h-full opacity-20 ${f.bgGradient} z-0`})]}),R.jsxs("div",{className:"absolute top-0 left-0 backface-hidden w-full h-[560px] bg-stone-900 rounded-[24px] shadow-2xl rotate-y-180 p-8 text-white flex flex-col justify-between border border-stone-800",children:[R.jsxs("div",{children:[R.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-white/10 pb-4",children:[R.jsx("h3",{className:"font-serif italic text-2xl",children:"Beneficios"}),R.jsx(F5,{className:"text-stone-500"})]}),R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{className:`p-3 rounded-2xl border ${i==="Bronce"?"border-stone-500 bg-stone-800":"border-stone-800 bg-stone-900/50 opacity-50"} flex gap-4 items-center`,children:[R.jsx("div",{className:"w-10 h-10 rounded-full bg-stone-700 flex items-center justify-center font-bold text-stone-400",children:"0"}),R.jsxs("div",{children:[R.jsx("h4",{className:"font-bold text-stone-300",children:"Nivel Bronce"}),R.jsx("p",{className:"text-[10px] text-stone-500",children:"0 - 4 visitas"}),R.jsx("span",{className:"text-[10px] text-stone-400",children:"5% OFF en productos"})]})]}),R.jsxs("div",{className:`p-3 rounded-2xl border ${i==="Plata"?"border-slate-400 bg-slate-800":"border-stone-800 bg-stone-900/50 opacity-50"} flex gap-4 items-center`,children:[R.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-500 text-white flex items-center justify-center font-bold shadow-lg shadow-slate-500/20",children:"5"}),R.jsxs("div",{children:[R.jsx("h4",{className:"font-bold text-slate-200",children:"Nivel Plata"}),R.jsx("p",{className:"text-[10px] text-stone-400",children:"5 - 9 visitas"}),R.jsx("span",{className:"text-[10px] text-slate-300 font-bold",children:"15% OFF en servicios"})]})]}),R.jsxs("div",{className:`p-3 rounded-2xl border ${i==="Gold"?"border-amber-500 bg-amber-900/20":"border-stone-800 bg-stone-900/50 opacity-50"} flex gap-4 items-center`,children:[R.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500 text-stone-900 flex items-center justify-center font-bold shadow-lg shadow-amber-500/40",children:"10"}),R.jsxs("div",{children:[R.jsx("h4",{className:"font-bold text-amber-500",children:"Nivel Gold"}),R.jsx("p",{className:"text-[10px] text-stone-400",children:"10+ visitas"}),R.jsx("span",{className:"text-[10px] text-amber-400 font-bold",children:"30% OFF + VIP"})]})]})]})]}),R.jsx("div",{className:"text-center",children:R.jsx("p",{className:"text-[10px] text-stone-500",children:"Muestra tu cdigo QR para desbloquear niveles."})})]})]}),R.jsx("style",{children:`
                .perspective-1000 { perspective: 1000px; }
                .preserve-3d { transform-style: preserve-3d; }
                .backface-hidden { backface-visibility: hidden; }
                .rotate-y-180 { transform: rotateY(180deg); }
            `})]})},eH=()=>{const[e,t]=M.useState(""),[n,r]=M.useState(!1),[i,o]=M.useState(null),[a,c]=M.useState([]),f=async d=>{d&&d.preventDefault();const v=new URLSearchParams(window.location.search).get("token");if(!(!v&&e.length<8)){r(!0);try{let E=Ht.from("clients").select("*");v?E=E.eq("member_token",v):E=E.eq("phone",e);const{data:C,error:I}=await E.single(),{data:P}=await Ht.from("rewards").select("*").eq("is_active",!0);if(P&&c(P),I&&I.code!=="PGRST116"){console.error("Error fetching loyalty:",I),v||alert("Hubo un error al consultar. Intenta de nuevo."),r(!1);return}if(C){const N=C.visits||0;let D="Bronce";N>=10?D="Gold":N>=5&&(D="Plata"),o({name:C.name,visits:N,referrals:C.referrals,nextReward:N<5?5:N<10?10:15,token:C.member_token,tier:D,hair_service_count:C.hair_service_count||0,discount_5th_visit_available:C.discount_5th_visit_available,free_cut_available:C.free_cut_available})}else v||o({name:"Nuevo Cliente",visits:0,referrals:0,nextReward:5,token:"new-client",tier:"Bronce",hair_service_count:0})}catch(E){console.error("Unexpected error:",E)}finally{r(!1)}}};return dn.useEffect(()=>{new URLSearchParams(window.location.search).get("token")&&f()},[]),R.jsxs("div",{className:"bg-stone-950 rounded-3xl p-8 text-white relative overflow-hidden shadow-2xl min-h-[600px] flex flex-col items-center",children:[R.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-amber-500/10 rounded-full blur-[80px]"}),R.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("span",{className:"text-[10px] uppercase tracking-[0.3em] text-amber-500 font-bold",children:"Bienvenida a tu"}),R.jsx("h3",{className:"serif text-4xl mt-2 text-white",children:"Wallet Clientes"})]}),i?R.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-700",children:[R.jsx("div",{className:"mb-8 transform hover:scale-[1.02] transition-transform duration-500",children:R.jsx(QG,{clientName:i.name||"Miembro Exclusivo",token:i.token||"pending-token",visits:i.visits,nextReward:5,tier:i.tier})}),R.jsxs("div",{className:"text-center space-y-4",children:[R.jsx("p",{className:"text-sm text-stone-400",children:i.visits>=5?" Tienes una recompensa disponible":"Sigue sumando para desbloquear beneficios"}),R.jsx("button",{onClick:()=>o(null),className:"text-xs text-stone-500 hover:text-stone-300 transition",children:"Cerrar sesin"})]})]}):R.jsxs("div",{className:"bg-stone-900/50 backdrop-blur-md p-8 rounded-2xl border border-white/5 shadow-xl",children:[R.jsx("p",{className:"text-stone-400 text-center mb-6 text-sm",children:"Consulta tus puntos, beneficios y acceso a tu tarjeta digital."}),R.jsxs("form",{onSubmit:f,className:"space-y-4",children:[R.jsxs("div",{className:"relative group",children:[R.jsx("input",{type:"tel",value:e,onChange:d=>t(d.target.value),placeholder:"Ingresa tu telfono...",className:"w-full bg-stone-950 border border-stone-800 rounded-xl px-4 py-4 pl-12 text-white placeholder-stone-600 focus:outline-none focus:border-amber-500/50 transition duration-300"}),R.jsx(lw,{size:18,className:"absolute left-4 top-4.5 text-stone-600 group-focus-within:text-amber-500 transition-colors"})]}),R.jsx("button",{type:"submit",disabled:n||e.length<8,className:"w-full bg-gradient-to-r from-amber-200 to-amber-500 text-stone-900 font-bold py-4 rounded-xl hover:shadow-[0_0_20px_rgba(245,158,11,0.3)] transition-shadow flex justify-center items-center disabled:opacity-50 disabled:cursor-not-allowed",children:n?R.jsx(x0,{className:"animate-spin"}):"Abrir mi Wallet"})]}),R.jsx("p",{className:"text-[10px] text-stone-600 text-center mt-6",children:"Al consultar aceptas nuestros trminos de fidelizacin."})]})]})]})},tH=({onLogin:e})=>{const[t,n]=M.useState(""),[r,i]=M.useState(""),[o,a]=M.useState(""),[c,f]=M.useState(!1),d=async m=>{m.preventDefault(),a(""),f(!0);try{const{data:v,error:E}=await Ht.auth.signInWithPassword({email:r,password:t});if(E)throw E;if(!v.user)throw new Error("No user found");const{data:C,error:I}=await Ht.from("profiles").select("role").eq("id",v.user.id).single();if(I)e(r==="jacontulianoc@gmail.com"?"management":"service",r);else{const P=C.role==="admin"?"management":"service";e(P,r)}}catch(v){console.error(v),a(v.message==="Invalid login credentials"?"Credenciales incorrectas":"Error de conexin")}finally{f(!1)}};return R.jsx("div",{className:"flex flex-col items-center justify-center min-h-[50vh] bg-stone-50 p-4",children:R.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-stone-100 max-w-sm w-full text-center",children:[R.jsx(Q5,{className:"w-12 h-12 text-stone-900 mx-auto mb-4"}),R.jsx("h2",{className:"text-xl font-bold text-stone-900 mb-6",children:"Acceso Seguro"}),R.jsxs("form",{onSubmit:d,className:"space-y-4",children:[R.jsx("input",{type:"email",value:r,onChange:m=>i(m.target.value),placeholder:"Correo (@tus3b.cl)",className:"w-full px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-stone-900 outline-none"}),R.jsx("input",{type:"password",value:t,onChange:m=>n(m.target.value),placeholder:"Contrasea",className:"w-full px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-stone-900 outline-none"}),o&&R.jsx("p",{className:"text-red-500 text-sm",children:o}),R.jsx("button",{type:"submit",disabled:c,className:"w-full bg-stone-900 text-white py-3 rounded-lg font-bold disabled:bg-stone-500",children:c?"Verificando...":"Ingresar"}),R.jsx("p",{className:"text-xs text-stone-400 mt-4",children:"* Sistema protegido con Supabase Auth"})]})]})})};var ze;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ze||(ze={}));var zC=new Map([[ze.QR_CODE,"QR_CODE"],[ze.AZTEC,"AZTEC"],[ze.CODABAR,"CODABAR"],[ze.CODE_39,"CODE_39"],[ze.CODE_93,"CODE_93"],[ze.CODE_128,"CODE_128"],[ze.DATA_MATRIX,"DATA_MATRIX"],[ze.MAXICODE,"MAXICODE"],[ze.ITF,"ITF"],[ze.EAN_13,"EAN_13"],[ze.EAN_8,"EAN_8"],[ze.PDF_417,"PDF_417"],[ze.RSS_14,"RSS_14"],[ze.RSS_EXPANDED,"RSS_EXPANDED"],[ze.UPC_A,"UPC_A"],[ze.UPC_E,"UPC_E"],[ze.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),GC;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(GC||(GC={}));function nH(e){return Object.values(ze).includes(e)}var L0;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(L0||(L0={}));var rH=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[L0.SCAN_TYPE_CAMERA,L0.SCAN_TYPE_FILE],e})(),G3=(function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!zC.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,zC.get(t))},e})(),HC=(function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),Ky;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ky||(Ky={}));var iH=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Ky.UNKWOWN_ERROR}},e})(),oH=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function cs(e){return typeof e>"u"||e===null}var Au=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),H3=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),a=Object.keys(t),c=0,f=a;c<f.length;c++){var d=f[c];if(o.has(d))return n.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},e})(),gd={exports:{}},sH=gd.exports,qC;function aH(){return qC||(qC=1,(function(e,t){(function(n,r){r(t)})(sH,(function(n){function r(j){return j==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,s){j.__proto__=s}||function(j,s){for(var u in s)s.hasOwnProperty(u)&&(j[u]=s[u])};function o(j,s){i(j,s);function u(){this.constructor=j}j.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}function a(j,s){var u=Object.setPrototypeOf;u?u(j,s):j.__proto__=s}function c(j,s){s===void 0&&(s=j.constructor);var u=Error.captureStackTrace;u&&u(j,s)}var f=(function(j){o(s,j);function s(u){var h=this.constructor,g=j.call(this,u)||this;return Object.defineProperty(g,"name",{value:h.name,enumerable:!1}),a(g,h.prototype),c(g),g}return s})(Error);class d extends f{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}d.kind="Exception";class m extends d{}m.kind="ArgumentException";class v extends d{}v.kind="IllegalArgumentException";class E{constructor(s){if(this.binarizer=s,s===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,u){return this.binarizer.getBlackRow(s,u)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,u,h,g){const y=this.binarizer.getLuminanceSource().crop(s,u,h,g);return new E(this.binarizer.createBinarizer(y))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new E(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new E(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class C extends d{static getChecksumInstance(){return new C}}C.kind="ChecksumException";class I{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class P{static arraycopy(s,u,h,g,y){for(;y--;)h[g++]=s[u++]}static currentTimeMillis(){return Date.now()}}class N extends d{}N.kind="IndexOutOfBoundsException";class D extends N{constructor(s=void 0,u=void 0){super(u),this.index=s,this.message=u}}D.kind="ArrayIndexOutOfBoundsException";class F{static fill(s,u){for(let h=0,g=s.length;h<g;h++)s[h]=u}static fillWithin(s,u,h,g){F.rangeCheck(s.length,u,h);for(let y=u;y<h;y++)s[y]=g}static rangeCheck(s,u,h){if(u>h)throw new v("fromIndex("+u+") > toIndex("+h+")");if(u<0)throw new D(u);if(h>s)throw new D(h)}static asList(...s){return s}static create(s,u,h){return Array.from({length:s}).map(y=>Array.from({length:u}).fill(h))}static createInt32Array(s,u,h){return Array.from({length:s}).map(y=>Int32Array.from({length:u}).fill(h))}static equals(s,u){if(!s||!u||!s.length||!u.length||s.length!==u.length)return!1;for(let h=0,g=s.length;h<g;h++)if(s[h]!==u[h])return!1;return!0}static hashCode(s){if(s===null)return 0;let u=1;for(const h of s)u=31*u+h;return u}static fillUint8Array(s,u){for(let h=0;h!==s.length;h++)s[h]=u}static copyOf(s,u){return s.slice(0,u)}static copyOfUint8Array(s,u){if(s.length<=u){const h=new Uint8Array(u);return h.set(s),h}return s.slice(0,u)}static copyOfRange(s,u,h){const g=h-u,y=new Int32Array(g);return P.arraycopy(s,u,y,0,g),y}static binarySearch(s,u,h){h===void 0&&(h=F.numberComparator);let g=0,y=s.length-1;for(;g<=y;){const x=y+g>>1,_=h(u,s[x]);if(_>0)g=x+1;else if(_<0)y=x-1;else return x}return-g-1}static numberComparator(s,u){return s-u}}class L{static numberOfTrailingZeros(s){let u;if(s===0)return 32;let h=31;return u=s<<16,u!==0&&(h-=16,s=u),u=s<<8,u!==0&&(h-=8,s=u),u=s<<4,u!==0&&(h-=4,s=u),u=s<<2,u!==0&&(h-=2,s=u),h-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let u=1;return s>>>16||(u+=16,s<<=16),s>>>24||(u+=8,s<<=8),s>>>28||(u+=4,s<<=4),s>>>30||(u+=2,s<<=2),u-=s>>>31,u}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,u){return Math.trunc(s/u)}static parseInt(s,u=void 0){return parseInt(s,u)}}L.MIN_VALUE_32_BITS=-2147483648,L.MAX_VALUE=Number.MAX_SAFE_INTEGER;class V{constructor(s,u){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,u==null?this.bits=V.makeArray(s):this.bits=u)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const u=V.makeArray(s);P.arraycopy(this.bits,0,u,0,this.bits.length),this.bits=u}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const u=this.size;if(s>=u)return u;const h=this.bits;let g=Math.floor(s/32),y=h[g];y&=~((1<<(s&31))-1);const x=h.length;for(;y===0;){if(++g===x)return u;y=h[g]}const _=g*32+L.numberOfTrailingZeros(y);return _>u?u:_}getNextUnset(s){const u=this.size;if(s>=u)return u;const h=this.bits;let g=Math.floor(s/32),y=~h[g];y&=~((1<<(s&31))-1);const x=h.length;for(;y===0;){if(++g===x)return u;y=~h[g]}const _=g*32+L.numberOfTrailingZeros(y);return _>u?u:_}setBulk(s,u){this.bits[Math.floor(s/32)]=u}setRange(s,u){if(u<s||s<0||u>this.size)throw new v;if(u===s)return;u--;const h=Math.floor(s/32),g=Math.floor(u/32),y=this.bits;for(let x=h;x<=g;x++){const _=x>h?0:s&31,O=(2<<(x<g?31:u&31))-(1<<_);y[x]|=O}}clear(){const s=this.bits.length,u=this.bits;for(let h=0;h<s;h++)u[h]=0}isRange(s,u,h){if(u<s||s<0||u>this.size)throw new v;if(u===s)return!0;u--;const g=Math.floor(s/32),y=Math.floor(u/32),x=this.bits;for(let _=g;_<=y;_++){const T=_>g?0:s&31,U=(2<<(_<y?31:u&31))-(1<<T)&4294967295;if((x[_]&U)!==(h?U:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,u){if(u<0||u>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+u);for(let h=u;h>0;h--)this.appendBit((s>>h-1&1)===1)}appendBitArray(s){const u=s.size;this.ensureCapacity(this.size+u);for(let h=0;h<u;h++)this.appendBit(s.get(h))}xor(s){if(this.size!==s.size)throw new v("Sizes don't match");const u=this.bits;for(let h=0,g=u.length;h<g;h++)u[h]^=s.bits[h]}toBytes(s,u,h,g){for(let y=0;y<g;y++){let x=0;for(let _=0;_<8;_++)this.get(s)&&(x|=1<<7-_),s++;u[h+y]=x}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),u=Math.floor((this.size-1)/32),h=u+1,g=this.bits;for(let y=0;y<h;y++){let x=g[y];x=x>>1&1431655765|(x&1431655765)<<1,x=x>>2&858993459|(x&858993459)<<2,x=x>>4&252645135|(x&252645135)<<4,x=x>>8&16711935|(x&16711935)<<8,x=x>>16&65535|(x&65535)<<16,s[u-y]=x}if(this.size!==h*32){const y=h*32-this.size;let x=s[0]>>>y;for(let _=1;_<h;_++){const T=s[_];x|=T<<32-y,s[_-1]=x,x=T>>>y}s[h-1]=x}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof V))return!1;const u=s;return this.size===u.size&&F.equals(this.bits,u.bits)}hashCode(){return 31*this.size+F.hashCode(this.bits)}toString(){let s="";for(let u=0,h=this.size;u<h;u++)(u&7)===0&&(s+=" "),s+=this.get(u)?"X":".";return s}clone(){return new V(this.size,this.bits.slice())}}var G;(function(j){j[j.OTHER=0]="OTHER",j[j.PURE_BARCODE=1]="PURE_BARCODE",j[j.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",j[j.TRY_HARDER=3]="TRY_HARDER",j[j.CHARACTER_SET=4]="CHARACTER_SET",j[j.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",j[j.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",j[j.ASSUME_GS1=7]="ASSUME_GS1",j[j.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",j[j.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",j[j.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(G||(G={}));var q=G;class W extends d{static getFormatInstance(){return new W}}W.kind="FormatException";var Z;(function(j){j[j.Cp437=0]="Cp437",j[j.ISO8859_1=1]="ISO8859_1",j[j.ISO8859_2=2]="ISO8859_2",j[j.ISO8859_3=3]="ISO8859_3",j[j.ISO8859_4=4]="ISO8859_4",j[j.ISO8859_5=5]="ISO8859_5",j[j.ISO8859_6=6]="ISO8859_6",j[j.ISO8859_7=7]="ISO8859_7",j[j.ISO8859_8=8]="ISO8859_8",j[j.ISO8859_9=9]="ISO8859_9",j[j.ISO8859_10=10]="ISO8859_10",j[j.ISO8859_11=11]="ISO8859_11",j[j.ISO8859_13=12]="ISO8859_13",j[j.ISO8859_14=13]="ISO8859_14",j[j.ISO8859_15=14]="ISO8859_15",j[j.ISO8859_16=15]="ISO8859_16",j[j.SJIS=16]="SJIS",j[j.Cp1250=17]="Cp1250",j[j.Cp1251=18]="Cp1251",j[j.Cp1252=19]="Cp1252",j[j.Cp1256=20]="Cp1256",j[j.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",j[j.UTF8=22]="UTF8",j[j.ASCII=23]="ASCII",j[j.Big5=24]="Big5",j[j.GB18030=25]="GB18030",j[j.EUC_KR=26]="EUC_KR"})(Z||(Z={}));class X{constructor(s,u,h,...g){this.valueIdentifier=s,this.name=h,typeof u=="number"?this.values=Int32Array.from([u]):this.values=u,this.otherEncodingNames=g,X.VALUE_IDENTIFIER_TO_ECI.set(s,this),X.NAME_TO_ECI.set(h,this);const y=this.values;for(let x=0,_=y.length;x!==_;x++){const T=y[x];X.VALUES_TO_ECI.set(T,this)}for(const x of g)X.NAME_TO_ECI.set(x,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new W("incorect value");const u=X.VALUES_TO_ECI.get(s);if(u===void 0)throw new W("incorect value");return u}static getCharacterSetECIByName(s){const u=X.NAME_TO_ECI.get(s);if(u===void 0)throw new W("incorect value");return u}equals(s){if(!(s instanceof X))return!1;const u=s;return this.getName()===u.getName()}}X.VALUE_IDENTIFIER_TO_ECI=new Map,X.VALUES_TO_ECI=new Map,X.NAME_TO_ECI=new Map,X.Cp437=new X(Z.Cp437,Int32Array.from([0,2]),"Cp437"),X.ISO8859_1=new X(Z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),X.ISO8859_2=new X(Z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),X.ISO8859_3=new X(Z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),X.ISO8859_4=new X(Z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),X.ISO8859_5=new X(Z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),X.ISO8859_6=new X(Z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),X.ISO8859_7=new X(Z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),X.ISO8859_8=new X(Z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),X.ISO8859_9=new X(Z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),X.ISO8859_10=new X(Z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),X.ISO8859_11=new X(Z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),X.ISO8859_13=new X(Z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),X.ISO8859_14=new X(Z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),X.ISO8859_15=new X(Z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),X.ISO8859_16=new X(Z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),X.SJIS=new X(Z.SJIS,20,"SJIS","Shift_JIS"),X.Cp1250=new X(Z.Cp1250,21,"Cp1250","windows-1250"),X.Cp1251=new X(Z.Cp1251,22,"Cp1251","windows-1251"),X.Cp1252=new X(Z.Cp1252,23,"Cp1252","windows-1252"),X.Cp1256=new X(Z.Cp1256,24,"Cp1256","windows-1256"),X.UnicodeBigUnmarked=new X(Z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),X.UTF8=new X(Z.UTF8,26,"UTF8","UTF-8"),X.ASCII=new X(Z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),X.Big5=new X(Z.Big5,28,"Big5"),X.GB18030=new X(Z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),X.EUC_KR=new X(Z.EUC_KR,30,"EUC_KR","EUC-KR");class fe extends d{}fe.kind="UnsupportedOperationException";class se{static decode(s,u){const h=this.encodingName(u);return this.customDecoder?this.customDecoder(s,h):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(h)?this.decodeFallback(s,h):new TextDecoder(h).decode(s)}static shouldDecodeOnFallback(s){return!se.isBrowser()&&s==="ISO-8859-1"}static encode(s,u){const h=this.encodingName(u);return this.customEncoder?this.customEncoder(s,h):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof X?s:X.getCharacterSetECIByName(s)}static decodeFallback(s,u){const h=this.encodingCharacterSet(u);if(se.isDecodeFallbackSupported(h)){let g="";for(let y=0,x=s.length;y<x;y++){let _=s[y].toString(16);_.length<2&&(_="0"+_),g+="%"+_}return decodeURIComponent(g)}if(h.equals(X.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new fe(`Encoding ${this.encodingName(u)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(X.UTF8)||s.equals(X.ISO8859_1)||s.equals(X.ASCII)}static encodeFallback(s){const h=btoa(unescape(encodeURIComponent(s))).split(""),g=[];for(let y=0;y<h.length;y++)g.push(h[y].charCodeAt(0));return new Uint8Array(g)}}class ae{static castAsNonUtf8Char(s,u=null){const h=u?u.getName():this.ISO88591;return se.decode(new Uint8Array([s]),h)}static guessEncoding(s,u){if(u!=null&&u.get(q.CHARACTER_SET)!==void 0)return u.get(q.CHARACTER_SET).toString();const h=s.length;let g=!0,y=!0,x=!0,_=0,T=0,O=0,U=0,$=0,H=0,Y=0,Q=0,re=0,oe=0,me=0;const Oe=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let ke=0;ke<h&&(g||y||x);ke++){const Ie=s[ke]&255;x&&(_>0?(Ie&128)===0?x=!1:_--:(Ie&128)!==0&&((Ie&64)===0?x=!1:(_++,(Ie&32)===0?T++:(_++,(Ie&16)===0?O++:(_++,(Ie&8)===0?U++:x=!1))))),g&&(Ie>127&&Ie<160?g=!1:Ie>159&&(Ie<192||Ie===215||Ie===247)&&me++),y&&($>0?Ie<64||Ie===127||Ie>252?y=!1:$--:Ie===128||Ie===160||Ie>239?y=!1:Ie>160&&Ie<224?(H++,Q=0,Y++,Y>re&&(re=Y)):Ie>127?($++,Y=0,Q++,Q>oe&&(oe=Q)):(Y=0,Q=0))}return x&&_>0&&(x=!1),y&&$>0&&(y=!1),x&&(Oe||T+O+U>0)?ae.UTF8:y&&(ae.ASSUME_SHIFT_JIS||re>=3||oe>=3)?ae.SHIFT_JIS:g&&y?re===2&&H===2||me*10>=h?ae.SHIFT_JIS:ae.ISO88591:g?ae.ISO88591:y?ae.SHIFT_JIS:x?ae.UTF8:ae.PLATFORM_DEFAULT_ENCODING}static format(s,...u){let h=-1;function g(x,_,T,O,U,$){if(x==="%%")return"%";if(u[++h]===void 0)return;x=O?parseInt(O.substr(1)):void 0;let H=U?parseInt(U.substr(1)):void 0,Y;switch($){case"s":Y=u[h];break;case"c":Y=u[h][0];break;case"f":Y=parseFloat(u[h]).toFixed(x);break;case"p":Y=parseFloat(u[h]).toPrecision(x);break;case"e":Y=parseFloat(u[h]).toExponential(x);break;case"x":Y=parseInt(u[h]).toString(H||16);break;case"d":Y=parseFloat(parseInt(u[h],H||10).toPrecision(x)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(H);let Q=parseInt(T),re=T&&T[0]+""=="0"?"0":" ";for(;Y.length<Q;)Y=_!==void 0?Y+re:re+Y;return Y}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(y,g)}static getBytes(s,u){return se.encode(s,u)}static getCharCode(s,u=0){return s.charCodeAt(u)}static getCharAt(s){return String.fromCharCode(s)}}ae.SHIFT_JIS=X.SJIS.getName(),ae.GB2312="GB2312",ae.ISO88591=X.ISO8859_1.getName(),ae.EUC_JP="EUC_JP",ae.UTF8=X.UTF8.getName(),ae.PLATFORM_DEFAULT_ENCODING=ae.UTF8,ae.ASSUME_SHIFT_JIS=!1;class be{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=ae.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,u,h){for(let g=u;u<u+h;g++)this.append(s[g]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,u){this.value=this.value.substr(0,s)+u+this.value.substr(s+1)}substring(s,u){return this.value.substring(s,u)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,u){this.value=this.value.substr(0,s)+u+this.value.substr(s+u.length)}}class he{constructor(s,u,h,g){if(this.width=s,this.height=u,this.rowSize=h,this.bits=g,u==null&&(u=s),this.height=u,s<1||u<1)throw new v("Both dimensions must be greater than 0");h==null&&(h=Math.floor((s+31)/32)),this.rowSize=h,g==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const u=s.length,h=s[0].length,g=new he(h,u);for(let y=0;y<u;y++){const x=s[y];for(let _=0;_<h;_++)x[_]&&g.set(_,y)}return g}static parseFromString(s,u,h){if(s===null)throw new v("stringRepresentation cannot be null");const g=new Array(s.length);let y=0,x=0,_=-1,T=0,O=0;for(;O<s.length;)if(s.charAt(O)===`
`||s.charAt(O)==="\r"){if(y>x){if(_===-1)_=y-x;else if(y-x!==_)throw new v("row lengths do not match");x=y,T++}O++}else if(s.substring(O,O+u.length)===u)O+=u.length,g[y]=!0,y++;else if(s.substring(O,O+h.length)===h)O+=h.length,g[y]=!1,y++;else throw new v("illegal character encountered: "+s.substring(O));if(y>x){if(_===-1)_=y-x;else if(y-x!==_)throw new v("row lengths do not match");T++}const U=new he(_,T);for(let $=0;$<y;$++)g[$]&&U.set(Math.floor($%_),Math.floor($/_));return U}get(s,u){const h=u*this.rowSize+Math.floor(s/32);return(this.bits[h]>>>(s&31)&1)!==0}set(s,u){const h=u*this.rowSize+Math.floor(s/32);this.bits[h]|=1<<(s&31)&4294967295}unset(s,u){const h=u*this.rowSize+Math.floor(s/32);this.bits[h]&=~(1<<(s&31)&4294967295)}flip(s,u){const h=u*this.rowSize+Math.floor(s/32);this.bits[h]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new v("input matrix dimensions do not match");const u=new V(Math.floor(this.width/32)+1),h=this.rowSize,g=this.bits;for(let y=0,x=this.height;y<x;y++){const _=y*h,T=s.getRow(y,u).getBitArray();for(let O=0;O<h;O++)g[_+O]^=T[O]}}clear(){const s=this.bits,u=s.length;for(let h=0;h<u;h++)s[h]=0}setRegion(s,u,h,g){if(u<0||s<0)throw new v("Left and top must be nonnegative");if(g<1||h<1)throw new v("Height and width must be at least 1");const y=s+h,x=u+g;if(x>this.height||y>this.width)throw new v("The region must fit inside the matrix");const _=this.rowSize,T=this.bits;for(let O=u;O<x;O++){const U=O*_;for(let $=s;$<y;$++)T[U+Math.floor($/32)]|=1<<($&31)&4294967295}}getRow(s,u){u==null||u.getSize()<this.width?u=new V(this.width):u.clear();const h=this.rowSize,g=this.bits,y=s*h;for(let x=0;x<h;x++)u.setBulk(x*32,g[y+x]);return u}setRow(s,u){P.arraycopy(u.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),u=this.getHeight();let h=new V(s),g=new V(s);for(let y=0,x=Math.floor((u+1)/2);y<x;y++)h=this.getRow(y,h),g=this.getRow(u-1-y,g),h.reverse(),g.reverse(),this.setRow(y,g),this.setRow(u-1-y,h)}getEnclosingRectangle(){const s=this.width,u=this.height,h=this.rowSize,g=this.bits;let y=s,x=u,_=-1,T=-1;for(let O=0;O<u;O++)for(let U=0;U<h;U++){const $=g[O*h+U];if($!==0){if(O<x&&(x=O),O>T&&(T=O),U*32<y){let H=0;for(;($<<31-H&4294967295)===0;)H++;U*32+H<y&&(y=U*32+H)}if(U*32+31>_){let H=31;for(;!($>>>H);)H--;U*32+H>_&&(_=U*32+H)}}}return _<y||T<x?null:Int32Array.from([y,x,_-y+1,T-x+1])}getTopLeftOnBit(){const s=this.rowSize,u=this.bits;let h=0;for(;h<u.length&&u[h]===0;)h++;if(h===u.length)return null;const g=h/s;let y=h%s*32;const x=u[h];let _=0;for(;(x<<31-_&4294967295)===0;)_++;return y+=_,Int32Array.from([y,g])}getBottomRightOnBit(){const s=this.rowSize,u=this.bits;let h=u.length-1;for(;h>=0&&u[h]===0;)h--;if(h<0)return null;const g=Math.floor(h/s);let y=Math.floor(h%s)*32;const x=u[h];let _=31;for(;!(x>>>_);)_--;return y+=_,Int32Array.from([y,g])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof he))return!1;const u=s;return this.width===u.width&&this.height===u.height&&this.rowSize===u.rowSize&&F.equals(this.bits,u.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+F.hashCode(this.bits),s}toString(s="X ",u="  ",h=`
`){return this.buildToString(s,u,h)}buildToString(s,u,h){let g=new be;for(let y=0,x=this.height;y<x;y++){for(let _=0,T=this.width;_<T;_++)g.append(this.get(_,y)?s:u);g.append(h)}return g.toString()}clone(){return new he(this.width,this.height,this.rowSize,this.bits.slice())}}class ne extends d{static getNotFoundInstance(){return new ne}}ne.kind="NotFoundException";class we extends I{constructor(s){super(s),this.luminances=we.EMPTY,this.buckets=new Int32Array(we.LUMINANCE_BUCKETS)}getBlackRow(s,u){const h=this.getLuminanceSource(),g=h.getWidth();u==null||u.getSize()<g?u=new V(g):u.clear(),this.initArrays(g);const y=h.getRow(s,this.luminances),x=this.buckets;for(let T=0;T<g;T++)x[(y[T]&255)>>we.LUMINANCE_SHIFT]++;const _=we.estimateBlackPoint(x);if(g<3)for(let T=0;T<g;T++)(y[T]&255)<_&&u.set(T);else{let T=y[0]&255,O=y[1]&255;for(let U=1;U<g-1;U++){const $=y[U+1]&255;(O*4-T-$)/2<_&&u.set(U),T=O,O=$}}return u}getBlackMatrix(){const s=this.getLuminanceSource(),u=s.getWidth(),h=s.getHeight(),g=new he(u,h);this.initArrays(u);const y=this.buckets;for(let T=1;T<5;T++){const O=Math.floor(h*T/5),U=s.getRow(O,this.luminances),$=Math.floor(u*4/5);for(let H=Math.floor(u/5);H<$;H++){const Y=U[H]&255;y[Y>>we.LUMINANCE_SHIFT]++}}const x=we.estimateBlackPoint(y),_=s.getMatrix();for(let T=0;T<h;T++){const O=T*u;for(let U=0;U<u;U++)(_[O+U]&255)<x&&g.set(U,T)}return g}createBinarizer(s){return new we(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const u=this.buckets;for(let h=0;h<we.LUMINANCE_BUCKETS;h++)u[h]=0}static estimateBlackPoint(s){const u=s.length;let h=0,g=0,y=0;for(let U=0;U<u;U++)s[U]>y&&(g=U,y=s[U]),s[U]>h&&(h=s[U]);let x=0,_=0;for(let U=0;U<u;U++){const $=U-g,H=s[U]*$*$;H>_&&(x=U,_=H)}if(g>x){const U=g;g=x,x=U}if(x-g<=u/16)throw new ne;let T=x-1,O=-1;for(let U=x-1;U>g;U--){const $=U-g,H=$*$*(x-U)*(h-s[U]);H>O&&(T=U,O=H)}return T<<we.LUMINANCE_SHIFT}}we.LUMINANCE_BITS=5,we.LUMINANCE_SHIFT=8-we.LUMINANCE_BITS,we.LUMINANCE_BUCKETS=1<<we.LUMINANCE_BITS,we.EMPTY=Uint8ClampedArray.from([0]);class ve extends we{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),u=s.getWidth(),h=s.getHeight();if(u>=ve.MINIMUM_DIMENSION&&h>=ve.MINIMUM_DIMENSION){const g=s.getMatrix();let y=u>>ve.BLOCK_SIZE_POWER;(u&ve.BLOCK_SIZE_MASK)!==0&&y++;let x=h>>ve.BLOCK_SIZE_POWER;(h&ve.BLOCK_SIZE_MASK)!==0&&x++;const _=ve.calculateBlackPoints(g,y,x,u,h),T=new he(u,h);ve.calculateThresholdForBlock(g,y,x,u,h,_,T),this.matrix=T}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new ve(s)}static calculateThresholdForBlock(s,u,h,g,y,x,_){const T=y-ve.BLOCK_SIZE,O=g-ve.BLOCK_SIZE;for(let U=0;U<h;U++){let $=U<<ve.BLOCK_SIZE_POWER;$>T&&($=T);const H=ve.cap(U,2,h-3);for(let Y=0;Y<u;Y++){let Q=Y<<ve.BLOCK_SIZE_POWER;Q>O&&(Q=O);const re=ve.cap(Y,2,u-3);let oe=0;for(let Oe=-2;Oe<=2;Oe++){const ke=x[H+Oe];oe+=ke[re-2]+ke[re-1]+ke[re]+ke[re+1]+ke[re+2]}const me=oe/25;ve.thresholdBlock(s,Q,$,me,g,_)}}}static cap(s,u,h){return s<u?u:s>h?h:s}static thresholdBlock(s,u,h,g,y,x){for(let _=0,T=h*y+u;_<ve.BLOCK_SIZE;_++,T+=y)for(let O=0;O<ve.BLOCK_SIZE;O++)(s[T+O]&255)<=g&&x.set(u+O,h+_)}static calculateBlackPoints(s,u,h,g,y){const x=y-ve.BLOCK_SIZE,_=g-ve.BLOCK_SIZE,T=new Array(h);for(let O=0;O<h;O++){T[O]=new Int32Array(u);let U=O<<ve.BLOCK_SIZE_POWER;U>x&&(U=x);for(let $=0;$<u;$++){let H=$<<ve.BLOCK_SIZE_POWER;H>_&&(H=_);let Y=0,Q=255,re=0;for(let me=0,Oe=U*g+H;me<ve.BLOCK_SIZE;me++,Oe+=g){for(let ke=0;ke<ve.BLOCK_SIZE;ke++){const Ie=s[Oe+ke]&255;Y+=Ie,Ie<Q&&(Q=Ie),Ie>re&&(re=Ie)}if(re-Q>ve.MIN_DYNAMIC_RANGE)for(me++,Oe+=g;me<ve.BLOCK_SIZE;me++,Oe+=g)for(let ke=0;ke<ve.BLOCK_SIZE;ke++)Y+=s[Oe+ke]&255}let oe=Y>>ve.BLOCK_SIZE_POWER*2;if(re-Q<=ve.MIN_DYNAMIC_RANGE&&(oe=Q/2,O>0&&$>0)){const me=(T[O-1][$]+2*T[O][$-1]+T[O-1][$-1])/4;Q<me&&(oe=me)}T[O][$]=oe}}return T}}ve.BLOCK_SIZE_POWER=3,ve.BLOCK_SIZE=1<<ve.BLOCK_SIZE_POWER,ve.BLOCK_SIZE_MASK=ve.BLOCK_SIZE-1,ve.MINIMUM_DIMENSION=ve.BLOCK_SIZE*5,ve.MIN_DYNAMIC_RANGE=24;class xe{constructor(s,u){this.width=s,this.height=u}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,u,h,g){throw new fe("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new fe("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new fe("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let u=new be;for(let h=0;h<this.height;h++){const g=this.getRow(h,s);for(let y=0;y<this.width;y++){const x=g[y]&255;let _;x<64?_="#":x<128?_="+":x<192?_=".":_=" ",u.append(_)}u.append(`
`)}return u.toString()}}class Se extends xe{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,u){const h=this.delegate.getRow(s,u),g=this.getWidth();for(let y=0;y<g;y++)h[y]=255-(h[y]&255);return h}getMatrix(){const s=this.delegate.getMatrix(),u=this.getWidth()*this.getHeight(),h=new Uint8ClampedArray(u);for(let g=0;g<u;g++)h[g]=255-(s[g]&255);return h}isCropSupported(){return this.delegate.isCropSupported()}crop(s,u,h,g){return new Se(this.delegate.crop(s,u,h,g))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Se(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Se(this.delegate.rotateCounterClockwise45())}}class Ce extends xe{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Ce.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const u=s.getContext("2d").getImageData(0,0,s.width,s.height);return Ce.toGrayscaleBuffer(u.data,s.width,s.height)}static toGrayscaleBuffer(s,u,h){const g=new Uint8ClampedArray(u*h);for(let y=0,x=0,_=s.length;y<_;y+=4,x++){let T;if(s[y+3]===0)T=255;else{const U=s[y],$=s[y+1],H=s[y+2];T=306*U+601*$+117*H+512>>10}g[x]=T}return g}getRow(s,u){if(s<0||s>=this.getHeight())throw new v("Requested row is outside the image: "+s);const h=this.getWidth(),g=s*h;return u===null?u=this.buffer.slice(g,g+h):(u.length<h&&(u=new Uint8ClampedArray(h)),u.set(this.buffer.slice(g,g+h))),u}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,u,h,g){return super.crop(s,u,h,g),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const u=this.getTempCanvasElement(),h=u.getContext("2d"),g=s*Ce.DEGREE_TO_RADIANS,y=this.canvas.width,x=this.canvas.height,_=Math.ceil(Math.abs(Math.cos(g))*y+Math.abs(Math.sin(g))*x),T=Math.ceil(Math.abs(Math.sin(g))*y+Math.abs(Math.cos(g))*x);return u.width=_,u.height=T,h.translate(_/2,T/2),h.rotate(g),h.drawImage(this.canvas,y/-2,x/-2),this.buffer=Ce.makeBufferFromCanvasImageData(u),this}invert(){return new Se(this)}}Ce.DEGREE_TO_RADIANS=Math.PI/180;class te{constructor(s,u,h){this.deviceId=s,this.label=u,this.kind="videoinput",this.groupId=h||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var pe=(globalThis||Sh||self||window||void 0)&&(globalThis||Sh||self||window||void 0).__awaiter||function(j,s,u,h){function g(y){return y instanceof u?y:new u(function(x){x(y)})}return new(u||(u=Promise))(function(y,x){function _(U){try{O(h.next(U))}catch($){x($)}}function T(U){try{O(h.throw(U))}catch($){x($)}}function O(U){U.done?y(U.value):g(U.value).then(_,T)}O((h=h.apply(j,s||[])).next())})};class Fe{constructor(s,u=500,h){this.reader=s,this.timeBetweenScansMillis=u,this._hints=h,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return pe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),u=[];for(const h of s){const g=h.kind==="video"?"videoinput":h.kind;if(g!=="videoinput")continue;const y=h.deviceId||h.id,x=h.label||`Video device ${u.length+1}`,_=h.groupId,T={deviceId:y,label:x,kind:g,groupId:_};u.push(T)}return u})}getVideoInputDevices(){return pe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(u=>new te(u.deviceId,u.label))})}findDeviceById(s){return pe(this,void 0,void 0,function*(){const u=yield this.listVideoInputDevices();return u?u.find(h=>h.deviceId===s):null})}decodeFromInputVideoDevice(s,u){return pe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,u)})}decodeOnceFromVideoDevice(s,u){return pe(this,void 0,void 0,function*(){this.reset();let h;s?h={deviceId:{exact:s}}:h={facingMode:"environment"};const g={video:h};return yield this.decodeOnceFromConstraints(g,u)})}decodeOnceFromConstraints(s,u){return pe(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(h,u)})}decodeOnceFromStream(s,u){return pe(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(s,u);return yield this.decodeOnce(h)})}decodeFromInputVideoDeviceContinuously(s,u,h){return pe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,u,h)})}decodeFromVideoDevice(s,u,h){return pe(this,void 0,void 0,function*(){let g;s?g={deviceId:{exact:s}}:g={facingMode:"environment"};const y={video:g};return yield this.decodeFromConstraints(y,u,h)})}decodeFromConstraints(s,u,h){return pe(this,void 0,void 0,function*(){const g=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(g,u,h)})}decodeFromStream(s,u,h){return pe(this,void 0,void 0,function*(){this.reset();const g=yield this.attachStreamToVideo(s,u);return yield this.decodeContinuously(g,h)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,u){return pe(this,void 0,void 0,function*(){const h=this.prepareVideoElement(u);return this.addVideoSource(h,s),this.videoElement=h,this.stream=s,yield this.playVideoOnLoadAsync(h),h})}playVideoOnLoadAsync(s){return new Promise((u,h)=>this.playVideoOnLoad(s,()=>u()))}playVideoOnLoad(s,u){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",u),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return pe(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,u){const h=document.getElementById(s);if(!h)throw new m(`element with id '${s}' not found`);if(h.nodeName.toLowerCase()!==u.toLowerCase())throw new m(`element with id '${s}' must be an ${u} element`);return h}decodeFromImage(s,u){if(!s&&!u)throw new m("either imageElement with a src set or an url must be provided");return u&&!s?this.decodeFromImageUrl(u):this.decodeFromImageElement(s)}decodeFromVideo(s,u){if(!s&&!u)throw new m("Either an element with a src set or an URL must be provided");return u&&!s?this.decodeFromVideoUrl(u):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,u,h){if(s===void 0&&u===void 0)throw new m("Either an element with a src set or an URL must be provided");return u&&!s?this.decodeFromVideoUrlContinuously(u,h):this.decodeFromVideoElementContinuously(s,h)}decodeFromImageElement(s){if(!s)throw new m("An image element must be provided.");this.reset();const u=this.prepareImageElement(s);this.imageElement=u;let h;return this.isImageLoaded(u)?h=this.decodeOnce(u,!1,!0):h=this._decodeOnLoadImage(u),h}decodeFromVideoElement(s){const u=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(u)}decodeFromVideoElementContinuously(s,u){const h=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(h,u)}_decodeFromVideoElementSetup(s){if(!s)throw new m("A video element must be provided.");this.reset();const u=this.prepareVideoElement(s);return this.videoElement=u,u}decodeFromImageUrl(s){if(!s)throw new m("An URL must be provided.");this.reset();const u=this.prepareImageElement();this.imageElement=u;const h=this._decodeOnLoadImage(u);return u.src=s,h}decodeFromVideoUrl(s){if(!s)throw new m("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),h=this.decodeFromVideoElement(u);return u.src=s,h}decodeFromVideoUrlContinuously(s,u){if(!s)throw new m("An URL must be provided.");this.reset();const h=this.prepareVideoElement(),g=this.decodeFromVideoElementContinuously(h,u);return h.src=s,g}_decodeOnLoadImage(s){return new Promise((u,h)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(u,h),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return pe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,u){return pe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,u)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let u;return typeof s>"u"&&(u=document.createElement("img"),u.width=200,u.height=200),typeof s=="string"&&(u=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(u=s),u}prepareVideoElement(s){let u;return!s&&typeof document<"u"&&(u=document.createElement("video"),u.width=200,u.height=200),typeof s=="string"&&(u=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(u=s),u.setAttribute("autoplay","true"),u.setAttribute("muted","true"),u.setAttribute("playsinline","true"),u}decodeOnce(s,u=!0,h=!0){this._stopAsyncDecode=!1;const g=(y,x)=>{if(this._stopAsyncDecode){x(new ne("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const _=this.decode(s);y(_)}catch(_){const T=u&&_ instanceof ne,U=(_ instanceof C||_ instanceof W)&&h;if(T||U)return setTimeout(g,this._timeBetweenDecodingAttempts,y,x);x(_)}};return new Promise((y,x)=>g(y,x))}decodeContinuously(s,u){this._stopContinuousDecode=!1;const h=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const g=this.decode(s);u(g,null),setTimeout(h,this.timeBetweenScansMillis)}catch(g){u(null,g);const y=g instanceof C||g instanceof W,x=g instanceof ne;(y||x)&&setTimeout(h,this._timeBetweenDecodingAttempts)}};h()}decode(s){const u=this.createBinaryBitmap(s);return this.decodeBitmap(u)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,u,h){u||(u={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),h||(h=this.captureCanvasContext),h.drawImage(s,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}drawImageOnCanvas(s,u,h=this.captureCanvasContext){u||(u={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),h||(h=this.captureCanvasContext),h.drawImage(s,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const u=this.getCaptureCanvas(s),h=new Ce(u),g=new ve(h);return new E(g)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const h=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=h}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const u=this.createCaptureCanvas(s);this.captureCanvas=u}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const u=document.createElement("canvas");let h,g;return typeof s<"u"&&(s instanceof HTMLVideoElement?(h=s.videoWidth,g=s.videoHeight):s instanceof HTMLImageElement&&(h=s.naturalWidth||s.width,g=s.naturalHeight||s.height)),u.style.width=h+"px",u.style.height=g+"px",u.width=h,u.height=g,u}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,u){try{s.srcObject=u}catch{s.src=URL.createObjectURL(u)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Le{constructor(s,u,h=u==null?0:8*u.length,g,y,x=P.currentTimeMillis()){this.text=s,this.rawBytes=u,this.numBits=h,this.resultPoints=g,this.format=y,this.timestamp=x,this.text=s,this.rawBytes=u,h==null?this.numBits=u==null?0:8*u.length:this.numBits=h,this.resultPoints=g,this.format=y,this.resultMetadata=null,x==null?this.timestamp=P.currentTimeMillis():this.timestamp=x}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,u){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,u)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const u=this.resultPoints;if(u===null)this.resultPoints=s;else if(s!==null&&s.length>0){const h=new Array(u.length+s.length);P.arraycopy(u,0,h,0,u.length),P.arraycopy(s,0,h,u.length,s.length),this.resultPoints=h}}getTimestamp(){return this.timestamp}toString(){return this.text}}var lt;(function(j){j[j.AZTEC=0]="AZTEC",j[j.CODABAR=1]="CODABAR",j[j.CODE_39=2]="CODE_39",j[j.CODE_93=3]="CODE_93",j[j.CODE_128=4]="CODE_128",j[j.DATA_MATRIX=5]="DATA_MATRIX",j[j.EAN_8=6]="EAN_8",j[j.EAN_13=7]="EAN_13",j[j.ITF=8]="ITF",j[j.MAXICODE=9]="MAXICODE",j[j.PDF_417=10]="PDF_417",j[j.QR_CODE=11]="QR_CODE",j[j.RSS_14=12]="RSS_14",j[j.RSS_EXPANDED=13]="RSS_EXPANDED",j[j.UPC_A=14]="UPC_A",j[j.UPC_E=15]="UPC_E",j[j.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(lt||(lt={}));var Ne=lt,ct;(function(j){j[j.OTHER=0]="OTHER",j[j.ORIENTATION=1]="ORIENTATION",j[j.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",j[j.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",j[j.ISSUE_NUMBER=4]="ISSUE_NUMBER",j[j.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",j[j.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",j[j.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",j[j.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",j[j.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",j[j.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ct||(ct={}));var rt=ct;class Ee{constructor(s,u,h,g,y=-1,x=-1){this.rawBytes=s,this.text=u,this.byteSegments=h,this.ecLevel=g,this.structuredAppendSequenceNumber=y,this.structuredAppendParity=x,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class et{exp(s){return this.expTable[s]}log(s){if(s===0)throw new v;return this.logTable[s]}static addOrSubtract(s,u){return s^u}}class Me{constructor(s,u){if(u.length===0)throw new v;this.field=s;const h=u.length;if(h>1&&u[0]===0){let g=1;for(;g<h&&u[g]===0;)g++;g===h?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(h-g),P.arraycopy(u,g,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const u=this.coefficients;let h;if(s===1){h=0;for(let x=0,_=u.length;x!==_;x++){const T=u[x];h=et.addOrSubtract(h,T)}return h}h=u[0];const g=u.length,y=this.field;for(let x=1;x<g;x++)h=et.addOrSubtract(y.multiply(s,h),u[x]);return h}addOrSubtract(s){if(!this.field.equals(s.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let u=this.coefficients,h=s.coefficients;if(u.length>h.length){const x=u;u=h,h=x}let g=new Int32Array(h.length);const y=h.length-u.length;P.arraycopy(h,0,g,0,y);for(let x=y;x<h.length;x++)g[x]=et.addOrSubtract(u[x-y],h[x]);return new Me(this.field,g)}multiply(s){if(!this.field.equals(s.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const u=this.coefficients,h=u.length,g=s.coefficients,y=g.length,x=new Int32Array(h+y-1),_=this.field;for(let T=0;T<h;T++){const O=u[T];for(let U=0;U<y;U++)x[T+U]=et.addOrSubtract(x[T+U],_.multiply(O,g[U]))}return new Me(_,x)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const u=this.coefficients.length,h=this.field,g=new Int32Array(u),y=this.coefficients;for(let x=0;x<u;x++)g[x]=h.multiply(y[x],s);return new Me(h,g)}multiplyByMonomial(s,u){if(s<0)throw new v;if(u===0)return this.field.getZero();const h=this.coefficients,g=h.length,y=new Int32Array(g+s),x=this.field;for(let _=0;_<g;_++)y[_]=x.multiply(h[_],u);return new Me(x,y)}divide(s){if(!this.field.equals(s.field))throw new v("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new v("Divide by 0");const u=this.field;let h=u.getZero(),g=this;const y=s.getCoefficient(s.getDegree()),x=u.inverse(y);for(;g.getDegree()>=s.getDegree()&&!g.isZero();){const _=g.getDegree()-s.getDegree(),T=u.multiply(g.getCoefficient(g.getDegree()),x),O=s.multiplyByMonomial(_,T),U=u.buildMonomial(_,T);h=h.addOrSubtract(U),g=g.addOrSubtract(O)}return[h,g]}toString(){let s="";for(let u=this.getDegree();u>=0;u--){let h=this.getCoefficient(u);if(h!==0){if(h<0?(s+=" - ",h=-h):s.length>0&&(s+=" + "),u===0||h!==1){const g=this.field.log(h);g===0?s+="1":g===1?s+="a":(s+="a^",s+=g)}u!==0&&(u===1?s+="x":(s+="x^",s+=u))}}return s}}class _e extends d{}_e.kind="ArithmeticException";class Ke extends et{constructor(s,u,h){super(),this.primitive=s,this.size=u,this.generatorBase=h;const g=new Int32Array(u);let y=1;for(let _=0;_<u;_++)g[_]=y,y*=2,y>=u&&(y^=s,y&=u-1);this.expTable=g;const x=new Int32Array(u);for(let _=0;_<u-1;_++)x[g[_]]=_;this.logTable=x,this.zero=new Me(this,Int32Array.from([0])),this.one=new Me(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,u){if(s<0)throw new v;if(u===0)return this.zero;const h=new Int32Array(s+1);return h[0]=u,new Me(this,h)}inverse(s){if(s===0)throw new _e;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,u){return s===0||u===0?0:this.expTable[(this.logTable[s]+this.logTable[u])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+L.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}Ke.AZTEC_DATA_12=new Ke(4201,4096,1),Ke.AZTEC_DATA_10=new Ke(1033,1024,1),Ke.AZTEC_DATA_6=new Ke(67,64,1),Ke.AZTEC_PARAM=new Ke(19,16,1),Ke.QR_CODE_FIELD_256=new Ke(285,256,0),Ke.DATA_MATRIX_FIELD_256=new Ke(301,256,1),Ke.AZTEC_DATA_8=Ke.DATA_MATRIX_FIELD_256,Ke.MAXICODE_FIELD_64=Ke.AZTEC_DATA_6;class dt extends d{}dt.kind="ReedSolomonException";class It extends d{}It.kind="IllegalStateException";class An{constructor(s){this.field=s}decode(s,u){const h=this.field,g=new Me(h,s),y=new Int32Array(u);let x=!0;for(let Y=0;Y<u;Y++){const Q=g.evaluateAt(h.exp(Y+h.getGeneratorBase()));y[y.length-1-Y]=Q,Q!==0&&(x=!1)}if(x)return;const _=new Me(h,y),T=this.runEuclideanAlgorithm(h.buildMonomial(u,1),_,u),O=T[0],U=T[1],$=this.findErrorLocations(O),H=this.findErrorMagnitudes(U,$);for(let Y=0;Y<$.length;Y++){const Q=s.length-1-h.log($[Y]);if(Q<0)throw new dt("Bad error location");s[Q]=Ke.addOrSubtract(s[Q],H[Y])}}runEuclideanAlgorithm(s,u,h){if(s.getDegree()<u.getDegree()){const Y=s;s=u,u=Y}const g=this.field;let y=s,x=u,_=g.getZero(),T=g.getOne();for(;x.getDegree()>=(h/2|0);){let Y=y,Q=_;if(y=x,_=T,y.isZero())throw new dt("r_{i-1} was zero");x=Y;let re=g.getZero();const oe=y.getCoefficient(y.getDegree()),me=g.inverse(oe);for(;x.getDegree()>=y.getDegree()&&!x.isZero();){const Oe=x.getDegree()-y.getDegree(),ke=g.multiply(x.getCoefficient(x.getDegree()),me);re=re.addOrSubtract(g.buildMonomial(Oe,ke)),x=x.addOrSubtract(y.multiplyByMonomial(Oe,ke))}if(T=re.multiply(_).addOrSubtract(Q),x.getDegree()>=y.getDegree())throw new It("Division algorithm failed to reduce polynomial?")}const O=T.getCoefficient(0);if(O===0)throw new dt("sigmaTilde(0) was zero");const U=g.inverse(O),$=T.multiplyScalar(U),H=x.multiplyScalar(U);return[$,H]}findErrorLocations(s){const u=s.getDegree();if(u===1)return Int32Array.from([s.getCoefficient(1)]);const h=new Int32Array(u);let g=0;const y=this.field;for(let x=1;x<y.getSize()&&g<u;x++)s.evaluateAt(x)===0&&(h[g]=y.inverse(x),g++);if(g!==u)throw new dt("Error locator degree does not match number of roots");return h}findErrorMagnitudes(s,u){const h=u.length,g=new Int32Array(h),y=this.field;for(let x=0;x<h;x++){const _=y.inverse(u[x]);let T=1;for(let O=0;O<h;O++)if(x!==O){const U=y.multiply(u[O],_),$=(U&1)===0?U|1:U&-2;T=y.multiply(T,$)}g[x]=y.multiply(s.evaluateAt(_),y.inverse(T)),y.getGeneratorBase()!==0&&(g[x]=y.multiply(g[x],_))}return g}}var $t;(function(j){j[j.UPPER=0]="UPPER",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.DIGIT=3]="DIGIT",j[j.PUNCT=4]="PUNCT",j[j.BINARY=5]="BINARY"})($t||($t={}));class Rt{decode(s){this.ddata=s;let u=s.getBits(),h=this.extractBits(u),g=this.correctBits(h),y=Rt.convertBoolArrayToByteArray(g),x=Rt.getEncodedData(g),_=new Ee(y,x,null,null);return _.setNumBits(g.length),_}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let u=s.length,h=$t.UPPER,g=$t.UPPER,y="",x=0;for(;x<u;)if(g===$t.BINARY){if(u-x<5)break;let _=Rt.readCode(s,x,5);if(x+=5,_===0){if(u-x<11)break;_=Rt.readCode(s,x,11)+31,x+=11}for(let T=0;T<_;T++){if(u-x<8){x=u;break}const O=Rt.readCode(s,x,8);y+=ae.castAsNonUtf8Char(O),x+=8}g=h}else{let _=g===$t.DIGIT?4:5;if(u-x<_)break;let T=Rt.readCode(s,x,_);x+=_;let O=Rt.getCharacter(g,T);O.startsWith("CTRL_")?(h=g,g=Rt.getTable(O.charAt(5)),O.charAt(6)==="L"&&(h=g)):(y+=O,g=h)}return y}static getTable(s){switch(s){case"L":return $t.LOWER;case"P":return $t.PUNCT;case"M":return $t.MIXED;case"D":return $t.DIGIT;case"B":return $t.BINARY;case"U":default:return $t.UPPER}}static getCharacter(s,u){switch(s){case $t.UPPER:return Rt.UPPER_TABLE[u];case $t.LOWER:return Rt.LOWER_TABLE[u];case $t.MIXED:return Rt.MIXED_TABLE[u];case $t.PUNCT:return Rt.PUNCT_TABLE[u];case $t.DIGIT:return Rt.DIGIT_TABLE[u];default:throw new It("Bad table")}}correctBits(s){let u,h;this.ddata.getNbLayers()<=2?(h=6,u=Ke.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(h=8,u=Ke.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(h=10,u=Ke.AZTEC_DATA_10):(h=12,u=Ke.AZTEC_DATA_12);let g=this.ddata.getNbDatablocks(),y=s.length/h;if(y<g)throw new W;let x=s.length%h,_=new Int32Array(y);for(let H=0;H<y;H++,x+=h)_[H]=Rt.readCode(s,x,h);try{new An(u).decode(_,y-g)}catch(H){throw new W(H)}let T=(1<<h)-1,O=0;for(let H=0;H<g;H++){let Y=_[H];if(Y===0||Y===T)throw new W;(Y===1||Y===T-1)&&O++}let U=new Array(g*h-O),$=0;for(let H=0;H<g;H++){let Y=_[H];if(Y===1||Y===T-1)U.fill(Y>1,$,$+h-1),$+=h-1;else for(let Q=h-1;Q>=0;--Q)U[$++]=(Y&1<<Q)!==0}return U}extractBits(s){let u=this.ddata.isCompact(),h=this.ddata.getNbLayers(),g=(u?11:14)+h*4,y=new Int32Array(g),x=new Array(this.totalBitsInLayer(h,u));if(u)for(let _=0;_<y.length;_++)y[_]=_;else{let _=g+1+2*L.truncDivision(L.truncDivision(g,2)-1,15),T=g/2,O=L.truncDivision(_,2);for(let U=0;U<T;U++){let $=U+L.truncDivision(U,15);y[T-U-1]=O-$-1,y[T+U]=O+$+1}}for(let _=0,T=0;_<h;_++){let O=(h-_)*4+(u?9:12),U=_*2,$=g-1-U;for(let H=0;H<O;H++){let Y=H*2;for(let Q=0;Q<2;Q++)x[T+Y+Q]=s.get(y[U+Q],y[U+H]),x[T+2*O+Y+Q]=s.get(y[U+H],y[$-Q]),x[T+4*O+Y+Q]=s.get(y[$-Q],y[$-H]),x[T+6*O+Y+Q]=s.get(y[$-H],y[U+Q])}T+=O*8}return x}static readCode(s,u,h){let g=0;for(let y=u;y<u+h;y++)g<<=1,s[y]&&(g|=1);return g}static readByte(s,u){let h=s.length-u;return h>=8?Rt.readCode(s,u,8):Rt.readCode(s,u,h)<<8-h}static convertBoolArrayToByteArray(s){let u=new Uint8Array((s.length+7)/8);for(let h=0;h<u.length;h++)u[h]=Rt.readByte(s,8*h);return u}totalBitsInLayer(s,u){return((u?88:112)+16*s)*s}}Rt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Rt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Rt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Rt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Rt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class _t{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,u,h,g){const y=s-h,x=u-g;return Math.sqrt(y*y+x*x)}static sum(s){let u=0;for(let h=0,g=s.length;h!==g;h++){const y=s[h];u+=y}return u}}class Po{static floatToIntBits(s){return s}}Po.MAX_VALUE=Number.MAX_SAFE_INTEGER;class $e{constructor(s,u){this.x=s,this.y=u}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof $e){const u=s;return this.x===u.x&&this.y===u.y}return!1}hashCode(){return 31*Po.floatToIntBits(this.x)+Po.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const u=this.distance(s[0],s[1]),h=this.distance(s[1],s[2]),g=this.distance(s[0],s[2]);let y,x,_;if(h>=u&&h>=g?(x=s[0],y=s[1],_=s[2]):g>=h&&g>=u?(x=s[1],y=s[0],_=s[2]):(x=s[2],y=s[0],_=s[1]),this.crossProductZ(y,x,_)<0){const T=y;y=_,_=T}s[0]=y,s[1]=x,s[2]=_}static distance(s,u){return _t.distance(s.x,s.y,u.x,u.y)}static crossProductZ(s,u,h){const g=u.x,y=u.y;return(h.x-g)*(s.y-y)-(h.y-y)*(s.x-g)}}class Bs{constructor(s,u){this.bits=s,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class fc extends Bs{constructor(s,u,h,g,y){super(s,u),this.compact=h,this.nbDatablocks=g,this.nbLayers=y}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Di{constructor(s,u,h,g){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),u==null&&(u=Di.INIT_SIZE),h==null&&(h=s.getWidth()/2|0),g==null&&(g=s.getHeight()/2|0);const y=u/2|0;if(this.leftInit=h-y,this.rightInit=h+y,this.upInit=g-y,this.downInit=g+y,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ne}detect(){let s=this.leftInit,u=this.rightInit,h=this.upInit,g=this.downInit,y=!1,x=!0,_=!1,T=!1,O=!1,U=!1,$=!1;const H=this.width,Y=this.height;for(;x;){x=!1;let Q=!0;for(;(Q||!T)&&u<H;)Q=this.containsBlackPoint(h,g,u,!1),Q?(u++,x=!0,T=!0):T||u++;if(u>=H){y=!0;break}let re=!0;for(;(re||!O)&&g<Y;)re=this.containsBlackPoint(s,u,g,!0),re?(g++,x=!0,O=!0):O||g++;if(g>=Y){y=!0;break}let oe=!0;for(;(oe||!U)&&s>=0;)oe=this.containsBlackPoint(h,g,s,!1),oe?(s--,x=!0,U=!0):U||s--;if(s<0){y=!0;break}let me=!0;for(;(me||!$)&&h>=0;)me=this.containsBlackPoint(s,u,h,!0),me?(h--,x=!0,$=!0):$||h--;if(h<0){y=!0;break}x&&(_=!0)}if(!y&&_){const Q=u-s;let re=null;for(let ke=1;re===null&&ke<Q;ke++)re=this.getBlackPointOnSegment(s,g-ke,s+ke,g);if(re==null)throw new ne;let oe=null;for(let ke=1;oe===null&&ke<Q;ke++)oe=this.getBlackPointOnSegment(s,h+ke,s+ke,h);if(oe==null)throw new ne;let me=null;for(let ke=1;me===null&&ke<Q;ke++)me=this.getBlackPointOnSegment(u,h+ke,u-ke,h);if(me==null)throw new ne;let Oe=null;for(let ke=1;Oe===null&&ke<Q;ke++)Oe=this.getBlackPointOnSegment(u,g-ke,u-ke,g);if(Oe==null)throw new ne;return this.centerEdges(Oe,re,me,oe)}else throw new ne}getBlackPointOnSegment(s,u,h,g){const y=_t.round(_t.distance(s,u,h,g)),x=(h-s)/y,_=(g-u)/y,T=this.image;for(let O=0;O<y;O++){const U=_t.round(s+O*x),$=_t.round(u+O*_);if(T.get(U,$))return new $e(U,$)}return null}centerEdges(s,u,h,g){const y=s.getX(),x=s.getY(),_=u.getX(),T=u.getY(),O=h.getX(),U=h.getY(),$=g.getX(),H=g.getY(),Y=Di.CORR;return y<this.width/2?[new $e($-Y,H+Y),new $e(_+Y,T+Y),new $e(O-Y,U-Y),new $e(y+Y,x-Y)]:[new $e($+Y,H+Y),new $e(_+Y,T-Y),new $e(O-Y,U+Y),new $e(y-Y,x-Y)]}containsBlackPoint(s,u,h,g){const y=this.image;if(g){for(let x=s;x<=u;x++)if(y.get(x,h))return!0}else for(let x=s;x<=u;x++)if(y.get(h,x))return!0;return!1}}Di.INIT_SIZE=10,Di.CORR=1;class Ll{static checkAndNudgePoints(s,u){const h=s.getWidth(),g=s.getHeight();let y=!0;for(let x=0;x<u.length&&y;x+=2){const _=Math.floor(u[x]),T=Math.floor(u[x+1]);if(_<-1||_>h||T<-1||T>g)throw new ne;y=!1,_===-1?(u[x]=0,y=!0):_===h&&(u[x]=h-1,y=!0),T===-1?(u[x+1]=0,y=!0):T===g&&(u[x+1]=g-1,y=!0)}y=!0;for(let x=u.length-2;x>=0&&y;x-=2){const _=Math.floor(u[x]),T=Math.floor(u[x+1]);if(_<-1||_>h||T<-1||T>g)throw new ne;y=!1,_===-1?(u[x]=0,y=!0):_===h&&(u[x]=h-1,y=!0),T===-1?(u[x+1]=0,y=!0):T===g&&(u[x+1]=g-1,y=!0)}}}class Zr{constructor(s,u,h,g,y,x,_,T,O){this.a11=s,this.a21=u,this.a31=h,this.a12=g,this.a22=y,this.a32=x,this.a13=_,this.a23=T,this.a33=O}static quadrilateralToQuadrilateral(s,u,h,g,y,x,_,T,O,U,$,H,Y,Q,re,oe){const me=Zr.quadrilateralToSquare(s,u,h,g,y,x,_,T);return Zr.squareToQuadrilateral(O,U,$,H,Y,Q,re,oe).times(me)}transformPoints(s){const u=s.length,h=this.a11,g=this.a12,y=this.a13,x=this.a21,_=this.a22,T=this.a23,O=this.a31,U=this.a32,$=this.a33;for(let H=0;H<u;H+=2){const Y=s[H],Q=s[H+1],re=y*Y+T*Q+$;s[H]=(h*Y+x*Q+O)/re,s[H+1]=(g*Y+_*Q+U)/re}}transformPointsWithValues(s,u){const h=this.a11,g=this.a12,y=this.a13,x=this.a21,_=this.a22,T=this.a23,O=this.a31,U=this.a32,$=this.a33,H=s.length;for(let Y=0;Y<H;Y++){const Q=s[Y],re=u[Y],oe=y*Q+T*re+$;s[Y]=(h*Q+x*re+O)/oe,u[Y]=(g*Q+_*re+U)/oe}}static squareToQuadrilateral(s,u,h,g,y,x,_,T){const O=s-h+y-_,U=u-g+x-T;if(O===0&&U===0)return new Zr(h-s,y-h,s,g-u,x-g,u,0,0,1);{const $=h-y,H=_-y,Y=g-x,Q=T-x,re=$*Q-H*Y,oe=(O*Q-H*U)/re,me=($*U-O*Y)/re;return new Zr(h-s+oe*h,_-s+me*_,s,g-u+oe*g,T-u+me*T,u,oe,me,1)}}static quadrilateralToSquare(s,u,h,g,y,x,_,T){return Zr.squareToQuadrilateral(s,u,h,g,y,x,_,T).buildAdjoint()}buildAdjoint(){return new Zr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Zr(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Bl extends Ll{sampleGrid(s,u,h,g,y,x,_,T,O,U,$,H,Y,Q,re,oe,me,Oe,ke){const Ie=Zr.quadrilateralToQuadrilateral(g,y,x,_,T,O,U,$,H,Y,Q,re,oe,me,Oe,ke);return this.sampleGridWithTransform(s,u,h,Ie)}sampleGridWithTransform(s,u,h,g){if(u<=0||h<=0)throw new ne;const y=new he(u,h),x=new Float32Array(2*u);for(let _=0;_<h;_++){const T=x.length,O=_+.5;for(let U=0;U<T;U+=2)x[U]=U/2+.5,x[U+1]=O;g.transformPoints(x),Ll.checkAndNudgePoints(s,x);try{for(let U=0;U<T;U+=2)s.get(Math.floor(x[U]),Math.floor(x[U+1]))&&y.set(U/2,_)}catch{throw new ne}}return y}}class pi{static setGridSampler(s){pi.gridSampler=s}static getInstance(){return pi.gridSampler}}pi.gridSampler=new Bl;class lr{constructor(s,u){this.x=s,this.y=u}toResultPoint(){return new $e(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Fs{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let u=this.getMatrixCenter(),h=this.getBullsEyeCorners(u);if(s){let x=h[0];h[0]=h[2],h[2]=x}this.extractParameters(h);let g=this.sampleGrid(this.image,h[this.shift%4],h[(this.shift+1)%4],h[(this.shift+2)%4],h[(this.shift+3)%4]),y=this.getMatrixCornerPoints(h);return new fc(g,y,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new ne;let u=2*this.nbCenterLayers,h=new Int32Array([this.sampleLine(s[0],s[1],u),this.sampleLine(s[1],s[2],u),this.sampleLine(s[2],s[3],u),this.sampleLine(s[3],s[0],u)]);this.shift=this.getRotation(h,u);let g=0;for(let x=0;x<4;x++){let _=h[(this.shift+x)%4];this.compact?(g<<=7,g+=_>>1&127):(g<<=10,g+=(_>>2&992)+(_>>1&31))}let y=this.getCorrectedParameterData(g,this.compact);this.compact?(this.nbLayers=(y>>6)+1,this.nbDataBlocks=(y&63)+1):(this.nbLayers=(y>>11)+1,this.nbDataBlocks=(y&2047)+1)}getRotation(s,u){let h=0;s.forEach((g,y,x)=>{let _=(g>>u-2<<1)+(g&1);h=(h<<3)+_}),h=((h&1)<<11)+(h>>1);for(let g=0;g<4;g++)if(L.bitCount(h^this.EXPECTED_CORNER_BITS[g])<=2)return g;throw new ne}getCorrectedParameterData(s,u){let h,g;u?(h=7,g=2):(h=10,g=4);let y=h-g,x=new Int32Array(h);for(let T=h-1;T>=0;--T)x[T]=s&15,s>>=4;try{new An(Ke.AZTEC_PARAM).decode(x,y)}catch{throw new ne}let _=0;for(let T=0;T<g;T++)_=(_<<4)+x[T];return _}getBullsEyeCorners(s){let u=s,h=s,g=s,y=s,x=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let $=this.getFirstDifferent(u,x,1,-1),H=this.getFirstDifferent(h,x,1,1),Y=this.getFirstDifferent(g,x,-1,1),Q=this.getFirstDifferent(y,x,-1,-1);if(this.nbCenterLayers>2){let re=this.distancePoint(Q,$)*this.nbCenterLayers/(this.distancePoint(y,u)*(this.nbCenterLayers+2));if(re<.75||re>1.25||!this.isWhiteOrBlackRectangle($,H,Y,Q))break}u=$,h=H,g=Y,y=Q,x=!x}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ne;this.compact=this.nbCenterLayers===5;let _=new $e(u.getX()+.5,u.getY()-.5),T=new $e(h.getX()+.5,h.getY()+.5),O=new $e(g.getX()-.5,g.getY()+.5),U=new $e(y.getX()-.5,y.getY()-.5);return this.expandSquare([_,T,O,U],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,u,h,g;try{let _=new Di(this.image).detect();s=_[0],u=_[1],h=_[2],g=_[3]}catch{let T=this.image.getWidth()/2,O=this.image.getHeight()/2;s=this.getFirstDifferent(new lr(T+7,O-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new lr(T+7,O+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new lr(T-7,O+7),!1,-1,1).toResultPoint(),g=this.getFirstDifferent(new lr(T-7,O-7),!1,-1,-1).toResultPoint()}let y=_t.round((s.getX()+g.getX()+u.getX()+h.getX())/4),x=_t.round((s.getY()+g.getY()+u.getY()+h.getY())/4);try{let _=new Di(this.image,15,y,x).detect();s=_[0],u=_[1],h=_[2],g=_[3]}catch{s=this.getFirstDifferent(new lr(y+7,x-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new lr(y+7,x+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new lr(y-7,x+7),!1,-1,1).toResultPoint(),g=this.getFirstDifferent(new lr(y-7,x-7),!1,-1,-1).toResultPoint()}return y=_t.round((s.getX()+g.getX()+u.getX()+h.getX())/4),x=_t.round((s.getY()+g.getY()+u.getY()+h.getY())/4),new lr(y,x)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,u,h,g,y){let x=pi.getInstance(),_=this.getDimension(),T=_/2-this.nbCenterLayers,O=_/2+this.nbCenterLayers;return x.sampleGrid(s,_,_,T,T,O,T,O,O,T,O,u.getX(),u.getY(),h.getX(),h.getY(),g.getX(),g.getY(),y.getX(),y.getY())}sampleLine(s,u,h){let g=0,y=this.distanceResultPoint(s,u),x=y/h,_=s.getX(),T=s.getY(),O=x*(u.getX()-s.getX())/y,U=x*(u.getY()-s.getY())/y;for(let $=0;$<h;$++)this.image.get(_t.round(_+$*O),_t.round(T+$*U))&&(g|=1<<h-$-1);return g}isWhiteOrBlackRectangle(s,u,h,g){let y=3;s=new lr(s.getX()-y,s.getY()+y),u=new lr(u.getX()-y,u.getY()-y),h=new lr(h.getX()+y,h.getY()-y),g=new lr(g.getX()+y,g.getY()+y);let x=this.getColor(g,s);if(x===0)return!1;let _=this.getColor(s,u);return _!==x||(_=this.getColor(u,h),_!==x)?!1:(_=this.getColor(h,g),_===x)}getColor(s,u){let h=this.distancePoint(s,u),g=(u.getX()-s.getX())/h,y=(u.getY()-s.getY())/h,x=0,_=s.getX(),T=s.getY(),O=this.image.get(s.getX(),s.getY()),U=Math.ceil(h);for(let H=0;H<U;H++)_+=g,T+=y,this.image.get(_t.round(_),_t.round(T))!==O&&x++;let $=x/h;return $>.1&&$<.9?0:$<=.1===O?1:-1}getFirstDifferent(s,u,h,g){let y=s.getX()+h,x=s.getY()+g;for(;this.isValid(y,x)&&this.image.get(y,x)===u;)y+=h,x+=g;for(y-=h,x-=g;this.isValid(y,x)&&this.image.get(y,x)===u;)y+=h;for(y-=h;this.isValid(y,x)&&this.image.get(y,x)===u;)x+=g;return x-=g,new lr(y,x)}expandSquare(s,u,h){let g=h/(2*u),y=s[0].getX()-s[2].getX(),x=s[0].getY()-s[2].getY(),_=(s[0].getX()+s[2].getX())/2,T=(s[0].getY()+s[2].getY())/2,O=new $e(_+g*y,T+g*x),U=new $e(_-g*y,T-g*x);y=s[1].getX()-s[3].getX(),x=s[1].getY()-s[3].getY(),_=(s[1].getX()+s[3].getX())/2,T=(s[1].getY()+s[3].getY())/2;let $=new $e(_+g*y,T+g*x),H=new $e(_-g*y,T-g*x);return[O,$,U,H]}isValid(s,u){return s>=0&&s<this.image.getWidth()&&u>0&&u<this.image.getHeight()}isValidPoint(s){let u=_t.round(s.getX()),h=_t.round(s.getY());return this.isValid(u,h)}distancePoint(s,u){return _t.distance(s.getX(),s.getY(),u.getX(),u.getY())}distanceResultPoint(s,u){return _t.distance(s.getX(),s.getY(),u.getX(),u.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(L.truncDivision(this.nbLayers-4,8)+1)+15}}class No{decode(s,u=null){let h=null,g=new Fs(s.getBlackMatrix()),y=null,x=null;try{let U=g.detectMirror(!1);y=U.getPoints(),this.reportFoundResultPoints(u,y),x=new Rt().decode(U)}catch(U){h=U}if(x==null)try{let U=g.detectMirror(!0);y=U.getPoints(),this.reportFoundResultPoints(u,y),x=new Rt().decode(U)}catch(U){throw h??U}let _=new Le(x.getText(),x.getRawBytes(),x.getNumBits(),y,Ne.AZTEC,P.currentTimeMillis()),T=x.getByteSegments();T!=null&&_.putMetadata(rt.BYTE_SEGMENTS,T);let O=x.getECLevel();return O!=null&&_.putMetadata(rt.ERROR_CORRECTION_LEVEL,O),_}reportFoundResultPoints(s,u){if(s!=null){let h=s.get(q.NEED_RESULT_POINT_CALLBACK);h!=null&&u.forEach((g,y,x)=>{h.foundPossibleResultPoint(g)})}}reset(){}}class Gm extends Fe{constructor(s=500){super(new No,s)}}class xn{decode(s,u){try{return this.doDecode(s,u)}catch{if(u&&u.get(q.TRY_HARDER)===!0&&s.isRotateSupported()){const y=s.rotateCounterClockwise(),x=this.doDecode(y,u),_=x.getResultMetadata();let T=270;_!==null&&_.get(rt.ORIENTATION)===!0&&(T=T+_.get(rt.ORIENTATION)%360),x.putMetadata(rt.ORIENTATION,T);const O=x.getResultPoints();if(O!==null){const U=y.getHeight();for(let $=0;$<O.length;$++)O[$]=new $e(U-O[$].getY()-1,O[$].getX())}return x}else throw new ne}}reset(){}doDecode(s,u){const h=s.getWidth(),g=s.getHeight();let y=new V(h);const x=u&&u.get(q.TRY_HARDER)===!0,_=Math.max(1,g>>(x?8:5));let T;x?T=g:T=15;const O=Math.trunc(g/2);for(let U=0;U<T;U++){const $=Math.trunc((U+1)/2),H=(U&1)===0,Y=O+_*(H?$:-$);if(Y<0||Y>=g)break;try{y=s.getBlackRow(Y,y)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(y.reverse(),u&&u.get(q.NEED_RESULT_POINT_CALLBACK)===!0)){const re=new Map;u.forEach((oe,me)=>re.set(me,oe)),re.delete(q.NEED_RESULT_POINT_CALLBACK),u=re}try{const re=this.decodeRow(Y,y,u);if(Q===1){re.putMetadata(rt.ORIENTATION,180);const oe=re.getResultPoints();oe!==null&&(oe[0]=new $e(h-oe[0].getX()-1,oe[0].getY()),oe[1]=new $e(h-oe[1].getX()-1,oe[1].getY()))}return re}catch{}}}throw new ne}static recordPattern(s,u,h){const g=h.length;for(let O=0;O<g;O++)h[O]=0;const y=s.getSize();if(u>=y)throw new ne;let x=!s.get(u),_=0,T=u;for(;T<y;){if(s.get(T)!==x)h[_]++;else{if(++_===g)break;h[_]=1,x=!x}T++}if(!(_===g||_===g-1&&T===y))throw new ne}static recordPatternInReverse(s,u,h){let g=h.length,y=s.get(u);for(;u>0&&g>=0;)s.get(--u)!==y&&(g--,y=!y);if(g>=0)throw new ne;xn.recordPattern(s,u+1,h)}static patternMatchVariance(s,u,h){const g=s.length;let y=0,x=0;for(let O=0;O<g;O++)y+=s[O],x+=u[O];if(y<x)return Number.POSITIVE_INFINITY;const _=y/x;h*=_;let T=0;for(let O=0;O<g;O++){const U=s[O],$=u[O]*_,H=U>$?U-$:$-U;if(H>h)return Number.POSITIVE_INFINITY;T+=H}return T/y}}class Be extends xn{static findStartPattern(s){const u=s.getSize(),h=s.getNextSet(0);let g=0,y=Int32Array.from([0,0,0,0,0,0]),x=h,_=!1;const T=6;for(let O=h;O<u;O++)if(s.get(O)!==_)y[g]++;else{if(g===T-1){let U=Be.MAX_AVG_VARIANCE,$=-1;for(let H=Be.CODE_START_A;H<=Be.CODE_START_C;H++){const Y=xn.patternMatchVariance(y,Be.CODE_PATTERNS[H],Be.MAX_INDIVIDUAL_VARIANCE);Y<U&&(U=Y,$=H)}if($>=0&&s.isRange(Math.max(0,x-(O-x)/2),x,!1))return Int32Array.from([x,O,$]);x+=y[0]+y[1],y=y.slice(2,y.length-1),y[g-1]=0,y[g]=0,g--}else g++;y[g]=1,_=!_}throw new ne}static decodeCode(s,u,h){xn.recordPattern(s,h,u);let g=Be.MAX_AVG_VARIANCE,y=-1;for(let x=0;x<Be.CODE_PATTERNS.length;x++){const _=Be.CODE_PATTERNS[x],T=this.patternMatchVariance(u,_,Be.MAX_INDIVIDUAL_VARIANCE);T<g&&(g=T,y=x)}if(y>=0)return y;throw new ne}decodeRow(s,u,h){const g=h&&h.get(q.ASSUME_GS1)===!0,y=Be.findStartPattern(u),x=y[2];let _=0;const T=new Uint8Array(20);T[_++]=x;let O;switch(x){case Be.CODE_START_A:O=Be.CODE_CODE_A;break;case Be.CODE_START_B:O=Be.CODE_CODE_B;break;case Be.CODE_START_C:O=Be.CODE_CODE_C;break;default:throw new W}let U=!1,$=!1,H="",Y=y[0],Q=y[1];const re=Int32Array.from([0,0,0,0,0,0]);let oe=0,me=0,Oe=x,ke=0,Ie=!0,wt=!1,pt=!1;for(;!U;){const uo=$;switch($=!1,oe=me,me=Be.decodeCode(u,re,Q),T[_++]=me,me!==Be.CODE_STOP&&(Ie=!0),me!==Be.CODE_STOP&&(ke++,Oe+=ke*me),Y=Q,Q+=re.reduce((Ys,kc)=>Ys+kc,0),me){case Be.CODE_START_A:case Be.CODE_START_B:case Be.CODE_START_C:throw new W}switch(O){case Be.CODE_CODE_A:if(me<64)pt===wt?H+=String.fromCharCode(32+me):H+=String.fromCharCode(32+me+128),pt=!1;else if(me<96)pt===wt?H+=String.fromCharCode(me-64):H+=String.fromCharCode(me+64),pt=!1;else switch(me!==Be.CODE_STOP&&(Ie=!1),me){case Be.CODE_FNC_1:g&&(H.length===0?H+="]C1":H+="");break;case Be.CODE_FNC_2:case Be.CODE_FNC_3:break;case Be.CODE_FNC_4_A:!wt&&pt?(wt=!0,pt=!1):wt&&pt?(wt=!1,pt=!1):pt=!0;break;case Be.CODE_SHIFT:$=!0,O=Be.CODE_CODE_B;break;case Be.CODE_CODE_B:O=Be.CODE_CODE_B;break;case Be.CODE_CODE_C:O=Be.CODE_CODE_C;break;case Be.CODE_STOP:U=!0;break}break;case Be.CODE_CODE_B:if(me<96)pt===wt?H+=String.fromCharCode(32+me):H+=String.fromCharCode(32+me+128),pt=!1;else switch(me!==Be.CODE_STOP&&(Ie=!1),me){case Be.CODE_FNC_1:g&&(H.length===0?H+="]C1":H+="");break;case Be.CODE_FNC_2:case Be.CODE_FNC_3:break;case Be.CODE_FNC_4_B:!wt&&pt?(wt=!0,pt=!1):wt&&pt?(wt=!1,pt=!1):pt=!0;break;case Be.CODE_SHIFT:$=!0,O=Be.CODE_CODE_A;break;case Be.CODE_CODE_A:O=Be.CODE_CODE_A;break;case Be.CODE_CODE_C:O=Be.CODE_CODE_C;break;case Be.CODE_STOP:U=!0;break}break;case Be.CODE_CODE_C:if(me<100)me<10&&(H+="0"),H+=me;else switch(me!==Be.CODE_STOP&&(Ie=!1),me){case Be.CODE_FNC_1:g&&(H.length===0?H+="]C1":H+="");break;case Be.CODE_CODE_A:O=Be.CODE_CODE_A;break;case Be.CODE_CODE_B:O=Be.CODE_CODE_B;break;case Be.CODE_STOP:U=!0;break}break}uo&&(O=O===Be.CODE_CODE_A?Be.CODE_CODE_B:Be.CODE_CODE_A)}const Mr=Q-Y;if(Q=u.getNextUnset(Q),!u.isRange(Q,Math.min(u.getSize(),Q+(Q-Y)/2),!1))throw new ne;if(Oe-=ke*oe,Oe%103!==oe)throw new C;const Ei=H.length;if(Ei===0)throw new ne;Ei>0&&Ie&&(O===Be.CODE_CODE_C?H=H.substring(0,Ei-2):H=H.substring(0,Ei-1));const Bn=(y[1]+y[0])/2,Bt=Y+Mr/2,wn=T.length,_r=new Uint8Array(wn);for(let uo=0;uo<wn;uo++)_r[uo]=T[uo];const Qo=[new $e(Bn,s),new $e(Bt,s)];return new Le(H,_r,0,Qo,Ne.CODE_128,new Date().getTime())}}Be.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Be.MAX_AVG_VARIANCE=.25,Be.MAX_INDIVIDUAL_VARIANCE=.7,Be.CODE_SHIFT=98,Be.CODE_CODE_C=99,Be.CODE_CODE_B=100,Be.CODE_CODE_A=101,Be.CODE_FNC_1=102,Be.CODE_FNC_2=97,Be.CODE_FNC_3=96,Be.CODE_FNC_4_A=101,Be.CODE_FNC_4_B=100,Be.CODE_START_A=103,Be.CODE_START_B=104,Be.CODE_START_C=105,Be.CODE_STOP=106;class Mn extends xn{constructor(s=!1,u=!1){super(),this.usingCheckDigit=s,this.extendedMode=u,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,u,h){let g=this.counters;g.fill(0),this.decodeRowResult="";let y=Mn.findAsteriskPattern(u,g),x=u.getNextSet(y[1]),_=u.getSize(),T,O;do{Mn.recordPattern(u,x,g);let re=Mn.toNarrowWidePattern(g);if(re<0)throw new ne;T=Mn.patternToChar(re),this.decodeRowResult+=T,O=x;for(let oe of g)x+=oe;x=u.getNextSet(x)}while(T!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let U=0;for(let re of g)U+=re;let $=x-O-U;if(x!==_&&$*2<U)throw new ne;if(this.usingCheckDigit){let re=this.decodeRowResult.length-1,oe=0;for(let me=0;me<re;me++)oe+=Mn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(me));if(this.decodeRowResult.charAt(re)!==Mn.ALPHABET_STRING.charAt(oe%43))throw new C;this.decodeRowResult=this.decodeRowResult.substring(0,re)}if(this.decodeRowResult.length===0)throw new ne;let H;this.extendedMode?H=Mn.decodeExtended(this.decodeRowResult):H=this.decodeRowResult;let Y=(y[1]+y[0])/2,Q=O+U/2;return new Le(H,null,0,[new $e(Y,s),new $e(Q,s)],Ne.CODE_39,new Date().getTime())}static findAsteriskPattern(s,u){let h=s.getSize(),g=s.getNextSet(0),y=0,x=g,_=!1,T=u.length;for(let O=g;O<h;O++)if(s.get(O)!==_)u[y]++;else{if(y===T-1){if(this.toNarrowWidePattern(u)===Mn.ASTERISK_ENCODING&&s.isRange(Math.max(0,x-Math.floor((O-x)/2)),x,!1))return[x,O];x+=u[0]+u[1],u.copyWithin(0,2,2+y-1),u[y-1]=0,u[y]=0,y--}else y++;u[y]=1,_=!_}throw new ne}static toNarrowWidePattern(s){let u=s.length,h=0,g;do{let y=2147483647;for(let T of s)T<y&&T>h&&(y=T);h=y,g=0;let x=0,_=0;for(let T=0;T<u;T++){let O=s[T];O>h&&(_|=1<<u-1-T,g++,x+=O)}if(g===3){for(let T=0;T<u&&g>0;T++){let O=s[T];if(O>h&&(g--,O*2>=x))return-1}return _}}while(g>3);return-1}static patternToChar(s){for(let u=0;u<Mn.CHARACTER_ENCODINGS.length;u++)if(Mn.CHARACTER_ENCODINGS[u]===s)return Mn.ALPHABET_STRING.charAt(u);if(s===Mn.ASTERISK_ENCODING)return"*";throw new ne}static decodeExtended(s){let u=s.length,h="";for(let g=0;g<u;g++){let y=s.charAt(g);if(y==="+"||y==="$"||y==="%"||y==="/"){let x=s.charAt(g+1),_="\0";switch(y){case"+":if(x>="A"&&x<="Z")_=String.fromCharCode(x.charCodeAt(0)+32);else throw new W;break;case"$":if(x>="A"&&x<="Z")_=String.fromCharCode(x.charCodeAt(0)-64);else throw new W;break;case"%":if(x>="A"&&x<="E")_=String.fromCharCode(x.charCodeAt(0)-38);else if(x>="F"&&x<="J")_=String.fromCharCode(x.charCodeAt(0)-11);else if(x>="K"&&x<="O")_=String.fromCharCode(x.charCodeAt(0)+16);else if(x>="P"&&x<="T")_=String.fromCharCode(x.charCodeAt(0)+43);else if(x==="U")_="\0";else if(x==="V")_="@";else if(x==="W")_="`";else if(x==="X"||x==="Y"||x==="Z")_="";else throw new W;break;case"/":if(x>="A"&&x<="O")_=String.fromCharCode(x.charCodeAt(0)-32);else if(x==="Z")_=":";else throw new W;break}h+=_,g++}else h+=y}return h}}Mn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Mn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Mn.ASTERISK_ENCODING=148;class Lt extends xn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,u,h){let g=this.decodeStart(u),y=this.decodeEnd(u),x=new be;Lt.decodeMiddle(u,g[1],y[0],x);let _=x.toString(),T=null;h!=null&&(T=h.get(q.ALLOWED_LENGTHS)),T==null&&(T=Lt.DEFAULT_ALLOWED_LENGTHS);let O=_.length,U=!1,$=0;for(let Q of T){if(O===Q){U=!0;break}Q>$&&($=Q)}if(!U&&O>$&&(U=!0),!U)throw new W;const H=[new $e(g[1],s),new $e(y[0],s)];return new Le(_,null,0,H,Ne.ITF,new Date().getTime())}static decodeMiddle(s,u,h,g){let y=new Int32Array(10),x=new Int32Array(5),_=new Int32Array(5);for(y.fill(0),x.fill(0),_.fill(0);u<h;){xn.recordPattern(s,u,y);for(let O=0;O<5;O++){let U=2*O;x[O]=y[U],_[O]=y[U+1]}let T=Lt.decodeDigit(x);g.append(T.toString()),T=this.decodeDigit(_),g.append(T.toString()),y.forEach(function(O){u+=O})}}decodeStart(s){let u=Lt.skipWhiteSpace(s),h=Lt.findGuardPattern(s,u,Lt.START_PATTERN);return this.narrowLineWidth=(h[1]-h[0])/4,this.validateQuietZone(s,h[0]),h}validateQuietZone(s,u){let h=this.narrowLineWidth*10;h=h<u?h:u;for(let g=u-1;h>0&&g>=0&&!s.get(g);g--)h--;if(h!==0)throw new ne}static skipWhiteSpace(s){const u=s.getSize(),h=s.getNextSet(0);if(h===u)throw new ne;return h}decodeEnd(s){s.reverse();try{let u=Lt.skipWhiteSpace(s),h;try{h=Lt.findGuardPattern(s,u,Lt.END_PATTERN_REVERSED[0])}catch(y){y instanceof ne&&(h=Lt.findGuardPattern(s,u,Lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,h[0]);let g=h[0];return h[0]=s.getSize()-h[1],h[1]=s.getSize()-g,h}finally{s.reverse()}}static findGuardPattern(s,u,h){let g=h.length,y=new Int32Array(g),x=s.getSize(),_=!1,T=0,O=u;y.fill(0);for(let U=u;U<x;U++)if(s.get(U)!==_)y[T]++;else{if(T===g-1){if(xn.patternMatchVariance(y,h,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return[O,U];O+=y[0]+y[1],P.arraycopy(y,2,y,0,T-1),y[T-1]=0,y[T]=0,T--}else T++;y[T]=1,_=!_}throw new ne}static decodeDigit(s){let u=Lt.MAX_AVG_VARIANCE,h=-1,g=Lt.PATTERNS.length;for(let y=0;y<g;y++){let x=Lt.PATTERNS[y],_=xn.patternMatchVariance(s,x,Lt.MAX_INDIVIDUAL_VARIANCE);_<u?(u=_,h=y):_===u&&(h=-1)}if(h>=0)return h%10;throw new ne}}Lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Lt.MAX_AVG_VARIANCE=.38,Lt.MAX_INDIVIDUAL_VARIANCE=.5,Lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Lt.START_PATTERN=Int32Array.from([1,1,1,1]),Lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Qt extends xn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let u=!1,h,g=0,y=Int32Array.from([0,0,0]);for(;!u;){y=Int32Array.from([0,0,0]),h=Qt.findGuardPattern(s,g,!1,this.START_END_PATTERN,y);let x=h[0];g=h[1];let _=x-(g-x);_>=0&&(u=s.isRange(_,x,!1))}return h}static checkChecksum(s){return Qt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let u=s.length;if(u===0)return!1;let h=parseInt(s.charAt(u-1),10);return Qt.getStandardUPCEANChecksum(s.substring(0,u-1))===h}static getStandardUPCEANChecksum(s){let u=s.length,h=0;for(let g=u-1;g>=0;g-=2){let y=s.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new W;h+=y}h*=3;for(let g=u-2;g>=0;g-=2){let y=s.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new W;h+=y}return(1e3-h)%10}static decodeEnd(s,u){return Qt.findGuardPattern(s,u,!1,Qt.START_END_PATTERN,new Int32Array(Qt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,u,h,g){return this.findGuardPattern(s,u,h,g,new Int32Array(g.length))}static findGuardPattern(s,u,h,g,y){let x=s.getSize();u=h?s.getNextUnset(u):s.getNextSet(u);let _=0,T=u,O=g.length,U=h;for(let $=u;$<x;$++)if(s.get($)!==U)y[_]++;else{if(_===O-1){if(xn.patternMatchVariance(y,g,Qt.MAX_INDIVIDUAL_VARIANCE)<Qt.MAX_AVG_VARIANCE)return Int32Array.from([T,$]);T+=y[0]+y[1];let H=y.slice(2,y.length-1);for(let Y=0;Y<_-1;Y++)y[Y]=H[Y];y[_-1]=0,y[_]=0,_--}else _++;y[_]=1,U=!U}throw new ne}static decodeDigit(s,u,h,g){this.recordPattern(s,h,u);let y=this.MAX_AVG_VARIANCE,x=-1,_=g.length;for(let T=0;T<_;T++){let O=g[T],U=xn.patternMatchVariance(u,O,Qt.MAX_INDIVIDUAL_VARIANCE);U<y&&(y=U,x=T)}if(x>=0)return x;throw new ne}}Qt.MAX_AVG_VARIANCE=.48,Qt.MAX_INDIVIDUAL_VARIANCE=.7,Qt.START_END_PATTERN=Int32Array.from([1,1,1]),Qt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Qt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ko{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,u,h){let g=this.decodeRowStringBuffer,y=this.decodeMiddle(u,h,g),x=g.toString(),_=Ko.parseExtensionString(x),T=[new $e((h[0]+h[1])/2,s),new $e(y,s)],O=new Le(x,null,0,T,Ne.UPC_EAN_EXTENSION,new Date().getTime());return _!=null&&O.putAllMetadata(_),O}decodeMiddle(s,u,h){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=s.getSize(),x=u[1],_=0;for(let O=0;O<5&&x<y;O++){let U=Qt.decodeDigit(s,g,x,Qt.L_AND_G_PATTERNS);h+=String.fromCharCode(48+U%10);for(let $ of g)x+=$;U>=10&&(_|=1<<4-O),O!==4&&(x=s.getNextSet(x),x=s.getNextUnset(x))}if(h.length!==5)throw new ne;let T=this.determineCheckDigit(_);if(Ko.extensionChecksum(h.toString())!==T)throw new ne;return x}static extensionChecksum(s){let u=s.length,h=0;for(let g=u-2;g>=0;g-=2)h+=s.charAt(g).charCodeAt(0)-48;h*=3;for(let g=u-1;g>=0;g-=2)h+=s.charAt(g).charCodeAt(0)-48;return h*=3,h%10}determineCheckDigit(s){for(let u=0;u<10;u++)if(s===this.CHECK_DIGIT_ENCODINGS[u])return u;throw new ne}static parseExtensionString(s){if(s.length!==5)return null;let u=Ko.parseExtension5String(s);return u==null?null:new Map([[rt.SUGGESTED_PRICE,u]])}static parseExtension5String(s){let u;switch(s.charAt(0)){case"0":u="";break;case"5":u="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}u="";break;default:u="";break}let h=parseInt(s.substring(1)),g=(h/100).toString(),y=h%100,x=y<10?"0"+y:y.toString();return u+g+"."+x}}class Ia{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,u,h){let g=this.decodeRowStringBuffer,y=this.decodeMiddle(u,h,g),x=g.toString(),_=Ia.parseExtensionString(x),T=[new $e((h[0]+h[1])/2,s),new $e(y,s)],O=new Le(x,null,0,T,Ne.UPC_EAN_EXTENSION,new Date().getTime());return _!=null&&O.putAllMetadata(_),O}decodeMiddle(s,u,h){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=s.getSize(),x=u[1],_=0;for(let T=0;T<2&&x<y;T++){let O=Qt.decodeDigit(s,g,x,Qt.L_AND_G_PATTERNS);h+=String.fromCharCode(48+O%10);for(let U of g)x+=U;O>=10&&(_|=1<<1-T),T!==1&&(x=s.getNextSet(x),x=s.getNextUnset(x))}if(h.length!==2)throw new ne;if(parseInt(h.toString())%4!==_)throw new ne;return x}static parseExtensionString(s){return s.length!==2?null:new Map([[rt.ISSUE_NUMBER,parseInt(s)]])}}class Fl{static decodeRow(s,u,h){let g=Qt.findGuardPattern(u,h,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ko().decodeRow(s,u,g)}catch{return new Ia().decodeRow(s,u,g)}}}Fl.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Et extends Qt{constructor(){super(),this.decodeRowStringBuffer="",Et.L_AND_G_PATTERNS=Et.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let u=Et.L_PATTERNS[s-10],h=new Int32Array(u.length);for(let g=0;g<u.length;g++)h[g]=u[u.length-g-1];Et.L_AND_G_PATTERNS[s]=h}}decodeRow(s,u,h){let g=Et.findStartGuardPattern(u),y=h==null?null:h.get(q.NEED_RESULT_POINT_CALLBACK);if(y!=null){const Ie=new $e((g[0]+g[1])/2,s);y.foundPossibleResultPoint(Ie)}let x=this.decodeMiddle(u,g,this.decodeRowStringBuffer),_=x.rowOffset,T=x.resultString;if(y!=null){const Ie=new $e(_,s);y.foundPossibleResultPoint(Ie)}let O=this.decodeEnd(u,_);if(y!=null){const Ie=new $e((O[0]+O[1])/2,s);y.foundPossibleResultPoint(Ie)}let U=O[1],$=U+(U-O[0]);if($>=u.getSize()||!u.isRange(U,$,!1))throw new ne;let H=T.toString();if(H.length<8)throw new W;if(!Et.checkChecksum(H))throw new C;let Y=(g[1]+g[0])/2,Q=(O[1]+O[0])/2,re=this.getBarcodeFormat(),oe=[new $e(Y,s),new $e(Q,s)],me=new Le(H,null,0,oe,re,new Date().getTime()),Oe=0;try{let Ie=Fl.decodeRow(s,u,O[1]);me.putMetadata(rt.UPC_EAN_EXTENSION,Ie.getText()),me.putAllMetadata(Ie.getResultMetadata()),me.addResultPoints(Ie.getResultPoints()),Oe=Ie.getText().length}catch{}let ke=h==null?null:h.get(q.ALLOWED_EAN_EXTENSIONS);if(ke!=null){let Ie=!1;for(let wt in ke)if(Oe.toString()===wt){Ie=!0;break}if(!Ie)throw new ne}return me}decodeEnd(s,u){return Et.findGuardPattern(s,u,!1,Et.START_END_PATTERN,new Int32Array(Et.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return Et.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let u=s.length;if(u===0)return!1;let h=parseInt(s.charAt(u-1),10);return Et.getStandardUPCEANChecksum(s.substring(0,u-1))===h}static getStandardUPCEANChecksum(s){let u=s.length,h=0;for(let g=u-1;g>=0;g-=2){let y=s.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new W;h+=y}h*=3;for(let g=u-2;g>=0;g-=2){let y=s.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new W;h+=y}return(1e3-h)%10}}class Qr extends Et{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,u,h){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=s.getSize(),x=u[1],_=0;for(let O=0;O<6&&x<y;O++){let U=Et.decodeDigit(s,g,x,Et.L_AND_G_PATTERNS);h+=String.fromCharCode(48+U%10);for(let $ of g)x+=$;U>=10&&(_|=1<<5-O)}h=Qr.determineFirstDigit(h,_),x=Et.findGuardPattern(s,x,!0,Et.MIDDLE_PATTERN,new Int32Array(Et.MIDDLE_PATTERN.length).fill(0))[1];for(let O=0;O<6&&x<y;O++){let U=Et.decodeDigit(s,g,x,Et.L_PATTERNS);h+=String.fromCharCode(48+U);for(let $ of g)x+=$}return{rowOffset:x,resultString:h}}getBarcodeFormat(){return Ne.EAN_13}static determineFirstDigit(s,u){for(let h=0;h<10;h++)if(u===this.FIRST_DIGIT_ENCODINGS[h])return s=String.fromCharCode(48+h)+s,s;throw new ne}}Qr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class hc extends Et{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,u,h){const g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=s.getSize(),x=u[1];for(let T=0;T<4&&x<y;T++){let O=Et.decodeDigit(s,g,x,Et.L_PATTERNS);h+=String.fromCharCode(48+O);for(let U of g)x+=U}x=Et.findGuardPattern(s,x,!0,Et.MIDDLE_PATTERN,new Int32Array(Et.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<4&&x<y;T++){let O=Et.decodeDigit(s,g,x,Et.L_PATTERNS);h+=String.fromCharCode(48+O);for(let U of g)x+=U}return{rowOffset:x,resultString:h}}getBarcodeFormat(){return Ne.EAN_8}}class pc extends Et{constructor(){super(...arguments),this.ean13Reader=new Qr}getBarcodeFormat(){return Ne.UPC_A}decode(s,u){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,u,h){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,u,h))}decodeMiddle(s,u,h){return this.ean13Reader.decodeMiddle(s,u,h)}maybeReturnResult(s){let u=s.getText();if(u.charAt(0)==="0"){let h=new Le(u.substring(1),null,null,s.getResultPoints(),Ne.UPC_A);return s.getResultMetadata()!=null&&h.putAllMetadata(s.getResultMetadata()),h}else throw new ne}reset(){this.ean13Reader.reset()}}class ei extends Et{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,u,h){const g=this.decodeMiddleCounters.map(O=>O);g[0]=0,g[1]=0,g[2]=0,g[3]=0;const y=s.getSize();let x=u[1],_=0;for(let O=0;O<6&&x<y;O++){const U=ei.decodeDigit(s,g,x,ei.L_AND_G_PATTERNS);h+=String.fromCharCode(48+U%10);for(let $ of g)x+=$;U>=10&&(_|=1<<5-O)}let T=ei.determineNumSysAndCheckDigit(h,_);return{rowOffset:x,resultString:T}}decodeEnd(s,u){return ei.findGuardPatternWithoutCounters(s,u,!0,ei.MIDDLE_END_PATTERN)}checkChecksum(s){return Et.checkChecksum(ei.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,u){for(let h=0;h<=1;h++)for(let g=0;g<10;g++)if(u===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[h][g]){let y=String.fromCharCode(48+h),x=String.fromCharCode(48+g);return y+s+x}throw ne.getNotFoundInstance()}getBarcodeFormat(){return Ne.UPC_E}static convertUPCEtoUPCA(s){const u=s.slice(1,7).split("").map(y=>y.charCodeAt(0)),h=new be;h.append(s.charAt(0));let g=u[5];switch(g){case 0:case 1:case 2:h.appendChars(u,0,2),h.append(g),h.append("0000"),h.appendChars(u,2,3);break;case 3:h.appendChars(u,0,3),h.append("00000"),h.appendChars(u,3,2);break;case 4:h.appendChars(u,0,4),h.append("00000"),h.append(u[4]);break;default:h.appendChars(u,0,5),h.append("0000"),h.append(g);break}return s.length>=8&&h.append(s.charAt(7)),h.toString()}}ei.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ei.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ul extends xn{constructor(s){super();let u=s==null?null:s.get(q.POSSIBLE_FORMATS),h=[];r(u)?(h.push(new Qr),h.push(new pc),h.push(new hc),h.push(new ei)):(u.indexOf(Ne.EAN_13)>-1&&h.push(new Qr),u.indexOf(Ne.UPC_A)>-1&&h.push(new pc),u.indexOf(Ne.EAN_8)>-1&&h.push(new hc),u.indexOf(Ne.UPC_E)>-1&&h.push(new ei)),this.readers=h}decodeRow(s,u,h){for(let g of this.readers)try{const y=g.decodeRow(s,u,h),x=y.getBarcodeFormat()===Ne.EAN_13&&y.getText().charAt(0)==="0",_=h==null?null:h.get(q.POSSIBLE_FORMATS),T=_==null||_.includes(Ne.UPC_A);if(x&&T){const O=y.getRawBytes(),U=new Le(y.getText().substring(1),O,O?O.length:null,y.getResultPoints(),Ne.UPC_A);return U.putAllMetadata(y.getResultMetadata()),U}return y}catch{}throw new ne}reset(){for(let s of this.readers)s.reset()}}class Xn extends xn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,u){for(let h=0;h<u.length;h++)if(xn.patternMatchVariance(s,u[h],Xn.MAX_INDIVIDUAL_VARIANCE)<Xn.MAX_AVG_VARIANCE)return h;throw new ne}static count(s){return _t.sum(new Int32Array(s))}static increment(s,u){let h=0,g=u[0];for(let y=1;y<s.length;y++)u[y]>g&&(g=u[y],h=y);s[h]++}static decrement(s,u){let h=0,g=u[0];for(let y=1;y<s.length;y++)u[y]<g&&(g=u[y],h=y);s[h]--}static isFinderPattern(s){let u=s[0]+s[1],h=u+s[2]+s[3],g=u/h;if(g>=Xn.MIN_FINDER_PATTERN_RATIO&&g<=Xn.MAX_FINDER_PATTERN_RATIO){let y=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER;for(let _ of s)_>x&&(x=_),_<y&&(y=_);return x<10*y}return!1}}Xn.MAX_AVG_VARIANCE=.2,Xn.MAX_INDIVIDUAL_VARIANCE=.45,Xn.MIN_FINDER_PATTERN_RATIO=9.5/12,Xn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ro{constructor(s,u){this.value=s,this.checksumPortion=u}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Ro))return!1;const u=s;return this.value===u.value&&this.checksumPortion===u.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Pa{constructor(s,u,h,g,y){this.value=s,this.startEnd=u,this.value=s,this.startEnd=u,this.resultPoints=new Array,this.resultPoints.push(new $e(h,y)),this.resultPoints.push(new $e(g,y))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Pa))return!1;const u=s;return this.value===u.value}hashCode(){return this.value}}class Rr{constructor(){}static getRSSvalue(s,u,h){let g=0;for(let T of s)g+=T;let y=0,x=0,_=s.length;for(let T=0;T<_-1;T++){let O;for(O=1,x|=1<<T;O<s[T];O++,x&=~(1<<T)){let U=Rr.combins(g-O-1,_-T-2);if(h&&x===0&&g-O-(_-T-1)>=_-T-1&&(U-=Rr.combins(g-O-(_-T),_-T-2)),_-T-1>1){let $=0;for(let H=g-O-(_-T-2);H>u;H--)$+=Rr.combins(g-O-H-1,_-T-3);U-=$*(_-1-T)}else g-O>u&&U--;y+=U}g-=O}return y}static combins(s,u){let h,g;s-u>u?(g=u,h=s-u):(g=s-u,h=u);let y=1,x=1;for(let _=s;_>h;_--)y*=_,x<=g&&(y/=x,x++);for(;x<=g;)y/=x,x++;return y}}class mc{static buildBitArray(s){let u=s.length*2-1;s[s.length-1].getRightChar()==null&&(u-=1);let h=12*u,g=new V(h),y=0,_=s[0].getRightChar().getValue();for(let T=11;T>=0;--T)(_&1<<T)!=0&&g.set(y),y++;for(let T=1;T<s.length;++T){let O=s[T],U=O.getLeftChar().getValue();for(let $=11;$>=0;--$)(U&1<<$)!=0&&g.set(y),y++;if(O.getRightChar()!=null){let $=O.getRightChar().getValue();for(let H=11;H>=0;--H)($&1<<H)!=0&&g.set(y),y++}}return g}}class mi{constructor(s,u){u?this.decodedInformation=null:(this.finished=s,this.decodedInformation=u)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class gc{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class $n extends gc{constructor(s,u){super(s),this.value=u}getValue(){return this.value}isFNC1(){return this.value===$n.FNC1}}$n.FNC1="$";class Li extends gc{constructor(s,u,h){super(s),h?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=u}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class wr extends gc{constructor(s,u,h){if(super(s),u<0||u>10||h<0||h>10)throw new W;this.firstDigit=u,this.secondDigit=h}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===wr.FNC1}isSecondDigitFNC1(){return this.secondDigit===wr.FNC1}isAnyFNC1(){return this.firstDigit===wr.FNC1||this.secondDigit===wr.FNC1}}wr.FNC1=10;class je{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new ne;let u=s.substring(0,2);for(let y of je.TWO_DIGIT_DATA_LENGTH)if(y[0]===u)return y[1]===je.VARIABLE_LENGTH?je.processVariableAI(2,y[2],s):je.processFixedAI(2,y[1],s);if(s.length<3)throw new ne;let h=s.substring(0,3);for(let y of je.THREE_DIGIT_DATA_LENGTH)if(y[0]===h)return y[1]===je.VARIABLE_LENGTH?je.processVariableAI(3,y[2],s):je.processFixedAI(3,y[1],s);for(let y of je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(y[0]===h)return y[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,y[2],s):je.processFixedAI(4,y[1],s);if(s.length<4)throw new ne;let g=s.substring(0,4);for(let y of je.FOUR_DIGIT_DATA_LENGTH)if(y[0]===g)return y[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,y[2],s):je.processFixedAI(4,y[1],s);throw new ne}static processFixedAI(s,u,h){if(h.length<s)throw new ne;let g=h.substring(0,s);if(h.length<s+u)throw new ne;let y=h.substring(s,s+u),x=h.substring(s+u),_="("+g+")"+y,T=je.parseFieldsInGeneralPurpose(x);return T==null?_:_+T}static processVariableAI(s,u,h){let g=h.substring(0,s),y;h.length<s+u?y=h.length:y=s+u;let x=h.substring(s,y),_=h.substring(y),T="("+g+")"+x,O=je.parseFieldsInGeneralPurpose(_);return O==null?T:T+O}}je.VARIABLE_LENGTH=[],je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",je.VARIABLE_LENGTH,20],["22",je.VARIABLE_LENGTH,29],["30",je.VARIABLE_LENGTH,8],["37",je.VARIABLE_LENGTH,8],["90",je.VARIABLE_LENGTH,30],["91",je.VARIABLE_LENGTH,30],["92",je.VARIABLE_LENGTH,30],["93",je.VARIABLE_LENGTH,30],["94",je.VARIABLE_LENGTH,30],["95",je.VARIABLE_LENGTH,30],["96",je.VARIABLE_LENGTH,30],["97",je.VARIABLE_LENGTH,3],["98",je.VARIABLE_LENGTH,30],["99",je.VARIABLE_LENGTH,30]],je.THREE_DIGIT_DATA_LENGTH=[["240",je.VARIABLE_LENGTH,30],["241",je.VARIABLE_LENGTH,30],["242",je.VARIABLE_LENGTH,6],["250",je.VARIABLE_LENGTH,30],["251",je.VARIABLE_LENGTH,30],["253",je.VARIABLE_LENGTH,17],["254",je.VARIABLE_LENGTH,20],["400",je.VARIABLE_LENGTH,30],["401",je.VARIABLE_LENGTH,30],["402",17],["403",je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",je.VARIABLE_LENGTH,20],["421",je.VARIABLE_LENGTH,15],["422",3],["423",je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",je.VARIABLE_LENGTH,15],["391",je.VARIABLE_LENGTH,18],["392",je.VARIABLE_LENGTH,15],["393",je.VARIABLE_LENGTH,18],["703",je.VARIABLE_LENGTH,30]],je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",je.VARIABLE_LENGTH,20],["8003",je.VARIABLE_LENGTH,30],["8004",je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",je.VARIABLE_LENGTH,30],["8008",je.VARIABLE_LENGTH,12],["8018",18],["8020",je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",je.VARIABLE_LENGTH,70],["8200",je.VARIABLE_LENGTH,70]];class Us{constructor(s){this.buffer=new be,this.information=s}decodeAllCodes(s,u){let h=u,g=null;do{let y=this.decodeGeneralPurposeField(h,g),x=je.parseFieldsInGeneralPurpose(y.getNewString());if(x!=null&&s.append(x),y.isRemaining()?g=""+y.getRemainingValue():g=null,h===y.getNewPosition())break;h=y.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let u=s;u<s+3;++u)if(this.information.get(u))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let y=this.extractNumericValueFromBitArray(s,4);return y===0?new wr(this.information.getSize(),wr.FNC1,wr.FNC1):new wr(this.information.getSize(),y-1,wr.FNC1)}let u=this.extractNumericValueFromBitArray(s,7),h=(u-8)/11,g=(u-8)%11;return new wr(s+7,h,g)}extractNumericValueFromBitArray(s,u){return Us.extractNumericValueFromBitArray(this.information,s,u)}static extractNumericValueFromBitArray(s,u,h){let g=0;for(let y=0;y<h;++y)s.get(u+y)&&(g|=1<<h-y-1);return g}decodeGeneralPurposeField(s,u){this.buffer.setLengthToZero(),u!=null&&this.buffer.append(u),this.current.setPosition(s);let h=this.parseBlocks();return h!=null&&h.isRemaining()?new Li(this.current.getPosition(),this.buffer.toString(),h.getRemainingValue()):new Li(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,u;do{let h=this.current.getPosition();if(this.current.isAlpha()?(u=this.parseAlphaBlock(),s=u.isFinished()):this.current.isIsoIec646()?(u=this.parseIsoIec646Block(),s=u.isFinished()):(u=this.parseNumericBlock(),s=u.isFinished()),!(h!==this.current.getPosition())&&!s)break}while(!s);return u.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let u;return s.isSecondDigitFNC1()?u=new Li(this.current.getPosition(),this.buffer.toString()):u=new Li(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new mi(!0,u)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let u=new Li(this.current.getPosition(),this.buffer.toString());return new mi(!0,u)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new mi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let u=new Li(this.current.getPosition(),this.buffer.toString());return new mi(!0,u)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new mi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let u=new Li(this.current.getPosition(),this.buffer.toString());return new mi(!0,u)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new mi(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,5);if(u>=5&&u<16)return!0;if(s+7>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(s,7);if(h>=64&&h<116)return!0;if(s+8>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(s,8);return g>=232&&g<253}decodeIsoIec646(s){let u=this.extractNumericValueFromBitArray(s,5);if(u===15)return new $n(s+5,$n.FNC1);if(u>=5&&u<15)return new $n(s+5,"0"+(u-5));let h=this.extractNumericValueFromBitArray(s,7);if(h>=64&&h<90)return new $n(s+7,""+(h+1));if(h>=90&&h<116)return new $n(s+7,""+(h+7));let g=this.extractNumericValueFromBitArray(s,8),y;switch(g){case 232:y="!";break;case 233:y='"';break;case 234:y="%";break;case 235:y="&";break;case 236:y="'";break;case 237:y="(";break;case 238:y=")";break;case 239:y="*";break;case 240:y="+";break;case 241:y=",";break;case 242:y="-";break;case 243:y=".";break;case 244:y="/";break;case 245:y=":";break;case 246:y=";";break;case 247:y="<";break;case 248:y="=";break;case 249:y=">";break;case 250:y="?";break;case 251:y="_";break;case 252:y=" ";break;default:throw new W}return new $n(s+8,y)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,5);if(u>=5&&u<16)return!0;if(s+6>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(s,6);return h>=16&&h<63}decodeAlphanumeric(s){let u=this.extractNumericValueFromBitArray(s,5);if(u===15)return new $n(s+5,$n.FNC1);if(u>=5&&u<15)return new $n(s+5,"0"+(u-5));let h=this.extractNumericValueFromBitArray(s,6);if(h>=32&&h<58)return new $n(s+6,""+(h+33));let g;switch(h){case 58:g="*";break;case 59:g=",";break;case 60:g="-";break;case 61:g=".";break;case 62:g="/";break;default:throw new It("Decoding invalid alphanumeric value: "+h)}return new $n(s+6,g)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let u=0;u<5&&u+s<this.information.getSize();++u)if(u===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+u))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let u=s;u<s+3;++u)if(this.information.get(u))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let u=0;u<4&&u+s<this.information.getSize();++u)if(this.information.get(s+u))return!1;return!0}}class vc{constructor(s){this.information=s,this.generalDecoder=new Us(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Or extends vc{constructor(s){super(s)}encodeCompressedGtin(s,u){s.append("(01)");let h=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,u,h)}encodeCompressedGtinWithoutAI(s,u,h){for(let g=0;g<4;++g){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(u+10*g,10);y/100===0&&s.append("0"),y/10===0&&s.append("0"),s.append(y)}Or.appendCheckDigit(s,h)}static appendCheckDigit(s,u){let h=0;for(let g=0;g<13;g++){let y=s.charAt(g+u).charCodeAt(0)-48;h+=(g&1)===0?3*y:y}h=10-h%10,h===10&&(h=0),s.append(h)}}Or.GTIN_SIZE=40;class ti extends Or{constructor(s){super(s)}parseInformation(){let s=new be;s.append("(01)");let u=s.length(),h=this.getGeneralDecoder().extractNumericValueFromBitArray(ti.HEADER_SIZE,4);return s.append(h),this.encodeCompressedGtinWithoutAI(s,ti.HEADER_SIZE+4,u),this.getGeneralDecoder().decodeAllCodes(s,ti.HEADER_SIZE+44)}}ti.HEADER_SIZE=4;class Na extends vc{constructor(s){super(s)}parseInformation(){let s=new be;return this.getGeneralDecoder().decodeAllCodes(s,Na.HEADER_SIZE)}}Na.HEADER_SIZE=5;class Ra extends Or{constructor(s){super(s)}encodeCompressedWeight(s,u,h){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(u,h);this.addWeightCode(s,g);let y=this.checkWeight(g),x=1e5;for(let _=0;_<5;++_)y/x===0&&s.append("0"),x/=10;s.append(y)}}class Bi extends Ra{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=Bi.HEADER_SIZE+Ra.GTIN_SIZE+Bi.WEIGHT_SIZE)throw new ne;let s=new be;return this.encodeCompressedGtin(s,Bi.HEADER_SIZE),this.encodeCompressedWeight(s,Bi.HEADER_SIZE+Ra.GTIN_SIZE,Bi.WEIGHT_SIZE),s.toString()}}Bi.HEADER_SIZE=5,Bi.WEIGHT_SIZE=15;class yf extends Bi{constructor(s){super(s)}addWeightCode(s,u){s.append("(3103)")}checkWeight(s){return s}}class xf extends Bi{constructor(s){super(s)}addWeightCode(s,u){u<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class gi extends Or{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<gi.HEADER_SIZE+Or.GTIN_SIZE)throw new ne;let s=new be;this.encodeCompressedGtin(s,gi.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(gi.HEADER_SIZE+Or.GTIN_SIZE,gi.LAST_DIGIT_SIZE);s.append("(392"),s.append(u),s.append(")");let h=this.getGeneralDecoder().decodeGeneralPurposeField(gi.HEADER_SIZE+Or.GTIN_SIZE+gi.LAST_DIGIT_SIZE,null);return s.append(h.getNewString()),s.toString()}}gi.HEADER_SIZE=8,gi.LAST_DIGIT_SIZE=2;class ur extends Or{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<ur.HEADER_SIZE+Or.GTIN_SIZE)throw new ne;let s=new be;this.encodeCompressedGtin(s,ur.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(ur.HEADER_SIZE+Or.GTIN_SIZE,ur.LAST_DIGIT_SIZE);s.append("(393"),s.append(u),s.append(")");let h=this.getGeneralDecoder().extractNumericValueFromBitArray(ur.HEADER_SIZE+Or.GTIN_SIZE+ur.LAST_DIGIT_SIZE,ur.FIRST_THREE_DIGITS_SIZE);h/100==0&&s.append("0"),h/10==0&&s.append("0"),s.append(h);let g=this.getGeneralDecoder().decodeGeneralPurposeField(ur.HEADER_SIZE+Or.GTIN_SIZE+ur.LAST_DIGIT_SIZE+ur.FIRST_THREE_DIGITS_SIZE,null);return s.append(g.getNewString()),s.toString()}}ur.HEADER_SIZE=8,ur.LAST_DIGIT_SIZE=2,ur.FIRST_THREE_DIGITS_SIZE=10;class en extends Ra{constructor(s,u,h){super(s),this.dateCode=h,this.firstAIdigits=u}parseInformation(){if(this.getInformation().getSize()!=en.HEADER_SIZE+en.GTIN_SIZE+en.WEIGHT_SIZE+en.DATE_SIZE)throw new ne;let s=new be;return this.encodeCompressedGtin(s,en.HEADER_SIZE),this.encodeCompressedWeight(s,en.HEADER_SIZE+en.GTIN_SIZE,en.WEIGHT_SIZE),this.encodeCompressedDate(s,en.HEADER_SIZE+en.GTIN_SIZE+en.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,u){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(u,en.DATE_SIZE);if(h==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let g=h%32;h/=32;let y=h%12+1;h/=12;let x=h;x/10==0&&s.append("0"),s.append(x),y/10==0&&s.append("0"),s.append(y),g/10==0&&s.append("0"),s.append(g)}addWeightCode(s,u){s.append("("),s.append(this.firstAIdigits),s.append(u/1e5),s.append(")")}checkWeight(s){return s%1e5}}en.HEADER_SIZE=8,en.WEIGHT_SIZE=20,en.DATE_SIZE=16;function wf(j){try{if(j.get(1))return new ti(j);if(!j.get(2))return new Na(j);switch(Us.extractNumericValueFromBitArray(j,1,4)){case 4:return new yf(j);case 5:return new xf(j)}switch(Us.extractNumericValueFromBitArray(j,1,5)){case 12:return new gi(j);case 13:return new ur(j)}switch(Us.extractNumericValueFromBitArray(j,1,7)){case 56:return new en(j,"310","11");case 57:return new en(j,"320","11");case 58:return new en(j,"310","13");case 59:return new en(j,"320","13");case 60:return new en(j,"310","15");case 61:return new en(j,"320","15");case 62:return new en(j,"310","17");case 63:return new en(j,"320","17")}}catch(s){throw console.log(s),new It("unknown decoder: "+j)}}class Ut{constructor(s,u,h,g){this.leftchar=s,this.rightchar=u,this.finderpattern=h,this.maybeLast=g}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,u){return s instanceof Ut?Ut.equalsOrNull(s.leftchar,u.leftchar)&&Ut.equalsOrNull(s.rightchar,u.rightchar)&&Ut.equalsOrNull(s.finderpattern,u.finderpattern):!1}static equalsOrNull(s,u){return s===null?u===null:Ut.equals(s,u)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class yc{constructor(s,u,h){this.pairs=s,this.rowNumber=u,this.wasReversed=h}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,u){return s instanceof yc?this.checkEqualitity(s,u)&&s.wasReversed===u.wasReversed:!1}checkEqualitity(s,u){if(!s||!u)return;let h;return s.forEach((g,y)=>{u.forEach(x=>{g.getLeftChar().getValue()===x.getLeftChar().getValue()&&g.getRightChar().getValue()===x.getRightChar().getValue()&&g.getFinderPatter().getValue()===x.getFinderPatter().getValue()&&(h=!0)})}),h}}class Ae extends Xn{constructor(s){super(...arguments),this.pairs=new Array(Ae.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,u,h){this.pairs.length=0,this.startFromEven=!1;try{return Ae.constructResult(this.decodeRow2pairs(s,u))}catch(g){this.verbose&&console.log(g)}return this.pairs.length=0,this.startFromEven=!0,Ae.constructResult(this.decodeRow2pairs(s,u))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,u){let h=!1;for(;!h;)try{this.pairs.push(this.retrieveNextPair(u,this.pairs,s))}catch(y){if(y instanceof ne){if(!this.pairs.length)throw new ne;h=!0}}if(this.checkChecksum())return this.pairs;let g;if(this.rows.length?g=!0:g=!1,this.storeRow(s,!1),g){let y=this.checkRowsBoolean(!1);if(y!=null||(y=this.checkRowsBoolean(!0),y!=null))return y}throw new ne}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let u=null;try{u=this.checkRows(new Array,0)}catch(h){this.verbose&&console.log(h)}return s&&(this.rows=this.rows.reverse()),u}checkRows(s,u){for(let h=u;h<this.rows.length;h++){let g=this.rows[h];this.pairs.length=0;for(let x of s)this.pairs.push(x.getPairs());if(this.pairs.push(g.getPairs()),!Ae.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let y=new Array(s);y.push(g);try{return this.checkRows(y,h+1)}catch(x){this.verbose&&console.log(x)}}throw new ne}static isValidSequence(s){for(let u of Ae.FINDER_PATTERN_SEQUENCES){if(s.length>u.length)continue;let h=!0;for(let g=0;g<s.length;g++)if(s[g].getFinderPattern().getValue()!=u[g]){h=!1;break}if(h)return!0}return!1}storeRow(s,u){let h=0,g=!1,y=!1;for(;h<this.rows.length;){let x=this.rows[h];if(x.getRowNumber()>s){y=x.isEquivalent(this.pairs);break}g=x.isEquivalent(this.pairs),h++}y||g||Ae.isPartialRow(this.pairs,this.rows)||(this.rows.push(h,new yc(this.pairs,s,u)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,u){for(let h of u)if(h.getPairs().length!==s.length){for(let g of h.getPairs())for(let y of s)if(Ut.equals(g,y))break}}static isPartialRow(s,u){for(let h of u){let g=!0;for(let y of s){let x=!1;for(let _ of h.getPairs())if(y.equals(_)){x=!0;break}if(!x){g=!1;break}}if(g)return!0}return!1}getRows(){return this.rows}static constructResult(s){let u=mc.buildBitArray(s),g=wf(u).parseInformation(),y=s[0].getFinderPattern().getResultPoints(),x=s[s.length-1].getFinderPattern().getResultPoints(),_=[y[0],y[1],x[0],x[1]];return new Le(g,null,null,_,Ne.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),u=s.getLeftChar(),h=s.getRightChar();if(h==null)return!1;let g=h.getChecksumPortion(),y=2;for(let _=1;_<this.pairs.size();++_){let T=this.pairs.get(_);g+=T.getLeftChar().getChecksumPortion(),y++;let O=T.getRightChar();O!=null&&(g+=O.getChecksumPortion(),y++)}return g%=211,211*(y-4)+g==u.getValue()}static getNextSecondBar(s,u){let h;return s.get(u)?(h=s.getNextUnset(u),h=s.getNextSet(h)):(h=s.getNextSet(u),h=s.getNextUnset(h)),h}retrieveNextPair(s,u,h){let g=u.length%2==0;this.startFromEven&&(g=!g);let y,x=!0,_=-1;do this.findNextPair(s,u,_),y=this.parseFoundFinderPattern(s,h,g),y==null?_=Ae.getNextSecondBar(s,this.startEnd[0]):x=!1;while(x);let T=this.decodeDataCharacter(s,y,g,!0);if(!this.isEmptyPair(u)&&u[u.length-1].mustBeLast())throw new ne;let O;try{O=this.decodeDataCharacter(s,y,g,!1)}catch(U){O=null,this.verbose&&console.log(U)}return new Ut(T,O,y,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,u,h){let g=this.getDecodeFinderCounters();g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=s.getSize(),x;h>=0?x=h:this.isEmptyPair(u)?x=0:x=u[u.length-1].getFinderPattern().getStartEnd()[1];let _=u.length%2!=0;this.startFromEven&&(_=!_);let T=!1;for(;x<y&&(T=!s.get(x),!!T);)x++;let O=0,U=x;for(let $=x;$<y;$++)if(s.get($)!=T)g[O]++;else{if(O==3){if(_&&Ae.reverseCounters(g),Ae.isFinderPattern(g)){this.startEnd[0]=U,this.startEnd[1]=$;return}_&&Ae.reverseCounters(g),U+=g[0]+g[1],g[0]=g[2],g[1]=g[3],g[2]=0,g[3]=0,O--}else O++;g[O]=1,T=!T}throw new ne}static reverseCounters(s){let u=s.length;for(let h=0;h<u/2;++h){let g=s[h];s[h]=s[u-h-1],s[u-h-1]=g}}parseFoundFinderPattern(s,u,h){let g,y,x;if(h){let O=this.startEnd[0]-1;for(;O>=0&&!s.get(O);)O--;O++,g=this.startEnd[0]-O,y=O,x=this.startEnd[1]}else y=this.startEnd[0],x=s.getNextUnset(this.startEnd[1]+1),g=x-this.startEnd[1];let _=this.getDecodeFinderCounters();P.arraycopy(_,0,_,1,_.length-1),_[0]=g;let T;try{T=this.parseFinderValue(_,Ae.FINDER_PATTERNS)}catch{return null}return new Pa(T,[y,x],y,x,u)}decodeDataCharacter(s,u,h,g){let y=this.getDataCharacterCounters();for(let Bt=0;Bt<y.length;Bt++)y[Bt]=0;if(g)Ae.recordPatternInReverse(s,u.getStartEnd()[0],y);else{Ae.recordPattern(s,u.getStartEnd()[1],y);for(let Bt=0,wn=y.length-1;Bt<wn;Bt++,wn--){let _r=y[Bt];y[Bt]=y[wn],y[wn]=_r}}let x=17,_=_t.sum(new Int32Array(y))/x,T=(u.getStartEnd()[1]-u.getStartEnd()[0])/15;if(Math.abs(_-T)/T>.3)throw new ne;let O=this.getOddCounts(),U=this.getEvenCounts(),$=this.getOddRoundingErrors(),H=this.getEvenRoundingErrors();for(let Bt=0;Bt<y.length;Bt++){let wn=1*y[Bt]/_,_r=wn+.5;if(_r<1){if(wn<.3)throw new ne;_r=1}else if(_r>8){if(wn>8.7)throw new ne;_r=8}let Qo=Bt/2;(Bt&1)==0?(O[Qo]=_r,$[Qo]=wn-_r):(U[Qo]=_r,H[Qo]=wn-_r)}this.adjustOddEvenCounts(x);let Y=4*u.getValue()+(h?0:2)+(g?0:1)-1,Q=0,re=0;for(let Bt=O.length-1;Bt>=0;Bt--){if(Ae.isNotA1left(u,h,g)){let wn=Ae.WEIGHTS[Y][2*Bt];re+=O[Bt]*wn}Q+=O[Bt]}let oe=0;for(let Bt=U.length-1;Bt>=0;Bt--)if(Ae.isNotA1left(u,h,g)){let wn=Ae.WEIGHTS[Y][2*Bt+1];oe+=U[Bt]*wn}let me=re+oe;if((Q&1)!=0||Q>13||Q<4)throw new ne;let Oe=(13-Q)/2,ke=Ae.SYMBOL_WIDEST[Oe],Ie=9-ke,wt=Rr.getRSSvalue(O,ke,!0),pt=Rr.getRSSvalue(U,Ie,!1),Mr=Ae.EVEN_TOTAL_SUBSET[Oe],Ei=Ae.GSUM[Oe],Bn=wt*Mr+pt+Ei;return new Ro(Bn,me)}static isNotA1left(s,u,h){return!(s.getValue()==0&&u&&h)}adjustOddEvenCounts(s){let u=_t.sum(new Int32Array(this.getOddCounts())),h=_t.sum(new Int32Array(this.getEvenCounts())),g=!1,y=!1;u>13?y=!0:u<4&&(g=!0);let x=!1,_=!1;h>13?_=!0:h<4&&(x=!0);let T=u+h-s,O=(u&1)==1,U=(h&1)==0;if(T==1)if(O){if(U)throw new ne;y=!0}else{if(!U)throw new ne;_=!0}else if(T==-1)if(O){if(U)throw new ne;g=!0}else{if(!U)throw new ne;x=!0}else if(T==0){if(O){if(!U)throw new ne;u<h?(g=!0,_=!0):(y=!0,x=!0)}else if(U)throw new ne}else throw new ne;if(g){if(y)throw new ne;Ae.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&Ae.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(_)throw new ne;Ae.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Ae.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ae.SYMBOL_WIDEST=[7,5,4,3,1],Ae.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ae.GSUM=[0,348,1388,2948,3988],Ae.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ae.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ae.FINDER_PAT_A=0,Ae.FINDER_PAT_B=1,Ae.FINDER_PAT_C=2,Ae.FINDER_PAT_D=3,Ae.FINDER_PAT_E=4,Ae.FINDER_PAT_F=5,Ae.FINDER_PATTERN_SEQUENCES=[[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_C,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_C],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_E],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F]],Ae.MAX_PAIRS=11;class Ef extends Ro{constructor(s,u,h){super(s,u),this.count=0,this.finderPattern=h}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Kt extends Xn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,u,h){const g=this.decodePair(u,!1,s,h);Kt.addOrTally(this.possibleLeftPairs,g),u.reverse();let y=this.decodePair(u,!0,s,h);Kt.addOrTally(this.possibleRightPairs,y),u.reverse();for(let x of this.possibleLeftPairs)if(x.getCount()>1){for(let _ of this.possibleRightPairs)if(_.getCount()>1&&Kt.checkChecksum(x,_))return Kt.constructResult(x,_)}throw new ne}static addOrTally(s,u){if(u==null)return;let h=!1;for(let g of s)if(g.getValue()===u.getValue()){g.incrementCount(),h=!0;break}h||s.push(u)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,u){let h=4537077*s.getValue()+u.getValue(),g=new String(h).toString(),y=new be;for(let O=13-g.length;O>0;O--)y.append("0");y.append(g);let x=0;for(let O=0;O<13;O++){let U=y.charAt(O).charCodeAt(0)-48;x+=(O&1)===0?3*U:U}x=10-x%10,x===10&&(x=0),y.append(x.toString());let _=s.getFinderPattern().getResultPoints(),T=u.getFinderPattern().getResultPoints();return new Le(y.toString(),null,0,[_[0],_[1],T[0],T[1]],Ne.RSS_14,new Date().getTime())}static checkChecksum(s,u){let h=(s.getChecksumPortion()+16*u.getChecksumPortion())%79,g=9*s.getFinderPattern().getValue()+u.getFinderPattern().getValue();return g>72&&g--,g>8&&g--,h===g}decodePair(s,u,h,g){try{let y=this.findFinderPattern(s,u),x=this.parseFoundFinderPattern(s,h,u,y),_=g==null?null:g.get(q.NEED_RESULT_POINT_CALLBACK);if(_!=null){let U=(y[0]+y[1])/2;u&&(U=s.getSize()-1-U),_.foundPossibleResultPoint(new $e(U,h))}let T=this.decodeDataCharacter(s,x,!0),O=this.decodeDataCharacter(s,x,!1);return new Ef(1597*T.getValue()+O.getValue(),T.getChecksumPortion()+4*O.getChecksumPortion(),x)}catch{return null}}decodeDataCharacter(s,u,h){let g=this.getDataCharacterCounters();for(let oe=0;oe<g.length;oe++)g[oe]=0;if(h)xn.recordPatternInReverse(s,u.getStartEnd()[0],g);else{xn.recordPattern(s,u.getStartEnd()[1]+1,g);for(let oe=0,me=g.length-1;oe<me;oe++,me--){let Oe=g[oe];g[oe]=g[me],g[me]=Oe}}let y=h?16:15,x=_t.sum(new Int32Array(g))/y,_=this.getOddCounts(),T=this.getEvenCounts(),O=this.getOddRoundingErrors(),U=this.getEvenRoundingErrors();for(let oe=0;oe<g.length;oe++){let me=g[oe]/x,Oe=Math.floor(me+.5);Oe<1?Oe=1:Oe>8&&(Oe=8);let ke=Math.floor(oe/2);(oe&1)===0?(_[ke]=Oe,O[ke]=me-Oe):(T[ke]=Oe,U[ke]=me-Oe)}this.adjustOddEvenCounts(h,y);let $=0,H=0;for(let oe=_.length-1;oe>=0;oe--)H*=9,H+=_[oe],$+=_[oe];let Y=0,Q=0;for(let oe=T.length-1;oe>=0;oe--)Y*=9,Y+=T[oe],Q+=T[oe];let re=H+3*Y;if(h){if(($&1)!==0||$>12||$<4)throw new ne;let oe=(12-$)/2,me=Kt.OUTSIDE_ODD_WIDEST[oe],Oe=9-me,ke=Rr.getRSSvalue(_,me,!1),Ie=Rr.getRSSvalue(T,Oe,!0),wt=Kt.OUTSIDE_EVEN_TOTAL_SUBSET[oe],pt=Kt.OUTSIDE_GSUM[oe];return new Ro(ke*wt+Ie+pt,re)}else{if((Q&1)!==0||Q>10||Q<4)throw new ne;let oe=(10-Q)/2,me=Kt.INSIDE_ODD_WIDEST[oe],Oe=9-me,ke=Rr.getRSSvalue(_,me,!0),Ie=Rr.getRSSvalue(T,Oe,!1),wt=Kt.INSIDE_ODD_TOTAL_SUBSET[oe],pt=Kt.INSIDE_GSUM[oe];return new Ro(Ie*wt+ke+pt,re)}}findFinderPattern(s,u){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let g=s.getSize(),y=!1,x=0;for(;x<g&&(y=!s.get(x),u!==y);)x++;let _=0,T=x;for(let O=x;O<g;O++)if(s.get(O)!==y)h[_]++;else{if(_===3){if(Xn.isFinderPattern(h))return[T,O];T+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,_--}else _++;h[_]=1,y=!y}throw new ne}parseFoundFinderPattern(s,u,h,g){let y=s.get(g[0]),x=g[0]-1;for(;x>=0&&y!==s.get(x);)x--;x++;const _=g[0]-x,T=this.getDecodeFinderCounters(),O=new Int32Array(T.length);P.arraycopy(T,0,O,1,T.length-1),O[0]=_;const U=this.parseFinderValue(O,Kt.FINDER_PATTERNS);let $=x,H=g[1];return h&&($=s.getSize()-1-$,H=s.getSize()-1-H),new Pa(U,[x,g[1]],$,H,u)}adjustOddEvenCounts(s,u){let h=_t.sum(new Int32Array(this.getOddCounts())),g=_t.sum(new Int32Array(this.getEvenCounts())),y=!1,x=!1,_=!1,T=!1;s?(h>12?x=!0:h<4&&(y=!0),g>12?T=!0:g<4&&(_=!0)):(h>11?x=!0:h<5&&(y=!0),g>10?T=!0:g<4&&(_=!0));let O=h+g-u,U=(h&1)===(s?1:0),$=(g&1)===1;if(O===1)if(U){if($)throw new ne;x=!0}else{if(!$)throw new ne;T=!0}else if(O===-1)if(U){if($)throw new ne;y=!0}else{if(!$)throw new ne;_=!0}else if(O===0){if(U){if(!$)throw new ne;h<g?(y=!0,T=!0):(x=!0,_=!0)}else if($)throw new ne}else throw new ne;if(y){if(x)throw new ne;Xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&Xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),_){if(T)throw new ne;Xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&Xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Kt.OUTSIDE_GSUM=[0,161,961,2015,2715],Kt.INSIDE_GSUM=[0,336,1036,1516],Kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Kt.INSIDE_ODD_WIDEST=[2,4,6,8],Kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class js extends xn{constructor(s,u){super(),this.readers=[],this.verbose=u===!0;const h=s?s.get(q.POSSIBLE_FORMATS):null,g=s&&s.get(q.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;h?((h.includes(Ne.EAN_13)||h.includes(Ne.UPC_A)||h.includes(Ne.EAN_8)||h.includes(Ne.UPC_E))&&this.readers.push(new Ul(s)),h.includes(Ne.CODE_39)&&this.readers.push(new Mn(g)),h.includes(Ne.CODE_128)&&this.readers.push(new Be),h.includes(Ne.ITF)&&this.readers.push(new Lt),h.includes(Ne.RSS_14)&&this.readers.push(new Kt),h.includes(Ne.RSS_EXPANDED)&&this.readers.push(new Ae(this.verbose))):(this.readers.push(new Ul(s)),this.readers.push(new Mn),this.readers.push(new Ul(s)),this.readers.push(new Be),this.readers.push(new Lt),this.readers.push(new Kt),this.readers.push(new Ae(this.verbose)))}decodeRow(s,u,h){for(let g=0;g<this.readers.length;g++)try{return this.readers[g].decodeRow(s,u,h)}catch{}throw new ne}reset(){this.readers.forEach(s=>s.reset())}}class bf extends Fe{constructor(s=500,u){super(new js(u),s,u)}}class Tt{constructor(s,u,h){this.ecCodewords=s,this.ecBlocks=[u],h&&this.ecBlocks.push(h)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class vt{constructor(s,u){this.count=s,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class St{constructor(s,u,h,g,y,x){this.versionNumber=s,this.symbolSizeRows=u,this.symbolSizeColumns=h,this.dataRegionSizeRows=g,this.dataRegionSizeColumns=y,this.ecBlocks=x;let _=0;const T=x.getECCodewords(),O=x.getECBlocks();for(let U of O)_+=U.getCount()*(U.getDataCodewords()+T);this.totalCodewords=_}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,u){if((s&1)!==0||(u&1)!==0)throw new W;for(let h of St.VERSIONS)if(h.symbolSizeRows===s&&h.symbolSizeColumns===u)return h;throw new W}toString(){return""+this.versionNumber}static buildVersions(){return[new St(1,10,10,8,8,new Tt(5,new vt(1,3))),new St(2,12,12,10,10,new Tt(7,new vt(1,5))),new St(3,14,14,12,12,new Tt(10,new vt(1,8))),new St(4,16,16,14,14,new Tt(12,new vt(1,12))),new St(5,18,18,16,16,new Tt(14,new vt(1,18))),new St(6,20,20,18,18,new Tt(18,new vt(1,22))),new St(7,22,22,20,20,new Tt(20,new vt(1,30))),new St(8,24,24,22,22,new Tt(24,new vt(1,36))),new St(9,26,26,24,24,new Tt(28,new vt(1,44))),new St(10,32,32,14,14,new Tt(36,new vt(1,62))),new St(11,36,36,16,16,new Tt(42,new vt(1,86))),new St(12,40,40,18,18,new Tt(48,new vt(1,114))),new St(13,44,44,20,20,new Tt(56,new vt(1,144))),new St(14,48,48,22,22,new Tt(68,new vt(1,174))),new St(15,52,52,24,24,new Tt(42,new vt(2,102))),new St(16,64,64,14,14,new Tt(56,new vt(2,140))),new St(17,72,72,16,16,new Tt(36,new vt(4,92))),new St(18,80,80,18,18,new Tt(48,new vt(4,114))),new St(19,88,88,20,20,new Tt(56,new vt(4,144))),new St(20,96,96,22,22,new Tt(68,new vt(4,174))),new St(21,104,104,24,24,new Tt(56,new vt(6,136))),new St(22,120,120,18,18,new Tt(68,new vt(6,175))),new St(23,132,132,20,20,new Tt(62,new vt(8,163))),new St(24,144,144,22,22,new Tt(62,new vt(8,156),new vt(2,155))),new St(25,8,18,6,16,new Tt(7,new vt(1,5))),new St(26,8,32,6,14,new Tt(11,new vt(1,10))),new St(27,12,26,10,24,new Tt(14,new vt(1,16))),new St(28,12,36,10,16,new Tt(18,new vt(1,22))),new St(29,16,36,14,16,new Tt(24,new vt(1,32))),new St(30,16,48,14,22,new Tt(28,new vt(1,49)))]}}St.VERSIONS=St.buildVersions();class Gr{constructor(s){const u=s.getHeight();if(u<8||u>144||(u&1)!==0)throw new W;this.version=Gr.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new he(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const u=s.getHeight(),h=s.getWidth();return St.getVersionForDimensions(u,h)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let u=0,h=4,g=0;const y=this.mappingBitMatrix.getHeight(),x=this.mappingBitMatrix.getWidth();let _=!1,T=!1,O=!1,U=!1;do if(h===y&&g===0&&!_)s[u++]=this.readCorner1(y,x)&255,h-=2,g+=2,_=!0;else if(h===y-2&&g===0&&(x&3)!==0&&!T)s[u++]=this.readCorner2(y,x)&255,h-=2,g+=2,T=!0;else if(h===y+4&&g===2&&(x&7)===0&&!O)s[u++]=this.readCorner3(y,x)&255,h-=2,g+=2,O=!0;else if(h===y-2&&g===0&&(x&7)===4&&!U)s[u++]=this.readCorner4(y,x)&255,h-=2,g+=2,U=!0;else{do h<y&&g>=0&&!this.readMappingMatrix.get(g,h)&&(s[u++]=this.readUtah(h,g,y,x)&255),h-=2,g+=2;while(h>=0&&g<x);h+=1,g+=3;do h>=0&&g<x&&!this.readMappingMatrix.get(g,h)&&(s[u++]=this.readUtah(h,g,y,x)&255),h+=2,g-=2;while(h<y&&g>=0);h+=3,g+=1}while(h<y||g<x);if(u!==this.version.getTotalCodewords())throw new W;return s}readModule(s,u,h,g){return s<0&&(s+=h,u+=4-(h+4&7)),u<0&&(u+=g,s+=4-(g+4&7)),this.readMappingMatrix.set(u,s),this.mappingBitMatrix.get(u,s)}readUtah(s,u,h,g){let y=0;return this.readModule(s-2,u-2,h,g)&&(y|=1),y<<=1,this.readModule(s-2,u-1,h,g)&&(y|=1),y<<=1,this.readModule(s-1,u-2,h,g)&&(y|=1),y<<=1,this.readModule(s-1,u-1,h,g)&&(y|=1),y<<=1,this.readModule(s-1,u,h,g)&&(y|=1),y<<=1,this.readModule(s,u-2,h,g)&&(y|=1),y<<=1,this.readModule(s,u-1,h,g)&&(y|=1),y<<=1,this.readModule(s,u,h,g)&&(y|=1),y}readCorner1(s,u){let h=0;return this.readModule(s-1,0,s,u)&&(h|=1),h<<=1,this.readModule(s-1,1,s,u)&&(h|=1),h<<=1,this.readModule(s-1,2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-1,s,u)&&(h|=1),h<<=1,this.readModule(1,u-1,s,u)&&(h|=1),h<<=1,this.readModule(2,u-1,s,u)&&(h|=1),h<<=1,this.readModule(3,u-1,s,u)&&(h|=1),h}readCorner2(s,u){let h=0;return this.readModule(s-3,0,s,u)&&(h|=1),h<<=1,this.readModule(s-2,0,s,u)&&(h|=1),h<<=1,this.readModule(s-1,0,s,u)&&(h|=1),h<<=1,this.readModule(0,u-4,s,u)&&(h|=1),h<<=1,this.readModule(0,u-3,s,u)&&(h|=1),h<<=1,this.readModule(0,u-2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-1,s,u)&&(h|=1),h<<=1,this.readModule(1,u-1,s,u)&&(h|=1),h}readCorner3(s,u){let h=0;return this.readModule(s-1,0,s,u)&&(h|=1),h<<=1,this.readModule(s-1,u-1,s,u)&&(h|=1),h<<=1,this.readModule(0,u-3,s,u)&&(h|=1),h<<=1,this.readModule(0,u-2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-1,s,u)&&(h|=1),h<<=1,this.readModule(1,u-3,s,u)&&(h|=1),h<<=1,this.readModule(1,u-2,s,u)&&(h|=1),h<<=1,this.readModule(1,u-1,s,u)&&(h|=1),h}readCorner4(s,u){let h=0;return this.readModule(s-3,0,s,u)&&(h|=1),h<<=1,this.readModule(s-2,0,s,u)&&(h|=1),h<<=1,this.readModule(s-1,0,s,u)&&(h|=1),h<<=1,this.readModule(0,u-2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-1,s,u)&&(h|=1),h<<=1,this.readModule(1,u-1,s,u)&&(h|=1),h<<=1,this.readModule(2,u-1,s,u)&&(h|=1),h<<=1,this.readModule(3,u-1,s,u)&&(h|=1),h}extractDataRegion(s){const u=this.version.getSymbolSizeRows(),h=this.version.getSymbolSizeColumns();if(s.getHeight()!==u)throw new v("Dimension of bitMatrix must match the version size");const g=this.version.getDataRegionSizeRows(),y=this.version.getDataRegionSizeColumns(),x=u/g|0,_=h/y|0,T=x*g,O=_*y,U=new he(O,T);for(let $=0;$<x;++$){const H=$*g;for(let Y=0;Y<_;++Y){const Q=Y*y;for(let re=0;re<g;++re){const oe=$*(g+2)+1+re,me=H+re;for(let Oe=0;Oe<y;++Oe){const ke=Y*(y+2)+1+Oe;if(s.get(ke,oe)){const Ie=Q+Oe;U.set(Ie,me)}}}}}return U}}class xc{constructor(s,u){this.numDataCodewords=s,this.codewords=u}static getDataBlocks(s,u){const h=u.getECBlocks();let g=0;const y=h.getECBlocks();for(let re of y)g+=re.getCount();const x=new Array(g);let _=0;for(let re of y)for(let oe=0;oe<re.getCount();oe++){const me=re.getDataCodewords(),Oe=h.getECCodewords()+me;x[_++]=new xc(me,new Uint8Array(Oe))}const O=x[0].codewords.length-h.getECCodewords(),U=O-1;let $=0;for(let re=0;re<U;re++)for(let oe=0;oe<_;oe++)x[oe].codewords[re]=s[$++];const H=u.getVersionNumber()===24,Y=H?8:_;for(let re=0;re<Y;re++)x[re].codewords[O-1]=s[$++];const Q=x[0].codewords.length;for(let re=O;re<Q;re++)for(let oe=0;oe<_;oe++){const me=H?(oe+8)%_:oe,Oe=H&&me>7?re-1:re;x[me].codewords[Oe]=s[$++]}if($!==s.length)throw new v;return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class wc{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new v(""+s);let u=0,h=this.bitOffset,g=this.byteOffset;const y=this.bytes;if(h>0){const x=8-h,_=s<x?s:x,T=x-_,O=255>>8-_<<T;u=(y[g]&O)>>T,s-=_,h+=_,h===8&&(h=0,g++)}if(s>0){for(;s>=8;)u=u<<8|y[g]&255,g++,s-=8;if(s>0){const x=8-s,_=255>>x<<x;u=u<<s|(y[g]&_)>>x,h+=s}}return this.bitOffset=h,this.byteOffset=g,u}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Dn;(function(j){j[j.PAD_ENCODE=0]="PAD_ENCODE",j[j.ASCII_ENCODE=1]="ASCII_ENCODE",j[j.C40_ENCODE=2]="C40_ENCODE",j[j.TEXT_ENCODE=3]="TEXT_ENCODE",j[j.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",j[j.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",j[j.BASE256_ENCODE=6]="BASE256_ENCODE"})(Dn||(Dn={}));class vi{static decode(s){const u=new wc(s),h=new be,g=new be,y=new Array;let x=Dn.ASCII_ENCODE;do if(x===Dn.ASCII_ENCODE)x=this.decodeAsciiSegment(u,h,g);else{switch(x){case Dn.C40_ENCODE:this.decodeC40Segment(u,h);break;case Dn.TEXT_ENCODE:this.decodeTextSegment(u,h);break;case Dn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(u,h);break;case Dn.EDIFACT_ENCODE:this.decodeEdifactSegment(u,h);break;case Dn.BASE256_ENCODE:this.decodeBase256Segment(u,h,y);break;default:throw new W}x=Dn.ASCII_ENCODE}while(x!==Dn.PAD_ENCODE&&u.available()>0);return g.length()>0&&h.append(g.toString()),new Ee(s,h.toString(),y.length===0?null:y,null)}static decodeAsciiSegment(s,u,h){let g=!1;do{let y=s.readBits(8);if(y===0)throw new W;if(y<=128)return g&&(y+=128),u.append(String.fromCharCode(y-1)),Dn.ASCII_ENCODE;if(y===129)return Dn.PAD_ENCODE;if(y<=229){const x=y-130;x<10&&u.append("0"),u.append(""+x)}else switch(y){case 230:return Dn.C40_ENCODE;case 231:return Dn.BASE256_ENCODE;case 232:u.append("");break;case 233:case 234:break;case 235:g=!0;break;case 236:u.append("[)>05"),h.insert(0,"");break;case 237:u.append("[)>06"),h.insert(0,"");break;case 238:return Dn.ANSIX12_ENCODE;case 239:return Dn.TEXT_ENCODE;case 240:return Dn.EDIFACT_ENCODE;case 241:break;default:if(y!==254||s.available()!==0)throw new W;break}}while(s.available()>0);return Dn.ASCII_ENCODE}static decodeC40Segment(s,u){let h=!1;const g=[];let y=0;do{if(s.available()===8)return;const x=s.readBits(8);if(x===254)return;this.parseTwoBytes(x,s.readBits(8),g);for(let _=0;_<3;_++){const T=g[_];switch(y){case 0:if(T<3)y=T+1;else if(T<this.C40_BASIC_SET_CHARS.length){const O=this.C40_BASIC_SET_CHARS[T];h?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),h=!1):u.append(O)}else throw new W;break;case 1:h?(u.append(String.fromCharCode(T+128)),h=!1):u.append(String.fromCharCode(T)),y=0;break;case 2:if(T<this.C40_SHIFT2_SET_CHARS.length){const O=this.C40_SHIFT2_SET_CHARS[T];h?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),h=!1):u.append(O)}else switch(T){case 27:u.append("");break;case 30:h=!0;break;default:throw new W}y=0;break;case 3:h?(u.append(String.fromCharCode(T+224)),h=!1):u.append(String.fromCharCode(T+96)),y=0;break;default:throw new W}}}while(s.available()>0)}static decodeTextSegment(s,u){let h=!1,g=[],y=0;do{if(s.available()===8)return;const x=s.readBits(8);if(x===254)return;this.parseTwoBytes(x,s.readBits(8),g);for(let _=0;_<3;_++){const T=g[_];switch(y){case 0:if(T<3)y=T+1;else if(T<this.TEXT_BASIC_SET_CHARS.length){const O=this.TEXT_BASIC_SET_CHARS[T];h?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),h=!1):u.append(O)}else throw new W;break;case 1:h?(u.append(String.fromCharCode(T+128)),h=!1):u.append(String.fromCharCode(T)),y=0;break;case 2:if(T<this.TEXT_SHIFT2_SET_CHARS.length){const O=this.TEXT_SHIFT2_SET_CHARS[T];h?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),h=!1):u.append(O)}else switch(T){case 27:u.append("");break;case 30:h=!0;break;default:throw new W}y=0;break;case 3:if(T<this.TEXT_SHIFT3_SET_CHARS.length){const O=this.TEXT_SHIFT3_SET_CHARS[T];h?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),h=!1):u.append(O),y=0}else throw new W;break;default:throw new W}}}while(s.available()>0)}static decodeAnsiX12Segment(s,u){const h=[];do{if(s.available()===8)return;const g=s.readBits(8);if(g===254)return;this.parseTwoBytes(g,s.readBits(8),h);for(let y=0;y<3;y++){const x=h[y];switch(x){case 0:u.append("\r");break;case 1:u.append("*");break;case 2:u.append(">");break;case 3:u.append(" ");break;default:if(x<14)u.append(String.fromCharCode(x+44));else if(x<40)u.append(String.fromCharCode(x+51));else throw new W;break}}}while(s.available()>0)}static parseTwoBytes(s,u,h){let g=(s<<8)+u-1,y=Math.floor(g/1600);h[0]=y,g-=y*1600,y=Math.floor(g/40),h[1]=y,h[2]=g-y*40}static decodeEdifactSegment(s,u){do{if(s.available()<=16)return;for(let h=0;h<4;h++){let g=s.readBits(6);if(g===31){const y=8-s.getBitOffset();y!==8&&s.readBits(y);return}(g&32)===0&&(g|=64),u.append(String.fromCharCode(g))}}while(s.available()>0)}static decodeBase256Segment(s,u,h){let g=1+s.getByteOffset();const y=this.unrandomize255State(s.readBits(8),g++);let x;if(y===0?x=s.available()/8|0:y<250?x=y:x=250*(y-249)+this.unrandomize255State(s.readBits(8),g++),x<0)throw new W;const _=new Uint8Array(x);for(let T=0;T<x;T++){if(s.available()<8)throw new W;_[T]=this.unrandomize255State(s.readBits(8),g++)}h.push(_);try{u.append(se.decode(_,ae.ISO88591))}catch(T){throw new It("Platform does not support required encoding: "+T.message)}}static unrandomize255State(s,u){const h=149*u%255+1,g=s-h;return g>=0?g:g+256}}vi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],vi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],vi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],vi.TEXT_SHIFT2_SET_CHARS=vi.C40_SHIFT2_SET_CHARS,vi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class jl{constructor(){this.rsDecoder=new An(Ke.DATA_MATRIX_FIELD_256)}decode(s){const u=new Gr(s),h=u.getVersion(),g=u.readCodewords(),y=xc.getDataBlocks(g,h);let x=0;for(let O of y)x+=O.getNumDataCodewords();const _=new Uint8Array(x),T=y.length;for(let O=0;O<T;O++){const U=y[O],$=U.getCodewords(),H=U.getNumDataCodewords();this.correctErrors($,H);for(let Y=0;Y<H;Y++)_[Y*T+O]=$[Y]}return vi.decode(_)}correctErrors(s,u){const h=new Int32Array(s);try{this.rsDecoder.decode(h,s.length-u)}catch{throw new C}for(let g=0;g<u;g++)s[g]=h[g]}}class Yt{constructor(s){this.image=s,this.rectangleDetector=new Di(this.image)}detect(){const s=this.rectangleDetector.detect();let u=this.detectSolid1(s);if(u=this.detectSolid2(u),u[3]=this.correctTopRight(u),!u[3])throw new ne;u=this.shiftToModuleCenter(u);const h=u[0],g=u[1],y=u[2],x=u[3];let _=this.transitionsBetween(h,x)+1,T=this.transitionsBetween(y,x)+1;(_&1)===1&&(_+=1),(T&1)===1&&(T+=1),4*_<7*T&&4*T<7*_&&(_=T=Math.max(_,T));let O=Yt.sampleGrid(this.image,h,g,y,x,_,T);return new Bs(O,[h,g,y,x])}static shiftPoint(s,u,h){let g=(u.getX()-s.getX())/(h+1),y=(u.getY()-s.getY())/(h+1);return new $e(s.getX()+g,s.getY()+y)}static moveAway(s,u,h){let g=s.getX(),y=s.getY();return g<u?g-=1:g+=1,y<h?y-=1:y+=1,new $e(g,y)}detectSolid1(s){let u=s[0],h=s[1],g=s[3],y=s[2],x=this.transitionsBetween(u,h),_=this.transitionsBetween(h,g),T=this.transitionsBetween(g,y),O=this.transitionsBetween(y,u),U=x,$=[y,u,h,g];return U>_&&(U=_,$[0]=u,$[1]=h,$[2]=g,$[3]=y),U>T&&(U=T,$[0]=h,$[1]=g,$[2]=y,$[3]=u),U>O&&($[0]=g,$[1]=y,$[2]=u,$[3]=h),$}detectSolid2(s){let u=s[0],h=s[1],g=s[2],y=s[3],x=this.transitionsBetween(u,y),_=Yt.shiftPoint(h,g,(x+1)*4),T=Yt.shiftPoint(g,h,(x+1)*4),O=this.transitionsBetween(_,u),U=this.transitionsBetween(T,y);return O<U?(s[0]=u,s[1]=h,s[2]=g,s[3]=y):(s[0]=h,s[1]=g,s[2]=y,s[3]=u),s}correctTopRight(s){let u=s[0],h=s[1],g=s[2],y=s[3],x=this.transitionsBetween(u,y),_=this.transitionsBetween(h,y),T=Yt.shiftPoint(u,h,(_+1)*4),O=Yt.shiftPoint(g,h,(x+1)*4);x=this.transitionsBetween(T,y),_=this.transitionsBetween(O,y);let U=new $e(y.getX()+(g.getX()-h.getX())/(x+1),y.getY()+(g.getY()-h.getY())/(x+1)),$=new $e(y.getX()+(u.getX()-h.getX())/(_+1),y.getY()+(u.getY()-h.getY())/(_+1));if(!this.isValid(U))return this.isValid($)?$:null;if(!this.isValid($))return U;let H=this.transitionsBetween(T,U)+this.transitionsBetween(O,U),Y=this.transitionsBetween(T,$)+this.transitionsBetween(O,$);return H>Y?U:$}shiftToModuleCenter(s){let u=s[0],h=s[1],g=s[2],y=s[3],x=this.transitionsBetween(u,y)+1,_=this.transitionsBetween(g,y)+1,T=Yt.shiftPoint(u,h,_*4),O=Yt.shiftPoint(g,h,x*4);x=this.transitionsBetween(T,y)+1,_=this.transitionsBetween(O,y)+1,(x&1)===1&&(x+=1),(_&1)===1&&(_+=1);let U=(u.getX()+h.getX()+g.getX()+y.getX())/4,$=(u.getY()+h.getY()+g.getY()+y.getY())/4;u=Yt.moveAway(u,U,$),h=Yt.moveAway(h,U,$),g=Yt.moveAway(g,U,$),y=Yt.moveAway(y,U,$);let H,Y;return T=Yt.shiftPoint(u,h,_*4),T=Yt.shiftPoint(T,y,x*4),H=Yt.shiftPoint(h,u,_*4),H=Yt.shiftPoint(H,g,x*4),O=Yt.shiftPoint(g,y,_*4),O=Yt.shiftPoint(O,h,x*4),Y=Yt.shiftPoint(y,g,_*4),Y=Yt.shiftPoint(Y,u,x*4),[T,H,O,Y]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,u,h,g,y,x,_){return pi.getInstance().sampleGrid(s,x,_,.5,.5,x-.5,.5,x-.5,_-.5,.5,_-.5,u.getX(),u.getY(),y.getX(),y.getY(),g.getX(),g.getY(),h.getX(),h.getY())}transitionsBetween(s,u){let h=Math.trunc(s.getX()),g=Math.trunc(s.getY()),y=Math.trunc(u.getX()),x=Math.trunc(u.getY()),_=Math.abs(x-g)>Math.abs(y-h);if(_){let re=h;h=g,g=re,re=y,y=x,x=re}let T=Math.abs(y-h),O=Math.abs(x-g),U=-T/2,$=g<x?1:-1,H=h<y?1:-1,Y=0,Q=this.image.get(_?g:h,_?h:g);for(let re=h,oe=g;re!==y;re+=H){let me=this.image.get(_?oe:re,_?re:oe);if(me!==Q&&(Y++,Q=me),U+=O,U>0){if(oe===x)break;oe+=$,U-=T}}return Y}}class yi{constructor(){this.decoder=new jl}decode(s,u=null){let h,g;if(u!=null&&u.has(q.PURE_BARCODE)){const O=yi.extractPureBits(s.getBlackMatrix());h=this.decoder.decode(O),g=yi.NO_POINTS}else{const O=new Yt(s.getBlackMatrix()).detect();h=this.decoder.decode(O.getBits()),g=O.getPoints()}const y=h.getRawBytes(),x=new Le(h.getText(),y,8*y.length,g,Ne.DATA_MATRIX,P.currentTimeMillis()),_=h.getByteSegments();_!=null&&x.putMetadata(rt.BYTE_SEGMENTS,_);const T=h.getECLevel();return T!=null&&x.putMetadata(rt.ERROR_CORRECTION_LEVEL,T),x}reset(){}static extractPureBits(s){const u=s.getTopLeftOnBit(),h=s.getBottomRightOnBit();if(u==null||h==null)throw new ne;const g=this.moduleSize(u,s);let y=u[1];const x=h[1];let _=u[0];const O=(h[0]-_+1)/g,U=(x-y+1)/g;if(O<=0||U<=0)throw new ne;const $=g/2;y+=$,_+=$;const H=new he(O,U);for(let Y=0;Y<U;Y++){const Q=y+Y*g;for(let re=0;re<O;re++)s.get(_+re*g,Q)&&H.set(re,Y)}return H}static moduleSize(s,u){const h=u.getWidth();let g=s[0];const y=s[1];for(;g<h&&u.get(g,y);)g++;if(g===h)throw new ne;const x=g-s[0];if(x===0)throw new ne;return x}}yi.NO_POINTS=[];class Hm extends Fe{constructor(s=500){super(new yi,s)}}var Vs;(function(j){j[j.L=0]="L",j[j.M=1]="M",j[j.Q=2]="Q",j[j.H=3]="H"})(Vs||(Vs={}));class jt{constructor(s,u,h){this.value=s,this.stringValue=u,this.bits=h,jt.FOR_BITS.set(h,this),jt.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return jt.L;case"M":return jt.M;case"Q":return jt.Q;case"H":return jt.H;default:throw new m(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof jt))return!1;const u=s;return this.value===u.value}static forBits(s){if(s<0||s>=jt.FOR_BITS.size)throw new v;return jt.FOR_BITS.get(s)}}jt.FOR_BITS=new Map,jt.FOR_VALUE=new Map,jt.L=new jt(Vs.L,"L",1),jt.M=new jt(Vs.M,"M",0),jt.Q=new jt(Vs.Q,"Q",3),jt.H=new jt(Vs.H,"H",2);class Jn{constructor(s){this.errorCorrectionLevel=jt.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,u){return L.bitCount(s^u)}static decodeFormatInformation(s,u){const h=Jn.doDecodeFormatInformation(s,u);return h!==null?h:Jn.doDecodeFormatInformation(s^Jn.FORMAT_INFO_MASK_QR,u^Jn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,u){let h=Number.MAX_SAFE_INTEGER,g=0;for(const y of Jn.FORMAT_INFO_DECODE_LOOKUP){const x=y[0];if(x===s||x===u)return new Jn(y[1]);let _=Jn.numBitsDiffering(s,x);_<h&&(g=y[1],h=_),s!==u&&(_=Jn.numBitsDiffering(u,x),_<h&&(g=y[1],h=_))}return h<=3?new Jn(g):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Jn))return!1;const u=s;return this.errorCorrectionLevel===u.errorCorrectionLevel&&this.dataMask===u.dataMask}}Jn.FORMAT_INFO_MASK_QR=21522,Jn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class le{constructor(s,...u){this.ecCodewordsPerBlock=s,this.ecBlocks=u}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const u=this.ecBlocks;for(const h of u)s+=h.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class K{constructor(s,u){this.count=s,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class tt{constructor(s,u,...h){this.versionNumber=s,this.alignmentPatternCenters=u,this.ecBlocks=h;let g=0;const y=h[0].getECCodewordsPerBlock(),x=h[0].getECBlocks();for(const _ of x)g+=_.getCount()*(_.getDataCodewords()+y);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new W;try{return this.getVersionForNumber((s-17)/4)}catch{throw new W}}static getVersionForNumber(s){if(s<1||s>40)throw new v;return tt.VERSIONS[s-1]}static decodeVersionInformation(s){let u=Number.MAX_SAFE_INTEGER,h=0;for(let g=0;g<tt.VERSION_DECODE_INFO.length;g++){const y=tt.VERSION_DECODE_INFO[g];if(y===s)return tt.getVersionForNumber(g+7);const x=Jn.numBitsDiffering(s,y);x<u&&(h=g+7,u=x)}return u<=3?tt.getVersionForNumber(h):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),u=new he(s);u.setRegion(0,0,9,9),u.setRegion(s-8,0,8,9),u.setRegion(0,s-8,9,8);const h=this.alignmentPatternCenters.length;for(let g=0;g<h;g++){const y=this.alignmentPatternCenters[g]-2;for(let x=0;x<h;x++)g===0&&(x===0||x===h-1)||g===h-1&&x===0||u.setRegion(this.alignmentPatternCenters[x]-2,y,5,5)}return u.setRegion(6,9,1,s-17),u.setRegion(9,6,s-17,1),this.versionNumber>6&&(u.setRegion(s-11,0,3,6),u.setRegion(0,s-11,6,3)),u}toString(){return""+this.versionNumber}}tt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),tt.VERSIONS=[new tt(1,new Int32Array(0),new le(7,new K(1,19)),new le(10,new K(1,16)),new le(13,new K(1,13)),new le(17,new K(1,9))),new tt(2,Int32Array.from([6,18]),new le(10,new K(1,34)),new le(16,new K(1,28)),new le(22,new K(1,22)),new le(28,new K(1,16))),new tt(3,Int32Array.from([6,22]),new le(15,new K(1,55)),new le(26,new K(1,44)),new le(18,new K(2,17)),new le(22,new K(2,13))),new tt(4,Int32Array.from([6,26]),new le(20,new K(1,80)),new le(18,new K(2,32)),new le(26,new K(2,24)),new le(16,new K(4,9))),new tt(5,Int32Array.from([6,30]),new le(26,new K(1,108)),new le(24,new K(2,43)),new le(18,new K(2,15),new K(2,16)),new le(22,new K(2,11),new K(2,12))),new tt(6,Int32Array.from([6,34]),new le(18,new K(2,68)),new le(16,new K(4,27)),new le(24,new K(4,19)),new le(28,new K(4,15))),new tt(7,Int32Array.from([6,22,38]),new le(20,new K(2,78)),new le(18,new K(4,31)),new le(18,new K(2,14),new K(4,15)),new le(26,new K(4,13),new K(1,14))),new tt(8,Int32Array.from([6,24,42]),new le(24,new K(2,97)),new le(22,new K(2,38),new K(2,39)),new le(22,new K(4,18),new K(2,19)),new le(26,new K(4,14),new K(2,15))),new tt(9,Int32Array.from([6,26,46]),new le(30,new K(2,116)),new le(22,new K(3,36),new K(2,37)),new le(20,new K(4,16),new K(4,17)),new le(24,new K(4,12),new K(4,13))),new tt(10,Int32Array.from([6,28,50]),new le(18,new K(2,68),new K(2,69)),new le(26,new K(4,43),new K(1,44)),new le(24,new K(6,19),new K(2,20)),new le(28,new K(6,15),new K(2,16))),new tt(11,Int32Array.from([6,30,54]),new le(20,new K(4,81)),new le(30,new K(1,50),new K(4,51)),new le(28,new K(4,22),new K(4,23)),new le(24,new K(3,12),new K(8,13))),new tt(12,Int32Array.from([6,32,58]),new le(24,new K(2,92),new K(2,93)),new le(22,new K(6,36),new K(2,37)),new le(26,new K(4,20),new K(6,21)),new le(28,new K(7,14),new K(4,15))),new tt(13,Int32Array.from([6,34,62]),new le(26,new K(4,107)),new le(22,new K(8,37),new K(1,38)),new le(24,new K(8,20),new K(4,21)),new le(22,new K(12,11),new K(4,12))),new tt(14,Int32Array.from([6,26,46,66]),new le(30,new K(3,115),new K(1,116)),new le(24,new K(4,40),new K(5,41)),new le(20,new K(11,16),new K(5,17)),new le(24,new K(11,12),new K(5,13))),new tt(15,Int32Array.from([6,26,48,70]),new le(22,new K(5,87),new K(1,88)),new le(24,new K(5,41),new K(5,42)),new le(30,new K(5,24),new K(7,25)),new le(24,new K(11,12),new K(7,13))),new tt(16,Int32Array.from([6,26,50,74]),new le(24,new K(5,98),new K(1,99)),new le(28,new K(7,45),new K(3,46)),new le(24,new K(15,19),new K(2,20)),new le(30,new K(3,15),new K(13,16))),new tt(17,Int32Array.from([6,30,54,78]),new le(28,new K(1,107),new K(5,108)),new le(28,new K(10,46),new K(1,47)),new le(28,new K(1,22),new K(15,23)),new le(28,new K(2,14),new K(17,15))),new tt(18,Int32Array.from([6,30,56,82]),new le(30,new K(5,120),new K(1,121)),new le(26,new K(9,43),new K(4,44)),new le(28,new K(17,22),new K(1,23)),new le(28,new K(2,14),new K(19,15))),new tt(19,Int32Array.from([6,30,58,86]),new le(28,new K(3,113),new K(4,114)),new le(26,new K(3,44),new K(11,45)),new le(26,new K(17,21),new K(4,22)),new le(26,new K(9,13),new K(16,14))),new tt(20,Int32Array.from([6,34,62,90]),new le(28,new K(3,107),new K(5,108)),new le(26,new K(3,41),new K(13,42)),new le(30,new K(15,24),new K(5,25)),new le(28,new K(15,15),new K(10,16))),new tt(21,Int32Array.from([6,28,50,72,94]),new le(28,new K(4,116),new K(4,117)),new le(26,new K(17,42)),new le(28,new K(17,22),new K(6,23)),new le(30,new K(19,16),new K(6,17))),new tt(22,Int32Array.from([6,26,50,74,98]),new le(28,new K(2,111),new K(7,112)),new le(28,new K(17,46)),new le(30,new K(7,24),new K(16,25)),new le(24,new K(34,13))),new tt(23,Int32Array.from([6,30,54,78,102]),new le(30,new K(4,121),new K(5,122)),new le(28,new K(4,47),new K(14,48)),new le(30,new K(11,24),new K(14,25)),new le(30,new K(16,15),new K(14,16))),new tt(24,Int32Array.from([6,28,54,80,106]),new le(30,new K(6,117),new K(4,118)),new le(28,new K(6,45),new K(14,46)),new le(30,new K(11,24),new K(16,25)),new le(30,new K(30,16),new K(2,17))),new tt(25,Int32Array.from([6,32,58,84,110]),new le(26,new K(8,106),new K(4,107)),new le(28,new K(8,47),new K(13,48)),new le(30,new K(7,24),new K(22,25)),new le(30,new K(22,15),new K(13,16))),new tt(26,Int32Array.from([6,30,58,86,114]),new le(28,new K(10,114),new K(2,115)),new le(28,new K(19,46),new K(4,47)),new le(28,new K(28,22),new K(6,23)),new le(30,new K(33,16),new K(4,17))),new tt(27,Int32Array.from([6,34,62,90,118]),new le(30,new K(8,122),new K(4,123)),new le(28,new K(22,45),new K(3,46)),new le(30,new K(8,23),new K(26,24)),new le(30,new K(12,15),new K(28,16))),new tt(28,Int32Array.from([6,26,50,74,98,122]),new le(30,new K(3,117),new K(10,118)),new le(28,new K(3,45),new K(23,46)),new le(30,new K(4,24),new K(31,25)),new le(30,new K(11,15),new K(31,16))),new tt(29,Int32Array.from([6,30,54,78,102,126]),new le(30,new K(7,116),new K(7,117)),new le(28,new K(21,45),new K(7,46)),new le(30,new K(1,23),new K(37,24)),new le(30,new K(19,15),new K(26,16))),new tt(30,Int32Array.from([6,26,52,78,104,130]),new le(30,new K(5,115),new K(10,116)),new le(28,new K(19,47),new K(10,48)),new le(30,new K(15,24),new K(25,25)),new le(30,new K(23,15),new K(25,16))),new tt(31,Int32Array.from([6,30,56,82,108,134]),new le(30,new K(13,115),new K(3,116)),new le(28,new K(2,46),new K(29,47)),new le(30,new K(42,24),new K(1,25)),new le(30,new K(23,15),new K(28,16))),new tt(32,Int32Array.from([6,34,60,86,112,138]),new le(30,new K(17,115)),new le(28,new K(10,46),new K(23,47)),new le(30,new K(10,24),new K(35,25)),new le(30,new K(19,15),new K(35,16))),new tt(33,Int32Array.from([6,30,58,86,114,142]),new le(30,new K(17,115),new K(1,116)),new le(28,new K(14,46),new K(21,47)),new le(30,new K(29,24),new K(19,25)),new le(30,new K(11,15),new K(46,16))),new tt(34,Int32Array.from([6,34,62,90,118,146]),new le(30,new K(13,115),new K(6,116)),new le(28,new K(14,46),new K(23,47)),new le(30,new K(44,24),new K(7,25)),new le(30,new K(59,16),new K(1,17))),new tt(35,Int32Array.from([6,30,54,78,102,126,150]),new le(30,new K(12,121),new K(7,122)),new le(28,new K(12,47),new K(26,48)),new le(30,new K(39,24),new K(14,25)),new le(30,new K(22,15),new K(41,16))),new tt(36,Int32Array.from([6,24,50,76,102,128,154]),new le(30,new K(6,121),new K(14,122)),new le(28,new K(6,47),new K(34,48)),new le(30,new K(46,24),new K(10,25)),new le(30,new K(2,15),new K(64,16))),new tt(37,Int32Array.from([6,28,54,80,106,132,158]),new le(30,new K(17,122),new K(4,123)),new le(28,new K(29,46),new K(14,47)),new le(30,new K(49,24),new K(10,25)),new le(30,new K(24,15),new K(46,16))),new tt(38,Int32Array.from([6,32,58,84,110,136,162]),new le(30,new K(4,122),new K(18,123)),new le(28,new K(13,46),new K(32,47)),new le(30,new K(48,24),new K(14,25)),new le(30,new K(42,15),new K(32,16))),new tt(39,Int32Array.from([6,26,54,82,110,138,166]),new le(30,new K(20,117),new K(4,118)),new le(28,new K(40,47),new K(7,48)),new le(30,new K(43,24),new K(22,25)),new le(30,new K(10,15),new K(67,16))),new tt(40,Int32Array.from([6,30,58,86,114,142,170]),new le(30,new K(19,118),new K(6,119)),new le(28,new K(18,47),new K(31,48)),new le(30,new K(34,24),new K(34,25)),new le(30,new K(20,15),new K(61,16)))];var Tn;(function(j){j[j.DATA_MASK_000=0]="DATA_MASK_000",j[j.DATA_MASK_001=1]="DATA_MASK_001",j[j.DATA_MASK_010=2]="DATA_MASK_010",j[j.DATA_MASK_011=3]="DATA_MASK_011",j[j.DATA_MASK_100=4]="DATA_MASK_100",j[j.DATA_MASK_101=5]="DATA_MASK_101",j[j.DATA_MASK_110=6]="DATA_MASK_110",j[j.DATA_MASK_111=7]="DATA_MASK_111"})(Tn||(Tn={}));class yt{constructor(s,u){this.value=s,this.isMasked=u}unmaskBitMatrix(s,u){for(let h=0;h<u;h++)for(let g=0;g<u;g++)this.isMasked(h,g)&&s.flip(g,h)}}yt.values=new Map([[Tn.DATA_MASK_000,new yt(Tn.DATA_MASK_000,(j,s)=>(j+s&1)===0)],[Tn.DATA_MASK_001,new yt(Tn.DATA_MASK_001,(j,s)=>(j&1)===0)],[Tn.DATA_MASK_010,new yt(Tn.DATA_MASK_010,(j,s)=>s%3===0)],[Tn.DATA_MASK_011,new yt(Tn.DATA_MASK_011,(j,s)=>(j+s)%3===0)],[Tn.DATA_MASK_100,new yt(Tn.DATA_MASK_100,(j,s)=>(Math.floor(j/2)+Math.floor(s/3)&1)===0)],[Tn.DATA_MASK_101,new yt(Tn.DATA_MASK_101,(j,s)=>j*s%6===0)],[Tn.DATA_MASK_110,new yt(Tn.DATA_MASK_110,(j,s)=>j*s%6<3)],[Tn.DATA_MASK_111,new yt(Tn.DATA_MASK_111,(j,s)=>(j+s+j*s%3&1)===0)]]);class _f{constructor(s){const u=s.getHeight();if(u<21||(u&3)!==1)throw new W;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let y=0;y<6;y++)s=this.copyBit(y,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let y=5;y>=0;y--)s=this.copyBit(8,y,s);const u=this.bitMatrix.getHeight();let h=0;const g=u-7;for(let y=u-1;y>=g;y--)h=this.copyBit(8,y,h);for(let y=u-8;y<u;y++)h=this.copyBit(y,8,h);if(this.parsedFormatInfo=Jn.decodeFormatInformation(s,h),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),u=Math.floor((s-17)/4);if(u<=6)return tt.getVersionForNumber(u);let h=0;const g=s-11;for(let x=5;x>=0;x--)for(let _=s-9;_>=g;_--)h=this.copyBit(_,x,h);let y=tt.decodeVersionInformation(h);if(y!==null&&y.getDimensionForVersion()===s)return this.parsedVersion=y,y;h=0;for(let x=5;x>=0;x--)for(let _=s-9;_>=g;_--)h=this.copyBit(x,_,h);if(y=tt.decodeVersionInformation(h),y!==null&&y.getDimensionForVersion()===s)return this.parsedVersion=y,y;throw new W}copyBit(s,u,h){return(this.isMirror?this.bitMatrix.get(u,s):this.bitMatrix.get(s,u))?h<<1|1:h<<1}readCodewords(){const s=this.readFormatInformation(),u=this.readVersion(),h=yt.values.get(s.getDataMask()),g=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,g);const y=u.buildFunctionPattern();let x=!0;const _=new Uint8Array(u.getTotalCodewords());let T=0,O=0,U=0;for(let $=g-1;$>0;$-=2){$===6&&$--;for(let H=0;H<g;H++){const Y=x?g-1-H:H;for(let Q=0;Q<2;Q++)y.get($-Q,Y)||(U++,O<<=1,this.bitMatrix.get($-Q,Y)&&(O|=1),U===8&&(_[T++]=O,U=0,O=0))}x=!x}if(T!==u.getTotalCodewords())throw new W;return _}remask(){if(this.parsedFormatInfo===null)return;const s=yt.values[this.parsedFormatInfo.getDataMask()],u=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,u)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let u=0,h=s.getWidth();u<h;u++)for(let g=u+1,y=s.getHeight();g<y;g++)s.get(u,g)!==s.get(g,u)&&(s.flip(g,u),s.flip(u,g))}}class Vl{constructor(s,u){this.numDataCodewords=s,this.codewords=u}static getDataBlocks(s,u,h){if(s.length!==u.getTotalCodewords())throw new v;const g=u.getECBlocksForLevel(h);let y=0;const x=g.getECBlocks();for(const Q of x)y+=Q.getCount();const _=new Array(y);let T=0;for(const Q of x)for(let re=0;re<Q.getCount();re++){const oe=Q.getDataCodewords(),me=g.getECCodewordsPerBlock()+oe;_[T++]=new Vl(oe,new Uint8Array(me))}const O=_[0].codewords.length;let U=_.length-1;for(;U>=0&&_[U].codewords.length!==O;)U--;U++;const $=O-g.getECCodewordsPerBlock();let H=0;for(let Q=0;Q<$;Q++)for(let re=0;re<T;re++)_[re].codewords[Q]=s[H++];for(let Q=U;Q<T;Q++)_[Q].codewords[$]=s[H++];const Y=_[0].codewords.length;for(let Q=$;Q<Y;Q++)for(let re=0;re<T;re++){const oe=re<U?Q:Q+1;_[re].codewords[oe]=s[H++]}return _}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var kr;(function(j){j[j.TERMINATOR=0]="TERMINATOR",j[j.NUMERIC=1]="NUMERIC",j[j.ALPHANUMERIC=2]="ALPHANUMERIC",j[j.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",j[j.BYTE=4]="BYTE",j[j.ECI=5]="ECI",j[j.KANJI=6]="KANJI",j[j.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",j[j.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",j[j.HANZI=9]="HANZI"})(kr||(kr={}));class nt{constructor(s,u,h,g){this.value=s,this.stringValue=u,this.characterCountBitsForVersions=h,this.bits=g,nt.FOR_BITS.set(g,this),nt.FOR_VALUE.set(s,this)}static forBits(s){const u=nt.FOR_BITS.get(s);if(u===void 0)throw new v;return u}getCharacterCountBits(s){const u=s.getVersionNumber();let h;return u<=9?h=0:u<=26?h=1:h=2,this.characterCountBitsForVersions[h]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof nt))return!1;const u=s;return this.value===u.value}toString(){return this.stringValue}}nt.FOR_BITS=new Map,nt.FOR_VALUE=new Map,nt.TERMINATOR=new nt(kr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),nt.NUMERIC=new nt(kr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),nt.ALPHANUMERIC=new nt(kr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),nt.STRUCTURED_APPEND=new nt(kr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),nt.BYTE=new nt(kr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),nt.ECI=new nt(kr.ECI,"ECI",Int32Array.from([0,0,0]),7),nt.KANJI=new nt(kr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),nt.FNC1_FIRST_POSITION=new nt(kr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),nt.FNC1_SECOND_POSITION=new nt(kr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),nt.HANZI=new nt(kr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class tn{static decode(s,u,h,g){const y=new wc(s);let x=new be;const _=new Array;let T=-1,O=-1;try{let U=null,$=!1,H;do{if(y.available()<4)H=nt.TERMINATOR;else{const Y=y.readBits(4);H=nt.forBits(Y)}switch(H){case nt.TERMINATOR:break;case nt.FNC1_FIRST_POSITION:case nt.FNC1_SECOND_POSITION:$=!0;break;case nt.STRUCTURED_APPEND:if(y.available()<16)throw new W;T=y.readBits(8),O=y.readBits(8);break;case nt.ECI:const Y=tn.parseECIValue(y);if(U=X.getCharacterSetECIByValue(Y),U===null)throw new W;break;case nt.HANZI:const Q=y.readBits(4),re=y.readBits(H.getCharacterCountBits(u));Q===tn.GB2312_SUBSET&&tn.decodeHanziSegment(y,x,re);break;default:const oe=y.readBits(H.getCharacterCountBits(u));switch(H){case nt.NUMERIC:tn.decodeNumericSegment(y,x,oe);break;case nt.ALPHANUMERIC:tn.decodeAlphanumericSegment(y,x,oe,$);break;case nt.BYTE:tn.decodeByteSegment(y,x,oe,U,_,g);break;case nt.KANJI:tn.decodeKanjiSegment(y,x,oe);break;default:throw new W}break}}while(H!==nt.TERMINATOR)}catch{throw new W}return new Ee(s,x.toString(),_.length===0?null:_,h===null?null:h.toString(),T,O)}static decodeHanziSegment(s,u,h){if(h*13>s.available())throw new W;const g=new Uint8Array(2*h);let y=0;for(;h>0;){const x=s.readBits(13);let _=x/96<<8&4294967295|x%96;_<959?_+=41377:_+=42657,g[y]=_>>8&255,g[y+1]=_&255,y+=2,h--}try{u.append(se.decode(g,ae.GB2312))}catch(x){throw new W(x)}}static decodeKanjiSegment(s,u,h){if(h*13>s.available())throw new W;const g=new Uint8Array(2*h);let y=0;for(;h>0;){const x=s.readBits(13);let _=x/192<<8&4294967295|x%192;_<7936?_+=33088:_+=49472,g[y]=_>>8,g[y+1]=_,y+=2,h--}try{u.append(se.decode(g,ae.SHIFT_JIS))}catch(x){throw new W(x)}}static decodeByteSegment(s,u,h,g,y,x){if(8*h>s.available())throw new W;const _=new Uint8Array(h);for(let O=0;O<h;O++)_[O]=s.readBits(8);let T;g===null?T=ae.guessEncoding(_,x):T=g.getName();try{u.append(se.decode(_,T))}catch(O){throw new W(O)}y.push(_)}static toAlphaNumericChar(s){if(s>=tn.ALPHANUMERIC_CHARS.length)throw new W;return tn.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,u,h,g){const y=u.length();for(;h>1;){if(s.available()<11)throw new W;const x=s.readBits(11);u.append(tn.toAlphaNumericChar(Math.floor(x/45))),u.append(tn.toAlphaNumericChar(x%45)),h-=2}if(h===1){if(s.available()<6)throw new W;u.append(tn.toAlphaNumericChar(s.readBits(6)))}if(g)for(let x=y;x<u.length();x++)u.charAt(x)==="%"&&(x<u.length()-1&&u.charAt(x+1)==="%"?u.deleteCharAt(x+1):u.setCharAt(x,""))}static decodeNumericSegment(s,u,h){for(;h>=3;){if(s.available()<10)throw new W;const g=s.readBits(10);if(g>=1e3)throw new W;u.append(tn.toAlphaNumericChar(Math.floor(g/100))),u.append(tn.toAlphaNumericChar(Math.floor(g/10)%10)),u.append(tn.toAlphaNumericChar(g%10)),h-=3}if(h===2){if(s.available()<7)throw new W;const g=s.readBits(7);if(g>=100)throw new W;u.append(tn.toAlphaNumericChar(Math.floor(g/10))),u.append(tn.toAlphaNumericChar(g%10))}else if(h===1){if(s.available()<4)throw new W;const g=s.readBits(4);if(g>=10)throw new W;u.append(tn.toAlphaNumericChar(g))}}static parseECIValue(s){const u=s.readBits(8);if((u&128)===0)return u&127;if((u&192)===128){const h=s.readBits(8);return(u&63)<<8&4294967295|h}if((u&224)===192){const h=s.readBits(16);return(u&31)<<16&4294967295|h}throw new W}}tn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",tn.GB2312_SUBSET=1;class Ec{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const u=s[0];s[0]=s[2],s[2]=u}}class bc{constructor(){this.rsDecoder=new An(Ke.QR_CODE_FIELD_256)}decodeBooleanArray(s,u){return this.decodeBitMatrix(he.parseFromBooleanArray(s),u)}decodeBitMatrix(s,u){const h=new _f(s);let g=null;try{return this.decodeBitMatrixParser(h,u)}catch(y){g=y}try{h.remask(),h.setMirror(!0),h.readVersion(),h.readFormatInformation(),h.mirror();const y=this.decodeBitMatrixParser(h,u);return y.setOther(new Ec(!0)),y}catch(y){throw g!==null?g:y}}decodeBitMatrixParser(s,u){const h=s.readVersion(),g=s.readFormatInformation().getErrorCorrectionLevel(),y=s.readCodewords(),x=Vl.getDataBlocks(y,h,g);let _=0;for(const U of x)_+=U.getNumDataCodewords();const T=new Uint8Array(_);let O=0;for(const U of x){const $=U.getCodewords(),H=U.getNumDataCodewords();this.correctErrors($,H);for(let Y=0;Y<H;Y++)T[O++]=$[Y]}return tn.decode(T,h,g,u)}correctErrors(s,u){const h=new Int32Array(s);try{this.rsDecoder.decode(h,s.length-u)}catch{throw new C}for(let g=0;g<u;g++)s[g]=h[g]}}class $s extends $e{constructor(s,u,h){super(s,u),this.estimatedModuleSize=h}aboutEquals(s,u,h){if(Math.abs(u-this.getY())<=s&&Math.abs(h-this.getX())<=s){const g=Math.abs(s-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1}combineEstimate(s,u,h){const g=(this.getX()+u)/2,y=(this.getY()+s)/2,x=(this.estimatedModuleSize+h)/2;return new $s(g,y,x)}}class xi{constructor(s,u,h,g,y,x,_){this.image=s,this.startX=u,this.startY=h,this.width=g,this.height=y,this.moduleSize=x,this.resultPointCallback=_,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,u=this.height,h=this.width,g=s+h,y=this.startY+u/2,x=new Int32Array(3),_=this.image;for(let T=0;T<u;T++){const O=y+((T&1)===0?Math.floor((T+1)/2):-Math.floor((T+1)/2));x[0]=0,x[1]=0,x[2]=0;let U=s;for(;U<g&&!_.get(U,O);)U++;let $=0;for(;U<g;){if(_.get(U,O))if($===1)x[1]++;else if($===2){if(this.foundPatternCross(x)){const H=this.handlePossibleCenter(x,O,U);if(H!==null)return H}x[0]=x[2],x[1]=1,x[2]=0,$=1}else x[++$]++;else $===1&&$++,x[$]++;U++}if(this.foundPatternCross(x)){const H=this.handlePossibleCenter(x,O,g);if(H!==null)return H}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ne}static centerFromEnd(s,u){return u-s[2]-s[1]/2}foundPatternCross(s){const u=this.moduleSize,h=u/2;for(let g=0;g<3;g++)if(Math.abs(u-s[g])>=h)return!1;return!0}crossCheckVertical(s,u,h,g){const y=this.image,x=y.getHeight(),_=this.crossCheckStateCount;_[0]=0,_[1]=0,_[2]=0;let T=s;for(;T>=0&&y.get(u,T)&&_[1]<=h;)_[1]++,T--;if(T<0||_[1]>h)return NaN;for(;T>=0&&!y.get(u,T)&&_[0]<=h;)_[0]++,T--;if(_[0]>h)return NaN;for(T=s+1;T<x&&y.get(u,T)&&_[1]<=h;)_[1]++,T++;if(T===x||_[1]>h)return NaN;for(;T<x&&!y.get(u,T)&&_[2]<=h;)_[2]++,T++;if(_[2]>h)return NaN;const O=_[0]+_[1]+_[2];return 5*Math.abs(O-g)>=2*g?NaN:this.foundPatternCross(_)?xi.centerFromEnd(_,T):NaN}handlePossibleCenter(s,u,h){const g=s[0]+s[1]+s[2],y=xi.centerFromEnd(s,h),x=this.crossCheckVertical(u,y,2*s[1],g);if(!isNaN(x)){const _=(s[0]+s[1]+s[2])/3;for(const O of this.possibleCenters)if(O.aboutEquals(_,x,y))return O.combineEstimate(x,y,_);const T=new $s(y,x,_);this.possibleCenters.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return null}}class Fi extends $e{constructor(s,u,h,g){super(s,u),this.estimatedModuleSize=h,this.count=g,g===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,u,h){if(Math.abs(u-this.getY())<=s&&Math.abs(h-this.getX())<=s){const g=Math.abs(s-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1}combineEstimate(s,u,h){const g=this.count+1,y=(this.count*this.getX()+u)/g,x=(this.count*this.getY()+s)/g,_=(this.count*this.estimatedModuleSize+h)/g;return new Fi(y,x,_,g)}}class Oo{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class hn{constructor(s,u){this.image=s,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=u}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const u=s!=null&&s.get(q.TRY_HARDER)!==void 0,h=s!=null&&s.get(q.PURE_BARCODE)!==void 0,g=this.image,y=g.getHeight(),x=g.getWidth();let _=Math.floor(3*y/(4*hn.MAX_MODULES));(_<hn.MIN_SKIP||u)&&(_=hn.MIN_SKIP);let T=!1;const O=new Int32Array(5);for(let $=_-1;$<y&&!T;$+=_){O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0;let H=0;for(let Y=0;Y<x;Y++)if(g.get(Y,$))(H&1)===1&&H++,O[H]++;else if((H&1)===0)if(H===4)if(hn.foundPatternCross(O)){if(this.handlePossibleCenter(O,$,Y,h)===!0)if(_=2,this.hasSkipped===!0)T=this.haveMultiplyConfirmedCenters();else{const re=this.findRowSkip();re>O[2]&&($+=re-O[2]-_,Y=x-1)}else{O[0]=O[2],O[1]=O[3],O[2]=O[4],O[3]=1,O[4]=0,H=3;continue}H=0,O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0}else O[0]=O[2],O[1]=O[3],O[2]=O[4],O[3]=1,O[4]=0,H=3;else O[++H]++;else O[H]++;hn.foundPatternCross(O)&&this.handlePossibleCenter(O,$,x,h)===!0&&(_=O[0],this.hasSkipped&&(T=this.haveMultiplyConfirmedCenters()))}const U=this.selectBestPatterns();return $e.orderBestPatterns(U),new Oo(U)}static centerFromEnd(s,u){return u-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let u=0;for(let y=0;y<5;y++){const x=s[y];if(x===0)return!1;u+=x}if(u<7)return!1;const h=u/7,g=h/2;return Math.abs(h-s[0])<g&&Math.abs(h-s[1])<g&&Math.abs(3*h-s[2])<3*g&&Math.abs(h-s[3])<g&&Math.abs(h-s[4])<g}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,u,h,g){const y=this.getCrossCheckStateCount();let x=0;const _=this.image;for(;s>=x&&u>=x&&_.get(u-x,s-x);)y[2]++,x++;if(s<x||u<x)return!1;for(;s>=x&&u>=x&&!_.get(u-x,s-x)&&y[1]<=h;)y[1]++,x++;if(s<x||u<x||y[1]>h)return!1;for(;s>=x&&u>=x&&_.get(u-x,s-x)&&y[0]<=h;)y[0]++,x++;if(y[0]>h)return!1;const T=_.getHeight(),O=_.getWidth();for(x=1;s+x<T&&u+x<O&&_.get(u+x,s+x);)y[2]++,x++;if(s+x>=T||u+x>=O)return!1;for(;s+x<T&&u+x<O&&!_.get(u+x,s+x)&&y[3]<h;)y[3]++,x++;if(s+x>=T||u+x>=O||y[3]>=h)return!1;for(;s+x<T&&u+x<O&&_.get(u+x,s+x)&&y[4]<h;)y[4]++,x++;if(y[4]>=h)return!1;const U=y[0]+y[1]+y[2]+y[3]+y[4];return Math.abs(U-g)<2*g&&hn.foundPatternCross(y)}crossCheckVertical(s,u,h,g){const y=this.image,x=y.getHeight(),_=this.getCrossCheckStateCount();let T=s;for(;T>=0&&y.get(u,T);)_[2]++,T--;if(T<0)return NaN;for(;T>=0&&!y.get(u,T)&&_[1]<=h;)_[1]++,T--;if(T<0||_[1]>h)return NaN;for(;T>=0&&y.get(u,T)&&_[0]<=h;)_[0]++,T--;if(_[0]>h)return NaN;for(T=s+1;T<x&&y.get(u,T);)_[2]++,T++;if(T===x)return NaN;for(;T<x&&!y.get(u,T)&&_[3]<h;)_[3]++,T++;if(T===x||_[3]>=h)return NaN;for(;T<x&&y.get(u,T)&&_[4]<h;)_[4]++,T++;if(_[4]>=h)return NaN;const O=_[0]+_[1]+_[2]+_[3]+_[4];return 5*Math.abs(O-g)>=2*g?NaN:hn.foundPatternCross(_)?hn.centerFromEnd(_,T):NaN}crossCheckHorizontal(s,u,h,g){const y=this.image,x=y.getWidth(),_=this.getCrossCheckStateCount();let T=s;for(;T>=0&&y.get(T,u);)_[2]++,T--;if(T<0)return NaN;for(;T>=0&&!y.get(T,u)&&_[1]<=h;)_[1]++,T--;if(T<0||_[1]>h)return NaN;for(;T>=0&&y.get(T,u)&&_[0]<=h;)_[0]++,T--;if(_[0]>h)return NaN;for(T=s+1;T<x&&y.get(T,u);)_[2]++,T++;if(T===x)return NaN;for(;T<x&&!y.get(T,u)&&_[3]<h;)_[3]++,T++;if(T===x||_[3]>=h)return NaN;for(;T<x&&y.get(T,u)&&_[4]<h;)_[4]++,T++;if(_[4]>=h)return NaN;const O=_[0]+_[1]+_[2]+_[3]+_[4];return 5*Math.abs(O-g)>=g?NaN:hn.foundPatternCross(_)?hn.centerFromEnd(_,T):NaN}handlePossibleCenter(s,u,h,g){const y=s[0]+s[1]+s[2]+s[3]+s[4];let x=hn.centerFromEnd(s,h),_=this.crossCheckVertical(u,Math.floor(x),s[2],y);if(!isNaN(_)&&(x=this.crossCheckHorizontal(Math.floor(x),Math.floor(_),s[2],y),!isNaN(x)&&(!g||this.crossCheckDiagonal(Math.floor(_),Math.floor(x),s[2],y)))){const T=y/7;let O=!1;const U=this.possibleCenters;for(let $=0,H=U.length;$<H;$++){const Y=U[$];if(Y.aboutEquals(T,_,x)){U[$]=Y.combineEstimate(_,x,T),O=!0;break}}if(!O){const $=new Fi(x,_,T);U.push($),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint($)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let u=null;for(const h of this.possibleCenters)if(h.getCount()>=hn.CENTER_QUORUM)if(u==null)u=h;else return this.hasSkipped=!0,Math.floor((Math.abs(u.getX()-h.getX())-Math.abs(u.getY()-h.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,u=0;const h=this.possibleCenters.length;for(const x of this.possibleCenters)x.getCount()>=hn.CENTER_QUORUM&&(s++,u+=x.getEstimatedModuleSize());if(s<3)return!1;const g=u/h;let y=0;for(const x of this.possibleCenters)y+=Math.abs(x.getEstimatedModuleSize()-g);return y<=.05*u}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new ne;const u=this.possibleCenters;let h;if(s>3){let g=0,y=0;for(const T of this.possibleCenters){const O=T.getEstimatedModuleSize();g+=O,y+=O*O}h=g/s;let x=Math.sqrt(y/s-h*h);u.sort((T,O)=>{const U=Math.abs(O.getEstimatedModuleSize()-h),$=Math.abs(T.getEstimatedModuleSize()-h);return U<$?-1:U>$?1:0});const _=Math.max(.2*h,x);for(let T=0;T<u.length&&u.length>3;T++){const O=u[T];Math.abs(O.getEstimatedModuleSize()-h)>_&&(u.splice(T,1),T--)}}if(u.length>3){let g=0;for(const y of u)g+=y.getEstimatedModuleSize();h=g/u.length,u.sort((y,x)=>{if(x.getCount()===y.getCount()){const _=Math.abs(x.getEstimatedModuleSize()-h),T=Math.abs(y.getEstimatedModuleSize()-h);return _<T?1:_>T?-1:0}else return x.getCount()-y.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]}}hn.CENTER_QUORUM=2,hn.MIN_SKIP=3,hn.MAX_MODULES=57;class so{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(q.NEED_RESULT_POINT_CALLBACK);const h=new hn(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(h)}processFinderPatternInfo(s){const u=s.getTopLeft(),h=s.getTopRight(),g=s.getBottomLeft(),y=this.calculateModuleSize(u,h,g);if(y<1)throw new ne("No pattern found in proccess finder.");const x=so.computeDimension(u,h,g,y),_=tt.getProvisionalVersionForDimension(x),T=_.getDimensionForVersion()-7;let O=null;if(_.getAlignmentPatternCenters().length>0){const Y=h.getX()-u.getX()+g.getX(),Q=h.getY()-u.getY()+g.getY(),re=1-3/T,oe=Math.floor(u.getX()+re*(Y-u.getX())),me=Math.floor(u.getY()+re*(Q-u.getY()));for(let Oe=4;Oe<=16;Oe<<=1)try{O=this.findAlignmentInRegion(y,oe,me,Oe);break}catch(ke){if(!(ke instanceof ne))throw ke}}const U=so.createTransform(u,h,g,O,x),$=so.sampleGrid(this.image,U,x);let H;return O===null?H=[g,u,h]:H=[g,u,h,O],new Bs($,H)}static createTransform(s,u,h,g,y){const x=y-3.5;let _,T,O,U;return g!==null?(_=g.getX(),T=g.getY(),O=x-3,U=O):(_=u.getX()-s.getX()+h.getX(),T=u.getY()-s.getY()+h.getY(),O=x,U=x),Zr.quadrilateralToQuadrilateral(3.5,3.5,x,3.5,O,U,3.5,x,s.getX(),s.getY(),u.getX(),u.getY(),_,T,h.getX(),h.getY())}static sampleGrid(s,u,h){return pi.getInstance().sampleGridWithTransform(s,h,h,u)}static computeDimension(s,u,h,g){const y=_t.round($e.distance(s,u)/g),x=_t.round($e.distance(s,h)/g);let _=Math.floor((y+x)/2)+7;switch(_&3){case 0:_++;break;case 2:_--;break;case 3:throw new ne("Dimensions could be not found.")}return _}calculateModuleSize(s,u,h){return(this.calculateModuleSizeOneWay(s,u)+this.calculateModuleSizeOneWay(s,h))/2}calculateModuleSizeOneWay(s,u){const h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(u.getX()),Math.floor(u.getY())),g=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(h)?g/7:isNaN(g)?h/7:(h+g)/14}sizeOfBlackWhiteBlackRunBothWays(s,u,h,g){let y=this.sizeOfBlackWhiteBlackRun(s,u,h,g),x=1,_=s-(h-s);_<0?(x=s/(s-_),_=0):_>=this.image.getWidth()&&(x=(this.image.getWidth()-1-s)/(_-s),_=this.image.getWidth()-1);let T=Math.floor(u-(g-u)*x);return x=1,T<0?(x=u/(u-T),T=0):T>=this.image.getHeight()&&(x=(this.image.getHeight()-1-u)/(T-u),T=this.image.getHeight()-1),_=Math.floor(s+(_-s)*x),y+=this.sizeOfBlackWhiteBlackRun(s,u,_,T),y-1}sizeOfBlackWhiteBlackRun(s,u,h,g){const y=Math.abs(g-u)>Math.abs(h-s);if(y){let Y=s;s=u,u=Y,Y=h,h=g,g=Y}const x=Math.abs(h-s),_=Math.abs(g-u);let T=-x/2;const O=s<h?1:-1,U=u<g?1:-1;let $=0;const H=h+O;for(let Y=s,Q=u;Y!==H;Y+=O){const re=y?Q:Y,oe=y?Y:Q;if($===1===this.image.get(re,oe)){if($===2)return _t.distance(Y,Q,s,u);$++}if(T+=_,T>0){if(Q===g)break;Q+=U,T-=x}}return $===2?_t.distance(h+O,g,s,u):NaN}findAlignmentInRegion(s,u,h,g){const y=Math.floor(g*s),x=Math.max(0,u-y),_=Math.min(this.image.getWidth()-1,u+y);if(_-x<s*3)throw new ne("Alignment top exceeds estimated module size.");const T=Math.max(0,h-y),O=Math.min(this.image.getHeight()-1,h+y);if(O-T<s*3)throw new ne("Alignment bottom exceeds estimated module size.");return new xi(this.image,x,T,_-x,O-T,s,this.resultPointCallback).find()}}class Er{constructor(){this.decoder=new bc}getDecoder(){return this.decoder}decode(s,u){let h,g;if(u!=null&&u.get(q.PURE_BARCODE)!==void 0){const T=Er.extractPureBits(s.getBlackMatrix());h=this.decoder.decodeBitMatrix(T,u),g=Er.NO_POINTS}else{const T=new so(s.getBlackMatrix()).detect(u);h=this.decoder.decodeBitMatrix(T.getBits(),u),g=T.getPoints()}h.getOther()instanceof Ec&&h.getOther().applyMirroredCorrection(g);const y=new Le(h.getText(),h.getRawBytes(),void 0,g,Ne.QR_CODE,void 0),x=h.getByteSegments();x!==null&&y.putMetadata(rt.BYTE_SEGMENTS,x);const _=h.getECLevel();return _!==null&&y.putMetadata(rt.ERROR_CORRECTION_LEVEL,_),h.hasStructuredAppend()&&(y.putMetadata(rt.STRUCTURED_APPEND_SEQUENCE,h.getStructuredAppendSequenceNumber()),y.putMetadata(rt.STRUCTURED_APPEND_PARITY,h.getStructuredAppendParity())),y}reset(){}static extractPureBits(s){const u=s.getTopLeftOnBit(),h=s.getBottomRightOnBit();if(u===null||h===null)throw new ne;const g=this.moduleSize(u,s);let y=u[1],x=h[1],_=u[0],T=h[0];if(_>=T||y>=x)throw new ne;if(x-y!==T-_&&(T=_+(x-y),T>=s.getWidth()))throw new ne;const O=Math.round((T-_+1)/g),U=Math.round((x-y+1)/g);if(O<=0||U<=0)throw new ne;if(U!==O)throw new ne;const $=Math.floor(g/2);y+=$,_+=$;const H=_+Math.floor((O-1)*g)-T;if(H>0){if(H>$)throw new ne;_-=H}const Y=y+Math.floor((U-1)*g)-x;if(Y>0){if(Y>$)throw new ne;y-=Y}const Q=new he(O,U);for(let re=0;re<U;re++){const oe=y+Math.floor(re*g);for(let me=0;me<O;me++)s.get(_+Math.floor(me*g),oe)&&Q.set(me,re)}return Q}static moduleSize(s,u){const h=u.getHeight(),g=u.getWidth();let y=s[0],x=s[1],_=!0,T=0;for(;y<g&&x<h;){if(_!==u.get(y,x)){if(++T===5)break;_=!_}y++,x++}if(y===g||x===h)throw new ne;return(y-s[0])/7}}Er.NO_POINTS=new Array;class at{PDF417Common(){}static getBitCountSum(s){return _t.sum(s)}static toIntArray(s){if(s==null||!s.length)return at.EMPTY_INT_ARRAY;const u=new Int32Array(s.length);let h=0;for(const g of s)u[h++]=g;return u}static getCodeword(s){const u=F.binarySearch(at.SYMBOL_TABLE,s&262143);return u<0?-1:(at.CODEWORD_TABLE[u]-1)%at.NUMBER_OF_CODEWORDS}}at.NUMBER_OF_CODEWORDS=929,at.MAX_CODEWORDS_IN_BARCODE=at.NUMBER_OF_CODEWORDS-1,at.MIN_ROWS_IN_BARCODE=3,at.MAX_ROWS_IN_BARCODE=90,at.MODULES_IN_CODEWORD=17,at.MODULES_IN_STOP_PATTERN=18,at.BARS_IN_MODULE=8,at.EMPTY_INT_ARRAY=new Int32Array([]),at.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),at.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Sf{constructor(s,u){this.bits=s,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class ht{static detectMultiple(s,u,h){let g=s.getBlackMatrix(),y=ht.detect(h,g);return y.length||(g=g.clone(),g.rotate180(),y=ht.detect(h,g)),new Sf(g,y)}static detect(s,u){const h=new Array;let g=0,y=0,x=!1;for(;g<u.getHeight();){const _=ht.findVertices(u,g,y);if(_[0]==null&&_[3]==null){if(!x)break;x=!1,y=0;for(const T of h)T[1]!=null&&(g=Math.trunc(Math.max(g,T[1].getY()))),T[3]!=null&&(g=Math.max(g,Math.trunc(T[3].getY())));g+=ht.ROW_STEP;continue}if(x=!0,h.push(_),!s)break;_[2]!=null?(y=Math.trunc(_[2].getX()),g=Math.trunc(_[2].getY())):(y=Math.trunc(_[4].getX()),g=Math.trunc(_[4].getY()))}return h}static findVertices(s,u,h){const g=s.getHeight(),y=s.getWidth(),x=new Array(8);return ht.copyToResult(x,ht.findRowsWithPattern(s,g,y,u,h,ht.START_PATTERN),ht.INDEXES_START_PATTERN),x[4]!=null&&(h=Math.trunc(x[4].getX()),u=Math.trunc(x[4].getY())),ht.copyToResult(x,ht.findRowsWithPattern(s,g,y,u,h,ht.STOP_PATTERN),ht.INDEXES_STOP_PATTERN),x}static copyToResult(s,u,h){for(let g=0;g<h.length;g++)s[h[g]]=u[g]}static findRowsWithPattern(s,u,h,g,y,x){const _=new Array(4);let T=!1;const O=new Int32Array(x.length);for(;g<u;g+=ht.ROW_STEP){let $=ht.findGuardPattern(s,y,g,h,!1,x,O);if($!=null){for(;g>0;){const H=ht.findGuardPattern(s,y,--g,h,!1,x,O);if(H!=null)$=H;else{g++;break}}_[0]=new $e($[0],g),_[1]=new $e($[1],g),T=!0;break}}let U=g+1;if(T){let $=0,H=Int32Array.from([Math.trunc(_[0].getX()),Math.trunc(_[1].getX())]);for(;U<u;U++){const Y=ht.findGuardPattern(s,H[0],U,h,!1,x,O);if(Y!=null&&Math.abs(H[0]-Y[0])<ht.MAX_PATTERN_DRIFT&&Math.abs(H[1]-Y[1])<ht.MAX_PATTERN_DRIFT)H=Y,$=0;else{if($>ht.SKIPPED_ROW_COUNT_MAX)break;$++}}U-=$+1,_[2]=new $e(H[0],U),_[3]=new $e(H[1],U)}return U-g<ht.BARCODE_MIN_HEIGHT&&F.fill(_,null),_}static findGuardPattern(s,u,h,g,y,x,_){F.fillWithin(_,0,_.length,0);let T=u,O=0;for(;s.get(T,h)&&T>0&&O++<ht.MAX_PIXEL_DRIFT;)T--;let U=T,$=0,H=x.length;for(let Y=y;U<g;U++)if(s.get(U,h)!==Y)_[$]++;else{if($===H-1){if(ht.patternMatchVariance(_,x,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return new Int32Array([T,U]);T+=_[0]+_[1],P.arraycopy(_,2,_,0,$-1),_[$-1]=0,_[$]=0,$--}else $++;_[$]=1,Y=!Y}return $===H-1&&ht.patternMatchVariance(_,x,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE?new Int32Array([T,U-1]):null}static patternMatchVariance(s,u,h){let g=s.length,y=0,x=0;for(let O=0;O<g;O++)y+=s[O],x+=u[O];if(y<x)return 1/0;let _=y/x;h*=_;let T=0;for(let O=0;O<g;O++){let U=s[O],$=u[O]*_,H=U>$?U-$:$-U;if(H>h)return 1/0;T+=H}return T/y}}ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ht.MAX_AVG_VARIANCE=.42,ht.MAX_INDIVIDUAL_VARIANCE=.8,ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ht.MAX_PIXEL_DRIFT=3,ht.MAX_PATTERN_DRIFT=5,ht.SKIPPED_ROW_COUNT_MAX=25,ht.ROW_STEP=5,ht.BARCODE_MIN_HEIGHT=10;class Zn{constructor(s,u){if(u.length===0)throw new v;this.field=s;let h=u.length;if(h>1&&u[0]===0){let g=1;for(;g<h&&u[g]===0;)g++;g===h?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(h-g),P.arraycopy(u,g,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let g=0;for(let y of this.coefficients)g=this.field.add(g,y);return g}let u=this.coefficients[0],h=this.coefficients.length;for(let g=1;g<h;g++)u=this.field.add(this.field.multiply(s,u),this.coefficients[g]);return u}add(s){if(!this.field.equals(s.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let u=this.coefficients,h=s.coefficients;if(u.length>h.length){let x=u;u=h,h=x}let g=new Int32Array(h.length),y=h.length-u.length;P.arraycopy(h,0,g,0,y);for(let x=y;x<h.length;x++)g[x]=this.field.add(u[x-y],h[x]);return new Zn(this.field,g)}subtract(s){if(!this.field.equals(s.field))throw new v("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Zn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Zn(this.field,new Int32Array([0]));let u=this.coefficients,h=u.length,g=s.coefficients,y=g.length,x=new Int32Array(h+y-1);for(let _=0;_<h;_++){let T=u[_];for(let O=0;O<y;O++)x[_+O]=this.field.add(x[_+O],this.field.multiply(T,g[O]))}return new Zn(this.field,x)}negative(){let s=this.coefficients.length,u=new Int32Array(s);for(let h=0;h<s;h++)u[h]=this.field.subtract(0,this.coefficients[h]);return new Zn(this.field,u)}multiplyScalar(s){if(s===0)return new Zn(this.field,new Int32Array([0]));if(s===1)return this;let u=this.coefficients.length,h=new Int32Array(u);for(let g=0;g<u;g++)h[g]=this.field.multiply(this.coefficients[g],s);return new Zn(this.field,h)}multiplyByMonomial(s,u){if(s<0)throw new v;if(u===0)return new Zn(this.field,new Int32Array([0]));let h=this.coefficients.length,g=new Int32Array(h+s);for(let y=0;y<h;y++)g[y]=this.field.multiply(this.coefficients[y],u);return new Zn(this.field,g)}toString(){let s=new be;for(let u=this.getDegree();u>=0;u--){let h=this.getCoefficient(u);h!==0&&(h<0?(s.append(" - "),h=-h):s.length()>0&&s.append(" + "),(u===0||h!==1)&&s.append(h),u!==0&&(u===1?s.append("x"):(s.append("x^"),s.append(u))))}return s.toString()}}class Cf{add(s,u){return(s+u)%this.modulus}subtract(s,u){return(this.modulus+s-u)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new v;return this.logTable[s]}inverse(s){if(s===0)throw new _e;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,u){return s===0||u===0?0:this.expTable[(this.logTable[s]+this.logTable[u])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class zs extends Cf{constructor(s,u){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let h=1;for(let g=0;g<s;g++)this.expTable[g]=h,h=h*u%s;for(let g=0;g<s-1;g++)this.logTable[this.expTable[g]]=g;this.zero=new Zn(this,new Int32Array([0])),this.one=new Zn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,u){if(s<0)throw new v;if(u===0)return this.zero;let h=new Int32Array(s+1);return h[0]=u,new Zn(this,h)}}zs.PDF417_GF=new zs(at.NUMBER_OF_CODEWORDS,3);class _c{constructor(){this.field=zs.PDF417_GF}decode(s,u,h){let g=new Zn(this.field,s),y=new Int32Array(u),x=!1;for(let Q=u;Q>0;Q--){let re=g.evaluateAt(this.field.exp(Q));y[u-Q]=re,re!==0&&(x=!0)}if(!x)return 0;let _=this.field.getOne();if(h!=null)for(const Q of h){let re=this.field.exp(s.length-1-Q),oe=new Zn(this.field,new Int32Array([this.field.subtract(0,re),1]));_=_.multiply(oe)}let T=new Zn(this.field,y),O=this.runEuclideanAlgorithm(this.field.buildMonomial(u,1),T,u),U=O[0],$=O[1],H=this.findErrorLocations(U),Y=this.findErrorMagnitudes($,U,H);for(let Q=0;Q<H.length;Q++){let re=s.length-1-this.field.log(H[Q]);if(re<0)throw C.getChecksumInstance();s[re]=this.field.subtract(s[re],Y[Q])}return H.length}runEuclideanAlgorithm(s,u,h){if(s.getDegree()<u.getDegree()){let H=s;s=u,u=H}let g=s,y=u,x=this.field.getZero(),_=this.field.getOne();for(;y.getDegree()>=Math.round(h/2);){let H=g,Y=x;if(g=y,x=_,g.isZero())throw C.getChecksumInstance();y=H;let Q=this.field.getZero(),re=g.getCoefficient(g.getDegree()),oe=this.field.inverse(re);for(;y.getDegree()>=g.getDegree()&&!y.isZero();){let me=y.getDegree()-g.getDegree(),Oe=this.field.multiply(y.getCoefficient(y.getDegree()),oe);Q=Q.add(this.field.buildMonomial(me,Oe)),y=y.subtract(g.multiplyByMonomial(me,Oe))}_=Q.multiply(x).subtract(Y).negative()}let T=_.getCoefficient(0);if(T===0)throw C.getChecksumInstance();let O=this.field.inverse(T),U=_.multiply(O),$=y.multiply(O);return[U,$]}findErrorLocations(s){let u=s.getDegree(),h=new Int32Array(u),g=0;for(let y=1;y<this.field.getSize()&&g<u;y++)s.evaluateAt(y)===0&&(h[g]=this.field.inverse(y),g++);if(g!==u)throw C.getChecksumInstance();return h}findErrorMagnitudes(s,u,h){let g=u.getDegree(),y=new Int32Array(g);for(let O=1;O<=g;O++)y[g-O]=this.field.multiply(O,u.getCoefficient(O));let x=new Zn(this.field,y),_=h.length,T=new Int32Array(_);for(let O=0;O<_;O++){let U=this.field.inverse(h[O]),$=this.field.subtract(0,s.evaluateAt(U)),H=this.field.inverse(x.evaluateAt(U));T[O]=this.field.multiply($,H)}return T}}class Yo{constructor(s,u,h,g,y){s instanceof Yo?this.constructor_2(s):this.constructor_1(s,u,h,g,y)}constructor_1(s,u,h,g,y){const x=u==null||h==null,_=g==null||y==null;if(x&&_)throw new ne;x?(u=new $e(0,g.getY()),h=new $e(0,y.getY())):_&&(g=new $e(s.getWidth()-1,u.getY()),y=new $e(s.getWidth()-1,h.getY())),this.image=s,this.topLeft=u,this.bottomLeft=h,this.topRight=g,this.bottomRight=y,this.minX=Math.trunc(Math.min(u.getX(),h.getX())),this.maxX=Math.trunc(Math.max(g.getX(),y.getX())),this.minY=Math.trunc(Math.min(u.getY(),g.getY())),this.maxY=Math.trunc(Math.max(h.getY(),y.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,u){return s==null?u:u==null?s:new Yo(s.image,s.topLeft,s.bottomLeft,u.topRight,u.bottomRight)}addMissingRows(s,u,h){let g=this.topLeft,y=this.bottomLeft,x=this.topRight,_=this.bottomRight;if(s>0){let T=h?this.topLeft:this.topRight,O=Math.trunc(T.getY()-s);O<0&&(O=0);let U=new $e(T.getX(),O);h?g=U:x=U}if(u>0){let T=h?this.bottomLeft:this.bottomRight,O=Math.trunc(T.getY()+u);O>=this.image.getHeight()&&(O=this.image.getHeight()-1);let U=new $e(T.getX(),O);h?y=U:_=U}return new Yo(this.image,g,y,x,_)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Oa{constructor(s,u,h,g){this.columnCount=s,this.errorCorrectionLevel=g,this.rowCountUpperPart=u,this.rowCountLowerPart=h,this.rowCount=u+h}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ao{constructor(){this.buffer=""}static form(s,u){let h=-1;function g(x,_,T,O,U,$){if(x==="%%")return"%";if(u[++h]===void 0)return;x=O?parseInt(O.substr(1)):void 0;let H=U?parseInt(U.substr(1)):void 0,Y;switch($){case"s":Y=u[h];break;case"c":Y=u[h][0];break;case"f":Y=parseFloat(u[h]).toFixed(x);break;case"p":Y=parseFloat(u[h]).toPrecision(x);break;case"e":Y=parseFloat(u[h]).toExponential(x);break;case"x":Y=parseInt(u[h]).toString(H||16);break;case"d":Y=parseFloat(parseInt(u[h],H||10).toPrecision(x)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(H);let Q=parseInt(T),re=T&&T[0]+""=="0"?"0":" ";for(;Y.length<Q;)Y=_!==void 0?Y+re:re+Y;return Y}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(y,g)}format(s,...u){this.buffer+=ao.form(s,u)}toString(){return this.buffer}}class Ui{constructor(s){this.boundingBox=new Yo(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let u=this.getCodeword(s);if(u!=null)return u;for(let h=1;h<Ui.MAX_NEARBY_DISTANCE;h++){let g=this.imageRowToCodewordIndex(s)-h;if(g>=0&&(u=this.codewords[g],u!=null)||(g=this.imageRowToCodewordIndex(s)+h,g<this.codewords.length&&(u=this.codewords[g],u!=null)))return u}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,u){this.codewords[this.imageRowToCodewordIndex(s)]=u}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new ao;let u=0;for(const h of this.codewords){if(h==null){s.format("%3d:    |   %n",u++);continue}s.format("%3d: %3d|%3d%n",u++,h.getRowNumber(),h.getValue())}return s.toString()}}Ui.MAX_NEARBY_DISTANCE=5;class ko{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let u=this.values.get(s);u==null&&(u=0),u++,this.values.set(s,u)}getValue(){let s=-1,u=new Array;for(const[h,g]of this.values.entries()){const y={getKey:()=>h,getValue:()=>g};y.getValue()>s?(s=y.getValue(),u=[],u.push(y.getKey())):y.getValue()===s&&u.push(y.getKey())}return at.toIntArray(u)}getConfidence(s){return this.values.get(s)}}class Af extends Ui{constructor(s,u){super(s),this._isLeft=u}setRowNumbers(){for(let s of this.getCodewords())s?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let u=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(u,s);let h=this.getBoundingBox(),g=this._isLeft?h.getTopLeft():h.getTopRight(),y=this._isLeft?h.getBottomLeft():h.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(g.getY())),_=this.imageRowToCodewordIndex(Math.trunc(y.getY())),T=-1,O=1,U=0;for(let $=x;$<_;$++){if(u[$]==null)continue;let H=u[$],Y=H.getRowNumber()-T;if(Y===0)U++;else if(Y===1)O=Math.max(O,U),U=1,T=H.getRowNumber();else if(Y<0||H.getRowNumber()>=s.getRowCount()||Y>$)u[$]=null;else{let Q;O>2?Q=(O-2)*Y:Q=Y;let re=Q>=$;for(let oe=1;oe<=Q&&!re;oe++)re=u[$-oe]!=null;re?u[$]=null:(T=H.getRowNumber(),U=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let u=new Int32Array(s.getRowCount());for(let h of this.getCodewords())if(h!=null){let g=h.getRowNumber();if(g>=u.length)continue;u[g]++}return u}adjustIncompleteIndicatorColumnRowNumbers(s){let u=this.getBoundingBox(),h=this._isLeft?u.getTopLeft():u.getTopRight(),g=this._isLeft?u.getBottomLeft():u.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.imageRowToCodewordIndex(Math.trunc(g.getY())),_=this.getCodewords(),T=-1;for(let O=y;O<x;O++){if(_[O]==null)continue;let U=_[O];U.setRowNumberAsRowIndicatorColumn();let $=U.getRowNumber()-T;$===0||($===1?T=U.getRowNumber():U.getRowNumber()>=s.getRowCount()?_[O]=null:T=U.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),u=new ko,h=new ko,g=new ko,y=new ko;for(let _ of s){if(_==null)continue;_.setRowNumberAsRowIndicatorColumn();let T=_.getValue()%30,O=_.getRowNumber();switch(this._isLeft||(O+=2),O%3){case 0:h.setValue(T*3+1);break;case 1:y.setValue(T/3),g.setValue(T%3);break;case 2:u.setValue(T+1);break}}if(u.getValue().length===0||h.getValue().length===0||g.getValue().length===0||y.getValue().length===0||u.getValue()[0]<1||h.getValue()[0]+g.getValue()[0]<at.MIN_ROWS_IN_BARCODE||h.getValue()[0]+g.getValue()[0]>at.MAX_ROWS_IN_BARCODE)return null;let x=new Oa(u.getValue()[0],h.getValue()[0],g.getValue()[0],y.getValue()[0]);return this.removeIncorrectCodewords(s,x),x}removeIncorrectCodewords(s,u){for(let h=0;h<s.length;h++){let g=s[h];if(s[h]==null)continue;let y=g.getValue()%30,x=g.getRowNumber();if(x>u.getRowCount()){s[h]=null;continue}switch(this._isLeft||(x+=2),x%3){case 0:y*3+1!==u.getRowCountUpperPart()&&(s[h]=null);break;case 1:(Math.trunc(y/3)!==u.getErrorCorrectionLevel()||y%3!==u.getRowCountLowerPart())&&(s[h]=null);break;case 2:y+1!==u.getColumnCount()&&(s[h]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ka{constructor(s,u){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=u,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=at.MAX_CODEWORDS_IN_BARCODE,u;do u=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<u);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let u=1;u<this.barcodeColumnCount+1;u++){let h=this.detectionResultColumns[u].getCodewords();for(let g=0;g<h.length;g++)h[g]!=null&&(h[g].hasValidRowNumber()||this.adjustRowNumbers(u,g,h))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<s.length;h++)if(s[h]!=null&&u[h]!=null&&s[h].getRowNumber()===u[h].getRowNumber())for(let g=1;g<=this.barcodeColumnCount;g++){let y=this.detectionResultColumns[g].getCodewords()[h];y!=null&&(y.setRowNumber(s[h].getRowNumber()),y.hasValidRowNumber()||(this.detectionResultColumns[g].getCodewords()[h]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<u.length;h++){if(u[h]==null)continue;let g=u[h].getRowNumber(),y=0;for(let x=this.barcodeColumnCount+1;x>0&&y<this.ADJUST_ROW_NUMBER_SKIP;x--){let _=this.detectionResultColumns[x].getCodewords()[h];_!=null&&(y=ka.adjustRowNumberIfValid(g,y,_),_.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,u=this.detectionResultColumns[0].getCodewords();for(let h=0;h<u.length;h++){if(u[h]==null)continue;let g=u[h].getRowNumber(),y=0;for(let x=1;x<this.barcodeColumnCount+1&&y<this.ADJUST_ROW_NUMBER_SKIP;x++){let _=this.detectionResultColumns[x].getCodewords()[h];_!=null&&(y=ka.adjustRowNumberIfValid(g,y,_),_.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,u,h){return h==null||h.hasValidRowNumber()||(h.isValidRowNumber(s)?(h.setRowNumber(s),u=0):++u),u}adjustRowNumbers(s,u,h){if(!this.detectionResultColumns[s-1])return;let g=h[u],y=this.detectionResultColumns[s-1].getCodewords(),x=y;this.detectionResultColumns[s+1]!=null&&(x=this.detectionResultColumns[s+1].getCodewords());let _=new Array(14);_[2]=y[u],_[3]=x[u],u>0&&(_[0]=h[u-1],_[4]=y[u-1],_[5]=x[u-1]),u>1&&(_[8]=h[u-2],_[10]=y[u-2],_[11]=x[u-2]),u<h.length-1&&(_[1]=h[u+1],_[6]=y[u+1],_[7]=x[u+1]),u<h.length-2&&(_[9]=h[u+2],_[12]=y[u+2],_[13]=x[u+2]);for(let T of _)if(ka.adjustRowNumber(g,T))return}static adjustRowNumber(s,u){return u==null?!1:u.hasValidRowNumber()&&u.getBucket()===s.getBucket()?(s.setRowNumber(u.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,u){this.detectionResultColumns[s]=u}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let u=new ao;for(let h=0;h<s.getCodewords().length;h++){u.format("CW %3d:",h);for(let g=0;g<this.barcodeColumnCount+2;g++){if(this.detectionResultColumns[g]==null){u.format("    |   ");continue}let y=this.detectionResultColumns[g].getCodewords()[h];if(y==null){u.format("    |   ");continue}u.format(" %3d|%3d",y.getRowNumber(),y.getValue())}u.format("%n")}return u.toString()}}class Xo{constructor(s,u,h,g){this.rowNumber=Xo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(u),this.bucket=Math.trunc(h),this.value=Math.trunc(g)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Xo.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Xo.BARCODE_ROW_UNKNOWN=-1;class Qn{static initialize(){for(let s=0;s<at.SYMBOL_TABLE.length;s++){let u=at.SYMBOL_TABLE[s],h=u&1;for(let g=0;g<at.BARS_IN_MODULE;g++){let y=0;for(;(u&1)===h;)y+=1,u>>=1;h=u&1,Qn.RATIOS_TABLE[s]||(Qn.RATIOS_TABLE[s]=new Array(at.BARS_IN_MODULE)),Qn.RATIOS_TABLE[s][at.BARS_IN_MODULE-g-1]=Math.fround(y/at.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let u=Qn.getDecodedCodewordValue(Qn.sampleBitCounts(s));return u!==-1?u:Qn.getClosestDecodedValue(s)}static sampleBitCounts(s){let u=_t.sum(s),h=new Int32Array(at.BARS_IN_MODULE),g=0,y=0;for(let x=0;x<at.MODULES_IN_CODEWORD;x++){let _=u/(2*at.MODULES_IN_CODEWORD)+x*u/at.MODULES_IN_CODEWORD;y+s[g]<=_&&(y+=s[g],g++),h[g]++}return h}static getDecodedCodewordValue(s){let u=Qn.getBitValue(s);return at.getCodeword(u)===-1?-1:u}static getBitValue(s){let u=0;for(let h=0;h<s.length;h++)for(let g=0;g<s[h];g++)u=u<<1|(h%2===0?1:0);return Math.trunc(u)}static getClosestDecodedValue(s){let u=_t.sum(s),h=new Array(at.BARS_IN_MODULE);if(u>1)for(let x=0;x<h.length;x++)h[x]=Math.fround(s[x]/u);let g=Po.MAX_VALUE,y=-1;this.bSymbolTableReady||Qn.initialize();for(let x=0;x<Qn.RATIOS_TABLE.length;x++){let _=0,T=Qn.RATIOS_TABLE[x];for(let O=0;O<at.BARS_IN_MODULE;O++){let U=Math.fround(T[O]-h[O]);if(_+=Math.fround(U*U),_>=g)break}_<g&&(g=_,y=at.SYMBOL_TABLE[x])}return y}}Qn.bSymbolTableReady=!1,Qn.RATIOS_TABLE=new Array(at.SYMBOL_TABLE.length).map(j=>new Array(at.BARS_IN_MODULE));class $l{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class Sc{static parseLong(s,u=void 0){return parseInt(s,u)}}class lo extends d{}lo.kind="NullPointerException";class Cc{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,u,h){if(s==null)throw new lo;if(u<0||u>s.length||h<0||u+h>s.length||u+h<0)throw new N;if(h===0)return;for(let g=0;g<h;g++)this.write(s[u+g])}flush(){}close(){}}class zl extends d{}class Tf extends Cc{constructor(s=32){if(super(),this.count=0,s<0)throw new v("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let h=this.buf.length<<1;if(h-s<0&&(h=s),h<0){if(s<0)throw new zl;h=L.MAX_VALUE}this.buf=F.copyOfUint8Array(this.buf,h)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,u,h){if(u<0||u>s.length||h<0||u+h-s.length>0)throw new N;this.ensureCapacity(this.count+h),P.arraycopy(s,u,this.buf,this.count,h),this.count+=h}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return F.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var Pt;(function(j){j[j.ALPHA=0]="ALPHA",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.PUNCT=3]="PUNCT",j[j.ALPHA_SHIFT=4]="ALPHA_SHIFT",j[j.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pt||(Pt={}));function Ma(){if(typeof window<"u")return window.BigInt||null;if(typeof Sh<"u")return Sh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Da;function In(j){if(typeof Da>"u"&&(Da=Ma()),Da===null)throw new Error("BigInt is not supported!");return Da(j)}function Gs(){let j=[];j[0]=In(1);let s=In(900);j[1]=s;for(let u=2;u<16;u++)j[u]=j[u-1]*s;return j}class ge{static decode(s,u){let h=new be(""),g=X.ISO8859_1;h.enableDecoding(g);let y=1,x=s[y++],_=new $l;for(;y<s[0];){switch(x){case ge.TEXT_COMPACTION_MODE_LATCH:y=ge.textCompaction(s,y,h);break;case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:y=ge.byteCompaction(x,s,g,y,h);break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(s[y++]);break;case ge.NUMERIC_COMPACTION_MODE_LATCH:y=ge.numericCompaction(s,y,h);break;case ge.ECI_CHARSET:X.getCharacterSetECIByValue(s[y++]);break;case ge.ECI_GENERAL_PURPOSE:y+=2;break;case ge.ECI_USER_DEFINED:y++;break;case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:y=ge.decodeMacroBlock(s,y,_);break;case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:throw new W;default:y--,y=ge.textCompaction(s,y,h);break}if(y<s.length)x=s[y++];else throw W.getFormatInstance()}if(h.length()===0)throw W.getFormatInstance();let T=new Ee(null,h.toString(),null,u);return T.setOther(_),T}static decodeMacroBlock(s,u,h){if(u+ge.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw W.getFormatInstance();let g=new Int32Array(ge.NUMBER_OF_SEQUENCE_CODEWORDS);for(let _=0;_<ge.NUMBER_OF_SEQUENCE_CODEWORDS;_++,u++)g[_]=s[u];h.setSegmentIndex(L.parseInt(ge.decodeBase900toBase10(g,ge.NUMBER_OF_SEQUENCE_CODEWORDS)));let y=new be;u=ge.textCompaction(s,u,y),h.setFileId(y.toString());let x=-1;for(s[u]===ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(x=u+1);u<s[0];)switch(s[u]){case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(u++,s[u]){case ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let _=new be;u=ge.textCompaction(s,u+1,_),h.setFileName(_.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let T=new be;u=ge.textCompaction(s,u+1,T),h.setSender(T.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let O=new be;u=ge.textCompaction(s,u+1,O),h.setAddressee(O.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let U=new be;u=ge.numericCompaction(s,u+1,U),h.setSegmentCount(L.parseInt(U.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let $=new be;u=ge.numericCompaction(s,u+1,$),h.setTimestamp(Sc.parseLong($.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let H=new be;u=ge.numericCompaction(s,u+1,H),h.setChecksum(L.parseInt(H.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Y=new be;u=ge.numericCompaction(s,u+1,Y),h.setFileSize(Sc.parseLong(Y.toString()));break;default:throw W.getFormatInstance()}break;case ge.MACRO_PDF417_TERMINATOR:u++,h.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(x!==-1){let _=u-x;h.isLastSegment()&&_--,h.setOptionalData(F.copyOfRange(s,x,x+_))}return u}static textCompaction(s,u,h){let g=new Int32Array((s[0]-u)*2),y=new Int32Array((s[0]-u)*2),x=0,_=!1;for(;u<s[0]&&!_;){let T=s[u++];if(T<ge.TEXT_COMPACTION_MODE_LATCH)g[x]=T/30,g[x+1]=T%30,x+=2;else switch(T){case ge.TEXT_COMPACTION_MODE_LATCH:g[x++]=ge.TEXT_COMPACTION_MODE_LATCH;break;case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:u--,_=!0;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g[x]=ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,T=s[u++],y[x]=T,x++;break}}return ge.decodeTextCompaction(g,y,x,h),u}static decodeTextCompaction(s,u,h,g){let y=Pt.ALPHA,x=Pt.ALPHA,_=0;for(;_<h;){let T=s[_],O="";switch(y){case Pt.ALPHA:if(T<26)O=String.fromCharCode(65+T);else switch(T){case 26:O=" ";break;case ge.LL:y=Pt.LOWER;break;case ge.ML:y=Pt.MIXED;break;case ge.PS:x=y,y=Pt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(u[_]);break;case ge.TEXT_COMPACTION_MODE_LATCH:y=Pt.ALPHA;break}break;case Pt.LOWER:if(T<26)O=String.fromCharCode(97+T);else switch(T){case 26:O=" ";break;case ge.AS:x=y,y=Pt.ALPHA_SHIFT;break;case ge.ML:y=Pt.MIXED;break;case ge.PS:x=y,y=Pt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(u[_]);break;case ge.TEXT_COMPACTION_MODE_LATCH:y=Pt.ALPHA;break}break;case Pt.MIXED:if(T<ge.PL)O=ge.MIXED_CHARS[T];else switch(T){case ge.PL:y=Pt.PUNCT;break;case 26:O=" ";break;case ge.LL:y=Pt.LOWER;break;case ge.AL:y=Pt.ALPHA;break;case ge.PS:x=y,y=Pt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(u[_]);break;case ge.TEXT_COMPACTION_MODE_LATCH:y=Pt.ALPHA;break}break;case Pt.PUNCT:if(T<ge.PAL)O=ge.PUNCT_CHARS[T];else switch(T){case ge.PAL:y=Pt.ALPHA;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(u[_]);break;case ge.TEXT_COMPACTION_MODE_LATCH:y=Pt.ALPHA;break}break;case Pt.ALPHA_SHIFT:if(y=x,T<26)O=String.fromCharCode(65+T);else switch(T){case 26:O=" ";break;case ge.TEXT_COMPACTION_MODE_LATCH:y=Pt.ALPHA;break}break;case Pt.PUNCT_SHIFT:if(y=x,T<ge.PAL)O=ge.PUNCT_CHARS[T];else switch(T){case ge.PAL:y=Pt.ALPHA;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(u[_]);break;case ge.TEXT_COMPACTION_MODE_LATCH:y=Pt.ALPHA;break}break}O!==""&&g.append(O),_++}}static byteCompaction(s,u,h,g,y){let x=new Tf,_=0,T=0,O=!1;switch(s){case ge.BYTE_COMPACTION_MODE_LATCH:let U=new Int32Array(6),$=u[g++];for(;g<u[0]&&!O;)switch(U[_++]=$,T=900*T+$,$=u[g++],$){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:g--,O=!0;break;default:if(_%5===0&&_>0){for(let H=0;H<6;++H)x.write(Number(In(T)>>In(8*(5-H))));T=0,_=0}break}g===u[0]&&$<ge.TEXT_COMPACTION_MODE_LATCH&&(U[_++]=$);for(let H=0;H<_;H++)x.write(U[H]);break;case ge.BYTE_COMPACTION_MODE_LATCH_6:for(;g<u[0]&&!O;){let H=u[g++];if(H<ge.TEXT_COMPACTION_MODE_LATCH)_++,T=900*T+H;else switch(H){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:g--,O=!0;break}if(_%5===0&&_>0){for(let Y=0;Y<6;++Y)x.write(Number(In(T)>>In(8*(5-Y))));T=0,_=0}}break}return y.append(se.decode(x.toByteArray(),h)),g}static numericCompaction(s,u,h){let g=0,y=!1,x=new Int32Array(ge.MAX_NUMERIC_CODEWORDS);for(;u<s[0]&&!y;){let _=s[u++];if(u===s[0]&&(y=!0),_<ge.TEXT_COMPACTION_MODE_LATCH)x[g]=_,g++;else switch(_){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:u--,y=!0;break}(g%ge.MAX_NUMERIC_CODEWORDS===0||_===ge.NUMERIC_COMPACTION_MODE_LATCH||y)&&g>0&&(h.append(ge.decodeBase900toBase10(x,g)),g=0)}return u}static decodeBase900toBase10(s,u){let h=In(0);for(let y=0;y<u;y++)h+=ge.EXP900[u-y-1]*In(s[y]);let g=h.toString();if(g.charAt(0)!=="1")throw new W;return g.substring(1)}}ge.TEXT_COMPACTION_MODE_LATCH=900,ge.BYTE_COMPACTION_MODE_LATCH=901,ge.NUMERIC_COMPACTION_MODE_LATCH=902,ge.BYTE_COMPACTION_MODE_LATCH_6=924,ge.ECI_USER_DEFINED=925,ge.ECI_GENERAL_PURPOSE=926,ge.ECI_CHARSET=927,ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ge.MACRO_PDF417_TERMINATOR=922,ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ge.MAX_NUMERIC_CODEWORDS=15,ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ge.PL=25,ge.LL=27,ge.AS=27,ge.ML=28,ge.AL=28,ge.PS=29,ge.PAL=29,ge.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ge.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ge.EXP900=Ma()?Gs():[],ge.NUMBER_OF_SEQUENCE_CODEWORDS=2;class mt{constructor(){}static decode(s,u,h,g,y,x,_){let T=new Yo(s,u,h,g,y),O=null,U=null,$;for(let Q=!0;;Q=!1){if(u!=null&&(O=mt.getRowIndicatorColumn(s,T,u,!0,x,_)),g!=null&&(U=mt.getRowIndicatorColumn(s,T,g,!1,x,_)),$=mt.merge(O,U),$==null)throw ne.getNotFoundInstance();let re=$.getBoundingBox();if(Q&&re!=null&&(re.getMinY()<T.getMinY()||re.getMaxY()>T.getMaxY()))T=re;else break}$.setBoundingBox(T);let H=$.getBarcodeColumnCount()+1;$.setDetectionResultColumn(0,O),$.setDetectionResultColumn(H,U);let Y=O!=null;for(let Q=1;Q<=H;Q++){let re=Y?Q:H-Q;if($.getDetectionResultColumn(re)!==void 0)continue;let oe;re===0||re===H?oe=new Af(T,re===0):oe=new Ui(T),$.setDetectionResultColumn(re,oe);let me=-1,Oe=me;for(let ke=T.getMinY();ke<=T.getMaxY();ke++){if(me=mt.getStartColumn($,re,ke,Y),me<0||me>T.getMaxX()){if(Oe===-1)continue;me=Oe}let Ie=mt.detectCodeword(s,T.getMinX(),T.getMaxX(),Y,me,ke,x,_);Ie!=null&&(oe.setCodeword(ke,Ie),Oe=me,x=Math.min(x,Ie.getWidth()),_=Math.max(_,Ie.getWidth()))}}return mt.createDecoderResult($)}static merge(s,u){if(s==null&&u==null)return null;let h=mt.getBarcodeMetadata(s,u);if(h==null)return null;let g=Yo.merge(mt.adjustBoundingBox(s),mt.adjustBoundingBox(u));return new ka(h,g)}static adjustBoundingBox(s){if(s==null)return null;let u=s.getRowHeights();if(u==null)return null;let h=mt.getMax(u),g=0;for(let _ of u)if(g+=h-_,_>0)break;let y=s.getCodewords();for(let _=0;g>0&&y[_]==null;_++)g--;let x=0;for(let _=u.length-1;_>=0&&(x+=h-u[_],!(u[_]>0));_--);for(let _=y.length-1;x>0&&y[_]==null;_--)x--;return s.getBoundingBox().addMissingRows(g,x,s.isLeft())}static getMax(s){let u=-1;for(let h of s)u=Math.max(u,h);return u}static getBarcodeMetadata(s,u){let h;if(s==null||(h=s.getBarcodeMetadata())==null)return u==null?null:u.getBarcodeMetadata();let g;return u==null||(g=u.getBarcodeMetadata())==null?h:h.getColumnCount()!==g.getColumnCount()&&h.getErrorCorrectionLevel()!==g.getErrorCorrectionLevel()&&h.getRowCount()!==g.getRowCount()?null:h}static getRowIndicatorColumn(s,u,h,g,y,x){let _=new Af(u,g);for(let T=0;T<2;T++){let O=T===0?1:-1,U=Math.trunc(Math.trunc(h.getX()));for(let $=Math.trunc(Math.trunc(h.getY()));$<=u.getMaxY()&&$>=u.getMinY();$+=O){let H=mt.detectCodeword(s,0,s.getWidth(),g,U,$,y,x);H!=null&&(_.setCodeword($,H),g?U=H.getStartX():U=H.getEndX())}}return _}static adjustCodewordCount(s,u){let h=u[0][1],g=h.getValue(),y=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-mt.getNumberOfECCodeWords(s.getBarcodeECLevel());if(g.length===0){if(y<1||y>at.MAX_CODEWORDS_IN_BARCODE)throw ne.getNotFoundInstance();h.setValue(y)}else g[0]!==y&&h.setValue(y)}static createDecoderResult(s){let u=mt.createBarcodeMatrix(s);mt.adjustCodewordCount(s,u);let h=new Array,g=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),y=[],x=new Array;for(let T=0;T<s.getBarcodeRowCount();T++)for(let O=0;O<s.getBarcodeColumnCount();O++){let U=u[T][O+1].getValue(),$=T*s.getBarcodeColumnCount()+O;U.length===0?h.push($):U.length===1?g[$]=U[0]:(x.push($),y.push(U))}let _=new Array(y.length);for(let T=0;T<_.length;T++)_[T]=y[T];return mt.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),g,at.toIntArray(h),at.toIntArray(x),_)}static createDecoderResultFromAmbiguousValues(s,u,h,g,y){let x=new Int32Array(g.length),_=100;for(;_-- >0;){for(let T=0;T<x.length;T++)u[g[T]]=y[T][x[T]];try{return mt.decodeCodewords(u,s,h)}catch(T){if(!(T instanceof C))throw T}if(x.length===0)throw C.getChecksumInstance();for(let T=0;T<x.length;T++)if(x[T]<y[T].length-1){x[T]++;break}else if(x[T]=0,T===x.length-1)throw C.getChecksumInstance()}throw C.getChecksumInstance()}static createBarcodeMatrix(s){let u=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let g=0;g<u.length;g++)for(let y=0;y<u[g].length;y++)u[g][y]=new ko;let h=0;for(let g of s.getDetectionResultColumns()){if(g!=null){for(let y of g.getCodewords())if(y!=null){let x=y.getRowNumber();if(x>=0){if(x>=u.length)continue;u[x][h].setValue(y.getValue())}}}h++}return u}static isValidBarcodeColumn(s,u){return u>=0&&u<=s.getBarcodeColumnCount()+1}static getStartColumn(s,u,h,g){let y=g?1:-1,x=null;if(mt.isValidBarcodeColumn(s,u-y)&&(x=s.getDetectionResultColumn(u-y).getCodeword(h)),x!=null)return g?x.getEndX():x.getStartX();if(x=s.getDetectionResultColumn(u).getCodewordNearby(h),x!=null)return g?x.getStartX():x.getEndX();if(mt.isValidBarcodeColumn(s,u-y)&&(x=s.getDetectionResultColumn(u-y).getCodewordNearby(h)),x!=null)return g?x.getEndX():x.getStartX();let _=0;for(;mt.isValidBarcodeColumn(s,u-y);){u-=y;for(let T of s.getDetectionResultColumn(u).getCodewords())if(T!=null)return(g?T.getEndX():T.getStartX())+y*_*(T.getEndX()-T.getStartX());_++}return g?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,u,h,g,y,x,_,T){y=mt.adjustCodewordStartColumn(s,u,h,g,y,x);let O=mt.getModuleBitCount(s,u,h,g,y,x);if(O==null)return null;let U,$=_t.sum(O);if(g)U=y+$;else{for(let Q=0;Q<O.length/2;Q++){let re=O[Q];O[Q]=O[O.length-1-Q],O[O.length-1-Q]=re}U=y,y=U-$}if(!mt.checkCodewordSkew($,_,T))return null;let H=Qn.getDecodedValue(O),Y=at.getCodeword(H);return Y===-1?null:new Xo(y,U,mt.getCodewordBucketNumber(H),Y)}static getModuleBitCount(s,u,h,g,y,x){let _=y,T=new Int32Array(8),O=0,U=g?1:-1,$=g;for(;(g?_<h:_>=u)&&O<T.length;)s.get(_,x)===$?(T[O]++,_+=U):(O++,$=!$);return O===T.length||_===(g?h:u)&&O===T.length-1?T:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,u,h,g,y,x){let _=y,T=g?-1:1;for(let O=0;O<2;O++){for(;(g?_>=u:_<h)&&g===s.get(_,x);){if(Math.abs(y-_)>mt.CODEWORD_SKEW_SIZE)return y;_+=T}T=-T,g=!g}return _}static checkCodewordSkew(s,u,h){return u-mt.CODEWORD_SKEW_SIZE<=s&&s<=h+mt.CODEWORD_SKEW_SIZE}static decodeCodewords(s,u,h){if(s.length===0)throw W.getFormatInstance();let g=1<<u+1,y=mt.correctErrors(s,h,g);mt.verifyCodewordCount(s,g);let x=ge.decode(s,""+u);return x.setErrorsCorrected(y),x.setErasures(h.length),x}static correctErrors(s,u,h){if(u!=null&&u.length>h/2+mt.MAX_ERRORS||h<0||h>mt.MAX_EC_CODEWORDS)throw C.getChecksumInstance();return mt.errorCorrection.decode(s,h,u)}static verifyCodewordCount(s,u){if(s.length<4)throw W.getFormatInstance();let h=s[0];if(h>s.length)throw W.getFormatInstance();if(h===0)if(u<s.length)s[0]=s.length-u;else throw W.getFormatInstance()}static getBitCountForCodeword(s){let u=new Int32Array(8),h=0,g=u.length-1;for(;!((s&1)!==h&&(h=s&1,g--,g<0));)u[g]++,s>>=1;return u}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return mt.getCodewordBucketNumber(mt.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let u=new ao;for(let h=0;h<s.length;h++){u.format("Row %2d: ",h);for(let g=0;g<s[h].length;g++){let y=s[h][g];y.getValue().length===0?u.format("        ",null):u.format("%4d(%2d)",y.getValue()[0],y.getConfidence(y.getValue()[0]))}u.format("%n")}return u.toString()}}mt.CODEWORD_SKEW_SIZE=2,mt.MAX_ERRORS=3,mt.MAX_EC_CODEWORDS=512,mt.errorCorrection=new _c;class er{decode(s,u=null){let h=er.decode(s,u,!1);if(h==null||h.length===0||h[0]==null)throw ne.getNotFoundInstance();return h[0]}decodeMultiple(s,u=null){try{return er.decode(s,u,!0)}catch(h){throw h instanceof W||h instanceof C?ne.getNotFoundInstance():h}}static decode(s,u,h){const g=new Array,y=ht.detectMultiple(s,u,h);for(const x of y.getPoints()){const _=mt.decode(y.getBits(),x[4],x[5],x[6],x[7],er.getMinCodewordWidth(x),er.getMaxCodewordWidth(x)),T=new Le(_.getText(),_.getRawBytes(),void 0,x,Ne.PDF_417);T.putMetadata(rt.ERROR_CORRECTION_LEVEL,_.getECLevel());const O=_.getOther();O!=null&&T.putMetadata(rt.PDF417_EXTRA_METADATA,O),g.push(T)}return g.map(x=>x)}static getMaxWidth(s,u){return s==null||u==null?0:Math.trunc(Math.abs(s.getX()-u.getX()))}static getMinWidth(s,u){return s==null||u==null?L.MAX_VALUE:Math.trunc(Math.abs(s.getX()-u.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(er.getMaxWidth(s[0],s[4]),er.getMaxWidth(s[6],s[2])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN),Math.max(er.getMaxWidth(s[1],s[5]),er.getMaxWidth(s[7],s[3])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(er.getMinWidth(s[0],s[4]),er.getMinWidth(s[6],s[2])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN),Math.min(er.getMinWidth(s[1],s[5]),er.getMinWidth(s[7],s[3])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN)))}reset(){}}class Hs extends d{}Hs.kind="ReaderException";class Gl{constructor(s,u){this.verbose=s===!0,u&&this.setHints(u)}decode(s,u){return u&&this.setHints(u),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const u=!r(s)&&s.get(q.TRY_HARDER)===!0,h=r(s)?null:s.get(q.POSSIBLE_FORMATS),g=new Array;if(!r(h)){const y=h.some(x=>x===Ne.UPC_A||x===Ne.UPC_E||x===Ne.EAN_13||x===Ne.EAN_8||x===Ne.CODABAR||x===Ne.CODE_39||x===Ne.CODE_93||x===Ne.CODE_128||x===Ne.ITF||x===Ne.RSS_14||x===Ne.RSS_EXPANDED);y&&!u&&g.push(new js(s,this.verbose)),h.includes(Ne.QR_CODE)&&g.push(new Er),h.includes(Ne.DATA_MATRIX)&&g.push(new yi),h.includes(Ne.AZTEC)&&g.push(new No),h.includes(Ne.PDF_417)&&g.push(new er),y&&u&&g.push(new js(s,this.verbose))}g.length===0&&(u||g.push(new js(s,this.verbose)),g.push(new Er),g.push(new yi),g.push(new No),g.push(new er),u&&g.push(new js(s,this.verbose))),this.readers=g}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new Hs("No readers where selected, nothing can be read.");for(const u of this.readers)try{return u.decode(s,this.hints)}catch(h){if(h instanceof Hs)continue}throw new ne("No MultiFormat Readers were able to detect the code.")}}class La extends Fe{constructor(s=null,u=500){const h=new Gl;h.setHints(s),super(h,u)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class Hl extends Fe{constructor(s=500){super(new er,s)}}class If extends Fe{constructor(s=500){super(new Er,s)}}var Ac;(function(j){j[j.ERROR_CORRECTION=0]="ERROR_CORRECTION",j[j.CHARACTER_SET=1]="CHARACTER_SET",j[j.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",j[j.MIN_SIZE=3]="MIN_SIZE",j[j.MAX_SIZE=4]="MAX_SIZE",j[j.MARGIN=5]="MARGIN",j[j.PDF417_COMPACT=6]="PDF417_COMPACT",j[j.PDF417_COMPACTION=7]="PDF417_COMPACTION",j[j.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",j[j.AZTEC_LAYERS=9]="AZTEC_LAYERS",j[j.QR_VERSION=10]="QR_VERSION"})(Ac||(Ac={}));var Ln=Ac;class Tc{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Me(s,Int32Array.from([1])))}buildGenerator(s){const u=this.cachedGenerators;if(s>=u.length){let h=u[u.length-1];const g=this.field;for(let y=u.length;y<=s;y++){const x=h.multiply(new Me(g,Int32Array.from([1,g.exp(y-1+g.getGeneratorBase())])));u.push(x),h=x}}return u[s]}encode(s,u){if(u===0)throw new v("No error correction bytes");const h=s.length-u;if(h<=0)throw new v("No data bytes provided");const g=this.buildGenerator(u),y=new Int32Array(h);P.arraycopy(s,0,y,0,h);let x=new Me(this.field,y);x=x.multiplyByMonomial(u,1);const T=x.divide(g)[1].getCoefficients(),O=u-T.length;for(let U=0;U<O;U++)s[h+U]=0;P.arraycopy(T,0,s,h+O,T.length)}}class nn{constructor(){}static applyMaskPenaltyRule1(s){return nn.applyMaskPenaltyRule1Internal(s,!0)+nn.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let u=0;const h=s.getArray(),g=s.getWidth(),y=s.getHeight();for(let x=0;x<y-1;x++){const _=h[x];for(let T=0;T<g-1;T++){const O=_[T];O===_[T+1]&&O===h[x+1][T]&&O===h[x+1][T+1]&&u++}}return nn.N2*u}static applyMaskPenaltyRule3(s){let u=0;const h=s.getArray(),g=s.getWidth(),y=s.getHeight();for(let x=0;x<y;x++)for(let _=0;_<g;_++){const T=h[x];_+6<g&&T[_]===1&&T[_+1]===0&&T[_+2]===1&&T[_+3]===1&&T[_+4]===1&&T[_+5]===0&&T[_+6]===1&&(nn.isWhiteHorizontal(T,_-4,_)||nn.isWhiteHorizontal(T,_+7,_+11))&&u++,x+6<y&&h[x][_]===1&&h[x+1][_]===0&&h[x+2][_]===1&&h[x+3][_]===1&&h[x+4][_]===1&&h[x+5][_]===0&&h[x+6][_]===1&&(nn.isWhiteVertical(h,_,x-4,x)||nn.isWhiteVertical(h,_,x+7,x+11))&&u++}return u*nn.N3}static isWhiteHorizontal(s,u,h){u=Math.max(u,0),h=Math.min(h,s.length);for(let g=u;g<h;g++)if(s[g]===1)return!1;return!0}static isWhiteVertical(s,u,h,g){h=Math.max(h,0),g=Math.min(g,s.length);for(let y=h;y<g;y++)if(s[y][u]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let u=0;const h=s.getArray(),g=s.getWidth(),y=s.getHeight();for(let T=0;T<y;T++){const O=h[T];for(let U=0;U<g;U++)O[U]===1&&u++}const x=s.getHeight()*s.getWidth();return Math.floor(Math.abs(u*2-x)*10/x)*nn.N4}static getDataMaskBit(s,u,h){let g,y;switch(s){case 0:g=h+u&1;break;case 1:g=h&1;break;case 2:g=u%3;break;case 3:g=(h+u)%3;break;case 4:g=Math.floor(h/2)+Math.floor(u/3)&1;break;case 5:y=h*u,g=(y&1)+y%3;break;case 6:y=h*u,g=(y&1)+y%3&1;break;case 7:y=h*u,g=y%3+(h+u&1)&1;break;default:throw new v("Invalid mask pattern: "+s)}return g===0}static applyMaskPenaltyRule1Internal(s,u){let h=0;const g=u?s.getHeight():s.getWidth(),y=u?s.getWidth():s.getHeight(),x=s.getArray();for(let _=0;_<g;_++){let T=0,O=-1;for(let U=0;U<y;U++){const $=u?x[_][U]:x[U][_];$===O?T++:(T>=5&&(h+=nn.N1+(T-5)),T=1,O=$)}T>=5&&(h+=nn.N1+(T-5))}return h}}nn.N1=3,nn.N2=3,nn.N3=40,nn.N4=10;class ql{constructor(s,u){this.width=s,this.height=u;const h=new Array(u);for(let g=0;g!==u;g++)h[g]=new Uint8Array(s);this.bytes=h}getHeight(){return this.height}getWidth(){return this.width}get(s,u){return this.bytes[u][s]}getArray(){return this.bytes}setNumber(s,u,h){this.bytes[u][s]=h}setBoolean(s,u,h){this.bytes[u][s]=h?1:0}clear(s){for(const u of this.bytes)F.fill(u,s)}equals(s){if(!(s instanceof ql))return!1;const u=s;if(this.width!==u.width||this.height!==u.height)return!1;for(let h=0,g=this.height;h<g;++h){const y=this.bytes[h],x=u.bytes[h];for(let _=0,T=this.width;_<T;++_)if(y[_]!==x[_])return!1}return!0}toString(){const s=new be;for(let u=0,h=this.height;u<h;++u){const g=this.bytes[u];for(let y=0,x=this.width;y<x;++y)switch(g[y]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class Jo{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new be;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<Jo.NUM_MASK_PATTERNS}}Jo.NUM_MASK_PATTERNS=8;class zt extends d{}zt.kind="WriterException";class it{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,u,h,g,y){it.clearMatrix(y),it.embedBasicPatterns(h,y),it.embedTypeInfo(u,g,y),it.maybeEmbedVersionInfo(h,y),it.embedDataBits(s,g,y)}static embedBasicPatterns(s,u){it.embedPositionDetectionPatternsAndSeparators(u),it.embedDarkDotAtLeftBottomCorner(u),it.maybeEmbedPositionAdjustmentPatterns(s,u),it.embedTimingPatterns(u)}static embedTypeInfo(s,u,h){const g=new V;it.makeTypeInfoBits(s,u,g);for(let y=0,x=g.getSize();y<x;++y){const _=g.get(g.getSize()-1-y),T=it.TYPE_INFO_COORDINATES[y],O=T[0],U=T[1];if(h.setBoolean(O,U,_),y<8){const $=h.getWidth()-y-1;h.setBoolean($,8,_)}else{const H=h.getHeight()-7+(y-8);h.setBoolean(8,H,_)}}}static maybeEmbedVersionInfo(s,u){if(s.getVersionNumber()<7)return;const h=new V;it.makeVersionInfoBits(s,h);let g=17;for(let y=0;y<6;++y)for(let x=0;x<3;++x){const _=h.get(g);g--,u.setBoolean(y,u.getHeight()-11+x,_),u.setBoolean(u.getHeight()-11+x,y,_)}}static embedDataBits(s,u,h){let g=0,y=-1,x=h.getWidth()-1,_=h.getHeight()-1;for(;x>0;){for(x===6&&(x-=1);_>=0&&_<h.getHeight();){for(let T=0;T<2;++T){const O=x-T;if(!it.isEmpty(h.get(O,_)))continue;let U;g<s.getSize()?(U=s.get(g),++g):U=!1,u!==255&&nn.getDataMaskBit(u,O,_)&&(U=!U),h.setBoolean(O,_,U)}_+=y}y=-y,_+=y,x-=2}if(g!==s.getSize())throw new zt("Not all bits consumed: "+g+"/"+s.getSize())}static findMSBSet(s){return 32-L.numberOfLeadingZeros(s)}static calculateBCHCode(s,u){if(u===0)throw new v("0 polynomial");const h=it.findMSBSet(u);for(s<<=h-1;it.findMSBSet(s)>=h;)s^=u<<it.findMSBSet(s)-h;return s}static makeTypeInfoBits(s,u,h){if(!Jo.isValidMaskPattern(u))throw new zt("Invalid mask pattern");const g=s.getBits()<<3|u;h.appendBits(g,5);const y=it.calculateBCHCode(g,it.TYPE_INFO_POLY);h.appendBits(y,10);const x=new V;if(x.appendBits(it.TYPE_INFO_MASK_PATTERN,15),h.xor(x),h.getSize()!==15)throw new zt("should not happen but we got: "+h.getSize())}static makeVersionInfoBits(s,u){u.appendBits(s.getVersionNumber(),6);const h=it.calculateBCHCode(s.getVersionNumber(),it.VERSION_INFO_POLY);if(u.appendBits(h,12),u.getSize()!==18)throw new zt("should not happen but we got: "+u.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let u=8;u<s.getWidth()-8;++u){const h=(u+1)%2;it.isEmpty(s.get(u,6))&&s.setNumber(u,6,h),it.isEmpty(s.get(6,u))&&s.setNumber(6,u,h)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new zt;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,u,h){for(let g=0;g<8;++g){if(!it.isEmpty(h.get(s+g,u)))throw new zt;h.setNumber(s+g,u,0)}}static embedVerticalSeparationPattern(s,u,h){for(let g=0;g<7;++g){if(!it.isEmpty(h.get(s,u+g)))throw new zt;h.setNumber(s,u+g,0)}}static embedPositionAdjustmentPattern(s,u,h){for(let g=0;g<5;++g){const y=it.POSITION_ADJUSTMENT_PATTERN[g];for(let x=0;x<5;++x)h.setNumber(s+x,u+g,y[x])}}static embedPositionDetectionPattern(s,u,h){for(let g=0;g<7;++g){const y=it.POSITION_DETECTION_PATTERN[g];for(let x=0;x<7;++x)h.setNumber(s+x,u+g,y[x])}}static embedPositionDetectionPatternsAndSeparators(s){const u=it.POSITION_DETECTION_PATTERN[0].length;it.embedPositionDetectionPattern(0,0,s),it.embedPositionDetectionPattern(s.getWidth()-u,0,s),it.embedPositionDetectionPattern(0,s.getWidth()-u,s);const h=8;it.embedHorizontalSeparationPattern(0,h-1,s),it.embedHorizontalSeparationPattern(s.getWidth()-h,h-1,s),it.embedHorizontalSeparationPattern(0,s.getWidth()-h,s);const g=7;it.embedVerticalSeparationPattern(g,0,s),it.embedVerticalSeparationPattern(s.getHeight()-g-1,0,s),it.embedVerticalSeparationPattern(g,s.getHeight()-g,s)}static maybeEmbedPositionAdjustmentPatterns(s,u){if(s.getVersionNumber()<2)return;const h=s.getVersionNumber()-1,g=it.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[h];for(let y=0,x=g.length;y!==x;y++){const _=g[y];if(_>=0)for(let T=0;T!==x;T++){const O=g[T];O>=0&&it.isEmpty(u.get(O,_))&&it.embedPositionAdjustmentPattern(O-2,_-2,u)}}}}it.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),it.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),it.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),it.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),it.VERSION_INFO_POLY=7973,it.TYPE_INFO_POLY=1335,it.TYPE_INFO_MASK_PATTERN=21522;class qm{constructor(s,u){this.dataBytes=s,this.errorCorrectionBytes=u}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class qt{constructor(){}static calculateMaskPenalty(s){return nn.applyMaskPenaltyRule1(s)+nn.applyMaskPenaltyRule2(s)+nn.applyMaskPenaltyRule3(s)+nn.applyMaskPenaltyRule4(s)}static encode(s,u,h=null){let g=qt.DEFAULT_BYTE_MODE_ENCODING;const y=h!==null&&h.get(Ln.CHARACTER_SET)!==void 0;y&&(g=h.get(Ln.CHARACTER_SET).toString());const x=this.chooseMode(s,g),_=new V;if(x===nt.BYTE&&(y||qt.DEFAULT_BYTE_MODE_ENCODING!==g)){const ke=X.getCharacterSetECIByName(g);ke!==void 0&&this.appendECI(ke,_)}this.appendModeInfo(x,_);const T=new V;this.appendBytes(s,x,T,g);let O;if(h!==null&&h.get(Ln.QR_VERSION)!==void 0){const ke=Number.parseInt(h.get(Ln.QR_VERSION).toString(),10);O=tt.getVersionForNumber(ke);const Ie=this.calculateBitsNeeded(x,_,T,O);if(!this.willFit(Ie,O,u))throw new zt("Data too big for requested version")}else O=this.recommendVersion(u,x,_,T);const U=new V;U.appendBitArray(_);const $=x===nt.BYTE?T.getSizeInBytes():s.length;this.appendLengthInfo($,O,x,U),U.appendBitArray(T);const H=O.getECBlocksForLevel(u),Y=O.getTotalCodewords()-H.getTotalECCodewords();this.terminateBits(Y,U);const Q=this.interleaveWithECBytes(U,O.getTotalCodewords(),Y,H.getNumBlocks()),re=new Jo;re.setECLevel(u),re.setMode(x),re.setVersion(O);const oe=O.getDimensionForVersion(),me=new ql(oe,oe),Oe=this.chooseMaskPattern(Q,u,O,me);return re.setMaskPattern(Oe),it.buildMatrix(Q,u,O,Oe,me),re.setMatrix(me),re}static recommendVersion(s,u,h,g){const y=this.calculateBitsNeeded(u,h,g,tt.getVersionForNumber(1)),x=this.chooseVersion(y,s),_=this.calculateBitsNeeded(u,h,g,x);return this.chooseVersion(_,s)}static calculateBitsNeeded(s,u,h,g){return u.getSize()+s.getCharacterCountBits(g)+h.getSize()}static getAlphanumericCode(s){return s<qt.ALPHANUMERIC_TABLE.length?qt.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,u=null){if(X.SJIS.getName()===u&&this.isOnlyDoubleByteKanji(s))return nt.KANJI;let h=!1,g=!1;for(let y=0,x=s.length;y<x;++y){const _=s.charAt(y);if(qt.isDigit(_))h=!0;else if(this.getAlphanumericCode(_.charCodeAt(0))!==-1)g=!0;else return nt.BYTE}return g?nt.ALPHANUMERIC:h?nt.NUMERIC:nt.BYTE}static isOnlyDoubleByteKanji(s){let u;try{u=se.encode(s,X.SJIS)}catch{return!1}const h=u.length;if(h%2!==0)return!1;for(let g=0;g<h;g+=2){const y=u[g]&255;if((y<129||y>159)&&(y<224||y>235))return!1}return!0}static chooseMaskPattern(s,u,h,g){let y=Number.MAX_SAFE_INTEGER,x=-1;for(let _=0;_<Jo.NUM_MASK_PATTERNS;_++){it.buildMatrix(s,u,h,_,g);let T=this.calculateMaskPenalty(g);T<y&&(y=T,x=_)}return x}static chooseVersion(s,u){for(let h=1;h<=40;h++){const g=tt.getVersionForNumber(h);if(qt.willFit(s,g,u))return g}throw new zt("Data too big")}static willFit(s,u,h){const g=u.getTotalCodewords(),x=u.getECBlocksForLevel(h).getTotalECCodewords(),_=g-x,T=(s+7)/8;return _>=T}static terminateBits(s,u){const h=s*8;if(u.getSize()>h)throw new zt("data bits cannot fit in the QR Code"+u.getSize()+" > "+h);for(let x=0;x<4&&u.getSize()<h;++x)u.appendBit(!1);const g=u.getSize()&7;if(g>0)for(let x=g;x<8;x++)u.appendBit(!1);const y=s-u.getSizeInBytes();for(let x=0;x<y;++x)u.appendBits((x&1)===0?236:17,8);if(u.getSize()!==h)throw new zt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,u,h,g,y,x){if(g>=h)throw new zt("Block ID too large");const _=s%h,T=h-_,O=Math.floor(s/h),U=O+1,$=Math.floor(u/h),H=$+1,Y=O-$,Q=U-H;if(Y!==Q)throw new zt("EC bytes mismatch");if(h!==T+_)throw new zt("RS blocks mismatch");if(s!==($+Y)*T+(H+Q)*_)throw new zt("Total bytes mismatch");g<T?(y[0]=$,x[0]=Y):(y[0]=H,x[0]=Q)}static interleaveWithECBytes(s,u,h,g){if(s.getSizeInBytes()!==h)throw new zt("Number of bits and data bytes does not match");let y=0,x=0,_=0;const T=new Array;for(let U=0;U<g;++U){const $=new Int32Array(1),H=new Int32Array(1);qt.getNumDataBytesAndNumECBytesForBlockID(u,h,g,U,$,H);const Y=$[0],Q=new Uint8Array(Y);s.toBytes(8*y,Q,0,Y);const re=qt.generateECBytes(Q,H[0]);T.push(new qm(Q,re)),x=Math.max(x,Y),_=Math.max(_,re.length),y+=$[0]}if(h!==y)throw new zt("Data bytes does not match offset");const O=new V;for(let U=0;U<x;++U)for(const $ of T){const H=$.getDataBytes();U<H.length&&O.appendBits(H[U],8)}for(let U=0;U<_;++U)for(const $ of T){const H=$.getErrorCorrectionBytes();U<H.length&&O.appendBits(H[U],8)}if(u!==O.getSizeInBytes())throw new zt("Interleaving error: "+u+" and "+O.getSizeInBytes()+" differ.");return O}static generateECBytes(s,u){const h=s.length,g=new Int32Array(h+u);for(let x=0;x<h;x++)g[x]=s[x]&255;new Tc(Ke.QR_CODE_FIELD_256).encode(g,u);const y=new Uint8Array(u);for(let x=0;x<u;x++)y[x]=g[h+x];return y}static appendModeInfo(s,u){u.appendBits(s.getBits(),4)}static appendLengthInfo(s,u,h,g){const y=h.getCharacterCountBits(u);if(s>=1<<y)throw new zt(s+" is bigger than "+((1<<y)-1));g.appendBits(s,y)}static appendBytes(s,u,h,g){switch(u){case nt.NUMERIC:qt.appendNumericBytes(s,h);break;case nt.ALPHANUMERIC:qt.appendAlphanumericBytes(s,h);break;case nt.BYTE:qt.append8BitBytes(s,h,g);break;case nt.KANJI:qt.appendKanjiBytes(s,h);break;default:throw new zt("Invalid mode: "+u)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const u=qt.getDigit(s);return u>=0&&u<=9}static appendNumericBytes(s,u){const h=s.length;let g=0;for(;g<h;){const y=qt.getDigit(s.charAt(g));if(g+2<h){const x=qt.getDigit(s.charAt(g+1)),_=qt.getDigit(s.charAt(g+2));u.appendBits(y*100+x*10+_,10),g+=3}else if(g+1<h){const x=qt.getDigit(s.charAt(g+1));u.appendBits(y*10+x,7),g+=2}else u.appendBits(y,4),g++}}static appendAlphanumericBytes(s,u){const h=s.length;let g=0;for(;g<h;){const y=qt.getAlphanumericCode(s.charCodeAt(g));if(y===-1)throw new zt;if(g+1<h){const x=qt.getAlphanumericCode(s.charCodeAt(g+1));if(x===-1)throw new zt;u.appendBits(y*45+x,11),g+=2}else u.appendBits(y,6),g++}}static append8BitBytes(s,u,h){let g;try{g=se.encode(s,h)}catch(y){throw new zt(y)}for(let y=0,x=g.length;y!==x;y++){const _=g[y];u.appendBits(_,8)}}static appendKanjiBytes(s,u){let h;try{h=se.encode(s,X.SJIS)}catch(y){throw new zt(y)}const g=h.length;for(let y=0;y<g;y+=2){const x=h[y]&255,_=h[y+1]&255,T=x<<8&4294967295|_;let O=-1;if(T>=33088&&T<=40956?O=T-33088:T>=57408&&T<=60351&&(O=T-49472),O===-1)throw new zt("Invalid byte sequence");const U=(O>>8)*192+(O&255);u.appendBits(U,13)}}static appendECI(s,u){u.appendBits(nt.ECI.getBits(),4),u.appendBits(s.getValue(),8)}}qt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),qt.DEFAULT_BYTE_MODE_ENCODING=X.UTF8.getName();class Zo{write(s,u,h,g=null){if(s.length===0)throw new v("Found empty contents");if(u<0||h<0)throw new v("Requested dimensions are too small: "+u+"x"+h);let y=jt.L,x=Zo.QUIET_ZONE_SIZE;g!==null&&(g.get(Ln.ERROR_CORRECTION)!==void 0&&(y=jt.fromString(g.get(Ln.ERROR_CORRECTION).toString())),g.get(Ln.MARGIN)!==void 0&&(x=Number.parseInt(g.get(Ln.MARGIN).toString(),10)));const _=qt.encode(s,y,g);return this.renderResult(_,u,h,x)}writeToDom(s,u,h,g,y=null){typeof s=="string"&&(s=document.querySelector(s));const x=this.write(u,h,g,y);s&&s.appendChild(x)}renderResult(s,u,h,g){const y=s.getMatrix();if(y===null)throw new It;const x=y.getWidth(),_=y.getHeight(),T=x+g*2,O=_+g*2,U=Math.max(u,T),$=Math.max(h,O),H=Math.min(Math.floor(U/T),Math.floor($/O)),Y=Math.floor((U-x*H)/2),Q=Math.floor(($-_*H)/2),re=this.createSVGElement(U,$);for(let oe=0,me=Q;oe<_;oe++,me+=H)for(let Oe=0,ke=Y;Oe<x;Oe++,ke+=H)if(y.get(Oe,oe)===1){const Ie=this.createSvgRectElement(ke,me,H,H);re.appendChild(Ie)}return re}createSVGElement(s,u){const h=document.createElementNS(Zo.SVG_NS,"svg");return h.setAttributeNS(null,"height",s.toString()),h.setAttributeNS(null,"width",u.toString()),h}createSvgRectElement(s,u,h,g){const y=document.createElementNS(Zo.SVG_NS,"rect");return y.setAttributeNS(null,"x",s.toString()),y.setAttributeNS(null,"y",u.toString()),y.setAttributeNS(null,"height",h.toString()),y.setAttributeNS(null,"width",g.toString()),y.setAttributeNS(null,"fill","#000000"),y}}Zo.QUIET_ZONE_SIZE=4,Zo.SVG_NS="http://www.w3.org/2000/svg";class qs{encode(s,u,h,g,y){if(s.length===0)throw new v("Found empty contents");if(u!==Ne.QR_CODE)throw new v("Can only encode QR_CODE, but got "+u);if(h<0||g<0)throw new v(`Requested dimensions are too small: ${h}x${g}`);let x=jt.L,_=qs.QUIET_ZONE_SIZE;y!==null&&(y.get(Ln.ERROR_CORRECTION)!==void 0&&(x=jt.fromString(y.get(Ln.ERROR_CORRECTION).toString())),y.get(Ln.MARGIN)!==void 0&&(_=Number.parseInt(y.get(Ln.MARGIN).toString(),10)));const T=qt.encode(s,x,y);return qs.renderResult(T,h,g,_)}static renderResult(s,u,h,g){const y=s.getMatrix();if(y===null)throw new It;const x=y.getWidth(),_=y.getHeight(),T=x+g*2,O=_+g*2,U=Math.max(u,T),$=Math.max(h,O),H=Math.min(Math.floor(U/T),Math.floor($/O)),Y=Math.floor((U-x*H)/2),Q=Math.floor(($-_*H)/2),re=new he(U,$);for(let oe=0,me=Q;oe<_;oe++,me+=H)for(let Oe=0,ke=Y;Oe<x;Oe++,ke+=H)y.get(Oe,oe)===1&&re.setRegion(ke,me,H,H);return re}}qs.QUIET_ZONE_SIZE=4;class Wm{encode(s,u,h,g,y){let x;switch(u){case Ne.QR_CODE:x=new qs;break;default:throw new v("No encoder available for format "+u)}return x.encode(s,u,h,g,y)}}class ji extends xe{constructor(s,u,h,g,y,x,_,T){if(super(x,_),this.yuvData=s,this.dataWidth=u,this.dataHeight=h,this.left=g,this.top=y,g+x>u||y+_>h)throw new v("Crop rectangle does not fit within image data.");T&&this.reverseHorizontal(x,_)}getRow(s,u){if(s<0||s>=this.getHeight())throw new v("Requested row is outside the image: "+s);const h=this.getWidth();(u==null||u.length<h)&&(u=new Uint8ClampedArray(h));const g=(s+this.top)*this.dataWidth+this.left;return P.arraycopy(this.yuvData,g,u,0,h),u}getMatrix(){const s=this.getWidth(),u=this.getHeight();if(s===this.dataWidth&&u===this.dataHeight)return this.yuvData;const h=s*u,g=new Uint8ClampedArray(h);let y=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return P.arraycopy(this.yuvData,y,g,0,h),g;for(let x=0;x<u;x++){const _=x*s;P.arraycopy(this.yuvData,y,g,_,s),y+=this.dataWidth}return g}isCropSupported(){return!0}crop(s,u,h,g){return new ji(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+u,h,g,!1)}renderThumbnail(){const s=this.getWidth()/ji.THUMBNAIL_SCALE_FACTOR,u=this.getHeight()/ji.THUMBNAIL_SCALE_FACTOR,h=new Int32Array(s*u),g=this.yuvData;let y=this.top*this.dataWidth+this.left;for(let x=0;x<u;x++){const _=x*s;for(let T=0;T<s;T++){const O=g[y+T*ji.THUMBNAIL_SCALE_FACTOR]&255;h[_+T]=4278190080|O*65793}y+=this.dataWidth*ji.THUMBNAIL_SCALE_FACTOR}return h}getThumbnailWidth(){return this.getWidth()/ji.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ji.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,u){const h=this.yuvData;for(let g=0,y=this.top*this.dataWidth+this.left;g<u;g++,y+=this.dataWidth){const x=y+s/2;for(let _=y,T=y+s-1;_<x;_++,T--){const O=h[_];h[_]=h[T],h[T]=O}}}invert(){return new Se(this)}}ji.THUMBNAIL_SCALE_FACTOR=2;class Ba extends xe{constructor(s,u,h,g,y,x,_){if(super(u,h),this.dataWidth=g,this.dataHeight=y,this.left=x,this.top=_,s.BYTES_PER_ELEMENT===4){const T=u*h,O=new Uint8ClampedArray(T);for(let U=0;U<T;U++){const $=s[U],H=$>>16&255,Y=$>>7&510,Q=$&255;O[U]=(H+Y+Q)/4&255}this.luminances=O}else this.luminances=s;if(g===void 0&&(this.dataWidth=u),y===void 0&&(this.dataHeight=h),x===void 0&&(this.left=0),_===void 0&&(this.top=0),this.left+u>this.dataWidth||this.top+h>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(s,u){if(s<0||s>=this.getHeight())throw new v("Requested row is outside the image: "+s);const h=this.getWidth();(u==null||u.length<h)&&(u=new Uint8ClampedArray(h));const g=(s+this.top)*this.dataWidth+this.left;return P.arraycopy(this.luminances,g,u,0,h),u}getMatrix(){const s=this.getWidth(),u=this.getHeight();if(s===this.dataWidth&&u===this.dataHeight)return this.luminances;const h=s*u,g=new Uint8ClampedArray(h);let y=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return P.arraycopy(this.luminances,y,g,0,h),g;for(let x=0;x<u;x++){const _=x*s;P.arraycopy(this.luminances,y,g,_,s),y+=this.dataWidth}return g}isCropSupported(){return!0}crop(s,u,h,g){return new Ba(this.luminances,h,g,this.dataWidth,this.dataHeight,this.left+s,this.top+u)}invert(){return new Se(this)}}class Pf extends X{static forName(s){return this.getCharacterSetECIByName(s)}}class Ic{}Ic.ISO_8859_1=X.ISO8859_1;class Nf{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class Pc{static singletonList(s){return[s]}static min(s,u){return s.sort(u)[0]}}class Km{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Ws extends Km{constructor(s,u,h){super(s),this.value=u,this.bitCount=h}appendTo(s,u){s.appendBits(this.value,this.bitCount)}add(s,u){return new Ws(this,s,u)}addBinaryShift(s,u){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ws(this,s,u)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+L.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class Nc extends Ws{constructor(s,u,h){super(s,0,0),this.binaryShiftStart=u,this.binaryShiftByteCount=h}appendTo(s,u){for(let h=0;h<this.binaryShiftByteCount;h++)(h===0||h===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):h===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(u[this.binaryShiftStart+h],8)}addBinaryShift(s,u){return new Nc(this,s,u)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ym(j,s,u){return new Nc(j,s,u)}function Fa(j,s,u){return new Ws(j,s,u)}const Xm=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Mo=0,Ks=1,cr=2,Rf=3,wi=4,Of=new Ws(null,0,0),Wl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function kf(j){for(let s of j)F.fill(s,-1);return j[Mo][wi]=0,j[Ks][wi]=0,j[Ks][Mo]=28,j[Rf][wi]=0,j[cr][wi]=0,j[cr][Mo]=15,j}const Rc=kf(F.createInt32Array(6,6));class br{constructor(s,u,h,g){this.token=s,this.mode=u,this.binaryShiftByteCount=h,this.bitCount=g}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,u){let h=this.bitCount,g=this.token;if(s!==this.mode){let x=Wl[this.mode][s];g=Fa(g,x&65535,x>>16),h+=x>>16}let y=s===cr?4:5;return g=Fa(g,u,y),new br(g,s,0,h+y)}shiftAndAppend(s,u){let h=this.token,g=this.mode===cr?4:5;return h=Fa(h,Rc[this.mode][s],g),h=Fa(h,u,5),new br(h,this.mode,0,this.bitCount+g+5)}addBinaryShiftChar(s){let u=this.token,h=this.mode,g=this.bitCount;if(this.mode===wi||this.mode===cr){let _=Wl[h][Mo];u=Fa(u,_&65535,_>>16),g+=_>>16,h=Mo}let y=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,x=new br(u,h,this.binaryShiftByteCount+1,g+y);return x.binaryShiftByteCount===2078&&(x=x.endBinaryShift(s+1)),x}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let u=this.token;return u=Ym(u,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new br(u,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let u=this.bitCount+(Wl[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?u+=br.calculateBinaryShiftCost(s)-br.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(u+=10),u<=s.bitCount}toBitArray(s){let u=[];for(let g=this.endBinaryShift(s.length).token;g!==null;g=g.getPrevious())u.unshift(g);let h=new V;for(const g of u)g.appendTo(h,s);return h}toString(){return ae.format("%s bits=%d bytes=%d",Xm[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}br.INITIAL_STATE=new br(Of,Mo,0,0);function Jm(j){const s=ae.getCharCode(" "),u=ae.getCharCode("."),h=ae.getCharCode(",");j[Mo][s]=1;const g=ae.getCharCode("Z"),y=ae.getCharCode("A");for(let H=y;H<=g;H++)j[Mo][H]=H-y+2;j[Ks][s]=1;const x=ae.getCharCode("z"),_=ae.getCharCode("a");for(let H=_;H<=x;H++)j[Ks][H]=H-_+2;j[cr][s]=1;const T=ae.getCharCode("9"),O=ae.getCharCode("0");for(let H=O;H<=T;H++)j[cr][H]=H-O+2;j[cr][h]=12,j[cr][u]=13;const U=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let H=0;H<U.length;H++)j[Rf][ae.getCharCode(U[H])]=H;const $=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let H=0;H<$.length;H++)ae.getCharCode($[H])>0&&(j[wi][ae.getCharCode($[H])]=H);return j}const Oc=Jm(F.createInt32Array(5,256));class Ua{constructor(s){this.text=s}encode(){const s=ae.getCharCode(" "),u=ae.getCharCode(`
`);let h=Pc.singletonList(br.INITIAL_STATE);for(let y=0;y<this.text.length;y++){let x,_=y+1<this.text.length?this.text[y+1]:0;switch(this.text[y]){case ae.getCharCode("\r"):x=_===u?2:0;break;case ae.getCharCode("."):x=_===s?3:0;break;case ae.getCharCode(","):x=_===s?4:0;break;case ae.getCharCode(":"):x=_===s?5:0;break;default:x=0}x>0?(h=Ua.updateStateListForPair(h,y,x),y++):h=this.updateStateListForChar(h,y)}return Pc.min(h,(y,x)=>y.getBitCount()-x.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,u){const h=[];for(let g of s)this.updateStateForChar(g,u,h);return Ua.simplifyStates(h)}updateStateForChar(s,u,h){let g=this.text[u]&255,y=Oc[s.getMode()][g]>0,x=null;for(let _=0;_<=wi;_++){let T=Oc[_][g];if(T>0){if(x==null&&(x=s.endBinaryShift(u)),!y||_===s.getMode()||_===cr){const O=x.latchAndAppend(_,T);h.push(O)}if(!y&&Rc[s.getMode()][_]>=0){const O=x.shiftAndAppend(_,T);h.push(O)}}}if(s.getBinaryShiftByteCount()>0||Oc[s.getMode()][g]===0){let _=s.addBinaryShiftChar(u);h.push(_)}}static updateStateListForPair(s,u,h){const g=[];for(let y of s)this.updateStateForPair(y,u,h,g);return this.simplifyStates(g)}static updateStateForPair(s,u,h,g){let y=s.endBinaryShift(u);if(g.push(y.latchAndAppend(wi,h)),s.getMode()!==wi&&g.push(y.shiftAndAppend(wi,h)),h===3||h===4){let x=y.latchAndAppend(cr,16-h).latchAndAppend(cr,1);g.push(x)}if(s.getBinaryShiftByteCount()>0){let x=s.addBinaryShiftChar(u).addBinaryShiftChar(u+1);g.push(x)}}static simplifyStates(s){let u=[];for(const h of s){let g=!0;for(const y of u){if(y.isBetterThanOrEqualTo(h)){g=!1;break}h.isBetterThanOrEqualTo(y)&&(u=u.filter(x=>x!==y))}g&&u.push(h)}return u}}class At{constructor(){}static encodeBytes(s){return At.encode(s,At.DEFAULT_EC_PERCENT,At.DEFAULT_AZTEC_LAYERS)}static encode(s,u,h){let g=new Ua(s).encode(),y=L.truncDivision(g.getSize()*u,100)+11,x=g.getSize()+y,_,T,O,U,$;if(h!==At.DEFAULT_AZTEC_LAYERS){if(_=h<0,T=Math.abs(h),T>(_?At.MAX_NB_BITS_COMPACT:At.MAX_NB_BITS))throw new v(ae.format("Illegal value %s for layers",h));O=At.totalBitsInLayer(T,_),U=At.WORD_SIZE[T];let Ie=O-O%U;if($=At.stuffBits(g,U),$.getSize()+y>Ie)throw new v("Data to large for user specified layer");if(_&&$.getSize()>U*64)throw new v("Data to large for user specified layer")}else{U=0,$=null;for(let Ie=0;;Ie++){if(Ie>At.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(_=Ie<=3,T=_?Ie+1:Ie,O=At.totalBitsInLayer(T,_),x>O)continue;($==null||U!==At.WORD_SIZE[T])&&(U=At.WORD_SIZE[T],$=At.stuffBits(g,U));let wt=O-O%U;if(!(_&&$.getSize()>U*64)&&$.getSize()+y<=wt)break}}let H=At.generateCheckWords($,O,U),Y=$.getSize()/U,Q=At.generateModeMessage(_,T,Y),re=(_?11:14)+T*4,oe=new Int32Array(re),me;if(_){me=re;for(let Ie=0;Ie<oe.length;Ie++)oe[Ie]=Ie}else{me=re+1+2*L.truncDivision(L.truncDivision(re,2)-1,15);let Ie=L.truncDivision(re,2),wt=L.truncDivision(me,2);for(let pt=0;pt<Ie;pt++){let Mr=pt+L.truncDivision(pt,15);oe[Ie-pt-1]=wt-Mr-1,oe[Ie+pt]=wt+Mr+1}}let Oe=new he(me);for(let Ie=0,wt=0;Ie<T;Ie++){let pt=(T-Ie)*4+(_?9:12);for(let Mr=0;Mr<pt;Mr++){let Ei=Mr*2;for(let Bn=0;Bn<2;Bn++)H.get(wt+Ei+Bn)&&Oe.set(oe[Ie*2+Bn],oe[Ie*2+Mr]),H.get(wt+pt*2+Ei+Bn)&&Oe.set(oe[Ie*2+Mr],oe[re-1-Ie*2-Bn]),H.get(wt+pt*4+Ei+Bn)&&Oe.set(oe[re-1-Ie*2-Bn],oe[re-1-Ie*2-Mr]),H.get(wt+pt*6+Ei+Bn)&&Oe.set(oe[re-1-Ie*2-Mr],oe[Ie*2+Bn])}wt+=pt*8}if(At.drawModeMessage(Oe,_,me,Q),_)At.drawBullsEye(Oe,L.truncDivision(me,2),5);else{At.drawBullsEye(Oe,L.truncDivision(me,2),7);for(let Ie=0,wt=0;Ie<L.truncDivision(re,2)-1;Ie+=15,wt+=16)for(let pt=L.truncDivision(me,2)&1;pt<me;pt+=2)Oe.set(L.truncDivision(me,2)-wt,pt),Oe.set(L.truncDivision(me,2)+wt,pt),Oe.set(pt,L.truncDivision(me,2)-wt),Oe.set(pt,L.truncDivision(me,2)+wt)}let ke=new Nf;return ke.setCompact(_),ke.setSize(me),ke.setLayers(T),ke.setCodeWords(Y),ke.setMatrix(Oe),ke}static drawBullsEye(s,u,h){for(let g=0;g<h;g+=2)for(let y=u-g;y<=u+g;y++)s.set(y,u-g),s.set(y,u+g),s.set(u-g,y),s.set(u+g,y);s.set(u-h,u-h),s.set(u-h+1,u-h),s.set(u-h,u-h+1),s.set(u+h,u-h),s.set(u+h,u-h+1),s.set(u+h,u+h-1)}static generateModeMessage(s,u,h){let g=new V;return s?(g.appendBits(u-1,2),g.appendBits(h-1,6),g=At.generateCheckWords(g,28,4)):(g.appendBits(u-1,5),g.appendBits(h-1,11),g=At.generateCheckWords(g,40,4)),g}static drawModeMessage(s,u,h,g){let y=L.truncDivision(h,2);if(u)for(let x=0;x<7;x++){let _=y-3+x;g.get(x)&&s.set(_,y-5),g.get(x+7)&&s.set(y+5,_),g.get(20-x)&&s.set(_,y+5),g.get(27-x)&&s.set(y-5,_)}else for(let x=0;x<10;x++){let _=y-5+x+L.truncDivision(x,5);g.get(x)&&s.set(_,y-7),g.get(x+10)&&s.set(y+7,_),g.get(29-x)&&s.set(_,y+7),g.get(39-x)&&s.set(y-7,_)}}static generateCheckWords(s,u,h){let g=s.getSize()/h,y=new Tc(At.getGF(h)),x=L.truncDivision(u,h),_=At.bitsToWords(s,h,x);y.encode(_,x-g);let T=u%h,O=new V;O.appendBits(0,T);for(const U of Array.from(_))O.appendBits(U,h);return O}static bitsToWords(s,u,h){let g=new Int32Array(h),y,x;for(y=0,x=s.getSize()/u;y<x;y++){let _=0;for(let T=0;T<u;T++)_|=s.get(y*u+T)?1<<u-T-1:0;g[y]=_}return g}static getGF(s){switch(s){case 4:return Ke.AZTEC_PARAM;case 6:return Ke.AZTEC_DATA_6;case 8:return Ke.AZTEC_DATA_8;case 10:return Ke.AZTEC_DATA_10;case 12:return Ke.AZTEC_DATA_12;default:throw new v("Unsupported word size "+s)}}static stuffBits(s,u){let h=new V,g=s.getSize(),y=(1<<u)-2;for(let x=0;x<g;x+=u){let _=0;for(let T=0;T<u;T++)(x+T>=g||s.get(x+T))&&(_|=1<<u-1-T);(_&y)===y?(h.appendBits(_&y,u),x--):(_&y)===0?(h.appendBits(_|1,u),x--):h.appendBits(_,u)}return h}static totalBitsInLayer(s,u){return((u?88:112)+16*s)*s}}At.DEFAULT_EC_PERCENT=33,At.DEFAULT_AZTEC_LAYERS=0,At.MAX_NB_BITS=32,At.MAX_NB_BITS_COMPACT=4,At.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ja{encode(s,u,h,g){return this.encodeWithHints(s,u,h,g,null)}encodeWithHints(s,u,h,g,y){let x=Ic.ISO_8859_1,_=At.DEFAULT_EC_PERCENT,T=At.DEFAULT_AZTEC_LAYERS;return y!=null&&(y.has(Ln.CHARACTER_SET)&&(x=Pf.forName(y.get(Ln.CHARACTER_SET).toString())),y.has(Ln.ERROR_CORRECTION)&&(_=L.parseInt(y.get(Ln.ERROR_CORRECTION).toString())),y.has(Ln.AZTEC_LAYERS)&&(T=L.parseInt(y.get(Ln.AZTEC_LAYERS).toString()))),ja.encodeLayers(s,u,h,g,x,_,T)}static encodeLayers(s,u,h,g,y,x,_){if(u!==Ne.AZTEC)throw new v("Can only encode AZTEC, but got "+u);let T=At.encode(ae.getBytes(s,y),x,_);return ja.renderResult(T,h,g)}static renderResult(s,u,h){let g=s.getMatrix();if(g==null)throw new It;let y=g.getWidth(),x=g.getHeight(),_=Math.max(u,y),T=Math.max(h,x),O=Math.min(_/y,T/x),U=(_-y*O)/2,$=(T-x*O)/2,H=new he(_,T);for(let Y=0,Q=$;Y<x;Y++,Q+=O)for(let re=0,oe=U;re<y;re++,oe+=O)g.get(re,Y)&&H.setRegion(oe,Q,O,O);return H}}n.AbstractExpandedDecoder=vc,n.ArgumentException=m,n.ArithmeticException=_e,n.AztecCode=Nf,n.AztecCodeReader=No,n.AztecCodeWriter=ja,n.AztecDecoder=Rt,n.AztecDetector=Fs,n.AztecDetectorResult=fc,n.AztecEncoder=At,n.AztecHighLevelEncoder=Ua,n.AztecPoint=lr,n.BarcodeFormat=Ne,n.Binarizer=I,n.BinaryBitmap=E,n.BitArray=V,n.BitMatrix=he,n.BitSource=wc,n.BrowserAztecCodeReader=Gm,n.BrowserBarcodeReader=bf,n.BrowserCodeReader=Fe,n.BrowserDatamatrixCodeReader=Hm,n.BrowserMultiFormatReader=La,n.BrowserPDF417Reader=Hl,n.BrowserQRCodeReader=If,n.BrowserQRCodeSvgWriter=Zo,n.CharacterSetECI=X,n.ChecksumException=C,n.Code128Reader=Be,n.Code39Reader=Mn,n.DataMatrixDecodedBitStreamParser=vi,n.DataMatrixReader=yi,n.DecodeHintType=q,n.DecoderResult=Ee,n.DefaultGridSampler=Bl,n.DetectorResult=Bs,n.EAN13Reader=Qr,n.EncodeHintType=Ln,n.Exception=d,n.FormatException=W,n.GenericGF=Ke,n.GenericGFPoly=Me,n.GlobalHistogramBinarizer=we,n.GridSampler=Ll,n.GridSamplerInstance=pi,n.HTMLCanvasElementLuminanceSource=Ce,n.HybridBinarizer=ve,n.ITFReader=Lt,n.IllegalArgumentException=v,n.IllegalStateException=It,n.InvertedLuminanceSource=Se,n.LuminanceSource=xe,n.MathUtils=_t,n.MultiFormatOneDReader=js,n.MultiFormatReader=Gl,n.MultiFormatWriter=Wm,n.NotFoundException=ne,n.OneDReader=xn,n.PDF417DecodedBitStreamParser=ge,n.PDF417DecoderErrorCorrection=_c,n.PDF417Reader=er,n.PDF417ResultMetadata=$l,n.PerspectiveTransform=Zr,n.PlanarYUVLuminanceSource=ji,n.QRCodeByteMatrix=ql,n.QRCodeDataMask=yt,n.QRCodeDecodedBitStreamParser=tn,n.QRCodeDecoderErrorCorrectionLevel=jt,n.QRCodeDecoderFormatInformation=Jn,n.QRCodeEncoder=qt,n.QRCodeEncoderQRCode=Jo,n.QRCodeMaskUtil=nn,n.QRCodeMatrixUtil=it,n.QRCodeMode=nt,n.QRCodeReader=Er,n.QRCodeVersion=tt,n.QRCodeWriter=qs,n.RGBLuminanceSource=Ba,n.RSS14Reader=Kt,n.RSSExpandedReader=Ae,n.ReaderException=Hs,n.ReedSolomonDecoder=An,n.ReedSolomonEncoder=Tc,n.ReedSolomonException=dt,n.Result=Le,n.ResultMetadataType=rt,n.ResultPoint=$e,n.StringUtils=ae,n.UnsupportedOperationException=fe,n.VideoInputDevice=te,n.WhiteRectangleDetector=Di,n.WriterException=zt,n.ZXingArrays=F,n.ZXingCharset=Pf,n.ZXingInteger=L,n.ZXingStandardCharsets=Ic,n.ZXingStringBuilder=be,n.ZXingStringEncoding=se,n.ZXingSystem=P,n.createAbstractExpandedDecoder=wf,Object.defineProperty(n,"__esModule",{value:!0})}))})(gd,gd.exports)),gd.exports}var cn=aH();const lH=ro(cn),uH=Qx({__proto__:null,default:lH},[cn]);var WC=(function(){function e(t,n,r){if(this.formatMap=new Map([[ze.QR_CODE,cn.BarcodeFormat.QR_CODE],[ze.AZTEC,cn.BarcodeFormat.AZTEC],[ze.CODABAR,cn.BarcodeFormat.CODABAR],[ze.CODE_39,cn.BarcodeFormat.CODE_39],[ze.CODE_93,cn.BarcodeFormat.CODE_93],[ze.CODE_128,cn.BarcodeFormat.CODE_128],[ze.DATA_MATRIX,cn.BarcodeFormat.DATA_MATRIX],[ze.MAXICODE,cn.BarcodeFormat.MAXICODE],[ze.ITF,cn.BarcodeFormat.ITF],[ze.EAN_13,cn.BarcodeFormat.EAN_13],[ze.EAN_8,cn.BarcodeFormat.EAN_8],[ze.PDF_417,cn.BarcodeFormat.PDF_417],[ze.RSS_14,cn.BarcodeFormat.RSS_14],[ze.RSS_EXPANDED,cn.BarcodeFormat.RSS_EXPANDED],[ze.UPC_A,cn.BarcodeFormat.UPC_A],[ze.UPC_E,cn.BarcodeFormat.UPC_E],[ze.UPC_EAN_EXTENSION,cn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!uH)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(t),o=new Map;o.set(cn.DecodeHintType.POSSIBLE_FORMATS,i),o.set(cn.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,i){try{r(n.decode(t))}catch(o){i(o)}})},e.prototype.decode=function(t){var n=new cn.MultiFormatReader(this.verbose,this.hints),r=new cn.HTMLCanvasElementLuminanceSource(t),i=new cn.BinaryBitmap(new cn.HybridBinarizer(r)),o=n.decode(i);return{text:o.text,format:G3.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),cH=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(m){try{d(r.next(m))}catch(v){a(v)}}function f(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(c,f)}d((r=r.apply(e,t||[])).next())})},dH=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},KC=(function(){function e(t,n,r){if(this.formatMap=new Map([[ze.QR_CODE,"qr_code"],[ze.AZTEC,"aztec"],[ze.CODABAR,"codabar"],[ze.CODE_39,"code_39"],[ze.CODE_93,"code_93"],[ze.CODE_128,"code_128"],[ze.DATA_MATRIX,"data_matrix"],[ze.ITF,"itf"],[ze.EAN_13,"ean_13"],[ze.EAN_8,"ean_8"],[ze.PDF_417,"pdf417"],[ze.UPC_A,"upc_a"],[ze.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return cH(this,void 0,void 0,function(){var n,r;return dH(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:G3.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,i=0,o=t;i<o.length;i++){var a=o[i],c=a.boundingBox.width*a.boundingBox.height;c>r&&(r=c,n=a)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),YC=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(m){try{d(r.next(m))}catch(v){a(v)}}function f(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(c,f)}d((r=r.apply(e,t||[])).next())})},XC=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},fH=(function(){function e(t,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&KC.isSupported()?(this.primaryDecoder=new KC(t,r,i),this.secondaryDecoder=new WC(t,r,i)):this.primaryDecoder=new WC(t,r,i)}return e.prototype.decodeAsync=function(t){return YC(this,void 0,void 0,function(){var n;return XC(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return YC(this,void 0,void 0,function(){var n,r;return XC(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];t+=i}var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),Iw=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),B0=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(m){try{d(r.next(m))}catch(v){a(v)}}function f(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(c,f)}d((r=r.apply(e,t||[])).next())})},F0=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},q3=(function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e})(),hH=(function(e){Iw(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(q3),pH=(function(e){Iw(t,e);function t(n){return e.call(this,"zoom",n)||this}return t})(hH),mH=(function(e){Iw(t,e);function t(n){return e.call(this,"torch",n)||this}return t})(q3),gH=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new pH(this.track)},e.prototype.torchFeature=function(){return new mH(this.track)},e})(),vH=(function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,i=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,i),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return B0(this,void 0,void 0,function(){var o,a;return F0(this,function(c){switch(c.label){case 0:return o=new e(t,n,i),r.aspectRatio?(a={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(a)]):[3,2];case 1:c.sent(),c.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return B0(this,void 0,void 0,function(){return F0(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var i=t.mediaStream.getVideoTracks(),o=i.length,a=0;t.mediaStream.getVideoTracks().forEach(function(c){t.mediaStream.removeTrack(c),c.stop(),++a,a>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new gH(this.getFirstTrackOrFail())},e})(),yH=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return B0(this,void 0,void 0,function(){return F0(this,function(i){return[2,vH.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return B0(this,void 0,void 0,function(){var n,r;return F0(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new e(r)]}})})},e})(),JC=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(m){try{d(r.next(m))}catch(v){a(v)}}function f(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(c,f)}d((r=r.apply(e,t||[])).next())})},ZC=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},xH=(function(){function e(){}return e.failIfNotSupported=function(){return JC(this,void 0,void 0,function(){return ZC(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return JC(this,void 0,void 0,function(){return ZC(this,function(n){return[2,yH.create(t)]})})},e})(),wH=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(m){try{d(r.next(m))}catch(v){a(v)}}function f(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(c,f)}d((r=r.apply(e,t||[])).next())})},EH=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},bH=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Au.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Au.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return wH(this,void 0,void 0,function(){var t,n,r,i,o,a,c;return EH(this,function(f){switch(f.label){case 0:return t=function(d){for(var m=d.getVideoTracks(),v=0,E=m;v<E.length;v++){var C=E[v];C.enabled=!1,C.stop(),d.removeTrack(C)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=f.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=f.sent(),i=[],o=0,a=r;o<a.length;o++)c=a[o],c.kind==="videoinput"&&i.push({id:c.deviceId,label:c.label});return t(n),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(o){for(var a=[],c=0,f=o;c<f.length;c++){var d=f[c];d.kind==="video"&&a.push({id:d.id,label:d.label})}t(a)},i=MediaStreamTrack;i.getSources(r)})},e})(),Rn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Rn||(Rn={}));var _H=(function(){function e(){this.state=Rn.NOT_STARTED,this.onGoingTransactionNewState=Rn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Rn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Rn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Rn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Rn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Rn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Rn.UNKNOWN:throw"Transition from unknown is not allowed";case Rn.NOT_STARTED:this.failIfNewStateIs(t,[Rn.PAUSED]);break;case Rn.SCANNING:break;case Rn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];if(t===o)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),SH=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Rn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Rn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Rn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Rn.PAUSED},e})(),CH=(function(){function e(){}return e.create=function(){return new SH(new _H)},e})(),AH=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ci=(function(e){AH(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(rH),TH=(function(){function e(t,n){this.logger=n,this.fps=Ci.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Ci.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?H3.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!cs(this.qrbox)},e.create=function(t,n){return new e(t,n)},e})(),IH=(function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new oH(this.verbose),this.qrcode=new fH(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=CH.create()}return e.prototype.start=function(t,n,r,i){var o=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var a;i?a=i:a=this.verbose?this.logger.log:function(){};var c=TH.create(n,this.logger);this.clearElement();var f=!1;c.videoConstraints&&(c.isMediaStreamConstraintsValid()?f=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=f,m=document.getElementById(this.elementId);m.clientWidth?m.clientWidth:Ci.DEFAULT_WIDTH,m.style.position="relative",this.shouldScan=!0,this.element=m;var v=this,E=this.stateManagerProxy.startTransition(Rn.SCANNING);return new Promise(function(C,I){var P=d?c.videoConstraints:v.createVideoConstraints(t);if(!P){E.cancel(),I("videoConstraints should be defined");return}var N={};(!d||c.aspectRatio)&&(N.aspectRatio=c.aspectRatio);var D={onRenderSurfaceReady:function(F,L){v.setupUi(F,L,c),v.isScanning=!0,v.foreverScan(c,r,a)}};xH.failIfNotSupported().then(function(F){F.create(P).then(function(L){return L.render(o.element,N,D).then(function(V){v.renderedCamera=V,E.execute(),C(null)}).catch(function(V){E.cancel(),I(V)})}).catch(function(L){E.cancel(),I(Au.errorGettingUserMedia(L))})}).catch(function(F){E.cancel(),I(Au.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Rn.PAUSED),this.showPausedState(),(cs(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Rn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Rn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var o=document.getElementById(Ci.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(cs(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var a=new Image;a.onload=function(){var c=a.width,f=a.height,d=document.getElementById(r.elementId),m=d.clientWidth?d.clientWidth:Ci.DEFAULT_WIDTH,v=Math.max(d.clientHeight?d.clientHeight:f,Ci.FILE_SCAN_MIN_HEIGHT),E=r.computeCanvasDrawConfig(c,f,m,v);if(n){var C=r.createCanvasElement(m,v,"qr-canvas-visible");C.style.display="inline-block",d.appendChild(C);var I=C.getContext("2d");if(!I)throw"Unable to get 2d context from canvas";I.canvas.width=m,I.canvas.height=v,I.drawImage(a,0,0,c,f,E.x,E.y,E.width,E.height)}var P=Ci.FILE_SCAN_HIDDEN_CANVAS_PADDING,N=Math.max(a.width,E.width),D=Math.max(a.height,E.height),F=N+2*P,L=D+2*P,V=r.createCanvasElement(F,L);d.appendChild(V);var G=V.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=F,G.canvas.height=L,G.drawImage(a,0,0,c,f,P,P,N,D);try{r.qrcode.decodeRobustlyAsync(V).then(function(q){i(HC.createFromQrcodeResult(q))}).catch(o)}catch(q){o("QR code parse error, error = ".concat(q))}},a.onerror=o,a.onabort=o,a.onstalled=o,a.onsuspend=o,a.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return bH.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!H3.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[ze.QR_CODE,ze.AZTEC,ze.CODABAR,ze.CODE_39,ze.CODE_93,ze.CODE_128,ze.DATA_MATRIX,ze.MAXICODE,ze.ITF,ze.EAN_13,ze.EAN_8,ze.PDF_417,ze.RSS_14,ze.RSS_EXPANDED,ze.UPC_A,ze.UPC_E,ze.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=t.formatsToSupport;i<o.length;i++){var a=o[i];nH(a)?r.push(a):this.logger.warn("Invalid format: ".concat(a," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(cs(t))return!0;if(!cs(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(cs(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return cs(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var a=this.toQrdimensions(t,n,o),c=function(d){if(d<Ci.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ci.MIN_QR_BOX_SIZE,"px.")},f=function(d){return d>t&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=t),d};c(a.width),c(a.height),a.width=f(a.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var i=cs(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(t,n,i);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var a=r.isShadedBoxEnabled()&&o.height<=n,c={x:0,y:0,width:t,height:n},f=a?this.getShadedRegionBounds(t,n,o):c,d=this.createCanvasElement(f.width,f.height),m={willReadFrequently:!0},v=d.getContext("2d",m);v.canvas.width=f.width,v.canvas.height=f.height,this.element.append(d),a&&this.possiblyInsertShadingElement(this.element,t,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=f,this.context=v,this.canvasElement=d},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Au.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,HC.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=Au.codeParseError(i);return n(o,iH.createFrom(o)),!1})},e.prototype.foreverScan=function(t,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),a=o.videoWidth/o.clientWidth,c=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var f=this.qrRegion.width*a,d=this.qrRegion.height*c,m=this.qrRegion.x*a,v=this.qrRegion.y*c;this.context.drawImage(o,m,v,f,d,0,0,this.qrRegion.width,this.qrRegion.height);var E=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,n,r)},i.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(C){!C&&t.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){E()})):E()}).catch(function(C){i.logger.logError("Error happend while scanning context",C),E()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",a=function(I){if(I in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(I,"'")},c=Object.keys(t);if(c.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(c.length," keys");var f=Object.keys(t)[0];if(f!==n&&f!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(f===n){var d=t.facingMode;if(typeof d=="string"){if(a(d))return{facingMode:d}}else if(typeof d=="object")if(o in d){if(a(d["".concat(o)]))return{facingMode:{exact:d["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var m=typeof d;throw"Invalid type of 'facingMode' = ".concat(m)}}else{var v=t.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(o in v)return{deviceId:{exact:v["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var E=typeof v;throw"Invalid type of 'deviceId' = ".concat(E)}}}var C=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(C)},e.prototype.computeCanvasDrawConfig=function(t,n,r,i){if(t<=r&&n<=i){var o=(r-t)/2,a=(i-n)/2;return{x:o,y:a,width:t,height:n}}else{var c=t,f=n;return t>r&&(n=r/t*n,t=r),n>i&&(t=i/n*t,n=i),this.logger.log("Image downsampled from "+"".concat(c,"X").concat(f)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Ci.BORDER_SHADER_MATCH_COLOR:Ci.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var i=t,o=n,a=document.createElement("canvas");return a.style.width="".concat(i,"px"),a.style.height="".concat(o,"px"),a.style.display="none",a.id=cs(r)?"qr-canvas":r,a},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,i){if(!(n-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var a=(n-i.width)/2,c=(r-i.height)/2;if(o.style.borderLeft="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(Ci.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var f=5,d=40;this.insertShaderBorders(o,d,f,-f,null,0,!0),this.insertShaderBorders(o,d,f,-f,null,0,!1),this.insertShaderBorders(o,d,f,null,-f,0,!0),this.insertShaderBorders(o,d,f,null,-f,0,!1),this.insertShaderBorders(o,f,d+f,-f,null,-f,!0),this.insertShaderBorders(o,f,d+f,null,-f,-f,!0),this.insertShaderBorders(o,f,d+f,-f,null,-f,!1),this.insertShaderBorders(o,f,d+f,null,-f,-f,!1),this.hasBorderShaders=!0}t.append(o)}},e.prototype.insertShaderBorders=function(t,n,r,i,o,a,c){var f=document.createElement("div");f.style.position="absolute",f.style.backgroundColor=Ci.BORDER_SHADER_DEFAULT_COLOR,f.style.width="".concat(n,"px"),f.style.height="".concat(r,"px"),i!==null&&(f.style.top="".concat(i,"px")),o!==null&&(f.style.bottom="".concat(o,"px")),c?f.style.left="".concat(a,"px"):f.style.right="".concat(a,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(f),t.appendChild(f)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),QC;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(QC||(QC={}));const PH=({perfume:e,onSell:t})=>{const[n,r]=M.useState(null);M.useEffect(()=>{i()},[]);const i=async()=>{const{data:a}=await Ht.from("inventory").select("quantity").eq("product_id",e.id).single();r(a?a.quantity:e.stock?5:0)},o=async()=>{if(!window.confirm(`Confirmar venta de ${e.name}?`))return;const{data:a,error:c}=await Ht.rpc("sell_product",{p_id:e.id,qty:1});c?alert("Error: "+c.message):a.success?(r(a.new_stock),t(e.price10ml,`Venta: ${e.name} (10ml)`),alert("Venta exitosa. Nuevo stock: "+a.new_stock)):alert("Error: "+a.message)};return R.jsxs("tr",{className:"border-b border-stone-700 hover:bg-stone-700/20",children:[R.jsx("td",{className:"px-3 py-2 font-medium text-white",children:e.name}),R.jsx("td",{className:"px-3 py-2 text-center",children:R.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${n!==null&&n>0?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:n!==null?n:"..."})}),R.jsxs("td",{className:"px-3 py-2 text-center text-green-400",children:["$",e.price10ml.toLocaleString()]}),R.jsx("td",{className:"px-3 py-2 text-right",children:R.jsx("button",{onClick:o,disabled:n!==null&&n<=0,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-stone-600 disabled:cursor-not-allowed text-white px-3 py-1 rounded text-xs font-bold shadow-lg",children:"Vender"})})]})},NH=({onLogout:e})=>{const[t,n]=M.useState(""),[r,i]=M.useState(""),[o,a]=M.useState(!1),[c,f]=M.useState(null),[d,m]=M.useState("loyalty"),[v,E]=M.useState("Corte"),[C,I]=M.useState("7000"),[P,N]=M.useState("0"),[D,F]=M.useState(null);M.useEffect(()=>{if(o&&!c){const Z=new IH("reader"),X={fps:10,qrbox:{width:250,height:250}};return Z.start({facingMode:"environment"},X,V,G).catch(fe=>{console.error("Error starting scanner:",fe),i("Error iniciando cmara: "+fe)}),()=>{Z.stop().then(()=>Z.clear()).catch(console.error)}}},[o,c]);const L=async(Z,X,fe,se)=>{if(X<=0)return;const{error:ae}=await Ht.from("transactions").insert({client_id:Z,amount:X,type:fe,description:se});ae&&console.error("Error recording transaction:",ae)},V=async(Z,X)=>{if(!c){f(Z),a(!1);try{i("Procesando...");const{data:fe,error:se}=await Ht.rpc("register_visit",{token_input:Z});if(se)throw se;if(fe.success){if(i("OK: "+fe.message+" Visitas: "+fe.new_visits),d==="hair"){const ae=parseInt(C)||0,{data:be}=await Ht.from("clients").select("id").eq("member_token",Z).single();be&&await L(be.id,ae,"service",`Servicio: ${v}`)}}else i("Error: "+fe.message);setTimeout(()=>{f(null),i("")},4e3)}catch(fe){console.error(fe),i("Error al procesar el cdigo."),f(null)}}},G=Z=>{console.warn(Z)},q=async()=>{if(!D||!window.confirm("Confirmar canje del 10% de Descuento?"))return;const{data:Z,error:X}=await Ht.rpc("redeem_discount_5th",{token_input:D.member_token});if(X)i("Error: "+X.message);else if(i(Z.message),Z.success){const{data:fe}=await Ht.from("clients").select("*").eq("id",D.id).single();F(fe)}},W=async()=>{if(!(t.length<8))try{const{data:Z,error:X}=await Ht.from("clients").select("*").eq("phone",t).single();if(X&&X.code!=="PGRST116"){alert("Error al buscar cliente");return}const se=(Z?Z.visits:0)+1,{data:ae,error:be}=await Ht.from("clients").upsert({phone:t,visits:se,last_visit:new Date().toISOString()},{onConflict:"phone"}).select().single();if(be){console.error(be),alert("Error al actualizar visita");return}const he=d==="hair"?parseInt(C)||0:parseInt(P)||0;await L(ae.id,he,"service",d==="hair"?`Manual: ${v}`:"Manual: Visita"),F(ae),i("Visita registrada para "+t+". Total: "+se),n("")}catch(Z){console.error(Z),alert("Error de conexin")}};return R.jsxs("div",{className:"max-w-2xl mx-auto p-4 py-12",children:[R.jsxs("h2",{className:"text-3xl serif text-stone-900 mb-8 border-b pb-4 flex justify-between items-center",children:[R.jsx("span",{children:"Panel de Atencin"}),R.jsx("button",{onClick:e,className:"text-sm bg-stone-200 px-3 py-1 rounded hover:bg-stone-300 transition",children:"Salir"})]}),R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 mb-8",children:[R.jsxs("h3",{className:"text-xl font-bold text-stone-900 mb-4 flex items-center gap-2",children:[R.jsx(W5,{className:"text-green-600"}),"Registrar Visita Manual"]}),R.jsx("p",{className:"text-sm text-stone-500 mb-6",children:"Ingrese nmero y monto para registrar."}),R.jsxs("div",{className:"flex gap-4 mb-4 flex-wrap",children:[R.jsx("input",{type:"tel",value:t,onChange:Z=>n(Z.target.value),placeholder:"+569...",className:"flex-1 min-w-[150px] px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-green-600 outline-none"}),d==="loyalty"&&R.jsx("input",{type:"number",value:P,onChange:Z=>N(Z.target.value),placeholder:"Monto ($)",className:"w-32 px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-green-600 outline-none"}),R.jsxs("button",{onClick:W,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition flex items-center gap-2",children:[R.jsx(X5,{size:18}),"Registrar"]})]}),R.jsx("div",{className:"flex justify-center mb-6",children:R.jsxs("div",{className:"bg-stone-800 p-1 rounded-xl inline-flex",children:[R.jsx("button",{onClick:()=>m("loyalty"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${d==="loyalty"?"bg-amber-500 text-stone-900":"text-stone-400 hover:text-white"}`,children:"Visitas"}),R.jsx("button",{onClick:()=>m("hair"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${d==="hair"?"bg-purple-500 text-white":"text-stone-400 hover:text-white"}`,children:"Peluquera"}),R.jsx("button",{onClick:()=>m("inventory"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${d==="inventory"?"bg-blue-500 text-white":"text-stone-400 hover:text-white"}`,children:"Inventario"})]})}),R.jsxs("div",{className:"bg-stone-800 p-6 rounded-2xl shadow-xl border border-white/5",children:[R.jsx("h3",{className:"serif text-xl mb-4 text-center text-white",children:d==="loyalty"?"Registrar Visita":d==="hair"?"Registrar Servicio Peluquera":"Gestin de Inventario"}),d==="inventory"&&R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"w-full text-xs text-left text-stone-300",children:[R.jsx("thead",{className:"text-xs text-stone-400 uppercase bg-stone-700/50",children:R.jsxs("tr",{children:[R.jsx("th",{className:"px-3 py-2",children:"Perfume"}),R.jsx("th",{className:"px-3 py-2 text-center",children:"Stock"}),R.jsx("th",{className:"px-3 py-2 text-center",children:"Precio 10ml"}),R.jsx("th",{className:"px-3 py-2 text-right",children:"Accin"})]})}),R.jsx("tbody",{children:ya.map(Z=>R.jsx(PH,{perfume:Z,onSell:(X,fe)=>L(D?.id||"anon",X,"product",fe)},Z.id))})]})}),d==="hair"&&R.jsxs("div",{className:"mb-4 space-y-3",children:[R.jsxs("select",{value:v,onChange:Z=>E(Z.target.value),className:"w-full bg-stone-900 border border-white/10 rounded-lg px-3 py-2 text-white",children:[R.jsx("option",{value:"Corte",children:"Corte ($7.000+)"}),R.jsx("option",{value:"Lavado",children:"Lavado ($5.000)"}),R.jsx("option",{value:"Tintura",children:"Tintura ($10.000+)"}),R.jsx("option",{value:"Masaje",children:"Masaje ($5.000)"})]}),R.jsx("input",{type:"number",value:C,onChange:Z=>I(Z.target.value),placeholder:"Precio Real",className:"w-full bg-stone-900 border border-white/10 rounded-lg px-3 py-2 text-white"})]}),d!=="inventory"&&R.jsxs("button",{onClick:()=>a(!0),className:`w-full py-4 rounded-xl flex items-center justify-center gap-2 font-bold text-lg transition ${d==="hair"?"bg-purple-600 hover:bg-purple-500 text-white":"bg-amber-500 hover:bg-amber-400 text-stone-900"}`,children:[R.jsx(K5,{size:24}),d==="hair"?"Escanear para Servicio":"Escanear Tarjeta"]}),r&&R.jsx("div",{className:"mt-4 p-3 bg-green-500/20 text-green-400 rounded-lg text-sm font-medium whitespace-pre-wrap",children:r}),D&&R.jsxs("div",{className:"mt-6 border-t border-white/10 pt-4",children:[R.jsxs("h3",{className:"font-bold text-white mb-3",children:["Cliente: ",D.phone]}),R.jsx("div",{className:"space-y-3",children:D.discount_5th_visit_available?R.jsx("button",{onClick:q,className:"w-full bg-purple-600 text-white py-2 rounded",children:"Canjear 10%"}):R.jsx("div",{className:"text-stone-500 text-xs text-center",children:"Sin descuento disponible"})})]})]}),o&&R.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center p-4",children:R.jsxs("div",{className:"bg-white p-4 rounded-2xl w-full max-w-sm relative",children:[R.jsx("button",{onClick:()=>a(!1),className:"absolute -top-12 right-0 text-white p-2",children:R.jsx(Hd,{size:32})}),R.jsx("h3",{className:"text-center font-bold mb-4",children:"Escanea el Cdigo del Cliente"}),R.jsx("div",{id:"reader",className:"w-full bg-stone-100 rounded-lg overflow-hidden"})]})})]})]})};function W3(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=W3(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ft(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=W3(e))&&(r&&(r+=" "),r+=t);return r}var RH=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Pw(e){if(typeof e!="string")return!1;var t=RH;return t.includes(e)}var OH=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],kH=new Set(OH);function K3(e){return typeof e!="string"?!1:kH.has(e)}function Y3(e){return typeof e=="string"&&e.startsWith("data-")}function Ri(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(K3(n)||Y3(n))&&(t[n]=e[n]);return t}function Fu(e){if(e==null)return null;if(M.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ri(t)}return typeof e=="object"&&!Array.isArray(e)?Ri(e):null}function Oi(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(K3(n)||Y3(n)||Pw(n))&&(t[n]=e[n]);return t}var MH=["children","width","height","viewBox","className","style","title","desc"];function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yy.apply(null,arguments)}function DH(e,t){if(e==null)return{};var n,r,i=LH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function LH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Nw=M.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:o,className:a,style:c,title:f,desc:d}=e,m=DH(e,MH),v=o||{width:r,height:i,x:0,y:0},E=Ft("recharts-surface",a);return M.createElement("svg",Yy({},Oi(m),{className:E,width:r,height:i,style:c,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),M.createElement("title",null,f),M.createElement("desc",null,d),n)}),BH=["children","className"];function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xy.apply(null,arguments)}function FH(e,t){if(e==null)return{};var n,r,i=UH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function UH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var jn=M.forwardRef((e,t)=>{var{children:n,className:r}=e,i=FH(e,BH),o=Ft("recharts-layer",r);return M.createElement("g",Xy({className:o},Oi(i),{ref:t}),n)}),X3=M.createContext(null),jH=()=>M.useContext(X3);function sn(e){return function(){return e}}const J3=Math.cos,U0=Math.sin,Io=Math.sqrt,j0=Math.PI,Wp=2*j0,Jy=Math.PI,Zy=2*Jy,ol=1e-6,VH=Zy-ol;function Z3(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function $H(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Z3;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class zH{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Z3:$H(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,c=this._y1,f=r-t,d=i-n,m=a-t,v=c-n,E=m*m+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(E>ol)if(!(Math.abs(v*f-d*m)>ol)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let C=r-a,I=i-c,P=f*f+d*d,N=C*C+I*I,D=Math.sqrt(P),F=Math.sqrt(E),L=o*Math.tan((Jy-Math.acos((P+E-N)/(2*D*F)))/2),V=L/F,G=L/D;Math.abs(V-1)>ol&&this._append`L${t+V*m},${n+V*v}`,this._append`A${o},${o},0,0,${+(v*C>m*I)},${this._x1=t+G*f},${this._y1=n+G*d}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),f=r*Math.sin(i),d=t+c,m=n+f,v=1^a,E=a?i-o:o-i;this._x1===null?this._append`M${d},${m}`:(Math.abs(this._x1-d)>ol||Math.abs(this._y1-m)>ol)&&this._append`L${d},${m}`,r&&(E<0&&(E=E%Zy+Zy),E>VH?this._append`A${r},${r},0,1,${v},${t-c},${n-f}A${r},${r},0,1,${v},${this._x1=d},${this._y1=m}`:E>ol&&this._append`A${r},${r},0,${+(E>=Jy)},${v},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Rw(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new zH(t)}function Ow(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Q3(e){this._context=e}Q3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Kp(e){return new Q3(e)}function ek(e){return e[0]}function tk(e){return e[1]}function nk(e,t){var n=sn(!0),r=null,i=Kp,o=null,a=Rw(c);e=typeof e=="function"?e:e===void 0?ek:sn(e),t=typeof t=="function"?t:t===void 0?tk:sn(t);function c(f){var d,m=(f=Ow(f)).length,v,E=!1,C;for(r==null&&(o=i(C=a())),d=0;d<=m;++d)!(d<m&&n(v=f[d],d,f))===E&&((E=!E)?o.lineStart():o.lineEnd()),E&&o.point(+e(v,d,f),+t(v,d,f));if(C)return o=null,C+""||null}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:sn(+f),c):e},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:sn(+f),c):t},c.defined=function(f){return arguments.length?(n=typeof f=="function"?f:sn(!!f),c):n},c.curve=function(f){return arguments.length?(i=f,r!=null&&(o=i(r)),c):i},c.context=function(f){return arguments.length?(f==null?r=o=null:o=i(r=f),c):r},c}function Vh(e,t,n){var r=null,i=sn(!0),o=null,a=Kp,c=null,f=Rw(d);e=typeof e=="function"?e:e===void 0?ek:sn(+e),t=typeof t=="function"?t:sn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?tk:sn(+n);function d(v){var E,C,I,P=(v=Ow(v)).length,N,D=!1,F,L=new Array(P),V=new Array(P);for(o==null&&(c=a(F=f())),E=0;E<=P;++E){if(!(E<P&&i(N=v[E],E,v))===D)if(D=!D)C=E,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),I=E-1;I>=C;--I)c.point(L[I],V[I]);c.lineEnd(),c.areaEnd()}D&&(L[E]=+e(N,E,v),V[E]=+t(N,E,v),c.point(r?+r(N,E,v):L[E],n?+n(N,E,v):V[E]))}if(F)return c=null,F+""||null}function m(){return nk().defined(i).curve(a).context(o)}return d.x=function(v){return arguments.length?(e=typeof v=="function"?v:sn(+v),r=null,d):e},d.x0=function(v){return arguments.length?(e=typeof v=="function"?v:sn(+v),d):e},d.x1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:sn(+v),d):r},d.y=function(v){return arguments.length?(t=typeof v=="function"?v:sn(+v),n=null,d):t},d.y0=function(v){return arguments.length?(t=typeof v=="function"?v:sn(+v),d):t},d.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:sn(+v),d):n},d.lineX0=d.lineY0=function(){return m().x(e).y(t)},d.lineY1=function(){return m().x(e).y(n)},d.lineX1=function(){return m().x(r).y(t)},d.defined=function(v){return arguments.length?(i=typeof v=="function"?v:sn(!!v),d):i},d.curve=function(v){return arguments.length?(a=v,o!=null&&(c=a(o)),d):a},d.context=function(v){return arguments.length?(v==null?o=c=null:c=a(o=v),d):o},d}class rk{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function GH(e){return new rk(e,!0)}function HH(e){return new rk(e,!1)}const kw={draw(e,t){const n=Io(t/j0);e.moveTo(n,0),e.arc(0,0,n,0,Wp)}},qH={draw(e,t){const n=Io(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},ik=Io(1/3),WH=ik*2,KH={draw(e,t){const n=Io(t/WH),r=n*ik;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},YH={draw(e,t){const n=Io(t),r=-n/2;e.rect(r,r,n,n)}},XH=.8908130915292852,ok=U0(j0/10)/U0(7*j0/10),JH=U0(Wp/10)*ok,ZH=-J3(Wp/10)*ok,QH={draw(e,t){const n=Io(t*XH),r=JH*n,i=ZH*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const a=Wp*o/5,c=J3(a),f=U0(a);e.lineTo(f*n,-c*n),e.lineTo(c*r-f*i,f*r+c*i)}e.closePath()}},O1=Io(3),eq={draw(e,t){const n=-Io(t/(O1*3));e.moveTo(0,n*2),e.lineTo(-O1*n,-n),e.lineTo(O1*n,-n),e.closePath()}},Wi=-.5,Ki=Io(3)/2,Qy=1/Io(12),tq=(Qy/2+1)*3,nq={draw(e,t){const n=Io(t/tq),r=n/2,i=n*Qy,o=r,a=n*Qy+n,c=-o,f=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(c,f),e.lineTo(Wi*r-Ki*i,Ki*r+Wi*i),e.lineTo(Wi*o-Ki*a,Ki*o+Wi*a),e.lineTo(Wi*c-Ki*f,Ki*c+Wi*f),e.lineTo(Wi*r+Ki*i,Wi*i-Ki*r),e.lineTo(Wi*o+Ki*a,Wi*a-Ki*o),e.lineTo(Wi*c+Ki*f,Wi*f-Ki*c),e.closePath()}};function rq(e,t){let n=null,r=Rw(i);e=typeof e=="function"?e:sn(e||kw),t=typeof t=="function"?t:sn(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:sn(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:sn(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function V0(){}function $0(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function sk(e){this._context=e}sk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function iq(e){return new sk(e)}function ak(e){this._context=e}ak.prototype={areaStart:V0,areaEnd:V0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oq(e){return new ak(e)}function lk(e){this._context=e}lk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:$0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sq(e){return new lk(e)}function uk(e){this._context=e}uk.prototype={areaStart:V0,areaEnd:V0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function aq(e){return new uk(e)}function eA(e){return e<0?-1:1}function tA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),c=(o*i+a*r)/(r+i);return(eA(o)+eA(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(c))||0}function nA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function k1(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,c=(o-r)/3;e._context.bezierCurveTo(r+c,i+c*t,o-c,a-c*n,o,a)}function z0(e){this._context=e}z0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:k1(this,this._t0,nA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,k1(this,nA(this,n=tA(this,e,t)),n);break;default:k1(this,this._t0,n=tA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function ck(e){this._context=new dk(e)}(ck.prototype=Object.create(z0.prototype)).point=function(e,t){z0.prototype.point.call(this,t,e)};function dk(e){this._context=e}dk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function lq(e){return new z0(e)}function uq(e){return new ck(e)}function fk(e){this._context=e}fk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=rA(e),i=rA(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function rA(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function cq(e){return new fk(e)}function Yp(e,t){this._context=e,this._t=t}Yp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function dq(e){return new Yp(e,.5)}function fq(e){return new Yp(e,0)}function hq(e){return new Yp(e,1)}function wl(e,t){if((a=e.length)>1)for(var n=1,r,i,o=e[t[0]],a,c=o.length;n<a;++n)for(i=o,o=e[t[n]],r=0;r<c;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function ex(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function pq(e,t){return e[t]}function mq(e){const t=[];return t.key=e,t}function gq(){var e=sn([]),t=ex,n=wl,r=pq;function i(o){var a=Array.from(e.apply(this,arguments),mq),c,f=a.length,d=-1,m;for(const v of o)for(c=0,++d;c<f;++c)(a[c][d]=[0,+r(v,a[c].key,d,o)]).data=v;for(c=0,m=Ow(t(a));c<f;++c)a[m[c]].index=c;return n(a,m),a}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:sn(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:sn(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?ex:typeof o=="function"?o:sn(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??wl,i):n},i}function vq(e,t){if((r=e.length)>0){for(var n,r,i=0,o=e[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=e[n][i][1]||0;if(a)for(n=0;n<r;++n)e[n][i][1]/=a}wl(e,t)}}function yq(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,o=r.length;n<o;++n){for(var a=0,c=0;a<i;++a)c+=e[a][n][1]||0;r[n][1]+=r[n][0]=-c/2}wl(e,t)}}function xq(e,t){if(!(!((a=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var c=0,f=0,d=0;c<a;++c){for(var m=e[t[c]],v=m[r][1]||0,E=m[r-1][1]||0,C=(v-E)/2,I=0;I<c;++I){var P=e[t[I]],N=P[r][1]||0,D=P[r-1][1]||0;C+=N-D}f+=v,d+=C*v}i[r-1][1]+=i[r-1][0]=n,f&&(n-=d/f)}i[r-1][1]+=i[r-1][0]=n,wl(e,t)}}var M1={},D1={},iA;function wq(){return iA||(iA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(D1)),D1}var L1={},oA;function hk(){return oA||(oA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(L1)),L1}var B1={},sA;function Mw(){return sA||(sA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(B1)),B1}var F1={},U1={},aA;function Eq(){return aA||(aA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(U1)),U1}var lA;function Dw(){return lA||(lA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Eq(),n=Mw();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const o=[],a=i.length;if(a===0)return o;let c=0,f="",d="",m=!1;for(i.charCodeAt(0)===46&&(o.push(""),c++);c<a;){const v=i[c];d?v==="\\"&&c+1<a?(c++,f+=i[c]):v===d?d="":f+=v:m?v==='"'||v==="'"?d=v:v==="]"?(m=!1,o.push(f),f=""):f+=v:v==="["?(m=!0,f&&(o.push(f),f="")):v==="."?f&&(o.push(f),f=""):f+=v,c++}return f&&o.push(f),o}e.toPath=r})(F1)),F1}var uA;function Lw(){return uA||(uA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wq(),n=hk(),r=Mw(),i=Dw();function o(c,f,d){if(c==null)return d;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return d;const m=c[f];return m===void 0?n.isDeepKey(f)?o(c,i.toPath(f),d):d:m}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const m=c[f];return m===void 0?d:m}default:{if(Array.isArray(f))return a(c,f,d);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return d;const m=c[f];return m===void 0?d:m}}}function a(c,f,d){if(f.length===0)return d;let m=c;for(let v=0;v<f.length;v++){if(m==null||t.isUnsafeProperty(f[v]))return d;m=m[f[v]]}return m===void 0?d:m}e.get=o})(M1)),M1}var j1,cA;function bq(){return cA||(cA=1,j1=Lw().get),j1}var _q=bq();const El=ro(_q);var Sq=4;function va(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sq,n=10**t,r=Math.round(e*n)/n;return Object.is(r,-0)?0:r}function On(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.reduce((i,o,a)=>{var c=n[a-1];return typeof c=="string"?i+c+o:c!==void 0?i+va(c)+o:i+o},"")}var vr=e=>e===0?0:e>0?1:-1,ki=e=>typeof e=="number"&&e!=+e,Es=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Je=e=>(typeof e=="number"||e instanceof Number)&&!ki(e),eo=e=>Je(e)||typeof e=="string",Cq=0,Ad=e=>{var t=++Cq;return"".concat(e||"").concat(t)},zr=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Je(t)&&typeof t!="string")return r;var o;if(Es(t)){if(n==null)return r;var a=t.indexOf("%");o=n*parseFloat(t.slice(0,a))/100}else o=+t;return ki(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},pk=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[String(e[r])])n[String(e[r])]=!0;else return!0;return!1};function _n(e,t,n){return Je(e)&&Je(t)?va(e+n*(t-e)):t}function mk(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):El(r,t))===n)}var Aq=e=>{for(var t=e.length,n=0,r=0,i=0,o=0,a=1/0,c=-1/0,f=0,d=0,m=0;m<t;m++){var v,E;f=((v=e[m])===null||v===void 0?void 0:v.cx)||0,d=((E=e[m])===null||E===void 0?void 0:E.cy)||0,n+=f,r+=d,i+=f*d,o+=f*f,a=Math.min(a,f),c=Math.max(c,f)}var C=t*o!==n*n?(t*i-n*r)/(t*o-n*n):0;return{xmin:a,xmax:c,a:C,b:(r-C*n)/t}},an=e=>e===null||typeof e>"u",Kd=e=>an(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Tq(e){return e!=null}function Yd(){}var Iq=["type","size","sizeType"];function tx(){return tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tx.apply(null,arguments)}function dA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dA(Object(n),!0).forEach(function(r){Pq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pq(e,t,n){return(t=Nq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nq(e){var t=Rq(e,"string");return typeof t=="symbol"?t:t+""}function Rq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oq(e,t){if(e==null)return{};var n,r,i=kq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function kq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var gk={symbolCircle:kw,symbolCross:qH,symbolDiamond:KH,symbolSquare:YH,symbolStar:QH,symbolTriangle:eq,symbolWye:nq},Mq=Math.PI/180,Dq=e=>{var t="symbol".concat(Kd(e));return gk[t]||kw},Lq=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*Mq;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Bq=(e,t)=>{gk["symbol".concat(Kd(e))]=t},Xp=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=Oq(e,Iq),o=fA(fA({},i),{},{type:t,size:n,sizeType:r}),a="circle";typeof t=="string"&&(a=t);var c=()=>{var E=Dq(a),C=rq().type(E).size(Lq(n,r,a)),I=C();if(I!==null)return I},{className:f,cx:d,cy:m}=o,v=Oi(o);return Je(d)&&Je(m)&&Je(n)?M.createElement("path",tx({},v,{className:Ft("recharts-symbols",f),transform:"translate(".concat(d,", ").concat(m,")"),d:c()})):null};Xp.registerSymbol=Bq;var vk=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Fq=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(M.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Pw(i)&&(r[i]=(o=>n[i](n,o)))}),r},Uq=(e,t,n)=>r=>(e(t,n,r),null),ec=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var o=e[i];Pw(i)&&typeof o=="function"&&(r||(r={}),r[i]=Uq(o,t,n))}),r},jq=e=>Array.isArray(e)&&e.length>0;function hA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(n),!0).forEach(function(r){$q(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $q(e,t,n){return(t=zq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zq(e){var t=Gq(e,"string");return typeof t=="symbol"?t:t+""}function Gq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vn(e,t){var n=Vq({},e),r=t,i=Object.keys(t),o=i.reduce((a,c)=>(a[c]===void 0&&r[c]!==void 0&&(a[c]=r[c]),a),n);return o}function G0(){return G0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G0.apply(null,arguments)}function pA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pA(Object(n),!0).forEach(function(r){qq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qq(e,t,n){return(t=Wq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wq(e){var t=Kq(e,"string");return typeof t=="symbol"?t:t+""}function Kq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xi=32,Yq={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Xq(e){var{data:t,iconType:n,inactiveColor:r}=e,i=Xi/2,o=Xi/6,a=Xi/3,c=t.inactive?r:t.color,f=n??t.type;if(f==="none")return null;if(f==="plainline"){var d;return M.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:i,x2:Xi,y2:i,className:"recharts-legend-icon"})}if(f==="line")return M.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(Xi,"M").concat(2*a,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(f==="rect")return M.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Xi/8,"h").concat(Xi,"v").concat(Xi*3/4,"h").concat(-Xi,"z"),className:"recharts-legend-icon"});if(M.isValidElement(t.legendIcon)){var m=Hq({},t);return delete m.legendIcon,M.cloneElement(t.legendIcon,m)}return M.createElement(Xp,{fill:c,cx:i,cy:i,size:Xi,sizeType:"diameter",type:f})}function Jq(e){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:o,iconType:a}=e,c={x:0,y:0,width:Xi,height:Xi},f={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((m,v)=>{var E=m.formatter||i,C=Ft({"recharts-legend-item":!0,["legend-item-".concat(v)]:!0,inactive:m.inactive});if(m.type==="none")return null;var I=m.inactive?o:m.color,P=E?E(m.value,m,v):m.value;return M.createElement("li",G0({className:C,style:f,key:"legend-item-".concat(v)},ec(e,m,v)),M.createElement(Nw,{width:n,height:n,viewBox:c,style:d,"aria-label":"".concat(P," legend icon")},M.createElement(Xq,{data:m,iconType:a,inactiveColor:o})),M.createElement("span",{className:"recharts-legend-item-text",style:{color:I}},P))})}var Zq=e=>{var t=Vn(e,Yq),{payload:n,layout:r,align:i}=t;if(!n||!n.length)return null;var o={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return M.createElement("ul",{className:"recharts-default-legend",style:o},M.createElement(Jq,G0({},t,{payload:n})))},V1={},$1={},mA;function Qq(){return mA||(mA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let o=0;o<n.length;o++){const a=n[o],c=r(a);i.has(c)||i.set(c,a)}return Array.from(i.values())}e.uniqBy=t})($1)),$1}var z1={},gA;function yk(){return gA||(gA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(z1)),z1}var G1={},H1={},q1={},vA;function eW(){return vA||(vA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(q1)),q1}var yA;function Bw(){return yA||(yA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eW();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(H1)),H1}var W1={},xA;function tW(){return xA||(xA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(W1)),W1}var wA;function nW(){return wA||(wA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bw(),n=tW();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(G1)),G1}var K1={},Y1={},EA;function rW(){return EA||(EA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lw();function n(r){return function(i){return t.get(i,r)}}e.property=n})(Y1)),Y1}var X1={},J1={},Z1={},Q1={},bA;function xk(){return bA||(bA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Q1)),Q1}var ev={},_A;function wk(){return _A||(_A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(ev)),ev}var tv={},SA;function Ek(){return SA||(SA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(tv)),tv}var CA;function iW(){return CA||(CA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xk(),n=wk(),r=Ek();function i(m,v,E){return typeof E!="function"?i(m,v,()=>{}):o(m,v,function C(I,P,N,D,F,L){const V=E(I,P,N,D,F,L);return V!==void 0?!!V:o(I,P,C,L)},new Map)}function o(m,v,E,C){if(v===m)return!0;switch(typeof v){case"object":return a(m,v,E,C);case"function":return Object.keys(v).length>0?o(m,{...v},E,C):r.eq(m,v);default:return t.isObject(m)?typeof v=="string"?v==="":!0:r.eq(m,v)}}function a(m,v,E,C){if(v==null)return!0;if(Array.isArray(v))return f(m,v,E,C);if(v instanceof Map)return c(m,v,E,C);if(v instanceof Set)return d(m,v,E,C);const I=Object.keys(v);if(m==null||n.isPrimitive(m))return I.length===0;if(I.length===0)return!0;if(C?.has(v))return C.get(v)===m;C?.set(v,m);try{for(let P=0;P<I.length;P++){const N=I[P];if(!n.isPrimitive(m)&&!(N in m)||v[N]===void 0&&m[N]!==void 0||v[N]===null&&m[N]!==null||!E(m[N],v[N],N,m,v,C))return!1}return!0}finally{C?.delete(v)}}function c(m,v,E,C){if(v.size===0)return!0;if(!(m instanceof Map))return!1;for(const[I,P]of v.entries()){const N=m.get(I);if(E(N,P,I,m,v,C)===!1)return!1}return!0}function f(m,v,E,C){if(v.length===0)return!0;if(!Array.isArray(m))return!1;const I=new Set;for(let P=0;P<v.length;P++){const N=v[P];let D=!1;for(let F=0;F<m.length;F++){if(I.has(F))continue;const L=m[F];let V=!1;if(E(L,N,P,m,v,C)&&(V=!0),V){I.add(F),D=!0;break}}if(!D)return!1}return!0}function d(m,v,E,C){return v.size===0?!0:m instanceof Set?f([...m],[...v],E,C):!1}e.isMatchWith=i,e.isSetMatch=d})(Z1)),Z1}var AA;function bk(){return AA||(AA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iW();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(J1)),J1}var nv={},rv={},iv={},TA;function oW(){return TA||(TA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(iv)),iv}var ov={},IA;function _k(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(ov)),ov}var sv={},PA;function Sk(){return PA||(PA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",a="[object Symbol]",c="[object Date]",f="[object Map]",d="[object Set]",m="[object Array]",v="[object Function]",E="[object ArrayBuffer]",C="[object Object]",I="[object Error]",P="[object DataView]",N="[object Uint8Array]",D="[object Uint8ClampedArray]",F="[object Uint16Array]",L="[object Uint32Array]",V="[object BigUint64Array]",G="[object Int8Array]",q="[object Int16Array]",W="[object Int32Array]",Z="[object BigInt64Array]",X="[object Float32Array]",fe="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=E,e.arrayTag=m,e.bigInt64ArrayTag=Z,e.bigUint64ArrayTag=V,e.booleanTag=i,e.dataViewTag=P,e.dateTag=c,e.errorTag=I,e.float32ArrayTag=X,e.float64ArrayTag=fe,e.functionTag=v,e.int16ArrayTag=q,e.int32ArrayTag=W,e.int8ArrayTag=G,e.mapTag=f,e.numberTag=r,e.objectTag=C,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=a,e.uint16ArrayTag=F,e.uint32ArrayTag=L,e.uint8ArrayTag=N,e.uint8ClampedArrayTag=D})(sv)),sv}var av={},NA;function sW(){return NA||(NA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(av)),av}var RA;function Ck(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oW(),n=_k(),r=Sk(),i=wk(),o=sW();function a(m,v){return c(m,void 0,m,new Map,v)}function c(m,v,E,C=new Map,I=void 0){const P=I?.(m,v,E,C);if(P!==void 0)return P;if(i.isPrimitive(m))return m;if(C.has(m))return C.get(m);if(Array.isArray(m)){const N=new Array(m.length);C.set(m,N);for(let D=0;D<m.length;D++)N[D]=c(m[D],D,E,C,I);return Object.hasOwn(m,"index")&&(N.index=m.index),Object.hasOwn(m,"input")&&(N.input=m.input),N}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const N=new RegExp(m.source,m.flags);return N.lastIndex=m.lastIndex,N}if(m instanceof Map){const N=new Map;C.set(m,N);for(const[D,F]of m)N.set(D,c(F,D,E,C,I));return N}if(m instanceof Set){const N=new Set;C.set(m,N);for(const D of m)N.add(c(D,void 0,E,C,I));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(o.isTypedArray(m)){const N=new(Object.getPrototypeOf(m)).constructor(m.length);C.set(m,N);for(let D=0;D<m.length;D++)N[D]=c(m[D],D,E,C,I);return N}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const N=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return C.set(m,N),f(N,m,E,C,I),N}if(typeof File<"u"&&m instanceof File){const N=new File([m],m.name,{type:m.type});return C.set(m,N),f(N,m,E,C,I),N}if(typeof Blob<"u"&&m instanceof Blob){const N=new Blob([m],{type:m.type});return C.set(m,N),f(N,m,E,C,I),N}if(m instanceof Error){const N=new m.constructor;return C.set(m,N),N.message=m.message,N.name=m.name,N.stack=m.stack,N.cause=m.cause,f(N,m,E,C,I),N}if(m instanceof Boolean){const N=new Boolean(m.valueOf());return C.set(m,N),f(N,m,E,C,I),N}if(m instanceof Number){const N=new Number(m.valueOf());return C.set(m,N),f(N,m,E,C,I),N}if(m instanceof String){const N=new String(m.valueOf());return C.set(m,N),f(N,m,E,C,I),N}if(typeof m=="object"&&d(m)){const N=Object.create(Object.getPrototypeOf(m));return C.set(m,N),f(N,m,E,C,I),N}return m}function f(m,v,E=m,C,I){const P=[...Object.keys(v),...t.getSymbols(v)];for(let N=0;N<P.length;N++){const D=P[N],F=Object.getOwnPropertyDescriptor(m,D);(F==null||F.writable)&&(m[D]=c(v[D],D,E,C,I))}}function d(m){switch(n.getTag(m)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=a,e.cloneDeepWithImpl=c,e.copyProperties=f})(rv)),rv}var OA;function aW(){return OA||(OA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ck();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(nv)),nv}var kA;function lW(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bk(),n=aW();function r(i){return i=n.cloneDeep(i),o=>t.isMatch(o,i)}e.matches=r})(X1)),X1}var lv={},uv={},cv={},MA;function uW(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ck(),n=Sk();function r(i,o){return t.cloneDeepWith(i,(a,c,f,d)=>{const m=o?.(a,c,f,d);if(m!==void 0)return m;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const v=new i.constructor(i?.valueOf());return t.copyProperties(v,i),v}case n.argumentsTag:{const v={};return t.copyProperties(v,i),v.length=i.length,v[Symbol.iterator]=i[Symbol.iterator],v}default:return}})}e.cloneDeepWith=r})(cv)),cv}var DA;function cW(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uW();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(uv)),uv}var dv={},fv={},LA;function Ak(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(fv)),fv}var hv={},BA;function dW(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_k();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(hv)),hv}var FA;function fW(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hk(),n=Ak(),r=dW(),i=Dw();function o(a,c){let f;if(Array.isArray(c)?f=c:typeof c=="string"&&t.isDeepKey(c)&&a?.[c]==null?f=i.toPath(c):f=[c],f.length===0)return!1;let d=a;for(let m=0;m<f.length;m++){const v=f[m];if((d==null||!Object.hasOwn(d,v))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(v)&&v<d.length))return!1;d=d[v]}return!0}e.has=o})(dv)),dv}var UA;function hW(){return UA||(UA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bk(),n=Mw(),r=cW(),i=Lw(),o=fW();function a(c,f){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=n.toKey(c);break}}return f=r.cloneDeep(f),function(d){const m=i.get(d,c);return m===void 0?o.has(d,c):f===void 0?m===void 0:t.isMatch(m,f)}}e.matchesProperty=a})(lv)),lv}var jA;function pW(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yk(),n=rW(),r=lW(),i=hW();function o(a){if(a==null)return t.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}e.iteratee=o})(K1)),K1}var VA;function mW(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qq(),n=yk(),r=nW(),i=pW();function o(a,c=n.identity){return r.isArrayLikeObject(a)?t.uniqBy(Array.from(a),i.iteratee(c)):[]}e.uniqBy=o})(V1)),V1}var pv,$A;function gW(){return $A||($A=1,pv=mW().uniqBy),pv}var vW=gW();const zA=ro(vW);function Tk(e,t,n){return t===!0?zA(e,n):typeof t=="function"?zA(e,t):e}var mv={exports:{}},gv={},vv={exports:{}},yv={};var GA;function yW(){if(GA)return yv;GA=1;var e=qu();function t(v,E){return v===E&&(v!==0||1/v===1/E)||v!==v&&E!==E}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,o=e.useLayoutEffect,a=e.useDebugValue;function c(v,E){var C=E(),I=r({inst:{value:C,getSnapshot:E}}),P=I[0].inst,N=I[1];return o(function(){P.value=C,P.getSnapshot=E,f(P)&&N({inst:P})},[v,C,E]),i(function(){return f(P)&&N({inst:P}),v(function(){f(P)&&N({inst:P})})},[v]),a(C),C}function f(v){var E=v.getSnapshot;v=v.value;try{var C=E();return!n(v,C)}catch{return!0}}function d(v,E){return E()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return yv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,yv}var HA;function xW(){return HA||(HA=1,vv.exports=yW()),vv.exports}var qA;function wW(){if(qA)return gv;qA=1;var e=qu(),t=xW();function n(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,o=e.useRef,a=e.useEffect,c=e.useMemo,f=e.useDebugValue;return gv.useSyncExternalStoreWithSelector=function(d,m,v,E,C){var I=o(null);if(I.current===null){var P={hasValue:!1,value:null};I.current=P}else P=I.current;I=c(function(){function D(q){if(!F){if(F=!0,L=q,q=E(q),C!==void 0&&P.hasValue){var W=P.value;if(C(W,q))return V=W}return V=q}if(W=V,r(L,q))return W;var Z=E(q);return C!==void 0&&C(W,Z)?(L=q,W):(L=q,V=Z)}var F=!1,L,V,G=v===void 0?null:v;return[function(){return D(m())},G===null?void 0:function(){return D(G())}]},[m,v,E,C]);var N=i(d,I[0],I[1]);return a(function(){P.hasValue=!0,P.value=N},[N]),f(N),N},gv}var WA;function EW(){return WA||(WA=1,mv.exports=wW()),mv.exports}var bW=EW(),Fw=M.createContext(null),_W=e=>e,Zt=()=>{var e=M.useContext(Fw);return e?e.store.dispatch:_W},h0=()=>{},SW=()=>h0,CW=(e,t)=>e===t;function Ge(e){var t=M.useContext(Fw);return bW.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:SW,t?t.store.getState:h0,t?t.store.getState:h0,t?e:h0,CW)}function AW(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function TW(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function IW(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var KA=e=>Array.isArray(e)?e:[e];function PW(e){const t=Array.isArray(e[0])?e[0]:e;return IW(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function NW(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var RW=class{constructor(e){this.value=e}deref(){return this.value}},OW=typeof WeakRef<"u"?WeakRef:RW,kW=0,YA=1;function $h(){return{s:kW,v:void 0,o:null,p:null}}function Ik(e,t={}){let n=$h();const{resultEqualityCheck:r}=t;let i,o=0;function a(){let c=n;const{length:f}=arguments;for(let v=0,E=f;v<E;v++){const C=arguments[v];if(typeof C=="function"||typeof C=="object"&&C!==null){let I=c.o;I===null&&(c.o=I=new WeakMap);const P=I.get(C);P===void 0?(c=$h(),I.set(C,c)):c=P}else{let I=c.p;I===null&&(c.p=I=new Map);const P=I.get(C);P===void 0?(c=$h(),I.set(C,c)):c=P}}const d=c;let m;if(c.s===YA)m=c.v;else if(m=e.apply(null,arguments),o++,r){const v=i?.deref?.()??i;v!=null&&r(v,m)&&(m=v,o!==0&&o--),i=typeof m=="object"&&m!==null||typeof m=="function"?new OW(m):m}return d.s=YA,d.v=m,m}return a.clearCache=()=>{n=$h(),a.resetResultsCount()},a.resultsCount=()=>o,a.resetResultsCount=()=>{o=0},a}function MW(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let o=0,a=0,c,f={},d=i.pop();typeof d=="object"&&(f=d,d=i.pop()),AW(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const m={...n,...f},{memoize:v,memoizeOptions:E=[],argsMemoize:C=Ik,argsMemoizeOptions:I=[]}=m,P=KA(E),N=KA(I),D=PW(i),F=v(function(){return o++,d.apply(null,arguments)},...P),L=C(function(){a++;const G=NW(D,arguments);return c=F.apply(null,G),c},...N);return Object.assign(L,{resultFunc:d,memoizedResultFunc:F,dependencies:D,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>c,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:v,argsMemoize:C})};return Object.assign(r,{withTypes:()=>r}),r}var de=MW(Ik),DW=Object.assign((e,t=de)=>{TW(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((a,c,f)=>(a[n[f]]=c,a),{}))},{withTypes:()=>DW}),xv={},wv={},Ev={},XA;function LW(){return XA||(XA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const a=t(r),c=t(i);if(a===c&&a===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?c-a:a-c}return 0};e.compareValues=n})(Ev)),Ev}var bv={},_v={},JA;function Pk(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(_v)),_v}var ZA;function BW(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pk(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||a!=null&&Object.hasOwn(a,o)}e.isKey=i})(bv)),bv}var QA;function FW(){return QA||(QA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LW(),n=BW(),r=Dw();function i(o,a,c,f){if(o==null)return[];c=f?void 0:c,Array.isArray(o)||(o=Object.values(o)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(C=>String(C));const d=(C,I)=>{let P=C;for(let N=0;N<I.length&&P!=null;++N)P=P[I[N]];return P},m=(C,I)=>I==null||C==null?I:typeof C=="object"&&"key"in C?Object.hasOwn(I,C.key)?I[C.key]:d(I,C.path):typeof C=="function"?C(I):Array.isArray(C)?d(I,C):typeof I=="object"?I[C]:I,v=a.map(C=>(Array.isArray(C)&&C.length===1&&(C=C[0]),C==null||typeof C=="function"||Array.isArray(C)||n.isKey(C)?C:{key:C,path:r.toPath(C)}));return o.map(C=>({original:C,criteria:v.map(I=>m(I,C))})).slice().sort((C,I)=>{for(let P=0;P<v.length;P++){const N=t.compareValues(C.criteria[P],I.criteria[P],c[P]);if(N!==0)return N}return 0}).map(C=>C.original)}e.orderBy=i})(wv)),wv}var Sv={},eT;function UW(){return eT||(eT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],o=Math.floor(r),a=(c,f)=>{for(let d=0;d<c.length;d++){const m=c[d];Array.isArray(m)&&f<o?a(m,f+1):i.push(m)}};return a(n,0),i}e.flatten=t})(Sv)),Sv}var Cv={},tT;function Nk(){return tT||(tT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ak(),n=Bw(),r=xk(),i=Ek();function o(a,c,f){return r.isObject(f)&&(typeof c=="number"&&n.isArrayLike(f)&&t.isIndex(c)&&c<f.length||typeof c=="string"&&c in f)?i.eq(f[c],a):!1}e.isIterateeCall=o})(Cv)),Cv}var nT;function jW(){return nT||(nT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FW(),n=UW(),r=Nk();function i(o,...a){const c=a.length;return c>1&&r.isIterateeCall(o,a[0],a[1])?a=[]:c>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),t.orderBy(o,n.flatten(a),["asc"])}e.sortBy=i})(xv)),xv}var Av,rT;function VW(){return rT||(rT=1,Av=jW().sortBy),Av}var $W=VW();const Jp=ro($W);var Rk=e=>e.legend.settings,zW=e=>e.legend.size,GW=e=>e.legend.payload,HW=de([GW,Rk],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Jp(r,n):r});function qW(){return Ge(HW)}var zh=1;function Ok(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=M.useState({height:0,left:0,top:0,width:0}),r=M.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),a={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(a.height-t.height)>zh||Math.abs(a.left-t.left)>zh||Math.abs(a.top-t.top)>zh||Math.abs(a.width-t.width)>zh)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Ir(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var WW=typeof Symbol=="function"&&Symbol.observable||"@@observable",iT=WW,Tv=()=>Math.random().toString(36).substring(7).split("").join("."),KW={INIT:`@@redux/INIT${Tv()}`,REPLACE:`@@redux/REPLACE${Tv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Tv()}`},H0=KW;function Uw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function kk(e,t,n){if(typeof e!="function")throw new Error(Ir(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ir(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ir(1));return n(kk)(e,t)}let r=e,i=t,o=new Map,a=o,c=0,f=!1;function d(){a===o&&(a=new Map,o.forEach((N,D)=>{a.set(D,N)}))}function m(){if(f)throw new Error(Ir(3));return i}function v(N){if(typeof N!="function")throw new Error(Ir(4));if(f)throw new Error(Ir(5));let D=!0;d();const F=c++;return a.set(F,N),function(){if(D){if(f)throw new Error(Ir(6));D=!1,d(),a.delete(F),o=null}}}function E(N){if(!Uw(N))throw new Error(Ir(7));if(typeof N.type>"u")throw new Error(Ir(8));if(typeof N.type!="string")throw new Error(Ir(17));if(f)throw new Error(Ir(9));try{f=!0,i=r(i,N)}finally{f=!1}return(o=a).forEach(F=>{F()}),N}function C(N){if(typeof N!="function")throw new Error(Ir(10));r=N,E({type:H0.REPLACE})}function I(){const N=v;return{subscribe(D){if(typeof D!="object"||D===null)throw new Error(Ir(11));function F(){const V=D;V.next&&V.next(m())}return F(),{unsubscribe:N(F)}},[iT](){return this}}}return E({type:H0.INIT}),{dispatch:E,subscribe:v,getState:m,replaceReducer:C,[iT]:I}}function YW(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:H0.INIT})>"u")throw new Error(Ir(12));if(typeof n(void 0,{type:H0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ir(13))})}function Mk(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const a=t[o];typeof e[a]=="function"&&(n[a]=e[a])}const r=Object.keys(n);let i;try{YW(n)}catch(o){i=o}return function(a={},c){if(i)throw i;let f=!1;const d={};for(let m=0;m<r.length;m++){const v=r[m],E=n[v],C=a[v],I=E(C,c);if(typeof I>"u")throw c&&c.type,new Error(Ir(14));d[v]=I,f=f||I!==C}return f=f||r.length!==Object.keys(a).length,f?d:a}}function q0(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function XW(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(Ir(15))};const a={getState:i.getState,dispatch:(f,...d)=>o(f,...d)},c=e.map(f=>f(a));return o=q0(...c)(i.dispatch),{...i,dispatch:o}}}function Dk(e){return Uw(e)&&"type"in e&&typeof e.type=="string"}var Lk=Symbol.for("immer-nothing"),oT=Symbol.for("immer-draftable"),Jr=Symbol.for("immer-state");function xo(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Pi=Object,Uu=Pi.getPrototypeOf,W0="constructor",Zp="prototype",nx="configurable",K0="enumerable",p0="writable",Td="value",bs=e=>!!e&&!!e[Jr];function Ao(e){return e?Bk(e)||em(e)||!!e[oT]||!!e[W0]?.[oT]||tm(e)||nm(e):!1}var JW=Pi[Zp][W0].toString(),sT=new WeakMap;function Bk(e){if(!e||!jw(e))return!1;const t=Uu(e);if(t===null||t===Pi[Zp])return!0;const n=Pi.hasOwnProperty.call(t,W0)&&t[W0];if(n===Object)return!0;if(!Eu(n))return!1;let r=sT.get(n);return r===void 0&&(r=Function.toString.call(n),sT.set(n,r)),r===JW}function Qp(e,t,n=!0){Xd(e)===0?(n?Reflect.ownKeys(e):Pi.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function Xd(e){const t=e[Jr];return t?t.type_:em(e)?1:tm(e)?2:nm(e)?3:0}var aT=(e,t,n=Xd(e))=>n===2?e.has(t):Pi[Zp].hasOwnProperty.call(e,t),rx=(e,t,n=Xd(e))=>n===2?e.get(t):e[t],Y0=(e,t,n,r=Xd(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function ZW(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var em=Array.isArray,tm=e=>e instanceof Map,nm=e=>e instanceof Set,jw=e=>typeof e=="object",Eu=e=>typeof e=="function",Iv=e=>typeof e=="boolean";function QW(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var ds=e=>e.copy_||e.base_,Vw=e=>e.modified_?e.copy_:e.base_;function ix(e,t){if(tm(e))return new Map(e);if(nm(e))return new Set(e);if(em(e))return Array[Zp].slice.call(e);const n=Bk(e);if(t===!0||t==="class_only"&&!n){const r=Pi.getOwnPropertyDescriptors(e);delete r[Jr];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const a=i[o],c=r[a];c[p0]===!1&&(c[p0]=!0,c[nx]=!0),(c.get||c.set)&&(r[a]={[nx]:!0,[p0]:!0,[K0]:c[K0],[Td]:e[a]})}return Pi.create(Uu(e),r)}else{const r=Uu(e);if(r!==null&&n)return{...e};const i=Pi.create(r);return Pi.assign(i,e)}}function $w(e,t=!1){return rm(e)||bs(e)||!Ao(e)||(Xd(e)>1&&Pi.defineProperties(e,{set:Gh,add:Gh,clear:Gh,delete:Gh}),Pi.freeze(e),t&&Qp(e,(n,r)=>{$w(r,!0)},!1)),e}function eK(){xo(2)}var Gh={[Td]:eK};function rm(e){return e===null||!jw(e)?!0:Pi.isFrozen(e)}var X0="MapSet",ox="Patches",lT="ArrayMethods",Fk={};function bl(e){const t=Fk[e];return t||xo(0,e),t}var uT=e=>!!Fk[e],Id,Uk=()=>Id,tK=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:uT(X0)?bl(X0):void 0,arrayMethodsPlugin_:uT(lT)?bl(lT):void 0});function cT(e,t){t&&(e.patchPlugin_=bl(ox),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function sx(e){ax(e),e.drafts_.forEach(nK),e.drafts_=null}function ax(e){e===Id&&(Id=e.parent_)}var dT=e=>Id=tK(Id,e);function nK(e){const t=e[Jr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function fT(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Jr].modified_&&(sx(t),xo(4)),Ao(e)&&(e=hT(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[Jr].base_,e,t)}else e=hT(t,n);return rK(t,e,!0),sx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Lk?e:void 0}function hT(e,t){if(rm(t))return t;const n=t[Jr];if(!n)return J0(t,e.handledSet_,e);if(!im(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);$k(n,e)}return n.copy_}function rK(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$w(t,n)}function jk(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var im=(e,t)=>e.scope_===t,iK=[];function Vk(e,t,n,r){const i=ds(e),o=e.type_;if(r!==void 0&&rx(i,r,o)===t){Y0(i,r,n,o);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;Qp(i,(f,d)=>{if(bs(d)){const m=c.get(d)||[];m.push(f),c.set(d,m)}})}const a=e.draftLocations_.get(t)??iK;for(const c of a)Y0(i,c,n,o)}function oK(e,t,n){e.callbacks_.push(function(i){const o=t;if(!o||!im(o,i))return;i.mapSetPlugin_?.fixSetContents(o);const a=Vw(o);Vk(e,o.draft_??o,a,n),$k(o,i)})}function $k(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const i=r.getPath(e);i&&r.generatePatches_(e,i,t)}jk(e)}}function sK(e,t,n){const{scope_:r}=e;if(bs(n)){const i=n[Jr];im(i,r)&&i.callbacks_.push(function(){m0(e);const a=Vw(i);Vk(e,n,a,t)})}else Ao(n)&&e.callbacks_.push(function(){const o=ds(e);e.type_===3?o.has(n)&&J0(n,r.handledSet_,r):rx(o,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&J0(rx(e.copy_,t,e.type_),r.handledSet_,r)})}function J0(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||bs(e)||t.has(e)||!Ao(e)||rm(e)||(t.add(e),Qp(e,(r,i)=>{if(bs(i)){const o=i[Jr];if(im(o,n)){const a=Vw(o);Y0(e,r,a,e.type_),jk(o)}}else Ao(i)&&J0(i,t,n)})),e}function aK(e,t){const n=em(e),r={type_:n?1:0,scope_:t?t.scope_:Uk(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,o=Z0;n&&(i=[r],o=Pd);const{revoke:a,proxy:c}=Proxy.revocable(i,o);return r.draft_=c,r.revoke_=a,[c,r]}var Z0={get(e,t){if(t===Jr)return e;let n=e.scope_.arrayMethodsPlugin_;const r=e.type_===1&&typeof t=="string";if(r&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const i=ds(e);if(!aT(i,t,e.type_))return lK(e,i,t);const o=i[t];if(e.finalized_||!Ao(o)||r&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&QW(t))return o;if(o===Pv(e.base_,t)){m0(e);const a=e.type_===1?+t:t,c=ux(e.scope_,o,e,a);return e.copy_[a]=c}return o},has(e,t){return t in ds(e)},ownKeys(e){return Reflect.ownKeys(ds(e))},set(e,t,n){const r=zk(ds(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Pv(ds(e),t),o=i?.[Jr];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(ZW(n,i)&&(n!==void 0||aT(e.base_,t,e.type_)))return!0;m0(e),lx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),sK(e,t,n)),!0},deleteProperty(e,t){return m0(e),Pv(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),lx(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ds(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[p0]:!0,[nx]:e.type_!==1||t!=="length",[K0]:r[K0],[Td]:n[t]}},defineProperty(){xo(11)},getPrototypeOf(e){return Uu(e.base_)},setPrototypeOf(){xo(12)}},Pd={};for(let e in Z0){let t=Z0[e];Pd[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}Pd.deleteProperty=function(e,t){return Pd.set.call(this,e,t,void 0)};Pd.set=function(e,t,n){return Z0.set.call(this,e[0],t,n,e[0])};function Pv(e,t){const n=e[Jr];return(n?ds(n):e)[t]}function lK(e,t,n){const r=zk(t,n);return r?Td in r?r[Td]:r.get?.call(e.draft_):void 0}function zk(e,t){if(!(t in e))return;let n=Uu(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Uu(n)}}function lx(e){e.modified_||(e.modified_=!0,e.parent_&&lx(e.parent_))}function m0(e){e.copy_||(e.assigned_=new Map,e.copy_=ix(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var uK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Eu(n)&&!Eu(r)){const a=r;r=n;const c=this;return function(d=a,...m){return c.produce(d,v=>r.call(this,v,...m))}}Eu(r)||xo(6),i!==void 0&&!Eu(i)&&xo(7);let o;if(Ao(n)){const a=dT(this),c=ux(a,n,void 0);let f=!0;try{o=r(c),f=!1}finally{f?sx(a):ax(a)}return cT(a,i),fT(o,a)}else if(!n||!jw(n)){if(o=r(n),o===void 0&&(o=n),o===Lk&&(o=void 0),this.autoFreeze_&&$w(o,!0),i){const a=[],c=[];bl(ox).generateReplacementPatches_(n,o,{patches_:a,inversePatches_:c}),i(a,c)}return o}else xo(1,n)},this.produceWithPatches=(n,r)=>{if(Eu(n))return(c,...f)=>this.produceWithPatches(c,d=>n(d,...f));let i,o;return[this.produce(n,r,(c,f)=>{i=c,o=f}),i,o]},Iv(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Iv(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Iv(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ao(t)||xo(8),bs(t)&&(t=So(t));const n=dT(this),r=ux(n,t,void 0);return r[Jr].isManual_=!0,ax(n),r}finishDraft(t,n){const r=t&&t[Jr];(!r||!r.isManual_)&&xo(9);const{scope_:i}=r;return cT(i,n),fT(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const o=n[r];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}r>-1&&(n=n.slice(r+1));const i=bl(ox).applyPatches_;return bs(t)?i(t,n):this.produce(t,o=>i(o,n))}};function ux(e,t,n,r){const[i,o]=tm(t)?bl(X0).proxyMap_(t,n):nm(t)?bl(X0).proxySet_(t,n):aK(t,n);return(n?.scope_??Uk()).drafts_.push(i),o.callbacks_=n?.callbacks_??[],o.key_=r,n&&r!==void 0?oK(n,o,r):o.callbacks_.push(function(f){f.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:d}=f;o.modified_&&d&&d.generatePatches_(o,[],f)}),i}function So(e){return bs(e)||xo(10,e),Gk(e)}function Gk(e){if(!Ao(e)||rm(e))return e;const t=e[Jr];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ix(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=ix(e,!0);return Qp(n,(i,o)=>{Y0(n,i,Gk(o))},r),t&&(t.finalized_=!1),n}var cK=new uK,Hk=cK.produce;function qk(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var dK=qk(),fK=qk,hK=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?q0:q0.apply(null,arguments)};function to(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Ni(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Dk(r)&&r.type===e,n}var Wk=class vd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,vd.prototype)}static get[Symbol.species](){return vd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new vd(...t[0].concat(this)):new vd(...t.concat(this))}};function pT(e){return Ao(e)?Hk(e,()=>{}):e}function Hh(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function pK(e){return typeof e=="boolean"}var mK=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let a=new Wk;return n&&(pK(n)?a.push(dK):a.push(fK(n.extraArgument))),a},Kk="RTK_autoBatch",gn=()=>e=>({payload:e,meta:{[Kk]:!0}}),mT=e=>t=>{setTimeout(t,e)},Yk=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,a=!1;const c=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mT(10):e.type==="callback"?e.queueNotification:mT(e.timeout),d=()=>{a=!1,o&&(o=!1,c.forEach(m=>m()))};return Object.assign({},r,{subscribe(m){const v=()=>i&&m(),E=r.subscribe(v);return c.add(m),()=>{E(),c.delete(m)}},dispatch(m){try{return i=!m?.meta?.[Kk],o=!i,o&&(a||(a=!0,f(d))),r.dispatch(m)}finally{i=!0}}})},gK=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new Wk(e);return r&&i.push(Yk(typeof r=="object"?r:void 0)),i};function vK(e){const t=mK(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:a=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(Uw(n))c=Mk(n);else throw new Error(Ni(1));let f;typeof r=="function"?f=r(t):f=t();let d=q0;i&&(d=hK({trace:!1,...typeof i=="object"&&i}));const m=XW(...f),v=gK(m);let E=typeof a=="function"?a(v):v();const C=d(...E);return kk(c,o,C)}function Xk(e){const t={},n=[];let r;const i={addCase(o,a){const c=typeof o=="string"?o:o.type;if(!c)throw new Error(Ni(28));if(c in t)throw new Error(Ni(29));return t[c]=a,i},addAsyncThunk(o,a){return a.pending&&(t[o.pending.type]=a.pending),a.rejected&&(t[o.rejected.type]=a.rejected),a.fulfilled&&(t[o.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:o.settled,reducer:a.settled}),i},addMatcher(o,a){return n.push({matcher:o,reducer:a}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function yK(e){return typeof e=="function"}function xK(e,t){let[n,r,i]=Xk(t),o;if(yK(e))o=()=>pT(e());else{const c=pT(e);o=()=>c}function a(c=o(),f){let d=[n[f.type],...r.filter(({matcher:m})=>m(f)).map(({reducer:m})=>m)];return d.filter(m=>!!m).length===0&&(d=[i]),d.reduce((m,v)=>{if(v)if(bs(m)){const C=v(m,f);return C===void 0?m:C}else{if(Ao(m))return Hk(m,E=>v(E,f));{const E=v(m,f);if(E===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return E}}return m},c)}return a.getInitialState=o,a}var wK="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",EK=(e=21)=>{let t="",n=e;for(;n--;)t+=wK[Math.random()*64|0];return t},bK=Symbol.for("rtk-slice-createasyncthunk");function _K(e,t){return`${e}/${t}`}function SK({creators:e}={}){const t=e?.asyncThunk?.[bK];return function(r){const{name:i,reducerPath:o=i}=r;if(!i)throw new Error(Ni(11));const a=(typeof r.reducers=="function"?r.reducers(AK()):r.reducers)||{},c=Object.keys(a),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(L,V){const G=typeof L=="string"?L:L.type;if(!G)throw new Error(Ni(12));if(G in f.sliceCaseReducersByType)throw new Error(Ni(13));return f.sliceCaseReducersByType[G]=V,d},addMatcher(L,V){return f.sliceMatchers.push({matcher:L,reducer:V}),d},exposeAction(L,V){return f.actionCreators[L]=V,d},exposeCaseReducer(L,V){return f.sliceCaseReducersByName[L]=V,d}};c.forEach(L=>{const V=a[L],G={reducerName:L,type:_K(i,L),createNotation:typeof r.reducers=="function"};IK(V)?NK(G,V,d,t):TK(G,V,d)});function m(){const[L={},V=[],G=void 0]=typeof r.extraReducers=="function"?Xk(r.extraReducers):[r.extraReducers],q={...L,...f.sliceCaseReducersByType};return xK(r.initialState,W=>{for(let Z in q)W.addCase(Z,q[Z]);for(let Z of f.sliceMatchers)W.addMatcher(Z.matcher,Z.reducer);for(let Z of V)W.addMatcher(Z.matcher,Z.reducer);G&&W.addDefaultCase(G)})}const v=L=>L,E=new Map,C=new WeakMap;let I;function P(L,V){return I||(I=m()),I(L,V)}function N(){return I||(I=m()),I.getInitialState()}function D(L,V=!1){function G(W){let Z=W[L];return typeof Z>"u"&&V&&(Z=Hh(C,G,N)),Z}function q(W=v){const Z=Hh(E,V,()=>new WeakMap);return Hh(Z,W,()=>{const X={};for(const[fe,se]of Object.entries(r.selectors??{}))X[fe]=CK(se,W,()=>Hh(C,W,N),V);return X})}return{reducerPath:L,getSelectors:q,get selectors(){return q(G)},selectSlice:G}}const F={name:i,reducer:P,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:N,...D(o),injectInto(L,{reducerPath:V,...G}={}){const q=V??o;return L.inject({reducerPath:q,reducer:P},G),{...F,...D(q,!0)}}};return F}}function CK(e,t,n,r){function i(o,...a){let c=t(o);return typeof c>"u"&&r&&(c=n()),e(c,...a)}return i.unwrapped=e,i}var fi=SK();function AK(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function TK({type:e,reducerName:t,createNotation:n},r,i){let o,a;if("reducer"in r){if(n&&!PK(r))throw new Error(Ni(17));o=r.reducer,a=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,a?to(e,a):to(e))}function IK(e){return e._reducerDefinitionType==="asyncThunk"}function PK(e){return e._reducerDefinitionType==="reducerWithPrepare"}function NK({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Ni(18));const{payloadCreator:o,fulfilled:a,pending:c,rejected:f,settled:d,options:m}=n,v=i(e,o,m);r.exposeAction(t,v),a&&r.addCase(v.fulfilled,a),c&&r.addCase(v.pending,c),f&&r.addCase(v.rejected,f),d&&r.addMatcher(v.settled,d),r.exposeCaseReducer(t,{fulfilled:a||qh,pending:c||qh,rejected:f||qh,settled:d||qh})}function qh(){}var RK="task",Jk="listener",Zk="completed",zw="cancelled",OK=`task-${zw}`,kK=`task-${Zk}`,cx=`${Jk}-${zw}`,MK=`${Jk}-${Zk}`,om=class{constructor(e){this.code=e,this.message=`${RK} ${zw} (reason: ${e})`}name="TaskAbortError";message},Gw=(e,t)=>{if(typeof e!="function")throw new TypeError(Ni(32))},Q0=()=>{},Qk=(e,t=Q0)=>(e.catch(t),e),eM=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),gl=e=>{if(e.aborted)throw new om(e.reason)};function tM(e,t){let n=Q0;return new Promise((r,i)=>{const o=()=>i(new om(e.reason));if(e.aborted){o();return}n=eM(e,o),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Q0})}var DK=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof om?"cancelled":"rejected",error:n}}finally{t?.()}},ep=e=>t=>Qk(tM(e,t).then(n=>(gl(e),n))),nM=e=>{const t=ep(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Mu}=Object,gT={},sm="listenerMiddleware",LK=(e,t)=>{const n=r=>eM(e,()=>r.abort(e.reason));return(r,i)=>{Gw(r);const o=new AbortController;n(o);const a=DK(async()=>{gl(e),gl(o.signal);const c=await r({pause:ep(o.signal),delay:nM(o.signal),signal:o.signal});return gl(o.signal),c},()=>o.abort(kK));return i?.autoJoin&&t.push(a.catch(Q0)),{result:ep(e)(a),cancel(){o.abort(OK)}}}},BK=(e,t)=>{const n=async(r,i)=>{gl(t);let o=()=>{};const c=[new Promise((f,d)=>{let m=e({predicate:r,effect:(v,E)=>{E.unsubscribe(),f([v,E.getState(),E.getOriginalState()])}});o=()=>{m(),d()}})];i!=null&&c.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await tM(t,Promise.race(c));return gl(t),f}finally{o()}};return(r,i)=>Qk(n(r,i))},rM=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:o}=e;if(t)i=to(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Ni(21));return Gw(o),{predicate:i,type:t,effect:o}},iM=Mu(e=>{const{type:t,predicate:n,effect:r}=rM(e);return{id:EK(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ni(22))}}},{withTypes:()=>iM}),vT=(e,t)=>{const{type:n,effect:r,predicate:i}=rM(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},dx=e=>{e.pending.forEach(t=>{t.abort(cx)})},FK=(e,t)=>()=>{for(const n of t.keys())dx(n);e.clear()},yT=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},oM=Mu(to(`${sm}/add`),{withTypes:()=>oM}),UK=to(`${sm}/removeAll`),sM=Mu(to(`${sm}/remove`),{withTypes:()=>sM}),jK=(...e)=>{console.error(`${sm}/error`,...e)},Jd=(e={})=>{const t=new Map,n=new Map,r=C=>{const I=n.get(C)??0;n.set(C,I+1)},i=C=>{const I=n.get(C)??1;I===1?n.delete(C):n.set(C,I-1)},{extra:o,onError:a=jK}=e;Gw(a);const c=C=>(C.unsubscribe=()=>t.delete(C.id),t.set(C.id,C),I=>{C.unsubscribe(),I?.cancelActive&&dx(C)}),f=C=>{const I=vT(t,C)??iM(C);return c(I)};Mu(f,{withTypes:()=>f});const d=C=>{const I=vT(t,C);return I&&(I.unsubscribe(),C.cancelActive&&dx(I)),!!I};Mu(d,{withTypes:()=>d});const m=async(C,I,P,N)=>{const D=new AbortController,F=BK(f,D.signal),L=[];try{C.pending.add(D),r(C),await Promise.resolve(C.effect(I,Mu({},P,{getOriginalState:N,condition:(V,G)=>F(V,G).then(Boolean),take:F,delay:nM(D.signal),pause:ep(D.signal),extra:o,signal:D.signal,fork:LK(D.signal,L),unsubscribe:C.unsubscribe,subscribe:()=>{t.set(C.id,C)},cancelActiveListeners:()=>{C.pending.forEach((V,G,q)=>{V!==D&&(V.abort(cx),q.delete(V))})},cancel:()=>{D.abort(cx),C.pending.delete(D)},throwIfCancelled:()=>{gl(D.signal)}})))}catch(V){V instanceof om||yT(a,V,{raisedBy:"effect"})}finally{await Promise.all(L),D.abort(MK),i(C),C.pending.delete(D)}},v=FK(t,n);return{middleware:C=>I=>P=>{if(!Dk(P))return I(P);if(oM.match(P))return f(P.payload);if(UK.match(P)){v();return}if(sM.match(P))return d(P.payload);let N=C.getState();const D=()=>{if(N===gT)throw new Error(Ni(23));return N};let F;try{if(F=I(P),t.size>0){const L=C.getState(),V=Array.from(t.values());for(const G of V){let q=!1;try{q=G.predicate(P,L,N)}catch(W){q=!1,yT(a,W,{raisedBy:"predicate"})}q&&m(G,P,C,D)}}}finally{N=gT}return F},startListening:f,stopListening:d,clearListeners:v}};function Ni(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var VK={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},aM=fi({name:"chartLayout",initialState:VK,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,o;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:$K,setLayout:zK,setChartSize:GK,setScale:HK}=aM.actions,qK=aM.reducer;function lM(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function Xt(e){return Number.isFinite(e)}function zo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function xT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xT(Object(n),!0).forEach(function(r){WK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WK(e,t,n){return(t=KK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KK(e){var t=YK(e,"string");return typeof t=="symbol"?t:t+""}function YK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vt(e,t,n){return an(e)||an(t)?n:eo(t)?El(e,t,n):typeof t=="function"?t(e):n}var XK=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:o,verticalAlign:a,layout:c}=t;if((c==="vertical"||c==="horizontal"&&a==="middle")&&o!=="center"&&Je(e[o]))return Tu(Tu({},e),{},{[o]:e[o]+(r||0)});if((c==="horizontal"||c==="vertical"&&o==="center")&&a!=="middle"&&Je(e[a]))return Tu(Tu({},e),{},{[a]:e[a]+(i||0)})}return e},Rl=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",uM=(e,t,n,r)=>{if(r)return e.map(c=>c.coordinate);var i,o,a=e.map(c=>(c.coordinate===t&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate));return i||a.push(t),o||a.push(n),a},cM=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:o,scale:a,realScaleType:c,isCategorical:f,categoricalDomain:d,tickCount:m,ticks:v,niceTicks:E,axisType:C}=e;if(!a)return null;var I=c==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,P=i==="category"&&a.bandwidth?a.bandwidth()/I:0;if(P=C==="angleAxis"&&o&&o.length>=2?vr(o[0]-o[1])*2*P:P,v||E){var N=(v||E||[]).map((D,F)=>{var L=r?r.indexOf(D):D;return{coordinate:a(L)+P,value:D,offset:P,index:F}});return N.filter(D=>!ki(D.coordinate))}return f&&d?d.map((D,F)=>({coordinate:a(D)+P,value:D,index:F,offset:P})):a.ticks&&m!=null?a.ticks(m).map((D,F)=>({coordinate:a(D)+P,value:D,offset:P,index:F})):a.domain().map((D,F)=>({coordinate:a(D)+P,value:r?r[D]:D,index:F,offset:P}))},wT=1e-4,JK=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-wT,o=Math.max(r[0],r[1])+wT,a=e(t[0]),c=e(t[n-1]);(a<i||a>o||c<i||c>o)&&e.domain([t[0],t[n-1]])}},ZK=(e,t)=>{if(!t||t.length!==2||!Je(t[0])||!Je(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Je(e[0])||e[0]<n)&&(i[0]=n),(!Je(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},QK=e=>{var t,n=e.length;if(!(n<=0)){var r=(t=e[0])===null||t===void 0?void 0:t.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var o=0,a=0,c=0;c<n;++c){var f=e[c],d=f?.[i];if(d!=null){var m=d[1],v=d[0],E=ki(m)?v:m;E>=0?(d[0]=o,d[1]=o+E,o=m):(d[0]=a,d[1]=a+E,a=m)}}}},eY=e=>{var t,n=e.length;if(!(n<=0)){var r=(t=e[0])===null||t===void 0?void 0:t.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var o=0,a=0;a<n;++a){var c=e[a],f=c?.[i];if(f!=null){var d=ki(f[1])?f[0]:f[1];d>=0?(f[0]=o,f[1]=o+d,o=f[1]):(f[0]=0,f[1]=0)}}}},tY={sign:QK,expand:vq,none:wl,silhouette:yq,wiggle:xq,positive:eY},nY=(e,t,n)=>{var r,i=(r=tY[n])!==null&&r!==void 0?r:wl,o=gq().keys(t).value((c,f)=>Number(Vt(c,f,0))).order(ex).offset(i),a=o(e);return a.forEach((c,f)=>{c.forEach((d,m)=>{var v=Vt(e[m],t[f],0);Array.isArray(v)&&v.length===2&&Je(v[0])&&Je(v[1])&&(d[0]=v[0],d[1]=v[1])})}),a};function rY(e){return e==null?void 0:String(e)}function ET(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:o,dataKey:a}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!an(i[t.dataKey])){var c=mk(n,"value",i[t.dataKey]);if(c)return c.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var f=Vt(i,an(a)?t.dataKey:a);return an(f)?null:t.scale(f)}var bT=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:o,index:a}=e;if(t.type==="category")return n[a]?n[a].coordinate+r:null;var c=Vt(o,t.dataKey,t.scale.domain()[a]);return an(c)?null:t.scale(c)-i/2+r},iY=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},oY=e=>{var t=e.flat(2).filter(Je);return[Math.min(...t),Math.max(...t)]},sY=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],aY=(e,t,n)=>{if(e!=null)return sY(Object.keys(e).reduce((r,i)=>{var o=e[i];if(!o)return r;var{stackedData:a}=o,c=a.reduce((f,d)=>{var m=lM(d,t,n),v=oY(m);return!Xt(v[0])||!Xt(v[1])?f:[Math.min(f[0],v[0]),Math.max(f[1],v[1])]},[1/0,-1/0]);return[Math.min(c[0],r[0]),Math.max(c[1],r[1])]},[1/0,-1/0]))},_T=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ST=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tp=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Jp(t,m=>m.coordinate),o=1/0,a=1,c=i.length;a<c;a++){var f=i[a],d=i[a-1];o=Math.min((f?.coordinate||0)-(d?.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function CT(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:o}=e;return Tu(Tu({},t),{},{dataKey:n,payload:r,value:i,name:o})}function tc(e,t){if(e)return String(e);if(typeof t=="string")return t}var lY=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},uY=(e,t)=>t==="centric"?e.angle:e.radius,Os=e=>e.layout.width,ks=e=>e.layout.height,cY=e=>e.layout.scale,dM=e=>e.layout.margin,am=de(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),lm=de(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Hw="data-recharts-item-index",qw="data-recharts-item-id",Zd=60;function AT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AT(Object(n),!0).forEach(function(r){dY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dY(e,t,n){return(t=fY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fY(e){var t=hY(e,"string");return typeof t=="symbol"?t:t+""}function hY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pY=e=>e.brush.height;function mY(e){var t=lm(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Zd;return n+i}return n},0)}function gY(e){var t=lm(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Zd;return n+i}return n},0)}function vY(e){var t=am(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function yY(e){var t=am(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var ir=de([Os,ks,dM,pY,mY,gY,vY,yY,Rk,zW],(e,t,n,r,i,o,a,c,f,d)=>{var m={left:(n.left||0)+i,right:(n.right||0)+o},v={top:(n.top||0)+a,bottom:(n.bottom||0)+c},E=Wh(Wh({},v),m),C=E.bottom;E.bottom+=r,E=XK(E,f,d);var I=e-E.left-E.right,P=t-E.top-E.bottom;return Wh(Wh({brushBottom:C},E),{},{width:Math.max(I,0),height:Math.max(P,0)})}),xY=de(ir,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Ww=de(Os,ks,(e,t)=>({x:0,y:0,width:e,height:t})),wY=M.createContext(null),Nr=()=>M.useContext(wY)!=null,um=e=>e.brush,cm=de([um,ir,dM],(e,t,n)=>({height:e.height,x:Je(e.x)?e.x:t.left,y:Je(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Je(e.width)?e.width:t.width})),Nv={},Rv={},Ov={},TT;function EY(){return TT||(TT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:o}={}){let a,c=null;const f=o!=null&&o.includes("leading"),d=o==null||o.includes("trailing"),m=()=>{c!==null&&(n.apply(a,c),a=void 0,c=null)},v=()=>{d&&m(),P()};let E=null;const C=()=>{E!=null&&clearTimeout(E),E=setTimeout(()=>{E=null,v()},r)},I=()=>{E!==null&&(clearTimeout(E),E=null)},P=()=>{I(),a=void 0,c=null},N=()=>{m()},D=function(...F){if(i?.aborted)return;a=this,c=F;const L=E==null;C(),f&&L&&m()};return D.schedule=C,D.cancel=P,D.flush=N,i?.addEventListener("abort",P,{once:!0}),D}e.debounce=t})(Ov)),Ov}var IT;function bY(){return IT||(IT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EY();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:a=!1,trailing:c=!0,maxWait:f}=o,d=Array(2);a&&(d[0]="leading"),c&&(d[1]="trailing");let m,v=null;const E=t.debounce(function(...P){m=r.apply(this,P),v=null},i,{edges:d}),C=function(...P){return f!=null&&(v===null&&(v=Date.now()),Date.now()-v>=f)?(m=r.apply(this,P),v=Date.now(),E.cancel(),E.schedule(),m):(E.apply(this,P),m)},I=()=>(E.flush(),m);return C.cancel=E.cancel,C.flush=I,C}e.debounce=n})(Rv)),Rv}var PT;function _Y(){return PT||(PT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bY();function n(r,i=0,o={}){const{leading:a=!0,trailing:c=!0}=o;return t.debounce(r,i,{leading:a,maxWait:i,trailing:c})}e.throttle=n})(Nv)),Nv}var kv,NT;function SY(){return NT||(NT=1,kv=_Y().throttle),kv}var CY=SY();const AY=ro(CY);var np=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(n.replace(/%s/g,()=>i[a++]))}},fM=(e,t,n)=>{var{width:r="100%",height:i="100%",aspect:o,maxHeight:a}=n,c=Es(r)?e:Number(r),f=Es(i)?t:Number(i);return o&&o>0&&(c?f=c/o:f&&(c=f*o),a&&f!=null&&f>a&&(f=a)),{calculatedWidth:c,calculatedHeight:f}},TY={width:0,height:0,overflow:"visible"},IY={width:0,overflowX:"visible"},PY={height:0,overflowY:"visible"},NY={},RY=e=>{var{width:t,height:n}=e,r=Es(t),i=Es(n);return r&&i?TY:r?IY:i?PY:NY};function OY(e){var{width:t,height:n,aspect:r}=e,i=t,o=n;return i===void 0&&o===void 0?(i="100%",o="100%"):i===void 0?i=r&&r>0?void 0:"100%":o===void 0&&(o=r&&r>0?void 0:"100%"),{width:i,height:o}}function fx(){return fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fx.apply(null,arguments)}function RT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function OT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RT(Object(n),!0).forEach(function(r){kY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kY(e,t,n){return(t=MY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MY(e){var t=DY(e,"string");return typeof t=="symbol"?t:t+""}function DY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hM=M.createContext({width:-1,height:-1});function LY(e){return zo(e.width)&&zo(e.height)}function pM(e){var{children:t,width:n,height:r}=e,i=M.useMemo(()=>({width:n,height:r}),[n,r]);return LY(i)?M.createElement(hM.Provider,{value:i},t):null}var Kw=()=>M.useContext(hM),BY=M.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:o,minWidth:a=0,minHeight:c,maxHeight:f,children:d,debounce:m=0,id:v,className:E,onResize:C,style:I={}}=e,P=M.useRef(null),N=M.useRef();N.current=C,M.useImperativeHandle(t,()=>P.current);var[D,F]=M.useState({containerWidth:r.width,containerHeight:r.height}),L=M.useCallback((Z,X)=>{F(fe=>{var se=Math.round(Z),ae=Math.round(X);return fe.containerWidth===se&&fe.containerHeight===ae?fe:{containerWidth:se,containerHeight:ae}})},[]);M.useEffect(()=>{if(P.current==null||typeof ResizeObserver>"u")return Yd;var Z=ae=>{var be,{width:he,height:ne}=ae[0].contentRect;L(he,ne),(be=N.current)===null||be===void 0||be.call(N,he,ne)};m>0&&(Z=AY(Z,m,{trailing:!0,leading:!1}));var X=new ResizeObserver(Z),{width:fe,height:se}=P.current.getBoundingClientRect();return L(fe,se),X.observe(P.current),()=>{X.disconnect()}},[L,m]);var{containerWidth:V,containerHeight:G}=D;np(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:q,calculatedHeight:W}=fM(V,G,{width:i,height:o,aspect:n,maxHeight:f});return np(q!=null&&q>0||W!=null&&W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,q,W,i,o,a,c,n),M.createElement("div",{id:v?"".concat(v):void 0,className:Ft("recharts-responsive-container",E),style:OT(OT({},I),{},{width:i,height:o,minWidth:a,minHeight:c,maxHeight:f}),ref:P},M.createElement("div",{style:RY({width:i,height:o})},M.createElement(pM,{width:q,height:W},d)))}),Mv=M.forwardRef((e,t)=>{var n=Kw();if(zo(n.width)&&zo(n.height))return e.children;var{width:r,height:i}=OY({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:a}=fM(void 0,void 0,{width:r,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return Je(o)&&Je(a)?M.createElement(pM,{width:o,height:a},e.children):M.createElement(BY,fx({},e,{width:r,height:i,ref:t}))});function mM(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var nc=()=>{var e,t=Nr(),n=Ge(xY),r=Ge(cm),i=(e=Ge(um))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},FY={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},gM=()=>{var e;return(e=Ge(ir))!==null&&e!==void 0?e:FY},Yw=()=>Ge(Os),Xw=()=>Ge(ks),UY=()=>Ge(e=>e.layout.margin),Dt=e=>e.layout.layoutType,Qd=()=>Ge(Dt),jY=()=>{var e=Qd();return e!==void 0},dm=e=>{var t=Zt(),n=Nr(),{width:r,height:i}=e,o=Kw(),a=r,c=i;return o&&(a=o.width>0?o.width:r,c=o.height>0?o.height:i),M.useEffect(()=>{!n&&zo(a)&&zo(c)&&t(GK({width:a,height:c}))},[t,n,a,c]),null},vM=Symbol.for("immer-nothing"),kT=Symbol.for("immer-draftable"),Mi=Symbol.for("immer-state");function wo(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Nd=Object.getPrototypeOf;function ju(e){return!!e&&!!e[Mi]}function _l(e){return e?yM(e)||Array.isArray(e)||!!e[kT]||!!e.constructor?.[kT]||ef(e)||hm(e):!1}var VY=Object.prototype.constructor.toString(),MT=new WeakMap;function yM(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=MT.get(n);return r===void 0&&(r=Function.toString.call(n),MT.set(n,r)),r===VY}function rp(e,t,n=!0){fm(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function fm(e){const t=e[Mi];return t?t.type_:Array.isArray(e)?1:ef(e)?2:hm(e)?3:0}function hx(e,t){return fm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function xM(e,t,n){const r=fm(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function $Y(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ef(e){return e instanceof Map}function hm(e){return e instanceof Set}function sl(e){return e.copy_||e.base_}function px(e,t){if(ef(e))return new Map(e);if(hm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=yM(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Mi];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const a=i[o],c=r[a];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[a]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[a]})}return Object.create(Nd(e),r)}else{const r=Nd(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Jw(e,t=!1){return pm(e)||ju(e)||!_l(e)||(fm(e)>1&&Object.defineProperties(e,{set:Kh,add:Kh,clear:Kh,delete:Kh}),Object.freeze(e),t&&Object.values(e).forEach(n=>Jw(n,!0))),e}function zY(){wo(2)}var Kh={value:zY};function pm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var GY={};function Sl(e){const t=GY[e];return t||wo(0,e),t}var Rd;function wM(){return Rd}function HY(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function DT(e,t){t&&(Sl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function mx(e){gx(e),e.drafts_.forEach(qY),e.drafts_=null}function gx(e){e===Rd&&(Rd=e.parent_)}function LT(e){return Rd=HY(Rd,e)}function qY(e){const t=e[Mi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function BT(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Mi].modified_&&(mx(t),wo(4)),_l(e)&&(e=ip(t,e),t.parent_||op(t,e)),t.patches_&&Sl("Patches").generateReplacementPatches_(n[Mi].base_,e,t.patches_,t.inversePatches_)):e=ip(t,n,[]),mx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==vM?e:void 0}function ip(e,t,n){if(pm(t))return t;const r=e.immer_.shouldUseStrictIteration(),i=t[Mi];if(!i)return rp(t,(o,a)=>FT(e,i,t,o,a,n),r),t;if(i.scope_!==e)return t;if(!i.modified_)return op(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let a=o,c=!1;i.type_===3&&(a=new Set(o),o.clear(),c=!0),rp(a,(f,d)=>FT(e,i,o,f,d,n,c),r),op(e,o,!1),n&&e.patches_&&Sl("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function FT(e,t,n,r,i,o,a){if(i==null||typeof i!="object"&&!a)return;const c=pm(i);if(!(c&&!a)){if(ju(i)){const f=o&&t&&t.type_!==3&&!hx(t.assigned_,r)?o.concat(r):void 0,d=ip(e,i,f);if(xM(n,r,d),ju(d))e.canAutoFreeze_=!1;else return}else a&&n.add(i);if(_l(i)&&!c){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===i&&c)return;ip(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(ef(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&op(e,i)}}}function op(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Jw(t,n)}function WY(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:wM(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=Zw;n&&(i=[r],o=Od);const{revoke:a,proxy:c}=Proxy.revocable(i,o);return r.draft_=c,r.revoke_=a,c}var Zw={get(e,t){if(t===Mi)return e;const n=sl(e);if(!hx(n,t))return KY(e,n,t);const r=n[t];return e.finalized_||!_l(r)?r:r===Dv(e.base_,t)?(Lv(e),e.copy_[t]=yx(r,e)):r},has(e,t){return t in sl(e)},ownKeys(e){return Reflect.ownKeys(sl(e))},set(e,t,n){const r=EM(sl(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Dv(sl(e),t),o=i?.[Mi];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if($Y(n,i)&&(n!==void 0||hx(e.base_,t)))return!0;Lv(e),vx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Dv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Lv(e),vx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=sl(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){wo(11)},getPrototypeOf(e){return Nd(e.base_)},setPrototypeOf(){wo(12)}},Od={};rp(Zw,(e,t)=>{Od[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Od.deleteProperty=function(e,t){return Od.set.call(this,e,t,void 0)};Od.set=function(e,t,n){return Zw.set.call(this,e[0],t,n,e[0])};function Dv(e,t){const n=e[Mi];return(n?sl(n):e)[t]}function KY(e,t,n){const r=EM(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function EM(e,t){if(!(t in e))return;let n=Nd(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Nd(n)}}function vx(e){e.modified_||(e.modified_=!0,e.parent_&&vx(e.parent_))}function Lv(e){e.copy_||(e.copy_=px(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var YY=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const a=this;return function(f=o,...d){return a.produce(f,m=>n.call(this,m,...d))}}typeof n!="function"&&wo(6),r!==void 0&&typeof r!="function"&&wo(7);let i;if(_l(t)){const o=LT(this),a=yx(t,void 0);let c=!0;try{i=n(a),c=!1}finally{c?mx(o):gx(o)}return DT(o,r),BT(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===vM&&(i=void 0),this.autoFreeze_&&Jw(i,!0),r){const o=[],a=[];Sl("Patches").generateReplacementPatches_(t,i,o,a),r(o,a)}return i}else wo(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(a,...c)=>this.produceWithPatches(a,f=>t(f,...c));let r,i;return[this.produce(t,n,(a,c)=>{r=a,i=c}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){_l(e)||wo(8),ju(e)&&(e=XY(e));const t=LT(this),n=yx(e,void 0);return n[Mi].isManual_=!0,gx(t),n}finishDraft(e,t){const n=e&&e[Mi];(!n||!n.isManual_)&&wo(9);const{scope_:r}=n;return DT(r,t),BT(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Sl("Patches").applyPatches_;return ju(e)?r(e,t):this.produce(e,i=>r(i,t))}};function yx(e,t){const n=ef(e)?Sl("MapSet").proxyMap_(e,t):hm(e)?Sl("MapSet").proxySet_(e,t):WY(e,t);return(t?t.scope_:wM()).drafts_.push(n),n}function XY(e){return ju(e)||wo(10,e),bM(e)}function bM(e){if(!_l(e)||pm(e))return e;const t=e[Mi];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=px(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=px(e,!0);return rp(n,(i,o)=>{xM(n,i,bM(o))},r),t&&(t.finalized_=!1),n}var JY=new YY;JY.produce;var ZY={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},_M=fi({name:"legend",initialState:ZY,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:gn()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,i=So(e).payload.indexOf(n);i>-1&&(e.payload[i]=r)},prepare:gn()},removeLegendPayload:{reducer(e,t){var n=So(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:gn()}}}),{setLegendSize:UT,setLegendSettings:QY,addLegendPayload:SM,replaceLegendPayload:CM,removeLegendPayload:AM}=_M.actions,eX=_M.reducer,tX=["contextPayload"];function xx(){return xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xx.apply(null,arguments)}function jT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jT(Object(n),!0).forEach(function(r){nX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nX(e,t,n){return(t=rX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rX(e){var t=iX(e,"string");return typeof t=="symbol"?t:t+""}function iX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oX(e,t){if(e==null)return{};var n,r,i=sX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function aX(e){return e.value}function lX(e){var{contextPayload:t}=e,n=oX(e,tX),r=Tk(t,e.payloadUniqBy,aX),i=Vu(Vu({},n),{},{payload:r});return M.isValidElement(e.content)?M.cloneElement(e.content,i):typeof e.content=="function"?M.createElement(e.content,i):M.createElement(Zq,i)}function uX(e,t,n,r,i,o){var{layout:a,align:c,verticalAlign:f}=t,d,m;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(c==="center"&&a==="vertical"?d={left:((r||0)-o.width)/2}:d=c==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?m={top:((i||0)-o.height)/2}:m=f==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Vu(Vu({},d),m)}function cX(e){var t=Zt();return M.useEffect(()=>{t(QY(e))},[t,e]),null}function dX(e){var t=Zt();return M.useEffect(()=>(t(UT(e)),()=>{t(UT({width:0,height:0}))}),[t,e]),null}function fX(e,t,n,r){return e==="vertical"&&Je(t)?{height:t}:e==="horizontal"?{width:n||r}:null}var hX={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function TM(e){var t=Vn(e,hX),n=qW(),r=jH(),i=UY(),{width:o,height:a,wrapperStyle:c,portal:f}=t,[d,m]=Ok([n]),v=Yw(),E=Xw();if(v==null||E==null)return null;var C=v-(i?.left||0)-(i?.right||0),I=fX(t.layout,a,o,C),P=f?c:Vu(Vu({position:"absolute",width:I?.width||o||"auto",height:I?.height||a||"auto"},uX(c,t,i,v,E,d)),c),N=f??r;if(N==null||n==null)return null;var D=M.createElement("div",{className:"recharts-legend-wrapper",style:P,ref:m},M.createElement(cX,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!f&&M.createElement(dX,{width:d.width,height:d.height}),M.createElement(lX,xx({},t,I,{margin:i,chartWidth:v,chartHeight:E,contextPayload:n})));return ow.createPortal(D,N)}TM.displayName="Legend";function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wx.apply(null,arguments)}function VT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VT(Object(n),!0).forEach(function(r){pX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pX(e,t,n){return(t=mX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mX(e){var t=gX(e,"string");return typeof t=="symbol"?t:t+""}function gX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vX(e){return Array.isArray(e)&&eo(e[0])&&eo(e[1])?e.join(" ~ "):e}var yX=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:a,itemSorter:c,wrapperClassName:f,labelClassName:d,label:m,labelFormatter:v,accessibilityLayer:E=!1}=e,C=()=>{if(o&&o.length){var G={padding:0,margin:0},q=(c?Jp(o,c):o).map((W,Z)=>{if(W.type==="none")return null;var X=W.formatter||a||vX,{value:fe,name:se}=W,ae=fe,be=se;if(X){var he=X(fe,se,W,Z,o);if(Array.isArray(he))[ae,be]=he;else if(he!=null)ae=he;else return null}var ne=Bv({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},r);return M.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Z),style:ne},eo(be)?M.createElement("span",{className:"recharts-tooltip-item-name"},be):null,eo(be)?M.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,M.createElement("span",{className:"recharts-tooltip-item-value"},ae),M.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return M.createElement("ul",{className:"recharts-tooltip-item-list",style:G},q)}return null},I=Bv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),P=Bv({margin:0},i),N=!an(m),D=N?m:"",F=Ft("recharts-default-tooltip",f),L=Ft("recharts-tooltip-label",d);N&&v&&o!==void 0&&o!==null&&(D=v(m,o));var V=E?{role:"status","aria-live":"assertive"}:{};return M.createElement("div",wx({className:F,style:I},V),M.createElement("p",{className:L,style:P},M.isValidElement(D)?D:"".concat(D)),C())},id="recharts-tooltip-wrapper",xX={visibility:"hidden"};function wX(e){var{coordinate:t,translateX:n,translateY:r}=e;return Ft(id,{["".concat(id,"-right")]:Je(n)&&t&&Je(t.x)&&n>=t.x,["".concat(id,"-left")]:Je(n)&&t&&Je(t.x)&&n<t.x,["".concat(id,"-bottom")]:Je(r)&&t&&Je(t.y)&&r>=t.y,["".concat(id,"-top")]:Je(r)&&t&&Je(t.y)&&r<t.y})}function $T(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:a,tooltipDimension:c,viewBox:f,viewBoxDimension:d}=e;if(o&&Je(o[r]))return o[r];var m=n[r]-c-(i>0?i:0),v=n[r]+i;if(t[r])return a[r]?m:v;var E=f[r];if(E==null)return 0;if(a[r]){var C=m,I=E;return C<I?Math.max(v,E):Math.max(m,E)}if(d==null)return 0;var P=v+c,N=E+d;return P>N?Math.max(m,E):Math.max(v,E)}function EX(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function bX(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:a,useTranslate3d:c,viewBox:f}=e,d,m,v;return a.height>0&&a.width>0&&n?(m=$T({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:f,viewBoxDimension:f.width}),v=$T({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:f,viewBoxDimension:f.height}),d=EX({translateX:m,translateY:v,useTranslate3d:c})):d=xX,{cssProperties:d,cssClasses:wX({translateX:m,translateY:v,coordinate:n})}}function zT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zT(Object(n),!0).forEach(function(r){Ex(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ex(e,t,n){return(t=_X(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _X(e){var t=SX(e,"string");return typeof t=="symbol"?t:t+""}function SX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class CX extends M.PureComponent{constructor(){super(...arguments),Ex(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Ex(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:a,hasPayload:c,isAnimationActive:f,offset:d,position:m,reverseDirection:v,useTranslate3d:E,viewBox:C,wrapperStyle:I,lastBoundingBox:P,innerRef:N,hasPortalFromProps:D}=this.props,{cssClasses:F,cssProperties:L}=bX({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:d,position:m,reverseDirection:v,tooltipBox:{height:P.height,width:P.width},useTranslate3d:E,viewBox:C}),V=D?{}:Yh(Yh({transition:f&&t?"transform ".concat(r,"ms ").concat(i):void 0},L),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&c?"visible":"hidden",position:"absolute",top:0,left:0}),G=Yh(Yh({},V),{},{visibility:!this.state.dismissed&&t&&c?"visible":"hidden"},I);return M.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:F,style:G,ref:N},o)}}var IM=()=>{var e;return(e=Ge(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function bx(){return bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bx.apply(null,arguments)}function GT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function HT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GT(Object(n),!0).forEach(function(r){AX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AX(e,t,n){return(t=TX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TX(e){var t=IX(e,"string");return typeof t=="symbol"?t:t+""}function IX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qT={curveBasisClosed:oq,curveBasisOpen:sq,curveBasis:iq,curveBumpX:GH,curveBumpY:HH,curveLinearClosed:aq,curveLinear:Kp,curveMonotoneX:lq,curveMonotoneY:uq,curveNatural:cq,curveStep:dq,curveStepAfter:hq,curveStepBefore:fq},sp=e=>Xt(e.x)&&Xt(e.y),WT=e=>e.base!=null&&sp(e.base)&&sp(e),od=e=>e.x,sd=e=>e.y,PX=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Kd(e));return(n==="curveMonotone"||n==="curveBump")&&t?qT["".concat(n).concat(t==="vertical"?"Y":"X")]:qT[n]||Kp},NX=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=e,a=PX(t,i),c=o?n.filter(sp):n,f;if(Array.isArray(r)){var d=n.map((C,I)=>HT(HT({},C),{},{base:r[I]}));i==="vertical"?f=Vh().y(sd).x1(od).x0(C=>C.base.x):f=Vh().x(od).y1(sd).y0(C=>C.base.y);var m=f.defined(WT).curve(a),v=o?d.filter(WT):d;return m(v)}i==="vertical"&&Je(r)?f=Vh().y(sd).x1(od).x0(r):Je(r)?f=Vh().x(od).y1(sd).y0(r):f=nk().x(od).y(sd);var E=f.defined(sp).curve(a);return E(c)},mm=e=>{var{className:t,points:n,path:r,pathRef:i}=e,o=Qd();if((!n||!n.length)&&!r)return null;var a={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},c=n&&n.length?NX(a):r;return M.createElement("path",bx({},Ri(e),Fq(e),{className:Ft("recharts-curve",t),d:c===null?void 0:c,ref:i}))},RX=["x","y","top","left","width","height","className"];function _x(){return _x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_x.apply(null,arguments)}function KT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function OX(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(n),!0).forEach(function(r){kX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kX(e,t,n){return(t=MX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MX(e){var t=DX(e,"string");return typeof t=="symbol"?t:t+""}function DX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LX(e,t){if(e==null)return{};var n,r,i=BX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var FX=(e,t,n,r,i,o)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n),UX=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:o=0,height:a=0,className:c}=e,f=LX(e,RX),d=OX({x:t,y:n,top:r,left:i,width:o,height:a},f);return!Je(t)||!Je(n)||!Je(o)||!Je(a)||!Je(r)||!Je(i)?null:M.createElement("path",_x({},Oi(d),{className:Ft("recharts-cross",c),d:FX(t,n,o,a,r,i)}))};function jX(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function YT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function XT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YT(Object(n),!0).forEach(function(r){VX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VX(e,t,n){return(t=$X(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $X(e){var t=zX(e,"string");return typeof t=="symbol"?t:t+""}function zX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GX=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),PM=(e,t,n)=>e.map(r=>"".concat(GX(r)," ").concat(t,"ms ").concat(n)).join(","),HX=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),kd=(e,t)=>Object.keys(t).reduce((n,r)=>XT(XT({},n),{},{[r]:e(r,t[r])}),{});function JT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JT(Object(n),!0).forEach(function(r){qX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qX(e,t,n){return(t=WX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WX(e){var t=KX(e,"string");return typeof t=="symbol"?t:t+""}function KX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ap=(e,t,n)=>e+(t-e)*n,Sx=e=>{var{from:t,to:n}=e;return t!==n},NM=(e,t,n)=>{var r=kd((i,o)=>{if(Sx(o)){var[a,c]=e(o.from,o.to,o.velocity);return rr(rr({},o),{},{from:a,velocity:c})}return o},t);return n<1?kd((i,o)=>Sx(o)&&r[i]!=null?rr(rr({},o),{},{velocity:ap(o.velocity,r[i].velocity,n),from:ap(o.from,r[i].from,n)}):o,t):NM(e,r,n-1)};function YX(e,t,n,r,i,o){var a,c=r.reduce((E,C)=>rr(rr({},E),{},{[C]:{from:e[C],velocity:0,to:t[C]}}),{}),f=()=>kd((E,C)=>C.from,c),d=()=>!Object.values(c).filter(Sx).length,m=null,v=E=>{a||(a=E);var C=E-a,I=C/n.dt;c=NM(n,c,I),i(rr(rr(rr({},e),t),f())),a=E,d()||(m=o.setTimeout(v))};return()=>(m=o.setTimeout(v),()=>{var E;(E=m)===null||E===void 0||E()})}function XX(e,t,n,r,i,o,a){var c=null,f=i.reduce((v,E)=>{var C=e[E],I=t[E];return C==null||I==null?v:rr(rr({},v),{},{[E]:[C,I]})},{}),d,m=v=>{d||(d=v);var E=(v-d)/r,C=kd((P,N)=>ap(...N,n(E)),f);if(o(rr(rr(rr({},e),t),C)),E<1)c=a.setTimeout(m);else{var I=kd((P,N)=>ap(...N,n(1)),f);o(rr(rr(rr({},e),t),I))}};return()=>(c=a.setTimeout(m),()=>{var v;(v=c)===null||v===void 0||v()})}const JX=(e,t,n,r,i,o)=>{var a=HX(e,t);return n==null?()=>(i(rr(rr({},e),t)),()=>{}):n.isStepper===!0?YX(e,t,n,a,i,o):XX(e,t,n,r,a,i,o)};var lp=1e-4,RM=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],OM=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),ZT=(e,t)=>n=>{var r=RM(e,t);return OM(r,n)},ZX=(e,t)=>n=>{var r=RM(e,t),i=[...r.map((o,a)=>o*a).slice(1),0];return OM(i,n)},QX=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(r==null||r.length!==4)return null;var i=r.map(o=>parseFloat(o));return[i[0],i[1],i[2],i[3]]},eJ=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=QX(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},tJ=(e,t,n,r)=>{var i=ZT(e,n),o=ZT(t,r),a=ZX(e,n),c=d=>d>1?1:d<0?0:d,f=d=>{for(var m=d>1?1:d,v=m,E=0;E<8;++E){var C=i(v)-m,I=a(v);if(Math.abs(C-m)<lp||I<lp)return o(v);v=c(v-C/I)}return o(v)};return f.isStepper=!1,f},QT=function(){return tJ(...eJ(...arguments))},nJ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,o=(a,c,f)=>{var d=-(a-c)*n,m=f*r,v=f+(d-m)*i/1e3,E=f*i/1e3+a;return Math.abs(E-c)<lp&&Math.abs(v)<lp?[c,0]:[E,v]};return o.isStepper=!0,o.dt=i,o},rJ=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return QT(e);case"spring":return nJ();default:if(e.split("(")[0]==="cubic-bezier")return QT(e)}return typeof e=="function"?e:null};function iJ(e){var t,n=()=>null,r=!1,i=null,o=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var c=a,[f,...d]=c;if(typeof f=="number"){i=e.setTimeout(o.bind(null,d),f);return}o(f),i=e.setTimeout(o.bind(null,d));return}typeof a=="string"&&(t=a,n(t)),typeof a=="object"&&(t=a,n(t)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,i&&(i(),i=null),o(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>e}}class oJ{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=a=>{a-r>=n?t(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{i!=null&&cancelAnimationFrame(i)}}}function sJ(){return iJ(new oJ)}var aJ=M.createContext(sJ);function lJ(e,t){var n=M.useContext(aJ);return M.useMemo(()=>t??n(e),[e,t,n])}var uJ=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),gm={isSsr:uJ()},cJ={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},eI={t:0},Fv={t:1};function tf(e){var t=Vn(e,cJ),{isActive:n,canBegin:r,duration:i,easing:o,begin:a,onAnimationEnd:c,onAnimationStart:f,children:d}=t,m=n==="auto"?!gm.isSsr:n,v=lJ(t.animationId,t.animationManager),[E,C]=M.useState(m?eI:Fv),I=M.useRef(null);return M.useEffect(()=>{m||C(Fv)},[m]),M.useEffect(()=>{if(!m||!r)return Yd;var P=JX(eI,Fv,rJ(o),i,C,v.getTimeoutController()),N=()=>{I.current=P()};return v.start([f,a,N,i,c]),()=>{v.stop(),I.current&&I.current(),c()}},[m,r,i,o,a,f,c,v]),d(E.t)}function nf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=M.useRef(Ad(t)),r=M.useRef(e);return r.current!==e&&(n.current=Ad(t),r.current=e),n.current}var dJ=["radius"],fJ=["radius"],tI,nI,rI,iI,oI,sI,aI,lI,uI,cI;function dI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dI(Object(n),!0).forEach(function(r){hJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hJ(e,t,n){return(t=pJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pJ(e){var t=mJ(e,"string");return typeof t=="symbol"?t:t+""}function mJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function up(){return up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},up.apply(null,arguments)}function hI(e,t){if(e==null)return{};var n,r,i=gJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Uo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var pI=(e,t,n,r,i)=>{var o=va(n),a=va(r),c=Math.min(Math.abs(o)/2,Math.abs(a)/2),f=a>=0?1:-1,d=o>=0?1:-1,m=a>=0&&o>=0||a<0&&o<0?1:0,v;if(c>0&&i instanceof Array){for(var E=[0,0,0,0],C=0,I=4;C<I;C++)E[C]=i[C]>c?c:i[C];v=On(tI||(tI=Uo(["M",",",""])),e,t+f*E[0]),E[0]>0&&(v+=On(nI||(nI=Uo(["A ",",",",0,0,",",",",",""])),E[0],E[0],m,e+d*E[0],t)),v+=On(rI||(rI=Uo(["L ",",",""])),e+n-d*E[1],t),E[1]>0&&(v+=On(iI||(iI=Uo(["A ",",",",0,0,",`,
        `,",",""])),E[1],E[1],m,e+n,t+f*E[1])),v+=On(oI||(oI=Uo(["L ",",",""])),e+n,t+r-f*E[2]),E[2]>0&&(v+=On(sI||(sI=Uo(["A ",",",",0,0,",`,
        `,",",""])),E[2],E[2],m,e+n-d*E[2],t+r)),v+=On(aI||(aI=Uo(["L ",",",""])),e+d*E[3],t+r),E[3]>0&&(v+=On(lI||(lI=Uo(["A ",",",",0,0,",`,
        `,",",""])),E[3],E[3],m,e,t+r-f*E[3])),v+="Z"}else if(c>0&&i===+i&&i>0){var P=Math.min(c,i);v=On(uI||(uI=Uo(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+f*P,P,P,m,e+d*P,t,e+n-d*P,t,P,P,m,e+n,t+f*P,e+n,t+r-f*P,P,P,m,e+n-d*P,t+r,e+d*P,t+r,P,P,m,e,t+r-f*P)}else v=On(cI||(cI=Uo(["M ",","," h "," v "," h "," Z"])),e,t,n,r,-n);return v},mI={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kM=e=>{var t=Vn(e,mI),n=M.useRef(null),[r,i]=M.useState(-1);M.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ve=n.current.getTotalLength();ve&&i(ve)}catch{}},[]);var{x:o,y:a,width:c,height:f,radius:d,className:m}=t,{animationEasing:v,animationDuration:E,animationBegin:C,isAnimationActive:I,isUpdateAnimationActive:P}=t,N=M.useRef(c),D=M.useRef(f),F=M.useRef(o),L=M.useRef(a),V=M.useMemo(()=>({x:o,y:a,width:c,height:f,radius:d}),[o,a,c,f,d]),G=nf(V,"rectangle-");if(o!==+o||a!==+a||c!==+c||f!==+f||c===0||f===0)return null;var q=Ft("recharts-rectangle",m);if(!P){var W=Oi(t),{radius:Z}=W,X=hI(W,dJ);return M.createElement("path",up({},X,{x:va(o),y:va(a),width:va(c),height:va(f),radius:typeof d=="number"?d:void 0,className:q,d:pI(o,a,c,f,d)}))}var fe=N.current,se=D.current,ae=F.current,be=L.current,he="0px ".concat(r===-1?1:r,"px"),ne="".concat(r,"px 0px"),we=PM(["strokeDasharray"],E,typeof v=="string"?v:mI.animationEasing);return M.createElement(tf,{animationId:G,key:G,canBegin:r>0,duration:E,easing:v,isActive:P,begin:C},ve=>{var xe=_n(fe,c,ve),Se=_n(se,f,ve),Ce=_n(ae,o,ve),te=_n(be,a,ve);n.current&&(N.current=xe,D.current=Se,F.current=Ce,L.current=te);var pe;I?ve>0?pe={transition:we,strokeDasharray:ne}:pe={strokeDasharray:he}:pe={strokeDasharray:ne};var Fe=Oi(t),{radius:Le}=Fe,lt=hI(Fe,fJ);return M.createElement("path",up({},lt,{radius:typeof d=="number"?d:void 0,className:q,d:pI(Ce,te,xe,Se,d),ref:n,style:fI(fI({},pe),t.style)}))})};function gI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gI(Object(n),!0).forEach(function(r){vJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vJ(e,t,n){return(t=yJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yJ(e){var t=xJ(e,"string");return typeof t=="symbol"?t:t+""}function xJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cp=Math.PI/180,wJ=e=>e*180/Math.PI,Wn=(e,t,n,r)=>({x:e+Math.cos(-cp*r)*n,y:t+Math.sin(-cp*r)*n}),MM=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},EJ=(e,t)=>{var{x:n,y:r}=e,{x:i,y:o}=t;return Math.sqrt((n-i)**2+(r-o)**2)},bJ=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:o}=t,a=EJ({x:n,y:r},{x:i,y:o});if(a<=0)return{radius:a,angle:0};var c=(n-i)/a,f=Math.acos(c);return r>o&&(f=2*Math.PI-f),{radius:a,angle:wJ(f),angleInRadian:f}},_J=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-o*360,endAngle:n-o*360}},SJ=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return e+a*360},CJ=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:i,angle:o}=bJ({x:n,y:r},t),{innerRadius:a,outerRadius:c}=t;if(i<a||i>c||i===0)return null;var{startAngle:f,endAngle:d}=_J(t),m=o,v;if(f<=d){for(;m>d;)m-=360;for(;m<f;)m+=360;v=m>=f&&m<=d}else{for(;m>f;)m-=360;for(;m<d;)m+=360;v=m>=d&&m<=f}return v?vI(vI({},t),{},{radius:i,angle:SJ(m,t)}):null};function DM(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:o}=e,a=Wn(t,n,r,i),c=Wn(t,n,r,o);return{points:[a,c],cx:t,cy:n,radius:r,startAngle:i,endAngle:o}}var yI,xI,wI,EI,bI,_I,SI;function Cx(){return Cx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cx.apply(null,arguments)}function fl(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var AJ=(e,t)=>{var n=vr(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Xh=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:o,isExternal:a,cornerRadius:c,cornerIsExternal:f}=e,d=c*(a?1:-1)+r,m=Math.asin(c/d)/cp,v=f?i:i+o*m,E=Wn(t,n,d,v),C=Wn(t,n,r,v),I=f?i-o*m:i,P=Wn(t,n,d*Math.cos(m*cp),I);return{center:E,circleTangency:C,lineTangency:P,theta:m}},LM=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:a}=e,c=AJ(o,a),f=o+c,d=Wn(t,n,i,o),m=Wn(t,n,i,f),v=On(yI||(yI=fl(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,i,i,+(Math.abs(c)>180),+(o>f),m.x,m.y);if(r>0){var E=Wn(t,n,r,o),C=Wn(t,n,r,f);v+=On(xI||(xI=fl(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),C.x,C.y,r,r,+(Math.abs(c)>180),+(o<=f),E.x,E.y)}else v+=On(wI||(wI=fl(["L ",","," Z"])),t,n);return v},TJ=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:c,startAngle:f,endAngle:d}=e,m=vr(d-f),{circleTangency:v,lineTangency:E,theta:C}=Xh({cx:t,cy:n,radius:i,angle:f,sign:m,cornerRadius:o,cornerIsExternal:c}),{circleTangency:I,lineTangency:P,theta:N}=Xh({cx:t,cy:n,radius:i,angle:d,sign:-m,cornerRadius:o,cornerIsExternal:c}),D=c?Math.abs(f-d):Math.abs(f-d)-C-N;if(D<0)return a?On(EI||(EI=fl(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),E.x,E.y,o,o,o*2,o,o,-o*2):LM({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:d});var F=On(bI||(bI=fl(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),E.x,E.y,o,o,+(m<0),v.x,v.y,i,i,+(D>180),+(m<0),I.x,I.y,o,o,+(m<0),P.x,P.y);if(r>0){var{circleTangency:L,lineTangency:V,theta:G}=Xh({cx:t,cy:n,radius:r,angle:f,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),{circleTangency:q,lineTangency:W,theta:Z}=Xh({cx:t,cy:n,radius:r,angle:d,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),X=c?Math.abs(f-d):Math.abs(f-d)-G-Z;if(X<0&&o===0)return"".concat(F,"L").concat(t,",").concat(n,"Z");F+=On(_I||(_I=fl(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),W.x,W.y,o,o,+(m<0),q.x,q.y,r,r,+(X>180),+(m>0),L.x,L.y,o,o,+(m<0),V.x,V.y)}else F+=On(SI||(SI=fl(["L",",","Z"])),t,n);return F},IJ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},BM=e=>{var t=Vn(e,IJ),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:a,forceCornerRadius:c,cornerIsExternal:f,startAngle:d,endAngle:m,className:v}=t;if(o<i||d===m)return null;var E=Ft("recharts-sector",v),C=o-i,I=zr(a,C,0,!0),P;return I>0&&Math.abs(d-m)<360?P=TJ({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(I,C/2),forceCornerRadius:c,cornerIsExternal:f,startAngle:d,endAngle:m}):P=LM({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:d,endAngle:m}),M.createElement("path",Cx({},Oi(t),{className:E,d:P}))};function PJ(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(vk(t)){if(e==="centric"){var{cx:r,cy:i,innerRadius:o,outerRadius:a,angle:c}=t,f=Wn(r,i,o,c),d=Wn(r,i,a,c);return[{x:f.x,y:f.y},{x:d.x,y:d.y}]}return DM(t)}}var Uv={},jv={},Vv={},CI;function NJ(){return CI||(CI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pk();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(Vv)),Vv}var AI;function RJ(){return AI||(AI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NJ();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(jv)),jv}var TI;function OJ(){return TI||(TI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nk(),n=RJ();function r(i,o,a){a&&typeof a!="number"&&t.isIterateeCall(i,o,a)&&(o=a=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),a=a===void 0?i<o?1:-1:n.toFinite(a);const c=Math.max(Math.ceil((o-i)/(a||1)),0),f=new Array(c);for(let d=0;d<c;d++)f[d]=i,i+=a;return f}e.range=r})(Uv)),Uv}var $v,II;function kJ(){return II||(II=1,$v=OJ().range),$v}var MJ=kJ();const FM=ro(MJ);function xa(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function DJ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Qw(e){let t,n,r;e.length!==2?(t=xa,n=(c,f)=>xa(e(c),f),r=(c,f)=>e(c)-f):(t=e===xa||e===DJ?e:LJ,n=e,r=e);function i(c,f,d=0,m=c.length){if(d<m){if(t(f,f)!==0)return m;do{const v=d+m>>>1;n(c[v],f)<0?d=v+1:m=v}while(d<m)}return d}function o(c,f,d=0,m=c.length){if(d<m){if(t(f,f)!==0)return m;do{const v=d+m>>>1;n(c[v],f)<=0?d=v+1:m=v}while(d<m)}return d}function a(c,f,d=0,m=c.length){const v=i(c,f,d,m-1);return v>d&&r(c[v-1],f)>-r(c[v],f)?v-1:v}return{left:i,center:a,right:o}}function LJ(){return 0}function UM(e){return e===null?NaN:+e}function*BJ(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const FJ=Qw(xa),rf=FJ.right;Qw(UM).center;class PI extends Map{constructor(t,n=VJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(NI(this,t))}has(t){return super.has(NI(this,t))}set(t,n){return super.set(UJ(this,t),n)}delete(t){return super.delete(jJ(this,t))}}function NI({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function UJ({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function jJ({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function VJ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function $J(e=xa){if(e===xa)return jM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function jM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const zJ=Math.sqrt(50),GJ=Math.sqrt(10),HJ=Math.sqrt(2);function dp(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=zJ?10:o>=GJ?5:o>=HJ?2:1;let c,f,d;return i<0?(d=Math.pow(10,-i)/a,c=Math.round(e*d),f=Math.round(t*d),c/d<e&&++c,f/d>t&&--f,d=-d):(d=Math.pow(10,i)*a,c=Math.round(e/d),f=Math.round(t/d),c*d<e&&++c,f*d>t&&--f),f<c&&.5<=n&&n<2?dp(e,t,n*2):[c,f,d]}function Ax(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,a]=r?dp(t,e,n):dp(e,t,n);if(!(o>=i))return[];const c=o-i+1,f=new Array(c);if(r)if(a<0)for(let d=0;d<c;++d)f[d]=(o-d)/-a;else for(let d=0;d<c;++d)f[d]=(o-d)*a;else if(a<0)for(let d=0;d<c;++d)f[d]=(i+d)/-a;else for(let d=0;d<c;++d)f[d]=(i+d)*a;return f}function Tx(e,t,n){return t=+t,e=+e,n=+n,dp(e,t,n)[2]}function Ix(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Tx(t,e,n):Tx(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function RI(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function OI(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function VM(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?jM:$J(i);r>n;){if(r-n>600){const f=r-n+1,d=t-n+1,m=Math.log(f),v=.5*Math.exp(2*m/3),E=.5*Math.sqrt(m*v*(f-v)/f)*(d-f/2<0?-1:1),C=Math.max(n,Math.floor(t-d*v/f+E)),I=Math.min(r,Math.floor(t+(f-d)*v/f+E));VM(e,t,C,I,i)}const o=e[t];let a=n,c=r;for(ad(e,n,t),i(e[r],o)>0&&ad(e,n,r);a<c;){for(ad(e,a,c),++a,--c;i(e[a],o)<0;)++a;for(;i(e[c],o)>0;)--c}i(e[n],o)===0?ad(e,n,c):(++c,ad(e,c,r)),c<=t&&(n=c+1),t<=c&&(r=c-1)}return e}function ad(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function qJ(e,t,n){if(e=Float64Array.from(BJ(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return OI(e);if(t>=1)return RI(e);var r,i=(r-1)*t,o=Math.floor(i),a=RI(VM(e,o).subarray(0,o+1)),c=OI(e.subarray(o+1));return a+(c-a)*(i-o)}}function WJ(e,t,n=UM){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),c=+n(e[o+1],o+1,e);return a+(c-a)*(i-o)}}function KJ(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function oo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ms(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Px=Symbol("implicit");function eE(){var e=new PI,t=[],n=[],r=Px;function i(o){let a=e.get(o);if(a===void 0){if(r!==Px)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new PI;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return eE(t,n).unknown(r)},oo.apply(i,arguments),i}function tE(){var e=eE().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,a,c=!1,f=0,d=0,m=.5;delete e.unknown;function v(){var E=t().length,C=i<r,I=C?i:r,P=C?r:i;o=(P-I)/Math.max(1,E-f+d*2),c&&(o=Math.floor(o)),I+=(P-I-o*(E-f))*m,a=o*(1-f),c&&(I=Math.round(I),a=Math.round(a));var N=KJ(E).map(function(D){return I+o*D});return n(C?N.reverse():N)}return e.domain=function(E){return arguments.length?(t(E),v()):t()},e.range=function(E){return arguments.length?([r,i]=E,r=+r,i=+i,v()):[r,i]},e.rangeRound=function(E){return[r,i]=E,r=+r,i=+i,c=!0,v()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(E){return arguments.length?(c=!!E,v()):c},e.padding=function(E){return arguments.length?(f=Math.min(1,d=+E),v()):f},e.paddingInner=function(E){return arguments.length?(f=Math.min(1,E),v()):f},e.paddingOuter=function(E){return arguments.length?(d=+E,v()):d},e.align=function(E){return arguments.length?(m=Math.max(0,Math.min(1,E)),v()):m},e.copy=function(){return tE(t(),[r,i]).round(c).paddingInner(f).paddingOuter(d).align(m)},oo.apply(v(),arguments)}function $M(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return $M(t())},e}function YJ(){return $M(tE.apply(null,arguments).paddingInner(1))}function nE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function zM(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function of(){}var Md=.7,fp=1/Md,Du="\\s*([+-]?\\d+)\\s*",Dd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XJ=/^#([0-9a-f]{3,8})$/,JJ=new RegExp(`^rgb\\(${Du},${Du},${Du}\\)$`),ZJ=new RegExp(`^rgb\\(${$o},${$o},${$o}\\)$`),QJ=new RegExp(`^rgba\\(${Du},${Du},${Du},${Dd}\\)$`),eZ=new RegExp(`^rgba\\(${$o},${$o},${$o},${Dd}\\)$`),tZ=new RegExp(`^hsl\\(${Dd},${$o},${$o}\\)$`),nZ=new RegExp(`^hsla\\(${Dd},${$o},${$o},${Dd}\\)$`),kI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nE(of,Ld,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:MI,formatHex:MI,formatHex8:rZ,formatHsl:iZ,formatRgb:DI,toString:DI});function MI(){return this.rgb().formatHex()}function rZ(){return this.rgb().formatHex8()}function iZ(){return GM(this).formatHsl()}function DI(){return this.rgb().formatRgb()}function Ld(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=XJ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?LI(t):n===3?new ci(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Jh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Jh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=JJ.exec(e))?new ci(t[1],t[2],t[3],1):(t=ZJ.exec(e))?new ci(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=QJ.exec(e))?Jh(t[1],t[2],t[3],t[4]):(t=eZ.exec(e))?Jh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=tZ.exec(e))?UI(t[1],t[2]/100,t[3]/100,1):(t=nZ.exec(e))?UI(t[1],t[2]/100,t[3]/100,t[4]):kI.hasOwnProperty(e)?LI(kI[e]):e==="transparent"?new ci(NaN,NaN,NaN,0):null}function LI(e){return new ci(e>>16&255,e>>8&255,e&255,1)}function Jh(e,t,n,r){return r<=0&&(e=t=n=NaN),new ci(e,t,n,r)}function oZ(e){return e instanceof of||(e=Ld(e)),e?(e=e.rgb(),new ci(e.r,e.g,e.b,e.opacity)):new ci}function Nx(e,t,n,r){return arguments.length===1?oZ(e):new ci(e,t,n,r??1)}function ci(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}nE(ci,Nx,zM(of,{brighter(e){return e=e==null?fp:Math.pow(fp,e),new ci(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Md:Math.pow(Md,e),new ci(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ci(vl(this.r),vl(this.g),vl(this.b),hp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BI,formatHex:BI,formatHex8:sZ,formatRgb:FI,toString:FI}));function BI(){return`#${hl(this.r)}${hl(this.g)}${hl(this.b)}`}function sZ(){return`#${hl(this.r)}${hl(this.g)}${hl(this.b)}${hl((isNaN(this.opacity)?1:this.opacity)*255)}`}function FI(){const e=hp(this.opacity);return`${e===1?"rgb(":"rgba("}${vl(this.r)}, ${vl(this.g)}, ${vl(this.b)}${e===1?")":`, ${e})`}`}function hp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hl(e){return e=vl(e),(e<16?"0":"")+e.toString(16)}function UI(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Eo(e,t,n,r)}function GM(e){if(e instanceof Eo)return new Eo(e.h,e.s,e.l,e.opacity);if(e instanceof of||(e=Ld(e)),!e)return new Eo;if(e instanceof Eo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,c=o-i,f=(o+i)/2;return c?(t===o?a=(n-r)/c+(n<r)*6:n===o?a=(r-t)/c+2:a=(t-n)/c+4,c/=f<.5?o+i:2-o-i,a*=60):c=f>0&&f<1?0:a,new Eo(a,c,f,e.opacity)}function aZ(e,t,n,r){return arguments.length===1?GM(e):new Eo(e,t,n,r??1)}function Eo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}nE(Eo,aZ,zM(of,{brighter(e){return e=e==null?fp:Math.pow(fp,e),new Eo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Md:Math.pow(Md,e),new Eo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ci(zv(e>=240?e-240:e+120,i,r),zv(e,i,r),zv(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Eo(jI(this.h),Zh(this.s),Zh(this.l),hp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hp(this.opacity);return`${e===1?"hsl(":"hsla("}${jI(this.h)}, ${Zh(this.s)*100}%, ${Zh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jI(e){return e=(e||0)%360,e<0?e+360:e}function Zh(e){return Math.max(0,Math.min(1,e||0))}function zv(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const rE=e=>()=>e;function lZ(e,t){return function(n){return e+n*t}}function uZ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function cZ(e){return(e=+e)==1?HM:function(t,n){return n-t?uZ(t,n,e):rE(isNaN(t)?n:t)}}function HM(e,t){var n=t-e;return n?lZ(e,n):rE(isNaN(e)?t:e)}const VI=(function e(t){var n=cZ(t);function r(i,o){var a=n((i=Nx(i)).r,(o=Nx(o)).r),c=n(i.g,o.g),f=n(i.b,o.b),d=HM(i.opacity,o.opacity);return function(m){return i.r=a(m),i.g=c(m),i.b=f(m),i.opacity=d(m),i+""}}return r.gamma=e,r})(1);function dZ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function fZ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hZ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=rc(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(c){for(a=0;a<r;++a)o[a]=i[a](c);return o}}function pZ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function pp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function mZ(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=rc(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Rx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gv=new RegExp(Rx.source,"g");function gZ(e){return function(){return e}}function vZ(e){return function(t){return e(t)+""}}function yZ(e,t){var n=Rx.lastIndex=Gv.lastIndex=0,r,i,o,a=-1,c=[],f=[];for(e=e+"",t=t+"";(r=Rx.exec(e))&&(i=Gv.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),c[a]?c[a]+=o:c[++a]=o),(r=r[0])===(i=i[0])?c[a]?c[a]+=i:c[++a]=i:(c[++a]=null,f.push({i:a,x:pp(r,i)})),n=Gv.lastIndex;return n<t.length&&(o=t.slice(n),c[a]?c[a]+=o:c[++a]=o),c.length<2?f[0]?vZ(f[0].x):gZ(t):(t=f.length,function(d){for(var m=0,v;m<t;++m)c[(v=f[m]).i]=v.x(d);return c.join("")})}function rc(e,t){var n=typeof t,r;return t==null||n==="boolean"?rE(t):(n==="number"?pp:n==="string"?(r=Ld(t))?(t=r,VI):yZ:t instanceof Ld?VI:t instanceof Date?pZ:fZ(t)?dZ:Array.isArray(t)?hZ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?mZ:pp)(e,t)}function iE(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function xZ(e,t){t===void 0&&(t=e,e=rc);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var c=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[c](a-c)}}function wZ(e){return function(){return e}}function mp(e){return+e}var $I=[0,1];function Yr(e){return e}function Ox(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:wZ(isNaN(t)?NaN:.5)}function EZ(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function bZ(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Ox(i,r),o=n(a,o)):(r=Ox(r,i),o=n(o,a)),function(c){return o(r(c))}}function _Z(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Ox(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(c){var f=rf(e,c,1,r)-1;return o[f](i[f](c))}}function sf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function vm(){var e=$I,t=$I,n=rc,r,i,o,a=Yr,c,f,d;function m(){var E=Math.min(e.length,t.length);return a!==Yr&&(a=EZ(e[0],e[E-1])),c=E>2?_Z:bZ,f=d=null,v}function v(E){return E==null||isNaN(E=+E)?o:(f||(f=c(e.map(r),t,n)))(r(a(E)))}return v.invert=function(E){return a(i((d||(d=c(t,e.map(r),pp)))(E)))},v.domain=function(E){return arguments.length?(e=Array.from(E,mp),m()):e.slice()},v.range=function(E){return arguments.length?(t=Array.from(E),m()):t.slice()},v.rangeRound=function(E){return t=Array.from(E),n=iE,m()},v.clamp=function(E){return arguments.length?(a=E?!0:Yr,m()):a!==Yr},v.interpolate=function(E){return arguments.length?(n=E,m()):n},v.unknown=function(E){return arguments.length?(o=E,v):o},function(E,C){return r=E,i=C,m()}}function oE(){return vm()(Yr,Yr)}function SZ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function $u(e){return e=gp(Math.abs(e)),e?e[1]:NaN}function CZ(e,t){return function(n,r){for(var i=n.length,o=[],a=0,c=e[0],f=0;i>0&&c>0&&(f+c+1>r&&(c=Math.max(1,r-f)),o.push(n.substring(i-=c,i+c)),!((f+=c+1)>r));)c=e[a=(a+1)%e.length];return o.reverse().join(t)}}function AZ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var TZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bd(e){if(!(t=TZ.exec(e)))throw new Error("invalid format: "+e);var t;return new sE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Bd.prototype=sE.prototype;function sE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}sE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function IZ(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var qM;function PZ(e,t){var n=gp(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(qM=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+gp(e,Math.max(0,t+o-1))[0]}function zI(e,t){var n=gp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const GI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:SZ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>zI(e*100,t),r:zI,s:PZ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function HI(e){return e}var qI=Array.prototype.map,WI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function NZ(e){var t=e.grouping===void 0||e.thousands===void 0?HI:CZ(qI.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?HI:AZ(qI.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function d(v){v=Bd(v);var E=v.fill,C=v.align,I=v.sign,P=v.symbol,N=v.zero,D=v.width,F=v.comma,L=v.precision,V=v.trim,G=v.type;G==="n"?(F=!0,G="g"):GI[G]||(L===void 0&&(L=12),V=!0,G="g"),(N||E==="0"&&C==="=")&&(N=!0,E="0",C="=");var q=P==="$"?n:P==="#"&&/[boxX]/.test(G)?"0"+G.toLowerCase():"",W=P==="$"?r:/[%p]/.test(G)?a:"",Z=GI[G],X=/[defgprs%]/.test(G);L=L===void 0?6:/[gprs]/.test(G)?Math.max(1,Math.min(21,L)):Math.max(0,Math.min(20,L));function fe(se){var ae=q,be=W,he,ne,we;if(G==="c")be=Z(se)+be,se="";else{se=+se;var ve=se<0||1/se<0;if(se=isNaN(se)?f:Z(Math.abs(se),L),V&&(se=IZ(se)),ve&&+se==0&&I!=="+"&&(ve=!1),ae=(ve?I==="("?I:c:I==="-"||I==="("?"":I)+ae,be=(G==="s"?WI[8+qM/3]:"")+be+(ve&&I==="("?")":""),X){for(he=-1,ne=se.length;++he<ne;)if(we=se.charCodeAt(he),48>we||we>57){be=(we===46?i+se.slice(he+1):se.slice(he))+be,se=se.slice(0,he);break}}}F&&!N&&(se=t(se,1/0));var xe=ae.length+se.length+be.length,Se=xe<D?new Array(D-xe+1).join(E):"";switch(F&&N&&(se=t(Se+se,Se.length?D-be.length:1/0),Se=""),C){case"<":se=ae+se+be+Se;break;case"=":se=ae+Se+se+be;break;case"^":se=Se.slice(0,xe=Se.length>>1)+ae+se+be+Se.slice(xe);break;default:se=Se+ae+se+be;break}return o(se)}return fe.toString=function(){return v+""},fe}function m(v,E){var C=d((v=Bd(v),v.type="f",v)),I=Math.max(-8,Math.min(8,Math.floor($u(E)/3)))*3,P=Math.pow(10,-I),N=WI[8+I/3];return function(D){return C(P*D)+N}}return{format:d,formatPrefix:m}}var Qh,aE,WM;RZ({thousands:",",grouping:[3],currency:["$",""]});function RZ(e){return Qh=NZ(e),aE=Qh.format,WM=Qh.formatPrefix,Qh}function OZ(e){return Math.max(0,-$u(Math.abs(e)))}function kZ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($u(t)/3)))*3-$u(Math.abs(e)))}function MZ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$u(t)-$u(e))+1}function KM(e,t,n,r){var i=Ix(e,t,n),o;switch(r=Bd(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=kZ(i,a))&&(r.precision=o),WM(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=MZ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=OZ(i))&&(r.precision=o-(r.type==="%")*2);break}}return aE(r)}function Aa(e){var t=e.domain;return e.ticks=function(n){var r=t();return Ax(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return KM(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],c=r[o],f,d,m=10;for(c<a&&(d=a,a=c,c=d,d=i,i=o,o=d);m-- >0;){if(d=Tx(a,c,n),d===f)return r[i]=a,r[o]=c,t(r);if(d>0)a=Math.floor(a/d)*d,c=Math.ceil(c/d)*d;else if(d<0)a=Math.ceil(a*d)/d,c=Math.floor(c*d)/d;else break;f=d}return e},e}function YM(){var e=oE();return e.copy=function(){return sf(e,YM())},oo.apply(e,arguments),Aa(e)}function XM(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,mp),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return XM(e).unknown(t)},e=arguments.length?Array.from(e,mp):[0,1],Aa(n)}function JM(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function KI(e){return Math.log(e)}function YI(e){return Math.exp(e)}function DZ(e){return-Math.log(-e)}function LZ(e){return-Math.exp(-e)}function BZ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function FZ(e){return e===10?BZ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function UZ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function XI(e){return(t,n)=>-e(-t,n)}function lE(e){const t=e(KI,YI),n=t.domain;let r=10,i,o;function a(){return i=UZ(r),o=FZ(r),n()[0]<0?(i=XI(i),o=XI(o),e(DZ,LZ)):e(KI,YI),t}return t.base=function(c){return arguments.length?(r=+c,a()):r},t.domain=function(c){return arguments.length?(n(c),a()):n()},t.ticks=c=>{const f=n();let d=f[0],m=f[f.length-1];const v=m<d;v&&([d,m]=[m,d]);let E=i(d),C=i(m),I,P;const N=c==null?10:+c;let D=[];if(!(r%1)&&C-E<N){if(E=Math.floor(E),C=Math.ceil(C),d>0){for(;E<=C;++E)for(I=1;I<r;++I)if(P=E<0?I/o(-E):I*o(E),!(P<d)){if(P>m)break;D.push(P)}}else for(;E<=C;++E)for(I=r-1;I>=1;--I)if(P=E>0?I/o(-E):I*o(E),!(P<d)){if(P>m)break;D.push(P)}D.length*2<N&&(D=Ax(d,m,N))}else D=Ax(E,C,Math.min(C-E,N)).map(o);return v?D.reverse():D},t.tickFormat=(c,f)=>{if(c==null&&(c=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Bd(f)).precision==null&&(f.trim=!0),f=aE(f)),c===1/0)return f;const d=Math.max(1,r*c/t.ticks().length);return m=>{let v=m/o(Math.round(i(m)));return v*r<r-.5&&(v*=r),v<=d?f(m):""}},t.nice=()=>n(JM(n(),{floor:c=>o(Math.floor(i(c))),ceil:c=>o(Math.ceil(i(c)))})),t}function ZM(){const e=lE(vm()).domain([1,10]);return e.copy=()=>sf(e,ZM()).base(e.base()),oo.apply(e,arguments),e}function JI(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ZI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function uE(e){var t=1,n=e(JI(t),ZI(t));return n.constant=function(r){return arguments.length?e(JI(t=+r),ZI(t)):t},Aa(n)}function QM(){var e=uE(vm());return e.copy=function(){return sf(e,QM()).constant(e.constant())},oo.apply(e,arguments)}function QI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function jZ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function VZ(e){return e<0?-e*e:e*e}function cE(e){var t=e(Yr,Yr),n=1;function r(){return n===1?e(Yr,Yr):n===.5?e(jZ,VZ):e(QI(n),QI(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Aa(t)}function dE(){var e=cE(vm());return e.copy=function(){return sf(e,dE()).exponent(e.exponent())},oo.apply(e,arguments),e}function $Z(){return dE.apply(null,arguments).exponent(.5)}function eP(e){return Math.sign(e)*e*e}function zZ(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function e4(){var e=oE(),t=[0,1],n=!1,r;function i(o){var a=zZ(e(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return e.invert(eP(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,mp)).map(eP)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return e4(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},oo.apply(i,arguments),Aa(i)}function t4(){var e=[],t=[],n=[],r;function i(){var a=0,c=Math.max(1,t.length);for(n=new Array(c-1);++a<c;)n[a-1]=WJ(e,a/c);return o}function o(a){return a==null||isNaN(a=+a)?r:t[rf(n,a)]}return o.invertExtent=function(a){var c=t.indexOf(a);return c<0?[NaN,NaN]:[c>0?n[c-1]:e[0],c<n.length?n[c]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let c of a)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(xa),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return t4().domain(e).range(t).unknown(r)},oo.apply(o,arguments)}function n4(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(f){return f!=null&&f<=f?i[rf(r,f,0,n)]:o}function c(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*t-(f-n)*e)/(n+1);return a}return a.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,c()):[e,t]},a.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,c()):i.slice()},a.invertExtent=function(f){var d=i.indexOf(f);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},a.unknown=function(f){return arguments.length&&(o=f),a},a.thresholds=function(){return r.slice()},a.copy=function(){return n4().domain([e,t]).range(i).unknown(o)},oo.apply(Aa(a),arguments)}function r4(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[rf(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return r4().domain(e).range(t).unknown(n)},oo.apply(i,arguments)}const Hv=new Date,qv=new Date;function or(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),c=i.ceil(o);return o-a<c-o?a:c},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,c)=>{const f=[];if(o=i.ceil(o),c=c==null?1:Math.floor(c),!(o<a)||!(c>0))return f;let d;do f.push(d=new Date(+o)),t(o,c),e(o);while(d<o&&o<a);return f},i.filter=o=>or(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,c)=>{if(a>=a)if(c<0)for(;++c<=0;)for(;t(a,-1),!o(a););else for(;--c>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(Hv.setTime(+o),qv.setTime(+a),e(Hv),e(qv),Math.floor(n(Hv,qv))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const vp=or(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?or(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):vp);vp.range;const ps=1e3,Ji=ps*60,ms=Ji*60,_s=ms*24,fE=_s*7,tP=_s*30,Wv=_s*365,pl=or(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ps)},(e,t)=>(t-e)/ps,e=>e.getUTCSeconds());pl.range;const hE=or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ps)},(e,t)=>{e.setTime(+e+t*Ji)},(e,t)=>(t-e)/Ji,e=>e.getMinutes());hE.range;const pE=or(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ji)},(e,t)=>(t-e)/Ji,e=>e.getUTCMinutes());pE.range;const mE=or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ps-e.getMinutes()*Ji)},(e,t)=>{e.setTime(+e+t*ms)},(e,t)=>(t-e)/ms,e=>e.getHours());mE.range;const gE=or(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ms)},(e,t)=>(t-e)/ms,e=>e.getUTCHours());gE.range;const af=or(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ji)/_s,e=>e.getDate()-1);af.range;const ym=or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_s,e=>e.getUTCDate()-1);ym.range;const i4=or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_s,e=>Math.floor(e/_s));i4.range;function Ol(e){return or(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ji)/fE)}const xm=Ol(0),yp=Ol(1),GZ=Ol(2),HZ=Ol(3),zu=Ol(4),qZ=Ol(5),WZ=Ol(6);xm.range;yp.range;GZ.range;HZ.range;zu.range;qZ.range;WZ.range;function kl(e){return or(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/fE)}const wm=kl(0),xp=kl(1),KZ=kl(2),YZ=kl(3),Gu=kl(4),XZ=kl(5),JZ=kl(6);wm.range;xp.range;KZ.range;YZ.range;Gu.range;XZ.range;JZ.range;const vE=or(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());vE.range;const yE=or(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());yE.range;const Ss=or(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ss.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:or(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ss.range;const Cs=or(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Cs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:or(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Cs.range;function o4(e,t,n,r,i,o){const a=[[pl,1,ps],[pl,5,5*ps],[pl,15,15*ps],[pl,30,30*ps],[o,1,Ji],[o,5,5*Ji],[o,15,15*Ji],[o,30,30*Ji],[i,1,ms],[i,3,3*ms],[i,6,6*ms],[i,12,12*ms],[r,1,_s],[r,2,2*_s],[n,1,fE],[t,1,tP],[t,3,3*tP],[e,1,Wv]];function c(d,m,v){const E=m<d;E&&([d,m]=[m,d]);const C=v&&typeof v.range=="function"?v:f(d,m,v),I=C?C.range(d,+m+1):[];return E?I.reverse():I}function f(d,m,v){const E=Math.abs(m-d)/v,C=Qw(([,,N])=>N).right(a,E);if(C===a.length)return e.every(Ix(d/Wv,m/Wv,v));if(C===0)return vp.every(Math.max(Ix(d,m,v),1));const[I,P]=a[E/a[C-1][2]<a[C][2]/E?C-1:C];return I.every(P)}return[c,f]}const[ZZ,QZ]=o4(Cs,yE,wm,i4,gE,pE),[eQ,tQ]=o4(Ss,vE,xm,af,mE,hE);function Kv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Yv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ld(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function nQ(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,c=e.months,f=e.shortMonths,d=ud(i),m=cd(i),v=ud(o),E=cd(o),C=ud(a),I=cd(a),P=ud(c),N=cd(c),D=ud(f),F=cd(f),L={a:ve,A:xe,b:Se,B:Ce,c:null,d:aP,e:aP,f:CQ,g:DQ,G:BQ,H:bQ,I:_Q,j:SQ,L:s4,m:AQ,M:TQ,p:te,q:pe,Q:cP,s:dP,S:IQ,u:PQ,U:NQ,V:RQ,w:OQ,W:kQ,x:null,X:null,y:MQ,Y:LQ,Z:FQ,"%":uP},V={a:Fe,A:Le,b:lt,B:Ne,c:null,d:lP,e:lP,f:$Q,g:ZQ,G:eee,H:UQ,I:jQ,j:VQ,L:l4,m:zQ,M:GQ,p:ct,q:rt,Q:cP,s:dP,S:HQ,u:qQ,U:WQ,V:KQ,w:YQ,W:XQ,x:null,X:null,y:JQ,Y:QQ,Z:tee,"%":uP},G={a:fe,A:se,b:ae,B:be,c:he,d:oP,e:oP,f:yQ,g:iP,G:rP,H:sP,I:sP,j:pQ,L:vQ,m:hQ,M:mQ,p:X,q:fQ,Q:wQ,s:EQ,S:gQ,u:aQ,U:lQ,V:uQ,w:sQ,W:cQ,x:ne,X:we,y:iP,Y:rP,Z:dQ,"%":xQ};L.x=q(n,L),L.X=q(r,L),L.c=q(t,L),V.x=q(n,V),V.X=q(r,V),V.c=q(t,V);function q(Ee,et){return function(Me){var _e=[],Ke=-1,dt=0,It=Ee.length,An,$t,Rt;for(Me instanceof Date||(Me=new Date(+Me));++Ke<It;)Ee.charCodeAt(Ke)===37&&(_e.push(Ee.slice(dt,Ke)),($t=nP[An=Ee.charAt(++Ke)])!=null?An=Ee.charAt(++Ke):$t=An==="e"?" ":"0",(Rt=et[An])&&(An=Rt(Me,$t)),_e.push(An),dt=Ke+1);return _e.push(Ee.slice(dt,Ke)),_e.join("")}}function W(Ee,et){return function(Me){var _e=ld(1900,void 0,1),Ke=Z(_e,Ee,Me+="",0),dt,It;if(Ke!=Me.length)return null;if("Q"in _e)return new Date(_e.Q);if("s"in _e)return new Date(_e.s*1e3+("L"in _e?_e.L:0));if(et&&!("Z"in _e)&&(_e.Z=0),"p"in _e&&(_e.H=_e.H%12+_e.p*12),_e.m===void 0&&(_e.m="q"in _e?_e.q:0),"V"in _e){if(_e.V<1||_e.V>53)return null;"w"in _e||(_e.w=1),"Z"in _e?(dt=Yv(ld(_e.y,0,1)),It=dt.getUTCDay(),dt=It>4||It===0?xp.ceil(dt):xp(dt),dt=ym.offset(dt,(_e.V-1)*7),_e.y=dt.getUTCFullYear(),_e.m=dt.getUTCMonth(),_e.d=dt.getUTCDate()+(_e.w+6)%7):(dt=Kv(ld(_e.y,0,1)),It=dt.getDay(),dt=It>4||It===0?yp.ceil(dt):yp(dt),dt=af.offset(dt,(_e.V-1)*7),_e.y=dt.getFullYear(),_e.m=dt.getMonth(),_e.d=dt.getDate()+(_e.w+6)%7)}else("W"in _e||"U"in _e)&&("w"in _e||(_e.w="u"in _e?_e.u%7:"W"in _e?1:0),It="Z"in _e?Yv(ld(_e.y,0,1)).getUTCDay():Kv(ld(_e.y,0,1)).getDay(),_e.m=0,_e.d="W"in _e?(_e.w+6)%7+_e.W*7-(It+5)%7:_e.w+_e.U*7-(It+6)%7);return"Z"in _e?(_e.H+=_e.Z/100|0,_e.M+=_e.Z%100,Yv(_e)):Kv(_e)}}function Z(Ee,et,Me,_e){for(var Ke=0,dt=et.length,It=Me.length,An,$t;Ke<dt;){if(_e>=It)return-1;if(An=et.charCodeAt(Ke++),An===37){if(An=et.charAt(Ke++),$t=G[An in nP?et.charAt(Ke++):An],!$t||(_e=$t(Ee,Me,_e))<0)return-1}else if(An!=Me.charCodeAt(_e++))return-1}return _e}function X(Ee,et,Me){var _e=d.exec(et.slice(Me));return _e?(Ee.p=m.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function fe(Ee,et,Me){var _e=C.exec(et.slice(Me));return _e?(Ee.w=I.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function se(Ee,et,Me){var _e=v.exec(et.slice(Me));return _e?(Ee.w=E.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function ae(Ee,et,Me){var _e=D.exec(et.slice(Me));return _e?(Ee.m=F.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function be(Ee,et,Me){var _e=P.exec(et.slice(Me));return _e?(Ee.m=N.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function he(Ee,et,Me){return Z(Ee,t,et,Me)}function ne(Ee,et,Me){return Z(Ee,n,et,Me)}function we(Ee,et,Me){return Z(Ee,r,et,Me)}function ve(Ee){return a[Ee.getDay()]}function xe(Ee){return o[Ee.getDay()]}function Se(Ee){return f[Ee.getMonth()]}function Ce(Ee){return c[Ee.getMonth()]}function te(Ee){return i[+(Ee.getHours()>=12)]}function pe(Ee){return 1+~~(Ee.getMonth()/3)}function Fe(Ee){return a[Ee.getUTCDay()]}function Le(Ee){return o[Ee.getUTCDay()]}function lt(Ee){return f[Ee.getUTCMonth()]}function Ne(Ee){return c[Ee.getUTCMonth()]}function ct(Ee){return i[+(Ee.getUTCHours()>=12)]}function rt(Ee){return 1+~~(Ee.getUTCMonth()/3)}return{format:function(Ee){var et=q(Ee+="",L);return et.toString=function(){return Ee},et},parse:function(Ee){var et=W(Ee+="",!1);return et.toString=function(){return Ee},et},utcFormat:function(Ee){var et=q(Ee+="",V);return et.toString=function(){return Ee},et},utcParse:function(Ee){var et=W(Ee+="",!0);return et.toString=function(){return Ee},et}}}var nP={"-":"",_:" ",0:"0"},xr=/^\s*\d+/,rQ=/^%/,iQ=/[\\^$*+?|[\]().{}]/g;function Mt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function oQ(e){return e.replace(iQ,"\\$&")}function ud(e){return new RegExp("^(?:"+e.map(oQ).join("|")+")","i")}function cd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function sQ(e,t,n){var r=xr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function aQ(e,t,n){var r=xr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function lQ(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function uQ(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function cQ(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function rP(e,t,n){var r=xr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function iP(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function dQ(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function fQ(e,t,n){var r=xr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function hQ(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function oP(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function pQ(e,t,n){var r=xr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function sP(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function mQ(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function gQ(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function vQ(e,t,n){var r=xr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function yQ(e,t,n){var r=xr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function xQ(e,t,n){var r=rQ.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function wQ(e,t,n){var r=xr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function EQ(e,t,n){var r=xr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function aP(e,t){return Mt(e.getDate(),t,2)}function bQ(e,t){return Mt(e.getHours(),t,2)}function _Q(e,t){return Mt(e.getHours()%12||12,t,2)}function SQ(e,t){return Mt(1+af.count(Ss(e),e),t,3)}function s4(e,t){return Mt(e.getMilliseconds(),t,3)}function CQ(e,t){return s4(e,t)+"000"}function AQ(e,t){return Mt(e.getMonth()+1,t,2)}function TQ(e,t){return Mt(e.getMinutes(),t,2)}function IQ(e,t){return Mt(e.getSeconds(),t,2)}function PQ(e){var t=e.getDay();return t===0?7:t}function NQ(e,t){return Mt(xm.count(Ss(e)-1,e),t,2)}function a4(e){var t=e.getDay();return t>=4||t===0?zu(e):zu.ceil(e)}function RQ(e,t){return e=a4(e),Mt(zu.count(Ss(e),e)+(Ss(e).getDay()===4),t,2)}function OQ(e){return e.getDay()}function kQ(e,t){return Mt(yp.count(Ss(e)-1,e),t,2)}function MQ(e,t){return Mt(e.getFullYear()%100,t,2)}function DQ(e,t){return e=a4(e),Mt(e.getFullYear()%100,t,2)}function LQ(e,t){return Mt(e.getFullYear()%1e4,t,4)}function BQ(e,t){var n=e.getDay();return e=n>=4||n===0?zu(e):zu.ceil(e),Mt(e.getFullYear()%1e4,t,4)}function FQ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Mt(t/60|0,"0",2)+Mt(t%60,"0",2)}function lP(e,t){return Mt(e.getUTCDate(),t,2)}function UQ(e,t){return Mt(e.getUTCHours(),t,2)}function jQ(e,t){return Mt(e.getUTCHours()%12||12,t,2)}function VQ(e,t){return Mt(1+ym.count(Cs(e),e),t,3)}function l4(e,t){return Mt(e.getUTCMilliseconds(),t,3)}function $Q(e,t){return l4(e,t)+"000"}function zQ(e,t){return Mt(e.getUTCMonth()+1,t,2)}function GQ(e,t){return Mt(e.getUTCMinutes(),t,2)}function HQ(e,t){return Mt(e.getUTCSeconds(),t,2)}function qQ(e){var t=e.getUTCDay();return t===0?7:t}function WQ(e,t){return Mt(wm.count(Cs(e)-1,e),t,2)}function u4(e){var t=e.getUTCDay();return t>=4||t===0?Gu(e):Gu.ceil(e)}function KQ(e,t){return e=u4(e),Mt(Gu.count(Cs(e),e)+(Cs(e).getUTCDay()===4),t,2)}function YQ(e){return e.getUTCDay()}function XQ(e,t){return Mt(xp.count(Cs(e)-1,e),t,2)}function JQ(e,t){return Mt(e.getUTCFullYear()%100,t,2)}function ZQ(e,t){return e=u4(e),Mt(e.getUTCFullYear()%100,t,2)}function QQ(e,t){return Mt(e.getUTCFullYear()%1e4,t,4)}function eee(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Gu(e):Gu.ceil(e),Mt(e.getUTCFullYear()%1e4,t,4)}function tee(){return"+0000"}function uP(){return"%"}function cP(e){return+e}function dP(e){return Math.floor(+e/1e3)}var mu,c4,d4;nee({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nee(e){return mu=nQ(e),c4=mu.format,mu.parse,d4=mu.utcFormat,mu.utcParse,mu}function ree(e){return new Date(e)}function iee(e){return e instanceof Date?+e:+new Date(+e)}function xE(e,t,n,r,i,o,a,c,f,d){var m=oE(),v=m.invert,E=m.domain,C=d(".%L"),I=d(":%S"),P=d("%I:%M"),N=d("%I %p"),D=d("%a %d"),F=d("%b %d"),L=d("%B"),V=d("%Y");function G(q){return(f(q)<q?C:c(q)<q?I:a(q)<q?P:o(q)<q?N:r(q)<q?i(q)<q?D:F:n(q)<q?L:V)(q)}return m.invert=function(q){return new Date(v(q))},m.domain=function(q){return arguments.length?E(Array.from(q,iee)):E().map(ree)},m.ticks=function(q){var W=E();return e(W[0],W[W.length-1],q??10)},m.tickFormat=function(q,W){return W==null?G:d(W)},m.nice=function(q){var W=E();return(!q||typeof q.range!="function")&&(q=t(W[0],W[W.length-1],q??10)),q?E(JM(W,q)):m},m.copy=function(){return sf(m,xE(e,t,n,r,i,o,a,c,f,d))},m}function oee(){return oo.apply(xE(eQ,tQ,Ss,vE,xm,af,mE,hE,pl,c4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function see(){return oo.apply(xE(ZZ,QZ,Cs,yE,wm,ym,gE,pE,pl,d4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Em(){var e=0,t=1,n,r,i,o,a=Yr,c=!1,f;function d(v){return v==null||isNaN(v=+v)?f:a(i===0?.5:(v=(o(v)-n)*i,c?Math.max(0,Math.min(1,v)):v))}d.domain=function(v){return arguments.length?([e,t]=v,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(v){return arguments.length?(c=!!v,d):c},d.interpolator=function(v){return arguments.length?(a=v,d):a};function m(v){return function(E){var C,I;return arguments.length?([C,I]=E,a=v(C,I),d):[a(0),a(1)]}}return d.range=m(rc),d.rangeRound=m(iE),d.unknown=function(v){return arguments.length?(f=v,d):f},function(v){return o=v,n=v(e),r=v(t),i=n===r?0:1/(r-n),d}}function Ta(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function f4(){var e=Aa(Em()(Yr));return e.copy=function(){return Ta(e,f4())},Ms.apply(e,arguments)}function h4(){var e=lE(Em()).domain([1,10]);return e.copy=function(){return Ta(e,h4()).base(e.base())},Ms.apply(e,arguments)}function p4(){var e=uE(Em());return e.copy=function(){return Ta(e,p4()).constant(e.constant())},Ms.apply(e,arguments)}function wE(){var e=cE(Em());return e.copy=function(){return Ta(e,wE()).exponent(e.exponent())},Ms.apply(e,arguments)}function aee(){return wE.apply(null,arguments).exponent(.5)}function m4(){var e=[],t=Yr;function n(r){if(r!=null&&!isNaN(r=+r))return t((rf(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(xa),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>qJ(e,o/r))},n.copy=function(){return m4(t).domain(e)},Ms.apply(n,arguments)}function bm(){var e=0,t=.5,n=1,r=1,i,o,a,c,f,d=Yr,m,v=!1,E;function C(P){return isNaN(P=+P)?E:(P=.5+((P=+m(P))-o)*(r*P<r*o?c:f),d(v?Math.max(0,Math.min(1,P)):P))}C.domain=function(P){return arguments.length?([e,t,n]=P,i=m(e=+e),o=m(t=+t),a=m(n=+n),c=i===o?0:.5/(o-i),f=o===a?0:.5/(a-o),r=o<i?-1:1,C):[e,t,n]},C.clamp=function(P){return arguments.length?(v=!!P,C):v},C.interpolator=function(P){return arguments.length?(d=P,C):d};function I(P){return function(N){var D,F,L;return arguments.length?([D,F,L]=N,d=xZ(P,[D,F,L]),C):[d(0),d(.5),d(1)]}}return C.range=I(rc),C.rangeRound=I(iE),C.unknown=function(P){return arguments.length?(E=P,C):E},function(P){return m=P,i=P(e),o=P(t),a=P(n),c=i===o?0:.5/(o-i),f=o===a?0:.5/(a-o),r=o<i?-1:1,C}}function g4(){var e=Aa(bm()(Yr));return e.copy=function(){return Ta(e,g4())},Ms.apply(e,arguments)}function v4(){var e=lE(bm()).domain([.1,1,10]);return e.copy=function(){return Ta(e,v4()).base(e.base())},Ms.apply(e,arguments)}function y4(){var e=uE(bm());return e.copy=function(){return Ta(e,y4()).constant(e.constant())},Ms.apply(e,arguments)}function EE(){var e=cE(bm());return e.copy=function(){return Ta(e,EE()).exponent(e.exponent())},Ms.apply(e,arguments)}function lee(){return EE.apply(null,arguments).exponent(.5)}const yd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:tE,scaleDiverging:g4,scaleDivergingLog:v4,scaleDivergingPow:EE,scaleDivergingSqrt:lee,scaleDivergingSymlog:y4,scaleIdentity:XM,scaleImplicit:Px,scaleLinear:YM,scaleLog:ZM,scaleOrdinal:eE,scalePoint:YJ,scalePow:dE,scaleQuantile:t4,scaleQuantize:n4,scaleRadial:e4,scaleSequential:f4,scaleSequentialLog:h4,scaleSequentialPow:wE,scaleSequentialQuantile:m4,scaleSequentialSqrt:aee,scaleSequentialSymlog:p4,scaleSqrt:$Z,scaleSymlog:QM,scaleThreshold:r4,scaleTime:oee,scaleUtc:see,tickFormat:KM},Symbol.toStringTag,{value:"Module"}));var Ds=e=>e.chartData,_m=de([Ds],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),bE=(e,t,n,r)=>r?_m(e):Ds(e),uee=(e,t,n)=>n?_m(e):Ds(e);function wa(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Xt(t)&&Xt(n))return!0}return!1}function fP(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function x4(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,o;if(Xt(n))i=n;else if(typeof n=="function")return;if(Xt(r))o=r;else if(typeof r=="function")return;var a=[i,o];if(wa(a))return a}}function cee(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(wa(r))return fP(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,o]=e,a,c;if(i==="auto")t!=null&&(a=Math.min(...t));else if(Je(i))a=i;else if(typeof i=="function")try{t!=null&&(a=i(t?.[0]))}catch{}else if(typeof i=="string"&&_T.test(i)){var f=_T.exec(i);if(f==null||f[1]==null||t==null)a=void 0;else{var d=+f[1];a=t[0]-d}}else a=t?.[0];if(o==="auto")t!=null&&(c=Math.max(...t));else if(Je(o))c=o;else if(typeof o=="function")try{t!=null&&(c=o(t?.[1]))}catch{}else if(typeof o=="string"&&ST.test(o)){var m=ST.exec(o);if(m==null||m[1]==null||t==null)c=void 0;else{var v=+m[1];c=t[1]+v}}else c=t?.[1];var E=[a,c];if(wa(E))return t==null?E:fP(E,t,n)}}}var ic=1e9,dee={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},SE,vn=!0,no="[DecimalError] ",yl=no+"Invalid argument: ",_E=no+"Exponent out of range: ",oc=Math.floor,al=Math.pow,fee=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ii,gr=1e7,fn=7,w4=9007199254740991,wp=oc(w4/fn),We={};We.absoluteValue=We.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};We.comparedTo=We.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(r=o.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};We.decimalPlaces=We.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*fn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};We.dividedBy=We.div=function(e){return vs(this,new this.constructor(e))};We.dividedToIntegerBy=We.idiv=function(e){var t=this,n=t.constructor;return Jt(vs(t,new n(e),0,1),n.precision)};We.equals=We.eq=function(e){return!this.cmp(e)};We.exponent=function(){return Yn(this)};We.greaterThan=We.gt=function(e){return this.cmp(e)>0};We.greaterThanOrEqualTo=We.gte=function(e){return this.cmp(e)>=0};We.isInteger=We.isint=function(){return this.e>this.d.length-2};We.isNegative=We.isneg=function(){return this.s<0};We.isPositive=We.ispos=function(){return this.s>0};We.isZero=function(){return this.s===0};We.lessThan=We.lt=function(e){return this.cmp(e)<0};We.lessThanOrEqualTo=We.lte=function(e){return this.cmp(e)<1};We.logarithm=We.log=function(e){var t,n=this,r=n.constructor,i=r.precision,o=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Ii))throw Error(no+"NaN");if(n.s<1)throw Error(no+(n.s?"NaN":"-Infinity"));return n.eq(Ii)?new r(0):(vn=!1,t=vs(Fd(n,o),Fd(e,o),o),vn=!0,Jt(t,i))};We.minus=We.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_4(t,e):E4(t,(e.s=-e.s,e))};We.modulo=We.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(no+"NaN");return n.s?(vn=!1,t=vs(n,e,0,1).times(e),vn=!0,n.minus(t)):Jt(new r(n),i)};We.naturalExponential=We.exp=function(){return b4(this)};We.naturalLogarithm=We.ln=function(){return Fd(this)};We.negated=We.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};We.plus=We.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?E4(t,e):_4(t,(e.s=-e.s,e))};We.precision=We.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(yl+e);if(t=Yn(i)+1,r=i.d.length-1,n=r*fn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};We.squareRoot=We.sqrt=function(){var e,t,n,r,i,o,a,c=this,f=c.constructor;if(c.s<1){if(!c.s)return new f(0);throw Error(no+"NaN")}for(e=Yn(c),vn=!1,i=Math.sqrt(+c),i==0||i==1/0?(t=Vo(c.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=oc((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new f(t)):r=new f(i.toString()),n=f.precision,i=a=n+3;;)if(o=r,r=o.plus(vs(c,o,a+2)).times(.5),Vo(o.d).slice(0,a)===(t=Vo(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&t=="4999"){if(Jt(o,n+1,0),o.times(o).eq(c)){r=o;break}}else if(t!="9999")break;a+=4}return vn=!0,Jt(r,n)};We.times=We.mul=function(e){var t,n,r,i,o,a,c,f,d,m=this,v=m.constructor,E=m.d,C=(e=new v(e)).d;if(!m.s||!e.s)return new v(0);for(e.s*=m.s,n=m.e+e.e,f=E.length,d=C.length,f<d&&(o=E,E=C,C=o,a=f,f=d,d=a),o=[],a=f+d,r=a;r--;)o.push(0);for(r=d;--r>=0;){for(t=0,i=f+r;i>r;)c=o[i]+C[r]*E[i-r-1]+t,o[i--]=c%gr|0,t=c/gr|0;o[i]=(o[i]+t)%gr|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,vn?Jt(e,v.precision):e};We.toDecimalPlaces=We.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Go(e,0,ic),t===void 0?t=r.rounding:Go(t,0,8),Jt(n,e+Yn(n)+1,t))};We.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Cl(r,!0):(Go(e,0,ic),t===void 0?t=i.rounding:Go(t,0,8),r=Jt(new i(r),e+1,t),n=Cl(r,!0,e+1)),n};We.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?Cl(i):(Go(e,0,ic),t===void 0?t=o.rounding:Go(t,0,8),r=Jt(new o(i),e+Yn(i)+1,t),n=Cl(r.abs(),!1,e+Yn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};We.toInteger=We.toint=function(){var e=this,t=e.constructor;return Jt(new t(e),Yn(e)+1,t.rounding)};We.toNumber=function(){return+this};We.toPower=We.pow=function(e){var t,n,r,i,o,a,c=this,f=c.constructor,d=12,m=+(e=new f(e));if(!e.s)return new f(Ii);if(c=new f(c),!c.s){if(e.s<1)throw Error(no+"Infinity");return c}if(c.eq(Ii))return c;if(r=f.precision,e.eq(Ii))return Jt(c,r);if(t=e.e,n=e.d.length-1,a=t>=n,o=c.s,a){if((n=m<0?-m:m)<=w4){for(i=new f(Ii),t=Math.ceil(r/fn+4),vn=!1;n%2&&(i=i.times(c),pP(i.d,t)),n=oc(n/2),n!==0;)c=c.times(c),pP(c.d,t);return vn=!0,e.s<0?new f(Ii).div(i):Jt(i,r)}}else if(o<0)throw Error(no+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,c.s=1,vn=!1,i=e.times(Fd(c,r+d)),vn=!0,i=b4(i),i.s=o,i};We.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?(n=Yn(i),r=Cl(i,n<=o.toExpNeg||n>=o.toExpPos)):(Go(e,1,ic),t===void 0?t=o.rounding:Go(t,0,8),i=Jt(new o(i),e,t),n=Yn(i),r=Cl(i,e<=n||n<=o.toExpNeg,e)),r};We.toSignificantDigits=We.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Go(e,1,ic),t===void 0?t=r.rounding:Go(t,0,8)),Jt(new r(n),e,t)};We.toString=We.valueOf=We.val=We.toJSON=We[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Yn(e),n=e.constructor;return Cl(e,t<=n.toExpNeg||t>=n.toExpPos)};function E4(e,t){var n,r,i,o,a,c,f,d,m=e.constructor,v=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),vn?Jt(t,v):t;if(f=e.d,d=t.d,a=e.e,i=t.e,f=f.slice(),o=a-i,o){for(o<0?(r=f,o=-o,c=d.length):(r=d,i=a,c=f.length),a=Math.ceil(v/fn),c=a>c?a+1:c+1,o>c&&(o=c,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(c=f.length,o=d.length,c-o<0&&(o=c,r=d,d=f,f=r),n=0;o;)n=(f[--o]=f[o]+d[o]+n)/gr|0,f[o]%=gr;for(n&&(f.unshift(n),++i),c=f.length;f[--c]==0;)f.pop();return t.d=f,t.e=i,vn?Jt(t,v):t}function Go(e,t,n){if(e!==~~e||e<t||e>n)throw Error(yl+e)}function Vo(e){var t,n,r,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)r=e[t]+"",n=fn-r.length,n&&(o+=da(n)),o+=r;a=e[t],r=a+"",n=fn-r.length,n&&(o+=da(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var vs=(function(){function e(r,i){var o,a=0,c=r.length;for(r=r.slice();c--;)o=r[c]*i+a,r[c]=o%gr|0,a=o/gr|0;return a&&r.unshift(a),r}function t(r,i,o,a){var c,f;if(o!=a)f=o>a?1:-1;else for(c=f=0;c<o;c++)if(r[c]!=i[c]){f=r[c]>i[c]?1:-1;break}return f}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*gr+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var c,f,d,m,v,E,C,I,P,N,D,F,L,V,G,q,W,Z,X=r.constructor,fe=r.s==i.s?1:-1,se=r.d,ae=i.d;if(!r.s)return new X(r);if(!i.s)throw Error(no+"Division by zero");for(f=r.e-i.e,W=ae.length,G=se.length,C=new X(fe),I=C.d=[],d=0;ae[d]==(se[d]||0);)++d;if(ae[d]>(se[d]||0)&&--f,o==null?F=o=X.precision:a?F=o+(Yn(r)-Yn(i))+1:F=o,F<0)return new X(0);if(F=F/fn+2|0,d=0,W==1)for(m=0,ae=ae[0],F++;(d<G||m)&&F--;d++)L=m*gr+(se[d]||0),I[d]=L/ae|0,m=L%ae|0;else{for(m=gr/(ae[0]+1)|0,m>1&&(ae=e(ae,m),se=e(se,m),W=ae.length,G=se.length),V=W,P=se.slice(0,W),N=P.length;N<W;)P[N++]=0;Z=ae.slice(),Z.unshift(0),q=ae[0],ae[1]>=gr/2&&++q;do m=0,c=t(ae,P,W,N),c<0?(D=P[0],W!=N&&(D=D*gr+(P[1]||0)),m=D/q|0,m>1?(m>=gr&&(m=gr-1),v=e(ae,m),E=v.length,N=P.length,c=t(v,P,E,N),c==1&&(m--,n(v,W<E?Z:ae,E))):(m==0&&(c=m=1),v=ae.slice()),E=v.length,E<N&&v.unshift(0),n(P,v,N),c==-1&&(N=P.length,c=t(ae,P,W,N),c<1&&(m++,n(P,W<N?Z:ae,N))),N=P.length):c===0&&(m++,P=[0]),I[d++]=m,c&&P[0]?P[N++]=se[V]||0:(P=[se[V]],N=1);while((V++<G||P[0]!==void 0)&&F--)}return I[0]||I.shift(),C.e=f,Jt(C,a?o+Yn(C)+1:o)}})();function b4(e,t){var n,r,i,o,a,c,f=0,d=0,m=e.constructor,v=m.precision;if(Yn(e)>16)throw Error(_E+Yn(e));if(!e.s)return new m(Ii);for(vn=!1,c=v,a=new m(.03125);e.abs().gte(.1);)e=e.times(a),d+=5;for(r=Math.log(al(2,d))/Math.LN10*2+5|0,c+=r,n=i=o=new m(Ii),m.precision=c;;){if(i=Jt(i.times(e),c),n=n.times(++f),a=o.plus(vs(i,n,c)),Vo(a.d).slice(0,c)===Vo(o.d).slice(0,c)){for(;d--;)o=Jt(o.times(o),c);return m.precision=v,t==null?(vn=!0,Jt(o,v)):o}o=a}}function Yn(e){for(var t=e.e*fn,n=e.d[0];n>=10;n/=10)t++;return t}function Xv(e,t,n){if(t>e.LN10.sd())throw vn=!0,n&&(e.precision=n),Error(no+"LN10 precision limit exceeded");return Jt(new e(e.LN10),t)}function da(e){for(var t="";e--;)t+="0";return t}function Fd(e,t){var n,r,i,o,a,c,f,d,m,v=1,E=10,C=e,I=C.d,P=C.constructor,N=P.precision;if(C.s<1)throw Error(no+(C.s?"NaN":"-Infinity"));if(C.eq(Ii))return new P(0);if(t==null?(vn=!1,d=N):d=t,C.eq(10))return t==null&&(vn=!0),Xv(P,d);if(d+=E,P.precision=d,n=Vo(I),r=n.charAt(0),o=Yn(C),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)C=C.times(e),n=Vo(C.d),r=n.charAt(0),v++;o=Yn(C),r>1?(C=new P("0."+n),o++):C=new P(r+"."+n.slice(1))}else return f=Xv(P,d+2,N).times(o+""),C=Fd(new P(r+"."+n.slice(1)),d-E).plus(f),P.precision=N,t==null?(vn=!0,Jt(C,N)):C;for(c=a=C=vs(C.minus(Ii),C.plus(Ii),d),m=Jt(C.times(C),d),i=3;;){if(a=Jt(a.times(m),d),f=c.plus(vs(a,new P(i),d)),Vo(f.d).slice(0,d)===Vo(c.d).slice(0,d))return c=c.times(2),o!==0&&(c=c.plus(Xv(P,d+2,N).times(o+""))),c=vs(c,new P(v),d),P.precision=N,t==null?(vn=!0,Jt(c,N)):c;c=f,i+=2}}function hP(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=oc(n/fn),e.d=[],r=(n+1)%fn,n<0&&(r+=fn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=fn;r<i;)e.d.push(+t.slice(r,r+=fn));t=t.slice(r),r=fn-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),vn&&(e.e>wp||e.e<-wp))throw Error(_E+n)}else e.s=0,e.e=0,e.d=[0];return e}function Jt(e,t,n){var r,i,o,a,c,f,d,m,v=e.d;for(a=1,o=v[0];o>=10;o/=10)a++;if(r=t-a,r<0)r+=fn,i=t,d=v[m=0];else{if(m=Math.ceil((r+1)/fn),o=v.length,m>=o)return e;for(d=o=v[m],a=1;o>=10;o/=10)a++;r%=fn,i=r-fn+a}if(n!==void 0&&(o=al(10,a-i-1),c=d/o%10|0,f=t<0||v[m+1]!==void 0||d%o,f=n<4?(c||f)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||f||n==6&&(r>0?i>0?d/al(10,a-i):0:v[m-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return f?(o=Yn(e),v.length=1,t=t-o-1,v[0]=al(10,(fn-t%fn)%fn),e.e=oc(-t/fn)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(r==0?(v.length=m,o=1,m--):(v.length=m+1,o=al(10,fn-r),v[m]=i>0?(d/al(10,a-i)%al(10,i)|0)*o:0),f)for(;;)if(m==0){(v[0]+=o)==gr&&(v[0]=1,++e.e);break}else{if(v[m]+=o,v[m]!=gr)break;v[m--]=0,o=1}for(r=v.length;v[--r]===0;)v.pop();if(vn&&(e.e>wp||e.e<-wp))throw Error(_E+Yn(e));return e}function _4(e,t){var n,r,i,o,a,c,f,d,m,v,E=e.constructor,C=E.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new E(e),vn?Jt(t,C):t;if(f=e.d,v=t.d,r=t.e,d=e.e,f=f.slice(),a=d-r,a){for(m=a<0,m?(n=f,a=-a,c=v.length):(n=v,r=d,c=f.length),i=Math.max(Math.ceil(C/fn),c)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=f.length,c=v.length,m=i<c,m&&(c=i),i=0;i<c;i++)if(f[i]!=v[i]){m=f[i]<v[i];break}a=0}for(m&&(n=f,f=v,v=n,t.s=-t.s),c=f.length,i=v.length-c;i>0;--i)f[c++]=0;for(i=v.length;i>a;){if(f[--i]<v[i]){for(o=i;o&&f[--o]===0;)f[o]=gr-1;--f[o],f[i]+=gr}f[i]-=v[i]}for(;f[--c]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(t.d=f,t.e=r,vn?Jt(t,C):t):new E(0)}function Cl(e,t,n){var r,i=Yn(e),o=Vo(e.d),a=o.length;return t?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+da(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+da(-i-1)+o,n&&(r=n-a)>0&&(o+=da(r))):i>=a?(o+=da(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+da(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=da(r))),e.s<0?"-"+o:o}function pP(e,t){if(e.length>t)return e.length=t,!0}function S4(e){var t,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(yl+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return hP(a,o.toString())}else if(typeof o!="string")throw Error(yl+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,fee.test(o))hP(a,o);else throw Error(yl+o)}if(i.prototype=We,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=S4,i.config=i.set=hee,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function hee(e){if(!e||typeof e!="object")throw Error(no+"Object expected");var t,n,r,i=["precision",1,ic,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(oc(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(yl+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(yl+n+": "+r);return this}var SE=S4(dee);Ii=new SE(1);const Gt=SE;var pee=e=>e,C4={},A4=e=>e===C4,mP=e=>function t(){return arguments.length===0||arguments.length===1&&A4(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},T4=(e,t)=>e===1?t:mP(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(a=>a!==C4).length;return o>=e?t(...r):T4(e-o,mP(function(){for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];var d=r.map(m=>A4(m)?c.shift():m);return t(...d,...c)}))}),mee=e=>T4(e.length,e),kx=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},gee=mee((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),vee=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return pee;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce((c,f)=>f(c),o(...arguments))}};function I4(e){var t;return e===0?t=1:t=Math.floor(new Gt(e).abs().log(10).toNumber())+1,t}function P4(e,t,n){for(var r=new Gt(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var N4=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},R4=(e,t,n)=>{if(e.lte(0))return new Gt(0);var r=I4(e.toNumber()),i=new Gt(10).pow(r),o=e.div(i),a=r!==1?.05:.1,c=new Gt(Math.ceil(o.div(a).toNumber())).add(n).mul(a),f=c.mul(i);return t?new Gt(f.toNumber()):new Gt(Math.ceil(f.toNumber()))},yee=(e,t,n)=>{var r=new Gt(1),i=new Gt(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new Gt(10).pow(I4(e)-1),i=new Gt(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Gt(Math.floor(e)))}else e===0?i=new Gt(Math.floor((t-1)/2)):n||(i=new Gt(Math.floor(e)));var a=Math.floor((t-1)/2),c=vee(gee(f=>i.add(new Gt(f-a).mul(r)).toNumber()),kx);return c(0,t)},O4=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new Gt(0),tickMin:new Gt(0),tickMax:new Gt(0)};var a=R4(new Gt(n).sub(t).div(r-1),i,o),c;t<=0&&n>=0?c=new Gt(0):(c=new Gt(t).add(n).div(2),c=c.sub(new Gt(c).mod(a)));var f=Math.ceil(c.sub(t).div(a).toNumber()),d=Math.ceil(new Gt(n).sub(c).div(a).toNumber()),m=f+d+1;return m>r?O4(t,n,r,i,o+1):(m<r&&(d=n>0?d+(r-m):d,f=n>0?f:f+(r-m)),{step:a,tickMin:c.sub(new Gt(f).mul(a)),tickMax:c.add(new Gt(d).mul(a))})},xee=function(t){var[n,r]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),[c,f]=N4([n,r]);if(c===-1/0||f===1/0){var d=f===1/0?[c,...kx(0,i-1).map(()=>1/0)]:[...kx(0,i-1).map(()=>-1/0),f];return n>r?d.reverse():d}if(c===f)return yee(c,i,o);var{step:m,tickMin:v,tickMax:E}=O4(c,f,a,o,0),C=P4(v,E.add(new Gt(.1).mul(m)),m);return n>r?C.reverse():C},wee=function(t,n){var[r,i]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,c]=N4([r,i]);if(a===-1/0||c===1/0)return[r,i];if(a===c)return[a];var f=Math.max(n,2),d=R4(new Gt(c).sub(a).div(f-1),o,0),m=[...P4(new Gt(a),new Gt(c),d),c];return o===!1&&(m=m.map(v=>Math.round(v))),r>i?m.reverse():m},k4=e=>e.rootProps.maxBarSize,Eee=e=>e.rootProps.barGap,M4=e=>e.rootProps.barCategoryGap,bee=e=>e.rootProps.barSize,lf=e=>e.rootProps.stackOffset,D4=e=>e.rootProps.reverseStackOrder,CE=e=>e.options.chartName,AE=e=>e.rootProps.syncId,L4=e=>e.rootProps.syncMethod,TE=e=>e.options.eventEmitter,Kn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},fs={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ai={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Sm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},_ee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:fs.angleAxisId,includeHidden:!1,name:void 0,reversed:fs.reversed,scale:fs.scale,tick:fs.tick,tickCount:void 0,ticks:void 0,type:fs.type,unit:void 0},See={allowDataOverflow:Ai.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ai.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ai.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ai.scale,tick:Ai.tick,tickCount:Ai.tickCount,ticks:void 0,type:Ai.type,unit:void 0},Cee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:fs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fs.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fs.scale,tick:fs.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Aee={allowDataOverflow:Ai.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ai.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ai.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ai.scale,tick:Ai.tick,tickCount:Ai.tickCount,ticks:void 0,type:"category",unit:void 0},IE=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Cee:_ee,PE=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Aee:See,Cm=e=>e.polarOptions,NE=de([Os,ks,ir],MM),B4=de([Cm,NE],(e,t)=>{if(e!=null)return zr(e.innerRadius,t,0)}),F4=de([Cm,NE],(e,t)=>{if(e!=null)return zr(e.outerRadius,t,t*.8)}),Tee=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},U4=de([Cm],Tee);de([IE,U4],Sm);var j4=de([NE,B4,F4],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});de([PE,j4],Sm);var V4=de([Dt,Cm,B4,F4,Os,ks],(e,t,n,r,i,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:a,cy:c,startAngle:f,endAngle:d}=t;return{cx:zr(a,i,i/2),cy:zr(c,o,o/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:d,clockWise:!1}}}),yn=(e,t)=>t,uf=(e,t,n)=>n;function RE(e){return e?.id}function $4(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:o}=n,a=new Map;return e.forEach(c=>{var f,d=(f=c.data)!==null&&f!==void 0?f:r;if(!(d==null||d.length===0)){var m=RE(c);d.forEach((v,E)=>{var C=o==null||i?E:String(Vt(v,o,null)),I=Vt(v,c.dataKey,0),P;a.has(C)?P=a.get(C):P={},Object.assign(P,{[m]:I}),a.set(C,P)})}}),Array.from(a.values())}function Am(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Tm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Im(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Iee(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var sr=e=>{var t=Dt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},sc=e=>e.tooltip.settings.axisId;function gP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(n),!0).forEach(function(r){Pee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pee(e,t,n){return(t=Nee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nee(e){var t=Ree(e,"string");return typeof t=="symbol"?t:t+""}function Ree(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mx=[0,"auto"],pr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},z4=(e,t)=>e.cartesianAxis.xAxis[t],qo=(e,t)=>{var n=z4(e,t);return n??pr},mr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Mx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Zd},G4=(e,t)=>e.cartesianAxis.yAxis[t],Wo=(e,t)=>{var n=G4(e,t);return n??mr},H4={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},OE=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??H4},Cn=(e,t,n)=>{switch(t){case"xAxis":return qo(e,n);case"yAxis":return Wo(e,n);case"zAxis":return OE(e,n);case"angleAxis":return IE(e,n);case"radiusAxis":return PE(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Oee=(e,t,n)=>{switch(t){case"xAxis":return qo(e,n);case"yAxis":return Wo(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},cf=(e,t,n)=>{switch(t){case"xAxis":return qo(e,n);case"yAxis":return Wo(e,n);case"angleAxis":return IE(e,n);case"radiusAxis":return PE(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},q4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function kE(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Pm=e=>e.graphicalItems.cartesianItems,kee=de([yn,uf],kE),ME=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),df=de([Pm,Cn,kee],ME,{memoizeOptions:{resultEqualityCheck:Im}}),W4=de([df],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Am)),K4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Mee=de([df],K4),DE=e=>e.map(t=>t.data).filter(Boolean).flat(1),Dee=de([df],DE,{memoizeOptions:{resultEqualityCheck:Im}}),LE=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},BE=de([Dee,bE],LE),FE=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:Vt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Vt(i,r)}))):e.map(r=>({value:r})),Nm=de([BE,Cn,df],FE);function Y4(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function g0(e){if(eo(e)||e instanceof Date){var t=Number(e);if(Xt(t))return t}}function vP(e){if(Array.isArray(e)){var t=[g0(e[0]),g0(e[1])];return wa(t)?t:void 0}var n=g0(e);if(n!=null)return[n,n]}function As(e){return e.map(g0).filter(Tq)}function Lee(e,t,n){return!n||typeof t!="number"||ki(t)?[]:n.length?As(n.flatMap(r=>{var i=Vt(e,r.dataKey),o,a;if(Array.isArray(i)?[o,a]=i:o=a=i,!(!Xt(o)||!Xt(a)))return[t-o,t+a]})):[]}var ar=e=>{var t=sr(e),n=sc(e);return cf(e,t,n)},ff=de([ar],e=>e?.dataKey),Bee=de([W4,bE,ar],$4),X4=(e,t,n,r)=>{var i={},o=t.reduce((a,c)=>{if(c.stackId==null)return a;var f=a[c.stackId];return f==null&&(f=[]),f.push(c),a[c.stackId]=f,a},i);return Object.fromEntries(Object.entries(o).map(a=>{var[c,f]=a,d=r?[...f].reverse():f,m=d.map(RE);return[c,{stackedData:nY(e,m,n),graphicalItems:d}]}))},Dx=de([Bee,W4,lf,D4],X4),J4=(e,t,n,r)=>{var{dataStartIndex:i,dataEndIndex:o}=t;if(r==null&&n!=="zAxis"){var a=aY(e,i,o);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},Fee=de([Cn],e=>e.allowDataOverflow),UE=e=>{var t;if(e==null||!("domain"in e))return Mx;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=As(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Mx},jE=de([Cn],UE),VE=de([jE,Fee],x4),Uee=de([Dx,Ds,yn,VE],J4,{memoizeOptions:{resultEqualityCheck:Tm}}),Rm=e=>e.errorBars,jee=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>Y4(n,r)),bp=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),a=Math.min(...o),c=Math.max(...o);return[a,c]}},$E=(e,t,n,r,i)=>{var o,a;if(n.length>0&&e.forEach(c=>{n.forEach(f=>{var d,m,v=(d=r[f.id])===null||d===void 0?void 0:d.filter(D=>Y4(i,D)),E=Vt(c,(m=t.dataKey)!==null&&m!==void 0?m:f.dataKey),C=Lee(c,E,v);if(C.length>=2){var I=Math.min(...C),P=Math.max(...C);(o==null||I<o)&&(o=I),(a==null||P>a)&&(a=P)}var N=vP(E);N!=null&&(o=o==null?N[0]:Math.min(o,N[0]),a=a==null?N[1]:Math.max(a,N[1]))})}),t?.dataKey!=null&&e.forEach(c=>{var f=vP(Vt(c,t.dataKey));f!=null&&(o=o==null?f[0]:Math.min(o,f[0]),a=a==null?f[1]:Math.max(a,f[1]))}),Xt(o)&&Xt(a))return[o,a]},Vee=de([BE,Cn,Mee,Rm,yn],$E,{memoizeOptions:{resultEqualityCheck:Tm}});function $ee(e){var{value:t}=e;if(eo(t)||t instanceof Date)return t}var zee=(e,t,n)=>{var r=e.map($ee).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&pk(r))?FM(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},Z4=e=>e.referenceElements.dots,ac=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),Gee=de([Z4,yn,uf],ac),Q4=e=>e.referenceElements.areas,Hee=de([Q4,yn,uf],ac),e8=e=>e.referenceElements.lines,qee=de([e8,yn,uf],ac),t8=(e,t)=>{if(e!=null){var n=As(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Wee=de(Gee,yn,t8),n8=(e,t)=>{if(e!=null){var n=As(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Kee=de([Hee,yn],n8);function Yee(e){var t;if(e.x!=null)return As([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.x);return n==null||n.length===0?[]:As(n)}function Xee(e){var t;if(e.y!=null)return As([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.y);return n==null||n.length===0?[]:As(n)}var r8=(e,t)=>{if(e!=null){var n=e.flatMap(r=>t==="xAxis"?Yee(r):Xee(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Jee=de([qee,yn],r8),Zee=de(Wee,Jee,Kee,(e,t,n)=>bp(e,n,t)),zE=(e,t,n,r,i,o,a,c)=>{if(n!=null)return n;var f=a==="vertical"&&c==="xAxis"||a==="horizontal"&&c==="yAxis",d=f?bp(r,o,i):bp(o,i);return cee(t,d,e.allowDataOverflow)},Qee=de([Cn,jE,VE,Uee,Vee,Zee,Dt,yn],zE,{memoizeOptions:{resultEqualityCheck:Tm}}),ete=[0,1],GE=(e,t,n,r,i,o,a)=>{if(!((e==null||n==null||n.length===0)&&a===void 0)){var{dataKey:c,type:f}=e,d=Rl(t,o);if(d&&c==null){var m;return FM(0,(m=n?.length)!==null&&m!==void 0?m:0)}return f==="category"?zee(r,e,d):i==="expand"?ete:a}},HE=de([Cn,Dt,BE,Nm,lf,yn,Qee],GE),i8=(e,t,n,r,i)=>{if(e!=null){var{scale:o,type:a}=e;if(o==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof o=="string"){var c="scale".concat(Kd(o));return c in yd?c:"point"}}},lc=de([Cn,Dt,q4,CE,yn],i8);function tte(e){if(e!=null){if(e in yd)return yd[e]();var t="scale".concat(Kd(e));if(t in yd)return yd[t]()}}function qE(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=tte(t);if(i!=null){var o=i.domain(n).range(r);return JK(o),o}}}var WE=(e,t,n)=>{var r=UE(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&wa(e))return xee(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&wa(e))return wee(e,t.tickCount,t.allowDecimals)}},KE=de([HE,cf,lc],WE),YE=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&wa(t)&&Array.isArray(n)&&n.length>0){var i=t[0],o=n[0],a=t[1],c=n[n.length-1];return[Math.min(i,o),Math.max(a,c)]}return t},nte=de([Cn,HE,KE,yn],YE),rte=de(Nm,Cn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(As(e.map(v=>v.value))).sort((v,E)=>v-E),i=r[0],o=r[r.length-1];if(i==null||o==null)return 1/0;var a=o-i;if(a===0)return 1/0;for(var c=0;c<r.length-1;c++){var f=r[c],d=r[c+1];if(!(f==null||d==null)){var m=d-f;n=Math.min(n,m)}}return n/a}}),o8=de(rte,Dt,M4,ir,(e,t,n,r,i)=>i,(e,t,n,r,i)=>{if(!Xt(e))return 0;var o=t==="vertical"?r.height:r.width;if(i==="gap")return e*o/2;if(i==="no-gap"){var a=zr(n,e*o),c=e*o/2;return c-a-(c-a)/o*a}return 0}),ite=(e,t,n)=>{var r=qo(e,t);return r==null||typeof r.padding!="string"?0:o8(e,"xAxis",t,n,r.padding)},ote=(e,t,n)=>{var r=Wo(e,t);return r==null||typeof r.padding!="string"?0:o8(e,"yAxis",t,n,r.padding)},ste=de(qo,ite,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),ate=de(Wo,ote,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),lte=de([ir,ste,cm,um,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),ute=de([ir,Dt,ate,cm,um,(e,t,n)=>n],(e,t,n,r,i,o)=>{var{padding:a}=i;return o?[r.height-a.bottom,a.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),hf=(e,t,n,r)=>{var i;switch(t){case"xAxis":return lte(e,n,r);case"yAxis":return ute(e,n,r);case"zAxis":return(i=OE(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return U4(e);case"radiusAxis":return j4(e,n);default:return}},s8=de([Cn,hf],Sm),Hu=de([Cn,lc,nte,s8],qE);de([df,Rm,yn],jee);function a8(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Om=(e,t)=>t,km=(e,t,n)=>n,cte=de(am,Om,km,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(a8)),dte=de(lm,Om,km,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(a8)),l8=(e,t)=>({width:e.width,height:t.height}),fte=(e,t)=>{var n=typeof t.width=="number"?t.width:Zd;return{width:n,height:e.height}},u8=de(ir,qo,l8),hte=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},pte=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},mte=de(ks,ir,cte,Om,km,(e,t,n,r,i)=>{var o={},a;return n.forEach(c=>{var f=l8(t,c);a==null&&(a=hte(t,r,e));var d=r==="top"&&!i||r==="bottom"&&i;o[c.id]=a-Number(d)*f.height,a+=(d?-1:1)*f.height}),o}),gte=de(Os,ir,dte,Om,km,(e,t,n,r,i)=>{var o={},a;return n.forEach(c=>{var f=fte(t,c);a==null&&(a=pte(t,r,e));var d=r==="left"&&!i||r==="right"&&i;o[c.id]=a-Number(d)*f.width,a+=(d?-1:1)*f.width}),o}),vte=(e,t)=>{var n=qo(e,t);if(n!=null)return mte(e,n.orientation,n.mirror)},yte=de([ir,qo,vte,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n?.[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),xte=(e,t)=>{var n=Wo(e,t);if(n!=null)return gte(e,n.orientation,n.mirror)},wte=de([ir,Wo,xte,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n?.[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),c8=de(ir,Wo,(e,t)=>{var n=typeof t.width=="number"?t.width:Zd;return{width:n,height:e.height}}),yP=(e,t,n)=>{switch(t){case"xAxis":return u8(e,n).width;case"yAxis":return c8(e,n).height;default:return}},d8=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:a}=n,c=Rl(e,r),f=t.map(d=>d.value);if(a&&c&&o==="category"&&i&&pk(f))return f}},XE=de([Dt,Nm,Cn,yn],d8),f8=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,a=Rl(e,r);if(a&&(i==="number"||o!=="auto"))return t.map(c=>c.value)}},JE=de([Dt,Nm,cf,yn],f8),xP=de([Dt,Oee,lc,Hu,XE,JE,hf,KE,yn],(e,t,n,r,i,o,a,c,f)=>{if(t!=null){var d=Rl(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:o,duplicateDomain:i,isCategorical:d,niceTicks:c,range:a,realScaleType:n,scale:r}}}),Ete=(e,t,n,r,i,o,a,c,f)=>{if(!(t==null||r==null)){var d=Rl(e,f),{type:m,ticks:v,tickCount:E}=t,C=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,I=m==="category"&&r.bandwidth?r.bandwidth()/C:0;I=f==="angleAxis"&&o!=null&&o.length>=2?vr(o[0]-o[1])*2*I:I;var P=v||i;if(P){var N=P.map((D,F)=>{var L=a?a.indexOf(D):D;return{index:F,coordinate:r(L)+I,value:D,offset:I}});return N.filter(D=>Xt(D.coordinate))}return d&&c?c.map((D,F)=>({coordinate:r(D)+I,value:D,index:F,offset:I})).filter(D=>Xt(D.coordinate)):r.ticks?r.ticks(E).map(D=>({coordinate:r(D)+I,value:D,offset:I})):r.domain().map((D,F)=>({coordinate:r(D)+I,value:a?a[D]:D,index:F,offset:I}))}},h8=de([Dt,cf,lc,Hu,KE,hf,XE,JE,yn],Ete),bte=(e,t,n,r,i,o,a)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var c=Rl(e,a),{tickCount:f}=t,d=0;return d=a==="angleAxis"&&r?.length>=2?vr(r[0]-r[1])*2*d:d,c&&o?o.map((m,v)=>({coordinate:n(m)+d,value:m,index:v,offset:d})):n.ticks?n.ticks(f).map(m=>({coordinate:n(m)+d,value:m,offset:d})):n.domain().map((m,v)=>({coordinate:n(m)+d,value:i?i[m]:m,index:v,offset:d}))}},Ea=de([Dt,cf,Hu,hf,XE,JE,yn],bte),ba=de(Cn,Hu,(e,t)=>{if(!(e==null||t==null))return Ep(Ep({},e),{},{scale:t})}),_te=de([Cn,lc,HE,s8],qE),Ste=de((e,t,n)=>OE(e,n),_te,(e,t)=>{if(!(e==null||t==null))return Ep(Ep({},e),{},{scale:t})}),Cte=de([Dt,am,lm],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),p8=e=>e.options.defaultTooltipEventType,m8=e=>e.options.validateTooltipEventTypes;function g8(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function ZE(e,t){var n=p8(e),r=m8(e);return g8(t,n,r)}function Ate(e){return Ge(t=>ZE(t,e))}var v8=(e,t)=>{var n,r=Number(t);if(!(ki(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},Tte=e=>e.tooltip.settings,ma={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Ite={itemInteraction:{click:ma,hover:ma},axisInteraction:{click:ma,hover:ma},keyboardInteraction:ma,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},y8=fi({name:"tooltip",initialState:Ite,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:gn()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,i=So(e).tooltipItemPayloads.indexOf(n);i>-1&&(e.tooltipItemPayloads[i]=r)},prepare:gn()},removeTooltipEntrySettings:{reducer(e,t){var n=So(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:gn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:Pte,replaceTooltipEntrySettings:Nte,removeTooltipEntrySettings:Rte,setTooltipSettingsState:Ote,setActiveMouseOverItemIndex:x8,mouseLeaveItem:kte,mouseLeaveChart:w8,setActiveClickItemIndex:Mte,setMouseOverAxisIndex:E8,setMouseClickAxisIndex:Dte,setSyncInteraction:Lx,setKeyboardInteraction:Bx}=y8.actions,Lte=y8.reducer;function wP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function e0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(n),!0).forEach(function(r){Bte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bte(e,t,n){return(t=Fte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fte(e){var t=Ute(e,"string");return typeof t=="symbol"?t:t+""}function Ute(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jte(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Vte(e){return e.index!=null}var b8=(e,t,n,r)=>{if(t==null)return ma;var i=jte(e,t,n);if(i==null)return ma;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(Vte(i)){if(o)return e0(e0({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return e0(e0({},ma),{},{coordinate:i.coordinate})};function $te(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function zte(e,t){var n=$te(e),r=t[0],i=t[1];if(n===void 0)return!1;var o=Math.min(r,i),a=Math.max(r,i);return n>=o&&n<=a}function Gte(e,t,n){if(n==null||t==null)return!0;var r=Vt(e,t);return r==null||!wa(n)?!0:zte(r,n)}var QE=(e,t,n,r)=>{var i=e?.index;if(i==null)return null;var o=Number(i);if(!Xt(o))return i;var a=0,c=1/0;t.length>0&&(c=t.length-1);var f=Math.max(a,Math.min(o,c)),d=t[f];return d==null||Gte(d,n,r)?String(f):null},_8=(e,t,n,r,i,o,a,c)=>{if(!(o==null||c==null)){var f=a[0],d=f==null?void 0:c(f.positions,o);if(d!=null)return d;var m=i?.[Number(o)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:m.coordinate}}}},S8=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&r!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(a=>{var c;return((c=a.settings)===null||c===void 0?void 0:c.graphicalItemId)===i})},pf=e=>e.options.tooltipPayloadSearcher,uc=e=>e.tooltip;function EP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(n),!0).forEach(function(r){Hte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hte(e,t,n){return(t=qte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qte(e){var t=Wte(e,"string");return typeof t=="symbol"?t:t+""}function Wte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kte(e,t){return e??t}var C8=(e,t,n,r,i,o,a)=>{if(!(t==null||o==null)){var{chartData:c,computedData:f,dataStartIndex:d,dataEndIndex:m}=n,v=[];return e.reduce((E,C)=>{var I,{dataDefinedOnItem:P,settings:N}=C,D=Kte(P,c),F=Array.isArray(D)?lM(D,d,m):D,L=(I=N?.dataKey)!==null&&I!==void 0?I:r,V=N?.nameKey,G;if(r&&Array.isArray(F)&&!Array.isArray(F[0])&&a==="axis"?G=mk(F,r,i):G=o(F,t,f,V),Array.isArray(G))G.forEach(W=>{var Z=bP(bP({},N),{},{name:W.name,unit:W.unit,color:void 0,fill:void 0});E.push(CT({tooltipEntrySettings:Z,dataKey:W.dataKey,payload:W.payload,value:Vt(W.payload,W.dataKey),name:W.name}))});else{var q;E.push(CT({tooltipEntrySettings:N,dataKey:L,payload:G,value:Vt(G,L),name:(q=Vt(G,V))!==null&&q!==void 0?q:N?.name}))}return E},v)}},eb=de([ar,Dt,q4,CE,sr],i8),Yte=de([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Xte=de([sr,sc],kE),cc=de([Yte,ar,Xte],ME,{memoizeOptions:{resultEqualityCheck:Im}}),Jte=de([cc],e=>e.filter(Am)),Zte=de([cc],DE,{memoizeOptions:{resultEqualityCheck:Im}}),dc=de([Zte,Ds],LE),Qte=de([Jte,Ds,ar],$4),tb=de([dc,ar,cc],FE),A8=de([ar],UE),ene=de([ar],e=>e.allowDataOverflow),T8=de([A8,ene],x4),tne=de([cc],e=>e.filter(Am)),nne=de([Qte,tne,lf,D4],X4),rne=de([nne,Ds,sr,T8],J4),ine=de([cc],K4),one=de([dc,ar,ine,Rm,sr],$E,{memoizeOptions:{resultEqualityCheck:Tm}}),sne=de([Z4,sr,sc],ac),ane=de([sne,sr],t8),lne=de([Q4,sr,sc],ac),une=de([lne,sr],n8),cne=de([e8,sr,sc],ac),dne=de([cne,sr],r8),fne=de([ane,dne,une],bp),hne=de([ar,A8,T8,rne,one,fne,Dt,sr],zE),mf=de([ar,Dt,dc,tb,lf,sr,hne],GE),pne=de([mf,ar,eb],WE),mne=de([ar,mf,pne,sr],YE),I8=e=>{var t=sr(e),n=sc(e),r=!1;return hf(e,t,n,r)},P8=de([ar,I8],Sm),N8=de([ar,eb,mne,P8],qE),gne=de([Dt,tb,ar,sr],d8),vne=de([Dt,tb,ar,sr],f8),yne=(e,t,n,r,i,o,a,c)=>{if(t){var{type:f}=t,d=Rl(e,c);if(r){var m=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,v=f==="category"&&r.bandwidth?r.bandwidth()/m:0;return v=c==="angleAxis"&&i!=null&&i?.length>=2?vr(i[0]-i[1])*2*v:v,d&&a?a.map((E,C)=>({coordinate:r(E)+v,value:E,index:C,offset:v})):r.domain().map((E,C)=>({coordinate:r(E)+v,value:o?o[E]:E,index:C,offset:v}))}}},Ls=de([Dt,ar,eb,N8,I8,gne,vne,sr],yne),nb=de([p8,m8,Tte],(e,t,n)=>g8(n.shared,e,t)),R8=e=>e.tooltip.settings.trigger,rb=e=>e.tooltip.settings.defaultIndex,gf=de([uc,nb,R8,rb],b8),_a=de([gf,dc,ff,mf],QE),O8=de([Ls,_a],v8),ib=de([gf],e=>{if(e)return e.dataKey}),xne=de([gf],e=>{if(e)return e.graphicalItemId}),k8=de([uc,nb,R8,rb],S8),wne=de([Os,ks,Dt,ir,Ls,rb,k8,pf],_8),Ene=de([gf,wne],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),bne=de([gf],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),_ne=de([k8,_a,Ds,ff,O8,pf,nb],C8);de([_ne],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function _P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function SP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(n),!0).forEach(function(r){Sne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sne(e,t,n){return(t=Cne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cne(e){var t=Ane(e,"string");return typeof t=="symbol"?t:t+""}function Ane(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tne=()=>Ge(ar),Ine=()=>{var e=Tne(),t=Ge(Ls),n=Ge(N8);return tp(!e||!n?void 0:SP(SP({},e),{},{scale:n}),t)};function CP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(n),!0).forEach(function(r){Pne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pne(e,t,n){return(t=Nne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nne(e){var t=Rne(e,"string");return typeof t=="symbol"?t:t+""}function Rne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var One=(e,t,n,r)=>{var i=t.find(o=>o&&o.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.chartY};if(e==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},kne=(e,t,n,r)=>{var i=t.find(d=>d&&d.index===n);if(i){if(e==="centric"){var o=i.coordinate,{radius:a}=r;return gu(gu(gu({},r),Wn(r.cx,r.cy,a,o)),{},{angle:o,radius:a})}var c=i.coordinate,{angle:f}=r;return gu(gu(gu({},r),Wn(r.cx,r.cy,c,f)),{},{angle:f,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Mne(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}var M8=(e,t,n,r,i)=>{var o,a=(o=t?.length)!==null&&o!==void 0?o:0;if(a<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<a;c++){var f,d,m,v,E,C=c>0?(f=n[c-1])===null||f===void 0?void 0:f.coordinate:(d=n[a-1])===null||d===void 0?void 0:d.coordinate,I=(m=n[c])===null||m===void 0?void 0:m.coordinate,P=c>=a-1?(v=n[0])===null||v===void 0?void 0:v.coordinate:(E=n[c+1])===null||E===void 0?void 0:E.coordinate,N=void 0;if(!(C==null||I==null||P==null))if(vr(I-C)!==vr(P-I)){var D=[];if(vr(P-I)===vr(i[1]-i[0])){N=P;var F=I+i[1]-i[0];D[0]=Math.min(F,(F+C)/2),D[1]=Math.max(F,(F+C)/2)}else{N=C;var L=P+i[1]-i[0];D[0]=Math.min(I,(L+I)/2),D[1]=Math.max(I,(L+I)/2)}var V=[Math.min(I,(N+I)/2),Math.max(I,(N+I)/2)];if(e>V[0]&&e<=V[1]||e>=D[0]&&e<=D[1]){var G;return(G=n[c])===null||G===void 0?void 0:G.index}}else{var q=Math.min(C,P),W=Math.max(C,P);if(e>(q+I)/2&&e<=(W+I)/2){var Z;return(Z=n[c])===null||Z===void 0?void 0:Z.index}}}else if(t)for(var X=0;X<a;X++){var fe=t[X];if(fe!=null){var se=t[X+1],ae=t[X-1];if(X===0&&se!=null&&e<=(fe.coordinate+se.coordinate)/2||X===a-1&&ae!=null&&e>(fe.coordinate+ae.coordinate)/2||X>0&&X<a-1&&ae!=null&&se!=null&&e>(fe.coordinate+ae.coordinate)/2&&e<=(fe.coordinate+se.coordinate)/2)return fe.index}}return-1},Dne=()=>Ge(CE),ob=(e,t)=>t,D8=(e,t,n)=>n,sb=(e,t,n,r)=>r,Lne=de(Ls,e=>Jp(e,t=>t.coordinate)),ab=de([uc,ob,D8,sb],b8),lb=de([ab,dc,ff,mf],QE),Bne=(e,t,n)=>{if(t!=null){var r=uc(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},L8=de([uc,ob,D8,sb],S8),_p=de([Os,ks,Dt,ir,Ls,sb,L8,pf],_8),Fne=de([ab,_p],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),B8=de([Ls,lb],v8),Une=de([L8,lb,Ds,ff,B8,pf,ob],C8),jne=de([ab,lb],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Vne=(e,t,n,r,i,o,a)=>{if(!(!e||!n||!r||!i)&&Mne(e,a)){var c=lY(e,t),f=M8(c,o,i,n,r),d=One(t,i,f,e);return{activeIndex:String(f),activeCoordinate:d}}},$ne=(e,t,n,r,i,o,a)=>{if(!(!e||!r||!i||!o||!n)){var c=CJ(e,n);if(c){var f=uY(c,t),d=M8(f,a,o,r,i),m=kne(t,o,d,c);return{activeIndex:String(d),activeCoordinate:m}}}},zne=(e,t,n,r,i,o,a,c)=>{if(!(!e||!t||!r||!i||!o))return t==="horizontal"||t==="vertical"?Vne(e,t,r,i,o,a,c):$ne(e,t,n,r,i,o,a)},Gne=de(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var r=e[t];if(r!=null)return n?r.panoramaElement:r.element}}),Hne=de(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(r=>parseInt(r,10)).concat(Object.values(Kn)),n=Array.from(new Set(t));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Iee}});function AP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function TP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(n),!0).forEach(function(r){qne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qne(e,t,n){return(t=Wne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wne(e){var t=Kne(e,"string");return typeof t=="symbol"?t:t+""}function Kne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yne={},Xne={zIndexMap:Object.values(Kn).reduce((e,t)=>TP(TP({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),Yne)},Jne=new Set(Object.values(Kn));function Zne(e){return Jne.has(e)}var F8=fi({name:"zIndex",initialState:Xne,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:gn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!Zne(n)&&delete e.zIndexMap[n])},prepare:gn()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:r,isPanorama:i}=t.payload;e.zIndexMap[n]?i?e.zIndexMap[n].panoramaElement=r:e.zIndexMap[n].element=r:e.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:gn()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:gn()}}}),{registerZIndexPortal:Qne,unregisterZIndexPortal:ere,registerZIndexPortalElement:tre,unregisterZIndexPortalElement:nre}=F8.actions,rre=F8.reducer;function hi(e){var{zIndex:t,children:n}=e,r=jY(),i=r&&t!==void 0&&t!==0,o=Nr(),a=Zt();M.useLayoutEffect(()=>i?(a(Qne({zIndex:t})),()=>{a(ere({zIndex:t}))}):Yd,[a,t,i]);var c=Ge(f=>Gne(f,t,o));return i?c?ow.createPortal(n,c):null:n}function Fx(){return Fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fx.apply(null,arguments)}function IP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function t0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IP(Object(n),!0).forEach(function(r){ire(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ire(e,t,n){return(t=ore(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ore(e){var t=sre(e,"string");return typeof t=="symbol"?t:t+""}function sre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function are(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return M.isValidElement(t)?M.cloneElement(t,r):M.createElement(n,r)}function lre(e){var t,{coordinate:n,payload:r,index:i,offset:o,tooltipAxisBandSize:a,layout:c,cursor:f,tooltipEventType:d,chartName:m}=e,v=n,E=r,C=i;if(!f||!v||m!=="ScatterChart"&&d!=="axis")return null;var I,P,N;if(m==="ScatterChart")I=v,P=UX,N=Kn.cursorLine;else if(m==="BarChart")I=jX(c,v,o,a),P=kM,N=Kn.cursorRectangle;else if(c==="radial"&&vk(v)){var{cx:D,cy:F,radius:L,startAngle:V,endAngle:G}=DM(v);I={cx:D,cy:F,startAngle:V,endAngle:G,innerRadius:L,outerRadius:L},P=BM,N=Kn.cursorLine}else I={points:PJ(c,v,o)},P=mm,N=Kn.cursorLine;var q=typeof f=="object"&&"className"in f?f.className:void 0,W=t0(t0(t0(t0({stroke:"#ccc",pointerEvents:"none"},o),I),Fu(f)),{},{payload:E,payloadIndex:C,className:Ft("recharts-tooltip-cursor",q)});return M.createElement(hi,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:N},M.createElement(are,{cursor:f,cursorComp:P,cursorProps:W}))}function ure(e){var t=Ine(),n=gM(),r=Qd(),i=Dne();return t==null||n==null||r==null||i==null?null:M.createElement(lre,Fx({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var U8=M.createContext(null),cre=()=>M.useContext(U8),Jv={exports:{}},PP;function dre(){return PP||(PP=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,m){this.fn=f,this.context=d,this.once=m||!1}function o(f,d,m,v,E){if(typeof m!="function")throw new TypeError("The listener must be a function");var C=new i(m,v||f,E),I=n?n+d:d;return f._events[I]?f._events[I].fn?f._events[I]=[f._events[I],C]:f._events[I].push(C):(f._events[I]=C,f._eventsCount++),f}function a(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],m,v;if(this._eventsCount===0)return d;for(v in m=this._events)t.call(m,v)&&d.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},c.prototype.listeners=function(d){var m=n?n+d:d,v=this._events[m];if(!v)return[];if(v.fn)return[v.fn];for(var E=0,C=v.length,I=new Array(C);E<C;E++)I[E]=v[E].fn;return I},c.prototype.listenerCount=function(d){var m=n?n+d:d,v=this._events[m];return v?v.fn?1:v.length:0},c.prototype.emit=function(d,m,v,E,C,I){var P=n?n+d:d;if(!this._events[P])return!1;var N=this._events[P],D=arguments.length,F,L;if(N.fn){switch(N.once&&this.removeListener(d,N.fn,void 0,!0),D){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,m),!0;case 3:return N.fn.call(N.context,m,v),!0;case 4:return N.fn.call(N.context,m,v,E),!0;case 5:return N.fn.call(N.context,m,v,E,C),!0;case 6:return N.fn.call(N.context,m,v,E,C,I),!0}for(L=1,F=new Array(D-1);L<D;L++)F[L-1]=arguments[L];N.fn.apply(N.context,F)}else{var V=N.length,G;for(L=0;L<V;L++)switch(N[L].once&&this.removeListener(d,N[L].fn,void 0,!0),D){case 1:N[L].fn.call(N[L].context);break;case 2:N[L].fn.call(N[L].context,m);break;case 3:N[L].fn.call(N[L].context,m,v);break;case 4:N[L].fn.call(N[L].context,m,v,E);break;default:if(!F)for(G=1,F=new Array(D-1);G<D;G++)F[G-1]=arguments[G];N[L].fn.apply(N[L].context,F)}}return!0},c.prototype.on=function(d,m,v){return o(this,d,m,v,!1)},c.prototype.once=function(d,m,v){return o(this,d,m,v,!0)},c.prototype.removeListener=function(d,m,v,E){var C=n?n+d:d;if(!this._events[C])return this;if(!m)return a(this,C),this;var I=this._events[C];if(I.fn)I.fn===m&&(!E||I.once)&&(!v||I.context===v)&&a(this,C);else{for(var P=0,N=[],D=I.length;P<D;P++)(I[P].fn!==m||E&&!I[P].once||v&&I[P].context!==v)&&N.push(I[P]);N.length?this._events[C]=N.length===1?N[0]:N:a(this,C)}return this},c.prototype.removeAllListeners=function(d){var m;return d?(m=n?n+d:d,this._events[m]&&a(this,m)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c})(Jv)),Jv.exports}var fre=dre();const hre=ro(fre);var Ud=new hre,Ux="recharts.syncEvent.tooltip",NP="recharts.syncEvent.brush";function ub(e,t){if(t){var n=Number.parseInt(t,10);if(!ki(n))return e?.[n]}}var pre={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},j8=fi({name:"options",initialState:pre,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),mre=j8.reducer,{createEventEmitter:gre}=j8.actions;function vre(e){return e.tooltip.syncInteraction}var yre={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},V8=fi({name:"chartData",initialState:yre,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:RP,setDataStartEndIndexes:xre,setComputedData:Cfe}=V8.actions,wre=V8.reducer,Ere=["x","y"];function OP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(n),!0).forEach(function(r){bre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bre(e,t,n){return(t=_re(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _re(e){var t=Sre(e,"string");return typeof t=="symbol"?t:t+""}function Sre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cre(e,t){if(e==null)return{};var n,r,i=Are(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Are(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Tre(){var e=Ge(AE),t=Ge(TE),n=Zt(),r=Ge(L4),i=Ge(Ls),o=Qd(),a=nc(),c=Ge(f=>f.rootProps.className);M.useEffect(()=>{if(e==null)return Yd;var f=(d,m,v)=>{if(t!==v&&e===d){if(r==="index"){var E;if(a&&m!==null&&m!==void 0&&(E=m.payload)!==null&&E!==void 0&&E.coordinate&&m.payload.sourceViewBox){var C=m.payload.coordinate,{x:I,y:P}=C,N=Cre(C,Ere),{x:D,y:F,width:L,height:V}=m.payload.sourceViewBox,G=vu(vu({},N),{},{x:a.x+(L?(I-D)/L:0)*a.width,y:a.y+(V?(P-F)/V:0)*a.height});n(vu(vu({},m),{},{payload:vu(vu({},m.payload),{},{coordinate:G})}))}else n(m);return}if(i!=null){var q;if(typeof r=="function"){var W={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},Z=r(i,W);q=i[Z]}else r==="value"&&(q=i.find(we=>String(we.value)===m.payload.label));var{coordinate:X}=m.payload;if(q==null||m.payload.active===!1||X==null||a==null){n(Lx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:fe,y:se}=X,ae=Math.min(fe,a.x+a.width),be=Math.min(se,a.y+a.height),he={x:o==="horizontal"?q.coordinate:ae,y:o==="horizontal"?be:q.coordinate},ne=Lx({active:m.payload.active,coordinate:he,dataKey:m.payload.dataKey,index:String(q.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox,graphicalItemId:m.payload.graphicalItemId});n(ne)}}};return Ud.on(Ux,f),()=>{Ud.off(Ux,f)}},[c,n,t,e,r,i,o,a])}function Ire(){var e=Ge(AE),t=Ge(TE),n=Zt();M.useEffect(()=>{if(e==null)return Yd;var r=(i,o,a)=>{t!==a&&e===i&&n(xre(o))};return Ud.on(NP,r),()=>{Ud.off(NP,r)}},[n,t,e])}function Pre(){var e=Zt();M.useEffect(()=>{e(gre())},[e]),Tre(),Ire()}function Nre(e,t,n,r,i,o){var a=Ge(C=>Bne(C,e,t)),c=Ge(TE),f=Ge(AE),d=Ge(L4),m=Ge(vre),v=m?.active,E=nc();M.useEffect(()=>{if(!v&&f!=null&&c!=null){var C=Lx({active:o,coordinate:n,dataKey:a,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:E,graphicalItemId:void 0});Ud.emit(Ux,f,C,c)}},[v,n,a,i,r,c,f,d,o,E])}function kP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function MP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kP(Object(n),!0).forEach(function(r){Rre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rre(e,t,n){return(t=Ore(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ore(e){var t=kre(e,"string");return typeof t=="symbol"?t:t+""}function kre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mre(e){return e.dataKey}function Dre(e,t){return M.isValidElement(e)?M.cloneElement(e,t):typeof e=="function"?M.createElement(e,t):M.createElement(yX,t)}var DP=[],Lre={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Zv(e){var t,n,r=Vn(e,Lre),{active:i,allowEscapeViewBox:o,animationDuration:a,animationEasing:c,content:f,filterNull:d,isAnimationActive:m,offset:v,payloadUniqBy:E,position:C,reverseDirection:I,useTranslate3d:P,wrapperStyle:N,cursor:D,shared:F,trigger:L,defaultIndex:V,portal:G,axisId:q}=r,W=Zt(),Z=typeof V=="number"?String(V):V;M.useEffect(()=>{W(Ote({shared:F,trigger:L,axisId:q,active:i,defaultIndex:Z}))},[W,F,L,q,i,Z]);var X=nc(),fe=IM(),se=Ate(F),{activeIndex:ae,isActive:be}=(t=Ge(ct=>jne(ct,se,L,Z)))!==null&&t!==void 0?t:{},he=Ge(ct=>Une(ct,se,L,Z)),ne=Ge(ct=>B8(ct,se,L,Z)),we=Ge(ct=>Fne(ct,se,L,Z)),ve=he,xe=cre(),Se=(n=i??be)!==null&&n!==void 0?n:!1,[Ce,te]=Ok([ve,Se]),pe=se==="axis"?ne:void 0;Nre(se,L,we,pe,ae,Se);var Fe=G??xe;if(Fe==null||X==null||se==null)return null;var Le=ve??DP;Se||(Le=DP),d&&Le.length&&(Le=Tk(Le.filter(ct=>ct.value!=null&&(ct.hide!==!0||r.includeHidden)),E,Mre));var lt=Le.length>0,Ne=M.createElement(CX,{allowEscapeViewBox:o,animationDuration:a,animationEasing:c,isAnimationActive:m,active:Se,coordinate:we,hasPayload:lt,offset:v,position:C,reverseDirection:I,useTranslate3d:P,viewBox:X,wrapperStyle:N,lastBoundingBox:Ce,innerRef:te,hasPortalFromProps:!!G},Dre(f,MP(MP({},r),{},{payload:Le,label:pe,active:Se,activeIndex:ae,coordinate:we,accessibilityLayer:fe})));return M.createElement(M.Fragment,null,ow.createPortal(Ne,Fe),Se&&M.createElement(ure,{cursor:D,tooltipEventType:se,coordinate:we,payload:Le,index:ae}))}var Al=e=>null;Al.displayName="Cell";function Bre(e,t,n){return(t=Fre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fre(e){var t=Ure(e,"string");return typeof t=="symbol"?t:t+""}function Ure(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class jre{constructor(t){Bre(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function LP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LP(Object(n),!0).forEach(function(r){$re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $re(e,t,n){return(t=zre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zre(e){var t=Gre(e,"string");return typeof t=="symbol"?t:t+""}function Gre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hre={cacheSize:2e3,enableCache:!0},$8=Vre({},Hre),BP=new jre($8.cacheSize),qre={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},FP="recharts_measurement_span";function Wre(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",o=t.fontStyle||"",a=t.letterSpacing||"",c=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(a,"|").concat(c)}var UP=(e,t)=>{try{var n=document.getElementById(FP);n||(n=document.createElement("span"),n.setAttribute("id",FP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,qre,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},xd=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||gm.isSsr)return{width:0,height:0};if(!$8.enableCache)return UP(t,n);var r=Wre(t,n),i=BP.get(r);if(i)return i;var o=UP(t,n);return BP.set(r,o),o},z8;function Kre(e,t,n){return(t=Yre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yre(e){var t=Xre(e,"string");return typeof t=="symbol"?t:t+""}function Xre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,VP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Jre=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Zre=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Qre={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},eie=["cm","mm","pt","pc","in","Q","px"];function tie(e){return eie.includes(e)}var Iu="NaN";function nie(e,t){return e*Qre[t]}class Pr{static parse(t){var n,[,r,i]=(n=Zre.exec(t))!==null&&n!==void 0?n:[];return r==null?Pr.NaN:new Pr(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,ki(t)&&(this.unit=""),n!==""&&!Jre.test(n)&&(this.num=NaN,this.unit=""),tie(n)&&(this.num=nie(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Pr(NaN,""):new Pr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Pr(NaN,""):new Pr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Pr(NaN,""):new Pr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Pr(NaN,""):new Pr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ki(this.num)}}z8=Pr;Kre(Pr,"NaN",new z8(NaN,""));function G8(e){if(e==null||e.includes(Iu))return Iu;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,o]=(n=jP.exec(t))!==null&&n!==void 0?n:[],a=Pr.parse(r??""),c=Pr.parse(o??""),f=i==="*"?a.multiply(c):a.divide(c);if(f.isNaN())return Iu;t=t.replace(jP,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,m,v,E]=(d=VP.exec(t))!==null&&d!==void 0?d:[],C=Pr.parse(m??""),I=Pr.parse(E??""),P=v==="+"?C.add(I):C.subtract(I);if(P.isNaN())return Iu;t=t.replace(VP,P.toString())}return t}var $P=/\(([^()]*)\)/;function rie(e){for(var t=e,n;(n=$P.exec(t))!=null;){var[,r]=n;t=t.replace($P,G8(r))}return t}function iie(e){var t=e.replace(/\s+/g,"");return t=rie(t),t=G8(t),t}function oie(e){try{return iie(e)}catch{return Iu}}function Qv(e){var t=oie(e.slice(5,-1));return t===Iu?"":t}var sie=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],aie=["dx","dy","angle","className","breakAll"];function jx(){return jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jx.apply(null,arguments)}function zP(e,t){if(e==null)return{};var n,r,i=lie(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var H8=/[ \f\n\r\t\v\u2028\u2029]+/,q8=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];an(t)||(n?i=t.toString().split(""):i=t.toString().split(H8));var o=i.map(c=>({word:c,width:xd(c,r).width})),a=n?0:xd("",r).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}};function uie(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var W8=(e,t,n,r)=>e.reduce((i,o)=>{var{word:a,width:c}=o,f=i[i.length-1];if(f&&c!=null&&(t==null||r||f.width+c+n<Number(t)))f.words.push(a),f.width+=c+n;else{var d={words:[a],width:c};i.push(d)}return i},[]),K8=e=>e.reduce((t,n)=>t.width>n.width?t:n),cie="",GP=(e,t,n,r,i,o,a,c)=>{var f=e.slice(0,t),d=q8({breakAll:n,style:r,children:f+cie});if(!d)return[!1,[]];var m=W8(d.wordsWithComputedWidth,o,a,c),v=m.length>i||K8(m).width>Number(o);return[v,m]},die=(e,t,n,r,i)=>{var{maxLines:o,children:a,style:c,breakAll:f}=e,d=Je(o),m=String(a),v=W8(t,r,n,i);if(!d||i)return v;var E=v.length>o||K8(v).width>Number(r);if(!E)return v;for(var C=0,I=m.length-1,P=0,N;C<=I&&P<=m.length-1;){var D=Math.floor((C+I)/2),F=D-1,[L,V]=GP(m,F,f,c,o,r,n,i),[G]=GP(m,D,f,c,o,r,n,i);if(!L&&!G&&(C=D+1),L&&G&&(I=D-1),!L&&G){N=V;break}P++}return N||v},HP=e=>{var t=an(e)?[]:e.toString().split(H8);return[{words:t,width:void 0}]},fie=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:a}=e;if((t||n)&&!gm.isSsr){var c,f,d=q8({breakAll:o,children:r,style:i});if(d){var{wordsWithComputedWidth:m,spaceWidth:v}=d;c=m,f=v}else return HP(r);return die({breakAll:o,children:r,maxLines:a,style:i},c,f,t,!!n)}return HP(r)},Y8="#808080",hie={angle:0,breakAll:!1,capHeight:"0.71em",fill:Y8,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Mm=M.forwardRef((e,t)=>{var n=Vn(e,hie),{x:r,y:i,lineHeight:o,capHeight:a,fill:c,scaleToFit:f,textAnchor:d,verticalAnchor:m}=n,v=zP(n,sie),E=M.useMemo(()=>fie({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),{dx:C,dy:I,angle:P,className:N,breakAll:D}=v,F=zP(v,aie);if(!eo(r)||!eo(i)||E.length===0)return null;var L=Number(r)+(Je(C)?C:0),V=Number(i)+(Je(I)?I:0);if(!Xt(L)||!Xt(V))return null;var G;switch(m){case"start":G=Qv("calc(".concat(a,")"));break;case"middle":G=Qv("calc(".concat((E.length-1)/2," * -").concat(o," + (").concat(a," / 2))"));break;default:G=Qv("calc(".concat(E.length-1," * -").concat(o,")"));break}var q=[];if(f){var W=E[0].width,{width:Z}=v;q.push("scale(".concat(Je(Z)&&Je(W)?Z/W:1,")"))}return P&&q.push("rotate(".concat(P,", ").concat(L,", ").concat(V,")")),q.length&&(F.transform=q.join(" ")),M.createElement("text",jx({},Oi(F),{ref:t,x:L,y:V,className:Ft("recharts-text",N),textAnchor:d,fill:c.includes("url")?Y8:c}),E.map((X,fe)=>{var se=X.words.join(D?"":" ");return M.createElement("tspan",{x:L,dy:fe===0?G:o,key:"".concat(se,"-").concat(fe)},se)}))});Mm.displayName="Text";var pie=["labelRef"],mie=["content"];function qP(e,t){if(e==null)return{};var n,r,i=gie(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function WP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WP(Object(n),!0).forEach(function(r){vie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vie(e,t,n){return(t=yie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yie(e){var t=xie(e,"string");return typeof t=="symbol"?t:t+""}function xie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hs(){return hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hs.apply(null,arguments)}var X8=M.createContext(null),J8=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:i,width:o,height:a,children:c}=e,f=M.useMemo(()=>({x:t,y:n,upperWidth:r,lowerWidth:i,width:o,height:a}),[t,n,r,i,o,a]);return M.createElement(X8.Provider,{value:f},c)},Z8=()=>{var e=M.useContext(X8),t=nc();return e||mM(t)},wie=M.createContext(null),Eie=()=>{var e=M.useContext(wie),t=Ge(V4);return e||t},bie=e=>{var{value:t,formatter:n}=e,r=an(e.children)?t:e.children;return typeof n=="function"?n(r):r},cb=e=>e!=null&&typeof e=="function",_ie=(e,t)=>{var n=vr(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Sie=(e,t,n,r,i)=>{var{offset:o,className:a}=e,{cx:c,cy:f,innerRadius:d,outerRadius:m,startAngle:v,endAngle:E,clockWise:C}=i,I=(d+m)/2,P=_ie(v,E),N=P>=0?1:-1,D,F;switch(t){case"insideStart":D=v+N*o,F=C;break;case"insideEnd":D=E-N*o,F=!C;break;case"end":D=E+N*o,F=C;break;default:throw new Error("Unsupported position ".concat(t))}F=P<=0?F:!F;var L=Wn(c,f,I,D),V=Wn(c,f,I,D+(F?1:-1)*359),G="M".concat(L.x,",").concat(L.y,`
    A`).concat(I,",").concat(I,",0,1,").concat(F?0:1,`,
    `).concat(V.x,",").concat(V.y),q=an(e.id)?Ad("recharts-radial-line-"):e.id;return M.createElement("text",hs({},r,{dominantBaseline:"central",className:Ft("recharts-radial-bar-label",a)}),M.createElement("defs",null,M.createElement("path",{id:q,d:G})),M.createElement("textPath",{xlinkHref:"#".concat(q)},n))},Cie=(e,t,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:c,endAngle:f}=e,d=(c+f)/2;if(n==="outside"){var{x:m,y:v}=Wn(r,i,a+t,d);return{x:m,y:v,textAnchor:m>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var E=(o+a)/2,{x:C,y:I}=Wn(r,i,E,d);return{x:C,y:I,textAnchor:"middle",verticalAnchor:"middle"}},Vx=e=>"cx"in e&&Je(e.cx),Aie=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,o;n!=null&&!Vx(n)&&(o=n);var{x:a,y:c,upperWidth:f,lowerWidth:d,height:m}=t,v=a,E=a+(f-d)/2,C=(v+E)/2,I=(f+d)/2,P=v+f/2,N=m>=0?1:-1,D=N*r,F=N>0?"end":"start",L=N>0?"start":"end",V=f>=0?1:-1,G=V*r,q=V>0?"end":"start",W=V>0?"start":"end";if(i==="top"){var Z={x:v+f/2,y:c-D,textAnchor:"middle",verticalAnchor:F};return Un(Un({},Z),o?{height:Math.max(c-o.y,0),width:f}:{})}if(i==="bottom"){var X={x:E+d/2,y:c+m+D,textAnchor:"middle",verticalAnchor:L};return Un(Un({},X),o?{height:Math.max(o.y+o.height-(c+m),0),width:d}:{})}if(i==="left"){var fe={x:C-G,y:c+m/2,textAnchor:q,verticalAnchor:"middle"};return Un(Un({},fe),o?{width:Math.max(fe.x-o.x,0),height:m}:{})}if(i==="right"){var se={x:C+I+G,y:c+m/2,textAnchor:W,verticalAnchor:"middle"};return Un(Un({},se),o?{width:Math.max(o.x+o.width-se.x,0),height:m}:{})}var ae=o?{width:I,height:m}:{};return i==="insideLeft"?Un({x:C+G,y:c+m/2,textAnchor:W,verticalAnchor:"middle"},ae):i==="insideRight"?Un({x:C+I-G,y:c+m/2,textAnchor:q,verticalAnchor:"middle"},ae):i==="insideTop"?Un({x:v+f/2,y:c+D,textAnchor:"middle",verticalAnchor:L},ae):i==="insideBottom"?Un({x:E+d/2,y:c+m-D,textAnchor:"middle",verticalAnchor:F},ae):i==="insideTopLeft"?Un({x:v+G,y:c+D,textAnchor:W,verticalAnchor:L},ae):i==="insideTopRight"?Un({x:v+f-G,y:c+D,textAnchor:q,verticalAnchor:L},ae):i==="insideBottomLeft"?Un({x:E+G,y:c+m-D,textAnchor:W,verticalAnchor:F},ae):i==="insideBottomRight"?Un({x:E+d-G,y:c+m-D,textAnchor:q,verticalAnchor:F},ae):i&&typeof i=="object"&&(Je(i.x)||Es(i.x))&&(Je(i.y)||Es(i.y))?Un({x:a+zr(i.x,I),y:c+zr(i.y,m),textAnchor:"end",verticalAnchor:"end"},ae):Un({x:P,y:c+m/2,textAnchor:"middle",verticalAnchor:"middle"},ae)},Tie={angle:0,offset:5,zIndex:Kn.label,position:"middle",textBreakAll:!1};function fa(e){var t=Vn(e,Tie),{viewBox:n,position:r,value:i,children:o,content:a,className:c="",textBreakAll:f,labelRef:d}=t,m=Eie(),v=Z8(),E=r==="center"?v:m??v,C,I,P;if(n==null?C=E:Vx(n)?C=n:C=mM(n),!C||an(i)&&an(o)&&!M.isValidElement(a)&&typeof a!="function")return null;var N=Un(Un({},t),{},{viewBox:C});if(M.isValidElement(a)){var{labelRef:D}=N,F=qP(N,pie);return M.cloneElement(a,F)}if(typeof a=="function"){var{content:L}=N,V=qP(N,mie);if(I=M.createElement(a,V),M.isValidElement(I))return I}else I=bie(t);var G=Oi(t);if(Vx(C)){if(r==="insideStart"||r==="insideEnd"||r==="end")return Sie(t,r,I,G,C);P=Cie(C,t.offset,t.position)}else P=Aie(t,C);return M.createElement(hi,{zIndex:t.zIndex},M.createElement(Mm,hs({ref:d,className:Ft("recharts-label",c)},G,P,{textAnchor:uie(G.textAnchor)?G.textAnchor:P.textAnchor,breakAll:f}),I))}fa.displayName="Label";var Iie=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?M.createElement(fa,hs({key:"label-implicit"},r)):eo(e)?M.createElement(fa,hs({key:"label-implicit",value:e},r)):M.isValidElement(e)?e.type===fa?M.cloneElement(e,Un({key:"label-implicit"},r)):M.createElement(fa,hs({key:"label-implicit",content:e},r)):cb(e)?M.createElement(fa,hs({key:"label-implicit",content:e},r)):e&&typeof e=="object"?M.createElement(fa,hs({},e,{key:"label-implicit"},r)):null};function Q8(e){var{label:t,labelRef:n}=e,r=Z8();return Iie(t,r,n)||null}var ey={},ty={},KP;function Pie(){return KP||(KP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(ty)),ty}var ny={},YP;function Nie(){return YP||(YP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(ny)),ny}var XP;function Rie(){return XP||(XP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pie(),n=Nie(),r=Bw();function i(o){if(r.isArrayLike(o))return t.last(n.toArray(o))}e.last=i})(ey)),ey}var ry,JP;function Oie(){return JP||(JP=1,ry=Rie().last),ry}var kie=Oie();const Mie=ro(kie);var Die=["valueAccessor"],Lie=["dataKey","clockWise","id","textBreakAll","zIndex"];function Sp(){return Sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sp.apply(null,arguments)}function ZP(e,t){if(e==null)return{};var n,r,i=Bie(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Bie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Fie=e=>Array.isArray(e.value)?Mie(e.value):e.value,eD=M.createContext(void 0),tD=eD.Provider,nD=M.createContext(void 0),Uie=nD.Provider;function jie(){return M.useContext(eD)}function Vie(){return M.useContext(nD)}function v0(e){var{valueAccessor:t=Fie}=e,n=ZP(e,Die),{dataKey:r,clockWise:i,id:o,textBreakAll:a,zIndex:c}=n,f=ZP(n,Lie),d=jie(),m=Vie(),v=d||m;return!v||!v.length?null:M.createElement(hi,{zIndex:c??Kn.label},M.createElement(jn,{className:"recharts-label-list"},v.map((E,C)=>{var I,P=an(r)?t(E,C):Vt(E&&E.payload,r),N=an(o)?{}:{id:"".concat(o,"-").concat(C)};return M.createElement(fa,Sp({key:"label-".concat(C)},Oi(E),f,N,{fill:(I=n.fill)!==null&&I!==void 0?I:E.fill,parentViewBox:E.parentViewBox,value:P,textBreakAll:a,viewBox:E.viewBox,index:C,zIndex:0}))})))}v0.displayName="LabelList";function db(e){var{label:t}=e;return t?t===!0?M.createElement(v0,{key:"labelList-implicit"}):M.isValidElement(t)||cb(t)?M.createElement(v0,{key:"labelList-implicit",content:t}):typeof t=="object"?M.createElement(v0,Sp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var rD=e=>e.graphicalItems.polarItems,$ie=de([yn,uf],kE),Dm=de([rD,Cn,$ie],ME),zie=de([Dm],DE),Lm=de([zie,_m],LE),Gie=de([Lm,Cn,Dm],FE);de([Lm,Cn,Dm],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var o,a=Vt(r,(o=t.dataKey)!==null&&o!==void 0?o:i.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:Vt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var QP=()=>{},Hie=de([Lm,Cn,Dm,Rm,yn],$E),qie=de([Cn,jE,VE,QP,Hie,QP,Dt,yn],zE),iD=de([Cn,Dt,Lm,Gie,lf,yn,qie],GE),Wie=de([iD,Cn,lc],WE);de([Cn,iD,Wie,yn],YE);var Kie={radiusAxis:{},angleAxis:{}},oD=fi({name:"polarAxis",initialState:Kie,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Afe,removeRadiusAxis:Tfe,addAngleAxis:Ife,removeAngleAxis:Pfe}=oD.actions,Yie=oD.reducer;function eN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eN(Object(n),!0).forEach(function(r){Xie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xie(e,t,n){return(t=Jie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jie(e){var t=Zie(e,"string");return typeof t=="symbol"?t:t+""}function Zie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qie=(e,t)=>t,fb=de([rD,Qie],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),eoe=[],hb=(e,t,n)=>n?.length===0?eoe:n,sD=de([_m,fb,hb],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(o=>tN(tN({},t.presentationProps),o.props))),i!=null)return i}}),toe=de([sD,fb,hb],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var o,a=Vt(r,t.nameKey,t.name),c;return n!=null&&(o=n[i])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?c=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?c=r.fill:c=t.fill,{value:tc(a,t.dataKey),color:c,payload:r,type:t.legendType}})}),noe=de([sD,fb,hb,ir],(e,t,n,r)=>{if(!(t==null||e==null))return ise({offset:r,pieSettings:t,displayedData:e,cells:n})}),iy={exports:{}},Wt={};var nN;function roe(){if(nN)return Wt;nN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.view_transition"),C=Symbol.for("react.client.reference");function I(P){if(typeof P=="object"&&P!==null){var N=P.$$typeof;switch(N){case e:switch(P=P.type,P){case n:case i:case r:case f:case d:case E:return P;default:switch(P=P&&P.$$typeof,P){case a:case c:case v:case m:return P;case o:return P;default:return N}}case t:return N}}}return Wt.ContextConsumer=o,Wt.ContextProvider=a,Wt.Element=e,Wt.ForwardRef=c,Wt.Fragment=n,Wt.Lazy=v,Wt.Memo=m,Wt.Portal=t,Wt.Profiler=i,Wt.StrictMode=r,Wt.Suspense=f,Wt.SuspenseList=d,Wt.isContextConsumer=function(P){return I(P)===o},Wt.isContextProvider=function(P){return I(P)===a},Wt.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},Wt.isForwardRef=function(P){return I(P)===c},Wt.isFragment=function(P){return I(P)===n},Wt.isLazy=function(P){return I(P)===v},Wt.isMemo=function(P){return I(P)===m},Wt.isPortal=function(P){return I(P)===t},Wt.isProfiler=function(P){return I(P)===i},Wt.isStrictMode=function(P){return I(P)===r},Wt.isSuspense=function(P){return I(P)===f},Wt.isSuspenseList=function(P){return I(P)===d},Wt.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===n||P===i||P===r||P===f||P===d||typeof P=="object"&&P!==null&&(P.$$typeof===v||P.$$typeof===m||P.$$typeof===a||P.$$typeof===o||P.$$typeof===c||P.$$typeof===C||P.getModuleId!==void 0)},Wt.typeOf=I,Wt}var rN;function ioe(){return rN||(rN=1,iy.exports=roe()),iy.exports}var ooe=ioe(),iN=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",oN=null,oy=null,aD=e=>{if(e===oN&&Array.isArray(oy))return oy;var t=[];return M.Children.forEach(e,n=>{an(n)||(ooe.isFragment(n)?t=t.concat(aD(n.props.children)):t.push(n))}),oy=t,oN=e,t};function Bm(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>iN(i)):r=[iN(t)],aD(e).forEach(i=>{var o=El(i,"type.displayName")||El(i,"type.name");o&&r.indexOf(o)!==-1&&n.push(i)}),n}var sy={},sN;function soe(){return sN||(sN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(sy)),sy}var ay,aN;function aoe(){return aN||(aN=1,ay=soe().isPlainObject),ay}var loe=aoe();const uoe=ro(loe);var lN,uN,cN,dN,fN;function hN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hN(Object(n),!0).forEach(function(r){coe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function coe(e,t,n){return(t=doe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function doe(e){var t=foe(e,"string");return typeof t=="symbol"?t:t+""}function foe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cp(){return Cp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cp.apply(null,arguments)}function dd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var mN=(e,t,n,r,i)=>{var o=n-r,a;return a=On(lN||(lN=dd(["M ",",",""])),e,t),a+=On(uN||(uN=dd(["L ",",",""])),e+n,t),a+=On(cN||(cN=dd(["L ",",",""])),e+n-o/2,t+i),a+=On(dN||(dN=dd(["L ",",",""])),e+n-o/2-r,t+i),a+=On(fN||(fN=dd(["L ",","," Z"])),e,t),a},hoe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},poe=e=>{var t=Vn(e,hoe),{x:n,y:r,upperWidth:i,lowerWidth:o,height:a,className:c}=t,{animationEasing:f,animationDuration:d,animationBegin:m,isUpdateAnimationActive:v}=t,E=M.useRef(null),[C,I]=M.useState(-1),P=M.useRef(i),N=M.useRef(o),D=M.useRef(a),F=M.useRef(n),L=M.useRef(r),V=nf(e,"trapezoid-");if(M.useEffect(()=>{if(E.current&&E.current.getTotalLength)try{var he=E.current.getTotalLength();he&&I(he)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||a!==+a||i===0&&o===0||a===0)return null;var G=Ft("recharts-trapezoid",c);if(!v)return M.createElement("g",null,M.createElement("path",Cp({},Oi(t),{className:G,d:mN(n,r,i,o,a)})));var q=P.current,W=N.current,Z=D.current,X=F.current,fe=L.current,se="0px ".concat(C===-1?1:C,"px"),ae="".concat(C,"px 0px"),be=PM(["strokeDasharray"],d,f);return M.createElement(tf,{animationId:V,key:V,canBegin:C>0,duration:d,easing:f,isActive:v,begin:m},he=>{var ne=_n(q,i,he),we=_n(W,o,he),ve=_n(Z,a,he),xe=_n(X,n,he),Se=_n(fe,r,he);E.current&&(P.current=ne,N.current=we,D.current=ve,F.current=xe,L.current=Se);var Ce=he>0?{transition:be,strokeDasharray:ae}:{strokeDasharray:se};return M.createElement("path",Cp({},Oi(t),{className:G,d:mN(xe,Se,ne,we,ve),ref:E,style:pN(pN({},Ce),t.style)}))})},moe=["option","shapeType","activeClassName"];function goe(e,t){if(e==null)return{};var n,r,i=voe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function voe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function gN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ap(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gN(Object(n),!0).forEach(function(r){yoe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yoe(e,t,n){return(t=xoe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xoe(e){var t=woe(e,"string");return typeof t=="symbol"?t:t+""}function woe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eoe(e,t){return Ap(Ap({},t),e)}function boe(e,t){return e==="symbols"}function vN(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return M.createElement(kM,n);case"trapezoid":return M.createElement(poe,n);case"sector":return M.createElement(BM,n);case"symbols":if(boe(t))return M.createElement(Xp,n);break;case"curve":return M.createElement(mm,n);default:return null}}function _oe(e){return M.isValidElement(e)?e.props:e}function Tp(e){var{option:t,shapeType:n,activeClassName:r="recharts-active-shape"}=e,i=goe(e,moe),o;if(M.isValidElement(t))o=M.cloneElement(t,Ap(Ap({},i),_oe(t)));else if(typeof t=="function")o=t(i,i.index);else if(uoe(t)&&typeof t!="boolean"){var a=Eoe(t,i);o=M.createElement(vN,{shapeType:n,elementProps:a})}else{var c=i;o=M.createElement(vN,{shapeType:n,elementProps:c})}return i.isActive?M.createElement(jn,{className:r},o):o}var Fm=(e,t,n)=>{var r=Zt();return(i,o)=>a=>{e?.(i,o,a),r(x8({activeIndex:String(o),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},Um=e=>{var t=Zt();return(n,r)=>i=>{e?.(n,r,i),t(kte())}},jm=(e,t,n)=>{var r=Zt();return(i,o)=>a=>{e?.(i,o,a),r(Mte({activeIndex:String(o),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function pb(e){var{tooltipEntrySettings:t}=e,n=Zt(),r=Nr(),i=M.useRef(null);return M.useLayoutEffect(()=>{r||(i.current===null?n(Pte(t)):i.current!==t&&n(Nte({prev:i.current,next:t})),i.current=t)},[t,n,r]),M.useLayoutEffect(()=>()=>{i.current&&(n(Rte(i.current)),i.current=null)},[n]),null}function lD(e){var{legendPayload:t}=e,n=Zt(),r=Nr(),i=M.useRef(null);return M.useLayoutEffect(()=>{r||(i.current===null?n(SM(t)):i.current!==t&&n(CM({prev:i.current,next:t})),i.current=t)},[n,r,t]),M.useLayoutEffect(()=>()=>{i.current&&(n(AM(i.current)),i.current=null)},[n]),null}function Soe(e){var{legendPayload:t}=e,n=Zt(),r=Ge(Dt),i=M.useRef(null);return M.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(SM(t)):i.current!==t&&n(CM({prev:i.current,next:t})),i.current=t)},[n,r,t]),M.useLayoutEffect(()=>()=>{i.current&&(n(AM(i.current)),i.current=null)},[n]),null}var ly,Coe=()=>{var[e]=M.useState(()=>Ad("uid-"));return e},Aoe=(ly=G6.useId)!==null&&ly!==void 0?ly:Coe;function Toe(e,t){var n=Aoe();return t||(e?"".concat(e,"-").concat(n):n)}var Ioe=M.createContext(void 0),mb=e=>{var{id:t,type:n,children:r}=e,i=Toe("recharts-".concat(n),t);return M.createElement(Ioe.Provider,{value:i},r(i))},Poe={cartesianItems:[],polarItems:[]},uD=fi({name:"graphicalItems",initialState:Poe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:gn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,i=So(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},prepare:gn()},removeCartesianGraphicalItem:{reducer(e,t){var n=So(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:gn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:gn()},removePolarGraphicalItem:{reducer(e,t){var n=So(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:gn()}}}),{addCartesianGraphicalItem:Noe,replaceCartesianGraphicalItem:Roe,removeCartesianGraphicalItem:Ooe,addPolarGraphicalItem:koe,removePolarGraphicalItem:Moe}=uD.actions,Doe=uD.reducer,Loe=e=>{var t=Zt(),n=M.useRef(null);return M.useLayoutEffect(()=>{n.current===null?t(Noe(e)):n.current!==e&&t(Roe({prev:n.current,next:e})),n.current=e},[t,e]),M.useLayoutEffect(()=>()=>{n.current&&(t(Ooe(n.current)),n.current=null)},[t]),null},cD=M.memo(Loe);function Boe(e){var t=Zt();return M.useLayoutEffect(()=>(t(koe(e)),()=>{t(Moe(e))}),[t,e]),null}var Foe=["key"],Uoe=["onMouseEnter","onClick","onMouseLeave"],joe=["id"],Voe=["id"];function yN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yN(Object(n),!0).forEach(function(r){$oe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $oe(e,t,n){return(t=zoe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zoe(e){var t=Goe(e,"string");return typeof t=="symbol"?t:t+""}function Goe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sa(){return Sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sa.apply(null,arguments)}function Vm(e,t){if(e==null)return{};var n,r,i=Hoe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Hoe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function qoe(e){var t=M.useMemo(()=>Bm(e.children,Al),[e.children]),n=Ge(r=>toe(r,e.id,t));return n==null?null:M.createElement(Soe,{legendPayload:n})}var Woe=M.memo(e=>{var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:o,fill:a,name:c,hide:f,tooltipType:d,id:m}=e,v={dataDefinedOnItem:r.map(E=>E.tooltipPayload),positions:r.map(E=>E.tooltipPosition),settings:{stroke:i,strokeWidth:o,fill:a,dataKey:t,nameKey:n,name:tc(c,t),hide:f,type:d,color:a,unit:"",graphicalItemId:m}};return M.createElement(pb,{tooltipEntrySettings:v})}),Koe=(e,t)=>e>t?"start":e<t?"end":"middle",Yoe=(e,t,n)=>zr(typeof t=="function"?t(e):t,n,n*.8),Xoe=(e,t,n)=>{var{top:r,left:i,width:o,height:a}=t,c=MM(o,a),f=i+zr(e.cx,o,o/2),d=r+zr(e.cy,a,a/2),m=zr(e.innerRadius,c,0),v=Yoe(n,e.outerRadius,c),E=e.maxRadius||Math.sqrt(o*o+a*a)/2;return{cx:f,cy:d,innerRadius:m,outerRadius:v,maxRadius:E}},Joe=(e,t)=>{var n=vr(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function Zoe(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Qoe=(e,t)=>{if(M.isValidElement(e))return M.cloneElement(e,t);if(typeof e=="function")return e(t);var n=Ft("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:r}=t,i=Vm(t,Foe);return M.createElement(mm,Sa({},i,{type:"linear",className:n}))},ese=(e,t,n)=>{if(M.isValidElement(e))return M.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),M.isValidElement(r)))return r;var i=Ft("recharts-pie-label-text",Zoe(e));return M.createElement(Mm,Sa({},t,{alignmentBaseline:"middle",className:i}),r)};function tse(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:o,dataKey:a}=n;if(!r||!i||!t)return null;var c=Ri(n),f=Fu(i),d=Fu(o),m=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,v=t.map((E,C)=>{var I=(E.startAngle+E.endAngle)/2,P=Wn(E.cx,E.cy,E.outerRadius+m,I),N=kn(kn(kn(kn({},c),E),{},{stroke:"none"},f),{},{index:C,textAnchor:Koe(P.x,E.cx)},P),D=kn(kn(kn(kn({},c),E),{},{fill:"none",stroke:E.fill},d),{},{index:C,points:[Wn(E.cx,E.cy,E.outerRadius,I),P],key:"line"});return M.createElement(hi,{zIndex:Kn.label,key:"label-".concat(E.startAngle,"-").concat(E.endAngle,"-").concat(E.midAngle,"-").concat(C)},M.createElement(jn,null,o&&Qoe(o,D),ese(i,N,Vt(E,a))))});return M.createElement(jn,{className:"recharts-pie-labels"},v)}function nse(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?M.createElement(db,{label:i}):M.createElement(tse,{sectors:t,props:n,showLabels:r})}function rse(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:o,id:a}=e,c=Ge(_a),f=Ge(ib),d=Ge(xne),{onMouseEnter:m,onClick:v,onMouseLeave:E}=i,C=Vm(i,Uoe),I=Fm(m,i.dataKey,a),P=Um(E),N=jm(v,i.dataKey,a);return t==null||t.length===0?null:M.createElement(M.Fragment,null,t.map((D,F)=>{if(D?.startAngle===0&&D?.endAngle===0&&t.length!==1)return null;var L=d==null||d===a,V=String(F)===c&&(f==null||i.dataKey===f)&&L,G=c?r:null,q=n&&V?n:G,W=kn(kn({},D),{},{stroke:D.stroke,tabIndex:-1,[Hw]:F,[qw]:a});return M.createElement(jn,Sa({key:"sector-".concat(D?.startAngle,"-").concat(D?.endAngle,"-").concat(D.midAngle,"-").concat(F),tabIndex:-1,className:"recharts-pie-sector"},ec(C,D,F),{onMouseEnter:I(D,F),onMouseLeave:P(D,F),onClick:N(D,F)}),M.createElement(Tp,Sa({option:o??q,index:F,shapeType:"sector",isActive:V},W)))}))}function ise(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:o}=e,{cornerRadius:a,startAngle:c,endAngle:f,dataKey:d,nameKey:m,tooltipType:v}=n,E=Math.abs(n.minAngle),C=Joe(c,f),I=Math.abs(C),P=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,N=r.filter(q=>Vt(q,d,0)!==0).length,D=(I>=360?N:N-1)*P,F=I-N*E-D,L=r.reduce((q,W)=>{var Z=Vt(W,d,0);return q+(Je(Z)?Z:0)},0),V;if(L>0){var G;V=r.map((q,W)=>{var Z=Vt(q,d,0),X=Vt(q,m,W),fe=Xoe(n,o,q),se=(Je(Z)?Z:0)/L,ae,be=kn(kn({},q),i&&i[W]&&i[W].props);W?ae=G.endAngle+vr(C)*P*(Z!==0?1:0):ae=c;var he=ae+vr(C)*((Z!==0?E:0)+se*F),ne=(ae+he)/2,we=(fe.innerRadius+fe.outerRadius)/2,ve=[{name:X,value:Z,payload:be,dataKey:d,type:v,graphicalItemId:n.id}],xe=Wn(fe.cx,fe.cy,we,ne);return G=kn(kn(kn(kn({},n.presentationProps),{},{percent:se,cornerRadius:typeof a=="string"?parseFloat(a):a,name:X,tooltipPayload:ve,midAngle:ne,middleRadius:we,tooltipPosition:xe},be),fe),{},{value:Z,dataKey:d,startAngle:ae,endAngle:he,payload:be,paddingAngle:vr(C)*P}),G})}return V}function ose(e){var{showLabels:t,sectors:n,children:r}=e,i=M.useMemo(()=>!t||!n?[]:n.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[n,t]);return M.createElement(Uie,{value:t?i:void 0},r)}function sse(e){var{props:t,previousSectorsRef:n,id:r}=e,{sectors:i,isAnimationActive:o,animationBegin:a,animationDuration:c,animationEasing:f,activeShape:d,inactiveShape:m,onAnimationStart:v,onAnimationEnd:E}=t,C=nf(t,"recharts-pie-"),I=n.current,[P,N]=M.useState(!1),D=M.useCallback(()=>{typeof E=="function"&&E(),N(!1)},[E]),F=M.useCallback(()=>{typeof v=="function"&&v(),N(!0)},[v]);return M.createElement(ose,{showLabels:!P,sectors:i},M.createElement(tf,{animationId:C,begin:a,duration:c,isActive:o,easing:f,onAnimationStart:F,onAnimationEnd:D,key:C},L=>{var V=[],G=i&&i[0],q=G?.startAngle;return i?.forEach((W,Z)=>{var X=I&&I[Z],fe=Z>0?El(W,"paddingAngle",0):0;if(X){var se=_n(X.endAngle-X.startAngle,W.endAngle-W.startAngle,L),ae=kn(kn({},W),{},{startAngle:q+fe,endAngle:q+se+fe});V.push(ae),q=ae.endAngle}else{var{endAngle:be,startAngle:he}=W,ne=_n(0,be-he,L),we=kn(kn({},W),{},{startAngle:q+fe,endAngle:q+ne+fe});V.push(we),q=we.endAngle}}),n.current=V,M.createElement(jn,null,M.createElement(rse,{sectors:V,activeShape:d,inactiveShape:m,allOtherPieProps:t,shape:t.shape,id:r}))}),M.createElement(nse,{showLabels:!P,sectors:i,props:t}),t.children)}var ase={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Kn.area};function lse(e){var{id:t}=e,n=Vm(e,joe),{hide:r,className:i,rootTabIndex:o}=e,a=M.useMemo(()=>Bm(e.children,Al),[e.children]),c=Ge(m=>noe(m,t,a)),f=M.useRef(null),d=Ft("recharts-pie",i);return r||c==null?(f.current=null,M.createElement(jn,{tabIndex:o,className:d})):M.createElement(hi,{zIndex:e.zIndex},M.createElement(Woe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:c,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),M.createElement(jn,{tabIndex:o,className:d},M.createElement(sse,{props:kn(kn({},n),{},{sectors:c}),previousSectorsRef:f,id:t})))}function dD(e){var t=Vn(e,ase),{id:n}=t,r=Vm(t,Voe),i=Ri(r);return M.createElement(mb,{id:n,type:"pie"},o=>M.createElement(M.Fragment,null,M.createElement(Boe,{type:"pie",id:o,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),M.createElement(qoe,Sa({},r,{id:o})),M.createElement(lse,Sa({},r,{id:o}))))}dD.displayName="Pie";function xN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xN(Object(n),!0).forEach(function(r){use(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function use(e,t,n){return(t=cse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cse(e){var t=dse(e,"string");return typeof t=="symbol"?t:t+""}function dse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fD=0,fse={xAxis:{},yAxis:{},zAxis:{}},hD=fi({name:"cartesianAxis",initialState:fse,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:gn()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:gn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:gn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:gn()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:gn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:gn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:gn()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:gn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:gn()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,i=e.yAxis[n];if(i){var o=i.widthHistory||[];if(o.length===3&&o[0]===o[2]&&r===o[1]&&r!==i.width&&Math.abs(r-o[0])<=1)return;var a=[...o,r].slice(-3);e.yAxis[n]=wN(wN({},e.yAxis[n]),{},{width:r,widthHistory:a})}}}}),{addXAxis:hse,replaceXAxis:pse,removeXAxis:mse,addYAxis:gse,replaceYAxis:vse,removeYAxis:yse,addZAxis:Nfe,replaceZAxis:Rfe,removeZAxis:Ofe,updateYAxisWidth:xse}=hD.actions,wse=hD.reducer,Ese=de([ir],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),bse=de([Ese,Os,ks],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),pD=()=>Ge(bse),EN=(e,t,n)=>{var r=n??e;if(!an(r))return zr(r,t,0)},_se=(e,t,n)=>{var r={},i=e.filter(Am),o=e.filter(d=>d.stackId==null),a=i.reduce((d,m)=>(d[m.stackId]||(d[m.stackId]=[]),d[m.stackId].push(m),d),r),c=Object.entries(a).map(d=>{var[m,v]=d,E=v.map(I=>I.dataKey),C=EN(t,n,v[0].barSize);return{stackId:m,dataKeys:E,barSize:C}}),f=o.map(d=>{var m=[d.dataKey].filter(E=>E!=null),v=EN(t,n,d.barSize);return{stackId:void 0,dataKeys:m,barSize:v}});return[...c,...f]};function bN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function n0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bN(Object(n),!0).forEach(function(r){Sse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sse(e,t,n){return(t=Cse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cse(e){var t=Ase(e,"string");return typeof t=="symbol"?t:t+""}function Ase(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tse(e,t,n,r,i){var o=r.length;if(!(o<1)){var a=zr(e,n,0,!0),c,f=[];if(Xt(r[0].barSize)){var d=!1,m=n/o,v=r.reduce((D,F)=>D+(F.barSize||0),0);v+=(o-1)*a,v>=n&&(v-=(o-1)*a,a=0),v>=n&&m>0&&(d=!0,m*=.9,v=o*m);var E=(n-v)/2>>0,C={offset:E-a,size:0};c=r.reduce((D,F)=>{var L,V={stackId:F.stackId,dataKeys:F.dataKeys,position:{offset:C.offset+C.size+a,size:d?m:(L=F.barSize)!==null&&L!==void 0?L:0}},G=[...D,V];return C=G[G.length-1].position,G},f)}else{var I=zr(t,n,0,!0);n-2*I-(o-1)*a<=0&&(a=0);var P=(n-2*I-(o-1)*a)/o;P>1&&(P>>=0);var N=Xt(i)?Math.min(P,i):P;c=r.reduce((D,F,L)=>[...D,{stackId:F.stackId,dataKeys:F.dataKeys,position:{offset:I+(P+a)*L+(P-N)/2,size:N}}],f)}return c}}var Ise=(e,t,n,r,i,o,a)=>{var c=an(a)?t:a,f=Tse(n,r,i!==o?i:o,e,c);return i!==o&&f!=null&&(f=f.map(d=>n0(n0({},d),{},{position:n0(n0({},d.position),{},{offset:d.position.offset-i/2})}))),f},Pse=(e,t)=>{var n=RE(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:o}=i;if(o)return o.find(a=>a.key===n)}}}};function Nse(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Xt(e.zIndex)?e.zIndex:t}var mD=e=>{var{chartData:t}=e,n=Zt(),r=Nr();return M.useEffect(()=>r?()=>{}:(n(RP(t)),()=>{n(RP(void 0))}),[t,n,r]),null},_N={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},gD=fi({name:"brush",initialState:_N,reducers:{setBrushSettings(e,t){return t.payload==null?_N:t.payload}}}),{setBrushSettings:kfe}=gD.actions,Rse=gD.reducer;function SN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function r0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SN(Object(n),!0).forEach(function(r){vD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vD(e,t,n){return(t=Ose(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ose(e){var t=kse(e,"string");return typeof t=="symbol"?t:t+""}function kse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mse=(e,t)=>{var{x:n,y:r}=e,{x:i,y:o}=t;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},Dse=e=>{var{x1:t,y1:n,x2:r,y2:i}=e;return Mse({x:t,y:n},{x:r,y:i})};class $m{static create(t){return new $m(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}vD($m,"EPS",1e-4);var Lse=e=>{var t=Object.keys(e).reduce((n,r)=>r0(r0({},n),{},{[r]:$m.create(e[r])}),{});return r0(r0({},t),{},{apply(n){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(o=>{var[a,c]=o;return[a,t[a].apply(c,{bandAware:r,position:i})]}))},isInRange(n){return Object.keys(n).every(r=>t[r].isInRange(n[r]))}})};function Bse(e){return(e%180+180)%180}var Fse=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Bse(i),a=o*Math.PI/180,c=Math.atan(r/n),f=a>c&&a<Math.PI-c?r/Math.sin(a):n/Math.cos(a);return Math.abs(f)},Use={dots:[],areas:[],lines:[]},yD=fi({name:"referenceElements",initialState:Use,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=So(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=So(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=So(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:Mfe,removeDot:Dfe,addArea:Lfe,removeArea:Bfe,addLine:jse,removeLine:Vse}=yD.actions,$se=yD.reducer,xD=M.createContext(void 0),zse=e=>{var{children:t}=e,[n]=M.useState("".concat(Ad("recharts"),"-clip")),r=pD();if(r==null)return null;var{x:i,y:o,width:a,height:c}=r;return M.createElement(xD.Provider,{value:n},M.createElement("defs",null,M.createElement("clipPath",{id:n},M.createElement("rect",{x:i,y:o,height:c,width:a}))),t)},Gse=()=>M.useContext(xD);function CN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function AN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CN(Object(n),!0).forEach(function(r){Hse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hse(e,t,n){return(t=qse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qse(e){var t=Wse(e,"string");return typeof t=="symbol"?t:t+""}function Wse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ip(){return Ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ip.apply(null,arguments)}var Kse=(e,t)=>{var n;if(M.isValidElement(e))n=M.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{if(!Xt(t.x1)||!Xt(t.y1)||!Xt(t.x2)||!Xt(t.y2))return null;n=M.createElement("line",Ip({},t,{className:"recharts-reference-line-line"}))}return n},Yse=(e,t,n,r,i,o)=>{var{x:a,width:c}=o,f=i.y.apply(e,{position:n});if(ki(f)||t==="discard"&&!i.y.isInRange(f))return null;var d=[{x:a+c,y:f},{x:a,y:f}];return r==="left"?d.reverse():d},Xse=(e,t,n,r,i,o)=>{var{y:a,height:c}=o,f=i.x.apply(e,{position:n});if(ki(f)||t==="discard"&&!i.x.isInRange(f))return null;var d=[{x:f,y:a+c},{x:f,y:a}];return r==="top"?d.reverse():d},Jse=(e,t,n,r)=>{var i=e.map(o=>r.apply(o,{position:n}));return t==="discard"&&i.some(o=>!r.isInRange(o))?null:i},Zse=(e,t,n,r,i,o)=>{var{x:a,y:c,segment:f,ifOverflow:d}=o,m=eo(a),v=eo(c);return v?Yse(c,d,n,i,e,t):m?Xse(a,d,n,r,e,t):f!=null&&f.length===2?Jse(f,d,n,e):null};function Qse(e){var t=Zt();return M.useEffect(()=>(t(jse(e)),()=>{t(Vse(e))})),null}function eae(e){var{xAxisId:t,yAxisId:n,shape:r,className:i,ifOverflow:o}=e,a=Nr(),c=Gse(),f=Ge(q=>qo(q,t)),d=Ge(q=>Wo(q,n)),m=Ge(q=>Hu(q,"xAxis",t,a)),v=Ge(q=>Hu(q,"yAxis",n,a)),E=nc();if(!c||!E||f==null||d==null||m==null||v==null)return null;var C=Lse({x:m,y:v}),I=Zse(C,E,e.position,f.orientation,d.orientation,e);if(!I)return null;var[{x:P,y:N},{x:D,y:F}]=I,L=o==="hidden"?"url(#".concat(c,")"):void 0,V=AN(AN({clipPath:L},Oi(e)),{},{x1:P,y1:N,x2:D,y2:F}),G=Dse({x1:P,y1:N,x2:D,y2:F});return M.createElement(hi,{zIndex:e.zIndex},M.createElement(jn,{className:Ft("recharts-reference-line",i)},Kse(r,V),M.createElement(J8,Ip({},G,{lowerWidth:G.width,upperWidth:G.width}),M.createElement(Q8,{label:e.label}),e.children)))}var tae={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Kn.line};function wD(e){var t=Vn(e,tae);return M.createElement(M.Fragment,null,M.createElement(Qse,{yAxisId:t.yAxisId,xAxisId:t.xAxisId,ifOverflow:t.ifOverflow,x:t.x,y:t.y,segment:t.segment}),M.createElement(eae,t))}wD.displayName="ReferenceLine";function ED(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],r=0;r<e.length;r+=t){var i=e[r];i!==void 0&&n.push(i)}return n}function nae(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Fse(r,n)}function rae(e,t,n){var r=n==="width",{x:i,y:o,width:a,height:c}=e;return t===1?{start:r?i:o,end:r?i+a:o+c}:{start:r?i+a:o+c,end:r?i:o}}function jd(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-i)<=0}function iae(e,t){return ED(e,t+1)}function oae(e,t,n,r,i){for(var o=(r||[]).slice(),{start:a,end:c}=t,f=0,d=1,m=a,v=function(){var I=r?.[f];if(I===void 0)return{v:ED(r,d)};var P=f,N,D=()=>(N===void 0&&(N=n(I,P)),N),F=I.coordinate,L=f===0||jd(e,F,D,m,c);L||(f=0,m=a,d+=1),L&&(m=F+e*(D()/2+i),f+=d)},E;d<=o.length;)if(E=v(),E)return E.v;return[]}function sae(e,t,n,r,i){var o=(r||[]).slice(),a=o.length;if(a===0)return[];for(var{start:c,end:f}=t,d=1;d<=a;d++){for(var m=(a-1)%d,v=c,E=!0,C=function(){var F=r[I],L=I,V,G=()=>(V===void 0&&(V=n(F,L)),V),q=F.coordinate,W=I===m||jd(e,q,G,v,f);if(!W)return E=!1,1;W&&(v=q+e*(G()/2+i))},I=m;I<a&&!C();I+=d);if(E){for(var P=[],N=m;N<a;N+=d)P.push(r[N]);return P}}return[]}function TN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TN(Object(n),!0).forEach(function(r){aae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aae(e,t,n){return(t=lae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lae(e){var t=uae(e,"string");return typeof t=="symbol"?t:t+""}function uae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cae(e,t,n,r,i){for(var o=(r||[]).slice(),a=o.length,{start:c}=t,{end:f}=t,d=function(E){var C=o[E],I,P=()=>(I===void 0&&(I=n(C,E)),I);if(E===a-1){var N=e*(C.coordinate+e*P()/2-f);o[E]=C=jr(jr({},C),{},{tickCoord:N>0?C.coordinate-N*e:C.coordinate})}else o[E]=C=jr(jr({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var D=jd(e,C.tickCoord,P,c,f);D&&(f=C.tickCoord-e*(P()/2+i),o[E]=jr(jr({},C),{},{isShow:!0}))}},m=a-1;m>=0;m--)d(m);return o}function dae(e,t,n,r,i,o){var a=(r||[]).slice(),c=a.length,{start:f,end:d}=t;if(o){var m=r[c-1],v=n(m,c-1),E=e*(m.coordinate+e*v/2-d);if(a[c-1]=m=jr(jr({},m),{},{tickCoord:E>0?m.coordinate-E*e:m.coordinate}),m.tickCoord!=null){var C=jd(e,m.tickCoord,()=>v,f,d);C&&(d=m.tickCoord-e*(v/2+i),a[c-1]=jr(jr({},m),{},{isShow:!0}))}}for(var I=o?c-1:c,P=function(F){var L=a[F],V,G=()=>(V===void 0&&(V=n(L,F)),V);if(F===0){var q=e*(L.coordinate-e*G()/2-f);a[F]=L=jr(jr({},L),{},{tickCoord:q<0?L.coordinate-q*e:L.coordinate})}else a[F]=L=jr(jr({},L),{},{tickCoord:L.coordinate});if(L.tickCoord!=null){var W=jd(e,L.tickCoord,G,f,d);W&&(f=L.tickCoord+e*(G()/2+i),a[F]=jr(jr({},L),{},{isShow:!0}))}},N=0;N<I;N++)P(N);return a}function gb(e,t,n){var{tick:r,ticks:i,viewBox:o,minTickGap:a,orientation:c,interval:f,tickFormatter:d,unit:m,angle:v}=e;if(!i||!i.length||!r)return[];if(Je(f)||gm.isSsr){var E;return(E=iae(i,Je(f)?f:0))!==null&&E!==void 0?E:[]}var C=[],I=c==="top"||c==="bottom"?"width":"height",P=m&&I==="width"?xd(m,{fontSize:t,letterSpacing:n}):{width:0,height:0},N=(L,V)=>{var G=typeof d=="function"?d(L.value,V):L.value;return I==="width"?nae(xd(G,{fontSize:t,letterSpacing:n}),P,v):xd(G,{fontSize:t,letterSpacing:n})[I]},D=i.length>=2?vr(i[1].coordinate-i[0].coordinate):1,F=rae(o,D,I);return f==="equidistantPreserveStart"?oae(D,F,N,i,a):f==="equidistantPreserveEnd"?sae(D,F,N,i,a):(f==="preserveStart"||f==="preserveStartEnd"?C=dae(D,F,N,i,a,f==="preserveStartEnd"):C=cae(D,F,N,i,a),C.filter(L=>L.isShow))}var fae=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=e,a=0;if(t){Array.from(t).forEach(m=>{if(m){var v=m.getBoundingClientRect();v.width>a&&(a=v.width)}});var c=n?n.getBoundingClientRect().width:0,f=i+o,d=a+f+c+(n?r:0);return Math.round(d)}return 0},hae=["axisLine","width","height","className","hide","ticks","axisType"];function pae(e,t){if(e==null)return{};var n,r,i=mae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mae(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Tl(){return Tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tl.apply(null,arguments)}function IN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IN(Object(n),!0).forEach(function(r){gae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gae(e,t,n){return(t=vae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vae(e){var t=yae(e,"string");return typeof t=="symbol"?t:t+""}function yae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ys={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Kn.axis};function xae(e){var{x:t,y:n,width:r,height:i,orientation:o,mirror:a,axisLine:c,otherSvgProps:f}=e;if(!c)return null;var d=qn(qn(qn({},f),Ri(c)),{},{fill:"none"});if(o==="top"||o==="bottom"){var m=+(o==="top"&&!a||o==="bottom"&&a);d=qn(qn({},d),{},{x1:t,y1:n+m*i,x2:t+r,y2:n+m*i})}else{var v=+(o==="left"&&!a||o==="right"&&a);d=qn(qn({},d),{},{x1:t+v*r,y1:n,x2:t+v*r,y2:n+i})}return M.createElement("line",Tl({},d,{className:Ft("recharts-cartesian-axis-line",El(c,"className"))}))}function wae(e,t,n,r,i,o,a,c,f){var d,m,v,E,C,I,P=c?-1:1,N=e.tickSize||a,D=Je(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":d=m=e.coordinate,E=n+ +!c*i,v=E-P*N,I=v-P*f,C=D;break;case"left":v=E=e.coordinate,m=t+ +!c*r,d=m-P*N,C=d-P*f,I=D;break;case"right":v=E=e.coordinate,m=t+ +c*r,d=m+P*N,C=d+P*f,I=D;break;default:d=m=e.coordinate,E=n+ +c*i,v=E+P*N,I=v+P*f,C=D;break}return{line:{x1:d,y1:v,x2:m,y2:E},tick:{x:C,y:I}}}function Eae(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function bae(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function _ae(e){var{option:t,tickProps:n,value:r}=e,i,o=Ft(n.className,"recharts-cartesian-axis-tick-value");if(M.isValidElement(t))i=M.cloneElement(t,qn(qn({},n),{},{className:o}));else if(typeof t=="function")i=t(qn(qn({},n),{},{className:o}));else{var a="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(a=Ft(a,t?.className)),i=M.createElement(Mm,Tl({},n,{className:a}),r)}return i}var Sae=M.forwardRef((e,t)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:o,tickFormatter:a,unit:c,padding:f,tickTextProps:d,orientation:m,mirror:v,x:E,y:C,width:I,height:P,tickSize:N,tickMargin:D,fontSize:F,letterSpacing:L,getTicksConfig:V,events:G,axisType:q}=e,W=gb(qn(qn({},V),{},{ticks:n}),F,L),Z=Eae(m,v),X=bae(m,v),fe=Ri(V),se=Fu(r),ae={};typeof i=="object"&&(ae=i);var be=qn(qn({},fe),{},{fill:"none"},ae),he=W.map(ve=>qn({entry:ve},wae(ve,E,C,I,P,m,N,v,D))),ne=he.map(ve=>{var{entry:xe,line:Se}=ve;return M.createElement(jn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(xe.value,"-").concat(xe.coordinate,"-").concat(xe.tickCoord)},i&&M.createElement("line",Tl({},be,Se,{className:Ft("recharts-cartesian-axis-tick-line",El(i,"className"))})))}),we=he.map((ve,xe)=>{var{entry:Se,tick:Ce}=ve,te=qn(qn(qn(qn({textAnchor:Z,verticalAnchor:X},fe),{},{stroke:"none",fill:o},se),Ce),{},{index:xe,payload:Se,visibleTicksCount:W.length,tickFormatter:a,padding:f},d);return M.createElement(jn,Tl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Se.value,"-").concat(Se.coordinate,"-").concat(Se.tickCoord)},ec(G,Se,xe)),r&&M.createElement(_ae,{option:r,tickProps:te,value:"".concat(typeof a=="function"?a(Se.value,xe):Se.value).concat(c||"")}))});return M.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(q,"-ticks")},we.length>0&&M.createElement(hi,{zIndex:Kn.label},M.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(q,"-tick-labels"),ref:t},we)),ne.length>0&&M.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(q,"-tick-lines")},ne))}),Cae=M.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:o,hide:a,ticks:c,axisType:f}=e,d=pae(e,hae),[m,v]=M.useState(""),[E,C]=M.useState(""),I=M.useRef(null);M.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var N;return fae({ticks:I.current,label:(N=e.labelRef)===null||N===void 0?void 0:N.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var P=M.useCallback(N=>{if(N){var D=N.getElementsByClassName("recharts-cartesian-axis-tick-value");I.current=D;var F=D[0];if(F){var L=window.getComputedStyle(F),V=L.fontSize,G=L.letterSpacing;(V!==m||G!==E)&&(v(V),C(G))}}},[m,E]);return a||r!=null&&r<=0||i!=null&&i<=0?null:M.createElement(hi,{zIndex:e.zIndex},M.createElement(jn,{className:Ft("recharts-cartesian-axis",o)},M.createElement(xae,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Ri(e)}),M.createElement(Sae,{ref:P,axisType:f,events:d,fontSize:m,getTicksConfig:e,height:e.height,letterSpacing:E,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:c,unit:e.unit,width:e.width,x:e.x,y:e.y}),M.createElement(J8,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},M.createElement(Q8,{label:e.label,labelRef:e.labelRef}),e.children)))}),vb=M.forwardRef((e,t)=>{var n=Vn(e,ys);return M.createElement(Cae,Tl({},n,{ref:t}))});vb.displayName="CartesianAxis";var Aae=["x1","y1","x2","y2","key"],Tae=["offset"],Iae=["xAxisId","yAxisId"],Pae=["xAxisId","yAxisId"];function PN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PN(Object(n),!0).forEach(function(r){Nae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nae(e,t,n){return(t=Rae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rae(e){var t=Oae(e,"string");return typeof t=="symbol"?t:t+""}function Oae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ml.apply(null,arguments)}function Pp(e,t){if(e==null)return{};var n,r,i=kae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function kae(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Mae=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:o,height:a,ry:c}=e;return M.createElement("rect",{x:r,y:i,ry:c,width:o,height:a,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function bD(e){var{option:t,lineItemProps:n}=e,r;if(M.isValidElement(t))r=M.cloneElement(t,n);else if(typeof t=="function")r=t(n);else{var i,{x1:o,y1:a,x2:c,y2:f,key:d}=n,m=Pp(n,Aae),v=(i=Ri(m))!==null&&i!==void 0?i:{},{offset:E}=v,C=Pp(v,Tae);r=M.createElement("line",ml({},C,{x1:o,y1:a,x2:c,y2:f,fill:"none",key:d}))}return r}function Dae(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:a}=e,c=Pp(e,Iae),f=i.map((d,m)=>{var v=Vr(Vr({},c),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(m),index:m});return M.createElement(bD,{key:"line-".concat(m),option:r,lineItemProps:v})});return M.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function Lae(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:a}=e,c=Pp(e,Pae),f=i.map((d,m)=>{var v=Vr(Vr({},c),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(m),index:m});return M.createElement(bD,{option:r,lineItemProps:v,key:"line-".concat(m)})});return M.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function Bae(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:o,height:a,horizontalPoints:c,horizontal:f=!0}=e;if(!f||!t||!t.length||c==null)return null;var d=c.map(v=>Math.round(v+i-i)).sort((v,E)=>v-E);i!==d[0]&&d.unshift(0);var m=d.map((v,E)=>{var C=!d[E+1],I=C?i+a-v:d[E+1]-v;if(I<=0)return null;var P=E%t.length;return M.createElement("rect",{key:"react-".concat(E),y:v,x:r,height:I,width:o,stroke:"none",fill:t[P],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Fae(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:o,width:a,height:c,verticalPoints:f}=e;if(!t||!n||!n.length)return null;var d=f.map(v=>Math.round(v+i-i)).sort((v,E)=>v-E);i!==d[0]&&d.unshift(0);var m=d.map((v,E)=>{var C=!d[E+1],I=C?i+a-v:d[E+1]-v;if(I<=0)return null;var P=E%n.length;return M.createElement("rect",{key:"react-".concat(E),x:v,y:o,width:I,height:c,stroke:"none",fill:n[P],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Uae=(e,t)=>{var{xAxis:n,width:r,height:i,offset:o}=e;return uM(gb(Vr(Vr(Vr({},ys),n),{},{ticks:cM(n),viewBox:{x:0,y:0,width:r,height:i}})),o.left,o.left+o.width,t)},jae=(e,t)=>{var{yAxis:n,width:r,height:i,offset:o}=e;return uM(gb(Vr(Vr(Vr({},ys),n),{},{ticks:cM(n),viewBox:{x:0,y:0,width:r,height:i}})),o.top,o.top+o.height,t)},Vae={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Kn.grid};function $x(e){var t=Yw(),n=Xw(),r=gM(),i=Vr(Vr({},Vn(e,Vae)),{},{x:Je(e.x)?e.x:r.left,y:Je(e.y)?e.y:r.top,width:Je(e.width)?e.width:r.width,height:Je(e.height)?e.height:r.height}),{xAxisId:o,yAxisId:a,x:c,y:f,width:d,height:m,syncWithTicks:v,horizontalValues:E,verticalValues:C}=i,I=Nr(),P=Ge(X=>xP(X,"xAxis",o,I)),N=Ge(X=>xP(X,"yAxis",a,I));if(!zo(d)||!zo(m)||!Je(c)||!Je(f))return null;var D=i.verticalCoordinatesGenerator||Uae,F=i.horizontalCoordinatesGenerator||jae,{horizontalPoints:L,verticalPoints:V}=i;if((!L||!L.length)&&typeof F=="function"){var G=E&&E.length,q=F({yAxis:N?Vr(Vr({},N),{},{ticks:G?E:N.ticks}):void 0,width:t??d,height:n??m,offset:r},G?!0:v);np(Array.isArray(q),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof q,"]")),Array.isArray(q)&&(L=q)}if((!V||!V.length)&&typeof D=="function"){var W=C&&C.length,Z=D({xAxis:P?Vr(Vr({},P),{},{ticks:W?C:P.ticks}):void 0,width:t??d,height:n??m,offset:r},W?!0:v);np(Array.isArray(Z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Z,"]")),Array.isArray(Z)&&(V=Z)}return M.createElement(hi,{zIndex:i.zIndex},M.createElement("g",{className:"recharts-cartesian-grid"},M.createElement(Mae,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),M.createElement(Bae,ml({},i,{horizontalPoints:L})),M.createElement(Fae,ml({},i,{verticalPoints:V})),M.createElement(Dae,ml({},i,{offset:r,horizontalPoints:L,xAxis:P,yAxis:N})),M.createElement(Lae,ml({},i,{offset:r,verticalPoints:V,xAxis:P,yAxis:N}))))}$x.displayName="CartesianGrid";var $ae={},_D=fi({name:"errorBars",initialState:$ae,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Ffe,replaceErrorBar:Ufe,removeErrorBar:jfe}=_D.actions,zae=_D.reducer,Gae=["children"];function Hae(e,t){if(e==null)return{};var n,r,i=qae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function qae(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Wae={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Kae=M.createContext(Wae);function SD(e){var{children:t}=e,n=Hae(e,Gae);return M.createElement(Kae.Provider,{value:n},t)}function yb(e,t){var n,r,i=Ge(d=>qo(d,e)),o=Ge(d=>Wo(d,t)),a=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:pr.allowDataOverflow,c=(r=o?.allowDataOverflow)!==null&&r!==void 0?r:mr.allowDataOverflow,f=a||c;return{needClip:f,needClipX:a,needClipY:c}}function CD(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=pD(),{needClipX:o,needClipY:a,needClip:c}=yb(t,n);if(!c||!i)return null;var{x:f,y:d,width:m,height:v}=i;return M.createElement("clipPath",{id:"clipPath-".concat(r)},M.createElement("rect",{x:o?f:f-m/2,y:a?d:d-v/2,width:o?m:m*2,height:a?v:v*2}))}var uy={exports:{}},cy={};var NN;function Yae(){if(NN)return cy;NN=1;var e=qu();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,c=e.useDebugValue;return cy.useSyncExternalStoreWithSelector=function(f,d,m,v,E){var C=i(null);if(C.current===null){var I={hasValue:!1,value:null};C.current=I}else I=C.current;C=a(function(){function N(G){if(!D){if(D=!0,F=G,G=v(G),E!==void 0&&I.hasValue){var q=I.value;if(E(q,G))return L=q}return L=G}if(q=L,n(F,G))return q;var W=v(G);return E!==void 0&&E(q,W)?(F=G,q):(F=G,L=W)}var D=!1,F,L,V=m===void 0?null:m;return[function(){return N(d())},V===null?void 0:function(){return N(V())}]},[d,m,v,E]);var P=r(f,C[0],C[1]);return o(function(){I.hasValue=!0,I.value=P},[P]),c(P),P},cy}var RN;function Xae(){return RN||(RN=1,uy.exports=Yae()),uy.exports}Xae();function Jae(e){e()}function Zae(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Jae(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var ON={notify(){},get:()=>[]};function Qae(e,t){let n,r=ON,i=0,o=!1;function a(P){m();const N=r.subscribe(P);let D=!1;return()=>{D||(D=!0,N(),v())}}function c(){r.notify()}function f(){I.onStateChange&&I.onStateChange()}function d(){return o}function m(){i++,n||(n=e.subscribe(f),r=Zae())}function v(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=ON)}function E(){o||(o=!0,m())}function C(){o&&(o=!1,v())}const I={addNestedSub:a,notifyNestedSubs:c,handleChangeWrapper:f,isSubscribed:d,trySubscribe:E,tryUnsubscribe:C,getListeners:()=>r};return I}var ele=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tle=ele(),nle=()=>typeof navigator<"u"&&navigator.product==="ReactNative",rle=nle(),ile=()=>tle||rle?M.useLayoutEffect:M.useEffect,ole=ile();function kN(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function sle(e,t){if(kN(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!kN(e[n[i]],t[n[i]]))return!1;return!0}var ale=Symbol.for("react-redux-context"),lle=typeof globalThis<"u"?globalThis:{};function ule(){if(!M.createContext)return{};const e=lle[ale]??=new Map;let t=e.get(M.createContext);return t||(t=M.createContext(null),e.set(M.createContext,t)),t}var cle=ule();function dle(e){const{children:t,context:n,serverState:r,store:i}=e,o=M.useMemo(()=>{const f=Qae(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),a=M.useMemo(()=>i.getState(),[i]);ole(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),a!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,a]);const c=n||cle;return M.createElement(c.Provider,{value:o},t)}var fle=dle,hle=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function ple(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function zm(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(hle.has(r)){if(e[r]==null&&t[r]==null)continue;if(!sle(e[r],t[r]))return!1}else if(!ple(e[r],t[r]))return!1;return!0}function Ml(e,t){var n,r;return(n=(r=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:fD}function Dl(e,t){var n,r;return(n=(r=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:fD}var mle="Invariant failed";function gle(e,t){throw new Error(mle)}function zx(){return zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zx.apply(null,arguments)}function Np(e){return M.createElement(Tp,zx({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var vle=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Je(t))return t;var o=Je(r)||an(r);return o?t(r,i):(o||gle(),n)}},yle=(e,t,n)=>n,xle=(e,t)=>t,vf=de([Pm,xle],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),wle=de([vf],e=>e?.maxBarSize),Ele=(e,t,n,r)=>r,ble=de([Dt,Pm,Ml,Dl,yle],(e,t,n,r,i)=>t.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),_le=(e,t,n)=>{var r=Dt(e),i=Ml(e,t),o=Dl(e,t);if(!(i==null||o==null))return r==="horizontal"?Dx(e,"yAxis",o,n):Dx(e,"xAxis",i,n)},Sle=(e,t)=>{var n=Dt(e),r=Ml(e,t),i=Dl(e,t);if(!(r==null||i==null))return n==="horizontal"?yP(e,"xAxis",r):yP(e,"yAxis",i)},Cle=de([ble,bee,Sle],_se),Ale=(e,t,n)=>{var r,i,o=vf(e,t);if(o!=null){var a=Ml(e,t),c=Dl(e,t);if(!(a==null||c==null)){var f=Dt(e),d=k4(e),{maxBarSize:m}=o,v=an(m)?d:m,E,C;return f==="horizontal"?(E=ba(e,"xAxis",a,n),C=Ea(e,"xAxis",a,n)):(E=ba(e,"yAxis",c,n),C=Ea(e,"yAxis",c,n)),(r=(i=tp(E,C,!0))!==null&&i!==void 0?i:v)!==null&&r!==void 0?r:0}}},AD=(e,t,n)=>{var r=Dt(e),i=Ml(e,t),o=Dl(e,t);if(!(i==null||o==null)){var a,c;return r==="horizontal"?(a=ba(e,"xAxis",i,n),c=Ea(e,"xAxis",i,n)):(a=ba(e,"yAxis",o,n),c=Ea(e,"yAxis",o,n)),tp(a,c)}},Tle=de([Cle,k4,Eee,M4,Ale,AD,wle],Ise),Ile=(e,t,n)=>{var r=Ml(e,t);if(r!=null)return ba(e,"xAxis",r,n)},Ple=(e,t,n)=>{var r=Dl(e,t);if(r!=null)return ba(e,"yAxis",r,n)},Nle=(e,t,n)=>{var r=Ml(e,t);if(r!=null)return Ea(e,"xAxis",r,n)},Rle=(e,t,n)=>{var r=Dl(e,t);if(r!=null)return Ea(e,"yAxis",r,n)},Ole=de([Tle,vf],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),kle=de([_le,vf],Pse),Mle=de([ir,Ww,Ile,Ple,Nle,Rle,Ole,Dt,uee,AD,kle,vf,Ele],(e,t,n,r,i,o,a,c,f,d,m,v,E)=>{var{chartData:C,dataStartIndex:I,dataEndIndex:P}=f;if(!(v==null||a==null||t==null||c!=="horizontal"&&c!=="vertical"||n==null||r==null||i==null||o==null||d==null)){var{data:N}=v,D;if(N!=null&&N.length>0?D=N:D=C?.slice(I,P+1),D!=null)return uue({layout:c,barSettings:v,pos:a,parentViewBox:t,bandSize:d,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:m,displayedData:D,offset:e,cells:E,dataStartIndex:I})}}),Dle=["index"];function Gx(){return Gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gx.apply(null,arguments)}function Lle(e,t){if(e==null)return{};var n,r,i=Ble(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ble(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var TD=M.createContext(void 0),Fle=e=>{var t=M.useContext(TD);if(t!=null)return t.stackId;if(e!=null)return rY(e)},Ule=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),jle=e=>{var t=M.useContext(TD);if(t!=null){var{stackId:n}=t;return"url(#".concat(Ule(n,e),")")}},Vle=e=>{var{index:t}=e,n=Lle(e,Dle),r=jle(t);return M.createElement(jn,Gx({className:"recharts-bar-stack-layer",clipPath:r},n))},$le=["onMouseEnter","onMouseLeave","onClick"],zle=["value","background","tooltipPosition"],Gle=["id"],Hle=["onMouseEnter","onClick","onMouseLeave"];function Ts(){return Ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ts.apply(null,arguments)}function MN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MN(Object(n),!0).forEach(function(r){qle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qle(e,t,n){return(t=Wle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wle(e){var t=Kle(e,"string");return typeof t=="symbol"?t:t+""}function Kle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rp(e,t){if(e==null)return{};var n,r,i=Yle(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Yle(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Xle=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:r,value:tc(n,t),payload:e}]},Jle=M.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:o,hide:a,unit:c,tooltipType:f,id:d}=e,m={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:tc(o,t),hide:a,type:f,color:i,unit:c,graphicalItemId:d}};return M.createElement(pb,{tooltipEntrySettings:m})});function Zle(e){var t=Ge(_a),{data:n,dataKey:r,background:i,allOtherBarProps:o}=e,{onMouseEnter:a,onMouseLeave:c,onClick:f}=o,d=Rp(o,$le),m=Fm(a,r,o.id),v=Um(c),E=jm(f,r,o.id);if(!i||n==null)return null;var C=Fu(i);return M.createElement(hi,{zIndex:Nse(i,Kn.barBackground)},n.map((I,P)=>{var{value:N,background:D,tooltipPosition:F}=I,L=Rp(I,zle);if(!D)return null;var V=m(I,P),G=v(I,P),q=E(I,P),W=Kr(Kr(Kr(Kr(Kr({option:i,isActive:String(P)===t},L),{},{fill:"#eee"},D),C),ec(d,I,P)),{},{onMouseEnter:V,onMouseLeave:G,onClick:q,dataKey:r,index:P,className:"recharts-bar-background-rectangle"});return M.createElement(Np,Ts({key:"background-bar-".concat(P)},W))}))}function Qle(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(o=>{var a={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return Kr(Kr({},a),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:a,fill:o.fill})});return M.createElement(tD,{value:t?i:void 0},n)}function eue(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:o,dataKey:a}=e,c=Ge(_a),f=Ge(ib),d=n&&String(o)===c&&(f==null||a===f),m=d?n:t;return d?M.createElement(hi,{zIndex:Kn.activeBar},M.createElement(Np,Ts({},r,{name:String(r.name)},i,{isActive:d,option:m,index:o,dataKey:a}))):M.createElement(Np,Ts({},r,{name:String(r.name)},i,{isActive:d,option:m,index:o,dataKey:a}))}function tue(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:o}=e;return M.createElement(Np,Ts({},n,{name:String(n.name)},r,{isActive:!1,option:t,index:i,dataKey:o}))}function nue(e){var t,{data:n,props:r}=e,i=(t=Ri(r))!==null&&t!==void 0?t:{},{id:o}=i,a=Rp(i,Gle),{shape:c,dataKey:f,activeBar:d}=r,{onMouseEnter:m,onClick:v,onMouseLeave:E}=r,C=Rp(r,Hle),I=Fm(m,f,o),P=Um(E),N=jm(v,f,o);return n?M.createElement(M.Fragment,null,n.map((D,F)=>M.createElement(Vle,Ts({index:F,key:"rectangle-".concat(D?.x,"-").concat(D?.y,"-").concat(D?.value,"-").concat(F),className:"recharts-bar-rectangle"},ec(C,D,F),{onMouseEnter:I(D,F),onMouseLeave:P(D,F),onClick:N(D,F)}),d?M.createElement(eue,{shape:c,activeBar:d,baseProps:a,entry:D,index:F,dataKey:f}):M.createElement(tue,{shape:c,baseProps:a,entry:D,index:F,dataKey:f})))):null}function rue(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:o,animationBegin:a,animationDuration:c,animationEasing:f,onAnimationEnd:d,onAnimationStart:m}=t,v=n.current,E=nf(t,"recharts-bar-"),[C,I]=M.useState(!1),P=!C,N=M.useCallback(()=>{typeof d=="function"&&d(),I(!1)},[d]),D=M.useCallback(()=>{typeof m=="function"&&m(),I(!0)},[m]);return M.createElement(Qle,{showLabels:P,rects:r},M.createElement(tf,{animationId:E,begin:a,duration:c,isActive:o,easing:f,onAnimationEnd:N,onAnimationStart:D,key:E},F=>{var L=F===1?r:r?.map((V,G)=>{var q=v&&v[G];if(q)return Kr(Kr({},V),{},{x:_n(q.x,V.x,F),y:_n(q.y,V.y,F),width:_n(q.width,V.width,F),height:_n(q.height,V.height,F)});if(i==="horizontal"){var W=_n(0,V.height,F),Z=_n(V.stackedBarStart,V.y,F);return Kr(Kr({},V),{},{y:Z,height:W})}var X=_n(0,V.width,F),fe=_n(V.stackedBarStart,V.x,F);return Kr(Kr({},V),{},{width:X,x:fe})});return F>0&&(n.current=L??null),L==null?null:M.createElement(jn,null,M.createElement(nue,{props:t,data:L}))}),M.createElement(db,{label:t.label}),t.children)}function iue(e){var t=M.useRef(null);return M.createElement(rue,{previousRectanglesRef:t,props:e})}var ID=0,oue=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Vt(e,t)}};class sue extends M.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:a,needClip:c,background:f,id:d}=this.props;if(t||n==null)return null;var m=Ft("recharts-bar",i),v=d;return M.createElement(jn,{className:m,id:d},c&&M.createElement("defs",null,M.createElement(CD,{clipPathId:v,xAxisId:o,yAxisId:a})),M.createElement(jn,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(v,")"):void 0},M.createElement(Zle,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),M.createElement(iue,this.props)))}}var aue={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:ID,xAxisId:0,yAxisId:0,zIndex:Kn.bar};function lue(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:a,animationBegin:c,animationDuration:f,animationEasing:d,isAnimationActive:m}=e,{needClip:v}=yb(t,n),E=Qd(),C=Nr(),I=Bm(e.children,Al),P=Ge(F=>Mle(F,e.id,C,I));if(E!=="vertical"&&E!=="horizontal")return null;var N,D=P?.[0];return D==null||D.height==null||D.width==null?N=0:N=E==="vertical"?D.height/2:D.width/2,M.createElement(SD,{xAxisId:t,yAxisId:n,data:P,dataPointFormatter:oue,errorBarOffset:N},M.createElement(sue,Ts({},e,{layout:E,needClip:v,data:P,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:a,animationBegin:c,animationDuration:f,animationEasing:d,isAnimationActive:m})))}function uue(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:a,yAxis:c,xAxisTicks:f,yAxisTicks:d,stackedData:m,displayedData:v,offset:E,cells:C,parentViewBox:I,dataStartIndex:P}=e,N=t==="horizontal"?c:a,D=m?N.scale.domain():null,F=iY({numericAxis:N}),L=N.scale(F);return v.map((V,G)=>{var q,W,Z,X,fe,se;if(m){var ae=m[G+P];if(ae==null)return null;q=ZK(ae,D)}else q=Vt(V,n),Array.isArray(q)||(q=[F,q]);var be=vle(r,ID)(q[1],G);if(t==="horizontal"){var he,[ne,we]=[c.scale(q[0]),c.scale(q[1])];W=bT({axis:a,ticks:f,bandSize:o,offset:i.offset,entry:V,index:G}),Z=(he=we??ne)!==null&&he!==void 0?he:void 0,X=i.size;var ve=ne-we;if(fe=ki(ve)?0:ve,se={x:W,y:E.top,width:X,height:E.height},Math.abs(be)>0&&Math.abs(fe)<Math.abs(be)){var xe=vr(fe||be)*(Math.abs(be)-Math.abs(fe));Z-=xe,fe+=xe}}else{var[Se,Ce]=[a.scale(q[0]),a.scale(q[1])];if(W=Se,Z=bT({axis:c,ticks:d,bandSize:o,offset:i.offset,entry:V,index:G}),X=Ce-Se,fe=i.size,se={x:E.left,y:Z,width:E.width,height:fe},Math.abs(be)>0&&Math.abs(X)<Math.abs(be)){var te=vr(X||be)*(Math.abs(be)-Math.abs(X));X+=te}}if(W==null||Z==null||X==null||fe==null)return null;var pe=Kr(Kr({},V),{},{stackedBarStart:L,x:W,y:Z,width:X,height:fe,value:m?q:q[1],payload:V,background:se,tooltipPosition:{x:W+X/2,y:Z+fe/2},parentViewBox:I},C&&C[G]&&C[G].props);return pe}).filter(Boolean)}function cue(e){var t=Vn(e,aue),n=Fle(t.stackId),r=Nr();return M.createElement(mb,{id:t.id,type:"bar"},i=>M.createElement(M.Fragment,null,M.createElement(lD,{legendPayload:Xle(t)}),M.createElement(Jle,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),M.createElement(cD,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),M.createElement(hi,{zIndex:t.zIndex},M.createElement(lue,Ts({},t,{id:i})))))}var PD=M.memo(cue,zm);PD.displayName="Bar";var due=["option","isActive"];function wd(){return wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wd.apply(null,arguments)}function fue(e,t){if(e==null)return{};var n,r,i=hue(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function pue(e){var{option:t,isActive:n}=e,r=fue(e,due);return typeof t=="string"?M.createElement(Tp,wd({option:M.createElement(Xp,wd({type:t},r)),isActive:n,shapeType:"symbols"},r)):M.createElement(Tp,wd({option:t,isActive:n,shapeType:"symbols"},r))}var mue=(e,t,n,r,i,o,a)=>ba(e,"xAxis",t,a),gue=(e,t,n,r,i,o,a)=>Ea(e,"xAxis",t,a),vue=(e,t,n,r,i,o,a)=>ba(e,"yAxis",n,a),yue=(e,t,n,r,i,o,a)=>Ea(e,"yAxis",n,a),xue=(e,t,n,r)=>Ste(e,"zAxis",r,!1),wue=(e,t,n,r,i)=>i,Eue=(e,t,n,r,i,o)=>o,bue=(e,t,n,r,i,o,a)=>bE(e,void 0,void 0,a),_ue=de([Pm,wue],(e,t)=>e.filter(n=>n.type==="scatter").find(n=>n.id===t)),Sue=de([bue,mue,gue,vue,yue,xue,_ue,Eue],(e,t,n,r,i,o,a,c)=>{var{chartData:f,dataStartIndex:d,dataEndIndex:m}=e;if(a!=null){var v;if(a?.data!=null&&a.data.length>0?v=a.data:v=f?.slice(d,m+1),!(v==null||t==null||r==null||n==null||i==null||n?.length===0||i?.length===0))return Fue({displayedData:v,xAxis:t,yAxis:r,zAxis:o,scatterSettings:a,xAxisTicks:n,yAxisTicks:i,cells:c})}}),Cue=["id"],Aue=["onMouseEnter","onClick","onMouseLeave"],Tue=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function Hx(e,t){if(e==null)return{};var n,r,i=Iue(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Iue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Il(){return Il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Il.apply(null,arguments)}function DN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function di(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DN(Object(n),!0).forEach(function(r){Pue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pue(e,t,n){return(t=Nue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nue(e){var t=Rue(e,"string");return typeof t=="symbol"?t:t+""}function Rue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oue=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:r,value:tc(n,t),payload:e}]},kue=M.memo(e=>{var{dataKey:t,points:n,stroke:r,strokeWidth:i,fill:o,name:a,hide:c,tooltipType:f,id:d}=e,m={dataDefinedOnItem:n?.map(v=>v.tooltipPayload),positions:n?.map(v=>v.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:o,nameKey:void 0,dataKey:t,name:tc(a,t),hide:c,type:f,color:o,unit:"",graphicalItemId:d}};return M.createElement(pb,{tooltipEntrySettings:m})});function Mue(e){var{points:t,props:n}=e,{line:r,lineType:i,lineJointType:o}=n;if(!r)return null;var a=Ri(n),c=Fu(r),f,d;if(i==="joint")f=t.map(N=>{var D,F;return{x:(D=N.cx)!==null&&D!==void 0?D:null,y:(F=N.cy)!==null&&F!==void 0?F:null}});else if(i==="fitting"){var{xmin:m,xmax:v,a:E,b:C}=Aq(t),I=N=>E*N+C;f=[{x:m,y:I(m)},{x:v,y:I(v)}]}var P=di(di(di({},a),{},{fill:"none",stroke:a&&a.fill},c),{},{points:f});return M.isValidElement(r)?d=M.cloneElement(r,P):typeof r=="function"?d=r(P):d=M.createElement(mm,Il({},P,{type:o})),M.createElement(jn,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}function Due(e){var{showLabels:t,points:n,children:r}=e,i=nc(),o=M.useMemo(()=>n?.map(a=>{var c,f,d={x:(c=a.x)!==null&&c!==void 0?c:0,y:(f=a.y)!==null&&f!==void 0?f:0,width:a.width,height:a.height,lowerWidth:a.width,upperWidth:a.width};return di(di({},d),{},{value:void 0,payload:a.payload,viewBox:d,parentViewBox:i,fill:void 0})}),[i,n]);return M.createElement(tD,{value:t?o:void 0},r)}function Lue(e){var{points:t,allOtherScatterProps:n}=e,{shape:r,activeShape:i,dataKey:o}=n,{id:a}=n,c=Hx(n,Cue),f=Ge(_a),{onMouseEnter:d,onClick:m,onMouseLeave:v}=n,E=Hx(n,Aue),C=Fm(d,o,a),I=Um(v),P=jm(m,o,a);if(!jq(t))return null;var N=Ri(c);return M.createElement(M.Fragment,null,M.createElement(Mue,{points:t,props:c}),t.map((D,F)=>{var L=i!=null&&i!==!1,V=L&&f===String(F),G=L&&V?i:r,q=di(di(di({},N),D),{},{[Hw]:F,[qw]:String(a)});return M.createElement(hi,{key:"symbol-".concat(D?.cx,"-").concat(D?.cy,"-").concat(D?.size,"-").concat(F),zIndex:V?Kn.activeDot:void 0},M.createElement(jn,Il({className:"recharts-scatter-symbol"},ec(E,D,F),{onMouseEnter:C(D,F),onMouseLeave:I(D,F),onClick:P(D,F)}),M.createElement(pue,Il({option:G,isActive:V},q))))}))}function Bue(e){var{previousPointsRef:t,props:n}=e,{points:r,isAnimationActive:i,animationBegin:o,animationDuration:a,animationEasing:c}=n,f=t.current,d=nf(n,"recharts-scatter-"),[m,v]=M.useState(!1),E=M.useCallback(()=>{v(!1)},[]),C=M.useCallback(()=>{v(!0)},[]),I=!m;return M.createElement(Due,{showLabels:I,points:r},n.children,M.createElement(tf,{animationId:d,begin:o,duration:a,isActive:i,easing:c,onAnimationEnd:E,onAnimationStart:C,key:d},P=>{var N=P===1?r:r?.map((D,F)=>{var L=f&&f[F];return L?di(di({},D),{},{cx:D.cx==null?void 0:_n(L.cx,D.cx,P),cy:D.cy==null?void 0:_n(L.cy,D.cy,P),size:_n(L.size,D.size,P)}):di(di({},D),{},{size:_n(0,D.size,P)})});return P>0&&(t.current=N),M.createElement(jn,null,M.createElement(Lue,{points:N,allOtherScatterProps:n,showLabels:I}))}),M.createElement(db,{label:n.label}))}function Fue(e){var{displayedData:t,xAxis:n,yAxis:r,zAxis:i,scatterSettings:o,xAxisTicks:a,yAxisTicks:c,cells:f}=e,d=an(n.dataKey)?o.dataKey:n.dataKey,m=an(r.dataKey)?o.dataKey:r.dataKey,v=i&&i.dataKey,E=i?i.range:H4.range,C=E&&E[0],I=n.scale.bandwidth?n.scale.bandwidth():0,P=r.scale.bandwidth?r.scale.bandwidth():0;return t.map((N,D)=>{var F=Vt(N,d),L=Vt(N,m),V=!an(v)&&Vt(N,v)||"-",G=[{name:an(n.dataKey)?o.name:n.name||String(n.dataKey),unit:n.unit||"",value:F,payload:N,dataKey:d,type:o.tooltipType},{name:an(r.dataKey)?o.name:r.name||String(r.dataKey),unit:r.unit||"",value:L,payload:N,dataKey:m,type:o.tooltipType}];V!=="-"&&G.push({name:i.name||i.dataKey,unit:i.unit||"",value:V,payload:N,dataKey:v,type:o.tooltipType});var q=ET({axis:n,ticks:a,bandSize:I,entry:N,index:D,dataKey:d}),W=ET({axis:r,ticks:c,bandSize:P,entry:N,index:D,dataKey:m}),Z=V!=="-"?i.scale(V):C,X=Math.sqrt(Math.max(Z,0)/Math.PI);return di(di({},N),{},{cx:q,cy:W,x:q==null?void 0:q-X,y:W==null?void 0:W-X,width:2*X,height:2*X,size:Z,node:{x:F,y:L,z:V},tooltipPayload:G,tooltipPosition:{x:q,y:W},payload:N},f&&f[D]&&f[D].props)})}var Uue=(e,t,n)=>({x:e.cx,y:e.cy,value:Number(n==="x"?e.node.x:e.node.y),errorVal:Vt(e,t)});function jue(e){var{hide:t,points:n,className:r,needClip:i,xAxisId:o,yAxisId:a,id:c}=e,f=M.useRef(null);if(t)return null;var d=Ft("recharts-scatter",r),m=c;return M.createElement(hi,{zIndex:e.zIndex},M.createElement(jn,{className:d,clipPath:i?"url(#clipPath-".concat(m,")"):void 0,id:c},i&&M.createElement("defs",null,M.createElement(CD,{clipPathId:m,xAxisId:o,yAxisId:a})),M.createElement(SD,{xAxisId:o,yAxisId:a,data:n,dataPointFormatter:Uue,errorBarOffset:0},M.createElement(jn,{key:"recharts-scatter-symbols"},M.createElement(Bue,{props:e,previousPointsRef:f})))))}var ND={xAxisId:0,yAxisId:0,zAxisId:0,label:!1,line:!1,legendType:"circle",lineType:"joint",lineJointType:"linear",shape:"circle",hide:!1,isAnimationActive:"auto",animationBegin:0,animationDuration:400,animationEasing:"linear",zIndex:Kn.scatter};function Vue(e){var t=Vn(e,ND),{animationBegin:n,animationDuration:r,animationEasing:i,hide:o,isAnimationActive:a,legendType:c,lineJointType:f,lineType:d,shape:m,xAxisId:v,yAxisId:E,zAxisId:C}=t,I=Hx(t,Tue),{needClip:P}=yb(v,E),N=M.useMemo(()=>Bm(e.children,Al),[e.children]),D=Nr(),F=Ge(L=>Sue(L,v,E,C,e.id,N,D));return P==null||F==null?null:M.createElement(M.Fragment,null,M.createElement(kue,{dataKey:e.dataKey,points:F,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:e.id}),M.createElement(jue,Il({},I,{xAxisId:v,yAxisId:E,zAxisId:C,lineType:d,lineJointType:f,legendType:c,shape:m,hide:o,isAnimationActive:a,animationBegin:n,animationDuration:r,animationEasing:i,points:F,needClip:P})))}function $ue(e){var t=Vn(e,ND),n=Nr();return M.createElement(mb,{id:t.id,type:"scatter"},r=>M.createElement(M.Fragment,null,M.createElement(lD,{legendPayload:Oue(t)}),M.createElement(cD,{type:"scatter",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:t.zAxisId,dataKey:t.dataKey,hide:t.hide,name:t.name,tooltipType:t.tooltipType,isPanorama:n}),M.createElement(Vue,Il({},t,{id:r}))))}var RD=M.memo($ue,zm);RD.displayName="Scatter";var zue=["domain","range"],Gue=["domain","range"];function LN(e,t){if(e==null)return{};var n,r,i=Hue(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Hue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function BN(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function OD(e,t){if(e===t)return!0;var{domain:n,range:r}=e,i=LN(e,zue),{domain:o,range:a}=t,c=LN(t,Gue);return!BN(n,o)||!BN(r,a)?!1:zm(i,c)}var que=["dangerouslySetInnerHTML","ticks","scale"],Wue=["id","scale"];function qx(){return qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qx.apply(null,arguments)}function FN(e,t){if(e==null)return{};var n,r,i=Kue(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Kue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Yue(e){var t=Zt(),n=M.useRef(null);return M.useLayoutEffect(()=>{n.current===null?t(hse(e)):n.current!==e&&t(pse({prev:n.current,next:e})),n.current=e},[e,t]),M.useLayoutEffect(()=>()=>{n.current&&(t(mse(n.current)),n.current=null)},[t]),null}var Xue=e=>{var{xAxisId:t,className:n}=e,r=Ge(Ww),i=Nr(),o="xAxis",a=Ge(D=>h8(D,o,t,i)),c=Ge(D=>u8(D,t)),f=Ge(D=>yte(D,t)),d=Ge(D=>z4(D,t));if(c==null||f==null||d==null)return null;var{dangerouslySetInnerHTML:m,ticks:v,scale:E}=e,C=FN(e,que),{id:I,scale:P}=d,N=FN(d,Wue);return M.createElement(vb,qx({},C,N,{x:f.x,y:f.y,width:c.width,height:c.height,className:Ft("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:a,axisType:o}))},Jue={allowDataOverflow:pr.allowDataOverflow,allowDecimals:pr.allowDecimals,allowDuplicatedCategory:pr.allowDuplicatedCategory,angle:pr.angle,axisLine:ys.axisLine,height:pr.height,hide:!1,includeHidden:pr.includeHidden,interval:pr.interval,minTickGap:pr.minTickGap,mirror:pr.mirror,orientation:pr.orientation,padding:pr.padding,reversed:pr.reversed,scale:pr.scale,tick:pr.tick,tickCount:pr.tickCount,tickLine:ys.tickLine,tickSize:ys.tickSize,type:pr.type,xAxisId:0},Zue=e=>{var t=Vn(e,Jue);return M.createElement(M.Fragment,null,M.createElement(Yue,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),M.createElement(Xue,t))},Wx=M.memo(Zue,OD);Wx.displayName="XAxis";var Que=["dangerouslySetInnerHTML","ticks","scale"],ece=["id","scale"];function Kx(){return Kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kx.apply(null,arguments)}function UN(e,t){if(e==null)return{};var n,r,i=tce(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function nce(e){var t=Zt(),n=M.useRef(null);return M.useLayoutEffect(()=>{n.current===null?t(gse(e)):n.current!==e&&t(vse({prev:n.current,next:e})),n.current=e},[e,t]),M.useLayoutEffect(()=>()=>{n.current&&(t(yse(n.current)),n.current=null)},[t]),null}var rce=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,o=M.useRef(null),a=M.useRef(null),c=Ge(Ww),f=Nr(),d=Zt(),m="yAxis",v=Ge(q=>c8(q,t)),E=Ge(q=>wte(q,t)),C=Ge(q=>h8(q,m,t,f)),I=Ge(q=>G4(q,t));if(M.useLayoutEffect(()=>{if(!(r!=="auto"||!v||cb(i)||M.isValidElement(i)||I==null)){var q=o.current;if(q){var W=q.getCalculatedWidth();Math.round(v.width)!==Math.round(W)&&d(xse({id:t,width:W}))}}},[C,v,d,i,t,r,I]),v==null||E==null||I==null)return null;var{dangerouslySetInnerHTML:P,ticks:N,scale:D}=e,F=UN(e,Que),{id:L,scale:V}=I,G=UN(I,ece);return M.createElement(vb,Kx({},F,G,{ref:o,labelRef:a,x:E.x,y:E.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:v.width,height:v.height,className:Ft("recharts-".concat(m," ").concat(m),n),viewBox:c,ticks:C,axisType:m}))},ice={allowDataOverflow:mr.allowDataOverflow,allowDecimals:mr.allowDecimals,allowDuplicatedCategory:mr.allowDuplicatedCategory,angle:mr.angle,axisLine:ys.axisLine,hide:!1,includeHidden:mr.includeHidden,interval:mr.interval,minTickGap:mr.minTickGap,mirror:mr.mirror,orientation:mr.orientation,padding:mr.padding,reversed:mr.reversed,scale:mr.scale,tick:mr.tick,tickCount:mr.tickCount,tickLine:ys.tickLine,tickSize:ys.tickSize,type:mr.type,width:mr.width,yAxisId:0},oce=e=>{var t=Vn(e,ice);return M.createElement(M.Fragment,null,M.createElement(nce,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),M.createElement(rce,t))},Yx=M.memo(oce,OD);Yx.displayName="YAxis";var sce=(e,t)=>t,xb=de([sce,Dt,V4,sr,P8,Ls,Lne,ir],zne),wb=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},kD=to("mouseClick"),MD=Jd();MD.startListening({actionCreator:kD,effect:(e,t)=>{var n=e.payload,r=xb(t.getState(),wb(n));r?.activeIndex!=null&&t.dispatch(Dte({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Xx=to("mouseMove"),DD=Jd(),i0=null;DD.startListening({actionCreator:Xx,effect:(e,t)=>{var n=e.payload;i0!==null&&cancelAnimationFrame(i0);var r=wb(n);i0=requestAnimationFrame(()=>{var i=t.getState(),o=ZE(i,i.tooltip.settings.shared);if(o==="axis"){var a=xb(i,r);a?.activeIndex!=null?t.dispatch(E8({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(w8())}i0=null})}});function ace(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var jN={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},LD=fi({name:"rootProps",initialState:jN,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:jN.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),lce=LD.reducer,{updateOptions:uce}=LD.actions,BD=fi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:cce}=BD.actions,dce=BD.reducer,FD=to("keyDown"),UD=to("focus"),Eb=Jd();Eb.startListening({actionCreator:FD,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var a=QE(i,dc(n),ff(n),mf(n)),c=a==null?-1:Number(a);if(!(!Number.isFinite(c)||c<0)){var f=Ls(n);if(o==="Enter"){var d=_p(n,"axis","hover",String(i.index));t.dispatch(Bx({active:!i.active,activeIndex:i.index,activeCoordinate:d}));return}var m=Cte(n),v=m==="left-to-right"?1:-1,E=o==="ArrowRight"?1:-1,C=c+E*v;if(!(f==null||C>=f.length||C<0)){var I=_p(n,"axis","hover",String(C));t.dispatch(Bx({active:!0,activeIndex:C.toString(),activeCoordinate:I}))}}}}}});Eb.startListening({actionCreator:UD,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",a=_p(n,"axis","hover",String(o));t.dispatch(Bx({active:!0,activeIndex:o,activeCoordinate:a}))}}}});var Yi=to("externalEvent"),jD=Jd(),dy=new Map;jD.startListening({actionCreator:Yi,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(n!=null){r.persist();var i=r.type,o=dy.get(i);o!==void 0&&cancelAnimationFrame(o);var a=requestAnimationFrame(()=>{try{var c=t.getState(),f={activeCoordinate:Ene(c),activeDataKey:ib(c),activeIndex:_a(c),activeLabel:O8(c),activeTooltipIndex:_a(c),isTooltipActive:bne(c)};n(f,r)}finally{dy.delete(i)}});dy.set(i,a)}}});var fce=de([uc],e=>e.tooltipItemPayloads),hce=de([fce,pf,(e,t)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(c=>c.settings.graphicalItemId===r);if(i!=null){var{positions:o}=i;if(o!=null){var a=t(o,n);return a}}}),VD=to("touchMove"),$D=Jd();$D.startListening({actionCreator:VD,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var r=t.getState(),i=ZE(r,r.tooltip.settings.shared);if(i==="axis"){var o=n.touches[0];if(o==null)return;var a=xb(r,wb({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));a?.activeIndex!=null&&t.dispatch(E8({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var c,f=n.touches[0];if(document.elementFromPoint==null||f==null)return;var d=document.elementFromPoint(f.clientX,f.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(Hw),v=(c=d.getAttribute(qw))!==null&&c!==void 0?c:void 0,E=cc(r).find(P=>P.id===v);if(m==null||E==null||v==null)return;var{dataKey:C}=E,I=hce(r,m,v);t.dispatch(x8({activeDataKey:C,activeIndex:m,activeCoordinate:I,activeGraphicalItemId:v}))}}}});var pce=Mk({brush:Rse,cartesianAxis:wse,chartData:wre,errorBars:zae,graphicalItems:Doe,layout:qK,legend:eX,options:mre,polarAxis:Yie,polarOptions:dce,referenceElements:$se,rootProps:lce,tooltip:Lte,zIndex:rre}),mce=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return vK({reducer:pce,preloadedState:t,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([MD.middleware,DD.middleware,Eb.middleware,jD.middleware,$D.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(Yk({type:"raf"}))},devTools:{serialize:{replacer:ace},name:"recharts-".concat(n)}})};function zD(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Nr(),o=M.useRef(null);if(i)return n;o.current==null&&(o.current=mce(t,r));var a=Fw;return M.createElement(fle,{context:a,store:o.current},n)}function gce(e){var{layout:t,margin:n}=e,r=Zt(),i=Nr();return M.useEffect(()=>{i||(r(zK(t)),r($K(n)))},[r,i,t,n]),null}var GD=M.memo(gce,zm);function HD(e){var t=Zt();return M.useEffect(()=>{t(uce(e))},[t,e]),null}function VN(e){var{zIndex:t,isPanorama:n}=e,r=M.useRef(null),i=Zt();return M.useLayoutEffect(()=>(r.current&&i(tre({zIndex:t,element:r.current,isPanorama:n})),()=>{i(nre({zIndex:t,isPanorama:n}))}),[i,t,n]),M.createElement("g",{tabIndex:-1,ref:r})}function $N(e){var{children:t,isPanorama:n}=e,r=Ge(Hne);if(!r||r.length===0)return t;var i=r.filter(a=>a<0),o=r.filter(a=>a>0);return M.createElement(M.Fragment,null,i.map(a=>M.createElement(VN,{key:a,zIndex:a,isPanorama:n})),t,o.map(a=>M.createElement(VN,{key:a,zIndex:a,isPanorama:n})))}var vce=["children"];function yce(e,t){if(e==null)return{};var n,r,i=xce(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Op(){return Op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Op.apply(null,arguments)}var wce={width:"100%",height:"100%",display:"block"},Ece=M.forwardRef((e,t)=>{var n=Yw(),r=Xw(),i=IM();if(!zo(n)||!zo(r))return null;var{children:o,otherAttributes:a,title:c,desc:f}=e,d,m;return a!=null&&(typeof a.tabIndex=="number"?d=a.tabIndex:d=i?0:void 0,typeof a.role=="string"?m=a.role:m=i?"application":void 0),M.createElement(Nw,Op({},a,{title:c,desc:f,role:m,tabIndex:d,width:n,height:r,style:wce,ref:t}),o)}),bce=e=>{var{children:t}=e,n=Ge(cm);if(!n)return null;var{width:r,height:i,y:o,x:a}=n;return M.createElement(Nw,{width:r,height:i,x:a,y:o},t)},zN=M.forwardRef((e,t)=>{var{children:n}=e,r=yce(e,vce),i=Nr();return i?M.createElement(bce,null,M.createElement($N,{isPanorama:!0},n)):M.createElement(Ece,Op({ref:t},r),M.createElement($N,{isPanorama:!1},n))});function _ce(){var e=Zt(),[t,n]=M.useState(null),r=Ge(cY);return M.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),o=i.width/t.offsetWidth;Xt(o)&&o!==r&&e(HK(o))}},[t,e,r]),n}function GN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GN(Object(n),!0).forEach(function(r){Cce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cce(e,t,n){return(t=Ace(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ace(e){var t=Tce(e,"string");return typeof t=="symbol"?t:t+""}function Tce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pl(){return Pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pl.apply(null,arguments)}var Ice=()=>(Pre(),null);function kp(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Pce=M.forwardRef((e,t)=>{var n,r,i=M.useRef(null),[o,a]=M.useState({containerWidth:kp((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:kp((r=e.style)===null||r===void 0?void 0:r.height)}),c=M.useCallback((d,m)=>{a(v=>{var E=Math.round(d),C=Math.round(m);return v.containerWidth===E&&v.containerHeight===C?v:{containerWidth:E,containerHeight:C}})},[]),f=M.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:m,height:v}=d.getBoundingClientRect();c(m,v);var E=I=>{var{width:P,height:N}=I[0].contentRect;c(P,N)},C=new ResizeObserver(E);C.observe(d),i.current=C}},[t,c]);return M.useEffect(()=>()=>{var d=i.current;d?.disconnect()},[c]),M.createElement(M.Fragment,null,M.createElement(dm,{width:o.containerWidth,height:o.containerHeight}),M.createElement("div",Pl({ref:f},e)))}),Nce=M.forwardRef((e,t)=>{var{width:n,height:r}=e,[i,o]=M.useState({containerWidth:kp(n),containerHeight:kp(r)}),a=M.useCallback((f,d)=>{o(m=>{var v=Math.round(f),E=Math.round(d);return m.containerWidth===v&&m.containerHeight===E?m:{containerWidth:v,containerHeight:E}})},[]),c=M.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null){var{width:d,height:m}=f.getBoundingClientRect();a(d,m)}},[t,a]);return M.createElement(M.Fragment,null,M.createElement(dm,{width:i.containerWidth,height:i.containerHeight}),M.createElement("div",Pl({ref:c},e)))}),Rce=M.forwardRef((e,t)=>{var{width:n,height:r}=e;return M.createElement(M.Fragment,null,M.createElement(dm,{width:n,height:r}),M.createElement("div",Pl({ref:t},e)))}),Oce=M.forwardRef((e,t)=>{var{width:n,height:r}=e;return Es(n)||Es(r)?M.createElement(Nce,Pl({},e,{ref:t})):M.createElement(Rce,Pl({},e,{ref:t}))});function kce(e){return e===!0?Pce:Oce}var Mce=M.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:a,onDoubleClick:c,onMouseDown:f,onMouseEnter:d,onMouseLeave:m,onMouseMove:v,onMouseUp:E,onTouchEnd:C,onTouchMove:I,onTouchStart:P,style:N,width:D,responsive:F,dispatchTouchEvents:L=!0}=e,V=M.useRef(null),G=Zt(),[q,W]=M.useState(null),[Z,X]=M.useState(null),fe=_ce(),se=Kw(),ae=se?.width>0?se.width:D,be=se?.height>0?se.height:i,he=M.useCallback(Ee=>{fe(Ee),typeof t=="function"&&t(Ee),W(Ee),X(Ee),Ee!=null&&(V.current=Ee)},[fe,t,W,X]),ne=M.useCallback(Ee=>{G(kD(Ee)),G(Yi({handler:o,reactEvent:Ee}))},[G,o]),we=M.useCallback(Ee=>{G(Xx(Ee)),G(Yi({handler:d,reactEvent:Ee}))},[G,d]),ve=M.useCallback(Ee=>{G(w8()),G(Yi({handler:m,reactEvent:Ee}))},[G,m]),xe=M.useCallback(Ee=>{G(Xx(Ee)),G(Yi({handler:v,reactEvent:Ee}))},[G,v]),Se=M.useCallback(()=>{G(UD())},[G]),Ce=M.useCallback(Ee=>{G(FD(Ee.key))},[G]),te=M.useCallback(Ee=>{G(Yi({handler:a,reactEvent:Ee}))},[G,a]),pe=M.useCallback(Ee=>{G(Yi({handler:c,reactEvent:Ee}))},[G,c]),Fe=M.useCallback(Ee=>{G(Yi({handler:f,reactEvent:Ee}))},[G,f]),Le=M.useCallback(Ee=>{G(Yi({handler:E,reactEvent:Ee}))},[G,E]),lt=M.useCallback(Ee=>{G(Yi({handler:P,reactEvent:Ee}))},[G,P]),Ne=M.useCallback(Ee=>{L&&G(VD(Ee)),G(Yi({handler:I,reactEvent:Ee}))},[G,L,I]),ct=M.useCallback(Ee=>{G(Yi({handler:C,reactEvent:Ee}))},[G,C]),rt=kce(F);return M.createElement(U8.Provider,{value:q},M.createElement(X3.Provider,{value:Z},M.createElement(rt,{width:ae??N?.width,height:be??N?.height,className:Ft("recharts-wrapper",r),style:Sce({position:"relative",cursor:"default",width:ae,height:be},N),onClick:ne,onContextMenu:te,onDoubleClick:pe,onFocus:Se,onKeyDown:Ce,onMouseDown:Fe,onMouseEnter:we,onMouseLeave:ve,onMouseMove:xe,onMouseUp:Le,onTouchEnd:ct,onTouchMove:Ne,onTouchStart:lt,ref:he},M.createElement(Ice,null),n)))}),Dce=["width","height","responsive","children","className","style","compact","title","desc"];function Lce(e,t){if(e==null)return{};var n,r,i=Bce(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Bce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var qD=M.forwardRef((e,t)=>{var{width:n,height:r,responsive:i,children:o,className:a,style:c,compact:f,title:d,desc:m}=e,v=Lce(e,Dce),E=Ri(v);return f?M.createElement(M.Fragment,null,M.createElement(dm,{width:n,height:r}),M.createElement(zN,{otherAttributes:E,title:d,desc:m},o)):M.createElement(Mce,{className:a,style:c,width:n,height:r,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},M.createElement(zN,{otherAttributes:E,title:d,desc:m,ref:t},M.createElement(zse,null,o)))});function Jx(){return Jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jx.apply(null,arguments)}var Fce={top:5,right:5,bottom:5,left:5},Uce={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Fce,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},WD=M.forwardRef(function(t,n){var r,i=Vn(t.categoricalChartProps,Uce),{chartName:o,defaultTooltipEventType:a,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,categoricalChartProps:d}=t,m={chartName:o,defaultTooltipEventType:a,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,eventEmitter:void 0};return M.createElement(zD,{preloadedState:{options:m},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:o},M.createElement(mD,{chartData:d.data}),M.createElement(GD,{layout:i.layout,margin:i.margin}),M.createElement(HD,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),M.createElement(qD,Jx({},i,{ref:n})))}),jce=["axis","item"],Vce=M.forwardRef((e,t)=>M.createElement(WD,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:jce,tooltipPayloadSearcher:ub,categoricalChartProps:e,ref:t}));function $ce(e){var t=Zt();return M.useEffect(()=>{t(cce(e))},[t,e]),null}var zce=["layout"];function Zx(){return Zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zx.apply(null,arguments)}function Gce(e,t){if(e==null)return{};var n,r,i=Hce(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Hce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var qce={top:5,right:5,bottom:5,left:5},KD={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:qce,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Wce=M.forwardRef(function(t,n){var r,i=Vn(t.categoricalChartProps,KD),{layout:o}=i,a=Gce(i,zce),{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:m}=t,v={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,eventEmitter:void 0};return M.createElement(zD,{preloadedState:{options:v},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:c},M.createElement(mD,{chartData:i.data}),M.createElement(GD,{layout:o,margin:i.margin}),M.createElement(HD,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),M.createElement($ce,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),M.createElement(qD,Zx({},a,{ref:n})))});function HN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HN(Object(n),!0).forEach(function(r){Kce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kce(e,t,n){return(t=Yce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yce(e){var t=Xce(e,"string");return typeof t=="symbol"?t:t+""}function Xce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jce=["item"],Zce=qN(qN({},KD),{},{layout:"centric",startAngle:0,endAngle:360}),Qce=M.forwardRef((e,t)=>{var n=Vn(e,Zce);return M.createElement(Wce,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Jce,tooltipPayloadSearcher:ub,categoricalChartProps:n,ref:t})}),ede=["item"],tde=M.forwardRef((e,t)=>M.createElement(WD,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:ede,tooltipPayloadSearcher:ub,categoricalChartProps:e,ref:t}));const WN=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"],nde=({perfume:e})=>{const[t,n]=M.useState(null),[r,i]=M.useState(!1);M.useEffect(()=>{o()},[]);const o=async()=>{const{data:c}=await Ht.from("inventory").select("quantity").eq("product_id",e.id).single();n(c?c.quantity:0)},a=async c=>{if(c<0)return;i(!0);const{error:f}=await Ht.from("inventory").upsert({product_id:e.id,quantity:c,updated_at:new Date().toISOString()});f?alert("Error: "+f.message):n(c),i(!1)};return R.jsxs("tr",{className:"border-b border-stone-100",children:[R.jsx("td",{className:"px-4 py-2",children:e.name}),R.jsx("td",{className:"px-4 py-2 text-center",children:R.jsx("span",{className:`font-bold ${t!==null&&t>2?"text-green-600":"text-red-500"}`,children:t!==null?t:"..."})}),R.jsxs("td",{className:"px-4 py-2 text-right flex justify-end gap-1",children:[R.jsx("button",{onClick:()=>a((t||0)+1),disabled:r,className:"bg-stone-200 text-stone-800 px-2 py-1 rounded text-xs font-bold hover:bg-stone-300",children:"+"}),R.jsx("button",{onClick:()=>a((t||0)-1),disabled:r||(t||0)<=0,className:"bg-stone-200 text-stone-800 px-2 py-1 rounded text-xs font-bold hover:bg-stone-300",children:"-"})]})]})},rde=({onLogout:e})=>{const[t,n]=M.useState([]),[r,i]=M.useState(!0),[o,a]=M.useState("month"),[c,f]=M.useState(0),[d,m]=M.useState(0),[v,E]=M.useState([]),[C,I]=M.useState([]),[P,N]=M.useState([]),[D,F]=M.useState([]),[L,V]=M.useState("dashboard"),[G,q]=M.useState([]),[W,Z]=M.useState(null);M.useEffect(()=>{L==="dashboard"?X():L==="clients"&&fe()},[L,o]);const X=async()=>{i(!0);try{const he=new Date;o==="week"?he.setDate(he.getDate()-7):he.setDate(he.getDate()-30);const{data:ne,error:we}=await Ht.from("transactions").select("*").gte("created_at",he.toISOString());if(we)throw we;const ve=ne||[],xe=new Date(he);o==="week"?xe.setDate(xe.getDate()-7):xe.setDate(xe.getDate()-30);const{data:Se}=await Ht.from("transactions").select("*").gte("created_at",xe.toISOString()).lt("created_at",he.toISOString()),Ce=Se||[];n(ve);const te=ve.reduce((Me,_e)=>Me+_e.amount,0);f(te),m(ve.length?Math.round(te/ve.length):0);const pe=new Map;ve.forEach(Me=>{const _e=Me.type==="product"?"Productos":"Servicios";pe.set(_e,(pe.get(_e)||0)+Me.amount)}),I(Array.from(pe).map(([Me,_e])=>({name:Me,value:_e})));const Fe=new Map,Le=(Me,_e)=>{if(_e==="product"){const Ke=ya.find(dt=>dt.price5ml===Me||dt.price10ml===Me||dt.priceFullBottle===Me);return Ke?Ke.name:"Producto Genrico"}else{const Ke=bu.find(dt=>dt.price===Me);return Ke?Ke.name:"Servicio General"}};ve.forEach(Me=>{const _e=Le(Me.amount,Me.type);Fe.has(_e)||Fe.set(_e,{current:0,previous:0}),Fe.get(_e).current++}),Ce.forEach(Me=>{const _e=Le(Me.amount,Me.type);Fe.has(_e)||Fe.set(_e,{current:0,previous:0}),Fe.get(_e).previous++});const lt=Array.from(Fe.entries()).map(([Me,_e])=>({name:Me,count:_e.current})).sort((Me,_e)=>_e.count-Me.count).slice(0,5);N(lt);const Ne=ve.length||1,ct=ve.length/Fe.size/Ne,rt=[];Fe.forEach((Me,_e)=>{if(Me.current===0)return;const Ke=Me.current/Ne,dt=Me.previous===0?1:(Me.current-Me.previous)/Me.previous;let It="question";Ke>=ct&&dt>=0?It="star":Ke>=ct&&dt<0?It="cow":Ke<ct&&dt>=0?It="question":It="dog",rt.push({name:_e,volume:Ke,growth:dt,type:It})}),F(rt);const Ee=new Map;ve.forEach(Me=>{if(!Me.client_id)return;const _e=Ee.get(Me.client_id)||{id:Me.client_id,phone:"Cargando...",total_spent:0,visit_count:0};_e.total_spent+=Me.amount,_e.visit_count+=1,Ee.set(Me.client_id,_e)});const et=Array.from(Ee.keys());if(et.length>0){const{data:Me}=await Ht.from("clients").select("id, phone").in("id",et);Me?.forEach(_e=>{const Ke=Ee.get(_e.id);Ke&&(Ke.phone=_e.phone)})}E(Array.from(Ee.values()).sort((Me,_e)=>_e.total_spent-Me.total_spent).slice(0,10))}catch(he){console.error("Error fetching dashboard data:",he)}finally{i(!1)}},fe=async()=>{i(!0);const{data:he,error:ne}=await Ht.from("clients").select("*").order("last_visit",{ascending:!1});ne?console.error("Error fetching clients",ne):q(he||[]),i(!1)},se=async he=>{if(he.preventDefault(),!W)return;const{error:ne}=await Ht.from("clients").update({phone:W.phone,visits:W.visits}).eq("id",W.id);ne?alert("Error al actualizar: "+ne.message):(Z(null),fe())},ae=async he=>{if(!window.confirm("Ests seguro de eliminar este cliente? Esta accin no se puede deshacer y borrar su historial."))return;const{error:ne}=await Ht.from("clients").delete().eq("id",he);ne?alert("Error al eliminar: "+ne.message):fe()},be=()=>{const he=["ID Transaccion","Fecha","Monto","Tipo","ID Cliente"],ne=t.map(Se=>[Se.id,Se.created_at,Se.amount,Se.type,Se.client_id||"Annimo"]),we="data:text/csv;charset=utf-8,"+he.join(",")+`
`+ne.map(Se=>Se.join(",")).join(`
`),ve=encodeURI(we),xe=document.createElement("a");xe.setAttribute("href",ve),xe.setAttribute("download",`reporte_financiero_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(xe),xe.click(),document.body.removeChild(xe)};return R.jsxs("div",{className:"max-w-6xl mx-auto p-4 py-8",children:[R.jsxs("div",{className:"flex justify-between items-center mb-8",children:[R.jsx("h1",{className:"text-3xl font-bold text-stone-900 serif",children:"Panel de Gestin"}),R.jsxs("div",{className:"flex gap-4",children:[L==="dashboard"&&R.jsxs("select",{value:o,onChange:he=>a(he.target.value),className:"bg-white border border-stone-300 rounded-lg px-3 py-2 text-sm",children:[R.jsx("option",{value:"week",children:"ltima Semana"}),R.jsx("option",{value:"month",children:"ltimo Mes"})]}),R.jsx("button",{onClick:e,className:"bg-stone-200 px-4 py-2 rounded-lg text-sm font-bold hover:bg-stone-300",children:"Cerrar Sesin"})]})]}),R.jsxs("div",{className:"flex gap-4 mb-6 border-b border-stone-200 pb-1",children:[R.jsx("button",{onClick:()=>V("dashboard"),className:`px-4 py-2 font-bold transition ${L==="dashboard"?"text-stone-900 border-b-2 border-stone-900":"text-stone-400 hover:text-stone-600"}`,children:"Dashboard"}),R.jsx("button",{onClick:()=>V("clients"),className:`px-4 py-2 font-bold transition ${L==="clients"?"text-stone-900 border-b-2 border-stone-900":"text-stone-400 hover:text-stone-600"}`,children:"Clientes"})]}),L==="dashboard"?R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-stone-500 text-sm uppercase tracking-wider mb-1",children:"Monto Neto"}),R.jsxs("h3",{className:"text-3xl font-bold text-green-600",children:["$",c.toLocaleString()]})]}),R.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:R.jsx(L5,{className:"text-green-600"})})]}),R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-stone-500 text-sm uppercase tracking-wider mb-1",children:"Ticket Promedio"}),R.jsxs("h3",{className:"text-3xl font-bold text-blue-600",children:["$",d.toLocaleString()]})]}),R.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:R.jsx(P2,{className:"text-blue-600"})})]}),R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-stone-500 text-sm uppercase tracking-wider mb-1",children:"Transacciones"}),R.jsx("h3",{className:"text-3xl font-bold text-purple-600",children:t.length})]}),R.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:R.jsx(P2,{className:"text-purple-600"})})]})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[R.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[R.jsx(q5,{size:18})," Origen de Ingresos"]}),R.jsx("div",{className:"h-[250px] w-full",children:R.jsx(Mv,{width:"100%",height:"100%",children:R.jsxs(Qce,{children:[R.jsx(dD,{data:C,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",children:C.map((he,ne)=>R.jsx(Al,{fill:WN[ne%WN.length]},`cell-${ne}`))}),R.jsx(Zv,{formatter:he=>`$${he.toLocaleString()}`}),R.jsx(TM,{})]})})})]}),R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[R.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[R.jsx(R5,{size:18})," Top Productos/Servicios"]}),R.jsx("div",{className:"h-[250px] w-full",children:R.jsx(Mv,{width:"100%",height:"100%",children:R.jsxs(Vce,{data:P,layout:"vertical",children:[R.jsx($x,{strokeDasharray:"3 3",horizontal:!1}),R.jsx(Wx,{type:"number",hide:!0}),R.jsx(Yx,{dataKey:"name",type:"category",width:100,style:{fontSize:"10px"}}),R.jsx(Zv,{}),R.jsx(PD,{dataKey:"count",fill:"#8884d8",radius:[0,4,4,0]})]})})})]}),R.jsxs("div",{className:"md:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[R.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[R.jsx(J5,{size:18})," Matriz BCG (Crecimiento vs Participacin)"]}),R.jsxs("div",{className:"h-[300px] w-full relative",children:[R.jsx(Mv,{width:"100%",height:"100%",children:R.jsxs(tde,{margin:{top:20,right:20,bottom:20,left:20},children:[R.jsx($x,{}),R.jsx(Wx,{type:"number",dataKey:"volume",name:"Cuota (Volumen)",unit:"%",domain:[0,"auto"],tickFormatter:he=>Math.round(he*100)+"%"}),R.jsx(Yx,{type:"number",dataKey:"growth",name:"Crecimiento",unit:"%",tickFormatter:he=>Math.round(he*100)+"%"}),R.jsx(Zv,{cursor:{strokeDasharray:"3 3"},formatter:(he,ne)=>[Math.round(he*100)+"%",ne==="volume"?"Cuota":"Crecimiento"]}),R.jsx(wD,{y:0,stroke:"#ccc",strokeDasharray:"3 3"}),R.jsx(RD,{name:"Productos",data:D,fill:"#8884d8",children:D.map((he,ne)=>{let we="#8884d8";return he.type==="star"?we="#FFBB28":he.type==="cow"?we="#00C49F":he.type==="dog"?we="#FF8042":we="#999",R.jsx(Al,{fill:we},`cell-${ne}`)})})]})}),R.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 p-2 rounded border border-stone-200 text-xs shadow-lg grid grid-cols-2 gap-2",children:[R.jsxs("div",{className:"flex items-center gap-1",children:[R.jsx("div",{className:"w-3 h-3 bg-[#FFBB28] rounded-full"}),"  Estrella"]}),R.jsxs("div",{className:"flex items-center gap-1",children:[R.jsx("div",{className:"w-3 h-3 bg-[#00C49F] rounded-full"}),"  Vaca"]}),R.jsxs("div",{className:"flex items-center gap-1",children:[R.jsx("div",{className:"w-3 h-3 bg-[#999] rounded-full"}),"  Interrogante"]}),R.jsxs("div",{className:"flex items-center gap-1",children:[R.jsx("div",{className:"w-3 h-3 bg-[#FF8042] rounded-full"}),"  Perro"]})]})]}),R.jsx("p",{className:"text-xs text-stone-400 mt-2 text-center",children:"* Eje X: Cuota de Mercado (Volumen) | Eje Y: Crecimiento respecto al periodo anterior"})]})]}),R.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[R.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[R.jsx(rB,{size:20})," Top 10 Clientes (Gasto)"]}),R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"w-full text-sm text-left",children:[R.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500",children:R.jsxs("tr",{children:[R.jsx("th",{className:"px-4 py-2",children:"Cliente"}),R.jsx("th",{className:"px-4 py-2 text-right",children:"Visitas"}),R.jsx("th",{className:"px-4 py-2 text-right",children:"Total Gastado"})]})}),R.jsxs("tbody",{children:[v.map((he,ne)=>R.jsxs("tr",{className:"border-b border-stone-100",children:[R.jsxs("td",{className:"px-4 py-3 font-medium",children:[ne+1,". ",he.phone]}),R.jsx("td",{className:"px-4 py-3 text-right",children:he.visit_count}),R.jsxs("td",{className:"px-4 py-3 text-right font-bold text-green-600",children:["$",he.total_spent.toLocaleString()]})]},he.id)),v.length===0&&R.jsx("tr",{children:R.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-stone-400",children:"No hay suficientes datos"})})]})]})})]}),R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[R.jsx(H5,{size:20})," Inventario Perfumes"]}),R.jsxs("button",{onClick:be,className:"text-sm text-blue-600 font-bold hover:underline flex items-center gap-1",children:[R.jsx(B5,{size:14})," Exportar CSV"]})]}),R.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:R.jsxs("table",{className:"w-full text-xs text-left",children:[R.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500 sticky top-0",children:R.jsxs("tr",{children:[R.jsx("th",{className:"px-4 py-2",children:"Producto"}),R.jsx("th",{className:"px-4 py-2 text-center",children:"Stock Real"}),R.jsx("th",{className:"px-4 py-2 text-right",children:"Accin"})]})}),R.jsx("tbody",{children:ya.map(he=>R.jsx(nde,{perfume:he},he.id))})]})})]})]})]}):R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[R.jsx("h3",{className:"text-xl font-bold mb-6",children:"Gestin de Clientes"}),R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"w-full text-sm text-left",children:[R.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500",children:R.jsxs("tr",{children:[R.jsx("th",{className:"px-6 py-3",children:"Telfono / Cliente"}),R.jsx("th",{className:"px-6 py-3 text-center",children:"Visitas (Lealtad)"}),R.jsx("th",{className:"px-6 py-3",children:"ltima Visita"}),R.jsx("th",{className:"px-6 py-3 text-right",children:"Acciones"})]})}),R.jsx("tbody",{children:G.map(he=>R.jsxs("tr",{className:"border-b border-stone-100 hover:bg-stone-50",children:[R.jsx("td",{className:"px-6 py-4 font-medium",children:he.phone}),R.jsx("td",{className:"px-6 py-4 text-center",children:R.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full font-bold",children:he.visits})}),R.jsx("td",{className:"px-6 py-4 text-stone-500",children:new Date(he.last_visit).toLocaleDateString()}),R.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[R.jsx("button",{onClick:()=>Z(he),className:"text-blue-600 hover:text-blue-800 font-medium text-xs px-2 py-1 bg-blue-50 rounded",children:"Editar"}),R.jsx("button",{onClick:()=>ae(he.id),className:"text-red-600 hover:text-red-800 font-medium text-xs px-2 py-1 bg-red-50 rounded",children:"Eliminar"})]})]},he.id))})]})})]}),W&&R.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:R.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-sm",children:[R.jsx("h3",{className:"text-xl font-bold mb-4",children:"Editar Cliente"}),R.jsxs("form",{onSubmit:se,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-1",children:"Telfono"}),R.jsx("input",{type:"text",value:W.phone,onChange:he=>Z({...W,phone:he.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-1",children:"Visitas (Puntos)"}),R.jsx("input",{type:"number",value:W.visits,onChange:he=>Z({...W,visits:parseInt(he.target.value)}),className:"w-full px-4 py-2 border rounded-lg"})]}),R.jsxs("div",{className:"flex gap-2 mt-6",children:[R.jsx("button",{type:"button",onClick:()=>Z(null),className:"flex-1 px-4 py-2 bg-stone-200 text-stone-700 rounded-lg font-bold",children:"Cancelar"}),R.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-stone-900 text-white rounded-lg font-bold",children:"Guardar"})]})]})]})})]})},ide=()=>{const[e,t]=M.useState(null),[n,r]=M.useState(""),i=(a,c)=>{t(a),c&&r(c)},o=async()=>{await Ht.auth.signOut(),t(null),r("")};return e?e==="management"?R.jsx(rde,{onLogout:o}):R.jsx(NH,{onLogout:o}):R.jsx(tH,{onLogin:i})},ode=()=>{const[e,t]=M.useState("Todos"),[n,r]=M.useState(null),i=["Todos","Cortes","Color","Peinados"],o=e==="Todos"?N2:N2.filter(a=>a.category===e);return R.jsxs("div",{className:"animate-in fade-in duration-700",children:[R.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:i.map(a=>R.jsx("button",{onClick:()=>t(a),className:`px-6 py-2 rounded-full text-sm font-bold uppercase tracking-widest transition-all ${e===a?"bg-stone-900 text-white shadow-lg scale-105":"bg-stone-100 text-stone-500 hover:bg-stone-200"}`,children:a},a))}),R.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-8 space-y-8 px-4",children:o.map((a,c)=>R.jsxs("div",{className:"break-inside-avoid relative group cursor-zoom-in overflow-hidden rounded-xl shadow-md bg-stone-100",onClick:()=>r(a.url),children:[R.jsx("img",{src:a.url,alt:a.description,className:"w-full h-auto object-cover transform transition duration-700 group-hover:scale-110",loading:"lazy"}),R.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:R.jsxs("div",{className:"text-white text-center p-4 transform translate-y-4 group-hover:translate-y-0 transition duration-300",children:[R.jsx(iB,{className:"mx-auto mb-2 opacity-80"}),R.jsx("p",{className:"font-serif italic text-lg",children:a.description})]})})]},c))}),n&&R.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:()=>r(null),children:[R.jsx("button",{className:"absolute top-6 right-6 text-white/50 hover:text-white transition",onClick:()=>r(null),children:R.jsx(Hd,{size:32})}),R.jsx("img",{src:n,alt:"Zoom",className:"max-w-full max-h-[90vh] object-contain rounded-sm shadow-2xl scale-in-95 animate-in duration-300"})]})]})},sde=()=>{const e=t=>{const n=encodeURIComponent(`Hola, me gustara reservar el "${t}".`);window.open(`https://wa.me/${Pu}?text=${n}`,"_blank")};return R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 min-h-[60vh]",children:[R.jsxs("div",{className:"text-center mb-16",children:[R.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Detalles con Amor"}),R.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Zona de Regalitos"}),R.jsx("p",{className:"text-stone-500 mt-4 max-w-2xl mx-auto",children:"Sorprende a quien ms quieres con nuestra seleccin exclusiva."})]}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:fB.map(t=>R.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-stone-100 hover:shadow-xl transition-shadow flex flex-col",children:[R.jsxs("div",{className:"bg-amber-50 p-8 flex justify-center items-center h-48 relative overflow-hidden group",children:[R.jsx("div",{className:"absolute inset-0 bg-amber-100 opacity-0 group-hover:opacity-20 transition-opacity"}),R.jsx(sw,{size:64,className:"text-amber-500 relative z-10"})]}),R.jsxs("div",{className:"p-8 flex-grow flex flex-col",children:[R.jsx("h3",{className:"serif text-2xl text-stone-900 mb-2",children:t.name}),R.jsx("div",{className:"text-3xl font-light text-stone-800 mb-6 font-serif",children:t.price>0?`$${t.price.toLocaleString("es-CL")}`:"A medida"}),R.jsx("div",{className:"space-y-3 mb-8 flex-grow",children:t.includes.map((n,r)=>R.jsxs("div",{className:"flex items-start text-stone-600",children:[R.jsx(U5,{size:16,className:"text-amber-400 mt-1 mr-2 flex-shrink-0 fill-current"}),R.jsx("span",{className:"text-sm",children:n})]},r))}),R.jsx("button",{onClick:()=>e(t.name),className:"w-full bg-stone-900 text-white py-3 rounded-full font-bold uppercase tracking-wider text-sm hover:bg-stone-800 transition shadow-md",children:"Reservar"})]})]},t.id))})]})},ade=()=>{const{pathname:e}=Ho();return dn.useEffect(()=>{window.scrollTo(0,0)},[e]),null},lde=()=>{const[e,t]=M.useState(null),n=()=>R.jsxs(R.Fragment,{children:[R.jsx(sB,{onCtaClick:()=>{document.getElementById("booking-section")?.scrollIntoView({behavior:"smooth"})}}),R.jsx("section",{className:"py-24 bg-white",children:R.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[R.jsx("div",{children:R.jsx("img",{src:"/images/gallery/work_1.png",alt:"Hair Styling",className:"rounded-sm shadow-xl",onError:r=>{r.target.src="https://images.unsplash.com/photo-1560869713-7d0a29430803?auto=format&fit=crop&q=80&w=800"}})}),R.jsxs("div",{className:"space-y-6",children:[R.jsx("h3",{className:"serif text-4xl text-stone-900",children:"Corte, Color & Styling"}),R.jsx("p",{className:"text-stone-600 font-light text-lg leading-relaxed",children:"Desde cortes de puntas esenciales hasta cambios de look completos con coloracin. Descubre nuestros nuevos servicios de verano 2026."}),R.jsxs("div",{className:"flex items-center space-x-4 pt-2",children:[R.jsx("a",{href:"/gallery",className:"px-6 py-2 bg-stone-100 text-stone-900 rounded-full font-bold text-sm hover:bg-stone-200 transition no-underline flex items-center justify-center",children:"Ver Galera"}),R.jsxs("div",{className:"flex items-center space-x-2 text-stone-900 font-medium",children:[R.jsx(yR,{size:20}),R.jsx("span",{children:"Desde $7.000"})]})]})]})]})})}),R.jsxs("section",{className:"py-16 bg-stone-900 text-white relative overflow-hidden",children:[R.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-amber-500 rounded-full blur-[100px] opacity-20 transform translate-x-1/2 -translate-y-1/2"}),R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10",children:[R.jsx(sw,{className:"mx-auto text-amber-400 mb-4 h-12 w-12"}),R.jsx("h2",{className:"serif text-3xl md:text-4xl mb-4",children:"Ya eres Clienta?"}),R.jsx("p",{className:"text-stone-300 max-w-lg mx-auto mb-8",children:"Revisa tus puntos acumulados y descubre cunto te falta para tu **Descuento de la 5ta Visita**."}),R.jsx("a",{href:"/loyalty",className:"inline-block bg-white text-stone-900 px-8 py-3 rounded-full font-bold hover:bg-amber-50 transition shadow-lg no-underline",children:"Revisar mis Puntos"})]})]}),R.jsx("section",{className:"py-24 bg-stone-50",children:R.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center flex-row-reverse",children:[R.jsxs("div",{className:"order-2 md:order-1 space-y-6",children:[R.jsxs("h3",{className:"serif text-4xl text-stone-900",children:["Alta Perfumera ",R.jsx("br",{})," en Decants"]}),R.jsx("p",{className:"text-stone-600 font-light text-lg leading-relaxed",children:"Accede a las fragancias ms deseadas del mundo en formatos de 5 y 10 ml. La forma inteligente de coleccionar aromas y descubrir tu nueva firma olfativa."}),R.jsxs("div",{className:"flex items-center space-x-2 text-stone-900 font-medium pt-2",children:[R.jsx(bd,{size:20}),R.jsx("span",{children:"100% Originales"})]}),R.jsxs("a",{href:"/perfum",className:"inline-flex items-center text-stone-900 border-b border-stone-900 pb-1 hover:text-stone-600 hover:border-stone-600 transition mt-4 no-underline",children:["Explorar Catlogo ",R.jsx(N5,{size:16,className:"ml-2"})]})]}),R.jsx("div",{className:"order-1 md:order-2",children:R.jsx("img",{src:"https://images.unsplash.com/photo-1615634260167-c8cdede054de?auto=format&fit=crop&q=80&w=800",alt:"Perfumes",className:"rounded-sm shadow-xl"})})]})})}),R.jsx(zG,{}),R.jsxs("div",{id:"booking-section",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[R.jsxs("div",{className:"text-center mb-16",children:[R.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Reserva tu momento"}),R.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Agenda tu Cita"})]}),R.jsx(_7,{onSuccess:r=>{t(r),window.location.href="/confirmation"}})]}),R.jsx("div",{className:"bg-white py-4 text-center",children:R.jsxs("a",{href:"/admin",className:"text-[10px] text-stone-300 hover:text-stone-500 flex items-center justify-center gap-1 mx-auto transition no-underline",children:[R.jsx(Z5,{size:10})," Admin"]})})]});return R.jsx(v5,{children:R.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[R.jsx(ade,{}),R.jsx(oB,{}),R.jsx("main",{className:"flex-grow pt-16 md:pt-0",children:R.jsxs(WL,{children:[R.jsx(ca,{path:"/",element:R.jsx(n,{})}),R.jsx(ca,{path:"/perfum",element:R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[R.jsxs("div",{className:"text-center mb-16",children:[R.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Aromas Exclusivos"}),R.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Nuestra Coleccin"})]}),R.jsx(C7,{})]})}),R.jsx(ca,{path:"/regalos",element:R.jsx(sde,{})}),R.jsx(ca,{path:"/gallery",element:R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[R.jsxs("div",{className:"text-center mb-16",children:[R.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Nuestro Arte"}),R.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Galera de Trabajos"}),R.jsx("p",{className:"text-stone-500 mt-4 max-w-2xl mx-auto",children:"Resultados reales de clientas felices. Insprate para tu prximo cambio de look."})]}),R.jsx(ode,{})]})}),R.jsx(ca,{path:"/loyalty",element:R.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 min-h-[60vh] flex flex-col justify-center items-center",children:R.jsx(eH,{})})}),R.jsx(ca,{path:"/admin",element:R.jsx(ide,{})}),R.jsx(ca,{path:"/confirmation",element:R.jsx(ude,{})})]})}),R.jsx(A7,{}),R.jsx(VG,{})]})})},ude=()=>(Ho(),dn.useMemo(()=>null,[]),R.jsx($G,{isHomeService:!1,onGoHome:()=>window.location.href="/",onGoCatalog:()=>window.location.href="/perfum"}));console.log("Iniciando aplicacin React...");const YD=document.getElementById("root");if(!YD)throw new Error("Could not find root element to mount to");try{X6.createRoot(YD).render(R.jsx(dn.StrictMode,{children:R.jsx(lde,{})})),console.log("Aplicacin montada correctamente.")}catch(e){console.error("Error al montar la aplicacin:",e);const t=document.getElementById("app-error");t&&(t.style.display="block",t.innerHTML="Error crtico al iniciar React: "+e.message)}
