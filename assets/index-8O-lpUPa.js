function nw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function so(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Gd(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var p1={exports:{}},td={},m1={exports:{}},Et={};var w_;function q6(){if(w_)return Et;w_=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function b(ne){return ne===null||typeof ne!="object"?null:(ne=v&&ne[v]||ne["@@iterator"],typeof ne=="function"?ne:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,N={};function R(ne,he,Be){this.props=ne,this.context=he,this.refs=N,this.updater=Be||C}R.prototype.isReactComponent={},R.prototype.setState=function(ne,he){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,he,"setState")},R.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function D(){}D.prototype=R.prototype;function F(ne,he,Be){this.props=ne,this.context=he,this.refs=N,this.updater=Be||C}var L=F.prototype=new D;L.constructor=F,P(L,R.prototype),L.isPureReactComponent=!0;var U=Array.isArray,G=Object.prototype.hasOwnProperty,q={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function Z(ne,he,Be){var Fe,Ze={},Pe=null,st=null;if(he!=null)for(Fe in he.ref!==void 0&&(st=he.ref),he.key!==void 0&&(Pe=""+he.key),he)G.call(he,Fe)&&!W.hasOwnProperty(Fe)&&(Ze[Fe]=he[Fe]);var it=arguments.length-2;if(it===1)Ze.children=Be;else if(1<it){for(var we=Array(it),tt=0;tt<it;tt++)we[tt]=arguments[tt+2];Ze.children=we}if(ne&&ne.defaultProps)for(Fe in it=ne.defaultProps,it)Ze[Fe]===void 0&&(Ze[Fe]=it[Fe]);return{$$typeof:e,type:ne,key:Pe,ref:st,props:Ze,_owner:q.current}}function X(ne,he){return{$$typeof:e,type:ne.type,key:he,ref:ne.ref,props:ne.props,_owner:ne._owner}}function pe(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===e}function ae(ne){var he={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(Be){return he[Be]})}var le=/\/+/g;function be(ne,he){return typeof ne=="object"&&ne!==null&&ne.key!=null?ae(""+ne.key):he.toString(36)}function me(ne,he,Be,Fe,Ze){var Pe=typeof ne;(Pe==="undefined"||Pe==="boolean")&&(ne=null);var st=!1;if(ne===null)st=!0;else switch(Pe){case"string":case"number":st=!0;break;case"object":switch(ne.$$typeof){case e:case t:st=!0}}if(st)return st=ne,Ze=Ze(st),ne=Fe===""?"."+be(st,0):Fe,U(Ze)?(Be="",ne!=null&&(Be=ne.replace(le,"$&/")+"/"),me(Ze,he,Be,"",function(tt){return tt})):Ze!=null&&(pe(Ze)&&(Ze=X(Ze,Be+(!Ze.key||st&&st.key===Ze.key?"":(""+Ze.key).replace(le,"$&/")+"/")+ne)),he.push(Ze)),1;if(st=0,Fe=Fe===""?".":Fe+":",U(ne))for(var it=0;it<ne.length;it++){Pe=ne[it];var we=Fe+be(Pe,it);st+=me(Pe,he,Be,we,Ze)}else if(we=b(ne),typeof we=="function")for(ne=we.call(ne),it=0;!(Pe=ne.next()).done;)Pe=Pe.value,we=Fe+be(Pe,it++),st+=me(Pe,he,Be,we,Ze);else if(Pe==="object")throw he=String(ne),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.");return st}function te(ne,he,Be){if(ne==null)return ne;var Fe=[],Ze=0;return me(ne,Fe,"","",function(Pe){return he.call(Be,Pe,Ze++)}),Fe}function Oe(ne){if(ne._status===-1){var he=ne._result;he=he(),he.then(function(Be){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=Be)},function(Be){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=Be)}),ne._status===-1&&(ne._status=0,ne._result=he)}if(ne._status===1)return ne._result.default;throw ne._result}var se={current:null},ve={transition:null},Ee={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:ve,ReactCurrentOwner:q};function Se(){throw Error("act(...) is not supported in production builds of React.")}return Et.Children={map:te,forEach:function(ne,he,Be){te(ne,function(){he.apply(this,arguments)},Be)},count:function(ne){var he=0;return te(ne,function(){he++}),he},toArray:function(ne){return te(ne,function(he){return he})||[]},only:function(ne){if(!pe(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}},Et.Component=R,Et.Fragment=n,Et.Profiler=i,Et.PureComponent=F,Et.StrictMode=r,Et.Suspense=f,Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ee,Et.act=Se,Et.cloneElement=function(ne,he,Be){if(ne==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ne+".");var Fe=P({},ne.props),Ze=ne.key,Pe=ne.ref,st=ne._owner;if(he!=null){if(he.ref!==void 0&&(Pe=he.ref,st=q.current),he.key!==void 0&&(Ze=""+he.key),ne.type&&ne.type.defaultProps)var it=ne.type.defaultProps;for(we in he)G.call(he,we)&&!W.hasOwnProperty(we)&&(Fe[we]=he[we]===void 0&&it!==void 0?it[we]:he[we])}var we=arguments.length-2;if(we===1)Fe.children=Be;else if(1<we){it=Array(we);for(var tt=0;tt<we;tt++)it[tt]=arguments[tt+2];Fe.children=it}return{$$typeof:e,type:ne.type,key:Ze,ref:Pe,props:Fe,_owner:st}},Et.createContext=function(ne){return ne={$$typeof:a,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ne.Provider={$$typeof:o,_context:ne},ne.Consumer=ne},Et.createElement=Z,Et.createFactory=function(ne){var he=Z.bind(null,ne);return he.type=ne,he},Et.createRef=function(){return{current:null}},Et.forwardRef=function(ne){return{$$typeof:c,render:ne}},Et.isValidElement=pe,Et.lazy=function(ne){return{$$typeof:m,_payload:{_status:-1,_result:ne},_init:Oe}},Et.memo=function(ne,he){return{$$typeof:d,type:ne,compare:he===void 0?null:he}},Et.startTransition=function(ne){var he=ve.transition;ve.transition={};try{ne()}finally{ve.transition=he}},Et.unstable_act=Se,Et.useCallback=function(ne,he){return se.current.useCallback(ne,he)},Et.useContext=function(ne){return se.current.useContext(ne)},Et.useDebugValue=function(){},Et.useDeferredValue=function(ne){return se.current.useDeferredValue(ne)},Et.useEffect=function(ne,he){return se.current.useEffect(ne,he)},Et.useId=function(){return se.current.useId()},Et.useImperativeHandle=function(ne,he,Be){return se.current.useImperativeHandle(ne,he,Be)},Et.useInsertionEffect=function(ne,he){return se.current.useInsertionEffect(ne,he)},Et.useLayoutEffect=function(ne,he){return se.current.useLayoutEffect(ne,he)},Et.useMemo=function(ne,he){return se.current.useMemo(ne,he)},Et.useReducer=function(ne,he,Be){return se.current.useReducer(ne,he,Be)},Et.useRef=function(ne){return se.current.useRef(ne)},Et.useState=function(ne){return se.current.useState(ne)},Et.useSyncExternalStore=function(ne,he,Be){return se.current.useSyncExternalStore(ne,he,Be)},Et.useTransition=function(){return se.current.useTransition()},Et.version="18.3.1",Et}var b_;function Wu(){return b_||(b_=1,m1.exports=q6()),m1.exports}var E_;function W6(){if(E_)return td;E_=1;var e=Wu(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(c,f,d){var m,v={},b=null,C=null;d!==void 0&&(b=""+d),f.key!==void 0&&(b=""+f.key),f.ref!==void 0&&(C=f.ref);for(m in f)r.call(f,m)&&!o.hasOwnProperty(m)&&(v[m]=f[m]);if(c&&c.defaultProps)for(m in f=c.defaultProps,f)v[m]===void 0&&(v[m]=f[m]);return{$$typeof:t,type:c,key:b,ref:C,props:v,_owner:i.current}}return td.Fragment=n,td.jsx=a,td.jsxs=a,td}var __;function K6(){return __||(__=1,p1.exports=W6()),p1.exports}var I=K6(),k=Wu();const mn=so(k),Y6=nw({__proto__:null,default:mn},[k]);var Th={},g1={exports:{}},ai={},v1={exports:{}},y1={};var S_;function X6(){return S_||(S_=1,(function(e){function t(ve,Ee){var Se=ve.length;ve.push(Ee);e:for(;0<Se;){var ne=Se-1>>>1,he=ve[ne];if(0<i(he,Ee))ve[ne]=Ee,ve[Se]=he,Se=ne;else break e}}function n(ve){return ve.length===0?null:ve[0]}function r(ve){if(ve.length===0)return null;var Ee=ve[0],Se=ve.pop();if(Se!==Ee){ve[0]=Se;e:for(var ne=0,he=ve.length,Be=he>>>1;ne<Be;){var Fe=2*(ne+1)-1,Ze=ve[Fe],Pe=Fe+1,st=ve[Pe];if(0>i(Ze,Se))Pe<he&&0>i(st,Ze)?(ve[ne]=st,ve[Pe]=Se,ne=Pe):(ve[ne]=Ze,ve[Fe]=Se,ne=Fe);else if(Pe<he&&0>i(st,Se))ve[ne]=st,ve[Pe]=Se,ne=Pe;else break e}}return Ee}function i(ve,Ee){var Se=ve.sortIndex-Ee.sortIndex;return Se!==0?Se:ve.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();e.unstable_now=function(){return a.now()-c}}var f=[],d=[],m=1,v=null,b=3,C=!1,P=!1,N=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(ve){for(var Ee=n(d);Ee!==null;){if(Ee.callback===null)r(d);else if(Ee.startTime<=ve)r(d),Ee.sortIndex=Ee.expirationTime,t(f,Ee);else break;Ee=n(d)}}function U(ve){if(N=!1,L(ve),!P)if(n(f)!==null)P=!0,Oe(G);else{var Ee=n(d);Ee!==null&&se(U,Ee.startTime-ve)}}function G(ve,Ee){P=!1,N&&(N=!1,D(Z),Z=-1),C=!0;var Se=b;try{for(L(Ee),v=n(f);v!==null&&(!(v.expirationTime>Ee)||ve&&!ae());){var ne=v.callback;if(typeof ne=="function"){v.callback=null,b=v.priorityLevel;var he=ne(v.expirationTime<=Ee);Ee=e.unstable_now(),typeof he=="function"?v.callback=he:v===n(f)&&r(f),L(Ee)}else r(f);v=n(f)}if(v!==null)var Be=!0;else{var Fe=n(d);Fe!==null&&se(U,Fe.startTime-Ee),Be=!1}return Be}finally{v=null,b=Se,C=!1}}var q=!1,W=null,Z=-1,X=5,pe=-1;function ae(){return!(e.unstable_now()-pe<X)}function le(){if(W!==null){var ve=e.unstable_now();pe=ve;var Ee=!0;try{Ee=W(!0,ve)}finally{Ee?be():(q=!1,W=null)}}else q=!1}var be;if(typeof F=="function")be=function(){F(le)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,te=me.port2;me.port1.onmessage=le,be=function(){te.postMessage(null)}}else be=function(){R(le,0)};function Oe(ve){W=ve,q||(q=!0,be())}function se(ve,Ee){Z=R(function(){ve(e.unstable_now())},Ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ve){ve.callback=null},e.unstable_continueExecution=function(){P||C||(P=!0,Oe(G))},e.unstable_forceFrameRate=function(ve){0>ve||125<ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<ve?Math.floor(1e3/ve):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(ve){switch(b){case 1:case 2:case 3:var Ee=3;break;default:Ee=b}var Se=b;b=Ee;try{return ve()}finally{b=Se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ve,Ee){switch(ve){case 1:case 2:case 3:case 4:case 5:break;default:ve=3}var Se=b;b=ve;try{return Ee()}finally{b=Se}},e.unstable_scheduleCallback=function(ve,Ee,Se){var ne=e.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?ne+Se:ne):Se=ne,ve){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Se+he,ve={id:m++,callback:Ee,priorityLevel:ve,startTime:Se,expirationTime:he,sortIndex:-1},Se>ne?(ve.sortIndex=Se,t(d,ve),n(f)===null&&ve===n(d)&&(N?(D(Z),Z=-1):N=!0,se(U,Se-ne))):(ve.sortIndex=he,t(f,ve),P||C||(P=!0,Oe(G))),ve},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(ve){var Ee=b;return function(){var Se=b;b=Ee;try{return ve.apply(this,arguments)}finally{b=Se}}}})(y1)),y1}var C_;function J6(){return C_||(C_=1,v1.exports=X6()),v1.exports}var A_;function Z6(){if(A_)return ai;A_=1;var e=Wu(),t=J6();function n(l){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+l,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+l+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(l,p){a(l,p),a(l+"Capture",p)}function a(l,p){for(i[l]=p,l=0;l<p.length;l++)r.add(p[l])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function b(l){return f.call(v,l)?!0:f.call(m,l)?!1:d.test(l)?v[l]=!0:(m[l]=!0,!1)}function C(l,p,w,A){if(w!==null&&w.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return A?!1:w!==null?!w.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function P(l,p,w,A){if(p===null||typeof p>"u"||C(l,p,w,A))return!0;if(A)return!1;if(w!==null)switch(w.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function N(l,p,w,A,M,B,$){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=A,this.attributeNamespace=M,this.mustUseProperty=w,this.propertyName=l,this.type=p,this.sanitizeURL=B,this.removeEmptyString=$}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){R[l]=new N(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var p=l[0];R[p]=new N(p,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){R[l]=new N(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){R[l]=new N(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){R[l]=new N(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){R[l]=new N(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){R[l]=new N(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){R[l]=new N(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){R[l]=new N(l,5,!1,l.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function F(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var p=l.replace(D,F);R[p]=new N(p,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var p=l.replace(D,F);R[p]=new N(p,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var p=l.replace(D,F);R[p]=new N(p,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){R[l]=new N(l,1,!1,l.toLowerCase(),null,!1,!1)}),R.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){R[l]=new N(l,1,!1,l.toLowerCase(),null,!0,!0)});function L(l,p,w,A){var M=R.hasOwnProperty(p)?R[p]:null;(M!==null?M.type!==0:A||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(P(p,w,M,A)&&(w=null),A||M===null?b(p)&&(w===null?l.removeAttribute(p):l.setAttribute(p,""+w)):M.mustUseProperty?l[M.propertyName]=w===null?M.type===3?!1:"":w:(p=M.attributeName,A=M.attributeNamespace,w===null?l.removeAttribute(p):(M=M.type,w=M===3||M===4&&w===!0?"":""+w,A?l.setAttributeNS(A,p,w):l.setAttribute(p,w))))}var U=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),q=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),ae=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),ve=Symbol.iterator;function Ee(l){return l===null||typeof l!="object"?null:(l=ve&&l[ve]||l["@@iterator"],typeof l=="function"?l:null)}var Se=Object.assign,ne;function he(l){if(ne===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);ne=p&&p[1]||""}return`
`+ne+l}var Be=!1;function Fe(l,p){if(!l||Be)return"";Be=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(xe){var A=xe}Reflect.construct(l,[],p)}else{try{p.call()}catch(xe){A=xe}l.call(p.prototype)}else{try{throw Error()}catch(xe){A=xe}l()}}catch(xe){if(xe&&A&&typeof xe.stack=="string"){for(var M=xe.stack.split(`
`),B=A.stack.split(`
`),$=M.length-1,J=B.length-1;1<=$&&0<=J&&M[$]!==B[J];)J--;for(;1<=$&&0<=J;$--,J--)if(M[$]!==B[J]){if($!==1||J!==1)do if($--,J--,0>J||M[$]!==B[J]){var ee=`
`+M[$].replace(" at new "," at ");return l.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",l.displayName)),ee}while(1<=$&&0<=J);break}}}finally{Be=!1,Error.prepareStackTrace=w}return(l=l?l.displayName||l.name:"")?he(l):""}function Ze(l){switch(l.tag){case 5:return he(l.type);case 16:return he("Lazy");case 13:return he("Suspense");case 19:return he("SuspenseList");case 0:case 2:case 15:return l=Fe(l.type,!1),l;case 11:return l=Fe(l.type.render,!1),l;case 1:return l=Fe(l.type,!0),l;default:return""}}function Pe(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case W:return"Fragment";case q:return"Portal";case X:return"Profiler";case Z:return"StrictMode";case be:return"Suspense";case me:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case ae:return(l.displayName||"Context")+".Consumer";case pe:return(l._context.displayName||"Context")+".Provider";case le:var p=l.render;return l=l.displayName,l||(l=p.displayName||p.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case te:return p=l.displayName||null,p!==null?p:Pe(l.type)||"Memo";case Oe:p=l._payload,l=l._init;try{return Pe(l(p))}catch{}}return null}function st(l){var p=l.type;switch(l.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=p.render,l=l.displayName||l.name||"",p.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(p);case 8:return p===Z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function it(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function we(l){var p=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function tt(l){var p=we(l)?"checked":"value",w=Object.getOwnPropertyDescriptor(l.constructor.prototype,p),A=""+l[p];if(!l.hasOwnProperty(p)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var M=w.get,B=w.set;return Object.defineProperty(l,p,{configurable:!0,get:function(){return M.call(this)},set:function($){A=""+$,B.call(this,$)}}),Object.defineProperty(l,p,{enumerable:w.enumerable}),{getValue:function(){return A},setValue:function($){A=""+$},stopTracking:function(){l._valueTracker=null,delete l[p]}}}}function Me(l){l._valueTracker||(l._valueTracker=tt(l))}function _e(l){if(!l)return!1;var p=l._valueTracker;if(!p)return!0;var w=p.getValue(),A="";return l&&(A=we(l)?l.checked?"true":"false":l.value),l=A,l!==w?(p.setValue(l),!0):!1}function Ke(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function dt(l,p){var w=p.checked;return Se({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??l._wrapperState.initialChecked})}function It(l,p){var w=p.defaultValue==null?"":p.defaultValue,A=p.checked!=null?p.checked:p.defaultChecked;w=it(p.value!=null?p.value:w),l._wrapperState={initialChecked:A,initialValue:w,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function An(l,p){p=p.checked,p!=null&&L(l,"checked",p,!1)}function zt(l,p){An(l,p);var w=it(p.value),A=p.type;if(w!=null)A==="number"?(w===0&&l.value===""||l.value!=w)&&(l.value=""+w):l.value!==""+w&&(l.value=""+w);else if(A==="submit"||A==="reset"){l.removeAttribute("value");return}p.hasOwnProperty("value")?_t(l,p.type,w):p.hasOwnProperty("defaultValue")&&_t(l,p.type,it(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(l.defaultChecked=!!p.defaultChecked)}function Rt(l,p,w){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var A=p.type;if(!(A!=="submit"&&A!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+l._wrapperState.initialValue,w||p===l.value||(l.value=p),l.defaultValue=p}w=l.name,w!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,w!==""&&(l.name=w)}function _t(l,p,w){(p!=="number"||Ke(l.ownerDocument)!==l)&&(w==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+w&&(l.defaultValue=""+w))}var Ro=Array.isArray;function ze(l,p,w,A){if(l=l.options,p){p={};for(var M=0;M<w.length;M++)p["$"+w[M]]=!0;for(w=0;w<l.length;w++)M=p.hasOwnProperty("$"+l[w].value),l[w].selected!==M&&(l[w].selected=M),M&&A&&(l[w].defaultSelected=!0)}else{for(w=""+it(w),p=null,M=0;M<l.length;M++){if(l[M].value===w){l[M].selected=!0,A&&(l[M].defaultSelected=!0);return}p!==null||l[M].disabled||(p=l[M])}p!==null&&(p.selected=!0)}}function js(l,p){if(p.dangerouslySetInnerHTML!=null)throw Error(n(91));return Se({},p,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function pc(l,p){var w=p.value;if(w==null){if(w=p.children,p=p.defaultValue,w!=null){if(p!=null)throw Error(n(92));if(Ro(w)){if(1<w.length)throw Error(n(93));w=w[0]}p=w}p==null&&(p=""),w=p}l._wrapperState={initialValue:it(w)}}function Bi(l,p){var w=it(p.value),A=it(p.defaultValue);w!=null&&(w=""+w,w!==l.value&&(l.value=w),p.defaultValue==null&&l.defaultValue!==w&&(l.defaultValue=w)),A!=null&&(l.defaultValue=""+A)}function Bl(l){var p=l.textContent;p===l._wrapperState.initialValue&&p!==""&&p!==null&&(l.value=p)}function Zr(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fl(l,p){return l==null||l==="http://www.w3.org/1999/xhtml"?Zr(p):l==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var mi,lr=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,w,A,M){MSApp.execUnsafeLocalFunction(function(){return l(p,w,A,M)})}:l})(function(l,p){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=p;else{for(mi=mi||document.createElement("div"),mi.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=mi.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;p.firstChild;)l.appendChild(p.firstChild)}});function Us(l,p){if(p){var w=l.firstChild;if(w&&w===l.lastChild&&w.nodeType===3){w.nodeValue=p;return}}l.textContent=p}var Oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wm=["Webkit","ms","Moz","O"];Object.keys(Oo).forEach(function(l){Wm.forEach(function(p){p=p+l.charAt(0).toUpperCase()+l.substring(1),Oo[p]=Oo[l]})});function wn(l,p,w){return p==null||typeof p=="boolean"||p===""?"":w||typeof p!="number"||p===0||Oo.hasOwnProperty(l)&&Oo[l]?(""+p).trim():p+"px"}function Le(l,p){l=l.style;for(var w in p)if(p.hasOwnProperty(w)){var A=w.indexOf("--")===0,M=wn(w,p[w],A);w==="float"&&(w="cssFloat"),A?l.setProperty(w,M):l[w]=M}}var Mn=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lt(l,p){if(p){if(Mn[l]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(n(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(n(61))}if(p.style!=null&&typeof p.style!="object")throw Error(n(62))}}function Qt(l,p){if(l.indexOf("-")===-1)return typeof p.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xo=null;function Pa(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var jl=null,bt=null,Qr=null;function mc(l){if(l=Uc(l)){if(typeof jl!="function")throw Error(n(280));var p=l.stateNode;p&&(p=Vf(p),jl(l.stateNode,l.type,p))}}function gc(l){bt?Qr?Qr.push(l):Qr=[l]:bt=l}function ei(){if(bt){var l=bt,p=Qr;if(Qr=bt=null,mc(l),p)for(l=0;l<p.length;l++)mc(p[l])}}function Ul(l,p){return l(p)}function Xn(){}var ko=!1;function Na(l,p,w){if(ko)return l(p,w);ko=!0;try{return Ul(l,p,w)}finally{ko=!1,(bt!==null||Qr!==null)&&(Xn(),ei())}}function Rr(l,p){var w=l.stateNode;if(w===null)return null;var A=Vf(w);if(A===null)return null;w=A[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(l=l.type,A=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!A;break e;default:l=!1}if(l)return null;if(w&&typeof w!="function")throw Error(n(231,p,typeof w));return w}var vc=!1;if(c)try{var gi={};Object.defineProperty(gi,"passive",{get:function(){vc=!0}}),window.addEventListener("test",gi,gi),window.removeEventListener("test",gi,gi)}catch{vc=!1}function yc(l,p,w,A,M,B,$,J,ee){var xe=Array.prototype.slice.call(arguments,3);try{p.apply(w,xe)}catch(Ie){this.onError(Ie)}}var zn=!1,Fi=null,wr=!1,Ue=null,Vs={onError:function(l){zn=!0,Fi=l}};function xc(l,p,w,A,M,B,$,J,ee){zn=!1,Fi=null,yc.apply(Vs,arguments)}function Or(l,p,w,A,M,B,$,J,ee){if(xc.apply(this,arguments),zn){if(zn){var xe=Fi;zn=!1,Fi=null}else throw Error(n(198));wr||(wr=!0,Ue=xe)}}function ti(l){var p=l,w=l;if(l.alternate)for(;p.return;)p=p.return;else{l=p;do p=l,(p.flags&4098)!==0&&(w=p.return),l=p.return;while(l)}return p.tag===3?w:null}function Ra(l){if(l.tag===13){var p=l.memoizedState;if(p===null&&(l=l.alternate,l!==null&&(p=l.memoizedState)),p!==null)return p.dehydrated}return null}function Oa(l){if(ti(l)!==l)throw Error(n(188))}function ji(l){var p=l.alternate;if(!p){if(p=ti(l),p===null)throw Error(n(188));return p!==l?null:l}for(var w=l,A=p;;){var M=w.return;if(M===null)break;var B=M.alternate;if(B===null){if(A=M.return,A!==null){w=A;continue}break}if(M.child===B.child){for(B=M.child;B;){if(B===w)return Oa(M),l;if(B===A)return Oa(M),p;B=B.sibling}throw Error(n(188))}if(w.return!==A.return)w=M,A=B;else{for(var $=!1,J=M.child;J;){if(J===w){$=!0,w=M,A=B;break}if(J===A){$=!0,A=M,w=B;break}J=J.sibling}if(!$){for(J=B.child;J;){if(J===w){$=!0,w=B,A=M;break}if(J===A){$=!0,A=B,w=M;break}J=J.sibling}if(!$)throw Error(n(189))}}if(w.alternate!==A)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?l:p}function wf(l){return l=ji(l),l!==null?bf(l):null}function bf(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var p=bf(l);if(p!==null)return p;l=l.sibling}return null}var vi=t.unstable_scheduleCallback,ur=t.unstable_cancelCallback,en=t.unstable_shouldYield,Ef=t.unstable_requestPaint,jt=t.unstable_now,wc=t.unstable_getCurrentPriorityLevel,Ce=t.unstable_ImmediatePriority,_f=t.unstable_UserBlockingPriority,Kt=t.unstable_NormalPriority,zs=t.unstable_LowPriority,Sf=t.unstable_IdlePriority,Tt=null,yt=null;function St(l){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Tt,l,void 0,(l.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:Dn,bc=Math.log,Ec=Math.LN2;function Dn(l){return l>>>=0,l===0?32:31-(bc(l)/Ec|0)|0}var yi=64,Vl=4194304;function Yt(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function xi(l,p){var w=l.pendingLanes;if(w===0)return 0;var A=0,M=l.suspendedLanes,B=l.pingedLanes,$=w&268435455;if($!==0){var J=$&~M;J!==0?A=Yt(J):(B&=$,B!==0&&(A=Yt(B)))}else $=w&~M,$!==0?A=Yt($):B!==0&&(A=Yt(B));if(A===0)return 0;if(p!==0&&p!==A&&(p&M)===0&&(M=A&-A,B=p&-p,M>=B||M===16&&(B&4194240)!==0))return p;if((A&4)!==0&&(A|=w&16),p=l.entangledLanes,p!==0)for(l=l.entanglements,p&=A;0<p;)w=31-Gr(p),M=1<<w,A|=l[w],p&=~M;return A}function Km(l,p){switch(l){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $s(l,p){for(var w=l.suspendedLanes,A=l.pingedLanes,M=l.expirationTimes,B=l.pendingLanes;0<B;){var $=31-Gr(B),J=1<<$,ee=M[$];ee===-1?((J&w)===0||(J&A)!==0)&&(M[$]=Km(J,p)):ee<=p&&(l.expiredLanes|=J),B&=~J}}function Ut(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Jn(){var l=yi;return yi<<=1,(yi&4194240)===0&&(yi=64),l}function ue(l){for(var p=[],w=0;31>w;w++)p.push(l);return p}function K(l,p,w){l.pendingLanes|=p,p!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,p=31-Gr(p),l[p]=w}function nt(l,p){var w=l.pendingLanes&~p;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=p,l.mutableReadLanes&=p,l.entangledLanes&=p,p=l.entanglements;var A=l.eventTimes;for(l=l.expirationTimes;0<w;){var M=31-Gr(w),B=1<<M;p[M]=0,A[M]=-1,l[M]=-1,w&=~B}}function Tn(l,p){var w=l.entangledLanes|=p;for(l=l.entanglements;w;){var A=31-Gr(w),M=1<<A;M&p|l[A]&p&&(l[A]|=p),w&=~M}}var xt=0;function Cf(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var zl,kr,rt,tn,_c,Sc=!1,Gs=[],wi=null,Ui=null,Mo=null,fn=new Map,lo=new Map,br=[],ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Af(l,p){switch(l){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Mo=null;break;case"pointerover":case"pointerout":fn.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(p.pointerId)}}function ht(l,p,w,A,M,B){return l===null||l.nativeEvent!==B?(l={blockedOn:p,domEventName:w,eventSystemFlags:A,nativeEvent:B,targetContainers:[M]},p!==null&&(p=Uc(p),p!==null&&kr(p)),l):(l.eventSystemFlags|=A,p=l.targetContainers,M!==null&&p.indexOf(M)===-1&&p.push(M),l)}function Zn(l,p,w,A,M){switch(p){case"focusin":return wi=ht(wi,l,p,w,A,M),!0;case"dragenter":return Ui=ht(Ui,l,p,w,A,M),!0;case"mouseover":return Mo=ht(Mo,l,p,w,A,M),!0;case"pointerover":var B=M.pointerId;return fn.set(B,ht(fn.get(B)||null,l,p,w,A,M)),!0;case"gotpointercapture":return B=M.pointerId,lo.set(B,ht(lo.get(B)||null,l,p,w,A,M)),!0}return!1}function Tf(l){var p=za(l.target);if(p!==null){var w=ti(p);if(w!==null){if(p=w.tag,p===13){if(p=Ra(w),p!==null){l.blockedOn=p,_c(l.priority,function(){rt(w)});return}}else if(p===3&&w.stateNode.current.memoizedState.isDehydrated){l.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Hs(l){if(l.blockedOn!==null)return!1;for(var p=l.targetContainers;0<p.length;){var w=$l(l.domEventName,l.eventSystemFlags,p[0],l.nativeEvent);if(w===null){w=l.nativeEvent;var A=new w.constructor(w.type,w);Xo=A,w.target.dispatchEvent(A),Xo=null}else return p=Uc(w),p!==null&&kr(p),l.blockedOn=w,!1;p.shift()}return!0}function Cc(l,p,w){Hs(l)&&w.delete(p)}function Jo(){Sc=!1,wi!==null&&Hs(wi)&&(wi=null),Ui!==null&&Hs(Ui)&&(Ui=null),Mo!==null&&Hs(Mo)&&(Mo=null),fn.forEach(Cc),lo.forEach(Cc)}function ka(l,p){l.blockedOn===p&&(l.blockedOn=null,Sc||(Sc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Jo)))}function uo(l){function p(M){return ka(M,l)}if(0<Gs.length){ka(Gs[0],l);for(var w=1;w<Gs.length;w++){var A=Gs[w];A.blockedOn===l&&(A.blockedOn=null)}}for(wi!==null&&ka(wi,l),Ui!==null&&ka(Ui,l),Mo!==null&&ka(Mo,l),fn.forEach(p),lo.forEach(p),w=0;w<br.length;w++)A=br[w],A.blockedOn===l&&(A.blockedOn=null);for(;0<br.length&&(w=br[0],w.blockedOn===null);)Tf(w),w.blockedOn===null&&br.shift()}var Vi=U.ReactCurrentBatchConfig,Do=!0;function If(l,p,w,A){var M=xt,B=Vi.transition;Vi.transition=null;try{xt=1,Zo(l,p,w,A)}finally{xt=M,Vi.transition=B}}function Ma(l,p,w,A){var M=xt,B=Vi.transition;Vi.transition=null;try{xt=4,Zo(l,p,w,A)}finally{xt=M,Vi.transition=B}}function Zo(l,p,w,A){if(Do){var M=$l(l,p,w,A);if(M===null)ig(l,p,A,Qn,w),Af(l,A);else if(Zn(M,l,p,w,A))A.stopPropagation();else if(Af(l,A),p&4&&-1<ut.indexOf(l)){for(;M!==null;){var B=Uc(M);if(B!==null&&zl(B),B=$l(l,p,w,A),B===null&&ig(l,p,A,Qn,w),B===M)break;M=B}M!==null&&A.stopPropagation()}else ig(l,p,A,null,w)}}var Qn=null;function $l(l,p,w,A){if(Qn=null,l=Pa(A),l=za(l),l!==null)if(p=ti(l),p===null)l=null;else if(w=p.tag,w===13){if(l=Ra(p),l!==null)return l;l=null}else if(w===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;l=null}else p!==l&&(l=null);return Qn=l,null}function Ac(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wc()){case Ce:return 1;case _f:return 4;case Kt:case zs:return 16;case Sf:return 536870912;default:return 16}default:return 16}}var co=null,Tc=null,Gl=null;function Pf(){if(Gl)return Gl;var l,p=Tc,w=p.length,A,M="value"in co?co.value:co.textContent,B=M.length;for(l=0;l<w&&p[l]===M[l];l++);var $=w-l;for(A=1;A<=$&&p[w-A]===M[B-A];A++);return Gl=M.slice(l,1<A?1-A:void 0)}function Pt(l){var p=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&p===13&&(l=13)):l=p,l===10&&(l=13),32<=l||l===13?l:0}function Da(){return!0}function La(){return!1}function In(l){function p(w,A,M,B,$){this._reactName=w,this._targetInst=M,this.type=A,this.nativeEvent=B,this.target=$,this.currentTarget=null;for(var J in l)l.hasOwnProperty(J)&&(w=l[J],this[J]=w?w(B):B[J]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?Da:La,this.isPropagationStopped=La,this}return Se(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Da)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Da)},persist:function(){},isPersistent:Da}),p}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ye=In(qs),mt=Se({},qs,{view:0,detail:0}),er=In(mt),Ws,Hl,Ba,ql=Se({},mt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fa,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ba&&(Ba&&l.type==="mousemove"?(Ws=l.screenX-Ba.screenX,Hl=l.screenY-Ba.screenY):Hl=Ws=0,Ba=l),Ws)},movementY:function(l){return"movementY"in l?l.movementY:Hl}}),Nf=In(ql),Ic=Se({},ql,{dataTransfer:0}),Ln=In(Ic),Pc=Se({},mt,{relatedTarget:0}),nn=In(Pc),Wl=Se({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Qo=In(Wl),$t=Se({},qs,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),ot=In($t),Ym=Se({},qs,{data:0}),qt=In(Ym),es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ks={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zi(l){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(l):(l=Xm[l])?!!p[l]:!1}function Fa(){return zi}var Rf=Se({},mt,{key:function(l){if(l.key){var p=es[l.key]||l.key;if(p!=="Unidentified")return p}return l.type==="keypress"?(l=Pt(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Ks[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fa,charCode:function(l){return l.type==="keypress"?Pt(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Pt(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Nc=In(Rf),Of=Se({},ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rc=In(Of),Jm=Se({},mt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fa}),Ys=In(Jm),Oc=Se({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zm=In(Oc),ja=Se({},ql,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Qm=In(ja),Lo=[9,13,27,32],Xs=c&&"CompositionEvent"in window,cr=null;c&&"documentMode"in document&&(cr=document.documentMode);var kf=c&&"TextEvent"in window&&!cr,bi=c&&(!Xs||cr&&8<cr&&11>=cr),Mf=" ",Kl=!1;function Df(l,p){switch(l){case"keyup":return Lo.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kc(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Er=!1;function eg(l,p){switch(l){case"compositionend":return kc(p);case"keypress":return p.which!==32?null:(Kl=!0,Mf);case"textInput":return l=p.data,l===Mf&&Kl?null:l;default:return null}}function Mc(l,p){if(Er)return l==="compositionend"||!Xs&&Df(l,p)?(l=Pf(),Gl=Tc=co=null,Er=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return bi&&p.locale!=="ko"?null:p.data;default:return null}}var Ua={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function At(l){var p=l&&l.nodeName&&l.nodeName.toLowerCase();return p==="input"?!!Ua[l.type]:p==="textarea"}function Va(l,p,w,A){gc(A),p=Ff(p,"onChange"),0<p.length&&(w=new ye("onChange","change",null,w,A),l.push({event:w,listeners:p}))}var V=null,s=null;function u(l){LE(l,0)}function h(l){var p=Jl(l);if(_e(p))return l}function g(l,p){if(l==="change")return p}var y=!1;if(c){var x;if(c){var _="oninput"in document;if(!_){var T=document.createElement("div");T.setAttribute("oninput","return;"),_=typeof T.oninput=="function"}x=_}else x=!1;y=x&&(!document.documentMode||9<document.documentMode)}function O(){V&&(V.detachEvent("onpropertychange",j),s=V=null)}function j(l){if(l.propertyName==="value"&&h(s)){var p=[];Va(p,s,l,Pa(l)),Na(u,p)}}function z(l,p,w){l==="focusin"?(O(),V=p,s=w,V.attachEvent("onpropertychange",j)):l==="focusout"&&O()}function H(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return h(s)}function Y(l,p){if(l==="click")return h(p)}function Q(l,p){if(l==="input"||l==="change")return h(p)}function re(l,p){return l===p&&(l!==0||1/l===1/p)||l!==l&&p!==p}var oe=typeof Object.is=="function"?Object.is:re;function ge(l,p){if(oe(l,p))return!0;if(typeof l!="object"||l===null||typeof p!="object"||p===null)return!1;var w=Object.keys(l),A=Object.keys(p);if(w.length!==A.length)return!1;for(A=0;A<w.length;A++){var M=w[A];if(!f.call(p,M)||!oe(l[M],p[M]))return!1}return!0}function Re(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function ke(l,p){var w=Re(l);l=0;for(var A;w;){if(w.nodeType===3){if(A=l+w.textContent.length,l<=p&&A>=p)return{node:w,offset:p-l};l=A}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Re(w)}}function Te(l,p){return l&&p?l===p?!0:l&&l.nodeType===3?!1:p&&p.nodeType===3?Te(l,p.parentNode):"contains"in l?l.contains(p):l.compareDocumentPosition?!!(l.compareDocumentPosition(p)&16):!1:!1}function wt(){for(var l=window,p=Ke();p instanceof l.HTMLIFrameElement;){try{var w=typeof p.contentWindow.location.href=="string"}catch{w=!1}if(w)l=p.contentWindow;else break;p=Ke(l.document)}return p}function pt(l){var p=l&&l.nodeName&&l.nodeName.toLowerCase();return p&&(p==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||p==="textarea"||l.contentEditable==="true")}function Mr(l){var p=wt(),w=l.focusedElem,A=l.selectionRange;if(p!==w&&w&&w.ownerDocument&&Te(w.ownerDocument.documentElement,w)){if(A!==null&&pt(w)){if(p=A.start,l=A.end,l===void 0&&(l=p),"selectionStart"in w)w.selectionStart=p,w.selectionEnd=Math.min(l,w.value.length);else if(l=(p=w.ownerDocument||document)&&p.defaultView||window,l.getSelection){l=l.getSelection();var M=w.textContent.length,B=Math.min(A.start,M);A=A.end===void 0?B:Math.min(A.end,M),!l.extend&&B>A&&(M=A,A=B,B=M),M=ke(w,B);var $=ke(w,A);M&&$&&(l.rangeCount!==1||l.anchorNode!==M.node||l.anchorOffset!==M.offset||l.focusNode!==$.node||l.focusOffset!==$.offset)&&(p=p.createRange(),p.setStart(M.node,M.offset),l.removeAllRanges(),B>A?(l.addRange(p),l.extend($.node,$.offset)):(p.setEnd($.node,$.offset),l.addRange(p)))}}for(p=[],l=w;l=l.parentNode;)l.nodeType===1&&p.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<p.length;w++)l=p[w],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var Ei=c&&"documentMode"in document&&11>=document.documentMode,Bn=null,Bt=null,bn=null,_r=!1;function ts(l,p,w){var A=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;_r||Bn==null||Bn!==Ke(A)||(A=Bn,"selectionStart"in A&&pt(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),bn&&ge(bn,A)||(bn=A,A=Ff(Bt,"onSelect"),0<A.length&&(p=new ye("onSelect","select",null,p,w),l.push({event:p,listeners:A}),p.target=Bn)))}function fo(l,p){var w={};return w[l.toLowerCase()]=p.toLowerCase(),w["Webkit"+l]="webkit"+p,w["Moz"+l]="moz"+p,w}var Js={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionend:fo("Transition","TransitionEnd")},Dc={},IE={};c&&(IE=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function Lf(l){if(Dc[l])return Dc[l];if(!Js[l])return l;var p=Js[l],w;for(w in p)if(p.hasOwnProperty(w)&&w in IE)return Dc[l]=p[w];return l}var PE=Lf("animationend"),NE=Lf("animationiteration"),RE=Lf("animationstart"),OE=Lf("transitionend"),kE=new Map,ME="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zs(l,p){kE.set(l,p),o(p,[l])}for(var tg=0;tg<ME.length;tg++){var ng=ME[tg],t6=ng.toLowerCase(),n6=ng[0].toUpperCase()+ng.slice(1);Zs(t6,"on"+n6)}Zs(PE,"onAnimationEnd"),Zs(NE,"onAnimationIteration"),Zs(RE,"onAnimationStart"),Zs("dblclick","onDoubleClick"),Zs("focusin","onFocus"),Zs("focusout","onBlur"),Zs(OE,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lc));function DE(l,p,w){var A=l.type||"unknown-event";l.currentTarget=w,Or(A,p,void 0,l),l.currentTarget=null}function LE(l,p){p=(p&4)!==0;for(var w=0;w<l.length;w++){var A=l[w],M=A.event;A=A.listeners;e:{var B=void 0;if(p)for(var $=A.length-1;0<=$;$--){var J=A[$],ee=J.instance,xe=J.currentTarget;if(J=J.listener,ee!==B&&M.isPropagationStopped())break e;DE(M,J,xe),B=ee}else for($=0;$<A.length;$++){if(J=A[$],ee=J.instance,xe=J.currentTarget,J=J.listener,ee!==B&&M.isPropagationStopped())break e;DE(M,J,xe),B=ee}}}if(wr)throw l=Ue,wr=!1,Ue=null,l}function ln(l,p){var w=p[cg];w===void 0&&(w=p[cg]=new Set);var A=l+"__bubble";w.has(A)||(BE(p,l,2,!1),w.add(A))}function rg(l,p,w){var A=0;p&&(A|=4),BE(w,l,A,p)}var Bf="_reactListening"+Math.random().toString(36).slice(2);function Bc(l){if(!l[Bf]){l[Bf]=!0,r.forEach(function(w){w!=="selectionchange"&&(r6.has(w)||rg(w,!1,l),rg(w,!0,l))});var p=l.nodeType===9?l:l.ownerDocument;p===null||p[Bf]||(p[Bf]=!0,rg("selectionchange",!1,p))}}function BE(l,p,w,A){switch(Ac(p)){case 1:var M=If;break;case 4:M=Ma;break;default:M=Zo}w=M.bind(null,p,w,l),M=void 0,!vc||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(M=!0),A?M!==void 0?l.addEventListener(p,w,{capture:!0,passive:M}):l.addEventListener(p,w,!0):M!==void 0?l.addEventListener(p,w,{passive:M}):l.addEventListener(p,w,!1)}function ig(l,p,w,A,M){var B=A;if((p&1)===0&&(p&2)===0&&A!==null)e:for(;;){if(A===null)return;var $=A.tag;if($===3||$===4){var J=A.stateNode.containerInfo;if(J===M||J.nodeType===8&&J.parentNode===M)break;if($===4)for($=A.return;$!==null;){var ee=$.tag;if((ee===3||ee===4)&&(ee=$.stateNode.containerInfo,ee===M||ee.nodeType===8&&ee.parentNode===M))return;$=$.return}for(;J!==null;){if($=za(J),$===null)return;if(ee=$.tag,ee===5||ee===6){A=B=$;continue e}J=J.parentNode}}A=A.return}Na(function(){var xe=B,Ie=Pa(w),Ne=[];e:{var Ae=kE.get(l);if(Ae!==void 0){var Ve=ye,Ye=l;switch(l){case"keypress":if(Pt(w)===0)break e;case"keydown":case"keyup":Ve=Nc;break;case"focusin":Ye="focus",Ve=nn;break;case"focusout":Ye="blur",Ve=nn;break;case"beforeblur":case"afterblur":Ve=nn;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=Nf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=Ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=Ys;break;case PE:case NE:case RE:Ve=Qo;break;case OE:Ve=Zm;break;case"scroll":Ve=er;break;case"wheel":Ve=Qm;break;case"copy":case"cut":case"paste":Ve=ot;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Rc}var Xe=(p&4)!==0,Fn=!Xe&&l==="scroll",ce=Xe?Ae!==null?Ae+"Capture":null:Ae;Xe=[];for(var ie=xe,de;ie!==null;){de=ie;var De=de.stateNode;if(de.tag===5&&De!==null&&(de=De,ce!==null&&(De=Rr(ie,ce),De!=null&&Xe.push(Fc(ie,De,de)))),Fn)break;ie=ie.return}0<Xe.length&&(Ae=new Ve(Ae,Ye,null,w,Ie),Ne.push({event:Ae,listeners:Xe}))}}if((p&7)===0){e:{if(Ae=l==="mouseover"||l==="pointerover",Ve=l==="mouseout"||l==="pointerout",Ae&&w!==Xo&&(Ye=w.relatedTarget||w.fromElement)&&(za(Ye)||Ye[ns]))break e;if((Ve||Ae)&&(Ae=Ie.window===Ie?Ie:(Ae=Ie.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Ve?(Ye=w.relatedTarget||w.toElement,Ve=xe,Ye=Ye?za(Ye):null,Ye!==null&&(Fn=ti(Ye),Ye!==Fn||Ye.tag!==5&&Ye.tag!==6)&&(Ye=null)):(Ve=null,Ye=xe),Ve!==Ye)){if(Xe=Nf,De="onMouseLeave",ce="onMouseEnter",ie="mouse",(l==="pointerout"||l==="pointerover")&&(Xe=Rc,De="onPointerLeave",ce="onPointerEnter",ie="pointer"),Fn=Ve==null?Ae:Jl(Ve),de=Ye==null?Ae:Jl(Ye),Ae=new Xe(De,ie+"leave",Ve,w,Ie),Ae.target=Fn,Ae.relatedTarget=de,De=null,za(Ie)===xe&&(Xe=new Xe(ce,ie+"enter",Ye,w,Ie),Xe.target=de,Xe.relatedTarget=Fn,De=Xe),Fn=De,Ve&&Ye)t:{for(Xe=Ve,ce=Ye,ie=0,de=Xe;de;de=Yl(de))ie++;for(de=0,De=ce;De;De=Yl(De))de++;for(;0<ie-de;)Xe=Yl(Xe),ie--;for(;0<de-ie;)ce=Yl(ce),de--;for(;ie--;){if(Xe===ce||ce!==null&&Xe===ce.alternate)break t;Xe=Yl(Xe),ce=Yl(ce)}Xe=null}else Xe=null;Ve!==null&&FE(Ne,Ae,Ve,Xe,!1),Ye!==null&&Fn!==null&&FE(Ne,Fn,Ye,Xe,!0)}}e:{if(Ae=xe?Jl(xe):window,Ve=Ae.nodeName&&Ae.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Ae.type==="file")var Qe=g;else if(At(Ae))if(y)Qe=Q;else{Qe=H;var at=z}else(Ve=Ae.nodeName)&&Ve.toLowerCase()==="input"&&(Ae.type==="checkbox"||Ae.type==="radio")&&(Qe=Y);if(Qe&&(Qe=Qe(l,xe))){Va(Ne,Qe,w,Ie);break e}at&&at(l,Ae,xe),l==="focusout"&&(at=Ae._wrapperState)&&at.controlled&&Ae.type==="number"&&_t(Ae,"number",Ae.value)}switch(at=xe?Jl(xe):window,l){case"focusin":(At(at)||at.contentEditable==="true")&&(Bn=at,Bt=xe,bn=null);break;case"focusout":bn=Bt=Bn=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,ts(Ne,w,Ie);break;case"selectionchange":if(Ei)break;case"keydown":case"keyup":ts(Ne,w,Ie)}var lt;if(Xs)e:{switch(l){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Er?Df(l,w)&&(ft="onCompositionEnd"):l==="keydown"&&w.keyCode===229&&(ft="onCompositionStart");ft&&(bi&&w.locale!=="ko"&&(Er||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Er&&(lt=Pf()):(co=Ie,Tc="value"in co?co.value:co.textContent,Er=!0)),at=Ff(xe,ft),0<at.length&&(ft=new qt(ft,l,null,w,Ie),Ne.push({event:ft,listeners:at}),lt?ft.data=lt:(lt=kc(w),lt!==null&&(ft.data=lt)))),(lt=kf?eg(l,w):Mc(l,w))&&(xe=Ff(xe,"onBeforeInput"),0<xe.length&&(Ie=new qt("onBeforeInput","beforeinput",null,w,Ie),Ne.push({event:Ie,listeners:xe}),Ie.data=lt))}LE(Ne,p)})}function Fc(l,p,w){return{instance:l,listener:p,currentTarget:w}}function Ff(l,p){for(var w=p+"Capture",A=[];l!==null;){var M=l,B=M.stateNode;M.tag===5&&B!==null&&(M=B,B=Rr(l,w),B!=null&&A.unshift(Fc(l,B,M)),B=Rr(l,p),B!=null&&A.push(Fc(l,B,M))),l=l.return}return A}function Yl(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function FE(l,p,w,A,M){for(var B=p._reactName,$=[];w!==null&&w!==A;){var J=w,ee=J.alternate,xe=J.stateNode;if(ee!==null&&ee===A)break;J.tag===5&&xe!==null&&(J=xe,M?(ee=Rr(w,B),ee!=null&&$.unshift(Fc(w,ee,J))):M||(ee=Rr(w,B),ee!=null&&$.push(Fc(w,ee,J)))),w=w.return}$.length!==0&&l.push({event:p,listeners:$})}var i6=/\r\n?/g,o6=/\u0000|\uFFFD/g;function jE(l){return(typeof l=="string"?l:""+l).replace(i6,`
`).replace(o6,"")}function jf(l,p,w){if(p=jE(p),jE(l)!==p&&w)throw Error(n(425))}function Uf(){}var og=null,sg=null;function ag(l,p){return l==="textarea"||l==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var lg=typeof setTimeout=="function"?setTimeout:void 0,s6=typeof clearTimeout=="function"?clearTimeout:void 0,UE=typeof Promise=="function"?Promise:void 0,a6=typeof queueMicrotask=="function"?queueMicrotask:typeof UE<"u"?function(l){return UE.resolve(null).then(l).catch(l6)}:lg;function l6(l){setTimeout(function(){throw l})}function ug(l,p){var w=p,A=0;do{var M=w.nextSibling;if(l.removeChild(w),M&&M.nodeType===8)if(w=M.data,w==="/$"){if(A===0){l.removeChild(M),uo(p);return}A--}else w!=="$"&&w!=="$?"&&w!=="$!"||A++;w=M}while(w);uo(p)}function Qs(l){for(;l!=null;l=l.nextSibling){var p=l.nodeType;if(p===1||p===3)break;if(p===8){if(p=l.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return l}function VE(l){l=l.previousSibling;for(var p=0;l;){if(l.nodeType===8){var w=l.data;if(w==="$"||w==="$!"||w==="$?"){if(p===0)return l;p--}else w==="/$"&&p++}l=l.previousSibling}return null}var Xl=Math.random().toString(36).slice(2),Bo="__reactFiber$"+Xl,jc="__reactProps$"+Xl,ns="__reactContainer$"+Xl,cg="__reactEvents$"+Xl,u6="__reactListeners$"+Xl,c6="__reactHandles$"+Xl;function za(l){var p=l[Bo];if(p)return p;for(var w=l.parentNode;w;){if(p=w[ns]||w[Bo]){if(w=p.alternate,p.child!==null||w!==null&&w.child!==null)for(l=VE(l);l!==null;){if(w=l[Bo])return w;l=VE(l)}return p}l=w,w=l.parentNode}return null}function Uc(l){return l=l[Bo]||l[ns],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Jl(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function Vf(l){return l[jc]||null}var dg=[],Zl=-1;function ea(l){return{current:l}}function un(l){0>Zl||(l.current=dg[Zl],dg[Zl]=null,Zl--)}function rn(l,p){Zl++,dg[Zl]=l.current,l.current=p}var ta={},Dr=ea(ta),ni=ea(!1),$a=ta;function Ql(l,p){var w=l.type.contextTypes;if(!w)return ta;var A=l.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===p)return A.__reactInternalMemoizedMaskedChildContext;var M={},B;for(B in w)M[B]=p[B];return A&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=p,l.__reactInternalMemoizedMaskedChildContext=M),M}function ri(l){return l=l.childContextTypes,l!=null}function zf(){un(ni),un(Dr)}function zE(l,p,w){if(Dr.current!==ta)throw Error(n(168));rn(Dr,p),rn(ni,w)}function $E(l,p,w){var A=l.stateNode;if(p=p.childContextTypes,typeof A.getChildContext!="function")return w;A=A.getChildContext();for(var M in A)if(!(M in p))throw Error(n(108,st(l)||"Unknown",M));return Se({},w,A)}function $f(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||ta,$a=Dr.current,rn(Dr,l),rn(ni,ni.current),!0}function GE(l,p,w){var A=l.stateNode;if(!A)throw Error(n(169));w?(l=$E(l,p,$a),A.__reactInternalMemoizedMergedChildContext=l,un(ni),un(Dr),rn(Dr,l)):un(ni),rn(ni,w)}var rs=null,Gf=!1,fg=!1;function HE(l){rs===null?rs=[l]:rs.push(l)}function d6(l){Gf=!0,HE(l)}function na(){if(!fg&&rs!==null){fg=!0;var l=0,p=xt;try{var w=rs;for(xt=1;l<w.length;l++){var A=w[l];do A=A(!0);while(A!==null)}rs=null,Gf=!1}catch(M){throw rs!==null&&(rs=rs.slice(l+1)),vi(Ce,na),M}finally{xt=p,fg=!1}}return null}var eu=[],tu=0,Hf=null,qf=0,$i=[],Gi=0,Ga=null,is=1,os="";function Ha(l,p){eu[tu++]=qf,eu[tu++]=Hf,Hf=l,qf=p}function qE(l,p,w){$i[Gi++]=is,$i[Gi++]=os,$i[Gi++]=Ga,Ga=l;var A=is;l=os;var M=32-Gr(A)-1;A&=~(1<<M),w+=1;var B=32-Gr(p)+M;if(30<B){var $=M-M%5;B=(A&(1<<$)-1).toString(32),A>>=$,M-=$,is=1<<32-Gr(p)+M|w<<M|A,os=B+l}else is=1<<B|w<<M|A,os=l}function hg(l){l.return!==null&&(Ha(l,1),qE(l,1,0))}function pg(l){for(;l===Hf;)Hf=eu[--tu],eu[tu]=null,qf=eu[--tu],eu[tu]=null;for(;l===Ga;)Ga=$i[--Gi],$i[Gi]=null,os=$i[--Gi],$i[Gi]=null,is=$i[--Gi],$i[Gi]=null}var _i=null,Si=null,hn=!1,ho=null;function WE(l,p){var w=Ki(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=l,p=l.deletions,p===null?(l.deletions=[w],l.flags|=16):p.push(w)}function KE(l,p){switch(l.tag){case 5:var w=l.type;return p=p.nodeType!==1||w.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(l.stateNode=p,_i=l,Si=Qs(p.firstChild),!0):!1;case 6:return p=l.pendingProps===""||p.nodeType!==3?null:p,p!==null?(l.stateNode=p,_i=l,Si=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(w=Ga!==null?{id:is,overflow:os}:null,l.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=Ki(18,null,null,0),w.stateNode=p,w.return=l,l.child=w,_i=l,Si=null,!0):!1;default:return!1}}function mg(l){return(l.mode&1)!==0&&(l.flags&128)===0}function gg(l){if(hn){var p=Si;if(p){var w=p;if(!KE(l,p)){if(mg(l))throw Error(n(418));p=Qs(w.nextSibling);var A=_i;p&&KE(l,p)?WE(A,w):(l.flags=l.flags&-4097|2,hn=!1,_i=l)}}else{if(mg(l))throw Error(n(418));l.flags=l.flags&-4097|2,hn=!1,_i=l}}}function YE(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;_i=l}function Wf(l){if(l!==_i)return!1;if(!hn)return YE(l),hn=!0,!1;var p;if((p=l.tag!==3)&&!(p=l.tag!==5)&&(p=l.type,p=p!=="head"&&p!=="body"&&!ag(l.type,l.memoizedProps)),p&&(p=Si)){if(mg(l))throw XE(),Error(n(418));for(;p;)WE(l,p),p=Qs(p.nextSibling)}if(YE(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,p=0;l;){if(l.nodeType===8){var w=l.data;if(w==="/$"){if(p===0){Si=Qs(l.nextSibling);break e}p--}else w!=="$"&&w!=="$!"&&w!=="$?"||p++}l=l.nextSibling}Si=null}}else Si=_i?Qs(l.stateNode.nextSibling):null;return!0}function XE(){for(var l=Si;l;)l=Qs(l.nextSibling)}function nu(){Si=_i=null,hn=!1}function vg(l){ho===null?ho=[l]:ho.push(l)}var f6=U.ReactCurrentBatchConfig;function Vc(l,p,w){if(l=w.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var A=w.stateNode}if(!A)throw Error(n(147,l));var M=A,B=""+l;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===B?p.ref:(p=function($){var J=M.refs;$===null?delete J[B]:J[B]=$},p._stringRef=B,p)}if(typeof l!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,l))}return l}function Kf(l,p){throw l=Object.prototype.toString.call(p),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":l))}function JE(l){var p=l._init;return p(l._payload)}function ZE(l){function p(ce,ie){if(l){var de=ce.deletions;de===null?(ce.deletions=[ie],ce.flags|=16):de.push(ie)}}function w(ce,ie){if(!l)return null;for(;ie!==null;)p(ce,ie),ie=ie.sibling;return null}function A(ce,ie){for(ce=new Map;ie!==null;)ie.key!==null?ce.set(ie.key,ie):ce.set(ie.index,ie),ie=ie.sibling;return ce}function M(ce,ie){return ce=ca(ce,ie),ce.index=0,ce.sibling=null,ce}function B(ce,ie,de){return ce.index=de,l?(de=ce.alternate,de!==null?(de=de.index,de<ie?(ce.flags|=2,ie):de):(ce.flags|=2,ie)):(ce.flags|=1048576,ie)}function $(ce){return l&&ce.alternate===null&&(ce.flags|=2),ce}function J(ce,ie,de,De){return ie===null||ie.tag!==6?(ie=l1(de,ce.mode,De),ie.return=ce,ie):(ie=M(ie,de),ie.return=ce,ie)}function ee(ce,ie,de,De){var Qe=de.type;return Qe===W?Ie(ce,ie,de.props.children,De,de.key):ie!==null&&(ie.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===Oe&&JE(Qe)===ie.type)?(De=M(ie,de.props),De.ref=Vc(ce,ie,de),De.return=ce,De):(De=yh(de.type,de.key,de.props,null,ce.mode,De),De.ref=Vc(ce,ie,de),De.return=ce,De)}function xe(ce,ie,de,De){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==de.containerInfo||ie.stateNode.implementation!==de.implementation?(ie=u1(de,ce.mode,De),ie.return=ce,ie):(ie=M(ie,de.children||[]),ie.return=ce,ie)}function Ie(ce,ie,de,De,Qe){return ie===null||ie.tag!==7?(ie=Qa(de,ce.mode,De,Qe),ie.return=ce,ie):(ie=M(ie,de),ie.return=ce,ie)}function Ne(ce,ie,de){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=l1(""+ie,ce.mode,de),ie.return=ce,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case G:return de=yh(ie.type,ie.key,ie.props,null,ce.mode,de),de.ref=Vc(ce,null,ie),de.return=ce,de;case q:return ie=u1(ie,ce.mode,de),ie.return=ce,ie;case Oe:var De=ie._init;return Ne(ce,De(ie._payload),de)}if(Ro(ie)||Ee(ie))return ie=Qa(ie,ce.mode,de,null),ie.return=ce,ie;Kf(ce,ie)}return null}function Ae(ce,ie,de,De){var Qe=ie!==null?ie.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return Qe!==null?null:J(ce,ie,""+de,De);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case G:return de.key===Qe?ee(ce,ie,de,De):null;case q:return de.key===Qe?xe(ce,ie,de,De):null;case Oe:return Qe=de._init,Ae(ce,ie,Qe(de._payload),De)}if(Ro(de)||Ee(de))return Qe!==null?null:Ie(ce,ie,de,De,null);Kf(ce,de)}return null}function Ve(ce,ie,de,De,Qe){if(typeof De=="string"&&De!==""||typeof De=="number")return ce=ce.get(de)||null,J(ie,ce,""+De,Qe);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case G:return ce=ce.get(De.key===null?de:De.key)||null,ee(ie,ce,De,Qe);case q:return ce=ce.get(De.key===null?de:De.key)||null,xe(ie,ce,De,Qe);case Oe:var at=De._init;return Ve(ce,ie,de,at(De._payload),Qe)}if(Ro(De)||Ee(De))return ce=ce.get(de)||null,Ie(ie,ce,De,Qe,null);Kf(ie,De)}return null}function Ye(ce,ie,de,De){for(var Qe=null,at=null,lt=ie,ft=ie=0,hr=null;lt!==null&&ft<de.length;ft++){lt.index>ft?(hr=lt,lt=null):hr=lt.sibling;var Ot=Ae(ce,lt,de[ft],De);if(Ot===null){lt===null&&(lt=hr);break}l&&lt&&Ot.alternate===null&&p(ce,lt),ie=B(Ot,ie,ft),at===null?Qe=Ot:at.sibling=Ot,at=Ot,lt=hr}if(ft===de.length)return w(ce,lt),hn&&Ha(ce,ft),Qe;if(lt===null){for(;ft<de.length;ft++)lt=Ne(ce,de[ft],De),lt!==null&&(ie=B(lt,ie,ft),at===null?Qe=lt:at.sibling=lt,at=lt);return hn&&Ha(ce,ft),Qe}for(lt=A(ce,lt);ft<de.length;ft++)hr=Ve(lt,ce,ft,de[ft],De),hr!==null&&(l&&hr.alternate!==null&&lt.delete(hr.key===null?ft:hr.key),ie=B(hr,ie,ft),at===null?Qe=hr:at.sibling=hr,at=hr);return l&&lt.forEach(function(da){return p(ce,da)}),hn&&Ha(ce,ft),Qe}function Xe(ce,ie,de,De){var Qe=Ee(de);if(typeof Qe!="function")throw Error(n(150));if(de=Qe.call(de),de==null)throw Error(n(151));for(var at=Qe=null,lt=ie,ft=ie=0,hr=null,Ot=de.next();lt!==null&&!Ot.done;ft++,Ot=de.next()){lt.index>ft?(hr=lt,lt=null):hr=lt.sibling;var da=Ae(ce,lt,Ot.value,De);if(da===null){lt===null&&(lt=hr);break}l&&lt&&da.alternate===null&&p(ce,lt),ie=B(da,ie,ft),at===null?Qe=da:at.sibling=da,at=da,lt=hr}if(Ot.done)return w(ce,lt),hn&&Ha(ce,ft),Qe;if(lt===null){for(;!Ot.done;ft++,Ot=de.next())Ot=Ne(ce,Ot.value,De),Ot!==null&&(ie=B(Ot,ie,ft),at===null?Qe=Ot:at.sibling=Ot,at=Ot);return hn&&Ha(ce,ft),Qe}for(lt=A(ce,lt);!Ot.done;ft++,Ot=de.next())Ot=Ve(lt,ce,ft,Ot.value,De),Ot!==null&&(l&&Ot.alternate!==null&&lt.delete(Ot.key===null?ft:Ot.key),ie=B(Ot,ie,ft),at===null?Qe=Ot:at.sibling=Ot,at=Ot);return l&&lt.forEach(function(H6){return p(ce,H6)}),hn&&Ha(ce,ft),Qe}function Fn(ce,ie,de,De){if(typeof de=="object"&&de!==null&&de.type===W&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case G:e:{for(var Qe=de.key,at=ie;at!==null;){if(at.key===Qe){if(Qe=de.type,Qe===W){if(at.tag===7){w(ce,at.sibling),ie=M(at,de.props.children),ie.return=ce,ce=ie;break e}}else if(at.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===Oe&&JE(Qe)===at.type){w(ce,at.sibling),ie=M(at,de.props),ie.ref=Vc(ce,at,de),ie.return=ce,ce=ie;break e}w(ce,at);break}else p(ce,at);at=at.sibling}de.type===W?(ie=Qa(de.props.children,ce.mode,De,de.key),ie.return=ce,ce=ie):(De=yh(de.type,de.key,de.props,null,ce.mode,De),De.ref=Vc(ce,ie,de),De.return=ce,ce=De)}return $(ce);case q:e:{for(at=de.key;ie!==null;){if(ie.key===at)if(ie.tag===4&&ie.stateNode.containerInfo===de.containerInfo&&ie.stateNode.implementation===de.implementation){w(ce,ie.sibling),ie=M(ie,de.children||[]),ie.return=ce,ce=ie;break e}else{w(ce,ie);break}else p(ce,ie);ie=ie.sibling}ie=u1(de,ce.mode,De),ie.return=ce,ce=ie}return $(ce);case Oe:return at=de._init,Fn(ce,ie,at(de._payload),De)}if(Ro(de))return Ye(ce,ie,de,De);if(Ee(de))return Xe(ce,ie,de,De);Kf(ce,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,ie!==null&&ie.tag===6?(w(ce,ie.sibling),ie=M(ie,de),ie.return=ce,ce=ie):(w(ce,ie),ie=l1(de,ce.mode,De),ie.return=ce,ce=ie),$(ce)):w(ce,ie)}return Fn}var ru=ZE(!0),QE=ZE(!1),Yf=ea(null),Xf=null,iu=null,yg=null;function xg(){yg=iu=Xf=null}function wg(l){var p=Yf.current;un(Yf),l._currentValue=p}function bg(l,p,w){for(;l!==null;){var A=l.alternate;if((l.childLanes&p)!==p?(l.childLanes|=p,A!==null&&(A.childLanes|=p)):A!==null&&(A.childLanes&p)!==p&&(A.childLanes|=p),l===w)break;l=l.return}}function ou(l,p){Xf=l,yg=iu=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&p)!==0&&(ii=!0),l.firstContext=null)}function Hi(l){var p=l._currentValue;if(yg!==l)if(l={context:l,memoizedValue:p,next:null},iu===null){if(Xf===null)throw Error(n(308));iu=l,Xf.dependencies={lanes:0,firstContext:l}}else iu=iu.next=l;return p}var qa=null;function Eg(l){qa===null?qa=[l]:qa.push(l)}function e2(l,p,w,A){var M=p.interleaved;return M===null?(w.next=w,Eg(p)):(w.next=M.next,M.next=w),p.interleaved=w,ss(l,A)}function ss(l,p){l.lanes|=p;var w=l.alternate;for(w!==null&&(w.lanes|=p),w=l,l=l.return;l!==null;)l.childLanes|=p,w=l.alternate,w!==null&&(w.childLanes|=p),w=l,l=l.return;return w.tag===3?w.stateNode:null}var ra=!1;function _g(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t2(l,p){l=l.updateQueue,p.updateQueue===l&&(p.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function as(l,p){return{eventTime:l,lane:p,tag:0,payload:null,callback:null,next:null}}function ia(l,p,w){var A=l.updateQueue;if(A===null)return null;if(A=A.shared,(Nt&2)!==0){var M=A.pending;return M===null?p.next=p:(p.next=M.next,M.next=p),A.pending=p,ss(l,w)}return M=A.interleaved,M===null?(p.next=p,Eg(A)):(p.next=M.next,M.next=p),A.interleaved=p,ss(l,w)}function Jf(l,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var A=p.lanes;A&=l.pendingLanes,w|=A,p.lanes=w,Tn(l,w)}}function n2(l,p){var w=l.updateQueue,A=l.alternate;if(A!==null&&(A=A.updateQueue,w===A)){var M=null,B=null;if(w=w.firstBaseUpdate,w!==null){do{var $={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};B===null?M=B=$:B=B.next=$,w=w.next}while(w!==null);B===null?M=B=p:B=B.next=p}else M=B=p;w={baseState:A.baseState,firstBaseUpdate:M,lastBaseUpdate:B,shared:A.shared,effects:A.effects},l.updateQueue=w;return}l=w.lastBaseUpdate,l===null?w.firstBaseUpdate=p:l.next=p,w.lastBaseUpdate=p}function Zf(l,p,w,A){var M=l.updateQueue;ra=!1;var B=M.firstBaseUpdate,$=M.lastBaseUpdate,J=M.shared.pending;if(J!==null){M.shared.pending=null;var ee=J,xe=ee.next;ee.next=null,$===null?B=xe:$.next=xe,$=ee;var Ie=l.alternate;Ie!==null&&(Ie=Ie.updateQueue,J=Ie.lastBaseUpdate,J!==$&&(J===null?Ie.firstBaseUpdate=xe:J.next=xe,Ie.lastBaseUpdate=ee))}if(B!==null){var Ne=M.baseState;$=0,Ie=xe=ee=null,J=B;do{var Ae=J.lane,Ve=J.eventTime;if((A&Ae)===Ae){Ie!==null&&(Ie=Ie.next={eventTime:Ve,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var Ye=l,Xe=J;switch(Ae=p,Ve=w,Xe.tag){case 1:if(Ye=Xe.payload,typeof Ye=="function"){Ne=Ye.call(Ve,Ne,Ae);break e}Ne=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=Xe.payload,Ae=typeof Ye=="function"?Ye.call(Ve,Ne,Ae):Ye,Ae==null)break e;Ne=Se({},Ne,Ae);break e;case 2:ra=!0}}J.callback!==null&&J.lane!==0&&(l.flags|=64,Ae=M.effects,Ae===null?M.effects=[J]:Ae.push(J))}else Ve={eventTime:Ve,lane:Ae,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Ie===null?(xe=Ie=Ve,ee=Ne):Ie=Ie.next=Ve,$|=Ae;if(J=J.next,J===null){if(J=M.shared.pending,J===null)break;Ae=J,J=Ae.next,Ae.next=null,M.lastBaseUpdate=Ae,M.shared.pending=null}}while(!0);if(Ie===null&&(ee=Ne),M.baseState=ee,M.firstBaseUpdate=xe,M.lastBaseUpdate=Ie,p=M.shared.interleaved,p!==null){M=p;do $|=M.lane,M=M.next;while(M!==p)}else B===null&&(M.shared.lanes=0);Ya|=$,l.lanes=$,l.memoizedState=Ne}}function r2(l,p,w){if(l=p.effects,p.effects=null,l!==null)for(p=0;p<l.length;p++){var A=l[p],M=A.callback;if(M!==null){if(A.callback=null,A=w,typeof M!="function")throw Error(n(191,M));M.call(A)}}}var zc={},Fo=ea(zc),$c=ea(zc),Gc=ea(zc);function Wa(l){if(l===zc)throw Error(n(174));return l}function Sg(l,p){switch(rn(Gc,p),rn($c,l),rn(Fo,zc),l=p.nodeType,l){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Fl(null,"");break;default:l=l===8?p.parentNode:p,p=l.namespaceURI||null,l=l.tagName,p=Fl(p,l)}un(Fo),rn(Fo,p)}function su(){un(Fo),un($c),un(Gc)}function i2(l){Wa(Gc.current);var p=Wa(Fo.current),w=Fl(p,l.type);p!==w&&(rn($c,l),rn(Fo,w))}function Cg(l){$c.current===l&&(un(Fo),un($c))}var En=ea(0);function Qf(l){for(var p=l;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Ag=[];function Tg(){for(var l=0;l<Ag.length;l++)Ag[l]._workInProgressVersionPrimary=null;Ag.length=0}var eh=U.ReactCurrentDispatcher,Ig=U.ReactCurrentBatchConfig,Ka=0,_n=null,tr=null,dr=null,th=!1,Hc=!1,qc=0,h6=0;function Lr(){throw Error(n(321))}function Pg(l,p){if(p===null)return!1;for(var w=0;w<p.length&&w<l.length;w++)if(!oe(l[w],p[w]))return!1;return!0}function Ng(l,p,w,A,M,B){if(Ka=B,_n=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,eh.current=l===null||l.memoizedState===null?v6:y6,l=w(A,M),Hc){B=0;do{if(Hc=!1,qc=0,25<=B)throw Error(n(301));B+=1,dr=tr=null,p.updateQueue=null,eh.current=x6,l=w(A,M)}while(Hc)}if(eh.current=ih,p=tr!==null&&tr.next!==null,Ka=0,dr=tr=_n=null,th=!1,p)throw Error(n(300));return l}function Rg(){var l=qc!==0;return qc=0,l}function jo(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?_n.memoizedState=dr=l:dr=dr.next=l,dr}function qi(){if(tr===null){var l=_n.alternate;l=l!==null?l.memoizedState:null}else l=tr.next;var p=dr===null?_n.memoizedState:dr.next;if(p!==null)dr=p,tr=l;else{if(l===null)throw Error(n(310));tr=l,l={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},dr===null?_n.memoizedState=dr=l:dr=dr.next=l}return dr}function Wc(l,p){return typeof p=="function"?p(l):p}function Og(l){var p=qi(),w=p.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=l;var A=tr,M=A.baseQueue,B=w.pending;if(B!==null){if(M!==null){var $=M.next;M.next=B.next,B.next=$}A.baseQueue=M=B,w.pending=null}if(M!==null){B=M.next,A=A.baseState;var J=$=null,ee=null,xe=B;do{var Ie=xe.lane;if((Ka&Ie)===Ie)ee!==null&&(ee=ee.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),A=xe.hasEagerState?xe.eagerState:l(A,xe.action);else{var Ne={lane:Ie,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};ee===null?(J=ee=Ne,$=A):ee=ee.next=Ne,_n.lanes|=Ie,Ya|=Ie}xe=xe.next}while(xe!==null&&xe!==B);ee===null?$=A:ee.next=J,oe(A,p.memoizedState)||(ii=!0),p.memoizedState=A,p.baseState=$,p.baseQueue=ee,w.lastRenderedState=A}if(l=w.interleaved,l!==null){M=l;do B=M.lane,_n.lanes|=B,Ya|=B,M=M.next;while(M!==l)}else M===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function kg(l){var p=qi(),w=p.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=l;var A=w.dispatch,M=w.pending,B=p.memoizedState;if(M!==null){w.pending=null;var $=M=M.next;do B=l(B,$.action),$=$.next;while($!==M);oe(B,p.memoizedState)||(ii=!0),p.memoizedState=B,p.baseQueue===null&&(p.baseState=B),w.lastRenderedState=B}return[B,A]}function o2(){}function s2(l,p){var w=_n,A=qi(),M=p(),B=!oe(A.memoizedState,M);if(B&&(A.memoizedState=M,ii=!0),A=A.queue,Mg(u2.bind(null,w,A,l),[l]),A.getSnapshot!==p||B||dr!==null&&dr.memoizedState.tag&1){if(w.flags|=2048,Kc(9,l2.bind(null,w,A,M,p),void 0,null),fr===null)throw Error(n(349));(Ka&30)!==0||a2(w,p,M)}return M}function a2(l,p,w){l.flags|=16384,l={getSnapshot:p,value:w},p=_n.updateQueue,p===null?(p={lastEffect:null,stores:null},_n.updateQueue=p,p.stores=[l]):(w=p.stores,w===null?p.stores=[l]:w.push(l))}function l2(l,p,w,A){p.value=w,p.getSnapshot=A,c2(p)&&d2(l)}function u2(l,p,w){return w(function(){c2(p)&&d2(l)})}function c2(l){var p=l.getSnapshot;l=l.value;try{var w=p();return!oe(l,w)}catch{return!0}}function d2(l){var p=ss(l,1);p!==null&&vo(p,l,1,-1)}function f2(l){var p=jo();return typeof l=="function"&&(l=l()),p.memoizedState=p.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wc,lastRenderedState:l},p.queue=l,l=l.dispatch=g6.bind(null,_n,l),[p.memoizedState,l]}function Kc(l,p,w,A){return l={tag:l,create:p,destroy:w,deps:A,next:null},p=_n.updateQueue,p===null?(p={lastEffect:null,stores:null},_n.updateQueue=p,p.lastEffect=l.next=l):(w=p.lastEffect,w===null?p.lastEffect=l.next=l:(A=w.next,w.next=l,l.next=A,p.lastEffect=l)),l}function h2(){return qi().memoizedState}function nh(l,p,w,A){var M=jo();_n.flags|=l,M.memoizedState=Kc(1|p,w,void 0,A===void 0?null:A)}function rh(l,p,w,A){var M=qi();A=A===void 0?null:A;var B=void 0;if(tr!==null){var $=tr.memoizedState;if(B=$.destroy,A!==null&&Pg(A,$.deps)){M.memoizedState=Kc(p,w,B,A);return}}_n.flags|=l,M.memoizedState=Kc(1|p,w,B,A)}function p2(l,p){return nh(8390656,8,l,p)}function Mg(l,p){return rh(2048,8,l,p)}function m2(l,p){return rh(4,2,l,p)}function g2(l,p){return rh(4,4,l,p)}function v2(l,p){if(typeof p=="function")return l=l(),p(l),function(){p(null)};if(p!=null)return l=l(),p.current=l,function(){p.current=null}}function y2(l,p,w){return w=w!=null?w.concat([l]):null,rh(4,4,v2.bind(null,p,l),w)}function Dg(){}function x2(l,p){var w=qi();p=p===void 0?null:p;var A=w.memoizedState;return A!==null&&p!==null&&Pg(p,A[1])?A[0]:(w.memoizedState=[l,p],l)}function w2(l,p){var w=qi();p=p===void 0?null:p;var A=w.memoizedState;return A!==null&&p!==null&&Pg(p,A[1])?A[0]:(l=l(),w.memoizedState=[l,p],l)}function b2(l,p,w){return(Ka&21)===0?(l.baseState&&(l.baseState=!1,ii=!0),l.memoizedState=w):(oe(w,p)||(w=Jn(),_n.lanes|=w,Ya|=w,l.baseState=!0),p)}function p6(l,p){var w=xt;xt=w!==0&&4>w?w:4,l(!0);var A=Ig.transition;Ig.transition={};try{l(!1),p()}finally{xt=w,Ig.transition=A}}function E2(){return qi().memoizedState}function m6(l,p,w){var A=la(l);if(w={lane:A,action:w,hasEagerState:!1,eagerState:null,next:null},_2(l))S2(p,w);else if(w=e2(l,p,w,A),w!==null){var M=qr();vo(w,l,A,M),C2(w,p,A)}}function g6(l,p,w){var A=la(l),M={lane:A,action:w,hasEagerState:!1,eagerState:null,next:null};if(_2(l))S2(p,M);else{var B=l.alternate;if(l.lanes===0&&(B===null||B.lanes===0)&&(B=p.lastRenderedReducer,B!==null))try{var $=p.lastRenderedState,J=B($,w);if(M.hasEagerState=!0,M.eagerState=J,oe(J,$)){var ee=p.interleaved;ee===null?(M.next=M,Eg(p)):(M.next=ee.next,ee.next=M),p.interleaved=M;return}}catch{}finally{}w=e2(l,p,M,A),w!==null&&(M=qr(),vo(w,l,A,M),C2(w,p,A))}}function _2(l){var p=l.alternate;return l===_n||p!==null&&p===_n}function S2(l,p){Hc=th=!0;var w=l.pending;w===null?p.next=p:(p.next=w.next,w.next=p),l.pending=p}function C2(l,p,w){if((w&4194240)!==0){var A=p.lanes;A&=l.pendingLanes,w|=A,p.lanes=w,Tn(l,w)}}var ih={readContext:Hi,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},v6={readContext:Hi,useCallback:function(l,p){return jo().memoizedState=[l,p===void 0?null:p],l},useContext:Hi,useEffect:p2,useImperativeHandle:function(l,p,w){return w=w!=null?w.concat([l]):null,nh(4194308,4,v2.bind(null,p,l),w)},useLayoutEffect:function(l,p){return nh(4194308,4,l,p)},useInsertionEffect:function(l,p){return nh(4,2,l,p)},useMemo:function(l,p){var w=jo();return p=p===void 0?null:p,l=l(),w.memoizedState=[l,p],l},useReducer:function(l,p,w){var A=jo();return p=w!==void 0?w(p):p,A.memoizedState=A.baseState=p,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:p},A.queue=l,l=l.dispatch=m6.bind(null,_n,l),[A.memoizedState,l]},useRef:function(l){var p=jo();return l={current:l},p.memoizedState=l},useState:f2,useDebugValue:Dg,useDeferredValue:function(l){return jo().memoizedState=l},useTransition:function(){var l=f2(!1),p=l[0];return l=p6.bind(null,l[1]),jo().memoizedState=l,[p,l]},useMutableSource:function(){},useSyncExternalStore:function(l,p,w){var A=_n,M=jo();if(hn){if(w===void 0)throw Error(n(407));w=w()}else{if(w=p(),fr===null)throw Error(n(349));(Ka&30)!==0||a2(A,p,w)}M.memoizedState=w;var B={value:w,getSnapshot:p};return M.queue=B,p2(u2.bind(null,A,B,l),[l]),A.flags|=2048,Kc(9,l2.bind(null,A,B,w,p),void 0,null),w},useId:function(){var l=jo(),p=fr.identifierPrefix;if(hn){var w=os,A=is;w=(A&~(1<<32-Gr(A)-1)).toString(32)+w,p=":"+p+"R"+w,w=qc++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=h6++,p=":"+p+"r"+w.toString(32)+":";return l.memoizedState=p},unstable_isNewReconciler:!1},y6={readContext:Hi,useCallback:x2,useContext:Hi,useEffect:Mg,useImperativeHandle:y2,useInsertionEffect:m2,useLayoutEffect:g2,useMemo:w2,useReducer:Og,useRef:h2,useState:function(){return Og(Wc)},useDebugValue:Dg,useDeferredValue:function(l){var p=qi();return b2(p,tr.memoizedState,l)},useTransition:function(){var l=Og(Wc)[0],p=qi().memoizedState;return[l,p]},useMutableSource:o2,useSyncExternalStore:s2,useId:E2,unstable_isNewReconciler:!1},x6={readContext:Hi,useCallback:x2,useContext:Hi,useEffect:Mg,useImperativeHandle:y2,useInsertionEffect:m2,useLayoutEffect:g2,useMemo:w2,useReducer:kg,useRef:h2,useState:function(){return kg(Wc)},useDebugValue:Dg,useDeferredValue:function(l){var p=qi();return tr===null?p.memoizedState=l:b2(p,tr.memoizedState,l)},useTransition:function(){var l=kg(Wc)[0],p=qi().memoizedState;return[l,p]},useMutableSource:o2,useSyncExternalStore:s2,useId:E2,unstable_isNewReconciler:!1};function po(l,p){if(l&&l.defaultProps){p=Se({},p),l=l.defaultProps;for(var w in l)p[w]===void 0&&(p[w]=l[w]);return p}return p}function Lg(l,p,w,A){p=l.memoizedState,w=w(A,p),w=w==null?p:Se({},p,w),l.memoizedState=w,l.lanes===0&&(l.updateQueue.baseState=w)}var oh={isMounted:function(l){return(l=l._reactInternals)?ti(l)===l:!1},enqueueSetState:function(l,p,w){l=l._reactInternals;var A=qr(),M=la(l),B=as(A,M);B.payload=p,w!=null&&(B.callback=w),p=ia(l,B,M),p!==null&&(vo(p,l,M,A),Jf(p,l,M))},enqueueReplaceState:function(l,p,w){l=l._reactInternals;var A=qr(),M=la(l),B=as(A,M);B.tag=1,B.payload=p,w!=null&&(B.callback=w),p=ia(l,B,M),p!==null&&(vo(p,l,M,A),Jf(p,l,M))},enqueueForceUpdate:function(l,p){l=l._reactInternals;var w=qr(),A=la(l),M=as(w,A);M.tag=2,p!=null&&(M.callback=p),p=ia(l,M,A),p!==null&&(vo(p,l,A,w),Jf(p,l,A))}};function A2(l,p,w,A,M,B,$){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(A,B,$):p.prototype&&p.prototype.isPureReactComponent?!ge(w,A)||!ge(M,B):!0}function T2(l,p,w){var A=!1,M=ta,B=p.contextType;return typeof B=="object"&&B!==null?B=Hi(B):(M=ri(p)?$a:Dr.current,A=p.contextTypes,B=(A=A!=null)?Ql(l,M):ta),p=new p(w,B),l.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=oh,l.stateNode=p,p._reactInternals=l,A&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=M,l.__reactInternalMemoizedMaskedChildContext=B),p}function I2(l,p,w,A){l=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,A),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,A),p.state!==l&&oh.enqueueReplaceState(p,p.state,null)}function Bg(l,p,w,A){var M=l.stateNode;M.props=w,M.state=l.memoizedState,M.refs={},_g(l);var B=p.contextType;typeof B=="object"&&B!==null?M.context=Hi(B):(B=ri(p)?$a:Dr.current,M.context=Ql(l,B)),M.state=l.memoizedState,B=p.getDerivedStateFromProps,typeof B=="function"&&(Lg(l,p,B,w),M.state=l.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(p=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),p!==M.state&&oh.enqueueReplaceState(M,M.state,null),Zf(l,w,M,A),M.state=l.memoizedState),typeof M.componentDidMount=="function"&&(l.flags|=4194308)}function au(l,p){try{var w="",A=p;do w+=Ze(A),A=A.return;while(A);var M=w}catch(B){M=`
Error generating stack: `+B.message+`
`+B.stack}return{value:l,source:p,stack:M,digest:null}}function Fg(l,p,w){return{value:l,source:null,stack:w??null,digest:p??null}}function jg(l,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var w6=typeof WeakMap=="function"?WeakMap:Map;function P2(l,p,w){w=as(-1,w),w.tag=3,w.payload={element:null};var A=p.value;return w.callback=function(){fh||(fh=!0,e1=A),jg(l,p)},w}function N2(l,p,w){w=as(-1,w),w.tag=3;var A=l.type.getDerivedStateFromError;if(typeof A=="function"){var M=p.value;w.payload=function(){return A(M)},w.callback=function(){jg(l,p)}}var B=l.stateNode;return B!==null&&typeof B.componentDidCatch=="function"&&(w.callback=function(){jg(l,p),typeof A!="function"&&(sa===null?sa=new Set([this]):sa.add(this));var $=p.stack;this.componentDidCatch(p.value,{componentStack:$!==null?$:""})}),w}function R2(l,p,w){var A=l.pingCache;if(A===null){A=l.pingCache=new w6;var M=new Set;A.set(p,M)}else M=A.get(p),M===void 0&&(M=new Set,A.set(p,M));M.has(w)||(M.add(w),l=M6.bind(null,l,p,w),p.then(l,l))}function O2(l){do{var p;if((p=l.tag===13)&&(p=l.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return l;l=l.return}while(l!==null);return null}function k2(l,p,w,A,M){return(l.mode&1)===0?(l===p?l.flags|=65536:(l.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=as(-1,1),p.tag=2,ia(w,p,1))),w.lanes|=1),l):(l.flags|=65536,l.lanes=M,l)}var b6=U.ReactCurrentOwner,ii=!1;function Hr(l,p,w,A){p.child=l===null?QE(p,null,w,A):ru(p,l.child,w,A)}function M2(l,p,w,A,M){w=w.render;var B=p.ref;return ou(p,M),A=Ng(l,p,w,A,B,M),w=Rg(),l!==null&&!ii?(p.updateQueue=l.updateQueue,p.flags&=-2053,l.lanes&=~M,ls(l,p,M)):(hn&&w&&hg(p),p.flags|=1,Hr(l,p,A,M),p.child)}function D2(l,p,w,A,M){if(l===null){var B=w.type;return typeof B=="function"&&!a1(B)&&B.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=B,L2(l,p,B,A,M)):(l=yh(w.type,null,A,p,p.mode,M),l.ref=p.ref,l.return=p,p.child=l)}if(B=l.child,(l.lanes&M)===0){var $=B.memoizedProps;if(w=w.compare,w=w!==null?w:ge,w($,A)&&l.ref===p.ref)return ls(l,p,M)}return p.flags|=1,l=ca(B,A),l.ref=p.ref,l.return=p,p.child=l}function L2(l,p,w,A,M){if(l!==null){var B=l.memoizedProps;if(ge(B,A)&&l.ref===p.ref)if(ii=!1,p.pendingProps=A=B,(l.lanes&M)!==0)(l.flags&131072)!==0&&(ii=!0);else return p.lanes=l.lanes,ls(l,p,M)}return Ug(l,p,w,A,M)}function B2(l,p,w){var A=p.pendingProps,M=A.children,B=l!==null?l.memoizedState:null;if(A.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(uu,Ci),Ci|=w;else{if((w&1073741824)===0)return l=B!==null?B.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:l,cachePool:null,transitions:null},p.updateQueue=null,rn(uu,Ci),Ci|=l,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},A=B!==null?B.baseLanes:w,rn(uu,Ci),Ci|=A}else B!==null?(A=B.baseLanes|w,p.memoizedState=null):A=w,rn(uu,Ci),Ci|=A;return Hr(l,p,M,w),p.child}function F2(l,p){var w=p.ref;(l===null&&w!==null||l!==null&&l.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function Ug(l,p,w,A,M){var B=ri(w)?$a:Dr.current;return B=Ql(p,B),ou(p,M),w=Ng(l,p,w,A,B,M),A=Rg(),l!==null&&!ii?(p.updateQueue=l.updateQueue,p.flags&=-2053,l.lanes&=~M,ls(l,p,M)):(hn&&A&&hg(p),p.flags|=1,Hr(l,p,w,M),p.child)}function j2(l,p,w,A,M){if(ri(w)){var B=!0;$f(p)}else B=!1;if(ou(p,M),p.stateNode===null)ah(l,p),T2(p,w,A),Bg(p,w,A,M),A=!0;else if(l===null){var $=p.stateNode,J=p.memoizedProps;$.props=J;var ee=$.context,xe=w.contextType;typeof xe=="object"&&xe!==null?xe=Hi(xe):(xe=ri(w)?$a:Dr.current,xe=Ql(p,xe));var Ie=w.getDerivedStateFromProps,Ne=typeof Ie=="function"||typeof $.getSnapshotBeforeUpdate=="function";Ne||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(J!==A||ee!==xe)&&I2(p,$,A,xe),ra=!1;var Ae=p.memoizedState;$.state=Ae,Zf(p,A,$,M),ee=p.memoizedState,J!==A||Ae!==ee||ni.current||ra?(typeof Ie=="function"&&(Lg(p,w,Ie,A),ee=p.memoizedState),(J=ra||A2(p,w,J,A,Ae,ee,xe))?(Ne||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(p.flags|=4194308)):(typeof $.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=A,p.memoizedState=ee),$.props=A,$.state=ee,$.context=xe,A=J):(typeof $.componentDidMount=="function"&&(p.flags|=4194308),A=!1)}else{$=p.stateNode,t2(l,p),J=p.memoizedProps,xe=p.type===p.elementType?J:po(p.type,J),$.props=xe,Ne=p.pendingProps,Ae=$.context,ee=w.contextType,typeof ee=="object"&&ee!==null?ee=Hi(ee):(ee=ri(w)?$a:Dr.current,ee=Ql(p,ee));var Ve=w.getDerivedStateFromProps;(Ie=typeof Ve=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(J!==Ne||Ae!==ee)&&I2(p,$,A,ee),ra=!1,Ae=p.memoizedState,$.state=Ae,Zf(p,A,$,M);var Ye=p.memoizedState;J!==Ne||Ae!==Ye||ni.current||ra?(typeof Ve=="function"&&(Lg(p,w,Ve,A),Ye=p.memoizedState),(xe=ra||A2(p,w,xe,A,Ae,Ye,ee)||!1)?(Ie||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(A,Ye,ee),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(A,Ye,ee)),typeof $.componentDidUpdate=="function"&&(p.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof $.componentDidUpdate!="function"||J===l.memoizedProps&&Ae===l.memoizedState||(p.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||J===l.memoizedProps&&Ae===l.memoizedState||(p.flags|=1024),p.memoizedProps=A,p.memoizedState=Ye),$.props=A,$.state=Ye,$.context=ee,A=xe):(typeof $.componentDidUpdate!="function"||J===l.memoizedProps&&Ae===l.memoizedState||(p.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||J===l.memoizedProps&&Ae===l.memoizedState||(p.flags|=1024),A=!1)}return Vg(l,p,w,A,B,M)}function Vg(l,p,w,A,M,B){F2(l,p);var $=(p.flags&128)!==0;if(!A&&!$)return M&&GE(p,w,!1),ls(l,p,B);A=p.stateNode,b6.current=p;var J=$&&typeof w.getDerivedStateFromError!="function"?null:A.render();return p.flags|=1,l!==null&&$?(p.child=ru(p,l.child,null,B),p.child=ru(p,null,J,B)):Hr(l,p,J,B),p.memoizedState=A.state,M&&GE(p,w,!0),p.child}function U2(l){var p=l.stateNode;p.pendingContext?zE(l,p.pendingContext,p.pendingContext!==p.context):p.context&&zE(l,p.context,!1),Sg(l,p.containerInfo)}function V2(l,p,w,A,M){return nu(),vg(M),p.flags|=256,Hr(l,p,w,A),p.child}var zg={dehydrated:null,treeContext:null,retryLane:0};function $g(l){return{baseLanes:l,cachePool:null,transitions:null}}function z2(l,p,w){var A=p.pendingProps,M=En.current,B=!1,$=(p.flags&128)!==0,J;if((J=$)||(J=l!==null&&l.memoizedState===null?!1:(M&2)!==0),J?(B=!0,p.flags&=-129):(l===null||l.memoizedState!==null)&&(M|=1),rn(En,M&1),l===null)return gg(p),l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((p.mode&1)===0?p.lanes=1:l.data==="$!"?p.lanes=8:p.lanes=1073741824,null):($=A.children,l=A.fallback,B?(A=p.mode,B=p.child,$={mode:"hidden",children:$},(A&1)===0&&B!==null?(B.childLanes=0,B.pendingProps=$):B=xh($,A,0,null),l=Qa(l,A,w,null),B.return=p,l.return=p,B.sibling=l,p.child=B,p.child.memoizedState=$g(w),p.memoizedState=zg,l):Gg(p,$));if(M=l.memoizedState,M!==null&&(J=M.dehydrated,J!==null))return E6(l,p,$,A,J,M,w);if(B){B=A.fallback,$=p.mode,M=l.child,J=M.sibling;var ee={mode:"hidden",children:A.children};return($&1)===0&&p.child!==M?(A=p.child,A.childLanes=0,A.pendingProps=ee,p.deletions=null):(A=ca(M,ee),A.subtreeFlags=M.subtreeFlags&14680064),J!==null?B=ca(J,B):(B=Qa(B,$,w,null),B.flags|=2),B.return=p,A.return=p,A.sibling=B,p.child=A,A=B,B=p.child,$=l.child.memoizedState,$=$===null?$g(w):{baseLanes:$.baseLanes|w,cachePool:null,transitions:$.transitions},B.memoizedState=$,B.childLanes=l.childLanes&~w,p.memoizedState=zg,A}return B=l.child,l=B.sibling,A=ca(B,{mode:"visible",children:A.children}),(p.mode&1)===0&&(A.lanes=w),A.return=p,A.sibling=null,l!==null&&(w=p.deletions,w===null?(p.deletions=[l],p.flags|=16):w.push(l)),p.child=A,p.memoizedState=null,A}function Gg(l,p){return p=xh({mode:"visible",children:p},l.mode,0,null),p.return=l,l.child=p}function sh(l,p,w,A){return A!==null&&vg(A),ru(p,l.child,null,w),l=Gg(p,p.pendingProps.children),l.flags|=2,p.memoizedState=null,l}function E6(l,p,w,A,M,B,$){if(w)return p.flags&256?(p.flags&=-257,A=Fg(Error(n(422))),sh(l,p,$,A)):p.memoizedState!==null?(p.child=l.child,p.flags|=128,null):(B=A.fallback,M=p.mode,A=xh({mode:"visible",children:A.children},M,0,null),B=Qa(B,M,$,null),B.flags|=2,A.return=p,B.return=p,A.sibling=B,p.child=A,(p.mode&1)!==0&&ru(p,l.child,null,$),p.child.memoizedState=$g($),p.memoizedState=zg,B);if((p.mode&1)===0)return sh(l,p,$,null);if(M.data==="$!"){if(A=M.nextSibling&&M.nextSibling.dataset,A)var J=A.dgst;return A=J,B=Error(n(419)),A=Fg(B,A,void 0),sh(l,p,$,A)}if(J=($&l.childLanes)!==0,ii||J){if(A=fr,A!==null){switch($&-$){case 4:M=2;break;case 16:M=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:M=32;break;case 536870912:M=268435456;break;default:M=0}M=(M&(A.suspendedLanes|$))!==0?0:M,M!==0&&M!==B.retryLane&&(B.retryLane=M,ss(l,M),vo(A,l,M,-1))}return s1(),A=Fg(Error(n(421))),sh(l,p,$,A)}return M.data==="$?"?(p.flags|=128,p.child=l.child,p=D6.bind(null,l),M._reactRetry=p,null):(l=B.treeContext,Si=Qs(M.nextSibling),_i=p,hn=!0,ho=null,l!==null&&($i[Gi++]=is,$i[Gi++]=os,$i[Gi++]=Ga,is=l.id,os=l.overflow,Ga=p),p=Gg(p,A.children),p.flags|=4096,p)}function $2(l,p,w){l.lanes|=p;var A=l.alternate;A!==null&&(A.lanes|=p),bg(l.return,p,w)}function Hg(l,p,w,A,M){var B=l.memoizedState;B===null?l.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:A,tail:w,tailMode:M}:(B.isBackwards=p,B.rendering=null,B.renderingStartTime=0,B.last=A,B.tail=w,B.tailMode=M)}function G2(l,p,w){var A=p.pendingProps,M=A.revealOrder,B=A.tail;if(Hr(l,p,A.children,w),A=En.current,(A&2)!==0)A=A&1|2,p.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=p.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&$2(l,w,p);else if(l.tag===19)$2(l,w,p);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===p)break e;for(;l.sibling===null;){if(l.return===null||l.return===p)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}A&=1}if(rn(En,A),(p.mode&1)===0)p.memoizedState=null;else switch(M){case"forwards":for(w=p.child,M=null;w!==null;)l=w.alternate,l!==null&&Qf(l)===null&&(M=w),w=w.sibling;w=M,w===null?(M=p.child,p.child=null):(M=w.sibling,w.sibling=null),Hg(p,!1,M,w,B);break;case"backwards":for(w=null,M=p.child,p.child=null;M!==null;){if(l=M.alternate,l!==null&&Qf(l)===null){p.child=M;break}l=M.sibling,M.sibling=w,w=M,M=l}Hg(p,!0,w,null,B);break;case"together":Hg(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function ah(l,p){(p.mode&1)===0&&l!==null&&(l.alternate=null,p.alternate=null,p.flags|=2)}function ls(l,p,w){if(l!==null&&(p.dependencies=l.dependencies),Ya|=p.lanes,(w&p.childLanes)===0)return null;if(l!==null&&p.child!==l.child)throw Error(n(153));if(p.child!==null){for(l=p.child,w=ca(l,l.pendingProps),p.child=w,w.return=p;l.sibling!==null;)l=l.sibling,w=w.sibling=ca(l,l.pendingProps),w.return=p;w.sibling=null}return p.child}function _6(l,p,w){switch(p.tag){case 3:U2(p),nu();break;case 5:i2(p);break;case 1:ri(p.type)&&$f(p);break;case 4:Sg(p,p.stateNode.containerInfo);break;case 10:var A=p.type._context,M=p.memoizedProps.value;rn(Yf,A._currentValue),A._currentValue=M;break;case 13:if(A=p.memoizedState,A!==null)return A.dehydrated!==null?(rn(En,En.current&1),p.flags|=128,null):(w&p.child.childLanes)!==0?z2(l,p,w):(rn(En,En.current&1),l=ls(l,p,w),l!==null?l.sibling:null);rn(En,En.current&1);break;case 19:if(A=(w&p.childLanes)!==0,(l.flags&128)!==0){if(A)return G2(l,p,w);p.flags|=128}if(M=p.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),rn(En,En.current),A)break;return null;case 22:case 23:return p.lanes=0,B2(l,p,w)}return ls(l,p,w)}var H2,qg,q2,W2;H2=function(l,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)l.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},qg=function(){},q2=function(l,p,w,A){var M=l.memoizedProps;if(M!==A){l=p.stateNode,Wa(Fo.current);var B=null;switch(w){case"input":M=dt(l,M),A=dt(l,A),B=[];break;case"select":M=Se({},M,{value:void 0}),A=Se({},A,{value:void 0}),B=[];break;case"textarea":M=js(l,M),A=js(l,A),B=[];break;default:typeof M.onClick!="function"&&typeof A.onClick=="function"&&(l.onclick=Uf)}Lt(w,A);var $;w=null;for(xe in M)if(!A.hasOwnProperty(xe)&&M.hasOwnProperty(xe)&&M[xe]!=null)if(xe==="style"){var J=M[xe];for($ in J)J.hasOwnProperty($)&&(w||(w={}),w[$]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(i.hasOwnProperty(xe)?B||(B=[]):(B=B||[]).push(xe,null));for(xe in A){var ee=A[xe];if(J=M?.[xe],A.hasOwnProperty(xe)&&ee!==J&&(ee!=null||J!=null))if(xe==="style")if(J){for($ in J)!J.hasOwnProperty($)||ee&&ee.hasOwnProperty($)||(w||(w={}),w[$]="");for($ in ee)ee.hasOwnProperty($)&&J[$]!==ee[$]&&(w||(w={}),w[$]=ee[$])}else w||(B||(B=[]),B.push(xe,w)),w=ee;else xe==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,J=J?J.__html:void 0,ee!=null&&J!==ee&&(B=B||[]).push(xe,ee)):xe==="children"?typeof ee!="string"&&typeof ee!="number"||(B=B||[]).push(xe,""+ee):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(i.hasOwnProperty(xe)?(ee!=null&&xe==="onScroll"&&ln("scroll",l),B||J===ee||(B=[])):(B=B||[]).push(xe,ee))}w&&(B=B||[]).push("style",w);var xe=B;(p.updateQueue=xe)&&(p.flags|=4)}},W2=function(l,p,w,A){w!==A&&(p.flags|=4)};function Yc(l,p){if(!hn)switch(l.tailMode){case"hidden":p=l.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?l.tail=null:w.sibling=null;break;case"collapsed":w=l.tail;for(var A=null;w!==null;)w.alternate!==null&&(A=w),w=w.sibling;A===null?p||l.tail===null?l.tail=null:l.tail.sibling=null:A.sibling=null}}function Br(l){var p=l.alternate!==null&&l.alternate.child===l.child,w=0,A=0;if(p)for(var M=l.child;M!==null;)w|=M.lanes|M.childLanes,A|=M.subtreeFlags&14680064,A|=M.flags&14680064,M.return=l,M=M.sibling;else for(M=l.child;M!==null;)w|=M.lanes|M.childLanes,A|=M.subtreeFlags,A|=M.flags,M.return=l,M=M.sibling;return l.subtreeFlags|=A,l.childLanes=w,p}function S6(l,p,w){var A=p.pendingProps;switch(pg(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(p),null;case 1:return ri(p.type)&&zf(),Br(p),null;case 3:return A=p.stateNode,su(),un(ni),un(Dr),Tg(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(l===null||l.child===null)&&(Wf(p)?p.flags|=4:l===null||l.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,ho!==null&&(r1(ho),ho=null))),qg(l,p),Br(p),null;case 5:Cg(p);var M=Wa(Gc.current);if(w=p.type,l!==null&&p.stateNode!=null)q2(l,p,w,A,M),l.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!A){if(p.stateNode===null)throw Error(n(166));return Br(p),null}if(l=Wa(Fo.current),Wf(p)){A=p.stateNode,w=p.type;var B=p.memoizedProps;switch(A[Bo]=p,A[jc]=B,l=(p.mode&1)!==0,w){case"dialog":ln("cancel",A),ln("close",A);break;case"iframe":case"object":case"embed":ln("load",A);break;case"video":case"audio":for(M=0;M<Lc.length;M++)ln(Lc[M],A);break;case"source":ln("error",A);break;case"img":case"image":case"link":ln("error",A),ln("load",A);break;case"details":ln("toggle",A);break;case"input":It(A,B),ln("invalid",A);break;case"select":A._wrapperState={wasMultiple:!!B.multiple},ln("invalid",A);break;case"textarea":pc(A,B),ln("invalid",A)}Lt(w,B),M=null;for(var $ in B)if(B.hasOwnProperty($)){var J=B[$];$==="children"?typeof J=="string"?A.textContent!==J&&(B.suppressHydrationWarning!==!0&&jf(A.textContent,J,l),M=["children",J]):typeof J=="number"&&A.textContent!==""+J&&(B.suppressHydrationWarning!==!0&&jf(A.textContent,J,l),M=["children",""+J]):i.hasOwnProperty($)&&J!=null&&$==="onScroll"&&ln("scroll",A)}switch(w){case"input":Me(A),Rt(A,B,!0);break;case"textarea":Me(A),Bl(A);break;case"select":case"option":break;default:typeof B.onClick=="function"&&(A.onclick=Uf)}A=M,p.updateQueue=A,A!==null&&(p.flags|=4)}else{$=M.nodeType===9?M:M.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Zr(w)),l==="http://www.w3.org/1999/xhtml"?w==="script"?(l=$.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof A.is=="string"?l=$.createElement(w,{is:A.is}):(l=$.createElement(w),w==="select"&&($=l,A.multiple?$.multiple=!0:A.size&&($.size=A.size))):l=$.createElementNS(l,w),l[Bo]=p,l[jc]=A,H2(l,p,!1,!1),p.stateNode=l;e:{switch($=Qt(w,A),w){case"dialog":ln("cancel",l),ln("close",l),M=A;break;case"iframe":case"object":case"embed":ln("load",l),M=A;break;case"video":case"audio":for(M=0;M<Lc.length;M++)ln(Lc[M],l);M=A;break;case"source":ln("error",l),M=A;break;case"img":case"image":case"link":ln("error",l),ln("load",l),M=A;break;case"details":ln("toggle",l),M=A;break;case"input":It(l,A),M=dt(l,A),ln("invalid",l);break;case"option":M=A;break;case"select":l._wrapperState={wasMultiple:!!A.multiple},M=Se({},A,{value:void 0}),ln("invalid",l);break;case"textarea":pc(l,A),M=js(l,A),ln("invalid",l);break;default:M=A}Lt(w,M),J=M;for(B in J)if(J.hasOwnProperty(B)){var ee=J[B];B==="style"?Le(l,ee):B==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&lr(l,ee)):B==="children"?typeof ee=="string"?(w!=="textarea"||ee!=="")&&Us(l,ee):typeof ee=="number"&&Us(l,""+ee):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(i.hasOwnProperty(B)?ee!=null&&B==="onScroll"&&ln("scroll",l):ee!=null&&L(l,B,ee,$))}switch(w){case"input":Me(l),Rt(l,A,!1);break;case"textarea":Me(l),Bl(l);break;case"option":A.value!=null&&l.setAttribute("value",""+it(A.value));break;case"select":l.multiple=!!A.multiple,B=A.value,B!=null?ze(l,!!A.multiple,B,!1):A.defaultValue!=null&&ze(l,!!A.multiple,A.defaultValue,!0);break;default:typeof M.onClick=="function"&&(l.onclick=Uf)}switch(w){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}}A&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Br(p),null;case 6:if(l&&p.stateNode!=null)W2(l,p,l.memoizedProps,A);else{if(typeof A!="string"&&p.stateNode===null)throw Error(n(166));if(w=Wa(Gc.current),Wa(Fo.current),Wf(p)){if(A=p.stateNode,w=p.memoizedProps,A[Bo]=p,(B=A.nodeValue!==w)&&(l=_i,l!==null))switch(l.tag){case 3:jf(A.nodeValue,w,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&jf(A.nodeValue,w,(l.mode&1)!==0)}B&&(p.flags|=4)}else A=(w.nodeType===9?w:w.ownerDocument).createTextNode(A),A[Bo]=p,p.stateNode=A}return Br(p),null;case 13:if(un(En),A=p.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(hn&&Si!==null&&(p.mode&1)!==0&&(p.flags&128)===0)XE(),nu(),p.flags|=98560,B=!1;else if(B=Wf(p),A!==null&&A.dehydrated!==null){if(l===null){if(!B)throw Error(n(318));if(B=p.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(n(317));B[Bo]=p}else nu(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Br(p),B=!1}else ho!==null&&(r1(ho),ho=null),B=!0;if(!B)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=w,p):(A=A!==null,A!==(l!==null&&l.memoizedState!==null)&&A&&(p.child.flags|=8192,(p.mode&1)!==0&&(l===null||(En.current&1)!==0?nr===0&&(nr=3):s1())),p.updateQueue!==null&&(p.flags|=4),Br(p),null);case 4:return su(),qg(l,p),l===null&&Bc(p.stateNode.containerInfo),Br(p),null;case 10:return wg(p.type._context),Br(p),null;case 17:return ri(p.type)&&zf(),Br(p),null;case 19:if(un(En),B=p.memoizedState,B===null)return Br(p),null;if(A=(p.flags&128)!==0,$=B.rendering,$===null)if(A)Yc(B,!1);else{if(nr!==0||l!==null&&(l.flags&128)!==0)for(l=p.child;l!==null;){if($=Qf(l),$!==null){for(p.flags|=128,Yc(B,!1),A=$.updateQueue,A!==null&&(p.updateQueue=A,p.flags|=4),p.subtreeFlags=0,A=w,w=p.child;w!==null;)B=w,l=A,B.flags&=14680066,$=B.alternate,$===null?(B.childLanes=0,B.lanes=l,B.child=null,B.subtreeFlags=0,B.memoizedProps=null,B.memoizedState=null,B.updateQueue=null,B.dependencies=null,B.stateNode=null):(B.childLanes=$.childLanes,B.lanes=$.lanes,B.child=$.child,B.subtreeFlags=0,B.deletions=null,B.memoizedProps=$.memoizedProps,B.memoizedState=$.memoizedState,B.updateQueue=$.updateQueue,B.type=$.type,l=$.dependencies,B.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),w=w.sibling;return rn(En,En.current&1|2),p.child}l=l.sibling}B.tail!==null&&jt()>cu&&(p.flags|=128,A=!0,Yc(B,!1),p.lanes=4194304)}else{if(!A)if(l=Qf($),l!==null){if(p.flags|=128,A=!0,w=l.updateQueue,w!==null&&(p.updateQueue=w,p.flags|=4),Yc(B,!0),B.tail===null&&B.tailMode==="hidden"&&!$.alternate&&!hn)return Br(p),null}else 2*jt()-B.renderingStartTime>cu&&w!==1073741824&&(p.flags|=128,A=!0,Yc(B,!1),p.lanes=4194304);B.isBackwards?($.sibling=p.child,p.child=$):(w=B.last,w!==null?w.sibling=$:p.child=$,B.last=$)}return B.tail!==null?(p=B.tail,B.rendering=p,B.tail=p.sibling,B.renderingStartTime=jt(),p.sibling=null,w=En.current,rn(En,A?w&1|2:w&1),p):(Br(p),null);case 22:case 23:return o1(),A=p.memoizedState!==null,l!==null&&l.memoizedState!==null!==A&&(p.flags|=8192),A&&(p.mode&1)!==0?(Ci&1073741824)!==0&&(Br(p),p.subtreeFlags&6&&(p.flags|=8192)):Br(p),null;case 24:return null;case 25:return null}throw Error(n(156,p.tag))}function C6(l,p){switch(pg(p),p.tag){case 1:return ri(p.type)&&zf(),l=p.flags,l&65536?(p.flags=l&-65537|128,p):null;case 3:return su(),un(ni),un(Dr),Tg(),l=p.flags,(l&65536)!==0&&(l&128)===0?(p.flags=l&-65537|128,p):null;case 5:return Cg(p),null;case 13:if(un(En),l=p.memoizedState,l!==null&&l.dehydrated!==null){if(p.alternate===null)throw Error(n(340));nu()}return l=p.flags,l&65536?(p.flags=l&-65537|128,p):null;case 19:return un(En),null;case 4:return su(),null;case 10:return wg(p.type._context),null;case 22:case 23:return o1(),null;case 24:return null;default:return null}}var lh=!1,Fr=!1,A6=typeof WeakSet=="function"?WeakSet:Set,He=null;function lu(l,p){var w=l.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(A){Pn(l,p,A)}else w.current=null}function Wg(l,p,w){try{w()}catch(A){Pn(l,p,A)}}var K2=!1;function T6(l,p){if(og=Do,l=wt(),pt(l)){if("selectionStart"in l)var w={start:l.selectionStart,end:l.selectionEnd};else e:{w=(w=l.ownerDocument)&&w.defaultView||window;var A=w.getSelection&&w.getSelection();if(A&&A.rangeCount!==0){w=A.anchorNode;var M=A.anchorOffset,B=A.focusNode;A=A.focusOffset;try{w.nodeType,B.nodeType}catch{w=null;break e}var $=0,J=-1,ee=-1,xe=0,Ie=0,Ne=l,Ae=null;t:for(;;){for(var Ve;Ne!==w||M!==0&&Ne.nodeType!==3||(J=$+M),Ne!==B||A!==0&&Ne.nodeType!==3||(ee=$+A),Ne.nodeType===3&&($+=Ne.nodeValue.length),(Ve=Ne.firstChild)!==null;)Ae=Ne,Ne=Ve;for(;;){if(Ne===l)break t;if(Ae===w&&++xe===M&&(J=$),Ae===B&&++Ie===A&&(ee=$),(Ve=Ne.nextSibling)!==null)break;Ne=Ae,Ae=Ne.parentNode}Ne=Ve}w=J===-1||ee===-1?null:{start:J,end:ee}}else w=null}w=w||{start:0,end:0}}else w=null;for(sg={focusedElem:l,selectionRange:w},Do=!1,He=p;He!==null;)if(p=He,l=p.child,(p.subtreeFlags&1028)!==0&&l!==null)l.return=p,He=l;else for(;He!==null;){p=He;try{var Ye=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Ye!==null){var Xe=Ye.memoizedProps,Fn=Ye.memoizedState,ce=p.stateNode,ie=ce.getSnapshotBeforeUpdate(p.elementType===p.type?Xe:po(p.type,Xe),Fn);ce.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var de=p.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(De){Pn(p,p.return,De)}if(l=p.sibling,l!==null){l.return=p.return,He=l;break}He=p.return}return Ye=K2,K2=!1,Ye}function Xc(l,p,w){var A=p.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var M=A=A.next;do{if((M.tag&l)===l){var B=M.destroy;M.destroy=void 0,B!==void 0&&Wg(p,w,B)}M=M.next}while(M!==A)}}function uh(l,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&l)===l){var A=w.create;w.destroy=A()}w=w.next}while(w!==p)}}function Kg(l){var p=l.ref;if(p!==null){var w=l.stateNode;switch(l.tag){case 5:l=w;break;default:l=w}typeof p=="function"?p(l):p.current=l}}function Y2(l){var p=l.alternate;p!==null&&(l.alternate=null,Y2(p)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(p=l.stateNode,p!==null&&(delete p[Bo],delete p[jc],delete p[cg],delete p[u6],delete p[c6])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function X2(l){return l.tag===5||l.tag===3||l.tag===4}function J2(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||X2(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Yg(l,p,w){var A=l.tag;if(A===5||A===6)l=l.stateNode,p?w.nodeType===8?w.parentNode.insertBefore(l,p):w.insertBefore(l,p):(w.nodeType===8?(p=w.parentNode,p.insertBefore(l,w)):(p=w,p.appendChild(l)),w=w._reactRootContainer,w!=null||p.onclick!==null||(p.onclick=Uf));else if(A!==4&&(l=l.child,l!==null))for(Yg(l,p,w),l=l.sibling;l!==null;)Yg(l,p,w),l=l.sibling}function Xg(l,p,w){var A=l.tag;if(A===5||A===6)l=l.stateNode,p?w.insertBefore(l,p):w.appendChild(l);else if(A!==4&&(l=l.child,l!==null))for(Xg(l,p,w),l=l.sibling;l!==null;)Xg(l,p,w),l=l.sibling}var Sr=null,mo=!1;function oa(l,p,w){for(w=w.child;w!==null;)Z2(l,p,w),w=w.sibling}function Z2(l,p,w){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Tt,w)}catch{}switch(w.tag){case 5:Fr||lu(w,p);case 6:var A=Sr,M=mo;Sr=null,oa(l,p,w),Sr=A,mo=M,Sr!==null&&(mo?(l=Sr,w=w.stateNode,l.nodeType===8?l.parentNode.removeChild(w):l.removeChild(w)):Sr.removeChild(w.stateNode));break;case 18:Sr!==null&&(mo?(l=Sr,w=w.stateNode,l.nodeType===8?ug(l.parentNode,w):l.nodeType===1&&ug(l,w),uo(l)):ug(Sr,w.stateNode));break;case 4:A=Sr,M=mo,Sr=w.stateNode.containerInfo,mo=!0,oa(l,p,w),Sr=A,mo=M;break;case 0:case 11:case 14:case 15:if(!Fr&&(A=w.updateQueue,A!==null&&(A=A.lastEffect,A!==null))){M=A=A.next;do{var B=M,$=B.destroy;B=B.tag,$!==void 0&&((B&2)!==0||(B&4)!==0)&&Wg(w,p,$),M=M.next}while(M!==A)}oa(l,p,w);break;case 1:if(!Fr&&(lu(w,p),A=w.stateNode,typeof A.componentWillUnmount=="function"))try{A.props=w.memoizedProps,A.state=w.memoizedState,A.componentWillUnmount()}catch(J){Pn(w,p,J)}oa(l,p,w);break;case 21:oa(l,p,w);break;case 22:w.mode&1?(Fr=(A=Fr)||w.memoizedState!==null,oa(l,p,w),Fr=A):oa(l,p,w);break;default:oa(l,p,w)}}function Q2(l){var p=l.updateQueue;if(p!==null){l.updateQueue=null;var w=l.stateNode;w===null&&(w=l.stateNode=new A6),p.forEach(function(A){var M=L6.bind(null,l,A);w.has(A)||(w.add(A),A.then(M,M))})}}function go(l,p){var w=p.deletions;if(w!==null)for(var A=0;A<w.length;A++){var M=w[A];try{var B=l,$=p,J=$;e:for(;J!==null;){switch(J.tag){case 5:Sr=J.stateNode,mo=!1;break e;case 3:Sr=J.stateNode.containerInfo,mo=!0;break e;case 4:Sr=J.stateNode.containerInfo,mo=!0;break e}J=J.return}if(Sr===null)throw Error(n(160));Z2(B,$,M),Sr=null,mo=!1;var ee=M.alternate;ee!==null&&(ee.return=null),M.return=null}catch(xe){Pn(M,p,xe)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)e_(p,l),p=p.sibling}function e_(l,p){var w=l.alternate,A=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(go(p,l),Uo(l),A&4){try{Xc(3,l,l.return),uh(3,l)}catch(Xe){Pn(l,l.return,Xe)}try{Xc(5,l,l.return)}catch(Xe){Pn(l,l.return,Xe)}}break;case 1:go(p,l),Uo(l),A&512&&w!==null&&lu(w,w.return);break;case 5:if(go(p,l),Uo(l),A&512&&w!==null&&lu(w,w.return),l.flags&32){var M=l.stateNode;try{Us(M,"")}catch(Xe){Pn(l,l.return,Xe)}}if(A&4&&(M=l.stateNode,M!=null)){var B=l.memoizedProps,$=w!==null?w.memoizedProps:B,J=l.type,ee=l.updateQueue;if(l.updateQueue=null,ee!==null)try{J==="input"&&B.type==="radio"&&B.name!=null&&An(M,B),Qt(J,$);var xe=Qt(J,B);for($=0;$<ee.length;$+=2){var Ie=ee[$],Ne=ee[$+1];Ie==="style"?Le(M,Ne):Ie==="dangerouslySetInnerHTML"?lr(M,Ne):Ie==="children"?Us(M,Ne):L(M,Ie,Ne,xe)}switch(J){case"input":zt(M,B);break;case"textarea":Bi(M,B);break;case"select":var Ae=M._wrapperState.wasMultiple;M._wrapperState.wasMultiple=!!B.multiple;var Ve=B.value;Ve!=null?ze(M,!!B.multiple,Ve,!1):Ae!==!!B.multiple&&(B.defaultValue!=null?ze(M,!!B.multiple,B.defaultValue,!0):ze(M,!!B.multiple,B.multiple?[]:"",!1))}M[jc]=B}catch(Xe){Pn(l,l.return,Xe)}}break;case 6:if(go(p,l),Uo(l),A&4){if(l.stateNode===null)throw Error(n(162));M=l.stateNode,B=l.memoizedProps;try{M.nodeValue=B}catch(Xe){Pn(l,l.return,Xe)}}break;case 3:if(go(p,l),Uo(l),A&4&&w!==null&&w.memoizedState.isDehydrated)try{uo(p.containerInfo)}catch(Xe){Pn(l,l.return,Xe)}break;case 4:go(p,l),Uo(l);break;case 13:go(p,l),Uo(l),M=l.child,M.flags&8192&&(B=M.memoizedState!==null,M.stateNode.isHidden=B,!B||M.alternate!==null&&M.alternate.memoizedState!==null||(Qg=jt())),A&4&&Q2(l);break;case 22:if(Ie=w!==null&&w.memoizedState!==null,l.mode&1?(Fr=(xe=Fr)||Ie,go(p,l),Fr=xe):go(p,l),Uo(l),A&8192){if(xe=l.memoizedState!==null,(l.stateNode.isHidden=xe)&&!Ie&&(l.mode&1)!==0)for(He=l,Ie=l.child;Ie!==null;){for(Ne=He=Ie;He!==null;){switch(Ae=He,Ve=Ae.child,Ae.tag){case 0:case 11:case 14:case 15:Xc(4,Ae,Ae.return);break;case 1:lu(Ae,Ae.return);var Ye=Ae.stateNode;if(typeof Ye.componentWillUnmount=="function"){A=Ae,w=Ae.return;try{p=A,Ye.props=p.memoizedProps,Ye.state=p.memoizedState,Ye.componentWillUnmount()}catch(Xe){Pn(A,w,Xe)}}break;case 5:lu(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){r_(Ne);continue}}Ve!==null?(Ve.return=Ae,He=Ve):r_(Ne)}Ie=Ie.sibling}e:for(Ie=null,Ne=l;;){if(Ne.tag===5){if(Ie===null){Ie=Ne;try{M=Ne.stateNode,xe?(B=M.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none"):(J=Ne.stateNode,ee=Ne.memoizedProps.style,$=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,J.style.display=wn("display",$))}catch(Xe){Pn(l,l.return,Xe)}}}else if(Ne.tag===6){if(Ie===null)try{Ne.stateNode.nodeValue=xe?"":Ne.memoizedProps}catch(Xe){Pn(l,l.return,Xe)}}else if((Ne.tag!==22&&Ne.tag!==23||Ne.memoizedState===null||Ne===l)&&Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}if(Ne===l)break e;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===l)break e;Ie===Ne&&(Ie=null),Ne=Ne.return}Ie===Ne&&(Ie=null),Ne.sibling.return=Ne.return,Ne=Ne.sibling}}break;case 19:go(p,l),Uo(l),A&4&&Q2(l);break;case 21:break;default:go(p,l),Uo(l)}}function Uo(l){var p=l.flags;if(p&2){try{e:{for(var w=l.return;w!==null;){if(X2(w)){var A=w;break e}w=w.return}throw Error(n(160))}switch(A.tag){case 5:var M=A.stateNode;A.flags&32&&(Us(M,""),A.flags&=-33);var B=J2(l);Xg(l,B,M);break;case 3:case 4:var $=A.stateNode.containerInfo,J=J2(l);Yg(l,J,$);break;default:throw Error(n(161))}}catch(ee){Pn(l,l.return,ee)}l.flags&=-3}p&4096&&(l.flags&=-4097)}function I6(l,p,w){He=l,t_(l)}function t_(l,p,w){for(var A=(l.mode&1)!==0;He!==null;){var M=He,B=M.child;if(M.tag===22&&A){var $=M.memoizedState!==null||lh;if(!$){var J=M.alternate,ee=J!==null&&J.memoizedState!==null||Fr;J=lh;var xe=Fr;if(lh=$,(Fr=ee)&&!xe)for(He=M;He!==null;)$=He,ee=$.child,$.tag===22&&$.memoizedState!==null?i_(M):ee!==null?(ee.return=$,He=ee):i_(M);for(;B!==null;)He=B,t_(B),B=B.sibling;He=M,lh=J,Fr=xe}n_(l)}else(M.subtreeFlags&8772)!==0&&B!==null?(B.return=M,He=B):n_(l)}}function n_(l){for(;He!==null;){var p=He;if((p.flags&8772)!==0){var w=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Fr||uh(5,p);break;case 1:var A=p.stateNode;if(p.flags&4&&!Fr)if(w===null)A.componentDidMount();else{var M=p.elementType===p.type?w.memoizedProps:po(p.type,w.memoizedProps);A.componentDidUpdate(M,w.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var B=p.updateQueue;B!==null&&r2(p,B,A);break;case 3:var $=p.updateQueue;if($!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=p.child.stateNode;break;case 1:w=p.child.stateNode}r2(p,$,w)}break;case 5:var J=p.stateNode;if(w===null&&p.flags&4){w=J;var ee=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&w.focus();break;case"img":ee.src&&(w.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var xe=p.alternate;if(xe!==null){var Ie=xe.memoizedState;if(Ie!==null){var Ne=Ie.dehydrated;Ne!==null&&uo(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Fr||p.flags&512&&Kg(p)}catch(Ae){Pn(p,p.return,Ae)}}if(p===l){He=null;break}if(w=p.sibling,w!==null){w.return=p.return,He=w;break}He=p.return}}function r_(l){for(;He!==null;){var p=He;if(p===l){He=null;break}var w=p.sibling;if(w!==null){w.return=p.return,He=w;break}He=p.return}}function i_(l){for(;He!==null;){var p=He;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{uh(4,p)}catch(ee){Pn(p,w,ee)}break;case 1:var A=p.stateNode;if(typeof A.componentDidMount=="function"){var M=p.return;try{A.componentDidMount()}catch(ee){Pn(p,M,ee)}}var B=p.return;try{Kg(p)}catch(ee){Pn(p,B,ee)}break;case 5:var $=p.return;try{Kg(p)}catch(ee){Pn(p,$,ee)}}}catch(ee){Pn(p,p.return,ee)}if(p===l){He=null;break}var J=p.sibling;if(J!==null){J.return=p.return,He=J;break}He=p.return}}var P6=Math.ceil,ch=U.ReactCurrentDispatcher,Jg=U.ReactCurrentOwner,Wi=U.ReactCurrentBatchConfig,Nt=0,fr=null,$n=null,Cr=0,Ci=0,uu=ea(0),nr=0,Jc=null,Ya=0,dh=0,Zg=0,Zc=null,oi=null,Qg=0,cu=1/0,us=null,fh=!1,e1=null,sa=null,hh=!1,aa=null,ph=0,Qc=0,t1=null,mh=-1,gh=0;function qr(){return(Nt&6)!==0?jt():mh!==-1?mh:mh=jt()}function la(l){return(l.mode&1)===0?1:(Nt&2)!==0&&Cr!==0?Cr&-Cr:f6.transition!==null?(gh===0&&(gh=Jn()),gh):(l=xt,l!==0||(l=window.event,l=l===void 0?16:Ac(l.type)),l)}function vo(l,p,w,A){if(50<Qc)throw Qc=0,t1=null,Error(n(185));K(l,w,A),((Nt&2)===0||l!==fr)&&(l===fr&&((Nt&2)===0&&(dh|=w),nr===4&&ua(l,Cr)),si(l,A),w===1&&Nt===0&&(p.mode&1)===0&&(cu=jt()+500,Gf&&na()))}function si(l,p){var w=l.callbackNode;$s(l,p);var A=xi(l,l===fr?Cr:0);if(A===0)w!==null&&ur(w),l.callbackNode=null,l.callbackPriority=0;else if(p=A&-A,l.callbackPriority!==p){if(w!=null&&ur(w),p===1)l.tag===0?d6(s_.bind(null,l)):HE(s_.bind(null,l)),a6(function(){(Nt&6)===0&&na()}),w=null;else{switch(Cf(A)){case 1:w=Ce;break;case 4:w=_f;break;case 16:w=Kt;break;case 536870912:w=Sf;break;default:w=Kt}w=p_(w,o_.bind(null,l))}l.callbackPriority=p,l.callbackNode=w}}function o_(l,p){if(mh=-1,gh=0,(Nt&6)!==0)throw Error(n(327));var w=l.callbackNode;if(du()&&l.callbackNode!==w)return null;var A=xi(l,l===fr?Cr:0);if(A===0)return null;if((A&30)!==0||(A&l.expiredLanes)!==0||p)p=vh(l,A);else{p=A;var M=Nt;Nt|=2;var B=l_();(fr!==l||Cr!==p)&&(us=null,cu=jt()+500,Ja(l,p));do try{O6();break}catch(J){a_(l,J)}while(!0);xg(),ch.current=B,Nt=M,$n!==null?p=0:(fr=null,Cr=0,p=nr)}if(p!==0){if(p===2&&(M=Ut(l),M!==0&&(A=M,p=n1(l,M))),p===1)throw w=Jc,Ja(l,0),ua(l,A),si(l,jt()),w;if(p===6)ua(l,A);else{if(M=l.current.alternate,(A&30)===0&&!N6(M)&&(p=vh(l,A),p===2&&(B=Ut(l),B!==0&&(A=B,p=n1(l,B))),p===1))throw w=Jc,Ja(l,0),ua(l,A),si(l,jt()),w;switch(l.finishedWork=M,l.finishedLanes=A,p){case 0:case 1:throw Error(n(345));case 2:Za(l,oi,us);break;case 3:if(ua(l,A),(A&130023424)===A&&(p=Qg+500-jt(),10<p)){if(xi(l,0)!==0)break;if(M=l.suspendedLanes,(M&A)!==A){qr(),l.pingedLanes|=l.suspendedLanes&M;break}l.timeoutHandle=lg(Za.bind(null,l,oi,us),p);break}Za(l,oi,us);break;case 4:if(ua(l,A),(A&4194240)===A)break;for(p=l.eventTimes,M=-1;0<A;){var $=31-Gr(A);B=1<<$,$=p[$],$>M&&(M=$),A&=~B}if(A=M,A=jt()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*P6(A/1960))-A,10<A){l.timeoutHandle=lg(Za.bind(null,l,oi,us),A);break}Za(l,oi,us);break;case 5:Za(l,oi,us);break;default:throw Error(n(329))}}}return si(l,jt()),l.callbackNode===w?o_.bind(null,l):null}function n1(l,p){var w=Zc;return l.current.memoizedState.isDehydrated&&(Ja(l,p).flags|=256),l=vh(l,p),l!==2&&(p=oi,oi=w,p!==null&&r1(p)),l}function r1(l){oi===null?oi=l:oi.push.apply(oi,l)}function N6(l){for(var p=l;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var A=0;A<w.length;A++){var M=w[A],B=M.getSnapshot;M=M.value;try{if(!oe(B(),M))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function ua(l,p){for(p&=~Zg,p&=~dh,l.suspendedLanes|=p,l.pingedLanes&=~p,l=l.expirationTimes;0<p;){var w=31-Gr(p),A=1<<w;l[w]=-1,p&=~A}}function s_(l){if((Nt&6)!==0)throw Error(n(327));du();var p=xi(l,0);if((p&1)===0)return si(l,jt()),null;var w=vh(l,p);if(l.tag!==0&&w===2){var A=Ut(l);A!==0&&(p=A,w=n1(l,A))}if(w===1)throw w=Jc,Ja(l,0),ua(l,p),si(l,jt()),w;if(w===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=p,Za(l,oi,us),si(l,jt()),null}function i1(l,p){var w=Nt;Nt|=1;try{return l(p)}finally{Nt=w,Nt===0&&(cu=jt()+500,Gf&&na())}}function Xa(l){aa!==null&&aa.tag===0&&(Nt&6)===0&&du();var p=Nt;Nt|=1;var w=Wi.transition,A=xt;try{if(Wi.transition=null,xt=1,l)return l()}finally{xt=A,Wi.transition=w,Nt=p,(Nt&6)===0&&na()}}function o1(){Ci=uu.current,un(uu)}function Ja(l,p){l.finishedWork=null,l.finishedLanes=0;var w=l.timeoutHandle;if(w!==-1&&(l.timeoutHandle=-1,s6(w)),$n!==null)for(w=$n.return;w!==null;){var A=w;switch(pg(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&zf();break;case 3:su(),un(ni),un(Dr),Tg();break;case 5:Cg(A);break;case 4:su();break;case 13:un(En);break;case 19:un(En);break;case 10:wg(A.type._context);break;case 22:case 23:o1()}w=w.return}if(fr=l,$n=l=ca(l.current,null),Cr=Ci=p,nr=0,Jc=null,Zg=dh=Ya=0,oi=Zc=null,qa!==null){for(p=0;p<qa.length;p++)if(w=qa[p],A=w.interleaved,A!==null){w.interleaved=null;var M=A.next,B=w.pending;if(B!==null){var $=B.next;B.next=M,A.next=$}w.pending=A}qa=null}return l}function a_(l,p){do{var w=$n;try{if(xg(),eh.current=ih,th){for(var A=_n.memoizedState;A!==null;){var M=A.queue;M!==null&&(M.pending=null),A=A.next}th=!1}if(Ka=0,dr=tr=_n=null,Hc=!1,qc=0,Jg.current=null,w===null||w.return===null){nr=1,Jc=p,$n=null;break}e:{var B=l,$=w.return,J=w,ee=p;if(p=Cr,J.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var xe=ee,Ie=J,Ne=Ie.tag;if((Ie.mode&1)===0&&(Ne===0||Ne===11||Ne===15)){var Ae=Ie.alternate;Ae?(Ie.updateQueue=Ae.updateQueue,Ie.memoizedState=Ae.memoizedState,Ie.lanes=Ae.lanes):(Ie.updateQueue=null,Ie.memoizedState=null)}var Ve=O2($);if(Ve!==null){Ve.flags&=-257,k2(Ve,$,J,B,p),Ve.mode&1&&R2(B,xe,p),p=Ve,ee=xe;var Ye=p.updateQueue;if(Ye===null){var Xe=new Set;Xe.add(ee),p.updateQueue=Xe}else Ye.add(ee);break e}else{if((p&1)===0){R2(B,xe,p),s1();break e}ee=Error(n(426))}}else if(hn&&J.mode&1){var Fn=O2($);if(Fn!==null){(Fn.flags&65536)===0&&(Fn.flags|=256),k2(Fn,$,J,B,p),vg(au(ee,J));break e}}B=ee=au(ee,J),nr!==4&&(nr=2),Zc===null?Zc=[B]:Zc.push(B),B=$;do{switch(B.tag){case 3:B.flags|=65536,p&=-p,B.lanes|=p;var ce=P2(B,ee,p);n2(B,ce);break e;case 1:J=ee;var ie=B.type,de=B.stateNode;if((B.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(sa===null||!sa.has(de)))){B.flags|=65536,p&=-p,B.lanes|=p;var De=N2(B,J,p);n2(B,De);break e}}B=B.return}while(B!==null)}c_(w)}catch(Qe){p=Qe,$n===w&&w!==null&&($n=w=w.return);continue}break}while(!0)}function l_(){var l=ch.current;return ch.current=ih,l===null?ih:l}function s1(){(nr===0||nr===3||nr===2)&&(nr=4),fr===null||(Ya&268435455)===0&&(dh&268435455)===0||ua(fr,Cr)}function vh(l,p){var w=Nt;Nt|=2;var A=l_();(fr!==l||Cr!==p)&&(us=null,Ja(l,p));do try{R6();break}catch(M){a_(l,M)}while(!0);if(xg(),Nt=w,ch.current=A,$n!==null)throw Error(n(261));return fr=null,Cr=0,nr}function R6(){for(;$n!==null;)u_($n)}function O6(){for(;$n!==null&&!en();)u_($n)}function u_(l){var p=h_(l.alternate,l,Ci);l.memoizedProps=l.pendingProps,p===null?c_(l):$n=p,Jg.current=null}function c_(l){var p=l;do{var w=p.alternate;if(l=p.return,(p.flags&32768)===0){if(w=S6(w,p,Ci),w!==null){$n=w;return}}else{if(w=C6(w,p),w!==null){w.flags&=32767,$n=w;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{nr=6,$n=null;return}}if(p=p.sibling,p!==null){$n=p;return}$n=p=l}while(p!==null);nr===0&&(nr=5)}function Za(l,p,w){var A=xt,M=Wi.transition;try{Wi.transition=null,xt=1,k6(l,p,w,A)}finally{Wi.transition=M,xt=A}return null}function k6(l,p,w,A){do du();while(aa!==null);if((Nt&6)!==0)throw Error(n(327));w=l.finishedWork;var M=l.finishedLanes;if(w===null)return null;if(l.finishedWork=null,l.finishedLanes=0,w===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var B=w.lanes|w.childLanes;if(nt(l,B),l===fr&&($n=fr=null,Cr=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||hh||(hh=!0,p_(Kt,function(){return du(),null})),B=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||B){B=Wi.transition,Wi.transition=null;var $=xt;xt=1;var J=Nt;Nt|=4,Jg.current=null,T6(l,w),e_(w,l),Mr(sg),Do=!!og,sg=og=null,l.current=w,I6(w),Ef(),Nt=J,xt=$,Wi.transition=B}else l.current=w;if(hh&&(hh=!1,aa=l,ph=M),B=l.pendingLanes,B===0&&(sa=null),St(w.stateNode),si(l,jt()),p!==null)for(A=l.onRecoverableError,w=0;w<p.length;w++)M=p[w],A(M.value,{componentStack:M.stack,digest:M.digest});if(fh)throw fh=!1,l=e1,e1=null,l;return(ph&1)!==0&&l.tag!==0&&du(),B=l.pendingLanes,(B&1)!==0?l===t1?Qc++:(Qc=0,t1=l):Qc=0,na(),null}function du(){if(aa!==null){var l=Cf(ph),p=Wi.transition,w=xt;try{if(Wi.transition=null,xt=16>l?16:l,aa===null)var A=!1;else{if(l=aa,aa=null,ph=0,(Nt&6)!==0)throw Error(n(331));var M=Nt;for(Nt|=4,He=l.current;He!==null;){var B=He,$=B.child;if((He.flags&16)!==0){var J=B.deletions;if(J!==null){for(var ee=0;ee<J.length;ee++){var xe=J[ee];for(He=xe;He!==null;){var Ie=He;switch(Ie.tag){case 0:case 11:case 15:Xc(8,Ie,B)}var Ne=Ie.child;if(Ne!==null)Ne.return=Ie,He=Ne;else for(;He!==null;){Ie=He;var Ae=Ie.sibling,Ve=Ie.return;if(Y2(Ie),Ie===xe){He=null;break}if(Ae!==null){Ae.return=Ve,He=Ae;break}He=Ve}}}var Ye=B.alternate;if(Ye!==null){var Xe=Ye.child;if(Xe!==null){Ye.child=null;do{var Fn=Xe.sibling;Xe.sibling=null,Xe=Fn}while(Xe!==null)}}He=B}}if((B.subtreeFlags&2064)!==0&&$!==null)$.return=B,He=$;else e:for(;He!==null;){if(B=He,(B.flags&2048)!==0)switch(B.tag){case 0:case 11:case 15:Xc(9,B,B.return)}var ce=B.sibling;if(ce!==null){ce.return=B.return,He=ce;break e}He=B.return}}var ie=l.current;for(He=ie;He!==null;){$=He;var de=$.child;if(($.subtreeFlags&2064)!==0&&de!==null)de.return=$,He=de;else e:for($=ie;He!==null;){if(J=He,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:uh(9,J)}}catch(Qe){Pn(J,J.return,Qe)}if(J===$){He=null;break e}var De=J.sibling;if(De!==null){De.return=J.return,He=De;break e}He=J.return}}if(Nt=M,na(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Tt,l)}catch{}A=!0}return A}finally{xt=w,Wi.transition=p}}return!1}function d_(l,p,w){p=au(w,p),p=P2(l,p,1),l=ia(l,p,1),p=qr(),l!==null&&(K(l,1,p),si(l,p))}function Pn(l,p,w){if(l.tag===3)d_(l,l,w);else for(;p!==null;){if(p.tag===3){d_(p,l,w);break}else if(p.tag===1){var A=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(sa===null||!sa.has(A))){l=au(w,l),l=N2(p,l,1),p=ia(p,l,1),l=qr(),p!==null&&(K(p,1,l),si(p,l));break}}p=p.return}}function M6(l,p,w){var A=l.pingCache;A!==null&&A.delete(p),p=qr(),l.pingedLanes|=l.suspendedLanes&w,fr===l&&(Cr&w)===w&&(nr===4||nr===3&&(Cr&130023424)===Cr&&500>jt()-Qg?Ja(l,0):Zg|=w),si(l,p)}function f_(l,p){p===0&&((l.mode&1)===0?p=1:(p=Vl,Vl<<=1,(Vl&130023424)===0&&(Vl=4194304)));var w=qr();l=ss(l,p),l!==null&&(K(l,p,w),si(l,w))}function D6(l){var p=l.memoizedState,w=0;p!==null&&(w=p.retryLane),f_(l,w)}function L6(l,p){var w=0;switch(l.tag){case 13:var A=l.stateNode,M=l.memoizedState;M!==null&&(w=M.retryLane);break;case 19:A=l.stateNode;break;default:throw Error(n(314))}A!==null&&A.delete(p),f_(l,w)}var h_;h_=function(l,p,w){if(l!==null)if(l.memoizedProps!==p.pendingProps||ni.current)ii=!0;else{if((l.lanes&w)===0&&(p.flags&128)===0)return ii=!1,_6(l,p,w);ii=(l.flags&131072)!==0}else ii=!1,hn&&(p.flags&1048576)!==0&&qE(p,qf,p.index);switch(p.lanes=0,p.tag){case 2:var A=p.type;ah(l,p),l=p.pendingProps;var M=Ql(p,Dr.current);ou(p,w),M=Ng(null,p,A,l,M,w);var B=Rg();return p.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ri(A)?(B=!0,$f(p)):B=!1,p.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,_g(p),M.updater=oh,p.stateNode=M,M._reactInternals=p,Bg(p,A,l,w),p=Vg(null,p,A,!0,B,w)):(p.tag=0,hn&&B&&hg(p),Hr(null,p,M,w),p=p.child),p;case 16:A=p.elementType;e:{switch(ah(l,p),l=p.pendingProps,M=A._init,A=M(A._payload),p.type=A,M=p.tag=F6(A),l=po(A,l),M){case 0:p=Ug(null,p,A,l,w);break e;case 1:p=j2(null,p,A,l,w);break e;case 11:p=M2(null,p,A,l,w);break e;case 14:p=D2(null,p,A,po(A.type,l),w);break e}throw Error(n(306,A,""))}return p;case 0:return A=p.type,M=p.pendingProps,M=p.elementType===A?M:po(A,M),Ug(l,p,A,M,w);case 1:return A=p.type,M=p.pendingProps,M=p.elementType===A?M:po(A,M),j2(l,p,A,M,w);case 3:e:{if(U2(p),l===null)throw Error(n(387));A=p.pendingProps,B=p.memoizedState,M=B.element,t2(l,p),Zf(p,A,null,w);var $=p.memoizedState;if(A=$.element,B.isDehydrated)if(B={element:A,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},p.updateQueue.baseState=B,p.memoizedState=B,p.flags&256){M=au(Error(n(423)),p),p=V2(l,p,A,w,M);break e}else if(A!==M){M=au(Error(n(424)),p),p=V2(l,p,A,w,M);break e}else for(Si=Qs(p.stateNode.containerInfo.firstChild),_i=p,hn=!0,ho=null,w=QE(p,null,A,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(nu(),A===M){p=ls(l,p,w);break e}Hr(l,p,A,w)}p=p.child}return p;case 5:return i2(p),l===null&&gg(p),A=p.type,M=p.pendingProps,B=l!==null?l.memoizedProps:null,$=M.children,ag(A,M)?$=null:B!==null&&ag(A,B)&&(p.flags|=32),F2(l,p),Hr(l,p,$,w),p.child;case 6:return l===null&&gg(p),null;case 13:return z2(l,p,w);case 4:return Sg(p,p.stateNode.containerInfo),A=p.pendingProps,l===null?p.child=ru(p,null,A,w):Hr(l,p,A,w),p.child;case 11:return A=p.type,M=p.pendingProps,M=p.elementType===A?M:po(A,M),M2(l,p,A,M,w);case 7:return Hr(l,p,p.pendingProps,w),p.child;case 8:return Hr(l,p,p.pendingProps.children,w),p.child;case 12:return Hr(l,p,p.pendingProps.children,w),p.child;case 10:e:{if(A=p.type._context,M=p.pendingProps,B=p.memoizedProps,$=M.value,rn(Yf,A._currentValue),A._currentValue=$,B!==null)if(oe(B.value,$)){if(B.children===M.children&&!ni.current){p=ls(l,p,w);break e}}else for(B=p.child,B!==null&&(B.return=p);B!==null;){var J=B.dependencies;if(J!==null){$=B.child;for(var ee=J.firstContext;ee!==null;){if(ee.context===A){if(B.tag===1){ee=as(-1,w&-w),ee.tag=2;var xe=B.updateQueue;if(xe!==null){xe=xe.shared;var Ie=xe.pending;Ie===null?ee.next=ee:(ee.next=Ie.next,Ie.next=ee),xe.pending=ee}}B.lanes|=w,ee=B.alternate,ee!==null&&(ee.lanes|=w),bg(B.return,w,p),J.lanes|=w;break}ee=ee.next}}else if(B.tag===10)$=B.type===p.type?null:B.child;else if(B.tag===18){if($=B.return,$===null)throw Error(n(341));$.lanes|=w,J=$.alternate,J!==null&&(J.lanes|=w),bg($,w,p),$=B.sibling}else $=B.child;if($!==null)$.return=B;else for($=B;$!==null;){if($===p){$=null;break}if(B=$.sibling,B!==null){B.return=$.return,$=B;break}$=$.return}B=$}Hr(l,p,M.children,w),p=p.child}return p;case 9:return M=p.type,A=p.pendingProps.children,ou(p,w),M=Hi(M),A=A(M),p.flags|=1,Hr(l,p,A,w),p.child;case 14:return A=p.type,M=po(A,p.pendingProps),M=po(A.type,M),D2(l,p,A,M,w);case 15:return L2(l,p,p.type,p.pendingProps,w);case 17:return A=p.type,M=p.pendingProps,M=p.elementType===A?M:po(A,M),ah(l,p),p.tag=1,ri(A)?(l=!0,$f(p)):l=!1,ou(p,w),T2(p,A,M),Bg(p,A,M,w),Vg(null,p,A,!0,l,w);case 19:return G2(l,p,w);case 22:return B2(l,p,w)}throw Error(n(156,p.tag))};function p_(l,p){return vi(l,p)}function B6(l,p,w,A){this.tag=l,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(l,p,w,A){return new B6(l,p,w,A)}function a1(l){return l=l.prototype,!(!l||!l.isReactComponent)}function F6(l){if(typeof l=="function")return a1(l)?1:0;if(l!=null){if(l=l.$$typeof,l===le)return 11;if(l===te)return 14}return 2}function ca(l,p){var w=l.alternate;return w===null?(w=Ki(l.tag,p,l.key,l.mode),w.elementType=l.elementType,w.type=l.type,w.stateNode=l.stateNode,w.alternate=l,l.alternate=w):(w.pendingProps=p,w.type=l.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=l.flags&14680064,w.childLanes=l.childLanes,w.lanes=l.lanes,w.child=l.child,w.memoizedProps=l.memoizedProps,w.memoizedState=l.memoizedState,w.updateQueue=l.updateQueue,p=l.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=l.sibling,w.index=l.index,w.ref=l.ref,w}function yh(l,p,w,A,M,B){var $=2;if(A=l,typeof l=="function")a1(l)&&($=1);else if(typeof l=="string")$=5;else e:switch(l){case W:return Qa(w.children,M,B,p);case Z:$=8,M|=8;break;case X:return l=Ki(12,w,p,M|2),l.elementType=X,l.lanes=B,l;case be:return l=Ki(13,w,p,M),l.elementType=be,l.lanes=B,l;case me:return l=Ki(19,w,p,M),l.elementType=me,l.lanes=B,l;case se:return xh(w,M,B,p);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case pe:$=10;break e;case ae:$=9;break e;case le:$=11;break e;case te:$=14;break e;case Oe:$=16,A=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return p=Ki($,w,p,M),p.elementType=l,p.type=A,p.lanes=B,p}function Qa(l,p,w,A){return l=Ki(7,l,A,p),l.lanes=w,l}function xh(l,p,w,A){return l=Ki(22,l,A,p),l.elementType=se,l.lanes=w,l.stateNode={isHidden:!1},l}function l1(l,p,w){return l=Ki(6,l,null,p),l.lanes=w,l}function u1(l,p,w){return p=Ki(4,l.children!==null?l.children:[],l.key,p),p.lanes=w,p.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},p}function j6(l,p,w,A,M){this.tag=p,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ue(0),this.expirationTimes=ue(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ue(0),this.identifierPrefix=A,this.onRecoverableError=M,this.mutableSourceEagerHydrationData=null}function c1(l,p,w,A,M,B,$,J,ee){return l=new j6(l,p,w,J,ee),p===1?(p=1,B===!0&&(p|=8)):p=0,B=Ki(3,null,null,p),l.current=B,B.stateNode=l,B.memoizedState={element:A,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},_g(B),l}function U6(l,p,w){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:A==null?null:""+A,children:l,containerInfo:p,implementation:w}}function m_(l){if(!l)return ta;l=l._reactInternals;e:{if(ti(l)!==l||l.tag!==1)throw Error(n(170));var p=l;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ri(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(n(171))}if(l.tag===1){var w=l.type;if(ri(w))return $E(l,w,p)}return p}function g_(l,p,w,A,M,B,$,J,ee){return l=c1(w,A,!0,l,M,B,$,J,ee),l.context=m_(null),w=l.current,A=qr(),M=la(w),B=as(A,M),B.callback=p??null,ia(w,B,M),l.current.lanes=M,K(l,M,A),si(l,A),l}function wh(l,p,w,A){var M=p.current,B=qr(),$=la(M);return w=m_(w),p.context===null?p.context=w:p.pendingContext=w,p=as(B,$),p.payload={element:l},A=A===void 0?null:A,A!==null&&(p.callback=A),l=ia(M,p,$),l!==null&&(vo(l,M,$,B),Jf(l,M,$)),$}function bh(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function v_(l,p){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var w=l.retryLane;l.retryLane=w!==0&&w<p?w:p}}function d1(l,p){v_(l,p),(l=l.alternate)&&v_(l,p)}function V6(){return null}var y_=typeof reportError=="function"?reportError:function(l){console.error(l)};function f1(l){this._internalRoot=l}Eh.prototype.render=f1.prototype.render=function(l){var p=this._internalRoot;if(p===null)throw Error(n(409));wh(l,p,null,null)},Eh.prototype.unmount=f1.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var p=l.containerInfo;Xa(function(){wh(null,l,null,null)}),p[ns]=null}};function Eh(l){this._internalRoot=l}Eh.prototype.unstable_scheduleHydration=function(l){if(l){var p=tn();l={blockedOn:null,target:l,priority:p};for(var w=0;w<br.length&&p!==0&&p<br[w].priority;w++);br.splice(w,0,l),w===0&&Tf(l)}};function h1(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function _h(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function x_(){}function z6(l,p,w,A,M){if(M){if(typeof A=="function"){var B=A;A=function(){var xe=bh($);B.call(xe)}}var $=g_(p,A,l,0,null,!1,!1,"",x_);return l._reactRootContainer=$,l[ns]=$.current,Bc(l.nodeType===8?l.parentNode:l),Xa(),$}for(;M=l.lastChild;)l.removeChild(M);if(typeof A=="function"){var J=A;A=function(){var xe=bh(ee);J.call(xe)}}var ee=c1(l,0,!1,null,null,!1,!1,"",x_);return l._reactRootContainer=ee,l[ns]=ee.current,Bc(l.nodeType===8?l.parentNode:l),Xa(function(){wh(p,ee,w,A)}),ee}function Sh(l,p,w,A,M){var B=w._reactRootContainer;if(B){var $=B;if(typeof M=="function"){var J=M;M=function(){var ee=bh($);J.call(ee)}}wh(p,$,l,M)}else $=z6(w,p,l,M,A);return bh($)}zl=function(l){switch(l.tag){case 3:var p=l.stateNode;if(p.current.memoizedState.isDehydrated){var w=Yt(p.pendingLanes);w!==0&&(Tn(p,w|1),si(p,jt()),(Nt&6)===0&&(cu=jt()+500,na()))}break;case 13:Xa(function(){var A=ss(l,1);if(A!==null){var M=qr();vo(A,l,1,M)}}),d1(l,1)}},kr=function(l){if(l.tag===13){var p=ss(l,134217728);if(p!==null){var w=qr();vo(p,l,134217728,w)}d1(l,134217728)}},rt=function(l){if(l.tag===13){var p=la(l),w=ss(l,p);if(w!==null){var A=qr();vo(w,l,p,A)}d1(l,p)}},tn=function(){return xt},_c=function(l,p){var w=xt;try{return xt=l,p()}finally{xt=w}},jl=function(l,p,w){switch(p){case"input":if(zt(l,w),p=w.name,w.type==="radio"&&p!=null){for(w=l;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<w.length;p++){var A=w[p];if(A!==l&&A.form===l.form){var M=Vf(A);if(!M)throw Error(n(90));_e(A),zt(A,M)}}}break;case"textarea":Bi(l,w);break;case"select":p=w.value,p!=null&&ze(l,!!w.multiple,p,!1)}},Ul=i1,Xn=Xa;var $6={usingClientEntryPoint:!1,Events:[Uc,Jl,Vf,gc,ei,i1]},ed={findFiberByHostInstance:za,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G6={bundleType:ed.bundleType,version:ed.version,rendererPackageName:ed.rendererPackageName,rendererConfig:ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=wf(l),l===null?null:l.stateNode},findFiberByHostInstance:ed.findFiberByHostInstance||V6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ch.isDisabled&&Ch.supportsFiber)try{Tt=Ch.inject(G6),yt=Ch}catch{}}return ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$6,ai.createPortal=function(l,p){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h1(p))throw Error(n(200));return U6(l,p,null,w)},ai.createRoot=function(l,p){if(!h1(l))throw Error(n(299));var w=!1,A="",M=y_;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onRecoverableError!==void 0&&(M=p.onRecoverableError)),p=c1(l,1,!1,null,null,w,!1,A,M),l[ns]=p.current,Bc(l.nodeType===8?l.parentNode:l),new f1(p)},ai.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var p=l._reactInternals;if(p===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=wf(p),l=l===null?null:l.stateNode,l},ai.flushSync=function(l){return Xa(l)},ai.hydrate=function(l,p,w){if(!_h(p))throw Error(n(200));return Sh(null,l,p,!0,w)},ai.hydrateRoot=function(l,p,w){if(!h1(l))throw Error(n(405));var A=w!=null&&w.hydratedSources||null,M=!1,B="",$=y_;if(w!=null&&(w.unstable_strictMode===!0&&(M=!0),w.identifierPrefix!==void 0&&(B=w.identifierPrefix),w.onRecoverableError!==void 0&&($=w.onRecoverableError)),p=g_(p,null,l,1,w??null,M,!1,B,$),l[ns]=p.current,Bc(l),A)for(l=0;l<A.length;l++)w=A[l],M=w._getVersion,M=M(w._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[w,M]:p.mutableSourceEagerHydrationData.push(w,M);return new Eh(p)},ai.render=function(l,p,w){if(!_h(p))throw Error(n(200));return Sh(null,l,p,!1,w)},ai.unmountComponentAtNode=function(l){if(!_h(l))throw Error(n(40));return l._reactRootContainer?(Xa(function(){Sh(null,null,l,!1,function(){l._reactRootContainer=null,l[ns]=null})}),!0):!1},ai.unstable_batchedUpdates=i1,ai.unstable_renderSubtreeIntoContainer=function(l,p,w,A){if(!_h(w))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return Sh(l,p,w,!1,A)},ai.version="18.3.1-next-f1338f8080-20240426",ai}var T_;function eR(){if(T_)return g1.exports;T_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),g1.exports=Z6(),g1.exports}var I_;function Q6(){if(I_)return Th;I_=1;var e=eR();return Th.createRoot=e.createRoot,Th.hydrateRoot=e.hydrateRoot,Th}var e5=Q6();const t5=so(e5);var P_="popstate";function n5(e={}){function t(r,i){let{pathname:o,search:a,hash:c}=r.location;return my("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Sd(i)}return i5(t,n,null,e)}function yn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function to(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function r5(){return Math.random().toString(36).substring(2,10)}function N_(e,t){return{usr:e.state,key:e.key,idx:t}}function my(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ku(t):t,state:n,key:t&&t.key||r||r5()}}function Sd({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ku(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function i5(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,c="POP",f=null,d=m();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function m(){return(a.state||{idx:null}).idx}function v(){c="POP";let R=m(),D=R==null?null:R-d;d=R,f&&f({action:c,location:N.location,delta:D})}function b(R,D){c="PUSH";let F=my(N.location,R,D);d=m()+1;let L=N_(F,d),U=N.createHref(F);try{a.pushState(L,"",U)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(U)}o&&f&&f({action:c,location:N.location,delta:1})}function C(R,D){c="REPLACE";let F=my(N.location,R,D);d=m();let L=N_(F,d),U=N.createHref(F);a.replaceState(L,"",U),o&&f&&f({action:c,location:N.location,delta:0})}function P(R){return o5(R)}let N={get action(){return c},get location(){return e(i,a)},listen(R){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(P_,v),f=R,()=>{i.removeEventListener(P_,v),f=null}},createHref(R){return t(i,R)},createURL:P,encodeLocation(R){let D=P(R);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:b,replace:C,go(R){return a.go(R)}};return N}function o5(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),yn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Sd(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function tR(e,t,n="/"){return s5(e,t,n,!1)}function s5(e,t,n,r){let i=typeof t=="string"?Ku(t):t,o=Es(i.pathname||"/",n);if(o==null)return null;let a=nR(e);a5(a);let c=null;for(let f=0;c==null&&f<a.length;++f){let d=y5(o);c=g5(a[f],d,r)}return c}function nR(e,t=[],n=[],r="",i=!1){let o=(a,c,f=i,d)=>{let m={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&f)return;yn(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let v=xs([r,m.relativePath]),b=n.concat(m);a.children&&a.children.length>0&&(yn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),nR(a.children,t,b,v,f)),!(a.path==null&&!a.index)&&t.push({path:v,score:p5(v,a.index),routesMeta:b})};return e.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))o(a,c);else for(let f of rR(a.path))o(a,c,!0,f)}),t}function rR(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=rR(r.join("/")),c=[];return c.push(...a.map(f=>f===""?o:[o,f].join("/"))),i&&c.push(...a),c.map(f=>e.startsWith("/")&&f===""?"/":f)}function a5(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:m5(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var l5=/^:[\w-]+$/,u5=3,c5=2,d5=1,f5=10,h5=-2,R_=e=>e==="*";function p5(e,t){let n=e.split("/"),r=n.length;return n.some(R_)&&(r+=h5),t&&(r+=c5),n.filter(i=>!R_(i)).reduce((i,o)=>i+(l5.test(o)?u5:o===""?d5:f5),r)}function m5(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function g5(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",a=[];for(let c=0;c<r.length;++c){let f=r[c],d=c===r.length-1,m=o==="/"?t:t.slice(o.length)||"/",v=b0({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},m),b=f.route;if(!v&&d&&n&&!r[r.length-1].route.index&&(v=b0({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!v)return null;Object.assign(i,v.params),a.push({params:i,pathname:xs([o,v.pathname]),pathnameBase:E5(xs([o,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(o=xs([o,v.pathnameBase]))}return a}function b0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=v5(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:m,isOptional:v},b)=>{if(m==="*"){let P=c[b]||"";a=o.slice(0,o.length-P.length).replace(/(.)\/+$/,"$1")}const C=c[b];return v&&!C?d[m]=void 0:d[m]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:e}}function v5(e,t=!1,n=!0){to(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,f)=>(r.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function y5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return to(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Es(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var iR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,x5=e=>iR.test(e);function w5(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ku(e):e,o;if(n)if(x5(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),to(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?o=O_(n.substring(1),"/"):o=O_(n,t)}else o=t;return{pathname:o,search:_5(r),hash:S5(i)}}function O_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function x1(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function b5(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function rw(e){let t=b5(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function iw(e,t,n,r=!1){let i;typeof e=="string"?i=Ku(e):(i={...e},yn(!i.pathname||!i.pathname.includes("?"),x1("?","pathname","search",i)),yn(!i.pathname||!i.pathname.includes("#"),x1("#","pathname","hash",i)),yn(!i.search||!i.search.includes("#"),x1("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,c;if(a==null)c=n;else{let v=t.length-1;if(!r&&a.startsWith("..")){let b=a.split("/");for(;b[0]==="..";)b.shift(),v-=1;i.pathname=b.join("/")}c=v>=0?t[v]:"/"}let f=w5(i,c),d=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(d||m)&&(f.pathname+="/"),f}var xs=e=>e.join("/").replace(/\/\/+/g,"/"),E5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,S5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,C5=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function A5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function T5(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var oR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sR(e,t){let n=e;if(typeof n!="string"||!iR.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(oR)try{let o=new URL(window.location.href),a=n.startsWith("//")?new URL(o.protocol+n):new URL(n),c=Es(a.pathname,t);a.origin===o.origin&&c!=null?n=c+a.search+a.hash:i=!0}catch{to(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var aR=["POST","PUT","PATCH","DELETE"];new Set(aR);var I5=["GET",...aR];new Set(I5);var Yu=k.createContext(null);Yu.displayName="DataRouter";var Lp=k.createContext(null);Lp.displayName="DataRouterState";var P5=k.createContext(!1),lR=k.createContext({isTransitioning:!1});lR.displayName="ViewTransition";var N5=k.createContext(new Map);N5.displayName="Fetchers";var R5=k.createContext(null);R5.displayName="Await";var Li=k.createContext(null);Li.displayName="Navigation";var Hd=k.createContext(null);Hd.displayName="Location";var Wo=k.createContext({outlet:null,matches:[],isDataRoute:!1});Wo.displayName="Route";var ow=k.createContext(null);ow.displayName="RouteError";var uR="REACT_ROUTER_ERROR",O5="REDIRECT",k5="ROUTE_ERROR_RESPONSE";function M5(e){if(e.startsWith(`${uR}:${O5}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function D5(e){if(e.startsWith(`${uR}:${k5}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new C5(t.status,t.statusText,t.data)}catch{}}function L5(e,{relative:t}={}){yn(Xu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(Li),{hash:i,pathname:o,search:a}=qd(e,{relative:t}),c=o;return n!=="/"&&(c=o==="/"?n:xs([n,o])),r.createHref({pathname:c,search:a,hash:i})}function Xu(){return k.useContext(Hd)!=null}function Io(){return yn(Xu(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Hd).location}var cR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dR(e){k.useContext(Li).static||k.useLayoutEffect(e)}function Bp(){let{isDataRoute:e}=k.useContext(Wo);return e?Y5():B5()}function B5(){yn(Xu(),"useNavigate() may be used only in the context of a <Router> component.");let e=k.useContext(Yu),{basename:t,navigator:n}=k.useContext(Li),{matches:r}=k.useContext(Wo),{pathname:i}=Io(),o=JSON.stringify(rw(r)),a=k.useRef(!1);return dR(()=>{a.current=!0}),k.useCallback((f,d={})=>{if(to(a.current,cR),!a.current)return;if(typeof f=="number"){n.go(f);return}let m=iw(f,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:xs([t,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[t,n,o,i,e])}k.createContext(null);function qd(e,{relative:t}={}){let{matches:n}=k.useContext(Wo),{pathname:r}=Io(),i=JSON.stringify(rw(n));return k.useMemo(()=>iw(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function F5(e,t){return fR(e,t)}function fR(e,t,n,r,i){yn(Xu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=k.useContext(Li),{matches:a}=k.useContext(Wo),c=a[a.length-1],f=c?c.params:{},d=c?c.pathname:"/",m=c?c.pathnameBase:"/",v=c&&c.route;{let F=v&&v.path||"";pR(d,!v||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let b=Io(),C;if(t){let F=typeof t=="string"?Ku(t):t;yn(m==="/"||F.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${F.pathname}" was given in the \`location\` prop.`),C=F}else C=b;let P=C.pathname||"/",N=P;if(m!=="/"){let F=m.replace(/^\//,"").split("/");N="/"+P.replace(/^\//,"").split("/").slice(F.length).join("/")}let R=tR(e,{pathname:N});to(v||R!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),to(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=$5(R&&R.map(F=>Object.assign({},F,{params:Object.assign({},f,F.params),pathname:xs([m,o.encodeLocation?o.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?m:xs([m,o.encodeLocation?o.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),a,n,r,i);return t&&D?k.createElement(Hd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},D):D}function j5(){let e=K5(),t=A5(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:o},"ErrorBoundary")," or"," ",k.createElement("code",{style:o},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:i},n):null,a)}var U5=k.createElement(j5,null),hR=class extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=D5(e.digest);n&&(e=n)}let t=e!==void 0?k.createElement(Wo.Provider,{value:this.props.routeContext},k.createElement(ow.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?k.createElement(V5,{error:e},t):t}};hR.contextType=P5;var w1=new WeakMap;function V5({children:e,error:t}){let{basename:n}=k.useContext(Li);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=M5(t.digest);if(r){let i=w1.get(t);if(i)throw i;let o=sR(r.location,n);if(oR&&!w1.get(t))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw w1.set(t,a),a}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return e}function z5({routeContext:e,match:t,children:n}){let r=k.useContext(Yu);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(Wo.Provider,{value:e},n)}function $5(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=n?.errors;if(a!=null){let m=o.findIndex(v=>v.route.id&&a?.[v.route.id]!==void 0);yn(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,f=-1;if(n)for(let m=0;m<o.length;m++){let v=o[m];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(f=m),v.route.id){let{loaderData:b,errors:C}=n,P=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!C||C[v.route.id]===void 0);if(v.route.lazy||P){c=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let d=n&&r?(m,v)=>{r(m,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:T5(n.matches),errorInfo:v})}:void 0;return o.reduceRight((m,v,b)=>{let C,P=!1,N=null,R=null;n&&(C=a&&v.route.id?a[v.route.id]:void 0,N=v.route.errorElement||U5,c&&(f<0&&b===0?(pR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,R=null):f===b&&(P=!0,R=v.route.hydrateFallbackElement||null)));let D=t.concat(o.slice(0,b+1)),F=()=>{let L;return C?L=N:P?L=R:v.route.Component?L=k.createElement(v.route.Component,null):v.route.element?L=v.route.element:L=m,k.createElement(z5,{match:v,routeContext:{outlet:m,matches:D,isDataRoute:n!=null},children:L})};return n&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?k.createElement(hR,{location:n.location,revalidation:n.revalidation,component:N,error:C,children:F(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:d}):F()},null)}function sw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G5(e){let t=k.useContext(Yu);return yn(t,sw(e)),t}function H5(e){let t=k.useContext(Lp);return yn(t,sw(e)),t}function q5(e){let t=k.useContext(Wo);return yn(t,sw(e)),t}function aw(e){let t=q5(e),n=t.matches[t.matches.length-1];return yn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function W5(){return aw("useRouteId")}function K5(){let e=k.useContext(ow),t=H5("useRouteError"),n=aw("useRouteError");return e!==void 0?e:t.errors?.[n]}function Y5(){let{router:e}=G5("useNavigate"),t=aw("useNavigate"),n=k.useRef(!1);return dR(()=>{n.current=!0}),k.useCallback(async(i,o={})=>{to(n.current,cR),n.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var k_={};function pR(e,t,n){!t&&!k_[e]&&(k_[e]=!0,to(!1,n))}k.memo(X5);function X5({routes:e,future:t,state:n,onError:r}){return fR(e,void 0,n,r,t)}function J5({to:e,replace:t,state:n,relative:r}){yn(Xu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(Li);to(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=k.useContext(Wo),{pathname:a}=Io(),c=Bp(),f=iw(e,rw(o),a,r==="path"),d=JSON.stringify(f);return k.useEffect(()=>{c(JSON.parse(d),{replace:t,state:n,relative:r})},[c,d,r,t,n]),null}function fs(e){yn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Z5({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:a}){yn(!Xu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),f=k.useMemo(()=>({basename:c,navigator:i,static:o,unstable_useTransitions:a,future:{}}),[c,i,o,a]);typeof n=="string"&&(n=Ku(n));let{pathname:d="/",search:m="",hash:v="",state:b=null,key:C="default"}=n,P=k.useMemo(()=>{let N=Es(d,c);return N==null?null:{location:{pathname:N,search:m,hash:v,state:b,key:C},navigationType:r}},[c,d,m,v,b,C,r]);return to(P!=null,`<Router basename="${c}"> is not able to match the URL "${d}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:k.createElement(Li.Provider,{value:f},k.createElement(Hd.Provider,{children:t,value:P}))}function Q5({children:e,location:t}){return F5(gy(e),t)}function gy(e,t=[]){let n=[];return k.Children.forEach(e,(r,i)=>{if(!k.isValidElement(r))return;let o=[...t,i];if(r.type===k.Fragment){n.push.apply(n,gy(r.props.children,o));return}yn(r.type===fs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=gy(r.props.children,o)),n.push(a)}),n}var a0="get",l0="application/x-www-form-urlencoded";function Fp(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function eL(e){return Fp(e)&&e.tagName.toLowerCase()==="button"}function tL(e){return Fp(e)&&e.tagName.toLowerCase()==="form"}function nL(e){return Fp(e)&&e.tagName.toLowerCase()==="input"}function rL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function iL(e,t){return e.button===0&&(!t||t==="_self")&&!rL(e)}var Ih=null;function oL(){if(Ih===null)try{new FormData(document.createElement("form"),0),Ih=!1}catch{Ih=!0}return Ih}var sL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function b1(e){return e!=null&&!sL.has(e)?(to(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${l0}"`),null):e}function aL(e,t){let n,r,i,o,a;if(tL(e)){let c=e.getAttribute("action");r=c?Es(c,t):null,n=e.getAttribute("method")||a0,i=b1(e.getAttribute("enctype"))||l0,o=new FormData(e)}else if(eL(e)||nL(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||c.getAttribute("action");if(r=f?Es(f,t):null,n=e.getAttribute("formmethod")||c.getAttribute("method")||a0,i=b1(e.getAttribute("formenctype"))||b1(c.getAttribute("enctype"))||l0,o=new FormData(c,e),!oL()){let{name:d,type:m,value:v}=e;if(m==="image"){let b=d?`${d}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else d&&o.append(d,v)}}else{if(Fp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=a0,r=null,i=l0,a=e}return o&&i==="text/plain"&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function lL(e,t,n,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:t&&Es(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function uL(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cL(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function dL(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let a=await uL(o,n);return a.links?a.links():[]}return[]}));return mL(r.flat(1).filter(cL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function M_(e,t,n,r,i,o){let a=(f,d)=>n[d]?f.route.id!==n[d].route.id:!0,c=(f,d)=>n[d].pathname!==f.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==f.params["*"];return o==="assets"?t.filter((f,d)=>a(f,d)||c(f,d)):o==="data"?t.filter((f,d)=>{let m=r.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(a(f,d)||c(f,d))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function fL(e,t,{includeHydrateFallback:n}={}){return hL(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function hL(e){return[...new Set(e)]}function pL(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function mL(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(pL(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function mR(){let e=k.useContext(Yu);return lw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function gL(){let e=k.useContext(Lp);return lw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var uw=k.createContext(void 0);uw.displayName="FrameworkContext";function gR(){let e=k.useContext(uw);return lw(e,"You must render this element inside a <HydratedRouter> element"),e}function vL(e,t){let n=k.useContext(uw),[r,i]=k.useState(!1),[o,a]=k.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:d,onMouseLeave:m,onTouchStart:v}=t,b=k.useRef(null);k.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let N=D=>{D.forEach(F=>{a(F.isIntersecting)})},R=new IntersectionObserver(N,{threshold:.5});return b.current&&R.observe(b.current),()=>{R.disconnect()}}},[e]),k.useEffect(()=>{if(r){let N=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(N)}}},[r]);let C=()=>{i(!0)},P=()=>{i(!1),a(!1)};return n?e!=="intent"?[o,b,{}]:[o,b,{onFocus:nd(c,C),onBlur:nd(f,P),onMouseEnter:nd(d,C),onMouseLeave:nd(m,P),onTouchStart:nd(v,C)}]:[!1,b,{}]}function nd(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function yL({page:e,...t}){let{router:n}=mR(),r=k.useMemo(()=>tR(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?k.createElement(wL,{page:e,matches:r,...t}):null}function xL(e){let{manifest:t,routeModules:n}=gR(),[r,i]=k.useState([]);return k.useEffect(()=>{let o=!1;return dL(e,t,n).then(a=>{o||i(a)}),()=>{o=!0}},[e,t,n]),r}function wL({page:e,matches:t,...n}){let r=Io(),{future:i,manifest:o,routeModules:a}=gR(),{basename:c}=mR(),{loaderData:f,matches:d}=gL(),m=k.useMemo(()=>M_(e,t,d,o,r,"data"),[e,t,d,o,r]),v=k.useMemo(()=>M_(e,t,d,o,r,"assets"),[e,t,d,o,r]),b=k.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let N=new Set,R=!1;if(t.forEach(F=>{let L=o.routes[F.route.id];!L||!L.hasLoader||(!m.some(U=>U.route.id===F.route.id)&&F.route.id in f&&a[F.route.id]?.shouldRevalidate||L.hasClientLoader?R=!0:N.add(F.route.id))}),N.size===0)return[];let D=lL(e,c,i.unstable_trailingSlashAwareDataRequests,"data");return R&&N.size>0&&D.searchParams.set("_routes",t.filter(F=>N.has(F.route.id)).map(F=>F.route.id).join(",")),[D.pathname+D.search]},[c,i.unstable_trailingSlashAwareDataRequests,f,r,o,m,t,e,a]),C=k.useMemo(()=>fL(v,o),[v,o]),P=xL(v);return k.createElement(k.Fragment,null,b.map(N=>k.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),C.map(N=>k.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),P.map(({key:N,link:R})=>k.createElement("link",{key:N,nonce:n.nonce,...R})))}function bL(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var EL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{EL&&(window.__reactRouterVersion="7.12.0")}catch{}function _L({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=k.useRef();i.current==null&&(i.current=n5({window:r,v5Compat:!0}));let o=i.current,[a,c]=k.useState({action:o.action,location:o.location}),f=k.useCallback(d=>{n===!1?c(d):k.startTransition(()=>c(d))},[n]);return k.useLayoutEffect(()=>o.listen(f),[o,f]),k.createElement(Z5,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,unstable_useTransitions:n})}var vR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ui=k.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:a,state:c,target:f,to:d,preventScrollReset:m,viewTransition:v,unstable_defaultShouldRevalidate:b,...C},P){let{basename:N,unstable_useTransitions:R}=k.useContext(Li),D=typeof d=="string"&&vR.test(d),F=sR(d,N);d=F.to;let L=L5(d,{relative:i}),[U,G,q]=vL(r,C),W=TL(d,{replace:a,state:c,target:f,preventScrollReset:m,relative:i,viewTransition:v,unstable_defaultShouldRevalidate:b,unstable_useTransitions:R});function Z(pe){t&&t(pe),pe.defaultPrevented||W(pe)}let X=k.createElement("a",{...C,...q,href:F.absoluteURL||L,onClick:F.isExternal||o?t:Z,ref:bL(P,G),target:f,"data-discover":!D&&n==="render"?"true":void 0});return U&&!D?k.createElement(k.Fragment,null,X,k.createElement(yL,{page:L})):X});ui.displayName="Link";var SL=k.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:a,viewTransition:c,children:f,...d},m){let v=qd(a,{relative:d.relative}),b=Io(),C=k.useContext(Lp),{navigator:P,basename:N}=k.useContext(Li),R=C!=null&&OL(v)&&c===!0,D=P.encodeLocation?P.encodeLocation(v).pathname:v.pathname,F=b.pathname,L=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(F=F.toLowerCase(),L=L?L.toLowerCase():null,D=D.toLowerCase()),L&&N&&(L=Es(L,N)||L);const U=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let G=F===D||!i&&F.startsWith(D)&&F.charAt(U)==="/",q=L!=null&&(L===D||!i&&L.startsWith(D)&&L.charAt(D.length)==="/"),W={isActive:G,isPending:q,isTransitioning:R},Z=G?t:void 0,X;typeof r=="function"?X=r(W):X=[r,G?"active":null,q?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let pe=typeof o=="function"?o(W):o;return k.createElement(ui,{...d,"aria-current":Z,className:X,ref:m,style:pe,to:a,viewTransition:c},typeof f=="function"?f(W):f)});SL.displayName="NavLink";var CL=k.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:a=a0,action:c,onSubmit:f,relative:d,preventScrollReset:m,viewTransition:v,unstable_defaultShouldRevalidate:b,...C},P)=>{let{unstable_useTransitions:N}=k.useContext(Li),R=NL(),D=RL(c,{relative:d}),F=a.toLowerCase()==="get"?"get":"post",L=typeof c=="string"&&vR.test(c),U=G=>{if(f&&f(G),G.defaultPrevented)return;G.preventDefault();let q=G.nativeEvent.submitter,W=q?.getAttribute("formmethod")||a,Z=()=>R(q||G.currentTarget,{fetcherKey:t,method:W,navigate:n,replace:i,state:o,relative:d,preventScrollReset:m,viewTransition:v,unstable_defaultShouldRevalidate:b});N&&n!==!1?k.startTransition(()=>Z()):Z()};return k.createElement("form",{ref:P,method:F,action:D,onSubmit:r?f:U,...C,"data-discover":!L&&e==="render"?"true":void 0})});CL.displayName="Form";function AL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yR(e){let t=k.useContext(Yu);return yn(t,AL(e)),t}function TL(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:c,unstable_useTransitions:f}={}){let d=Bp(),m=Io(),v=qd(e,{relative:o});return k.useCallback(b=>{if(iL(b,t)){b.preventDefault();let C=n!==void 0?n:Sd(m)===Sd(v),P=()=>d(e,{replace:C,state:r,preventScrollReset:i,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:c});f?k.startTransition(()=>P()):P()}},[m,d,v,n,r,t,e,i,o,a,c,f])}var IL=0,PL=()=>`__${String(++IL)}__`;function NL(){let{router:e}=yR("useSubmit"),{basename:t}=k.useContext(Li),n=W5(),r=e.fetch,i=e.navigate;return k.useCallback(async(o,a={})=>{let{action:c,method:f,encType:d,formData:m,body:v}=aL(o,t);if(a.navigate===!1){let b=a.fetcherKey||PL();await r(b,n,a.action||c,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:m,body:v,formMethod:a.method||f,formEncType:a.encType||d,flushSync:a.flushSync})}else await i(a.action||c,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:m,body:v,formMethod:a.method||f,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,t,n])}function RL(e,{relative:t}={}){let{basename:n}=k.useContext(Li),r=k.useContext(Wo);yn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...qd(e||".",{relative:t})},a=Io();if(e==null){o.search=a.search;let c=new URLSearchParams(o.search),f=c.getAll("index");if(f.some(m=>m==="")){c.delete("index"),f.filter(v=>v).forEach(v=>c.append("index",v));let m=c.toString();o.search=m?`?${m}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:xs([n,o.pathname])),Sd(o)}function OL(e,{relative:t}={}){let n=k.useContext(lR);yn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=yR("useViewTransitionState"),i=qd(e,{relative:t});if(!n.isTransitioning)return!1;let o=Es(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Es(n.nextLocation.pathname,r)||n.nextLocation.pathname;return b0(i.pathname,a)!=null||b0(i.pathname,o)!=null}var cw=eR(),kL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ML=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vt=(e,t)=>{const n=k.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:c,...f},d)=>k.createElement("svg",{ref:d,...kL,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:`lucide lucide-${ML(e)}`,...f},[...t.map(([m,v])=>k.createElement(m,v)),...(Array.isArray(c)?c:[c])||[]]));return n.displayName=`${e}`,n},DL=vt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),bd=vt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),LL=vt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),BL=vt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),xR=vt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),u0=vt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),FL=vt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),jL=vt("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),UL=vt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),VL=vt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),zL=vt("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),dw=vt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),$L=vt("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]),GL=vt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),HL=vt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),qL=vt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),WL=vt("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),Cd=vt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),wR=vt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),KL=vt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),fw=vt("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),YL=vt("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),XL=vt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),JL=vt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),ZL=vt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),bR=vt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),QL=vt("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),eB=vt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),tB=vt("ScatterChart",[["circle",{cx:"7.5",cy:"7.5",r:".5",key:"1x97lo"}],["circle",{cx:"18.5",cy:"5.5",r:".5",key:"56iowl"}],["circle",{cx:"11.5",cy:"11.5",r:".5",key:"m9xkw9"}],["circle",{cx:"7.5",cy:"16.5",r:".5",key:"14ln9z"}],["circle",{cx:"17.5",cy:"14.5",r:".5",key:"14qxqt"}],["path",{d:"M3 3v18h18",key:"1s2lah"}]]),hw=vt("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),pw=vt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ER=vt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),nB=vt("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),rB=vt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Ad=vt("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),iB=vt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Lu=vt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),_R=vt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),oB=vt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),D_=vt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),SR=vt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),sB=vt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),aB=vt("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),Wd=vt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),lB=vt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),uB=()=>{const[e,t]=k.useState(!1),[n,r]=k.useState(!1),i=Io(),o=Bp();k.useEffect(()=>{const m=()=>{t(window.scrollY>50)};return window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)},[]);const a=`fixed w-full z-50 transition-all duration-300 ${e||i.pathname==="/"?"bg-white/90 backdrop-blur-md shadow-sm py-2":"bg-transparent py-4"}`,c=m=>`cursor-pointer font-medium tracking-wide transition-colors ${i.pathname===m?"text-stone-900 border-b-2 border-stone-800":e?"text-stone-600 hover:text-stone-900":"text-stone-800 hover:text-stone-600"}`,f=m=>{o(m),r(!1)},d=()=>(i.pathname,I.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[I.jsxs("div",{className:"flex flex-col items-center leading-none",children:[I.jsx("span",{className:"serif text-lg md:text-xl font-bold italic tracking-tighter text-stone-900",children:"Style"}),I.jsx("span",{className:"text-[8px] text-stone-500 uppercase tracking-wider",children:"by Tus3B"})]}),I.jsx("div",{className:"h-6 w-px bg-stone-200 hidden md:block"}),I.jsxs("div",{className:"flex flex-col items-center leading-none",children:[I.jsx("span",{className:"serif text-lg md:text-xl font-bold tracking-tight text-amber-500",children:"Perfum"}),I.jsx("span",{className:"text-[8px] text-amber-600/70 uppercase tracking-wider",children:"by Tus3B"})]}),I.jsx("div",{className:"h-6 w-px bg-stone-200 hidden md:block"}),I.jsxs("div",{className:"flex flex-col items-center leading-none",children:[I.jsx("span",{className:"serif text-lg md:text-xl font-bold tracking-tight text-rose-500",children:"Amor Amor"}),I.jsx("span",{className:"text-[8px] text-rose-600/70 uppercase tracking-wider",children:"by Tus3B"})]})]}));return I.jsxs("nav",{className:a,children:[I.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:I.jsxs("div",{className:"flex justify-between items-center h-16",children:[I.jsxs("div",{className:"flex items-center gap-4",children:[i.pathname!=="/"&&I.jsx(ui,{to:"/",className:"text-white bg-stone-900 p-2 rounded-full hover:bg-stone-700 transition",title:"Volver al Hub",children:I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[I.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),I.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]})}),I.jsx(ui,{to:i.pathname==="/"?"/":"/style",className:"flex-shrink-0 flex items-center cursor-pointer no-underline group",children:d()})]}),I.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[i.pathname!=="/"&&I.jsxs(I.Fragment,{children:[I.jsx(ui,{to:"/style",className:c("/style"),children:"Style"}),I.jsx(ui,{to:"/perfum",className:c("/perfum"),children:"Perfum"}),I.jsx(ui,{to:"/regalos",className:c("/regalos"),children:"Amor Amor"})]}),I.jsx("button",{onClick:()=>{i.pathname==="/style"?document.getElementById("booking-section")?.scrollIntoView({behavior:"smooth"}):o("/style")},className:"bg-stone-900 text-white px-6 py-2 rounded-full text-sm uppercase tracking-wider hover:bg-stone-800 transition shadow-lg",children:"Reservar"})]}),I.jsx("div",{className:"md:hidden flex items-center",children:I.jsx("button",{onClick:()=>r(!n),className:"text-stone-800 focus:outline-none",children:n?I.jsx(Wd,{size:28}):I.jsx(KL,{size:28})})})]})}),n&&I.jsxs("div",{className:"md:hidden fixed inset-0 top-16 bg-white z-40 flex flex-col p-6 space-y-8 animate-in slide-in-from-right-10",children:[I.jsxs("button",{onClick:()=>f("/style"),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[I.jsx(hw,{size:24}),I.jsx("span",{children:"Style (Inicio)"})]}),I.jsxs("button",{onClick:()=>f("/perfum"),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[I.jsx(Ad,{size:24}),I.jsx("span",{children:"Perfumes"})]}),I.jsxs("button",{onClick:()=>f("/regalos"),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[I.jsx(dw,{size:24}),I.jsx("span",{children:"Regalos"})]}),I.jsx("div",{className:"mt-auto pb-8",children:I.jsx("button",{onClick:()=>f("/booking"),className:"w-full bg-stone-900 text-white py-4 rounded-xl text-center uppercase tracking-widest font-bold shadow-lg active:scale-95 transition-transform",children:"Agendar Cita"})})]})]})},cB=({onCtaClick:e})=>I.jsxs("div",{className:"relative h-screen min-h-[600px] w-full overflow-hidden",children:[I.jsxs("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/images/greici/greici-main-new.jpg')"},children:[I.jsx("div",{className:"absolute inset-0 bg-black/20 mix-blend-multiply"}),I.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-stone-900/60 via-transparent to-transparent"})]}),I.jsxs("div",{className:"relative h-full flex flex-col justify-center items-center text-center px-4",children:[I.jsx("h2",{className:"text-white text-base md:text-xl uppercase tracking-[0.3em] mb-4 font-light",children:"Belleza & Elegancia"}),I.jsxs("h1",{className:"text-white text-4xl md:text-7xl lg:text-8xl serif font-light mb-6 md:mb-8 max-w-4xl leading-tight",children:["Redefine Tu Estilo ",I.jsx("br",{})," ",I.jsx("span",{className:"italic",children:"Tu Esencia"})]}),I.jsx("p",{className:"text-stone-200 max-w-lg mx-auto text-lg mb-10 font-light",children:"Cortes profesionales a domicilio y perfumera de alta gama. Descubre nuestras ofertas de verano."}),I.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:I.jsx("button",{onClick:e,className:"px-8 py-4 bg-white text-stone-900 rounded-full font-bold uppercase tracking-widest hover:bg-stone-100 transition shadow-lg",children:"Reserva Tu Cita"})}),I.jsxs("div",{className:"mt-12 flex items-center justify-center space-x-8 text-white/90 text-sm font-medium",children:[I.jsxs("div",{className:"flex items-center bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10",children:[I.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),"Disponible Hoy"]}),I.jsxs("div",{className:"flex items-center bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10",children:[I.jsx("span",{className:"mr-1",children:"Desde"}),I.jsx("span",{className:"font-bold text-lg",children:"$7.000"})]})]})]})]}),Pu="56984524774",dB="https://www.instagram.com/tus3bstyle/?igsh=MWtnc2R5MjQ0c21kOQ%3D%3D#",dl=[{id:"cut-1",name:"Corte de Puntas / Flequillos",description:"Mantenimiento esencial para eliminar horquillas y sanear el cabello.",price:7e3,durationMin:30,includes:["Corte tcnico de puntas o flequillo","Sellado de puntas"]},{id:"cut-2",name:"Corte Bordado",description:"Elimina el frizz y puntas daadas sin afectar el largo de tu cabello.",price:1e4,durationMin:45,includes:["Corte con mquina bordadora","Limpieza de puntas"]},{id:"wash-1",name:"Lavado",description:"Lavado profesional refrescante.",price:5e3,durationMin:20,includes:["Shampoo profesional","Acondicionador"],homeServiceOnly:!0},{id:"massage-1",name:"Masaje Capilar",description:"Tratamiento profundo para hidratar y revitalizar tu cabello.",price:5e3,durationMin:30,includes:["Ampolla o crema de tratamiento","Masaje craneal"]},{id:"brushing-1",name:"Brushing",description:"Peinado profesional para dar volumen, brillo y movimiento.",price:14e3,durationMin:45,includes:["Secado","Modelado con cepillo"]},{id:"color-1",name:"Aplicacin de Tintura",description:"Aplicacin profesional de tu color (tintura no incluida).",price:1e4,durationMin:60,includes:["Aplicacin uniforme","Lavado final"],homeServiceOnly:!0}],fB=3e3,hB=30,pB=["Santiago Centro","uoa"],xa=[{id:"l1",brand:"Lancme",name:"La Vie Est Belle EDP",description:"La fragancia de la felicidad. Iris pallida, Jazmn Sambac y Azahar.",price5ml:6990,price10ml:12990,margin5ml:0,margin10ml:0,image:"/images/perfumes/la-vie-est-belle.png",notes:["Iris","Vainilla","Pralin"],category:"classic",stock:!1,priceFullBottle:89990},{id:"l2",brand:"Carolina Herrera",name:"Good Girl EDP",description:"Audaz y sexy, elegante y enigmtica. El famoso tacn.",price5ml:7990,price10ml:14990,margin5ml:0,margin10ml:0,image:"/images/perfumes/good-girl.png",notes:["Tuberosa","Jazmn","Cacao"],category:"classic",stock:!1,priceFullBottle:94990},{id:"l3",brand:"Lancme",name:"Idle EDP",description:"Para la mujer que suea a lo grande. Limpio y luminoso.",price5ml:6990,price10ml:12990,margin5ml:0,margin10ml:0,image:"/images/perfumes/idole.png",notes:["Rosa","Jazmn","Chipre Blanco"],category:"classic",stock:!1,priceFullBottle:84990},{id:"l4",brand:"Giorgio Armani",name:"Acqua Di Gioia EDP",description:"La esencia de la alegra. Fresco, acutico y ctrico.",price5ml:6990,price10ml:12990,margin5ml:0,margin10ml:0,image:"/images/perfumes/acqua-di-gioia.png",notes:["Limn","Menta","Jazmn de Agua"],category:"classic",stock:!1,priceFullBottle:79990},{id:"l5",brand:"Yves Saint Laurent",name:"Black Opium EDP",description:"Adrenalina y energa. Caf negro y flores blancas.",price5ml:7990,price10ml:14990,margin5ml:0,margin10ml:0,image:"/images/perfumes/black-opium.png",notes:["Caf","Vainilla","Flores Blancas"],category:"classic",stock:!1,priceFullBottle:92990},{id:"l6",brand:"Dolce & Gabbana",name:"Light Blue EDT",description:"La alegra de vivir el Mediterrneo. Fresco y frutal.",price5ml:5990,price10ml:9990,margin5ml:0,margin10ml:0,image:"/images/perfumes/light-blue.png",notes:["Limn Siciliano","Manzana","Cedro"],category:"classic",stock:!1,priceFullBottle:74990},{id:"a1",brand:"Lattafa",name:"Yara (Rosa) EDP",description:"El viral de TikTok. Dulce, cremoso y adictivo.",price5ml:5990,price10ml:8990,margin5ml:2803,margin10ml:4616,stock:!0,priceFullBottle:32990,image:"/images/perfumes/lattafa-yara-rosa.png",secondaryImage:"/images/perfumes/yara-rosa-notes.jpg",notes:["Orqudea","Heliotropo","Frutas Tropicales"],category:"arab"},{id:"a2",brand:"Lattafa",name:"Yara Tous",description:"La versin tropical y solar de Yara. Mango y maracuy.",price5ml:5990,price10ml:8990,margin5ml:2850,margin10ml:4711,stock:!0,priceFullBottle:32990,image:"/images/perfumes/lattafa-yara-tous.png",secondaryImage:"/images/perfumes/yara-tous-notes.jpg",notes:["Mango","Coco","Vainilla"],category:"arab"},{id:"a3",brand:"Lattafa",name:"Rave Now Women",description:"Dulce, frutal y vibrante. Energa pura en una botella.",price5ml:4990,price10ml:7990,margin5ml:2040,margin10ml:4091,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-rave-now-women.png",notes:["Frutas Rojas","Malvavisco","Almizcle"],category:"arab"},{id:"a4",brand:"Fragrance World",name:"Valentia Rome Intense",description:"Inspirada en el lujo italiano. Floral y moderna.",price5ml:5990,price10ml:8990,margin5ml:2898,margin10ml:4806,stock:!0,priceFullBottle:34990,image:"/images/perfumes/fw-valentia-rome.png",notes:["Jazmn","Grosella Negra","Vainilla Bourbon"],category:"arab"},{id:"a5",brand:"Maison Alhambra",name:"Leonie EDP",description:"Elegancia y sofisticacin. Una fragancia que impone presencia.",price5ml:4990,price10ml:6990,margin5ml:2183,margin10ml:3376,stock:!0,priceFullBottle:31990,image:"/images/perfumes/maison-alhambra-leonie.png",notes:["Floral","mbar","Vainilla"],category:"arab"},{id:"a6",brand:"Lattafa",name:"Ana Abiyedh",description:"Limpio, almizclado y frutal. Un aroma que dura todo el da.",price5ml:6990,price10ml:9990,margin5ml:3487,margin10ml:4983,stock:!0,priceFullBottle:32990,image:"/images/perfumes/lattafa-ana-abiyedh.png",notes:["Almizcle Blanco","Pera","Bergamota"],category:"arab"},{id:"a7",brand:"Maison Alhambra",name:"Bad Femme",description:"Atrevida y seductora. Ideal para la noche.",price5ml:4990,price10ml:6990,margin5ml:2135,margin10ml:3281,stock:!0,priceFullBottle:31990,image:"/images/perfumes/maison-alhambra-bad-femme.png",notes:["Tuberosa","Jazmn","Cacao"],category:"arab"},{id:"d1",brand:"Lattafa",name:"Yara Desodorante Spray",description:"El complemento perfecto para tu perfume Yara.",price5ml:0,price10ml:0,margin5ml:0,margin10ml:0,stock:!0,priceFullBottle:5990,isSpray:!0,image:"/images/perfumes/yara-spray.png",notes:["Tropical","Dulce","Cremoso"],category:"arab"},{id:"d2",brand:"Lattafa",name:"Qaed Al Fursan Desodorante",description:"Fresco, pia ahumada y maderas.",price5ml:0,price10ml:0,margin5ml:0,margin10ml:0,stock:!0,priceFullBottle:5990,isSpray:!0,image:"/images/perfumes/qaed-al-fursan-spray.png",notes:["Pia","Musgo","Azafrn"],category:"arab"},{id:"a8",brand:"Armaf",name:"Club de Nuit Intense Woman EDP",description:"Un chipre floral intenso y elegante. Misterioso.",price5ml:5990,price10ml:8990,margin5ml:0,margin10ml:0,image:"/images/perfumes/club-de-nuit-intense-woman.png",notes:["Rosa","Azafrn","Geranio"],category:"arab",stock:!1},{id:"a9",brand:"Lattafa",name:"Eclaire EDP",description:"Dulce y envolvente, con notas gourmand irresistibles.",price5ml:5990,price10ml:8990,margin5ml:0,margin10ml:0,image:"/images/perfumes/lattafa-eclaire.png",notes:["Caramelo","Leche","Miel"],category:"arab",stock:!1},{id:"a10",brand:"Armaf",name:"Club de Nuit Untold EDP",description:"El dupe perfecto de Baccarat Rouge 540. Lujoso y dulce.",price5ml:6990,price10ml:9990,margin5ml:0,margin10ml:0,image:"/images/perfumes/club-de-nuit-untold.png",notes:["Azafrn","Jazmn","Amberwood"],category:"arab",stock:!1},{id:"a11",brand:"Lattafa",name:"Khamrah EDP",description:"Clido y especiado. Canela, dtiles y pralin.",price5ml:6990,price10ml:9990,margin5ml:0,margin10ml:0,image:"/images/perfumes/lattafa-khamrah.png",notes:["Canela","Dtiles","Pralin"],category:"arab",stock:!1},{id:"a12",brand:"Armaf",name:"Club de Nuit Imperiale",description:"Floral, fresco y frutal. Elegancia moderna.",price5ml:5990,price10ml:8990,margin5ml:0,margin10ml:0,image:"/images/perfumes/club-de-nuit-imperiale.png",notes:["Litchi","Bergamota","Rosa Turca"],category:"arab",stock:!1}],L_=[{id:"1",url:"/images/greici/greici-portrait.jpg",category:"Cortes",description:"Estilista Greici Nataly"},{id:"2",url:"/images/greici/greici-salon-wide.jpg",category:"Color",description:"Atencin Personalizada"},{id:"3",url:"/images/greici/greici-back-view.jpg",category:"Cortes",description:"Acabados Perfectos"},{id:"4",url:"/images/greici/greici-red-shirt.jpg",category:"Cortes",description:"Precisin y Estilo"},{id:"5",url:"/images/greici/greici-side-work.jpg",category:"Color",description:"Tcnica Profesional"}],mB=[{id:"r1",name:"Maria Paz",rating:5,comment:"Me encant el servicio, muy profesionales y puntuales. El corte que me hicieron fue exactamente lo que peda.",date:"Hace 2 semanas"},{id:"r2",name:"Carla S.",rating:5,comment:"Increble la atencin a domicilio. Todo muy limpio y ordenado, y los perfumes huelen delicioso. Totalmente recomendada.",date:"Hace 1 mes"},{id:"r3",name:"Valentina R.",rating:5,comment:"Compr el Lattafa Yara y es exquisito, lleg super rpido. Adems aprovech de hacerme un masaje capilar y qued como nueva.",date:"Hace 3 semanas"},{id:"r4",name:"Isidora M.",rating:5,comment:"Excelente experiencia con Tus3B. La calidad de los productos y la dedicacin en el servicio se notan. Volver a comprar seguro.",date:"Hace 1 mes"},{id:"r5",name:"Fernanda L.",rating:5,comment:"Muy buena disposicin y asesora para elegir mi perfume. Los precios son muy convenientes para la calidad que ofrecen.",date:"Hace 2 semanas"},{id:"r6",name:"Camila J.",rating:4,comment:"Todo super bien, el perfume lleg en perfecto estado. Solo demor un poquito ms de lo esperado la coordinacin, pero la atencin un 7.",date:"Hace 1 mes"}],gB=[{id:"gift-1",name:"Regalito A",price:19990,includes:["Perfume 10ml","Chocolates Ferrero","Tarjeta Personalizada"]},{id:"gift-2",name:"Regalito B",price:29990,includes:["Perfume 10ml","Crema de Manos","Chocolates Finos","Globo Corazn"]},{id:"gift-custom",name:"Arma tu regalito",price:0,includes:["Chocolates Ferrero Roche","Los Perfumes en Stock","Globo de corazn","Y mucho ms..."]}];var cs={},Ph={},vy=function(e,t){return vy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},vy(e,t)};function CR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");vy(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var E0=function(){return E0=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},E0.apply(this,arguments)};function Ju(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function AR(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function TR(e,t){return function(n,r){t(n,r,e)}}function IR(e,t,n,r,i,o){function a(D){if(D!==void 0&&typeof D!="function")throw new TypeError("Function expected");return D}for(var c=r.kind,f=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&e?r.static?e:e.prototype:null,m=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),v,b=!1,C=n.length-1;C>=0;C--){var P={};for(var N in r)P[N]=N==="access"?{}:r[N];for(var N in r.access)P.access[N]=r.access[N];P.addInitializer=function(D){if(b)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(D||null))};var R=(0,n[C])(c==="accessor"?{get:m.get,set:m.set}:m[f],P);if(c==="accessor"){if(R===void 0)continue;if(R===null||typeof R!="object")throw new TypeError("Object expected");(v=a(R.get))&&(m.get=v),(v=a(R.set))&&(m.set=v),(v=a(R.init))&&i.unshift(v)}else(v=a(R))&&(c==="field"?i.unshift(v):m[f]=v)}d&&Object.defineProperty(d,r.name,m),b=!0}function PR(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function NR(e){return typeof e=="symbol"?e:"".concat(e)}function RR(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function OR(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function qe(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(m){try{d(r.next(m))}catch(v){a(v)}}function f(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(c,f)}d((r=r.apply(e,t||[])).next())})}function kR(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var jp=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]});function MR(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&jp(t,e,n)}function _0(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function mw(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function DR(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(mw(arguments[t]));return e}function LR(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,c=o.length;a<c;a++,i++)r[i]=o[a];return r}function BR(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Bu(e){return this instanceof Bu?(this.v=e,this):new Bu(e)}function FR(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(C){return function(P){return Promise.resolve(P).then(C,v)}}function c(C,P){r[C]&&(i[C]=function(N){return new Promise(function(R,D){o.push([C,N,R,D])>1||f(C,N)})},P&&(i[C]=P(i[C])))}function f(C,P){try{d(r[C](P))}catch(N){b(o[0][3],N)}}function d(C){C.value instanceof Bu?Promise.resolve(C.value.v).then(m,v):b(o[0][2],C)}function m(C){f("next",C)}function v(C){f("throw",C)}function b(C,P){C(P),o.shift(),o.length&&f(o[0][0],o[0][1])}}function jR(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=e[i]?function(a){return(n=!n)?{value:Bu(e[i](a)),done:!1}:o?o(a):a}:o}}function UR(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof _0=="function"?_0(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(c,f){a=e[o](a),i(c,f,a.done,a.value)})}}function i(o,a,c,f){Promise.resolve(f).then(function(d){o({value:d,done:c})},a)}}function VR(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var vB=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},yy=function(e){return yy=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},yy(e)};function zR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=yy(e),r=0;r<n.length;r++)n[r]!=="default"&&jp(t,e,n[r]);return vB(t,e),t}function $R(e){return e&&e.__esModule?e:{default:e}}function GR(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function HR(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function qR(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function WR(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var yB=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function KR(e){function t(o){e.error=e.hasError?new yB(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(i,function(a){return t(a),i()})}else r|=1}catch(a){t(a)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function YR(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,o,a){return r?t?".jsx":".js":i&&(!o||!a)?n:i+o+"."+a.toLowerCase()+"js"}):e}const xB={__extends:CR,__assign:E0,__rest:Ju,__decorate:AR,__param:TR,__esDecorate:IR,__runInitializers:PR,__propKey:NR,__setFunctionName:RR,__metadata:OR,__awaiter:qe,__generator:kR,__createBinding:jp,__exportStar:MR,__values:_0,__read:mw,__spread:DR,__spreadArrays:LR,__spreadArray:BR,__await:Bu,__asyncGenerator:FR,__asyncDelegator:jR,__asyncValues:UR,__makeTemplateObject:VR,__importStar:zR,__importDefault:$R,__classPrivateFieldGet:GR,__classPrivateFieldSet:HR,__classPrivateFieldIn:qR,__addDisposableResource:WR,__disposeResources:KR,__rewriteRelativeImportExtension:YR},wB=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:WR,get __assign(){return E0},__asyncDelegator:jR,__asyncGenerator:FR,__asyncValues:UR,__await:Bu,__awaiter:qe,__classPrivateFieldGet:GR,__classPrivateFieldIn:qR,__classPrivateFieldSet:HR,__createBinding:jp,__decorate:AR,__disposeResources:KR,__esDecorate:IR,__exportStar:MR,__extends:CR,__generator:kR,__importDefault:$R,__importStar:zR,__makeTemplateObject:VR,__metadata:OR,__param:TR,__propKey:NR,__read:mw,__rest:Ju,__rewriteRelativeImportExtension:YR,__runInitializers:PR,__setFunctionName:RR,__spread:DR,__spreadArray:BR,__spreadArrays:LR,__values:_0,default:xB},Symbol.toStringTag,{value:"Module"})),bB=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Up=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},XR=class extends Up{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},xy=class extends Up{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},wy=class extends Up{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var S0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(S0||(S0={}));class EB{constructor(t,{headers:n={},customFetch:r,region:i=S0.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=bB(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return qe(this,arguments,void 0,function*(n,r={}){var i;let o,a;try{const{headers:c,method:f,body:d,signal:m,timeout:v}=r;let b={},{region:C}=r;C||(C=this.region);const P=new URL(`${this.url}/${n}`);C&&C!=="any"&&(b["x-region"]=C,P.searchParams.set("forceFunctionRegion",C));let N;d&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",N=d):typeof d=="string"?(b["Content-Type"]="text/plain",N=d):typeof FormData<"u"&&d instanceof FormData?N=d:(b["Content-Type"]="application/json",N=JSON.stringify(d)):N=d;let R=m;v&&(a=new AbortController,o=setTimeout(()=>a.abort(),v),m?(R=a.signal,m.addEventListener("abort",()=>a.abort())):R=a.signal);const D=yield this.fetch(P.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),c),body:N,signal:R}).catch(G=>{throw new XR(G)}),F=D.headers.get("x-relay-error");if(F&&F==="true")throw new xy(D);if(!D.ok)throw new wy(D);let L=((i=D.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),U;return L==="application/json"?U=yield D.json():L==="application/octet-stream"||L==="application/pdf"?U=yield D.blob():L==="text/event-stream"?U=D:L==="multipart/form-data"?U=yield D.formData():U=yield D.text(),{data:U,error:null,response:D}}catch(c){return{data:null,error:c,response:c instanceof wy||c instanceof xy?c.context:void 0}}finally{o&&clearTimeout(o)}})}}const _B=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return S0},FunctionsClient:EB,FunctionsError:Up,FunctionsFetchError:XR,FunctionsHttpError:wy,FunctionsRelayError:xy},Symbol.toStringTag,{value:"Module"})),JR=Gd(_B);var jr={};const Zu=Gd(wB);var Nh={},Rh={},Oh={},kh={},Mh={},Dh={},B_;function ZR(){if(B_)return Dh;B_=1,Object.defineProperty(Dh,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Dh.default=e,Dh}var F_;function QR(){if(F_)return Mh;F_=1,Object.defineProperty(Mh,"__esModule",{value:!0});const t=Zu.__importDefault(ZR());let n=class{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let c=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var d,m,v,b;let C=null,P=null,N=null,R=f.status,D=f.statusText;if(f.ok){if(this.method!=="HEAD"){const G=await f.text();G===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?P=G:P=JSON.parse(G))}const L=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),U=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");L&&U&&U.length>1&&(N=parseInt(U[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(P)&&(P.length>1?(C={code:"PGRST116",details:`Results contain ${P.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},P=null,N=null,R=406,D="Not Acceptable"):P.length===1?P=P[0]:P=null)}else{const L=await f.text();try{C=JSON.parse(L),Array.isArray(C)&&f.status===404&&(P=[],C=null,R=200,D="OK")}catch{f.status===404&&L===""?(R=204,D="No Content"):C={message:L}}if(C&&this.isMaybeSingle&&(!((b=C?.details)===null||b===void 0)&&b.includes("0 rows"))&&(C=null,R=200,D="OK"),C&&this.shouldThrowOnError)throw new t.default(C)}return{error:C,data:P,count:N,status:R,statusText:D}});return this.shouldThrowOnError||(c=c.catch(f=>{var d,m,v,b,C,P;let N="";const R=f?.cause;if(R){const D=(d=R?.message)!==null&&d!==void 0?d:"",F=(m=R?.code)!==null&&m!==void 0?m:"";N=`${(v=f?.name)!==null&&v!==void 0?v:"FetchError"}: ${f?.message}`,N+=`

Caused by: ${(b=R?.name)!==null&&b!==void 0?b:"Error"}: ${D}`,F&&(N+=` (${F})`),R?.stack&&(N+=`
${R.stack}`)}else N=(C=f?.stack)!==null&&C!==void 0?C:"";return{error:{message:`${(P=f?.name)!==null&&P!==void 0?P:"FetchError"}: ${f?.message}`,details:N,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(i,o)}returns(){return this}overrideTypes(){return this}};return Mh.default=n,Mh}var j_;function eO(){if(j_)return kh;j_=1,Object.defineProperty(kh,"__esModule",{value:!0});const t=Zu.__importDefault(QR());let n=class extends t.default{select(i){let o=!1;const a=(i??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:c,referencedTable:f=c}={}){const d=f?`${f}.order`:"order",m=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${m?`${m},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:c=a}={}){const f=typeof c>"u"?"offset":`${c}.offset`,d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${i}`),this.url.searchParams.set(d,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:c=!1,wal:f=!1,format:d="text"}={}){var m;const v=[i?"analyze":null,o?"verbose":null,a?"settings":null,c?"buffers":null,f?"wal":null].filter(Boolean).join("|"),b=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${b}"; options=${v};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return kh.default=n,kh}var U_;function gw(){if(U_)return Oh;U_=1,Object.defineProperty(Oh,"__esModule",{value:!0});const t=Zu.__importDefault(eO()),n=new RegExp("[,()]");let r=class extends t.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}regexMatch(o,a){return this.url.searchParams.append(o,`match.${a}`),this}regexIMatch(o,a){return this.url.searchParams.append(o,`imatch.${a}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}isDistinct(o,a){return this.url.searchParams.append(o,`isdistinct.${a}`),this}in(o,a){const c=Array.from(new Set(a)).map(f=>typeof f=="string"&&n.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${c})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:c,type:f}={}){let d="";f==="plain"?d="pl":f==="phrase"?d="ph":f==="websearch"&&(d="w");const m=c===void 0?"":`(${c})`;return this.url.searchParams.append(o,`${d}fts${m}.${a}`),this}match(o){return Object.entries(o).forEach(([a,c])=>{this.url.searchParams.append(a,`eq.${c}`)}),this}not(o,a,c){return this.url.searchParams.append(o,`not.${a}.${c}`),this}or(o,{foreignTable:a,referencedTable:c=a}={}){const f=c?`${c}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,a,c){return this.url.searchParams.append(o,`${a}.${c}`),this}};return Oh.default=r,Oh}var V_;function tO(){if(V_)return Rh;V_=1,Object.defineProperty(Rh,"__esModule",{value:!0});const t=Zu.__importDefault(gw());let n=class{constructor(i,{headers:o={},schema:a,fetch:c}){this.url=i,this.headers=new Headers(o),this.schema=a,this.fetch=c}select(i,o){const{head:a=!1,count:c}=o??{},f=a?"HEAD":"GET";let d=!1;const m=(i??"*").split("").map(v=>/\s/.test(v)&&!d?"":(v==='"'&&(d=!d),v)).join("");return this.url.searchParams.set("select",m),c&&this.headers.append("Prefer",`count=${c}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:a=!0}={}){var c;const f="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((m,v)=>m.concat(Object.keys(v)),[]);if(d.length>0){const m=[...new Set(d)].map(v=>`"${v}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:c,defaultToNull:f=!0}={}){var d;const m="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),c&&this.headers.append("Prefer",`count=${c}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const v=i.reduce((b,C)=>b.concat(Object.keys(C)),[]);if(v.length>0){const b=[...new Set(v)].map(C=>`"${C}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:o}={}){var a;const c="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var o;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};return Rh.default=n,Rh}var z_;function SB(){if(z_)return Nh;z_=1,Object.defineProperty(Nh,"__esModule",{value:!0});const e=Zu,t=e.__importDefault(tO()),n=e.__importDefault(gw());let r=class nO{constructor(o,{headers:a={},schema:c,fetch:f}={}){this.url=o,this.headers=new Headers(a),this.schemaName=c,this.fetch=f}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${o}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new nO(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:c=!1,get:f=!1,count:d}={}){var m;let v;const b=new URL(`${this.url}/rpc/${o}`);let C;c||f?(v=c?"HEAD":"GET",Object.entries(a).filter(([N,R])=>R!==void 0).map(([N,R])=>[N,Array.isArray(R)?`{${R.join(",")}}`:`${R}`]).forEach(([N,R])=>{b.searchParams.append(N,R)})):(v="POST",C=a);const P=new Headers(this.headers);return d&&P.set("Prefer",`count=${d}`),new n.default({method:v,url:b,headers:P,schema:this.schemaName,body:C,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}};return Nh.default=r,Nh}var $_;function rO(){if($_)return jr;$_=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.PostgrestError=jr.PostgrestBuilder=jr.PostgrestTransformBuilder=jr.PostgrestFilterBuilder=jr.PostgrestQueryBuilder=jr.PostgrestClient=void 0;const e=Zu,t=e.__importDefault(SB());jr.PostgrestClient=t.default;const n=e.__importDefault(tO());jr.PostgrestQueryBuilder=n.default;const r=e.__importDefault(gw());jr.PostgrestFilterBuilder=r.default;const i=e.__importDefault(eO());jr.PostgrestTransformBuilder=i.default;const o=e.__importDefault(QR());jr.PostgrestBuilder=o.default;const a=e.__importDefault(ZR());return jr.PostgrestError=a.default,jr.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:a.default},jr}class iO{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const CB="2.87.1",AB=`realtime-js/${CB}`,oO="1.0.0",TB="2.0.0",G_=oO,by=1e4,IB=1e3,PB=100;var ul;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ul||(ul={}));var Gn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Gn||(Gn={}));var wo;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(wo||(wo={}));var Ey;(function(e){e.websocket="websocket"})(Ey||(Ey={}));var cl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(cl||(cl={}));class NB{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,n,r){var i,o;const a=t.topic,c=(i=t.ref)!==null&&i!==void 0?i:"",f=(o=t.join_ref)!==null&&o!==void 0?o:"",d=t.payload.event,m=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},v=Object.keys(m).length===0?"":JSON.stringify(m);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+c.length+a.length+d.length+v.length,C=new ArrayBuffer(this.HEADER_LENGTH+b);let P=new DataView(C),N=0;P.setUint8(N++,this.KINDS.userBroadcastPush),P.setUint8(N++,f.length),P.setUint8(N++,c.length),P.setUint8(N++,a.length),P.setUint8(N++,d.length),P.setUint8(N++,v.length),P.setUint8(N++,n),Array.from(f,D=>P.setUint8(N++,D.charCodeAt(0))),Array.from(c,D=>P.setUint8(N++,D.charCodeAt(0))),Array.from(a,D=>P.setUint8(N++,D.charCodeAt(0))),Array.from(d,D=>P.setUint8(N++,D.charCodeAt(0))),Array.from(v,D=>P.setUint8(N++,D.charCodeAt(0)));var R=new Uint8Array(C.byteLength+r.byteLength);return R.set(new Uint8Array(C),0),R.set(new Uint8Array(r),C.byteLength),R.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,o,a,c,f]=r;return n({join_ref:i,ref:o,topic:a,event:c,payload:f})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),c=n.getUint8(4);let f=this.HEADER_LENGTH+4;const d=r.decode(t.slice(f,f+i));f=f+i;const m=r.decode(t.slice(f,f+o));f=f+o;const v=r.decode(t.slice(f,f+a));f=f+a;const b=t.slice(f,t.byteLength),C=c===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,P={type:this.BROADCAST_EVENT,event:m,payload:C};return a>0&&(P.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:P}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class sO{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var on;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(on||(on={}));const H_=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,a)=>(o[a]=RB(a,e,t,i),o),{}):{}},RB=(e,t,n,r)=>{const i=t.find(c=>c.name===e),o=i?.type,a=n[e];return o&&!r.includes(o)?aO(o,a):_y(a)},aO=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return DB(t,n)}switch(e){case on.bool:return OB(t);case on.float4:case on.float8:case on.int2:case on.int4:case on.int8:case on.numeric:case on.oid:return kB(t);case on.json:case on.jsonb:return MB(t);case on.timestamp:return LB(t);case on.abstime:case on.date:case on.daterange:case on.int4range:case on.int8range:case on.money:case on.reltime:case on.text:case on.time:case on.timestamptz:case on.timetz:case on.tsrange:case on.tstzrange:return _y(t);default:return _y(t)}},_y=e=>e,OB=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},kB=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},MB=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},DB=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const a=e.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(c=>aO(t,c))}return e},LB=e=>typeof e=="string"?e.replace(" ","T"):e,lO=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class E1{constructor(t,n,r={},i=by){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Sy;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Sy||(Sy={}));let uO=class c0{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=c0.syncState(this.state,i,o,a),this.pendingDiffs.forEach(f=>{this.state=c0.syncDiff(this.state,f,o,a)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=c0.syncDiff(this.state,i,o,a),c())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const o=this.cloneDeep(t),a=this.transformState(n),c={},f={};return this.map(o,(d,m)=>{a[d]||(f[d]=m)}),this.map(a,(d,m)=>{const v=o[d];if(v){const b=m.map(R=>R.presence_ref),C=v.map(R=>R.presence_ref),P=m.filter(R=>C.indexOf(R.presence_ref)<0),N=v.filter(R=>b.indexOf(R.presence_ref)<0);P.length>0&&(c[d]=P),N.length>0&&(f[d]=N)}else c[d]=m}),this.syncDiff(o,{joins:c,leaves:f},r,i)}static syncDiff(t,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(c,f)=>{var d;const m=(d=t[c])!==null&&d!==void 0?d:[];if(t[c]=this.cloneDeep(f),m.length>0){const v=t[c].map(C=>C.presence_ref),b=m.filter(C=>v.indexOf(C.presence_ref)<0);t[c].unshift(...b)}r(c,m,f)}),this.map(a,(c,f)=>{let d=t[c];if(!d)return;const m=f.map(v=>v.presence_ref);d=d.filter(v=>m.indexOf(v.presence_ref)<0),t[c]=d,i(c,d,f),d.length===0&&delete t[c]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Cy;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Cy||(Cy={}));var Nu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Nu||(Nu={}));var zo;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(zo||(zo={}));const BB=Gn;let cO=class pd{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Gn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new E1(this,wo.join,this.params,this.timeout),this.rejoinTimer=new sO(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Gn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Gn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wo.reply,{},(a,c)=>{this._trigger(this._replyEventName(c),a)}),this.presence=new uO(this),this.broadcastEndpointURL=lO(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Gn.closed){const{config:{broadcast:a,presence:c,private:f}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(C=>C.filter))!==null&&i!==void 0?i:[],m=!!this.bindings[Nu.PRESENCE]&&this.bindings[Nu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,v={},b={broadcast:a,presence:Object.assign(Object.assign({},c),{enabled:m}),postgres_changes:d,private:f};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(C=>t?.(zo.CHANNEL_ERROR,C)),this._onClose(()=>t?.(zo.CLOSED)),this.updateJoinPayload(Object.assign({config:b},v)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:C})=>{var P;if(this.socket._isManualToken()||this.socket.setAuth(),C===void 0){t?.(zo.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,R=(P=N?.length)!==null&&P!==void 0?P:0,D=[];for(let F=0;F<R;F++){const L=N[F],{filter:{event:U,schema:G,table:q,filter:W}}=L,Z=C&&C[F];if(Z&&Z.event===U&&pd.isFilterValueEqual(Z.schema,G)&&pd.isFilterValueEqual(Z.table,q)&&pd.isFilterValueEqual(Z.filter,W))D.push(Object.assign(Object.assign({},L),{id:Z.id}));else{this.unsubscribe(),this.state=Gn.errored,t?.(zo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,t&&t(zo.SUBSCRIBED);return}}).receive("error",C=>{this.state=Gn.errored,t?.(zo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{t?.(zo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Gn.joined&&t===Nu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let f=c.statusText;try{const d=await c.json();f=d.error||d.message||f}catch{}return Promise.reject(new Error(f))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,c,f;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Gn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wo.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new E1(this,wo.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Gn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new E1(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>PB){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;const a=t.toLocaleLowerCase(),{close:c,error:f,leave:d,join:m}=wo;if(r&&[c,f,d,m].indexOf(a)>=0&&r!==this._joinRef())return;let b=this._onMessage(a,n,r);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(C=>{var P,N,R;return((P=C.filter)===null||P===void 0?void 0:P.event)==="*"||((R=(N=C.filter)===null||N===void 0?void 0:N.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===a}).map(C=>C.callback(b,r)):(o=this.bindings[a])===null||o===void 0||o.filter(C=>{var P,N,R,D,F,L;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in C){const U=C.id,G=(P=C.filter)===null||P===void 0?void 0:P.event;return U&&((N=n.ids)===null||N===void 0?void 0:N.includes(U))&&(G==="*"||G?.toLocaleLowerCase()===((R=n.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const U=(F=(D=C?.filter)===null||D===void 0?void 0:D.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return U==="*"||U===((L=n?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===a}).map(C=>{if(typeof b=="object"&&"ids"in b){const P=b.data,{schema:N,table:R,commit_timestamp:D,type:F,errors:L}=P;b=Object.assign(Object.assign({},{schema:N,table:R,commit_timestamp:D,eventType:F,new:{},old:{},errors:L}),this._getPayloadRecords(P))}C.callback(b,r)})}_isClosed(){return this.state===Gn.closed}_isJoined(){return this.state===Gn.joined}_isJoining(){return this.state===Gn.joining}_isLeaving(){return this.state===Gn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&pd.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(wo.close,{},t)}_onError(t){this._on(wo.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=H_(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=H_(t.columns,t.old_record)),n}};const _1=()=>{},Lh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},FB=[1e3,2e3,5e3,1e4],jB=1e4,UB=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let VB=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=by,this.transport=null,this.heartbeatIntervalMs=Lh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_1,this.ref=0,this.reconnectTimer=null,this.vsn=G_,this.logger=_1,this.conn=null,this.sendBuffer=[],this.serializer=new NB,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Ey.websocket}`,this.httpEndpoint=lO(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=iO.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ul.connecting:return cl.Connecting;case ul.open:return cl.Open;case ul.closing:return cl.Closing;default:return cl.Closed}}isConnected(){return this.connectionState()===cl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new cO(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:i,ref:o}=t,a=()=>{this.encode(t,c=>{var f;(f=this.conn)===null||f===void 0||f.send(c)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(IB,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Lh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:a}=n,c=a?`(${a})`:"",f=o.status||"";this.log("receive",`${f} ${r} ${i} ${c}`.trim(),o),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ul.open||this.conn.readyState===ul.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(wo.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([UB],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:AB};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(wo.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new sO(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Lh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,a,c,f,d,m,v,b,C;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:by,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Lh.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=t?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(c=t?.heartbeatCallback)!==null&&c!==void 0?c:_1,this.vsn=(f=t?.vsn)!==null&&f!==void 0?f:G_,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t?.reconnectAfterMs)!==null&&d!==void 0?d:(P=>FB[P-1]||jB),this.vsn){case oO:this.encode=(m=t?.encode)!==null&&m!==void 0?m:((P,N)=>N(JSON.stringify(P))),this.decode=(v=t?.decode)!==null&&v!==void 0?v:((P,N)=>N(JSON.parse(P)));break;case TB:this.encode=(b=t?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(C=t?.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const zB=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:BB,get REALTIME_LISTEN_TYPES(){return Nu},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Cy},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Sy},get REALTIME_SUBSCRIBE_STATES(){return zo},RealtimeChannel:cO,RealtimeClient:VB,RealtimePresence:uO,WebSocketFactory:iO},Symbol.toStringTag,{value:"Module"})),dO=Gd(zB);class Kd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function pn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class fO extends Kd{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class C0 extends Kd{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const vw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),$B=()=>Response,Ay=e=>{if(Array.isArray(e))return e.map(n=>Ay(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Ay(r)}),t},GB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},HB=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),S1=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},qB=(e,t,n)=>qe(void 0,void 0,void 0,function*(){const r=yield $B();e instanceof r&&!n?.noResolveJson?e.json().then(i=>{const o=e.status||500,a=i?.statusCode||o+"";t(new fO(S1(i),o,a))}).catch(i=>{t(new C0(S1(i),i))}):t(new C0(S1(e),e))}),WB=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!r?i:(GB(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Yd(e,t,n,r,i,o){return qe(this,void 0,void 0,function*(){return new Promise((a,c)=>{e(n,WB(t,r,i,o)).then(f=>{if(!f.ok)throw f;return r?.noResolveJson?f:f.json()}).then(f=>a(f)).catch(f=>qB(f,c,r))})})}function Td(e,t,n,r){return qe(this,void 0,void 0,function*(){return Yd(e,"GET",t,n,r)})}function xo(e,t,n,r,i){return qe(this,void 0,void 0,function*(){return Yd(e,"POST",t,r,i,n)})}function Ty(e,t,n,r,i){return qe(this,void 0,void 0,function*(){return Yd(e,"PUT",t,r,i,n)})}function KB(e,t,n,r){return qe(this,void 0,void 0,function*(){return Yd(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function yw(e,t,n,r,i){return qe(this,void 0,void 0,function*(){return Yd(e,"DELETE",t,r,i,n)})}class YB{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return qe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pn(t))return{data:null,error:t};throw t}})}}var hO;class XB{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[hO]="BlobDownloadBuilder",this.promise=null}asStream(){return new YB(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return qe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pn(t))return{data:null,error:t};throw t}})}}hO=Symbol.toStringTag;const JB={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},q_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ZB{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=vw(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return qe(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},q_),i);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const f=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),f&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(f))):(o=r,c["cache-control"]=`max-age=${a.cacheControl}`,c["content-type"]=a.contentType,f&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(f))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),i?.headers&&(c=Object.assign(Object.assign({},c),i.headers));const d=this._removeEmptyFolders(n),m=this._getFinalPath(d),v=yield(t=="PUT"?Ty:xo)(this.fetch,`${this.url}/object/${m}`,o,Object.assign({headers:c},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:v.Id,fullPath:v.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(pn(o))return{data:null,error:o};throw o}})}upload(t,n,r){return qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return qe(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),a=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${a}`);c.searchParams.set("token",n);try{let f;const d=Object.assign({upsert:q_.upsert},i),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",d.cacheControl)):(f=r,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType);const v=yield Ty(this.fetch,c.toString(),f,{headers:m});return{data:{path:o,fullPath:v.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(pn(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(t,n){return qe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const o=yield xo(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+o.url),c=a.searchParams.get("token");if(!c)throw new Kd("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}})}update(t,n,r){return qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return qe(this,void 0,void 0,function*(){try{return{data:yield xo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}copy(t,n,r){return qe(this,void 0,void 0,function*(){try{return{data:{path:(yield xo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return qe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield xo(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return qe(this,void 0,void 0,function*(){try{const i=yield xo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),a=o?`?${o}`:"",c=this._getFinalPath(t),f=()=>Td(this.fetch,`${this.url}/${i}/${c}${a}`,{headers:this.headers,noResolveJson:!0});return new XB(f,this.shouldThrowOnError)}info(t){return qe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Td(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ay(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}})}exists(t){return qe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield KB(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r)&&r instanceof C0){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const c=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&i.push(f);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(t){return qe(this,void 0,void 0,function*(){try{return{data:yield yw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}list(t,n,r){return qe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},JB),n),{prefix:t||""});return{data:yield xo(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}listV2(t,n){return qe(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield xo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const pO="2.87.1",mO={"X-Client-Info":`storage-js/${pO}`};class QB{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mO),n),this.fetch=vw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return qe(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Td(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}getBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Td(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}createBucket(t){return qe(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield xo(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return qe(this,void 0,void 0,function*(){try{return{data:yield Ty(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield xo(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield yw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var Id=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function e9(e,t,n){const r=new URL(t,e);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function t9(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function n9(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:a}){const c=e9(e.baseUrl,r,i),f=await t9(e.auth),d=await t(c,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...f,...a},body:o?JSON.stringify(o):void 0}),m=await d.text(),v=(d.headers.get("content-type")||"").includes("application/json"),b=v&&m?JSON.parse(m):m;if(!d.ok){const C=v?b:void 0,P=C?.error;throw new Id(P?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:P?.type,icebergCode:P?.code,details:C})}return{status:d.status,headers:d.headers,data:b}}}}function Bh(e){return e.join("")}var r9=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Bh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bh(e.namespace)}`}),!0}catch(t){if(t instanceof Id&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Id&&n.status===409)return;throw n}}};function fu(e){return e.join("")}var i9=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fu(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fu(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fu(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fu(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fu(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fu(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Id&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Id&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},o9=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=n9({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new r9(this.client,t),this.tableOps=new i9(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class gO{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mO),n),this.fetch=vw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield xo(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}listBuckets(t){return qe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Td(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield yw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}from(t){if(!HB(t))throw new Kd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new o9({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>qe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(o,a){const c=o[a];return typeof c!="function"?c:(...f)=>qe(this,void 0,void 0,function*(){try{return{data:yield c.apply(o,f),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}})}})}}const xw={"X-Client-Info":`storage-js/${pO}`,"Content-Type":"application/json"};class ww extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ci(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class d0 extends ww{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vO extends ww{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Iy;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Iy||(Iy={}));const Vp=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),s9=()=>Response,yO=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},a9=e=>Array.from(new Float32Array(e)),l9=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},W_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),u9=(e,t,n)=>qe(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){const i=e.status||500,o=e;if(typeof o.json=="function")o.json().then(a=>{const c=a?.statusCode||a?.code||i+"";t(new d0(W_(a),i,c))}).catch(()=>{const a=i+"",c=o.statusText||`HTTP ${i} error`;t(new d0(c,i,a))});else{const a=i+"",c=o.statusText||`HTTP ${i} error`;t(new d0(c,i,a))}}else t(new vO(W_(e),e))}),c9=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return r?(yO(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function d9(e,t,n,r,i,o){return qe(this,void 0,void 0,function*(){return new Promise((a,c)=>{e(n,c9(t,r,i,o)).then(f=>{if(!f.ok)throw f;if(r?.noResolveJson)return f;const d=f.headers.get("content-type");return!d||!d.includes("application/json")?{}:f.json()}).then(f=>a(f)).catch(f=>u9(f,c,r))})})}function Ii(e,t,n,r,i){return qe(this,void 0,void 0,function*(){return d9(e,"POST",t,r,i,n)})}class xO{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xw),n),this.fetch=Vp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return qe(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ci(n))return{data:null,error:n};throw n}})}getIndex(t,n){return qe(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ci(r))return{data:null,error:r};throw r}})}listIndexes(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ci(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return qe(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ci(r))return{data:null,error:r};throw r}})}}class wO{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xw),n),this.fetch=Vp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return qe(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ii(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ci(n))return{data:null,error:n};throw n}})}getVectors(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ci(n))return{data:null,error:n};throw n}})}listVectors(t){return qe(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Ii(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ci(n))return{data:null,error:n};throw n}})}queryVectors(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ci(n))return{data:null,error:n};throw n}})}deleteVectors(t){return qe(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ii(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ci(n))return{data:null,error:n};throw n}})}}class bO{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xw),n),this.fetch=Vp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ci(n))return{data:null,error:n};throw n}})}getBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ci(n))return{data:null,error:n};throw n}})}listBuckets(){return qe(this,arguments,void 0,function*(t={}){try{return{data:yield Ii(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ci(n))return{data:null,error:n};throw n}})}deleteBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ci(n))return{data:null,error:n};throw n}})}}class EO extends bO{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new _O(this.url,this.headers,t,this.fetch)}createBucket(t){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return qe(this,void 0,void 0,function*(){return n.createBucket.call(this,t)})}getBucket(t){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return qe(this,void 0,void 0,function*(){return n.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return qe(this,arguments,void 0,function*(n={}){return t.listBuckets.call(this,n)})}deleteBucket(t){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return qe(this,void 0,void 0,function*(){return n.deleteBucket.call(this,t)})}}class _O extends xO{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return qe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return qe(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return qe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return qe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new SO(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class SO extends wO{constructor(t,n,r,i,o){super(t,n,o),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return qe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return qe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return qe(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return qe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return qe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class f9 extends QB{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new ZB(this.url,this.headers,t,this.fetch)}get vectors(){return new EO(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new gO(this.url+"/iceberg",this.headers,this.fetch)}}const h9=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:gO,StorageApiError:fO,StorageClient:f9,StorageError:Kd,StorageUnknownError:C0,StorageVectorsApiError:d0,StorageVectorsClient:EO,StorageVectorsError:ww,get StorageVectorsErrorCode(){return Iy},StorageVectorsUnknownError:vO,VectorBucketApi:bO,VectorBucketScope:_O,VectorDataApi:wO,VectorIndexApi:xO,VectorIndexScope:SO,isPlainObject:yO,isStorageError:pn,isStorageVectorsError:ci,normalizeToFloat32:a9,resolveFetch:Vp,resolveResponse:s9,validateVectorDimension:l9},Symbol.toStringTag,{value:"Module"})),p9=Gd(h9);var C1={},rd={},K_;function m9(){return K_||(K_=1,Object.defineProperty(rd,"__esModule",{value:!0}),rd.version=void 0,rd.version="2.87.1"),rd}var Y_;function g9(){return Y_||(Y_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=m9();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(C1)),C1}var A1={},X_;function v9(){return X_||(X_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=i=>i?(...o)=>i(...o):(...o)=>fetch(...o);e.resolveFetch=t;const n=()=>Headers;e.resolveHeadersConstructor=n;const r=(i,o,a)=>{const c=(0,e.resolveFetch)(a),f=(0,e.resolveHeadersConstructor)();return async(d,m)=>{var v;const b=(v=await o())!==null&&v!==void 0?v:i;let C=new f(m?.headers);return C.has("apikey")||C.set("apikey",i),C.has("Authorization")||C.set("Authorization",`Bearer ${b}`),c(d,Object.assign(Object.assign({},m),{headers:C}))}};e.fetchWithAuth=r})(A1)),A1}var ds={},J_;function y9(){if(J_)return ds;J_=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.isBrowser=void 0,ds.uuid=e,ds.ensureTrailingSlash=t,ds.applySettingDefaults=r,ds.validateSupabaseUrl=i;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var a=Math.random()*16|0,c=o=="x"?a:a&3|8;return c.toString(16)})}function t(o){return o.endsWith("/")?o:o+"/"}const n=()=>typeof window<"u";ds.isBrowser=n;function r(o,a){var c,f;const{db:d,auth:m,realtime:v,global:b}=o,{db:C,auth:P,realtime:N,global:R}=a,D={db:Object.assign(Object.assign({},C),d),auth:Object.assign(Object.assign({},P),m),realtime:Object.assign(Object.assign({},N),v),storage:{},global:Object.assign(Object.assign(Object.assign({},R),b),{headers:Object.assign(Object.assign({},(c=R?.headers)!==null&&c!==void 0?c:{}),(f=b?.headers)!==null&&f!==void 0?f:{})}),accessToken:async()=>""};return o.accessToken?D.accessToken=o.accessToken:delete D.accessToken,D}function i(o){const a=o?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return ds}var id={};const CO="2.87.1",xu=30*1e3,Py=3,T1=Py*xu,x9="http://localhost:9999",w9="supabase.auth.token",b9={"X-Client-Info":`gotrue-js/${CO}`},Ny="X-Supabase-Api-Version",AO={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},E9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_9=600*1e3;let Fu=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function et(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let TO=class extends Fu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function IO(e){return et(e)&&e.name==="AuthApiError"}let pa=class extends Fu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},Rs=class extends Fu{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}},li=class extends Rs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function PO(e){return et(e)&&e.name==="AuthSessionMissingError"}let nl=class extends Rs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},md=class extends Rs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},gd=class extends Rs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function NO(e){return et(e)&&e.name==="AuthImplicitGrantRedirectError"}let Ry=class extends Rs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},A0=class extends Rs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function f0(e){return et(e)&&e.name==="AuthRetryableFetchError"}let Oy=class extends Rs{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function S9(e){return et(e)&&e.name==="AuthWeakPasswordError"}let T0=class extends Rs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const I0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Z_=` 	
\r=`.split(""),C9=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Z_.length;t+=1)e[Z_[t].charCodeAt(0)]=-2;for(let t=0;t<I0.length;t+=1)e[I0[t].charCodeAt(0)]=t;return e})();function Q_(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(I0[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(I0[r]),t.queuedBits-=6}}function RO(e,t,n){const r=C9[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function eS(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{I9(a,r,n)};for(let a=0;a<e.length;a+=1)RO(e.charCodeAt(a),i,o);return t.join("")}function A9(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function T9(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}A9(r,t)}}function I9(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ru(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)RO(e.charCodeAt(i),n,r);return new Uint8Array(t)}function P9(e){const t=[];return T9(e,n=>t.push(n)),new Uint8Array(t)}function fl(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Q_(i,n,r)),Q_(null,n,r),t.join("")}function N9(e){return Math.round(Date.now()/1e3)+e}function R9(){return Symbol("auth-callback")}const Tr=()=>typeof window<"u"&&typeof document<"u",el={tested:!1,writable:!1},OO=()=>{if(!Tr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(el.tested)return el.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),el.tested=!0,el.writable=!0}catch{el.tested=!0,el.writable=!1}return el.writable};function O9(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const kO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),k9=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",wu=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},tl=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ar=async(e,t)=>{await e.removeItem(t)};class zp{constructor(){this.promise=new zp.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}zp.promiseConstructor=Promise;function I1(e){const t=e.split(".");if(t.length!==3)throw new T0("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!E9.test(t[r]))throw new T0("JWT not in base64url format");return{header:JSON.parse(eS(t[0])),payload:JSON.parse(eS(t[1])),signature:Ru(t[2]),raw:{header:t[0],payload:t[1]}}}async function M9(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function D9(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){r(a);return}}catch(a){if(!t(o,a)){i(a);return}}})()})}function L9(e){return("0"+e.toString(16)).substr(-2)}function B9(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,L9).join("")}async function F9(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function j9(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await F9(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hu(e,t,n=!1){const r=B9();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await wu(e,`${t}-code-verifier`,i);const o=await j9(r);return[o,r===o?"plain":"s256"]}const U9=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function V9(e){const t=e.headers.get(Ny);if(!t||!t.match(U9))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function z9(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function $9(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const G9=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pu(e){if(!G9.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function P1(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function H9(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function tS(e){return JSON.parse(JSON.stringify(e))}const rl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),q9=[502,503,504];async function nS(e){var t;if(!k9(e))throw new A0(rl(e),0);if(q9.includes(e.status))throw new A0(rl(e),e.status);let n;try{n=await e.json()}catch(o){throw new pa(rl(o),o)}let r;const i=V9(e);if(i&&i.getTime()>=AO["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Oy(rl(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new li}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Oy(rl(n),e.status,n.weak_password.reasons);throw new TO(rl(n),e.status||500,r)}const W9=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ct(e,t,n,r){var i;const o=Object.assign({},r?.headers);o[Ny]||(o[Ny]=AO["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",f=await K9(e,t,n+c,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(f):{data:Object.assign({},f),error:null}}async function K9(e,t,n,r,i,o){const a=W9(t,r,i,o);let c;try{c=await e(n,Object.assign({},a))}catch(f){throw console.error(f),new A0(rl(f),0)}if(c.ok||await nS(c),r?.noResolveJson)return c;try{return await c.json()}catch(f){await nS(f)}}function yo(e){var t;let n=null;J9(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=N9(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function rS(e){const t=yo(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ma(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Y9(e){return{data:e,error:null}}function X9(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,a=Ju(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},f=Object.assign({},a);return{data:{properties:c,user:f},error:null}}function iS(e){return e}function J9(e){return e.access_token&&e.refresh_token&&e.expires_in}const h0=["global","local","others"];let bw=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=kO(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=h0[0]){if(h0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${h0.join(", ")}`);try{return await ct(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(et(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ct(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ma})}catch(r){if(et(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Ju(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await ct(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:X9,redirectTo:n?.redirectTo})}catch(n){if(et(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ct(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ma})}catch(n){if(et(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,a,c,f;try{const d={nextPage:null,lastPage:0,total:0},m=await ct(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:iS});if(m.error)throw m.error;const v=await m.json(),b=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,C=(f=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&f!==void 0?f:[];return C.length>0&&(C.forEach(P=>{const N=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(P.split(";")[1].split("=")[1]);d[`${R}Page`]=N}),d.total=parseInt(b)),{data:Object.assign(Object.assign({},v),d),error:null}}catch(d){if(et(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){pu(t);try{return await ct(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ma})}catch(n){if(et(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){pu(t);try{return await ct(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:ma})}catch(r){if(et(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){pu(t);try{return await ct(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:ma})}catch(r){if(et(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){pu(t.userId);try{const{data:n,error:r}=await ct(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(et(n))return{data:null,error:n};throw n}}async _deleteFactor(t){pu(t.userId),pu(t.id);try{return{data:await ct(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,a,c,f;try{const d={nextPage:null,lastPage:0,total:0},m=await ct(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:iS});if(m.error)throw m.error;const v=await m.json(),b=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,C=(f=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&f!==void 0?f:[];return C.length>0&&(C.forEach(P=>{const N=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(P.split(";")[1].split("=")[1]);d[`${R}Page`]=N}),d.total=parseInt(b)),{data:Object.assign(Object.assign({},v),d),error:null}}catch(d){if(et(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await ct(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(et(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ct(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(et(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await ct(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(et(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await ct(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ct(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(et(n))return{data:null,error:n};throw n}}};function oS(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const il={debug:!!(globalThis&&OO()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ew extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let MO=class extends Ew{};class Z9 extends Ew{}async function DO(e,t,n){il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),il.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{il.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw il.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new MO(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(il.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const sS={};async function Q9(e,t,n){var r;const i=(r=sS[e])!==null&&r!==void 0?r:Promise.resolve(),o=Promise.race([i.catch(()=>null),t>=0?new Promise((a,c)=>{setTimeout(()=>{c(new Z9(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(a=>a)).catch(a=>{if(a&&a.isAcquireTimeout)throw a;return null}).then(async()=>await n());return sS[e]=o.catch(async a=>{if(a&&a.isAcquireTimeout)return await i,null;throw a}),await o}function e7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function LO(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function t7(e){return parseInt(e,16)}function n7(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function r7(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:c,requestId:f,resources:d,scheme:m,uri:v,version:b}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const C=LO(e.address),P=m?`${m}://${r}`:r,N=e.statement?`${e.statement}
`:"",R=`${P} wants you to sign in with your Ethereum account:
${C}

${N}`;let D=`URI: ${v}
Version: ${b}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(D+=`
Expiration Time: ${i.toISOString()}`),c&&(D+=`
Not Before: ${c.toISOString()}`),f&&(D+=`
Request ID: ${f}`),d){let F=`
Resources:`;for(const L of d){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);F+=`
- ${L}`}D+=F}return`${R}
${D}`}class Hn extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class P0 extends Hn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function i7({error:e,options:t}){var n,r,i;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Hn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Hn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Hn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Hn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Hn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Hn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new Hn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Hn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(BO(a)){if(o.rp.id!==a)return new Hn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Hn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Hn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Hn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Hn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function o7({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Hn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Hn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(BO(r)){if(n.rpId!==r)return new Hn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Hn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Hn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Hn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class s7{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const a7=new s7;function l7(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=Ju(e,["challenge","user","excludeCredentials"]),o=Ru(t).buffer,a=Object.assign(Object.assign({},n),{id:Ru(n.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const d=r[f];c.excludeCredentials[f]=Object.assign(Object.assign({},d),{id:Ru(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function u7(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Ju(e,["challenge","allowCredentials"]),i=Ru(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const c=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},c),{id:Ru(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function c7(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:fl(new Uint8Array(e.response.attestationObject)),clientDataJSON:fl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function d7(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:fl(new Uint8Array(i.authenticatorData)),clientDataJSON:fl(new Uint8Array(i.clientDataJSON)),signature:fl(new Uint8Array(i.signature)),userHandle:i.userHandle?fl(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function BO(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function aS(){var e,t;return!!(Tr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function f7(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new P0("Browser returned unexpected credential type",t)}:{data:null,error:new P0("Empty credential response",t)}}catch(t){return{data:null,error:i7({error:t,options:e})}}}async function h7(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new P0("Browser returned unexpected credential type",t)}:{data:null,error:new P0("Empty credential response",t)}}catch(t){return{data:null,error:o7({error:t,options:e})}}}const p7={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},m7={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function N0(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(t(a)){const c=r[o];t(c)?r[o]=N0(c,a):r[o]=N0(a)}else r[o]=a}return r}function g7(e,t){return N0(p7,e,t||{})}function v7(e,t){return N0(m7,e,t||{})}class y7{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){try{const{data:a,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:c};const f=i??a7.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=g7(a.webauthn.credential_options.publicKey,o?.create),{data:m,error:v}=await f7({publicKey:d,signal:f});return m?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:v}}case"request":{const d=v7(a.webauthn.credential_options.publicKey,o?.request),{data:m,error:v}=await h7(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:f}));return m?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:v}}}}catch(a){return et(a)?{data:null,error:a}:{data:null,error:new pa("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Fu("rpId is required for WebAuthn authentication")};try{if(!aS())return{data:null,error:new pa("Browser does not support WebAuthn",null)};const{data:a,error:c}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:c};const{webauthn:f}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:r,credential_response:f.credential_response}})}catch(a){return et(a)?{data:null,error:a}:{data:null,error:new pa("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Fu("rpId is required for WebAuthn registration")};try{if(!aS())return{data:null,error:new pa("Browser does not support WebAuthn",null)};const{data:a,error:c}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(m=>{var v;return(v=m.data)===null||v===void 0?void 0:v.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m?.id}):void 0),{data:null,error:c};const{data:f,error:d}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return f?this._verify({factorId:a.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:d}}catch(a){return et(a)?{data:null,error:a}:{data:null,error:new pa("Unexpected error in register",a)}}}}e7();const x7={url:x9,storageKey:w9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:b9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function lS(e,t,n){return await n()}const mu={};let _w=class ky{get jwks(){var t,n;return(n=(t=mu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){mu[this.storageKey]=Object.assign(Object.assign({},mu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=mu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){mu[this.storageKey]=Object.assign(Object.assign({},mu[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},x7),t);if(this.storageKey=o.storageKey,this.instanceID=(n=ky.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,ky.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Tr()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new bw({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=kO(o.fetch),this.lock=o.lock||lS,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Tr()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=DO:this.lock=lS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new y7(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:OO()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=oS(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=oS(this.memoryStorage)),Tr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${CO}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Tr()&&(n=O9(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Tr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),NO(o)){const f=(t=o.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return et(n)?this._returnResult({error:n}):this._returnResult({error:new pa("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const o=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:yo}),{data:a,error:c}=o;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});const f=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(o){if(et(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var n,r,i;try{let o;if("email"in t){const{email:m,password:v,options:b}=t;let C=null,P=null;this.flowType==="pkce"&&([C,P]=await hu(this.storage,this.storageKey)),o=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:m,password:v,data:(n=b?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:C,code_challenge_method:P},xform:yo})}else if("phone"in t){const{phone:m,password:v,options:b}=t;o=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:v,data:(r=b?.data)!==null&&r!==void 0?r:{},channel:(i=b?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:yo})}else throw new md("You must provide either an email or phone number and a password");const{data:a,error:c}=o;if(c||!a)return await Ar(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const f=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(o){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),et(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:a,options:c}=t;n=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:rS})}else if("phone"in t){const{phone:o,password:a,options:c}=t;n=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:rS})}else throw new md("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new nl;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(et(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,o,a,c,f,d,m,v,b;let C,P;if("message"in t)C=t.message,P=t.signature;else{const{chain:N,wallet:R,statement:D,options:F}=t;let L;if(Tr())if(typeof R=="object")L=R;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")L=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!F?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=R}const U=new URL((n=F?.url)!==null&&n!==void 0?n:window.location.href),G=await L.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!G||G.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const q=LO(G[0]);let W=(r=F?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!W){const X=await L.request({method:"eth_chainId"});W=t7(X)}const Z={domain:U.host,address:q,statement:D,uri:U.href,version:"1",chainId:W,nonce:(i=F?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=F?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=F?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(f=F?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(d=F?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(m=F?.signInWithEthereum)===null||m===void 0?void 0:m.resources};C=r7(Z),P=await L.request({method:"personal_sign",params:[n7(C),q]})}try{const{data:N,error:R}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:P},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:yo});if(R)throw R;if(!N||!N.session||!N.user){const D=new nl;return this._returnResult({data:{user:null,session:null},error:D})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:R})}catch(N){if(et(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async signInWithSolana(t){var n,r,i,o,a,c,f,d,m,v,b,C;let P,N;if("message"in t)P=t.message,N=t.signature;else{const{chain:R,wallet:D,statement:F,options:L}=t;let U;if(Tr())if(typeof D=="object")U=D;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))U=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=D}const G=new URL((n=L?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in U&&U.signIn){const q=await U.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),F?{statement:F}:null));let W;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")W=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)W=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)P=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),N=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in U)||typeof U.signMessage!="function"||!("publicKey"in U)||typeof U!="object"||!U.publicKey||!("toBase58"in U.publicKey)||typeof U.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${G.host} wants you to sign in with your Solana account:`,U.publicKey.toBase58(),...F?["",F,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(i=(r=L?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=L?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((a=L?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((c=L?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((f=L?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((d=L?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((v=(m=L?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||v===void 0)&&v.length?["Resources",...L.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const q=await U.signMessage(new TextEncoder().encode(P),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=q}}try{const{data:R,error:D}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:fl(N)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(C=t.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:yo});if(D)throw D;if(!R||!R.session||!R.user){const F=new nl;return this._returnResult({data:{user:null,session:null},error:F})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:D})}catch(R){if(et(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(t){const n=await tl(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:a}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:yo});if(await Ar(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const c=new nl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),et(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=t,c=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:yo}),{data:f,error:d}=c;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!f||!f.session||!f.user){const m=new nl;return this._returnResult({data:{user:null,session:null},error:m})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:d})}catch(n){if(et(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,o,a;try{if("email"in t){const{email:c,options:f}=t;let d=null,m=null;this.flowType==="pkce"&&([d,m]=await hu(this.storage,this.storageKey));const{error:v}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:d,code_challenge_method:m},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in t){const{phone:c,options:f}=t,{data:d,error:m}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=f?.data)!==null&&i!==void 0?i:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(a=f?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:m})}throw new md("You must provide either an email or phone number.")}catch(c){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),et(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(t){var n,r;try{let i,o;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:c}=await ct(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:yo});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");const f=a.session,d=a.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(i){if(et(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,o,a;try{let c=null,f=null;this.flowType==="pkce"&&([c,f]=await hu(this.storage,this.storageKey));const d=await ct(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:f}),headers:this.headers,xform:Y9});return!((o=d.data)===null||o===void 0)&&o.url&&Tr()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(c){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),et(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new li;const{error:i}=await ct(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(et(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:o}=t,{error:a}=await ct(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:i,options:o}=t,{data:a,error:c}=await ct(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new md("You must provide either an email or phone number and a type")}catch(n){if(et(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await tl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<T1:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await tl(this.userStorage,this.storageKey+"-user");a?.user?t.user=a.user:t.user=P1()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=H9(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ma}):await this._useSession(async n=>{var r,i,o;const{data:a,error:c}=n;if(c)throw c;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new li}:await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:ma})})}catch(n){if(et(n))return PO(n)&&(await this._removeSession(),await Ar(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new li;const a=i.session;let c=null,f=null;this.flowType==="pkce"&&t.email!=null&&([c,f]=await hu(this.storage,this.storageKey));const{data:d,error:m}=await ct(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:f}),jwt:a.access_token,xform:ma});if(m)throw m;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),et(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new li;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=I1(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:c,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:f}=await this._getUser(t.access_token);if(f)throw f;o={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(et(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:c}=n;if(c)throw c;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!t?.refresh_token)throw new li;const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(et(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Tr())throw new gd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new gd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ry("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ry("No code detected.");const{data:F,error:L}=await this._exchangeCodeForSession(t.code);if(L)throw L;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:F.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:c,expires_at:f,token_type:d}=t;if(!o||!c||!a||!d)throw new gd("No session defined in URL");const m=Math.round(Date.now()/1e3),v=parseInt(c);let b=m+v;f&&(b=parseInt(f));const C=b-m;C*1e3<=xu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${v}s`);const P=b-v;m-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,b,m):m-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,b,m);const{data:N,error:R}=await this._getUser(o);if(R)throw R;const D={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:v,expires_at:b,refresh_token:a,token_type:d,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:t.type},error:null})}catch(r){if(et(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await tl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({error:o});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:c}=await this.admin.signOut(a,t);if(c&&!(IO(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return t!=="others"&&(await this._removeSession(),await Ar(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=R9(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await hu(this.storage,this.storageKey,!0));try{return await ct(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),et(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,c,f,d,m;const{data:v,error:b}=o;if(b)throw b;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ct(this.fetch,"GET",C,{headers:this.headers,jwt:(m=(d=v.session)===null||d===void 0?void 0:d.access_token)!==null&&m!==void 0?m:void 0})});if(i)throw i;return Tr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:t.provider,url:r?.url},error:null})}catch(r){if(et(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:c,token:f,access_token:d,nonce:m}=t,v=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:f,access_token:d,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:yo}),{data:b,error:C}=v;return C?this._returnResult({data:{user:null,session:null},error:C}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new nl}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:C}))}catch(i){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),et(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await ct(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await D9(async i=>(i>0&&await M9(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ct(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:yo})),(i,o)=>{const a=200*Math.pow(2,i);return o&&f0(o)&&Date.now()+a-r<xu})}catch(r){if(this._debug(n,"error",r),et(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Tr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await tl(this.storage,this.storageKey);if(i&&this.userStorage){let a=await tl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await wu(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a?.user)!==null&&t!==void 0?t:P1()}else if(i&&!i.user&&!i.user){const a=await tl(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,await Ar(this.storage,this.storageKey+"-user"),await wu(this.storage,this.storageKey,i)):i.user=P1()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<T1;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${T1}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),f0(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:c}=await this._getUser(i.access_token);!c&&a?.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new li;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new zp;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new li;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(i,"error",o),et(o)){const a={data:null,error:o};return f0(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,n)}catch(f){o.push(f)}});if(await Promise.all(a),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ar(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await wu(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=tS(i);await wu(this.storage,this.storageKey,o)}else{const i=tS(n);await wu(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ar(this.storage,this.storageKey),await Ar(this.storage,this.storageKey+"-code-verifier"),await Ar(this.storage,this.storageKey+"-user"),this.userStorage&&await Ar(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Tr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),xu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/xu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${xu}ms, refresh threshold is ${Py} ticks`),i<=Py&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Ew)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await hu(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(c.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await ct(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:d}=await ct(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&f.type==="totp"&&(!((i=f?.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?c7(t.webauthn.credential_response):d7(t.webauthn.credential_response)})}:{code:t.code}),{data:c,error:f}=await ct(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:f}))})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await ct(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:l7(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:u7(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n?.factors)!==null&&t!==void 0?t:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=I1(r.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ct(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new li})})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new li});const a=await ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Tr()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(et(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new li});const a=await ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Tr()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(et(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await ct(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new li})})}catch(t){if(et(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ct(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new li})})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(c=>c.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===t),r&&this.jwks_cached_at+_9>i)return r;const{data:o,error:a}=await ct(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(c=>c.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:C,error:P}=await this.getSession();if(P||!C.session)return this._returnResult({data:null,error:P});r=C.session.access_token}const{header:i,payload:o,signature:a,raw:{header:c,payload:f}}=I1(r);n?.allowExpired||z9(o.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!d){const{error:C}=await this.getUser(r);if(C)throw C;return{data:{claims:o,header:i,signature:a},error:null}}const m=$9(i.alg),v=await crypto.subtle.importKey("jwk",d,m,!0,["verify"]);if(!await crypto.subtle.verify(m,v,a,P9(`${c}.${f}`)))throw new T0("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(et(r))return this._returnResult({data:null,error:r});throw r}}};_w.nextInstanceID={};const w7=bw,b7=_w,E7=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:w7,AuthApiError:TO,AuthClient:b7,AuthError:Fu,AuthImplicitGrantRedirectError:gd,AuthInvalidCredentialsError:md,AuthInvalidJwtError:T0,AuthInvalidTokenResponseError:nl,AuthPKCEGrantCodeExchangeError:Ry,AuthRetryableFetchError:A0,AuthSessionMissingError:li,AuthUnknownError:pa,AuthWeakPasswordError:Oy,CustomAuthError:Rs,GoTrueAdminApi:bw,GoTrueClient:_w,NavigatorLockAcquireTimeoutError:MO,SIGN_OUT_SCOPES:h0,isAuthApiError:IO,isAuthError:et,isAuthImplicitGrantRedirectError:NO,isAuthRetryableFetchError:f0,isAuthSessionMissingError:PO,isAuthWeakPasswordError:S9,lockInternals:il,navigatorLock:DO,processLock:Q9},Symbol.toStringTag,{value:"Module"})),FO=Gd(E7);var uS;function _7(){if(uS)return id;uS=1,Object.defineProperty(id,"__esModule",{value:!0}),id.SupabaseAuthClient=void 0;const e=FO;let t=class extends e.AuthClient{constructor(r){super(r)}};return id.SupabaseAuthClient=t,id}var cS;function dS(){if(cS)return Ph;cS=1,Object.defineProperty(Ph,"__esModule",{value:!0});const e=JR,t=rO(),n=dO,r=p9,i=g9(),o=v9(),a=y9(),c=_7();class f{constructor(m,v,b){var C,P,N;this.supabaseUrl=m,this.supabaseKey=v;const R=(0,a.validateSupabaseUrl)(m);if(!v)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",R),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",R),this.storageUrl=new URL("storage/v1",R),this.functionsUrl=new URL("functions/v1",R);const D=`sb-${R.hostname.split(".")[0]}-auth-token`,F={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:D}),global:i.DEFAULT_GLOBAL_OPTIONS},L=(0,a.applySettingDefaults)(b??{},F);this.storageKey=(C=L.auth.storageKey)!==null&&C!==void 0?C:"",this.headers=(P=L.global.headers)!==null&&P!==void 0?P:{},L.accessToken?(this.accessToken=L.accessToken,this.auth=new Proxy({},{get:(U,G)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(G)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((N=L.auth)!==null&&N!==void 0?N:{},this.headers,L.global.fetch),this.fetch=(0,o.fetchWithAuth)(v,this._getAccessToken.bind(this),L.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},L.realtime)),this.accessToken&&this.accessToken().then(U=>this.realtime.setAuth(U)).catch(U=>console.warn("Failed to set initial Realtime auth token:",U)),this.rest=new t.PostgrestClient(new URL("rest/v1",R).href,{headers:this.headers,schema:L.db.schema,fetch:this.fetch}),this.storage=new r.StorageClient(this.storageUrl.href,this.headers,this.fetch,b?.storage),L.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(m){return this.rest.from(m)}schema(m){return this.rest.schema(m)}rpc(m,v={},b={head:!1,get:!1,count:void 0}){return this.rest.rpc(m,v,b)}channel(m,v={config:{}}){return this.realtime.channel(m,v)}getChannels(){return this.realtime.getChannels()}removeChannel(m){return this.realtime.removeChannel(m)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var m,v;if(this.accessToken)return await this.accessToken();const{data:b}=await this.auth.getSession();return(v=(m=b.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:m,persistSession:v,detectSessionInUrl:b,storage:C,userStorage:P,storageKey:N,flowType:R,lock:D,debug:F,throwOnError:L},U,G){const q={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},q),U),storageKey:N,autoRefreshToken:m,persistSession:v,detectSessionInUrl:b,storage:C,userStorage:P,flowType:R,lock:D,debug:F,throwOnError:L,fetch:G,hasCustomAuthorizationHeader:Object.keys(this.headers).some(W=>W.toLowerCase()==="authorization")})}_initRealtimeClient(m){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},m),{params:Object.assign({apikey:this.supabaseKey},m?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((v,b)=>{this._handleTokenChanged(v,"CLIENT",b?.access_token)})}_handleTokenChanged(m,v,b){(m==="TOKEN_REFRESHED"||m==="SIGNED_IN")&&this.changedAccessToken!==b?(this.changedAccessToken=b,this.realtime.setAuth(b)):m==="SIGNED_OUT"&&(this.realtime.setAuth(),v=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Ph.default=f,Ph}var fS;function S7(){return fS||(fS=1,(function(e){var t=cs&&cs.__createBinding||(Object.create?(function(m,v,b,C){C===void 0&&(C=b);var P=Object.getOwnPropertyDescriptor(v,b);(!P||("get"in P?!v.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return v[b]}}),Object.defineProperty(m,C,P)}):(function(m,v,b,C){C===void 0&&(C=b),m[C]=v[b]})),n=cs&&cs.__exportStar||function(m,v){for(var b in m)b!=="default"&&!Object.prototype.hasOwnProperty.call(v,b)&&t(v,m,b)},r=cs&&cs.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const i=r(dS());n(FO,e);var o=rO();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return o.PostgrestError}});var a=JR;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return a.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return a.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return a.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return a.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return a.FunctionRegion}}),n(dO,e);var c=dS();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return r(c).default}});const f=(m,v,b)=>new i.default(m,v,b);e.createClient=f;function d(){if(typeof window<"u"||typeof process>"u")return!1;const m=process.version;if(m==null)return!1;const v=m.match(/^v(\d+)\./);return v?parseInt(v[1],10)<=18:!1}d()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(cs)),cs}var jO=S7();const UO=so(jO),C7=nw({__proto__:null,default:UO},[jO]),{PostgrestError:Vde,FunctionsHttpError:zde,FunctionsFetchError:$de,FunctionsRelayError:Gde,FunctionsError:Hde,FunctionRegion:qde,SupabaseClient:Wde,createClient:A7,GoTrueAdminApi:Kde,GoTrueClient:Yde,AuthAdminApi:Xde,AuthClient:Jde,navigatorLock:Zde,NavigatorLockAcquireTimeoutError:Qde,lockInternals:efe,processLock:tfe,SIGN_OUT_SCOPES:nfe,AuthError:rfe,AuthApiError:ife,AuthUnknownError:ofe,CustomAuthError:sfe,AuthSessionMissingError:afe,AuthInvalidTokenResponseError:lfe,AuthInvalidCredentialsError:ufe,AuthImplicitGrantRedirectError:cfe,AuthPKCEGrantCodeExchangeError:dfe,AuthRetryableFetchError:ffe,AuthWeakPasswordError:hfe,AuthInvalidJwtError:pfe,isAuthError:mfe,isAuthApiError:gfe,isAuthSessionMissingError:vfe,isAuthImplicitGrantRedirectError:yfe,isAuthRetryableFetchError:xfe,isAuthWeakPasswordError:wfe,RealtimePresence:bfe,RealtimeChannel:Efe,RealtimeClient:_fe,REALTIME_LISTEN_TYPES:Sfe,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:Cfe,REALTIME_PRESENCE_LISTEN_EVENTS:Afe,REALTIME_SUBSCRIBE_STATES:Tfe,REALTIME_CHANNEL_STATES:Ife}=UO||C7,N1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GEMINI_API_KEY:"",VITE_SUPABASE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hYmpsaGpsa2VlaGFjenhyZ2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4Mzg5MDMsImV4cCI6MjA4MTQxNDkwM30.eHuUAZMQ9eGffxCwYwOczhzZuRksv41QoUaIulebpT4",VITE_SUPABASE_URL:"https://mabjlhjlkeehaczxrgcy.supabase.co"},VO=e=>N1&&N1[e]?N1[e]:"",R1=VO("VITE_SUPABASE_URL"),hS=VO("VITE_SUPABASE_KEY");let zO=null;if(R1&&hS&&R1!=="https://placeholder.supabase.co")try{zO=A7(R1,hS)}catch(e){console.error("Error initializing Supabase:",e)}else console.warn("VITE_SUPABASE_URL o VITE_SUPABASE_KEY no configuradas. El backend funcionar en modo MOCK (sin persistencia).");const Ht=zO,T7=({onSuccess:e})=>{const[t,n]=k.useState(dl[0].id),r=dl.find(se=>se.id===t)||dl[0],[i,o]=k.useState({name:"",email:"",phone:"+569 ",date:"",time:"",isHomeService:!1,address:"",serviceId:r.id,serviceName:r.name,referral:""}),[a,c]=k.useState(!1),[f,d]=k.useState(!1),[m,v]=k.useState([]),[b,C]=k.useState([]),[P,N]=k.useState({}),[R,D]=k.useState(null),[F,L]=k.useState(!1);k.useEffect(()=>{o(se=>({...se,serviceId:r.id,serviceName:r.name,isHomeService:r.homeServiceOnly?!0:se.isHomeService}))},[r]);const U=r.durationMin+(i.isHomeService?hB:0),G=r.price+(i.isHomeService?fB:0);k.useEffect(()=>{i.date&&q(i.date)},[i.date]),k.useEffect(()=>{i.date&&W()},[i.date,b,U]),k.useEffect(()=>{const ve=setTimeout(()=>{if(i.name.length>3&&i.phone.length>8){const Se=JSON.parse(localStorage.getItem("mock_bookings")||"[]").find(ne=>ne.phone.replace(/\s/g,"")===i.phone.replace(/\s/g,"")&&ne.name.toLowerCase()===i.name.toLowerCase());Se&&(D(Se),L(!0))}},1e3);return()=>clearTimeout(ve)},[i.name,i.phone]);const q=async se=>{d(!0);try{let ve=[];if(Ht){const{data:he,error:Be}=await Ht.from("bookings").select("time, duration_minutes").eq("date",se);!Be&&he&&(ve=he.map(Fe=>{const[Ze,Pe]=Fe.time.split(":").map(Number),st=Ze*60+Pe;return{start:st,end:st+Fe.duration_minutes}}))}const ne=JSON.parse(localStorage.getItem("mock_bookings")||"[]").filter(he=>he.date===se).map(he=>{const[Be,Fe]=he.time.split(":").map(Number),Ze=Be*60+Fe,Pe=he.duration_minutes||60;return{start:Ze,end:Ze+Pe}});C([...ve,...ne])}catch(ve){console.warn("Error fetching slots",ve),C([])}finally{d(!1)}},W=()=>{const Ee=[];for(let Se=9;Se<20;Se++)for(let ne=0;ne<60;ne+=30){const he=Se*60+ne,Be=he+U;if(Be>1200)continue;if(!b.some(Ze=>he>=Ze.start&&he<Ze.end||Be>Ze.start&&Be<=Ze.end||he<=Ze.start&&Be>=Ze.end)){const Ze=`${Se.toString().padStart(2,"0")}:${ne.toString().padStart(2,"0")}`;Ee.push(Ze)}}v(Ee),i.time&&!Ee.includes(i.time)&&o(Se=>({...Se,time:""}))},Z=()=>{const se={};return i.name||(se.name="El nombre es obligatorio"),(!i.phone||i.phone.trim()==="+569")&&(se.phone="El telfono es obligatorio"),i.email?/\S+@\S+\.\S+/.test(i.email)||(se.email="El formato del email no es vlido"):se.email="El email es obligatorio",i.date||(se.date="Selecciona una fecha"),i.time||(se.time="Selecciona una hora"),i.isHomeService&&!i.address&&(se.address="La direccin es obligatoria para servicio a domicilio"),N(se),Object.keys(se).length===0},X=se=>{const{name:ve,value:Ee,type:Se}=se.target,ne=se.target.checked;o(he=>({...he,[ve]:Se==="checkbox"?ne:Ee})),P[ve]&&N(he=>{const Be={...he};return delete Be[ve],Be})},pe=se=>{o(ve=>({...ve,time:se})),P.time&&N(ve=>{const Ee={...ve};return delete Ee.time,Ee})},ae=async()=>{const se=JSON.parse(localStorage.getItem("mock_bookings")||"[]"),ve={id:Date.now(),...i,duration_minutes:U,created_at:new Date().toISOString()};if(se.push(ve),localStorage.setItem("mock_bookings",JSON.stringify(se)),Ht)try{const{error:Ee}=await Ht.from("leads").upsert({phone:i.phone,name:i.name,email:i.email,last_booking_date:i.date},{onConflict:"phone"});Ee&&console.warn("Error saving lead:",Ee),await Ht.from("bookings").insert([{name:i.name,email:i.email,phone:i.phone,date:i.date,time:i.time,is_home_service:i.isHomeService,address:i.address||null,duration_minutes:U}])}catch(Ee){console.warn("Supabase save failed, relying on local:",Ee)}},le=se=>{const Ee=JSON.parse(localStorage.getItem("mock_bookings")||"[]").filter(Se=>Se.id!==se);localStorage.setItem("mock_bookings",JSON.stringify(Ee))},be=()=>{R&&(le(R.id),D(null),L(!1))},me=()=>{L(!1),o(se=>({...se,name:"",phone:"+569 "})),alert(`Entendido. Tu cita anterior (${R.date} a las ${R.time}) se mantiene. Gracias!`)},te=Bp(),Oe=async se=>{if(!Z())return;c(!0),await ae();const ve=`${r.name}${i.isHomeService?" + Domicilio":" (En Studio)"}`,Ee=new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(G),Se=`
Hola Tus3B Style, acabo de reservar en la web.
--------------------------------
*Cliente:* ${i.name}
*Telfono:* ${i.phone}
*Servicio:* ${ve}
*Fecha:* ${i.date}
*Hora:* ${i.time}
*Duracin:* ${U} min
${i.isHomeService?`*Direccin:* ${i.address}`:""}
${i.referral?`*Referido por:* ${i.referral}`:""}
*Total:* ${Ee}
--------------------------------
Espero su confirmacin final. Gracias.
    `.trim();await new Promise(ne=>setTimeout(ne,800)),c(!1),e&&e(i),te("/confirmation",{state:{booking:i,totalPrice:G,duration:U}});{const ne=`https://wa.me/${Pu}?text=${encodeURIComponent(Se)}`;window.open(ne,"_blank")}};return I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start fade-in pb-12 relative",children:[F&&R&&I.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 bg-white/95 backdrop-blur-sm rounded-2xl animate-in fade-in zoom-in-95",children:I.jsxs("div",{className:"bg-white border border-stone-200 shadow-2xl p-8 rounded-2xl max-w-sm text-center",children:[I.jsx(DL,{className:"mx-auto text-amber-500 mb-4 h-12 w-12"}),I.jsx("h3",{className:"serif text-2xl font-bold text-stone-900 mb-2",children:"Ya tienes una reserva"}),I.jsxs("p",{className:"text-stone-600 mb-6 text-sm",children:["Hemos encontrado una cita para ",I.jsx("strong",{children:R.name})," el da ",I.jsx("strong",{children:R.date})," a las ",I.jsx("strong",{children:R.time}),"."]}),I.jsx("p",{className:"font-bold text-stone-900 mb-6 text-lg",children:"Deseas cambiar tu reserva?"}),I.jsxs("div",{className:"space-y-3",children:[I.jsx("button",{onClick:be,className:"w-full bg-stone-900 text-white py-3 rounded-xl font-bold hover:bg-stone-700 transition",children:"S, cambiar cita"}),I.jsx("button",{onClick:me,className:"w-full bg-stone-100 text-stone-600 py-3 rounded-xl font-bold hover:bg-stone-200 transition",children:"No, mantener la anterior"})]})]})}),I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 relative",children:[!Ht&&I.jsxs("div",{className:"absolute top-0 right-0 bg-amber-100 text-amber-800 text-[10px] font-bold px-3 py-1 rounded-bl-lg flex items-center gap-1 z-10",children:[I.jsx(qL,{size:12})," MODO DEMO"]}),I.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Elige tu Servicio"}),I.jsxs("div",{className:"relative mb-6",children:[I.jsx("select",{value:t,onChange:se=>n(se.target.value),className:"w-full p-4 rounded-xl bg-stone-50 border border-stone-200 text-stone-900 font-serif text-lg focus:ring-2 focus:ring-stone-900 outline-none appearance-none",children:dl.map(se=>I.jsxs("option",{value:se.id,children:[se.name," - $",se.price.toLocaleString("es-CL")]},se.id))}),I.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:I.jsx("svg",{className:"w-5 h-5 text-stone-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),I.jsx("p",{className:"text-stone-500 font-light text-sm mb-4",children:r.description}),I.jsxs("div",{className:"flex justify-between items-center bg-stone-50 p-4 rounded-xl mb-4",children:[I.jsxs("div",{children:[I.jsx("span",{className:"block text-2xl font-semibold text-stone-900",children:new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(G)}),I.jsx("span",{className:"text-xs text-stone-500 uppercase tracking-wide",children:"Precio Estimado"})]}),I.jsxs("div",{className:"text-right",children:[I.jsxs("span",{className:"block text-lg font-medium text-stone-900",children:[U," min"]}),I.jsx("span",{className:"text-xs text-stone-500 uppercase tracking-wide",children:"Duracin"})]})]}),I.jsx("div",{className:"mb-4",children:I.jsxs("div",{className:`flex items-start p-3 rounded-lg border relative transition-colors ${r.homeServiceOnly?"bg-amber-50 border-amber-200":"bg-blue-50/50 border-blue-100"}`,children:[I.jsx("div",{className:"flex items-center h-5 mt-0.5",children:I.jsx("input",{id:"isHomeService",name:"isHomeService",type:"checkbox",checked:i.isHomeService,onChange:X,disabled:r.homeServiceOnly,className:"focus:ring-stone-500 h-5 w-5 text-stone-900 border-gray-300 rounded cursor-pointer disabled:opacity-50"})}),I.jsxs("div",{className:"ml-3",children:[I.jsx("label",{htmlFor:"isHomeService",className:"font-bold text-stone-900 cursor-pointer",children:r.homeServiceOnly?"Servicio Exclusivo a Domicilio":"Servicio a Domicilio? (+ $3.000)"}),I.jsxs("p",{className:"text-xs text-stone-500 mt-1 leading-relaxed",children:["Vamos a tu casa en ",pB.join(", "),". ",I.jsx("br",{}),I.jsx("span",{className:"text-blue-600 font-medium",children:"Incluye +30 min de traslado."})]})]})]})}),I.jsx("h4",{className:"text-xs uppercase tracking-widest text-stone-400 mb-3 font-bold mt-6",children:"Incluye"}),I.jsx("ul",{className:"space-y-2",children:r.includes.map((se,ve)=>I.jsxs("li",{className:"flex items-center text-sm text-stone-700",children:[I.jsx(xR,{size:14,className:"text-stone-900 mr-2"}),se]},ve))})]}),I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[I.jsxs("h3",{className:"serif text-xl text-stone-900 mb-4 flex items-center gap-2",children:[I.jsx("span",{className:"bg-stone-900 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center font-sans",children:"1"}),"Tus Datos"]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Nombre y Apellido"}),I.jsx("input",{type:"text",name:"name",value:i.name,onChange:X,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${P.name?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"Ej: Mara Prez"}),P.name&&I.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.name})]}),I.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Telfono"}),I.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:X,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${P.phone?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"+569...",inputMode:"numeric"}),P.phone&&I.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.phone})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Email"}),I.jsx("input",{type:"email",name:"email",value:i.email,onChange:X,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${P.email?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"correo@ejemplo.com"}),P.email&&I.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.email})]})]}),I.jsxs("div",{className:"animate-in fade-in pt-2",children:[I.jsxs("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1 flex items-center gap-1",children:[I.jsx(SR,{size:12})," Quin te recomend? (Opcional)"]}),I.jsx("input",{type:"text",name:"referral",value:i.referral,onChange:X,className:"w-full px-4 py-3 rounded-lg bg-purple-50 border border-purple-100 focus:border-purple-300 focus:ring-1 outline-none transition-all placeholder-purple-300 text-purple-900",placeholder:"Nombre o Telfono de tu amiga"})]}),i.isHomeService&&I.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 pt-2",children:[I.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Direccin (Comuna y Calle)"}),I.jsxs("div",{className:"relative",children:[I.jsx("input",{type:"text",name:"address",value:i.address,onChange:X,className:`w-full px-4 py-3 rounded-lg bg-amber-50 border ${P.address?"border-red-300 focus:border-red-500":"border-amber-200 focus:border-amber-500"} focus:ring-1 pl-10 outline-none transition-all`,placeholder:"Av. Irarrzaval 1234, uoa"}),I.jsx(wR,{size:18,className:"absolute left-3 top-3.5 text-amber-500"})]}),P.address&&I.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.address})]})]})]})]}),I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[I.jsxs("h3",{className:"serif text-xl text-stone-900 mb-4 flex items-center gap-2",children:[I.jsx("span",{className:"bg-stone-900 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center font-sans",children:"2"}),"Fecha y Hora"]}),I.jsxs("div",{className:"mb-6",children:[I.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Selecciona un da"}),I.jsxs("div",{className:"relative",children:[I.jsx("input",{type:"date",name:"date",min:new Date().toISOString().split("T")[0],value:i.date,onChange:X,className:`w-full px-4 py-4 rounded-xl bg-stone-50 border ${P.date?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} text-lg font-medium shadow-sm outline-none`}),I.jsx(BL,{size:20,className:"absolute right-4 top-4.5 text-stone-400 pointer-events-none"})]}),P.date&&I.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.date})]}),i.date&&I.jsxs("div",{className:"animate-in fade-in",children:[I.jsxs("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-3 flex justify-between",children:[I.jsx("span",{children:"Horas Disponibles"}),f&&I.jsxs("span",{className:"flex items-center text-stone-400",children:[I.jsx(Cd,{size:12,className:"animate-spin mr-1"})," Buscando..."]})]}),m.length>0?I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-4 gap-3",children:m.map(se=>I.jsx("button",{onClick:()=>pe(se),className:`py-3 px-2 rounded-lg text-sm font-bold transition-all transform active:scale-95 ${i.time===se?"bg-stone-900 text-white shadow-md scale-105 ring-2 ring-offset-2 ring-stone-900":"bg-white border border-stone-200 text-stone-600 hover:border-stone-900 hover:bg-stone-50"}`,children:se},se))}),P.time&&I.jsx("p",{className:"text-red-500 text-xs mt-2 text-center bg-red-50 p-2 rounded",children:P.time})]}):I.jsx("div",{className:"bg-stone-50 p-4 rounded-lg text-center text-stone-500 text-sm",children:f?"Cargando...":"No hay horas disponibles para este da. Intenta otra fecha."})]}),!i.date&&I.jsxs("div",{className:"text-center py-8 text-stone-400 text-sm italic",children:[I.jsx(FL,{size:32,className:"mx-auto mb-2 opacity-20"}),"Selecciona una fecha para ver disponibilidad"]})]}),I.jsxs("div",{className:"pt-2 sticky bottom-4 z-10",children:[I.jsxs("button",{onClick:()=>Oe(),disabled:a,className:"w-full flex justify-center items-center space-x-2 bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-xl shadow-xl transition-all transform hover:-translate-y-1 disabled:opacity-75 disabled:cursor-not-allowed disabled:transform-none",children:[a?I.jsx(Cd,{className:"animate-spin"}):I.jsx(iB,{size:22}),I.jsx("span",{className:"text-lg",children:a?"Procesando...":"Confirmar y Enviar WhatsApp"})]}),I.jsx("p",{className:"text-xs text-center text-stone-400 mt-3 px-4",children:"Al confirmar, volvers al inicio y se abrir WhatsApp."})]})]})]})},I7=({onSelectPerfume:e})=>{const[t,n]=k.useState(!1),[r,i]=k.useState(""),[o,a]=k.useState([]),[c,f]=k.useState(!1),d=v=>{if(v.preventDefault(),!r.trim())return;const b=r.toLowerCase().split(/[\s,]+/).filter(N=>N.length>2),P=xa.map(N=>{let R=0;const D=[],F=(L,U)=>{b.forEach(G=>{L.toLowerCase().includes(G)&&(R+=U,D.includes(G)||D.push(G))})};return F(N.name,3),F(N.description,1),F(N.brand,2),N.notes.forEach(L=>F(L,2)),F(N.category==="arab"?"arabe":"clasico",2),{perfume:N,score:R,matches:D}}).filter(N=>N.score>0).sort((N,R)=>R.score-N.score).slice(0,3);a(P),f(!0)},m=()=>{i(""),a([]),f(!1)};return I.jsxs(I.Fragment,{children:[I.jsxs("button",{onClick:()=>n(!0),className:"fixed bottom-6 right-6 z-40 bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-4 rounded-full shadow-2xl hover:scale-105 transition-transform flex items-center gap-2",children:[I.jsx(Lu,{size:24,className:"animate-pulse"}),I.jsx("span",{className:"font-bold pr-1 hidden md:block",children:"Asesor IA"})]}),t&&I.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:I.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[I.jsxs("div",{className:"bg-gradient-to-r from-purple-700 to-indigo-800 p-6 text-white relative",children:[I.jsx("button",{onClick:()=>n(!1),className:"absolute top-4 right-4 text-white/80 hover:text-white",children:I.jsx(Wd,{size:24})}),I.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2 mb-1",children:[I.jsx(Lu,{className:"text-yellow-300"})," Asesor de Aromas"]}),I.jsx("p",{className:"text-white/80 text-sm",children:"Cuntame qu te gusta y te recomendar tu perfume ideal."})]}),I.jsx("div",{className:"p-6 flex-1 overflow-y-auto",children:c?I.jsx("div",{className:"space-y-4",children:o.length>0?I.jsxs(I.Fragment,{children:[I.jsx("h3",{className:"font-bold text-stone-700 text-sm uppercase tracking-wider mb-2",children:"Mejores Coincidencias:"}),o.map(({perfume:v,matches:b},C)=>I.jsxs("div",{onClick:()=>{e(v.id),n(!1)},className:"border border-stone-200 rounded-xl p-3 flex gap-3 hover:border-purple-500 hover:shadow-md transition cursor-pointer bg-white group",children:[I.jsxs("div",{className:"w-16 h-16 bg-stone-100 rounded-lg flex-shrink-0 overflow-hidden relative",children:[C===0&&I.jsx("div",{className:"absolute top-0 left-0 bg-yellow-400 text-yellow-900 text-[10px] font-bold px-1.5 py-0.5 rounded-br",children:"#1"}),I.jsx("img",{src:v.image,alt:v.name,className:"w-full h-full object-cover"})]}),I.jsxs("div",{className:"flex-1 min-w-0",children:[I.jsx("h4",{className:"font-bold text-stone-900 truncate group-hover:text-purple-700",children:v.name}),I.jsx("p",{className:"text-xs text-stone-500 mb-2 truncate",children:v.brand}),I.jsx("div",{className:"flex flex-wrap gap-1",children:b.map(P=>I.jsxs("span",{className:"bg-purple-100 text-purple-700 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:[" ",P]},P))})]})]},v.id)),I.jsx("button",{onClick:m,className:"w-full text-center text-sm text-stone-400 hover:text-stone-600 mt-4 underline",children:"Probar otra bsqueda"})]}):I.jsxs("div",{className:"text-center py-8",children:[I.jsx("p",{className:"text-stone-500 mb-4",children:"No encontr coincidencias exactas. "}),I.jsx("button",{onClick:m,className:"bg-stone-100 text-stone-700 px-4 py-2 rounded-lg font-bold",children:"Intentar de nuevo"})]})}):I.jsxs("div",{className:"text-center py-8",children:[I.jsx("div",{className:"bg-purple-50 inline-flex p-4 rounded-full mb-4",children:I.jsx(fw,{size:48,className:"text-purple-400"})}),I.jsx("h3",{className:"font-bold text-stone-700 mb-2",children:"Qu buscas hoy?"}),I.jsxs("p",{className:"text-stone-500 text-sm mb-6",children:["Ejemplos: ",I.jsx("br",{}),'"Algo dulce con vainilla"',I.jsx("br",{}),'"Fresco y ctrico para el da"',I.jsx("br",{}),'"Intenso y sexy para fiesta"']})]})}),I.jsx("form",{onSubmit:d,className:"p-4 border-t border-stone-100 bg-stone-50",children:I.jsxs("div",{className:"relative",children:[I.jsx("input",{type:"text",value:r,onChange:v=>i(v.target.value),placeholder:"Escribe aqu...",className:"w-full pl-4 pr-12 py-3 rounded-xl border border-stone-300 focus:ring-2 focus:ring-purple-500 outline-none shadow-sm",autoFocus:!0}),I.jsx("button",{type:"submit",disabled:!r.trim(),className:"absolute right-2 top-2 p-1.5 bg-purple-600 text-white rounded-lg disabled:bg-stone-300 disabled:cursor-not-allowed transition",children:c?I.jsx(pw,{size:20}):I.jsx(ER,{size:20})})]})})]})})]})},P7=()=>{const[e,t]=k.useState(""),[n,r]=k.useState(null),[i,o]=k.useState("all"),[a,c]=k.useState({});k.useEffect(()=>{f()},[]);const f=async()=>{const{data:F}=await Ht.from("inventory").select("product_id, quantity");if(F){const L={};F.forEach(U=>{L[U.product_id]=U.quantity}),c(L)}},d=F=>{t("");const L=xa.find(U=>U.id===F);L&&(o(L.category),setTimeout(()=>{const U=document.getElementById(`perfume-${F}`);U&&U.scrollIntoView({behavior:"smooth",block:"center"}),U?.classList.add("ring-4","ring-purple-500","ring-opacity-50"),setTimeout(()=>U?.classList.remove("ring-4","ring-purple-500","ring-opacity-50"),2e3)},100))},m=k.useMemo(()=>{const F=new Set;return xa.forEach(L=>L.notes.forEach(U=>F.add(U))),Array.from(F).sort()},[]),v=k.useMemo(()=>xa.filter(F=>{const L=F.name.toLowerCase().includes(e.toLowerCase())||F.brand.toLowerCase().includes(e.toLowerCase()),U=n?F.notes.includes(n):!0,G=i==="all"||F.category===i;return L&&U&&G}).sort((F,L)=>{const U=a[F.id]!==void 0?a[F.id]>0:F.stock,G=a[L.id]!==void 0?a[L.id]>0:L.stock;return U===G?0:U?-1:1}),[e,n,i,a]),b=v.filter(F=>F.category==="classic"),C=v.filter(F=>F.category==="arab"),P=(F,L)=>{const U=L==="5ml"?F.price5ml:F.price10ml,G=`Hola Tus3B Style, quiero comprar el decant de *${F.brand} - ${F.name}* en formato *${L}* por $${U}. Tienen disponibilidad?`,q=`https://wa.me/${Pu}?text=${encodeURIComponent(G)}`;window.open(q,"_blank")},N=F=>{if(!F.priceFullBottle)return;const L=`Hola Tus3B Style, quiero comprar la botella completa de *${F.brand} - ${F.name}* por $${F.priceFullBottle.toLocaleString("es-CL")}. Tienen disponibilidad?`,U=`https://wa.me/${Pu}?text=${encodeURIComponent(L)}`;window.open(U,"_blank")},R=()=>{window.open(`https://wa.me/${Pu}?text=${encodeURIComponent("Hola Tus3B Style, me gustara cotizar/encargar un perfume que no veo en el catlogo.")}`,"_blank")},D=F=>I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12",children:F.map((L,U)=>I.jsxs("div",{className:"group flex flex-col h-full",children:[I.jsxs("div",{className:"relative aspect-[4/5] overflow-hidden bg-white rounded-2xl mb-5 shadow-[0_2px_10px_-4px_rgba(0,0,0,0.05)] border border-stone-100 transition-all duration-300 group-hover:shadow-[0_8px_30px_-4px_rgba(0,0,0,0.1)]",children:[!e&&!n&&I.jsx("div",{className:"absolute top-0 left-0 bg-stone-900 text-white w-8 h-8 flex items-center justify-center font-serif text-sm border-br-xl z-10",children:U+1}),I.jsxs("div",{className:"relative w-full h-full p-8 transition-transform duration-700 ease-out group-hover:scale-105",children:[I.jsx("img",{src:L.image,alt:L.name,className:`w-full h-full object-contain ${L.secondaryImage?"transition-opacity duration-500 group-hover:opacity-0":""}`}),L.secondaryImage&&I.jsx("img",{src:L.secondaryImage,alt:`${L.name} detalle`,className:"absolute inset-0 w-full h-full object-contain p-0 transition-opacity duration-500 opacity-0 group-hover:opacity-100"})]}),I.jsx("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity bg-stone-900/90 text-white text-[10px] uppercase font-bold px-2 py-1 rounded",children:"Original"}),!L.stock&&I.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-[1px] flex items-center justify-center z-20",children:I.jsx("span",{className:"bg-stone-900 text-white px-4 py-2 rounded-lg font-bold uppercase tracking-widest text-xs shadow-lg",children:"Agotado"})})]}),I.jsxs("div",{className:"flex-1 flex flex-col",children:[I.jsx("h4",{className:"text-xs uppercase tracking-wider text-stone-500 font-bold mb-1",children:L.brand}),I.jsx("h3",{className:"serif text-2xl text-stone-900 mb-2 group-hover:text-stone-700 transition-colors",children:L.name}),I.jsx("p",{className:"text-stone-600 text-sm mb-4 line-clamp-3 leading-relaxed flex-grow",children:L.description}),I.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:L.notes.slice(0,3).map(G=>I.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-stone-50 text-stone-500 px-2 py-1 rounded border border-stone-100",children:G},G))}),I.jsxs("div",{className:"mt-auto space-y-3",children:[!L.isSpray&&I.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[I.jsxs("button",{onClick:()=>P(L,"5ml"),disabled:!L.stock,className:`group/btn flex flex-col items-center justify-center p-2.5 border rounded-lg transition-all duration-300 ${L.stock?"border-stone-200 hover:border-stone-900 hover:bg-stone-900":"border-stone-100 bg-stone-50 opacity-50 cursor-not-allowed"}`,children:[I.jsx("span",{className:"text-[10px] font-bold text-stone-500 uppercase mb-0.5 group-hover/btn:text-stone-400",children:"5 ML"}),I.jsxs("span",{className:"text-stone-900 font-semibold group-hover/btn:text-white",children:["$",L.price5ml.toLocaleString("es-CL")]})]}),I.jsxs("button",{onClick:()=>P(L,"10ml"),disabled:!L.stock,className:`group/btn flex flex-col items-center justify-center p-2.5 border rounded-lg transition-all duration-300 ${L.stock?"border-stone-200 hover:border-stone-900 hover:bg-stone-900":"border-stone-100 bg-stone-50 opacity-50 cursor-not-allowed"}`,children:[I.jsx("span",{className:"text-[10px] font-bold text-stone-500 uppercase mb-0.5 group-hover/btn:text-stone-400",children:"10 ML"}),I.jsxs("span",{className:"text-stone-900 font-semibold group-hover/btn:text-white",children:["$",L.price10ml.toLocaleString("es-CL")]})]})]}),L.priceFullBottle&&I.jsxs("button",{onClick:()=>N(L),disabled:!(a[L.id]!==void 0?a[L.id]>0:L.stock),className:`w-full flex items-center justify-center gap-2 p-3 rounded-lg font-bold uppercase text-xs tracking-wider transition-all ${(a[L.id]!==void 0?a[L.id]>0:L.stock)?"bg-stone-900 text-white hover:bg-stone-800 shadow-md hover:shadow-lg":"bg-stone-100 text-stone-400 cursor-not-allowed"}`,children:[I.jsx(Ad,{size:14}),I.jsxs("span",{children:["Botella ",L.isSpray?"200ml":"100ml"," - $",L.priceFullBottle.toLocaleString("es-CL")]})]})]})]})]},L.id))});return I.jsxs("div",{className:"space-y-16 fade-in",children:[I.jsxs("div",{className:"flex flex-col border-b border-stone-200 pb-8 gap-6",children:[I.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[I.jsxs("div",{children:[I.jsx("h3",{className:"serif text-4xl text-stone-900",children:"Catlogo de Decants"}),I.jsx("p",{className:"text-stone-500 mt-2 max-w-xl",children:"Descubre tu firma olfativa con nuestra curadura de perfumes 100% originales."})]}),I.jsxs("div",{className:"relative w-full md:w-72",children:[I.jsx("input",{type:"text",placeholder:"Buscar marca o nombre...",className:"pl-10 pr-4 py-3 border border-stone-300 rounded-xl focus:ring-stone-900 focus:border-stone-900 w-full transition-shadow hover:shadow-sm",value:e,onChange:F=>t(F.target.value)}),I.jsx(pw,{size:18,className:"absolute left-3 top-3.5 text-stone-400"})]})]}),I.jsx("div",{className:"w-full overflow-x-auto pb-2 -mx-4 px-4 md:mx-0 md:px-0 scrollbar-hide",children:I.jsxs("div",{className:"flex flex-nowrap md:flex-wrap gap-2 items-center min-w-max",children:[I.jsx("span",{className:"text-xs font-bold uppercase text-stone-400 mr-2 sticky left-0 bg-white pl-2 md:pl-0",children:"Filtrar:"}),m.map(F=>I.jsx("button",{onClick:()=>r(n===F?null:F),className:`text-xs px-4 py-2 rounded-full border transition-all duration-200 whitespace-nowrap ${n===F?"bg-stone-900 text-white border-stone-900 shadow-md":"bg-white text-stone-600 border-stone-200 active:bg-stone-100"}`,children:F},F))]})})]}),I.jsxs("section",{className:"bg-stone-50 rounded-3xl p-8 md:p-12 relative overflow-hidden",children:[I.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-purple-100 rounded-full blur-[80px] opacity-60 mix-blend-multiply"}),I.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-amber-100 rounded-full blur-[60px] opacity-60 mix-blend-multiply"}),I.jsxs("div",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[I.jsxs("div",{className:"space-y-6",children:[I.jsx("span",{className:"inline-block px-3 py-1 bg-stone-900 text-white text-[10px] font-bold uppercase tracking-widest rounded-full",children:"Sabas que..."}),I.jsxs("h3",{className:"serif text-3xl md:text-4xl text-stone-900 leading-tight",children:["Por qu elegir ",I.jsx("span",{className:"italic text-stone-500",children:"Decants"}),"?"]}),I.jsx("p",{className:"text-stone-600 text-lg font-light leading-relaxed",children:"No necesitas gastar una fortuna para oler increble. Los decants son la forma inteligente de construir tu coleccin de perfumes."}),I.jsxs("ul",{className:"space-y-4 pt-2",children:[I.jsxs("li",{className:"flex items-start gap-3",children:[I.jsx("div",{className:"bg-white p-1.5 rounded-full shadow-sm mt-0.5",children:I.jsx(u0,{size:14,className:"text-green-500"})}),I.jsxs("span",{className:"text-stone-700 text-sm",children:[I.jsx("strong",{className:"text-stone-900",children:"Variedad vs. Monotona:"})," Por el precio de 1 botella llena, puedes tener 5 fragancias diferentes para cada ocasin."]})]}),I.jsxs("li",{className:"flex items-start gap-3",children:[I.jsx("div",{className:"bg-white p-1.5 rounded-full shadow-sm mt-0.5",children:I.jsx(u0,{size:14,className:"text-green-500"})}),I.jsxs("span",{className:"text-stone-700 text-sm",children:[I.jsx("strong",{className:"text-stone-900",children:"Portabilidad Total:"})," Llvalos en tu cartera, auto o viaje. El formato perfecto para reaplicar durante el da."]})]}),I.jsxs("li",{className:"flex items-start gap-3",children:[I.jsx("div",{className:"bg-white p-1.5 rounded-full shadow-sm mt-0.5",children:I.jsx(u0,{size:14,className:"text-green-500"})}),I.jsxs("span",{className:"text-stone-700 text-sm",children:[I.jsx("strong",{className:"text-stone-900",children:"Prueba Real:"})," salo por semanas antes de comprometerte con la botella grande (que tambin vendemos!)."]})]})]})]}),I.jsxs("div",{className:"relative",children:[I.jsx("img",{src:"/images/perfumes/decant-showcase.png",alt:"Coleccin de Decants",className:"rounded-2xl shadow-xl w-full object-cover h-80 rotate-2 hover:rotate-0 transition-transform duration-500",onError:F=>F.target.src="https://images.unsplash.com/photo-1592914610354-fd354ea45e48?auto=format&fit=crop&q=80&w=800"}),I.jsxs("div",{className:"absolute -bottom-6 -left-6 bg-white p-4 rounded-xl shadow-lg border border-stone-100 max-w-[200px]",children:[I.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[I.jsx(_R,{fill:"#fbbf24",className:"text-amber-400",size:16}),I.jsx("span",{className:"text-xs font-bold text-stone-900",children:"100% Originales"})]}),I.jsx("p",{className:"text-[10px] text-stone-500 leading-tight",children:"Nunca rellenamos con imitaciones. Solo extraemos el perfume directo de la botella original."})]})]})]})]}),(()=>{const F=G=>G.some(q=>a[q.id]!==void 0?a[q.id]>0:q.stock),U=[{id:"arab",hasStock:F(C),items:C,render:()=>I.jsxs("section",{children:[I.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[I.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:I.jsx(Lu,{size:24,className:"text-purple-600"})}),I.jsxs("div",{children:[I.jsx("h2",{className:"serif text-3xl text-stone-900",children:"Joyas rabes"}),I.jsx("p",{className:"text-sm text-stone-500 uppercase tracking-widest font-bold mt-1",children:"Virales del Momento"})]})]}),D(C)]},"arab")},{id:"classic",hasStock:F(b),items:b,render:()=>I.jsxs("section",{children:[I.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[I.jsx("div",{className:"bg-stone-100 p-2 rounded-full",children:I.jsx(jL,{size:24,className:"text-stone-800"})}),I.jsxs("div",{children:[I.jsx("h2",{className:"serif text-3xl text-stone-900",children:"Clsicos del Lujo"}),I.jsx("p",{className:"text-sm text-stone-500 uppercase tracking-widest font-bold mt-1",children:"Ranking de Tendencia 2025-26"})]})]}),D(b)]},"classic")}].sort((G,q)=>G.hasStock===q.hasStock?G.id==="arab"?-1:1:G.hasStock?-1:1);return U.map((G,q)=>I.jsxs(mn.Fragment,{children:[G.items.length>0&&G.render(),q===0&&U.length>1&&U[1].items.length>0&&U[0].items.length>0&&I.jsx("div",{className:"border-t border-stone-100 my-16"})]},G.id))})(),v.length===0&&I.jsxs("div",{className:"text-center py-24 bg-stone-50 rounded-2xl border border-dashed border-stone-200",children:[I.jsx(Ad,{size:48,className:"mx-auto text-stone-300 mb-4"}),I.jsx("h4",{className:"text-stone-900 font-bold text-lg mb-1",children:"No encontramos resultados"}),I.jsx("p",{className:"text-stone-500 text-sm",children:"Prueba ajustando tus filtros de bsqueda."})]}),I.jsxs("div",{className:"mt-20 bg-stone-900 rounded-3xl p-8 md:p-14 text-center text-white relative overflow-hidden shadow-2xl ring-1 ring-white/10",children:[I.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[I.jsx("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-full mb-6 ring-1 ring-white/20",children:I.jsx(YL,{size:32,className:"text-yellow-200"})}),I.jsx("h3",{className:"serif text-3xl md:text-5xl mb-6",children:"Buscas algo exclusivo?"}),I.jsx("p",{className:"text-stone-300 mb-10 max-w-2xl mx-auto text-lg font-light leading-relaxed",children:"Si no encuentras tu fragancia favorita en nuestro catlogo, contctanos. Hacemos encargos especiales para que encuentres tu firma olfativa perfecta."}),I.jsxs("button",{onClick:R,className:"group inline-flex items-center bg-white text-stone-900 px-8 py-4 rounded-full font-bold uppercase tracking-widest hover:bg-stone-100 transition-all transform hover:-translate-y-1 shadow-[0_10px_20px_-10px_rgba(255,255,255,0.3)]",children:[I.jsx(fw,{className:"mr-3 group-hover:text-amber-600 transition-colors",size:20}),"Cotizar Encargo"]})]}),I.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://images.unsplash.com/photo-1541643600914-78b084683601?auto=format&fit=crop&q=80')] opacity-20 bg-cover bg-center mix-blend-overlay grayscale"})]}),I.jsx(I7,{onSelectPerfume:d})]})},N7=()=>I.jsx("footer",{className:"bg-stone-900 text-white py-12 md:py-16",children:I.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 text-center md:text-left",children:[I.jsxs("div",{children:[I.jsxs("span",{className:"serif text-3xl font-bold italic tracking-tighter block mb-4",children:["Tus3B ",I.jsx("span",{className:"text-stone-400 not-italic font-light text-xl ml-1",children:"Style"})]}),I.jsx("p",{className:"text-stone-400 font-light max-w-xs mx-auto md:mx-0",children:"Elevando tu estilo con servicios de peluquera premium a domicilio y lo mejor de la perfumera internacional."})]}),I.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[I.jsx("h4",{className:"uppercase tracking-widest text-xs font-bold text-stone-500 mb-4",children:"Contacto"}),I.jsxs("a",{href:`https://wa.me/${Pu}`,className:"text-stone-300 hover:text-white mb-2 transition flex items-center gap-2",children:[I.jsx(fw,{size:16})," WhatsApp: +56 9 8452 4774"]}),I.jsx("span",{className:"text-stone-300 mb-2",children:"Santiago, Chile"}),I.jsx("span",{className:"text-stone-300",children:"contacto@tus3b.cl"})]}),I.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[I.jsx("h4",{className:"uppercase tracking-widest text-xs font-bold text-stone-500 mb-4",children:"Sguenos"}),I.jsx("div",{className:"flex space-x-4",children:I.jsx("a",{href:dB,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-stone-800 rounded-full hover:bg-stone-700 transition",children:I.jsx(WL,{size:20})})})]})]}),I.jsxs("div",{className:"border-t border-stone-800 mt-12 pt-8 text-center text-stone-500 text-sm font-light",children:[" ",new Date().getFullYear()," Tus3B Style. Todos los derechos reservados."]})]})});var R7={};let O7,k7;function M7(){return{geminiUrl:O7,vertexUrl:k7}}function D7(e,t,n,r){var i,o;if(!e?.baseUrl){const a=M7();return t?(i=a.vertexUrl)!==null&&i!==void 0?i:n:(o=a.geminiUrl)!==null&&o!==void 0?o:r}return e.baseUrl}class Os{}function je(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function S(e,t,n){for(let o=0;o<t.length-1;o++){const a=t[o];if(a.endsWith("[]")){const c=a.slice(0,-2);if(!(c in e))if(Array.isArray(n))e[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(e[c])){const f=e[c];if(Array.isArray(n))for(let d=0;d<f.length;d++){const m=f[d];S(m,t.slice(o+1),n[d])}else for(const d of f)S(d,t.slice(o+1),n)}return}else if(a.endsWith("[0]")){const c=a.slice(0,-3);c in e||(e[c]=[{}]);const f=e[c];S(f[0],t.slice(o+1),n);return}(!e[a]||typeof e[a]!="object")&&(e[a]={}),e=e[a]}const r=t[t.length-1],i=e[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function E(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const i=t[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in e){const a=e[o];return Array.isArray(a)?a.map(c=>E(c,t.slice(r+1),n)):n}else return n}else e=e[i]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function L7(e,t){for(const[n,r]of Object.entries(t)){const i=n.split("."),o=r.split("."),a=new Set;let c=-1;for(let f=0;f<i.length;f++)if(i[f]==="*"){c=f;break}if(c!==-1&&o.length>c)for(let f=c;f<o.length;f++){const d=o[f];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}My(e,i,o,0,a)}}function My(e,t,n,r,i){if(r>=t.length||typeof e!="object"||e===null)return;const o=t[r];if(o.endsWith("[]")){const a=o.slice(0,-2),c=e;if(a in c&&Array.isArray(c[a]))for(const f of c[a])My(f,t,n,r+1,i)}else if(o==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const a=e,c=Object.keys(a).filter(d=>!d.startsWith("_")&&!i.has(d)),f={};for(const d of c)f[d]=a[d];for(const[d,m]of Object.entries(f)){const v=[];for(const b of n.slice(r))b==="*"?v.push(d):v.push(b);S(a,v,m)}for(const d of c)delete a[d]}}else{const a=e;o in a&&My(a[o],t,n,r+1,i)}}function Sw(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function B7(e){const t={},n=E(e,["operationName"]);n!=null&&S(t,["operationName"],n);const r=E(e,["resourceName"]);return r!=null&&S(t,["_url","resourceName"],r),t}function F7(e){const t={},n=E(e,["name"]);n!=null&&S(t,["name"],n);const r=E(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=E(e,["done"]);i!=null&&S(t,["done"],i);const o=E(e,["error"]);o!=null&&S(t,["error"],o);const a=E(e,["response","generateVideoResponse"]);return a!=null&&S(t,["response"],U7(a)),t}function j7(e){const t={},n=E(e,["name"]);n!=null&&S(t,["name"],n);const r=E(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=E(e,["done"]);i!=null&&S(t,["done"],i);const o=E(e,["error"]);o!=null&&S(t,["error"],o);const a=E(e,["response"]);return a!=null&&S(t,["response"],V7(a)),t}function U7(e){const t={},n=E(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>z7(a))),S(t,["generatedVideos"],o)}const r=E(e,["raiMediaFilteredCount"]);r!=null&&S(t,["raiMediaFilteredCount"],r);const i=E(e,["raiMediaFilteredReasons"]);return i!=null&&S(t,["raiMediaFilteredReasons"],i),t}function V7(e){const t={},n=E(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>$7(a))),S(t,["generatedVideos"],o)}const r=E(e,["raiMediaFilteredCount"]);r!=null&&S(t,["raiMediaFilteredCount"],r);const i=E(e,["raiMediaFilteredReasons"]);return i!=null&&S(t,["raiMediaFilteredReasons"],i),t}function z7(e){const t={},n=E(e,["video"]);return n!=null&&S(t,["video"],Y7(n)),t}function $7(e){const t={},n=E(e,["_self"]);return n!=null&&S(t,["video"],X7(n)),t}function G7(e){const t={},n=E(e,["operationName"]);return n!=null&&S(t,["_url","operationName"],n),t}function H7(e){const t={},n=E(e,["operationName"]);return n!=null&&S(t,["_url","operationName"],n),t}function q7(e){const t={},n=E(e,["name"]);n!=null&&S(t,["name"],n);const r=E(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=E(e,["done"]);i!=null&&S(t,["done"],i);const o=E(e,["error"]);o!=null&&S(t,["error"],o);const a=E(e,["response"]);return a!=null&&S(t,["response"],W7(a)),t}function W7(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["parent"]);r!=null&&S(t,["parent"],r);const i=E(e,["documentName"]);return i!=null&&S(t,["documentName"],i),t}function $O(e){const t={},n=E(e,["name"]);n!=null&&S(t,["name"],n);const r=E(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=E(e,["done"]);i!=null&&S(t,["done"],i);const o=E(e,["error"]);o!=null&&S(t,["error"],o);const a=E(e,["response"]);return a!=null&&S(t,["response"],K7(a)),t}function K7(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["parent"]);r!=null&&S(t,["parent"],r);const i=E(e,["documentName"]);return i!=null&&S(t,["documentName"],i),t}function Y7(e){const t={},n=E(e,["uri"]);n!=null&&S(t,["uri"],n);const r=E(e,["encodedVideo"]);r!=null&&S(t,["videoBytes"],Sw(r));const i=E(e,["encoding"]);return i!=null&&S(t,["mimeType"],i),t}function X7(e){const t={},n=E(e,["gcsUri"]);n!=null&&S(t,["uri"],n);const r=E(e,["bytesBase64Encoded"]);r!=null&&S(t,["videoBytes"],Sw(r));const i=E(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}var pS;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(pS||(pS={}));var mS;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(mS||(mS={}));var gS;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(gS||(gS={}));var va;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(va||(va={}));var vS;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(vS||(vS={}));var yS;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(yS||(yS={}));var xS;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(xS||(xS={}));var wS;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(wS||(wS={}));var bS;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(bS||(bS={}));var ES;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})(ES||(ES={}));var _S;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(_S||(_S={}));var SS;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(SS||(SS={}));var CS;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(CS||(CS={}));var AS;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(AS||(AS={}));var TS;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(TS||(TS={}));var IS;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(IS||(IS={}));var PS;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(PS||(PS={}));var NS;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(NS||(NS={}));var RS;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(RS||(RS={}));var R0;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(R0||(R0={}));var OS;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(OS||(OS={}));var kS;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(kS||(kS={}));var MS;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(MS||(MS={}));var Dy;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Dy||(Dy={}));var DS;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(DS||(DS={}));var LS;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(LS||(LS={}));var BS;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(BS||(BS={}));var FS;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(FS||(FS={}));var jS;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(jS||(jS={}));var US;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(US||(US={}));var VS;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(VS||(VS={}));var zS;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(zS||(zS={}));var $S;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})($S||($S={}));var GS;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(GS||(GS={}));var HS;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(HS||(HS={}));var qS;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(qS||(qS={}));var WS;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(WS||(WS={}));var KS;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(KS||(KS={}));var YS;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(YS||(YS={}));var XS;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(XS||(XS={}));var JS;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(JS||(JS={}));var ZS;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(ZS||(ZS={}));var QS;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(QS||(QS={}));var eC;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(eC||(eC={}));var tC;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(tC||(tC={}));var nC;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(nC||(nC={}));var rC;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(rC||(rC={}));var iC;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(iC||(iC={}));var oC;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(oC||(oC={}));var sC;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(sC||(sC={}));var aC;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(aC||(aC={}));var lC;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(lC||(lC={}));var uC;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(uC||(uC={}));var cC;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(cC||(cC={}));var dC;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(dC||(dC={}));var _u;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(_u||(_u={}));class Ly{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class od{get text(){var t,n,r,i,o,a,c,f;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const v=[];for(const b of(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[C,P]of Object.entries(b))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(P!==null||P!==void 0)&&v.push(C);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;m=!0,d+=b.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var t,n,r,i,o,a,c,f;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const v of(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[b,C]of Object.entries(v))b!=="inlineData"&&(C!==null||C!==void 0)&&m.push(b);v.inlineData&&typeof v.inlineData.data=="string"&&(d+=atob(v.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,n,r,i,o,a,c,f;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if(d?.length!==0)return d}get executableCode(){var t,n,r,i,o,a,c,f,d;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if(m?.length!==0)return(d=m?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,n,r,i,o,a,c,f,d;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if(m?.length!==0)return(d=m?.[0])===null||d===void 0?void 0:d.output}}class fC{}class hC{}class J7{}class Z7{}class Q7{}class eF{}class pC{}class mC{}class gC{}class tF{}class O0{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new O0;let i;const o=t;return n?i=j7(o):i=F7(o),Object.assign(r,i),r}}class vC{}class yC{}class xC{}class wC{}class nF{}class rF{}class iF{}class Cw{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Cw,o=q7(t);return Object.assign(r,o),r}}class oF{}class sF{}class aF{}class bC{}class lF{get text(){var t,n,r;let i="",o=!1;const a=[];for(const c of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[f,d]of Object.entries(c))f!=="text"&&f!=="thought"&&d!==null&&a.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,i+=c.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var t,n,r;let i="";const o=[];for(const a of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(a))c!=="inlineData"&&f!==null&&o.push(c);a.inlineData&&typeof a.inlineData.data=="string"&&(i+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class uF{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Aw{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Aw,o=$O(t);return Object.assign(r,o),r}}function kt(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function GO(e,t){const n=kt(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function HO(e){return Array.isArray(e)?e.map(t=>k0(t)):[k0(e)]}function k0(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function qO(e){const t=k0(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function WO(e){const t=k0(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function EC(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function KO(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>EC(t)):[EC(e)]}function By(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function _C(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function SC(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function zr(e){if(e==null)throw new Error("ContentUnion is required");return By(e)?e:{role:"user",parts:KO(e)}}function Tw(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=zr(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=zr(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>zr(n)):[zr(t)]}function eo(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(_C(e)||SC(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[zr(e)]}const t=[],n=[],r=By(e[0]);for(const i of e){const o=By(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)t.push(i);else{if(_C(i)||SC(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||t.push({role:"user",parts:KO(n)}),t}function cF(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(va).includes(n[0].toUpperCase())?n[0].toUpperCase():va.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(va).includes(r.toUpperCase())?r.toUpperCase():va.TYPE_UNSPECIFIED})}}function Ou(e){const t={},n=["items"],r=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=e.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(t.nullable=!0,e=o[1]):o[1].type==="null"&&(t.nullable=!0,e=o[0])),e.type instanceof Array&&cF(e.type,t);for(const[a,c]of Object.entries(e))if(c!=null)if(a=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;t.type=Object.values(va).includes(c.toUpperCase())?c.toUpperCase():va.TYPE_UNSPECIFIED}else if(n.includes(a))t[a]=Ou(c);else if(r.includes(a)){const f=[];for(const d of c){if(d.type=="null"){t.nullable=!0;continue}f.push(Ou(d))}t[a]=f}else if(i.includes(a)){const f={};for(const[d,m]of Object.entries(c))f[d]=Ou(m);t[a]=f}else{if(a==="additionalProperties")continue;t[a]=c}return t}function Iw(e){return Ou(e)}function Pw(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Nw(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Qu(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Ou(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Ou(t.response));return e}function ec(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function dF(e,t,n,r=1){const i=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:i?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:i?`${n}/${t}`:t}function ks(e,t){if(typeof t!="string")throw new Error("name must be a string");return dF(e,t,"cachedContents")}function YO(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Aa(e){return Sw(e)}function fF(e){return e!=null&&typeof e=="object"&&"name"in e}function hF(e){return e!=null&&typeof e=="object"&&"video"in e}function pF(e){return e!=null&&typeof e=="object"&&"uri"in e}function XO(e){var t;let n;if(fF(e)&&(n=e.name),!(pF(e)&&(n=e.uri,n===void 0))&&!(hF(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function JO(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function ZO(e){for(const t of["models","tunedModels","publisherModels"])if(mF(e,t))return e[t];return[]}function mF(e,t){return e!==null&&typeof e=="object"&&t in e}function gF(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function vF(e,t={}){const n=[],r=new Set;for(const i of e){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const a=gF(i,t);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function QO(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function yF(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function e3(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return e;let o=!1;for(const a of i){if(typeof a!="object"||a===null)continue;const f=a.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){o=!0;break}}return o&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function tc(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function t3(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function xF(e){const t={},n=E(e,["responsesFile"]);n!=null&&S(t,["fileName"],n);const r=E(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>QF(a))),S(t,["inlinedResponses"],o)}const i=E(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["inlinedEmbedContentResponses"],o)}return t}function wF(e){const t={},n=E(e,["predictionsFormat"]);n!=null&&S(t,["format"],n);const r=E(e,["gcsDestination","outputUriPrefix"]);r!=null&&S(t,["gcsUri"],r);const i=E(e,["bigqueryDestination","outputUri"]);return i!=null&&S(t,["bigqueryUri"],i),t}function bF(e){const t={},n=E(e,["format"]);n!=null&&S(t,["predictionsFormat"],n);const r=E(e,["gcsUri"]);r!=null&&S(t,["gcsDestination","outputUriPrefix"],r);const i=E(e,["bigqueryUri"]);if(i!=null&&S(t,["bigqueryDestination","outputUri"],i),E(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(E(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(E(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function p0(e){const t={},n=E(e,["name"]);n!=null&&S(t,["name"],n);const r=E(e,["metadata","displayName"]);r!=null&&S(t,["displayName"],r);const i=E(e,["metadata","state"]);i!=null&&S(t,["state"],t3(i));const o=E(e,["metadata","createTime"]);o!=null&&S(t,["createTime"],o);const a=E(e,["metadata","endTime"]);a!=null&&S(t,["endTime"],a);const c=E(e,["metadata","updateTime"]);c!=null&&S(t,["updateTime"],c);const f=E(e,["metadata","model"]);f!=null&&S(t,["model"],f);const d=E(e,["metadata","output"]);return d!=null&&S(t,["dest"],xF(e3(d))),t}function Fy(e){const t={},n=E(e,["name"]);n!=null&&S(t,["name"],n);const r=E(e,["displayName"]);r!=null&&S(t,["displayName"],r);const i=E(e,["state"]);i!=null&&S(t,["state"],t3(i));const o=E(e,["error"]);o!=null&&S(t,["error"],o);const a=E(e,["createTime"]);a!=null&&S(t,["createTime"],a);const c=E(e,["startTime"]);c!=null&&S(t,["startTime"],c);const f=E(e,["endTime"]);f!=null&&S(t,["endTime"],f);const d=E(e,["updateTime"]);d!=null&&S(t,["updateTime"],d);const m=E(e,["model"]);m!=null&&S(t,["model"],m);const v=E(e,["inputConfig"]);v!=null&&S(t,["src"],EF(v));const b=E(e,["outputConfig"]);b!=null&&S(t,["dest"],wF(e3(b)));const C=E(e,["completionStats"]);return C!=null&&S(t,["completionStats"],C),t}function EF(e){const t={},n=E(e,["instancesFormat"]);n!=null&&S(t,["format"],n);const r=E(e,["gcsSource","uris"]);r!=null&&S(t,["gcsUri"],r);const i=E(e,["bigquerySource","inputUri"]);return i!=null&&S(t,["bigqueryUri"],i),t}function _F(e,t){const n={};if(E(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(E(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(E(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=E(t,["fileName"]);r!=null&&S(n,["fileName"],r);const i=E(t,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>ZF(e,a))),S(n,["requests","requests"],o)}return n}function SF(e){const t={},n=E(e,["format"]);n!=null&&S(t,["instancesFormat"],n);const r=E(e,["gcsUri"]);r!=null&&S(t,["gcsSource","uris"],r);const i=E(e,["bigqueryUri"]);if(i!=null&&S(t,["bigquerySource","inputUri"],i),E(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(E(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function CF(e){const t={},n=E(e,["data"]);if(n!=null&&S(t,["data"],n),E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=E(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function AF(e,t){const n={},r=E(t,["name"]);return r!=null&&S(n,["_url","name"],tc(e,r)),n}function TF(e,t){const n={},r=E(t,["name"]);return r!=null&&S(n,["_url","name"],tc(e,r)),n}function IF(e){const t={},n=E(e,["content"]);n!=null&&S(t,["content"],n);const r=E(e,["citationMetadata"]);r!=null&&S(t,["citationMetadata"],PF(r));const i=E(e,["tokenCount"]);i!=null&&S(t,["tokenCount"],i);const o=E(e,["finishReason"]);o!=null&&S(t,["finishReason"],o);const a=E(e,["avgLogprobs"]);a!=null&&S(t,["avgLogprobs"],a);const c=E(e,["groundingMetadata"]);c!=null&&S(t,["groundingMetadata"],c);const f=E(e,["index"]);f!=null&&S(t,["index"],f);const d=E(e,["logprobsResult"]);d!=null&&S(t,["logprobsResult"],d);const m=E(e,["safetyRatings"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(C=>C)),S(t,["safetyRatings"],b)}const v=E(e,["urlContextMetadata"]);return v!=null&&S(t,["urlContextMetadata"],v),t}function PF(e){const t={},n=E(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),S(t,["citations"],r)}return t}function n3(e){const t={},n=E(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>sj(o))),S(t,["parts"],i)}const r=E(e,["role"]);return r!=null&&S(t,["role"],r),t}function NF(e,t){const n={},r=E(e,["displayName"]);if(t!==void 0&&r!=null&&S(t,["batch","displayName"],r),E(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function RF(e,t){const n={},r=E(e,["displayName"]);t!==void 0&&r!=null&&S(t,["displayName"],r);const i=E(e,["dest"]);return t!==void 0&&i!=null&&S(t,["outputConfig"],bF(yF(i))),n}function CC(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["src"]);i!=null&&S(n,["batch","inputConfig"],_F(e,QO(e,i)));const o=E(t,["config"]);return o!=null&&NF(o,n),n}function OF(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["model"],kt(e,r));const i=E(t,["src"]);i!=null&&S(n,["inputConfig"],SF(QO(e,i)));const o=E(t,["config"]);return o!=null&&RF(o,n),n}function kF(e,t){const n={},r=E(e,["displayName"]);return t!==void 0&&r!=null&&S(t,["batch","displayName"],r),n}function MF(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["src"]);i!=null&&S(n,["batch","inputConfig"],VF(e,i));const o=E(t,["config"]);return o!=null&&kF(o,n),n}function DF(e,t){const n={},r=E(t,["name"]);return r!=null&&S(n,["_url","name"],tc(e,r)),n}function LF(e,t){const n={},r=E(t,["name"]);return r!=null&&S(n,["_url","name"],tc(e,r)),n}function BF(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["name"]);r!=null&&S(t,["name"],r);const i=E(e,["done"]);i!=null&&S(t,["done"],i);const o=E(e,["error"]);return o!=null&&S(t,["error"],o),t}function FF(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["name"]);r!=null&&S(t,["name"],r);const i=E(e,["done"]);i!=null&&S(t,["done"],i);const o=E(e,["error"]);return o!=null&&S(t,["error"],o),t}function jF(e,t){const n={},r=E(t,["contents"]);if(r!=null){let o=Tw(e,r);Array.isArray(o)&&(o=o.map(a=>a)),S(n,["requests[]","request","content"],o)}const i=E(t,["config"]);return i!=null&&(S(n,["_self"],UF(i,n)),L7(n,{"requests[].*":"requests[].request.*"})),n}function UF(e,t){const n={},r=E(e,["taskType"]);t!==void 0&&r!=null&&S(t,["requests[]","taskType"],r);const i=E(e,["title"]);t!==void 0&&i!=null&&S(t,["requests[]","title"],i);const o=E(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&S(t,["requests[]","outputDimensionality"],o),E(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(E(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function VF(e,t){const n={},r=E(t,["fileName"]);r!=null&&S(n,["file_name"],r);const i=E(t,["inlinedRequests"]);return i!=null&&S(n,["requests"],jF(e,i)),n}function zF(e){const t={};if(E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const r=E(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function $F(e){const t={},n=E(e,["id"]);n!=null&&S(t,["id"],n);const r=E(e,["args"]);r!=null&&S(t,["args"],r);const i=E(e,["name"]);if(i!=null&&S(t,["name"],i),E(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function GF(e){const t={},n=E(e,["mode"]);n!=null&&S(t,["mode"],n);const r=E(e,["allowedFunctionNames"]);if(r!=null&&S(t,["allowedFunctionNames"],r),E(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function HF(e,t,n){const r={},i=E(t,["systemInstruction"]);n!==void 0&&i!=null&&S(n,["systemInstruction"],n3(zr(i)));const o=E(t,["temperature"]);o!=null&&S(r,["temperature"],o);const a=E(t,["topP"]);a!=null&&S(r,["topP"],a);const c=E(t,["topK"]);c!=null&&S(r,["topK"],c);const f=E(t,["candidateCount"]);f!=null&&S(r,["candidateCount"],f);const d=E(t,["maxOutputTokens"]);d!=null&&S(r,["maxOutputTokens"],d);const m=E(t,["stopSequences"]);m!=null&&S(r,["stopSequences"],m);const v=E(t,["responseLogprobs"]);v!=null&&S(r,["responseLogprobs"],v);const b=E(t,["logprobs"]);b!=null&&S(r,["logprobs"],b);const C=E(t,["presencePenalty"]);C!=null&&S(r,["presencePenalty"],C);const P=E(t,["frequencyPenalty"]);P!=null&&S(r,["frequencyPenalty"],P);const N=E(t,["seed"]);N!=null&&S(r,["seed"],N);const R=E(t,["responseMimeType"]);R!=null&&S(r,["responseMimeType"],R);const D=E(t,["responseSchema"]);D!=null&&S(r,["responseSchema"],Iw(D));const F=E(t,["responseJsonSchema"]);if(F!=null&&S(r,["responseJsonSchema"],F),E(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(E(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=E(t,["safetySettings"]);if(n!==void 0&&L!=null){let be=L;Array.isArray(be)&&(be=be.map(me=>aj(me))),S(n,["safetySettings"],be)}const U=E(t,["tools"]);if(n!==void 0&&U!=null){let be=ec(U);Array.isArray(be)&&(be=be.map(me=>uj(Qu(me)))),S(n,["tools"],be)}const G=E(t,["toolConfig"]);if(n!==void 0&&G!=null&&S(n,["toolConfig"],lj(G)),E(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=E(t,["cachedContent"]);n!==void 0&&q!=null&&S(n,["cachedContent"],ks(e,q));const W=E(t,["responseModalities"]);W!=null&&S(r,["responseModalities"],W);const Z=E(t,["mediaResolution"]);Z!=null&&S(r,["mediaResolution"],Z);const X=E(t,["speechConfig"]);if(X!=null&&S(r,["speechConfig"],Pw(X)),E(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const pe=E(t,["thinkingConfig"]);pe!=null&&S(r,["thinkingConfig"],pe);const ae=E(t,["imageConfig"]);ae!=null&&S(r,["imageConfig"],JF(ae));const le=E(t,["enableEnhancedCivicAnswers"]);return le!=null&&S(r,["enableEnhancedCivicAnswers"],le),r}function qF(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>IF(d))),S(t,["candidates"],f)}const i=E(e,["modelVersion"]);i!=null&&S(t,["modelVersion"],i);const o=E(e,["promptFeedback"]);o!=null&&S(t,["promptFeedback"],o);const a=E(e,["responseId"]);a!=null&&S(t,["responseId"],a);const c=E(e,["usageMetadata"]);return c!=null&&S(t,["usageMetadata"],c),t}function WF(e,t){const n={},r=E(t,["name"]);return r!=null&&S(n,["_url","name"],tc(e,r)),n}function KF(e,t){const n={},r=E(t,["name"]);return r!=null&&S(n,["_url","name"],tc(e,r)),n}function YF(e){const t={};if(E(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=E(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function XF(e){const t={};if(E(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=E(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function JF(e){const t={},n=E(e,["aspectRatio"]);n!=null&&S(t,["aspectRatio"],n);const r=E(e,["imageSize"]);if(r!=null&&S(t,["imageSize"],r),E(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(E(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function ZF(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["request","model"],kt(e,r));const i=E(t,["contents"]);if(i!=null){let c=eo(i);Array.isArray(c)&&(c=c.map(f=>n3(f))),S(n,["request","contents"],c)}const o=E(t,["metadata"]);o!=null&&S(n,["metadata"],o);const a=E(t,["config"]);return a!=null&&S(n,["request","generationConfig"],HF(e,a,E(n,["request"],{}))),n}function QF(e){const t={},n=E(e,["response"]);n!=null&&S(t,["response"],qF(n));const r=E(e,["error"]);return r!=null&&S(t,["error"],r),t}function ej(e,t){const n={},r=E(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=E(e,["pageToken"]);if(t!==void 0&&i!=null&&S(t,["_query","pageToken"],i),E(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function tj(e,t){const n={},r=E(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=E(e,["pageToken"]);t!==void 0&&i!=null&&S(t,["_query","pageToken"],i);const o=E(e,["filter"]);return t!==void 0&&o!=null&&S(t,["_query","filter"],o),n}function nj(e){const t={},n=E(e,["config"]);return n!=null&&ej(n,t),t}function rj(e){const t={},n=E(e,["config"]);return n!=null&&tj(n,t),t}function ij(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=E(e,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>p0(a))),S(t,["batchJobs"],o)}return t}function oj(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=E(e,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Fy(a))),S(t,["batchJobs"],o)}return t}function sj(e){const t={},n=E(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const r=E(e,["codeExecutionResult"]);r!=null&&S(t,["codeExecutionResult"],r);const i=E(e,["executableCode"]);i!=null&&S(t,["executableCode"],i);const o=E(e,["fileData"]);o!=null&&S(t,["fileData"],zF(o));const a=E(e,["functionCall"]);a!=null&&S(t,["functionCall"],$F(a));const c=E(e,["functionResponse"]);c!=null&&S(t,["functionResponse"],c);const f=E(e,["inlineData"]);f!=null&&S(t,["inlineData"],CF(f));const d=E(e,["text"]);d!=null&&S(t,["text"],d);const m=E(e,["thought"]);m!=null&&S(t,["thought"],m);const v=E(e,["thoughtSignature"]);v!=null&&S(t,["thoughtSignature"],v);const b=E(e,["videoMetadata"]);return b!=null&&S(t,["videoMetadata"],b),t}function aj(e){const t={},n=E(e,["category"]);if(n!=null&&S(t,["category"],n),E(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=E(e,["threshold"]);return r!=null&&S(t,["threshold"],r),t}function lj(e){const t={},n=E(e,["functionCallingConfig"]);n!=null&&S(t,["functionCallingConfig"],GF(n));const r=E(e,["retrievalConfig"]);return r!=null&&S(t,["retrievalConfig"],r),t}function uj(e){const t={},n=E(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>v)),S(t,["functionDeclarations"],m)}if(E(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=E(e,["googleSearchRetrieval"]);r!=null&&S(t,["googleSearchRetrieval"],r);const i=E(e,["computerUse"]);i!=null&&S(t,["computerUse"],i);const o=E(e,["fileSearch"]);o!=null&&S(t,["fileSearch"],o);const a=E(e,["codeExecution"]);if(a!=null&&S(t,["codeExecution"],a),E(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=E(e,["googleMaps"]);c!=null&&S(t,["googleMaps"],YF(c));const f=E(e,["googleSearch"]);f!=null&&S(t,["googleSearch"],XF(f));const d=E(e,["urlContext"]);return d!=null&&S(t,["urlContext"],d),t}var _s;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(_s||(_s={}));class Rl{constructor(t,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,i)}init(t,n,r){var i,o;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!r||Object.keys(r).length===0?a={config:{}}:typeof r=="object"?a=Object.assign({},r):a=r,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(i=a.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}class cj extends Os{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Rl(_s.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=CC(this.apiClient,t),r=n._url,i=je("{model}:batchGenerateContent",r),c=n.batch.inputConfig.requests,f=c.requests,d=[];for(const m of f){const v=Object.assign({},m);if(v.systemInstruction){const b=v.systemInstruction;delete v.systemInstruction;const C=v.request;C.systemInstruction=b,v.request=C}d.push(v)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(t),a=this.getBigqueryUri(t);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(a)r.dest=`${a}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=OF(this.apiClient,t);return c=je("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>Fy(m))}else{const d=CC(this.apiClient,t);return c=je("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>p0(m))}}async createEmbeddingsInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=MF(this.apiClient,t);return o=je("{model}:asyncBatchEmbedContent",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>p0(f))}}async get(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=KF(this.apiClient,t);return c=je("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>Fy(m))}else{const d=WF(this.apiClient,t);return c=je("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>p0(m))}}async cancel(t){var n,r,i,o;let a="",c={};if(this.apiClient.isVertexAI()){const f=TF(this.apiClient,t);a=je("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=AF(this.apiClient,t);a=je("batches/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=rj(t);return c=je("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=oj(m),b=new bC;return Object.assign(b,v),b})}else{const d=nj(t);return c=je("batches",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=ij(m),b=new bC;return Object.assign(b,v),b})}}async delete(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=LF(this.apiClient,t);return c=je("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>FF(m))}else{const d=DF(this.apiClient,t);return c=je("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>BF(m))}}}function dj(e){const t={},n=E(e,["data"]);if(n!=null&&S(t,["data"],n),E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=E(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function AC(e){const t={},n=E(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Mj(o))),S(t,["parts"],i)}const r=E(e,["role"]);return r!=null&&S(t,["role"],r),t}function fj(e,t){const n={},r=E(e,["ttl"]);t!==void 0&&r!=null&&S(t,["ttl"],r);const i=E(e,["expireTime"]);t!==void 0&&i!=null&&S(t,["expireTime"],i);const o=E(e,["displayName"]);t!==void 0&&o!=null&&S(t,["displayName"],o);const a=E(e,["contents"]);if(t!==void 0&&a!=null){let m=eo(a);Array.isArray(m)&&(m=m.map(v=>AC(v))),S(t,["contents"],m)}const c=E(e,["systemInstruction"]);t!==void 0&&c!=null&&S(t,["systemInstruction"],AC(zr(c)));const f=E(e,["tools"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(v=>Lj(v))),S(t,["tools"],m)}const d=E(e,["toolConfig"]);if(t!==void 0&&d!=null&&S(t,["toolConfig"],Dj(d)),E(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function hj(e,t){const n={},r=E(e,["ttl"]);t!==void 0&&r!=null&&S(t,["ttl"],r);const i=E(e,["expireTime"]);t!==void 0&&i!=null&&S(t,["expireTime"],i);const o=E(e,["displayName"]);t!==void 0&&o!=null&&S(t,["displayName"],o);const a=E(e,["contents"]);if(t!==void 0&&a!=null){let v=eo(a);Array.isArray(v)&&(v=v.map(b=>b)),S(t,["contents"],v)}const c=E(e,["systemInstruction"]);t!==void 0&&c!=null&&S(t,["systemInstruction"],zr(c));const f=E(e,["tools"]);if(t!==void 0&&f!=null){let v=f;Array.isArray(v)&&(v=v.map(b=>Bj(b))),S(t,["tools"],v)}const d=E(e,["toolConfig"]);t!==void 0&&d!=null&&S(t,["toolConfig"],d);const m=E(e,["kmsKeyName"]);return t!==void 0&&m!=null&&S(t,["encryption_spec","kmsKeyName"],m),n}function pj(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["model"],GO(e,r));const i=E(t,["config"]);return i!=null&&fj(i,n),n}function mj(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["model"],GO(e,r));const i=E(t,["config"]);return i!=null&&hj(i,n),n}function gj(e,t){const n={},r=E(t,["name"]);return r!=null&&S(n,["_url","name"],ks(e,r)),n}function vj(e,t){const n={},r=E(t,["name"]);return r!=null&&S(n,["_url","name"],ks(e,r)),n}function yj(e){const t={},n=E(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function xj(e){const t={},n=E(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function wj(e){const t={};if(E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const r=E(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function bj(e){const t={},n=E(e,["id"]);n!=null&&S(t,["id"],n);const r=E(e,["args"]);r!=null&&S(t,["args"],r);const i=E(e,["name"]);if(i!=null&&S(t,["name"],i),E(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Ej(e){const t={},n=E(e,["mode"]);n!=null&&S(t,["mode"],n);const r=E(e,["allowedFunctionNames"]);if(r!=null&&S(t,["allowedFunctionNames"],r),E(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function _j(e){const t={};if(E(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=E(e,["description"]);n!=null&&S(t,["description"],n);const r=E(e,["name"]);r!=null&&S(t,["name"],r);const i=E(e,["parameters"]);i!=null&&S(t,["parameters"],i);const o=E(e,["parametersJsonSchema"]);o!=null&&S(t,["parametersJsonSchema"],o);const a=E(e,["response"]);a!=null&&S(t,["response"],a);const c=E(e,["responseJsonSchema"]);return c!=null&&S(t,["responseJsonSchema"],c),t}function Sj(e,t){const n={},r=E(t,["name"]);return r!=null&&S(n,["_url","name"],ks(e,r)),n}function Cj(e,t){const n={},r=E(t,["name"]);return r!=null&&S(n,["_url","name"],ks(e,r)),n}function Aj(e){const t={};if(E(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=E(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function Tj(e){const t={};if(E(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=E(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function Ij(e,t){const n={},r=E(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=E(e,["pageToken"]);return t!==void 0&&i!=null&&S(t,["_query","pageToken"],i),n}function Pj(e,t){const n={},r=E(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=E(e,["pageToken"]);return t!==void 0&&i!=null&&S(t,["_query","pageToken"],i),n}function Nj(e){const t={},n=E(e,["config"]);return n!=null&&Ij(n,t),t}function Rj(e){const t={},n=E(e,["config"]);return n!=null&&Pj(n,t),t}function Oj(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=E(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["cachedContents"],o)}return t}function kj(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=E(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["cachedContents"],o)}return t}function Mj(e){const t={},n=E(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const r=E(e,["codeExecutionResult"]);r!=null&&S(t,["codeExecutionResult"],r);const i=E(e,["executableCode"]);i!=null&&S(t,["executableCode"],i);const o=E(e,["fileData"]);o!=null&&S(t,["fileData"],wj(o));const a=E(e,["functionCall"]);a!=null&&S(t,["functionCall"],bj(a));const c=E(e,["functionResponse"]);c!=null&&S(t,["functionResponse"],c);const f=E(e,["inlineData"]);f!=null&&S(t,["inlineData"],dj(f));const d=E(e,["text"]);d!=null&&S(t,["text"],d);const m=E(e,["thought"]);m!=null&&S(t,["thought"],m);const v=E(e,["thoughtSignature"]);v!=null&&S(t,["thoughtSignature"],v);const b=E(e,["videoMetadata"]);return b!=null&&S(t,["videoMetadata"],b),t}function Dj(e){const t={},n=E(e,["functionCallingConfig"]);n!=null&&S(t,["functionCallingConfig"],Ej(n));const r=E(e,["retrievalConfig"]);return r!=null&&S(t,["retrievalConfig"],r),t}function Lj(e){const t={},n=E(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>v)),S(t,["functionDeclarations"],m)}if(E(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=E(e,["googleSearchRetrieval"]);r!=null&&S(t,["googleSearchRetrieval"],r);const i=E(e,["computerUse"]);i!=null&&S(t,["computerUse"],i);const o=E(e,["fileSearch"]);o!=null&&S(t,["fileSearch"],o);const a=E(e,["codeExecution"]);if(a!=null&&S(t,["codeExecution"],a),E(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=E(e,["googleMaps"]);c!=null&&S(t,["googleMaps"],Aj(c));const f=E(e,["googleSearch"]);f!=null&&S(t,["googleSearch"],Tj(f));const d=E(e,["urlContext"]);return d!=null&&S(t,["urlContext"],d),t}function Bj(e){const t={},n=E(e,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(b=>_j(b))),S(t,["functionDeclarations"],v)}const r=E(e,["retrieval"]);r!=null&&S(t,["retrieval"],r);const i=E(e,["googleSearchRetrieval"]);i!=null&&S(t,["googleSearchRetrieval"],i);const o=E(e,["computerUse"]);if(o!=null&&S(t,["computerUse"],o),E(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=E(e,["codeExecution"]);a!=null&&S(t,["codeExecution"],a);const c=E(e,["enterpriseWebSearch"]);c!=null&&S(t,["enterpriseWebSearch"],c);const f=E(e,["googleMaps"]);f!=null&&S(t,["googleMaps"],f);const d=E(e,["googleSearch"]);d!=null&&S(t,["googleSearch"],d);const m=E(e,["urlContext"]);return m!=null&&S(t,["urlContext"],m),t}function Fj(e,t){const n={},r=E(e,["ttl"]);t!==void 0&&r!=null&&S(t,["ttl"],r);const i=E(e,["expireTime"]);return t!==void 0&&i!=null&&S(t,["expireTime"],i),n}function jj(e,t){const n={},r=E(e,["ttl"]);t!==void 0&&r!=null&&S(t,["ttl"],r);const i=E(e,["expireTime"]);return t!==void 0&&i!=null&&S(t,["expireTime"],i),n}function Uj(e,t){const n={},r=E(t,["name"]);r!=null&&S(n,["_url","name"],ks(e,r));const i=E(t,["config"]);return i!=null&&Fj(i,n),n}function Vj(e,t){const n={},r=E(t,["name"]);r!=null&&S(n,["_url","name"],ks(e,r));const i=E(t,["config"]);return i!=null&&jj(i,n),n}class zj extends Os{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Rl(_s.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=mj(this.apiClient,t);return c=je("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>m)}else{const d=pj(this.apiClient,t);return c=je("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async get(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=Cj(this.apiClient,t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>m)}else{const d=Sj(this.apiClient,t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=vj(this.apiClient,t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=xj(m),b=new xC;return Object.assign(b,v),b})}else{const d=gj(this.apiClient,t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=yj(m),b=new xC;return Object.assign(b,v),b})}}async update(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=Vj(this.apiClient,t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>m)}else{const d=Uj(this.apiClient,t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async listInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=Rj(t);return c=je("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=kj(m),b=new wC;return Object.assign(b,v),b})}else{const d=Nj(t);return c=je("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=Oj(m),b=new wC;return Object.assign(b,v),b})}}}function M0(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function TC(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(e){return this instanceof gt?(this.v=e,this):new gt(e)}function So(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(C){return function(P){return Promise.resolve(P).then(C,v)}}function c(C,P){r[C]&&(i[C]=function(N){return new Promise(function(R,D){o.push([C,N,R,D])>1||f(C,N)})},P&&(i[C]=P(i[C])))}function f(C,P){try{d(r[C](P))}catch(N){b(o[0][3],N)}}function d(C){C.value instanceof gt?Promise.resolve(C.value.v).then(m,v):b(o[0][2],C)}function m(C){f("next",C)}function v(C){f("throw",C)}function b(C,P){C(P),o.shift(),o.length&&f(o[0][0],o[0][1])}}function Co(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof TC=="function"?TC(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(c,f){a=e[o](a),i(c,f,a.done,a.value)})}}function i(o,a,c,f){Promise.resolve(f).then(function(d){o({value:d,done:c})},a)}}function $j(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:r3(n)}function r3(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function Gj(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function IC(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const i=[];let o=!0;for(;r<n&&e[r].role==="model";)i.push(e[r]),o&&!r3(e[r])&&(o=!1),r++;o?t.push(...i):t.pop()}return t}class Hj{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new qj(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class qj{constructor(t,n,r,i={},o=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),Gj(o)}async sendMessage(t){var n;await this.sendPromise;const r=zr(t.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,a,c;const f=await i,d=(a=(o=f.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,m=f.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let b=[];m!=null&&(b=(c=m.slice(v))!==null&&c!==void 0?c:[]);const C=d?[d]:[];this.recordHistory(r,C,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(t){var n;await this.sendPromise;const r=zr(t.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(t=!1){const n=t?IC(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return So(this,arguments,function*(){var i,o,a,c,f,d;const m=[];try{for(var v=!0,b=Co(t),C;C=yield gt(b.next()),i=C.done,!i;v=!0){c=C.value,v=!1;const P=c;if($j(P)){const N=(d=(f=P.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content;N!==void 0&&m.push(N)}yield yield gt(P)}}catch(P){o={error:P}}finally{try{!v&&!i&&(a=b.return)&&(yield gt(a.call(b)))}finally{if(o)throw o.error}}this.recordHistory(n,m)})}recordHistory(t,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...IC(r)):this.history.push(t),this.history.push(...i)}}class $p extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,$p.prototype)}}function Wj(e){const t={},n=E(e,["file"]);return n!=null&&S(t,["file"],n),t}function Kj(e){const t={},n=E(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function Yj(e){const t={},n=E(e,["name"]);return n!=null&&S(t,["_url","file"],XO(n)),t}function Xj(e){const t={},n=E(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function Jj(e){const t={},n=E(e,["name"]);return n!=null&&S(t,["_url","file"],XO(n)),t}function Zj(e,t){const n={},r=E(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=E(e,["pageToken"]);return t!==void 0&&i!=null&&S(t,["_query","pageToken"],i),n}function Qj(e){const t={},n=E(e,["config"]);return n!=null&&Zj(n,t),t}function eU(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=E(e,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["files"],o)}return t}class tU extends Os{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Rl(_s.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Qj(t);return o=je("files",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>{const d=eU(f),m=new oF;return Object.assign(m,d),m})}}async createInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Wj(t);return o=je("upload/v1beta/files",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=Kj(f),m=new sF;return Object.assign(m,d),m})}}async get(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Jj(t);return o=je("files/{file}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Yj(t);return o=je("files/{file}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>{const d=Xj(f),m=new aF;return Object.assign(m,d),m})}}}function m0(e){const t={},n=E(e,["data"]);if(n!=null&&S(t,["data"],n),E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=E(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function nU(e){const t={},n=E(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>yU(o))),S(t,["parts"],i)}const r=E(e,["role"]);return r!=null&&S(t,["role"],r),t}function rU(e){const t={};if(E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const r=E(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function iU(e){const t={},n=E(e,["id"]);n!=null&&S(t,["id"],n);const r=E(e,["args"]);r!=null&&S(t,["args"],r);const i=E(e,["name"]);if(i!=null&&S(t,["name"],i),E(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function oU(e){const t={};if(E(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=E(e,["description"]);n!=null&&S(t,["description"],n);const r=E(e,["name"]);r!=null&&S(t,["name"],r);const i=E(e,["parameters"]);i!=null&&S(t,["parameters"],i);const o=E(e,["parametersJsonSchema"]);o!=null&&S(t,["parametersJsonSchema"],o);const a=E(e,["response"]);a!=null&&S(t,["response"],a);const c=E(e,["responseJsonSchema"]);return c!=null&&S(t,["responseJsonSchema"],c),t}function sU(e){const t={},n=E(e,["modelSelectionConfig"]);n!=null&&S(t,["modelConfig"],n);const r=E(e,["responseJsonSchema"]);r!=null&&S(t,["responseJsonSchema"],r);const i=E(e,["audioTimestamp"]);i!=null&&S(t,["audioTimestamp"],i);const o=E(e,["candidateCount"]);o!=null&&S(t,["candidateCount"],o);const a=E(e,["enableAffectiveDialog"]);a!=null&&S(t,["enableAffectiveDialog"],a);const c=E(e,["frequencyPenalty"]);c!=null&&S(t,["frequencyPenalty"],c);const f=E(e,["logprobs"]);f!=null&&S(t,["logprobs"],f);const d=E(e,["maxOutputTokens"]);d!=null&&S(t,["maxOutputTokens"],d);const m=E(e,["mediaResolution"]);m!=null&&S(t,["mediaResolution"],m);const v=E(e,["presencePenalty"]);v!=null&&S(t,["presencePenalty"],v);const b=E(e,["responseLogprobs"]);b!=null&&S(t,["responseLogprobs"],b);const C=E(e,["responseMimeType"]);C!=null&&S(t,["responseMimeType"],C);const P=E(e,["responseModalities"]);P!=null&&S(t,["responseModalities"],P);const N=E(e,["responseSchema"]);N!=null&&S(t,["responseSchema"],N);const R=E(e,["routingConfig"]);R!=null&&S(t,["routingConfig"],R);const D=E(e,["seed"]);D!=null&&S(t,["seed"],D);const F=E(e,["speechConfig"]);F!=null&&S(t,["speechConfig"],i3(F));const L=E(e,["stopSequences"]);L!=null&&S(t,["stopSequences"],L);const U=E(e,["temperature"]);U!=null&&S(t,["temperature"],U);const G=E(e,["thinkingConfig"]);G!=null&&S(t,["thinkingConfig"],G);const q=E(e,["topK"]);q!=null&&S(t,["topK"],q);const W=E(e,["topP"]);if(W!=null&&S(t,["topP"],W),E(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function aU(e){const t={};if(E(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=E(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function lU(e){const t={};if(E(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=E(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function uU(e,t){const n={},r=E(e,["generationConfig"]);t!==void 0&&r!=null&&S(t,["setup","generationConfig"],r);const i=E(e,["responseModalities"]);t!==void 0&&i!=null&&S(t,["setup","generationConfig","responseModalities"],i);const o=E(e,["temperature"]);t!==void 0&&o!=null&&S(t,["setup","generationConfig","temperature"],o);const a=E(e,["topP"]);t!==void 0&&a!=null&&S(t,["setup","generationConfig","topP"],a);const c=E(e,["topK"]);t!==void 0&&c!=null&&S(t,["setup","generationConfig","topK"],c);const f=E(e,["maxOutputTokens"]);t!==void 0&&f!=null&&S(t,["setup","generationConfig","maxOutputTokens"],f);const d=E(e,["mediaResolution"]);t!==void 0&&d!=null&&S(t,["setup","generationConfig","mediaResolution"],d);const m=E(e,["seed"]);t!==void 0&&m!=null&&S(t,["setup","generationConfig","seed"],m);const v=E(e,["speechConfig"]);t!==void 0&&v!=null&&S(t,["setup","generationConfig","speechConfig"],Nw(v));const b=E(e,["thinkingConfig"]);t!==void 0&&b!=null&&S(t,["setup","generationConfig","thinkingConfig"],b);const C=E(e,["enableAffectiveDialog"]);t!==void 0&&C!=null&&S(t,["setup","generationConfig","enableAffectiveDialog"],C);const P=E(e,["systemInstruction"]);t!==void 0&&P!=null&&S(t,["setup","systemInstruction"],nU(zr(P)));const N=E(e,["tools"]);if(t!==void 0&&N!=null){let q=ec(N);Array.isArray(q)&&(q=q.map(W=>wU(Qu(W)))),S(t,["setup","tools"],q)}const R=E(e,["sessionResumption"]);t!==void 0&&R!=null&&S(t,["setup","sessionResumption"],xU(R));const D=E(e,["inputAudioTranscription"]);t!==void 0&&D!=null&&S(t,["setup","inputAudioTranscription"],D);const F=E(e,["outputAudioTranscription"]);t!==void 0&&F!=null&&S(t,["setup","outputAudioTranscription"],F);const L=E(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&S(t,["setup","realtimeInputConfig"],L);const U=E(e,["contextWindowCompression"]);t!==void 0&&U!=null&&S(t,["setup","contextWindowCompression"],U);const G=E(e,["proactivity"]);if(t!==void 0&&G!=null&&S(t,["setup","proactivity"],G),E(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function cU(e,t){const n={},r=E(e,["generationConfig"]);t!==void 0&&r!=null&&S(t,["setup","generationConfig"],sU(r));const i=E(e,["responseModalities"]);t!==void 0&&i!=null&&S(t,["setup","generationConfig","responseModalities"],i);const o=E(e,["temperature"]);t!==void 0&&o!=null&&S(t,["setup","generationConfig","temperature"],o);const a=E(e,["topP"]);t!==void 0&&a!=null&&S(t,["setup","generationConfig","topP"],a);const c=E(e,["topK"]);t!==void 0&&c!=null&&S(t,["setup","generationConfig","topK"],c);const f=E(e,["maxOutputTokens"]);t!==void 0&&f!=null&&S(t,["setup","generationConfig","maxOutputTokens"],f);const d=E(e,["mediaResolution"]);t!==void 0&&d!=null&&S(t,["setup","generationConfig","mediaResolution"],d);const m=E(e,["seed"]);t!==void 0&&m!=null&&S(t,["setup","generationConfig","seed"],m);const v=E(e,["speechConfig"]);t!==void 0&&v!=null&&S(t,["setup","generationConfig","speechConfig"],i3(Nw(v)));const b=E(e,["thinkingConfig"]);t!==void 0&&b!=null&&S(t,["setup","generationConfig","thinkingConfig"],b);const C=E(e,["enableAffectiveDialog"]);t!==void 0&&C!=null&&S(t,["setup","generationConfig","enableAffectiveDialog"],C);const P=E(e,["systemInstruction"]);t!==void 0&&P!=null&&S(t,["setup","systemInstruction"],zr(P));const N=E(e,["tools"]);if(t!==void 0&&N!=null){let W=ec(N);Array.isArray(W)&&(W=W.map(Z=>bU(Qu(Z)))),S(t,["setup","tools"],W)}const R=E(e,["sessionResumption"]);t!==void 0&&R!=null&&S(t,["setup","sessionResumption"],R);const D=E(e,["inputAudioTranscription"]);t!==void 0&&D!=null&&S(t,["setup","inputAudioTranscription"],D);const F=E(e,["outputAudioTranscription"]);t!==void 0&&F!=null&&S(t,["setup","outputAudioTranscription"],F);const L=E(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&S(t,["setup","realtimeInputConfig"],L);const U=E(e,["contextWindowCompression"]);t!==void 0&&U!=null&&S(t,["setup","contextWindowCompression"],U);const G=E(e,["proactivity"]);t!==void 0&&G!=null&&S(t,["setup","proactivity"],G);const q=E(e,["explicitVadSignal"]);return t!==void 0&&q!=null&&S(t,["setup","explicitVadSignal"],q),n}function dU(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["setup","model"],kt(e,r));const i=E(t,["config"]);return i!=null&&S(n,["config"],uU(i,n)),n}function fU(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["setup","model"],kt(e,r));const i=E(t,["config"]);return i!=null&&S(n,["config"],cU(i,n)),n}function hU(e){const t={},n=E(e,["musicGenerationConfig"]);return n!=null&&S(t,["musicGenerationConfig"],n),t}function pU(e){const t={},n=E(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),S(t,["weightedPrompts"],r)}return t}function mU(e){const t={},n=E(e,["media"]);if(n!=null){let d=HO(n);Array.isArray(d)&&(d=d.map(m=>m0(m))),S(t,["mediaChunks"],d)}const r=E(e,["audio"]);r!=null&&S(t,["audio"],m0(WO(r)));const i=E(e,["audioStreamEnd"]);i!=null&&S(t,["audioStreamEnd"],i);const o=E(e,["video"]);o!=null&&S(t,["video"],m0(qO(o)));const a=E(e,["text"]);a!=null&&S(t,["text"],a);const c=E(e,["activityStart"]);c!=null&&S(t,["activityStart"],c);const f=E(e,["activityEnd"]);return f!=null&&S(t,["activityEnd"],f),t}function gU(e){const t={},n=E(e,["media"]);if(n!=null){let d=HO(n);Array.isArray(d)&&(d=d.map(m=>m)),S(t,["mediaChunks"],d)}const r=E(e,["audio"]);r!=null&&S(t,["audio"],WO(r));const i=E(e,["audioStreamEnd"]);i!=null&&S(t,["audioStreamEnd"],i);const o=E(e,["video"]);o!=null&&S(t,["video"],qO(o));const a=E(e,["text"]);a!=null&&S(t,["text"],a);const c=E(e,["activityStart"]);c!=null&&S(t,["activityStart"],c);const f=E(e,["activityEnd"]);return f!=null&&S(t,["activityEnd"],f),t}function vU(e){const t={},n=E(e,["setupComplete"]);n!=null&&S(t,["setupComplete"],n);const r=E(e,["serverContent"]);r!=null&&S(t,["serverContent"],r);const i=E(e,["toolCall"]);i!=null&&S(t,["toolCall"],i);const o=E(e,["toolCallCancellation"]);o!=null&&S(t,["toolCallCancellation"],o);const a=E(e,["usageMetadata"]);a!=null&&S(t,["usageMetadata"],EU(a));const c=E(e,["goAway"]);c!=null&&S(t,["goAway"],c);const f=E(e,["sessionResumptionUpdate"]);f!=null&&S(t,["sessionResumptionUpdate"],f);const d=E(e,["voiceActivityDetectionSignal"]);return d!=null&&S(t,["voiceActivityDetectionSignal"],d),t}function yU(e){const t={},n=E(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const r=E(e,["codeExecutionResult"]);r!=null&&S(t,["codeExecutionResult"],r);const i=E(e,["executableCode"]);i!=null&&S(t,["executableCode"],i);const o=E(e,["fileData"]);o!=null&&S(t,["fileData"],rU(o));const a=E(e,["functionCall"]);a!=null&&S(t,["functionCall"],iU(a));const c=E(e,["functionResponse"]);c!=null&&S(t,["functionResponse"],c);const f=E(e,["inlineData"]);f!=null&&S(t,["inlineData"],m0(f));const d=E(e,["text"]);d!=null&&S(t,["text"],d);const m=E(e,["thought"]);m!=null&&S(t,["thought"],m);const v=E(e,["thoughtSignature"]);v!=null&&S(t,["thoughtSignature"],v);const b=E(e,["videoMetadata"]);return b!=null&&S(t,["videoMetadata"],b),t}function xU(e){const t={},n=E(e,["handle"]);if(n!=null&&S(t,["handle"],n),E(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function i3(e){const t={},n=E(e,["voiceConfig"]);n!=null&&S(t,["voiceConfig"],n);const r=E(e,["languageCode"]);if(r!=null&&S(t,["languageCode"],r),E(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function wU(e){const t={},n=E(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>v)),S(t,["functionDeclarations"],m)}if(E(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=E(e,["googleSearchRetrieval"]);r!=null&&S(t,["googleSearchRetrieval"],r);const i=E(e,["computerUse"]);i!=null&&S(t,["computerUse"],i);const o=E(e,["fileSearch"]);o!=null&&S(t,["fileSearch"],o);const a=E(e,["codeExecution"]);if(a!=null&&S(t,["codeExecution"],a),E(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=E(e,["googleMaps"]);c!=null&&S(t,["googleMaps"],aU(c));const f=E(e,["googleSearch"]);f!=null&&S(t,["googleSearch"],lU(f));const d=E(e,["urlContext"]);return d!=null&&S(t,["urlContext"],d),t}function bU(e){const t={},n=E(e,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(b=>oU(b))),S(t,["functionDeclarations"],v)}const r=E(e,["retrieval"]);r!=null&&S(t,["retrieval"],r);const i=E(e,["googleSearchRetrieval"]);i!=null&&S(t,["googleSearchRetrieval"],i);const o=E(e,["computerUse"]);if(o!=null&&S(t,["computerUse"],o),E(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=E(e,["codeExecution"]);a!=null&&S(t,["codeExecution"],a);const c=E(e,["enterpriseWebSearch"]);c!=null&&S(t,["enterpriseWebSearch"],c);const f=E(e,["googleMaps"]);f!=null&&S(t,["googleMaps"],f);const d=E(e,["googleSearch"]);d!=null&&S(t,["googleSearch"],d);const m=E(e,["urlContext"]);return m!=null&&S(t,["urlContext"],m),t}function EU(e){const t={},n=E(e,["promptTokenCount"]);n!=null&&S(t,["promptTokenCount"],n);const r=E(e,["cachedContentTokenCount"]);r!=null&&S(t,["cachedContentTokenCount"],r);const i=E(e,["candidatesTokenCount"]);i!=null&&S(t,["responseTokenCount"],i);const o=E(e,["toolUsePromptTokenCount"]);o!=null&&S(t,["toolUsePromptTokenCount"],o);const a=E(e,["thoughtsTokenCount"]);a!=null&&S(t,["thoughtsTokenCount"],a);const c=E(e,["totalTokenCount"]);c!=null&&S(t,["totalTokenCount"],c);const f=E(e,["promptTokensDetails"]);if(f!=null){let C=f;Array.isArray(C)&&(C=C.map(P=>P)),S(t,["promptTokensDetails"],C)}const d=E(e,["cacheTokensDetails"]);if(d!=null){let C=d;Array.isArray(C)&&(C=C.map(P=>P)),S(t,["cacheTokensDetails"],C)}const m=E(e,["candidatesTokensDetails"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(P=>P)),S(t,["responseTokensDetails"],C)}const v=E(e,["toolUsePromptTokensDetails"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(P=>P)),S(t,["toolUsePromptTokensDetails"],C)}const b=E(e,["trafficType"]);return b!=null&&S(t,["trafficType"],b),t}function _U(e){const t={},n=E(e,["data"]);if(n!=null&&S(t,["data"],n),E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=E(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function SU(e){const t={},n=E(e,["content"]);n!=null&&S(t,["content"],n);const r=E(e,["citationMetadata"]);r!=null&&S(t,["citationMetadata"],CU(r));const i=E(e,["tokenCount"]);i!=null&&S(t,["tokenCount"],i);const o=E(e,["finishReason"]);o!=null&&S(t,["finishReason"],o);const a=E(e,["avgLogprobs"]);a!=null&&S(t,["avgLogprobs"],a);const c=E(e,["groundingMetadata"]);c!=null&&S(t,["groundingMetadata"],c);const f=E(e,["index"]);f!=null&&S(t,["index"],f);const d=E(e,["logprobsResult"]);d!=null&&S(t,["logprobsResult"],d);const m=E(e,["safetyRatings"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(C=>C)),S(t,["safetyRatings"],b)}const v=E(e,["urlContextMetadata"]);return v!=null&&S(t,["urlContextMetadata"],v),t}function CU(e){const t={},n=E(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),S(t,["citations"],r)}return t}function AU(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["contents"]);if(i!=null){let o=eo(i);Array.isArray(o)&&(o=o.map(a=>a)),S(n,["contents"],o)}return n}function TU(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),S(t,["tokensInfo"],i)}return t}function IU(e){const t={},n=E(e,["values"]);n!=null&&S(t,["values"],n);const r=E(e,["statistics"]);return r!=null&&S(t,["statistics"],PU(r)),t}function PU(e){const t={},n=E(e,["truncated"]);n!=null&&S(t,["truncated"],n);const r=E(e,["token_count"]);return r!=null&&S(t,["tokenCount"],r),t}function Gp(e){const t={},n=E(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>FV(o))),S(t,["parts"],i)}const r=E(e,["role"]);return r!=null&&S(t,["role"],r),t}function NU(e){const t={},n=E(e,["controlType"]);n!=null&&S(t,["controlType"],n);const r=E(e,["enableControlImageComputation"]);return r!=null&&S(t,["computeControl"],r),t}function RU(e){const t={};if(E(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(E(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(E(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function OU(e,t){const n={},r=E(e,["systemInstruction"]);t!==void 0&&r!=null&&S(t,["systemInstruction"],zr(r));const i=E(e,["tools"]);if(t!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>u3(c))),S(t,["tools"],a)}const o=E(e,["generationConfig"]);return t!==void 0&&o!=null&&S(t,["generationConfig"],_V(o)),n}function kU(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["contents"]);if(i!=null){let a=eo(i);Array.isArray(a)&&(a=a.map(c=>Gp(c))),S(n,["contents"],a)}const o=E(t,["config"]);return o!=null&&RU(o),n}function MU(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["contents"]);if(i!=null){let a=eo(i);Array.isArray(a)&&(a=a.map(c=>c)),S(n,["contents"],a)}const o=E(t,["config"]);return o!=null&&OU(o,n),n}function DU(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["totalTokens"]);r!=null&&S(t,["totalTokens"],r);const i=E(e,["cachedContentTokenCount"]);return i!=null&&S(t,["cachedContentTokenCount"],i),t}function LU(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["totalTokens"]);return r!=null&&S(t,["totalTokens"],r),t}function BU(e,t){const n={},r=E(t,["model"]);return r!=null&&S(n,["_url","name"],kt(e,r)),n}function FU(e,t){const n={},r=E(t,["model"]);return r!=null&&S(n,["_url","name"],kt(e,r)),n}function jU(e){const t={},n=E(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function UU(e){const t={},n=E(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function VU(e,t){const n={},r=E(e,["outputGcsUri"]);t!==void 0&&r!=null&&S(t,["parameters","storageUri"],r);const i=E(e,["negativePrompt"]);t!==void 0&&i!=null&&S(t,["parameters","negativePrompt"],i);const o=E(e,["numberOfImages"]);t!==void 0&&o!=null&&S(t,["parameters","sampleCount"],o);const a=E(e,["aspectRatio"]);t!==void 0&&a!=null&&S(t,["parameters","aspectRatio"],a);const c=E(e,["guidanceScale"]);t!==void 0&&c!=null&&S(t,["parameters","guidanceScale"],c);const f=E(e,["seed"]);t!==void 0&&f!=null&&S(t,["parameters","seed"],f);const d=E(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&S(t,["parameters","safetySetting"],d);const m=E(e,["personGeneration"]);t!==void 0&&m!=null&&S(t,["parameters","personGeneration"],m);const v=E(e,["includeSafetyAttributes"]);t!==void 0&&v!=null&&S(t,["parameters","includeSafetyAttributes"],v);const b=E(e,["includeRaiReason"]);t!==void 0&&b!=null&&S(t,["parameters","includeRaiReason"],b);const C=E(e,["language"]);t!==void 0&&C!=null&&S(t,["parameters","language"],C);const P=E(e,["outputMimeType"]);t!==void 0&&P!=null&&S(t,["parameters","outputOptions","mimeType"],P);const N=E(e,["outputCompressionQuality"]);t!==void 0&&N!=null&&S(t,["parameters","outputOptions","compressionQuality"],N);const R=E(e,["addWatermark"]);t!==void 0&&R!=null&&S(t,["parameters","addWatermark"],R);const D=E(e,["labels"]);t!==void 0&&D!=null&&S(t,["labels"],D);const F=E(e,["editMode"]);t!==void 0&&F!=null&&S(t,["parameters","editMode"],F);const L=E(e,["baseSteps"]);return t!==void 0&&L!=null&&S(t,["parameters","editConfig","baseSteps"],L),n}function zU(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const o=E(t,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>GV(f))),S(n,["instances[0]","referenceImages"],c)}const a=E(t,["config"]);return a!=null&&VU(a,n),n}function $U(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Hp(o))),S(t,["generatedImages"],i)}return t}function GU(e,t){const n={},r=E(e,["taskType"]);t!==void 0&&r!=null&&S(t,["requests[]","taskType"],r);const i=E(e,["title"]);t!==void 0&&i!=null&&S(t,["requests[]","title"],i);const o=E(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&S(t,["requests[]","outputDimensionality"],o),E(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(E(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function HU(e,t){const n={},r=E(e,["taskType"]);t!==void 0&&r!=null&&S(t,["instances[]","task_type"],r);const i=E(e,["title"]);t!==void 0&&i!=null&&S(t,["instances[]","title"],i);const o=E(e,["outputDimensionality"]);t!==void 0&&o!=null&&S(t,["parameters","outputDimensionality"],o);const a=E(e,["mimeType"]);t!==void 0&&a!=null&&S(t,["instances[]","mimeType"],a);const c=E(e,["autoTruncate"]);return t!==void 0&&c!=null&&S(t,["parameters","autoTruncate"],c),n}function qU(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["contents"]);if(i!=null){let c=Tw(e,i);Array.isArray(c)&&(c=c.map(f=>f)),S(n,["requests[]","content"],c)}const o=E(t,["config"]);o!=null&&GU(o,n);const a=E(t,["model"]);return a!==void 0&&S(n,["requests[]","model"],kt(e,a)),n}function WU(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["contents"]);if(i!=null){let a=Tw(e,i);Array.isArray(a)&&(a=a.map(c=>c)),S(n,["instances[]","content"],a)}const o=E(t,["config"]);return o!=null&&HU(o,n),n}function KU(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["embeddings"],o)}const i=E(e,["metadata"]);return i!=null&&S(t,["metadata"],i),t}function YU(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>IU(a))),S(t,["embeddings"],o)}const i=E(e,["metadata"]);return i!=null&&S(t,["metadata"],i),t}function XU(e){const t={},n=E(e,["endpoint"]);n!=null&&S(t,["name"],n);const r=E(e,["deployedModelId"]);return r!=null&&S(t,["deployedModelId"],r),t}function JU(e){const t={};if(E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const r=E(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function ZU(e){const t={},n=E(e,["id"]);n!=null&&S(t,["id"],n);const r=E(e,["args"]);r!=null&&S(t,["args"],r);const i=E(e,["name"]);if(i!=null&&S(t,["name"],i),E(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function QU(e){const t={},n=E(e,["mode"]);n!=null&&S(t,["mode"],n);const r=E(e,["allowedFunctionNames"]);if(r!=null&&S(t,["allowedFunctionNames"],r),E(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function eV(e){const t={};if(E(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=E(e,["description"]);n!=null&&S(t,["description"],n);const r=E(e,["name"]);r!=null&&S(t,["name"],r);const i=E(e,["parameters"]);i!=null&&S(t,["parameters"],i);const o=E(e,["parametersJsonSchema"]);o!=null&&S(t,["parametersJsonSchema"],o);const a=E(e,["response"]);a!=null&&S(t,["response"],a);const c=E(e,["responseJsonSchema"]);return c!=null&&S(t,["responseJsonSchema"],c),t}function tV(e,t,n){const r={},i=E(t,["systemInstruction"]);n!==void 0&&i!=null&&S(n,["systemInstruction"],Gp(zr(i)));const o=E(t,["temperature"]);o!=null&&S(r,["temperature"],o);const a=E(t,["topP"]);a!=null&&S(r,["topP"],a);const c=E(t,["topK"]);c!=null&&S(r,["topK"],c);const f=E(t,["candidateCount"]);f!=null&&S(r,["candidateCount"],f);const d=E(t,["maxOutputTokens"]);d!=null&&S(r,["maxOutputTokens"],d);const m=E(t,["stopSequences"]);m!=null&&S(r,["stopSequences"],m);const v=E(t,["responseLogprobs"]);v!=null&&S(r,["responseLogprobs"],v);const b=E(t,["logprobs"]);b!=null&&S(r,["logprobs"],b);const C=E(t,["presencePenalty"]);C!=null&&S(r,["presencePenalty"],C);const P=E(t,["frequencyPenalty"]);P!=null&&S(r,["frequencyPenalty"],P);const N=E(t,["seed"]);N!=null&&S(r,["seed"],N);const R=E(t,["responseMimeType"]);R!=null&&S(r,["responseMimeType"],R);const D=E(t,["responseSchema"]);D!=null&&S(r,["responseSchema"],Iw(D));const F=E(t,["responseJsonSchema"]);if(F!=null&&S(r,["responseJsonSchema"],F),E(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(E(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=E(t,["safetySettings"]);if(n!==void 0&&L!=null){let be=L;Array.isArray(be)&&(be=be.map(me=>HV(me))),S(n,["safetySettings"],be)}const U=E(t,["tools"]);if(n!==void 0&&U!=null){let be=ec(U);Array.isArray(be)&&(be=be.map(me=>ZV(Qu(me)))),S(n,["tools"],be)}const G=E(t,["toolConfig"]);if(n!==void 0&&G!=null&&S(n,["toolConfig"],JV(G)),E(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=E(t,["cachedContent"]);n!==void 0&&q!=null&&S(n,["cachedContent"],ks(e,q));const W=E(t,["responseModalities"]);W!=null&&S(r,["responseModalities"],W);const Z=E(t,["mediaResolution"]);Z!=null&&S(r,["mediaResolution"],Z);const X=E(t,["speechConfig"]);if(X!=null&&S(r,["speechConfig"],Pw(X)),E(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const pe=E(t,["thinkingConfig"]);pe!=null&&S(r,["thinkingConfig"],pe);const ae=E(t,["imageConfig"]);ae!=null&&S(r,["imageConfig"],IV(ae));const le=E(t,["enableEnhancedCivicAnswers"]);return le!=null&&S(r,["enableEnhancedCivicAnswers"],le),r}function nV(e,t,n){const r={},i=E(t,["systemInstruction"]);n!==void 0&&i!=null&&S(n,["systemInstruction"],zr(i));const o=E(t,["temperature"]);o!=null&&S(r,["temperature"],o);const a=E(t,["topP"]);a!=null&&S(r,["topP"],a);const c=E(t,["topK"]);c!=null&&S(r,["topK"],c);const f=E(t,["candidateCount"]);f!=null&&S(r,["candidateCount"],f);const d=E(t,["maxOutputTokens"]);d!=null&&S(r,["maxOutputTokens"],d);const m=E(t,["stopSequences"]);m!=null&&S(r,["stopSequences"],m);const v=E(t,["responseLogprobs"]);v!=null&&S(r,["responseLogprobs"],v);const b=E(t,["logprobs"]);b!=null&&S(r,["logprobs"],b);const C=E(t,["presencePenalty"]);C!=null&&S(r,["presencePenalty"],C);const P=E(t,["frequencyPenalty"]);P!=null&&S(r,["frequencyPenalty"],P);const N=E(t,["seed"]);N!=null&&S(r,["seed"],N);const R=E(t,["responseMimeType"]);R!=null&&S(r,["responseMimeType"],R);const D=E(t,["responseSchema"]);D!=null&&S(r,["responseSchema"],Iw(D));const F=E(t,["responseJsonSchema"]);F!=null&&S(r,["responseJsonSchema"],F);const L=E(t,["routingConfig"]);L!=null&&S(r,["routingConfig"],L);const U=E(t,["modelSelectionConfig"]);U!=null&&S(r,["modelConfig"],U);const G=E(t,["safetySettings"]);if(n!==void 0&&G!=null){let Oe=G;Array.isArray(Oe)&&(Oe=Oe.map(se=>se)),S(n,["safetySettings"],Oe)}const q=E(t,["tools"]);if(n!==void 0&&q!=null){let Oe=ec(q);Array.isArray(Oe)&&(Oe=Oe.map(se=>u3(Qu(se)))),S(n,["tools"],Oe)}const W=E(t,["toolConfig"]);n!==void 0&&W!=null&&S(n,["toolConfig"],W);const Z=E(t,["labels"]);n!==void 0&&Z!=null&&S(n,["labels"],Z);const X=E(t,["cachedContent"]);n!==void 0&&X!=null&&S(n,["cachedContent"],ks(e,X));const pe=E(t,["responseModalities"]);pe!=null&&S(r,["responseModalities"],pe);const ae=E(t,["mediaResolution"]);ae!=null&&S(r,["mediaResolution"],ae);const le=E(t,["speechConfig"]);le!=null&&S(r,["speechConfig"],l3(Pw(le)));const be=E(t,["audioTimestamp"]);be!=null&&S(r,["audioTimestamp"],be);const me=E(t,["thinkingConfig"]);me!=null&&S(r,["thinkingConfig"],me);const te=E(t,["imageConfig"]);if(te!=null&&S(r,["imageConfig"],PV(te)),E(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function PC(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["contents"]);if(i!=null){let a=eo(i);Array.isArray(a)&&(a=a.map(c=>Gp(c))),S(n,["contents"],a)}const o=E(t,["config"]);return o!=null&&S(n,["generationConfig"],tV(e,o,n)),n}function NC(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["contents"]);if(i!=null){let a=eo(i);Array.isArray(a)&&(a=a.map(c=>c)),S(n,["contents"],a)}const o=E(t,["config"]);return o!=null&&S(n,["generationConfig"],nV(e,o,n)),n}function RC(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>SU(d))),S(t,["candidates"],f)}const i=E(e,["modelVersion"]);i!=null&&S(t,["modelVersion"],i);const o=E(e,["promptFeedback"]);o!=null&&S(t,["promptFeedback"],o);const a=E(e,["responseId"]);a!=null&&S(t,["responseId"],a);const c=E(e,["usageMetadata"]);return c!=null&&S(t,["usageMetadata"],c),t}function OC(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(m=>m)),S(t,["candidates"],d)}const i=E(e,["createTime"]);i!=null&&S(t,["createTime"],i);const o=E(e,["modelVersion"]);o!=null&&S(t,["modelVersion"],o);const a=E(e,["promptFeedback"]);a!=null&&S(t,["promptFeedback"],a);const c=E(e,["responseId"]);c!=null&&S(t,["responseId"],c);const f=E(e,["usageMetadata"]);return f!=null&&S(t,["usageMetadata"],f),t}function rV(e,t){const n={};if(E(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(E(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=E(e,["numberOfImages"]);t!==void 0&&r!=null&&S(t,["parameters","sampleCount"],r);const i=E(e,["aspectRatio"]);t!==void 0&&i!=null&&S(t,["parameters","aspectRatio"],i);const o=E(e,["guidanceScale"]);if(t!==void 0&&o!=null&&S(t,["parameters","guidanceScale"],o),E(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=E(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&S(t,["parameters","safetySetting"],a);const c=E(e,["personGeneration"]);t!==void 0&&c!=null&&S(t,["parameters","personGeneration"],c);const f=E(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&S(t,["parameters","includeSafetyAttributes"],f);const d=E(e,["includeRaiReason"]);t!==void 0&&d!=null&&S(t,["parameters","includeRaiReason"],d);const m=E(e,["language"]);t!==void 0&&m!=null&&S(t,["parameters","language"],m);const v=E(e,["outputMimeType"]);t!==void 0&&v!=null&&S(t,["parameters","outputOptions","mimeType"],v);const b=E(e,["outputCompressionQuality"]);if(t!==void 0&&b!=null&&S(t,["parameters","outputOptions","compressionQuality"],b),E(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(E(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=E(e,["imageSize"]);if(t!==void 0&&C!=null&&S(t,["parameters","sampleImageSize"],C),E(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function iV(e,t){const n={},r=E(e,["outputGcsUri"]);t!==void 0&&r!=null&&S(t,["parameters","storageUri"],r);const i=E(e,["negativePrompt"]);t!==void 0&&i!=null&&S(t,["parameters","negativePrompt"],i);const o=E(e,["numberOfImages"]);t!==void 0&&o!=null&&S(t,["parameters","sampleCount"],o);const a=E(e,["aspectRatio"]);t!==void 0&&a!=null&&S(t,["parameters","aspectRatio"],a);const c=E(e,["guidanceScale"]);t!==void 0&&c!=null&&S(t,["parameters","guidanceScale"],c);const f=E(e,["seed"]);t!==void 0&&f!=null&&S(t,["parameters","seed"],f);const d=E(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&S(t,["parameters","safetySetting"],d);const m=E(e,["personGeneration"]);t!==void 0&&m!=null&&S(t,["parameters","personGeneration"],m);const v=E(e,["includeSafetyAttributes"]);t!==void 0&&v!=null&&S(t,["parameters","includeSafetyAttributes"],v);const b=E(e,["includeRaiReason"]);t!==void 0&&b!=null&&S(t,["parameters","includeRaiReason"],b);const C=E(e,["language"]);t!==void 0&&C!=null&&S(t,["parameters","language"],C);const P=E(e,["outputMimeType"]);t!==void 0&&P!=null&&S(t,["parameters","outputOptions","mimeType"],P);const N=E(e,["outputCompressionQuality"]);t!==void 0&&N!=null&&S(t,["parameters","outputOptions","compressionQuality"],N);const R=E(e,["addWatermark"]);t!==void 0&&R!=null&&S(t,["parameters","addWatermark"],R);const D=E(e,["labels"]);t!==void 0&&D!=null&&S(t,["labels"],D);const F=E(e,["imageSize"]);t!==void 0&&F!=null&&S(t,["parameters","sampleImageSize"],F);const L=E(e,["enhancePrompt"]);return t!==void 0&&L!=null&&S(t,["parameters","enhancePrompt"],L),n}function oV(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const o=E(t,["config"]);return o!=null&&rV(o,n),n}function sV(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const o=E(t,["config"]);return o!=null&&iV(o,n),n}function aV(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>xV(a))),S(t,["generatedImages"],o)}const i=E(e,["positivePromptSafetyAttributes"]);return i!=null&&S(t,["positivePromptSafetyAttributes"],s3(i)),t}function lV(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Hp(a))),S(t,["generatedImages"],o)}const i=E(e,["positivePromptSafetyAttributes"]);return i!=null&&S(t,["positivePromptSafetyAttributes"],a3(i)),t}function uV(e,t){const n={},r=E(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&S(t,["parameters","sampleCount"],r),E(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(E(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=E(e,["durationSeconds"]);if(t!==void 0&&i!=null&&S(t,["parameters","durationSeconds"],i),E(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=E(e,["aspectRatio"]);t!==void 0&&o!=null&&S(t,["parameters","aspectRatio"],o);const a=E(e,["resolution"]);t!==void 0&&a!=null&&S(t,["parameters","resolution"],a);const c=E(e,["personGeneration"]);if(t!==void 0&&c!=null&&S(t,["parameters","personGeneration"],c),E(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=E(e,["negativePrompt"]);t!==void 0&&f!=null&&S(t,["parameters","negativePrompt"],f);const d=E(e,["enhancePrompt"]);if(t!==void 0&&d!=null&&S(t,["parameters","enhancePrompt"],d),E(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=E(e,["lastFrame"]);t!==void 0&&m!=null&&S(t,["instances[0]","lastFrame"],qp(m));const v=E(e,["referenceImages"]);if(t!==void 0&&v!=null){let b=v;Array.isArray(b)&&(b=b.map(C=>dz(C))),S(t,["instances[0]","referenceImages"],b)}if(E(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(E(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function cV(e,t){const n={},r=E(e,["numberOfVideos"]);t!==void 0&&r!=null&&S(t,["parameters","sampleCount"],r);const i=E(e,["outputGcsUri"]);t!==void 0&&i!=null&&S(t,["parameters","storageUri"],i);const o=E(e,["fps"]);t!==void 0&&o!=null&&S(t,["parameters","fps"],o);const a=E(e,["durationSeconds"]);t!==void 0&&a!=null&&S(t,["parameters","durationSeconds"],a);const c=E(e,["seed"]);t!==void 0&&c!=null&&S(t,["parameters","seed"],c);const f=E(e,["aspectRatio"]);t!==void 0&&f!=null&&S(t,["parameters","aspectRatio"],f);const d=E(e,["resolution"]);t!==void 0&&d!=null&&S(t,["parameters","resolution"],d);const m=E(e,["personGeneration"]);t!==void 0&&m!=null&&S(t,["parameters","personGeneration"],m);const v=E(e,["pubsubTopic"]);t!==void 0&&v!=null&&S(t,["parameters","pubsubTopic"],v);const b=E(e,["negativePrompt"]);t!==void 0&&b!=null&&S(t,["parameters","negativePrompt"],b);const C=E(e,["enhancePrompt"]);t!==void 0&&C!=null&&S(t,["parameters","enhancePrompt"],C);const P=E(e,["generateAudio"]);t!==void 0&&P!=null&&S(t,["parameters","generateAudio"],P);const N=E(e,["lastFrame"]);t!==void 0&&N!=null&&S(t,["instances[0]","lastFrame"],Po(N));const R=E(e,["referenceImages"]);if(t!==void 0&&R!=null){let L=R;Array.isArray(L)&&(L=L.map(U=>fz(U))),S(t,["instances[0]","referenceImages"],L)}const D=E(e,["mask"]);t!==void 0&&D!=null&&S(t,["instances[0]","mask"],cz(D));const F=E(e,["compressionQuality"]);return t!==void 0&&F!=null&&S(t,["parameters","compressionQuality"],F),n}function dV(e){const t={},n=E(e,["name"]);n!=null&&S(t,["name"],n);const r=E(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=E(e,["done"]);i!=null&&S(t,["done"],i);const o=E(e,["error"]);o!=null&&S(t,["error"],o);const a=E(e,["response","generateVideoResponse"]);return a!=null&&S(t,["response"],mV(a)),t}function fV(e){const t={},n=E(e,["name"]);n!=null&&S(t,["name"],n);const r=E(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=E(e,["done"]);i!=null&&S(t,["done"],i);const o=E(e,["error"]);o!=null&&S(t,["error"],o);const a=E(e,["response"]);return a!=null&&S(t,["response"],gV(a)),t}function hV(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const o=E(t,["image"]);o!=null&&S(n,["instances[0]","image"],qp(o));const a=E(t,["video"]);a!=null&&S(n,["instances[0]","video"],c3(a));const c=E(t,["source"]);c!=null&&vV(c,n);const f=E(t,["config"]);return f!=null&&uV(f,n),n}function pV(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const o=E(t,["image"]);o!=null&&S(n,["instances[0]","image"],Po(o));const a=E(t,["video"]);a!=null&&S(n,["instances[0]","video"],d3(a));const c=E(t,["source"]);c!=null&&yV(c,n);const f=E(t,["config"]);return f!=null&&cV(f,n),n}function mV(e){const t={},n=E(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>bV(a))),S(t,["generatedVideos"],o)}const r=E(e,["raiMediaFilteredCount"]);r!=null&&S(t,["raiMediaFilteredCount"],r);const i=E(e,["raiMediaFilteredReasons"]);return i!=null&&S(t,["raiMediaFilteredReasons"],i),t}function gV(e){const t={},n=E(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>EV(a))),S(t,["generatedVideos"],o)}const r=E(e,["raiMediaFilteredCount"]);r!=null&&S(t,["raiMediaFilteredCount"],r);const i=E(e,["raiMediaFilteredReasons"]);return i!=null&&S(t,["raiMediaFilteredReasons"],i),t}function vV(e,t){const n={},r=E(e,["prompt"]);t!==void 0&&r!=null&&S(t,["instances[0]","prompt"],r);const i=E(e,["image"]);t!==void 0&&i!=null&&S(t,["instances[0]","image"],qp(i));const o=E(e,["video"]);return t!==void 0&&o!=null&&S(t,["instances[0]","video"],c3(o)),n}function yV(e,t){const n={},r=E(e,["prompt"]);t!==void 0&&r!=null&&S(t,["instances[0]","prompt"],r);const i=E(e,["image"]);t!==void 0&&i!=null&&S(t,["instances[0]","image"],Po(i));const o=E(e,["video"]);return t!==void 0&&o!=null&&S(t,["instances[0]","video"],d3(o)),n}function xV(e){const t={},n=E(e,["_self"]);n!=null&&S(t,["image"],NV(n));const r=E(e,["raiFilteredReason"]);r!=null&&S(t,["raiFilteredReason"],r);const i=E(e,["_self"]);return i!=null&&S(t,["safetyAttributes"],s3(i)),t}function Hp(e){const t={},n=E(e,["_self"]);n!=null&&S(t,["image"],o3(n));const r=E(e,["raiFilteredReason"]);r!=null&&S(t,["raiFilteredReason"],r);const i=E(e,["_self"]);i!=null&&S(t,["safetyAttributes"],a3(i));const o=E(e,["prompt"]);return o!=null&&S(t,["enhancedPrompt"],o),t}function wV(e){const t={},n=E(e,["_self"]);n!=null&&S(t,["mask"],o3(n));const r=E(e,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),S(t,["labels"],i)}return t}function bV(e){const t={},n=E(e,["video"]);return n!=null&&S(t,["video"],lz(n)),t}function EV(e){const t={},n=E(e,["_self"]);return n!=null&&S(t,["video"],uz(n)),t}function _V(e){const t={},n=E(e,["modelSelectionConfig"]);n!=null&&S(t,["modelConfig"],n);const r=E(e,["responseJsonSchema"]);r!=null&&S(t,["responseJsonSchema"],r);const i=E(e,["audioTimestamp"]);i!=null&&S(t,["audioTimestamp"],i);const o=E(e,["candidateCount"]);o!=null&&S(t,["candidateCount"],o);const a=E(e,["enableAffectiveDialog"]);a!=null&&S(t,["enableAffectiveDialog"],a);const c=E(e,["frequencyPenalty"]);c!=null&&S(t,["frequencyPenalty"],c);const f=E(e,["logprobs"]);f!=null&&S(t,["logprobs"],f);const d=E(e,["maxOutputTokens"]);d!=null&&S(t,["maxOutputTokens"],d);const m=E(e,["mediaResolution"]);m!=null&&S(t,["mediaResolution"],m);const v=E(e,["presencePenalty"]);v!=null&&S(t,["presencePenalty"],v);const b=E(e,["responseLogprobs"]);b!=null&&S(t,["responseLogprobs"],b);const C=E(e,["responseMimeType"]);C!=null&&S(t,["responseMimeType"],C);const P=E(e,["responseModalities"]);P!=null&&S(t,["responseModalities"],P);const N=E(e,["responseSchema"]);N!=null&&S(t,["responseSchema"],N);const R=E(e,["routingConfig"]);R!=null&&S(t,["routingConfig"],R);const D=E(e,["seed"]);D!=null&&S(t,["seed"],D);const F=E(e,["speechConfig"]);F!=null&&S(t,["speechConfig"],l3(F));const L=E(e,["stopSequences"]);L!=null&&S(t,["stopSequences"],L);const U=E(e,["temperature"]);U!=null&&S(t,["temperature"],U);const G=E(e,["thinkingConfig"]);G!=null&&S(t,["thinkingConfig"],G);const q=E(e,["topK"]);q!=null&&S(t,["topK"],q);const W=E(e,["topP"]);if(W!=null&&S(t,["topP"],W),E(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function SV(e,t){const n={},r=E(t,["model"]);return r!=null&&S(n,["_url","name"],kt(e,r)),n}function CV(e,t){const n={},r=E(t,["model"]);return r!=null&&S(n,["_url","name"],kt(e,r)),n}function AV(e){const t={};if(E(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=E(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function TV(e){const t={};if(E(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=E(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function IV(e){const t={},n=E(e,["aspectRatio"]);n!=null&&S(t,["aspectRatio"],n);const r=E(e,["imageSize"]);if(r!=null&&S(t,["imageSize"],r),E(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(E(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function PV(e){const t={},n=E(e,["aspectRatio"]);n!=null&&S(t,["aspectRatio"],n);const r=E(e,["imageSize"]);r!=null&&S(t,["imageSize"],r);const i=E(e,["outputMimeType"]);i!=null&&S(t,["imageOutputOptions","mimeType"],i);const o=E(e,["outputCompressionQuality"]);return o!=null&&S(t,["imageOutputOptions","compressionQuality"],o),t}function NV(e){const t={},n=E(e,["bytesBase64Encoded"]);n!=null&&S(t,["imageBytes"],Aa(n));const r=E(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function o3(e){const t={},n=E(e,["gcsUri"]);n!=null&&S(t,["gcsUri"],n);const r=E(e,["bytesBase64Encoded"]);r!=null&&S(t,["imageBytes"],Aa(r));const i=E(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function qp(e){const t={};if(E(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=E(e,["imageBytes"]);n!=null&&S(t,["bytesBase64Encoded"],Aa(n));const r=E(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function Po(e){const t={},n=E(e,["gcsUri"]);n!=null&&S(t,["gcsUri"],n);const r=E(e,["imageBytes"]);r!=null&&S(t,["bytesBase64Encoded"],Aa(r));const i=E(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function RV(e,t,n){const r={},i=E(t,["pageSize"]);n!==void 0&&i!=null&&S(n,["_query","pageSize"],i);const o=E(t,["pageToken"]);n!==void 0&&o!=null&&S(n,["_query","pageToken"],o);const a=E(t,["filter"]);n!==void 0&&a!=null&&S(n,["_query","filter"],a);const c=E(t,["queryBase"]);return n!==void 0&&c!=null&&S(n,["_url","models_url"],JO(e,c)),r}function OV(e,t,n){const r={},i=E(t,["pageSize"]);n!==void 0&&i!=null&&S(n,["_query","pageSize"],i);const o=E(t,["pageToken"]);n!==void 0&&o!=null&&S(n,["_query","pageToken"],o);const a=E(t,["filter"]);n!==void 0&&a!=null&&S(n,["_query","filter"],a);const c=E(t,["queryBase"]);return n!==void 0&&c!=null&&S(n,["_url","models_url"],JO(e,c)),r}function kV(e,t){const n={},r=E(t,["config"]);return r!=null&&RV(e,r,n),n}function MV(e,t){const n={},r=E(t,["config"]);return r!=null&&OV(e,r,n),n}function DV(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=E(e,["_self"]);if(i!=null){let o=ZO(i);Array.isArray(o)&&(o=o.map(a=>jy(a))),S(t,["models"],o)}return t}function LV(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=E(e,["_self"]);if(i!=null){let o=ZO(i);Array.isArray(o)&&(o=o.map(a=>Uy(a))),S(t,["models"],o)}return t}function BV(e){const t={},n=E(e,["maskMode"]);n!=null&&S(t,["maskMode"],n);const r=E(e,["segmentationClasses"]);r!=null&&S(t,["maskClasses"],r);const i=E(e,["maskDilation"]);return i!=null&&S(t,["dilation"],i),t}function jy(e){const t={},n=E(e,["name"]);n!=null&&S(t,["name"],n);const r=E(e,["displayName"]);r!=null&&S(t,["displayName"],r);const i=E(e,["description"]);i!=null&&S(t,["description"],i);const o=E(e,["version"]);o!=null&&S(t,["version"],o);const a=E(e,["_self"]);a!=null&&S(t,["tunedModelInfo"],QV(a));const c=E(e,["inputTokenLimit"]);c!=null&&S(t,["inputTokenLimit"],c);const f=E(e,["outputTokenLimit"]);f!=null&&S(t,["outputTokenLimit"],f);const d=E(e,["supportedGenerationMethods"]);d!=null&&S(t,["supportedActions"],d);const m=E(e,["temperature"]);m!=null&&S(t,["temperature"],m);const v=E(e,["maxTemperature"]);v!=null&&S(t,["maxTemperature"],v);const b=E(e,["topP"]);b!=null&&S(t,["topP"],b);const C=E(e,["topK"]);C!=null&&S(t,["topK"],C);const P=E(e,["thinking"]);return P!=null&&S(t,["thinking"],P),t}function Uy(e){const t={},n=E(e,["name"]);n!=null&&S(t,["name"],n);const r=E(e,["displayName"]);r!=null&&S(t,["displayName"],r);const i=E(e,["description"]);i!=null&&S(t,["description"],i);const o=E(e,["versionId"]);o!=null&&S(t,["version"],o);const a=E(e,["deployedModels"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(b=>XU(b))),S(t,["endpoints"],v)}const c=E(e,["labels"]);c!=null&&S(t,["labels"],c);const f=E(e,["_self"]);f!=null&&S(t,["tunedModelInfo"],ez(f));const d=E(e,["defaultCheckpointId"]);d!=null&&S(t,["defaultCheckpointId"],d);const m=E(e,["checkpoints"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(b=>b)),S(t,["checkpoints"],v)}return t}function FV(e){const t={},n=E(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const r=E(e,["codeExecutionResult"]);r!=null&&S(t,["codeExecutionResult"],r);const i=E(e,["executableCode"]);i!=null&&S(t,["executableCode"],i);const o=E(e,["fileData"]);o!=null&&S(t,["fileData"],JU(o));const a=E(e,["functionCall"]);a!=null&&S(t,["functionCall"],ZU(a));const c=E(e,["functionResponse"]);c!=null&&S(t,["functionResponse"],c);const f=E(e,["inlineData"]);f!=null&&S(t,["inlineData"],_U(f));const d=E(e,["text"]);d!=null&&S(t,["text"],d);const m=E(e,["thought"]);m!=null&&S(t,["thought"],m);const v=E(e,["thoughtSignature"]);v!=null&&S(t,["thoughtSignature"],v);const b=E(e,["videoMetadata"]);return b!=null&&S(t,["videoMetadata"],b),t}function jV(e){const t={},n=E(e,["productImage"]);return n!=null&&S(t,["image"],Po(n)),t}function UV(e,t){const n={},r=E(e,["numberOfImages"]);t!==void 0&&r!=null&&S(t,["parameters","sampleCount"],r);const i=E(e,["baseSteps"]);t!==void 0&&i!=null&&S(t,["parameters","baseSteps"],i);const o=E(e,["outputGcsUri"]);t!==void 0&&o!=null&&S(t,["parameters","storageUri"],o);const a=E(e,["seed"]);t!==void 0&&a!=null&&S(t,["parameters","seed"],a);const c=E(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&S(t,["parameters","safetySetting"],c);const f=E(e,["personGeneration"]);t!==void 0&&f!=null&&S(t,["parameters","personGeneration"],f);const d=E(e,["addWatermark"]);t!==void 0&&d!=null&&S(t,["parameters","addWatermark"],d);const m=E(e,["outputMimeType"]);t!==void 0&&m!=null&&S(t,["parameters","outputOptions","mimeType"],m);const v=E(e,["outputCompressionQuality"]);t!==void 0&&v!=null&&S(t,["parameters","outputOptions","compressionQuality"],v);const b=E(e,["enhancePrompt"]);t!==void 0&&b!=null&&S(t,["parameters","enhancePrompt"],b);const C=E(e,["labels"]);return t!==void 0&&C!=null&&S(t,["labels"],C),n}function VV(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["source"]);i!=null&&$V(i,n);const o=E(t,["config"]);return o!=null&&UV(o,n),n}function zV(e){const t={},n=E(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Hp(i))),S(t,["generatedImages"],r)}return t}function $V(e,t){const n={},r=E(e,["prompt"]);t!==void 0&&r!=null&&S(t,["instances[0]","prompt"],r);const i=E(e,["personImage"]);t!==void 0&&i!=null&&S(t,["instances[0]","personImage","image"],Po(i));const o=E(e,["productImages"]);if(t!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>jV(c))),S(t,["instances[0]","productImages"],a)}return n}function GV(e){const t={},n=E(e,["referenceImage"]);n!=null&&S(t,["referenceImage"],Po(n));const r=E(e,["referenceId"]);r!=null&&S(t,["referenceId"],r);const i=E(e,["referenceType"]);i!=null&&S(t,["referenceType"],i);const o=E(e,["maskImageConfig"]);o!=null&&S(t,["maskImageConfig"],BV(o));const a=E(e,["controlImageConfig"]);a!=null&&S(t,["controlImageConfig"],NU(a));const c=E(e,["styleImageConfig"]);c!=null&&S(t,["styleImageConfig"],c);const f=E(e,["subjectImageConfig"]);return f!=null&&S(t,["subjectImageConfig"],f),t}function s3(e){const t={},n=E(e,["safetyAttributes","categories"]);n!=null&&S(t,["categories"],n);const r=E(e,["safetyAttributes","scores"]);r!=null&&S(t,["scores"],r);const i=E(e,["contentType"]);return i!=null&&S(t,["contentType"],i),t}function a3(e){const t={},n=E(e,["safetyAttributes","categories"]);n!=null&&S(t,["categories"],n);const r=E(e,["safetyAttributes","scores"]);r!=null&&S(t,["scores"],r);const i=E(e,["contentType"]);return i!=null&&S(t,["contentType"],i),t}function HV(e){const t={},n=E(e,["category"]);if(n!=null&&S(t,["category"],n),E(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=E(e,["threshold"]);return r!=null&&S(t,["threshold"],r),t}function qV(e){const t={},n=E(e,["image"]);return n!=null&&S(t,["image"],Po(n)),t}function WV(e,t){const n={},r=E(e,["mode"]);t!==void 0&&r!=null&&S(t,["parameters","mode"],r);const i=E(e,["maxPredictions"]);t!==void 0&&i!=null&&S(t,["parameters","maxPredictions"],i);const o=E(e,["confidenceThreshold"]);t!==void 0&&o!=null&&S(t,["parameters","confidenceThreshold"],o);const a=E(e,["maskDilation"]);t!==void 0&&a!=null&&S(t,["parameters","maskDilation"],a);const c=E(e,["binaryColorThreshold"]);t!==void 0&&c!=null&&S(t,["parameters","binaryColorThreshold"],c);const f=E(e,["labels"]);return t!==void 0&&f!=null&&S(t,["labels"],f),n}function KV(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["source"]);i!=null&&XV(i,n);const o=E(t,["config"]);return o!=null&&WV(o,n),n}function YV(e){const t={},n=E(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>wV(i))),S(t,["generatedMasks"],r)}return t}function XV(e,t){const n={},r=E(e,["prompt"]);t!==void 0&&r!=null&&S(t,["instances[0]","prompt"],r);const i=E(e,["image"]);t!==void 0&&i!=null&&S(t,["instances[0]","image"],Po(i));const o=E(e,["scribbleImage"]);return t!==void 0&&o!=null&&S(t,["instances[0]","scribble"],qV(o)),n}function l3(e){const t={},n=E(e,["voiceConfig"]);n!=null&&S(t,["voiceConfig"],n);const r=E(e,["languageCode"]);if(r!=null&&S(t,["languageCode"],r),E(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function JV(e){const t={},n=E(e,["functionCallingConfig"]);n!=null&&S(t,["functionCallingConfig"],QU(n));const r=E(e,["retrievalConfig"]);return r!=null&&S(t,["retrievalConfig"],r),t}function ZV(e){const t={},n=E(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>v)),S(t,["functionDeclarations"],m)}if(E(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=E(e,["googleSearchRetrieval"]);r!=null&&S(t,["googleSearchRetrieval"],r);const i=E(e,["computerUse"]);i!=null&&S(t,["computerUse"],i);const o=E(e,["fileSearch"]);o!=null&&S(t,["fileSearch"],o);const a=E(e,["codeExecution"]);if(a!=null&&S(t,["codeExecution"],a),E(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=E(e,["googleMaps"]);c!=null&&S(t,["googleMaps"],AV(c));const f=E(e,["googleSearch"]);f!=null&&S(t,["googleSearch"],TV(f));const d=E(e,["urlContext"]);return d!=null&&S(t,["urlContext"],d),t}function u3(e){const t={},n=E(e,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(b=>eV(b))),S(t,["functionDeclarations"],v)}const r=E(e,["retrieval"]);r!=null&&S(t,["retrieval"],r);const i=E(e,["googleSearchRetrieval"]);i!=null&&S(t,["googleSearchRetrieval"],i);const o=E(e,["computerUse"]);if(o!=null&&S(t,["computerUse"],o),E(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=E(e,["codeExecution"]);a!=null&&S(t,["codeExecution"],a);const c=E(e,["enterpriseWebSearch"]);c!=null&&S(t,["enterpriseWebSearch"],c);const f=E(e,["googleMaps"]);f!=null&&S(t,["googleMaps"],f);const d=E(e,["googleSearch"]);d!=null&&S(t,["googleSearch"],d);const m=E(e,["urlContext"]);return m!=null&&S(t,["urlContext"],m),t}function QV(e){const t={},n=E(e,["baseModel"]);n!=null&&S(t,["baseModel"],n);const r=E(e,["createTime"]);r!=null&&S(t,["createTime"],r);const i=E(e,["updateTime"]);return i!=null&&S(t,["updateTime"],i),t}function ez(e){const t={},n=E(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&S(t,["baseModel"],n);const r=E(e,["createTime"]);r!=null&&S(t,["createTime"],r);const i=E(e,["updateTime"]);return i!=null&&S(t,["updateTime"],i),t}function tz(e,t){const n={},r=E(e,["displayName"]);t!==void 0&&r!=null&&S(t,["displayName"],r);const i=E(e,["description"]);t!==void 0&&i!=null&&S(t,["description"],i);const o=E(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&S(t,["defaultCheckpointId"],o),n}function nz(e,t){const n={},r=E(e,["displayName"]);t!==void 0&&r!=null&&S(t,["displayName"],r);const i=E(e,["description"]);t!==void 0&&i!=null&&S(t,["description"],i);const o=E(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&S(t,["defaultCheckpointId"],o),n}function rz(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","name"],kt(e,r));const i=E(t,["config"]);return i!=null&&tz(i,n),n}function iz(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["config"]);return i!=null&&nz(i,n),n}function oz(e,t){const n={},r=E(e,["outputGcsUri"]);t!==void 0&&r!=null&&S(t,["parameters","storageUri"],r);const i=E(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&S(t,["parameters","safetySetting"],i);const o=E(e,["personGeneration"]);t!==void 0&&o!=null&&S(t,["parameters","personGeneration"],o);const a=E(e,["includeRaiReason"]);t!==void 0&&a!=null&&S(t,["parameters","includeRaiReason"],a);const c=E(e,["outputMimeType"]);t!==void 0&&c!=null&&S(t,["parameters","outputOptions","mimeType"],c);const f=E(e,["outputCompressionQuality"]);t!==void 0&&f!=null&&S(t,["parameters","outputOptions","compressionQuality"],f);const d=E(e,["enhanceInputImage"]);t!==void 0&&d!=null&&S(t,["parameters","upscaleConfig","enhanceInputImage"],d);const m=E(e,["imagePreservationFactor"]);t!==void 0&&m!=null&&S(t,["parameters","upscaleConfig","imagePreservationFactor"],m);const v=E(e,["labels"]);t!==void 0&&v!=null&&S(t,["labels"],v);const b=E(e,["numberOfImages"]);t!==void 0&&b!=null&&S(t,["parameters","sampleCount"],b);const C=E(e,["mode"]);return t!==void 0&&C!=null&&S(t,["parameters","mode"],C),n}function sz(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["_url","model"],kt(e,r));const i=E(t,["image"]);i!=null&&S(n,["instances[0]","image"],Po(i));const o=E(t,["upscaleFactor"]);o!=null&&S(n,["parameters","upscaleConfig","upscaleFactor"],o);const a=E(t,["config"]);return a!=null&&oz(a,n),n}function az(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Hp(o))),S(t,["generatedImages"],i)}return t}function lz(e){const t={},n=E(e,["uri"]);n!=null&&S(t,["uri"],n);const r=E(e,["encodedVideo"]);r!=null&&S(t,["videoBytes"],Aa(r));const i=E(e,["encoding"]);return i!=null&&S(t,["mimeType"],i),t}function uz(e){const t={},n=E(e,["gcsUri"]);n!=null&&S(t,["uri"],n);const r=E(e,["bytesBase64Encoded"]);r!=null&&S(t,["videoBytes"],Aa(r));const i=E(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function cz(e){const t={},n=E(e,["image"]);n!=null&&S(t,["_self"],Po(n));const r=E(e,["maskMode"]);return r!=null&&S(t,["maskMode"],r),t}function dz(e){const t={},n=E(e,["image"]);n!=null&&S(t,["image"],qp(n));const r=E(e,["referenceType"]);return r!=null&&S(t,["referenceType"],r),t}function fz(e){const t={},n=E(e,["image"]);n!=null&&S(t,["image"],Po(n));const r=E(e,["referenceType"]);return r!=null&&S(t,["referenceType"],r),t}function c3(e){const t={},n=E(e,["uri"]);n!=null&&S(t,["uri"],n);const r=E(e,["videoBytes"]);r!=null&&S(t,["encodedVideo"],Aa(r));const i=E(e,["mimeType"]);return i!=null&&S(t,["encoding"],i),t}function d3(e){const t={},n=E(e,["uri"]);n!=null&&S(t,["gcsUri"],n);const r=E(e,["videoBytes"]);r!=null&&S(t,["bytesBase64Encoded"],Aa(r));const i=E(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function hz(e,t){const n={},r=E(e,["displayName"]);return t!==void 0&&r!=null&&S(t,["displayName"],r),n}function pz(e){const t={},n=E(e,["config"]);return n!=null&&hz(n,t),t}function mz(e,t){const n={},r=E(e,["force"]);return t!==void 0&&r!=null&&S(t,["_query","force"],r),n}function gz(e){const t={},n=E(e,["name"]);n!=null&&S(t,["_url","name"],n);const r=E(e,["config"]);return r!=null&&mz(r,t),t}function vz(e){const t={},n=E(e,["name"]);return n!=null&&S(t,["_url","name"],n),t}function yz(e,t){const n={},r=E(e,["customMetadata"]);if(t!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["customMetadata"],o)}const i=E(e,["chunkingConfig"]);return t!==void 0&&i!=null&&S(t,["chunkingConfig"],i),n}function xz(e){const t={},n=E(e,["name"]);n!=null&&S(t,["name"],n);const r=E(e,["metadata"]);r!=null&&S(t,["metadata"],r);const i=E(e,["done"]);i!=null&&S(t,["done"],i);const o=E(e,["error"]);o!=null&&S(t,["error"],o);const a=E(e,["response"]);return a!=null&&S(t,["response"],bz(a)),t}function wz(e){const t={},n=E(e,["fileSearchStoreName"]);n!=null&&S(t,["_url","file_search_store_name"],n);const r=E(e,["fileName"]);r!=null&&S(t,["fileName"],r);const i=E(e,["config"]);return i!=null&&yz(i,t),t}function bz(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["parent"]);r!=null&&S(t,["parent"],r);const i=E(e,["documentName"]);return i!=null&&S(t,["documentName"],i),t}function Ez(e,t){const n={},r=E(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=E(e,["pageToken"]);return t!==void 0&&i!=null&&S(t,["_query","pageToken"],i),n}function _z(e){const t={},n=E(e,["config"]);return n!=null&&Ez(n,t),t}function Sz(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=E(e,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["fileSearchStores"],o)}return t}function f3(e,t){const n={},r=E(e,["mimeType"]);t!==void 0&&r!=null&&S(t,["mimeType"],r);const i=E(e,["displayName"]);t!==void 0&&i!=null&&S(t,["displayName"],i);const o=E(e,["customMetadata"]);if(t!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),S(t,["customMetadata"],c)}const a=E(e,["chunkingConfig"]);return t!==void 0&&a!=null&&S(t,["chunkingConfig"],a),n}function Cz(e){const t={},n=E(e,["fileSearchStoreName"]);n!=null&&S(t,["_url","file_search_store_name"],n);const r=E(e,["config"]);return r!=null&&f3(r,t),t}function Az(e){const t={},n=E(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}const Tz="Content-Type",Iz="X-Server-Timeout",Pz="User-Agent",Vy="x-goog-api-client",Nz="1.33.0",Rz=`google-genai-sdk/${Nz}`,Oz="v1beta1",kz="v1beta";class Mz{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Oz,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:kz,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),t!==""&&i.push(t),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[a,c]of Object.entries(t.queryParams))i.searchParams.append(a,String(c));let o={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=t.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),t.abortSignal),this.unaryApiCall(i,o,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=t.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),t.abortSignal),this.streamApiCall(i,o,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,i){if(n&&n.timeout||i){const o=new AbortController,a=o.signal;if(n.timeout&&n?.timeout>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),t.signal=a}return n&&n.extraBody!==null&&Dz(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await kC(i),new Ly(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await kC(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(t){return So(this,arguments,function*(){var r;const i=(r=t?.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let a="";const c="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:m}=yield gt(i.read());if(d){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=o.decode(m,{stream:!0});try{const P=JSON.parse(v);if("error"in P){const N=JSON.parse(JSON.stringify(P.error)),R=N.status,D=N.code,F=`got status: ${R}. ${JSON.stringify(P)}`;if(D>=400&&D<600)throw new $p({message:F,status:D})}}catch(P){if(P.name==="ApiError")throw P}a+=v;let b=-1,C=0;for(;;){b=-1,C=0;for(const R of f){const D=a.indexOf(R);D!==-1&&(b===-1||D<b)&&(b=D,C=R.length)}if(b===-1)break;const P=a.substring(0,b);a=a.substring(b+C);const N=P.trim();if(N.startsWith(c)){const R=N.substring(c.length).trim();try{const D=new Response(R,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield gt(new Ly(D))}catch(D){throw new Error(`exception parsing stream chunk ${R}. ${D}`)}}}}}finally{i.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=Rz+" "+this.clientOptions.userAgentExtra;return t[Pz]=n,t[Vy]=n,t[Tz]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[i,o]of Object.entries(t.headers))r.append(i,o);t.timeout&&t.timeout>0&&r.append(Iz,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,a=await o.stat(t);i.sizeBytes=String(a.size);const c=(r=n?.mimeType)!==null&&r!==void 0?r:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=c;const f={file:i},d=this.getFileName(t),m=je("upload/v1beta/files",f._url),v=await this.fetchUploadUrl(m,i.sizeBytes,i.mimeType,d,f,n?.httpOptions);return o.upload(t,v,this)}async uploadFileToFileSearchStore(t,n,r){var i;const o=this.clientOptions.uploader,a=await o.stat(n),c=String(a.size),f=(i=r?.mimeType)!==null&&i!==void 0?i:a.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${t}:uploadToFileSearchStore`,m=this.getFileName(n),v={};r!=null&&f3(r,v);const b=await this.fetchUploadUrl(d,c,f,m,v,r?.httpOptions);return o.uploadToFileSearchStore(n,b,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,i,o,a){var c;let f={};a?f=a:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const d=await this.request({path:t,body:JSON.stringify(o),httpMethod:"POST",httpOptions:f});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(c=d?.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function kC(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new $p({message:i,status:n}):new Error(i)}}function Dz(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const o=JSON.parse(e.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,a){const c=Object.assign({},o);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f)){const d=a[f],m=c[f];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?c[f]=r(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),c[f]=d)}return c}const i=r(n,t);e.body=JSON.stringify(i)}const Lz="mcp_used/unknown";let Bz=!1;function h3(e){for(const t of e)if(Fz(t)||typeof t=="object"&&"inputSchema"in t)return!0;return Bz}function p3(e){var t;const n=(t=e[Vy])!==null&&t!==void 0?t:"";e[Vy]=(n+` ${Lz}`).trimStart()}function Fz(e){return e!==null&&typeof e=="object"&&e instanceof Rw}function jz(e){return So(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const a=yield gt(n.listTools({cursor:i}));for(const c of a.tools)yield yield gt(c),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class Rw{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Rw(t,n)}async initialize(){var t,n,r,i;if(this.mcpTools.length>0)return;const o={},a=[];for(const m of this.mcpClients)try{for(var c=!0,f=(n=void 0,Co(jz(m))),d;d=await f.next(),t=d.done,!t;c=!0){i=d.value,c=!1;const v=i;a.push(v);const b=v.name;if(o[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);o[b]=m}}catch(v){n={error:v}}finally{try{!c&&!t&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),vF(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:a.isError?{error:a}:a}})}return n}}async function Uz(e,t,n){const r=new uF;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),t(r)}class Vz{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=Gz(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const m=new Promise(L=>{d=L}),v=t.callbacks,b=function(){d({})},C=this.apiClient,P={onopen:b,onmessage:L=>{Uz(C,v.onmessage,L)},onerror:(n=v?.onerror)!==null&&n!==void 0?n:function(L){},onclose:(r=v?.onclose)!==null&&r!==void 0?r:function(L){}},N=this.webSocketFactory.create(f,$z(a),P);N.connect(),await m;const F={setup:{model:kt(this.apiClient,t.model)}};return N.send(JSON.stringify(F)),new zz(N,this.apiClient)}}class zz{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=pU(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=hU(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(_u.PLAY)}pause(){this.sendPlaybackControl(_u.PAUSE)}stop(){this.sendPlaybackControl(_u.STOP)}resetContext(){this.sendPlaybackControl(_u.RESET_CONTEXT)}close(){this.conn.close()}}function $z(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function Gz(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}const Hz="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function qz(e,t,n){const r=new lF;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(e.isVertexAI()){const a=vU(o);Object.assign(r,a)}else Object.assign(r,o);t(r)}class Wz{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new Vz(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,i,o,a,c;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const v=this.apiClient.getHeaders();t.config&&t.config.tools&&h3(t.config.tools)&&p3(v);const b=Jz(v);if(this.apiClient.isVertexAI())m=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b,m);else{const X=this.apiClient.getApiKey();let pe="BidiGenerateContent",ae="key";X?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),pe="BidiGenerateContentConstrained",ae="access_token"),m=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${pe}?${ae}=${X}`}let C=()=>{};const P=new Promise(X=>{C=X}),N=t.callbacks,R=function(){var X;(X=N?.onopen)===null||X===void 0||X.call(N),C({})},D=this.apiClient,F={onopen:R,onmessage:X=>{qz(D,N.onmessage,X)},onerror:(n=N?.onerror)!==null&&n!==void 0?n:function(X){},onclose:(r=N?.onclose)!==null&&r!==void 0?r:function(X){}},L=this.webSocketFactory.create(m,Xz(b),F);L.connect(),await P;let U=kt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&U.startsWith("publishers/")){const X=this.apiClient.getProject(),pe=this.apiClient.getLocation();U=`projects/${X}/locations/${pe}/`+U}let G={};this.apiClient.isVertexAI()&&((i=t.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[R0.AUDIO]}:t.config.responseModalities=[R0.AUDIO]),!((o=t.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const q=(c=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[],W=[];for(const X of q)if(this.isCallableTool(X)){const pe=X;W.push(await pe.tool())}else W.push(X);W.length>0&&(t.config.tools=W);const Z={model:U,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?G=fU(this.apiClient,Z):G=dU(this.apiClient,Z),delete G.config,L.send(JSON.stringify(G)),new Yz(L,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const Kz={turnComplete:!0};class Yz{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=eo(n.turns),t.isVertexAI()||(r=r.map(i=>Gp(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!t.isVertexAI()&&!("id"in o))throw new Error(Hz)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},Kz),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:gU(t)}:n={realtimeInput:mU(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Xz(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function Jz(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}const MC=10;function DC(e){var t,n,r;if(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let i=!1;for(const a of(n=e?.tools)!==null&&n!==void 0?n:[])if(ku(a)){i=!0;break}if(!i)return!0;const o=(r=e?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ku(e){return"callTool"in e&&typeof e.callTool=="function"}function Zz(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(i=>ku(i)))!==null&&r!==void 0?r:!1}function LC(e){var t;const n=[];return!((t=e?.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,i)=>{if(ku(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function BC(e){var t;return!(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}class Qz extends Os{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,i,o,a,c;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Zz(n)||DC(n.config))return await this.generateContentInternal(f);const d=LC(n);if(d.length>0){const N=d.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let m,v;const b=eo(f.contents),C=(o=(i=(r=f.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:MC;let P=0;for(;P<C&&(m=await this.generateContentInternal(f),!(!m.functionCalls||m.functionCalls.length===0));){const N=m.candidates[0].content,R=[];for(const D of(c=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[])if(ku(D)){const L=await D.callTool(m.functionCalls);R.push(...L)}P++,v={role:"user",parts:R},f.contents=eo(f.contents),f.contents.push(N),f.contents.push(v),BC(f.config)&&(b.push(N),b.push(v))}return BC(f.config)&&(m.automaticFunctionCallingHistory=b),m},this.generateContentStream=async n=>{var r,i,o,a,c;if(this.maybeMoveToResponseJsonSchem(n),DC(n.config)){const v=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(v)}const f=LC(n);if(f.length>0){const v=f.map(b=>`tools[${b}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(o=(i=(r=n?.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,m=(c=(a=n?.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const a=[];if(r?.generatedImages)for(const f of r.generatedImages)f&&f?.safetyAttributes&&((i=f?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=f?.safetyAttributes:a.push(f);let c;return o?c={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:c={generatedImages:a,sdkHttpResponse:r.sdkHttpResponse},c}),this.list=async n=>{var r;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((r=a.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Rl(_s.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(a),a)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,a,c,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(o=n.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((f=(c=n.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,i;const o=(n=t.config)===null||n===void 0?void 0:n.tools;if(!o)return t;const a=await Promise.all(o.map(async f=>ku(f)?await f.tool():f)),c={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:a})};if(c.config.tools=a,t.config&&t.config.tools&&h3(t.config.tools)){const f=(i=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),p3(d),c.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(t){var n,r,i;const o=new Map;for(const a of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ku(a)){const c=a,f=await c.tool();for(const d of(i=f.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,c)}}return o}async processAfcStream(t){var n,r,i;const o=(i=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:MC;let a=!1,c=0;const f=await this.initAfcToolsMap(t);return(function(d,m,v){return So(this,arguments,function*(){for(var b,C,P,N,R,D;c<o;){a&&(c++,a=!1);const G=yield gt(d.processParamsMaybeAddMcpUsage(v)),q=yield gt(d.generateContentStreamInternal(G)),W=[],Z=[];try{for(var F=!0,L=(C=void 0,Co(q)),U;U=yield gt(L.next()),b=U.done,!b;F=!0){N=U.value,F=!1;const X=N;if(yield yield gt(X),X.candidates&&(!((R=X.candidates[0])===null||R===void 0)&&R.content)){Z.push(X.candidates[0].content);for(const pe of(D=X.candidates[0].content.parts)!==null&&D!==void 0?D:[])if(c<o&&pe.functionCall){if(!pe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(pe.functionCall.name)){const ae=yield gt(m.get(pe.functionCall.name).callTool([pe.functionCall]));W.push(...ae)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${pe.functionCall.name}`)}}}}catch(X){C={error:X}}finally{try{!F&&!b&&(P=L.return)&&(yield gt(P.call(L)))}finally{if(C)throw C.error}}if(W.length>0){a=!0;const X=new od;X.candidates=[{content:{role:"user",parts:W}}],yield yield gt(X);const pe=[];pe.push(...Z),pe.push({role:"user",parts:W});const ae=eo(v.contents).concat(pe);v.contents=ae}else break}})})(this,f,t)}async generateContentInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=NC(this.apiClient,t);return c=je("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=OC(m),b=new od;return Object.assign(b,v),b})}else{const d=PC(this.apiClient,t);return c=je("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=RC(m),b=new od;return Object.assign(b,v),b})}}async generateContentStreamInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=NC(this.apiClient,t);return c=je("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(v){return So(this,arguments,function*(){var b,C,P,N;try{for(var R=!0,D=Co(v),F;F=yield gt(D.next()),b=F.done,!b;R=!0){N=F.value,R=!1;const L=N,U=OC(yield gt(L.json()));U.sdkHttpResponse={headers:L.headers};const G=new od;Object.assign(G,U),yield yield gt(G)}}catch(L){C={error:L}}finally{try{!R&&!b&&(P=D.return)&&(yield gt(P.call(D)))}finally{if(C)throw C.error}}})})}else{const d=PC(this.apiClient,t);return c=je("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(v){return So(this,arguments,function*(){var b,C,P,N;try{for(var R=!0,D=Co(v),F;F=yield gt(D.next()),b=F.done,!b;R=!0){N=F.value,R=!1;const L=N,U=RC(yield gt(L.json()));U.sdkHttpResponse={headers:L.headers};const G=new od;Object.assign(G,U),yield yield gt(G)}}catch(L){C={error:L}}finally{try{!R&&!b&&(P=D.return)&&(yield gt(P.call(D)))}finally{if(C)throw C.error}}})})}}async embedContent(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=WU(this.apiClient,t);return c=je("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=YU(m),b=new fC;return Object.assign(b,v),b})}else{const d=qU(this.apiClient,t);return c=je("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=KU(m),b=new fC;return Object.assign(b,v),b})}}async generateImagesInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=sV(this.apiClient,t);return c=je("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=lV(m),b=new hC;return Object.assign(b,v),b})}else{const d=oV(this.apiClient,t);return c=je("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=aV(m),b=new hC;return Object.assign(b,v),b})}}async editImageInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=zU(this.apiClient,t);return o=je("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>{const d=$U(f),m=new J7;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=sz(this.apiClient,t);return o=je("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>{const d=az(f),m=new Z7;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=VV(this.apiClient,t);return o=je("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=zV(f),m=new Q7;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=KV(this.apiClient,t);return o=je("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=YV(f),m=new eF;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=CV(this.apiClient,t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>Uy(m))}else{const d=SV(this.apiClient,t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>jy(m))}}async listInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=MV(this.apiClient,t);return c=je("{models_url}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=LV(m),b=new pC;return Object.assign(b,v),b})}else{const d=kV(this.apiClient,t);return c=je("{models_url}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=DV(m),b=new pC;return Object.assign(b,v),b})}}async update(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=iz(this.apiClient,t);return c=je("{model}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>Uy(m))}else{const d=rz(this.apiClient,t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>jy(m))}}async delete(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=FU(this.apiClient,t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=UU(m),b=new mC;return Object.assign(b,v),b})}else{const d=BU(this.apiClient,t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=jU(m),b=new mC;return Object.assign(b,v),b})}}async countTokens(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=MU(this.apiClient,t);return c=je("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=LU(m),b=new gC;return Object.assign(b,v),b})}else{const d=kU(this.apiClient,t);return c=je("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=DU(m),b=new gC;return Object.assign(b,v),b})}}async computeTokens(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=AU(this.apiClient,t);return o=je("{model}:computeTokens",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>{const d=TU(f),m=new tF;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=pV(this.apiClient,t);return c=je("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a.then(m=>{const v=fV(m),b=new O0;return Object.assign(b,v),b})}else{const d=hV(this.apiClient,t);return c=je("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>{const v=dV(m),b=new O0;return Object.assign(b,v),b})}}}class e$ extends Os{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=H7(t);return c=je("{operationName}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),a}else{const d=G7(t);return c=je("{operationName}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a}}async fetchPredictVideosOperationInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=B7(t);return o=je("{resourceName}:fetchPredictOperation",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}function t$(e){const t={},n=E(e,["data"]);if(n!=null&&S(t,["data"],n),E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=E(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function n$(e){const t={},n=E(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>d$(o))),S(t,["parts"],i)}const r=E(e,["role"]);return r!=null&&S(t,["role"],r),t}function r$(e,t,n){const r={},i=E(t,["expireTime"]);n!==void 0&&i!=null&&S(n,["expireTime"],i);const o=E(t,["newSessionExpireTime"]);n!==void 0&&o!=null&&S(n,["newSessionExpireTime"],o);const a=E(t,["uses"]);n!==void 0&&a!=null&&S(n,["uses"],a);const c=E(t,["liveConnectConstraints"]);n!==void 0&&c!=null&&S(n,["bidiGenerateContentSetup"],c$(e,c));const f=E(t,["lockAdditionalFields"]);return n!==void 0&&f!=null&&S(n,["fieldMask"],f),r}function i$(e,t){const n={},r=E(t,["config"]);return r!=null&&S(n,["config"],r$(e,r,n)),n}function o$(e){const t={};if(E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const r=E(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}function s$(e){const t={},n=E(e,["id"]);n!=null&&S(t,["id"],n);const r=E(e,["args"]);r!=null&&S(t,["args"],r);const i=E(e,["name"]);if(i!=null&&S(t,["name"],i),E(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function a$(e){const t={};if(E(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=E(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function l$(e){const t={};if(E(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=E(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function u$(e,t){const n={},r=E(e,["generationConfig"]);t!==void 0&&r!=null&&S(t,["setup","generationConfig"],r);const i=E(e,["responseModalities"]);t!==void 0&&i!=null&&S(t,["setup","generationConfig","responseModalities"],i);const o=E(e,["temperature"]);t!==void 0&&o!=null&&S(t,["setup","generationConfig","temperature"],o);const a=E(e,["topP"]);t!==void 0&&a!=null&&S(t,["setup","generationConfig","topP"],a);const c=E(e,["topK"]);t!==void 0&&c!=null&&S(t,["setup","generationConfig","topK"],c);const f=E(e,["maxOutputTokens"]);t!==void 0&&f!=null&&S(t,["setup","generationConfig","maxOutputTokens"],f);const d=E(e,["mediaResolution"]);t!==void 0&&d!=null&&S(t,["setup","generationConfig","mediaResolution"],d);const m=E(e,["seed"]);t!==void 0&&m!=null&&S(t,["setup","generationConfig","seed"],m);const v=E(e,["speechConfig"]);t!==void 0&&v!=null&&S(t,["setup","generationConfig","speechConfig"],Nw(v));const b=E(e,["thinkingConfig"]);t!==void 0&&b!=null&&S(t,["setup","generationConfig","thinkingConfig"],b);const C=E(e,["enableAffectiveDialog"]);t!==void 0&&C!=null&&S(t,["setup","generationConfig","enableAffectiveDialog"],C);const P=E(e,["systemInstruction"]);t!==void 0&&P!=null&&S(t,["setup","systemInstruction"],n$(zr(P)));const N=E(e,["tools"]);if(t!==void 0&&N!=null){let q=ec(N);Array.isArray(q)&&(q=q.map(W=>h$(Qu(W)))),S(t,["setup","tools"],q)}const R=E(e,["sessionResumption"]);t!==void 0&&R!=null&&S(t,["setup","sessionResumption"],f$(R));const D=E(e,["inputAudioTranscription"]);t!==void 0&&D!=null&&S(t,["setup","inputAudioTranscription"],D);const F=E(e,["outputAudioTranscription"]);t!==void 0&&F!=null&&S(t,["setup","outputAudioTranscription"],F);const L=E(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&S(t,["setup","realtimeInputConfig"],L);const U=E(e,["contextWindowCompression"]);t!==void 0&&U!=null&&S(t,["setup","contextWindowCompression"],U);const G=E(e,["proactivity"]);if(t!==void 0&&G!=null&&S(t,["setup","proactivity"],G),E(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function c$(e,t){const n={},r=E(t,["model"]);r!=null&&S(n,["setup","model"],kt(e,r));const i=E(t,["config"]);return i!=null&&S(n,["config"],u$(i,n)),n}function d$(e){const t={},n=E(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const r=E(e,["codeExecutionResult"]);r!=null&&S(t,["codeExecutionResult"],r);const i=E(e,["executableCode"]);i!=null&&S(t,["executableCode"],i);const o=E(e,["fileData"]);o!=null&&S(t,["fileData"],o$(o));const a=E(e,["functionCall"]);a!=null&&S(t,["functionCall"],s$(a));const c=E(e,["functionResponse"]);c!=null&&S(t,["functionResponse"],c);const f=E(e,["inlineData"]);f!=null&&S(t,["inlineData"],t$(f));const d=E(e,["text"]);d!=null&&S(t,["text"],d);const m=E(e,["thought"]);m!=null&&S(t,["thought"],m);const v=E(e,["thoughtSignature"]);v!=null&&S(t,["thoughtSignature"],v);const b=E(e,["videoMetadata"]);return b!=null&&S(t,["videoMetadata"],b),t}function f$(e){const t={},n=E(e,["handle"]);if(n!=null&&S(t,["handle"],n),E(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function h$(e){const t={},n=E(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>v)),S(t,["functionDeclarations"],m)}if(E(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=E(e,["googleSearchRetrieval"]);r!=null&&S(t,["googleSearchRetrieval"],r);const i=E(e,["computerUse"]);i!=null&&S(t,["computerUse"],i);const o=E(e,["fileSearch"]);o!=null&&S(t,["fileSearch"],o);const a=E(e,["codeExecution"]);if(a!=null&&S(t,["codeExecution"],a),E(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=E(e,["googleMaps"]);c!=null&&S(t,["googleMaps"],a$(c));const f=E(e,["googleSearch"]);f!=null&&S(t,["googleSearch"],l$(f));const d=E(e,["urlContext"]);return d!=null&&S(t,["urlContext"],d),t}function p$(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);t.push(...i)}else t.push(n)}return t.join(",")}function m$(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(e.bidiGenerateContentSetup=o,n=o):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const i=e.fieldMask;if(n){const o=p$(n);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)o?e.fieldMask=o:delete e.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];i.length>0&&(c=i.map(d=>a.includes(d)?`generationConfig.${d}`:d));const f=[];o&&f.push(o),c.length>0&&f.push(...c),f.length>0?e.fieldMask=f.join(","):delete e.fieldMask}else delete e.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}class g$ extends Os{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=i$(this.apiClient,t);o=je("auth_tokens",c._url),a=c._query,delete c.config,delete c._url,delete c._query;const f=m$(c,t.config);return i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}function v$(e,t){const n={},r=E(e,["force"]);return t!==void 0&&r!=null&&S(t,["_query","force"],r),n}function y$(e){const t={},n=E(e,["name"]);n!=null&&S(t,["_url","name"],n);const r=E(e,["config"]);return r!=null&&v$(r,t),t}function x$(e){const t={},n=E(e,["name"]);return n!=null&&S(t,["_url","name"],n),t}function w$(e,t){const n={},r=E(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const i=E(e,["pageToken"]);return t!==void 0&&i!=null&&S(t,["_query","pageToken"],i),n}function b$(e){const t={},n=E(e,["parent"]);n!=null&&S(t,["_url","parent"],n);const r=E(e,["config"]);return r!=null&&w$(r,t),t}function E$(e){const t={},n=E(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const r=E(e,["nextPageToken"]);r!=null&&S(t,["nextPageToken"],r);const i=E(e,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),S(t,["documents"],o)}return t}class _$ extends Os{constructor(t){super(),this.apiClient=t,this.list=async n=>new Rl(_s.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=x$(t);return o=je("{name}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(t){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=y$(t);i=je("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=b$(t);return o=je("{parent}/documents",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=E$(f),m=new nF;return Object.assign(m,d),m})}}}class S$ extends Os{constructor(t,n=new _$(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new Rl(_s.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=pz(t);return o=je("fileSearchStores",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async get(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=vz(t);return o=je("{name}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(t){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gz(t);i=je("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_z(t);return o=je("fileSearchStores",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=Sz(f),m=new rF;return Object.assign(m,d),m})}}async uploadToFileSearchStoreInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Cz(t);return o=je("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=Az(f),m=new iF;return Object.assign(m,d),m})}}async importFile(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=wz(t);return o=je("{file_search_store_name}:importFile",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=xz(f),m=new Cw;return Object.assign(m,d),m})}}}let m3=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return m3=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const C$=()=>m3();function zy(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const $y=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class no extends Error{}class Xr extends no{constructor(t,n,r,i){super(`${Xr.makeMessage(t,n,r)}`),this.status=t,this.headers=i,this.error=n}static makeMessage(t,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,n,r,i){if(!t||!i)return new Wp({message:r,cause:$y(n)});const o=n;return t===400?new v3(t,o,r,i):t===401?new y3(t,o,r,i):t===403?new x3(t,o,r,i):t===404?new w3(t,o,r,i):t===409?new b3(t,o,r,i):t===422?new E3(t,o,r,i):t===429?new _3(t,o,r,i):t>=500?new S3(t,o,r,i):new Xr(t,o,r,i)}}class Gy extends Xr{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Wp extends Xr{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class g3 extends Wp{constructor({message:t}={}){super({message:t??"Request timed out."})}}class v3 extends Xr{}class y3 extends Xr{}class x3 extends Xr{}class w3 extends Xr{}class b3 extends Xr{}class E3 extends Xr{}class _3 extends Xr{}class S3 extends Xr{}const A$=/^[a-z][a-z0-9+.-]*:/i,T$=e=>A$.test(e);let Hy=e=>(Hy=Array.isArray,Hy(e));const I$=Hy;let P$=I$;const FC=P$;function N$(e){if(!e)return!0;for(const t in e)return!1;return!0}function R$(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const O$=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new no(`${e} must be an integer`);if(t<0)throw new no(`${e} must be a positive integer`);return t},k$=e=>{try{return JSON.parse(e)}catch{return}};const M$=e=>new Promise(t=>setTimeout(t,e));const bu="0.0.1";function D$(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const L$=()=>{var e,t,n,r,i;const o=D$();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bu,"X-Stainless-OS":UC(Deno.build.os),"X-Stainless-Arch":jC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bu,"X-Stainless-OS":UC((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":jC((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const a=B$();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function B$(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,a=r[3]||0;return{browser:t,version:`${i}.${o}.${a}`}}}return null}const jC=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",UC=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Fh;const F$=()=>Fh??(Fh=L$());function j$(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function C3(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function U$(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return C3({start(){},async pull(n){const{done:r,value:i}=await t.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function A3(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function V$(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const r=e.getReader(),i=r.cancel();r.releaseLock(),await i}const z$=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});const T3=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t?.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function O1(e,t,n){return T3(),new File(e,t??"unknown_file",n)}function $$(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const G$=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";const I3=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",H$=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&I3(e),q$=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function W$(e,t,n){if(T3(),e=await e,H$(e))return e instanceof File?e:O1([await e.arrayBuffer()],e.name);if(q$(e)){const i=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),O1(await qy(i),t,n)}const r=await qy(e);if(t||(t=$$(e)),!n?.type){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return O1(r,t,n)}async function qy(e){var t,n,r,i,o;let a=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)a.push(e);else if(I3(e))a.push(e instanceof Blob?e:await e.arrayBuffer());else if(G$(e))try{for(var c=!0,f=Co(e),d;d=await f.next(),t=d.done,!t;c=!0){i=d.value,c=!1;const m=i;a.push(...await qy(m))}}catch(m){n={error:m}}finally{try{!c&&!t&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}else{const m=(o=e?.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof e}${m?`; constructor: ${m}`:""}${K$(e)}`)}return a}function K$(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}class P3{constructor(t){this._client=t}}P3._key=[];function N3(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const VC=Object.freeze(Object.create(null)),Y$=(e=N3)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],a=n.reduce((m,v,b)=>{var C,P,N;/[?#]/.test(v)&&(i=!0);const R=r[b];let D=(i?encodeURIComponent:e)(""+R);return b!==r.length&&(R==null||typeof R=="object"&&R.toString===((N=Object.getPrototypeOf((P=Object.getPrototypeOf((C=R.hasOwnProperty)!==null&&C!==void 0?C:VC))!==null&&P!==void 0?P:VC))===null||N===void 0?void 0:N.toString))&&(D=R+"",o.push({start:m.length+v.length,length:D.length,error:`Value of type ${Object.prototype.toString.call(R).slice(8,-1)} is not a valid path parameter`})),m+v+(b===r.length?"":D)},""),c=a.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(c))!==null;)o.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(o.sort((m,v)=>m.start-v.start),o.length>0){let m=0;const v=o.reduce((b,C)=>{const P=" ".repeat(C.start-m),N="^".repeat(C.length);return m=C.start+C.length,b+P+N},"");throw new no(`Path parameters result in path with invalid segments:
${o.map(b=>b.error).join(`
`)}
${a}
${v}`)}return a}),jh=Y$(N3);class R3 extends P3{create(t,n){var r;const{api_version:i=this._client.apiVersion}=t,o=M0(t,["api_version"]);if("model"in o&&"agent_config"in o)throw new no("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new no("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(jh`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=t.stream)!==null&&r!==void 0?r:!1}))}delete(t,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(jh`/${i}/interactions/${t}`,r)}cancel(t,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(jh`/${i}/interactions/${t}/cancel`,r)}get(t,n={},r){var i;const o=n??{},{api_version:a=this._client.apiVersion}=o,c=M0(o,["api_version"]);return this._client.get(jh`/${a}/interactions/${t}`,Object.assign(Object.assign({query:c},r),{stream:(i=n?.stream)!==null&&i!==void 0?i:!1}))}}R3._key=Object.freeze(["interactions"]);class O3 extends R3{}function X$(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}let Uh;function Ow(e){let t;return(Uh??(t=new globalThis.TextEncoder,Uh=t.encode.bind(t)))(e)}let Vh;function zC(e){let t;return(Vh??(t=new globalThis.TextDecoder,Vh=t.decode.bind(t)))(e)}class Kp{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Ow(t):t;this.buffer=X$([this.buffer,n]);const r=[];let i;for(;(i=J$(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(zC(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,a=zC(this.buffer.subarray(0,o));r.push(a),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Kp.NEWLINE_CHARS=new Set([`
`,"\r"]);Kp.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function J$(e,t){for(let i=t??0;i<e.length;i++){if(e[i]===10)return{preceding:i,index:i+1,carriage:!1};if(e[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Z$(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}const D0={off:0,error:200,warn:300,info:400,debug:500},$C=(e,t,n)=>{if(e){if(R$(D0,e))return e;Wr(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(D0))}`)}};function vd(){}function zh(e,t,n){return!t||D0[e]>D0[n]?vd:t[e].bind(t)}const Q$={error:vd,warn:vd,info:vd,debug:vd};let GC=new WeakMap;function Wr(e){var t;const n=e.logger,r=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return Q$;const i=GC.get(n);if(i&&i[0]===r)return i[1];const o={error:zh("error",n,r),warn:zh("warn",n,r),info:zh("info",n,r),debug:zh("debug",n,r)};return GC.set(n,[r,o]),o}const ol=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class Su{constructor(t,n,r){this.iterator=t,this.controller=n,this.client=r}static fromSSEResponse(t,n,r){let i=!1;const o=r?Wr(r):console;function a(){return So(this,arguments,function*(){var f,d,m,v;if(i)throw new no("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let b=!1;try{try{for(var C=!0,P=Co(eG(t,n)),N;N=yield gt(P.next()),f=N.done,!f;C=!0){v=N.value,C=!1;const R=v;if(!b)if(R.data.startsWith("[DONE]")){b=!0;continue}else try{yield yield gt(JSON.parse(R.data))}catch(D){throw o.error("Could not parse message into JSON:",R.data),o.error("From chunk:",R.raw),D}}}catch(R){d={error:R}}finally{try{!C&&!f&&(m=P.return)&&(yield gt(m.call(P)))}finally{if(d)throw d.error}}b=!0}catch(R){if(zy(R))return yield gt(void 0);throw R}finally{b||n.abort()}})}return new Su(a,n,r)}static fromReadableStream(t,n,r){let i=!1;function o(){return So(this,arguments,function*(){var f,d,m,v;const b=new Kp,C=A3(t);try{for(var P=!0,N=Co(C),R;R=yield gt(N.next()),f=R.done,!f;P=!0){v=R.value,P=!1;const D=v;for(const F of b.decode(D))yield yield gt(F)}}catch(D){d={error:D}}finally{try{!P&&!f&&(m=N.return)&&(yield gt(m.call(N)))}finally{if(d)throw d.error}}for(const D of b.flush())yield yield gt(D)})}function a(){return So(this,arguments,function*(){var f,d,m,v;if(i)throw new no("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let b=!1;try{try{for(var C=!0,P=Co(o()),N;N=yield gt(P.next()),f=N.done,!f;C=!0){v=N.value,C=!1;const R=v;b||R&&(yield yield gt(JSON.parse(R)))}}catch(R){d={error:R}}finally{try{!C&&!f&&(m=P.return)&&(yield gt(m.call(P)))}finally{if(d)throw d.error}}b=!0}catch(R){if(zy(R))return yield gt(void 0);throw R}finally{b||n.abort()}})}return new Su(a,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const a=r.next();t.push(a),n.push(a)}return o.shift()}});return[new Su(()=>i(t),this.controller,this.client),new Su(()=>i(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return C3({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const a=Ow(JSON.stringify(i)+`
`);r.enqueue(a)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function eG(e,t){return So(this,arguments,function*(){var r,i,o,a;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new no("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new no("Attempted to iterate over a response with no body");const c=new nG,f=new Kp,d=A3(e.body);try{for(var m=!0,v=Co(tG(d)),b;b=yield gt(v.next()),r=b.done,!r;m=!0){a=b.value,m=!1;const C=a;for(const P of f.decode(C)){const N=c.decode(P);N&&(yield yield gt(N))}}}catch(C){i={error:C}}finally{try{!m&&!r&&(o=v.return)&&(yield gt(o.call(v)))}finally{if(i)throw i.error}}for(const C of f.flush()){const P=c.decode(C);P&&(yield yield gt(P))}})}function tG(e){return So(this,arguments,function*(){var n,r,i,o;let a=new Uint8Array;try{for(var c=!0,f=Co(e),d;d=yield gt(f.next()),n=d.done,!n;c=!0){o=d.value,c=!1;const m=o;if(m==null)continue;const v=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?Ow(m):m;let b=new Uint8Array(a.length+v.length);b.set(a),b.set(v,a.length),a=b;let C;for(;(C=Z$(a))!==-1;)yield yield gt(a.slice(0,C)),a=a.slice(C)}}catch(m){r={error:m}}finally{try{!c&&!n&&(i=f.return)&&(yield gt(i.call(f)))}finally{if(r)throw r.error}}a.length>0&&(yield yield gt(a))})}class nG{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,i]=rG(t,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function rG(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}async function iG(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=t,a=await(async()=>{var c;if(t.options.stream)return Wr(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Su.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const f=n.headers.get("content-type"),d=(c=f?.split(";")[0])===null||c===void 0?void 0:c.trim();return d?.includes("application/json")||d?.endsWith("+json")?await n.json():await n.text()})();return Wr(e).debug(`[${r}] response parsed`,ol({retryOfRequestLogID:i,url:n.url,status:n.status,body:a,durationMs:Date.now()-o})),a}class kw extends Promise{constructor(t,n,r=iG){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=t}_thenUnwrap(t){return new kw(this.client,this.responsePromise,async(n,r)=>t(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}const k3=Symbol("brand.privateNullableHeaders");function*oG(e){if(!e)return;if(k3 in e){const{values:r,nulls:i}=e;yield*r.entries();for(const o of i)yield[o,null];return}let t=!1,n;e instanceof Headers?n=e.entries():FC(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=FC(r[1])?r[1]:[r[1]];let a=!1;for(const c of o)c!==void 0&&(t&&!a&&(a=!0,yield[i,null]),yield[i,c])}}const k1=e=>{const t=new Headers,n=new Set;for(const r of e){const i=new Set;for(const[o,a]of oG(r)){const c=o.toLowerCase();i.has(c)||(t.delete(o),i.add(c)),a===null?(t.delete(o),n.add(c)):(t.append(o,a),n.delete(c))}}return{[k3]:!0,values:t,nulls:n}};const M1=e=>{var t,n,r,i,o,a;if(typeof globalThis.process<"u")return(r=(n=(t=R7)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(a=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,e))===null||a===void 0?void 0:a.trim()};var M3;class Yp{constructor(t){var n,r,i,o,a,c,f,d=t===void 0?{}:t,{baseURL:m=M1("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=M1("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:b="v1beta"}=d,C=M0(d,["baseURL","apiKey","apiVersion"]);const P=Object.assign(Object.assign({apiKey:v,apiVersion:b},C),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=P.baseURL,this.timeout=(r=P.timeout)!==null&&r!==void 0?r:Yp.DEFAULT_TIMEOUT,this.logger=(i=P.logger)!==null&&i!==void 0?i:console;const N="warn";this.logLevel=N,this.logLevel=(a=(o=$C(P.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:$C(M1("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:N,this.fetchOptions=P.fetchOptions,this.maxRetries=(c=P.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(f=P.fetch)!==null&&f!==void 0?f:j$(),this.encoder=z$,this._options=P,this.apiKey=v,this.apiVersion=b}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){if(this.apiKey!=null)return k1([{"x-goog-api-key":this.apiKey}])}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new no(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${bu}`}defaultIdempotencyKey(){return`stainless-node-retry-${C$()}`}makeStatusError(t,n,r,i){return Xr.generate(t,n,r,i)}buildURL(t,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=T$(t)?new URL(t):new URL(i+(i.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),a=this.defaultQuery();return N$(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(t){}async prepareRequest(t,{url:n,options:r}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:t,path:n},i)))}request(t,n=null){return new kw(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,r){var i,o,a;const c=await t,f=(i=c.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=f),await this.prepareOptions(c);const{req:d,url:m,timeout:v}=await this.buildRequest(c,{retryCount:f-n});await this.prepareRequest(d,{url:m,options:c});const b="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=r===void 0?"":`, retryOf: ${r}`,P=Date.now();if(Wr(this).debug(`[${b}] sending request`,ol({retryOfRequestLogID:r,method:c.method,url:m,options:c,headers:d.headers})),!((o=c.signal)===null||o===void 0)&&o.aborted)throw new Gy;const N=new AbortController,R=await this.fetchWithTimeout(m,d,v,N).catch($y),D=Date.now();if(R instanceof globalThis.Error){const L=`retrying, ${n} attempts remaining`;if(!((a=c.signal)===null||a===void 0)&&a.aborted)throw new Gy;const U=zy(R)||/timed? ?out/i.test(String(R)+("cause"in R?String(R.cause):""));if(n)return Wr(this).info(`[${b}] connection ${U?"timed out":"failed"} - ${L}`),Wr(this).debug(`[${b}] connection ${U?"timed out":"failed"} (${L})`,ol({retryOfRequestLogID:r,url:m,durationMs:D-P,message:R.message})),this.retryRequest(c,n,r??b);throw Wr(this).info(`[${b}] connection ${U?"timed out":"failed"} - error; no more retries left`),Wr(this).debug(`[${b}] connection ${U?"timed out":"failed"} (error; no more retries left)`,ol({retryOfRequestLogID:r,url:m,durationMs:D-P,message:R.message})),U?new g3:new Wp({cause:R})}const F=`[${b}${C}] ${d.method} ${m} ${R.ok?"succeeded":"failed"} with status ${R.status} in ${D-P}ms`;if(!R.ok){const L=await this.shouldRetry(R);if(n&&L){const X=`retrying, ${n} attempts remaining`;return await V$(R.body),Wr(this).info(`${F} - ${X}`),Wr(this).debug(`[${b}] response error (${X})`,ol({retryOfRequestLogID:r,url:R.url,status:R.status,headers:R.headers,durationMs:D-P})),this.retryRequest(c,n,r??b,R.headers)}const U=L?"error; no more retries left":"error; not retryable";Wr(this).info(`${F} - ${U}`);const G=await R.text().catch(X=>$y(X).message),q=k$(G),W=q?void 0:G;throw Wr(this).debug(`[${b}] response error (${U})`,ol({retryOfRequestLogID:r,url:R.url,status:R.status,headers:R.headers,message:W,durationMs:Date.now()-P})),this.makeStatusError(R.status,q,W,R.headers)}return Wr(this).info(F),Wr(this).debug(`[${b}] response start`,ol({retryOfRequestLogID:r,url:R.url,status:R.status,headers:R.headers,durationMs:D-P})),{response:R,options:c,controller:N,requestLogID:b,retryOfRequestLogID:r,startTime:P}}async fetchWithTimeout(t,n,r,i){const o=n||{},{signal:a,method:c}=o,f=M0(o,["signal","method"]);a&&a.addEventListener("abort",()=>i.abort());const d=setTimeout(()=>i.abort(),r),m=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,v=Object.assign(Object.assign(Object.assign({signal:i.signal},m?{duplex:"half"}:{}),{method:"GET"}),f);c&&(v.method=c.toUpperCase());try{return await this.fetch.call(void 0,t,v)}finally{clearTimeout(d)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r,i){var o;let a;const c=i?.get("retry-after-ms");if(c){const d=parseFloat(c);Number.isNaN(d)||(a=d)}const f=i?.get("retry-after");if(f&&!a){const d=parseFloat(f);Number.isNaN(d)?a=Date.parse(f)-Date.now():a=d*1e3}if(!(a&&0<=a&&a<60*1e3)){const d=(o=t.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,d)}return await M$(a),this.makeRequest(t,n-1,r)}calculateDefaultRetryTimeoutMillis(t,n){const o=n-t,a=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return a*c*1e3}async buildRequest(t,{retryCount:n=0}={}){var r,i,o;const a=Object.assign({},t),{method:c,path:f,query:d,defaultBaseURL:m}=a,v=this.buildURL(f,d,m);"timeout"in a&&O$("timeout",a.timeout),a.timeout=(r=a.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:b,body:C}=this.buildBody({options:a}),P=await this.buildHeaders({options:t,method:c,bodyHeaders:b,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:P},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:v,timeout:a.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const a=k1([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),F$()),await this.authHeaders(t),this._options.defaultHeaders,r,t.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const r=k1([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:U$(t)}:this.encoder({body:t,headers:r})}}Yp.DEFAULT_TIMEOUT=6e4;class yr extends Yp{constructor(){super(...arguments),this.interactions=new O3(this)}}M3=yr;yr.GeminiNextGenAPIClient=M3;yr.GeminiNextGenAPIClientError=no;yr.APIError=Xr;yr.APIConnectionError=Wp;yr.APIConnectionTimeoutError=g3;yr.APIUserAbortError=Gy;yr.NotFoundError=w3;yr.ConflictError=b3;yr.RateLimitError=_3;yr.BadRequestError=v3;yr.AuthenticationError=y3;yr.InternalServerError=S3;yr.PermissionDeniedError=x3;yr.UnprocessableEntityError=E3;yr.toFile=W$;yr.Interactions=O3;function sG(e,t){const n={},r=E(e,["name"]);return r!=null&&S(n,["_url","name"],r),n}function aG(e,t){const n={},r=E(e,["name"]);return r!=null&&S(n,["_url","name"],r),n}function lG(e,t){const n={},r=E(e,["sdkHttpResponse"]);return r!=null&&S(n,["sdkHttpResponse"],r),n}function uG(e,t){const n={},r=E(e,["sdkHttpResponse"]);return r!=null&&S(n,["sdkHttpResponse"],r),n}function cG(e,t,n){const r={};if(E(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=E(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&S(t,["displayName"],i),E(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=E(e,["epochCount"]);t!==void 0&&o!=null&&S(t,["tuningTask","hyperparameters","epochCount"],o);const a=E(e,["learningRateMultiplier"]);if(a!=null&&S(r,["tuningTask","hyperparameters","learningRateMultiplier"],a),E(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(E(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(E(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=E(e,["batchSize"]);t!==void 0&&c!=null&&S(t,["tuningTask","hyperparameters","batchSize"],c);const f=E(e,["learningRate"]);if(t!==void 0&&f!=null&&S(t,["tuningTask","hyperparameters","learningRate"],f),E(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(E(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function dG(e,t,n){const r={};let i=E(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const C=E(e,["validationDataset"]);t!==void 0&&C!=null&&S(t,["supervisedTuningSpec"],HC(C))}else if(i==="PREFERENCE_TUNING"){const C=E(e,["validationDataset"]);t!==void 0&&C!=null&&S(t,["preferenceOptimizationSpec"],HC(C))}const o=E(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&S(t,["tunedModelDisplayName"],o);const a=E(e,["description"]);t!==void 0&&a!=null&&S(t,["description"],a);let c=E(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const C=E(e,["epochCount"]);t!==void 0&&C!=null&&S(t,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(c==="PREFERENCE_TUNING"){const C=E(e,["epochCount"]);t!==void 0&&C!=null&&S(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let f=E(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const C=E(e,["learningRateMultiplier"]);t!==void 0&&C!=null&&S(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(f==="PREFERENCE_TUNING"){const C=E(e,["learningRateMultiplier"]);t!==void 0&&C!=null&&S(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let d=E(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=E(e,["exportLastCheckpointOnly"]);t!==void 0&&C!=null&&S(t,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(d==="PREFERENCE_TUNING"){const C=E(e,["exportLastCheckpointOnly"]);t!==void 0&&C!=null&&S(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let m=E(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const C=E(e,["adapterSize"]);t!==void 0&&C!=null&&S(t,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(m==="PREFERENCE_TUNING"){const C=E(e,["adapterSize"]);t!==void 0&&C!=null&&S(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(E(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(E(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=E(e,["labels"]);t!==void 0&&v!=null&&S(t,["labels"],v);const b=E(e,["beta"]);return t!==void 0&&b!=null&&S(t,["preferenceOptimizationSpec","hyperParameters","beta"],b),r}function fG(e,t){const n={},r=E(e,["baseModel"]);r!=null&&S(n,["baseModel"],r);const i=E(e,["preTunedModel"]);i!=null&&S(n,["preTunedModel"],i);const o=E(e,["trainingDataset"]);o!=null&&_G(o);const a=E(e,["config"]);return a!=null&&cG(a,n),n}function hG(e,t){const n={},r=E(e,["baseModel"]);r!=null&&S(n,["baseModel"],r);const i=E(e,["preTunedModel"]);i!=null&&S(n,["preTunedModel"],i);const o=E(e,["trainingDataset"]);o!=null&&SG(o,n,t);const a=E(e,["config"]);return a!=null&&dG(a,n,t),n}function pG(e,t){const n={},r=E(e,["name"]);return r!=null&&S(n,["_url","name"],r),n}function mG(e,t){const n={},r=E(e,["name"]);return r!=null&&S(n,["_url","name"],r),n}function gG(e,t,n){const r={},i=E(e,["pageSize"]);t!==void 0&&i!=null&&S(t,["_query","pageSize"],i);const o=E(e,["pageToken"]);t!==void 0&&o!=null&&S(t,["_query","pageToken"],o);const a=E(e,["filter"]);return t!==void 0&&a!=null&&S(t,["_query","filter"],a),r}function vG(e,t,n){const r={},i=E(e,["pageSize"]);t!==void 0&&i!=null&&S(t,["_query","pageSize"],i);const o=E(e,["pageToken"]);t!==void 0&&o!=null&&S(t,["_query","pageToken"],o);const a=E(e,["filter"]);return t!==void 0&&a!=null&&S(t,["_query","filter"],a),r}function yG(e,t){const n={},r=E(e,["config"]);return r!=null&&gG(r,n),n}function xG(e,t){const n={},r=E(e,["config"]);return r!=null&&vG(r,n),n}function wG(e,t){const n={},r=E(e,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=E(e,["nextPageToken"]);i!=null&&S(n,["nextPageToken"],i);const o=E(e,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>D3(c))),S(n,["tuningJobs"],a)}return n}function bG(e,t){const n={},r=E(e,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=E(e,["nextPageToken"]);i!=null&&S(n,["nextPageToken"],i);const o=E(e,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>Wy(c))),S(n,["tuningJobs"],a)}return n}function EG(e,t){const n={},r=E(e,["name"]);r!=null&&S(n,["model"],r);const i=E(e,["name"]);return i!=null&&S(n,["endpoint"],i),n}function _G(e,t){const n={};if(E(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(E(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=E(e,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),S(n,["examples","examples"],i)}return n}function SG(e,t,n){const r={};let i=E(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const a=E(e,["gcsUri"]);t!==void 0&&a!=null&&S(t,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(i==="PREFERENCE_TUNING"){const a=E(e,["gcsUri"]);t!==void 0&&a!=null&&S(t,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=E(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=E(e,["vertexDatasetResource"]);t!==void 0&&a!=null&&S(t,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=E(e,["vertexDatasetResource"]);t!==void 0&&a!=null&&S(t,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(E(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function D3(e,t){const n={},r=E(e,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=E(e,["name"]);i!=null&&S(n,["name"],i);const o=E(e,["state"]);o!=null&&S(n,["state"],YO(o));const a=E(e,["createTime"]);a!=null&&S(n,["createTime"],a);const c=E(e,["tuningTask","startTime"]);c!=null&&S(n,["startTime"],c);const f=E(e,["tuningTask","completeTime"]);f!=null&&S(n,["endTime"],f);const d=E(e,["updateTime"]);d!=null&&S(n,["updateTime"],d);const m=E(e,["description"]);m!=null&&S(n,["description"],m);const v=E(e,["baseModel"]);v!=null&&S(n,["baseModel"],v);const b=E(e,["_self"]);return b!=null&&S(n,["tunedModel"],EG(b)),n}function Wy(e,t){const n={},r=E(e,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=E(e,["name"]);i!=null&&S(n,["name"],i);const o=E(e,["state"]);o!=null&&S(n,["state"],YO(o));const a=E(e,["createTime"]);a!=null&&S(n,["createTime"],a);const c=E(e,["startTime"]);c!=null&&S(n,["startTime"],c);const f=E(e,["endTime"]);f!=null&&S(n,["endTime"],f);const d=E(e,["updateTime"]);d!=null&&S(n,["updateTime"],d);const m=E(e,["error"]);m!=null&&S(n,["error"],m);const v=E(e,["description"]);v!=null&&S(n,["description"],v);const b=E(e,["baseModel"]);b!=null&&S(n,["baseModel"],b);const C=E(e,["tunedModel"]);C!=null&&S(n,["tunedModel"],C);const P=E(e,["preTunedModel"]);P!=null&&S(n,["preTunedModel"],P);const N=E(e,["supervisedTuningSpec"]);N!=null&&S(n,["supervisedTuningSpec"],N);const R=E(e,["preferenceOptimizationSpec"]);R!=null&&S(n,["preferenceOptimizationSpec"],R);const D=E(e,["tuningDataStats"]);D!=null&&S(n,["tuningDataStats"],D);const F=E(e,["encryptionSpec"]);F!=null&&S(n,["encryptionSpec"],F);const L=E(e,["partnerModelTuningSpec"]);L!=null&&S(n,["partnerModelTuningSpec"],L);const U=E(e,["customBaseModel"]);U!=null&&S(n,["customBaseModel"],U);const G=E(e,["experiment"]);G!=null&&S(n,["experiment"],G);const q=E(e,["labels"]);q!=null&&S(n,["labels"],q);const W=E(e,["outputUri"]);W!=null&&S(n,["outputUri"],W);const Z=E(e,["pipelineJob"]);Z!=null&&S(n,["pipelineJob"],Z);const X=E(e,["serviceAccount"]);X!=null&&S(n,["serviceAccount"],X);const pe=E(e,["tunedModelDisplayName"]);pe!=null&&S(n,["tunedModelDisplayName"],pe);const ae=E(e,["veoTuningSpec"]);return ae!=null&&S(n,["veoTuningSpec"],ae),n}function CG(e,t){const n={},r=E(e,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=E(e,["name"]);i!=null&&S(n,["name"],i);const o=E(e,["metadata"]);o!=null&&S(n,["metadata"],o);const a=E(e,["done"]);a!=null&&S(n,["done"],a);const c=E(e,["error"]);return c!=null&&S(n,["error"],c),n}function HC(e,t){const n={},r=E(e,["gcsUri"]);r!=null&&S(n,["validationDatasetUri"],r);const i=E(e,["vertexDatasetResource"]);return i!=null&&S(n,["validationDatasetUri"],i),n}class AG extends Os{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Rl(_s.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:Dy.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=mG(t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>Wy(m))}else{const d=pG(t);return c=je("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>D3(m))}}async listInternal(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=xG(t);return c=je("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=bG(m),b=new vC;return Object.assign(b,v),b})}else{const d=yG(t);return c=je("tunedModels",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=wG(m),b=new vC;return Object.assign(b,v),b})}}async cancel(t){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=aG(t);return c=je("{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=uG(m),b=new yC;return Object.assign(b,v),b})}else{const d=sG(t);return c=je("{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const v=lG(m),b=new yC;return Object.assign(b,v),b})}}async tuneInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=hG(t,t);return o=je("tuningJobs",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>Wy(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fG(t);return o=je("tunedModels",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),i.then(f=>CG(f))}}}class TG{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const IG=1024*1024*8,PG=3,NG=1e3,RG=2,L0="x-goog-upload-status";async function OG(e,t,n){var r;const i=await L3(e,t,n),o=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[L0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function kG(e,t,n){var r;const i=await L3(e,t,n),o=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[L0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=$O(o),c=new Aw;return Object.assign(c,a),c}async function L3(e,t,n){var r,i;let o=0,a=0,c=new Ly(new Response),f="upload";for(o=e.size;a<o;){const d=Math.min(IG,o-a),m=e.slice(a,a+d);a+d>=o&&(f+=", finalize");let v=0,b=NG;for(;v<PG&&(c=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((r=c?.headers)===null||r===void 0)&&r[L0]));)v++,await DG(b),b=b*RG;if(a+=d,((i=c?.headers)===null||i===void 0?void 0:i[L0])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function MG(e){return{size:e.size,type:e.type}}function DG(e){return new Promise(t=>setTimeout(t,e))}class LG{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await OG(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await kG(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await MG(t)}}class BG{create(t,n,r){return new FG(t,n,r)}}class FG{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const qC="x-goog-api-key";class jG{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(qC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(qC,this.apiKey)}}}const UG="gl-node/";class VG{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new yr({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=D7(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const i=new jG(this.apiKey);this.apiClient=new Mz({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:UG+"web",uploader:new LG,downloader:new TG}),this.models=new Qz(this.apiClient),this.live=new Wz(this.apiClient,i,new BG),this.batches=new cj(this.apiClient),this.chats=new Hj(this.models,this.apiClient),this.caches=new zj(this.apiClient),this.files=new tU(this.apiClient),this.operations=new e$(this.apiClient),this.authTokens=new g$(this.apiClient),this.tunings=new AG(this.apiClient),this.fileSearchStores=new S$(this.apiClient)}}const zG={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GEMINI_API_KEY:"",VITE_SUPABASE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hYmpsaGpsa2VlaGFjenhyZ2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4Mzg5MDMsImV4cCI6MjA4MTQxNDkwM30.eHuUAZMQ9eGffxCwYwOczhzZuRksv41QoUaIulebpT4",VITE_SUPABASE_URL:"https://mabjlhjlkeehaczxrgcy.supabase.co"},$G=()=>{},WC=$G();let Ky=null;if(WC)try{Ky=new VG({apiKey:WC})}catch(e){console.error("Error initializing Gemini:",e)}else console.warn("VITE_GEMINI_API_KEY no encontrada. El chat funcionar en modo DEMO.");const GG=async(e,t)=>{if(!Ky)return await new Promise(o=>setTimeout(o,800)),e.toLowerCase().includes("precio")||e.toLowerCase().includes("valor")?"Nuestros cortes parten desde $19.990. Los decants de perfumes tienen precios variados, por ejemplo Good Girl 5ml a $8.990. Te gustara ver el catlogo completo?":e.toLowerCase().includes("domicilio")||e.toLowerCase().includes("casa")?"S! Vamos a tu domicilio en Santiago Centro y uoa por un recargo de $3.000 adicional. Llevamos todo lo necesario para tu cambio de look.":e.toLowerCase().includes("hola")||e.toLowerCase().includes("buenos")?"Hola! Bienvenid@ a Tus3B Style. Soy tu asistente virtual (Modo Demo). Puedo ayudarte con precios, zonas de cobertura y recomendaciones de perfumes.":"Gracias por tu mensaje. Como estoy en Modo Demo (sin API Key configurada), mis respuestas son limitadas. Te sugiero contactarnos directamente por WhatsApp para una atencin personalizada.";const n=xa.map(o=>`- ID: ${o.id}
     - Marca: ${o.brand}
     - Nombre: ${o.name}
     - Descripcin: ${o.description}
     - Notas Olfativas: ${o.notes.join(", ")}
     - Categora: ${o.category==="arab"?"Perfumera rabe (Tendencia)":"Clsico de Lujo"}
     - Precios: 5ml $${o.price5ml} / 10ml $${o.price10ml} ${o.priceFullBottle?`/ Botella: $${o.priceFullBottle}`:""}
     - STOCK: ${o.stock?"DISPONIBLE (Recomendar)":"AGOTADO (No recomendar como primera opcin)"}
     - Spray: ${o.isSpray?"S, es formato desodorante/body spray":"No, es perfume concentrado"}`).join(`

`),r=dl.map(o=>`- ${o.name}: ${o.description}. Precio: ${o.price}. Incluye: ${o.includes.join(", ")}.`).join(`
`),i=`
    Eres "StyleBot", el asistente experto y vendedor estrella de "Tus3B Style".
    
    Tus objetivos principales:
    1. ASESORAR sobre perfumes basndote en las notas que busca el usuario (ej: dulce, fresco, amaderado).
    2. VENDER servicios de peluquera (Cortes desde $7.000).

    REGLAS DE ORO PARA PERFUMES (SGUELAS SIEMPRE):
    1. **VERIFICAR STOCK**: Antes de recomendar, mira el campo "STOCK".
       - Prioriza SIEMPRE recomendar perfumes con "STOCK: DISPONIBLE".
       - Si el usuario pide algo especfico que est "AGOTADO", avsale pero ofrece inmediatemente una alternativa disponible.
    2. **REGLA DE LAS 2 OPCIONES**: Cuando te pidan una recomendacin, SIEMPRE sugiere exactamente 2 opciones del catlogo que mejor se ajusten.
       - Opcin 1: La mejor coincidencia (Disponible).
       - Opcin 2: Una alternativa interesante o complementaria (Disponible).
    3. **Precios Claros**: Menciona los precios de los decants (5ml y 10ml) en tus recomendaciones.

    Contexto del Catlogo de Perfumes (BASE DE DATOS ACTUALIZADA):
    ${n}

    Contexto de Servicios:
    ${r}

    Tono y Estilo:
    - Eres cercana, experta y entusiasta (usa emojis con moderacin ).
    - Si te preguntan "qu me recomiendas", no des una lista larga. Cntrate en tus 2 mejores cartas.
    - Responde siempre en espaol de Chile.
    - Si preguntan por delivery/domicilio: $3.000 recargo en Stgo Centro y uoa.
  `;try{return(await Ky.models.generateContent({model:"gemini-1.5-flash",contents:[{role:"user",parts:[{text:i+`

 Historial de chat:
`+t.join(`
`)+`

Usuario: `+e}]}]})).text||"Lo siento, no pude procesar tu solicitud."}catch(o){return console.error("Error calling Gemini:",o),"Hubo un error al conectar con el asistente. Por favor intenta ms tarde."}},HG=()=>{const[e,t]=k.useState(!1),[n,r]=k.useState([{role:"bot",text:"Hola! Soy tu asistente de estilo. Buscas un perfume especial o tienes dudas sobre el corte a domicilio?"}]),[i,o]=k.useState(""),[a,c]=k.useState(!1),f=k.useRef(null),d=()=>{f.current?.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{d()},[n,e]);const m=async()=>{if(!i.trim()||a)return;const b=i;r(N=>[...N,{role:"user",text:b}]),o(""),c(!0);const C=n.map(N=>`${N.role==="user"?"Usuario":"Bot"}: ${N.text}`),P=await GG(b,C);r(N=>[...N,{role:"bot",text:P}]),c(!1)},v=b=>{b.key==="Enter"&&m()};return I.jsxs(I.Fragment,{children:[I.jsx("button",{onClick:()=>t(!e),className:`fixed bottom-6 right-6 z-50 p-4 rounded-full shadow-2xl transition-all duration-300 hover:scale-110 flex items-center justify-center ${e?"bg-stone-800 rotate-90":"bg-stone-900 rotate-0"}`,children:e?I.jsx(Wd,{color:"white"}):I.jsx(Lu,{color:"white"})}),e&&I.jsxs("div",{className:"fixed bottom-24 right-6 w-80 sm:w-96 bg-white rounded-2xl shadow-2xl border border-stone-200 z-50 flex flex-col overflow-hidden animate-in slide-in-from-bottom-10 fade-in duration-300 h-[500px]",children:[I.jsxs("div",{className:"bg-stone-900 p-4 flex items-center space-x-3",children:[I.jsx("div",{className:"bg-stone-700 p-2 rounded-full",children:I.jsx(Lu,{size:16,className:"text-yellow-400"})}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-white font-serif font-bold",children:"Asistente Tus3B"}),I.jsx("p",{className:"text-stone-400 text-xs",children:"Te ayudo a elegir tu estilo"})]})]}),I.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-stone-50",children:[n.map((b,C)=>I.jsx("div",{className:`flex ${b.role==="user"?"justify-end":"justify-start"}`,children:I.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-sm ${b.role==="user"?"bg-stone-800 text-white rounded-br-none":"bg-white text-stone-800 border border-stone-200 rounded-bl-none shadow-sm"}`,children:b.text})},C)),a&&I.jsx("div",{className:"flex justify-start",children:I.jsxs("div",{className:"bg-white p-3 rounded-2xl rounded-bl-none border border-stone-200 shadow-sm flex items-center space-x-2",children:[I.jsx(Cd,{size:16,className:"animate-spin text-stone-400"}),I.jsx("span",{className:"text-xs text-stone-400",children:"Escribiendo..."})]})}),I.jsx("div",{ref:f})]}),I.jsxs("div",{className:"p-3 bg-white border-t border-stone-100 flex items-center gap-2",children:[I.jsx("input",{type:"text",value:i,onChange:b=>o(b.target.value),onKeyDown:v,placeholder:"Pregunta por perfumes o cortes...",className:"flex-1 text-sm border-none focus:ring-0 bg-stone-100 rounded-full px-4 py-2 text-stone-800 placeholder-stone-400"}),I.jsx("button",{onClick:m,disabled:a||!i.trim(),className:"p-2 bg-stone-900 text-white rounded-full hover:bg-stone-700 disabled:opacity-50 transition",children:I.jsx(ER,{size:16})})]})]})]})},qG=({isHomeService:e,onGoHome:t,onGoCatalog:n})=>(k.useEffect(()=>{window.scrollTo(0,0)},[]),I.jsx("div",{className:"min-h-[70vh] flex items-center justify-center p-4 fade-in",children:I.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-3xl shadow-2xl border border-stone-100 max-w-2xl w-full text-center relative overflow-hidden",children:[I.jsx("div",{className:"absolute -top-20 -right-20 w-64 h-64 bg-green-50 rounded-full opacity-50 blur-3xl pointer-events-none"}),I.jsx("div",{className:"absolute -bottom-20 -left-20 w-64 h-64 bg-amber-50 rounded-full opacity-50 blur-3xl pointer-events-none"}),I.jsxs("div",{className:"relative z-10",children:[I.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 text-green-600 rounded-full mb-6 shadow-sm animate-in zoom-in spin-in-12 duration-700",children:I.jsx(xR,{size:40,strokeWidth:2.5})}),I.jsx("h2",{className:"serif text-4xl text-stone-900 mb-3",children:"Reserva Confirmada!"}),I.jsx("p",{className:"text-xl text-stone-600 font-light mb-8",children:"Gracias por tu confianza!"}),!e&&I.jsxs("div",{className:"bg-stone-50 p-6 rounded-2xl mb-8 border border-stone-100 transform transition hover:scale-105 duration-300",children:[I.jsxs("h3",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-3 flex items-center justify-center gap-2",children:[I.jsx(wR,{size:14})," Direccin del Servicio"]}),I.jsx("p",{className:"text-xl font-medium text-stone-800",children:"Diagonal Vicua Mackenna 2004"}),I.jsx("p",{className:"text-lg text-stone-600",children:"Torre B, Santiago"})]}),I.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-8",children:[I.jsxs("button",{onClick:t,className:"flex items-center justify-center gap-2 px-8 py-4 bg-stone-100 text-stone-700 rounded-xl font-bold hover:bg-stone-200 transition-colors w-full sm:w-auto",children:[I.jsx(HL,{size:20}),"Regresar al Inicio"]}),I.jsxs("button",{onClick:n,className:"flex items-center justify-center gap-2 px-8 py-4 bg-stone-900 text-white rounded-xl font-bold hover:bg-stone-800 transition-transform hover:-translate-y-1 shadow-lg w-full sm:w-auto",children:[I.jsx(Ad,{size:20}),I.jsxs("span",{children:["Venta de Perfumes ",I.jsx("span",{className:"block text-[10px] font-normal opacity-80 leading-none mt-0.5",children:"Formatos 5ml y 10ml"})]})]})]})]})]})})),WG=()=>I.jsx("section",{className:"py-24 bg-white",children:I.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[I.jsxs("div",{className:"text-center mb-16",children:[I.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Testimonios"}),I.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Lo que dicen nuestras clientas"})]}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:mB.map(e=>I.jsxs("div",{className:"bg-stone-50 p-8 rounded-sm hover:shadow-lg transition-shadow duration-300 relative",children:[I.jsx(QL,{className:"absolute top-6 right-6 text-stone-200",size:40}),I.jsx("div",{className:"flex space-x-1 mb-4 text-amber-500",children:[...Array(5)].map((t,n)=>I.jsx(_R,{size:16,fill:n<e.rating?"currentColor":"none",className:n<e.rating?"text-amber-500":"text-stone-300"},n))}),I.jsxs("p",{className:"text-stone-600 italic mb-6 leading-relaxed relative z-10",children:['"',e.comment,'"']}),I.jsxs("div",{className:"flex justify-between items-end border-t border-stone-200 pt-4",children:[I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-stone-900",children:e.name}),I.jsx("span",{className:"text-xs text-stone-400 font-medium",children:"Cliente Verificado"})]}),I.jsx("span",{className:"text-xs text-stone-400",children:e.date})]})]},e.id))})]})});var KG=Object.defineProperty,B0=Object.getOwnPropertySymbols,B3=Object.prototype.hasOwnProperty,F3=Object.prototype.propertyIsEnumerable,KC=(e,t,n)=>t in e?KG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yy=(e,t)=>{for(var n in t||(t={}))B3.call(t,n)&&KC(e,n,t[n]);if(B0)for(var n of B0(t))F3.call(t,n)&&KC(e,n,t[n]);return e},Xy=(e,t)=>{var n={};for(var r in e)B3.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&B0)for(var r of B0(e))t.indexOf(r)<0&&F3.call(e,r)&&(n[r]=e[r]);return n};var wl;(e=>{const t=class Ct{constructor(f,d,m,v){if(this.version=f,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],f<Ct.MIN_VERSION||f>Ct.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=f*4+17;let b=[];for(let P=0;P<this.size;P++)b.push(!1);for(let P=0;P<this.size;P++)this.modules.push(b.slice()),this.isFunction.push(b.slice());this.drawFunctionPatterns();const C=this.addEccAndInterleave(m);if(this.drawCodewords(C),v==-1){let P=1e9;for(let N=0;N<8;N++){this.applyMask(N),this.drawFormatBits(N);const R=this.getPenaltyScore();R<P&&(v=N,P=R),this.applyMask(N)}}i(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(f,d){const m=e.QrSegment.makeSegments(f);return Ct.encodeSegments(m,d)}static encodeBinary(f,d){const m=e.QrSegment.makeBytes(f);return Ct.encodeSegments([m],d)}static encodeSegments(f,d,m=1,v=40,b=-1,C=!0){if(!(Ct.MIN_VERSION<=m&&m<=v&&v<=Ct.MAX_VERSION)||b<-1||b>7)throw new RangeError("Invalid value");let P,N;for(P=m;;P++){const L=Ct.getNumDataCodewords(P,d)*8,U=a.getTotalBits(f,P);if(U<=L){N=U;break}if(P>=v)throw new RangeError("Data too long")}for(const L of[Ct.Ecc.MEDIUM,Ct.Ecc.QUARTILE,Ct.Ecc.HIGH])C&&N<=Ct.getNumDataCodewords(P,L)*8&&(d=L);let R=[];for(const L of f){n(L.mode.modeBits,4,R),n(L.numChars,L.mode.numCharCountBits(P),R);for(const U of L.getData())R.push(U)}i(R.length==N);const D=Ct.getNumDataCodewords(P,d)*8;i(R.length<=D),n(0,Math.min(4,D-R.length),R),n(0,(8-R.length%8)%8,R),i(R.length%8==0);for(let L=236;R.length<D;L^=253)n(L,8,R);let F=[];for(;F.length*8<R.length;)F.push(0);return R.forEach((L,U)=>F[U>>>3]|=L<<7-(U&7)),new Ct(P,d,F,b)}getModule(f,d){return 0<=f&&f<this.size&&0<=d&&d<this.size&&this.modules[d][f]}getModules(){return this.modules}drawFunctionPatterns(){for(let m=0;m<this.size;m++)this.setFunctionModule(6,m,m%2==0),this.setFunctionModule(m,6,m%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const f=this.getAlignmentPatternPositions(),d=f.length;for(let m=0;m<d;m++)for(let v=0;v<d;v++)m==0&&v==0||m==0&&v==d-1||m==d-1&&v==0||this.drawAlignmentPattern(f[m],f[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(f){const d=this.errorCorrectionLevel.formatBits<<3|f;let m=d;for(let b=0;b<10;b++)m=m<<1^(m>>>9)*1335;const v=(d<<10|m)^21522;i(v>>>15==0);for(let b=0;b<=5;b++)this.setFunctionModule(8,b,r(v,b));this.setFunctionModule(8,7,r(v,6)),this.setFunctionModule(8,8,r(v,7)),this.setFunctionModule(7,8,r(v,8));for(let b=9;b<15;b++)this.setFunctionModule(14-b,8,r(v,b));for(let b=0;b<8;b++)this.setFunctionModule(this.size-1-b,8,r(v,b));for(let b=8;b<15;b++)this.setFunctionModule(8,this.size-15+b,r(v,b));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let f=this.version;for(let m=0;m<12;m++)f=f<<1^(f>>>11)*7973;const d=this.version<<12|f;i(d>>>18==0);for(let m=0;m<18;m++){const v=r(d,m),b=this.size-11+m%3,C=Math.floor(m/3);this.setFunctionModule(b,C,v),this.setFunctionModule(C,b,v)}}drawFinderPattern(f,d){for(let m=-4;m<=4;m++)for(let v=-4;v<=4;v++){const b=Math.max(Math.abs(v),Math.abs(m)),C=f+v,P=d+m;0<=C&&C<this.size&&0<=P&&P<this.size&&this.setFunctionModule(C,P,b!=2&&b!=4)}}drawAlignmentPattern(f,d){for(let m=-2;m<=2;m++)for(let v=-2;v<=2;v++)this.setFunctionModule(f+v,d+m,Math.max(Math.abs(v),Math.abs(m))!=1)}setFunctionModule(f,d,m){this.modules[d][f]=m,this.isFunction[d][f]=!0}addEccAndInterleave(f){const d=this.version,m=this.errorCorrectionLevel;if(f.length!=Ct.getNumDataCodewords(d,m))throw new RangeError("Invalid argument");const v=Ct.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d],b=Ct.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d],C=Math.floor(Ct.getNumRawDataModules(d)/8),P=v-C%v,N=Math.floor(C/v);let R=[];const D=Ct.reedSolomonComputeDivisor(b);for(let L=0,U=0;L<v;L++){let G=f.slice(U,U+N-b+(L<P?0:1));U+=G.length;const q=Ct.reedSolomonComputeRemainder(G,D);L<P&&G.push(0),R.push(G.concat(q))}let F=[];for(let L=0;L<R[0].length;L++)R.forEach((U,G)=>{(L!=N-b||G>=P)&&F.push(U[L])});return i(F.length==C),F}drawCodewords(f){if(f.length!=Math.floor(Ct.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let m=this.size-1;m>=1;m-=2){m==6&&(m=5);for(let v=0;v<this.size;v++)for(let b=0;b<2;b++){const C=m-b,N=(m+1&2)==0?this.size-1-v:v;!this.isFunction[N][C]&&d<f.length*8&&(this.modules[N][C]=r(f[d>>>3],7-(d&7)),d++)}}i(d==f.length*8)}applyMask(f){if(f<0||f>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let m=0;m<this.size;m++){let v;switch(f){case 0:v=(m+d)%2==0;break;case 1:v=d%2==0;break;case 2:v=m%3==0;break;case 3:v=(m+d)%3==0;break;case 4:v=(Math.floor(m/3)+Math.floor(d/2))%2==0;break;case 5:v=m*d%2+m*d%3==0;break;case 6:v=(m*d%2+m*d%3)%2==0;break;case 7:v=((m+d)%2+m*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][m]&&v&&(this.modules[d][m]=!this.modules[d][m])}}getPenaltyScore(){let f=0;for(let b=0;b<this.size;b++){let C=!1,P=0,N=[0,0,0,0,0,0,0];for(let R=0;R<this.size;R++)this.modules[b][R]==C?(P++,P==5?f+=Ct.PENALTY_N1:P>5&&f++):(this.finderPenaltyAddHistory(P,N),C||(f+=this.finderPenaltyCountPatterns(N)*Ct.PENALTY_N3),C=this.modules[b][R],P=1);f+=this.finderPenaltyTerminateAndCount(C,P,N)*Ct.PENALTY_N3}for(let b=0;b<this.size;b++){let C=!1,P=0,N=[0,0,0,0,0,0,0];for(let R=0;R<this.size;R++)this.modules[R][b]==C?(P++,P==5?f+=Ct.PENALTY_N1:P>5&&f++):(this.finderPenaltyAddHistory(P,N),C||(f+=this.finderPenaltyCountPatterns(N)*Ct.PENALTY_N3),C=this.modules[R][b],P=1);f+=this.finderPenaltyTerminateAndCount(C,P,N)*Ct.PENALTY_N3}for(let b=0;b<this.size-1;b++)for(let C=0;C<this.size-1;C++){const P=this.modules[b][C];P==this.modules[b][C+1]&&P==this.modules[b+1][C]&&P==this.modules[b+1][C+1]&&(f+=Ct.PENALTY_N2)}let d=0;for(const b of this.modules)d=b.reduce((C,P)=>C+(P?1:0),d);const m=this.size*this.size,v=Math.ceil(Math.abs(d*20-m*10)/m)-1;return i(0<=v&&v<=9),f+=v*Ct.PENALTY_N4,i(0<=f&&f<=2568888),f}getAlignmentPatternPositions(){if(this.version==1)return[];{const f=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(f*2-2))*2;let m=[6];for(let v=this.size-7;m.length<f;v-=d)m.splice(1,0,v);return m}}static getNumRawDataModules(f){if(f<Ct.MIN_VERSION||f>Ct.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*f+128)*f+64;if(f>=2){const m=Math.floor(f/7)+2;d-=(25*m-10)*m-55,f>=7&&(d-=36)}return i(208<=d&&d<=29648),d}static getNumDataCodewords(f,d){return Math.floor(Ct.getNumRawDataModules(f)/8)-Ct.ECC_CODEWORDS_PER_BLOCK[d.ordinal][f]*Ct.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][f]}static reedSolomonComputeDivisor(f){if(f<1||f>255)throw new RangeError("Degree out of range");let d=[];for(let v=0;v<f-1;v++)d.push(0);d.push(1);let m=1;for(let v=0;v<f;v++){for(let b=0;b<d.length;b++)d[b]=Ct.reedSolomonMultiply(d[b],m),b+1<d.length&&(d[b]^=d[b+1]);m=Ct.reedSolomonMultiply(m,2)}return d}static reedSolomonComputeRemainder(f,d){let m=d.map(v=>0);for(const v of f){const b=v^m.shift();m.push(0),d.forEach((C,P)=>m[P]^=Ct.reedSolomonMultiply(C,b))}return m}static reedSolomonMultiply(f,d){if(f>>>8||d>>>8)throw new RangeError("Byte out of range");let m=0;for(let v=7;v>=0;v--)m=m<<1^(m>>>7)*285,m^=(d>>>v&1)*f;return i(m>>>8==0),m}finderPenaltyCountPatterns(f){const d=f[1];i(d<=this.size*3);const m=d>0&&f[2]==d&&f[3]==d*3&&f[4]==d&&f[5]==d;return(m&&f[0]>=d*4&&f[6]>=d?1:0)+(m&&f[6]>=d*4&&f[0]>=d?1:0)}finderPenaltyTerminateAndCount(f,d,m){return f&&(this.finderPenaltyAddHistory(d,m),d=0),d+=this.size,this.finderPenaltyAddHistory(d,m),this.finderPenaltyCountPatterns(m)}finderPenaltyAddHistory(f,d){d[0]==0&&(f+=this.size),d.pop(),d.unshift(f)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(c,f,d){if(f<0||f>31||c>>>f)throw new RangeError("Value out of range");for(let m=f-1;m>=0;m--)d.push(c>>>m&1)}function r(c,f){return(c>>>f&1)!=0}function i(c){if(!c)throw new Error("Assertion error")}const o=class Nn{constructor(f,d,m){if(this.mode=f,this.numChars=d,this.bitData=m,d<0)throw new RangeError("Invalid argument");this.bitData=m.slice()}static makeBytes(f){let d=[];for(const m of f)n(m,8,d);return new Nn(Nn.Mode.BYTE,f.length,d)}static makeNumeric(f){if(!Nn.isNumeric(f))throw new RangeError("String contains non-numeric characters");let d=[];for(let m=0;m<f.length;){const v=Math.min(f.length-m,3);n(parseInt(f.substring(m,m+v),10),v*3+1,d),m+=v}return new Nn(Nn.Mode.NUMERIC,f.length,d)}static makeAlphanumeric(f){if(!Nn.isAlphanumeric(f))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],m;for(m=0;m+2<=f.length;m+=2){let v=Nn.ALPHANUMERIC_CHARSET.indexOf(f.charAt(m))*45;v+=Nn.ALPHANUMERIC_CHARSET.indexOf(f.charAt(m+1)),n(v,11,d)}return m<f.length&&n(Nn.ALPHANUMERIC_CHARSET.indexOf(f.charAt(m)),6,d),new Nn(Nn.Mode.ALPHANUMERIC,f.length,d)}static makeSegments(f){return f==""?[]:Nn.isNumeric(f)?[Nn.makeNumeric(f)]:Nn.isAlphanumeric(f)?[Nn.makeAlphanumeric(f)]:[Nn.makeBytes(Nn.toUtf8ByteArray(f))]}static makeEci(f){let d=[];if(f<0)throw new RangeError("ECI assignment value out of range");if(f<128)n(f,8,d);else if(f<16384)n(2,2,d),n(f,14,d);else if(f<1e6)n(6,3,d),n(f,21,d);else throw new RangeError("ECI assignment value out of range");return new Nn(Nn.Mode.ECI,0,d)}static isNumeric(f){return Nn.NUMERIC_REGEX.test(f)}static isAlphanumeric(f){return Nn.ALPHANUMERIC_REGEX.test(f)}getData(){return this.bitData.slice()}static getTotalBits(f,d){let m=0;for(const v of f){const b=v.mode.numCharCountBits(d);if(v.numChars>=1<<b)return 1/0;m+=4+b+v.bitData.length}return m}static toUtf8ByteArray(f){f=encodeURI(f);let d=[];for(let m=0;m<f.length;m++)f.charAt(m)!="%"?d.push(f.charCodeAt(m)):(d.push(parseInt(f.substring(m+1,m+3),16)),m+=2);return d}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=o;e.QrSegment=o})(wl||(wl={}));(e=>{(t=>{const n=class{constructor(i,o){this.ordinal=i,this.formatBits=o}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(wl||(wl={}));(e=>{(t=>{const n=class{constructor(i,o){this.modeBits=i,this.numBitsCharCount=o}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(wl||(wl={}));var Cu=wl;var YG={L:Cu.QrCode.Ecc.LOW,M:Cu.QrCode.Ecc.MEDIUM,Q:Cu.QrCode.Ecc.QUARTILE,H:Cu.QrCode.Ecc.HIGH},j3=128,U3="L",V3="#FFFFFF",z3="#000000",$3=!1,G3=1,XG=4,JG=0,ZG=.1;function H3(e,t=0){const n=[];return e.forEach(function(r,i){let o=null;r.forEach(function(a,c){if(!a&&o!==null){n.push(`M${o+t} ${i+t}h${c-o}v1H${o+t}z`),o=null;return}if(c===r.length-1){if(!a)return;o===null?n.push(`M${c+t},${i+t} h1v1H${c+t}z`):n.push(`M${o+t},${i+t} h${c+1-o}v1H${o+t}z`);return}a&&o===null&&(o=c)})}),n.join("")}function q3(e,t){return e.slice().map((n,r)=>r<t.y||r>=t.y+t.h?n:n.map((i,o)=>o<t.x||o>=t.x+t.w?i:!1))}function QG(e,t,n,r){if(r==null)return null;const i=e.length+n*2,o=Math.floor(t*ZG),a=i/t,c=(r.width||o)*a,f=(r.height||o)*a,d=r.x==null?e.length/2-c/2:r.x*a,m=r.y==null?e.length/2-f/2:r.y*a,v=r.opacity==null?1:r.opacity;let b=null;if(r.excavate){let P=Math.floor(d),N=Math.floor(m),R=Math.ceil(c+d-P),D=Math.ceil(f+m-N);b={x:P,y:N,w:R,h:D}}const C=r.crossOrigin;return{x:d,y:m,h:f,w:c,excavation:b,opacity:v,crossOrigin:C}}function eH(e,t){return t!=null?Math.max(Math.floor(t),0):e?XG:JG}function W3({value:e,level:t,minVersion:n,includeMargin:r,marginSize:i,imageSettings:o,size:a,boostLevel:c}){let f=mn.useMemo(()=>{const P=(Array.isArray(e)?e:[e]).reduce((N,R)=>(N.push(...Cu.QrSegment.makeSegments(R)),N),[]);return Cu.QrCode.encodeSegments(P,YG[t],n,void 0,void 0,c)},[e,t,n,c]);const{cells:d,margin:m,numCells:v,calculatedImageSettings:b}=mn.useMemo(()=>{let C=f.getModules();const P=eH(r,i),N=C.length+P*2,R=QG(C,a,P,o);return{cells:C,margin:P,numCells:N,calculatedImageSettings:R}},[f,a,o,r,i]);return{qrcode:f,margin:m,cells:d,numCells:v,calculatedImageSettings:b}}var tH=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),nH=mn.forwardRef(function(t,n){const r=t,{value:i,size:o=j3,level:a=U3,bgColor:c=V3,fgColor:f=z3,includeMargin:d=$3,minVersion:m=G3,boostLevel:v,marginSize:b,imageSettings:C}=r,N=Xy(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:R}=N,D=Xy(N,["style"]),F=C?.src,L=mn.useRef(null),U=mn.useRef(null),G=mn.useCallback(me=>{L.current=me,typeof n=="function"?n(me):n&&(n.current=me)},[n]),[q,W]=mn.useState(!1),{margin:Z,cells:X,numCells:pe,calculatedImageSettings:ae}=W3({value:i,level:a,minVersion:m,boostLevel:v,includeMargin:d,marginSize:b,imageSettings:C,size:o});mn.useEffect(()=>{if(L.current!=null){const me=L.current,te=me.getContext("2d");if(!te)return;let Oe=X;const se=U.current,ve=ae!=null&&se!==null&&se.complete&&se.naturalHeight!==0&&se.naturalWidth!==0;ve&&ae.excavation!=null&&(Oe=q3(X,ae.excavation));const Ee=window.devicePixelRatio||1;me.height=me.width=o*Ee;const Se=o/pe*Ee;te.scale(Se,Se),te.fillStyle=c,te.fillRect(0,0,pe,pe),te.fillStyle=f,tH?te.fill(new Path2D(H3(Oe,Z))):X.forEach(function(ne,he){ne.forEach(function(Be,Fe){Be&&te.fillRect(Fe+Z,he+Z,1,1)})}),ae&&(te.globalAlpha=ae.opacity),ve&&te.drawImage(se,ae.x+Z,ae.y+Z,ae.w,ae.h)}}),mn.useEffect(()=>{W(!1)},[F]);const le=Yy({height:o,width:o},R);let be=null;return F!=null&&(be=mn.createElement("img",{src:F,key:F,style:{display:"none"},onLoad:()=>{W(!0)},ref:U,crossOrigin:ae?.crossOrigin})),mn.createElement(mn.Fragment,null,mn.createElement("canvas",Yy({style:le,height:o,width:o,ref:G,role:"img"},D)),be)});nH.displayName="QRCodeCanvas";var K3=mn.forwardRef(function(t,n){const r=t,{value:i,size:o=j3,level:a=U3,bgColor:c=V3,fgColor:f=z3,includeMargin:d=$3,minVersion:m=G3,boostLevel:v,title:b,marginSize:C,imageSettings:P}=r,N=Xy(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:R,cells:D,numCells:F,calculatedImageSettings:L}=W3({value:i,level:a,minVersion:m,boostLevel:v,includeMargin:d,marginSize:C,imageSettings:P,size:o});let U=D,G=null;P!=null&&L!=null&&(L.excavation!=null&&(U=q3(D,L.excavation)),G=mn.createElement("image",{href:P.src,height:L.h,width:L.w,x:L.x+R,y:L.y+R,preserveAspectRatio:"none",opacity:L.opacity,crossOrigin:L.crossOrigin}));const q=H3(U,R);return mn.createElement("svg",Yy({height:o,width:o,viewBox:`0 0 ${F} ${F}`,ref:n,role:"img"},N),!!b&&mn.createElement("title",null,b),mn.createElement("path",{fill:c,d:`M0,0 h${F}v${F}H0z`,shapeRendering:"crispEdges"}),mn.createElement("path",{fill:f,d:q,shapeRendering:"crispEdges"}),G)});K3.displayName="QRCodeSVG";const rH=({clientName:e,token:t,visits:n,nextReward:r,tier:i="Bronce"})=>{const[o,a]=k.useState(!1),f=(m=>{switch(m==="Silver"&&(m="Bronce"),m){case"Gold":return{name:"NIVEL GOLD",bgGradient:"bg-gradient-to-br from-amber-500 to-yellow-600",stampColor:"bg-amber-100 text-amber-700",benefit:"30% OFF"};case"Plata":return{name:"NIVEL PLATA",bgGradient:"bg-gradient-to-br from-slate-400 to-stone-400",stampColor:"bg-slate-50 text-slate-900",benefit:"15% OFF"};case"Bronce":default:return{name:"NIVEL BRONCE",bgGradient:"bg-gradient-to-br from-stone-800 to-stone-950",stampColor:"bg-white text-stone-950",benefit:"5% OFF"}}})(i||"Bronce");return I.jsxs("div",{className:"w-full max-w-sm mx-auto perspective-1000 group cursor-pointer",onClick:()=>a(!o),children:[I.jsxs("div",{className:`relative transition-transform duration-700 preserve-3d ${o?"rotate-y-180":""}`,children:[I.jsxs("div",{className:"backface-hidden w-full bg-stone-950 rounded-[24px] overflow-hidden shadow-2xl flex flex-col relative h-[560px] border border-stone-800",children:[I.jsxs("div",{className:"p-6 pb-2 flex justify-between items-start z-10",children:[I.jsxs("div",{children:[I.jsxs("h2",{className:"font-serif italic text-2xl text-white tracking-tight",children:["Tus3B ",I.jsx("span",{className:"text-amber-500",children:"Style"})]}),I.jsx("span",{className:"text-[9px] uppercase tracking-[0.3em] text-stone-400 font-bold block mt-1",children:f.name})]}),I.jsxs("div",{className:"text-right",children:[I.jsx("p",{className:"text-[10px] text-stone-500 uppercase font-bold mb-0.5",children:"Cliente"}),I.jsx("p",{className:"text-white font-bold text-lg leading-none",children:e.split(" ")[0]})]})]}),I.jsxs("div",{className:"px-6 py-4 z-10",children:[I.jsx("div",{className:"grid grid-cols-5 gap-3 mb-2",children:[...Array(10)].map((m,v)=>I.jsx("div",{className:`aspect-square rounded-full flex items-center justify-center border-2 transition-all duration-500 ${v<n?"bg-white border-white scale-100 shadow-[0_0_10px_rgba(255,255,255,0.5)]":"bg-stone-900/50 border-stone-700 scale-90"}`,children:v<n&&I.jsx(u0,{size:20,className:"text-stone-950 stroke-[4]"})},v))}),I.jsxs("div",{className:"flex justify-between text-[10px] text-stone-500 font-mono mt-2 px-1",children:[I.jsx("span",{className:n>=5?"text-slate-400 font-bold":"",children:"PLATA (5)"}),I.jsx("span",{className:n>=10?"text-amber-500 font-bold":"",children:"GOLD (10)"})]})]}),I.jsxs("div",{className:"px-8 py-2 flex justify-between items-center z-10 mt-2",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-[10px] uppercase font-bold text-stone-400 tracking-wider mb-1",children:"Total Servicios"}),I.jsx("p",{className:"text-4xl font-black text-white",children:n})]}),I.jsx("div",{className:"w-px h-10 bg-stone-800"}),I.jsxs("div",{className:"text-right",children:[I.jsx("p",{className:"text-[10px] uppercase font-bold text-stone-400 tracking-wider mb-1",children:"Nivel Actual"}),I.jsx("p",{className:"text-xl font-black text-white",children:i||"Bronce"})]})]}),I.jsxs("div",{className:"flex-grow flex items-center justify-center p-6 relative",children:[I.jsxs("div",{className:"absolute top-0 left-0 w-full flex justify-between items-center",children:[I.jsx("div",{className:"w-6 h-6 bg-[#1c1917] rounded-r-full -ml-3"}),I.jsx("div",{className:"w-full border-t-2 border-dashed border-stone-800 mx-2"}),I.jsx("div",{className:"w-6 h-6 bg-[#1c1917] rounded-l-full -mr-3"})]}),I.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg relative group-hover:scale-105 transition-transform duration-300",children:[I.jsx(K3,{value:t,size:160,level:"M"}),I.jsx("p",{className:"text-center text-[9px] font-mono mt-2 text-stone-500 tracking-widest",children:t})]})]}),I.jsx("div",{className:`absolute top-0 left-0 w-full h-full opacity-20 ${f.bgGradient} z-0`})]}),I.jsxs("div",{className:"absolute top-0 left-0 backface-hidden w-full h-[560px] bg-stone-900 rounded-[24px] shadow-2xl rotate-y-180 p-8 text-white flex flex-col justify-between border border-stone-800",children:[I.jsxs("div",{children:[I.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-white/10 pb-4",children:[I.jsx("h3",{className:"font-serif italic text-2xl",children:"Beneficios"}),I.jsx($L,{className:"text-stone-500"})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:`p-3 rounded-2xl border ${i==="Bronce"?"border-stone-500 bg-stone-800":"border-stone-800 bg-stone-900/50 opacity-50"} flex gap-4 items-center`,children:[I.jsx("div",{className:"w-10 h-10 rounded-full bg-stone-700 flex items-center justify-center font-bold text-stone-400",children:"0"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-stone-300",children:"Nivel Bronce"}),I.jsx("p",{className:"text-[10px] text-stone-500",children:"0 - 4 visitas"}),I.jsx("span",{className:"text-[10px] text-stone-400",children:"5% OFF en productos"})]})]}),I.jsxs("div",{className:`p-3 rounded-2xl border ${i==="Plata"?"border-slate-400 bg-slate-800":"border-stone-800 bg-stone-900/50 opacity-50"} flex gap-4 items-center`,children:[I.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-500 text-white flex items-center justify-center font-bold shadow-lg shadow-slate-500/20",children:"5"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-slate-200",children:"Nivel Plata"}),I.jsx("p",{className:"text-[10px] text-stone-400",children:"5 - 9 visitas"}),I.jsx("span",{className:"text-[10px] text-slate-300 font-bold",children:"15% OFF en servicios"})]})]}),I.jsxs("div",{className:`p-3 rounded-2xl border ${i==="Gold"?"border-amber-500 bg-amber-900/20":"border-stone-800 bg-stone-900/50 opacity-50"} flex gap-4 items-center`,children:[I.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500 text-stone-900 flex items-center justify-center font-bold shadow-lg shadow-amber-500/40",children:"10"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-amber-500",children:"Nivel Gold"}),I.jsx("p",{className:"text-[10px] text-stone-400",children:"10+ visitas"}),I.jsx("span",{className:"text-[10px] text-amber-400 font-bold",children:"30% OFF + VIP"})]})]})]})]}),I.jsx("div",{className:"text-center",children:I.jsx("p",{className:"text-[10px] text-stone-500",children:"Muestra tu cdigo QR para desbloquear niveles."})})]})]}),I.jsx("style",{children:`
                .perspective-1000 { perspective: 1000px; }
                .preserve-3d { transform-style: preserve-3d; }
                .backface-hidden { backface-visibility: hidden; }
                .rotate-y-180 { transform: rotateY(180deg); }
            `})]})},iH=()=>{const[e,t]=k.useState(""),[n,r]=k.useState(!1),[i,o]=k.useState(null),[a,c]=k.useState(!1),[f,d]=k.useState(""),[m,v]=k.useState(""),[b,C]=k.useState(""),P=F=>{let L=F.replace(/[^0-9kK]/g,"").toUpperCase();return L=L.replace("K","0"),L},N=F=>{const L=F.target.value.replace(/[^0-9]/g,"");L.length<=8&&t(L)},R=async F=>{F&&F.preventDefault();const U=new URLSearchParams(window.location.search).get("token");if(!(!U&&e.length<8)){r(!0);try{let G=Ht.from("clients").select("*");U?G=G.eq("member_token",U):G=G.eq("phone","+569"+e);const{data:q,error:W}=await G.single();if(q){const Z=q.visits||0;let X="Bronce";Z>=10?X="Gold":Z>=5&&(X="Plata"),o({name:q.name,visits:Z,referrals:q.referrals,nextReward:Z<5?5:Z<10?10:15,token:q.member_token,tier:X,hair_service_count:q.hair_service_count||0}),c(!1)}else U||c(!0)}catch(G){console.error("Error checking loyalty:",G)}finally{r(!1)}}},D=async F=>{F.preventDefault(),r(!0);try{const L=P(b),U="+569"+e,{data:G,error:q}=await Ht.from("clients").insert([{name:`${f} ${m}`,phone:U,rut:L,visits:0,referrals:0,hair_service_count:0}]).select();if(q)throw q;if(G&&G[0]){const W=G[0];o({name:W.name,visits:0,referrals:0,nextReward:5,token:W.member_token,tier:"Bronce",hair_service_count:0}),c(!1)}}catch(L){console.error("Error registering:",L),alert("No se pudo registrar. Verifica si ya existe el nmero o RUT.")}finally{r(!1)}};return mn.useEffect(()=>{new URLSearchParams(window.location.search).get("token")&&R()},[]),I.jsxs("div",{className:"bg-stone-950 rounded-3xl p-8 text-white relative overflow-hidden shadow-2xl min-h-[600px] flex flex-col items-center",children:[I.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-amber-500/10 rounded-full blur-[80px]"}),I.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsx("span",{className:"text-[10px] uppercase tracking-[0.3em] text-amber-500 font-bold",children:"Bienvenida a tu"}),I.jsx("h3",{className:"serif text-4xl mt-2 text-white",children:"Wallet Clientes"})]}),!i&&!a&&I.jsxs("div",{className:"bg-stone-900/50 backdrop-blur-md p-8 rounded-2xl border border-white/5 shadow-xl",children:[I.jsx("p",{className:"text-stone-400 text-center mb-6 text-sm",children:"Consulta tus puntos, beneficios y acceso a tu tarjeta digital."}),I.jsxs("form",{onSubmit:R,className:"space-y-4",children:[I.jsxs("div",{className:"relative group",children:[I.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-stone-500 font-mono text-lg z-10 pointer-events-none border-r border-stone-800 pr-3 h-6 flex items-center",children:"+569"}),I.jsx("input",{type:"tel",value:e,onChange:N,placeholder:"87654321",maxLength:8,className:"w-full bg-stone-950 border border-stone-800 rounded-xl py-4 pl-[5.5rem] pr-12 text-white placeholder-stone-600 focus:outline-none focus:border-amber-500/50 transition duration-300 font-mono tracking-normal md:tracking-widest text-lg"}),I.jsx(pw,{size:18,className:"absolute right-4 top-1/2 -translate-y-1/2 text-stone-600 group-focus-within:text-amber-500 transition-colors pointer-events-none"})]}),I.jsx("button",{type:"submit",disabled:n||e.length<8,className:"w-full bg-gradient-to-r from-amber-200 to-amber-500 text-stone-900 font-bold py-4 rounded-xl hover:shadow-[0_0_20px_rgba(245,158,11,0.3)] transition-shadow flex justify-center items-center disabled:opacity-50 disabled:cursor-not-allowed",children:n?I.jsx(Cd,{className:"animate-spin"}):"Entrar a mi Wallet"})]})]}),!i&&a&&I.jsxs("div",{className:"bg-stone-900/50 backdrop-blur-md p-8 rounded-2xl border border-amber-500/20 shadow-xl animate-in slide-in-from-right-8",children:[I.jsxs("div",{className:"text-center mb-6",children:[I.jsx("div",{className:"bg-amber-500/20 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3 text-amber-500",children:I.jsx(SR,{size:24})}),I.jsx("h4",{className:"text-xl font-bold text-white",children:"Crear Cuenta"}),I.jsxs("p",{className:"text-stone-400 text-xs mt-1",children:["No encontramos el nmero ",I.jsxs("span",{className:"text-amber-400 font-mono",children:["+569 ",e]}),". Regstrate para acumular puntos."]})]}),I.jsxs("form",{onSubmit:D,className:"space-y-4",children:[I.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[I.jsx("input",{type:"text",placeholder:"Nombre",required:!0,value:f,onChange:F=>d(F.target.value),className:"bg-stone-950 border border-stone-800 rounded-xl px-4 py-3 text-white focus:border-amber-500/50 focus:outline-none"}),I.jsx("input",{type:"text",placeholder:"Apellido",required:!0,value:m,onChange:F=>v(F.target.value),className:"bg-stone-950 border border-stone-800 rounded-xl px-4 py-3 text-white focus:border-amber-500/50 focus:outline-none"})]}),I.jsx("input",{type:"text",placeholder:"RUT (Sin puntos ni guin)",required:!0,value:b,onChange:F=>C(F.target.value),className:"w-full bg-stone-950 border border-stone-800 rounded-xl px-4 py-3 text-white focus:border-amber-500/50 focus:outline-none"}),I.jsx("button",{type:"submit",disabled:n,className:"w-full bg-white text-stone-900 font-bold py-4 rounded-xl hover:bg-stone-100 transition-colors flex justify-center items-center mt-4",children:n?I.jsx(Cd,{className:"animate-spin"}):"Registrarme"}),I.jsx("button",{type:"button",onClick:()=>c(!1),className:"w-full text-stone-500 text-xs hover:text-white transition-colors py-2",children:"Volver / Usar otro nmero"})]})]}),i&&I.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-700",children:[I.jsx("div",{className:"mb-8 transform hover:scale-[1.02] transition-transform duration-500",children:I.jsx(rH,{clientName:i.name||"Miembro Exclusivo",token:i.token||"pending-token",visits:i.visits,nextReward:5,tier:i.tier})}),I.jsxs("div",{className:"text-center space-y-4",children:[I.jsx("p",{className:"text-sm text-stone-400",children:i.visits>=5?" Tienes una recompensa disponible":"Sigue sumando para desbloquear beneficios"}),I.jsx("button",{onClick:()=>{o(null),t(""),c(!1)},className:"text-xs text-stone-500 hover:text-stone-300 transition",children:"Cerrar sesin"})]})]})]})]})},oH=({onLogin:e})=>{const[t,n]=k.useState(""),[r,i]=k.useState(""),[o,a]=k.useState(""),[c,f]=k.useState(!1),d=async m=>{m.preventDefault(),a(""),f(!0);try{const{data:v,error:b}=await Ht.auth.signInWithPassword({email:r,password:t});if(b)throw b;if(!v.user)throw new Error("No user found");const{data:C,error:P}=await Ht.from("profiles").select("role").eq("id",v.user.id).single();if(P)e(r==="jacontulianoc@gmail.com"?"management":"service",r);else{const N=C.role==="admin"?"management":"service";e(N,r)}}catch(v){console.error(v),a(v.message==="Invalid login credentials"?"Credenciales incorrectas":"Error de conexin")}finally{f(!1)}};return I.jsx("div",{className:"flex flex-col items-center justify-center min-h-[50vh] bg-stone-50 p-4",children:I.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-stone-100 max-w-sm w-full text-center",children:[I.jsx(rB,{className:"w-12 h-12 text-stone-900 mx-auto mb-4"}),I.jsx("h2",{className:"text-xl font-bold text-stone-900 mb-6",children:"Acceso Seguro"}),I.jsxs("form",{onSubmit:d,className:"space-y-4",children:[I.jsx("input",{type:"email",value:r,onChange:m=>i(m.target.value),placeholder:"Correo (@tus3b.cl)",className:"w-full px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-stone-900 outline-none"}),I.jsx("input",{type:"password",value:t,onChange:m=>n(m.target.value),placeholder:"Contrasea",className:"w-full px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-stone-900 outline-none"}),o&&I.jsx("p",{className:"text-red-500 text-sm",children:o}),I.jsx("button",{type:"submit",disabled:c,className:"w-full bg-stone-900 text-white py-3 rounded-lg font-bold disabled:bg-stone-500",children:c?"Verificando...":"Ingresar"}),I.jsx("p",{className:"text-xs text-stone-400 mt-4",children:"* Sistema protegido con Supabase Auth"})]})]})})};var $e;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($e||($e={}));var YC=new Map([[$e.QR_CODE,"QR_CODE"],[$e.AZTEC,"AZTEC"],[$e.CODABAR,"CODABAR"],[$e.CODE_39,"CODE_39"],[$e.CODE_93,"CODE_93"],[$e.CODE_128,"CODE_128"],[$e.DATA_MATRIX,"DATA_MATRIX"],[$e.MAXICODE,"MAXICODE"],[$e.ITF,"ITF"],[$e.EAN_13,"EAN_13"],[$e.EAN_8,"EAN_8"],[$e.PDF_417,"PDF_417"],[$e.RSS_14,"RSS_14"],[$e.RSS_EXPANDED,"RSS_EXPANDED"],[$e.UPC_A,"UPC_A"],[$e.UPC_E,"UPC_E"],[$e.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),XC;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(XC||(XC={}));function sH(e){return Object.values($e).includes(e)}var F0;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(F0||(F0={}));var aH=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[F0.SCAN_TYPE_CAMERA,F0.SCAN_TYPE_FILE],e})(),Y3=(function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!YC.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,YC.get(t))},e})(),JC=(function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),Jy;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Jy||(Jy={}));var lH=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Jy.UNKWOWN_ERROR}},e})(),uH=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function hs(e){return typeof e>"u"||e===null}var Au=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),X3=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),a=Object.keys(t),c=0,f=a;c<f.length;c++){var d=f[c];if(o.has(d))return n.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},e})(),yd={exports:{}},cH=yd.exports,ZC;function dH(){return ZC||(ZC=1,(function(e,t){(function(n,r){r(t)})(cH,(function(n){function r(V){return V==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,s){V.__proto__=s}||function(V,s){for(var u in s)s.hasOwnProperty(u)&&(V[u]=s[u])};function o(V,s){i(V,s);function u(){this.constructor=V}V.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}function a(V,s){var u=Object.setPrototypeOf;u?u(V,s):V.__proto__=s}function c(V,s){s===void 0&&(s=V.constructor);var u=Error.captureStackTrace;u&&u(V,s)}var f=(function(V){o(s,V);function s(u){var h=this.constructor,g=V.call(this,u)||this;return Object.defineProperty(g,"name",{value:h.name,enumerable:!1}),a(g,h.prototype),c(g),g}return s})(Error);class d extends f{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}d.kind="Exception";class m extends d{}m.kind="ArgumentException";class v extends d{}v.kind="IllegalArgumentException";class b{constructor(s){if(this.binarizer=s,s===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,u){return this.binarizer.getBlackRow(s,u)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,u,h,g){const y=this.binarizer.getLuminanceSource().crop(s,u,h,g);return new b(this.binarizer.createBinarizer(y))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new b(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new b(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class C extends d{static getChecksumInstance(){return new C}}C.kind="ChecksumException";class P{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class N{static arraycopy(s,u,h,g,y){for(;y--;)h[g++]=s[u++]}static currentTimeMillis(){return Date.now()}}class R extends d{}R.kind="IndexOutOfBoundsException";class D extends R{constructor(s=void 0,u=void 0){super(u),this.index=s,this.message=u}}D.kind="ArrayIndexOutOfBoundsException";class F{static fill(s,u){for(let h=0,g=s.length;h<g;h++)s[h]=u}static fillWithin(s,u,h,g){F.rangeCheck(s.length,u,h);for(let y=u;y<h;y++)s[y]=g}static rangeCheck(s,u,h){if(u>h)throw new v("fromIndex("+u+") > toIndex("+h+")");if(u<0)throw new D(u);if(h>s)throw new D(h)}static asList(...s){return s}static create(s,u,h){return Array.from({length:s}).map(y=>Array.from({length:u}).fill(h))}static createInt32Array(s,u,h){return Array.from({length:s}).map(y=>Int32Array.from({length:u}).fill(h))}static equals(s,u){if(!s||!u||!s.length||!u.length||s.length!==u.length)return!1;for(let h=0,g=s.length;h<g;h++)if(s[h]!==u[h])return!1;return!0}static hashCode(s){if(s===null)return 0;let u=1;for(const h of s)u=31*u+h;return u}static fillUint8Array(s,u){for(let h=0;h!==s.length;h++)s[h]=u}static copyOf(s,u){return s.slice(0,u)}static copyOfUint8Array(s,u){if(s.length<=u){const h=new Uint8Array(u);return h.set(s),h}return s.slice(0,u)}static copyOfRange(s,u,h){const g=h-u,y=new Int32Array(g);return N.arraycopy(s,u,y,0,g),y}static binarySearch(s,u,h){h===void 0&&(h=F.numberComparator);let g=0,y=s.length-1;for(;g<=y;){const x=y+g>>1,_=h(u,s[x]);if(_>0)g=x+1;else if(_<0)y=x-1;else return x}return-g-1}static numberComparator(s,u){return s-u}}class L{static numberOfTrailingZeros(s){let u;if(s===0)return 32;let h=31;return u=s<<16,u!==0&&(h-=16,s=u),u=s<<8,u!==0&&(h-=8,s=u),u=s<<4,u!==0&&(h-=4,s=u),u=s<<2,u!==0&&(h-=2,s=u),h-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let u=1;return s>>>16||(u+=16,s<<=16),s>>>24||(u+=8,s<<=8),s>>>28||(u+=4,s<<=4),s>>>30||(u+=2,s<<=2),u-=s>>>31,u}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,u){return Math.trunc(s/u)}static parseInt(s,u=void 0){return parseInt(s,u)}}L.MIN_VALUE_32_BITS=-2147483648,L.MAX_VALUE=Number.MAX_SAFE_INTEGER;class U{constructor(s,u){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,u==null?this.bits=U.makeArray(s):this.bits=u)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const u=U.makeArray(s);N.arraycopy(this.bits,0,u,0,this.bits.length),this.bits=u}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const u=this.size;if(s>=u)return u;const h=this.bits;let g=Math.floor(s/32),y=h[g];y&=~((1<<(s&31))-1);const x=h.length;for(;y===0;){if(++g===x)return u;y=h[g]}const _=g*32+L.numberOfTrailingZeros(y);return _>u?u:_}getNextUnset(s){const u=this.size;if(s>=u)return u;const h=this.bits;let g=Math.floor(s/32),y=~h[g];y&=~((1<<(s&31))-1);const x=h.length;for(;y===0;){if(++g===x)return u;y=~h[g]}const _=g*32+L.numberOfTrailingZeros(y);return _>u?u:_}setBulk(s,u){this.bits[Math.floor(s/32)]=u}setRange(s,u){if(u<s||s<0||u>this.size)throw new v;if(u===s)return;u--;const h=Math.floor(s/32),g=Math.floor(u/32),y=this.bits;for(let x=h;x<=g;x++){const _=x>h?0:s&31,O=(2<<(x<g?31:u&31))-(1<<_);y[x]|=O}}clear(){const s=this.bits.length,u=this.bits;for(let h=0;h<s;h++)u[h]=0}isRange(s,u,h){if(u<s||s<0||u>this.size)throw new v;if(u===s)return!0;u--;const g=Math.floor(s/32),y=Math.floor(u/32),x=this.bits;for(let _=g;_<=y;_++){const T=_>g?0:s&31,j=(2<<(_<y?31:u&31))-(1<<T)&4294967295;if((x[_]&j)!==(h?j:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,u){if(u<0||u>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+u);for(let h=u;h>0;h--)this.appendBit((s>>h-1&1)===1)}appendBitArray(s){const u=s.size;this.ensureCapacity(this.size+u);for(let h=0;h<u;h++)this.appendBit(s.get(h))}xor(s){if(this.size!==s.size)throw new v("Sizes don't match");const u=this.bits;for(let h=0,g=u.length;h<g;h++)u[h]^=s.bits[h]}toBytes(s,u,h,g){for(let y=0;y<g;y++){let x=0;for(let _=0;_<8;_++)this.get(s)&&(x|=1<<7-_),s++;u[h+y]=x}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),u=Math.floor((this.size-1)/32),h=u+1,g=this.bits;for(let y=0;y<h;y++){let x=g[y];x=x>>1&1431655765|(x&1431655765)<<1,x=x>>2&858993459|(x&858993459)<<2,x=x>>4&252645135|(x&252645135)<<4,x=x>>8&16711935|(x&16711935)<<8,x=x>>16&65535|(x&65535)<<16,s[u-y]=x}if(this.size!==h*32){const y=h*32-this.size;let x=s[0]>>>y;for(let _=1;_<h;_++){const T=s[_];x|=T<<32-y,s[_-1]=x,x=T>>>y}s[h-1]=x}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof U))return!1;const u=s;return this.size===u.size&&F.equals(this.bits,u.bits)}hashCode(){return 31*this.size+F.hashCode(this.bits)}toString(){let s="";for(let u=0,h=this.size;u<h;u++)(u&7)===0&&(s+=" "),s+=this.get(u)?"X":".";return s}clone(){return new U(this.size,this.bits.slice())}}var G;(function(V){V[V.OTHER=0]="OTHER",V[V.PURE_BARCODE=1]="PURE_BARCODE",V[V.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",V[V.TRY_HARDER=3]="TRY_HARDER",V[V.CHARACTER_SET=4]="CHARACTER_SET",V[V.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",V[V.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",V[V.ASSUME_GS1=7]="ASSUME_GS1",V[V.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",V[V.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",V[V.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(G||(G={}));var q=G;class W extends d{static getFormatInstance(){return new W}}W.kind="FormatException";var Z;(function(V){V[V.Cp437=0]="Cp437",V[V.ISO8859_1=1]="ISO8859_1",V[V.ISO8859_2=2]="ISO8859_2",V[V.ISO8859_3=3]="ISO8859_3",V[V.ISO8859_4=4]="ISO8859_4",V[V.ISO8859_5=5]="ISO8859_5",V[V.ISO8859_6=6]="ISO8859_6",V[V.ISO8859_7=7]="ISO8859_7",V[V.ISO8859_8=8]="ISO8859_8",V[V.ISO8859_9=9]="ISO8859_9",V[V.ISO8859_10=10]="ISO8859_10",V[V.ISO8859_11=11]="ISO8859_11",V[V.ISO8859_13=12]="ISO8859_13",V[V.ISO8859_14=13]="ISO8859_14",V[V.ISO8859_15=14]="ISO8859_15",V[V.ISO8859_16=15]="ISO8859_16",V[V.SJIS=16]="SJIS",V[V.Cp1250=17]="Cp1250",V[V.Cp1251=18]="Cp1251",V[V.Cp1252=19]="Cp1252",V[V.Cp1256=20]="Cp1256",V[V.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",V[V.UTF8=22]="UTF8",V[V.ASCII=23]="ASCII",V[V.Big5=24]="Big5",V[V.GB18030=25]="GB18030",V[V.EUC_KR=26]="EUC_KR"})(Z||(Z={}));class X{constructor(s,u,h,...g){this.valueIdentifier=s,this.name=h,typeof u=="number"?this.values=Int32Array.from([u]):this.values=u,this.otherEncodingNames=g,X.VALUE_IDENTIFIER_TO_ECI.set(s,this),X.NAME_TO_ECI.set(h,this);const y=this.values;for(let x=0,_=y.length;x!==_;x++){const T=y[x];X.VALUES_TO_ECI.set(T,this)}for(const x of g)X.NAME_TO_ECI.set(x,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new W("incorect value");const u=X.VALUES_TO_ECI.get(s);if(u===void 0)throw new W("incorect value");return u}static getCharacterSetECIByName(s){const u=X.NAME_TO_ECI.get(s);if(u===void 0)throw new W("incorect value");return u}equals(s){if(!(s instanceof X))return!1;const u=s;return this.getName()===u.getName()}}X.VALUE_IDENTIFIER_TO_ECI=new Map,X.VALUES_TO_ECI=new Map,X.NAME_TO_ECI=new Map,X.Cp437=new X(Z.Cp437,Int32Array.from([0,2]),"Cp437"),X.ISO8859_1=new X(Z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),X.ISO8859_2=new X(Z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),X.ISO8859_3=new X(Z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),X.ISO8859_4=new X(Z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),X.ISO8859_5=new X(Z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),X.ISO8859_6=new X(Z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),X.ISO8859_7=new X(Z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),X.ISO8859_8=new X(Z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),X.ISO8859_9=new X(Z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),X.ISO8859_10=new X(Z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),X.ISO8859_11=new X(Z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),X.ISO8859_13=new X(Z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),X.ISO8859_14=new X(Z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),X.ISO8859_15=new X(Z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),X.ISO8859_16=new X(Z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),X.SJIS=new X(Z.SJIS,20,"SJIS","Shift_JIS"),X.Cp1250=new X(Z.Cp1250,21,"Cp1250","windows-1250"),X.Cp1251=new X(Z.Cp1251,22,"Cp1251","windows-1251"),X.Cp1252=new X(Z.Cp1252,23,"Cp1252","windows-1252"),X.Cp1256=new X(Z.Cp1256,24,"Cp1256","windows-1256"),X.UnicodeBigUnmarked=new X(Z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),X.UTF8=new X(Z.UTF8,26,"UTF8","UTF-8"),X.ASCII=new X(Z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),X.Big5=new X(Z.Big5,28,"Big5"),X.GB18030=new X(Z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),X.EUC_KR=new X(Z.EUC_KR,30,"EUC_KR","EUC-KR");class pe extends d{}pe.kind="UnsupportedOperationException";class ae{static decode(s,u){const h=this.encodingName(u);return this.customDecoder?this.customDecoder(s,h):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(h)?this.decodeFallback(s,h):new TextDecoder(h).decode(s)}static shouldDecodeOnFallback(s){return!ae.isBrowser()&&s==="ISO-8859-1"}static encode(s,u){const h=this.encodingName(u);return this.customEncoder?this.customEncoder(s,h):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof X?s:X.getCharacterSetECIByName(s)}static decodeFallback(s,u){const h=this.encodingCharacterSet(u);if(ae.isDecodeFallbackSupported(h)){let g="";for(let y=0,x=s.length;y<x;y++){let _=s[y].toString(16);_.length<2&&(_="0"+_),g+="%"+_}return decodeURIComponent(g)}if(h.equals(X.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new pe(`Encoding ${this.encodingName(u)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(X.UTF8)||s.equals(X.ISO8859_1)||s.equals(X.ASCII)}static encodeFallback(s){const h=btoa(unescape(encodeURIComponent(s))).split(""),g=[];for(let y=0;y<h.length;y++)g.push(h[y].charCodeAt(0));return new Uint8Array(g)}}class le{static castAsNonUtf8Char(s,u=null){const h=u?u.getName():this.ISO88591;return ae.decode(new Uint8Array([s]),h)}static guessEncoding(s,u){if(u!=null&&u.get(q.CHARACTER_SET)!==void 0)return u.get(q.CHARACTER_SET).toString();const h=s.length;let g=!0,y=!0,x=!0,_=0,T=0,O=0,j=0,z=0,H=0,Y=0,Q=0,re=0,oe=0,ge=0;const Re=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let ke=0;ke<h&&(g||y||x);ke++){const Te=s[ke]&255;x&&(_>0?(Te&128)===0?x=!1:_--:(Te&128)!==0&&((Te&64)===0?x=!1:(_++,(Te&32)===0?T++:(_++,(Te&16)===0?O++:(_++,(Te&8)===0?j++:x=!1))))),g&&(Te>127&&Te<160?g=!1:Te>159&&(Te<192||Te===215||Te===247)&&ge++),y&&(z>0?Te<64||Te===127||Te>252?y=!1:z--:Te===128||Te===160||Te>239?y=!1:Te>160&&Te<224?(H++,Q=0,Y++,Y>re&&(re=Y)):Te>127?(z++,Y=0,Q++,Q>oe&&(oe=Q)):(Y=0,Q=0))}return x&&_>0&&(x=!1),y&&z>0&&(y=!1),x&&(Re||T+O+j>0)?le.UTF8:y&&(le.ASSUME_SHIFT_JIS||re>=3||oe>=3)?le.SHIFT_JIS:g&&y?re===2&&H===2||ge*10>=h?le.SHIFT_JIS:le.ISO88591:g?le.ISO88591:y?le.SHIFT_JIS:x?le.UTF8:le.PLATFORM_DEFAULT_ENCODING}static format(s,...u){let h=-1;function g(x,_,T,O,j,z){if(x==="%%")return"%";if(u[++h]===void 0)return;x=O?parseInt(O.substr(1)):void 0;let H=j?parseInt(j.substr(1)):void 0,Y;switch(z){case"s":Y=u[h];break;case"c":Y=u[h][0];break;case"f":Y=parseFloat(u[h]).toFixed(x);break;case"p":Y=parseFloat(u[h]).toPrecision(x);break;case"e":Y=parseFloat(u[h]).toExponential(x);break;case"x":Y=parseInt(u[h]).toString(H||16);break;case"d":Y=parseFloat(parseInt(u[h],H||10).toPrecision(x)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(H);let Q=parseInt(T),re=T&&T[0]+""=="0"?"0":" ";for(;Y.length<Q;)Y=_!==void 0?Y+re:re+Y;return Y}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(y,g)}static getBytes(s,u){return ae.encode(s,u)}static getCharCode(s,u=0){return s.charCodeAt(u)}static getCharAt(s){return String.fromCharCode(s)}}le.SHIFT_JIS=X.SJIS.getName(),le.GB2312="GB2312",le.ISO88591=X.ISO8859_1.getName(),le.EUC_JP="EUC_JP",le.UTF8=X.UTF8.getName(),le.PLATFORM_DEFAULT_ENCODING=le.UTF8,le.ASSUME_SHIFT_JIS=!1;class be{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=le.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,u,h){for(let g=u;u<u+h;g++)this.append(s[g]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,u){this.value=this.value.substr(0,s)+u+this.value.substr(s+1)}substring(s,u){return this.value.substring(s,u)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,u){this.value=this.value.substr(0,s)+u+this.value.substr(s+u.length)}}class me{constructor(s,u,h,g){if(this.width=s,this.height=u,this.rowSize=h,this.bits=g,u==null&&(u=s),this.height=u,s<1||u<1)throw new v("Both dimensions must be greater than 0");h==null&&(h=Math.floor((s+31)/32)),this.rowSize=h,g==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const u=s.length,h=s[0].length,g=new me(h,u);for(let y=0;y<u;y++){const x=s[y];for(let _=0;_<h;_++)x[_]&&g.set(_,y)}return g}static parseFromString(s,u,h){if(s===null)throw new v("stringRepresentation cannot be null");const g=new Array(s.length);let y=0,x=0,_=-1,T=0,O=0;for(;O<s.length;)if(s.charAt(O)===`
`||s.charAt(O)==="\r"){if(y>x){if(_===-1)_=y-x;else if(y-x!==_)throw new v("row lengths do not match");x=y,T++}O++}else if(s.substring(O,O+u.length)===u)O+=u.length,g[y]=!0,y++;else if(s.substring(O,O+h.length)===h)O+=h.length,g[y]=!1,y++;else throw new v("illegal character encountered: "+s.substring(O));if(y>x){if(_===-1)_=y-x;else if(y-x!==_)throw new v("row lengths do not match");T++}const j=new me(_,T);for(let z=0;z<y;z++)g[z]&&j.set(Math.floor(z%_),Math.floor(z/_));return j}get(s,u){const h=u*this.rowSize+Math.floor(s/32);return(this.bits[h]>>>(s&31)&1)!==0}set(s,u){const h=u*this.rowSize+Math.floor(s/32);this.bits[h]|=1<<(s&31)&4294967295}unset(s,u){const h=u*this.rowSize+Math.floor(s/32);this.bits[h]&=~(1<<(s&31)&4294967295)}flip(s,u){const h=u*this.rowSize+Math.floor(s/32);this.bits[h]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new v("input matrix dimensions do not match");const u=new U(Math.floor(this.width/32)+1),h=this.rowSize,g=this.bits;for(let y=0,x=this.height;y<x;y++){const _=y*h,T=s.getRow(y,u).getBitArray();for(let O=0;O<h;O++)g[_+O]^=T[O]}}clear(){const s=this.bits,u=s.length;for(let h=0;h<u;h++)s[h]=0}setRegion(s,u,h,g){if(u<0||s<0)throw new v("Left and top must be nonnegative");if(g<1||h<1)throw new v("Height and width must be at least 1");const y=s+h,x=u+g;if(x>this.height||y>this.width)throw new v("The region must fit inside the matrix");const _=this.rowSize,T=this.bits;for(let O=u;O<x;O++){const j=O*_;for(let z=s;z<y;z++)T[j+Math.floor(z/32)]|=1<<(z&31)&4294967295}}getRow(s,u){u==null||u.getSize()<this.width?u=new U(this.width):u.clear();const h=this.rowSize,g=this.bits,y=s*h;for(let x=0;x<h;x++)u.setBulk(x*32,g[y+x]);return u}setRow(s,u){N.arraycopy(u.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),u=this.getHeight();let h=new U(s),g=new U(s);for(let y=0,x=Math.floor((u+1)/2);y<x;y++)h=this.getRow(y,h),g=this.getRow(u-1-y,g),h.reverse(),g.reverse(),this.setRow(y,g),this.setRow(u-1-y,h)}getEnclosingRectangle(){const s=this.width,u=this.height,h=this.rowSize,g=this.bits;let y=s,x=u,_=-1,T=-1;for(let O=0;O<u;O++)for(let j=0;j<h;j++){const z=g[O*h+j];if(z!==0){if(O<x&&(x=O),O>T&&(T=O),j*32<y){let H=0;for(;(z<<31-H&4294967295)===0;)H++;j*32+H<y&&(y=j*32+H)}if(j*32+31>_){let H=31;for(;!(z>>>H);)H--;j*32+H>_&&(_=j*32+H)}}}return _<y||T<x?null:Int32Array.from([y,x,_-y+1,T-x+1])}getTopLeftOnBit(){const s=this.rowSize,u=this.bits;let h=0;for(;h<u.length&&u[h]===0;)h++;if(h===u.length)return null;const g=h/s;let y=h%s*32;const x=u[h];let _=0;for(;(x<<31-_&4294967295)===0;)_++;return y+=_,Int32Array.from([y,g])}getBottomRightOnBit(){const s=this.rowSize,u=this.bits;let h=u.length-1;for(;h>=0&&u[h]===0;)h--;if(h<0)return null;const g=Math.floor(h/s);let y=Math.floor(h%s)*32;const x=u[h];let _=31;for(;!(x>>>_);)_--;return y+=_,Int32Array.from([y,g])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof me))return!1;const u=s;return this.width===u.width&&this.height===u.height&&this.rowSize===u.rowSize&&F.equals(this.bits,u.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+F.hashCode(this.bits),s}toString(s="X ",u="  ",h=`
`){return this.buildToString(s,u,h)}buildToString(s,u,h){let g=new be;for(let y=0,x=this.height;y<x;y++){for(let _=0,T=this.width;_<T;_++)g.append(this.get(_,y)?s:u);g.append(h)}return g.toString()}clone(){return new me(this.width,this.height,this.rowSize,this.bits.slice())}}class te extends d{static getNotFoundInstance(){return new te}}te.kind="NotFoundException";class Oe extends P{constructor(s){super(s),this.luminances=Oe.EMPTY,this.buckets=new Int32Array(Oe.LUMINANCE_BUCKETS)}getBlackRow(s,u){const h=this.getLuminanceSource(),g=h.getWidth();u==null||u.getSize()<g?u=new U(g):u.clear(),this.initArrays(g);const y=h.getRow(s,this.luminances),x=this.buckets;for(let T=0;T<g;T++)x[(y[T]&255)>>Oe.LUMINANCE_SHIFT]++;const _=Oe.estimateBlackPoint(x);if(g<3)for(let T=0;T<g;T++)(y[T]&255)<_&&u.set(T);else{let T=y[0]&255,O=y[1]&255;for(let j=1;j<g-1;j++){const z=y[j+1]&255;(O*4-T-z)/2<_&&u.set(j),T=O,O=z}}return u}getBlackMatrix(){const s=this.getLuminanceSource(),u=s.getWidth(),h=s.getHeight(),g=new me(u,h);this.initArrays(u);const y=this.buckets;for(let T=1;T<5;T++){const O=Math.floor(h*T/5),j=s.getRow(O,this.luminances),z=Math.floor(u*4/5);for(let H=Math.floor(u/5);H<z;H++){const Y=j[H]&255;y[Y>>Oe.LUMINANCE_SHIFT]++}}const x=Oe.estimateBlackPoint(y),_=s.getMatrix();for(let T=0;T<h;T++){const O=T*u;for(let j=0;j<u;j++)(_[O+j]&255)<x&&g.set(j,T)}return g}createBinarizer(s){return new Oe(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const u=this.buckets;for(let h=0;h<Oe.LUMINANCE_BUCKETS;h++)u[h]=0}static estimateBlackPoint(s){const u=s.length;let h=0,g=0,y=0;for(let j=0;j<u;j++)s[j]>y&&(g=j,y=s[j]),s[j]>h&&(h=s[j]);let x=0,_=0;for(let j=0;j<u;j++){const z=j-g,H=s[j]*z*z;H>_&&(x=j,_=H)}if(g>x){const j=g;g=x,x=j}if(x-g<=u/16)throw new te;let T=x-1,O=-1;for(let j=x-1;j>g;j--){const z=j-g,H=z*z*(x-j)*(h-s[j]);H>O&&(T=j,O=H)}return T<<Oe.LUMINANCE_SHIFT}}Oe.LUMINANCE_BITS=5,Oe.LUMINANCE_SHIFT=8-Oe.LUMINANCE_BITS,Oe.LUMINANCE_BUCKETS=1<<Oe.LUMINANCE_BITS,Oe.EMPTY=Uint8ClampedArray.from([0]);class se extends Oe{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),u=s.getWidth(),h=s.getHeight();if(u>=se.MINIMUM_DIMENSION&&h>=se.MINIMUM_DIMENSION){const g=s.getMatrix();let y=u>>se.BLOCK_SIZE_POWER;(u&se.BLOCK_SIZE_MASK)!==0&&y++;let x=h>>se.BLOCK_SIZE_POWER;(h&se.BLOCK_SIZE_MASK)!==0&&x++;const _=se.calculateBlackPoints(g,y,x,u,h),T=new me(u,h);se.calculateThresholdForBlock(g,y,x,u,h,_,T),this.matrix=T}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new se(s)}static calculateThresholdForBlock(s,u,h,g,y,x,_){const T=y-se.BLOCK_SIZE,O=g-se.BLOCK_SIZE;for(let j=0;j<h;j++){let z=j<<se.BLOCK_SIZE_POWER;z>T&&(z=T);const H=se.cap(j,2,h-3);for(let Y=0;Y<u;Y++){let Q=Y<<se.BLOCK_SIZE_POWER;Q>O&&(Q=O);const re=se.cap(Y,2,u-3);let oe=0;for(let Re=-2;Re<=2;Re++){const ke=x[H+Re];oe+=ke[re-2]+ke[re-1]+ke[re]+ke[re+1]+ke[re+2]}const ge=oe/25;se.thresholdBlock(s,Q,z,ge,g,_)}}}static cap(s,u,h){return s<u?u:s>h?h:s}static thresholdBlock(s,u,h,g,y,x){for(let _=0,T=h*y+u;_<se.BLOCK_SIZE;_++,T+=y)for(let O=0;O<se.BLOCK_SIZE;O++)(s[T+O]&255)<=g&&x.set(u+O,h+_)}static calculateBlackPoints(s,u,h,g,y){const x=y-se.BLOCK_SIZE,_=g-se.BLOCK_SIZE,T=new Array(h);for(let O=0;O<h;O++){T[O]=new Int32Array(u);let j=O<<se.BLOCK_SIZE_POWER;j>x&&(j=x);for(let z=0;z<u;z++){let H=z<<se.BLOCK_SIZE_POWER;H>_&&(H=_);let Y=0,Q=255,re=0;for(let ge=0,Re=j*g+H;ge<se.BLOCK_SIZE;ge++,Re+=g){for(let ke=0;ke<se.BLOCK_SIZE;ke++){const Te=s[Re+ke]&255;Y+=Te,Te<Q&&(Q=Te),Te>re&&(re=Te)}if(re-Q>se.MIN_DYNAMIC_RANGE)for(ge++,Re+=g;ge<se.BLOCK_SIZE;ge++,Re+=g)for(let ke=0;ke<se.BLOCK_SIZE;ke++)Y+=s[Re+ke]&255}let oe=Y>>se.BLOCK_SIZE_POWER*2;if(re-Q<=se.MIN_DYNAMIC_RANGE&&(oe=Q/2,O>0&&z>0)){const ge=(T[O-1][z]+2*T[O][z-1]+T[O-1][z-1])/4;Q<ge&&(oe=ge)}T[O][z]=oe}}return T}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class ve{constructor(s,u){this.width=s,this.height=u}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,u,h,g){throw new pe("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new pe("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new pe("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let u=new be;for(let h=0;h<this.height;h++){const g=this.getRow(h,s);for(let y=0;y<this.width;y++){const x=g[y]&255;let _;x<64?_="#":x<128?_="+":x<192?_=".":_=" ",u.append(_)}u.append(`
`)}return u.toString()}}class Ee extends ve{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,u){const h=this.delegate.getRow(s,u),g=this.getWidth();for(let y=0;y<g;y++)h[y]=255-(h[y]&255);return h}getMatrix(){const s=this.delegate.getMatrix(),u=this.getWidth()*this.getHeight(),h=new Uint8ClampedArray(u);for(let g=0;g<u;g++)h[g]=255-(s[g]&255);return h}isCropSupported(){return this.delegate.isCropSupported()}crop(s,u,h,g){return new Ee(this.delegate.crop(s,u,h,g))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ee(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ee(this.delegate.rotateCounterClockwise45())}}class Se extends ve{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Se.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const u=s.getContext("2d").getImageData(0,0,s.width,s.height);return Se.toGrayscaleBuffer(u.data,s.width,s.height)}static toGrayscaleBuffer(s,u,h){const g=new Uint8ClampedArray(u*h);for(let y=0,x=0,_=s.length;y<_;y+=4,x++){let T;if(s[y+3]===0)T=255;else{const j=s[y],z=s[y+1],H=s[y+2];T=306*j+601*z+117*H+512>>10}g[x]=T}return g}getRow(s,u){if(s<0||s>=this.getHeight())throw new v("Requested row is outside the image: "+s);const h=this.getWidth(),g=s*h;return u===null?u=this.buffer.slice(g,g+h):(u.length<h&&(u=new Uint8ClampedArray(h)),u.set(this.buffer.slice(g,g+h))),u}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,u,h,g){return super.crop(s,u,h,g),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const u=this.getTempCanvasElement(),h=u.getContext("2d"),g=s*Se.DEGREE_TO_RADIANS,y=this.canvas.width,x=this.canvas.height,_=Math.ceil(Math.abs(Math.cos(g))*y+Math.abs(Math.sin(g))*x),T=Math.ceil(Math.abs(Math.sin(g))*y+Math.abs(Math.cos(g))*x);return u.width=_,u.height=T,h.translate(_/2,T/2),h.rotate(g),h.drawImage(this.canvas,y/-2,x/-2),this.buffer=Se.makeBufferFromCanvasImageData(u),this}invert(){return new Ee(this)}}Se.DEGREE_TO_RADIANS=Math.PI/180;class ne{constructor(s,u,h){this.deviceId=s,this.label=u,this.kind="videoinput",this.groupId=h||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var he=(globalThis||Ah||self||window||void 0)&&(globalThis||Ah||self||window||void 0).__awaiter||function(V,s,u,h){function g(y){return y instanceof u?y:new u(function(x){x(y)})}return new(u||(u=Promise))(function(y,x){function _(j){try{O(h.next(j))}catch(z){x(z)}}function T(j){try{O(h.throw(j))}catch(z){x(z)}}function O(j){j.done?y(j.value):g(j.value).then(_,T)}O((h=h.apply(V,s||[])).next())})};class Be{constructor(s,u=500,h){this.reader=s,this.timeBetweenScansMillis=u,this._hints=h,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return he(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),u=[];for(const h of s){const g=h.kind==="video"?"videoinput":h.kind;if(g!=="videoinput")continue;const y=h.deviceId||h.id,x=h.label||`Video device ${u.length+1}`,_=h.groupId,T={deviceId:y,label:x,kind:g,groupId:_};u.push(T)}return u})}getVideoInputDevices(){return he(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(u=>new ne(u.deviceId,u.label))})}findDeviceById(s){return he(this,void 0,void 0,function*(){const u=yield this.listVideoInputDevices();return u?u.find(h=>h.deviceId===s):null})}decodeFromInputVideoDevice(s,u){return he(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,u)})}decodeOnceFromVideoDevice(s,u){return he(this,void 0,void 0,function*(){this.reset();let h;s?h={deviceId:{exact:s}}:h={facingMode:"environment"};const g={video:h};return yield this.decodeOnceFromConstraints(g,u)})}decodeOnceFromConstraints(s,u){return he(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(h,u)})}decodeOnceFromStream(s,u){return he(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(s,u);return yield this.decodeOnce(h)})}decodeFromInputVideoDeviceContinuously(s,u,h){return he(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,u,h)})}decodeFromVideoDevice(s,u,h){return he(this,void 0,void 0,function*(){let g;s?g={deviceId:{exact:s}}:g={facingMode:"environment"};const y={video:g};return yield this.decodeFromConstraints(y,u,h)})}decodeFromConstraints(s,u,h){return he(this,void 0,void 0,function*(){const g=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(g,u,h)})}decodeFromStream(s,u,h){return he(this,void 0,void 0,function*(){this.reset();const g=yield this.attachStreamToVideo(s,u);return yield this.decodeContinuously(g,h)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,u){return he(this,void 0,void 0,function*(){const h=this.prepareVideoElement(u);return this.addVideoSource(h,s),this.videoElement=h,this.stream=s,yield this.playVideoOnLoadAsync(h),h})}playVideoOnLoadAsync(s){return new Promise((u,h)=>this.playVideoOnLoad(s,()=>u()))}playVideoOnLoad(s,u){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",u),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return he(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,u){const h=document.getElementById(s);if(!h)throw new m(`element with id '${s}' not found`);if(h.nodeName.toLowerCase()!==u.toLowerCase())throw new m(`element with id '${s}' must be an ${u} element`);return h}decodeFromImage(s,u){if(!s&&!u)throw new m("either imageElement with a src set or an url must be provided");return u&&!s?this.decodeFromImageUrl(u):this.decodeFromImageElement(s)}decodeFromVideo(s,u){if(!s&&!u)throw new m("Either an element with a src set or an URL must be provided");return u&&!s?this.decodeFromVideoUrl(u):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,u,h){if(s===void 0&&u===void 0)throw new m("Either an element with a src set or an URL must be provided");return u&&!s?this.decodeFromVideoUrlContinuously(u,h):this.decodeFromVideoElementContinuously(s,h)}decodeFromImageElement(s){if(!s)throw new m("An image element must be provided.");this.reset();const u=this.prepareImageElement(s);this.imageElement=u;let h;return this.isImageLoaded(u)?h=this.decodeOnce(u,!1,!0):h=this._decodeOnLoadImage(u),h}decodeFromVideoElement(s){const u=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(u)}decodeFromVideoElementContinuously(s,u){const h=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(h,u)}_decodeFromVideoElementSetup(s){if(!s)throw new m("A video element must be provided.");this.reset();const u=this.prepareVideoElement(s);return this.videoElement=u,u}decodeFromImageUrl(s){if(!s)throw new m("An URL must be provided.");this.reset();const u=this.prepareImageElement();this.imageElement=u;const h=this._decodeOnLoadImage(u);return u.src=s,h}decodeFromVideoUrl(s){if(!s)throw new m("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),h=this.decodeFromVideoElement(u);return u.src=s,h}decodeFromVideoUrlContinuously(s,u){if(!s)throw new m("An URL must be provided.");this.reset();const h=this.prepareVideoElement(),g=this.decodeFromVideoElementContinuously(h,u);return h.src=s,g}_decodeOnLoadImage(s){return new Promise((u,h)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(u,h),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return he(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,u){return he(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,u)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let u;return typeof s>"u"&&(u=document.createElement("img"),u.width=200,u.height=200),typeof s=="string"&&(u=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(u=s),u}prepareVideoElement(s){let u;return!s&&typeof document<"u"&&(u=document.createElement("video"),u.width=200,u.height=200),typeof s=="string"&&(u=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(u=s),u.setAttribute("autoplay","true"),u.setAttribute("muted","true"),u.setAttribute("playsinline","true"),u}decodeOnce(s,u=!0,h=!0){this._stopAsyncDecode=!1;const g=(y,x)=>{if(this._stopAsyncDecode){x(new te("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const _=this.decode(s);y(_)}catch(_){const T=u&&_ instanceof te,j=(_ instanceof C||_ instanceof W)&&h;if(T||j)return setTimeout(g,this._timeBetweenDecodingAttempts,y,x);x(_)}};return new Promise((y,x)=>g(y,x))}decodeContinuously(s,u){this._stopContinuousDecode=!1;const h=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const g=this.decode(s);u(g,null),setTimeout(h,this.timeBetweenScansMillis)}catch(g){u(null,g);const y=g instanceof C||g instanceof W,x=g instanceof te;(y||x)&&setTimeout(h,this._timeBetweenDecodingAttempts)}};h()}decode(s){const u=this.createBinaryBitmap(s);return this.decodeBitmap(u)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,u,h){u||(u={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),h||(h=this.captureCanvasContext),h.drawImage(s,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}drawImageOnCanvas(s,u,h=this.captureCanvasContext){u||(u={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),h||(h=this.captureCanvasContext),h.drawImage(s,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const u=this.getCaptureCanvas(s),h=new Se(u),g=new se(h);return new b(g)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const h=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=h}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const u=this.createCaptureCanvas(s);this.captureCanvas=u}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const u=document.createElement("canvas");let h,g;return typeof s<"u"&&(s instanceof HTMLVideoElement?(h=s.videoWidth,g=s.videoHeight):s instanceof HTMLImageElement&&(h=s.naturalWidth||s.width,g=s.naturalHeight||s.height)),u.style.width=h+"px",u.style.height=g+"px",u.width=h,u.height=g,u}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,u){try{s.srcObject=u}catch{s.src=URL.createObjectURL(u)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Fe{constructor(s,u,h=u==null?0:8*u.length,g,y,x=N.currentTimeMillis()){this.text=s,this.rawBytes=u,this.numBits=h,this.resultPoints=g,this.format=y,this.timestamp=x,this.text=s,this.rawBytes=u,h==null?this.numBits=u==null?0:8*u.length:this.numBits=h,this.resultPoints=g,this.format=y,this.resultMetadata=null,x==null?this.timestamp=N.currentTimeMillis():this.timestamp=x}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,u){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,u)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const u=this.resultPoints;if(u===null)this.resultPoints=s;else if(s!==null&&s.length>0){const h=new Array(u.length+s.length);N.arraycopy(u,0,h,0,u.length),N.arraycopy(s,0,h,u.length,s.length),this.resultPoints=h}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ze;(function(V){V[V.AZTEC=0]="AZTEC",V[V.CODABAR=1]="CODABAR",V[V.CODE_39=2]="CODE_39",V[V.CODE_93=3]="CODE_93",V[V.CODE_128=4]="CODE_128",V[V.DATA_MATRIX=5]="DATA_MATRIX",V[V.EAN_8=6]="EAN_8",V[V.EAN_13=7]="EAN_13",V[V.ITF=8]="ITF",V[V.MAXICODE=9]="MAXICODE",V[V.PDF_417=10]="PDF_417",V[V.QR_CODE=11]="QR_CODE",V[V.RSS_14=12]="RSS_14",V[V.RSS_EXPANDED=13]="RSS_EXPANDED",V[V.UPC_A=14]="UPC_A",V[V.UPC_E=15]="UPC_E",V[V.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ze||(Ze={}));var Pe=Ze,st;(function(V){V[V.OTHER=0]="OTHER",V[V.ORIENTATION=1]="ORIENTATION",V[V.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",V[V.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",V[V.ISSUE_NUMBER=4]="ISSUE_NUMBER",V[V.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",V[V.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",V[V.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",V[V.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",V[V.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",V[V.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(st||(st={}));var it=st;class we{constructor(s,u,h,g,y=-1,x=-1){this.rawBytes=s,this.text=u,this.byteSegments=h,this.ecLevel=g,this.structuredAppendSequenceNumber=y,this.structuredAppendParity=x,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class tt{exp(s){return this.expTable[s]}log(s){if(s===0)throw new v;return this.logTable[s]}static addOrSubtract(s,u){return s^u}}class Me{constructor(s,u){if(u.length===0)throw new v;this.field=s;const h=u.length;if(h>1&&u[0]===0){let g=1;for(;g<h&&u[g]===0;)g++;g===h?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(h-g),N.arraycopy(u,g,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const u=this.coefficients;let h;if(s===1){h=0;for(let x=0,_=u.length;x!==_;x++){const T=u[x];h=tt.addOrSubtract(h,T)}return h}h=u[0];const g=u.length,y=this.field;for(let x=1;x<g;x++)h=tt.addOrSubtract(y.multiply(s,h),u[x]);return h}addOrSubtract(s){if(!this.field.equals(s.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let u=this.coefficients,h=s.coefficients;if(u.length>h.length){const x=u;u=h,h=x}let g=new Int32Array(h.length);const y=h.length-u.length;N.arraycopy(h,0,g,0,y);for(let x=y;x<h.length;x++)g[x]=tt.addOrSubtract(u[x-y],h[x]);return new Me(this.field,g)}multiply(s){if(!this.field.equals(s.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const u=this.coefficients,h=u.length,g=s.coefficients,y=g.length,x=new Int32Array(h+y-1),_=this.field;for(let T=0;T<h;T++){const O=u[T];for(let j=0;j<y;j++)x[T+j]=tt.addOrSubtract(x[T+j],_.multiply(O,g[j]))}return new Me(_,x)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const u=this.coefficients.length,h=this.field,g=new Int32Array(u),y=this.coefficients;for(let x=0;x<u;x++)g[x]=h.multiply(y[x],s);return new Me(h,g)}multiplyByMonomial(s,u){if(s<0)throw new v;if(u===0)return this.field.getZero();const h=this.coefficients,g=h.length,y=new Int32Array(g+s),x=this.field;for(let _=0;_<g;_++)y[_]=x.multiply(h[_],u);return new Me(x,y)}divide(s){if(!this.field.equals(s.field))throw new v("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new v("Divide by 0");const u=this.field;let h=u.getZero(),g=this;const y=s.getCoefficient(s.getDegree()),x=u.inverse(y);for(;g.getDegree()>=s.getDegree()&&!g.isZero();){const _=g.getDegree()-s.getDegree(),T=u.multiply(g.getCoefficient(g.getDegree()),x),O=s.multiplyByMonomial(_,T),j=u.buildMonomial(_,T);h=h.addOrSubtract(j),g=g.addOrSubtract(O)}return[h,g]}toString(){let s="";for(let u=this.getDegree();u>=0;u--){let h=this.getCoefficient(u);if(h!==0){if(h<0?(s+=" - ",h=-h):s.length>0&&(s+=" + "),u===0||h!==1){const g=this.field.log(h);g===0?s+="1":g===1?s+="a":(s+="a^",s+=g)}u!==0&&(u===1?s+="x":(s+="x^",s+=u))}}return s}}class _e extends d{}_e.kind="ArithmeticException";class Ke extends tt{constructor(s,u,h){super(),this.primitive=s,this.size=u,this.generatorBase=h;const g=new Int32Array(u);let y=1;for(let _=0;_<u;_++)g[_]=y,y*=2,y>=u&&(y^=s,y&=u-1);this.expTable=g;const x=new Int32Array(u);for(let _=0;_<u-1;_++)x[g[_]]=_;this.logTable=x,this.zero=new Me(this,Int32Array.from([0])),this.one=new Me(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,u){if(s<0)throw new v;if(u===0)return this.zero;const h=new Int32Array(s+1);return h[0]=u,new Me(this,h)}inverse(s){if(s===0)throw new _e;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,u){return s===0||u===0?0:this.expTable[(this.logTable[s]+this.logTable[u])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+L.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}Ke.AZTEC_DATA_12=new Ke(4201,4096,1),Ke.AZTEC_DATA_10=new Ke(1033,1024,1),Ke.AZTEC_DATA_6=new Ke(67,64,1),Ke.AZTEC_PARAM=new Ke(19,16,1),Ke.QR_CODE_FIELD_256=new Ke(285,256,0),Ke.DATA_MATRIX_FIELD_256=new Ke(301,256,1),Ke.AZTEC_DATA_8=Ke.DATA_MATRIX_FIELD_256,Ke.MAXICODE_FIELD_64=Ke.AZTEC_DATA_6;class dt extends d{}dt.kind="ReedSolomonException";class It extends d{}It.kind="IllegalStateException";class An{constructor(s){this.field=s}decode(s,u){const h=this.field,g=new Me(h,s),y=new Int32Array(u);let x=!0;for(let Y=0;Y<u;Y++){const Q=g.evaluateAt(h.exp(Y+h.getGeneratorBase()));y[y.length-1-Y]=Q,Q!==0&&(x=!1)}if(x)return;const _=new Me(h,y),T=this.runEuclideanAlgorithm(h.buildMonomial(u,1),_,u),O=T[0],j=T[1],z=this.findErrorLocations(O),H=this.findErrorMagnitudes(j,z);for(let Y=0;Y<z.length;Y++){const Q=s.length-1-h.log(z[Y]);if(Q<0)throw new dt("Bad error location");s[Q]=Ke.addOrSubtract(s[Q],H[Y])}}runEuclideanAlgorithm(s,u,h){if(s.getDegree()<u.getDegree()){const Y=s;s=u,u=Y}const g=this.field;let y=s,x=u,_=g.getZero(),T=g.getOne();for(;x.getDegree()>=(h/2|0);){let Y=y,Q=_;if(y=x,_=T,y.isZero())throw new dt("r_{i-1} was zero");x=Y;let re=g.getZero();const oe=y.getCoefficient(y.getDegree()),ge=g.inverse(oe);for(;x.getDegree()>=y.getDegree()&&!x.isZero();){const Re=x.getDegree()-y.getDegree(),ke=g.multiply(x.getCoefficient(x.getDegree()),ge);re=re.addOrSubtract(g.buildMonomial(Re,ke)),x=x.addOrSubtract(y.multiplyByMonomial(Re,ke))}if(T=re.multiply(_).addOrSubtract(Q),x.getDegree()>=y.getDegree())throw new It("Division algorithm failed to reduce polynomial?")}const O=T.getCoefficient(0);if(O===0)throw new dt("sigmaTilde(0) was zero");const j=g.inverse(O),z=T.multiplyScalar(j),H=x.multiplyScalar(j);return[z,H]}findErrorLocations(s){const u=s.getDegree();if(u===1)return Int32Array.from([s.getCoefficient(1)]);const h=new Int32Array(u);let g=0;const y=this.field;for(let x=1;x<y.getSize()&&g<u;x++)s.evaluateAt(x)===0&&(h[g]=y.inverse(x),g++);if(g!==u)throw new dt("Error locator degree does not match number of roots");return h}findErrorMagnitudes(s,u){const h=u.length,g=new Int32Array(h),y=this.field;for(let x=0;x<h;x++){const _=y.inverse(u[x]);let T=1;for(let O=0;O<h;O++)if(x!==O){const j=y.multiply(u[O],_),z=(j&1)===0?j|1:j&-2;T=y.multiply(T,z)}g[x]=y.multiply(s.evaluateAt(_),y.inverse(T)),y.getGeneratorBase()!==0&&(g[x]=y.multiply(g[x],_))}return g}}var zt;(function(V){V[V.UPPER=0]="UPPER",V[V.LOWER=1]="LOWER",V[V.MIXED=2]="MIXED",V[V.DIGIT=3]="DIGIT",V[V.PUNCT=4]="PUNCT",V[V.BINARY=5]="BINARY"})(zt||(zt={}));class Rt{decode(s){this.ddata=s;let u=s.getBits(),h=this.extractBits(u),g=this.correctBits(h),y=Rt.convertBoolArrayToByteArray(g),x=Rt.getEncodedData(g),_=new we(y,x,null,null);return _.setNumBits(g.length),_}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let u=s.length,h=zt.UPPER,g=zt.UPPER,y="",x=0;for(;x<u;)if(g===zt.BINARY){if(u-x<5)break;let _=Rt.readCode(s,x,5);if(x+=5,_===0){if(u-x<11)break;_=Rt.readCode(s,x,11)+31,x+=11}for(let T=0;T<_;T++){if(u-x<8){x=u;break}const O=Rt.readCode(s,x,8);y+=le.castAsNonUtf8Char(O),x+=8}g=h}else{let _=g===zt.DIGIT?4:5;if(u-x<_)break;let T=Rt.readCode(s,x,_);x+=_;let O=Rt.getCharacter(g,T);O.startsWith("CTRL_")?(h=g,g=Rt.getTable(O.charAt(5)),O.charAt(6)==="L"&&(h=g)):(y+=O,g=h)}return y}static getTable(s){switch(s){case"L":return zt.LOWER;case"P":return zt.PUNCT;case"M":return zt.MIXED;case"D":return zt.DIGIT;case"B":return zt.BINARY;case"U":default:return zt.UPPER}}static getCharacter(s,u){switch(s){case zt.UPPER:return Rt.UPPER_TABLE[u];case zt.LOWER:return Rt.LOWER_TABLE[u];case zt.MIXED:return Rt.MIXED_TABLE[u];case zt.PUNCT:return Rt.PUNCT_TABLE[u];case zt.DIGIT:return Rt.DIGIT_TABLE[u];default:throw new It("Bad table")}}correctBits(s){let u,h;this.ddata.getNbLayers()<=2?(h=6,u=Ke.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(h=8,u=Ke.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(h=10,u=Ke.AZTEC_DATA_10):(h=12,u=Ke.AZTEC_DATA_12);let g=this.ddata.getNbDatablocks(),y=s.length/h;if(y<g)throw new W;let x=s.length%h,_=new Int32Array(y);for(let H=0;H<y;H++,x+=h)_[H]=Rt.readCode(s,x,h);try{new An(u).decode(_,y-g)}catch(H){throw new W(H)}let T=(1<<h)-1,O=0;for(let H=0;H<g;H++){let Y=_[H];if(Y===0||Y===T)throw new W;(Y===1||Y===T-1)&&O++}let j=new Array(g*h-O),z=0;for(let H=0;H<g;H++){let Y=_[H];if(Y===1||Y===T-1)j.fill(Y>1,z,z+h-1),z+=h-1;else for(let Q=h-1;Q>=0;--Q)j[z++]=(Y&1<<Q)!==0}return j}extractBits(s){let u=this.ddata.isCompact(),h=this.ddata.getNbLayers(),g=(u?11:14)+h*4,y=new Int32Array(g),x=new Array(this.totalBitsInLayer(h,u));if(u)for(let _=0;_<y.length;_++)y[_]=_;else{let _=g+1+2*L.truncDivision(L.truncDivision(g,2)-1,15),T=g/2,O=L.truncDivision(_,2);for(let j=0;j<T;j++){let z=j+L.truncDivision(j,15);y[T-j-1]=O-z-1,y[T+j]=O+z+1}}for(let _=0,T=0;_<h;_++){let O=(h-_)*4+(u?9:12),j=_*2,z=g-1-j;for(let H=0;H<O;H++){let Y=H*2;for(let Q=0;Q<2;Q++)x[T+Y+Q]=s.get(y[j+Q],y[j+H]),x[T+2*O+Y+Q]=s.get(y[j+H],y[z-Q]),x[T+4*O+Y+Q]=s.get(y[z-Q],y[z-H]),x[T+6*O+Y+Q]=s.get(y[z-H],y[j+Q])}T+=O*8}return x}static readCode(s,u,h){let g=0;for(let y=u;y<u+h;y++)g<<=1,s[y]&&(g|=1);return g}static readByte(s,u){let h=s.length-u;return h>=8?Rt.readCode(s,u,8):Rt.readCode(s,u,h)<<8-h}static convertBoolArrayToByteArray(s){let u=new Uint8Array((s.length+7)/8);for(let h=0;h<u.length;h++)u[h]=Rt.readByte(s,8*h);return u}totalBitsInLayer(s,u){return((u?88:112)+16*s)*s}}Rt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Rt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Rt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Rt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Rt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class _t{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,u,h,g){const y=s-h,x=u-g;return Math.sqrt(y*y+x*x)}static sum(s){let u=0;for(let h=0,g=s.length;h!==g;h++){const y=s[h];u+=y}return u}}class Ro{static floatToIntBits(s){return s}}Ro.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ze{constructor(s,u){this.x=s,this.y=u}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof ze){const u=s;return this.x===u.x&&this.y===u.y}return!1}hashCode(){return 31*Ro.floatToIntBits(this.x)+Ro.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const u=this.distance(s[0],s[1]),h=this.distance(s[1],s[2]),g=this.distance(s[0],s[2]);let y,x,_;if(h>=u&&h>=g?(x=s[0],y=s[1],_=s[2]):g>=h&&g>=u?(x=s[1],y=s[0],_=s[2]):(x=s[2],y=s[0],_=s[1]),this.crossProductZ(y,x,_)<0){const T=y;y=_,_=T}s[0]=y,s[1]=x,s[2]=_}static distance(s,u){return _t.distance(s.x,s.y,u.x,u.y)}static crossProductZ(s,u,h){const g=u.x,y=u.y;return(h.x-g)*(s.y-y)-(h.y-y)*(s.x-g)}}class js{constructor(s,u){this.bits=s,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class pc extends js{constructor(s,u,h,g,y){super(s,u),this.compact=h,this.nbDatablocks=g,this.nbLayers=y}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Bi{constructor(s,u,h,g){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),u==null&&(u=Bi.INIT_SIZE),h==null&&(h=s.getWidth()/2|0),g==null&&(g=s.getHeight()/2|0);const y=u/2|0;if(this.leftInit=h-y,this.rightInit=h+y,this.upInit=g-y,this.downInit=g+y,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new te}detect(){let s=this.leftInit,u=this.rightInit,h=this.upInit,g=this.downInit,y=!1,x=!0,_=!1,T=!1,O=!1,j=!1,z=!1;const H=this.width,Y=this.height;for(;x;){x=!1;let Q=!0;for(;(Q||!T)&&u<H;)Q=this.containsBlackPoint(h,g,u,!1),Q?(u++,x=!0,T=!0):T||u++;if(u>=H){y=!0;break}let re=!0;for(;(re||!O)&&g<Y;)re=this.containsBlackPoint(s,u,g,!0),re?(g++,x=!0,O=!0):O||g++;if(g>=Y){y=!0;break}let oe=!0;for(;(oe||!j)&&s>=0;)oe=this.containsBlackPoint(h,g,s,!1),oe?(s--,x=!0,j=!0):j||s--;if(s<0){y=!0;break}let ge=!0;for(;(ge||!z)&&h>=0;)ge=this.containsBlackPoint(s,u,h,!0),ge?(h--,x=!0,z=!0):z||h--;if(h<0){y=!0;break}x&&(_=!0)}if(!y&&_){const Q=u-s;let re=null;for(let ke=1;re===null&&ke<Q;ke++)re=this.getBlackPointOnSegment(s,g-ke,s+ke,g);if(re==null)throw new te;let oe=null;for(let ke=1;oe===null&&ke<Q;ke++)oe=this.getBlackPointOnSegment(s,h+ke,s+ke,h);if(oe==null)throw new te;let ge=null;for(let ke=1;ge===null&&ke<Q;ke++)ge=this.getBlackPointOnSegment(u,h+ke,u-ke,h);if(ge==null)throw new te;let Re=null;for(let ke=1;Re===null&&ke<Q;ke++)Re=this.getBlackPointOnSegment(u,g-ke,u-ke,g);if(Re==null)throw new te;return this.centerEdges(Re,re,ge,oe)}else throw new te}getBlackPointOnSegment(s,u,h,g){const y=_t.round(_t.distance(s,u,h,g)),x=(h-s)/y,_=(g-u)/y,T=this.image;for(let O=0;O<y;O++){const j=_t.round(s+O*x),z=_t.round(u+O*_);if(T.get(j,z))return new ze(j,z)}return null}centerEdges(s,u,h,g){const y=s.getX(),x=s.getY(),_=u.getX(),T=u.getY(),O=h.getX(),j=h.getY(),z=g.getX(),H=g.getY(),Y=Bi.CORR;return y<this.width/2?[new ze(z-Y,H+Y),new ze(_+Y,T+Y),new ze(O-Y,j-Y),new ze(y+Y,x-Y)]:[new ze(z+Y,H+Y),new ze(_+Y,T-Y),new ze(O-Y,j+Y),new ze(y-Y,x-Y)]}containsBlackPoint(s,u,h,g){const y=this.image;if(g){for(let x=s;x<=u;x++)if(y.get(x,h))return!0}else for(let x=s;x<=u;x++)if(y.get(h,x))return!0;return!1}}Bi.INIT_SIZE=10,Bi.CORR=1;class Bl{static checkAndNudgePoints(s,u){const h=s.getWidth(),g=s.getHeight();let y=!0;for(let x=0;x<u.length&&y;x+=2){const _=Math.floor(u[x]),T=Math.floor(u[x+1]);if(_<-1||_>h||T<-1||T>g)throw new te;y=!1,_===-1?(u[x]=0,y=!0):_===h&&(u[x]=h-1,y=!0),T===-1?(u[x+1]=0,y=!0):T===g&&(u[x+1]=g-1,y=!0)}y=!0;for(let x=u.length-2;x>=0&&y;x-=2){const _=Math.floor(u[x]),T=Math.floor(u[x+1]);if(_<-1||_>h||T<-1||T>g)throw new te;y=!1,_===-1?(u[x]=0,y=!0):_===h&&(u[x]=h-1,y=!0),T===-1?(u[x+1]=0,y=!0):T===g&&(u[x+1]=g-1,y=!0)}}}class Zr{constructor(s,u,h,g,y,x,_,T,O){this.a11=s,this.a21=u,this.a31=h,this.a12=g,this.a22=y,this.a32=x,this.a13=_,this.a23=T,this.a33=O}static quadrilateralToQuadrilateral(s,u,h,g,y,x,_,T,O,j,z,H,Y,Q,re,oe){const ge=Zr.quadrilateralToSquare(s,u,h,g,y,x,_,T);return Zr.squareToQuadrilateral(O,j,z,H,Y,Q,re,oe).times(ge)}transformPoints(s){const u=s.length,h=this.a11,g=this.a12,y=this.a13,x=this.a21,_=this.a22,T=this.a23,O=this.a31,j=this.a32,z=this.a33;for(let H=0;H<u;H+=2){const Y=s[H],Q=s[H+1],re=y*Y+T*Q+z;s[H]=(h*Y+x*Q+O)/re,s[H+1]=(g*Y+_*Q+j)/re}}transformPointsWithValues(s,u){const h=this.a11,g=this.a12,y=this.a13,x=this.a21,_=this.a22,T=this.a23,O=this.a31,j=this.a32,z=this.a33,H=s.length;for(let Y=0;Y<H;Y++){const Q=s[Y],re=u[Y],oe=y*Q+T*re+z;s[Y]=(h*Q+x*re+O)/oe,u[Y]=(g*Q+_*re+j)/oe}}static squareToQuadrilateral(s,u,h,g,y,x,_,T){const O=s-h+y-_,j=u-g+x-T;if(O===0&&j===0)return new Zr(h-s,y-h,s,g-u,x-g,u,0,0,1);{const z=h-y,H=_-y,Y=g-x,Q=T-x,re=z*Q-H*Y,oe=(O*Q-H*j)/re,ge=(z*j-O*Y)/re;return new Zr(h-s+oe*h,_-s+ge*_,s,g-u+oe*g,T-u+ge*T,u,oe,ge,1)}}static quadrilateralToSquare(s,u,h,g,y,x,_,T){return Zr.squareToQuadrilateral(s,u,h,g,y,x,_,T).buildAdjoint()}buildAdjoint(){return new Zr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Zr(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Fl extends Bl{sampleGrid(s,u,h,g,y,x,_,T,O,j,z,H,Y,Q,re,oe,ge,Re,ke){const Te=Zr.quadrilateralToQuadrilateral(g,y,x,_,T,O,j,z,H,Y,Q,re,oe,ge,Re,ke);return this.sampleGridWithTransform(s,u,h,Te)}sampleGridWithTransform(s,u,h,g){if(u<=0||h<=0)throw new te;const y=new me(u,h),x=new Float32Array(2*u);for(let _=0;_<h;_++){const T=x.length,O=_+.5;for(let j=0;j<T;j+=2)x[j]=j/2+.5,x[j+1]=O;g.transformPoints(x),Bl.checkAndNudgePoints(s,x);try{for(let j=0;j<T;j+=2)s.get(Math.floor(x[j]),Math.floor(x[j+1]))&&y.set(j/2,_)}catch{throw new te}}return y}}class mi{static setGridSampler(s){mi.gridSampler=s}static getInstance(){return mi.gridSampler}}mi.gridSampler=new Fl;class lr{constructor(s,u){this.x=s,this.y=u}toResultPoint(){return new ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Us{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let u=this.getMatrixCenter(),h=this.getBullsEyeCorners(u);if(s){let x=h[0];h[0]=h[2],h[2]=x}this.extractParameters(h);let g=this.sampleGrid(this.image,h[this.shift%4],h[(this.shift+1)%4],h[(this.shift+2)%4],h[(this.shift+3)%4]),y=this.getMatrixCornerPoints(h);return new pc(g,y,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new te;let u=2*this.nbCenterLayers,h=new Int32Array([this.sampleLine(s[0],s[1],u),this.sampleLine(s[1],s[2],u),this.sampleLine(s[2],s[3],u),this.sampleLine(s[3],s[0],u)]);this.shift=this.getRotation(h,u);let g=0;for(let x=0;x<4;x++){let _=h[(this.shift+x)%4];this.compact?(g<<=7,g+=_>>1&127):(g<<=10,g+=(_>>2&992)+(_>>1&31))}let y=this.getCorrectedParameterData(g,this.compact);this.compact?(this.nbLayers=(y>>6)+1,this.nbDataBlocks=(y&63)+1):(this.nbLayers=(y>>11)+1,this.nbDataBlocks=(y&2047)+1)}getRotation(s,u){let h=0;s.forEach((g,y,x)=>{let _=(g>>u-2<<1)+(g&1);h=(h<<3)+_}),h=((h&1)<<11)+(h>>1);for(let g=0;g<4;g++)if(L.bitCount(h^this.EXPECTED_CORNER_BITS[g])<=2)return g;throw new te}getCorrectedParameterData(s,u){let h,g;u?(h=7,g=2):(h=10,g=4);let y=h-g,x=new Int32Array(h);for(let T=h-1;T>=0;--T)x[T]=s&15,s>>=4;try{new An(Ke.AZTEC_PARAM).decode(x,y)}catch{throw new te}let _=0;for(let T=0;T<g;T++)_=(_<<4)+x[T];return _}getBullsEyeCorners(s){let u=s,h=s,g=s,y=s,x=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let z=this.getFirstDifferent(u,x,1,-1),H=this.getFirstDifferent(h,x,1,1),Y=this.getFirstDifferent(g,x,-1,1),Q=this.getFirstDifferent(y,x,-1,-1);if(this.nbCenterLayers>2){let re=this.distancePoint(Q,z)*this.nbCenterLayers/(this.distancePoint(y,u)*(this.nbCenterLayers+2));if(re<.75||re>1.25||!this.isWhiteOrBlackRectangle(z,H,Y,Q))break}u=z,h=H,g=Y,y=Q,x=!x}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new te;this.compact=this.nbCenterLayers===5;let _=new ze(u.getX()+.5,u.getY()-.5),T=new ze(h.getX()+.5,h.getY()+.5),O=new ze(g.getX()-.5,g.getY()+.5),j=new ze(y.getX()-.5,y.getY()-.5);return this.expandSquare([_,T,O,j],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,u,h,g;try{let _=new Bi(this.image).detect();s=_[0],u=_[1],h=_[2],g=_[3]}catch{let T=this.image.getWidth()/2,O=this.image.getHeight()/2;s=this.getFirstDifferent(new lr(T+7,O-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new lr(T+7,O+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new lr(T-7,O+7),!1,-1,1).toResultPoint(),g=this.getFirstDifferent(new lr(T-7,O-7),!1,-1,-1).toResultPoint()}let y=_t.round((s.getX()+g.getX()+u.getX()+h.getX())/4),x=_t.round((s.getY()+g.getY()+u.getY()+h.getY())/4);try{let _=new Bi(this.image,15,y,x).detect();s=_[0],u=_[1],h=_[2],g=_[3]}catch{s=this.getFirstDifferent(new lr(y+7,x-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new lr(y+7,x+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new lr(y-7,x+7),!1,-1,1).toResultPoint(),g=this.getFirstDifferent(new lr(y-7,x-7),!1,-1,-1).toResultPoint()}return y=_t.round((s.getX()+g.getX()+u.getX()+h.getX())/4),x=_t.round((s.getY()+g.getY()+u.getY()+h.getY())/4),new lr(y,x)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,u,h,g,y){let x=mi.getInstance(),_=this.getDimension(),T=_/2-this.nbCenterLayers,O=_/2+this.nbCenterLayers;return x.sampleGrid(s,_,_,T,T,O,T,O,O,T,O,u.getX(),u.getY(),h.getX(),h.getY(),g.getX(),g.getY(),y.getX(),y.getY())}sampleLine(s,u,h){let g=0,y=this.distanceResultPoint(s,u),x=y/h,_=s.getX(),T=s.getY(),O=x*(u.getX()-s.getX())/y,j=x*(u.getY()-s.getY())/y;for(let z=0;z<h;z++)this.image.get(_t.round(_+z*O),_t.round(T+z*j))&&(g|=1<<h-z-1);return g}isWhiteOrBlackRectangle(s,u,h,g){let y=3;s=new lr(s.getX()-y,s.getY()+y),u=new lr(u.getX()-y,u.getY()-y),h=new lr(h.getX()+y,h.getY()-y),g=new lr(g.getX()+y,g.getY()+y);let x=this.getColor(g,s);if(x===0)return!1;let _=this.getColor(s,u);return _!==x||(_=this.getColor(u,h),_!==x)?!1:(_=this.getColor(h,g),_===x)}getColor(s,u){let h=this.distancePoint(s,u),g=(u.getX()-s.getX())/h,y=(u.getY()-s.getY())/h,x=0,_=s.getX(),T=s.getY(),O=this.image.get(s.getX(),s.getY()),j=Math.ceil(h);for(let H=0;H<j;H++)_+=g,T+=y,this.image.get(_t.round(_),_t.round(T))!==O&&x++;let z=x/h;return z>.1&&z<.9?0:z<=.1===O?1:-1}getFirstDifferent(s,u,h,g){let y=s.getX()+h,x=s.getY()+g;for(;this.isValid(y,x)&&this.image.get(y,x)===u;)y+=h,x+=g;for(y-=h,x-=g;this.isValid(y,x)&&this.image.get(y,x)===u;)y+=h;for(y-=h;this.isValid(y,x)&&this.image.get(y,x)===u;)x+=g;return x-=g,new lr(y,x)}expandSquare(s,u,h){let g=h/(2*u),y=s[0].getX()-s[2].getX(),x=s[0].getY()-s[2].getY(),_=(s[0].getX()+s[2].getX())/2,T=(s[0].getY()+s[2].getY())/2,O=new ze(_+g*y,T+g*x),j=new ze(_-g*y,T-g*x);y=s[1].getX()-s[3].getX(),x=s[1].getY()-s[3].getY(),_=(s[1].getX()+s[3].getX())/2,T=(s[1].getY()+s[3].getY())/2;let z=new ze(_+g*y,T+g*x),H=new ze(_-g*y,T-g*x);return[O,z,j,H]}isValid(s,u){return s>=0&&s<this.image.getWidth()&&u>0&&u<this.image.getHeight()}isValidPoint(s){let u=_t.round(s.getX()),h=_t.round(s.getY());return this.isValid(u,h)}distancePoint(s,u){return _t.distance(s.getX(),s.getY(),u.getX(),u.getY())}distanceResultPoint(s,u){return _t.distance(s.getX(),s.getY(),u.getX(),u.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(L.truncDivision(this.nbLayers-4,8)+1)+15}}class Oo{decode(s,u=null){let h=null,g=new Us(s.getBlackMatrix()),y=null,x=null;try{let j=g.detectMirror(!1);y=j.getPoints(),this.reportFoundResultPoints(u,y),x=new Rt().decode(j)}catch(j){h=j}if(x==null)try{let j=g.detectMirror(!0);y=j.getPoints(),this.reportFoundResultPoints(u,y),x=new Rt().decode(j)}catch(j){throw h??j}let _=new Fe(x.getText(),x.getRawBytes(),x.getNumBits(),y,Pe.AZTEC,N.currentTimeMillis()),T=x.getByteSegments();T!=null&&_.putMetadata(it.BYTE_SEGMENTS,T);let O=x.getECLevel();return O!=null&&_.putMetadata(it.ERROR_CORRECTION_LEVEL,O),_}reportFoundResultPoints(s,u){if(s!=null){let h=s.get(q.NEED_RESULT_POINT_CALLBACK);h!=null&&u.forEach((g,y,x)=>{h.foundPossibleResultPoint(g)})}}reset(){}}class Wm extends Be{constructor(s=500){super(new Oo,s)}}class wn{decode(s,u){try{return this.doDecode(s,u)}catch{if(u&&u.get(q.TRY_HARDER)===!0&&s.isRotateSupported()){const y=s.rotateCounterClockwise(),x=this.doDecode(y,u),_=x.getResultMetadata();let T=270;_!==null&&_.get(it.ORIENTATION)===!0&&(T=T+_.get(it.ORIENTATION)%360),x.putMetadata(it.ORIENTATION,T);const O=x.getResultPoints();if(O!==null){const j=y.getHeight();for(let z=0;z<O.length;z++)O[z]=new ze(j-O[z].getY()-1,O[z].getX())}return x}else throw new te}}reset(){}doDecode(s,u){const h=s.getWidth(),g=s.getHeight();let y=new U(h);const x=u&&u.get(q.TRY_HARDER)===!0,_=Math.max(1,g>>(x?8:5));let T;x?T=g:T=15;const O=Math.trunc(g/2);for(let j=0;j<T;j++){const z=Math.trunc((j+1)/2),H=(j&1)===0,Y=O+_*(H?z:-z);if(Y<0||Y>=g)break;try{y=s.getBlackRow(Y,y)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(y.reverse(),u&&u.get(q.NEED_RESULT_POINT_CALLBACK)===!0)){const re=new Map;u.forEach((oe,ge)=>re.set(ge,oe)),re.delete(q.NEED_RESULT_POINT_CALLBACK),u=re}try{const re=this.decodeRow(Y,y,u);if(Q===1){re.putMetadata(it.ORIENTATION,180);const oe=re.getResultPoints();oe!==null&&(oe[0]=new ze(h-oe[0].getX()-1,oe[0].getY()),oe[1]=new ze(h-oe[1].getX()-1,oe[1].getY()))}return re}catch{}}}throw new te}static recordPattern(s,u,h){const g=h.length;for(let O=0;O<g;O++)h[O]=0;const y=s.getSize();if(u>=y)throw new te;let x=!s.get(u),_=0,T=u;for(;T<y;){if(s.get(T)!==x)h[_]++;else{if(++_===g)break;h[_]=1,x=!x}T++}if(!(_===g||_===g-1&&T===y))throw new te}static recordPatternInReverse(s,u,h){let g=h.length,y=s.get(u);for(;u>0&&g>=0;)s.get(--u)!==y&&(g--,y=!y);if(g>=0)throw new te;wn.recordPattern(s,u+1,h)}static patternMatchVariance(s,u,h){const g=s.length;let y=0,x=0;for(let O=0;O<g;O++)y+=s[O],x+=u[O];if(y<x)return Number.POSITIVE_INFINITY;const _=y/x;h*=_;let T=0;for(let O=0;O<g;O++){const j=s[O],z=u[O]*_,H=j>z?j-z:z-j;if(H>h)return Number.POSITIVE_INFINITY;T+=H}return T/y}}class Le extends wn{static findStartPattern(s){const u=s.getSize(),h=s.getNextSet(0);let g=0,y=Int32Array.from([0,0,0,0,0,0]),x=h,_=!1;const T=6;for(let O=h;O<u;O++)if(s.get(O)!==_)y[g]++;else{if(g===T-1){let j=Le.MAX_AVG_VARIANCE,z=-1;for(let H=Le.CODE_START_A;H<=Le.CODE_START_C;H++){const Y=wn.patternMatchVariance(y,Le.CODE_PATTERNS[H],Le.MAX_INDIVIDUAL_VARIANCE);Y<j&&(j=Y,z=H)}if(z>=0&&s.isRange(Math.max(0,x-(O-x)/2),x,!1))return Int32Array.from([x,O,z]);x+=y[0]+y[1],y=y.slice(2,y.length-1),y[g-1]=0,y[g]=0,g--}else g++;y[g]=1,_=!_}throw new te}static decodeCode(s,u,h){wn.recordPattern(s,h,u);let g=Le.MAX_AVG_VARIANCE,y=-1;for(let x=0;x<Le.CODE_PATTERNS.length;x++){const _=Le.CODE_PATTERNS[x],T=this.patternMatchVariance(u,_,Le.MAX_INDIVIDUAL_VARIANCE);T<g&&(g=T,y=x)}if(y>=0)return y;throw new te}decodeRow(s,u,h){const g=h&&h.get(q.ASSUME_GS1)===!0,y=Le.findStartPattern(u),x=y[2];let _=0;const T=new Uint8Array(20);T[_++]=x;let O;switch(x){case Le.CODE_START_A:O=Le.CODE_CODE_A;break;case Le.CODE_START_B:O=Le.CODE_CODE_B;break;case Le.CODE_START_C:O=Le.CODE_CODE_C;break;default:throw new W}let j=!1,z=!1,H="",Y=y[0],Q=y[1];const re=Int32Array.from([0,0,0,0,0,0]);let oe=0,ge=0,Re=x,ke=0,Te=!0,wt=!1,pt=!1;for(;!j;){const fo=z;switch(z=!1,oe=ge,ge=Le.decodeCode(u,re,Q),T[_++]=ge,ge!==Le.CODE_STOP&&(Te=!0),ge!==Le.CODE_STOP&&(ke++,Re+=ke*ge),Y=Q,Q+=re.reduce((Js,Dc)=>Js+Dc,0),ge){case Le.CODE_START_A:case Le.CODE_START_B:case Le.CODE_START_C:throw new W}switch(O){case Le.CODE_CODE_A:if(ge<64)pt===wt?H+=String.fromCharCode(32+ge):H+=String.fromCharCode(32+ge+128),pt=!1;else if(ge<96)pt===wt?H+=String.fromCharCode(ge-64):H+=String.fromCharCode(ge+64),pt=!1;else switch(ge!==Le.CODE_STOP&&(Te=!1),ge){case Le.CODE_FNC_1:g&&(H.length===0?H+="]C1":H+="");break;case Le.CODE_FNC_2:case Le.CODE_FNC_3:break;case Le.CODE_FNC_4_A:!wt&&pt?(wt=!0,pt=!1):wt&&pt?(wt=!1,pt=!1):pt=!0;break;case Le.CODE_SHIFT:z=!0,O=Le.CODE_CODE_B;break;case Le.CODE_CODE_B:O=Le.CODE_CODE_B;break;case Le.CODE_CODE_C:O=Le.CODE_CODE_C;break;case Le.CODE_STOP:j=!0;break}break;case Le.CODE_CODE_B:if(ge<96)pt===wt?H+=String.fromCharCode(32+ge):H+=String.fromCharCode(32+ge+128),pt=!1;else switch(ge!==Le.CODE_STOP&&(Te=!1),ge){case Le.CODE_FNC_1:g&&(H.length===0?H+="]C1":H+="");break;case Le.CODE_FNC_2:case Le.CODE_FNC_3:break;case Le.CODE_FNC_4_B:!wt&&pt?(wt=!0,pt=!1):wt&&pt?(wt=!1,pt=!1):pt=!0;break;case Le.CODE_SHIFT:z=!0,O=Le.CODE_CODE_A;break;case Le.CODE_CODE_A:O=Le.CODE_CODE_A;break;case Le.CODE_CODE_C:O=Le.CODE_CODE_C;break;case Le.CODE_STOP:j=!0;break}break;case Le.CODE_CODE_C:if(ge<100)ge<10&&(H+="0"),H+=ge;else switch(ge!==Le.CODE_STOP&&(Te=!1),ge){case Le.CODE_FNC_1:g&&(H.length===0?H+="]C1":H+="");break;case Le.CODE_CODE_A:O=Le.CODE_CODE_A;break;case Le.CODE_CODE_B:O=Le.CODE_CODE_B;break;case Le.CODE_STOP:j=!0;break}break}fo&&(O=O===Le.CODE_CODE_A?Le.CODE_CODE_B:Le.CODE_CODE_A)}const Mr=Q-Y;if(Q=u.getNextUnset(Q),!u.isRange(Q,Math.min(u.getSize(),Q+(Q-Y)/2),!1))throw new te;if(Re-=ke*oe,Re%103!==oe)throw new C;const Ei=H.length;if(Ei===0)throw new te;Ei>0&&Te&&(O===Le.CODE_CODE_C?H=H.substring(0,Ei-2):H=H.substring(0,Ei-1));const Bn=(y[1]+y[0])/2,Bt=Y+Mr/2,bn=T.length,_r=new Uint8Array(bn);for(let fo=0;fo<bn;fo++)_r[fo]=T[fo];const ts=[new ze(Bn,s),new ze(Bt,s)];return new Fe(H,_r,0,ts,Pe.CODE_128,new Date().getTime())}}Le.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Le.MAX_AVG_VARIANCE=.25,Le.MAX_INDIVIDUAL_VARIANCE=.7,Le.CODE_SHIFT=98,Le.CODE_CODE_C=99,Le.CODE_CODE_B=100,Le.CODE_CODE_A=101,Le.CODE_FNC_1=102,Le.CODE_FNC_2=97,Le.CODE_FNC_3=96,Le.CODE_FNC_4_A=101,Le.CODE_FNC_4_B=100,Le.CODE_START_A=103,Le.CODE_START_B=104,Le.CODE_START_C=105,Le.CODE_STOP=106;class Mn extends wn{constructor(s=!1,u=!1){super(),this.usingCheckDigit=s,this.extendedMode=u,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,u,h){let g=this.counters;g.fill(0),this.decodeRowResult="";let y=Mn.findAsteriskPattern(u,g),x=u.getNextSet(y[1]),_=u.getSize(),T,O;do{Mn.recordPattern(u,x,g);let re=Mn.toNarrowWidePattern(g);if(re<0)throw new te;T=Mn.patternToChar(re),this.decodeRowResult+=T,O=x;for(let oe of g)x+=oe;x=u.getNextSet(x)}while(T!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let j=0;for(let re of g)j+=re;let z=x-O-j;if(x!==_&&z*2<j)throw new te;if(this.usingCheckDigit){let re=this.decodeRowResult.length-1,oe=0;for(let ge=0;ge<re;ge++)oe+=Mn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ge));if(this.decodeRowResult.charAt(re)!==Mn.ALPHABET_STRING.charAt(oe%43))throw new C;this.decodeRowResult=this.decodeRowResult.substring(0,re)}if(this.decodeRowResult.length===0)throw new te;let H;this.extendedMode?H=Mn.decodeExtended(this.decodeRowResult):H=this.decodeRowResult;let Y=(y[1]+y[0])/2,Q=O+j/2;return new Fe(H,null,0,[new ze(Y,s),new ze(Q,s)],Pe.CODE_39,new Date().getTime())}static findAsteriskPattern(s,u){let h=s.getSize(),g=s.getNextSet(0),y=0,x=g,_=!1,T=u.length;for(let O=g;O<h;O++)if(s.get(O)!==_)u[y]++;else{if(y===T-1){if(this.toNarrowWidePattern(u)===Mn.ASTERISK_ENCODING&&s.isRange(Math.max(0,x-Math.floor((O-x)/2)),x,!1))return[x,O];x+=u[0]+u[1],u.copyWithin(0,2,2+y-1),u[y-1]=0,u[y]=0,y--}else y++;u[y]=1,_=!_}throw new te}static toNarrowWidePattern(s){let u=s.length,h=0,g;do{let y=2147483647;for(let T of s)T<y&&T>h&&(y=T);h=y,g=0;let x=0,_=0;for(let T=0;T<u;T++){let O=s[T];O>h&&(_|=1<<u-1-T,g++,x+=O)}if(g===3){for(let T=0;T<u&&g>0;T++){let O=s[T];if(O>h&&(g--,O*2>=x))return-1}return _}}while(g>3);return-1}static patternToChar(s){for(let u=0;u<Mn.CHARACTER_ENCODINGS.length;u++)if(Mn.CHARACTER_ENCODINGS[u]===s)return Mn.ALPHABET_STRING.charAt(u);if(s===Mn.ASTERISK_ENCODING)return"*";throw new te}static decodeExtended(s){let u=s.length,h="";for(let g=0;g<u;g++){let y=s.charAt(g);if(y==="+"||y==="$"||y==="%"||y==="/"){let x=s.charAt(g+1),_="\0";switch(y){case"+":if(x>="A"&&x<="Z")_=String.fromCharCode(x.charCodeAt(0)+32);else throw new W;break;case"$":if(x>="A"&&x<="Z")_=String.fromCharCode(x.charCodeAt(0)-64);else throw new W;break;case"%":if(x>="A"&&x<="E")_=String.fromCharCode(x.charCodeAt(0)-38);else if(x>="F"&&x<="J")_=String.fromCharCode(x.charCodeAt(0)-11);else if(x>="K"&&x<="O")_=String.fromCharCode(x.charCodeAt(0)+16);else if(x>="P"&&x<="T")_=String.fromCharCode(x.charCodeAt(0)+43);else if(x==="U")_="\0";else if(x==="V")_="@";else if(x==="W")_="`";else if(x==="X"||x==="Y"||x==="Z")_="";else throw new W;break;case"/":if(x>="A"&&x<="O")_=String.fromCharCode(x.charCodeAt(0)-32);else if(x==="Z")_=":";else throw new W;break}h+=_,g++}else h+=y}return h}}Mn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Mn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Mn.ASTERISK_ENCODING=148;class Lt extends wn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,u,h){let g=this.decodeStart(u),y=this.decodeEnd(u),x=new be;Lt.decodeMiddle(u,g[1],y[0],x);let _=x.toString(),T=null;h!=null&&(T=h.get(q.ALLOWED_LENGTHS)),T==null&&(T=Lt.DEFAULT_ALLOWED_LENGTHS);let O=_.length,j=!1,z=0;for(let Q of T){if(O===Q){j=!0;break}Q>z&&(z=Q)}if(!j&&O>z&&(j=!0),!j)throw new W;const H=[new ze(g[1],s),new ze(y[0],s)];return new Fe(_,null,0,H,Pe.ITF,new Date().getTime())}static decodeMiddle(s,u,h,g){let y=new Int32Array(10),x=new Int32Array(5),_=new Int32Array(5);for(y.fill(0),x.fill(0),_.fill(0);u<h;){wn.recordPattern(s,u,y);for(let O=0;O<5;O++){let j=2*O;x[O]=y[j],_[O]=y[j+1]}let T=Lt.decodeDigit(x);g.append(T.toString()),T=this.decodeDigit(_),g.append(T.toString()),y.forEach(function(O){u+=O})}}decodeStart(s){let u=Lt.skipWhiteSpace(s),h=Lt.findGuardPattern(s,u,Lt.START_PATTERN);return this.narrowLineWidth=(h[1]-h[0])/4,this.validateQuietZone(s,h[0]),h}validateQuietZone(s,u){let h=this.narrowLineWidth*10;h=h<u?h:u;for(let g=u-1;h>0&&g>=0&&!s.get(g);g--)h--;if(h!==0)throw new te}static skipWhiteSpace(s){const u=s.getSize(),h=s.getNextSet(0);if(h===u)throw new te;return h}decodeEnd(s){s.reverse();try{let u=Lt.skipWhiteSpace(s),h;try{h=Lt.findGuardPattern(s,u,Lt.END_PATTERN_REVERSED[0])}catch(y){y instanceof te&&(h=Lt.findGuardPattern(s,u,Lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,h[0]);let g=h[0];return h[0]=s.getSize()-h[1],h[1]=s.getSize()-g,h}finally{s.reverse()}}static findGuardPattern(s,u,h){let g=h.length,y=new Int32Array(g),x=s.getSize(),_=!1,T=0,O=u;y.fill(0);for(let j=u;j<x;j++)if(s.get(j)!==_)y[T]++;else{if(T===g-1){if(wn.patternMatchVariance(y,h,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return[O,j];O+=y[0]+y[1],N.arraycopy(y,2,y,0,T-1),y[T-1]=0,y[T]=0,T--}else T++;y[T]=1,_=!_}throw new te}static decodeDigit(s){let u=Lt.MAX_AVG_VARIANCE,h=-1,g=Lt.PATTERNS.length;for(let y=0;y<g;y++){let x=Lt.PATTERNS[y],_=wn.patternMatchVariance(s,x,Lt.MAX_INDIVIDUAL_VARIANCE);_<u?(u=_,h=y):_===u&&(h=-1)}if(h>=0)return h%10;throw new te}}Lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Lt.MAX_AVG_VARIANCE=.38,Lt.MAX_INDIVIDUAL_VARIANCE=.5,Lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Lt.START_PATTERN=Int32Array.from([1,1,1,1]),Lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Qt extends wn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let u=!1,h,g=0,y=Int32Array.from([0,0,0]);for(;!u;){y=Int32Array.from([0,0,0]),h=Qt.findGuardPattern(s,g,!1,this.START_END_PATTERN,y);let x=h[0];g=h[1];let _=x-(g-x);_>=0&&(u=s.isRange(_,x,!1))}return h}static checkChecksum(s){return Qt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let u=s.length;if(u===0)return!1;let h=parseInt(s.charAt(u-1),10);return Qt.getStandardUPCEANChecksum(s.substring(0,u-1))===h}static getStandardUPCEANChecksum(s){let u=s.length,h=0;for(let g=u-1;g>=0;g-=2){let y=s.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new W;h+=y}h*=3;for(let g=u-2;g>=0;g-=2){let y=s.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new W;h+=y}return(1e3-h)%10}static decodeEnd(s,u){return Qt.findGuardPattern(s,u,!1,Qt.START_END_PATTERN,new Int32Array(Qt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,u,h,g){return this.findGuardPattern(s,u,h,g,new Int32Array(g.length))}static findGuardPattern(s,u,h,g,y){let x=s.getSize();u=h?s.getNextUnset(u):s.getNextSet(u);let _=0,T=u,O=g.length,j=h;for(let z=u;z<x;z++)if(s.get(z)!==j)y[_]++;else{if(_===O-1){if(wn.patternMatchVariance(y,g,Qt.MAX_INDIVIDUAL_VARIANCE)<Qt.MAX_AVG_VARIANCE)return Int32Array.from([T,z]);T+=y[0]+y[1];let H=y.slice(2,y.length-1);for(let Y=0;Y<_-1;Y++)y[Y]=H[Y];y[_-1]=0,y[_]=0,_--}else _++;y[_]=1,j=!j}throw new te}static decodeDigit(s,u,h,g){this.recordPattern(s,h,u);let y=this.MAX_AVG_VARIANCE,x=-1,_=g.length;for(let T=0;T<_;T++){let O=g[T],j=wn.patternMatchVariance(u,O,Qt.MAX_INDIVIDUAL_VARIANCE);j<y&&(y=j,x=T)}if(x>=0)return x;throw new te}}Qt.MAX_AVG_VARIANCE=.48,Qt.MAX_INDIVIDUAL_VARIANCE=.7,Qt.START_END_PATTERN=Int32Array.from([1,1,1]),Qt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Qt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Xo{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,u,h){let g=this.decodeRowStringBuffer,y=this.decodeMiddle(u,h,g),x=g.toString(),_=Xo.parseExtensionString(x),T=[new ze((h[0]+h[1])/2,s),new ze(y,s)],O=new Fe(x,null,0,T,Pe.UPC_EAN_EXTENSION,new Date().getTime());return _!=null&&O.putAllMetadata(_),O}decodeMiddle(s,u,h){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=s.getSize(),x=u[1],_=0;for(let O=0;O<5&&x<y;O++){let j=Qt.decodeDigit(s,g,x,Qt.L_AND_G_PATTERNS);h+=String.fromCharCode(48+j%10);for(let z of g)x+=z;j>=10&&(_|=1<<4-O),O!==4&&(x=s.getNextSet(x),x=s.getNextUnset(x))}if(h.length!==5)throw new te;let T=this.determineCheckDigit(_);if(Xo.extensionChecksum(h.toString())!==T)throw new te;return x}static extensionChecksum(s){let u=s.length,h=0;for(let g=u-2;g>=0;g-=2)h+=s.charAt(g).charCodeAt(0)-48;h*=3;for(let g=u-1;g>=0;g-=2)h+=s.charAt(g).charCodeAt(0)-48;return h*=3,h%10}determineCheckDigit(s){for(let u=0;u<10;u++)if(s===this.CHECK_DIGIT_ENCODINGS[u])return u;throw new te}static parseExtensionString(s){if(s.length!==5)return null;let u=Xo.parseExtension5String(s);return u==null?null:new Map([[it.SUGGESTED_PRICE,u]])}static parseExtension5String(s){let u;switch(s.charAt(0)){case"0":u="";break;case"5":u="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}u="";break;default:u="";break}let h=parseInt(s.substring(1)),g=(h/100).toString(),y=h%100,x=y<10?"0"+y:y.toString();return u+g+"."+x}}class Pa{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,u,h){let g=this.decodeRowStringBuffer,y=this.decodeMiddle(u,h,g),x=g.toString(),_=Pa.parseExtensionString(x),T=[new ze((h[0]+h[1])/2,s),new ze(y,s)],O=new Fe(x,null,0,T,Pe.UPC_EAN_EXTENSION,new Date().getTime());return _!=null&&O.putAllMetadata(_),O}decodeMiddle(s,u,h){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=s.getSize(),x=u[1],_=0;for(let T=0;T<2&&x<y;T++){let O=Qt.decodeDigit(s,g,x,Qt.L_AND_G_PATTERNS);h+=String.fromCharCode(48+O%10);for(let j of g)x+=j;O>=10&&(_|=1<<1-T),T!==1&&(x=s.getNextSet(x),x=s.getNextUnset(x))}if(h.length!==2)throw new te;if(parseInt(h.toString())%4!==_)throw new te;return x}static parseExtensionString(s){return s.length!==2?null:new Map([[it.ISSUE_NUMBER,parseInt(s)]])}}class jl{static decodeRow(s,u,h){let g=Qt.findGuardPattern(u,h,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Xo().decodeRow(s,u,g)}catch{return new Pa().decodeRow(s,u,g)}}}jl.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class bt extends Qt{constructor(){super(),this.decodeRowStringBuffer="",bt.L_AND_G_PATTERNS=bt.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let u=bt.L_PATTERNS[s-10],h=new Int32Array(u.length);for(let g=0;g<u.length;g++)h[g]=u[u.length-g-1];bt.L_AND_G_PATTERNS[s]=h}}decodeRow(s,u,h){let g=bt.findStartGuardPattern(u),y=h==null?null:h.get(q.NEED_RESULT_POINT_CALLBACK);if(y!=null){const Te=new ze((g[0]+g[1])/2,s);y.foundPossibleResultPoint(Te)}let x=this.decodeMiddle(u,g,this.decodeRowStringBuffer),_=x.rowOffset,T=x.resultString;if(y!=null){const Te=new ze(_,s);y.foundPossibleResultPoint(Te)}let O=this.decodeEnd(u,_);if(y!=null){const Te=new ze((O[0]+O[1])/2,s);y.foundPossibleResultPoint(Te)}let j=O[1],z=j+(j-O[0]);if(z>=u.getSize()||!u.isRange(j,z,!1))throw new te;let H=T.toString();if(H.length<8)throw new W;if(!bt.checkChecksum(H))throw new C;let Y=(g[1]+g[0])/2,Q=(O[1]+O[0])/2,re=this.getBarcodeFormat(),oe=[new ze(Y,s),new ze(Q,s)],ge=new Fe(H,null,0,oe,re,new Date().getTime()),Re=0;try{let Te=jl.decodeRow(s,u,O[1]);ge.putMetadata(it.UPC_EAN_EXTENSION,Te.getText()),ge.putAllMetadata(Te.getResultMetadata()),ge.addResultPoints(Te.getResultPoints()),Re=Te.getText().length}catch{}let ke=h==null?null:h.get(q.ALLOWED_EAN_EXTENSIONS);if(ke!=null){let Te=!1;for(let wt in ke)if(Re.toString()===wt){Te=!0;break}if(!Te)throw new te}return ge}decodeEnd(s,u){return bt.findGuardPattern(s,u,!1,bt.START_END_PATTERN,new Int32Array(bt.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return bt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let u=s.length;if(u===0)return!1;let h=parseInt(s.charAt(u-1),10);return bt.getStandardUPCEANChecksum(s.substring(0,u-1))===h}static getStandardUPCEANChecksum(s){let u=s.length,h=0;for(let g=u-1;g>=0;g-=2){let y=s.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new W;h+=y}h*=3;for(let g=u-2;g>=0;g-=2){let y=s.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new W;h+=y}return(1e3-h)%10}}class Qr extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,u,h){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=s.getSize(),x=u[1],_=0;for(let O=0;O<6&&x<y;O++){let j=bt.decodeDigit(s,g,x,bt.L_AND_G_PATTERNS);h+=String.fromCharCode(48+j%10);for(let z of g)x+=z;j>=10&&(_|=1<<5-O)}h=Qr.determineFirstDigit(h,_),x=bt.findGuardPattern(s,x,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let O=0;O<6&&x<y;O++){let j=bt.decodeDigit(s,g,x,bt.L_PATTERNS);h+=String.fromCharCode(48+j);for(let z of g)x+=z}return{rowOffset:x,resultString:h}}getBarcodeFormat(){return Pe.EAN_13}static determineFirstDigit(s,u){for(let h=0;h<10;h++)if(u===this.FIRST_DIGIT_ENCODINGS[h])return s=String.fromCharCode(48+h)+s,s;throw new te}}Qr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class mc extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,u,h){const g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=s.getSize(),x=u[1];for(let T=0;T<4&&x<y;T++){let O=bt.decodeDigit(s,g,x,bt.L_PATTERNS);h+=String.fromCharCode(48+O);for(let j of g)x+=j}x=bt.findGuardPattern(s,x,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<4&&x<y;T++){let O=bt.decodeDigit(s,g,x,bt.L_PATTERNS);h+=String.fromCharCode(48+O);for(let j of g)x+=j}return{rowOffset:x,resultString:h}}getBarcodeFormat(){return Pe.EAN_8}}class gc extends bt{constructor(){super(...arguments),this.ean13Reader=new Qr}getBarcodeFormat(){return Pe.UPC_A}decode(s,u){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,u,h){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,u,h))}decodeMiddle(s,u,h){return this.ean13Reader.decodeMiddle(s,u,h)}maybeReturnResult(s){let u=s.getText();if(u.charAt(0)==="0"){let h=new Fe(u.substring(1),null,null,s.getResultPoints(),Pe.UPC_A);return s.getResultMetadata()!=null&&h.putAllMetadata(s.getResultMetadata()),h}else throw new te}reset(){this.ean13Reader.reset()}}class ei extends bt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,u,h){const g=this.decodeMiddleCounters.map(O=>O);g[0]=0,g[1]=0,g[2]=0,g[3]=0;const y=s.getSize();let x=u[1],_=0;for(let O=0;O<6&&x<y;O++){const j=ei.decodeDigit(s,g,x,ei.L_AND_G_PATTERNS);h+=String.fromCharCode(48+j%10);for(let z of g)x+=z;j>=10&&(_|=1<<5-O)}let T=ei.determineNumSysAndCheckDigit(h,_);return{rowOffset:x,resultString:T}}decodeEnd(s,u){return ei.findGuardPatternWithoutCounters(s,u,!0,ei.MIDDLE_END_PATTERN)}checkChecksum(s){return bt.checkChecksum(ei.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,u){for(let h=0;h<=1;h++)for(let g=0;g<10;g++)if(u===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[h][g]){let y=String.fromCharCode(48+h),x=String.fromCharCode(48+g);return y+s+x}throw te.getNotFoundInstance()}getBarcodeFormat(){return Pe.UPC_E}static convertUPCEtoUPCA(s){const u=s.slice(1,7).split("").map(y=>y.charCodeAt(0)),h=new be;h.append(s.charAt(0));let g=u[5];switch(g){case 0:case 1:case 2:h.appendChars(u,0,2),h.append(g),h.append("0000"),h.appendChars(u,2,3);break;case 3:h.appendChars(u,0,3),h.append("00000"),h.appendChars(u,3,2);break;case 4:h.appendChars(u,0,4),h.append("00000"),h.append(u[4]);break;default:h.appendChars(u,0,5),h.append("0000"),h.append(g);break}return s.length>=8&&h.append(s.charAt(7)),h.toString()}}ei.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ei.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ul extends wn{constructor(s){super();let u=s==null?null:s.get(q.POSSIBLE_FORMATS),h=[];r(u)?(h.push(new Qr),h.push(new gc),h.push(new mc),h.push(new ei)):(u.indexOf(Pe.EAN_13)>-1&&h.push(new Qr),u.indexOf(Pe.UPC_A)>-1&&h.push(new gc),u.indexOf(Pe.EAN_8)>-1&&h.push(new mc),u.indexOf(Pe.UPC_E)>-1&&h.push(new ei)),this.readers=h}decodeRow(s,u,h){for(let g of this.readers)try{const y=g.decodeRow(s,u,h),x=y.getBarcodeFormat()===Pe.EAN_13&&y.getText().charAt(0)==="0",_=h==null?null:h.get(q.POSSIBLE_FORMATS),T=_==null||_.includes(Pe.UPC_A);if(x&&T){const O=y.getRawBytes(),j=new Fe(y.getText().substring(1),O,O?O.length:null,y.getResultPoints(),Pe.UPC_A);return j.putAllMetadata(y.getResultMetadata()),j}return y}catch{}throw new te}reset(){for(let s of this.readers)s.reset()}}class Xn extends wn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,u){for(let h=0;h<u.length;h++)if(wn.patternMatchVariance(s,u[h],Xn.MAX_INDIVIDUAL_VARIANCE)<Xn.MAX_AVG_VARIANCE)return h;throw new te}static count(s){return _t.sum(new Int32Array(s))}static increment(s,u){let h=0,g=u[0];for(let y=1;y<s.length;y++)u[y]>g&&(g=u[y],h=y);s[h]++}static decrement(s,u){let h=0,g=u[0];for(let y=1;y<s.length;y++)u[y]<g&&(g=u[y],h=y);s[h]--}static isFinderPattern(s){let u=s[0]+s[1],h=u+s[2]+s[3],g=u/h;if(g>=Xn.MIN_FINDER_PATTERN_RATIO&&g<=Xn.MAX_FINDER_PATTERN_RATIO){let y=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER;for(let _ of s)_>x&&(x=_),_<y&&(y=_);return x<10*y}return!1}}Xn.MAX_AVG_VARIANCE=.2,Xn.MAX_INDIVIDUAL_VARIANCE=.45,Xn.MIN_FINDER_PATTERN_RATIO=9.5/12,Xn.MAX_FINDER_PATTERN_RATIO=12.5/14;class ko{constructor(s,u){this.value=s,this.checksumPortion=u}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof ko))return!1;const u=s;return this.value===u.value&&this.checksumPortion===u.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Na{constructor(s,u,h,g,y){this.value=s,this.startEnd=u,this.value=s,this.startEnd=u,this.resultPoints=new Array,this.resultPoints.push(new ze(h,y)),this.resultPoints.push(new ze(g,y))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Na))return!1;const u=s;return this.value===u.value}hashCode(){return this.value}}class Rr{constructor(){}static getRSSvalue(s,u,h){let g=0;for(let T of s)g+=T;let y=0,x=0,_=s.length;for(let T=0;T<_-1;T++){let O;for(O=1,x|=1<<T;O<s[T];O++,x&=~(1<<T)){let j=Rr.combins(g-O-1,_-T-2);if(h&&x===0&&g-O-(_-T-1)>=_-T-1&&(j-=Rr.combins(g-O-(_-T),_-T-2)),_-T-1>1){let z=0;for(let H=g-O-(_-T-2);H>u;H--)z+=Rr.combins(g-O-H-1,_-T-3);j-=z*(_-1-T)}else g-O>u&&j--;y+=j}g-=O}return y}static combins(s,u){let h,g;s-u>u?(g=u,h=s-u):(g=s-u,h=u);let y=1,x=1;for(let _=s;_>h;_--)y*=_,x<=g&&(y/=x,x++);for(;x<=g;)y/=x,x++;return y}}class vc{static buildBitArray(s){let u=s.length*2-1;s[s.length-1].getRightChar()==null&&(u-=1);let h=12*u,g=new U(h),y=0,_=s[0].getRightChar().getValue();for(let T=11;T>=0;--T)(_&1<<T)!=0&&g.set(y),y++;for(let T=1;T<s.length;++T){let O=s[T],j=O.getLeftChar().getValue();for(let z=11;z>=0;--z)(j&1<<z)!=0&&g.set(y),y++;if(O.getRightChar()!=null){let z=O.getRightChar().getValue();for(let H=11;H>=0;--H)(z&1<<H)!=0&&g.set(y),y++}}return g}}class gi{constructor(s,u){u?this.decodedInformation=null:(this.finished=s,this.decodedInformation=u)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class yc{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class zn extends yc{constructor(s,u){super(s),this.value=u}getValue(){return this.value}isFNC1(){return this.value===zn.FNC1}}zn.FNC1="$";class Fi extends yc{constructor(s,u,h){super(s),h?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=u}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class wr extends yc{constructor(s,u,h){if(super(s),u<0||u>10||h<0||h>10)throw new W;this.firstDigit=u,this.secondDigit=h}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===wr.FNC1}isSecondDigitFNC1(){return this.secondDigit===wr.FNC1}isAnyFNC1(){return this.firstDigit===wr.FNC1||this.secondDigit===wr.FNC1}}wr.FNC1=10;class Ue{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new te;let u=s.substring(0,2);for(let y of Ue.TWO_DIGIT_DATA_LENGTH)if(y[0]===u)return y[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(2,y[2],s):Ue.processFixedAI(2,y[1],s);if(s.length<3)throw new te;let h=s.substring(0,3);for(let y of Ue.THREE_DIGIT_DATA_LENGTH)if(y[0]===h)return y[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(3,y[2],s):Ue.processFixedAI(3,y[1],s);for(let y of Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(y[0]===h)return y[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,y[2],s):Ue.processFixedAI(4,y[1],s);if(s.length<4)throw new te;let g=s.substring(0,4);for(let y of Ue.FOUR_DIGIT_DATA_LENGTH)if(y[0]===g)return y[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,y[2],s):Ue.processFixedAI(4,y[1],s);throw new te}static processFixedAI(s,u,h){if(h.length<s)throw new te;let g=h.substring(0,s);if(h.length<s+u)throw new te;let y=h.substring(s,s+u),x=h.substring(s+u),_="("+g+")"+y,T=Ue.parseFieldsInGeneralPurpose(x);return T==null?_:_+T}static processVariableAI(s,u,h){let g=h.substring(0,s),y;h.length<s+u?y=h.length:y=s+u;let x=h.substring(s,y),_=h.substring(y),T="("+g+")"+x,O=Ue.parseFieldsInGeneralPurpose(_);return O==null?T:T+O}}Ue.VARIABLE_LENGTH=[],Ue.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ue.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ue.VARIABLE_LENGTH,20],["22",Ue.VARIABLE_LENGTH,29],["30",Ue.VARIABLE_LENGTH,8],["37",Ue.VARIABLE_LENGTH,8],["90",Ue.VARIABLE_LENGTH,30],["91",Ue.VARIABLE_LENGTH,30],["92",Ue.VARIABLE_LENGTH,30],["93",Ue.VARIABLE_LENGTH,30],["94",Ue.VARIABLE_LENGTH,30],["95",Ue.VARIABLE_LENGTH,30],["96",Ue.VARIABLE_LENGTH,30],["97",Ue.VARIABLE_LENGTH,3],["98",Ue.VARIABLE_LENGTH,30],["99",Ue.VARIABLE_LENGTH,30]],Ue.THREE_DIGIT_DATA_LENGTH=[["240",Ue.VARIABLE_LENGTH,30],["241",Ue.VARIABLE_LENGTH,30],["242",Ue.VARIABLE_LENGTH,6],["250",Ue.VARIABLE_LENGTH,30],["251",Ue.VARIABLE_LENGTH,30],["253",Ue.VARIABLE_LENGTH,17],["254",Ue.VARIABLE_LENGTH,20],["400",Ue.VARIABLE_LENGTH,30],["401",Ue.VARIABLE_LENGTH,30],["402",17],["403",Ue.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ue.VARIABLE_LENGTH,20],["421",Ue.VARIABLE_LENGTH,15],["422",3],["423",Ue.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ue.VARIABLE_LENGTH,15],["391",Ue.VARIABLE_LENGTH,18],["392",Ue.VARIABLE_LENGTH,15],["393",Ue.VARIABLE_LENGTH,18],["703",Ue.VARIABLE_LENGTH,30]],Ue.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ue.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ue.VARIABLE_LENGTH,20],["8003",Ue.VARIABLE_LENGTH,30],["8004",Ue.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ue.VARIABLE_LENGTH,30],["8008",Ue.VARIABLE_LENGTH,12],["8018",18],["8020",Ue.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ue.VARIABLE_LENGTH,70],["8200",Ue.VARIABLE_LENGTH,70]];class Vs{constructor(s){this.buffer=new be,this.information=s}decodeAllCodes(s,u){let h=u,g=null;do{let y=this.decodeGeneralPurposeField(h,g),x=Ue.parseFieldsInGeneralPurpose(y.getNewString());if(x!=null&&s.append(x),y.isRemaining()?g=""+y.getRemainingValue():g=null,h===y.getNewPosition())break;h=y.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let u=s;u<s+3;++u)if(this.information.get(u))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let y=this.extractNumericValueFromBitArray(s,4);return y===0?new wr(this.information.getSize(),wr.FNC1,wr.FNC1):new wr(this.information.getSize(),y-1,wr.FNC1)}let u=this.extractNumericValueFromBitArray(s,7),h=(u-8)/11,g=(u-8)%11;return new wr(s+7,h,g)}extractNumericValueFromBitArray(s,u){return Vs.extractNumericValueFromBitArray(this.information,s,u)}static extractNumericValueFromBitArray(s,u,h){let g=0;for(let y=0;y<h;++y)s.get(u+y)&&(g|=1<<h-y-1);return g}decodeGeneralPurposeField(s,u){this.buffer.setLengthToZero(),u!=null&&this.buffer.append(u),this.current.setPosition(s);let h=this.parseBlocks();return h!=null&&h.isRemaining()?new Fi(this.current.getPosition(),this.buffer.toString(),h.getRemainingValue()):new Fi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,u;do{let h=this.current.getPosition();if(this.current.isAlpha()?(u=this.parseAlphaBlock(),s=u.isFinished()):this.current.isIsoIec646()?(u=this.parseIsoIec646Block(),s=u.isFinished()):(u=this.parseNumericBlock(),s=u.isFinished()),!(h!==this.current.getPosition())&&!s)break}while(!s);return u.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let u;return s.isSecondDigitFNC1()?u=new Fi(this.current.getPosition(),this.buffer.toString()):u=new Fi(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new gi(!0,u)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let u=new Fi(this.current.getPosition(),this.buffer.toString());return new gi(!0,u)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new gi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let u=new Fi(this.current.getPosition(),this.buffer.toString());return new gi(!0,u)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new gi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let u=new Fi(this.current.getPosition(),this.buffer.toString());return new gi(!0,u)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new gi(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,5);if(u>=5&&u<16)return!0;if(s+7>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(s,7);if(h>=64&&h<116)return!0;if(s+8>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(s,8);return g>=232&&g<253}decodeIsoIec646(s){let u=this.extractNumericValueFromBitArray(s,5);if(u===15)return new zn(s+5,zn.FNC1);if(u>=5&&u<15)return new zn(s+5,"0"+(u-5));let h=this.extractNumericValueFromBitArray(s,7);if(h>=64&&h<90)return new zn(s+7,""+(h+1));if(h>=90&&h<116)return new zn(s+7,""+(h+7));let g=this.extractNumericValueFromBitArray(s,8),y;switch(g){case 232:y="!";break;case 233:y='"';break;case 234:y="%";break;case 235:y="&";break;case 236:y="'";break;case 237:y="(";break;case 238:y=")";break;case 239:y="*";break;case 240:y="+";break;case 241:y=",";break;case 242:y="-";break;case 243:y=".";break;case 244:y="/";break;case 245:y=":";break;case 246:y=";";break;case 247:y="<";break;case 248:y="=";break;case 249:y=">";break;case 250:y="?";break;case 251:y="_";break;case 252:y=" ";break;default:throw new W}return new zn(s+8,y)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,5);if(u>=5&&u<16)return!0;if(s+6>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(s,6);return h>=16&&h<63}decodeAlphanumeric(s){let u=this.extractNumericValueFromBitArray(s,5);if(u===15)return new zn(s+5,zn.FNC1);if(u>=5&&u<15)return new zn(s+5,"0"+(u-5));let h=this.extractNumericValueFromBitArray(s,6);if(h>=32&&h<58)return new zn(s+6,""+(h+33));let g;switch(h){case 58:g="*";break;case 59:g=",";break;case 60:g="-";break;case 61:g=".";break;case 62:g="/";break;default:throw new It("Decoding invalid alphanumeric value: "+h)}return new zn(s+6,g)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let u=0;u<5&&u+s<this.information.getSize();++u)if(u===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+u))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let u=s;u<s+3;++u)if(this.information.get(u))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let u=0;u<4&&u+s<this.information.getSize();++u)if(this.information.get(s+u))return!1;return!0}}class xc{constructor(s){this.information=s,this.generalDecoder=new Vs(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Or extends xc{constructor(s){super(s)}encodeCompressedGtin(s,u){s.append("(01)");let h=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,u,h)}encodeCompressedGtinWithoutAI(s,u,h){for(let g=0;g<4;++g){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(u+10*g,10);y/100===0&&s.append("0"),y/10===0&&s.append("0"),s.append(y)}Or.appendCheckDigit(s,h)}static appendCheckDigit(s,u){let h=0;for(let g=0;g<13;g++){let y=s.charAt(g+u).charCodeAt(0)-48;h+=(g&1)===0?3*y:y}h=10-h%10,h===10&&(h=0),s.append(h)}}Or.GTIN_SIZE=40;class ti extends Or{constructor(s){super(s)}parseInformation(){let s=new be;s.append("(01)");let u=s.length(),h=this.getGeneralDecoder().extractNumericValueFromBitArray(ti.HEADER_SIZE,4);return s.append(h),this.encodeCompressedGtinWithoutAI(s,ti.HEADER_SIZE+4,u),this.getGeneralDecoder().decodeAllCodes(s,ti.HEADER_SIZE+44)}}ti.HEADER_SIZE=4;class Ra extends xc{constructor(s){super(s)}parseInformation(){let s=new be;return this.getGeneralDecoder().decodeAllCodes(s,Ra.HEADER_SIZE)}}Ra.HEADER_SIZE=5;class Oa extends Or{constructor(s){super(s)}encodeCompressedWeight(s,u,h){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(u,h);this.addWeightCode(s,g);let y=this.checkWeight(g),x=1e5;for(let _=0;_<5;++_)y/x===0&&s.append("0"),x/=10;s.append(y)}}class ji extends Oa{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=ji.HEADER_SIZE+Oa.GTIN_SIZE+ji.WEIGHT_SIZE)throw new te;let s=new be;return this.encodeCompressedGtin(s,ji.HEADER_SIZE),this.encodeCompressedWeight(s,ji.HEADER_SIZE+Oa.GTIN_SIZE,ji.WEIGHT_SIZE),s.toString()}}ji.HEADER_SIZE=5,ji.WEIGHT_SIZE=15;class wf extends ji{constructor(s){super(s)}addWeightCode(s,u){s.append("(3103)")}checkWeight(s){return s}}class bf extends ji{constructor(s){super(s)}addWeightCode(s,u){u<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class vi extends Or{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<vi.HEADER_SIZE+Or.GTIN_SIZE)throw new te;let s=new be;this.encodeCompressedGtin(s,vi.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(vi.HEADER_SIZE+Or.GTIN_SIZE,vi.LAST_DIGIT_SIZE);s.append("(392"),s.append(u),s.append(")");let h=this.getGeneralDecoder().decodeGeneralPurposeField(vi.HEADER_SIZE+Or.GTIN_SIZE+vi.LAST_DIGIT_SIZE,null);return s.append(h.getNewString()),s.toString()}}vi.HEADER_SIZE=8,vi.LAST_DIGIT_SIZE=2;class ur extends Or{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<ur.HEADER_SIZE+Or.GTIN_SIZE)throw new te;let s=new be;this.encodeCompressedGtin(s,ur.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(ur.HEADER_SIZE+Or.GTIN_SIZE,ur.LAST_DIGIT_SIZE);s.append("(393"),s.append(u),s.append(")");let h=this.getGeneralDecoder().extractNumericValueFromBitArray(ur.HEADER_SIZE+Or.GTIN_SIZE+ur.LAST_DIGIT_SIZE,ur.FIRST_THREE_DIGITS_SIZE);h/100==0&&s.append("0"),h/10==0&&s.append("0"),s.append(h);let g=this.getGeneralDecoder().decodeGeneralPurposeField(ur.HEADER_SIZE+Or.GTIN_SIZE+ur.LAST_DIGIT_SIZE+ur.FIRST_THREE_DIGITS_SIZE,null);return s.append(g.getNewString()),s.toString()}}ur.HEADER_SIZE=8,ur.LAST_DIGIT_SIZE=2,ur.FIRST_THREE_DIGITS_SIZE=10;class en extends Oa{constructor(s,u,h){super(s),this.dateCode=h,this.firstAIdigits=u}parseInformation(){if(this.getInformation().getSize()!=en.HEADER_SIZE+en.GTIN_SIZE+en.WEIGHT_SIZE+en.DATE_SIZE)throw new te;let s=new be;return this.encodeCompressedGtin(s,en.HEADER_SIZE),this.encodeCompressedWeight(s,en.HEADER_SIZE+en.GTIN_SIZE,en.WEIGHT_SIZE),this.encodeCompressedDate(s,en.HEADER_SIZE+en.GTIN_SIZE+en.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,u){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(u,en.DATE_SIZE);if(h==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let g=h%32;h/=32;let y=h%12+1;h/=12;let x=h;x/10==0&&s.append("0"),s.append(x),y/10==0&&s.append("0"),s.append(y),g/10==0&&s.append("0"),s.append(g)}addWeightCode(s,u){s.append("("),s.append(this.firstAIdigits),s.append(u/1e5),s.append(")")}checkWeight(s){return s%1e5}}en.HEADER_SIZE=8,en.WEIGHT_SIZE=20,en.DATE_SIZE=16;function Ef(V){try{if(V.get(1))return new ti(V);if(!V.get(2))return new Ra(V);switch(Vs.extractNumericValueFromBitArray(V,1,4)){case 4:return new wf(V);case 5:return new bf(V)}switch(Vs.extractNumericValueFromBitArray(V,1,5)){case 12:return new vi(V);case 13:return new ur(V)}switch(Vs.extractNumericValueFromBitArray(V,1,7)){case 56:return new en(V,"310","11");case 57:return new en(V,"320","11");case 58:return new en(V,"310","13");case 59:return new en(V,"320","13");case 60:return new en(V,"310","15");case 61:return new en(V,"320","15");case 62:return new en(V,"310","17");case 63:return new en(V,"320","17")}}catch(s){throw console.log(s),new It("unknown decoder: "+V)}}class jt{constructor(s,u,h,g){this.leftchar=s,this.rightchar=u,this.finderpattern=h,this.maybeLast=g}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,u){return s instanceof jt?jt.equalsOrNull(s.leftchar,u.leftchar)&&jt.equalsOrNull(s.rightchar,u.rightchar)&&jt.equalsOrNull(s.finderpattern,u.finderpattern):!1}static equalsOrNull(s,u){return s===null?u===null:jt.equals(s,u)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class wc{constructor(s,u,h){this.pairs=s,this.rowNumber=u,this.wasReversed=h}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,u){return s instanceof wc?this.checkEqualitity(s,u)&&s.wasReversed===u.wasReversed:!1}checkEqualitity(s,u){if(!s||!u)return;let h;return s.forEach((g,y)=>{u.forEach(x=>{g.getLeftChar().getValue()===x.getLeftChar().getValue()&&g.getRightChar().getValue()===x.getRightChar().getValue()&&g.getFinderPatter().getValue()===x.getFinderPatter().getValue()&&(h=!0)})}),h}}class Ce extends Xn{constructor(s){super(...arguments),this.pairs=new Array(Ce.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,u,h){this.pairs.length=0,this.startFromEven=!1;try{return Ce.constructResult(this.decodeRow2pairs(s,u))}catch(g){this.verbose&&console.log(g)}return this.pairs.length=0,this.startFromEven=!0,Ce.constructResult(this.decodeRow2pairs(s,u))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,u){let h=!1;for(;!h;)try{this.pairs.push(this.retrieveNextPair(u,this.pairs,s))}catch(y){if(y instanceof te){if(!this.pairs.length)throw new te;h=!0}}if(this.checkChecksum())return this.pairs;let g;if(this.rows.length?g=!0:g=!1,this.storeRow(s,!1),g){let y=this.checkRowsBoolean(!1);if(y!=null||(y=this.checkRowsBoolean(!0),y!=null))return y}throw new te}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let u=null;try{u=this.checkRows(new Array,0)}catch(h){this.verbose&&console.log(h)}return s&&(this.rows=this.rows.reverse()),u}checkRows(s,u){for(let h=u;h<this.rows.length;h++){let g=this.rows[h];this.pairs.length=0;for(let x of s)this.pairs.push(x.getPairs());if(this.pairs.push(g.getPairs()),!Ce.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let y=new Array(s);y.push(g);try{return this.checkRows(y,h+1)}catch(x){this.verbose&&console.log(x)}}throw new te}static isValidSequence(s){for(let u of Ce.FINDER_PATTERN_SEQUENCES){if(s.length>u.length)continue;let h=!0;for(let g=0;g<s.length;g++)if(s[g].getFinderPattern().getValue()!=u[g]){h=!1;break}if(h)return!0}return!1}storeRow(s,u){let h=0,g=!1,y=!1;for(;h<this.rows.length;){let x=this.rows[h];if(x.getRowNumber()>s){y=x.isEquivalent(this.pairs);break}g=x.isEquivalent(this.pairs),h++}y||g||Ce.isPartialRow(this.pairs,this.rows)||(this.rows.push(h,new wc(this.pairs,s,u)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,u){for(let h of u)if(h.getPairs().length!==s.length){for(let g of h.getPairs())for(let y of s)if(jt.equals(g,y))break}}static isPartialRow(s,u){for(let h of u){let g=!0;for(let y of s){let x=!1;for(let _ of h.getPairs())if(y.equals(_)){x=!0;break}if(!x){g=!1;break}}if(g)return!0}return!1}getRows(){return this.rows}static constructResult(s){let u=vc.buildBitArray(s),g=Ef(u).parseInformation(),y=s[0].getFinderPattern().getResultPoints(),x=s[s.length-1].getFinderPattern().getResultPoints(),_=[y[0],y[1],x[0],x[1]];return new Fe(g,null,null,_,Pe.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),u=s.getLeftChar(),h=s.getRightChar();if(h==null)return!1;let g=h.getChecksumPortion(),y=2;for(let _=1;_<this.pairs.size();++_){let T=this.pairs.get(_);g+=T.getLeftChar().getChecksumPortion(),y++;let O=T.getRightChar();O!=null&&(g+=O.getChecksumPortion(),y++)}return g%=211,211*(y-4)+g==u.getValue()}static getNextSecondBar(s,u){let h;return s.get(u)?(h=s.getNextUnset(u),h=s.getNextSet(h)):(h=s.getNextSet(u),h=s.getNextUnset(h)),h}retrieveNextPair(s,u,h){let g=u.length%2==0;this.startFromEven&&(g=!g);let y,x=!0,_=-1;do this.findNextPair(s,u,_),y=this.parseFoundFinderPattern(s,h,g),y==null?_=Ce.getNextSecondBar(s,this.startEnd[0]):x=!1;while(x);let T=this.decodeDataCharacter(s,y,g,!0);if(!this.isEmptyPair(u)&&u[u.length-1].mustBeLast())throw new te;let O;try{O=this.decodeDataCharacter(s,y,g,!1)}catch(j){O=null,this.verbose&&console.log(j)}return new jt(T,O,y,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,u,h){let g=this.getDecodeFinderCounters();g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=s.getSize(),x;h>=0?x=h:this.isEmptyPair(u)?x=0:x=u[u.length-1].getFinderPattern().getStartEnd()[1];let _=u.length%2!=0;this.startFromEven&&(_=!_);let T=!1;for(;x<y&&(T=!s.get(x),!!T);)x++;let O=0,j=x;for(let z=x;z<y;z++)if(s.get(z)!=T)g[O]++;else{if(O==3){if(_&&Ce.reverseCounters(g),Ce.isFinderPattern(g)){this.startEnd[0]=j,this.startEnd[1]=z;return}_&&Ce.reverseCounters(g),j+=g[0]+g[1],g[0]=g[2],g[1]=g[3],g[2]=0,g[3]=0,O--}else O++;g[O]=1,T=!T}throw new te}static reverseCounters(s){let u=s.length;for(let h=0;h<u/2;++h){let g=s[h];s[h]=s[u-h-1],s[u-h-1]=g}}parseFoundFinderPattern(s,u,h){let g,y,x;if(h){let O=this.startEnd[0]-1;for(;O>=0&&!s.get(O);)O--;O++,g=this.startEnd[0]-O,y=O,x=this.startEnd[1]}else y=this.startEnd[0],x=s.getNextUnset(this.startEnd[1]+1),g=x-this.startEnd[1];let _=this.getDecodeFinderCounters();N.arraycopy(_,0,_,1,_.length-1),_[0]=g;let T;try{T=this.parseFinderValue(_,Ce.FINDER_PATTERNS)}catch{return null}return new Na(T,[y,x],y,x,u)}decodeDataCharacter(s,u,h,g){let y=this.getDataCharacterCounters();for(let Bt=0;Bt<y.length;Bt++)y[Bt]=0;if(g)Ce.recordPatternInReverse(s,u.getStartEnd()[0],y);else{Ce.recordPattern(s,u.getStartEnd()[1],y);for(let Bt=0,bn=y.length-1;Bt<bn;Bt++,bn--){let _r=y[Bt];y[Bt]=y[bn],y[bn]=_r}}let x=17,_=_t.sum(new Int32Array(y))/x,T=(u.getStartEnd()[1]-u.getStartEnd()[0])/15;if(Math.abs(_-T)/T>.3)throw new te;let O=this.getOddCounts(),j=this.getEvenCounts(),z=this.getOddRoundingErrors(),H=this.getEvenRoundingErrors();for(let Bt=0;Bt<y.length;Bt++){let bn=1*y[Bt]/_,_r=bn+.5;if(_r<1){if(bn<.3)throw new te;_r=1}else if(_r>8){if(bn>8.7)throw new te;_r=8}let ts=Bt/2;(Bt&1)==0?(O[ts]=_r,z[ts]=bn-_r):(j[ts]=_r,H[ts]=bn-_r)}this.adjustOddEvenCounts(x);let Y=4*u.getValue()+(h?0:2)+(g?0:1)-1,Q=0,re=0;for(let Bt=O.length-1;Bt>=0;Bt--){if(Ce.isNotA1left(u,h,g)){let bn=Ce.WEIGHTS[Y][2*Bt];re+=O[Bt]*bn}Q+=O[Bt]}let oe=0;for(let Bt=j.length-1;Bt>=0;Bt--)if(Ce.isNotA1left(u,h,g)){let bn=Ce.WEIGHTS[Y][2*Bt+1];oe+=j[Bt]*bn}let ge=re+oe;if((Q&1)!=0||Q>13||Q<4)throw new te;let Re=(13-Q)/2,ke=Ce.SYMBOL_WIDEST[Re],Te=9-ke,wt=Rr.getRSSvalue(O,ke,!0),pt=Rr.getRSSvalue(j,Te,!1),Mr=Ce.EVEN_TOTAL_SUBSET[Re],Ei=Ce.GSUM[Re],Bn=wt*Mr+pt+Ei;return new ko(Bn,ge)}static isNotA1left(s,u,h){return!(s.getValue()==0&&u&&h)}adjustOddEvenCounts(s){let u=_t.sum(new Int32Array(this.getOddCounts())),h=_t.sum(new Int32Array(this.getEvenCounts())),g=!1,y=!1;u>13?y=!0:u<4&&(g=!0);let x=!1,_=!1;h>13?_=!0:h<4&&(x=!0);let T=u+h-s,O=(u&1)==1,j=(h&1)==0;if(T==1)if(O){if(j)throw new te;y=!0}else{if(!j)throw new te;_=!0}else if(T==-1)if(O){if(j)throw new te;g=!0}else{if(!j)throw new te;x=!0}else if(T==0){if(O){if(!j)throw new te;u<h?(g=!0,_=!0):(y=!0,x=!0)}else if(j)throw new te}else throw new te;if(g){if(y)throw new te;Ce.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&Ce.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(_)throw new te;Ce.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Ce.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ce.SYMBOL_WIDEST=[7,5,4,3,1],Ce.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ce.GSUM=[0,348,1388,2948,3988],Ce.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ce.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ce.FINDER_PAT_A=0,Ce.FINDER_PAT_B=1,Ce.FINDER_PAT_C=2,Ce.FINDER_PAT_D=3,Ce.FINDER_PAT_E=4,Ce.FINDER_PAT_F=5,Ce.FINDER_PATTERN_SEQUENCES=[[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_C,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_C],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F]],Ce.MAX_PAIRS=11;class _f extends ko{constructor(s,u,h){super(s,u),this.count=0,this.finderPattern=h}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Kt extends Xn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,u,h){const g=this.decodePair(u,!1,s,h);Kt.addOrTally(this.possibleLeftPairs,g),u.reverse();let y=this.decodePair(u,!0,s,h);Kt.addOrTally(this.possibleRightPairs,y),u.reverse();for(let x of this.possibleLeftPairs)if(x.getCount()>1){for(let _ of this.possibleRightPairs)if(_.getCount()>1&&Kt.checkChecksum(x,_))return Kt.constructResult(x,_)}throw new te}static addOrTally(s,u){if(u==null)return;let h=!1;for(let g of s)if(g.getValue()===u.getValue()){g.incrementCount(),h=!0;break}h||s.push(u)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,u){let h=4537077*s.getValue()+u.getValue(),g=new String(h).toString(),y=new be;for(let O=13-g.length;O>0;O--)y.append("0");y.append(g);let x=0;for(let O=0;O<13;O++){let j=y.charAt(O).charCodeAt(0)-48;x+=(O&1)===0?3*j:j}x=10-x%10,x===10&&(x=0),y.append(x.toString());let _=s.getFinderPattern().getResultPoints(),T=u.getFinderPattern().getResultPoints();return new Fe(y.toString(),null,0,[_[0],_[1],T[0],T[1]],Pe.RSS_14,new Date().getTime())}static checkChecksum(s,u){let h=(s.getChecksumPortion()+16*u.getChecksumPortion())%79,g=9*s.getFinderPattern().getValue()+u.getFinderPattern().getValue();return g>72&&g--,g>8&&g--,h===g}decodePair(s,u,h,g){try{let y=this.findFinderPattern(s,u),x=this.parseFoundFinderPattern(s,h,u,y),_=g==null?null:g.get(q.NEED_RESULT_POINT_CALLBACK);if(_!=null){let j=(y[0]+y[1])/2;u&&(j=s.getSize()-1-j),_.foundPossibleResultPoint(new ze(j,h))}let T=this.decodeDataCharacter(s,x,!0),O=this.decodeDataCharacter(s,x,!1);return new _f(1597*T.getValue()+O.getValue(),T.getChecksumPortion()+4*O.getChecksumPortion(),x)}catch{return null}}decodeDataCharacter(s,u,h){let g=this.getDataCharacterCounters();for(let oe=0;oe<g.length;oe++)g[oe]=0;if(h)wn.recordPatternInReverse(s,u.getStartEnd()[0],g);else{wn.recordPattern(s,u.getStartEnd()[1]+1,g);for(let oe=0,ge=g.length-1;oe<ge;oe++,ge--){let Re=g[oe];g[oe]=g[ge],g[ge]=Re}}let y=h?16:15,x=_t.sum(new Int32Array(g))/y,_=this.getOddCounts(),T=this.getEvenCounts(),O=this.getOddRoundingErrors(),j=this.getEvenRoundingErrors();for(let oe=0;oe<g.length;oe++){let ge=g[oe]/x,Re=Math.floor(ge+.5);Re<1?Re=1:Re>8&&(Re=8);let ke=Math.floor(oe/2);(oe&1)===0?(_[ke]=Re,O[ke]=ge-Re):(T[ke]=Re,j[ke]=ge-Re)}this.adjustOddEvenCounts(h,y);let z=0,H=0;for(let oe=_.length-1;oe>=0;oe--)H*=9,H+=_[oe],z+=_[oe];let Y=0,Q=0;for(let oe=T.length-1;oe>=0;oe--)Y*=9,Y+=T[oe],Q+=T[oe];let re=H+3*Y;if(h){if((z&1)!==0||z>12||z<4)throw new te;let oe=(12-z)/2,ge=Kt.OUTSIDE_ODD_WIDEST[oe],Re=9-ge,ke=Rr.getRSSvalue(_,ge,!1),Te=Rr.getRSSvalue(T,Re,!0),wt=Kt.OUTSIDE_EVEN_TOTAL_SUBSET[oe],pt=Kt.OUTSIDE_GSUM[oe];return new ko(ke*wt+Te+pt,re)}else{if((Q&1)!==0||Q>10||Q<4)throw new te;let oe=(10-Q)/2,ge=Kt.INSIDE_ODD_WIDEST[oe],Re=9-ge,ke=Rr.getRSSvalue(_,ge,!0),Te=Rr.getRSSvalue(T,Re,!1),wt=Kt.INSIDE_ODD_TOTAL_SUBSET[oe],pt=Kt.INSIDE_GSUM[oe];return new ko(Te*wt+ke+pt,re)}}findFinderPattern(s,u){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let g=s.getSize(),y=!1,x=0;for(;x<g&&(y=!s.get(x),u!==y);)x++;let _=0,T=x;for(let O=x;O<g;O++)if(s.get(O)!==y)h[_]++;else{if(_===3){if(Xn.isFinderPattern(h))return[T,O];T+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,_--}else _++;h[_]=1,y=!y}throw new te}parseFoundFinderPattern(s,u,h,g){let y=s.get(g[0]),x=g[0]-1;for(;x>=0&&y!==s.get(x);)x--;x++;const _=g[0]-x,T=this.getDecodeFinderCounters(),O=new Int32Array(T.length);N.arraycopy(T,0,O,1,T.length-1),O[0]=_;const j=this.parseFinderValue(O,Kt.FINDER_PATTERNS);let z=x,H=g[1];return h&&(z=s.getSize()-1-z,H=s.getSize()-1-H),new Na(j,[x,g[1]],z,H,u)}adjustOddEvenCounts(s,u){let h=_t.sum(new Int32Array(this.getOddCounts())),g=_t.sum(new Int32Array(this.getEvenCounts())),y=!1,x=!1,_=!1,T=!1;s?(h>12?x=!0:h<4&&(y=!0),g>12?T=!0:g<4&&(_=!0)):(h>11?x=!0:h<5&&(y=!0),g>10?T=!0:g<4&&(_=!0));let O=h+g-u,j=(h&1)===(s?1:0),z=(g&1)===1;if(O===1)if(j){if(z)throw new te;x=!0}else{if(!z)throw new te;T=!0}else if(O===-1)if(j){if(z)throw new te;y=!0}else{if(!z)throw new te;_=!0}else if(O===0){if(j){if(!z)throw new te;h<g?(y=!0,T=!0):(x=!0,_=!0)}else if(z)throw new te}else throw new te;if(y){if(x)throw new te;Xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&Xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),_){if(T)throw new te;Xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&Xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Kt.OUTSIDE_GSUM=[0,161,961,2015,2715],Kt.INSIDE_GSUM=[0,336,1036,1516],Kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Kt.INSIDE_ODD_WIDEST=[2,4,6,8],Kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class zs extends wn{constructor(s,u){super(),this.readers=[],this.verbose=u===!0;const h=s?s.get(q.POSSIBLE_FORMATS):null,g=s&&s.get(q.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;h?((h.includes(Pe.EAN_13)||h.includes(Pe.UPC_A)||h.includes(Pe.EAN_8)||h.includes(Pe.UPC_E))&&this.readers.push(new Ul(s)),h.includes(Pe.CODE_39)&&this.readers.push(new Mn(g)),h.includes(Pe.CODE_128)&&this.readers.push(new Le),h.includes(Pe.ITF)&&this.readers.push(new Lt),h.includes(Pe.RSS_14)&&this.readers.push(new Kt),h.includes(Pe.RSS_EXPANDED)&&this.readers.push(new Ce(this.verbose))):(this.readers.push(new Ul(s)),this.readers.push(new Mn),this.readers.push(new Ul(s)),this.readers.push(new Le),this.readers.push(new Lt),this.readers.push(new Kt),this.readers.push(new Ce(this.verbose)))}decodeRow(s,u,h){for(let g=0;g<this.readers.length;g++)try{return this.readers[g].decodeRow(s,u,h)}catch{}throw new te}reset(){this.readers.forEach(s=>s.reset())}}class Sf extends Be{constructor(s=500,u){super(new zs(u),s,u)}}class Tt{constructor(s,u,h){this.ecCodewords=s,this.ecBlocks=[u],h&&this.ecBlocks.push(h)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class yt{constructor(s,u){this.count=s,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class St{constructor(s,u,h,g,y,x){this.versionNumber=s,this.symbolSizeRows=u,this.symbolSizeColumns=h,this.dataRegionSizeRows=g,this.dataRegionSizeColumns=y,this.ecBlocks=x;let _=0;const T=x.getECCodewords(),O=x.getECBlocks();for(let j of O)_+=j.getCount()*(j.getDataCodewords()+T);this.totalCodewords=_}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,u){if((s&1)!==0||(u&1)!==0)throw new W;for(let h of St.VERSIONS)if(h.symbolSizeRows===s&&h.symbolSizeColumns===u)return h;throw new W}toString(){return""+this.versionNumber}static buildVersions(){return[new St(1,10,10,8,8,new Tt(5,new yt(1,3))),new St(2,12,12,10,10,new Tt(7,new yt(1,5))),new St(3,14,14,12,12,new Tt(10,new yt(1,8))),new St(4,16,16,14,14,new Tt(12,new yt(1,12))),new St(5,18,18,16,16,new Tt(14,new yt(1,18))),new St(6,20,20,18,18,new Tt(18,new yt(1,22))),new St(7,22,22,20,20,new Tt(20,new yt(1,30))),new St(8,24,24,22,22,new Tt(24,new yt(1,36))),new St(9,26,26,24,24,new Tt(28,new yt(1,44))),new St(10,32,32,14,14,new Tt(36,new yt(1,62))),new St(11,36,36,16,16,new Tt(42,new yt(1,86))),new St(12,40,40,18,18,new Tt(48,new yt(1,114))),new St(13,44,44,20,20,new Tt(56,new yt(1,144))),new St(14,48,48,22,22,new Tt(68,new yt(1,174))),new St(15,52,52,24,24,new Tt(42,new yt(2,102))),new St(16,64,64,14,14,new Tt(56,new yt(2,140))),new St(17,72,72,16,16,new Tt(36,new yt(4,92))),new St(18,80,80,18,18,new Tt(48,new yt(4,114))),new St(19,88,88,20,20,new Tt(56,new yt(4,144))),new St(20,96,96,22,22,new Tt(68,new yt(4,174))),new St(21,104,104,24,24,new Tt(56,new yt(6,136))),new St(22,120,120,18,18,new Tt(68,new yt(6,175))),new St(23,132,132,20,20,new Tt(62,new yt(8,163))),new St(24,144,144,22,22,new Tt(62,new yt(8,156),new yt(2,155))),new St(25,8,18,6,16,new Tt(7,new yt(1,5))),new St(26,8,32,6,14,new Tt(11,new yt(1,10))),new St(27,12,26,10,24,new Tt(14,new yt(1,16))),new St(28,12,36,10,16,new Tt(18,new yt(1,22))),new St(29,16,36,14,16,new Tt(24,new yt(1,32))),new St(30,16,48,14,22,new Tt(28,new yt(1,49)))]}}St.VERSIONS=St.buildVersions();class Gr{constructor(s){const u=s.getHeight();if(u<8||u>144||(u&1)!==0)throw new W;this.version=Gr.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new me(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const u=s.getHeight(),h=s.getWidth();return St.getVersionForDimensions(u,h)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let u=0,h=4,g=0;const y=this.mappingBitMatrix.getHeight(),x=this.mappingBitMatrix.getWidth();let _=!1,T=!1,O=!1,j=!1;do if(h===y&&g===0&&!_)s[u++]=this.readCorner1(y,x)&255,h-=2,g+=2,_=!0;else if(h===y-2&&g===0&&(x&3)!==0&&!T)s[u++]=this.readCorner2(y,x)&255,h-=2,g+=2,T=!0;else if(h===y+4&&g===2&&(x&7)===0&&!O)s[u++]=this.readCorner3(y,x)&255,h-=2,g+=2,O=!0;else if(h===y-2&&g===0&&(x&7)===4&&!j)s[u++]=this.readCorner4(y,x)&255,h-=2,g+=2,j=!0;else{do h<y&&g>=0&&!this.readMappingMatrix.get(g,h)&&(s[u++]=this.readUtah(h,g,y,x)&255),h-=2,g+=2;while(h>=0&&g<x);h+=1,g+=3;do h>=0&&g<x&&!this.readMappingMatrix.get(g,h)&&(s[u++]=this.readUtah(h,g,y,x)&255),h+=2,g-=2;while(h<y&&g>=0);h+=3,g+=1}while(h<y||g<x);if(u!==this.version.getTotalCodewords())throw new W;return s}readModule(s,u,h,g){return s<0&&(s+=h,u+=4-(h+4&7)),u<0&&(u+=g,s+=4-(g+4&7)),this.readMappingMatrix.set(u,s),this.mappingBitMatrix.get(u,s)}readUtah(s,u,h,g){let y=0;return this.readModule(s-2,u-2,h,g)&&(y|=1),y<<=1,this.readModule(s-2,u-1,h,g)&&(y|=1),y<<=1,this.readModule(s-1,u-2,h,g)&&(y|=1),y<<=1,this.readModule(s-1,u-1,h,g)&&(y|=1),y<<=1,this.readModule(s-1,u,h,g)&&(y|=1),y<<=1,this.readModule(s,u-2,h,g)&&(y|=1),y<<=1,this.readModule(s,u-1,h,g)&&(y|=1),y<<=1,this.readModule(s,u,h,g)&&(y|=1),y}readCorner1(s,u){let h=0;return this.readModule(s-1,0,s,u)&&(h|=1),h<<=1,this.readModule(s-1,1,s,u)&&(h|=1),h<<=1,this.readModule(s-1,2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-1,s,u)&&(h|=1),h<<=1,this.readModule(1,u-1,s,u)&&(h|=1),h<<=1,this.readModule(2,u-1,s,u)&&(h|=1),h<<=1,this.readModule(3,u-1,s,u)&&(h|=1),h}readCorner2(s,u){let h=0;return this.readModule(s-3,0,s,u)&&(h|=1),h<<=1,this.readModule(s-2,0,s,u)&&(h|=1),h<<=1,this.readModule(s-1,0,s,u)&&(h|=1),h<<=1,this.readModule(0,u-4,s,u)&&(h|=1),h<<=1,this.readModule(0,u-3,s,u)&&(h|=1),h<<=1,this.readModule(0,u-2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-1,s,u)&&(h|=1),h<<=1,this.readModule(1,u-1,s,u)&&(h|=1),h}readCorner3(s,u){let h=0;return this.readModule(s-1,0,s,u)&&(h|=1),h<<=1,this.readModule(s-1,u-1,s,u)&&(h|=1),h<<=1,this.readModule(0,u-3,s,u)&&(h|=1),h<<=1,this.readModule(0,u-2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-1,s,u)&&(h|=1),h<<=1,this.readModule(1,u-3,s,u)&&(h|=1),h<<=1,this.readModule(1,u-2,s,u)&&(h|=1),h<<=1,this.readModule(1,u-1,s,u)&&(h|=1),h}readCorner4(s,u){let h=0;return this.readModule(s-3,0,s,u)&&(h|=1),h<<=1,this.readModule(s-2,0,s,u)&&(h|=1),h<<=1,this.readModule(s-1,0,s,u)&&(h|=1),h<<=1,this.readModule(0,u-2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-1,s,u)&&(h|=1),h<<=1,this.readModule(1,u-1,s,u)&&(h|=1),h<<=1,this.readModule(2,u-1,s,u)&&(h|=1),h<<=1,this.readModule(3,u-1,s,u)&&(h|=1),h}extractDataRegion(s){const u=this.version.getSymbolSizeRows(),h=this.version.getSymbolSizeColumns();if(s.getHeight()!==u)throw new v("Dimension of bitMatrix must match the version size");const g=this.version.getDataRegionSizeRows(),y=this.version.getDataRegionSizeColumns(),x=u/g|0,_=h/y|0,T=x*g,O=_*y,j=new me(O,T);for(let z=0;z<x;++z){const H=z*g;for(let Y=0;Y<_;++Y){const Q=Y*y;for(let re=0;re<g;++re){const oe=z*(g+2)+1+re,ge=H+re;for(let Re=0;Re<y;++Re){const ke=Y*(y+2)+1+Re;if(s.get(ke,oe)){const Te=Q+Re;j.set(Te,ge)}}}}}return j}}class bc{constructor(s,u){this.numDataCodewords=s,this.codewords=u}static getDataBlocks(s,u){const h=u.getECBlocks();let g=0;const y=h.getECBlocks();for(let re of y)g+=re.getCount();const x=new Array(g);let _=0;for(let re of y)for(let oe=0;oe<re.getCount();oe++){const ge=re.getDataCodewords(),Re=h.getECCodewords()+ge;x[_++]=new bc(ge,new Uint8Array(Re))}const O=x[0].codewords.length-h.getECCodewords(),j=O-1;let z=0;for(let re=0;re<j;re++)for(let oe=0;oe<_;oe++)x[oe].codewords[re]=s[z++];const H=u.getVersionNumber()===24,Y=H?8:_;for(let re=0;re<Y;re++)x[re].codewords[O-1]=s[z++];const Q=x[0].codewords.length;for(let re=O;re<Q;re++)for(let oe=0;oe<_;oe++){const ge=H?(oe+8)%_:oe,Re=H&&ge>7?re-1:re;x[ge].codewords[Re]=s[z++]}if(z!==s.length)throw new v;return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ec{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new v(""+s);let u=0,h=this.bitOffset,g=this.byteOffset;const y=this.bytes;if(h>0){const x=8-h,_=s<x?s:x,T=x-_,O=255>>8-_<<T;u=(y[g]&O)>>T,s-=_,h+=_,h===8&&(h=0,g++)}if(s>0){for(;s>=8;)u=u<<8|y[g]&255,g++,s-=8;if(s>0){const x=8-s,_=255>>x<<x;u=u<<s|(y[g]&_)>>x,h+=s}}return this.bitOffset=h,this.byteOffset=g,u}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Dn;(function(V){V[V.PAD_ENCODE=0]="PAD_ENCODE",V[V.ASCII_ENCODE=1]="ASCII_ENCODE",V[V.C40_ENCODE=2]="C40_ENCODE",V[V.TEXT_ENCODE=3]="TEXT_ENCODE",V[V.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",V[V.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",V[V.BASE256_ENCODE=6]="BASE256_ENCODE"})(Dn||(Dn={}));class yi{static decode(s){const u=new Ec(s),h=new be,g=new be,y=new Array;let x=Dn.ASCII_ENCODE;do if(x===Dn.ASCII_ENCODE)x=this.decodeAsciiSegment(u,h,g);else{switch(x){case Dn.C40_ENCODE:this.decodeC40Segment(u,h);break;case Dn.TEXT_ENCODE:this.decodeTextSegment(u,h);break;case Dn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(u,h);break;case Dn.EDIFACT_ENCODE:this.decodeEdifactSegment(u,h);break;case Dn.BASE256_ENCODE:this.decodeBase256Segment(u,h,y);break;default:throw new W}x=Dn.ASCII_ENCODE}while(x!==Dn.PAD_ENCODE&&u.available()>0);return g.length()>0&&h.append(g.toString()),new we(s,h.toString(),y.length===0?null:y,null)}static decodeAsciiSegment(s,u,h){let g=!1;do{let y=s.readBits(8);if(y===0)throw new W;if(y<=128)return g&&(y+=128),u.append(String.fromCharCode(y-1)),Dn.ASCII_ENCODE;if(y===129)return Dn.PAD_ENCODE;if(y<=229){const x=y-130;x<10&&u.append("0"),u.append(""+x)}else switch(y){case 230:return Dn.C40_ENCODE;case 231:return Dn.BASE256_ENCODE;case 232:u.append("");break;case 233:case 234:break;case 235:g=!0;break;case 236:u.append("[)>05"),h.insert(0,"");break;case 237:u.append("[)>06"),h.insert(0,"");break;case 238:return Dn.ANSIX12_ENCODE;case 239:return Dn.TEXT_ENCODE;case 240:return Dn.EDIFACT_ENCODE;case 241:break;default:if(y!==254||s.available()!==0)throw new W;break}}while(s.available()>0);return Dn.ASCII_ENCODE}static decodeC40Segment(s,u){let h=!1;const g=[];let y=0;do{if(s.available()===8)return;const x=s.readBits(8);if(x===254)return;this.parseTwoBytes(x,s.readBits(8),g);for(let _=0;_<3;_++){const T=g[_];switch(y){case 0:if(T<3)y=T+1;else if(T<this.C40_BASIC_SET_CHARS.length){const O=this.C40_BASIC_SET_CHARS[T];h?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),h=!1):u.append(O)}else throw new W;break;case 1:h?(u.append(String.fromCharCode(T+128)),h=!1):u.append(String.fromCharCode(T)),y=0;break;case 2:if(T<this.C40_SHIFT2_SET_CHARS.length){const O=this.C40_SHIFT2_SET_CHARS[T];h?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),h=!1):u.append(O)}else switch(T){case 27:u.append("");break;case 30:h=!0;break;default:throw new W}y=0;break;case 3:h?(u.append(String.fromCharCode(T+224)),h=!1):u.append(String.fromCharCode(T+96)),y=0;break;default:throw new W}}}while(s.available()>0)}static decodeTextSegment(s,u){let h=!1,g=[],y=0;do{if(s.available()===8)return;const x=s.readBits(8);if(x===254)return;this.parseTwoBytes(x,s.readBits(8),g);for(let _=0;_<3;_++){const T=g[_];switch(y){case 0:if(T<3)y=T+1;else if(T<this.TEXT_BASIC_SET_CHARS.length){const O=this.TEXT_BASIC_SET_CHARS[T];h?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),h=!1):u.append(O)}else throw new W;break;case 1:h?(u.append(String.fromCharCode(T+128)),h=!1):u.append(String.fromCharCode(T)),y=0;break;case 2:if(T<this.TEXT_SHIFT2_SET_CHARS.length){const O=this.TEXT_SHIFT2_SET_CHARS[T];h?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),h=!1):u.append(O)}else switch(T){case 27:u.append("");break;case 30:h=!0;break;default:throw new W}y=0;break;case 3:if(T<this.TEXT_SHIFT3_SET_CHARS.length){const O=this.TEXT_SHIFT3_SET_CHARS[T];h?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),h=!1):u.append(O),y=0}else throw new W;break;default:throw new W}}}while(s.available()>0)}static decodeAnsiX12Segment(s,u){const h=[];do{if(s.available()===8)return;const g=s.readBits(8);if(g===254)return;this.parseTwoBytes(g,s.readBits(8),h);for(let y=0;y<3;y++){const x=h[y];switch(x){case 0:u.append("\r");break;case 1:u.append("*");break;case 2:u.append(">");break;case 3:u.append(" ");break;default:if(x<14)u.append(String.fromCharCode(x+44));else if(x<40)u.append(String.fromCharCode(x+51));else throw new W;break}}}while(s.available()>0)}static parseTwoBytes(s,u,h){let g=(s<<8)+u-1,y=Math.floor(g/1600);h[0]=y,g-=y*1600,y=Math.floor(g/40),h[1]=y,h[2]=g-y*40}static decodeEdifactSegment(s,u){do{if(s.available()<=16)return;for(let h=0;h<4;h++){let g=s.readBits(6);if(g===31){const y=8-s.getBitOffset();y!==8&&s.readBits(y);return}(g&32)===0&&(g|=64),u.append(String.fromCharCode(g))}}while(s.available()>0)}static decodeBase256Segment(s,u,h){let g=1+s.getByteOffset();const y=this.unrandomize255State(s.readBits(8),g++);let x;if(y===0?x=s.available()/8|0:y<250?x=y:x=250*(y-249)+this.unrandomize255State(s.readBits(8),g++),x<0)throw new W;const _=new Uint8Array(x);for(let T=0;T<x;T++){if(s.available()<8)throw new W;_[T]=this.unrandomize255State(s.readBits(8),g++)}h.push(_);try{u.append(ae.decode(_,le.ISO88591))}catch(T){throw new It("Platform does not support required encoding: "+T.message)}}static unrandomize255State(s,u){const h=149*u%255+1,g=s-h;return g>=0?g:g+256}}yi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],yi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],yi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],yi.TEXT_SHIFT2_SET_CHARS=yi.C40_SHIFT2_SET_CHARS,yi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Vl{constructor(){this.rsDecoder=new An(Ke.DATA_MATRIX_FIELD_256)}decode(s){const u=new Gr(s),h=u.getVersion(),g=u.readCodewords(),y=bc.getDataBlocks(g,h);let x=0;for(let O of y)x+=O.getNumDataCodewords();const _=new Uint8Array(x),T=y.length;for(let O=0;O<T;O++){const j=y[O],z=j.getCodewords(),H=j.getNumDataCodewords();this.correctErrors(z,H);for(let Y=0;Y<H;Y++)_[Y*T+O]=z[Y]}return yi.decode(_)}correctErrors(s,u){const h=new Int32Array(s);try{this.rsDecoder.decode(h,s.length-u)}catch{throw new C}for(let g=0;g<u;g++)s[g]=h[g]}}class Yt{constructor(s){this.image=s,this.rectangleDetector=new Bi(this.image)}detect(){const s=this.rectangleDetector.detect();let u=this.detectSolid1(s);if(u=this.detectSolid2(u),u[3]=this.correctTopRight(u),!u[3])throw new te;u=this.shiftToModuleCenter(u);const h=u[0],g=u[1],y=u[2],x=u[3];let _=this.transitionsBetween(h,x)+1,T=this.transitionsBetween(y,x)+1;(_&1)===1&&(_+=1),(T&1)===1&&(T+=1),4*_<7*T&&4*T<7*_&&(_=T=Math.max(_,T));let O=Yt.sampleGrid(this.image,h,g,y,x,_,T);return new js(O,[h,g,y,x])}static shiftPoint(s,u,h){let g=(u.getX()-s.getX())/(h+1),y=(u.getY()-s.getY())/(h+1);return new ze(s.getX()+g,s.getY()+y)}static moveAway(s,u,h){let g=s.getX(),y=s.getY();return g<u?g-=1:g+=1,y<h?y-=1:y+=1,new ze(g,y)}detectSolid1(s){let u=s[0],h=s[1],g=s[3],y=s[2],x=this.transitionsBetween(u,h),_=this.transitionsBetween(h,g),T=this.transitionsBetween(g,y),O=this.transitionsBetween(y,u),j=x,z=[y,u,h,g];return j>_&&(j=_,z[0]=u,z[1]=h,z[2]=g,z[3]=y),j>T&&(j=T,z[0]=h,z[1]=g,z[2]=y,z[3]=u),j>O&&(z[0]=g,z[1]=y,z[2]=u,z[3]=h),z}detectSolid2(s){let u=s[0],h=s[1],g=s[2],y=s[3],x=this.transitionsBetween(u,y),_=Yt.shiftPoint(h,g,(x+1)*4),T=Yt.shiftPoint(g,h,(x+1)*4),O=this.transitionsBetween(_,u),j=this.transitionsBetween(T,y);return O<j?(s[0]=u,s[1]=h,s[2]=g,s[3]=y):(s[0]=h,s[1]=g,s[2]=y,s[3]=u),s}correctTopRight(s){let u=s[0],h=s[1],g=s[2],y=s[3],x=this.transitionsBetween(u,y),_=this.transitionsBetween(h,y),T=Yt.shiftPoint(u,h,(_+1)*4),O=Yt.shiftPoint(g,h,(x+1)*4);x=this.transitionsBetween(T,y),_=this.transitionsBetween(O,y);let j=new ze(y.getX()+(g.getX()-h.getX())/(x+1),y.getY()+(g.getY()-h.getY())/(x+1)),z=new ze(y.getX()+(u.getX()-h.getX())/(_+1),y.getY()+(u.getY()-h.getY())/(_+1));if(!this.isValid(j))return this.isValid(z)?z:null;if(!this.isValid(z))return j;let H=this.transitionsBetween(T,j)+this.transitionsBetween(O,j),Y=this.transitionsBetween(T,z)+this.transitionsBetween(O,z);return H>Y?j:z}shiftToModuleCenter(s){let u=s[0],h=s[1],g=s[2],y=s[3],x=this.transitionsBetween(u,y)+1,_=this.transitionsBetween(g,y)+1,T=Yt.shiftPoint(u,h,_*4),O=Yt.shiftPoint(g,h,x*4);x=this.transitionsBetween(T,y)+1,_=this.transitionsBetween(O,y)+1,(x&1)===1&&(x+=1),(_&1)===1&&(_+=1);let j=(u.getX()+h.getX()+g.getX()+y.getX())/4,z=(u.getY()+h.getY()+g.getY()+y.getY())/4;u=Yt.moveAway(u,j,z),h=Yt.moveAway(h,j,z),g=Yt.moveAway(g,j,z),y=Yt.moveAway(y,j,z);let H,Y;return T=Yt.shiftPoint(u,h,_*4),T=Yt.shiftPoint(T,y,x*4),H=Yt.shiftPoint(h,u,_*4),H=Yt.shiftPoint(H,g,x*4),O=Yt.shiftPoint(g,y,_*4),O=Yt.shiftPoint(O,h,x*4),Y=Yt.shiftPoint(y,g,_*4),Y=Yt.shiftPoint(Y,u,x*4),[T,H,O,Y]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,u,h,g,y,x,_){return mi.getInstance().sampleGrid(s,x,_,.5,.5,x-.5,.5,x-.5,_-.5,.5,_-.5,u.getX(),u.getY(),y.getX(),y.getY(),g.getX(),g.getY(),h.getX(),h.getY())}transitionsBetween(s,u){let h=Math.trunc(s.getX()),g=Math.trunc(s.getY()),y=Math.trunc(u.getX()),x=Math.trunc(u.getY()),_=Math.abs(x-g)>Math.abs(y-h);if(_){let re=h;h=g,g=re,re=y,y=x,x=re}let T=Math.abs(y-h),O=Math.abs(x-g),j=-T/2,z=g<x?1:-1,H=h<y?1:-1,Y=0,Q=this.image.get(_?g:h,_?h:g);for(let re=h,oe=g;re!==y;re+=H){let ge=this.image.get(_?oe:re,_?re:oe);if(ge!==Q&&(Y++,Q=ge),j+=O,j>0){if(oe===x)break;oe+=z,j-=T}}return Y}}class xi{constructor(){this.decoder=new Vl}decode(s,u=null){let h,g;if(u!=null&&u.has(q.PURE_BARCODE)){const O=xi.extractPureBits(s.getBlackMatrix());h=this.decoder.decode(O),g=xi.NO_POINTS}else{const O=new Yt(s.getBlackMatrix()).detect();h=this.decoder.decode(O.getBits()),g=O.getPoints()}const y=h.getRawBytes(),x=new Fe(h.getText(),y,8*y.length,g,Pe.DATA_MATRIX,N.currentTimeMillis()),_=h.getByteSegments();_!=null&&x.putMetadata(it.BYTE_SEGMENTS,_);const T=h.getECLevel();return T!=null&&x.putMetadata(it.ERROR_CORRECTION_LEVEL,T),x}reset(){}static extractPureBits(s){const u=s.getTopLeftOnBit(),h=s.getBottomRightOnBit();if(u==null||h==null)throw new te;const g=this.moduleSize(u,s);let y=u[1];const x=h[1];let _=u[0];const O=(h[0]-_+1)/g,j=(x-y+1)/g;if(O<=0||j<=0)throw new te;const z=g/2;y+=z,_+=z;const H=new me(O,j);for(let Y=0;Y<j;Y++){const Q=y+Y*g;for(let re=0;re<O;re++)s.get(_+re*g,Q)&&H.set(re,Y)}return H}static moduleSize(s,u){const h=u.getWidth();let g=s[0];const y=s[1];for(;g<h&&u.get(g,y);)g++;if(g===h)throw new te;const x=g-s[0];if(x===0)throw new te;return x}}xi.NO_POINTS=[];class Km extends Be{constructor(s=500){super(new xi,s)}}var $s;(function(V){V[V.L=0]="L",V[V.M=1]="M",V[V.Q=2]="Q",V[V.H=3]="H"})($s||($s={}));class Ut{constructor(s,u,h){this.value=s,this.stringValue=u,this.bits=h,Ut.FOR_BITS.set(h,this),Ut.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return Ut.L;case"M":return Ut.M;case"Q":return Ut.Q;case"H":return Ut.H;default:throw new m(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof Ut))return!1;const u=s;return this.value===u.value}static forBits(s){if(s<0||s>=Ut.FOR_BITS.size)throw new v;return Ut.FOR_BITS.get(s)}}Ut.FOR_BITS=new Map,Ut.FOR_VALUE=new Map,Ut.L=new Ut($s.L,"L",1),Ut.M=new Ut($s.M,"M",0),Ut.Q=new Ut($s.Q,"Q",3),Ut.H=new Ut($s.H,"H",2);class Jn{constructor(s){this.errorCorrectionLevel=Ut.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,u){return L.bitCount(s^u)}static decodeFormatInformation(s,u){const h=Jn.doDecodeFormatInformation(s,u);return h!==null?h:Jn.doDecodeFormatInformation(s^Jn.FORMAT_INFO_MASK_QR,u^Jn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,u){let h=Number.MAX_SAFE_INTEGER,g=0;for(const y of Jn.FORMAT_INFO_DECODE_LOOKUP){const x=y[0];if(x===s||x===u)return new Jn(y[1]);let _=Jn.numBitsDiffering(s,x);_<h&&(g=y[1],h=_),s!==u&&(_=Jn.numBitsDiffering(u,x),_<h&&(g=y[1],h=_))}return h<=3?new Jn(g):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Jn))return!1;const u=s;return this.errorCorrectionLevel===u.errorCorrectionLevel&&this.dataMask===u.dataMask}}Jn.FORMAT_INFO_MASK_QR=21522,Jn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ue{constructor(s,...u){this.ecCodewordsPerBlock=s,this.ecBlocks=u}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const u=this.ecBlocks;for(const h of u)s+=h.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class K{constructor(s,u){this.count=s,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class nt{constructor(s,u,...h){this.versionNumber=s,this.alignmentPatternCenters=u,this.ecBlocks=h;let g=0;const y=h[0].getECCodewordsPerBlock(),x=h[0].getECBlocks();for(const _ of x)g+=_.getCount()*(_.getDataCodewords()+y);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new W;try{return this.getVersionForNumber((s-17)/4)}catch{throw new W}}static getVersionForNumber(s){if(s<1||s>40)throw new v;return nt.VERSIONS[s-1]}static decodeVersionInformation(s){let u=Number.MAX_SAFE_INTEGER,h=0;for(let g=0;g<nt.VERSION_DECODE_INFO.length;g++){const y=nt.VERSION_DECODE_INFO[g];if(y===s)return nt.getVersionForNumber(g+7);const x=Jn.numBitsDiffering(s,y);x<u&&(h=g+7,u=x)}return u<=3?nt.getVersionForNumber(h):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),u=new me(s);u.setRegion(0,0,9,9),u.setRegion(s-8,0,8,9),u.setRegion(0,s-8,9,8);const h=this.alignmentPatternCenters.length;for(let g=0;g<h;g++){const y=this.alignmentPatternCenters[g]-2;for(let x=0;x<h;x++)g===0&&(x===0||x===h-1)||g===h-1&&x===0||u.setRegion(this.alignmentPatternCenters[x]-2,y,5,5)}return u.setRegion(6,9,1,s-17),u.setRegion(9,6,s-17,1),this.versionNumber>6&&(u.setRegion(s-11,0,3,6),u.setRegion(0,s-11,6,3)),u}toString(){return""+this.versionNumber}}nt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),nt.VERSIONS=[new nt(1,new Int32Array(0),new ue(7,new K(1,19)),new ue(10,new K(1,16)),new ue(13,new K(1,13)),new ue(17,new K(1,9))),new nt(2,Int32Array.from([6,18]),new ue(10,new K(1,34)),new ue(16,new K(1,28)),new ue(22,new K(1,22)),new ue(28,new K(1,16))),new nt(3,Int32Array.from([6,22]),new ue(15,new K(1,55)),new ue(26,new K(1,44)),new ue(18,new K(2,17)),new ue(22,new K(2,13))),new nt(4,Int32Array.from([6,26]),new ue(20,new K(1,80)),new ue(18,new K(2,32)),new ue(26,new K(2,24)),new ue(16,new K(4,9))),new nt(5,Int32Array.from([6,30]),new ue(26,new K(1,108)),new ue(24,new K(2,43)),new ue(18,new K(2,15),new K(2,16)),new ue(22,new K(2,11),new K(2,12))),new nt(6,Int32Array.from([6,34]),new ue(18,new K(2,68)),new ue(16,new K(4,27)),new ue(24,new K(4,19)),new ue(28,new K(4,15))),new nt(7,Int32Array.from([6,22,38]),new ue(20,new K(2,78)),new ue(18,new K(4,31)),new ue(18,new K(2,14),new K(4,15)),new ue(26,new K(4,13),new K(1,14))),new nt(8,Int32Array.from([6,24,42]),new ue(24,new K(2,97)),new ue(22,new K(2,38),new K(2,39)),new ue(22,new K(4,18),new K(2,19)),new ue(26,new K(4,14),new K(2,15))),new nt(9,Int32Array.from([6,26,46]),new ue(30,new K(2,116)),new ue(22,new K(3,36),new K(2,37)),new ue(20,new K(4,16),new K(4,17)),new ue(24,new K(4,12),new K(4,13))),new nt(10,Int32Array.from([6,28,50]),new ue(18,new K(2,68),new K(2,69)),new ue(26,new K(4,43),new K(1,44)),new ue(24,new K(6,19),new K(2,20)),new ue(28,new K(6,15),new K(2,16))),new nt(11,Int32Array.from([6,30,54]),new ue(20,new K(4,81)),new ue(30,new K(1,50),new K(4,51)),new ue(28,new K(4,22),new K(4,23)),new ue(24,new K(3,12),new K(8,13))),new nt(12,Int32Array.from([6,32,58]),new ue(24,new K(2,92),new K(2,93)),new ue(22,new K(6,36),new K(2,37)),new ue(26,new K(4,20),new K(6,21)),new ue(28,new K(7,14),new K(4,15))),new nt(13,Int32Array.from([6,34,62]),new ue(26,new K(4,107)),new ue(22,new K(8,37),new K(1,38)),new ue(24,new K(8,20),new K(4,21)),new ue(22,new K(12,11),new K(4,12))),new nt(14,Int32Array.from([6,26,46,66]),new ue(30,new K(3,115),new K(1,116)),new ue(24,new K(4,40),new K(5,41)),new ue(20,new K(11,16),new K(5,17)),new ue(24,new K(11,12),new K(5,13))),new nt(15,Int32Array.from([6,26,48,70]),new ue(22,new K(5,87),new K(1,88)),new ue(24,new K(5,41),new K(5,42)),new ue(30,new K(5,24),new K(7,25)),new ue(24,new K(11,12),new K(7,13))),new nt(16,Int32Array.from([6,26,50,74]),new ue(24,new K(5,98),new K(1,99)),new ue(28,new K(7,45),new K(3,46)),new ue(24,new K(15,19),new K(2,20)),new ue(30,new K(3,15),new K(13,16))),new nt(17,Int32Array.from([6,30,54,78]),new ue(28,new K(1,107),new K(5,108)),new ue(28,new K(10,46),new K(1,47)),new ue(28,new K(1,22),new K(15,23)),new ue(28,new K(2,14),new K(17,15))),new nt(18,Int32Array.from([6,30,56,82]),new ue(30,new K(5,120),new K(1,121)),new ue(26,new K(9,43),new K(4,44)),new ue(28,new K(17,22),new K(1,23)),new ue(28,new K(2,14),new K(19,15))),new nt(19,Int32Array.from([6,30,58,86]),new ue(28,new K(3,113),new K(4,114)),new ue(26,new K(3,44),new K(11,45)),new ue(26,new K(17,21),new K(4,22)),new ue(26,new K(9,13),new K(16,14))),new nt(20,Int32Array.from([6,34,62,90]),new ue(28,new K(3,107),new K(5,108)),new ue(26,new K(3,41),new K(13,42)),new ue(30,new K(15,24),new K(5,25)),new ue(28,new K(15,15),new K(10,16))),new nt(21,Int32Array.from([6,28,50,72,94]),new ue(28,new K(4,116),new K(4,117)),new ue(26,new K(17,42)),new ue(28,new K(17,22),new K(6,23)),new ue(30,new K(19,16),new K(6,17))),new nt(22,Int32Array.from([6,26,50,74,98]),new ue(28,new K(2,111),new K(7,112)),new ue(28,new K(17,46)),new ue(30,new K(7,24),new K(16,25)),new ue(24,new K(34,13))),new nt(23,Int32Array.from([6,30,54,78,102]),new ue(30,new K(4,121),new K(5,122)),new ue(28,new K(4,47),new K(14,48)),new ue(30,new K(11,24),new K(14,25)),new ue(30,new K(16,15),new K(14,16))),new nt(24,Int32Array.from([6,28,54,80,106]),new ue(30,new K(6,117),new K(4,118)),new ue(28,new K(6,45),new K(14,46)),new ue(30,new K(11,24),new K(16,25)),new ue(30,new K(30,16),new K(2,17))),new nt(25,Int32Array.from([6,32,58,84,110]),new ue(26,new K(8,106),new K(4,107)),new ue(28,new K(8,47),new K(13,48)),new ue(30,new K(7,24),new K(22,25)),new ue(30,new K(22,15),new K(13,16))),new nt(26,Int32Array.from([6,30,58,86,114]),new ue(28,new K(10,114),new K(2,115)),new ue(28,new K(19,46),new K(4,47)),new ue(28,new K(28,22),new K(6,23)),new ue(30,new K(33,16),new K(4,17))),new nt(27,Int32Array.from([6,34,62,90,118]),new ue(30,new K(8,122),new K(4,123)),new ue(28,new K(22,45),new K(3,46)),new ue(30,new K(8,23),new K(26,24)),new ue(30,new K(12,15),new K(28,16))),new nt(28,Int32Array.from([6,26,50,74,98,122]),new ue(30,new K(3,117),new K(10,118)),new ue(28,new K(3,45),new K(23,46)),new ue(30,new K(4,24),new K(31,25)),new ue(30,new K(11,15),new K(31,16))),new nt(29,Int32Array.from([6,30,54,78,102,126]),new ue(30,new K(7,116),new K(7,117)),new ue(28,new K(21,45),new K(7,46)),new ue(30,new K(1,23),new K(37,24)),new ue(30,new K(19,15),new K(26,16))),new nt(30,Int32Array.from([6,26,52,78,104,130]),new ue(30,new K(5,115),new K(10,116)),new ue(28,new K(19,47),new K(10,48)),new ue(30,new K(15,24),new K(25,25)),new ue(30,new K(23,15),new K(25,16))),new nt(31,Int32Array.from([6,30,56,82,108,134]),new ue(30,new K(13,115),new K(3,116)),new ue(28,new K(2,46),new K(29,47)),new ue(30,new K(42,24),new K(1,25)),new ue(30,new K(23,15),new K(28,16))),new nt(32,Int32Array.from([6,34,60,86,112,138]),new ue(30,new K(17,115)),new ue(28,new K(10,46),new K(23,47)),new ue(30,new K(10,24),new K(35,25)),new ue(30,new K(19,15),new K(35,16))),new nt(33,Int32Array.from([6,30,58,86,114,142]),new ue(30,new K(17,115),new K(1,116)),new ue(28,new K(14,46),new K(21,47)),new ue(30,new K(29,24),new K(19,25)),new ue(30,new K(11,15),new K(46,16))),new nt(34,Int32Array.from([6,34,62,90,118,146]),new ue(30,new K(13,115),new K(6,116)),new ue(28,new K(14,46),new K(23,47)),new ue(30,new K(44,24),new K(7,25)),new ue(30,new K(59,16),new K(1,17))),new nt(35,Int32Array.from([6,30,54,78,102,126,150]),new ue(30,new K(12,121),new K(7,122)),new ue(28,new K(12,47),new K(26,48)),new ue(30,new K(39,24),new K(14,25)),new ue(30,new K(22,15),new K(41,16))),new nt(36,Int32Array.from([6,24,50,76,102,128,154]),new ue(30,new K(6,121),new K(14,122)),new ue(28,new K(6,47),new K(34,48)),new ue(30,new K(46,24),new K(10,25)),new ue(30,new K(2,15),new K(64,16))),new nt(37,Int32Array.from([6,28,54,80,106,132,158]),new ue(30,new K(17,122),new K(4,123)),new ue(28,new K(29,46),new K(14,47)),new ue(30,new K(49,24),new K(10,25)),new ue(30,new K(24,15),new K(46,16))),new nt(38,Int32Array.from([6,32,58,84,110,136,162]),new ue(30,new K(4,122),new K(18,123)),new ue(28,new K(13,46),new K(32,47)),new ue(30,new K(48,24),new K(14,25)),new ue(30,new K(42,15),new K(32,16))),new nt(39,Int32Array.from([6,26,54,82,110,138,166]),new ue(30,new K(20,117),new K(4,118)),new ue(28,new K(40,47),new K(7,48)),new ue(30,new K(43,24),new K(22,25)),new ue(30,new K(10,15),new K(67,16))),new nt(40,Int32Array.from([6,30,58,86,114,142,170]),new ue(30,new K(19,118),new K(6,119)),new ue(28,new K(18,47),new K(31,48)),new ue(30,new K(34,24),new K(34,25)),new ue(30,new K(20,15),new K(61,16)))];var Tn;(function(V){V[V.DATA_MASK_000=0]="DATA_MASK_000",V[V.DATA_MASK_001=1]="DATA_MASK_001",V[V.DATA_MASK_010=2]="DATA_MASK_010",V[V.DATA_MASK_011=3]="DATA_MASK_011",V[V.DATA_MASK_100=4]="DATA_MASK_100",V[V.DATA_MASK_101=5]="DATA_MASK_101",V[V.DATA_MASK_110=6]="DATA_MASK_110",V[V.DATA_MASK_111=7]="DATA_MASK_111"})(Tn||(Tn={}));class xt{constructor(s,u){this.value=s,this.isMasked=u}unmaskBitMatrix(s,u){for(let h=0;h<u;h++)for(let g=0;g<u;g++)this.isMasked(h,g)&&s.flip(g,h)}}xt.values=new Map([[Tn.DATA_MASK_000,new xt(Tn.DATA_MASK_000,(V,s)=>(V+s&1)===0)],[Tn.DATA_MASK_001,new xt(Tn.DATA_MASK_001,(V,s)=>(V&1)===0)],[Tn.DATA_MASK_010,new xt(Tn.DATA_MASK_010,(V,s)=>s%3===0)],[Tn.DATA_MASK_011,new xt(Tn.DATA_MASK_011,(V,s)=>(V+s)%3===0)],[Tn.DATA_MASK_100,new xt(Tn.DATA_MASK_100,(V,s)=>(Math.floor(V/2)+Math.floor(s/3)&1)===0)],[Tn.DATA_MASK_101,new xt(Tn.DATA_MASK_101,(V,s)=>V*s%6===0)],[Tn.DATA_MASK_110,new xt(Tn.DATA_MASK_110,(V,s)=>V*s%6<3)],[Tn.DATA_MASK_111,new xt(Tn.DATA_MASK_111,(V,s)=>(V+s+V*s%3&1)===0)]]);class Cf{constructor(s){const u=s.getHeight();if(u<21||(u&3)!==1)throw new W;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let y=0;y<6;y++)s=this.copyBit(y,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let y=5;y>=0;y--)s=this.copyBit(8,y,s);const u=this.bitMatrix.getHeight();let h=0;const g=u-7;for(let y=u-1;y>=g;y--)h=this.copyBit(8,y,h);for(let y=u-8;y<u;y++)h=this.copyBit(y,8,h);if(this.parsedFormatInfo=Jn.decodeFormatInformation(s,h),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),u=Math.floor((s-17)/4);if(u<=6)return nt.getVersionForNumber(u);let h=0;const g=s-11;for(let x=5;x>=0;x--)for(let _=s-9;_>=g;_--)h=this.copyBit(_,x,h);let y=nt.decodeVersionInformation(h);if(y!==null&&y.getDimensionForVersion()===s)return this.parsedVersion=y,y;h=0;for(let x=5;x>=0;x--)for(let _=s-9;_>=g;_--)h=this.copyBit(x,_,h);if(y=nt.decodeVersionInformation(h),y!==null&&y.getDimensionForVersion()===s)return this.parsedVersion=y,y;throw new W}copyBit(s,u,h){return(this.isMirror?this.bitMatrix.get(u,s):this.bitMatrix.get(s,u))?h<<1|1:h<<1}readCodewords(){const s=this.readFormatInformation(),u=this.readVersion(),h=xt.values.get(s.getDataMask()),g=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,g);const y=u.buildFunctionPattern();let x=!0;const _=new Uint8Array(u.getTotalCodewords());let T=0,O=0,j=0;for(let z=g-1;z>0;z-=2){z===6&&z--;for(let H=0;H<g;H++){const Y=x?g-1-H:H;for(let Q=0;Q<2;Q++)y.get(z-Q,Y)||(j++,O<<=1,this.bitMatrix.get(z-Q,Y)&&(O|=1),j===8&&(_[T++]=O,j=0,O=0))}x=!x}if(T!==u.getTotalCodewords())throw new W;return _}remask(){if(this.parsedFormatInfo===null)return;const s=xt.values[this.parsedFormatInfo.getDataMask()],u=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,u)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let u=0,h=s.getWidth();u<h;u++)for(let g=u+1,y=s.getHeight();g<y;g++)s.get(u,g)!==s.get(g,u)&&(s.flip(g,u),s.flip(u,g))}}class zl{constructor(s,u){this.numDataCodewords=s,this.codewords=u}static getDataBlocks(s,u,h){if(s.length!==u.getTotalCodewords())throw new v;const g=u.getECBlocksForLevel(h);let y=0;const x=g.getECBlocks();for(const Q of x)y+=Q.getCount();const _=new Array(y);let T=0;for(const Q of x)for(let re=0;re<Q.getCount();re++){const oe=Q.getDataCodewords(),ge=g.getECCodewordsPerBlock()+oe;_[T++]=new zl(oe,new Uint8Array(ge))}const O=_[0].codewords.length;let j=_.length-1;for(;j>=0&&_[j].codewords.length!==O;)j--;j++;const z=O-g.getECCodewordsPerBlock();let H=0;for(let Q=0;Q<z;Q++)for(let re=0;re<T;re++)_[re].codewords[Q]=s[H++];for(let Q=j;Q<T;Q++)_[Q].codewords[z]=s[H++];const Y=_[0].codewords.length;for(let Q=z;Q<Y;Q++)for(let re=0;re<T;re++){const oe=re<j?Q:Q+1;_[re].codewords[oe]=s[H++]}return _}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var kr;(function(V){V[V.TERMINATOR=0]="TERMINATOR",V[V.NUMERIC=1]="NUMERIC",V[V.ALPHANUMERIC=2]="ALPHANUMERIC",V[V.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",V[V.BYTE=4]="BYTE",V[V.ECI=5]="ECI",V[V.KANJI=6]="KANJI",V[V.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",V[V.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",V[V.HANZI=9]="HANZI"})(kr||(kr={}));class rt{constructor(s,u,h,g){this.value=s,this.stringValue=u,this.characterCountBitsForVersions=h,this.bits=g,rt.FOR_BITS.set(g,this),rt.FOR_VALUE.set(s,this)}static forBits(s){const u=rt.FOR_BITS.get(s);if(u===void 0)throw new v;return u}getCharacterCountBits(s){const u=s.getVersionNumber();let h;return u<=9?h=0:u<=26?h=1:h=2,this.characterCountBitsForVersions[h]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof rt))return!1;const u=s;return this.value===u.value}toString(){return this.stringValue}}rt.FOR_BITS=new Map,rt.FOR_VALUE=new Map,rt.TERMINATOR=new rt(kr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),rt.NUMERIC=new rt(kr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),rt.ALPHANUMERIC=new rt(kr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),rt.STRUCTURED_APPEND=new rt(kr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),rt.BYTE=new rt(kr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),rt.ECI=new rt(kr.ECI,"ECI",Int32Array.from([0,0,0]),7),rt.KANJI=new rt(kr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),rt.FNC1_FIRST_POSITION=new rt(kr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),rt.FNC1_SECOND_POSITION=new rt(kr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),rt.HANZI=new rt(kr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class tn{static decode(s,u,h,g){const y=new Ec(s);let x=new be;const _=new Array;let T=-1,O=-1;try{let j=null,z=!1,H;do{if(y.available()<4)H=rt.TERMINATOR;else{const Y=y.readBits(4);H=rt.forBits(Y)}switch(H){case rt.TERMINATOR:break;case rt.FNC1_FIRST_POSITION:case rt.FNC1_SECOND_POSITION:z=!0;break;case rt.STRUCTURED_APPEND:if(y.available()<16)throw new W;T=y.readBits(8),O=y.readBits(8);break;case rt.ECI:const Y=tn.parseECIValue(y);if(j=X.getCharacterSetECIByValue(Y),j===null)throw new W;break;case rt.HANZI:const Q=y.readBits(4),re=y.readBits(H.getCharacterCountBits(u));Q===tn.GB2312_SUBSET&&tn.decodeHanziSegment(y,x,re);break;default:const oe=y.readBits(H.getCharacterCountBits(u));switch(H){case rt.NUMERIC:tn.decodeNumericSegment(y,x,oe);break;case rt.ALPHANUMERIC:tn.decodeAlphanumericSegment(y,x,oe,z);break;case rt.BYTE:tn.decodeByteSegment(y,x,oe,j,_,g);break;case rt.KANJI:tn.decodeKanjiSegment(y,x,oe);break;default:throw new W}break}}while(H!==rt.TERMINATOR)}catch{throw new W}return new we(s,x.toString(),_.length===0?null:_,h===null?null:h.toString(),T,O)}static decodeHanziSegment(s,u,h){if(h*13>s.available())throw new W;const g=new Uint8Array(2*h);let y=0;for(;h>0;){const x=s.readBits(13);let _=x/96<<8&4294967295|x%96;_<959?_+=41377:_+=42657,g[y]=_>>8&255,g[y+1]=_&255,y+=2,h--}try{u.append(ae.decode(g,le.GB2312))}catch(x){throw new W(x)}}static decodeKanjiSegment(s,u,h){if(h*13>s.available())throw new W;const g=new Uint8Array(2*h);let y=0;for(;h>0;){const x=s.readBits(13);let _=x/192<<8&4294967295|x%192;_<7936?_+=33088:_+=49472,g[y]=_>>8,g[y+1]=_,y+=2,h--}try{u.append(ae.decode(g,le.SHIFT_JIS))}catch(x){throw new W(x)}}static decodeByteSegment(s,u,h,g,y,x){if(8*h>s.available())throw new W;const _=new Uint8Array(h);for(let O=0;O<h;O++)_[O]=s.readBits(8);let T;g===null?T=le.guessEncoding(_,x):T=g.getName();try{u.append(ae.decode(_,T))}catch(O){throw new W(O)}y.push(_)}static toAlphaNumericChar(s){if(s>=tn.ALPHANUMERIC_CHARS.length)throw new W;return tn.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,u,h,g){const y=u.length();for(;h>1;){if(s.available()<11)throw new W;const x=s.readBits(11);u.append(tn.toAlphaNumericChar(Math.floor(x/45))),u.append(tn.toAlphaNumericChar(x%45)),h-=2}if(h===1){if(s.available()<6)throw new W;u.append(tn.toAlphaNumericChar(s.readBits(6)))}if(g)for(let x=y;x<u.length();x++)u.charAt(x)==="%"&&(x<u.length()-1&&u.charAt(x+1)==="%"?u.deleteCharAt(x+1):u.setCharAt(x,""))}static decodeNumericSegment(s,u,h){for(;h>=3;){if(s.available()<10)throw new W;const g=s.readBits(10);if(g>=1e3)throw new W;u.append(tn.toAlphaNumericChar(Math.floor(g/100))),u.append(tn.toAlphaNumericChar(Math.floor(g/10)%10)),u.append(tn.toAlphaNumericChar(g%10)),h-=3}if(h===2){if(s.available()<7)throw new W;const g=s.readBits(7);if(g>=100)throw new W;u.append(tn.toAlphaNumericChar(Math.floor(g/10))),u.append(tn.toAlphaNumericChar(g%10))}else if(h===1){if(s.available()<4)throw new W;const g=s.readBits(4);if(g>=10)throw new W;u.append(tn.toAlphaNumericChar(g))}}static parseECIValue(s){const u=s.readBits(8);if((u&128)===0)return u&127;if((u&192)===128){const h=s.readBits(8);return(u&63)<<8&4294967295|h}if((u&224)===192){const h=s.readBits(16);return(u&31)<<16&4294967295|h}throw new W}}tn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",tn.GB2312_SUBSET=1;class _c{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const u=s[0];s[0]=s[2],s[2]=u}}class Sc{constructor(){this.rsDecoder=new An(Ke.QR_CODE_FIELD_256)}decodeBooleanArray(s,u){return this.decodeBitMatrix(me.parseFromBooleanArray(s),u)}decodeBitMatrix(s,u){const h=new Cf(s);let g=null;try{return this.decodeBitMatrixParser(h,u)}catch(y){g=y}try{h.remask(),h.setMirror(!0),h.readVersion(),h.readFormatInformation(),h.mirror();const y=this.decodeBitMatrixParser(h,u);return y.setOther(new _c(!0)),y}catch(y){throw g!==null?g:y}}decodeBitMatrixParser(s,u){const h=s.readVersion(),g=s.readFormatInformation().getErrorCorrectionLevel(),y=s.readCodewords(),x=zl.getDataBlocks(y,h,g);let _=0;for(const j of x)_+=j.getNumDataCodewords();const T=new Uint8Array(_);let O=0;for(const j of x){const z=j.getCodewords(),H=j.getNumDataCodewords();this.correctErrors(z,H);for(let Y=0;Y<H;Y++)T[O++]=z[Y]}return tn.decode(T,h,g,u)}correctErrors(s,u){const h=new Int32Array(s);try{this.rsDecoder.decode(h,s.length-u)}catch{throw new C}for(let g=0;g<u;g++)s[g]=h[g]}}class Gs extends ze{constructor(s,u,h){super(s,u),this.estimatedModuleSize=h}aboutEquals(s,u,h){if(Math.abs(u-this.getY())<=s&&Math.abs(h-this.getX())<=s){const g=Math.abs(s-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1}combineEstimate(s,u,h){const g=(this.getX()+u)/2,y=(this.getY()+s)/2,x=(this.estimatedModuleSize+h)/2;return new Gs(g,y,x)}}class wi{constructor(s,u,h,g,y,x,_){this.image=s,this.startX=u,this.startY=h,this.width=g,this.height=y,this.moduleSize=x,this.resultPointCallback=_,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,u=this.height,h=this.width,g=s+h,y=this.startY+u/2,x=new Int32Array(3),_=this.image;for(let T=0;T<u;T++){const O=y+((T&1)===0?Math.floor((T+1)/2):-Math.floor((T+1)/2));x[0]=0,x[1]=0,x[2]=0;let j=s;for(;j<g&&!_.get(j,O);)j++;let z=0;for(;j<g;){if(_.get(j,O))if(z===1)x[1]++;else if(z===2){if(this.foundPatternCross(x)){const H=this.handlePossibleCenter(x,O,j);if(H!==null)return H}x[0]=x[2],x[1]=1,x[2]=0,z=1}else x[++z]++;else z===1&&z++,x[z]++;j++}if(this.foundPatternCross(x)){const H=this.handlePossibleCenter(x,O,g);if(H!==null)return H}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new te}static centerFromEnd(s,u){return u-s[2]-s[1]/2}foundPatternCross(s){const u=this.moduleSize,h=u/2;for(let g=0;g<3;g++)if(Math.abs(u-s[g])>=h)return!1;return!0}crossCheckVertical(s,u,h,g){const y=this.image,x=y.getHeight(),_=this.crossCheckStateCount;_[0]=0,_[1]=0,_[2]=0;let T=s;for(;T>=0&&y.get(u,T)&&_[1]<=h;)_[1]++,T--;if(T<0||_[1]>h)return NaN;for(;T>=0&&!y.get(u,T)&&_[0]<=h;)_[0]++,T--;if(_[0]>h)return NaN;for(T=s+1;T<x&&y.get(u,T)&&_[1]<=h;)_[1]++,T++;if(T===x||_[1]>h)return NaN;for(;T<x&&!y.get(u,T)&&_[2]<=h;)_[2]++,T++;if(_[2]>h)return NaN;const O=_[0]+_[1]+_[2];return 5*Math.abs(O-g)>=2*g?NaN:this.foundPatternCross(_)?wi.centerFromEnd(_,T):NaN}handlePossibleCenter(s,u,h){const g=s[0]+s[1]+s[2],y=wi.centerFromEnd(s,h),x=this.crossCheckVertical(u,y,2*s[1],g);if(!isNaN(x)){const _=(s[0]+s[1]+s[2])/3;for(const O of this.possibleCenters)if(O.aboutEquals(_,x,y))return O.combineEstimate(x,y,_);const T=new Gs(y,x,_);this.possibleCenters.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return null}}class Ui extends ze{constructor(s,u,h,g){super(s,u),this.estimatedModuleSize=h,this.count=g,g===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,u,h){if(Math.abs(u-this.getY())<=s&&Math.abs(h-this.getX())<=s){const g=Math.abs(s-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1}combineEstimate(s,u,h){const g=this.count+1,y=(this.count*this.getX()+u)/g,x=(this.count*this.getY()+s)/g,_=(this.count*this.estimatedModuleSize+h)/g;return new Ui(y,x,_,g)}}class Mo{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class fn{constructor(s,u){this.image=s,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=u}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const u=s!=null&&s.get(q.TRY_HARDER)!==void 0,h=s!=null&&s.get(q.PURE_BARCODE)!==void 0,g=this.image,y=g.getHeight(),x=g.getWidth();let _=Math.floor(3*y/(4*fn.MAX_MODULES));(_<fn.MIN_SKIP||u)&&(_=fn.MIN_SKIP);let T=!1;const O=new Int32Array(5);for(let z=_-1;z<y&&!T;z+=_){O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0;let H=0;for(let Y=0;Y<x;Y++)if(g.get(Y,z))(H&1)===1&&H++,O[H]++;else if((H&1)===0)if(H===4)if(fn.foundPatternCross(O)){if(this.handlePossibleCenter(O,z,Y,h)===!0)if(_=2,this.hasSkipped===!0)T=this.haveMultiplyConfirmedCenters();else{const re=this.findRowSkip();re>O[2]&&(z+=re-O[2]-_,Y=x-1)}else{O[0]=O[2],O[1]=O[3],O[2]=O[4],O[3]=1,O[4]=0,H=3;continue}H=0,O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0}else O[0]=O[2],O[1]=O[3],O[2]=O[4],O[3]=1,O[4]=0,H=3;else O[++H]++;else O[H]++;fn.foundPatternCross(O)&&this.handlePossibleCenter(O,z,x,h)===!0&&(_=O[0],this.hasSkipped&&(T=this.haveMultiplyConfirmedCenters()))}const j=this.selectBestPatterns();return ze.orderBestPatterns(j),new Mo(j)}static centerFromEnd(s,u){return u-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let u=0;for(let y=0;y<5;y++){const x=s[y];if(x===0)return!1;u+=x}if(u<7)return!1;const h=u/7,g=h/2;return Math.abs(h-s[0])<g&&Math.abs(h-s[1])<g&&Math.abs(3*h-s[2])<3*g&&Math.abs(h-s[3])<g&&Math.abs(h-s[4])<g}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,u,h,g){const y=this.getCrossCheckStateCount();let x=0;const _=this.image;for(;s>=x&&u>=x&&_.get(u-x,s-x);)y[2]++,x++;if(s<x||u<x)return!1;for(;s>=x&&u>=x&&!_.get(u-x,s-x)&&y[1]<=h;)y[1]++,x++;if(s<x||u<x||y[1]>h)return!1;for(;s>=x&&u>=x&&_.get(u-x,s-x)&&y[0]<=h;)y[0]++,x++;if(y[0]>h)return!1;const T=_.getHeight(),O=_.getWidth();for(x=1;s+x<T&&u+x<O&&_.get(u+x,s+x);)y[2]++,x++;if(s+x>=T||u+x>=O)return!1;for(;s+x<T&&u+x<O&&!_.get(u+x,s+x)&&y[3]<h;)y[3]++,x++;if(s+x>=T||u+x>=O||y[3]>=h)return!1;for(;s+x<T&&u+x<O&&_.get(u+x,s+x)&&y[4]<h;)y[4]++,x++;if(y[4]>=h)return!1;const j=y[0]+y[1]+y[2]+y[3]+y[4];return Math.abs(j-g)<2*g&&fn.foundPatternCross(y)}crossCheckVertical(s,u,h,g){const y=this.image,x=y.getHeight(),_=this.getCrossCheckStateCount();let T=s;for(;T>=0&&y.get(u,T);)_[2]++,T--;if(T<0)return NaN;for(;T>=0&&!y.get(u,T)&&_[1]<=h;)_[1]++,T--;if(T<0||_[1]>h)return NaN;for(;T>=0&&y.get(u,T)&&_[0]<=h;)_[0]++,T--;if(_[0]>h)return NaN;for(T=s+1;T<x&&y.get(u,T);)_[2]++,T++;if(T===x)return NaN;for(;T<x&&!y.get(u,T)&&_[3]<h;)_[3]++,T++;if(T===x||_[3]>=h)return NaN;for(;T<x&&y.get(u,T)&&_[4]<h;)_[4]++,T++;if(_[4]>=h)return NaN;const O=_[0]+_[1]+_[2]+_[3]+_[4];return 5*Math.abs(O-g)>=2*g?NaN:fn.foundPatternCross(_)?fn.centerFromEnd(_,T):NaN}crossCheckHorizontal(s,u,h,g){const y=this.image,x=y.getWidth(),_=this.getCrossCheckStateCount();let T=s;for(;T>=0&&y.get(T,u);)_[2]++,T--;if(T<0)return NaN;for(;T>=0&&!y.get(T,u)&&_[1]<=h;)_[1]++,T--;if(T<0||_[1]>h)return NaN;for(;T>=0&&y.get(T,u)&&_[0]<=h;)_[0]++,T--;if(_[0]>h)return NaN;for(T=s+1;T<x&&y.get(T,u);)_[2]++,T++;if(T===x)return NaN;for(;T<x&&!y.get(T,u)&&_[3]<h;)_[3]++,T++;if(T===x||_[3]>=h)return NaN;for(;T<x&&y.get(T,u)&&_[4]<h;)_[4]++,T++;if(_[4]>=h)return NaN;const O=_[0]+_[1]+_[2]+_[3]+_[4];return 5*Math.abs(O-g)>=g?NaN:fn.foundPatternCross(_)?fn.centerFromEnd(_,T):NaN}handlePossibleCenter(s,u,h,g){const y=s[0]+s[1]+s[2]+s[3]+s[4];let x=fn.centerFromEnd(s,h),_=this.crossCheckVertical(u,Math.floor(x),s[2],y);if(!isNaN(_)&&(x=this.crossCheckHorizontal(Math.floor(x),Math.floor(_),s[2],y),!isNaN(x)&&(!g||this.crossCheckDiagonal(Math.floor(_),Math.floor(x),s[2],y)))){const T=y/7;let O=!1;const j=this.possibleCenters;for(let z=0,H=j.length;z<H;z++){const Y=j[z];if(Y.aboutEquals(T,_,x)){j[z]=Y.combineEstimate(_,x,T),O=!0;break}}if(!O){const z=new Ui(x,_,T);j.push(z),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(z)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let u=null;for(const h of this.possibleCenters)if(h.getCount()>=fn.CENTER_QUORUM)if(u==null)u=h;else return this.hasSkipped=!0,Math.floor((Math.abs(u.getX()-h.getX())-Math.abs(u.getY()-h.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,u=0;const h=this.possibleCenters.length;for(const x of this.possibleCenters)x.getCount()>=fn.CENTER_QUORUM&&(s++,u+=x.getEstimatedModuleSize());if(s<3)return!1;const g=u/h;let y=0;for(const x of this.possibleCenters)y+=Math.abs(x.getEstimatedModuleSize()-g);return y<=.05*u}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new te;const u=this.possibleCenters;let h;if(s>3){let g=0,y=0;for(const T of this.possibleCenters){const O=T.getEstimatedModuleSize();g+=O,y+=O*O}h=g/s;let x=Math.sqrt(y/s-h*h);u.sort((T,O)=>{const j=Math.abs(O.getEstimatedModuleSize()-h),z=Math.abs(T.getEstimatedModuleSize()-h);return j<z?-1:j>z?1:0});const _=Math.max(.2*h,x);for(let T=0;T<u.length&&u.length>3;T++){const O=u[T];Math.abs(O.getEstimatedModuleSize()-h)>_&&(u.splice(T,1),T--)}}if(u.length>3){let g=0;for(const y of u)g+=y.getEstimatedModuleSize();h=g/u.length,u.sort((y,x)=>{if(x.getCount()===y.getCount()){const _=Math.abs(x.getEstimatedModuleSize()-h),T=Math.abs(y.getEstimatedModuleSize()-h);return _<T?1:_>T?-1:0}else return x.getCount()-y.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]}}fn.CENTER_QUORUM=2,fn.MIN_SKIP=3,fn.MAX_MODULES=57;class lo{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(q.NEED_RESULT_POINT_CALLBACK);const h=new fn(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(h)}processFinderPatternInfo(s){const u=s.getTopLeft(),h=s.getTopRight(),g=s.getBottomLeft(),y=this.calculateModuleSize(u,h,g);if(y<1)throw new te("No pattern found in proccess finder.");const x=lo.computeDimension(u,h,g,y),_=nt.getProvisionalVersionForDimension(x),T=_.getDimensionForVersion()-7;let O=null;if(_.getAlignmentPatternCenters().length>0){const Y=h.getX()-u.getX()+g.getX(),Q=h.getY()-u.getY()+g.getY(),re=1-3/T,oe=Math.floor(u.getX()+re*(Y-u.getX())),ge=Math.floor(u.getY()+re*(Q-u.getY()));for(let Re=4;Re<=16;Re<<=1)try{O=this.findAlignmentInRegion(y,oe,ge,Re);break}catch(ke){if(!(ke instanceof te))throw ke}}const j=lo.createTransform(u,h,g,O,x),z=lo.sampleGrid(this.image,j,x);let H;return O===null?H=[g,u,h]:H=[g,u,h,O],new js(z,H)}static createTransform(s,u,h,g,y){const x=y-3.5;let _,T,O,j;return g!==null?(_=g.getX(),T=g.getY(),O=x-3,j=O):(_=u.getX()-s.getX()+h.getX(),T=u.getY()-s.getY()+h.getY(),O=x,j=x),Zr.quadrilateralToQuadrilateral(3.5,3.5,x,3.5,O,j,3.5,x,s.getX(),s.getY(),u.getX(),u.getY(),_,T,h.getX(),h.getY())}static sampleGrid(s,u,h){return mi.getInstance().sampleGridWithTransform(s,h,h,u)}static computeDimension(s,u,h,g){const y=_t.round(ze.distance(s,u)/g),x=_t.round(ze.distance(s,h)/g);let _=Math.floor((y+x)/2)+7;switch(_&3){case 0:_++;break;case 2:_--;break;case 3:throw new te("Dimensions could be not found.")}return _}calculateModuleSize(s,u,h){return(this.calculateModuleSizeOneWay(s,u)+this.calculateModuleSizeOneWay(s,h))/2}calculateModuleSizeOneWay(s,u){const h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(u.getX()),Math.floor(u.getY())),g=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(h)?g/7:isNaN(g)?h/7:(h+g)/14}sizeOfBlackWhiteBlackRunBothWays(s,u,h,g){let y=this.sizeOfBlackWhiteBlackRun(s,u,h,g),x=1,_=s-(h-s);_<0?(x=s/(s-_),_=0):_>=this.image.getWidth()&&(x=(this.image.getWidth()-1-s)/(_-s),_=this.image.getWidth()-1);let T=Math.floor(u-(g-u)*x);return x=1,T<0?(x=u/(u-T),T=0):T>=this.image.getHeight()&&(x=(this.image.getHeight()-1-u)/(T-u),T=this.image.getHeight()-1),_=Math.floor(s+(_-s)*x),y+=this.sizeOfBlackWhiteBlackRun(s,u,_,T),y-1}sizeOfBlackWhiteBlackRun(s,u,h,g){const y=Math.abs(g-u)>Math.abs(h-s);if(y){let Y=s;s=u,u=Y,Y=h,h=g,g=Y}const x=Math.abs(h-s),_=Math.abs(g-u);let T=-x/2;const O=s<h?1:-1,j=u<g?1:-1;let z=0;const H=h+O;for(let Y=s,Q=u;Y!==H;Y+=O){const re=y?Q:Y,oe=y?Y:Q;if(z===1===this.image.get(re,oe)){if(z===2)return _t.distance(Y,Q,s,u);z++}if(T+=_,T>0){if(Q===g)break;Q+=j,T-=x}}return z===2?_t.distance(h+O,g,s,u):NaN}findAlignmentInRegion(s,u,h,g){const y=Math.floor(g*s),x=Math.max(0,u-y),_=Math.min(this.image.getWidth()-1,u+y);if(_-x<s*3)throw new te("Alignment top exceeds estimated module size.");const T=Math.max(0,h-y),O=Math.min(this.image.getHeight()-1,h+y);if(O-T<s*3)throw new te("Alignment bottom exceeds estimated module size.");return new wi(this.image,x,T,_-x,O-T,s,this.resultPointCallback).find()}}class br{constructor(){this.decoder=new Sc}getDecoder(){return this.decoder}decode(s,u){let h,g;if(u!=null&&u.get(q.PURE_BARCODE)!==void 0){const T=br.extractPureBits(s.getBlackMatrix());h=this.decoder.decodeBitMatrix(T,u),g=br.NO_POINTS}else{const T=new lo(s.getBlackMatrix()).detect(u);h=this.decoder.decodeBitMatrix(T.getBits(),u),g=T.getPoints()}h.getOther()instanceof _c&&h.getOther().applyMirroredCorrection(g);const y=new Fe(h.getText(),h.getRawBytes(),void 0,g,Pe.QR_CODE,void 0),x=h.getByteSegments();x!==null&&y.putMetadata(it.BYTE_SEGMENTS,x);const _=h.getECLevel();return _!==null&&y.putMetadata(it.ERROR_CORRECTION_LEVEL,_),h.hasStructuredAppend()&&(y.putMetadata(it.STRUCTURED_APPEND_SEQUENCE,h.getStructuredAppendSequenceNumber()),y.putMetadata(it.STRUCTURED_APPEND_PARITY,h.getStructuredAppendParity())),y}reset(){}static extractPureBits(s){const u=s.getTopLeftOnBit(),h=s.getBottomRightOnBit();if(u===null||h===null)throw new te;const g=this.moduleSize(u,s);let y=u[1],x=h[1],_=u[0],T=h[0];if(_>=T||y>=x)throw new te;if(x-y!==T-_&&(T=_+(x-y),T>=s.getWidth()))throw new te;const O=Math.round((T-_+1)/g),j=Math.round((x-y+1)/g);if(O<=0||j<=0)throw new te;if(j!==O)throw new te;const z=Math.floor(g/2);y+=z,_+=z;const H=_+Math.floor((O-1)*g)-T;if(H>0){if(H>z)throw new te;_-=H}const Y=y+Math.floor((j-1)*g)-x;if(Y>0){if(Y>z)throw new te;y-=Y}const Q=new me(O,j);for(let re=0;re<j;re++){const oe=y+Math.floor(re*g);for(let ge=0;ge<O;ge++)s.get(_+Math.floor(ge*g),oe)&&Q.set(ge,re)}return Q}static moduleSize(s,u){const h=u.getHeight(),g=u.getWidth();let y=s[0],x=s[1],_=!0,T=0;for(;y<g&&x<h;){if(_!==u.get(y,x)){if(++T===5)break;_=!_}y++,x++}if(y===g||x===h)throw new te;return(y-s[0])/7}}br.NO_POINTS=new Array;class ut{PDF417Common(){}static getBitCountSum(s){return _t.sum(s)}static toIntArray(s){if(s==null||!s.length)return ut.EMPTY_INT_ARRAY;const u=new Int32Array(s.length);let h=0;for(const g of s)u[h++]=g;return u}static getCodeword(s){const u=F.binarySearch(ut.SYMBOL_TABLE,s&262143);return u<0?-1:(ut.CODEWORD_TABLE[u]-1)%ut.NUMBER_OF_CODEWORDS}}ut.NUMBER_OF_CODEWORDS=929,ut.MAX_CODEWORDS_IN_BARCODE=ut.NUMBER_OF_CODEWORDS-1,ut.MIN_ROWS_IN_BARCODE=3,ut.MAX_ROWS_IN_BARCODE=90,ut.MODULES_IN_CODEWORD=17,ut.MODULES_IN_STOP_PATTERN=18,ut.BARS_IN_MODULE=8,ut.EMPTY_INT_ARRAY=new Int32Array([]),ut.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ut.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Af{constructor(s,u){this.bits=s,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class ht{static detectMultiple(s,u,h){let g=s.getBlackMatrix(),y=ht.detect(h,g);return y.length||(g=g.clone(),g.rotate180(),y=ht.detect(h,g)),new Af(g,y)}static detect(s,u){const h=new Array;let g=0,y=0,x=!1;for(;g<u.getHeight();){const _=ht.findVertices(u,g,y);if(_[0]==null&&_[3]==null){if(!x)break;x=!1,y=0;for(const T of h)T[1]!=null&&(g=Math.trunc(Math.max(g,T[1].getY()))),T[3]!=null&&(g=Math.max(g,Math.trunc(T[3].getY())));g+=ht.ROW_STEP;continue}if(x=!0,h.push(_),!s)break;_[2]!=null?(y=Math.trunc(_[2].getX()),g=Math.trunc(_[2].getY())):(y=Math.trunc(_[4].getX()),g=Math.trunc(_[4].getY()))}return h}static findVertices(s,u,h){const g=s.getHeight(),y=s.getWidth(),x=new Array(8);return ht.copyToResult(x,ht.findRowsWithPattern(s,g,y,u,h,ht.START_PATTERN),ht.INDEXES_START_PATTERN),x[4]!=null&&(h=Math.trunc(x[4].getX()),u=Math.trunc(x[4].getY())),ht.copyToResult(x,ht.findRowsWithPattern(s,g,y,u,h,ht.STOP_PATTERN),ht.INDEXES_STOP_PATTERN),x}static copyToResult(s,u,h){for(let g=0;g<h.length;g++)s[h[g]]=u[g]}static findRowsWithPattern(s,u,h,g,y,x){const _=new Array(4);let T=!1;const O=new Int32Array(x.length);for(;g<u;g+=ht.ROW_STEP){let z=ht.findGuardPattern(s,y,g,h,!1,x,O);if(z!=null){for(;g>0;){const H=ht.findGuardPattern(s,y,--g,h,!1,x,O);if(H!=null)z=H;else{g++;break}}_[0]=new ze(z[0],g),_[1]=new ze(z[1],g),T=!0;break}}let j=g+1;if(T){let z=0,H=Int32Array.from([Math.trunc(_[0].getX()),Math.trunc(_[1].getX())]);for(;j<u;j++){const Y=ht.findGuardPattern(s,H[0],j,h,!1,x,O);if(Y!=null&&Math.abs(H[0]-Y[0])<ht.MAX_PATTERN_DRIFT&&Math.abs(H[1]-Y[1])<ht.MAX_PATTERN_DRIFT)H=Y,z=0;else{if(z>ht.SKIPPED_ROW_COUNT_MAX)break;z++}}j-=z+1,_[2]=new ze(H[0],j),_[3]=new ze(H[1],j)}return j-g<ht.BARCODE_MIN_HEIGHT&&F.fill(_,null),_}static findGuardPattern(s,u,h,g,y,x,_){F.fillWithin(_,0,_.length,0);let T=u,O=0;for(;s.get(T,h)&&T>0&&O++<ht.MAX_PIXEL_DRIFT;)T--;let j=T,z=0,H=x.length;for(let Y=y;j<g;j++)if(s.get(j,h)!==Y)_[z]++;else{if(z===H-1){if(ht.patternMatchVariance(_,x,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return new Int32Array([T,j]);T+=_[0]+_[1],N.arraycopy(_,2,_,0,z-1),_[z-1]=0,_[z]=0,z--}else z++;_[z]=1,Y=!Y}return z===H-1&&ht.patternMatchVariance(_,x,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE?new Int32Array([T,j-1]):null}static patternMatchVariance(s,u,h){let g=s.length,y=0,x=0;for(let O=0;O<g;O++)y+=s[O],x+=u[O];if(y<x)return 1/0;let _=y/x;h*=_;let T=0;for(let O=0;O<g;O++){let j=s[O],z=u[O]*_,H=j>z?j-z:z-j;if(H>h)return 1/0;T+=H}return T/y}}ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ht.MAX_AVG_VARIANCE=.42,ht.MAX_INDIVIDUAL_VARIANCE=.8,ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ht.MAX_PIXEL_DRIFT=3,ht.MAX_PATTERN_DRIFT=5,ht.SKIPPED_ROW_COUNT_MAX=25,ht.ROW_STEP=5,ht.BARCODE_MIN_HEIGHT=10;class Zn{constructor(s,u){if(u.length===0)throw new v;this.field=s;let h=u.length;if(h>1&&u[0]===0){let g=1;for(;g<h&&u[g]===0;)g++;g===h?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(h-g),N.arraycopy(u,g,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let g=0;for(let y of this.coefficients)g=this.field.add(g,y);return g}let u=this.coefficients[0],h=this.coefficients.length;for(let g=1;g<h;g++)u=this.field.add(this.field.multiply(s,u),this.coefficients[g]);return u}add(s){if(!this.field.equals(s.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let u=this.coefficients,h=s.coefficients;if(u.length>h.length){let x=u;u=h,h=x}let g=new Int32Array(h.length),y=h.length-u.length;N.arraycopy(h,0,g,0,y);for(let x=y;x<h.length;x++)g[x]=this.field.add(u[x-y],h[x]);return new Zn(this.field,g)}subtract(s){if(!this.field.equals(s.field))throw new v("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Zn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Zn(this.field,new Int32Array([0]));let u=this.coefficients,h=u.length,g=s.coefficients,y=g.length,x=new Int32Array(h+y-1);for(let _=0;_<h;_++){let T=u[_];for(let O=0;O<y;O++)x[_+O]=this.field.add(x[_+O],this.field.multiply(T,g[O]))}return new Zn(this.field,x)}negative(){let s=this.coefficients.length,u=new Int32Array(s);for(let h=0;h<s;h++)u[h]=this.field.subtract(0,this.coefficients[h]);return new Zn(this.field,u)}multiplyScalar(s){if(s===0)return new Zn(this.field,new Int32Array([0]));if(s===1)return this;let u=this.coefficients.length,h=new Int32Array(u);for(let g=0;g<u;g++)h[g]=this.field.multiply(this.coefficients[g],s);return new Zn(this.field,h)}multiplyByMonomial(s,u){if(s<0)throw new v;if(u===0)return new Zn(this.field,new Int32Array([0]));let h=this.coefficients.length,g=new Int32Array(h+s);for(let y=0;y<h;y++)g[y]=this.field.multiply(this.coefficients[y],u);return new Zn(this.field,g)}toString(){let s=new be;for(let u=this.getDegree();u>=0;u--){let h=this.getCoefficient(u);h!==0&&(h<0?(s.append(" - "),h=-h):s.length()>0&&s.append(" + "),(u===0||h!==1)&&s.append(h),u!==0&&(u===1?s.append("x"):(s.append("x^"),s.append(u))))}return s.toString()}}class Tf{add(s,u){return(s+u)%this.modulus}subtract(s,u){return(this.modulus+s-u)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new v;return this.logTable[s]}inverse(s){if(s===0)throw new _e;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,u){return s===0||u===0?0:this.expTable[(this.logTable[s]+this.logTable[u])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class Hs extends Tf{constructor(s,u){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let h=1;for(let g=0;g<s;g++)this.expTable[g]=h,h=h*u%s;for(let g=0;g<s-1;g++)this.logTable[this.expTable[g]]=g;this.zero=new Zn(this,new Int32Array([0])),this.one=new Zn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,u){if(s<0)throw new v;if(u===0)return this.zero;let h=new Int32Array(s+1);return h[0]=u,new Zn(this,h)}}Hs.PDF417_GF=new Hs(ut.NUMBER_OF_CODEWORDS,3);class Cc{constructor(){this.field=Hs.PDF417_GF}decode(s,u,h){let g=new Zn(this.field,s),y=new Int32Array(u),x=!1;for(let Q=u;Q>0;Q--){let re=g.evaluateAt(this.field.exp(Q));y[u-Q]=re,re!==0&&(x=!0)}if(!x)return 0;let _=this.field.getOne();if(h!=null)for(const Q of h){let re=this.field.exp(s.length-1-Q),oe=new Zn(this.field,new Int32Array([this.field.subtract(0,re),1]));_=_.multiply(oe)}let T=new Zn(this.field,y),O=this.runEuclideanAlgorithm(this.field.buildMonomial(u,1),T,u),j=O[0],z=O[1],H=this.findErrorLocations(j),Y=this.findErrorMagnitudes(z,j,H);for(let Q=0;Q<H.length;Q++){let re=s.length-1-this.field.log(H[Q]);if(re<0)throw C.getChecksumInstance();s[re]=this.field.subtract(s[re],Y[Q])}return H.length}runEuclideanAlgorithm(s,u,h){if(s.getDegree()<u.getDegree()){let H=s;s=u,u=H}let g=s,y=u,x=this.field.getZero(),_=this.field.getOne();for(;y.getDegree()>=Math.round(h/2);){let H=g,Y=x;if(g=y,x=_,g.isZero())throw C.getChecksumInstance();y=H;let Q=this.field.getZero(),re=g.getCoefficient(g.getDegree()),oe=this.field.inverse(re);for(;y.getDegree()>=g.getDegree()&&!y.isZero();){let ge=y.getDegree()-g.getDegree(),Re=this.field.multiply(y.getCoefficient(y.getDegree()),oe);Q=Q.add(this.field.buildMonomial(ge,Re)),y=y.subtract(g.multiplyByMonomial(ge,Re))}_=Q.multiply(x).subtract(Y).negative()}let T=_.getCoefficient(0);if(T===0)throw C.getChecksumInstance();let O=this.field.inverse(T),j=_.multiply(O),z=y.multiply(O);return[j,z]}findErrorLocations(s){let u=s.getDegree(),h=new Int32Array(u),g=0;for(let y=1;y<this.field.getSize()&&g<u;y++)s.evaluateAt(y)===0&&(h[g]=this.field.inverse(y),g++);if(g!==u)throw C.getChecksumInstance();return h}findErrorMagnitudes(s,u,h){let g=u.getDegree(),y=new Int32Array(g);for(let O=1;O<=g;O++)y[g-O]=this.field.multiply(O,u.getCoefficient(O));let x=new Zn(this.field,y),_=h.length,T=new Int32Array(_);for(let O=0;O<_;O++){let j=this.field.inverse(h[O]),z=this.field.subtract(0,s.evaluateAt(j)),H=this.field.inverse(x.evaluateAt(j));T[O]=this.field.multiply(z,H)}return T}}class Jo{constructor(s,u,h,g,y){s instanceof Jo?this.constructor_2(s):this.constructor_1(s,u,h,g,y)}constructor_1(s,u,h,g,y){const x=u==null||h==null,_=g==null||y==null;if(x&&_)throw new te;x?(u=new ze(0,g.getY()),h=new ze(0,y.getY())):_&&(g=new ze(s.getWidth()-1,u.getY()),y=new ze(s.getWidth()-1,h.getY())),this.image=s,this.topLeft=u,this.bottomLeft=h,this.topRight=g,this.bottomRight=y,this.minX=Math.trunc(Math.min(u.getX(),h.getX())),this.maxX=Math.trunc(Math.max(g.getX(),y.getX())),this.minY=Math.trunc(Math.min(u.getY(),g.getY())),this.maxY=Math.trunc(Math.max(h.getY(),y.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,u){return s==null?u:u==null?s:new Jo(s.image,s.topLeft,s.bottomLeft,u.topRight,u.bottomRight)}addMissingRows(s,u,h){let g=this.topLeft,y=this.bottomLeft,x=this.topRight,_=this.bottomRight;if(s>0){let T=h?this.topLeft:this.topRight,O=Math.trunc(T.getY()-s);O<0&&(O=0);let j=new ze(T.getX(),O);h?g=j:x=j}if(u>0){let T=h?this.bottomLeft:this.bottomRight,O=Math.trunc(T.getY()+u);O>=this.image.getHeight()&&(O=this.image.getHeight()-1);let j=new ze(T.getX(),O);h?y=j:_=j}return new Jo(this.image,g,y,x,_)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ka{constructor(s,u,h,g){this.columnCount=s,this.errorCorrectionLevel=g,this.rowCountUpperPart=u,this.rowCountLowerPart=h,this.rowCount=u+h}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class uo{constructor(){this.buffer=""}static form(s,u){let h=-1;function g(x,_,T,O,j,z){if(x==="%%")return"%";if(u[++h]===void 0)return;x=O?parseInt(O.substr(1)):void 0;let H=j?parseInt(j.substr(1)):void 0,Y;switch(z){case"s":Y=u[h];break;case"c":Y=u[h][0];break;case"f":Y=parseFloat(u[h]).toFixed(x);break;case"p":Y=parseFloat(u[h]).toPrecision(x);break;case"e":Y=parseFloat(u[h]).toExponential(x);break;case"x":Y=parseInt(u[h]).toString(H||16);break;case"d":Y=parseFloat(parseInt(u[h],H||10).toPrecision(x)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(H);let Q=parseInt(T),re=T&&T[0]+""=="0"?"0":" ";for(;Y.length<Q;)Y=_!==void 0?Y+re:re+Y;return Y}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(y,g)}format(s,...u){this.buffer+=uo.form(s,u)}toString(){return this.buffer}}class Vi{constructor(s){this.boundingBox=new Jo(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let u=this.getCodeword(s);if(u!=null)return u;for(let h=1;h<Vi.MAX_NEARBY_DISTANCE;h++){let g=this.imageRowToCodewordIndex(s)-h;if(g>=0&&(u=this.codewords[g],u!=null)||(g=this.imageRowToCodewordIndex(s)+h,g<this.codewords.length&&(u=this.codewords[g],u!=null)))return u}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,u){this.codewords[this.imageRowToCodewordIndex(s)]=u}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new uo;let u=0;for(const h of this.codewords){if(h==null){s.format("%3d:    |   %n",u++);continue}s.format("%3d: %3d|%3d%n",u++,h.getRowNumber(),h.getValue())}return s.toString()}}Vi.MAX_NEARBY_DISTANCE=5;class Do{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let u=this.values.get(s);u==null&&(u=0),u++,this.values.set(s,u)}getValue(){let s=-1,u=new Array;for(const[h,g]of this.values.entries()){const y={getKey:()=>h,getValue:()=>g};y.getValue()>s?(s=y.getValue(),u=[],u.push(y.getKey())):y.getValue()===s&&u.push(y.getKey())}return ut.toIntArray(u)}getConfidence(s){return this.values.get(s)}}class If extends Vi{constructor(s,u){super(s),this._isLeft=u}setRowNumbers(){for(let s of this.getCodewords())s?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let u=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(u,s);let h=this.getBoundingBox(),g=this._isLeft?h.getTopLeft():h.getTopRight(),y=this._isLeft?h.getBottomLeft():h.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(g.getY())),_=this.imageRowToCodewordIndex(Math.trunc(y.getY())),T=-1,O=1,j=0;for(let z=x;z<_;z++){if(u[z]==null)continue;let H=u[z],Y=H.getRowNumber()-T;if(Y===0)j++;else if(Y===1)O=Math.max(O,j),j=1,T=H.getRowNumber();else if(Y<0||H.getRowNumber()>=s.getRowCount()||Y>z)u[z]=null;else{let Q;O>2?Q=(O-2)*Y:Q=Y;let re=Q>=z;for(let oe=1;oe<=Q&&!re;oe++)re=u[z-oe]!=null;re?u[z]=null:(T=H.getRowNumber(),j=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let u=new Int32Array(s.getRowCount());for(let h of this.getCodewords())if(h!=null){let g=h.getRowNumber();if(g>=u.length)continue;u[g]++}return u}adjustIncompleteIndicatorColumnRowNumbers(s){let u=this.getBoundingBox(),h=this._isLeft?u.getTopLeft():u.getTopRight(),g=this._isLeft?u.getBottomLeft():u.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.imageRowToCodewordIndex(Math.trunc(g.getY())),_=this.getCodewords(),T=-1;for(let O=y;O<x;O++){if(_[O]==null)continue;let j=_[O];j.setRowNumberAsRowIndicatorColumn();let z=j.getRowNumber()-T;z===0||(z===1?T=j.getRowNumber():j.getRowNumber()>=s.getRowCount()?_[O]=null:T=j.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),u=new Do,h=new Do,g=new Do,y=new Do;for(let _ of s){if(_==null)continue;_.setRowNumberAsRowIndicatorColumn();let T=_.getValue()%30,O=_.getRowNumber();switch(this._isLeft||(O+=2),O%3){case 0:h.setValue(T*3+1);break;case 1:y.setValue(T/3),g.setValue(T%3);break;case 2:u.setValue(T+1);break}}if(u.getValue().length===0||h.getValue().length===0||g.getValue().length===0||y.getValue().length===0||u.getValue()[0]<1||h.getValue()[0]+g.getValue()[0]<ut.MIN_ROWS_IN_BARCODE||h.getValue()[0]+g.getValue()[0]>ut.MAX_ROWS_IN_BARCODE)return null;let x=new ka(u.getValue()[0],h.getValue()[0],g.getValue()[0],y.getValue()[0]);return this.removeIncorrectCodewords(s,x),x}removeIncorrectCodewords(s,u){for(let h=0;h<s.length;h++){let g=s[h];if(s[h]==null)continue;let y=g.getValue()%30,x=g.getRowNumber();if(x>u.getRowCount()){s[h]=null;continue}switch(this._isLeft||(x+=2),x%3){case 0:y*3+1!==u.getRowCountUpperPart()&&(s[h]=null);break;case 1:(Math.trunc(y/3)!==u.getErrorCorrectionLevel()||y%3!==u.getRowCountLowerPart())&&(s[h]=null);break;case 2:y+1!==u.getColumnCount()&&(s[h]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ma{constructor(s,u){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=u,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=ut.MAX_CODEWORDS_IN_BARCODE,u;do u=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<u);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let u=1;u<this.barcodeColumnCount+1;u++){let h=this.detectionResultColumns[u].getCodewords();for(let g=0;g<h.length;g++)h[g]!=null&&(h[g].hasValidRowNumber()||this.adjustRowNumbers(u,g,h))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<s.length;h++)if(s[h]!=null&&u[h]!=null&&s[h].getRowNumber()===u[h].getRowNumber())for(let g=1;g<=this.barcodeColumnCount;g++){let y=this.detectionResultColumns[g].getCodewords()[h];y!=null&&(y.setRowNumber(s[h].getRowNumber()),y.hasValidRowNumber()||(this.detectionResultColumns[g].getCodewords()[h]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<u.length;h++){if(u[h]==null)continue;let g=u[h].getRowNumber(),y=0;for(let x=this.barcodeColumnCount+1;x>0&&y<this.ADJUST_ROW_NUMBER_SKIP;x--){let _=this.detectionResultColumns[x].getCodewords()[h];_!=null&&(y=Ma.adjustRowNumberIfValid(g,y,_),_.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,u=this.detectionResultColumns[0].getCodewords();for(let h=0;h<u.length;h++){if(u[h]==null)continue;let g=u[h].getRowNumber(),y=0;for(let x=1;x<this.barcodeColumnCount+1&&y<this.ADJUST_ROW_NUMBER_SKIP;x++){let _=this.detectionResultColumns[x].getCodewords()[h];_!=null&&(y=Ma.adjustRowNumberIfValid(g,y,_),_.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,u,h){return h==null||h.hasValidRowNumber()||(h.isValidRowNumber(s)?(h.setRowNumber(s),u=0):++u),u}adjustRowNumbers(s,u,h){if(!this.detectionResultColumns[s-1])return;let g=h[u],y=this.detectionResultColumns[s-1].getCodewords(),x=y;this.detectionResultColumns[s+1]!=null&&(x=this.detectionResultColumns[s+1].getCodewords());let _=new Array(14);_[2]=y[u],_[3]=x[u],u>0&&(_[0]=h[u-1],_[4]=y[u-1],_[5]=x[u-1]),u>1&&(_[8]=h[u-2],_[10]=y[u-2],_[11]=x[u-2]),u<h.length-1&&(_[1]=h[u+1],_[6]=y[u+1],_[7]=x[u+1]),u<h.length-2&&(_[9]=h[u+2],_[12]=y[u+2],_[13]=x[u+2]);for(let T of _)if(Ma.adjustRowNumber(g,T))return}static adjustRowNumber(s,u){return u==null?!1:u.hasValidRowNumber()&&u.getBucket()===s.getBucket()?(s.setRowNumber(u.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,u){this.detectionResultColumns[s]=u}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let u=new uo;for(let h=0;h<s.getCodewords().length;h++){u.format("CW %3d:",h);for(let g=0;g<this.barcodeColumnCount+2;g++){if(this.detectionResultColumns[g]==null){u.format("    |   ");continue}let y=this.detectionResultColumns[g].getCodewords()[h];if(y==null){u.format("    |   ");continue}u.format(" %3d|%3d",y.getRowNumber(),y.getValue())}u.format("%n")}return u.toString()}}class Zo{constructor(s,u,h,g){this.rowNumber=Zo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(u),this.bucket=Math.trunc(h),this.value=Math.trunc(g)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Zo.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Zo.BARCODE_ROW_UNKNOWN=-1;class Qn{static initialize(){for(let s=0;s<ut.SYMBOL_TABLE.length;s++){let u=ut.SYMBOL_TABLE[s],h=u&1;for(let g=0;g<ut.BARS_IN_MODULE;g++){let y=0;for(;(u&1)===h;)y+=1,u>>=1;h=u&1,Qn.RATIOS_TABLE[s]||(Qn.RATIOS_TABLE[s]=new Array(ut.BARS_IN_MODULE)),Qn.RATIOS_TABLE[s][ut.BARS_IN_MODULE-g-1]=Math.fround(y/ut.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let u=Qn.getDecodedCodewordValue(Qn.sampleBitCounts(s));return u!==-1?u:Qn.getClosestDecodedValue(s)}static sampleBitCounts(s){let u=_t.sum(s),h=new Int32Array(ut.BARS_IN_MODULE),g=0,y=0;for(let x=0;x<ut.MODULES_IN_CODEWORD;x++){let _=u/(2*ut.MODULES_IN_CODEWORD)+x*u/ut.MODULES_IN_CODEWORD;y+s[g]<=_&&(y+=s[g],g++),h[g]++}return h}static getDecodedCodewordValue(s){let u=Qn.getBitValue(s);return ut.getCodeword(u)===-1?-1:u}static getBitValue(s){let u=0;for(let h=0;h<s.length;h++)for(let g=0;g<s[h];g++)u=u<<1|(h%2===0?1:0);return Math.trunc(u)}static getClosestDecodedValue(s){let u=_t.sum(s),h=new Array(ut.BARS_IN_MODULE);if(u>1)for(let x=0;x<h.length;x++)h[x]=Math.fround(s[x]/u);let g=Ro.MAX_VALUE,y=-1;this.bSymbolTableReady||Qn.initialize();for(let x=0;x<Qn.RATIOS_TABLE.length;x++){let _=0,T=Qn.RATIOS_TABLE[x];for(let O=0;O<ut.BARS_IN_MODULE;O++){let j=Math.fround(T[O]-h[O]);if(_+=Math.fround(j*j),_>=g)break}_<g&&(g=_,y=ut.SYMBOL_TABLE[x])}return y}}Qn.bSymbolTableReady=!1,Qn.RATIOS_TABLE=new Array(ut.SYMBOL_TABLE.length).map(V=>new Array(ut.BARS_IN_MODULE));class $l{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class Ac{static parseLong(s,u=void 0){return parseInt(s,u)}}class co extends d{}co.kind="NullPointerException";class Tc{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,u,h){if(s==null)throw new co;if(u<0||u>s.length||h<0||u+h>s.length||u+h<0)throw new R;if(h===0)return;for(let g=0;g<h;g++)this.write(s[u+g])}flush(){}close(){}}class Gl extends d{}class Pf extends Tc{constructor(s=32){if(super(),this.count=0,s<0)throw new v("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let h=this.buf.length<<1;if(h-s<0&&(h=s),h<0){if(s<0)throw new Gl;h=L.MAX_VALUE}this.buf=F.copyOfUint8Array(this.buf,h)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,u,h){if(u<0||u>s.length||h<0||u+h-s.length>0)throw new R;this.ensureCapacity(this.count+h),N.arraycopy(s,u,this.buf,this.count,h),this.count+=h}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return F.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var Pt;(function(V){V[V.ALPHA=0]="ALPHA",V[V.LOWER=1]="LOWER",V[V.MIXED=2]="MIXED",V[V.PUNCT=3]="PUNCT",V[V.ALPHA_SHIFT=4]="ALPHA_SHIFT",V[V.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pt||(Pt={}));function Da(){if(typeof window<"u")return window.BigInt||null;if(typeof Ah<"u")return Ah.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let La;function In(V){if(typeof La>"u"&&(La=Da()),La===null)throw new Error("BigInt is not supported!");return La(V)}function qs(){let V=[];V[0]=In(1);let s=In(900);V[1]=s;for(let u=2;u<16;u++)V[u]=V[u-1]*s;return V}class ye{static decode(s,u){let h=new be(""),g=X.ISO8859_1;h.enableDecoding(g);let y=1,x=s[y++],_=new $l;for(;y<s[0];){switch(x){case ye.TEXT_COMPACTION_MODE_LATCH:y=ye.textCompaction(s,y,h);break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:y=ye.byteCompaction(x,s,g,y,h);break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(s[y++]);break;case ye.NUMERIC_COMPACTION_MODE_LATCH:y=ye.numericCompaction(s,y,h);break;case ye.ECI_CHARSET:X.getCharacterSetECIByValue(s[y++]);break;case ye.ECI_GENERAL_PURPOSE:y+=2;break;case ye.ECI_USER_DEFINED:y++;break;case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:y=ye.decodeMacroBlock(s,y,_);break;case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:throw new W;default:y--,y=ye.textCompaction(s,y,h);break}if(y<s.length)x=s[y++];else throw W.getFormatInstance()}if(h.length()===0)throw W.getFormatInstance();let T=new we(null,h.toString(),null,u);return T.setOther(_),T}static decodeMacroBlock(s,u,h){if(u+ye.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw W.getFormatInstance();let g=new Int32Array(ye.NUMBER_OF_SEQUENCE_CODEWORDS);for(let _=0;_<ye.NUMBER_OF_SEQUENCE_CODEWORDS;_++,u++)g[_]=s[u];h.setSegmentIndex(L.parseInt(ye.decodeBase900toBase10(g,ye.NUMBER_OF_SEQUENCE_CODEWORDS)));let y=new be;u=ye.textCompaction(s,u,y),h.setFileId(y.toString());let x=-1;for(s[u]===ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(x=u+1);u<s[0];)switch(s[u]){case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(u++,s[u]){case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let _=new be;u=ye.textCompaction(s,u+1,_),h.setFileName(_.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let T=new be;u=ye.textCompaction(s,u+1,T),h.setSender(T.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let O=new be;u=ye.textCompaction(s,u+1,O),h.setAddressee(O.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let j=new be;u=ye.numericCompaction(s,u+1,j),h.setSegmentCount(L.parseInt(j.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let z=new be;u=ye.numericCompaction(s,u+1,z),h.setTimestamp(Ac.parseLong(z.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let H=new be;u=ye.numericCompaction(s,u+1,H),h.setChecksum(L.parseInt(H.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Y=new be;u=ye.numericCompaction(s,u+1,Y),h.setFileSize(Ac.parseLong(Y.toString()));break;default:throw W.getFormatInstance()}break;case ye.MACRO_PDF417_TERMINATOR:u++,h.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(x!==-1){let _=u-x;h.isLastSegment()&&_--,h.setOptionalData(F.copyOfRange(s,x,x+_))}return u}static textCompaction(s,u,h){let g=new Int32Array((s[0]-u)*2),y=new Int32Array((s[0]-u)*2),x=0,_=!1;for(;u<s[0]&&!_;){let T=s[u++];if(T<ye.TEXT_COMPACTION_MODE_LATCH)g[x]=T/30,g[x+1]=T%30,x+=2;else switch(T){case ye.TEXT_COMPACTION_MODE_LATCH:g[x++]=ye.TEXT_COMPACTION_MODE_LATCH;break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:u--,_=!0;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g[x]=ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,T=s[u++],y[x]=T,x++;break}}return ye.decodeTextCompaction(g,y,x,h),u}static decodeTextCompaction(s,u,h,g){let y=Pt.ALPHA,x=Pt.ALPHA,_=0;for(;_<h;){let T=s[_],O="";switch(y){case Pt.ALPHA:if(T<26)O=String.fromCharCode(65+T);else switch(T){case 26:O=" ";break;case ye.LL:y=Pt.LOWER;break;case ye.ML:y=Pt.MIXED;break;case ye.PS:x=y,y=Pt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(u[_]);break;case ye.TEXT_COMPACTION_MODE_LATCH:y=Pt.ALPHA;break}break;case Pt.LOWER:if(T<26)O=String.fromCharCode(97+T);else switch(T){case 26:O=" ";break;case ye.AS:x=y,y=Pt.ALPHA_SHIFT;break;case ye.ML:y=Pt.MIXED;break;case ye.PS:x=y,y=Pt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(u[_]);break;case ye.TEXT_COMPACTION_MODE_LATCH:y=Pt.ALPHA;break}break;case Pt.MIXED:if(T<ye.PL)O=ye.MIXED_CHARS[T];else switch(T){case ye.PL:y=Pt.PUNCT;break;case 26:O=" ";break;case ye.LL:y=Pt.LOWER;break;case ye.AL:y=Pt.ALPHA;break;case ye.PS:x=y,y=Pt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(u[_]);break;case ye.TEXT_COMPACTION_MODE_LATCH:y=Pt.ALPHA;break}break;case Pt.PUNCT:if(T<ye.PAL)O=ye.PUNCT_CHARS[T];else switch(T){case ye.PAL:y=Pt.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(u[_]);break;case ye.TEXT_COMPACTION_MODE_LATCH:y=Pt.ALPHA;break}break;case Pt.ALPHA_SHIFT:if(y=x,T<26)O=String.fromCharCode(65+T);else switch(T){case 26:O=" ";break;case ye.TEXT_COMPACTION_MODE_LATCH:y=Pt.ALPHA;break}break;case Pt.PUNCT_SHIFT:if(y=x,T<ye.PAL)O=ye.PUNCT_CHARS[T];else switch(T){case ye.PAL:y=Pt.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(u[_]);break;case ye.TEXT_COMPACTION_MODE_LATCH:y=Pt.ALPHA;break}break}O!==""&&g.append(O),_++}}static byteCompaction(s,u,h,g,y){let x=new Pf,_=0,T=0,O=!1;switch(s){case ye.BYTE_COMPACTION_MODE_LATCH:let j=new Int32Array(6),z=u[g++];for(;g<u[0]&&!O;)switch(j[_++]=z,T=900*T+z,z=u[g++],z){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:g--,O=!0;break;default:if(_%5===0&&_>0){for(let H=0;H<6;++H)x.write(Number(In(T)>>In(8*(5-H))));T=0,_=0}break}g===u[0]&&z<ye.TEXT_COMPACTION_MODE_LATCH&&(j[_++]=z);for(let H=0;H<_;H++)x.write(j[H]);break;case ye.BYTE_COMPACTION_MODE_LATCH_6:for(;g<u[0]&&!O;){let H=u[g++];if(H<ye.TEXT_COMPACTION_MODE_LATCH)_++,T=900*T+H;else switch(H){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:g--,O=!0;break}if(_%5===0&&_>0){for(let Y=0;Y<6;++Y)x.write(Number(In(T)>>In(8*(5-Y))));T=0,_=0}}break}return y.append(ae.decode(x.toByteArray(),h)),g}static numericCompaction(s,u,h){let g=0,y=!1,x=new Int32Array(ye.MAX_NUMERIC_CODEWORDS);for(;u<s[0]&&!y;){let _=s[u++];if(u===s[0]&&(y=!0),_<ye.TEXT_COMPACTION_MODE_LATCH)x[g]=_,g++;else switch(_){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:u--,y=!0;break}(g%ye.MAX_NUMERIC_CODEWORDS===0||_===ye.NUMERIC_COMPACTION_MODE_LATCH||y)&&g>0&&(h.append(ye.decodeBase900toBase10(x,g)),g=0)}return u}static decodeBase900toBase10(s,u){let h=In(0);for(let y=0;y<u;y++)h+=ye.EXP900[u-y-1]*In(s[y]);let g=h.toString();if(g.charAt(0)!=="1")throw new W;return g.substring(1)}}ye.TEXT_COMPACTION_MODE_LATCH=900,ye.BYTE_COMPACTION_MODE_LATCH=901,ye.NUMERIC_COMPACTION_MODE_LATCH=902,ye.BYTE_COMPACTION_MODE_LATCH_6=924,ye.ECI_USER_DEFINED=925,ye.ECI_GENERAL_PURPOSE=926,ye.ECI_CHARSET=927,ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ye.MACRO_PDF417_TERMINATOR=922,ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ye.MAX_NUMERIC_CODEWORDS=15,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ye.PL=25,ye.LL=27,ye.AS=27,ye.ML=28,ye.AL=28,ye.PS=29,ye.PAL=29,ye.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ye.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ye.EXP900=Da()?qs():[],ye.NUMBER_OF_SEQUENCE_CODEWORDS=2;class mt{constructor(){}static decode(s,u,h,g,y,x,_){let T=new Jo(s,u,h,g,y),O=null,j=null,z;for(let Q=!0;;Q=!1){if(u!=null&&(O=mt.getRowIndicatorColumn(s,T,u,!0,x,_)),g!=null&&(j=mt.getRowIndicatorColumn(s,T,g,!1,x,_)),z=mt.merge(O,j),z==null)throw te.getNotFoundInstance();let re=z.getBoundingBox();if(Q&&re!=null&&(re.getMinY()<T.getMinY()||re.getMaxY()>T.getMaxY()))T=re;else break}z.setBoundingBox(T);let H=z.getBarcodeColumnCount()+1;z.setDetectionResultColumn(0,O),z.setDetectionResultColumn(H,j);let Y=O!=null;for(let Q=1;Q<=H;Q++){let re=Y?Q:H-Q;if(z.getDetectionResultColumn(re)!==void 0)continue;let oe;re===0||re===H?oe=new If(T,re===0):oe=new Vi(T),z.setDetectionResultColumn(re,oe);let ge=-1,Re=ge;for(let ke=T.getMinY();ke<=T.getMaxY();ke++){if(ge=mt.getStartColumn(z,re,ke,Y),ge<0||ge>T.getMaxX()){if(Re===-1)continue;ge=Re}let Te=mt.detectCodeword(s,T.getMinX(),T.getMaxX(),Y,ge,ke,x,_);Te!=null&&(oe.setCodeword(ke,Te),Re=ge,x=Math.min(x,Te.getWidth()),_=Math.max(_,Te.getWidth()))}}return mt.createDecoderResult(z)}static merge(s,u){if(s==null&&u==null)return null;let h=mt.getBarcodeMetadata(s,u);if(h==null)return null;let g=Jo.merge(mt.adjustBoundingBox(s),mt.adjustBoundingBox(u));return new Ma(h,g)}static adjustBoundingBox(s){if(s==null)return null;let u=s.getRowHeights();if(u==null)return null;let h=mt.getMax(u),g=0;for(let _ of u)if(g+=h-_,_>0)break;let y=s.getCodewords();for(let _=0;g>0&&y[_]==null;_++)g--;let x=0;for(let _=u.length-1;_>=0&&(x+=h-u[_],!(u[_]>0));_--);for(let _=y.length-1;x>0&&y[_]==null;_--)x--;return s.getBoundingBox().addMissingRows(g,x,s.isLeft())}static getMax(s){let u=-1;for(let h of s)u=Math.max(u,h);return u}static getBarcodeMetadata(s,u){let h;if(s==null||(h=s.getBarcodeMetadata())==null)return u==null?null:u.getBarcodeMetadata();let g;return u==null||(g=u.getBarcodeMetadata())==null?h:h.getColumnCount()!==g.getColumnCount()&&h.getErrorCorrectionLevel()!==g.getErrorCorrectionLevel()&&h.getRowCount()!==g.getRowCount()?null:h}static getRowIndicatorColumn(s,u,h,g,y,x){let _=new If(u,g);for(let T=0;T<2;T++){let O=T===0?1:-1,j=Math.trunc(Math.trunc(h.getX()));for(let z=Math.trunc(Math.trunc(h.getY()));z<=u.getMaxY()&&z>=u.getMinY();z+=O){let H=mt.detectCodeword(s,0,s.getWidth(),g,j,z,y,x);H!=null&&(_.setCodeword(z,H),g?j=H.getStartX():j=H.getEndX())}}return _}static adjustCodewordCount(s,u){let h=u[0][1],g=h.getValue(),y=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-mt.getNumberOfECCodeWords(s.getBarcodeECLevel());if(g.length===0){if(y<1||y>ut.MAX_CODEWORDS_IN_BARCODE)throw te.getNotFoundInstance();h.setValue(y)}else g[0]!==y&&h.setValue(y)}static createDecoderResult(s){let u=mt.createBarcodeMatrix(s);mt.adjustCodewordCount(s,u);let h=new Array,g=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),y=[],x=new Array;for(let T=0;T<s.getBarcodeRowCount();T++)for(let O=0;O<s.getBarcodeColumnCount();O++){let j=u[T][O+1].getValue(),z=T*s.getBarcodeColumnCount()+O;j.length===0?h.push(z):j.length===1?g[z]=j[0]:(x.push(z),y.push(j))}let _=new Array(y.length);for(let T=0;T<_.length;T++)_[T]=y[T];return mt.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),g,ut.toIntArray(h),ut.toIntArray(x),_)}static createDecoderResultFromAmbiguousValues(s,u,h,g,y){let x=new Int32Array(g.length),_=100;for(;_-- >0;){for(let T=0;T<x.length;T++)u[g[T]]=y[T][x[T]];try{return mt.decodeCodewords(u,s,h)}catch(T){if(!(T instanceof C))throw T}if(x.length===0)throw C.getChecksumInstance();for(let T=0;T<x.length;T++)if(x[T]<y[T].length-1){x[T]++;break}else if(x[T]=0,T===x.length-1)throw C.getChecksumInstance()}throw C.getChecksumInstance()}static createBarcodeMatrix(s){let u=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let g=0;g<u.length;g++)for(let y=0;y<u[g].length;y++)u[g][y]=new Do;let h=0;for(let g of s.getDetectionResultColumns()){if(g!=null){for(let y of g.getCodewords())if(y!=null){let x=y.getRowNumber();if(x>=0){if(x>=u.length)continue;u[x][h].setValue(y.getValue())}}}h++}return u}static isValidBarcodeColumn(s,u){return u>=0&&u<=s.getBarcodeColumnCount()+1}static getStartColumn(s,u,h,g){let y=g?1:-1,x=null;if(mt.isValidBarcodeColumn(s,u-y)&&(x=s.getDetectionResultColumn(u-y).getCodeword(h)),x!=null)return g?x.getEndX():x.getStartX();if(x=s.getDetectionResultColumn(u).getCodewordNearby(h),x!=null)return g?x.getStartX():x.getEndX();if(mt.isValidBarcodeColumn(s,u-y)&&(x=s.getDetectionResultColumn(u-y).getCodewordNearby(h)),x!=null)return g?x.getEndX():x.getStartX();let _=0;for(;mt.isValidBarcodeColumn(s,u-y);){u-=y;for(let T of s.getDetectionResultColumn(u).getCodewords())if(T!=null)return(g?T.getEndX():T.getStartX())+y*_*(T.getEndX()-T.getStartX());_++}return g?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,u,h,g,y,x,_,T){y=mt.adjustCodewordStartColumn(s,u,h,g,y,x);let O=mt.getModuleBitCount(s,u,h,g,y,x);if(O==null)return null;let j,z=_t.sum(O);if(g)j=y+z;else{for(let Q=0;Q<O.length/2;Q++){let re=O[Q];O[Q]=O[O.length-1-Q],O[O.length-1-Q]=re}j=y,y=j-z}if(!mt.checkCodewordSkew(z,_,T))return null;let H=Qn.getDecodedValue(O),Y=ut.getCodeword(H);return Y===-1?null:new Zo(y,j,mt.getCodewordBucketNumber(H),Y)}static getModuleBitCount(s,u,h,g,y,x){let _=y,T=new Int32Array(8),O=0,j=g?1:-1,z=g;for(;(g?_<h:_>=u)&&O<T.length;)s.get(_,x)===z?(T[O]++,_+=j):(O++,z=!z);return O===T.length||_===(g?h:u)&&O===T.length-1?T:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,u,h,g,y,x){let _=y,T=g?-1:1;for(let O=0;O<2;O++){for(;(g?_>=u:_<h)&&g===s.get(_,x);){if(Math.abs(y-_)>mt.CODEWORD_SKEW_SIZE)return y;_+=T}T=-T,g=!g}return _}static checkCodewordSkew(s,u,h){return u-mt.CODEWORD_SKEW_SIZE<=s&&s<=h+mt.CODEWORD_SKEW_SIZE}static decodeCodewords(s,u,h){if(s.length===0)throw W.getFormatInstance();let g=1<<u+1,y=mt.correctErrors(s,h,g);mt.verifyCodewordCount(s,g);let x=ye.decode(s,""+u);return x.setErrorsCorrected(y),x.setErasures(h.length),x}static correctErrors(s,u,h){if(u!=null&&u.length>h/2+mt.MAX_ERRORS||h<0||h>mt.MAX_EC_CODEWORDS)throw C.getChecksumInstance();return mt.errorCorrection.decode(s,h,u)}static verifyCodewordCount(s,u){if(s.length<4)throw W.getFormatInstance();let h=s[0];if(h>s.length)throw W.getFormatInstance();if(h===0)if(u<s.length)s[0]=s.length-u;else throw W.getFormatInstance()}static getBitCountForCodeword(s){let u=new Int32Array(8),h=0,g=u.length-1;for(;!((s&1)!==h&&(h=s&1,g--,g<0));)u[g]++,s>>=1;return u}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return mt.getCodewordBucketNumber(mt.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let u=new uo;for(let h=0;h<s.length;h++){u.format("Row %2d: ",h);for(let g=0;g<s[h].length;g++){let y=s[h][g];y.getValue().length===0?u.format("        ",null):u.format("%4d(%2d)",y.getValue()[0],y.getConfidence(y.getValue()[0]))}u.format("%n")}return u.toString()}}mt.CODEWORD_SKEW_SIZE=2,mt.MAX_ERRORS=3,mt.MAX_EC_CODEWORDS=512,mt.errorCorrection=new Cc;class er{decode(s,u=null){let h=er.decode(s,u,!1);if(h==null||h.length===0||h[0]==null)throw te.getNotFoundInstance();return h[0]}decodeMultiple(s,u=null){try{return er.decode(s,u,!0)}catch(h){throw h instanceof W||h instanceof C?te.getNotFoundInstance():h}}static decode(s,u,h){const g=new Array,y=ht.detectMultiple(s,u,h);for(const x of y.getPoints()){const _=mt.decode(y.getBits(),x[4],x[5],x[6],x[7],er.getMinCodewordWidth(x),er.getMaxCodewordWidth(x)),T=new Fe(_.getText(),_.getRawBytes(),void 0,x,Pe.PDF_417);T.putMetadata(it.ERROR_CORRECTION_LEVEL,_.getECLevel());const O=_.getOther();O!=null&&T.putMetadata(it.PDF417_EXTRA_METADATA,O),g.push(T)}return g.map(x=>x)}static getMaxWidth(s,u){return s==null||u==null?0:Math.trunc(Math.abs(s.getX()-u.getX()))}static getMinWidth(s,u){return s==null||u==null?L.MAX_VALUE:Math.trunc(Math.abs(s.getX()-u.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(er.getMaxWidth(s[0],s[4]),er.getMaxWidth(s[6],s[2])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN),Math.max(er.getMaxWidth(s[1],s[5]),er.getMaxWidth(s[7],s[3])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(er.getMinWidth(s[0],s[4]),er.getMinWidth(s[6],s[2])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN),Math.min(er.getMinWidth(s[1],s[5]),er.getMinWidth(s[7],s[3])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ws extends d{}Ws.kind="ReaderException";class Hl{constructor(s,u){this.verbose=s===!0,u&&this.setHints(u)}decode(s,u){return u&&this.setHints(u),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const u=!r(s)&&s.get(q.TRY_HARDER)===!0,h=r(s)?null:s.get(q.POSSIBLE_FORMATS),g=new Array;if(!r(h)){const y=h.some(x=>x===Pe.UPC_A||x===Pe.UPC_E||x===Pe.EAN_13||x===Pe.EAN_8||x===Pe.CODABAR||x===Pe.CODE_39||x===Pe.CODE_93||x===Pe.CODE_128||x===Pe.ITF||x===Pe.RSS_14||x===Pe.RSS_EXPANDED);y&&!u&&g.push(new zs(s,this.verbose)),h.includes(Pe.QR_CODE)&&g.push(new br),h.includes(Pe.DATA_MATRIX)&&g.push(new xi),h.includes(Pe.AZTEC)&&g.push(new Oo),h.includes(Pe.PDF_417)&&g.push(new er),y&&u&&g.push(new zs(s,this.verbose))}g.length===0&&(u||g.push(new zs(s,this.verbose)),g.push(new br),g.push(new xi),g.push(new Oo),g.push(new er),u&&g.push(new zs(s,this.verbose))),this.readers=g}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new Ws("No readers where selected, nothing can be read.");for(const u of this.readers)try{return u.decode(s,this.hints)}catch(h){if(h instanceof Ws)continue}throw new te("No MultiFormat Readers were able to detect the code.")}}class Ba extends Be{constructor(s=null,u=500){const h=new Hl;h.setHints(s),super(h,u)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class ql extends Be{constructor(s=500){super(new er,s)}}class Nf extends Be{constructor(s=500){super(new br,s)}}var Ic;(function(V){V[V.ERROR_CORRECTION=0]="ERROR_CORRECTION",V[V.CHARACTER_SET=1]="CHARACTER_SET",V[V.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",V[V.MIN_SIZE=3]="MIN_SIZE",V[V.MAX_SIZE=4]="MAX_SIZE",V[V.MARGIN=5]="MARGIN",V[V.PDF417_COMPACT=6]="PDF417_COMPACT",V[V.PDF417_COMPACTION=7]="PDF417_COMPACTION",V[V.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",V[V.AZTEC_LAYERS=9]="AZTEC_LAYERS",V[V.QR_VERSION=10]="QR_VERSION"})(Ic||(Ic={}));var Ln=Ic;class Pc{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Me(s,Int32Array.from([1])))}buildGenerator(s){const u=this.cachedGenerators;if(s>=u.length){let h=u[u.length-1];const g=this.field;for(let y=u.length;y<=s;y++){const x=h.multiply(new Me(g,Int32Array.from([1,g.exp(y-1+g.getGeneratorBase())])));u.push(x),h=x}}return u[s]}encode(s,u){if(u===0)throw new v("No error correction bytes");const h=s.length-u;if(h<=0)throw new v("No data bytes provided");const g=this.buildGenerator(u),y=new Int32Array(h);N.arraycopy(s,0,y,0,h);let x=new Me(this.field,y);x=x.multiplyByMonomial(u,1);const T=x.divide(g)[1].getCoefficients(),O=u-T.length;for(let j=0;j<O;j++)s[h+j]=0;N.arraycopy(T,0,s,h+O,T.length)}}class nn{constructor(){}static applyMaskPenaltyRule1(s){return nn.applyMaskPenaltyRule1Internal(s,!0)+nn.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let u=0;const h=s.getArray(),g=s.getWidth(),y=s.getHeight();for(let x=0;x<y-1;x++){const _=h[x];for(let T=0;T<g-1;T++){const O=_[T];O===_[T+1]&&O===h[x+1][T]&&O===h[x+1][T+1]&&u++}}return nn.N2*u}static applyMaskPenaltyRule3(s){let u=0;const h=s.getArray(),g=s.getWidth(),y=s.getHeight();for(let x=0;x<y;x++)for(let _=0;_<g;_++){const T=h[x];_+6<g&&T[_]===1&&T[_+1]===0&&T[_+2]===1&&T[_+3]===1&&T[_+4]===1&&T[_+5]===0&&T[_+6]===1&&(nn.isWhiteHorizontal(T,_-4,_)||nn.isWhiteHorizontal(T,_+7,_+11))&&u++,x+6<y&&h[x][_]===1&&h[x+1][_]===0&&h[x+2][_]===1&&h[x+3][_]===1&&h[x+4][_]===1&&h[x+5][_]===0&&h[x+6][_]===1&&(nn.isWhiteVertical(h,_,x-4,x)||nn.isWhiteVertical(h,_,x+7,x+11))&&u++}return u*nn.N3}static isWhiteHorizontal(s,u,h){u=Math.max(u,0),h=Math.min(h,s.length);for(let g=u;g<h;g++)if(s[g]===1)return!1;return!0}static isWhiteVertical(s,u,h,g){h=Math.max(h,0),g=Math.min(g,s.length);for(let y=h;y<g;y++)if(s[y][u]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let u=0;const h=s.getArray(),g=s.getWidth(),y=s.getHeight();for(let T=0;T<y;T++){const O=h[T];for(let j=0;j<g;j++)O[j]===1&&u++}const x=s.getHeight()*s.getWidth();return Math.floor(Math.abs(u*2-x)*10/x)*nn.N4}static getDataMaskBit(s,u,h){let g,y;switch(s){case 0:g=h+u&1;break;case 1:g=h&1;break;case 2:g=u%3;break;case 3:g=(h+u)%3;break;case 4:g=Math.floor(h/2)+Math.floor(u/3)&1;break;case 5:y=h*u,g=(y&1)+y%3;break;case 6:y=h*u,g=(y&1)+y%3&1;break;case 7:y=h*u,g=y%3+(h+u&1)&1;break;default:throw new v("Invalid mask pattern: "+s)}return g===0}static applyMaskPenaltyRule1Internal(s,u){let h=0;const g=u?s.getHeight():s.getWidth(),y=u?s.getWidth():s.getHeight(),x=s.getArray();for(let _=0;_<g;_++){let T=0,O=-1;for(let j=0;j<y;j++){const z=u?x[_][j]:x[j][_];z===O?T++:(T>=5&&(h+=nn.N1+(T-5)),T=1,O=z)}T>=5&&(h+=nn.N1+(T-5))}return h}}nn.N1=3,nn.N2=3,nn.N3=40,nn.N4=10;class Wl{constructor(s,u){this.width=s,this.height=u;const h=new Array(u);for(let g=0;g!==u;g++)h[g]=new Uint8Array(s);this.bytes=h}getHeight(){return this.height}getWidth(){return this.width}get(s,u){return this.bytes[u][s]}getArray(){return this.bytes}setNumber(s,u,h){this.bytes[u][s]=h}setBoolean(s,u,h){this.bytes[u][s]=h?1:0}clear(s){for(const u of this.bytes)F.fill(u,s)}equals(s){if(!(s instanceof Wl))return!1;const u=s;if(this.width!==u.width||this.height!==u.height)return!1;for(let h=0,g=this.height;h<g;++h){const y=this.bytes[h],x=u.bytes[h];for(let _=0,T=this.width;_<T;++_)if(y[_]!==x[_])return!1}return!0}toString(){const s=new be;for(let u=0,h=this.height;u<h;++u){const g=this.bytes[u];for(let y=0,x=this.width;y<x;++y)switch(g[y]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class Qo{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new be;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<Qo.NUM_MASK_PATTERNS}}Qo.NUM_MASK_PATTERNS=8;class $t extends d{}$t.kind="WriterException";class ot{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,u,h,g,y){ot.clearMatrix(y),ot.embedBasicPatterns(h,y),ot.embedTypeInfo(u,g,y),ot.maybeEmbedVersionInfo(h,y),ot.embedDataBits(s,g,y)}static embedBasicPatterns(s,u){ot.embedPositionDetectionPatternsAndSeparators(u),ot.embedDarkDotAtLeftBottomCorner(u),ot.maybeEmbedPositionAdjustmentPatterns(s,u),ot.embedTimingPatterns(u)}static embedTypeInfo(s,u,h){const g=new U;ot.makeTypeInfoBits(s,u,g);for(let y=0,x=g.getSize();y<x;++y){const _=g.get(g.getSize()-1-y),T=ot.TYPE_INFO_COORDINATES[y],O=T[0],j=T[1];if(h.setBoolean(O,j,_),y<8){const z=h.getWidth()-y-1;h.setBoolean(z,8,_)}else{const H=h.getHeight()-7+(y-8);h.setBoolean(8,H,_)}}}static maybeEmbedVersionInfo(s,u){if(s.getVersionNumber()<7)return;const h=new U;ot.makeVersionInfoBits(s,h);let g=17;for(let y=0;y<6;++y)for(let x=0;x<3;++x){const _=h.get(g);g--,u.setBoolean(y,u.getHeight()-11+x,_),u.setBoolean(u.getHeight()-11+x,y,_)}}static embedDataBits(s,u,h){let g=0,y=-1,x=h.getWidth()-1,_=h.getHeight()-1;for(;x>0;){for(x===6&&(x-=1);_>=0&&_<h.getHeight();){for(let T=0;T<2;++T){const O=x-T;if(!ot.isEmpty(h.get(O,_)))continue;let j;g<s.getSize()?(j=s.get(g),++g):j=!1,u!==255&&nn.getDataMaskBit(u,O,_)&&(j=!j),h.setBoolean(O,_,j)}_+=y}y=-y,_+=y,x-=2}if(g!==s.getSize())throw new $t("Not all bits consumed: "+g+"/"+s.getSize())}static findMSBSet(s){return 32-L.numberOfLeadingZeros(s)}static calculateBCHCode(s,u){if(u===0)throw new v("0 polynomial");const h=ot.findMSBSet(u);for(s<<=h-1;ot.findMSBSet(s)>=h;)s^=u<<ot.findMSBSet(s)-h;return s}static makeTypeInfoBits(s,u,h){if(!Qo.isValidMaskPattern(u))throw new $t("Invalid mask pattern");const g=s.getBits()<<3|u;h.appendBits(g,5);const y=ot.calculateBCHCode(g,ot.TYPE_INFO_POLY);h.appendBits(y,10);const x=new U;if(x.appendBits(ot.TYPE_INFO_MASK_PATTERN,15),h.xor(x),h.getSize()!==15)throw new $t("should not happen but we got: "+h.getSize())}static makeVersionInfoBits(s,u){u.appendBits(s.getVersionNumber(),6);const h=ot.calculateBCHCode(s.getVersionNumber(),ot.VERSION_INFO_POLY);if(u.appendBits(h,12),u.getSize()!==18)throw new $t("should not happen but we got: "+u.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let u=8;u<s.getWidth()-8;++u){const h=(u+1)%2;ot.isEmpty(s.get(u,6))&&s.setNumber(u,6,h),ot.isEmpty(s.get(6,u))&&s.setNumber(6,u,h)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new $t;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,u,h){for(let g=0;g<8;++g){if(!ot.isEmpty(h.get(s+g,u)))throw new $t;h.setNumber(s+g,u,0)}}static embedVerticalSeparationPattern(s,u,h){for(let g=0;g<7;++g){if(!ot.isEmpty(h.get(s,u+g)))throw new $t;h.setNumber(s,u+g,0)}}static embedPositionAdjustmentPattern(s,u,h){for(let g=0;g<5;++g){const y=ot.POSITION_ADJUSTMENT_PATTERN[g];for(let x=0;x<5;++x)h.setNumber(s+x,u+g,y[x])}}static embedPositionDetectionPattern(s,u,h){for(let g=0;g<7;++g){const y=ot.POSITION_DETECTION_PATTERN[g];for(let x=0;x<7;++x)h.setNumber(s+x,u+g,y[x])}}static embedPositionDetectionPatternsAndSeparators(s){const u=ot.POSITION_DETECTION_PATTERN[0].length;ot.embedPositionDetectionPattern(0,0,s),ot.embedPositionDetectionPattern(s.getWidth()-u,0,s),ot.embedPositionDetectionPattern(0,s.getWidth()-u,s);const h=8;ot.embedHorizontalSeparationPattern(0,h-1,s),ot.embedHorizontalSeparationPattern(s.getWidth()-h,h-1,s),ot.embedHorizontalSeparationPattern(0,s.getWidth()-h,s);const g=7;ot.embedVerticalSeparationPattern(g,0,s),ot.embedVerticalSeparationPattern(s.getHeight()-g-1,0,s),ot.embedVerticalSeparationPattern(g,s.getHeight()-g,s)}static maybeEmbedPositionAdjustmentPatterns(s,u){if(s.getVersionNumber()<2)return;const h=s.getVersionNumber()-1,g=ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[h];for(let y=0,x=g.length;y!==x;y++){const _=g[y];if(_>=0)for(let T=0;T!==x;T++){const O=g[T];O>=0&&ot.isEmpty(u.get(O,_))&&ot.embedPositionAdjustmentPattern(O-2,_-2,u)}}}}ot.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ot.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ot.VERSION_INFO_POLY=7973,ot.TYPE_INFO_POLY=1335,ot.TYPE_INFO_MASK_PATTERN=21522;class Ym{constructor(s,u){this.dataBytes=s,this.errorCorrectionBytes=u}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class qt{constructor(){}static calculateMaskPenalty(s){return nn.applyMaskPenaltyRule1(s)+nn.applyMaskPenaltyRule2(s)+nn.applyMaskPenaltyRule3(s)+nn.applyMaskPenaltyRule4(s)}static encode(s,u,h=null){let g=qt.DEFAULT_BYTE_MODE_ENCODING;const y=h!==null&&h.get(Ln.CHARACTER_SET)!==void 0;y&&(g=h.get(Ln.CHARACTER_SET).toString());const x=this.chooseMode(s,g),_=new U;if(x===rt.BYTE&&(y||qt.DEFAULT_BYTE_MODE_ENCODING!==g)){const ke=X.getCharacterSetECIByName(g);ke!==void 0&&this.appendECI(ke,_)}this.appendModeInfo(x,_);const T=new U;this.appendBytes(s,x,T,g);let O;if(h!==null&&h.get(Ln.QR_VERSION)!==void 0){const ke=Number.parseInt(h.get(Ln.QR_VERSION).toString(),10);O=nt.getVersionForNumber(ke);const Te=this.calculateBitsNeeded(x,_,T,O);if(!this.willFit(Te,O,u))throw new $t("Data too big for requested version")}else O=this.recommendVersion(u,x,_,T);const j=new U;j.appendBitArray(_);const z=x===rt.BYTE?T.getSizeInBytes():s.length;this.appendLengthInfo(z,O,x,j),j.appendBitArray(T);const H=O.getECBlocksForLevel(u),Y=O.getTotalCodewords()-H.getTotalECCodewords();this.terminateBits(Y,j);const Q=this.interleaveWithECBytes(j,O.getTotalCodewords(),Y,H.getNumBlocks()),re=new Qo;re.setECLevel(u),re.setMode(x),re.setVersion(O);const oe=O.getDimensionForVersion(),ge=new Wl(oe,oe),Re=this.chooseMaskPattern(Q,u,O,ge);return re.setMaskPattern(Re),ot.buildMatrix(Q,u,O,Re,ge),re.setMatrix(ge),re}static recommendVersion(s,u,h,g){const y=this.calculateBitsNeeded(u,h,g,nt.getVersionForNumber(1)),x=this.chooseVersion(y,s),_=this.calculateBitsNeeded(u,h,g,x);return this.chooseVersion(_,s)}static calculateBitsNeeded(s,u,h,g){return u.getSize()+s.getCharacterCountBits(g)+h.getSize()}static getAlphanumericCode(s){return s<qt.ALPHANUMERIC_TABLE.length?qt.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,u=null){if(X.SJIS.getName()===u&&this.isOnlyDoubleByteKanji(s))return rt.KANJI;let h=!1,g=!1;for(let y=0,x=s.length;y<x;++y){const _=s.charAt(y);if(qt.isDigit(_))h=!0;else if(this.getAlphanumericCode(_.charCodeAt(0))!==-1)g=!0;else return rt.BYTE}return g?rt.ALPHANUMERIC:h?rt.NUMERIC:rt.BYTE}static isOnlyDoubleByteKanji(s){let u;try{u=ae.encode(s,X.SJIS)}catch{return!1}const h=u.length;if(h%2!==0)return!1;for(let g=0;g<h;g+=2){const y=u[g]&255;if((y<129||y>159)&&(y<224||y>235))return!1}return!0}static chooseMaskPattern(s,u,h,g){let y=Number.MAX_SAFE_INTEGER,x=-1;for(let _=0;_<Qo.NUM_MASK_PATTERNS;_++){ot.buildMatrix(s,u,h,_,g);let T=this.calculateMaskPenalty(g);T<y&&(y=T,x=_)}return x}static chooseVersion(s,u){for(let h=1;h<=40;h++){const g=nt.getVersionForNumber(h);if(qt.willFit(s,g,u))return g}throw new $t("Data too big")}static willFit(s,u,h){const g=u.getTotalCodewords(),x=u.getECBlocksForLevel(h).getTotalECCodewords(),_=g-x,T=(s+7)/8;return _>=T}static terminateBits(s,u){const h=s*8;if(u.getSize()>h)throw new $t("data bits cannot fit in the QR Code"+u.getSize()+" > "+h);for(let x=0;x<4&&u.getSize()<h;++x)u.appendBit(!1);const g=u.getSize()&7;if(g>0)for(let x=g;x<8;x++)u.appendBit(!1);const y=s-u.getSizeInBytes();for(let x=0;x<y;++x)u.appendBits((x&1)===0?236:17,8);if(u.getSize()!==h)throw new $t("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,u,h,g,y,x){if(g>=h)throw new $t("Block ID too large");const _=s%h,T=h-_,O=Math.floor(s/h),j=O+1,z=Math.floor(u/h),H=z+1,Y=O-z,Q=j-H;if(Y!==Q)throw new $t("EC bytes mismatch");if(h!==T+_)throw new $t("RS blocks mismatch");if(s!==(z+Y)*T+(H+Q)*_)throw new $t("Total bytes mismatch");g<T?(y[0]=z,x[0]=Y):(y[0]=H,x[0]=Q)}static interleaveWithECBytes(s,u,h,g){if(s.getSizeInBytes()!==h)throw new $t("Number of bits and data bytes does not match");let y=0,x=0,_=0;const T=new Array;for(let j=0;j<g;++j){const z=new Int32Array(1),H=new Int32Array(1);qt.getNumDataBytesAndNumECBytesForBlockID(u,h,g,j,z,H);const Y=z[0],Q=new Uint8Array(Y);s.toBytes(8*y,Q,0,Y);const re=qt.generateECBytes(Q,H[0]);T.push(new Ym(Q,re)),x=Math.max(x,Y),_=Math.max(_,re.length),y+=z[0]}if(h!==y)throw new $t("Data bytes does not match offset");const O=new U;for(let j=0;j<x;++j)for(const z of T){const H=z.getDataBytes();j<H.length&&O.appendBits(H[j],8)}for(let j=0;j<_;++j)for(const z of T){const H=z.getErrorCorrectionBytes();j<H.length&&O.appendBits(H[j],8)}if(u!==O.getSizeInBytes())throw new $t("Interleaving error: "+u+" and "+O.getSizeInBytes()+" differ.");return O}static generateECBytes(s,u){const h=s.length,g=new Int32Array(h+u);for(let x=0;x<h;x++)g[x]=s[x]&255;new Pc(Ke.QR_CODE_FIELD_256).encode(g,u);const y=new Uint8Array(u);for(let x=0;x<u;x++)y[x]=g[h+x];return y}static appendModeInfo(s,u){u.appendBits(s.getBits(),4)}static appendLengthInfo(s,u,h,g){const y=h.getCharacterCountBits(u);if(s>=1<<y)throw new $t(s+" is bigger than "+((1<<y)-1));g.appendBits(s,y)}static appendBytes(s,u,h,g){switch(u){case rt.NUMERIC:qt.appendNumericBytes(s,h);break;case rt.ALPHANUMERIC:qt.appendAlphanumericBytes(s,h);break;case rt.BYTE:qt.append8BitBytes(s,h,g);break;case rt.KANJI:qt.appendKanjiBytes(s,h);break;default:throw new $t("Invalid mode: "+u)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const u=qt.getDigit(s);return u>=0&&u<=9}static appendNumericBytes(s,u){const h=s.length;let g=0;for(;g<h;){const y=qt.getDigit(s.charAt(g));if(g+2<h){const x=qt.getDigit(s.charAt(g+1)),_=qt.getDigit(s.charAt(g+2));u.appendBits(y*100+x*10+_,10),g+=3}else if(g+1<h){const x=qt.getDigit(s.charAt(g+1));u.appendBits(y*10+x,7),g+=2}else u.appendBits(y,4),g++}}static appendAlphanumericBytes(s,u){const h=s.length;let g=0;for(;g<h;){const y=qt.getAlphanumericCode(s.charCodeAt(g));if(y===-1)throw new $t;if(g+1<h){const x=qt.getAlphanumericCode(s.charCodeAt(g+1));if(x===-1)throw new $t;u.appendBits(y*45+x,11),g+=2}else u.appendBits(y,6),g++}}static append8BitBytes(s,u,h){let g;try{g=ae.encode(s,h)}catch(y){throw new $t(y)}for(let y=0,x=g.length;y!==x;y++){const _=g[y];u.appendBits(_,8)}}static appendKanjiBytes(s,u){let h;try{h=ae.encode(s,X.SJIS)}catch(y){throw new $t(y)}const g=h.length;for(let y=0;y<g;y+=2){const x=h[y]&255,_=h[y+1]&255,T=x<<8&4294967295|_;let O=-1;if(T>=33088&&T<=40956?O=T-33088:T>=57408&&T<=60351&&(O=T-49472),O===-1)throw new $t("Invalid byte sequence");const j=(O>>8)*192+(O&255);u.appendBits(j,13)}}static appendECI(s,u){u.appendBits(rt.ECI.getBits(),4),u.appendBits(s.getValue(),8)}}qt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),qt.DEFAULT_BYTE_MODE_ENCODING=X.UTF8.getName();class es{write(s,u,h,g=null){if(s.length===0)throw new v("Found empty contents");if(u<0||h<0)throw new v("Requested dimensions are too small: "+u+"x"+h);let y=Ut.L,x=es.QUIET_ZONE_SIZE;g!==null&&(g.get(Ln.ERROR_CORRECTION)!==void 0&&(y=Ut.fromString(g.get(Ln.ERROR_CORRECTION).toString())),g.get(Ln.MARGIN)!==void 0&&(x=Number.parseInt(g.get(Ln.MARGIN).toString(),10)));const _=qt.encode(s,y,g);return this.renderResult(_,u,h,x)}writeToDom(s,u,h,g,y=null){typeof s=="string"&&(s=document.querySelector(s));const x=this.write(u,h,g,y);s&&s.appendChild(x)}renderResult(s,u,h,g){const y=s.getMatrix();if(y===null)throw new It;const x=y.getWidth(),_=y.getHeight(),T=x+g*2,O=_+g*2,j=Math.max(u,T),z=Math.max(h,O),H=Math.min(Math.floor(j/T),Math.floor(z/O)),Y=Math.floor((j-x*H)/2),Q=Math.floor((z-_*H)/2),re=this.createSVGElement(j,z);for(let oe=0,ge=Q;oe<_;oe++,ge+=H)for(let Re=0,ke=Y;Re<x;Re++,ke+=H)if(y.get(Re,oe)===1){const Te=this.createSvgRectElement(ke,ge,H,H);re.appendChild(Te)}return re}createSVGElement(s,u){const h=document.createElementNS(es.SVG_NS,"svg");return h.setAttributeNS(null,"height",s.toString()),h.setAttributeNS(null,"width",u.toString()),h}createSvgRectElement(s,u,h,g){const y=document.createElementNS(es.SVG_NS,"rect");return y.setAttributeNS(null,"x",s.toString()),y.setAttributeNS(null,"y",u.toString()),y.setAttributeNS(null,"height",h.toString()),y.setAttributeNS(null,"width",g.toString()),y.setAttributeNS(null,"fill","#000000"),y}}es.QUIET_ZONE_SIZE=4,es.SVG_NS="http://www.w3.org/2000/svg";class Ks{encode(s,u,h,g,y){if(s.length===0)throw new v("Found empty contents");if(u!==Pe.QR_CODE)throw new v("Can only encode QR_CODE, but got "+u);if(h<0||g<0)throw new v(`Requested dimensions are too small: ${h}x${g}`);let x=Ut.L,_=Ks.QUIET_ZONE_SIZE;y!==null&&(y.get(Ln.ERROR_CORRECTION)!==void 0&&(x=Ut.fromString(y.get(Ln.ERROR_CORRECTION).toString())),y.get(Ln.MARGIN)!==void 0&&(_=Number.parseInt(y.get(Ln.MARGIN).toString(),10)));const T=qt.encode(s,x,y);return Ks.renderResult(T,h,g,_)}static renderResult(s,u,h,g){const y=s.getMatrix();if(y===null)throw new It;const x=y.getWidth(),_=y.getHeight(),T=x+g*2,O=_+g*2,j=Math.max(u,T),z=Math.max(h,O),H=Math.min(Math.floor(j/T),Math.floor(z/O)),Y=Math.floor((j-x*H)/2),Q=Math.floor((z-_*H)/2),re=new me(j,z);for(let oe=0,ge=Q;oe<_;oe++,ge+=H)for(let Re=0,ke=Y;Re<x;Re++,ke+=H)y.get(Re,oe)===1&&re.setRegion(ke,ge,H,H);return re}}Ks.QUIET_ZONE_SIZE=4;class Xm{encode(s,u,h,g,y){let x;switch(u){case Pe.QR_CODE:x=new Ks;break;default:throw new v("No encoder available for format "+u)}return x.encode(s,u,h,g,y)}}class zi extends ve{constructor(s,u,h,g,y,x,_,T){if(super(x,_),this.yuvData=s,this.dataWidth=u,this.dataHeight=h,this.left=g,this.top=y,g+x>u||y+_>h)throw new v("Crop rectangle does not fit within image data.");T&&this.reverseHorizontal(x,_)}getRow(s,u){if(s<0||s>=this.getHeight())throw new v("Requested row is outside the image: "+s);const h=this.getWidth();(u==null||u.length<h)&&(u=new Uint8ClampedArray(h));const g=(s+this.top)*this.dataWidth+this.left;return N.arraycopy(this.yuvData,g,u,0,h),u}getMatrix(){const s=this.getWidth(),u=this.getHeight();if(s===this.dataWidth&&u===this.dataHeight)return this.yuvData;const h=s*u,g=new Uint8ClampedArray(h);let y=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return N.arraycopy(this.yuvData,y,g,0,h),g;for(let x=0;x<u;x++){const _=x*s;N.arraycopy(this.yuvData,y,g,_,s),y+=this.dataWidth}return g}isCropSupported(){return!0}crop(s,u,h,g){return new zi(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+u,h,g,!1)}renderThumbnail(){const s=this.getWidth()/zi.THUMBNAIL_SCALE_FACTOR,u=this.getHeight()/zi.THUMBNAIL_SCALE_FACTOR,h=new Int32Array(s*u),g=this.yuvData;let y=this.top*this.dataWidth+this.left;for(let x=0;x<u;x++){const _=x*s;for(let T=0;T<s;T++){const O=g[y+T*zi.THUMBNAIL_SCALE_FACTOR]&255;h[_+T]=4278190080|O*65793}y+=this.dataWidth*zi.THUMBNAIL_SCALE_FACTOR}return h}getThumbnailWidth(){return this.getWidth()/zi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/zi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,u){const h=this.yuvData;for(let g=0,y=this.top*this.dataWidth+this.left;g<u;g++,y+=this.dataWidth){const x=y+s/2;for(let _=y,T=y+s-1;_<x;_++,T--){const O=h[_];h[_]=h[T],h[T]=O}}}invert(){return new Ee(this)}}zi.THUMBNAIL_SCALE_FACTOR=2;class Fa extends ve{constructor(s,u,h,g,y,x,_){if(super(u,h),this.dataWidth=g,this.dataHeight=y,this.left=x,this.top=_,s.BYTES_PER_ELEMENT===4){const T=u*h,O=new Uint8ClampedArray(T);for(let j=0;j<T;j++){const z=s[j],H=z>>16&255,Y=z>>7&510,Q=z&255;O[j]=(H+Y+Q)/4&255}this.luminances=O}else this.luminances=s;if(g===void 0&&(this.dataWidth=u),y===void 0&&(this.dataHeight=h),x===void 0&&(this.left=0),_===void 0&&(this.top=0),this.left+u>this.dataWidth||this.top+h>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(s,u){if(s<0||s>=this.getHeight())throw new v("Requested row is outside the image: "+s);const h=this.getWidth();(u==null||u.length<h)&&(u=new Uint8ClampedArray(h));const g=(s+this.top)*this.dataWidth+this.left;return N.arraycopy(this.luminances,g,u,0,h),u}getMatrix(){const s=this.getWidth(),u=this.getHeight();if(s===this.dataWidth&&u===this.dataHeight)return this.luminances;const h=s*u,g=new Uint8ClampedArray(h);let y=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return N.arraycopy(this.luminances,y,g,0,h),g;for(let x=0;x<u;x++){const _=x*s;N.arraycopy(this.luminances,y,g,_,s),y+=this.dataWidth}return g}isCropSupported(){return!0}crop(s,u,h,g){return new Fa(this.luminances,h,g,this.dataWidth,this.dataHeight,this.left+s,this.top+u)}invert(){return new Ee(this)}}class Rf extends X{static forName(s){return this.getCharacterSetECIByName(s)}}class Nc{}Nc.ISO_8859_1=X.ISO8859_1;class Of{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class Rc{static singletonList(s){return[s]}static min(s,u){return s.sort(u)[0]}}class Jm{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Ys extends Jm{constructor(s,u,h){super(s),this.value=u,this.bitCount=h}appendTo(s,u){s.appendBits(this.value,this.bitCount)}add(s,u){return new Ys(this,s,u)}addBinaryShift(s,u){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ys(this,s,u)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+L.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class Oc extends Ys{constructor(s,u,h){super(s,0,0),this.binaryShiftStart=u,this.binaryShiftByteCount=h}appendTo(s,u){for(let h=0;h<this.binaryShiftByteCount;h++)(h===0||h===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):h===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(u[this.binaryShiftStart+h],8)}addBinaryShift(s,u){return new Oc(this,s,u)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Zm(V,s,u){return new Oc(V,s,u)}function ja(V,s,u){return new Ys(V,s,u)}const Qm=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Lo=0,Xs=1,cr=2,kf=3,bi=4,Mf=new Ys(null,0,0),Kl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Df(V){for(let s of V)F.fill(s,-1);return V[Lo][bi]=0,V[Xs][bi]=0,V[Xs][Lo]=28,V[kf][bi]=0,V[cr][bi]=0,V[cr][Lo]=15,V}const kc=Df(F.createInt32Array(6,6));class Er{constructor(s,u,h,g){this.token=s,this.mode=u,this.binaryShiftByteCount=h,this.bitCount=g}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,u){let h=this.bitCount,g=this.token;if(s!==this.mode){let x=Kl[this.mode][s];g=ja(g,x&65535,x>>16),h+=x>>16}let y=s===cr?4:5;return g=ja(g,u,y),new Er(g,s,0,h+y)}shiftAndAppend(s,u){let h=this.token,g=this.mode===cr?4:5;return h=ja(h,kc[this.mode][s],g),h=ja(h,u,5),new Er(h,this.mode,0,this.bitCount+g+5)}addBinaryShiftChar(s){let u=this.token,h=this.mode,g=this.bitCount;if(this.mode===bi||this.mode===cr){let _=Kl[h][Lo];u=ja(u,_&65535,_>>16),g+=_>>16,h=Lo}let y=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,x=new Er(u,h,this.binaryShiftByteCount+1,g+y);return x.binaryShiftByteCount===2078&&(x=x.endBinaryShift(s+1)),x}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let u=this.token;return u=Zm(u,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new Er(u,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let u=this.bitCount+(Kl[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?u+=Er.calculateBinaryShiftCost(s)-Er.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(u+=10),u<=s.bitCount}toBitArray(s){let u=[];for(let g=this.endBinaryShift(s.length).token;g!==null;g=g.getPrevious())u.unshift(g);let h=new U;for(const g of u)g.appendTo(h,s);return h}toString(){return le.format("%s bits=%d bytes=%d",Qm[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}Er.INITIAL_STATE=new Er(Mf,Lo,0,0);function eg(V){const s=le.getCharCode(" "),u=le.getCharCode("."),h=le.getCharCode(",");V[Lo][s]=1;const g=le.getCharCode("Z"),y=le.getCharCode("A");for(let H=y;H<=g;H++)V[Lo][H]=H-y+2;V[Xs][s]=1;const x=le.getCharCode("z"),_=le.getCharCode("a");for(let H=_;H<=x;H++)V[Xs][H]=H-_+2;V[cr][s]=1;const T=le.getCharCode("9"),O=le.getCharCode("0");for(let H=O;H<=T;H++)V[cr][H]=H-O+2;V[cr][h]=12,V[cr][u]=13;const j=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let H=0;H<j.length;H++)V[kf][le.getCharCode(j[H])]=H;const z=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let H=0;H<z.length;H++)le.getCharCode(z[H])>0&&(V[bi][le.getCharCode(z[H])]=H);return V}const Mc=eg(F.createInt32Array(5,256));class Ua{constructor(s){this.text=s}encode(){const s=le.getCharCode(" "),u=le.getCharCode(`
`);let h=Rc.singletonList(Er.INITIAL_STATE);for(let y=0;y<this.text.length;y++){let x,_=y+1<this.text.length?this.text[y+1]:0;switch(this.text[y]){case le.getCharCode("\r"):x=_===u?2:0;break;case le.getCharCode("."):x=_===s?3:0;break;case le.getCharCode(","):x=_===s?4:0;break;case le.getCharCode(":"):x=_===s?5:0;break;default:x=0}x>0?(h=Ua.updateStateListForPair(h,y,x),y++):h=this.updateStateListForChar(h,y)}return Rc.min(h,(y,x)=>y.getBitCount()-x.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,u){const h=[];for(let g of s)this.updateStateForChar(g,u,h);return Ua.simplifyStates(h)}updateStateForChar(s,u,h){let g=this.text[u]&255,y=Mc[s.getMode()][g]>0,x=null;for(let _=0;_<=bi;_++){let T=Mc[_][g];if(T>0){if(x==null&&(x=s.endBinaryShift(u)),!y||_===s.getMode()||_===cr){const O=x.latchAndAppend(_,T);h.push(O)}if(!y&&kc[s.getMode()][_]>=0){const O=x.shiftAndAppend(_,T);h.push(O)}}}if(s.getBinaryShiftByteCount()>0||Mc[s.getMode()][g]===0){let _=s.addBinaryShiftChar(u);h.push(_)}}static updateStateListForPair(s,u,h){const g=[];for(let y of s)this.updateStateForPair(y,u,h,g);return this.simplifyStates(g)}static updateStateForPair(s,u,h,g){let y=s.endBinaryShift(u);if(g.push(y.latchAndAppend(bi,h)),s.getMode()!==bi&&g.push(y.shiftAndAppend(bi,h)),h===3||h===4){let x=y.latchAndAppend(cr,16-h).latchAndAppend(cr,1);g.push(x)}if(s.getBinaryShiftByteCount()>0){let x=s.addBinaryShiftChar(u).addBinaryShiftChar(u+1);g.push(x)}}static simplifyStates(s){let u=[];for(const h of s){let g=!0;for(const y of u){if(y.isBetterThanOrEqualTo(h)){g=!1;break}h.isBetterThanOrEqualTo(y)&&(u=u.filter(x=>x!==y))}g&&u.push(h)}return u}}class At{constructor(){}static encodeBytes(s){return At.encode(s,At.DEFAULT_EC_PERCENT,At.DEFAULT_AZTEC_LAYERS)}static encode(s,u,h){let g=new Ua(s).encode(),y=L.truncDivision(g.getSize()*u,100)+11,x=g.getSize()+y,_,T,O,j,z;if(h!==At.DEFAULT_AZTEC_LAYERS){if(_=h<0,T=Math.abs(h),T>(_?At.MAX_NB_BITS_COMPACT:At.MAX_NB_BITS))throw new v(le.format("Illegal value %s for layers",h));O=At.totalBitsInLayer(T,_),j=At.WORD_SIZE[T];let Te=O-O%j;if(z=At.stuffBits(g,j),z.getSize()+y>Te)throw new v("Data to large for user specified layer");if(_&&z.getSize()>j*64)throw new v("Data to large for user specified layer")}else{j=0,z=null;for(let Te=0;;Te++){if(Te>At.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(_=Te<=3,T=_?Te+1:Te,O=At.totalBitsInLayer(T,_),x>O)continue;(z==null||j!==At.WORD_SIZE[T])&&(j=At.WORD_SIZE[T],z=At.stuffBits(g,j));let wt=O-O%j;if(!(_&&z.getSize()>j*64)&&z.getSize()+y<=wt)break}}let H=At.generateCheckWords(z,O,j),Y=z.getSize()/j,Q=At.generateModeMessage(_,T,Y),re=(_?11:14)+T*4,oe=new Int32Array(re),ge;if(_){ge=re;for(let Te=0;Te<oe.length;Te++)oe[Te]=Te}else{ge=re+1+2*L.truncDivision(L.truncDivision(re,2)-1,15);let Te=L.truncDivision(re,2),wt=L.truncDivision(ge,2);for(let pt=0;pt<Te;pt++){let Mr=pt+L.truncDivision(pt,15);oe[Te-pt-1]=wt-Mr-1,oe[Te+pt]=wt+Mr+1}}let Re=new me(ge);for(let Te=0,wt=0;Te<T;Te++){let pt=(T-Te)*4+(_?9:12);for(let Mr=0;Mr<pt;Mr++){let Ei=Mr*2;for(let Bn=0;Bn<2;Bn++)H.get(wt+Ei+Bn)&&Re.set(oe[Te*2+Bn],oe[Te*2+Mr]),H.get(wt+pt*2+Ei+Bn)&&Re.set(oe[Te*2+Mr],oe[re-1-Te*2-Bn]),H.get(wt+pt*4+Ei+Bn)&&Re.set(oe[re-1-Te*2-Bn],oe[re-1-Te*2-Mr]),H.get(wt+pt*6+Ei+Bn)&&Re.set(oe[re-1-Te*2-Mr],oe[Te*2+Bn])}wt+=pt*8}if(At.drawModeMessage(Re,_,ge,Q),_)At.drawBullsEye(Re,L.truncDivision(ge,2),5);else{At.drawBullsEye(Re,L.truncDivision(ge,2),7);for(let Te=0,wt=0;Te<L.truncDivision(re,2)-1;Te+=15,wt+=16)for(let pt=L.truncDivision(ge,2)&1;pt<ge;pt+=2)Re.set(L.truncDivision(ge,2)-wt,pt),Re.set(L.truncDivision(ge,2)+wt,pt),Re.set(pt,L.truncDivision(ge,2)-wt),Re.set(pt,L.truncDivision(ge,2)+wt)}let ke=new Of;return ke.setCompact(_),ke.setSize(ge),ke.setLayers(T),ke.setCodeWords(Y),ke.setMatrix(Re),ke}static drawBullsEye(s,u,h){for(let g=0;g<h;g+=2)for(let y=u-g;y<=u+g;y++)s.set(y,u-g),s.set(y,u+g),s.set(u-g,y),s.set(u+g,y);s.set(u-h,u-h),s.set(u-h+1,u-h),s.set(u-h,u-h+1),s.set(u+h,u-h),s.set(u+h,u-h+1),s.set(u+h,u+h-1)}static generateModeMessage(s,u,h){let g=new U;return s?(g.appendBits(u-1,2),g.appendBits(h-1,6),g=At.generateCheckWords(g,28,4)):(g.appendBits(u-1,5),g.appendBits(h-1,11),g=At.generateCheckWords(g,40,4)),g}static drawModeMessage(s,u,h,g){let y=L.truncDivision(h,2);if(u)for(let x=0;x<7;x++){let _=y-3+x;g.get(x)&&s.set(_,y-5),g.get(x+7)&&s.set(y+5,_),g.get(20-x)&&s.set(_,y+5),g.get(27-x)&&s.set(y-5,_)}else for(let x=0;x<10;x++){let _=y-5+x+L.truncDivision(x,5);g.get(x)&&s.set(_,y-7),g.get(x+10)&&s.set(y+7,_),g.get(29-x)&&s.set(_,y+7),g.get(39-x)&&s.set(y-7,_)}}static generateCheckWords(s,u,h){let g=s.getSize()/h,y=new Pc(At.getGF(h)),x=L.truncDivision(u,h),_=At.bitsToWords(s,h,x);y.encode(_,x-g);let T=u%h,O=new U;O.appendBits(0,T);for(const j of Array.from(_))O.appendBits(j,h);return O}static bitsToWords(s,u,h){let g=new Int32Array(h),y,x;for(y=0,x=s.getSize()/u;y<x;y++){let _=0;for(let T=0;T<u;T++)_|=s.get(y*u+T)?1<<u-T-1:0;g[y]=_}return g}static getGF(s){switch(s){case 4:return Ke.AZTEC_PARAM;case 6:return Ke.AZTEC_DATA_6;case 8:return Ke.AZTEC_DATA_8;case 10:return Ke.AZTEC_DATA_10;case 12:return Ke.AZTEC_DATA_12;default:throw new v("Unsupported word size "+s)}}static stuffBits(s,u){let h=new U,g=s.getSize(),y=(1<<u)-2;for(let x=0;x<g;x+=u){let _=0;for(let T=0;T<u;T++)(x+T>=g||s.get(x+T))&&(_|=1<<u-1-T);(_&y)===y?(h.appendBits(_&y,u),x--):(_&y)===0?(h.appendBits(_|1,u),x--):h.appendBits(_,u)}return h}static totalBitsInLayer(s,u){return((u?88:112)+16*s)*s}}At.DEFAULT_EC_PERCENT=33,At.DEFAULT_AZTEC_LAYERS=0,At.MAX_NB_BITS=32,At.MAX_NB_BITS_COMPACT=4,At.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Va{encode(s,u,h,g){return this.encodeWithHints(s,u,h,g,null)}encodeWithHints(s,u,h,g,y){let x=Nc.ISO_8859_1,_=At.DEFAULT_EC_PERCENT,T=At.DEFAULT_AZTEC_LAYERS;return y!=null&&(y.has(Ln.CHARACTER_SET)&&(x=Rf.forName(y.get(Ln.CHARACTER_SET).toString())),y.has(Ln.ERROR_CORRECTION)&&(_=L.parseInt(y.get(Ln.ERROR_CORRECTION).toString())),y.has(Ln.AZTEC_LAYERS)&&(T=L.parseInt(y.get(Ln.AZTEC_LAYERS).toString()))),Va.encodeLayers(s,u,h,g,x,_,T)}static encodeLayers(s,u,h,g,y,x,_){if(u!==Pe.AZTEC)throw new v("Can only encode AZTEC, but got "+u);let T=At.encode(le.getBytes(s,y),x,_);return Va.renderResult(T,h,g)}static renderResult(s,u,h){let g=s.getMatrix();if(g==null)throw new It;let y=g.getWidth(),x=g.getHeight(),_=Math.max(u,y),T=Math.max(h,x),O=Math.min(_/y,T/x),j=(_-y*O)/2,z=(T-x*O)/2,H=new me(_,T);for(let Y=0,Q=z;Y<x;Y++,Q+=O)for(let re=0,oe=j;re<y;re++,oe+=O)g.get(re,Y)&&H.setRegion(oe,Q,O,O);return H}}n.AbstractExpandedDecoder=xc,n.ArgumentException=m,n.ArithmeticException=_e,n.AztecCode=Of,n.AztecCodeReader=Oo,n.AztecCodeWriter=Va,n.AztecDecoder=Rt,n.AztecDetector=Us,n.AztecDetectorResult=pc,n.AztecEncoder=At,n.AztecHighLevelEncoder=Ua,n.AztecPoint=lr,n.BarcodeFormat=Pe,n.Binarizer=P,n.BinaryBitmap=b,n.BitArray=U,n.BitMatrix=me,n.BitSource=Ec,n.BrowserAztecCodeReader=Wm,n.BrowserBarcodeReader=Sf,n.BrowserCodeReader=Be,n.BrowserDatamatrixCodeReader=Km,n.BrowserMultiFormatReader=Ba,n.BrowserPDF417Reader=ql,n.BrowserQRCodeReader=Nf,n.BrowserQRCodeSvgWriter=es,n.CharacterSetECI=X,n.ChecksumException=C,n.Code128Reader=Le,n.Code39Reader=Mn,n.DataMatrixDecodedBitStreamParser=yi,n.DataMatrixReader=xi,n.DecodeHintType=q,n.DecoderResult=we,n.DefaultGridSampler=Fl,n.DetectorResult=js,n.EAN13Reader=Qr,n.EncodeHintType=Ln,n.Exception=d,n.FormatException=W,n.GenericGF=Ke,n.GenericGFPoly=Me,n.GlobalHistogramBinarizer=Oe,n.GridSampler=Bl,n.GridSamplerInstance=mi,n.HTMLCanvasElementLuminanceSource=Se,n.HybridBinarizer=se,n.ITFReader=Lt,n.IllegalArgumentException=v,n.IllegalStateException=It,n.InvertedLuminanceSource=Ee,n.LuminanceSource=ve,n.MathUtils=_t,n.MultiFormatOneDReader=zs,n.MultiFormatReader=Hl,n.MultiFormatWriter=Xm,n.NotFoundException=te,n.OneDReader=wn,n.PDF417DecodedBitStreamParser=ye,n.PDF417DecoderErrorCorrection=Cc,n.PDF417Reader=er,n.PDF417ResultMetadata=$l,n.PerspectiveTransform=Zr,n.PlanarYUVLuminanceSource=zi,n.QRCodeByteMatrix=Wl,n.QRCodeDataMask=xt,n.QRCodeDecodedBitStreamParser=tn,n.QRCodeDecoderErrorCorrectionLevel=Ut,n.QRCodeDecoderFormatInformation=Jn,n.QRCodeEncoder=qt,n.QRCodeEncoderQRCode=Qo,n.QRCodeMaskUtil=nn,n.QRCodeMatrixUtil=ot,n.QRCodeMode=rt,n.QRCodeReader=br,n.QRCodeVersion=nt,n.QRCodeWriter=Ks,n.RGBLuminanceSource=Fa,n.RSS14Reader=Kt,n.RSSExpandedReader=Ce,n.ReaderException=Ws,n.ReedSolomonDecoder=An,n.ReedSolomonEncoder=Pc,n.ReedSolomonException=dt,n.Result=Fe,n.ResultMetadataType=it,n.ResultPoint=ze,n.StringUtils=le,n.UnsupportedOperationException=pe,n.VideoInputDevice=ne,n.WhiteRectangleDetector=Bi,n.WriterException=$t,n.ZXingArrays=F,n.ZXingCharset=Rf,n.ZXingInteger=L,n.ZXingStandardCharsets=Nc,n.ZXingStringBuilder=be,n.ZXingStringEncoding=ae,n.ZXingSystem=N,n.createAbstractExpandedDecoder=Ef,Object.defineProperty(n,"__esModule",{value:!0})}))})(yd,yd.exports)),yd.exports}var cn=dH();const fH=so(cn),hH=nw({__proto__:null,default:fH},[cn]);var QC=(function(){function e(t,n,r){if(this.formatMap=new Map([[$e.QR_CODE,cn.BarcodeFormat.QR_CODE],[$e.AZTEC,cn.BarcodeFormat.AZTEC],[$e.CODABAR,cn.BarcodeFormat.CODABAR],[$e.CODE_39,cn.BarcodeFormat.CODE_39],[$e.CODE_93,cn.BarcodeFormat.CODE_93],[$e.CODE_128,cn.BarcodeFormat.CODE_128],[$e.DATA_MATRIX,cn.BarcodeFormat.DATA_MATRIX],[$e.MAXICODE,cn.BarcodeFormat.MAXICODE],[$e.ITF,cn.BarcodeFormat.ITF],[$e.EAN_13,cn.BarcodeFormat.EAN_13],[$e.EAN_8,cn.BarcodeFormat.EAN_8],[$e.PDF_417,cn.BarcodeFormat.PDF_417],[$e.RSS_14,cn.BarcodeFormat.RSS_14],[$e.RSS_EXPANDED,cn.BarcodeFormat.RSS_EXPANDED],[$e.UPC_A,cn.BarcodeFormat.UPC_A],[$e.UPC_E,cn.BarcodeFormat.UPC_E],[$e.UPC_EAN_EXTENSION,cn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!hH)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(t),o=new Map;o.set(cn.DecodeHintType.POSSIBLE_FORMATS,i),o.set(cn.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,i){try{r(n.decode(t))}catch(o){i(o)}})},e.prototype.decode=function(t){var n=new cn.MultiFormatReader(this.verbose,this.hints),r=new cn.HTMLCanvasElementLuminanceSource(t),i=new cn.BinaryBitmap(new cn.HybridBinarizer(r)),o=n.decode(i);return{text:o.text,format:Y3.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),pH=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(m){try{d(r.next(m))}catch(v){a(v)}}function f(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(c,f)}d((r=r.apply(e,t||[])).next())})},mH=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},eA=(function(){function e(t,n,r){if(this.formatMap=new Map([[$e.QR_CODE,"qr_code"],[$e.AZTEC,"aztec"],[$e.CODABAR,"codabar"],[$e.CODE_39,"code_39"],[$e.CODE_93,"code_93"],[$e.CODE_128,"code_128"],[$e.DATA_MATRIX,"data_matrix"],[$e.ITF,"itf"],[$e.EAN_13,"ean_13"],[$e.EAN_8,"ean_8"],[$e.PDF_417,"pdf417"],[$e.UPC_A,"upc_a"],[$e.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return pH(this,void 0,void 0,function(){var n,r;return mH(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:Y3.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,i=0,o=t;i<o.length;i++){var a=o[i],c=a.boundingBox.width*a.boundingBox.height;c>r&&(r=c,n=a)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),tA=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(m){try{d(r.next(m))}catch(v){a(v)}}function f(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(c,f)}d((r=r.apply(e,t||[])).next())})},nA=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},gH=(function(){function e(t,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&eA.isSupported()?(this.primaryDecoder=new eA(t,r,i),this.secondaryDecoder=new QC(t,r,i)):this.primaryDecoder=new QC(t,r,i)}return e.prototype.decodeAsync=function(t){return tA(this,void 0,void 0,function(){var n;return nA(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return tA(this,void 0,void 0,function(){var n,r;return nA(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];t+=i}var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),Mw=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),j0=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(m){try{d(r.next(m))}catch(v){a(v)}}function f(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(c,f)}d((r=r.apply(e,t||[])).next())})},U0=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},J3=(function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e})(),vH=(function(e){Mw(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(J3),yH=(function(e){Mw(t,e);function t(n){return e.call(this,"zoom",n)||this}return t})(vH),xH=(function(e){Mw(t,e);function t(n){return e.call(this,"torch",n)||this}return t})(J3),wH=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new yH(this.track)},e.prototype.torchFeature=function(){return new xH(this.track)},e})(),bH=(function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,i=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,i),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return j0(this,void 0,void 0,function(){var o,a;return U0(this,function(c){switch(c.label){case 0:return o=new e(t,n,i),r.aspectRatio?(a={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(a)]):[3,2];case 1:c.sent(),c.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return j0(this,void 0,void 0,function(){return U0(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var i=t.mediaStream.getVideoTracks(),o=i.length,a=0;t.mediaStream.getVideoTracks().forEach(function(c){t.mediaStream.removeTrack(c),c.stop(),++a,a>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new wH(this.getFirstTrackOrFail())},e})(),EH=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return j0(this,void 0,void 0,function(){return U0(this,function(i){return[2,bH.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return j0(this,void 0,void 0,function(){var n,r;return U0(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new e(r)]}})})},e})(),rA=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(m){try{d(r.next(m))}catch(v){a(v)}}function f(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(c,f)}d((r=r.apply(e,t||[])).next())})},iA=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},_H=(function(){function e(){}return e.failIfNotSupported=function(){return rA(this,void 0,void 0,function(){return iA(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return rA(this,void 0,void 0,function(){return iA(this,function(n){return[2,EH.create(t)]})})},e})(),SH=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(m){try{d(r.next(m))}catch(v){a(v)}}function f(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(c,f)}d((r=r.apply(e,t||[])).next())})},CH=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},AH=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Au.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Au.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return SH(this,void 0,void 0,function(){var t,n,r,i,o,a,c;return CH(this,function(f){switch(f.label){case 0:return t=function(d){for(var m=d.getVideoTracks(),v=0,b=m;v<b.length;v++){var C=b[v];C.enabled=!1,C.stop(),d.removeTrack(C)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=f.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=f.sent(),i=[],o=0,a=r;o<a.length;o++)c=a[o],c.kind==="videoinput"&&i.push({id:c.deviceId,label:c.label});return t(n),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(o){for(var a=[],c=0,f=o;c<f.length;c++){var d=f[c];d.kind==="video"&&a.push({id:d.id,label:d.label})}t(a)},i=MediaStreamTrack;i.getSources(r)})},e})(),Rn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Rn||(Rn={}));var TH=(function(){function e(){this.state=Rn.NOT_STARTED,this.onGoingTransactionNewState=Rn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Rn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Rn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Rn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Rn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Rn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Rn.UNKNOWN:throw"Transition from unknown is not allowed";case Rn.NOT_STARTED:this.failIfNewStateIs(t,[Rn.PAUSED]);break;case Rn.SCANNING:break;case Rn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];if(t===o)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),IH=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Rn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Rn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Rn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Rn.PAUSED},e})(),PH=(function(){function e(){}return e.create=function(){return new IH(new TH)},e})(),NH=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ai=(function(e){NH(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(aH),RH=(function(){function e(t,n){this.logger=n,this.fps=Ai.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Ai.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?X3.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!hs(this.qrbox)},e.create=function(t,n){return new e(t,n)},e})(),OH=(function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new uH(this.verbose),this.qrcode=new gH(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=PH.create()}return e.prototype.start=function(t,n,r,i){var o=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var a;i?a=i:a=this.verbose?this.logger.log:function(){};var c=RH.create(n,this.logger);this.clearElement();var f=!1;c.videoConstraints&&(c.isMediaStreamConstraintsValid()?f=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=f,m=document.getElementById(this.elementId);m.clientWidth?m.clientWidth:Ai.DEFAULT_WIDTH,m.style.position="relative",this.shouldScan=!0,this.element=m;var v=this,b=this.stateManagerProxy.startTransition(Rn.SCANNING);return new Promise(function(C,P){var N=d?c.videoConstraints:v.createVideoConstraints(t);if(!N){b.cancel(),P("videoConstraints should be defined");return}var R={};(!d||c.aspectRatio)&&(R.aspectRatio=c.aspectRatio);var D={onRenderSurfaceReady:function(F,L){v.setupUi(F,L,c),v.isScanning=!0,v.foreverScan(c,r,a)}};_H.failIfNotSupported().then(function(F){F.create(N).then(function(L){return L.render(o.element,R,D).then(function(U){v.renderedCamera=U,b.execute(),C(null)}).catch(function(U){b.cancel(),P(U)})}).catch(function(L){b.cancel(),P(Au.errorGettingUserMedia(L))})}).catch(function(F){b.cancel(),P(Au.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Rn.PAUSED),this.showPausedState(),(hs(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Rn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Rn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var o=document.getElementById(Ai.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(hs(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var a=new Image;a.onload=function(){var c=a.width,f=a.height,d=document.getElementById(r.elementId),m=d.clientWidth?d.clientWidth:Ai.DEFAULT_WIDTH,v=Math.max(d.clientHeight?d.clientHeight:f,Ai.FILE_SCAN_MIN_HEIGHT),b=r.computeCanvasDrawConfig(c,f,m,v);if(n){var C=r.createCanvasElement(m,v,"qr-canvas-visible");C.style.display="inline-block",d.appendChild(C);var P=C.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=m,P.canvas.height=v,P.drawImage(a,0,0,c,f,b.x,b.y,b.width,b.height)}var N=Ai.FILE_SCAN_HIDDEN_CANVAS_PADDING,R=Math.max(a.width,b.width),D=Math.max(a.height,b.height),F=R+2*N,L=D+2*N,U=r.createCanvasElement(F,L);d.appendChild(U);var G=U.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=F,G.canvas.height=L,G.drawImage(a,0,0,c,f,N,N,R,D);try{r.qrcode.decodeRobustlyAsync(U).then(function(q){i(JC.createFromQrcodeResult(q))}).catch(o)}catch(q){o("QR code parse error, error = ".concat(q))}},a.onerror=o,a.onabort=o,a.onstalled=o,a.onsuspend=o,a.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return AH.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!X3.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[$e.QR_CODE,$e.AZTEC,$e.CODABAR,$e.CODE_39,$e.CODE_93,$e.CODE_128,$e.DATA_MATRIX,$e.MAXICODE,$e.ITF,$e.EAN_13,$e.EAN_8,$e.PDF_417,$e.RSS_14,$e.RSS_EXPANDED,$e.UPC_A,$e.UPC_E,$e.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=t.formatsToSupport;i<o.length;i++){var a=o[i];sH(a)?r.push(a):this.logger.warn("Invalid format: ".concat(a," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(hs(t))return!0;if(!hs(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(hs(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return hs(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var a=this.toQrdimensions(t,n,o),c=function(d){if(d<Ai.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ai.MIN_QR_BOX_SIZE,"px.")},f=function(d){return d>t&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=t),d};c(a.width),c(a.height),a.width=f(a.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var i=hs(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(t,n,i);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var a=r.isShadedBoxEnabled()&&o.height<=n,c={x:0,y:0,width:t,height:n},f=a?this.getShadedRegionBounds(t,n,o):c,d=this.createCanvasElement(f.width,f.height),m={willReadFrequently:!0},v=d.getContext("2d",m);v.canvas.width=f.width,v.canvas.height=f.height,this.element.append(d),a&&this.possiblyInsertShadingElement(this.element,t,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=f,this.context=v,this.canvasElement=d},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Au.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,JC.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=Au.codeParseError(i);return n(o,lH.createFrom(o)),!1})},e.prototype.foreverScan=function(t,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),a=o.videoWidth/o.clientWidth,c=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var f=this.qrRegion.width*a,d=this.qrRegion.height*c,m=this.qrRegion.x*a,v=this.qrRegion.y*c;this.context.drawImage(o,m,v,f,d,0,0,this.qrRegion.width,this.qrRegion.height);var b=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,n,r)},i.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(C){!C&&t.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){b()})):b()}).catch(function(C){i.logger.logError("Error happend while scanning context",C),b()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",a=function(P){if(P in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(P,"'")},c=Object.keys(t);if(c.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(c.length," keys");var f=Object.keys(t)[0];if(f!==n&&f!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(f===n){var d=t.facingMode;if(typeof d=="string"){if(a(d))return{facingMode:d}}else if(typeof d=="object")if(o in d){if(a(d["".concat(o)]))return{facingMode:{exact:d["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var m=typeof d;throw"Invalid type of 'facingMode' = ".concat(m)}}else{var v=t.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(o in v)return{deviceId:{exact:v["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var b=typeof v;throw"Invalid type of 'deviceId' = ".concat(b)}}}var C=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(C)},e.prototype.computeCanvasDrawConfig=function(t,n,r,i){if(t<=r&&n<=i){var o=(r-t)/2,a=(i-n)/2;return{x:o,y:a,width:t,height:n}}else{var c=t,f=n;return t>r&&(n=r/t*n,t=r),n>i&&(t=i/n*t,n=i),this.logger.log("Image downsampled from "+"".concat(c,"X").concat(f)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Ai.BORDER_SHADER_MATCH_COLOR:Ai.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var i=t,o=n,a=document.createElement("canvas");return a.style.width="".concat(i,"px"),a.style.height="".concat(o,"px"),a.style.display="none",a.id=hs(r)?"qr-canvas":r,a},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,i){if(!(n-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var a=(n-i.width)/2,c=(r-i.height)/2;if(o.style.borderLeft="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(Ai.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var f=5,d=40;this.insertShaderBorders(o,d,f,-f,null,0,!0),this.insertShaderBorders(o,d,f,-f,null,0,!1),this.insertShaderBorders(o,d,f,null,-f,0,!0),this.insertShaderBorders(o,d,f,null,-f,0,!1),this.insertShaderBorders(o,f,d+f,-f,null,-f,!0),this.insertShaderBorders(o,f,d+f,null,-f,-f,!0),this.insertShaderBorders(o,f,d+f,-f,null,-f,!1),this.insertShaderBorders(o,f,d+f,null,-f,-f,!1),this.hasBorderShaders=!0}t.append(o)}},e.prototype.insertShaderBorders=function(t,n,r,i,o,a,c){var f=document.createElement("div");f.style.position="absolute",f.style.backgroundColor=Ai.BORDER_SHADER_DEFAULT_COLOR,f.style.width="".concat(n,"px"),f.style.height="".concat(r,"px"),i!==null&&(f.style.top="".concat(i,"px")),o!==null&&(f.style.bottom="".concat(o,"px")),c?f.style.left="".concat(a,"px"):f.style.right="".concat(a,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(f),t.appendChild(f)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),oA;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(oA||(oA={}));const kH=({perfume:e,onSell:t})=>{const[n,r]=k.useState(null);k.useEffect(()=>{i()},[]);const i=async()=>{const{data:a}=await Ht.from("inventory").select("quantity").eq("product_id",e.id).single();r(a?a.quantity:e.stock?5:0)},o=async()=>{if(!window.confirm(`Confirmar venta de ${e.name}?`))return;const{data:a,error:c}=await Ht.rpc("sell_product",{p_id:e.id,qty:1});c?alert("Error: "+c.message):a.success?(r(a.new_stock),t(e.price10ml,`Venta: ${e.name} (10ml)`),alert("Venta exitosa. Nuevo stock: "+a.new_stock)):alert("Error: "+a.message)};return I.jsxs("tr",{className:"border-b border-stone-700 hover:bg-stone-700/20",children:[I.jsx("td",{className:"px-3 py-2 font-medium text-white",children:e.name}),I.jsx("td",{className:"px-3 py-2 text-center",children:I.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${n!==null&&n>0?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:n!==null?n:"..."})}),I.jsxs("td",{className:"px-3 py-2 text-center text-green-400",children:["$",e.price10ml.toLocaleString()]}),I.jsx("td",{className:"px-3 py-2 text-right",children:I.jsx("button",{onClick:o,disabled:n!==null&&n<=0,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-stone-600 disabled:cursor-not-allowed text-white px-3 py-1 rounded text-xs font-bold shadow-lg",children:"Vender"})})]})},MH=({onLogout:e})=>{const[t,n]=k.useState(""),[r,i]=k.useState(""),[o,a]=k.useState(!1),[c,f]=k.useState(null),[d,m]=k.useState("loyalty"),[v,b]=k.useState("Corte"),[C,P]=k.useState("7000"),[N,R]=k.useState("0"),[D,F]=k.useState(null);k.useEffect(()=>{if(o&&!c){const Z=new OH("reader"),X={fps:10,qrbox:{width:250,height:250}};return Z.start({facingMode:"environment"},X,U,G).catch(pe=>{console.error("Error starting scanner:",pe),i("Error iniciando cmara: "+pe)}),()=>{Z.stop().then(()=>Z.clear()).catch(console.error)}}},[o,c]);const L=async(Z,X,pe,ae)=>{if(X<=0)return;const{error:le}=await Ht.from("transactions").insert({client_id:Z,amount:X,type:pe,description:ae});le&&console.error("Error recording transaction:",le)},U=async(Z,X)=>{if(!c){f(Z),a(!1);try{i("Procesando...");const{data:pe,error:ae}=await Ht.rpc("register_visit",{token_input:Z});if(ae)throw ae;if(pe.success){if(i("OK: "+pe.message+" Visitas: "+pe.new_visits),d==="hair"){const le=parseInt(C)||0,{data:be}=await Ht.from("clients").select("id").eq("member_token",Z).single();be&&await L(be.id,le,"service",`Servicio: ${v}`)}}else i("Error: "+pe.message);setTimeout(()=>{f(null),i("")},4e3)}catch(pe){console.error(pe),i("Error al procesar el cdigo."),f(null)}}},G=Z=>{console.warn(Z)},q=async()=>{if(!D||!window.confirm("Confirmar canje del 10% de Descuento?"))return;const{data:Z,error:X}=await Ht.rpc("redeem_discount_5th",{token_input:D.member_token});if(X)i("Error: "+X.message);else if(i(Z.message),Z.success){const{data:pe}=await Ht.from("clients").select("*").eq("id",D.id).single();F(pe)}},W=async()=>{if(!(t.length<8))try{const{data:Z,error:X}=await Ht.from("clients").select("*").eq("phone",t).single();if(X&&X.code!=="PGRST116"){alert("Error al buscar cliente");return}const ae=(Z?Z.visits:0)+1,{data:le,error:be}=await Ht.from("clients").upsert({phone:t,visits:ae,last_visit:new Date().toISOString()},{onConflict:"phone"}).select().single();if(be){console.error(be),alert("Error al actualizar visita");return}const me=d==="hair"?parseInt(C)||0:parseInt(N)||0;await L(le.id,me,"service",d==="hair"?`Manual: ${v}`:"Manual: Visita"),F(le),i("Visita registrada para "+t+". Total: "+ae),n("")}catch(Z){console.error(Z),alert("Error de conexin")}};return I.jsxs("div",{className:"max-w-2xl mx-auto p-4 py-12",children:[I.jsxs("h2",{className:"text-3xl serif text-stone-900 mb-8 border-b pb-4 flex justify-between items-center",children:[I.jsx("span",{children:"Panel de Atencin"}),I.jsx("button",{onClick:e,className:"text-sm bg-stone-200 px-3 py-1 rounded hover:bg-stone-300 transition",children:"Salir"})]}),I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 mb-8",children:[I.jsxs("h3",{className:"text-xl font-bold text-stone-900 mb-4 flex items-center gap-2",children:[I.jsx(ZL,{className:"text-green-600"}),"Registrar Visita Manual"]}),I.jsx("p",{className:"text-sm text-stone-500 mb-6",children:"Ingrese nmero y monto para registrar."}),I.jsxs("div",{className:"flex gap-4 mb-4 flex-wrap",children:[I.jsx("input",{type:"tel",value:t,onChange:Z=>n(Z.target.value),placeholder:"+569...",className:"flex-1 min-w-[150px] px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-green-600 outline-none"}),d==="loyalty"&&I.jsx("input",{type:"number",value:N,onChange:Z=>R(Z.target.value),placeholder:"Monto ($)",className:"w-32 px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-green-600 outline-none"}),I.jsxs("button",{onClick:W,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition flex items-center gap-2",children:[I.jsx(eB,{size:18}),"Registrar"]})]}),I.jsx("div",{className:"flex justify-center mb-6",children:I.jsxs("div",{className:"bg-stone-800 p-1 rounded-xl inline-flex",children:[I.jsx("button",{onClick:()=>m("loyalty"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${d==="loyalty"?"bg-amber-500 text-stone-900":"text-stone-400 hover:text-white"}`,children:"Visitas"}),I.jsx("button",{onClick:()=>m("hair"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${d==="hair"?"bg-purple-500 text-white":"text-stone-400 hover:text-white"}`,children:"Peluquera"}),I.jsx("button",{onClick:()=>m("inventory"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${d==="inventory"?"bg-blue-500 text-white":"text-stone-400 hover:text-white"}`,children:"Inventario"})]})}),I.jsxs("div",{className:"bg-stone-800 p-6 rounded-2xl shadow-xl border border-white/5",children:[I.jsx("h3",{className:"serif text-xl mb-4 text-center text-white",children:d==="loyalty"?"Registrar Visita":d==="hair"?"Registrar Servicio Peluquera":"Gestin de Inventario"}),d==="inventory"&&I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full text-xs text-left text-stone-300",children:[I.jsx("thead",{className:"text-xs text-stone-400 uppercase bg-stone-700/50",children:I.jsxs("tr",{children:[I.jsx("th",{className:"px-3 py-2",children:"Perfume"}),I.jsx("th",{className:"px-3 py-2 text-center",children:"Stock"}),I.jsx("th",{className:"px-3 py-2 text-center",children:"Precio 10ml"}),I.jsx("th",{className:"px-3 py-2 text-right",children:"Accin"})]})}),I.jsx("tbody",{children:xa.map(Z=>I.jsx(kH,{perfume:Z,onSell:(X,pe)=>L(D?.id||"anon",X,"product",pe)},Z.id))})]})}),d==="hair"&&I.jsxs("div",{className:"mb-4 space-y-3",children:[I.jsxs("select",{value:v,onChange:Z=>b(Z.target.value),className:"w-full bg-stone-900 border border-white/10 rounded-lg px-3 py-2 text-white",children:[I.jsx("option",{value:"Corte",children:"Corte ($7.000+)"}),I.jsx("option",{value:"Lavado",children:"Lavado ($5.000)"}),I.jsx("option",{value:"Tintura",children:"Tintura ($10.000+)"}),I.jsx("option",{value:"Masaje",children:"Masaje ($5.000)"})]}),I.jsx("input",{type:"number",value:C,onChange:Z=>P(Z.target.value),placeholder:"Precio Real",className:"w-full bg-stone-900 border border-white/10 rounded-lg px-3 py-2 text-white"})]}),d!=="inventory"&&I.jsxs("button",{onClick:()=>a(!0),className:`w-full py-4 rounded-xl flex items-center justify-center gap-2 font-bold text-lg transition ${d==="hair"?"bg-purple-600 hover:bg-purple-500 text-white":"bg-amber-500 hover:bg-amber-400 text-stone-900"}`,children:[I.jsx(bR,{size:24}),d==="hair"?"Escanear para Servicio":"Escanear Tarjeta"]}),r&&I.jsx("div",{className:"mt-4 p-3 bg-green-500/20 text-green-400 rounded-lg text-sm font-medium whitespace-pre-wrap",children:r}),D&&I.jsxs("div",{className:"mt-6 border-t border-white/10 pt-4",children:[I.jsxs("h3",{className:"font-bold text-white mb-3",children:["Cliente: ",D.phone]}),I.jsx("div",{className:"space-y-3",children:D.discount_5th_visit_available?I.jsx("button",{onClick:q,className:"w-full bg-purple-600 text-white py-2 rounded",children:"Canjear 10%"}):I.jsx("div",{className:"text-stone-500 text-xs text-center",children:"Sin descuento disponible"})})]})]}),o&&I.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center p-4",children:I.jsxs("div",{className:"bg-white p-4 rounded-2xl w-full max-w-sm relative",children:[I.jsx("button",{onClick:()=>a(!1),className:"absolute -top-12 right-0 text-white p-2",children:I.jsx(Wd,{size:32})}),I.jsx("h3",{className:"text-center font-bold mb-4",children:"Escanea el Cdigo del Cliente"}),I.jsx("div",{id:"reader",className:"w-full bg-stone-100 rounded-lg overflow-hidden"})]})})]})]})};function Z3(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Z3(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ft(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Z3(e))&&(r&&(r+=" "),r+=t);return r}var DH=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Dw(e){if(typeof e!="string")return!1;var t=DH;return t.includes(e)}var LH=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],BH=new Set(LH);function Q3(e){return typeof e!="string"?!1:BH.has(e)}function ek(e){return typeof e=="string"&&e.startsWith("data-")}function Oi(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(Q3(n)||ek(n))&&(t[n]=e[n]);return t}function ju(e){if(e==null)return null;if(k.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Oi(t)}return typeof e=="object"&&!Array.isArray(e)?Oi(e):null}function ki(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(Q3(n)||ek(n)||Dw(n))&&(t[n]=e[n]);return t}var FH=["children","width","height","viewBox","className","style","title","desc"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zy.apply(null,arguments)}function jH(e,t){if(e==null)return{};var n,r,i=UH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function UH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Lw=k.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:o,className:a,style:c,title:f,desc:d}=e,m=jH(e,FH),v=o||{width:r,height:i,x:0,y:0},b=Ft("recharts-surface",a);return k.createElement("svg",Zy({},ki(m),{className:b,width:r,height:i,style:c,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),k.createElement("title",null,f),k.createElement("desc",null,d),n)}),VH=["children","className"];function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qy.apply(null,arguments)}function zH(e,t){if(e==null)return{};var n,r,i=$H(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function $H(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Un=k.forwardRef((e,t)=>{var{children:n,className:r}=e,i=zH(e,VH),o=Ft("recharts-layer",r);return k.createElement("g",Qy({className:o},ki(i),{ref:t}),n)}),tk=k.createContext(null),GH=()=>k.useContext(tk);function sn(e){return function(){return e}}const nk=Math.cos,V0=Math.sin,No=Math.sqrt,z0=Math.PI,Xp=2*z0,ex=Math.PI,tx=2*ex,sl=1e-6,HH=tx-sl;function rk(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function qH(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return rk;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class WH{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?rk:qH(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,c=this._y1,f=r-t,d=i-n,m=a-t,v=c-n,b=m*m+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>sl)if(!(Math.abs(v*f-d*m)>sl)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let C=r-a,P=i-c,N=f*f+d*d,R=C*C+P*P,D=Math.sqrt(N),F=Math.sqrt(b),L=o*Math.tan((ex-Math.acos((N+b-R)/(2*D*F)))/2),U=L/F,G=L/D;Math.abs(U-1)>sl&&this._append`L${t+U*m},${n+U*v}`,this._append`A${o},${o},0,0,${+(v*C>m*P)},${this._x1=t+G*f},${this._y1=n+G*d}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),f=r*Math.sin(i),d=t+c,m=n+f,v=1^a,b=a?i-o:o-i;this._x1===null?this._append`M${d},${m}`:(Math.abs(this._x1-d)>sl||Math.abs(this._y1-m)>sl)&&this._append`L${d},${m}`,r&&(b<0&&(b=b%tx+tx),b>HH?this._append`A${r},${r},0,1,${v},${t-c},${n-f}A${r},${r},0,1,${v},${this._x1=d},${this._y1=m}`:b>sl&&this._append`A${r},${r},0,${+(b>=ex)},${v},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Bw(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new WH(t)}function Fw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ik(e){this._context=e}ik.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Jp(e){return new ik(e)}function ok(e){return e[0]}function sk(e){return e[1]}function ak(e,t){var n=sn(!0),r=null,i=Jp,o=null,a=Bw(c);e=typeof e=="function"?e:e===void 0?ok:sn(e),t=typeof t=="function"?t:t===void 0?sk:sn(t);function c(f){var d,m=(f=Fw(f)).length,v,b=!1,C;for(r==null&&(o=i(C=a())),d=0;d<=m;++d)!(d<m&&n(v=f[d],d,f))===b&&((b=!b)?o.lineStart():o.lineEnd()),b&&o.point(+e(v,d,f),+t(v,d,f));if(C)return o=null,C+""||null}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:sn(+f),c):e},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:sn(+f),c):t},c.defined=function(f){return arguments.length?(n=typeof f=="function"?f:sn(!!f),c):n},c.curve=function(f){return arguments.length?(i=f,r!=null&&(o=i(r)),c):i},c.context=function(f){return arguments.length?(f==null?r=o=null:o=i(r=f),c):r},c}function $h(e,t,n){var r=null,i=sn(!0),o=null,a=Jp,c=null,f=Bw(d);e=typeof e=="function"?e:e===void 0?ok:sn(+e),t=typeof t=="function"?t:sn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?sk:sn(+n);function d(v){var b,C,P,N=(v=Fw(v)).length,R,D=!1,F,L=new Array(N),U=new Array(N);for(o==null&&(c=a(F=f())),b=0;b<=N;++b){if(!(b<N&&i(R=v[b],b,v))===D)if(D=!D)C=b,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),P=b-1;P>=C;--P)c.point(L[P],U[P]);c.lineEnd(),c.areaEnd()}D&&(L[b]=+e(R,b,v),U[b]=+t(R,b,v),c.point(r?+r(R,b,v):L[b],n?+n(R,b,v):U[b]))}if(F)return c=null,F+""||null}function m(){return ak().defined(i).curve(a).context(o)}return d.x=function(v){return arguments.length?(e=typeof v=="function"?v:sn(+v),r=null,d):e},d.x0=function(v){return arguments.length?(e=typeof v=="function"?v:sn(+v),d):e},d.x1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:sn(+v),d):r},d.y=function(v){return arguments.length?(t=typeof v=="function"?v:sn(+v),n=null,d):t},d.y0=function(v){return arguments.length?(t=typeof v=="function"?v:sn(+v),d):t},d.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:sn(+v),d):n},d.lineX0=d.lineY0=function(){return m().x(e).y(t)},d.lineY1=function(){return m().x(e).y(n)},d.lineX1=function(){return m().x(r).y(t)},d.defined=function(v){return arguments.length?(i=typeof v=="function"?v:sn(!!v),d):i},d.curve=function(v){return arguments.length?(a=v,o!=null&&(c=a(o)),d):a},d.context=function(v){return arguments.length?(v==null?o=c=null:c=a(o=v),d):o},d}class lk{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function KH(e){return new lk(e,!0)}function YH(e){return new lk(e,!1)}const jw={draw(e,t){const n=No(t/z0);e.moveTo(n,0),e.arc(0,0,n,0,Xp)}},XH={draw(e,t){const n=No(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},uk=No(1/3),JH=uk*2,ZH={draw(e,t){const n=No(t/JH),r=n*uk;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},QH={draw(e,t){const n=No(t),r=-n/2;e.rect(r,r,n,n)}},eq=.8908130915292852,ck=V0(z0/10)/V0(7*z0/10),tq=V0(Xp/10)*ck,nq=-nk(Xp/10)*ck,rq={draw(e,t){const n=No(t*eq),r=tq*n,i=nq*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const a=Xp*o/5,c=nk(a),f=V0(a);e.lineTo(f*n,-c*n),e.lineTo(c*r-f*i,f*r+c*i)}e.closePath()}},D1=No(3),iq={draw(e,t){const n=-No(t/(D1*3));e.moveTo(0,n*2),e.lineTo(-D1*n,-n),e.lineTo(D1*n,-n),e.closePath()}},Yi=-.5,Xi=No(3)/2,nx=1/No(12),oq=(nx/2+1)*3,sq={draw(e,t){const n=No(t/oq),r=n/2,i=n*nx,o=r,a=n*nx+n,c=-o,f=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(c,f),e.lineTo(Yi*r-Xi*i,Xi*r+Yi*i),e.lineTo(Yi*o-Xi*a,Xi*o+Yi*a),e.lineTo(Yi*c-Xi*f,Xi*c+Yi*f),e.lineTo(Yi*r+Xi*i,Yi*i-Xi*r),e.lineTo(Yi*o+Xi*a,Yi*a-Xi*o),e.lineTo(Yi*c+Xi*f,Yi*f-Xi*c),e.closePath()}};function aq(e,t){let n=null,r=Bw(i);e=typeof e=="function"?e:sn(e||jw),t=typeof t=="function"?t:sn(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:sn(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:sn(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function $0(){}function G0(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function dk(e){this._context=e}dk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:G0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:G0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lq(e){return new dk(e)}function fk(e){this._context=e}fk.prototype={areaStart:$0,areaEnd:$0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:G0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uq(e){return new fk(e)}function hk(e){this._context=e}hk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:G0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cq(e){return new hk(e)}function pk(e){this._context=e}pk.prototype={areaStart:$0,areaEnd:$0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function dq(e){return new pk(e)}function sA(e){return e<0?-1:1}function aA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),c=(o*i+a*r)/(r+i);return(sA(o)+sA(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(c))||0}function lA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function L1(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,c=(o-r)/3;e._context.bezierCurveTo(r+c,i+c*t,o-c,a-c*n,o,a)}function H0(e){this._context=e}H0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:L1(this,this._t0,lA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,L1(this,lA(this,n=aA(this,e,t)),n);break;default:L1(this,this._t0,n=aA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function mk(e){this._context=new gk(e)}(mk.prototype=Object.create(H0.prototype)).point=function(e,t){H0.prototype.point.call(this,t,e)};function gk(e){this._context=e}gk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function fq(e){return new H0(e)}function hq(e){return new mk(e)}function vk(e){this._context=e}vk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=uA(e),i=uA(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function uA(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function pq(e){return new vk(e)}function Zp(e,t){this._context=e,this._t=t}Zp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function mq(e){return new Zp(e,.5)}function gq(e){return new Zp(e,0)}function vq(e){return new Zp(e,1)}function bl(e,t){if((a=e.length)>1)for(var n=1,r,i,o=e[t[0]],a,c=o.length;n<a;++n)for(i=o,o=e[t[n]],r=0;r<c;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function rx(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function yq(e,t){return e[t]}function xq(e){const t=[];return t.key=e,t}function wq(){var e=sn([]),t=rx,n=bl,r=yq;function i(o){var a=Array.from(e.apply(this,arguments),xq),c,f=a.length,d=-1,m;for(const v of o)for(c=0,++d;c<f;++c)(a[c][d]=[0,+r(v,a[c].key,d,o)]).data=v;for(c=0,m=Fw(t(a));c<f;++c)a[m[c]].index=c;return n(a,m),a}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:sn(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:sn(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?rx:typeof o=="function"?o:sn(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??bl,i):n},i}function bq(e,t){if((r=e.length)>0){for(var n,r,i=0,o=e[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=e[n][i][1]||0;if(a)for(n=0;n<r;++n)e[n][i][1]/=a}bl(e,t)}}function Eq(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,o=r.length;n<o;++n){for(var a=0,c=0;a<i;++a)c+=e[a][n][1]||0;r[n][1]+=r[n][0]=-c/2}bl(e,t)}}function _q(e,t){if(!(!((a=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var c=0,f=0,d=0;c<a;++c){for(var m=e[t[c]],v=m[r][1]||0,b=m[r-1][1]||0,C=(v-b)/2,P=0;P<c;++P){var N=e[t[P]],R=N[r][1]||0,D=N[r-1][1]||0;C+=R-D}f+=v,d+=C*v}i[r-1][1]+=i[r-1][0]=n,f&&(n-=d/f)}i[r-1][1]+=i[r-1][0]=n,bl(e,t)}}var B1={},F1={},cA;function Sq(){return cA||(cA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(F1)),F1}var j1={},dA;function yk(){return dA||(dA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(j1)),j1}var U1={},fA;function Uw(){return fA||(fA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(U1)),U1}var V1={},z1={},hA;function Cq(){return hA||(hA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(z1)),z1}var pA;function Vw(){return pA||(pA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cq(),n=Uw();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const o=[],a=i.length;if(a===0)return o;let c=0,f="",d="",m=!1;for(i.charCodeAt(0)===46&&(o.push(""),c++);c<a;){const v=i[c];d?v==="\\"&&c+1<a?(c++,f+=i[c]):v===d?d="":f+=v:m?v==='"'||v==="'"?d=v:v==="]"?(m=!1,o.push(f),f=""):f+=v:v==="["?(m=!0,f&&(o.push(f),f="")):v==="."?f&&(o.push(f),f=""):f+=v,c++}return f&&o.push(f),o}e.toPath=r})(V1)),V1}var mA;function zw(){return mA||(mA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sq(),n=yk(),r=Uw(),i=Vw();function o(c,f,d){if(c==null)return d;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return d;const m=c[f];return m===void 0?n.isDeepKey(f)?o(c,i.toPath(f),d):d:m}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const m=c[f];return m===void 0?d:m}default:{if(Array.isArray(f))return a(c,f,d);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return d;const m=c[f];return m===void 0?d:m}}}function a(c,f,d){if(f.length===0)return d;let m=c;for(let v=0;v<f.length;v++){if(m==null||t.isUnsafeProperty(f[v]))return d;m=m[f[v]]}return m===void 0?d:m}e.get=o})(B1)),B1}var $1,gA;function Aq(){return gA||(gA=1,$1=zw().get),$1}var Tq=Aq();const El=so(Tq);var Iq=4;function ya(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Iq,n=10**t,r=Math.round(e*n)/n;return Object.is(r,-0)?0:r}function On(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.reduce((i,o,a)=>{var c=n[a-1];return typeof c=="string"?i+c+o:c!==void 0?i+ya(c)+o:i+o},"")}var vr=e=>e===0?0:e>0?1:-1,Mi=e=>typeof e=="number"&&e!=+e,Ss=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Je=e=>(typeof e=="number"||e instanceof Number)&&!Mi(e),ro=e=>Je(e)||typeof e=="string",Pq=0,Pd=e=>{var t=++Pq;return"".concat(e||"").concat(t)},$r=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Je(t)&&typeof t!="string")return r;var o;if(Ss(t)){if(n==null)return r;var a=t.indexOf("%");o=n*parseFloat(t.slice(0,a))/100}else o=+t;return Mi(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},xk=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[String(e[r])])n[String(e[r])]=!0;else return!0;return!1};function Sn(e,t,n){return Je(e)&&Je(t)?ya(e+n*(t-e)):t}function wk(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):El(r,t))===n)}var Nq=e=>{for(var t=e.length,n=0,r=0,i=0,o=0,a=1/0,c=-1/0,f=0,d=0,m=0;m<t;m++){var v,b;f=((v=e[m])===null||v===void 0?void 0:v.cx)||0,d=((b=e[m])===null||b===void 0?void 0:b.cy)||0,n+=f,r+=d,i+=f*d,o+=f*f,a=Math.min(a,f),c=Math.max(c,f)}var C=t*o!==n*n?(t*i-n*r)/(t*o-n*n):0;return{xmin:a,xmax:c,a:C,b:(r-C*n)/t}},an=e=>e===null||typeof e>"u",Xd=e=>an(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Rq(e){return e!=null}function Jd(){}var Oq=["type","size","sizeType"];function ix(){return ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ix.apply(null,arguments)}function vA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(n),!0).forEach(function(r){kq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kq(e,t,n){return(t=Mq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mq(e){var t=Dq(e,"string");return typeof t=="symbol"?t:t+""}function Dq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lq(e,t){if(e==null)return{};var n,r,i=Bq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Bq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var bk={symbolCircle:jw,symbolCross:XH,symbolDiamond:ZH,symbolSquare:QH,symbolStar:rq,symbolTriangle:iq,symbolWye:sq},Fq=Math.PI/180,jq=e=>{var t="symbol".concat(Xd(e));return bk[t]||jw},Uq=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*Fq;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Vq=(e,t)=>{bk["symbol".concat(Xd(e))]=t},Qp=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=Lq(e,Oq),o=yA(yA({},i),{},{type:t,size:n,sizeType:r}),a="circle";typeof t=="string"&&(a=t);var c=()=>{var b=jq(a),C=aq().type(b).size(Uq(n,r,a)),P=C();if(P!==null)return P},{className:f,cx:d,cy:m}=o,v=ki(o);return Je(d)&&Je(m)&&Je(n)?k.createElement("path",ix({},v,{className:Ft("recharts-symbols",f),transform:"translate(".concat(d,", ").concat(m,")"),d:c()})):null};Qp.registerSymbol=Vq;var Ek=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,zq=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(k.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Dw(i)&&(r[i]=(o=>n[i](n,o)))}),r},$q=(e,t,n)=>r=>(e(t,n,r),null),nc=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var o=e[i];Dw(i)&&typeof o=="function"&&(r||(r={}),r[i]=$q(o,t,n))}),r},Gq=e=>Array.isArray(e)&&e.length>0;function xA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(n),!0).forEach(function(r){qq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qq(e,t,n){return(t=Wq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wq(e){var t=Kq(e,"string");return typeof t=="symbol"?t:t+""}function Kq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vn(e,t){var n=Hq({},e),r=t,i=Object.keys(t),o=i.reduce((a,c)=>(a[c]===void 0&&r[c]!==void 0&&(a[c]=r[c]),a),n);return o}function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q0.apply(null,arguments)}function wA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(n),!0).forEach(function(r){Xq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xq(e,t,n){return(t=Jq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jq(e){var t=Zq(e,"string");return typeof t=="symbol"?t:t+""}function Zq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zi=32,Qq={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function eW(e){var{data:t,iconType:n,inactiveColor:r}=e,i=Zi/2,o=Zi/6,a=Zi/3,c=t.inactive?r:t.color,f=n??t.type;if(f==="none")return null;if(f==="plainline"){var d;return k.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:i,x2:Zi,y2:i,className:"recharts-legend-icon"})}if(f==="line")return k.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(Zi,"M").concat(2*a,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(f==="rect")return k.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Zi/8,"h").concat(Zi,"v").concat(Zi*3/4,"h").concat(-Zi,"z"),className:"recharts-legend-icon"});if(k.isValidElement(t.legendIcon)){var m=Yq({},t);return delete m.legendIcon,k.cloneElement(t.legendIcon,m)}return k.createElement(Qp,{fill:c,cx:i,cy:i,size:Zi,sizeType:"diameter",type:f})}function tW(e){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:o,iconType:a}=e,c={x:0,y:0,width:Zi,height:Zi},f={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((m,v)=>{var b=m.formatter||i,C=Ft({"recharts-legend-item":!0,["legend-item-".concat(v)]:!0,inactive:m.inactive});if(m.type==="none")return null;var P=m.inactive?o:m.color,N=b?b(m.value,m,v):m.value;return k.createElement("li",q0({className:C,style:f,key:"legend-item-".concat(v)},nc(e,m,v)),k.createElement(Lw,{width:n,height:n,viewBox:c,style:d,"aria-label":"".concat(N," legend icon")},k.createElement(eW,{data:m,iconType:a,inactiveColor:o})),k.createElement("span",{className:"recharts-legend-item-text",style:{color:P}},N))})}var nW=e=>{var t=Vn(e,Qq),{payload:n,layout:r,align:i}=t;if(!n||!n.length)return null;var o={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return k.createElement("ul",{className:"recharts-default-legend",style:o},k.createElement(tW,q0({},t,{payload:n})))},G1={},H1={},bA;function rW(){return bA||(bA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let o=0;o<n.length;o++){const a=n[o],c=r(a);i.has(c)||i.set(c,a)}return Array.from(i.values())}e.uniqBy=t})(H1)),H1}var q1={},EA;function _k(){return EA||(EA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(q1)),q1}var W1={},K1={},Y1={},_A;function iW(){return _A||(_A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(Y1)),Y1}var SA;function $w(){return SA||(SA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iW();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(K1)),K1}var X1={},CA;function oW(){return CA||(CA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(X1)),X1}var AA;function sW(){return AA||(AA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$w(),n=oW();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(W1)),W1}var J1={},Z1={},TA;function aW(){return TA||(TA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zw();function n(r){return function(i){return t.get(i,r)}}e.property=n})(Z1)),Z1}var Q1={},ev={},tv={},nv={},IA;function Sk(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(nv)),nv}var rv={},PA;function Ck(){return PA||(PA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(rv)),rv}var iv={},NA;function Ak(){return NA||(NA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(iv)),iv}var RA;function lW(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sk(),n=Ck(),r=Ak();function i(m,v,b){return typeof b!="function"?i(m,v,()=>{}):o(m,v,function C(P,N,R,D,F,L){const U=b(P,N,R,D,F,L);return U!==void 0?!!U:o(P,N,C,L)},new Map)}function o(m,v,b,C){if(v===m)return!0;switch(typeof v){case"object":return a(m,v,b,C);case"function":return Object.keys(v).length>0?o(m,{...v},b,C):r.eq(m,v);default:return t.isObject(m)?typeof v=="string"?v==="":!0:r.eq(m,v)}}function a(m,v,b,C){if(v==null)return!0;if(Array.isArray(v))return f(m,v,b,C);if(v instanceof Map)return c(m,v,b,C);if(v instanceof Set)return d(m,v,b,C);const P=Object.keys(v);if(m==null||n.isPrimitive(m))return P.length===0;if(P.length===0)return!0;if(C?.has(v))return C.get(v)===m;C?.set(v,m);try{for(let N=0;N<P.length;N++){const R=P[N];if(!n.isPrimitive(m)&&!(R in m)||v[R]===void 0&&m[R]!==void 0||v[R]===null&&m[R]!==null||!b(m[R],v[R],R,m,v,C))return!1}return!0}finally{C?.delete(v)}}function c(m,v,b,C){if(v.size===0)return!0;if(!(m instanceof Map))return!1;for(const[P,N]of v.entries()){const R=m.get(P);if(b(R,N,P,m,v,C)===!1)return!1}return!0}function f(m,v,b,C){if(v.length===0)return!0;if(!Array.isArray(m))return!1;const P=new Set;for(let N=0;N<v.length;N++){const R=v[N];let D=!1;for(let F=0;F<m.length;F++){if(P.has(F))continue;const L=m[F];let U=!1;if(b(L,R,N,m,v,C)&&(U=!0),U){P.add(F),D=!0;break}}if(!D)return!1}return!0}function d(m,v,b,C){return v.size===0?!0:m instanceof Set?f([...m],[...v],b,C):!1}e.isMatchWith=i,e.isSetMatch=d})(tv)),tv}var OA;function Tk(){return OA||(OA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lW();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(ev)),ev}var ov={},sv={},av={},kA;function uW(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(av)),av}var lv={},MA;function Ik(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(lv)),lv}var uv={},DA;function Pk(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",a="[object Symbol]",c="[object Date]",f="[object Map]",d="[object Set]",m="[object Array]",v="[object Function]",b="[object ArrayBuffer]",C="[object Object]",P="[object Error]",N="[object DataView]",R="[object Uint8Array]",D="[object Uint8ClampedArray]",F="[object Uint16Array]",L="[object Uint32Array]",U="[object BigUint64Array]",G="[object Int8Array]",q="[object Int16Array]",W="[object Int32Array]",Z="[object BigInt64Array]",X="[object Float32Array]",pe="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=b,e.arrayTag=m,e.bigInt64ArrayTag=Z,e.bigUint64ArrayTag=U,e.booleanTag=i,e.dataViewTag=N,e.dateTag=c,e.errorTag=P,e.float32ArrayTag=X,e.float64ArrayTag=pe,e.functionTag=v,e.int16ArrayTag=q,e.int32ArrayTag=W,e.int8ArrayTag=G,e.mapTag=f,e.numberTag=r,e.objectTag=C,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=a,e.uint16ArrayTag=F,e.uint32ArrayTag=L,e.uint8ArrayTag=R,e.uint8ClampedArrayTag=D})(uv)),uv}var cv={},LA;function cW(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(cv)),cv}var BA;function Nk(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uW(),n=Ik(),r=Pk(),i=Ck(),o=cW();function a(m,v){return c(m,void 0,m,new Map,v)}function c(m,v,b,C=new Map,P=void 0){const N=P?.(m,v,b,C);if(N!==void 0)return N;if(i.isPrimitive(m))return m;if(C.has(m))return C.get(m);if(Array.isArray(m)){const R=new Array(m.length);C.set(m,R);for(let D=0;D<m.length;D++)R[D]=c(m[D],D,b,C,P);return Object.hasOwn(m,"index")&&(R.index=m.index),Object.hasOwn(m,"input")&&(R.input=m.input),R}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const R=new RegExp(m.source,m.flags);return R.lastIndex=m.lastIndex,R}if(m instanceof Map){const R=new Map;C.set(m,R);for(const[D,F]of m)R.set(D,c(F,D,b,C,P));return R}if(m instanceof Set){const R=new Set;C.set(m,R);for(const D of m)R.add(c(D,void 0,b,C,P));return R}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(o.isTypedArray(m)){const R=new(Object.getPrototypeOf(m)).constructor(m.length);C.set(m,R);for(let D=0;D<m.length;D++)R[D]=c(m[D],D,b,C,P);return R}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const R=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return C.set(m,R),f(R,m,b,C,P),R}if(typeof File<"u"&&m instanceof File){const R=new File([m],m.name,{type:m.type});return C.set(m,R),f(R,m,b,C,P),R}if(typeof Blob<"u"&&m instanceof Blob){const R=new Blob([m],{type:m.type});return C.set(m,R),f(R,m,b,C,P),R}if(m instanceof Error){const R=new m.constructor;return C.set(m,R),R.message=m.message,R.name=m.name,R.stack=m.stack,R.cause=m.cause,f(R,m,b,C,P),R}if(m instanceof Boolean){const R=new Boolean(m.valueOf());return C.set(m,R),f(R,m,b,C,P),R}if(m instanceof Number){const R=new Number(m.valueOf());return C.set(m,R),f(R,m,b,C,P),R}if(m instanceof String){const R=new String(m.valueOf());return C.set(m,R),f(R,m,b,C,P),R}if(typeof m=="object"&&d(m)){const R=Object.create(Object.getPrototypeOf(m));return C.set(m,R),f(R,m,b,C,P),R}return m}function f(m,v,b=m,C,P){const N=[...Object.keys(v),...t.getSymbols(v)];for(let R=0;R<N.length;R++){const D=N[R],F=Object.getOwnPropertyDescriptor(m,D);(F==null||F.writable)&&(m[D]=c(v[D],D,b,C,P))}}function d(m){switch(n.getTag(m)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=a,e.cloneDeepWithImpl=c,e.copyProperties=f})(sv)),sv}var FA;function dW(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nk();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(ov)),ov}var jA;function fW(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tk(),n=dW();function r(i){return i=n.cloneDeep(i),o=>t.isMatch(o,i)}e.matches=r})(Q1)),Q1}var dv={},fv={},hv={},UA;function hW(){return UA||(UA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nk(),n=Pk();function r(i,o){return t.cloneDeepWith(i,(a,c,f,d)=>{const m=o?.(a,c,f,d);if(m!==void 0)return m;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const v=new i.constructor(i?.valueOf());return t.copyProperties(v,i),v}case n.argumentsTag:{const v={};return t.copyProperties(v,i),v.length=i.length,v[Symbol.iterator]=i[Symbol.iterator],v}default:return}})}e.cloneDeepWith=r})(hv)),hv}var VA;function pW(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hW();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(fv)),fv}var pv={},mv={},zA;function Rk(){return zA||(zA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(mv)),mv}var gv={},$A;function mW(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ik();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(gv)),gv}var GA;function gW(){return GA||(GA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yk(),n=Rk(),r=mW(),i=Vw();function o(a,c){let f;if(Array.isArray(c)?f=c:typeof c=="string"&&t.isDeepKey(c)&&a?.[c]==null?f=i.toPath(c):f=[c],f.length===0)return!1;let d=a;for(let m=0;m<f.length;m++){const v=f[m];if((d==null||!Object.hasOwn(d,v))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(v)&&v<d.length))return!1;d=d[v]}return!0}e.has=o})(pv)),pv}var HA;function vW(){return HA||(HA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tk(),n=Uw(),r=pW(),i=zw(),o=gW();function a(c,f){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=n.toKey(c);break}}return f=r.cloneDeep(f),function(d){const m=i.get(d,c);return m===void 0?o.has(d,c):f===void 0?m===void 0:t.isMatch(m,f)}}e.matchesProperty=a})(dv)),dv}var qA;function yW(){return qA||(qA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_k(),n=aW(),r=fW(),i=vW();function o(a){if(a==null)return t.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}e.iteratee=o})(J1)),J1}var WA;function xW(){return WA||(WA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rW(),n=_k(),r=sW(),i=yW();function o(a,c=n.identity){return r.isArrayLikeObject(a)?t.uniqBy(Array.from(a),i.iteratee(c)):[]}e.uniqBy=o})(G1)),G1}var vv,KA;function wW(){return KA||(KA=1,vv=xW().uniqBy),vv}var bW=wW();const YA=so(bW);function Ok(e,t,n){return t===!0?YA(e,n):typeof t=="function"?YA(e,t):e}var yv={exports:{}},xv={},wv={exports:{}},bv={};var XA;function EW(){if(XA)return bv;XA=1;var e=Wu();function t(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,o=e.useLayoutEffect,a=e.useDebugValue;function c(v,b){var C=b(),P=r({inst:{value:C,getSnapshot:b}}),N=P[0].inst,R=P[1];return o(function(){N.value=C,N.getSnapshot=b,f(N)&&R({inst:N})},[v,C,b]),i(function(){return f(N)&&R({inst:N}),v(function(){f(N)&&R({inst:N})})},[v]),a(C),C}function f(v){var b=v.getSnapshot;v=v.value;try{var C=b();return!n(v,C)}catch{return!0}}function d(v,b){return b()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return bv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,bv}var JA;function _W(){return JA||(JA=1,wv.exports=EW()),wv.exports}var ZA;function SW(){if(ZA)return xv;ZA=1;var e=Wu(),t=_W();function n(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,o=e.useRef,a=e.useEffect,c=e.useMemo,f=e.useDebugValue;return xv.useSyncExternalStoreWithSelector=function(d,m,v,b,C){var P=o(null);if(P.current===null){var N={hasValue:!1,value:null};P.current=N}else N=P.current;P=c(function(){function D(q){if(!F){if(F=!0,L=q,q=b(q),C!==void 0&&N.hasValue){var W=N.value;if(C(W,q))return U=W}return U=q}if(W=U,r(L,q))return W;var Z=b(q);return C!==void 0&&C(W,Z)?(L=q,W):(L=q,U=Z)}var F=!1,L,U,G=v===void 0?null:v;return[function(){return D(m())},G===null?void 0:function(){return D(G())}]},[m,v,b,C]);var R=i(d,P[0],P[1]);return a(function(){N.hasValue=!0,N.value=R},[R]),f(R),R},xv}var QA;function CW(){return QA||(QA=1,yv.exports=SW()),yv.exports}var AW=CW(),Gw=k.createContext(null),TW=e=>e,Zt=()=>{var e=k.useContext(Gw);return e?e.store.dispatch:TW},g0=()=>{},IW=()=>g0,PW=(e,t)=>e===t;function Ge(e){var t=k.useContext(Gw);return AW.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:IW,t?t.store.getState:g0,t?t.store.getState:g0,t?e:g0,PW)}function NW(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function RW(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function OW(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var eT=e=>Array.isArray(e)?e:[e];function kW(e){const t=Array.isArray(e[0])?e[0]:e;return OW(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function MW(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var DW=class{constructor(e){this.value=e}deref(){return this.value}},LW=typeof WeakRef<"u"?WeakRef:DW,BW=0,tT=1;function Gh(){return{s:BW,v:void 0,o:null,p:null}}function kk(e,t={}){let n=Gh();const{resultEqualityCheck:r}=t;let i,o=0;function a(){let c=n;const{length:f}=arguments;for(let v=0,b=f;v<b;v++){const C=arguments[v];if(typeof C=="function"||typeof C=="object"&&C!==null){let P=c.o;P===null&&(c.o=P=new WeakMap);const N=P.get(C);N===void 0?(c=Gh(),P.set(C,c)):c=N}else{let P=c.p;P===null&&(c.p=P=new Map);const N=P.get(C);N===void 0?(c=Gh(),P.set(C,c)):c=N}}const d=c;let m;if(c.s===tT)m=c.v;else if(m=e.apply(null,arguments),o++,r){const v=i?.deref?.()??i;v!=null&&r(v,m)&&(m=v,o!==0&&o--),i=typeof m=="object"&&m!==null||typeof m=="function"?new LW(m):m}return d.s=tT,d.v=m,m}return a.clearCache=()=>{n=Gh(),a.resetResultsCount()},a.resultsCount=()=>o,a.resetResultsCount=()=>{o=0},a}function FW(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let o=0,a=0,c,f={},d=i.pop();typeof d=="object"&&(f=d,d=i.pop()),NW(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const m={...n,...f},{memoize:v,memoizeOptions:b=[],argsMemoize:C=kk,argsMemoizeOptions:P=[]}=m,N=eT(b),R=eT(P),D=kW(i),F=v(function(){return o++,d.apply(null,arguments)},...N),L=C(function(){a++;const G=MW(D,arguments);return c=F.apply(null,G),c},...R);return Object.assign(L,{resultFunc:d,memoizedResultFunc:F,dependencies:D,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>c,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:v,argsMemoize:C})};return Object.assign(r,{withTypes:()=>r}),r}var fe=FW(kk),jW=Object.assign((e,t=fe)=>{RW(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((a,c,f)=>(a[n[f]]=c,a),{}))},{withTypes:()=>jW}),Ev={},_v={},Sv={},nT;function UW(){return nT||(nT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const a=t(r),c=t(i);if(a===c&&a===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?c-a:a-c}return 0};e.compareValues=n})(Sv)),Sv}var Cv={},Av={},rT;function Mk(){return rT||(rT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Av)),Av}var iT;function VW(){return iT||(iT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mk(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||a!=null&&Object.hasOwn(a,o)}e.isKey=i})(Cv)),Cv}var oT;function zW(){return oT||(oT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UW(),n=VW(),r=Vw();function i(o,a,c,f){if(o==null)return[];c=f?void 0:c,Array.isArray(o)||(o=Object.values(o)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(C=>String(C));const d=(C,P)=>{let N=C;for(let R=0;R<P.length&&N!=null;++R)N=N[P[R]];return N},m=(C,P)=>P==null||C==null?P:typeof C=="object"&&"key"in C?Object.hasOwn(P,C.key)?P[C.key]:d(P,C.path):typeof C=="function"?C(P):Array.isArray(C)?d(P,C):typeof P=="object"?P[C]:P,v=a.map(C=>(Array.isArray(C)&&C.length===1&&(C=C[0]),C==null||typeof C=="function"||Array.isArray(C)||n.isKey(C)?C:{key:C,path:r.toPath(C)}));return o.map(C=>({original:C,criteria:v.map(P=>m(P,C))})).slice().sort((C,P)=>{for(let N=0;N<v.length;N++){const R=t.compareValues(C.criteria[N],P.criteria[N],c[N]);if(R!==0)return R}return 0}).map(C=>C.original)}e.orderBy=i})(_v)),_v}var Tv={},sT;function $W(){return sT||(sT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],o=Math.floor(r),a=(c,f)=>{for(let d=0;d<c.length;d++){const m=c[d];Array.isArray(m)&&f<o?a(m,f+1):i.push(m)}};return a(n,0),i}e.flatten=t})(Tv)),Tv}var Iv={},aT;function Dk(){return aT||(aT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rk(),n=$w(),r=Sk(),i=Ak();function o(a,c,f){return r.isObject(f)&&(typeof c=="number"&&n.isArrayLike(f)&&t.isIndex(c)&&c<f.length||typeof c=="string"&&c in f)?i.eq(f[c],a):!1}e.isIterateeCall=o})(Iv)),Iv}var lT;function GW(){return lT||(lT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zW(),n=$W(),r=Dk();function i(o,...a){const c=a.length;return c>1&&r.isIterateeCall(o,a[0],a[1])?a=[]:c>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),t.orderBy(o,n.flatten(a),["asc"])}e.sortBy=i})(Ev)),Ev}var Pv,uT;function HW(){return uT||(uT=1,Pv=GW().sortBy),Pv}var qW=HW();const em=so(qW);var Lk=e=>e.legend.settings,WW=e=>e.legend.size,KW=e=>e.legend.payload,YW=fe([KW,Lk],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?em(r,n):r});function XW(){return Ge(YW)}var Hh=1;function Bk(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=k.useState({height:0,left:0,top:0,width:0}),r=k.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),a={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(a.height-t.height)>Hh||Math.abs(a.left-t.left)>Hh||Math.abs(a.top-t.top)>Hh||Math.abs(a.width-t.width)>Hh)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Ir(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var JW=typeof Symbol=="function"&&Symbol.observable||"@@observable",cT=JW,Nv=()=>Math.random().toString(36).substring(7).split("").join("."),ZW={INIT:`@@redux/INIT${Nv()}`,REPLACE:`@@redux/REPLACE${Nv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Nv()}`},W0=ZW;function Hw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Fk(e,t,n){if(typeof e!="function")throw new Error(Ir(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ir(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ir(1));return n(Fk)(e,t)}let r=e,i=t,o=new Map,a=o,c=0,f=!1;function d(){a===o&&(a=new Map,o.forEach((R,D)=>{a.set(D,R)}))}function m(){if(f)throw new Error(Ir(3));return i}function v(R){if(typeof R!="function")throw new Error(Ir(4));if(f)throw new Error(Ir(5));let D=!0;d();const F=c++;return a.set(F,R),function(){if(D){if(f)throw new Error(Ir(6));D=!1,d(),a.delete(F),o=null}}}function b(R){if(!Hw(R))throw new Error(Ir(7));if(typeof R.type>"u")throw new Error(Ir(8));if(typeof R.type!="string")throw new Error(Ir(17));if(f)throw new Error(Ir(9));try{f=!0,i=r(i,R)}finally{f=!1}return(o=a).forEach(F=>{F()}),R}function C(R){if(typeof R!="function")throw new Error(Ir(10));r=R,b({type:W0.REPLACE})}function P(){const R=v;return{subscribe(D){if(typeof D!="object"||D===null)throw new Error(Ir(11));function F(){const U=D;U.next&&U.next(m())}return F(),{unsubscribe:R(F)}},[cT](){return this}}}return b({type:W0.INIT}),{dispatch:b,subscribe:v,getState:m,replaceReducer:C,[cT]:P}}function QW(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:W0.INIT})>"u")throw new Error(Ir(12));if(typeof n(void 0,{type:W0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ir(13))})}function jk(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const a=t[o];typeof e[a]=="function"&&(n[a]=e[a])}const r=Object.keys(n);let i;try{QW(n)}catch(o){i=o}return function(a={},c){if(i)throw i;let f=!1;const d={};for(let m=0;m<r.length;m++){const v=r[m],b=n[v],C=a[v],P=b(C,c);if(typeof P>"u")throw c&&c.type,new Error(Ir(14));d[v]=P,f=f||P!==C}return f=f||r.length!==Object.keys(a).length,f?d:a}}function K0(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function eK(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(Ir(15))};const a={getState:i.getState,dispatch:(f,...d)=>o(f,...d)},c=e.map(f=>f(a));return o=K0(...c)(i.dispatch),{...i,dispatch:o}}}function Uk(e){return Hw(e)&&"type"in e&&typeof e.type=="string"}var Vk=Symbol.for("immer-nothing"),dT=Symbol.for("immer-draftable"),Jr=Symbol.for("immer-state");function bo(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ni=Object,Uu=Ni.getPrototypeOf,Y0="constructor",tm="prototype",ox="configurable",X0="enumerable",v0="writable",Nd="value",Cs=e=>!!e&&!!e[Jr];function To(e){return e?zk(e)||rm(e)||!!e[dT]||!!e[Y0]?.[dT]||im(e)||om(e):!1}var tK=Ni[tm][Y0].toString(),fT=new WeakMap;function zk(e){if(!e||!qw(e))return!1;const t=Uu(e);if(t===null||t===Ni[tm])return!0;const n=Ni.hasOwnProperty.call(t,Y0)&&t[Y0];if(n===Object)return!0;if(!Eu(n))return!1;let r=fT.get(n);return r===void 0&&(r=Function.toString.call(n),fT.set(n,r)),r===tK}function nm(e,t,n=!0){Zd(e)===0?(n?Reflect.ownKeys(e):Ni.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function Zd(e){const t=e[Jr];return t?t.type_:rm(e)?1:im(e)?2:om(e)?3:0}var hT=(e,t,n=Zd(e))=>n===2?e.has(t):Ni[tm].hasOwnProperty.call(e,t),sx=(e,t,n=Zd(e))=>n===2?e.get(t):e[t],J0=(e,t,n,r=Zd(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function nK(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var rm=Array.isArray,im=e=>e instanceof Map,om=e=>e instanceof Set,qw=e=>typeof e=="object",Eu=e=>typeof e=="function",Rv=e=>typeof e=="boolean";function rK(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var ps=e=>e.copy_||e.base_,Ww=e=>e.modified_?e.copy_:e.base_;function ax(e,t){if(im(e))return new Map(e);if(om(e))return new Set(e);if(rm(e))return Array[tm].slice.call(e);const n=zk(e);if(t===!0||t==="class_only"&&!n){const r=Ni.getOwnPropertyDescriptors(e);delete r[Jr];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const a=i[o],c=r[a];c[v0]===!1&&(c[v0]=!0,c[ox]=!0),(c.get||c.set)&&(r[a]={[ox]:!0,[v0]:!0,[X0]:c[X0],[Nd]:e[a]})}return Ni.create(Uu(e),r)}else{const r=Uu(e);if(r!==null&&n)return{...e};const i=Ni.create(r);return Ni.assign(i,e)}}function Kw(e,t=!1){return sm(e)||Cs(e)||!To(e)||(Zd(e)>1&&Ni.defineProperties(e,{set:qh,add:qh,clear:qh,delete:qh}),Ni.freeze(e),t&&nm(e,(n,r)=>{Kw(r,!0)},!1)),e}function iK(){bo(2)}var qh={[Nd]:iK};function sm(e){return e===null||!qw(e)?!0:Ni.isFrozen(e)}var Z0="MapSet",lx="Patches",pT="ArrayMethods",$k={};function _l(e){const t=$k[e];return t||bo(0,e),t}var mT=e=>!!$k[e],Rd,Gk=()=>Rd,oK=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:mT(Z0)?_l(Z0):void 0,arrayMethodsPlugin_:mT(pT)?_l(pT):void 0});function gT(e,t){t&&(e.patchPlugin_=_l(lx),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ux(e){cx(e),e.drafts_.forEach(sK),e.drafts_=null}function cx(e){e===Rd&&(Rd=e.parent_)}var vT=e=>Rd=oK(Rd,e);function sK(e){const t=e[Jr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function yT(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Jr].modified_&&(ux(t),bo(4)),To(e)&&(e=xT(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[Jr].base_,e,t)}else e=xT(t,n);return aK(t,e,!0),ux(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Vk?e:void 0}function xT(e,t){if(sm(t))return t;const n=t[Jr];if(!n)return Q0(t,e.handledSet_,e);if(!am(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Wk(n,e)}return n.copy_}function aK(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Kw(t,n)}function Hk(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var am=(e,t)=>e.scope_===t,lK=[];function qk(e,t,n,r){const i=ps(e),o=e.type_;if(r!==void 0&&sx(i,r,o)===t){J0(i,r,n,o);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;nm(i,(f,d)=>{if(Cs(d)){const m=c.get(d)||[];m.push(f),c.set(d,m)}})}const a=e.draftLocations_.get(t)??lK;for(const c of a)J0(i,c,n,o)}function uK(e,t,n){e.callbacks_.push(function(i){const o=t;if(!o||!am(o,i))return;i.mapSetPlugin_?.fixSetContents(o);const a=Ww(o);qk(e,o.draft_??o,a,n),Wk(o,i)})}function Wk(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const i=r.getPath(e);i&&r.generatePatches_(e,i,t)}Hk(e)}}function cK(e,t,n){const{scope_:r}=e;if(Cs(n)){const i=n[Jr];am(i,r)&&i.callbacks_.push(function(){y0(e);const a=Ww(i);qk(e,n,a,t)})}else To(n)&&e.callbacks_.push(function(){const o=ps(e);e.type_===3?o.has(n)&&Q0(n,r.handledSet_,r):sx(o,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Q0(sx(e.copy_,t,e.type_),r.handledSet_,r)})}function Q0(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Cs(e)||t.has(e)||!To(e)||sm(e)||(t.add(e),nm(e,(r,i)=>{if(Cs(i)){const o=i[Jr];if(am(o,n)){const a=Ww(o);J0(e,r,a,e.type_),Hk(o)}}else To(i)&&Q0(i,t,n)})),e}function dK(e,t){const n=rm(e),r={type_:n?1:0,scope_:t?t.scope_:Gk(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,o=ep;n&&(i=[r],o=Od);const{revoke:a,proxy:c}=Proxy.revocable(i,o);return r.draft_=c,r.revoke_=a,[c,r]}var ep={get(e,t){if(t===Jr)return e;let n=e.scope_.arrayMethodsPlugin_;const r=e.type_===1&&typeof t=="string";if(r&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const i=ps(e);if(!hT(i,t,e.type_))return fK(e,i,t);const o=i[t];if(e.finalized_||!To(o)||r&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&rK(t))return o;if(o===Ov(e.base_,t)){y0(e);const a=e.type_===1?+t:t,c=fx(e.scope_,o,e,a);return e.copy_[a]=c}return o},has(e,t){return t in ps(e)},ownKeys(e){return Reflect.ownKeys(ps(e))},set(e,t,n){const r=Kk(ps(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Ov(ps(e),t),o=i?.[Jr];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(nK(n,i)&&(n!==void 0||hT(e.base_,t,e.type_)))return!0;y0(e),dx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),cK(e,t,n)),!0},deleteProperty(e,t){return y0(e),Ov(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),dx(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ps(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[v0]:!0,[ox]:e.type_!==1||t!=="length",[X0]:r[X0],[Nd]:n[t]}},defineProperty(){bo(11)},getPrototypeOf(e){return Uu(e.base_)},setPrototypeOf(){bo(12)}},Od={};for(let e in ep){let t=ep[e];Od[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}Od.deleteProperty=function(e,t){return Od.set.call(this,e,t,void 0)};Od.set=function(e,t,n){return ep.set.call(this,e[0],t,n,e[0])};function Ov(e,t){const n=e[Jr];return(n?ps(n):e)[t]}function fK(e,t,n){const r=Kk(t,n);return r?Nd in r?r[Nd]:r.get?.call(e.draft_):void 0}function Kk(e,t){if(!(t in e))return;let n=Uu(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Uu(n)}}function dx(e){e.modified_||(e.modified_=!0,e.parent_&&dx(e.parent_))}function y0(e){e.copy_||(e.assigned_=new Map,e.copy_=ax(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var hK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Eu(n)&&!Eu(r)){const a=r;r=n;const c=this;return function(d=a,...m){return c.produce(d,v=>r.call(this,v,...m))}}Eu(r)||bo(6),i!==void 0&&!Eu(i)&&bo(7);let o;if(To(n)){const a=vT(this),c=fx(a,n,void 0);let f=!0;try{o=r(c),f=!1}finally{f?ux(a):cx(a)}return gT(a,i),yT(o,a)}else if(!n||!qw(n)){if(o=r(n),o===void 0&&(o=n),o===Vk&&(o=void 0),this.autoFreeze_&&Kw(o,!0),i){const a=[],c=[];_l(lx).generateReplacementPatches_(n,o,{patches_:a,inversePatches_:c}),i(a,c)}return o}else bo(1,n)},this.produceWithPatches=(n,r)=>{if(Eu(n))return(c,...f)=>this.produceWithPatches(c,d=>n(d,...f));let i,o;return[this.produce(n,r,(c,f)=>{i=c,o=f}),i,o]},Rv(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Rv(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Rv(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){To(t)||bo(8),Cs(t)&&(t=Ao(t));const n=vT(this),r=fx(n,t,void 0);return r[Jr].isManual_=!0,cx(n),r}finishDraft(t,n){const r=t&&t[Jr];(!r||!r.isManual_)&&bo(9);const{scope_:i}=r;return gT(i,n),yT(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const o=n[r];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}r>-1&&(n=n.slice(r+1));const i=_l(lx).applyPatches_;return Cs(t)?i(t,n):this.produce(t,o=>i(o,n))}};function fx(e,t,n,r){const[i,o]=im(t)?_l(Z0).proxyMap_(t,n):om(t)?_l(Z0).proxySet_(t,n):dK(t,n);return(n?.scope_??Gk()).drafts_.push(i),o.callbacks_=n?.callbacks_??[],o.key_=r,n&&r!==void 0?uK(n,o,r):o.callbacks_.push(function(f){f.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:d}=f;o.modified_&&d&&d.generatePatches_(o,[],f)}),i}function Ao(e){return Cs(e)||bo(10,e),Yk(e)}function Yk(e){if(!To(e)||sm(e))return e;const t=e[Jr];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ax(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=ax(e,!0);return nm(n,(i,o)=>{J0(n,i,Yk(o))},r),t&&(t.finalized_=!1),n}var pK=new hK,Xk=pK.produce;function Jk(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var mK=Jk(),gK=Jk,vK=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?K0:K0.apply(null,arguments)};function io(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Ri(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Uk(r)&&r.type===e,n}var Zk=class xd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,xd.prototype)}static get[Symbol.species](){return xd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new xd(...t[0].concat(this)):new xd(...t.concat(this))}};function wT(e){return To(e)?Xk(e,()=>{}):e}function Wh(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function yK(e){return typeof e=="boolean"}var xK=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let a=new Zk;return n&&(yK(n)?a.push(mK):a.push(gK(n.extraArgument))),a},Qk="RTK_autoBatch",gn=()=>e=>({payload:e,meta:{[Qk]:!0}}),bT=e=>t=>{setTimeout(t,e)},eM=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,a=!1;const c=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:bT(10):e.type==="callback"?e.queueNotification:bT(e.timeout),d=()=>{a=!1,o&&(o=!1,c.forEach(m=>m()))};return Object.assign({},r,{subscribe(m){const v=()=>i&&m(),b=r.subscribe(v);return c.add(m),()=>{b(),c.delete(m)}},dispatch(m){try{return i=!m?.meta?.[Qk],o=!i,o&&(a||(a=!0,f(d))),r.dispatch(m)}finally{i=!0}}})},wK=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new Zk(e);return r&&i.push(eM(typeof r=="object"?r:void 0)),i};function bK(e){const t=xK(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:a=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(Hw(n))c=jk(n);else throw new Error(Ri(1));let f;typeof r=="function"?f=r(t):f=t();let d=K0;i&&(d=vK({trace:!1,...typeof i=="object"&&i}));const m=eK(...f),v=wK(m);let b=typeof a=="function"?a(v):v();const C=d(...b);return Fk(c,o,C)}function tM(e){const t={},n=[];let r;const i={addCase(o,a){const c=typeof o=="string"?o:o.type;if(!c)throw new Error(Ri(28));if(c in t)throw new Error(Ri(29));return t[c]=a,i},addAsyncThunk(o,a){return a.pending&&(t[o.pending.type]=a.pending),a.rejected&&(t[o.rejected.type]=a.rejected),a.fulfilled&&(t[o.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:o.settled,reducer:a.settled}),i},addMatcher(o,a){return n.push({matcher:o,reducer:a}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function EK(e){return typeof e=="function"}function _K(e,t){let[n,r,i]=tM(t),o;if(EK(e))o=()=>wT(e());else{const c=wT(e);o=()=>c}function a(c=o(),f){let d=[n[f.type],...r.filter(({matcher:m})=>m(f)).map(({reducer:m})=>m)];return d.filter(m=>!!m).length===0&&(d=[i]),d.reduce((m,v)=>{if(v)if(Cs(m)){const C=v(m,f);return C===void 0?m:C}else{if(To(m))return Xk(m,b=>v(b,f));{const b=v(m,f);if(b===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return m},c)}return a.getInitialState=o,a}var SK="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",CK=(e=21)=>{let t="",n=e;for(;n--;)t+=SK[Math.random()*64|0];return t},AK=Symbol.for("rtk-slice-createasyncthunk");function TK(e,t){return`${e}/${t}`}function IK({creators:e}={}){const t=e?.asyncThunk?.[AK];return function(r){const{name:i,reducerPath:o=i}=r;if(!i)throw new Error(Ri(11));const a=(typeof r.reducers=="function"?r.reducers(NK()):r.reducers)||{},c=Object.keys(a),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(L,U){const G=typeof L=="string"?L:L.type;if(!G)throw new Error(Ri(12));if(G in f.sliceCaseReducersByType)throw new Error(Ri(13));return f.sliceCaseReducersByType[G]=U,d},addMatcher(L,U){return f.sliceMatchers.push({matcher:L,reducer:U}),d},exposeAction(L,U){return f.actionCreators[L]=U,d},exposeCaseReducer(L,U){return f.sliceCaseReducersByName[L]=U,d}};c.forEach(L=>{const U=a[L],G={reducerName:L,type:TK(i,L),createNotation:typeof r.reducers=="function"};OK(U)?MK(G,U,d,t):RK(G,U,d)});function m(){const[L={},U=[],G=void 0]=typeof r.extraReducers=="function"?tM(r.extraReducers):[r.extraReducers],q={...L,...f.sliceCaseReducersByType};return _K(r.initialState,W=>{for(let Z in q)W.addCase(Z,q[Z]);for(let Z of f.sliceMatchers)W.addMatcher(Z.matcher,Z.reducer);for(let Z of U)W.addMatcher(Z.matcher,Z.reducer);G&&W.addDefaultCase(G)})}const v=L=>L,b=new Map,C=new WeakMap;let P;function N(L,U){return P||(P=m()),P(L,U)}function R(){return P||(P=m()),P.getInitialState()}function D(L,U=!1){function G(W){let Z=W[L];return typeof Z>"u"&&U&&(Z=Wh(C,G,R)),Z}function q(W=v){const Z=Wh(b,U,()=>new WeakMap);return Wh(Z,W,()=>{const X={};for(const[pe,ae]of Object.entries(r.selectors??{}))X[pe]=PK(ae,W,()=>Wh(C,W,R),U);return X})}return{reducerPath:L,getSelectors:q,get selectors(){return q(G)},selectSlice:G}}const F={name:i,reducer:N,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:R,...D(o),injectInto(L,{reducerPath:U,...G}={}){const q=U??o;return L.inject({reducerPath:q,reducer:N},G),{...F,...D(q,!0)}}};return F}}function PK(e,t,n,r){function i(o,...a){let c=t(o);return typeof c>"u"&&r&&(c=n()),e(c,...a)}return i.unwrapped=e,i}var hi=IK();function NK(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function RK({type:e,reducerName:t,createNotation:n},r,i){let o,a;if("reducer"in r){if(n&&!kK(r))throw new Error(Ri(17));o=r.reducer,a=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,a?io(e,a):io(e))}function OK(e){return e._reducerDefinitionType==="asyncThunk"}function kK(e){return e._reducerDefinitionType==="reducerWithPrepare"}function MK({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Ri(18));const{payloadCreator:o,fulfilled:a,pending:c,rejected:f,settled:d,options:m}=n,v=i(e,o,m);r.exposeAction(t,v),a&&r.addCase(v.fulfilled,a),c&&r.addCase(v.pending,c),f&&r.addCase(v.rejected,f),d&&r.addMatcher(v.settled,d),r.exposeCaseReducer(t,{fulfilled:a||Kh,pending:c||Kh,rejected:f||Kh,settled:d||Kh})}function Kh(){}var DK="task",nM="listener",rM="completed",Yw="cancelled",LK=`task-${Yw}`,BK=`task-${rM}`,hx=`${nM}-${Yw}`,FK=`${nM}-${rM}`,lm=class{constructor(e){this.code=e,this.message=`${DK} ${Yw} (reason: ${e})`}name="TaskAbortError";message},Xw=(e,t)=>{if(typeof e!="function")throw new TypeError(Ri(32))},tp=()=>{},iM=(e,t=tp)=>(e.catch(t),e),oM=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),vl=e=>{if(e.aborted)throw new lm(e.reason)};function sM(e,t){let n=tp;return new Promise((r,i)=>{const o=()=>i(new lm(e.reason));if(e.aborted){o();return}n=oM(e,o),t.finally(()=>n()).then(r,i)}).finally(()=>{n=tp})}var jK=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof lm?"cancelled":"rejected",error:n}}finally{t?.()}},np=e=>t=>iM(sM(e,t).then(n=>(vl(e),n))),aM=e=>{const t=np(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Mu}=Object,ET={},um="listenerMiddleware",UK=(e,t)=>{const n=r=>oM(e,()=>r.abort(e.reason));return(r,i)=>{Xw(r);const o=new AbortController;n(o);const a=jK(async()=>{vl(e),vl(o.signal);const c=await r({pause:np(o.signal),delay:aM(o.signal),signal:o.signal});return vl(o.signal),c},()=>o.abort(BK));return i?.autoJoin&&t.push(a.catch(tp)),{result:np(e)(a),cancel(){o.abort(LK)}}}},VK=(e,t)=>{const n=async(r,i)=>{vl(t);let o=()=>{};const c=[new Promise((f,d)=>{let m=e({predicate:r,effect:(v,b)=>{b.unsubscribe(),f([v,b.getState(),b.getOriginalState()])}});o=()=>{m(),d()}})];i!=null&&c.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await sM(t,Promise.race(c));return vl(t),f}finally{o()}};return(r,i)=>iM(n(r,i))},lM=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:o}=e;if(t)i=io(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Ri(21));return Xw(o),{predicate:i,type:t,effect:o}},uM=Mu(e=>{const{type:t,predicate:n,effect:r}=lM(e);return{id:CK(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ri(22))}}},{withTypes:()=>uM}),_T=(e,t)=>{const{type:n,effect:r,predicate:i}=lM(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},px=e=>{e.pending.forEach(t=>{t.abort(hx)})},zK=(e,t)=>()=>{for(const n of t.keys())px(n);e.clear()},ST=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},cM=Mu(io(`${um}/add`),{withTypes:()=>cM}),$K=io(`${um}/removeAll`),dM=Mu(io(`${um}/remove`),{withTypes:()=>dM}),GK=(...e)=>{console.error(`${um}/error`,...e)},Qd=(e={})=>{const t=new Map,n=new Map,r=C=>{const P=n.get(C)??0;n.set(C,P+1)},i=C=>{const P=n.get(C)??1;P===1?n.delete(C):n.set(C,P-1)},{extra:o,onError:a=GK}=e;Xw(a);const c=C=>(C.unsubscribe=()=>t.delete(C.id),t.set(C.id,C),P=>{C.unsubscribe(),P?.cancelActive&&px(C)}),f=C=>{const P=_T(t,C)??uM(C);return c(P)};Mu(f,{withTypes:()=>f});const d=C=>{const P=_T(t,C);return P&&(P.unsubscribe(),C.cancelActive&&px(P)),!!P};Mu(d,{withTypes:()=>d});const m=async(C,P,N,R)=>{const D=new AbortController,F=VK(f,D.signal),L=[];try{C.pending.add(D),r(C),await Promise.resolve(C.effect(P,Mu({},N,{getOriginalState:R,condition:(U,G)=>F(U,G).then(Boolean),take:F,delay:aM(D.signal),pause:np(D.signal),extra:o,signal:D.signal,fork:UK(D.signal,L),unsubscribe:C.unsubscribe,subscribe:()=>{t.set(C.id,C)},cancelActiveListeners:()=>{C.pending.forEach((U,G,q)=>{U!==D&&(U.abort(hx),q.delete(U))})},cancel:()=>{D.abort(hx),C.pending.delete(D)},throwIfCancelled:()=>{vl(D.signal)}})))}catch(U){U instanceof lm||ST(a,U,{raisedBy:"effect"})}finally{await Promise.all(L),D.abort(FK),i(C),C.pending.delete(D)}},v=zK(t,n);return{middleware:C=>P=>N=>{if(!Uk(N))return P(N);if(cM.match(N))return f(N.payload);if($K.match(N)){v();return}if(dM.match(N))return d(N.payload);let R=C.getState();const D=()=>{if(R===ET)throw new Error(Ri(23));return R};let F;try{if(F=P(N),t.size>0){const L=C.getState(),U=Array.from(t.values());for(const G of U){let q=!1;try{q=G.predicate(N,L,R)}catch(W){q=!1,ST(a,W,{raisedBy:"predicate"})}q&&m(G,N,C,D)}}}finally{R=ET}return F},startListening:f,stopListening:d,clearListeners:v}};function Ri(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var HK={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},fM=hi({name:"chartLayout",initialState:HK,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,o;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:qK,setLayout:WK,setChartSize:KK,setScale:YK}=fM.actions,XK=fM.reducer;function hM(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function Xt(e){return Number.isFinite(e)}function Ho(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function CT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CT(Object(n),!0).forEach(function(r){JK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JK(e,t,n){return(t=ZK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZK(e){var t=QK(e,"string");return typeof t=="symbol"?t:t+""}function QK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vt(e,t,n){return an(e)||an(t)?n:ro(t)?El(e,t,n):typeof t=="function"?t(e):n}var eY=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:o,verticalAlign:a,layout:c}=t;if((c==="vertical"||c==="horizontal"&&a==="middle")&&o!=="center"&&Je(e[o]))return Tu(Tu({},e),{},{[o]:e[o]+(r||0)});if((c==="horizontal"||c==="vertical"&&o==="center")&&a!=="middle"&&Je(e[a]))return Tu(Tu({},e),{},{[a]:e[a]+(i||0)})}return e},Ol=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",pM=(e,t,n,r)=>{if(r)return e.map(c=>c.coordinate);var i,o,a=e.map(c=>(c.coordinate===t&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate));return i||a.push(t),o||a.push(n),a},mM=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:o,scale:a,realScaleType:c,isCategorical:f,categoricalDomain:d,tickCount:m,ticks:v,niceTicks:b,axisType:C}=e;if(!a)return null;var P=c==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,N=i==="category"&&a.bandwidth?a.bandwidth()/P:0;if(N=C==="angleAxis"&&o&&o.length>=2?vr(o[0]-o[1])*2*N:N,v||b){var R=(v||b||[]).map((D,F)=>{var L=r?r.indexOf(D):D;return{coordinate:a(L)+N,value:D,offset:N,index:F}});return R.filter(D=>!Mi(D.coordinate))}return f&&d?d.map((D,F)=>({coordinate:a(D)+N,value:D,index:F,offset:N})):a.ticks&&m!=null?a.ticks(m).map((D,F)=>({coordinate:a(D)+N,value:D,offset:N,index:F})):a.domain().map((D,F)=>({coordinate:a(D)+N,value:r?r[D]:D,index:F,offset:N}))},AT=1e-4,tY=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-AT,o=Math.max(r[0],r[1])+AT,a=e(t[0]),c=e(t[n-1]);(a<i||a>o||c<i||c>o)&&e.domain([t[0],t[n-1]])}},nY=(e,t)=>{if(!t||t.length!==2||!Je(t[0])||!Je(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Je(e[0])||e[0]<n)&&(i[0]=n),(!Je(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},rY=e=>{var t,n=e.length;if(!(n<=0)){var r=(t=e[0])===null||t===void 0?void 0:t.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var o=0,a=0,c=0;c<n;++c){var f=e[c],d=f?.[i];if(d!=null){var m=d[1],v=d[0],b=Mi(m)?v:m;b>=0?(d[0]=o,d[1]=o+b,o=m):(d[0]=a,d[1]=a+b,a=m)}}}},iY=e=>{var t,n=e.length;if(!(n<=0)){var r=(t=e[0])===null||t===void 0?void 0:t.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var o=0,a=0;a<n;++a){var c=e[a],f=c?.[i];if(f!=null){var d=Mi(f[1])?f[0]:f[1];d>=0?(f[0]=o,f[1]=o+d,o=f[1]):(f[0]=0,f[1]=0)}}}},oY={sign:rY,expand:bq,none:bl,silhouette:Eq,wiggle:_q,positive:iY},sY=(e,t,n)=>{var r,i=(r=oY[n])!==null&&r!==void 0?r:bl,o=wq().keys(t).value((c,f)=>Number(Vt(c,f,0))).order(rx).offset(i),a=o(e);return a.forEach((c,f)=>{c.forEach((d,m)=>{var v=Vt(e[m],t[f],0);Array.isArray(v)&&v.length===2&&Je(v[0])&&Je(v[1])&&(d[0]=v[0],d[1]=v[1])})}),a};function aY(e){return e==null?void 0:String(e)}function TT(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:o,dataKey:a}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!an(i[t.dataKey])){var c=wk(n,"value",i[t.dataKey]);if(c)return c.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var f=Vt(i,an(a)?t.dataKey:a);return an(f)?null:t.scale(f)}var IT=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:o,index:a}=e;if(t.type==="category")return n[a]?n[a].coordinate+r:null;var c=Vt(o,t.dataKey,t.scale.domain()[a]);return an(c)?null:t.scale(c)-i/2+r},lY=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},uY=e=>{var t=e.flat(2).filter(Je);return[Math.min(...t),Math.max(...t)]},cY=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],dY=(e,t,n)=>{if(e!=null)return cY(Object.keys(e).reduce((r,i)=>{var o=e[i];if(!o)return r;var{stackedData:a}=o,c=a.reduce((f,d)=>{var m=hM(d,t,n),v=uY(m);return!Xt(v[0])||!Xt(v[1])?f:[Math.min(f[0],v[0]),Math.max(f[1],v[1])]},[1/0,-1/0]);return[Math.min(c[0],r[0]),Math.max(c[1],r[1])]},[1/0,-1/0]))},PT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,NT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rp=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=em(t,m=>m.coordinate),o=1/0,a=1,c=i.length;a<c;a++){var f=i[a],d=i[a-1];o=Math.min((f?.coordinate||0)-(d?.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function RT(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:o}=e;return Tu(Tu({},t),{},{dataKey:n,payload:r,value:i,name:o})}function rc(e,t){if(e)return String(e);if(typeof t=="string")return t}var fY=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},hY=(e,t)=>t==="centric"?e.angle:e.radius,Ms=e=>e.layout.width,Ds=e=>e.layout.height,pY=e=>e.layout.scale,gM=e=>e.layout.margin,cm=fe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),dm=fe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Jw="data-recharts-item-index",Zw="data-recharts-item-id",ef=60;function OT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OT(Object(n),!0).forEach(function(r){mY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mY(e,t,n){return(t=gY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gY(e){var t=vY(e,"string");return typeof t=="symbol"?t:t+""}function vY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yY=e=>e.brush.height;function xY(e){var t=dm(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ef;return n+i}return n},0)}function wY(e){var t=dm(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ef;return n+i}return n},0)}function bY(e){var t=cm(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function EY(e){var t=cm(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var ir=fe([Ms,Ds,gM,yY,xY,wY,bY,EY,Lk,WW],(e,t,n,r,i,o,a,c,f,d)=>{var m={left:(n.left||0)+i,right:(n.right||0)+o},v={top:(n.top||0)+a,bottom:(n.bottom||0)+c},b=Yh(Yh({},v),m),C=b.bottom;b.bottom+=r,b=eY(b,f,d);var P=e-b.left-b.right,N=t-b.top-b.bottom;return Yh(Yh({brushBottom:C},b),{},{width:Math.max(P,0),height:Math.max(N,0)})}),_Y=fe(ir,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Qw=fe(Ms,Ds,(e,t)=>({x:0,y:0,width:e,height:t})),SY=k.createContext(null),Nr=()=>k.useContext(SY)!=null,fm=e=>e.brush,hm=fe([fm,ir,gM],(e,t,n)=>({height:e.height,x:Je(e.x)?e.x:t.left,y:Je(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Je(e.width)?e.width:t.width})),kv={},Mv={},Dv={},kT;function CY(){return kT||(kT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:o}={}){let a,c=null;const f=o!=null&&o.includes("leading"),d=o==null||o.includes("trailing"),m=()=>{c!==null&&(n.apply(a,c),a=void 0,c=null)},v=()=>{d&&m(),N()};let b=null;const C=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,v()},r)},P=()=>{b!==null&&(clearTimeout(b),b=null)},N=()=>{P(),a=void 0,c=null},R=()=>{m()},D=function(...F){if(i?.aborted)return;a=this,c=F;const L=b==null;C(),f&&L&&m()};return D.schedule=C,D.cancel=N,D.flush=R,i?.addEventListener("abort",N,{once:!0}),D}e.debounce=t})(Dv)),Dv}var MT;function AY(){return MT||(MT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CY();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:a=!1,trailing:c=!0,maxWait:f}=o,d=Array(2);a&&(d[0]="leading"),c&&(d[1]="trailing");let m,v=null;const b=t.debounce(function(...N){m=r.apply(this,N),v=null},i,{edges:d}),C=function(...N){return f!=null&&(v===null&&(v=Date.now()),Date.now()-v>=f)?(m=r.apply(this,N),v=Date.now(),b.cancel(),b.schedule(),m):(b.apply(this,N),m)},P=()=>(b.flush(),m);return C.cancel=b.cancel,C.flush=P,C}e.debounce=n})(Mv)),Mv}var DT;function TY(){return DT||(DT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AY();function n(r,i=0,o={}){const{leading:a=!0,trailing:c=!0}=o;return t.debounce(r,i,{leading:a,maxWait:i,trailing:c})}e.throttle=n})(kv)),kv}var Lv,LT;function IY(){return LT||(LT=1,Lv=TY().throttle),Lv}var PY=IY();const NY=so(PY);var ip=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(n.replace(/%s/g,()=>i[a++]))}},vM=(e,t,n)=>{var{width:r="100%",height:i="100%",aspect:o,maxHeight:a}=n,c=Ss(r)?e:Number(r),f=Ss(i)?t:Number(i);return o&&o>0&&(c?f=c/o:f&&(c=f*o),a&&f!=null&&f>a&&(f=a)),{calculatedWidth:c,calculatedHeight:f}},RY={width:0,height:0,overflow:"visible"},OY={width:0,overflowX:"visible"},kY={height:0,overflowY:"visible"},MY={},DY=e=>{var{width:t,height:n}=e,r=Ss(t),i=Ss(n);return r&&i?RY:r?OY:i?kY:MY};function LY(e){var{width:t,height:n,aspect:r}=e,i=t,o=n;return i===void 0&&o===void 0?(i="100%",o="100%"):i===void 0?i=r&&r>0?void 0:"100%":o===void 0&&(o=r&&r>0?void 0:"100%"),{width:i,height:o}}function mx(){return mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mx.apply(null,arguments)}function BT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function FT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BT(Object(n),!0).forEach(function(r){BY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BY(e,t,n){return(t=FY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FY(e){var t=jY(e,"string");return typeof t=="symbol"?t:t+""}function jY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yM=k.createContext({width:-1,height:-1});function UY(e){return Ho(e.width)&&Ho(e.height)}function xM(e){var{children:t,width:n,height:r}=e,i=k.useMemo(()=>({width:n,height:r}),[n,r]);return UY(i)?k.createElement(yM.Provider,{value:i},t):null}var eb=()=>k.useContext(yM),VY=k.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:o,minWidth:a=0,minHeight:c,maxHeight:f,children:d,debounce:m=0,id:v,className:b,onResize:C,style:P={}}=e,N=k.useRef(null),R=k.useRef();R.current=C,k.useImperativeHandle(t,()=>N.current);var[D,F]=k.useState({containerWidth:r.width,containerHeight:r.height}),L=k.useCallback((Z,X)=>{F(pe=>{var ae=Math.round(Z),le=Math.round(X);return pe.containerWidth===ae&&pe.containerHeight===le?pe:{containerWidth:ae,containerHeight:le}})},[]);k.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return Jd;var Z=le=>{var be,{width:me,height:te}=le[0].contentRect;L(me,te),(be=R.current)===null||be===void 0||be.call(R,me,te)};m>0&&(Z=NY(Z,m,{trailing:!0,leading:!1}));var X=new ResizeObserver(Z),{width:pe,height:ae}=N.current.getBoundingClientRect();return L(pe,ae),X.observe(N.current),()=>{X.disconnect()}},[L,m]);var{containerWidth:U,containerHeight:G}=D;ip(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:q,calculatedHeight:W}=vM(U,G,{width:i,height:o,aspect:n,maxHeight:f});return ip(q!=null&&q>0||W!=null&&W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,q,W,i,o,a,c,n),k.createElement("div",{id:v?"".concat(v):void 0,className:Ft("recharts-responsive-container",b),style:FT(FT({},P),{},{width:i,height:o,minWidth:a,minHeight:c,maxHeight:f}),ref:N},k.createElement("div",{style:DY({width:i,height:o})},k.createElement(xM,{width:q,height:W},d)))}),Bv=k.forwardRef((e,t)=>{var n=eb();if(Ho(n.width)&&Ho(n.height))return e.children;var{width:r,height:i}=LY({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:a}=vM(void 0,void 0,{width:r,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return Je(o)&&Je(a)?k.createElement(xM,{width:o,height:a},e.children):k.createElement(VY,mx({},e,{width:r,height:i,ref:t}))});function wM(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var ic=()=>{var e,t=Nr(),n=Ge(_Y),r=Ge(hm),i=(e=Ge(fm))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},zY={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},bM=()=>{var e;return(e=Ge(ir))!==null&&e!==void 0?e:zY},tb=()=>Ge(Ms),nb=()=>Ge(Ds),$Y=()=>Ge(e=>e.layout.margin),Dt=e=>e.layout.layoutType,tf=()=>Ge(Dt),GY=()=>{var e=tf();return e!==void 0},pm=e=>{var t=Zt(),n=Nr(),{width:r,height:i}=e,o=eb(),a=r,c=i;return o&&(a=o.width>0?o.width:r,c=o.height>0?o.height:i),k.useEffect(()=>{!n&&Ho(a)&&Ho(c)&&t(KK({width:a,height:c}))},[t,n,a,c]),null},EM=Symbol.for("immer-nothing"),jT=Symbol.for("immer-draftable"),Di=Symbol.for("immer-state");function Eo(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var kd=Object.getPrototypeOf;function Vu(e){return!!e&&!!e[Di]}function Sl(e){return e?_M(e)||Array.isArray(e)||!!e[jT]||!!e.constructor?.[jT]||nf(e)||gm(e):!1}var HY=Object.prototype.constructor.toString(),UT=new WeakMap;function _M(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=UT.get(n);return r===void 0&&(r=Function.toString.call(n),UT.set(n,r)),r===HY}function op(e,t,n=!0){mm(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function mm(e){const t=e[Di];return t?t.type_:Array.isArray(e)?1:nf(e)?2:gm(e)?3:0}function gx(e,t){return mm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function SM(e,t,n){const r=mm(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function qY(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function nf(e){return e instanceof Map}function gm(e){return e instanceof Set}function al(e){return e.copy_||e.base_}function vx(e,t){if(nf(e))return new Map(e);if(gm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=_M(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Di];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const a=i[o],c=r[a];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[a]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[a]})}return Object.create(kd(e),r)}else{const r=kd(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function rb(e,t=!1){return vm(e)||Vu(e)||!Sl(e)||(mm(e)>1&&Object.defineProperties(e,{set:Xh,add:Xh,clear:Xh,delete:Xh}),Object.freeze(e),t&&Object.values(e).forEach(n=>rb(n,!0))),e}function WY(){Eo(2)}var Xh={value:WY};function vm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var KY={};function Cl(e){const t=KY[e];return t||Eo(0,e),t}var Md;function CM(){return Md}function YY(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function VT(e,t){t&&(Cl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function yx(e){xx(e),e.drafts_.forEach(XY),e.drafts_=null}function xx(e){e===Md&&(Md=e.parent_)}function zT(e){return Md=YY(Md,e)}function XY(e){const t=e[Di];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $T(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Di].modified_&&(yx(t),Eo(4)),Sl(e)&&(e=sp(t,e),t.parent_||ap(t,e)),t.patches_&&Cl("Patches").generateReplacementPatches_(n[Di].base_,e,t.patches_,t.inversePatches_)):e=sp(t,n,[]),yx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==EM?e:void 0}function sp(e,t,n){if(vm(t))return t;const r=e.immer_.shouldUseStrictIteration(),i=t[Di];if(!i)return op(t,(o,a)=>GT(e,i,t,o,a,n),r),t;if(i.scope_!==e)return t;if(!i.modified_)return ap(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let a=o,c=!1;i.type_===3&&(a=new Set(o),o.clear(),c=!0),op(a,(f,d)=>GT(e,i,o,f,d,n,c),r),ap(e,o,!1),n&&e.patches_&&Cl("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function GT(e,t,n,r,i,o,a){if(i==null||typeof i!="object"&&!a)return;const c=vm(i);if(!(c&&!a)){if(Vu(i)){const f=o&&t&&t.type_!==3&&!gx(t.assigned_,r)?o.concat(r):void 0,d=sp(e,i,f);if(SM(n,r,d),Vu(d))e.canAutoFreeze_=!1;else return}else a&&n.add(i);if(Sl(i)&&!c){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===i&&c)return;sp(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(nf(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&ap(e,i)}}}function ap(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rb(t,n)}function JY(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:CM(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=ib;n&&(i=[r],o=Dd);const{revoke:a,proxy:c}=Proxy.revocable(i,o);return r.draft_=c,r.revoke_=a,c}var ib={get(e,t){if(t===Di)return e;const n=al(e);if(!gx(n,t))return ZY(e,n,t);const r=n[t];return e.finalized_||!Sl(r)?r:r===Fv(e.base_,t)?(jv(e),e.copy_[t]=bx(r,e)):r},has(e,t){return t in al(e)},ownKeys(e){return Reflect.ownKeys(al(e))},set(e,t,n){const r=AM(al(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Fv(al(e),t),o=i?.[Di];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(qY(n,i)&&(n!==void 0||gx(e.base_,t)))return!0;jv(e),wx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Fv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,jv(e),wx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=al(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Eo(11)},getPrototypeOf(e){return kd(e.base_)},setPrototypeOf(){Eo(12)}},Dd={};op(ib,(e,t)=>{Dd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Dd.deleteProperty=function(e,t){return Dd.set.call(this,e,t,void 0)};Dd.set=function(e,t,n){return ib.set.call(this,e[0],t,n,e[0])};function Fv(e,t){const n=e[Di];return(n?al(n):e)[t]}function ZY(e,t,n){const r=AM(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function AM(e,t){if(!(t in e))return;let n=kd(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=kd(n)}}function wx(e){e.modified_||(e.modified_=!0,e.parent_&&wx(e.parent_))}function jv(e){e.copy_||(e.copy_=vx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var QY=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const a=this;return function(f=o,...d){return a.produce(f,m=>n.call(this,m,...d))}}typeof n!="function"&&Eo(6),r!==void 0&&typeof r!="function"&&Eo(7);let i;if(Sl(t)){const o=zT(this),a=bx(t,void 0);let c=!0;try{i=n(a),c=!1}finally{c?yx(o):xx(o)}return VT(o,r),$T(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===EM&&(i=void 0),this.autoFreeze_&&rb(i,!0),r){const o=[],a=[];Cl("Patches").generateReplacementPatches_(t,i,o,a),r(o,a)}return i}else Eo(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(a,...c)=>this.produceWithPatches(a,f=>t(f,...c));let r,i;return[this.produce(t,n,(a,c)=>{r=a,i=c}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Sl(e)||Eo(8),Vu(e)&&(e=eX(e));const t=zT(this),n=bx(e,void 0);return n[Di].isManual_=!0,xx(t),n}finishDraft(e,t){const n=e&&e[Di];(!n||!n.isManual_)&&Eo(9);const{scope_:r}=n;return VT(r,t),$T(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Cl("Patches").applyPatches_;return Vu(e)?r(e,t):this.produce(e,i=>r(i,t))}};function bx(e,t){const n=nf(e)?Cl("MapSet").proxyMap_(e,t):gm(e)?Cl("MapSet").proxySet_(e,t):JY(e,t);return(t?t.scope_:CM()).drafts_.push(n),n}function eX(e){return Vu(e)||Eo(10,e),TM(e)}function TM(e){if(!Sl(e)||vm(e))return e;const t=e[Di];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=vx(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=vx(e,!0);return op(n,(i,o)=>{SM(n,i,TM(o))},r),t&&(t.finalized_=!1),n}var tX=new QY;tX.produce;var nX={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},IM=hi({name:"legend",initialState:nX,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:gn()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ao(e).payload.indexOf(n);i>-1&&(e.payload[i]=r)},prepare:gn()},removeLegendPayload:{reducer(e,t){var n=Ao(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:gn()}}}),{setLegendSize:HT,setLegendSettings:rX,addLegendPayload:PM,replaceLegendPayload:NM,removeLegendPayload:RM}=IM.actions,iX=IM.reducer,oX=["contextPayload"];function Ex(){return Ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ex.apply(null,arguments)}function qT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qT(Object(n),!0).forEach(function(r){sX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sX(e,t,n){return(t=aX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aX(e){var t=lX(e,"string");return typeof t=="symbol"?t:t+""}function lX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uX(e,t){if(e==null)return{};var n,r,i=cX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function dX(e){return e.value}function fX(e){var{contextPayload:t}=e,n=uX(e,oX),r=Ok(t,e.payloadUniqBy,dX),i=zu(zu({},n),{},{payload:r});return k.isValidElement(e.content)?k.cloneElement(e.content,i):typeof e.content=="function"?k.createElement(e.content,i):k.createElement(nW,i)}function hX(e,t,n,r,i,o){var{layout:a,align:c,verticalAlign:f}=t,d,m;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(c==="center"&&a==="vertical"?d={left:((r||0)-o.width)/2}:d=c==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?m={top:((i||0)-o.height)/2}:m=f==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),zu(zu({},d),m)}function pX(e){var t=Zt();return k.useEffect(()=>{t(rX(e))},[t,e]),null}function mX(e){var t=Zt();return k.useEffect(()=>(t(HT(e)),()=>{t(HT({width:0,height:0}))}),[t,e]),null}function gX(e,t,n,r){return e==="vertical"&&Je(t)?{height:t}:e==="horizontal"?{width:n||r}:null}var vX={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function OM(e){var t=Vn(e,vX),n=XW(),r=GH(),i=$Y(),{width:o,height:a,wrapperStyle:c,portal:f}=t,[d,m]=Bk([n]),v=tb(),b=nb();if(v==null||b==null)return null;var C=v-(i?.left||0)-(i?.right||0),P=gX(t.layout,a,o,C),N=f?c:zu(zu({position:"absolute",width:P?.width||o||"auto",height:P?.height||a||"auto"},hX(c,t,i,v,b,d)),c),R=f??r;if(R==null||n==null)return null;var D=k.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:m},k.createElement(pX,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!f&&k.createElement(mX,{width:d.width,height:d.height}),k.createElement(fX,Ex({},t,P,{margin:i,chartWidth:v,chartHeight:b,contextPayload:n})));return cw.createPortal(D,R)}OM.displayName="Legend";function _x(){return _x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_x.apply(null,arguments)}function WT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Uv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WT(Object(n),!0).forEach(function(r){yX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yX(e,t,n){return(t=xX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xX(e){var t=wX(e,"string");return typeof t=="symbol"?t:t+""}function wX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bX(e){return Array.isArray(e)&&ro(e[0])&&ro(e[1])?e.join(" ~ "):e}var EX=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:a,itemSorter:c,wrapperClassName:f,labelClassName:d,label:m,labelFormatter:v,accessibilityLayer:b=!1}=e,C=()=>{if(o&&o.length){var G={padding:0,margin:0},q=(c?em(o,c):o).map((W,Z)=>{if(W.type==="none")return null;var X=W.formatter||a||bX,{value:pe,name:ae}=W,le=pe,be=ae;if(X){var me=X(pe,ae,W,Z,o);if(Array.isArray(me))[le,be]=me;else if(me!=null)le=me;else return null}var te=Uv({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},r);return k.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Z),style:te},ro(be)?k.createElement("span",{className:"recharts-tooltip-item-name"},be):null,ro(be)?k.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,k.createElement("span",{className:"recharts-tooltip-item-value"},le),k.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return k.createElement("ul",{className:"recharts-tooltip-item-list",style:G},q)}return null},P=Uv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),N=Uv({margin:0},i),R=!an(m),D=R?m:"",F=Ft("recharts-default-tooltip",f),L=Ft("recharts-tooltip-label",d);R&&v&&o!==void 0&&o!==null&&(D=v(m,o));var U=b?{role:"status","aria-live":"assertive"}:{};return k.createElement("div",_x({className:F,style:P},U),k.createElement("p",{className:L,style:N},k.isValidElement(D)?D:"".concat(D)),C())},sd="recharts-tooltip-wrapper",_X={visibility:"hidden"};function SX(e){var{coordinate:t,translateX:n,translateY:r}=e;return Ft(sd,{["".concat(sd,"-right")]:Je(n)&&t&&Je(t.x)&&n>=t.x,["".concat(sd,"-left")]:Je(n)&&t&&Je(t.x)&&n<t.x,["".concat(sd,"-bottom")]:Je(r)&&t&&Je(t.y)&&r>=t.y,["".concat(sd,"-top")]:Je(r)&&t&&Je(t.y)&&r<t.y})}function KT(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:a,tooltipDimension:c,viewBox:f,viewBoxDimension:d}=e;if(o&&Je(o[r]))return o[r];var m=n[r]-c-(i>0?i:0),v=n[r]+i;if(t[r])return a[r]?m:v;var b=f[r];if(b==null)return 0;if(a[r]){var C=m,P=b;return C<P?Math.max(v,b):Math.max(m,b)}if(d==null)return 0;var N=v+c,R=b+d;return N>R?Math.max(m,b):Math.max(v,b)}function CX(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function AX(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:a,useTranslate3d:c,viewBox:f}=e,d,m,v;return a.height>0&&a.width>0&&n?(m=KT({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:f,viewBoxDimension:f.width}),v=KT({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:f,viewBoxDimension:f.height}),d=CX({translateX:m,translateY:v,useTranslate3d:c})):d=_X,{cssProperties:d,cssClasses:SX({translateX:m,translateY:v,coordinate:n})}}function YT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YT(Object(n),!0).forEach(function(r){Sx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sx(e,t,n){return(t=TX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TX(e){var t=IX(e,"string");return typeof t=="symbol"?t:t+""}function IX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class PX extends k.PureComponent{constructor(){super(...arguments),Sx(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Sx(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:a,hasPayload:c,isAnimationActive:f,offset:d,position:m,reverseDirection:v,useTranslate3d:b,viewBox:C,wrapperStyle:P,lastBoundingBox:N,innerRef:R,hasPortalFromProps:D}=this.props,{cssClasses:F,cssProperties:L}=AX({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:d,position:m,reverseDirection:v,tooltipBox:{height:N.height,width:N.width},useTranslate3d:b,viewBox:C}),U=D?{}:Jh(Jh({transition:f&&t?"transform ".concat(r,"ms ").concat(i):void 0},L),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&c?"visible":"hidden",position:"absolute",top:0,left:0}),G=Jh(Jh({},U),{},{visibility:!this.state.dismissed&&t&&c?"visible":"hidden"},P);return k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:F,style:G,ref:R},o)}}var kM=()=>{var e;return(e=Ge(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Cx(){return Cx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cx.apply(null,arguments)}function XT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function JT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XT(Object(n),!0).forEach(function(r){NX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function NX(e,t,n){return(t=RX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RX(e){var t=OX(e,"string");return typeof t=="symbol"?t:t+""}function OX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZT={curveBasisClosed:uq,curveBasisOpen:cq,curveBasis:lq,curveBumpX:KH,curveBumpY:YH,curveLinearClosed:dq,curveLinear:Jp,curveMonotoneX:fq,curveMonotoneY:hq,curveNatural:pq,curveStep:mq,curveStepAfter:vq,curveStepBefore:gq},lp=e=>Xt(e.x)&&Xt(e.y),QT=e=>e.base!=null&&lp(e.base)&&lp(e),ad=e=>e.x,ld=e=>e.y,kX=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Xd(e));return(n==="curveMonotone"||n==="curveBump")&&t?ZT["".concat(n).concat(t==="vertical"?"Y":"X")]:ZT[n]||Jp},MX=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=e,a=kX(t,i),c=o?n.filter(lp):n,f;if(Array.isArray(r)){var d=n.map((C,P)=>JT(JT({},C),{},{base:r[P]}));i==="vertical"?f=$h().y(ld).x1(ad).x0(C=>C.base.x):f=$h().x(ad).y1(ld).y0(C=>C.base.y);var m=f.defined(QT).curve(a),v=o?d.filter(QT):d;return m(v)}i==="vertical"&&Je(r)?f=$h().y(ld).x1(ad).x0(r):Je(r)?f=$h().x(ad).y1(ld).y0(r):f=ak().x(ad).y(ld);var b=f.defined(lp).curve(a);return b(c)},ym=e=>{var{className:t,points:n,path:r,pathRef:i}=e,o=tf();if((!n||!n.length)&&!r)return null;var a={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},c=n&&n.length?MX(a):r;return k.createElement("path",Cx({},Oi(e),zq(e),{className:Ft("recharts-curve",t),d:c===null?void 0:c,ref:i}))},DX=["x","y","top","left","width","height","className"];function Ax(){return Ax=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ax.apply(null,arguments)}function eI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function LX(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eI(Object(n),!0).forEach(function(r){BX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BX(e,t,n){return(t=FX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FX(e){var t=jX(e,"string");return typeof t=="symbol"?t:t+""}function jX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UX(e,t){if(e==null)return{};var n,r,i=VX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function VX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var zX=(e,t,n,r,i,o)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n),$X=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:o=0,height:a=0,className:c}=e,f=UX(e,DX),d=LX({x:t,y:n,top:r,left:i,width:o,height:a},f);return!Je(t)||!Je(n)||!Je(o)||!Je(a)||!Je(r)||!Je(i)?null:k.createElement("path",Ax({},ki(d),{className:Ft("recharts-cross",c),d:zX(t,n,o,a,r,i)}))};function GX(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function tI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tI(Object(n),!0).forEach(function(r){HX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HX(e,t,n){return(t=qX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qX(e){var t=WX(e,"string");return typeof t=="symbol"?t:t+""}function WX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KX=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),MM=(e,t,n)=>e.map(r=>"".concat(KX(r)," ").concat(t,"ms ").concat(n)).join(","),YX=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Ld=(e,t)=>Object.keys(t).reduce((n,r)=>nI(nI({},n),{},{[r]:e(r,t[r])}),{});function rI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rI(Object(n),!0).forEach(function(r){XX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XX(e,t,n){return(t=JX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JX(e){var t=ZX(e,"string");return typeof t=="symbol"?t:t+""}function ZX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var up=(e,t,n)=>e+(t-e)*n,Tx=e=>{var{from:t,to:n}=e;return t!==n},DM=(e,t,n)=>{var r=Ld((i,o)=>{if(Tx(o)){var[a,c]=e(o.from,o.to,o.velocity);return rr(rr({},o),{},{from:a,velocity:c})}return o},t);return n<1?Ld((i,o)=>Tx(o)&&r[i]!=null?rr(rr({},o),{},{velocity:up(o.velocity,r[i].velocity,n),from:up(o.from,r[i].from,n)}):o,t):DM(e,r,n-1)};function QX(e,t,n,r,i,o){var a,c=r.reduce((b,C)=>rr(rr({},b),{},{[C]:{from:e[C],velocity:0,to:t[C]}}),{}),f=()=>Ld((b,C)=>C.from,c),d=()=>!Object.values(c).filter(Tx).length,m=null,v=b=>{a||(a=b);var C=b-a,P=C/n.dt;c=DM(n,c,P),i(rr(rr(rr({},e),t),f())),a=b,d()||(m=o.setTimeout(v))};return()=>(m=o.setTimeout(v),()=>{var b;(b=m)===null||b===void 0||b()})}function eJ(e,t,n,r,i,o,a){var c=null,f=i.reduce((v,b)=>{var C=e[b],P=t[b];return C==null||P==null?v:rr(rr({},v),{},{[b]:[C,P]})},{}),d,m=v=>{d||(d=v);var b=(v-d)/r,C=Ld((N,R)=>up(...R,n(b)),f);if(o(rr(rr(rr({},e),t),C)),b<1)c=a.setTimeout(m);else{var P=Ld((N,R)=>up(...R,n(1)),f);o(rr(rr(rr({},e),t),P))}};return()=>(c=a.setTimeout(m),()=>{var v;(v=c)===null||v===void 0||v()})}const tJ=(e,t,n,r,i,o)=>{var a=YX(e,t);return n==null?()=>(i(rr(rr({},e),t)),()=>{}):n.isStepper===!0?QX(e,t,n,a,i,o):eJ(e,t,n,r,a,i,o)};var cp=1e-4,LM=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],BM=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),iI=(e,t)=>n=>{var r=LM(e,t);return BM(r,n)},nJ=(e,t)=>n=>{var r=LM(e,t),i=[...r.map((o,a)=>o*a).slice(1),0];return BM(i,n)},rJ=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(r==null||r.length!==4)return null;var i=r.map(o=>parseFloat(o));return[i[0],i[1],i[2],i[3]]},iJ=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=rJ(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},oJ=(e,t,n,r)=>{var i=iI(e,n),o=iI(t,r),a=nJ(e,n),c=d=>d>1?1:d<0?0:d,f=d=>{for(var m=d>1?1:d,v=m,b=0;b<8;++b){var C=i(v)-m,P=a(v);if(Math.abs(C-m)<cp||P<cp)return o(v);v=c(v-C/P)}return o(v)};return f.isStepper=!1,f},oI=function(){return oJ(...iJ(...arguments))},sJ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,o=(a,c,f)=>{var d=-(a-c)*n,m=f*r,v=f+(d-m)*i/1e3,b=f*i/1e3+a;return Math.abs(b-c)<cp&&Math.abs(v)<cp?[c,0]:[b,v]};return o.isStepper=!0,o.dt=i,o},aJ=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return oI(e);case"spring":return sJ();default:if(e.split("(")[0]==="cubic-bezier")return oI(e)}return typeof e=="function"?e:null};function lJ(e){var t,n=()=>null,r=!1,i=null,o=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var c=a,[f,...d]=c;if(typeof f=="number"){i=e.setTimeout(o.bind(null,d),f);return}o(f),i=e.setTimeout(o.bind(null,d));return}typeof a=="string"&&(t=a,n(t)),typeof a=="object"&&(t=a,n(t)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,i&&(i(),i=null),o(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>e}}class uJ{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=a=>{a-r>=n?t(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{i!=null&&cancelAnimationFrame(i)}}}function cJ(){return lJ(new uJ)}var dJ=k.createContext(cJ);function fJ(e,t){var n=k.useContext(dJ);return k.useMemo(()=>t??n(e),[e,t,n])}var hJ=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),xm={isSsr:hJ()},pJ={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},sI={t:0},Vv={t:1};function rf(e){var t=Vn(e,pJ),{isActive:n,canBegin:r,duration:i,easing:o,begin:a,onAnimationEnd:c,onAnimationStart:f,children:d}=t,m=n==="auto"?!xm.isSsr:n,v=fJ(t.animationId,t.animationManager),[b,C]=k.useState(m?sI:Vv),P=k.useRef(null);return k.useEffect(()=>{m||C(Vv)},[m]),k.useEffect(()=>{if(!m||!r)return Jd;var N=tJ(sI,Vv,aJ(o),i,C,v.getTimeoutController()),R=()=>{P.current=N()};return v.start([f,a,R,i,c]),()=>{v.stop(),P.current&&P.current(),c()}},[m,r,i,o,a,f,c,v]),d(b.t)}function of(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=k.useRef(Pd(t)),r=k.useRef(e);return r.current!==e&&(n.current=Pd(t),r.current=e),n.current}var mJ=["radius"],gJ=["radius"],aI,lI,uI,cI,dI,fI,hI,pI,mI,gI;function vI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vI(Object(n),!0).forEach(function(r){vJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vJ(e,t,n){return(t=yJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yJ(e){var t=xJ(e,"string");return typeof t=="symbol"?t:t+""}function xJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dp(){return dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dp.apply(null,arguments)}function xI(e,t){if(e==null)return{};var n,r,i=wJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Vo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var wI=(e,t,n,r,i)=>{var o=ya(n),a=ya(r),c=Math.min(Math.abs(o)/2,Math.abs(a)/2),f=a>=0?1:-1,d=o>=0?1:-1,m=a>=0&&o>=0||a<0&&o<0?1:0,v;if(c>0&&i instanceof Array){for(var b=[0,0,0,0],C=0,P=4;C<P;C++)b[C]=i[C]>c?c:i[C];v=On(aI||(aI=Vo(["M",",",""])),e,t+f*b[0]),b[0]>0&&(v+=On(lI||(lI=Vo(["A ",",",",0,0,",",",",",""])),b[0],b[0],m,e+d*b[0],t)),v+=On(uI||(uI=Vo(["L ",",",""])),e+n-d*b[1],t),b[1]>0&&(v+=On(cI||(cI=Vo(["A ",",",",0,0,",`,
        `,",",""])),b[1],b[1],m,e+n,t+f*b[1])),v+=On(dI||(dI=Vo(["L ",",",""])),e+n,t+r-f*b[2]),b[2]>0&&(v+=On(fI||(fI=Vo(["A ",",",",0,0,",`,
        `,",",""])),b[2],b[2],m,e+n-d*b[2],t+r)),v+=On(hI||(hI=Vo(["L ",",",""])),e+d*b[3],t+r),b[3]>0&&(v+=On(pI||(pI=Vo(["A ",",",",0,0,",`,
        `,",",""])),b[3],b[3],m,e,t+r-f*b[3])),v+="Z"}else if(c>0&&i===+i&&i>0){var N=Math.min(c,i);v=On(mI||(mI=Vo(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+f*N,N,N,m,e+d*N,t,e+n-d*N,t,N,N,m,e+n,t+f*N,e+n,t+r-f*N,N,N,m,e+n-d*N,t+r,e+d*N,t+r,N,N,m,e,t+r-f*N)}else v=On(gI||(gI=Vo(["M ",","," h "," v "," h "," Z"])),e,t,n,r,-n);return v},bI={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},FM=e=>{var t=Vn(e,bI),n=k.useRef(null),[r,i]=k.useState(-1);k.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var se=n.current.getTotalLength();se&&i(se)}catch{}},[]);var{x:o,y:a,width:c,height:f,radius:d,className:m}=t,{animationEasing:v,animationDuration:b,animationBegin:C,isAnimationActive:P,isUpdateAnimationActive:N}=t,R=k.useRef(c),D=k.useRef(f),F=k.useRef(o),L=k.useRef(a),U=k.useMemo(()=>({x:o,y:a,width:c,height:f,radius:d}),[o,a,c,f,d]),G=of(U,"rectangle-");if(o!==+o||a!==+a||c!==+c||f!==+f||c===0||f===0)return null;var q=Ft("recharts-rectangle",m);if(!N){var W=ki(t),{radius:Z}=W,X=xI(W,mJ);return k.createElement("path",dp({},X,{x:ya(o),y:ya(a),width:ya(c),height:ya(f),radius:typeof d=="number"?d:void 0,className:q,d:wI(o,a,c,f,d)}))}var pe=R.current,ae=D.current,le=F.current,be=L.current,me="0px ".concat(r===-1?1:r,"px"),te="".concat(r,"px 0px"),Oe=MM(["strokeDasharray"],b,typeof v=="string"?v:bI.animationEasing);return k.createElement(rf,{animationId:G,key:G,canBegin:r>0,duration:b,easing:v,isActive:N,begin:C},se=>{var ve=Sn(pe,c,se),Ee=Sn(ae,f,se),Se=Sn(le,o,se),ne=Sn(be,a,se);n.current&&(R.current=ve,D.current=Ee,F.current=Se,L.current=ne);var he;P?se>0?he={transition:Oe,strokeDasharray:te}:he={strokeDasharray:me}:he={strokeDasharray:te};var Be=ki(t),{radius:Fe}=Be,Ze=xI(Be,gJ);return k.createElement("path",dp({},Ze,{radius:typeof d=="number"?d:void 0,className:q,d:wI(Se,ne,ve,Ee,d),ref:n,style:yI(yI({},he),t.style)}))})};function EI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _I(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EI(Object(n),!0).forEach(function(r){bJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bJ(e,t,n){return(t=EJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EJ(e){var t=_J(e,"string");return typeof t=="symbol"?t:t+""}function _J(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fp=Math.PI/180,SJ=e=>e*180/Math.PI,Wn=(e,t,n,r)=>({x:e+Math.cos(-fp*r)*n,y:t+Math.sin(-fp*r)*n}),jM=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},CJ=(e,t)=>{var{x:n,y:r}=e,{x:i,y:o}=t;return Math.sqrt((n-i)**2+(r-o)**2)},AJ=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:o}=t,a=CJ({x:n,y:r},{x:i,y:o});if(a<=0)return{radius:a,angle:0};var c=(n-i)/a,f=Math.acos(c);return r>o&&(f=2*Math.PI-f),{radius:a,angle:SJ(f),angleInRadian:f}},TJ=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-o*360,endAngle:n-o*360}},IJ=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return e+a*360},PJ=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:i,angle:o}=AJ({x:n,y:r},t),{innerRadius:a,outerRadius:c}=t;if(i<a||i>c||i===0)return null;var{startAngle:f,endAngle:d}=TJ(t),m=o,v;if(f<=d){for(;m>d;)m-=360;for(;m<f;)m+=360;v=m>=f&&m<=d}else{for(;m>f;)m-=360;for(;m<d;)m+=360;v=m>=d&&m<=f}return v?_I(_I({},t),{},{radius:i,angle:IJ(m,t)}):null};function UM(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:o}=e,a=Wn(t,n,r,i),c=Wn(t,n,r,o);return{points:[a,c],cx:t,cy:n,radius:r,startAngle:i,endAngle:o}}var SI,CI,AI,TI,II,PI,NI;function Ix(){return Ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ix.apply(null,arguments)}function hl(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var NJ=(e,t)=>{var n=vr(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Zh=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:o,isExternal:a,cornerRadius:c,cornerIsExternal:f}=e,d=c*(a?1:-1)+r,m=Math.asin(c/d)/fp,v=f?i:i+o*m,b=Wn(t,n,d,v),C=Wn(t,n,r,v),P=f?i-o*m:i,N=Wn(t,n,d*Math.cos(m*fp),P);return{center:b,circleTangency:C,lineTangency:N,theta:m}},VM=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:a}=e,c=NJ(o,a),f=o+c,d=Wn(t,n,i,o),m=Wn(t,n,i,f),v=On(SI||(SI=hl(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,i,i,+(Math.abs(c)>180),+(o>f),m.x,m.y);if(r>0){var b=Wn(t,n,r,o),C=Wn(t,n,r,f);v+=On(CI||(CI=hl(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),C.x,C.y,r,r,+(Math.abs(c)>180),+(o<=f),b.x,b.y)}else v+=On(AI||(AI=hl(["L ",","," Z"])),t,n);return v},RJ=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:c,startAngle:f,endAngle:d}=e,m=vr(d-f),{circleTangency:v,lineTangency:b,theta:C}=Zh({cx:t,cy:n,radius:i,angle:f,sign:m,cornerRadius:o,cornerIsExternal:c}),{circleTangency:P,lineTangency:N,theta:R}=Zh({cx:t,cy:n,radius:i,angle:d,sign:-m,cornerRadius:o,cornerIsExternal:c}),D=c?Math.abs(f-d):Math.abs(f-d)-C-R;if(D<0)return a?On(TI||(TI=hl(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),b.x,b.y,o,o,o*2,o,o,-o*2):VM({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:d});var F=On(II||(II=hl(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),b.x,b.y,o,o,+(m<0),v.x,v.y,i,i,+(D>180),+(m<0),P.x,P.y,o,o,+(m<0),N.x,N.y);if(r>0){var{circleTangency:L,lineTangency:U,theta:G}=Zh({cx:t,cy:n,radius:r,angle:f,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),{circleTangency:q,lineTangency:W,theta:Z}=Zh({cx:t,cy:n,radius:r,angle:d,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),X=c?Math.abs(f-d):Math.abs(f-d)-G-Z;if(X<0&&o===0)return"".concat(F,"L").concat(t,",").concat(n,"Z");F+=On(PI||(PI=hl(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),W.x,W.y,o,o,+(m<0),q.x,q.y,r,r,+(X>180),+(m>0),L.x,L.y,o,o,+(m<0),U.x,U.y)}else F+=On(NI||(NI=hl(["L",",","Z"])),t,n);return F},OJ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},zM=e=>{var t=Vn(e,OJ),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:a,forceCornerRadius:c,cornerIsExternal:f,startAngle:d,endAngle:m,className:v}=t;if(o<i||d===m)return null;var b=Ft("recharts-sector",v),C=o-i,P=$r(a,C,0,!0),N;return P>0&&Math.abs(d-m)<360?N=RJ({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(P,C/2),forceCornerRadius:c,cornerIsExternal:f,startAngle:d,endAngle:m}):N=VM({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:d,endAngle:m}),k.createElement("path",Ix({},ki(t),{className:b,d:N}))};function kJ(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(Ek(t)){if(e==="centric"){var{cx:r,cy:i,innerRadius:o,outerRadius:a,angle:c}=t,f=Wn(r,i,o,c),d=Wn(r,i,a,c);return[{x:f.x,y:f.y},{x:d.x,y:d.y}]}return UM(t)}}var zv={},$v={},Gv={},RI;function MJ(){return RI||(RI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mk();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(Gv)),Gv}var OI;function DJ(){return OI||(OI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MJ();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})($v)),$v}var kI;function LJ(){return kI||(kI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dk(),n=DJ();function r(i,o,a){a&&typeof a!="number"&&t.isIterateeCall(i,o,a)&&(o=a=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),a=a===void 0?i<o?1:-1:n.toFinite(a);const c=Math.max(Math.ceil((o-i)/(a||1)),0),f=new Array(c);for(let d=0;d<c;d++)f[d]=i,i+=a;return f}e.range=r})(zv)),zv}var Hv,MI;function BJ(){return MI||(MI=1,Hv=LJ().range),Hv}var FJ=BJ();const $M=so(FJ);function wa(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jJ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ob(e){let t,n,r;e.length!==2?(t=wa,n=(c,f)=>wa(e(c),f),r=(c,f)=>e(c)-f):(t=e===wa||e===jJ?e:UJ,n=e,r=e);function i(c,f,d=0,m=c.length){if(d<m){if(t(f,f)!==0)return m;do{const v=d+m>>>1;n(c[v],f)<0?d=v+1:m=v}while(d<m)}return d}function o(c,f,d=0,m=c.length){if(d<m){if(t(f,f)!==0)return m;do{const v=d+m>>>1;n(c[v],f)<=0?d=v+1:m=v}while(d<m)}return d}function a(c,f,d=0,m=c.length){const v=i(c,f,d,m-1);return v>d&&r(c[v-1],f)>-r(c[v],f)?v-1:v}return{left:i,center:a,right:o}}function UJ(){return 0}function GM(e){return e===null?NaN:+e}function*VJ(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const zJ=ob(wa),sf=zJ.right;ob(GM).center;class DI extends Map{constructor(t,n=HJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(LI(this,t))}has(t){return super.has(LI(this,t))}set(t,n){return super.set($J(this,t),n)}delete(t){return super.delete(GJ(this,t))}}function LI({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function $J({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function GJ({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function HJ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function qJ(e=wa){if(e===wa)return HM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function HM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const WJ=Math.sqrt(50),KJ=Math.sqrt(10),YJ=Math.sqrt(2);function hp(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=WJ?10:o>=KJ?5:o>=YJ?2:1;let c,f,d;return i<0?(d=Math.pow(10,-i)/a,c=Math.round(e*d),f=Math.round(t*d),c/d<e&&++c,f/d>t&&--f,d=-d):(d=Math.pow(10,i)*a,c=Math.round(e/d),f=Math.round(t/d),c*d<e&&++c,f*d>t&&--f),f<c&&.5<=n&&n<2?hp(e,t,n*2):[c,f,d]}function Px(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,a]=r?hp(t,e,n):hp(e,t,n);if(!(o>=i))return[];const c=o-i+1,f=new Array(c);if(r)if(a<0)for(let d=0;d<c;++d)f[d]=(o-d)/-a;else for(let d=0;d<c;++d)f[d]=(o-d)*a;else if(a<0)for(let d=0;d<c;++d)f[d]=(i+d)/-a;else for(let d=0;d<c;++d)f[d]=(i+d)*a;return f}function Nx(e,t,n){return t=+t,e=+e,n=+n,hp(e,t,n)[2]}function Rx(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Nx(t,e,n):Nx(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function BI(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function FI(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function qM(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?HM:qJ(i);r>n;){if(r-n>600){const f=r-n+1,d=t-n+1,m=Math.log(f),v=.5*Math.exp(2*m/3),b=.5*Math.sqrt(m*v*(f-v)/f)*(d-f/2<0?-1:1),C=Math.max(n,Math.floor(t-d*v/f+b)),P=Math.min(r,Math.floor(t+(f-d)*v/f+b));qM(e,t,C,P,i)}const o=e[t];let a=n,c=r;for(ud(e,n,t),i(e[r],o)>0&&ud(e,n,r);a<c;){for(ud(e,a,c),++a,--c;i(e[a],o)<0;)++a;for(;i(e[c],o)>0;)--c}i(e[n],o)===0?ud(e,n,c):(++c,ud(e,c,r)),c<=t&&(n=c+1),t<=c&&(r=c-1)}return e}function ud(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function XJ(e,t,n){if(e=Float64Array.from(VJ(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return FI(e);if(t>=1)return BI(e);var r,i=(r-1)*t,o=Math.floor(i),a=BI(qM(e,o).subarray(0,o+1)),c=FI(e.subarray(o+1));return a+(c-a)*(i-o)}}function JJ(e,t,n=GM){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),c=+n(e[o+1],o+1,e);return a+(c-a)*(i-o)}}function ZJ(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function ao(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ls(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Ox=Symbol("implicit");function sb(){var e=new DI,t=[],n=[],r=Ox;function i(o){let a=e.get(o);if(a===void 0){if(r!==Ox)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new DI;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return sb(t,n).unknown(r)},ao.apply(i,arguments),i}function ab(){var e=sb().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,a,c=!1,f=0,d=0,m=.5;delete e.unknown;function v(){var b=t().length,C=i<r,P=C?i:r,N=C?r:i;o=(N-P)/Math.max(1,b-f+d*2),c&&(o=Math.floor(o)),P+=(N-P-o*(b-f))*m,a=o*(1-f),c&&(P=Math.round(P),a=Math.round(a));var R=ZJ(b).map(function(D){return P+o*D});return n(C?R.reverse():R)}return e.domain=function(b){return arguments.length?(t(b),v()):t()},e.range=function(b){return arguments.length?([r,i]=b,r=+r,i=+i,v()):[r,i]},e.rangeRound=function(b){return[r,i]=b,r=+r,i=+i,c=!0,v()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(b){return arguments.length?(c=!!b,v()):c},e.padding=function(b){return arguments.length?(f=Math.min(1,d=+b),v()):f},e.paddingInner=function(b){return arguments.length?(f=Math.min(1,b),v()):f},e.paddingOuter=function(b){return arguments.length?(d=+b,v()):d},e.align=function(b){return arguments.length?(m=Math.max(0,Math.min(1,b)),v()):m},e.copy=function(){return ab(t(),[r,i]).round(c).paddingInner(f).paddingOuter(d).align(m)},ao.apply(v(),arguments)}function WM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return WM(t())},e}function QJ(){return WM(ab.apply(null,arguments).paddingInner(1))}function lb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function KM(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function af(){}var Bd=.7,pp=1/Bd,Du="\\s*([+-]?\\d+)\\s*",Fd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Go="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eZ=/^#([0-9a-f]{3,8})$/,tZ=new RegExp(`^rgb\\(${Du},${Du},${Du}\\)$`),nZ=new RegExp(`^rgb\\(${Go},${Go},${Go}\\)$`),rZ=new RegExp(`^rgba\\(${Du},${Du},${Du},${Fd}\\)$`),iZ=new RegExp(`^rgba\\(${Go},${Go},${Go},${Fd}\\)$`),oZ=new RegExp(`^hsl\\(${Fd},${Go},${Go}\\)$`),sZ=new RegExp(`^hsla\\(${Fd},${Go},${Go},${Fd}\\)$`),jI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lb(af,jd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:UI,formatHex:UI,formatHex8:aZ,formatHsl:lZ,formatRgb:VI,toString:VI});function UI(){return this.rgb().formatHex()}function aZ(){return this.rgb().formatHex8()}function lZ(){return YM(this).formatHsl()}function VI(){return this.rgb().formatRgb()}function jd(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=eZ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?zI(t):n===3?new di(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=tZ.exec(e))?new di(t[1],t[2],t[3],1):(t=nZ.exec(e))?new di(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=rZ.exec(e))?Qh(t[1],t[2],t[3],t[4]):(t=iZ.exec(e))?Qh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=oZ.exec(e))?HI(t[1],t[2]/100,t[3]/100,1):(t=sZ.exec(e))?HI(t[1],t[2]/100,t[3]/100,t[4]):jI.hasOwnProperty(e)?zI(jI[e]):e==="transparent"?new di(NaN,NaN,NaN,0):null}function zI(e){return new di(e>>16&255,e>>8&255,e&255,1)}function Qh(e,t,n,r){return r<=0&&(e=t=n=NaN),new di(e,t,n,r)}function uZ(e){return e instanceof af||(e=jd(e)),e?(e=e.rgb(),new di(e.r,e.g,e.b,e.opacity)):new di}function kx(e,t,n,r){return arguments.length===1?uZ(e):new di(e,t,n,r??1)}function di(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}lb(di,kx,KM(af,{brighter(e){return e=e==null?pp:Math.pow(pp,e),new di(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bd:Math.pow(Bd,e),new di(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new di(yl(this.r),yl(this.g),yl(this.b),mp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$I,formatHex:$I,formatHex8:cZ,formatRgb:GI,toString:GI}));function $I(){return`#${pl(this.r)}${pl(this.g)}${pl(this.b)}`}function cZ(){return`#${pl(this.r)}${pl(this.g)}${pl(this.b)}${pl((isNaN(this.opacity)?1:this.opacity)*255)}`}function GI(){const e=mp(this.opacity);return`${e===1?"rgb(":"rgba("}${yl(this.r)}, ${yl(this.g)}, ${yl(this.b)}${e===1?")":`, ${e})`}`}function mp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pl(e){return e=yl(e),(e<16?"0":"")+e.toString(16)}function HI(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _o(e,t,n,r)}function YM(e){if(e instanceof _o)return new _o(e.h,e.s,e.l,e.opacity);if(e instanceof af||(e=jd(e)),!e)return new _o;if(e instanceof _o)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,c=o-i,f=(o+i)/2;return c?(t===o?a=(n-r)/c+(n<r)*6:n===o?a=(r-t)/c+2:a=(t-n)/c+4,c/=f<.5?o+i:2-o-i,a*=60):c=f>0&&f<1?0:a,new _o(a,c,f,e.opacity)}function dZ(e,t,n,r){return arguments.length===1?YM(e):new _o(e,t,n,r??1)}function _o(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}lb(_o,dZ,KM(af,{brighter(e){return e=e==null?pp:Math.pow(pp,e),new _o(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bd:Math.pow(Bd,e),new _o(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new di(qv(e>=240?e-240:e+120,i,r),qv(e,i,r),qv(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new _o(qI(this.h),e0(this.s),e0(this.l),mp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mp(this.opacity);return`${e===1?"hsl(":"hsla("}${qI(this.h)}, ${e0(this.s)*100}%, ${e0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qI(e){return e=(e||0)%360,e<0?e+360:e}function e0(e){return Math.max(0,Math.min(1,e||0))}function qv(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ub=e=>()=>e;function fZ(e,t){return function(n){return e+n*t}}function hZ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function pZ(e){return(e=+e)==1?XM:function(t,n){return n-t?hZ(t,n,e):ub(isNaN(t)?n:t)}}function XM(e,t){var n=t-e;return n?fZ(e,n):ub(isNaN(e)?t:e)}const WI=(function e(t){var n=pZ(t);function r(i,o){var a=n((i=kx(i)).r,(o=kx(o)).r),c=n(i.g,o.g),f=n(i.b,o.b),d=XM(i.opacity,o.opacity);return function(m){return i.r=a(m),i.g=c(m),i.b=f(m),i.opacity=d(m),i+""}}return r.gamma=e,r})(1);function mZ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function gZ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vZ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=oc(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(c){for(a=0;a<r;++a)o[a]=i[a](c);return o}}function yZ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function gp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function xZ(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=oc(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Mx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wv=new RegExp(Mx.source,"g");function wZ(e){return function(){return e}}function bZ(e){return function(t){return e(t)+""}}function EZ(e,t){var n=Mx.lastIndex=Wv.lastIndex=0,r,i,o,a=-1,c=[],f=[];for(e=e+"",t=t+"";(r=Mx.exec(e))&&(i=Wv.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),c[a]?c[a]+=o:c[++a]=o),(r=r[0])===(i=i[0])?c[a]?c[a]+=i:c[++a]=i:(c[++a]=null,f.push({i:a,x:gp(r,i)})),n=Wv.lastIndex;return n<t.length&&(o=t.slice(n),c[a]?c[a]+=o:c[++a]=o),c.length<2?f[0]?bZ(f[0].x):wZ(t):(t=f.length,function(d){for(var m=0,v;m<t;++m)c[(v=f[m]).i]=v.x(d);return c.join("")})}function oc(e,t){var n=typeof t,r;return t==null||n==="boolean"?ub(t):(n==="number"?gp:n==="string"?(r=jd(t))?(t=r,WI):EZ:t instanceof jd?WI:t instanceof Date?yZ:gZ(t)?mZ:Array.isArray(t)?vZ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?xZ:gp)(e,t)}function cb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function _Z(e,t){t===void 0&&(t=e,e=oc);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var c=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[c](a-c)}}function SZ(e){return function(){return e}}function vp(e){return+e}var KI=[0,1];function Yr(e){return e}function Dx(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:SZ(isNaN(t)?NaN:.5)}function CZ(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function AZ(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Dx(i,r),o=n(a,o)):(r=Dx(r,i),o=n(o,a)),function(c){return o(r(c))}}function TZ(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Dx(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(c){var f=sf(e,c,1,r)-1;return o[f](i[f](c))}}function lf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wm(){var e=KI,t=KI,n=oc,r,i,o,a=Yr,c,f,d;function m(){var b=Math.min(e.length,t.length);return a!==Yr&&(a=CZ(e[0],e[b-1])),c=b>2?TZ:AZ,f=d=null,v}function v(b){return b==null||isNaN(b=+b)?o:(f||(f=c(e.map(r),t,n)))(r(a(b)))}return v.invert=function(b){return a(i((d||(d=c(t,e.map(r),gp)))(b)))},v.domain=function(b){return arguments.length?(e=Array.from(b,vp),m()):e.slice()},v.range=function(b){return arguments.length?(t=Array.from(b),m()):t.slice()},v.rangeRound=function(b){return t=Array.from(b),n=cb,m()},v.clamp=function(b){return arguments.length?(a=b?!0:Yr,m()):a!==Yr},v.interpolate=function(b){return arguments.length?(n=b,m()):n},v.unknown=function(b){return arguments.length?(o=b,v):o},function(b,C){return r=b,i=C,m()}}function db(){return wm()(Yr,Yr)}function IZ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function yp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function $u(e){return e=yp(Math.abs(e)),e?e[1]:NaN}function PZ(e,t){return function(n,r){for(var i=n.length,o=[],a=0,c=e[0],f=0;i>0&&c>0&&(f+c+1>r&&(c=Math.max(1,r-f)),o.push(n.substring(i-=c,i+c)),!((f+=c+1)>r));)c=e[a=(a+1)%e.length];return o.reverse().join(t)}}function NZ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var RZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ud(e){if(!(t=RZ.exec(e)))throw new Error("invalid format: "+e);var t;return new fb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ud.prototype=fb.prototype;function fb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}fb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function OZ(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var JM;function kZ(e,t){var n=yp(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(JM=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+yp(e,Math.max(0,t+o-1))[0]}function YI(e,t){var n=yp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const XI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:IZ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>YI(e*100,t),r:YI,s:kZ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function JI(e){return e}var ZI=Array.prototype.map,QI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function MZ(e){var t=e.grouping===void 0||e.thousands===void 0?JI:PZ(ZI.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?JI:NZ(ZI.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function d(v){v=Ud(v);var b=v.fill,C=v.align,P=v.sign,N=v.symbol,R=v.zero,D=v.width,F=v.comma,L=v.precision,U=v.trim,G=v.type;G==="n"?(F=!0,G="g"):XI[G]||(L===void 0&&(L=12),U=!0,G="g"),(R||b==="0"&&C==="=")&&(R=!0,b="0",C="=");var q=N==="$"?n:N==="#"&&/[boxX]/.test(G)?"0"+G.toLowerCase():"",W=N==="$"?r:/[%p]/.test(G)?a:"",Z=XI[G],X=/[defgprs%]/.test(G);L=L===void 0?6:/[gprs]/.test(G)?Math.max(1,Math.min(21,L)):Math.max(0,Math.min(20,L));function pe(ae){var le=q,be=W,me,te,Oe;if(G==="c")be=Z(ae)+be,ae="";else{ae=+ae;var se=ae<0||1/ae<0;if(ae=isNaN(ae)?f:Z(Math.abs(ae),L),U&&(ae=OZ(ae)),se&&+ae==0&&P!=="+"&&(se=!1),le=(se?P==="("?P:c:P==="-"||P==="("?"":P)+le,be=(G==="s"?QI[8+JM/3]:"")+be+(se&&P==="("?")":""),X){for(me=-1,te=ae.length;++me<te;)if(Oe=ae.charCodeAt(me),48>Oe||Oe>57){be=(Oe===46?i+ae.slice(me+1):ae.slice(me))+be,ae=ae.slice(0,me);break}}}F&&!R&&(ae=t(ae,1/0));var ve=le.length+ae.length+be.length,Ee=ve<D?new Array(D-ve+1).join(b):"";switch(F&&R&&(ae=t(Ee+ae,Ee.length?D-be.length:1/0),Ee=""),C){case"<":ae=le+ae+be+Ee;break;case"=":ae=le+Ee+ae+be;break;case"^":ae=Ee.slice(0,ve=Ee.length>>1)+le+ae+be+Ee.slice(ve);break;default:ae=Ee+le+ae+be;break}return o(ae)}return pe.toString=function(){return v+""},pe}function m(v,b){var C=d((v=Ud(v),v.type="f",v)),P=Math.max(-8,Math.min(8,Math.floor($u(b)/3)))*3,N=Math.pow(10,-P),R=QI[8+P/3];return function(D){return C(N*D)+R}}return{format:d,formatPrefix:m}}var t0,hb,ZM;DZ({thousands:",",grouping:[3],currency:["$",""]});function DZ(e){return t0=MZ(e),hb=t0.format,ZM=t0.formatPrefix,t0}function LZ(e){return Math.max(0,-$u(Math.abs(e)))}function BZ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($u(t)/3)))*3-$u(Math.abs(e)))}function FZ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$u(t)-$u(e))+1}function QM(e,t,n,r){var i=Rx(e,t,n),o;switch(r=Ud(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=BZ(i,a))&&(r.precision=o),ZM(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=FZ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=LZ(i))&&(r.precision=o-(r.type==="%")*2);break}}return hb(r)}function Ta(e){var t=e.domain;return e.ticks=function(n){var r=t();return Px(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return QM(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],c=r[o],f,d,m=10;for(c<a&&(d=a,a=c,c=d,d=i,i=o,o=d);m-- >0;){if(d=Nx(a,c,n),d===f)return r[i]=a,r[o]=c,t(r);if(d>0)a=Math.floor(a/d)*d,c=Math.ceil(c/d)*d;else if(d<0)a=Math.ceil(a*d)/d,c=Math.floor(c*d)/d;else break;f=d}return e},e}function e4(){var e=db();return e.copy=function(){return lf(e,e4())},ao.apply(e,arguments),Ta(e)}function t4(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,vp),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return t4(e).unknown(t)},e=arguments.length?Array.from(e,vp):[0,1],Ta(n)}function n4(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function eP(e){return Math.log(e)}function tP(e){return Math.exp(e)}function jZ(e){return-Math.log(-e)}function UZ(e){return-Math.exp(-e)}function VZ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function zZ(e){return e===10?VZ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function $Z(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function nP(e){return(t,n)=>-e(-t,n)}function pb(e){const t=e(eP,tP),n=t.domain;let r=10,i,o;function a(){return i=$Z(r),o=zZ(r),n()[0]<0?(i=nP(i),o=nP(o),e(jZ,UZ)):e(eP,tP),t}return t.base=function(c){return arguments.length?(r=+c,a()):r},t.domain=function(c){return arguments.length?(n(c),a()):n()},t.ticks=c=>{const f=n();let d=f[0],m=f[f.length-1];const v=m<d;v&&([d,m]=[m,d]);let b=i(d),C=i(m),P,N;const R=c==null?10:+c;let D=[];if(!(r%1)&&C-b<R){if(b=Math.floor(b),C=Math.ceil(C),d>0){for(;b<=C;++b)for(P=1;P<r;++P)if(N=b<0?P/o(-b):P*o(b),!(N<d)){if(N>m)break;D.push(N)}}else for(;b<=C;++b)for(P=r-1;P>=1;--P)if(N=b>0?P/o(-b):P*o(b),!(N<d)){if(N>m)break;D.push(N)}D.length*2<R&&(D=Px(d,m,R))}else D=Px(b,C,Math.min(C-b,R)).map(o);return v?D.reverse():D},t.tickFormat=(c,f)=>{if(c==null&&(c=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Ud(f)).precision==null&&(f.trim=!0),f=hb(f)),c===1/0)return f;const d=Math.max(1,r*c/t.ticks().length);return m=>{let v=m/o(Math.round(i(m)));return v*r<r-.5&&(v*=r),v<=d?f(m):""}},t.nice=()=>n(n4(n(),{floor:c=>o(Math.floor(i(c))),ceil:c=>o(Math.ceil(i(c)))})),t}function r4(){const e=pb(wm()).domain([1,10]);return e.copy=()=>lf(e,r4()).base(e.base()),ao.apply(e,arguments),e}function rP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function iP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function mb(e){var t=1,n=e(rP(t),iP(t));return n.constant=function(r){return arguments.length?e(rP(t=+r),iP(t)):t},Ta(n)}function i4(){var e=mb(wm());return e.copy=function(){return lf(e,i4()).constant(e.constant())},ao.apply(e,arguments)}function oP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function GZ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function HZ(e){return e<0?-e*e:e*e}function gb(e){var t=e(Yr,Yr),n=1;function r(){return n===1?e(Yr,Yr):n===.5?e(GZ,HZ):e(oP(n),oP(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ta(t)}function vb(){var e=gb(wm());return e.copy=function(){return lf(e,vb()).exponent(e.exponent())},ao.apply(e,arguments),e}function qZ(){return vb.apply(null,arguments).exponent(.5)}function sP(e){return Math.sign(e)*e*e}function WZ(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function o4(){var e=db(),t=[0,1],n=!1,r;function i(o){var a=WZ(e(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return e.invert(sP(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,vp)).map(sP)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return o4(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},ao.apply(i,arguments),Ta(i)}function s4(){var e=[],t=[],n=[],r;function i(){var a=0,c=Math.max(1,t.length);for(n=new Array(c-1);++a<c;)n[a-1]=JJ(e,a/c);return o}function o(a){return a==null||isNaN(a=+a)?r:t[sf(n,a)]}return o.invertExtent=function(a){var c=t.indexOf(a);return c<0?[NaN,NaN]:[c>0?n[c-1]:e[0],c<n.length?n[c]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let c of a)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(wa),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return s4().domain(e).range(t).unknown(r)},ao.apply(o,arguments)}function a4(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(f){return f!=null&&f<=f?i[sf(r,f,0,n)]:o}function c(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*t-(f-n)*e)/(n+1);return a}return a.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,c()):[e,t]},a.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,c()):i.slice()},a.invertExtent=function(f){var d=i.indexOf(f);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},a.unknown=function(f){return arguments.length&&(o=f),a},a.thresholds=function(){return r.slice()},a.copy=function(){return a4().domain([e,t]).range(i).unknown(o)},ao.apply(Ta(a),arguments)}function l4(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[sf(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return l4().domain(e).range(t).unknown(n)},ao.apply(i,arguments)}const Kv=new Date,Yv=new Date;function or(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),c=i.ceil(o);return o-a<c-o?a:c},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,c)=>{const f=[];if(o=i.ceil(o),c=c==null?1:Math.floor(c),!(o<a)||!(c>0))return f;let d;do f.push(d=new Date(+o)),t(o,c),e(o);while(d<o&&o<a);return f},i.filter=o=>or(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,c)=>{if(a>=a)if(c<0)for(;++c<=0;)for(;t(a,-1),!o(a););else for(;--c>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(Kv.setTime(+o),Yv.setTime(+a),e(Kv),e(Yv),Math.floor(n(Kv,Yv))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const xp=or(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);xp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?or(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):xp);xp.range;const vs=1e3,Qi=vs*60,ys=Qi*60,As=ys*24,yb=As*7,aP=As*30,Xv=As*365,ml=or(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*vs)},(e,t)=>(t-e)/vs,e=>e.getUTCSeconds());ml.range;const xb=or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vs)},(e,t)=>{e.setTime(+e+t*Qi)},(e,t)=>(t-e)/Qi,e=>e.getMinutes());xb.range;const wb=or(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Qi)},(e,t)=>(t-e)/Qi,e=>e.getUTCMinutes());wb.range;const bb=or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vs-e.getMinutes()*Qi)},(e,t)=>{e.setTime(+e+t*ys)},(e,t)=>(t-e)/ys,e=>e.getHours());bb.range;const Eb=or(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ys)},(e,t)=>(t-e)/ys,e=>e.getUTCHours());Eb.range;const uf=or(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Qi)/As,e=>e.getDate()-1);uf.range;const bm=or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/As,e=>e.getUTCDate()-1);bm.range;const u4=or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/As,e=>Math.floor(e/As));u4.range;function kl(e){return or(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Qi)/yb)}const Em=kl(0),wp=kl(1),KZ=kl(2),YZ=kl(3),Gu=kl(4),XZ=kl(5),JZ=kl(6);Em.range;wp.range;KZ.range;YZ.range;Gu.range;XZ.range;JZ.range;function Ml(e){return or(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/yb)}const _m=Ml(0),bp=Ml(1),ZZ=Ml(2),QZ=Ml(3),Hu=Ml(4),eQ=Ml(5),tQ=Ml(6);_m.range;bp.range;ZZ.range;QZ.range;Hu.range;eQ.range;tQ.range;const _b=or(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());_b.range;const Sb=or(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Sb.range;const Ts=or(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ts.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:or(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ts.range;const Is=or(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Is.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:or(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Is.range;function c4(e,t,n,r,i,o){const a=[[ml,1,vs],[ml,5,5*vs],[ml,15,15*vs],[ml,30,30*vs],[o,1,Qi],[o,5,5*Qi],[o,15,15*Qi],[o,30,30*Qi],[i,1,ys],[i,3,3*ys],[i,6,6*ys],[i,12,12*ys],[r,1,As],[r,2,2*As],[n,1,yb],[t,1,aP],[t,3,3*aP],[e,1,Xv]];function c(d,m,v){const b=m<d;b&&([d,m]=[m,d]);const C=v&&typeof v.range=="function"?v:f(d,m,v),P=C?C.range(d,+m+1):[];return b?P.reverse():P}function f(d,m,v){const b=Math.abs(m-d)/v,C=ob(([,,R])=>R).right(a,b);if(C===a.length)return e.every(Rx(d/Xv,m/Xv,v));if(C===0)return xp.every(Math.max(Rx(d,m,v),1));const[P,N]=a[b/a[C-1][2]<a[C][2]/b?C-1:C];return P.every(N)}return[c,f]}const[nQ,rQ]=c4(Is,Sb,_m,u4,Eb,wb),[iQ,oQ]=c4(Ts,_b,Em,uf,bb,xb);function Jv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Zv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function cd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function sQ(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,c=e.months,f=e.shortMonths,d=dd(i),m=fd(i),v=dd(o),b=fd(o),C=dd(a),P=fd(a),N=dd(c),R=fd(c),D=dd(f),F=fd(f),L={a:se,A:ve,b:Ee,B:Se,c:null,d:hP,e:hP,f:PQ,g:jQ,G:VQ,H:AQ,I:TQ,j:IQ,L:d4,m:NQ,M:RQ,p:ne,q:he,Q:gP,s:vP,S:OQ,u:kQ,U:MQ,V:DQ,w:LQ,W:BQ,x:null,X:null,y:FQ,Y:UQ,Z:zQ,"%":mP},U={a:Be,A:Fe,b:Ze,B:Pe,c:null,d:pP,e:pP,f:qQ,g:nee,G:iee,H:$Q,I:GQ,j:HQ,L:h4,m:WQ,M:KQ,p:st,q:it,Q:gP,s:vP,S:YQ,u:XQ,U:JQ,V:ZQ,w:QQ,W:eee,x:null,X:null,y:tee,Y:ree,Z:oee,"%":mP},G={a:pe,A:ae,b:le,B:be,c:me,d:dP,e:dP,f:EQ,g:cP,G:uP,H:fP,I:fP,j:yQ,L:bQ,m:vQ,M:xQ,p:X,q:gQ,Q:SQ,s:CQ,S:wQ,u:dQ,U:fQ,V:hQ,w:cQ,W:pQ,x:te,X:Oe,y:cP,Y:uP,Z:mQ,"%":_Q};L.x=q(n,L),L.X=q(r,L),L.c=q(t,L),U.x=q(n,U),U.X=q(r,U),U.c=q(t,U);function q(we,tt){return function(Me){var _e=[],Ke=-1,dt=0,It=we.length,An,zt,Rt;for(Me instanceof Date||(Me=new Date(+Me));++Ke<It;)we.charCodeAt(Ke)===37&&(_e.push(we.slice(dt,Ke)),(zt=lP[An=we.charAt(++Ke)])!=null?An=we.charAt(++Ke):zt=An==="e"?" ":"0",(Rt=tt[An])&&(An=Rt(Me,zt)),_e.push(An),dt=Ke+1);return _e.push(we.slice(dt,Ke)),_e.join("")}}function W(we,tt){return function(Me){var _e=cd(1900,void 0,1),Ke=Z(_e,we,Me+="",0),dt,It;if(Ke!=Me.length)return null;if("Q"in _e)return new Date(_e.Q);if("s"in _e)return new Date(_e.s*1e3+("L"in _e?_e.L:0));if(tt&&!("Z"in _e)&&(_e.Z=0),"p"in _e&&(_e.H=_e.H%12+_e.p*12),_e.m===void 0&&(_e.m="q"in _e?_e.q:0),"V"in _e){if(_e.V<1||_e.V>53)return null;"w"in _e||(_e.w=1),"Z"in _e?(dt=Zv(cd(_e.y,0,1)),It=dt.getUTCDay(),dt=It>4||It===0?bp.ceil(dt):bp(dt),dt=bm.offset(dt,(_e.V-1)*7),_e.y=dt.getUTCFullYear(),_e.m=dt.getUTCMonth(),_e.d=dt.getUTCDate()+(_e.w+6)%7):(dt=Jv(cd(_e.y,0,1)),It=dt.getDay(),dt=It>4||It===0?wp.ceil(dt):wp(dt),dt=uf.offset(dt,(_e.V-1)*7),_e.y=dt.getFullYear(),_e.m=dt.getMonth(),_e.d=dt.getDate()+(_e.w+6)%7)}else("W"in _e||"U"in _e)&&("w"in _e||(_e.w="u"in _e?_e.u%7:"W"in _e?1:0),It="Z"in _e?Zv(cd(_e.y,0,1)).getUTCDay():Jv(cd(_e.y,0,1)).getDay(),_e.m=0,_e.d="W"in _e?(_e.w+6)%7+_e.W*7-(It+5)%7:_e.w+_e.U*7-(It+6)%7);return"Z"in _e?(_e.H+=_e.Z/100|0,_e.M+=_e.Z%100,Zv(_e)):Jv(_e)}}function Z(we,tt,Me,_e){for(var Ke=0,dt=tt.length,It=Me.length,An,zt;Ke<dt;){if(_e>=It)return-1;if(An=tt.charCodeAt(Ke++),An===37){if(An=tt.charAt(Ke++),zt=G[An in lP?tt.charAt(Ke++):An],!zt||(_e=zt(we,Me,_e))<0)return-1}else if(An!=Me.charCodeAt(_e++))return-1}return _e}function X(we,tt,Me){var _e=d.exec(tt.slice(Me));return _e?(we.p=m.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function pe(we,tt,Me){var _e=C.exec(tt.slice(Me));return _e?(we.w=P.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function ae(we,tt,Me){var _e=v.exec(tt.slice(Me));return _e?(we.w=b.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function le(we,tt,Me){var _e=D.exec(tt.slice(Me));return _e?(we.m=F.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function be(we,tt,Me){var _e=N.exec(tt.slice(Me));return _e?(we.m=R.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function me(we,tt,Me){return Z(we,t,tt,Me)}function te(we,tt,Me){return Z(we,n,tt,Me)}function Oe(we,tt,Me){return Z(we,r,tt,Me)}function se(we){return a[we.getDay()]}function ve(we){return o[we.getDay()]}function Ee(we){return f[we.getMonth()]}function Se(we){return c[we.getMonth()]}function ne(we){return i[+(we.getHours()>=12)]}function he(we){return 1+~~(we.getMonth()/3)}function Be(we){return a[we.getUTCDay()]}function Fe(we){return o[we.getUTCDay()]}function Ze(we){return f[we.getUTCMonth()]}function Pe(we){return c[we.getUTCMonth()]}function st(we){return i[+(we.getUTCHours()>=12)]}function it(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var tt=q(we+="",L);return tt.toString=function(){return we},tt},parse:function(we){var tt=W(we+="",!1);return tt.toString=function(){return we},tt},utcFormat:function(we){var tt=q(we+="",U);return tt.toString=function(){return we},tt},utcParse:function(we){var tt=W(we+="",!0);return tt.toString=function(){return we},tt}}}var lP={"-":"",_:" ",0:"0"},xr=/^\s*\d+/,aQ=/^%/,lQ=/[\\^$*+?|[\]().{}]/g;function Mt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function uQ(e){return e.replace(lQ,"\\$&")}function dd(e){return new RegExp("^(?:"+e.map(uQ).join("|")+")","i")}function fd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function cQ(e,t,n){var r=xr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function dQ(e,t,n){var r=xr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function fQ(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function hQ(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function pQ(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function uP(e,t,n){var r=xr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function cP(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function mQ(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function gQ(e,t,n){var r=xr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function vQ(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function dP(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function yQ(e,t,n){var r=xr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function fP(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function xQ(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function wQ(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function bQ(e,t,n){var r=xr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function EQ(e,t,n){var r=xr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _Q(e,t,n){var r=aQ.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function SQ(e,t,n){var r=xr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function CQ(e,t,n){var r=xr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function hP(e,t){return Mt(e.getDate(),t,2)}function AQ(e,t){return Mt(e.getHours(),t,2)}function TQ(e,t){return Mt(e.getHours()%12||12,t,2)}function IQ(e,t){return Mt(1+uf.count(Ts(e),e),t,3)}function d4(e,t){return Mt(e.getMilliseconds(),t,3)}function PQ(e,t){return d4(e,t)+"000"}function NQ(e,t){return Mt(e.getMonth()+1,t,2)}function RQ(e,t){return Mt(e.getMinutes(),t,2)}function OQ(e,t){return Mt(e.getSeconds(),t,2)}function kQ(e){var t=e.getDay();return t===0?7:t}function MQ(e,t){return Mt(Em.count(Ts(e)-1,e),t,2)}function f4(e){var t=e.getDay();return t>=4||t===0?Gu(e):Gu.ceil(e)}function DQ(e,t){return e=f4(e),Mt(Gu.count(Ts(e),e)+(Ts(e).getDay()===4),t,2)}function LQ(e){return e.getDay()}function BQ(e,t){return Mt(wp.count(Ts(e)-1,e),t,2)}function FQ(e,t){return Mt(e.getFullYear()%100,t,2)}function jQ(e,t){return e=f4(e),Mt(e.getFullYear()%100,t,2)}function UQ(e,t){return Mt(e.getFullYear()%1e4,t,4)}function VQ(e,t){var n=e.getDay();return e=n>=4||n===0?Gu(e):Gu.ceil(e),Mt(e.getFullYear()%1e4,t,4)}function zQ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Mt(t/60|0,"0",2)+Mt(t%60,"0",2)}function pP(e,t){return Mt(e.getUTCDate(),t,2)}function $Q(e,t){return Mt(e.getUTCHours(),t,2)}function GQ(e,t){return Mt(e.getUTCHours()%12||12,t,2)}function HQ(e,t){return Mt(1+bm.count(Is(e),e),t,3)}function h4(e,t){return Mt(e.getUTCMilliseconds(),t,3)}function qQ(e,t){return h4(e,t)+"000"}function WQ(e,t){return Mt(e.getUTCMonth()+1,t,2)}function KQ(e,t){return Mt(e.getUTCMinutes(),t,2)}function YQ(e,t){return Mt(e.getUTCSeconds(),t,2)}function XQ(e){var t=e.getUTCDay();return t===0?7:t}function JQ(e,t){return Mt(_m.count(Is(e)-1,e),t,2)}function p4(e){var t=e.getUTCDay();return t>=4||t===0?Hu(e):Hu.ceil(e)}function ZQ(e,t){return e=p4(e),Mt(Hu.count(Is(e),e)+(Is(e).getUTCDay()===4),t,2)}function QQ(e){return e.getUTCDay()}function eee(e,t){return Mt(bp.count(Is(e)-1,e),t,2)}function tee(e,t){return Mt(e.getUTCFullYear()%100,t,2)}function nee(e,t){return e=p4(e),Mt(e.getUTCFullYear()%100,t,2)}function ree(e,t){return Mt(e.getUTCFullYear()%1e4,t,4)}function iee(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Hu(e):Hu.ceil(e),Mt(e.getUTCFullYear()%1e4,t,4)}function oee(){return"+0000"}function mP(){return"%"}function gP(e){return+e}function vP(e){return Math.floor(+e/1e3)}var gu,m4,g4;see({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function see(e){return gu=sQ(e),m4=gu.format,gu.parse,g4=gu.utcFormat,gu.utcParse,gu}function aee(e){return new Date(e)}function lee(e){return e instanceof Date?+e:+new Date(+e)}function Cb(e,t,n,r,i,o,a,c,f,d){var m=db(),v=m.invert,b=m.domain,C=d(".%L"),P=d(":%S"),N=d("%I:%M"),R=d("%I %p"),D=d("%a %d"),F=d("%b %d"),L=d("%B"),U=d("%Y");function G(q){return(f(q)<q?C:c(q)<q?P:a(q)<q?N:o(q)<q?R:r(q)<q?i(q)<q?D:F:n(q)<q?L:U)(q)}return m.invert=function(q){return new Date(v(q))},m.domain=function(q){return arguments.length?b(Array.from(q,lee)):b().map(aee)},m.ticks=function(q){var W=b();return e(W[0],W[W.length-1],q??10)},m.tickFormat=function(q,W){return W==null?G:d(W)},m.nice=function(q){var W=b();return(!q||typeof q.range!="function")&&(q=t(W[0],W[W.length-1],q??10)),q?b(n4(W,q)):m},m.copy=function(){return lf(m,Cb(e,t,n,r,i,o,a,c,f,d))},m}function uee(){return ao.apply(Cb(iQ,oQ,Ts,_b,Em,uf,bb,xb,ml,m4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cee(){return ao.apply(Cb(nQ,rQ,Is,Sb,_m,bm,Eb,wb,ml,g4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Sm(){var e=0,t=1,n,r,i,o,a=Yr,c=!1,f;function d(v){return v==null||isNaN(v=+v)?f:a(i===0?.5:(v=(o(v)-n)*i,c?Math.max(0,Math.min(1,v)):v))}d.domain=function(v){return arguments.length?([e,t]=v,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(v){return arguments.length?(c=!!v,d):c},d.interpolator=function(v){return arguments.length?(a=v,d):a};function m(v){return function(b){var C,P;return arguments.length?([C,P]=b,a=v(C,P),d):[a(0),a(1)]}}return d.range=m(oc),d.rangeRound=m(cb),d.unknown=function(v){return arguments.length?(f=v,d):f},function(v){return o=v,n=v(e),r=v(t),i=n===r?0:1/(r-n),d}}function Ia(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function v4(){var e=Ta(Sm()(Yr));return e.copy=function(){return Ia(e,v4())},Ls.apply(e,arguments)}function y4(){var e=pb(Sm()).domain([1,10]);return e.copy=function(){return Ia(e,y4()).base(e.base())},Ls.apply(e,arguments)}function x4(){var e=mb(Sm());return e.copy=function(){return Ia(e,x4()).constant(e.constant())},Ls.apply(e,arguments)}function Ab(){var e=gb(Sm());return e.copy=function(){return Ia(e,Ab()).exponent(e.exponent())},Ls.apply(e,arguments)}function dee(){return Ab.apply(null,arguments).exponent(.5)}function w4(){var e=[],t=Yr;function n(r){if(r!=null&&!isNaN(r=+r))return t((sf(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(wa),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>XJ(e,o/r))},n.copy=function(){return w4(t).domain(e)},Ls.apply(n,arguments)}function Cm(){var e=0,t=.5,n=1,r=1,i,o,a,c,f,d=Yr,m,v=!1,b;function C(N){return isNaN(N=+N)?b:(N=.5+((N=+m(N))-o)*(r*N<r*o?c:f),d(v?Math.max(0,Math.min(1,N)):N))}C.domain=function(N){return arguments.length?([e,t,n]=N,i=m(e=+e),o=m(t=+t),a=m(n=+n),c=i===o?0:.5/(o-i),f=o===a?0:.5/(a-o),r=o<i?-1:1,C):[e,t,n]},C.clamp=function(N){return arguments.length?(v=!!N,C):v},C.interpolator=function(N){return arguments.length?(d=N,C):d};function P(N){return function(R){var D,F,L;return arguments.length?([D,F,L]=R,d=_Z(N,[D,F,L]),C):[d(0),d(.5),d(1)]}}return C.range=P(oc),C.rangeRound=P(cb),C.unknown=function(N){return arguments.length?(b=N,C):b},function(N){return m=N,i=N(e),o=N(t),a=N(n),c=i===o?0:.5/(o-i),f=o===a?0:.5/(a-o),r=o<i?-1:1,C}}function b4(){var e=Ta(Cm()(Yr));return e.copy=function(){return Ia(e,b4())},Ls.apply(e,arguments)}function E4(){var e=pb(Cm()).domain([.1,1,10]);return e.copy=function(){return Ia(e,E4()).base(e.base())},Ls.apply(e,arguments)}function _4(){var e=mb(Cm());return e.copy=function(){return Ia(e,_4()).constant(e.constant())},Ls.apply(e,arguments)}function Tb(){var e=gb(Cm());return e.copy=function(){return Ia(e,Tb()).exponent(e.exponent())},Ls.apply(e,arguments)}function fee(){return Tb.apply(null,arguments).exponent(.5)}const wd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ab,scaleDiverging:b4,scaleDivergingLog:E4,scaleDivergingPow:Tb,scaleDivergingSqrt:fee,scaleDivergingSymlog:_4,scaleIdentity:t4,scaleImplicit:Ox,scaleLinear:e4,scaleLog:r4,scaleOrdinal:sb,scalePoint:QJ,scalePow:vb,scaleQuantile:s4,scaleQuantize:a4,scaleRadial:o4,scaleSequential:v4,scaleSequentialLog:y4,scaleSequentialPow:Ab,scaleSequentialQuantile:w4,scaleSequentialSqrt:dee,scaleSequentialSymlog:x4,scaleSqrt:qZ,scaleSymlog:i4,scaleThreshold:l4,scaleTime:uee,scaleUtc:cee,tickFormat:QM},Symbol.toStringTag,{value:"Module"}));var Bs=e=>e.chartData,Am=fe([Bs],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Ib=(e,t,n,r)=>r?Am(e):Bs(e),hee=(e,t,n)=>n?Am(e):Bs(e);function ba(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Xt(t)&&Xt(n))return!0}return!1}function yP(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function S4(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,o;if(Xt(n))i=n;else if(typeof n=="function")return;if(Xt(r))o=r;else if(typeof r=="function")return;var a=[i,o];if(ba(a))return a}}function pee(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(ba(r))return yP(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,o]=e,a,c;if(i==="auto")t!=null&&(a=Math.min(...t));else if(Je(i))a=i;else if(typeof i=="function")try{t!=null&&(a=i(t?.[0]))}catch{}else if(typeof i=="string"&&PT.test(i)){var f=PT.exec(i);if(f==null||f[1]==null||t==null)a=void 0;else{var d=+f[1];a=t[0]-d}}else a=t?.[0];if(o==="auto")t!=null&&(c=Math.max(...t));else if(Je(o))c=o;else if(typeof o=="function")try{t!=null&&(c=o(t?.[1]))}catch{}else if(typeof o=="string"&&NT.test(o)){var m=NT.exec(o);if(m==null||m[1]==null||t==null)c=void 0;else{var v=+m[1];c=t[1]+v}}else c=t?.[1];var b=[a,c];if(ba(b))return t==null?b:yP(b,t,n)}}}var sc=1e9,mee={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Nb,vn=!0,oo="[DecimalError] ",xl=oo+"Invalid argument: ",Pb=oo+"Exponent out of range: ",ac=Math.floor,ll=Math.pow,gee=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Pi,gr=1e7,dn=7,C4=9007199254740991,Ep=ac(C4/dn),We={};We.absoluteValue=We.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};We.comparedTo=We.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(r=o.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};We.decimalPlaces=We.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*dn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};We.dividedBy=We.div=function(e){return ws(this,new this.constructor(e))};We.dividedToIntegerBy=We.idiv=function(e){var t=this,n=t.constructor;return Jt(ws(t,new n(e),0,1),n.precision)};We.equals=We.eq=function(e){return!this.cmp(e)};We.exponent=function(){return Yn(this)};We.greaterThan=We.gt=function(e){return this.cmp(e)>0};We.greaterThanOrEqualTo=We.gte=function(e){return this.cmp(e)>=0};We.isInteger=We.isint=function(){return this.e>this.d.length-2};We.isNegative=We.isneg=function(){return this.s<0};We.isPositive=We.ispos=function(){return this.s>0};We.isZero=function(){return this.s===0};We.lessThan=We.lt=function(e){return this.cmp(e)<0};We.lessThanOrEqualTo=We.lte=function(e){return this.cmp(e)<1};We.logarithm=We.log=function(e){var t,n=this,r=n.constructor,i=r.precision,o=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Pi))throw Error(oo+"NaN");if(n.s<1)throw Error(oo+(n.s?"NaN":"-Infinity"));return n.eq(Pi)?new r(0):(vn=!1,t=ws(Vd(n,o),Vd(e,o),o),vn=!0,Jt(t,i))};We.minus=We.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?I4(t,e):A4(t,(e.s=-e.s,e))};We.modulo=We.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(oo+"NaN");return n.s?(vn=!1,t=ws(n,e,0,1).times(e),vn=!0,n.minus(t)):Jt(new r(n),i)};We.naturalExponential=We.exp=function(){return T4(this)};We.naturalLogarithm=We.ln=function(){return Vd(this)};We.negated=We.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};We.plus=We.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?A4(t,e):I4(t,(e.s=-e.s,e))};We.precision=We.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(xl+e);if(t=Yn(i)+1,r=i.d.length-1,n=r*dn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};We.squareRoot=We.sqrt=function(){var e,t,n,r,i,o,a,c=this,f=c.constructor;if(c.s<1){if(!c.s)return new f(0);throw Error(oo+"NaN")}for(e=Yn(c),vn=!1,i=Math.sqrt(+c),i==0||i==1/0?(t=$o(c.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=ac((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new f(t)):r=new f(i.toString()),n=f.precision,i=a=n+3;;)if(o=r,r=o.plus(ws(c,o,a+2)).times(.5),$o(o.d).slice(0,a)===(t=$o(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&t=="4999"){if(Jt(o,n+1,0),o.times(o).eq(c)){r=o;break}}else if(t!="9999")break;a+=4}return vn=!0,Jt(r,n)};We.times=We.mul=function(e){var t,n,r,i,o,a,c,f,d,m=this,v=m.constructor,b=m.d,C=(e=new v(e)).d;if(!m.s||!e.s)return new v(0);for(e.s*=m.s,n=m.e+e.e,f=b.length,d=C.length,f<d&&(o=b,b=C,C=o,a=f,f=d,d=a),o=[],a=f+d,r=a;r--;)o.push(0);for(r=d;--r>=0;){for(t=0,i=f+r;i>r;)c=o[i]+C[r]*b[i-r-1]+t,o[i--]=c%gr|0,t=c/gr|0;o[i]=(o[i]+t)%gr|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,vn?Jt(e,v.precision):e};We.toDecimalPlaces=We.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(qo(e,0,sc),t===void 0?t=r.rounding:qo(t,0,8),Jt(n,e+Yn(n)+1,t))};We.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Al(r,!0):(qo(e,0,sc),t===void 0?t=i.rounding:qo(t,0,8),r=Jt(new i(r),e+1,t),n=Al(r,!0,e+1)),n};We.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?Al(i):(qo(e,0,sc),t===void 0?t=o.rounding:qo(t,0,8),r=Jt(new o(i),e+Yn(i)+1,t),n=Al(r.abs(),!1,e+Yn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};We.toInteger=We.toint=function(){var e=this,t=e.constructor;return Jt(new t(e),Yn(e)+1,t.rounding)};We.toNumber=function(){return+this};We.toPower=We.pow=function(e){var t,n,r,i,o,a,c=this,f=c.constructor,d=12,m=+(e=new f(e));if(!e.s)return new f(Pi);if(c=new f(c),!c.s){if(e.s<1)throw Error(oo+"Infinity");return c}if(c.eq(Pi))return c;if(r=f.precision,e.eq(Pi))return Jt(c,r);if(t=e.e,n=e.d.length-1,a=t>=n,o=c.s,a){if((n=m<0?-m:m)<=C4){for(i=new f(Pi),t=Math.ceil(r/dn+4),vn=!1;n%2&&(i=i.times(c),wP(i.d,t)),n=ac(n/2),n!==0;)c=c.times(c),wP(c.d,t);return vn=!0,e.s<0?new f(Pi).div(i):Jt(i,r)}}else if(o<0)throw Error(oo+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,c.s=1,vn=!1,i=e.times(Vd(c,r+d)),vn=!0,i=T4(i),i.s=o,i};We.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?(n=Yn(i),r=Al(i,n<=o.toExpNeg||n>=o.toExpPos)):(qo(e,1,sc),t===void 0?t=o.rounding:qo(t,0,8),i=Jt(new o(i),e,t),n=Yn(i),r=Al(i,e<=n||n<=o.toExpNeg,e)),r};We.toSignificantDigits=We.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(qo(e,1,sc),t===void 0?t=r.rounding:qo(t,0,8)),Jt(new r(n),e,t)};We.toString=We.valueOf=We.val=We.toJSON=We[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Yn(e),n=e.constructor;return Al(e,t<=n.toExpNeg||t>=n.toExpPos)};function A4(e,t){var n,r,i,o,a,c,f,d,m=e.constructor,v=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),vn?Jt(t,v):t;if(f=e.d,d=t.d,a=e.e,i=t.e,f=f.slice(),o=a-i,o){for(o<0?(r=f,o=-o,c=d.length):(r=d,i=a,c=f.length),a=Math.ceil(v/dn),c=a>c?a+1:c+1,o>c&&(o=c,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(c=f.length,o=d.length,c-o<0&&(o=c,r=d,d=f,f=r),n=0;o;)n=(f[--o]=f[o]+d[o]+n)/gr|0,f[o]%=gr;for(n&&(f.unshift(n),++i),c=f.length;f[--c]==0;)f.pop();return t.d=f,t.e=i,vn?Jt(t,v):t}function qo(e,t,n){if(e!==~~e||e<t||e>n)throw Error(xl+e)}function $o(e){var t,n,r,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)r=e[t]+"",n=dn-r.length,n&&(o+=fa(n)),o+=r;a=e[t],r=a+"",n=dn-r.length,n&&(o+=fa(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var ws=(function(){function e(r,i){var o,a=0,c=r.length;for(r=r.slice();c--;)o=r[c]*i+a,r[c]=o%gr|0,a=o/gr|0;return a&&r.unshift(a),r}function t(r,i,o,a){var c,f;if(o!=a)f=o>a?1:-1;else for(c=f=0;c<o;c++)if(r[c]!=i[c]){f=r[c]>i[c]?1:-1;break}return f}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*gr+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var c,f,d,m,v,b,C,P,N,R,D,F,L,U,G,q,W,Z,X=r.constructor,pe=r.s==i.s?1:-1,ae=r.d,le=i.d;if(!r.s)return new X(r);if(!i.s)throw Error(oo+"Division by zero");for(f=r.e-i.e,W=le.length,G=ae.length,C=new X(pe),P=C.d=[],d=0;le[d]==(ae[d]||0);)++d;if(le[d]>(ae[d]||0)&&--f,o==null?F=o=X.precision:a?F=o+(Yn(r)-Yn(i))+1:F=o,F<0)return new X(0);if(F=F/dn+2|0,d=0,W==1)for(m=0,le=le[0],F++;(d<G||m)&&F--;d++)L=m*gr+(ae[d]||0),P[d]=L/le|0,m=L%le|0;else{for(m=gr/(le[0]+1)|0,m>1&&(le=e(le,m),ae=e(ae,m),W=le.length,G=ae.length),U=W,N=ae.slice(0,W),R=N.length;R<W;)N[R++]=0;Z=le.slice(),Z.unshift(0),q=le[0],le[1]>=gr/2&&++q;do m=0,c=t(le,N,W,R),c<0?(D=N[0],W!=R&&(D=D*gr+(N[1]||0)),m=D/q|0,m>1?(m>=gr&&(m=gr-1),v=e(le,m),b=v.length,R=N.length,c=t(v,N,b,R),c==1&&(m--,n(v,W<b?Z:le,b))):(m==0&&(c=m=1),v=le.slice()),b=v.length,b<R&&v.unshift(0),n(N,v,R),c==-1&&(R=N.length,c=t(le,N,W,R),c<1&&(m++,n(N,W<R?Z:le,R))),R=N.length):c===0&&(m++,N=[0]),P[d++]=m,c&&N[0]?N[R++]=ae[U]||0:(N=[ae[U]],R=1);while((U++<G||N[0]!==void 0)&&F--)}return P[0]||P.shift(),C.e=f,Jt(C,a?o+Yn(C)+1:o)}})();function T4(e,t){var n,r,i,o,a,c,f=0,d=0,m=e.constructor,v=m.precision;if(Yn(e)>16)throw Error(Pb+Yn(e));if(!e.s)return new m(Pi);for(vn=!1,c=v,a=new m(.03125);e.abs().gte(.1);)e=e.times(a),d+=5;for(r=Math.log(ll(2,d))/Math.LN10*2+5|0,c+=r,n=i=o=new m(Pi),m.precision=c;;){if(i=Jt(i.times(e),c),n=n.times(++f),a=o.plus(ws(i,n,c)),$o(a.d).slice(0,c)===$o(o.d).slice(0,c)){for(;d--;)o=Jt(o.times(o),c);return m.precision=v,t==null?(vn=!0,Jt(o,v)):o}o=a}}function Yn(e){for(var t=e.e*dn,n=e.d[0];n>=10;n/=10)t++;return t}function Qv(e,t,n){if(t>e.LN10.sd())throw vn=!0,n&&(e.precision=n),Error(oo+"LN10 precision limit exceeded");return Jt(new e(e.LN10),t)}function fa(e){for(var t="";e--;)t+="0";return t}function Vd(e,t){var n,r,i,o,a,c,f,d,m,v=1,b=10,C=e,P=C.d,N=C.constructor,R=N.precision;if(C.s<1)throw Error(oo+(C.s?"NaN":"-Infinity"));if(C.eq(Pi))return new N(0);if(t==null?(vn=!1,d=R):d=t,C.eq(10))return t==null&&(vn=!0),Qv(N,d);if(d+=b,N.precision=d,n=$o(P),r=n.charAt(0),o=Yn(C),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)C=C.times(e),n=$o(C.d),r=n.charAt(0),v++;o=Yn(C),r>1?(C=new N("0."+n),o++):C=new N(r+"."+n.slice(1))}else return f=Qv(N,d+2,R).times(o+""),C=Vd(new N(r+"."+n.slice(1)),d-b).plus(f),N.precision=R,t==null?(vn=!0,Jt(C,R)):C;for(c=a=C=ws(C.minus(Pi),C.plus(Pi),d),m=Jt(C.times(C),d),i=3;;){if(a=Jt(a.times(m),d),f=c.plus(ws(a,new N(i),d)),$o(f.d).slice(0,d)===$o(c.d).slice(0,d))return c=c.times(2),o!==0&&(c=c.plus(Qv(N,d+2,R).times(o+""))),c=ws(c,new N(v),d),N.precision=R,t==null?(vn=!0,Jt(c,R)):c;c=f,i+=2}}function xP(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=ac(n/dn),e.d=[],r=(n+1)%dn,n<0&&(r+=dn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=dn;r<i;)e.d.push(+t.slice(r,r+=dn));t=t.slice(r),r=dn-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),vn&&(e.e>Ep||e.e<-Ep))throw Error(Pb+n)}else e.s=0,e.e=0,e.d=[0];return e}function Jt(e,t,n){var r,i,o,a,c,f,d,m,v=e.d;for(a=1,o=v[0];o>=10;o/=10)a++;if(r=t-a,r<0)r+=dn,i=t,d=v[m=0];else{if(m=Math.ceil((r+1)/dn),o=v.length,m>=o)return e;for(d=o=v[m],a=1;o>=10;o/=10)a++;r%=dn,i=r-dn+a}if(n!==void 0&&(o=ll(10,a-i-1),c=d/o%10|0,f=t<0||v[m+1]!==void 0||d%o,f=n<4?(c||f)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||f||n==6&&(r>0?i>0?d/ll(10,a-i):0:v[m-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return f?(o=Yn(e),v.length=1,t=t-o-1,v[0]=ll(10,(dn-t%dn)%dn),e.e=ac(-t/dn)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(r==0?(v.length=m,o=1,m--):(v.length=m+1,o=ll(10,dn-r),v[m]=i>0?(d/ll(10,a-i)%ll(10,i)|0)*o:0),f)for(;;)if(m==0){(v[0]+=o)==gr&&(v[0]=1,++e.e);break}else{if(v[m]+=o,v[m]!=gr)break;v[m--]=0,o=1}for(r=v.length;v[--r]===0;)v.pop();if(vn&&(e.e>Ep||e.e<-Ep))throw Error(Pb+Yn(e));return e}function I4(e,t){var n,r,i,o,a,c,f,d,m,v,b=e.constructor,C=b.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new b(e),vn?Jt(t,C):t;if(f=e.d,v=t.d,r=t.e,d=e.e,f=f.slice(),a=d-r,a){for(m=a<0,m?(n=f,a=-a,c=v.length):(n=v,r=d,c=f.length),i=Math.max(Math.ceil(C/dn),c)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=f.length,c=v.length,m=i<c,m&&(c=i),i=0;i<c;i++)if(f[i]!=v[i]){m=f[i]<v[i];break}a=0}for(m&&(n=f,f=v,v=n,t.s=-t.s),c=f.length,i=v.length-c;i>0;--i)f[c++]=0;for(i=v.length;i>a;){if(f[--i]<v[i]){for(o=i;o&&f[--o]===0;)f[o]=gr-1;--f[o],f[i]+=gr}f[i]-=v[i]}for(;f[--c]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(t.d=f,t.e=r,vn?Jt(t,C):t):new b(0)}function Al(e,t,n){var r,i=Yn(e),o=$o(e.d),a=o.length;return t?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+fa(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+fa(-i-1)+o,n&&(r=n-a)>0&&(o+=fa(r))):i>=a?(o+=fa(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+fa(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=fa(r))),e.s<0?"-"+o:o}function wP(e,t){if(e.length>t)return e.length=t,!0}function P4(e){var t,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(xl+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return xP(a,o.toString())}else if(typeof o!="string")throw Error(xl+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,gee.test(o))xP(a,o);else throw Error(xl+o)}if(i.prototype=We,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=P4,i.config=i.set=vee,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function vee(e){if(!e||typeof e!="object")throw Error(oo+"Object expected");var t,n,r,i=["precision",1,sc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(ac(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(xl+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(xl+n+": "+r);return this}var Nb=P4(mee);Pi=new Nb(1);const Gt=Nb;var yee=e=>e,N4={},R4=e=>e===N4,bP=e=>function t(){return arguments.length===0||arguments.length===1&&R4(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},O4=(e,t)=>e===1?t:bP(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(a=>a!==N4).length;return o>=e?t(...r):O4(e-o,bP(function(){for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];var d=r.map(m=>R4(m)?c.shift():m);return t(...d,...c)}))}),xee=e=>O4(e.length,e),Lx=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},wee=xee((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),bee=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return yee;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce((c,f)=>f(c),o(...arguments))}};function k4(e){var t;return e===0?t=1:t=Math.floor(new Gt(e).abs().log(10).toNumber())+1,t}function M4(e,t,n){for(var r=new Gt(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var D4=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},L4=(e,t,n)=>{if(e.lte(0))return new Gt(0);var r=k4(e.toNumber()),i=new Gt(10).pow(r),o=e.div(i),a=r!==1?.05:.1,c=new Gt(Math.ceil(o.div(a).toNumber())).add(n).mul(a),f=c.mul(i);return t?new Gt(f.toNumber()):new Gt(Math.ceil(f.toNumber()))},Eee=(e,t,n)=>{var r=new Gt(1),i=new Gt(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new Gt(10).pow(k4(e)-1),i=new Gt(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Gt(Math.floor(e)))}else e===0?i=new Gt(Math.floor((t-1)/2)):n||(i=new Gt(Math.floor(e)));var a=Math.floor((t-1)/2),c=bee(wee(f=>i.add(new Gt(f-a).mul(r)).toNumber()),Lx);return c(0,t)},B4=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new Gt(0),tickMin:new Gt(0),tickMax:new Gt(0)};var a=L4(new Gt(n).sub(t).div(r-1),i,o),c;t<=0&&n>=0?c=new Gt(0):(c=new Gt(t).add(n).div(2),c=c.sub(new Gt(c).mod(a)));var f=Math.ceil(c.sub(t).div(a).toNumber()),d=Math.ceil(new Gt(n).sub(c).div(a).toNumber()),m=f+d+1;return m>r?B4(t,n,r,i,o+1):(m<r&&(d=n>0?d+(r-m):d,f=n>0?f:f+(r-m)),{step:a,tickMin:c.sub(new Gt(f).mul(a)),tickMax:c.add(new Gt(d).mul(a))})},_ee=function(t){var[n,r]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),[c,f]=D4([n,r]);if(c===-1/0||f===1/0){var d=f===1/0?[c,...Lx(0,i-1).map(()=>1/0)]:[...Lx(0,i-1).map(()=>-1/0),f];return n>r?d.reverse():d}if(c===f)return Eee(c,i,o);var{step:m,tickMin:v,tickMax:b}=B4(c,f,a,o,0),C=M4(v,b.add(new Gt(.1).mul(m)),m);return n>r?C.reverse():C},See=function(t,n){var[r,i]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,c]=D4([r,i]);if(a===-1/0||c===1/0)return[r,i];if(a===c)return[a];var f=Math.max(n,2),d=L4(new Gt(c).sub(a).div(f-1),o,0),m=[...M4(new Gt(a),new Gt(c),d),c];return o===!1&&(m=m.map(v=>Math.round(v))),r>i?m.reverse():m},F4=e=>e.rootProps.maxBarSize,Cee=e=>e.rootProps.barGap,j4=e=>e.rootProps.barCategoryGap,Aee=e=>e.rootProps.barSize,cf=e=>e.rootProps.stackOffset,U4=e=>e.rootProps.reverseStackOrder,Rb=e=>e.options.chartName,Ob=e=>e.rootProps.syncId,V4=e=>e.rootProps.syncMethod,kb=e=>e.options.eventEmitter,Kn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ms={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ti={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Tm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Tee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ms.angleAxisId,includeHidden:!1,name:void 0,reversed:ms.reversed,scale:ms.scale,tick:ms.tick,tickCount:void 0,ticks:void 0,type:ms.type,unit:void 0},Iee={allowDataOverflow:Ti.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ti.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ti.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ti.scale,tick:Ti.tick,tickCount:Ti.tickCount,ticks:void 0,type:Ti.type,unit:void 0},Pee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ms.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ms.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ms.scale,tick:ms.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Nee={allowDataOverflow:Ti.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ti.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ti.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ti.scale,tick:Ti.tick,tickCount:Ti.tickCount,ticks:void 0,type:"category",unit:void 0},Mb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Pee:Tee,Db=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Nee:Iee,Im=e=>e.polarOptions,Lb=fe([Ms,Ds,ir],jM),z4=fe([Im,Lb],(e,t)=>{if(e!=null)return $r(e.innerRadius,t,0)}),$4=fe([Im,Lb],(e,t)=>{if(e!=null)return $r(e.outerRadius,t,t*.8)}),Ree=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},G4=fe([Im],Ree);fe([Mb,G4],Tm);var H4=fe([Lb,z4,$4],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});fe([Db,H4],Tm);var q4=fe([Dt,Im,z4,$4,Ms,Ds],(e,t,n,r,i,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:a,cy:c,startAngle:f,endAngle:d}=t;return{cx:$r(a,i,i/2),cy:$r(c,o,o/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:d,clockWise:!1}}}),xn=(e,t)=>t,df=(e,t,n)=>n;function Bb(e){return e?.id}function W4(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:o}=n,a=new Map;return e.forEach(c=>{var f,d=(f=c.data)!==null&&f!==void 0?f:r;if(!(d==null||d.length===0)){var m=Bb(c);d.forEach((v,b)=>{var C=o==null||i?b:String(Vt(v,o,null)),P=Vt(v,c.dataKey,0),N;a.has(C)?N=a.get(C):N={},Object.assign(N,{[m]:P}),a.set(C,N)})}}),Array.from(a.values())}function Pm(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Nm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Rm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Oee(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var sr=e=>{var t=Dt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},lc=e=>e.tooltip.settings.axisId;function EP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _p(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(n),!0).forEach(function(r){kee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kee(e,t,n){return(t=Mee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mee(e){var t=Dee(e,"string");return typeof t=="symbol"?t:t+""}function Dee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bx=[0,"auto"],pr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},K4=(e,t)=>e.cartesianAxis.xAxis[t],Ko=(e,t)=>{var n=K4(e,t);return n??pr},mr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Bx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ef},Y4=(e,t)=>e.cartesianAxis.yAxis[t],Yo=(e,t)=>{var n=Y4(e,t);return n??mr},X4={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Fb=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??X4},Cn=(e,t,n)=>{switch(t){case"xAxis":return Ko(e,n);case"yAxis":return Yo(e,n);case"zAxis":return Fb(e,n);case"angleAxis":return Mb(e,n);case"radiusAxis":return Db(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Lee=(e,t,n)=>{switch(t){case"xAxis":return Ko(e,n);case"yAxis":return Yo(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},ff=(e,t,n)=>{switch(t){case"xAxis":return Ko(e,n);case"yAxis":return Yo(e,n);case"angleAxis":return Mb(e,n);case"radiusAxis":return Db(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},J4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function jb(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Om=e=>e.graphicalItems.cartesianItems,Bee=fe([xn,df],jb),Ub=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),hf=fe([Om,Cn,Bee],Ub,{memoizeOptions:{resultEqualityCheck:Rm}}),Z4=fe([hf],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Pm)),Q4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Fee=fe([hf],Q4),Vb=e=>e.map(t=>t.data).filter(Boolean).flat(1),jee=fe([hf],Vb,{memoizeOptions:{resultEqualityCheck:Rm}}),zb=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},$b=fe([jee,Ib],zb),Gb=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:Vt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Vt(i,r)}))):e.map(r=>({value:r})),km=fe([$b,Cn,hf],Gb);function e8(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function x0(e){if(ro(e)||e instanceof Date){var t=Number(e);if(Xt(t))return t}}function _P(e){if(Array.isArray(e)){var t=[x0(e[0]),x0(e[1])];return ba(t)?t:void 0}var n=x0(e);if(n!=null)return[n,n]}function Ps(e){return e.map(x0).filter(Rq)}function Uee(e,t,n){return!n||typeof t!="number"||Mi(t)?[]:n.length?Ps(n.flatMap(r=>{var i=Vt(e,r.dataKey),o,a;if(Array.isArray(i)?[o,a]=i:o=a=i,!(!Xt(o)||!Xt(a)))return[t-o,t+a]})):[]}var ar=e=>{var t=sr(e),n=lc(e);return ff(e,t,n)},pf=fe([ar],e=>e?.dataKey),Vee=fe([Z4,Ib,ar],W4),t8=(e,t,n,r)=>{var i={},o=t.reduce((a,c)=>{if(c.stackId==null)return a;var f=a[c.stackId];return f==null&&(f=[]),f.push(c),a[c.stackId]=f,a},i);return Object.fromEntries(Object.entries(o).map(a=>{var[c,f]=a,d=r?[...f].reverse():f,m=d.map(Bb);return[c,{stackedData:sY(e,m,n),graphicalItems:d}]}))},Fx=fe([Vee,Z4,cf,U4],t8),n8=(e,t,n,r)=>{var{dataStartIndex:i,dataEndIndex:o}=t;if(r==null&&n!=="zAxis"){var a=dY(e,i,o);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},zee=fe([Cn],e=>e.allowDataOverflow),Hb=e=>{var t;if(e==null||!("domain"in e))return Bx;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=Ps(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Bx},qb=fe([Cn],Hb),Wb=fe([qb,zee],S4),$ee=fe([Fx,Bs,xn,Wb],n8,{memoizeOptions:{resultEqualityCheck:Nm}}),Mm=e=>e.errorBars,Gee=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>e8(n,r)),Sp=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),a=Math.min(...o),c=Math.max(...o);return[a,c]}},Kb=(e,t,n,r,i)=>{var o,a;if(n.length>0&&e.forEach(c=>{n.forEach(f=>{var d,m,v=(d=r[f.id])===null||d===void 0?void 0:d.filter(D=>e8(i,D)),b=Vt(c,(m=t.dataKey)!==null&&m!==void 0?m:f.dataKey),C=Uee(c,b,v);if(C.length>=2){var P=Math.min(...C),N=Math.max(...C);(o==null||P<o)&&(o=P),(a==null||N>a)&&(a=N)}var R=_P(b);R!=null&&(o=o==null?R[0]:Math.min(o,R[0]),a=a==null?R[1]:Math.max(a,R[1]))})}),t?.dataKey!=null&&e.forEach(c=>{var f=_P(Vt(c,t.dataKey));f!=null&&(o=o==null?f[0]:Math.min(o,f[0]),a=a==null?f[1]:Math.max(a,f[1]))}),Xt(o)&&Xt(a))return[o,a]},Hee=fe([$b,Cn,Fee,Mm,xn],Kb,{memoizeOptions:{resultEqualityCheck:Nm}});function qee(e){var{value:t}=e;if(ro(t)||t instanceof Date)return t}var Wee=(e,t,n)=>{var r=e.map(qee).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&xk(r))?$M(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},r8=e=>e.referenceElements.dots,uc=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),Kee=fe([r8,xn,df],uc),i8=e=>e.referenceElements.areas,Yee=fe([i8,xn,df],uc),o8=e=>e.referenceElements.lines,Xee=fe([o8,xn,df],uc),s8=(e,t)=>{if(e!=null){var n=Ps(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Jee=fe(Kee,xn,s8),a8=(e,t)=>{if(e!=null){var n=Ps(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Zee=fe([Yee,xn],a8);function Qee(e){var t;if(e.x!=null)return Ps([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.x);return n==null||n.length===0?[]:Ps(n)}function ete(e){var t;if(e.y!=null)return Ps([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.y);return n==null||n.length===0?[]:Ps(n)}var l8=(e,t)=>{if(e!=null){var n=e.flatMap(r=>t==="xAxis"?Qee(r):ete(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},tte=fe([Xee,xn],l8),nte=fe(Jee,tte,Zee,(e,t,n)=>Sp(e,n,t)),Yb=(e,t,n,r,i,o,a,c)=>{if(n!=null)return n;var f=a==="vertical"&&c==="xAxis"||a==="horizontal"&&c==="yAxis",d=f?Sp(r,o,i):Sp(o,i);return pee(t,d,e.allowDataOverflow)},rte=fe([Cn,qb,Wb,$ee,Hee,nte,Dt,xn],Yb,{memoizeOptions:{resultEqualityCheck:Nm}}),ite=[0,1],Xb=(e,t,n,r,i,o,a)=>{if(!((e==null||n==null||n.length===0)&&a===void 0)){var{dataKey:c,type:f}=e,d=Ol(t,o);if(d&&c==null){var m;return $M(0,(m=n?.length)!==null&&m!==void 0?m:0)}return f==="category"?Wee(r,e,d):i==="expand"?ite:a}},Jb=fe([Cn,Dt,$b,km,cf,xn,rte],Xb),u8=(e,t,n,r,i)=>{if(e!=null){var{scale:o,type:a}=e;if(o==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof o=="string"){var c="scale".concat(Xd(o));return c in wd?c:"point"}}},cc=fe([Cn,Dt,J4,Rb,xn],u8);function ote(e){if(e!=null){if(e in wd)return wd[e]();var t="scale".concat(Xd(e));if(t in wd)return wd[t]()}}function Zb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=ote(t);if(i!=null){var o=i.domain(n).range(r);return tY(o),o}}}var Qb=(e,t,n)=>{var r=Hb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&ba(e))return _ee(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&ba(e))return See(e,t.tickCount,t.allowDecimals)}},eE=fe([Jb,ff,cc],Qb),tE=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&ba(t)&&Array.isArray(n)&&n.length>0){var i=t[0],o=n[0],a=t[1],c=n[n.length-1];return[Math.min(i,o),Math.max(a,c)]}return t},ste=fe([Cn,Jb,eE,xn],tE),ate=fe(km,Cn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Ps(e.map(v=>v.value))).sort((v,b)=>v-b),i=r[0],o=r[r.length-1];if(i==null||o==null)return 1/0;var a=o-i;if(a===0)return 1/0;for(var c=0;c<r.length-1;c++){var f=r[c],d=r[c+1];if(!(f==null||d==null)){var m=d-f;n=Math.min(n,m)}}return n/a}}),c8=fe(ate,Dt,j4,ir,(e,t,n,r,i)=>i,(e,t,n,r,i)=>{if(!Xt(e))return 0;var o=t==="vertical"?r.height:r.width;if(i==="gap")return e*o/2;if(i==="no-gap"){var a=$r(n,e*o),c=e*o/2;return c-a-(c-a)/o*a}return 0}),lte=(e,t,n)=>{var r=Ko(e,t);return r==null||typeof r.padding!="string"?0:c8(e,"xAxis",t,n,r.padding)},ute=(e,t,n)=>{var r=Yo(e,t);return r==null||typeof r.padding!="string"?0:c8(e,"yAxis",t,n,r.padding)},cte=fe(Ko,lte,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),dte=fe(Yo,ute,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),fte=fe([ir,cte,hm,fm,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),hte=fe([ir,Dt,dte,hm,fm,(e,t,n)=>n],(e,t,n,r,i,o)=>{var{padding:a}=i;return o?[r.height-a.bottom,a.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),mf=(e,t,n,r)=>{var i;switch(t){case"xAxis":return fte(e,n,r);case"yAxis":return hte(e,n,r);case"zAxis":return(i=Fb(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return G4(e);case"radiusAxis":return H4(e,n);default:return}},d8=fe([Cn,mf],Tm),qu=fe([Cn,cc,ste,d8],Zb);fe([hf,Mm,xn],Gee);function f8(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Dm=(e,t)=>t,Lm=(e,t,n)=>n,pte=fe(cm,Dm,Lm,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(f8)),mte=fe(dm,Dm,Lm,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(f8)),h8=(e,t)=>({width:e.width,height:t.height}),gte=(e,t)=>{var n=typeof t.width=="number"?t.width:ef;return{width:n,height:e.height}},p8=fe(ir,Ko,h8),vte=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},yte=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},xte=fe(Ds,ir,pte,Dm,Lm,(e,t,n,r,i)=>{var o={},a;return n.forEach(c=>{var f=h8(t,c);a==null&&(a=vte(t,r,e));var d=r==="top"&&!i||r==="bottom"&&i;o[c.id]=a-Number(d)*f.height,a+=(d?-1:1)*f.height}),o}),wte=fe(Ms,ir,mte,Dm,Lm,(e,t,n,r,i)=>{var o={},a;return n.forEach(c=>{var f=gte(t,c);a==null&&(a=yte(t,r,e));var d=r==="left"&&!i||r==="right"&&i;o[c.id]=a-Number(d)*f.width,a+=(d?-1:1)*f.width}),o}),bte=(e,t)=>{var n=Ko(e,t);if(n!=null)return xte(e,n.orientation,n.mirror)},Ete=fe([ir,Ko,bte,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n?.[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),_te=(e,t)=>{var n=Yo(e,t);if(n!=null)return wte(e,n.orientation,n.mirror)},Ste=fe([ir,Yo,_te,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n?.[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),m8=fe(ir,Yo,(e,t)=>{var n=typeof t.width=="number"?t.width:ef;return{width:n,height:e.height}}),SP=(e,t,n)=>{switch(t){case"xAxis":return p8(e,n).width;case"yAxis":return m8(e,n).height;default:return}},g8=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:a}=n,c=Ol(e,r),f=t.map(d=>d.value);if(a&&c&&o==="category"&&i&&xk(f))return f}},nE=fe([Dt,km,Cn,xn],g8),v8=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,a=Ol(e,r);if(a&&(i==="number"||o!=="auto"))return t.map(c=>c.value)}},rE=fe([Dt,km,ff,xn],v8),CP=fe([Dt,Lee,cc,qu,nE,rE,mf,eE,xn],(e,t,n,r,i,o,a,c,f)=>{if(t!=null){var d=Ol(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:o,duplicateDomain:i,isCategorical:d,niceTicks:c,range:a,realScaleType:n,scale:r}}}),Cte=(e,t,n,r,i,o,a,c,f)=>{if(!(t==null||r==null)){var d=Ol(e,f),{type:m,ticks:v,tickCount:b}=t,C=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,P=m==="category"&&r.bandwidth?r.bandwidth()/C:0;P=f==="angleAxis"&&o!=null&&o.length>=2?vr(o[0]-o[1])*2*P:P;var N=v||i;if(N){var R=N.map((D,F)=>{var L=a?a.indexOf(D):D;return{index:F,coordinate:r(L)+P,value:D,offset:P}});return R.filter(D=>Xt(D.coordinate))}return d&&c?c.map((D,F)=>({coordinate:r(D)+P,value:D,index:F,offset:P})).filter(D=>Xt(D.coordinate)):r.ticks?r.ticks(b).map(D=>({coordinate:r(D)+P,value:D,offset:P})):r.domain().map((D,F)=>({coordinate:r(D)+P,value:a?a[D]:D,index:F,offset:P}))}},y8=fe([Dt,ff,cc,qu,eE,mf,nE,rE,xn],Cte),Ate=(e,t,n,r,i,o,a)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var c=Ol(e,a),{tickCount:f}=t,d=0;return d=a==="angleAxis"&&r?.length>=2?vr(r[0]-r[1])*2*d:d,c&&o?o.map((m,v)=>({coordinate:n(m)+d,value:m,index:v,offset:d})):n.ticks?n.ticks(f).map(m=>({coordinate:n(m)+d,value:m,offset:d})):n.domain().map((m,v)=>({coordinate:n(m)+d,value:i?i[m]:m,index:v,offset:d}))}},Ea=fe([Dt,ff,qu,mf,nE,rE,xn],Ate),_a=fe(Cn,qu,(e,t)=>{if(!(e==null||t==null))return _p(_p({},e),{},{scale:t})}),Tte=fe([Cn,cc,Jb,d8],Zb),Ite=fe((e,t,n)=>Fb(e,n),Tte,(e,t)=>{if(!(e==null||t==null))return _p(_p({},e),{},{scale:t})}),Pte=fe([Dt,cm,dm],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),x8=e=>e.options.defaultTooltipEventType,w8=e=>e.options.validateTooltipEventTypes;function b8(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function iE(e,t){var n=x8(e),r=w8(e);return b8(t,n,r)}function Nte(e){return Ge(t=>iE(t,e))}var E8=(e,t)=>{var n,r=Number(t);if(!(Mi(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},Rte=e=>e.tooltip.settings,ga={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Ote={itemInteraction:{click:ga,hover:ga},axisInteraction:{click:ga,hover:ga},keyboardInteraction:ga,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},_8=hi({name:"tooltip",initialState:Ote,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:gn()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ao(e).tooltipItemPayloads.indexOf(n);i>-1&&(e.tooltipItemPayloads[i]=r)},prepare:gn()},removeTooltipEntrySettings:{reducer(e,t){var n=Ao(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:gn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:kte,replaceTooltipEntrySettings:Mte,removeTooltipEntrySettings:Dte,setTooltipSettingsState:Lte,setActiveMouseOverItemIndex:S8,mouseLeaveItem:Bte,mouseLeaveChart:C8,setActiveClickItemIndex:Fte,setMouseOverAxisIndex:A8,setMouseClickAxisIndex:jte,setSyncInteraction:jx,setKeyboardInteraction:Ux}=_8.actions,Ute=_8.reducer;function AP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function n0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(n),!0).forEach(function(r){Vte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vte(e,t,n){return(t=zte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zte(e){var t=$te(e,"string");return typeof t=="symbol"?t:t+""}function $te(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gte(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Hte(e){return e.index!=null}var T8=(e,t,n,r)=>{if(t==null)return ga;var i=Gte(e,t,n);if(i==null)return ga;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(Hte(i)){if(o)return n0(n0({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return n0(n0({},ga),{},{coordinate:i.coordinate})};function qte(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function Wte(e,t){var n=qte(e),r=t[0],i=t[1];if(n===void 0)return!1;var o=Math.min(r,i),a=Math.max(r,i);return n>=o&&n<=a}function Kte(e,t,n){if(n==null||t==null)return!0;var r=Vt(e,t);return r==null||!ba(n)?!0:Wte(r,n)}var oE=(e,t,n,r)=>{var i=e?.index;if(i==null)return null;var o=Number(i);if(!Xt(o))return i;var a=0,c=1/0;t.length>0&&(c=t.length-1);var f=Math.max(a,Math.min(o,c)),d=t[f];return d==null||Kte(d,n,r)?String(f):null},I8=(e,t,n,r,i,o,a,c)=>{if(!(o==null||c==null)){var f=a[0],d=f==null?void 0:c(f.positions,o);if(d!=null)return d;var m=i?.[Number(o)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:m.coordinate}}}},P8=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&r!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(a=>{var c;return((c=a.settings)===null||c===void 0?void 0:c.graphicalItemId)===i})},gf=e=>e.options.tooltipPayloadSearcher,dc=e=>e.tooltip;function TP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function IP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TP(Object(n),!0).forEach(function(r){Yte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yte(e,t,n){return(t=Xte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xte(e){var t=Jte(e,"string");return typeof t=="symbol"?t:t+""}function Jte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zte(e,t){return e??t}var N8=(e,t,n,r,i,o,a)=>{if(!(t==null||o==null)){var{chartData:c,computedData:f,dataStartIndex:d,dataEndIndex:m}=n,v=[];return e.reduce((b,C)=>{var P,{dataDefinedOnItem:N,settings:R}=C,D=Zte(N,c),F=Array.isArray(D)?hM(D,d,m):D,L=(P=R?.dataKey)!==null&&P!==void 0?P:r,U=R?.nameKey,G;if(r&&Array.isArray(F)&&!Array.isArray(F[0])&&a==="axis"?G=wk(F,r,i):G=o(F,t,f,U),Array.isArray(G))G.forEach(W=>{var Z=IP(IP({},R),{},{name:W.name,unit:W.unit,color:void 0,fill:void 0});b.push(RT({tooltipEntrySettings:Z,dataKey:W.dataKey,payload:W.payload,value:Vt(W.payload,W.dataKey),name:W.name}))});else{var q;b.push(RT({tooltipEntrySettings:R,dataKey:L,payload:G,value:Vt(G,L),name:(q=Vt(G,U))!==null&&q!==void 0?q:R?.name}))}return b},v)}},sE=fe([ar,Dt,J4,Rb,sr],u8),Qte=fe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),ene=fe([sr,lc],jb),fc=fe([Qte,ar,ene],Ub,{memoizeOptions:{resultEqualityCheck:Rm}}),tne=fe([fc],e=>e.filter(Pm)),nne=fe([fc],Vb,{memoizeOptions:{resultEqualityCheck:Rm}}),hc=fe([nne,Bs],zb),rne=fe([tne,Bs,ar],W4),aE=fe([hc,ar,fc],Gb),R8=fe([ar],Hb),ine=fe([ar],e=>e.allowDataOverflow),O8=fe([R8,ine],S4),one=fe([fc],e=>e.filter(Pm)),sne=fe([rne,one,cf,U4],t8),ane=fe([sne,Bs,sr,O8],n8),lne=fe([fc],Q4),une=fe([hc,ar,lne,Mm,sr],Kb,{memoizeOptions:{resultEqualityCheck:Nm}}),cne=fe([r8,sr,lc],uc),dne=fe([cne,sr],s8),fne=fe([i8,sr,lc],uc),hne=fe([fne,sr],a8),pne=fe([o8,sr,lc],uc),mne=fe([pne,sr],l8),gne=fe([dne,mne,hne],Sp),vne=fe([ar,R8,O8,ane,une,gne,Dt,sr],Yb),vf=fe([ar,Dt,hc,aE,cf,sr,vne],Xb),yne=fe([vf,ar,sE],Qb),xne=fe([ar,vf,yne,sr],tE),k8=e=>{var t=sr(e),n=lc(e),r=!1;return mf(e,t,n,r)},M8=fe([ar,k8],Tm),D8=fe([ar,sE,xne,M8],Zb),wne=fe([Dt,aE,ar,sr],g8),bne=fe([Dt,aE,ar,sr],v8),Ene=(e,t,n,r,i,o,a,c)=>{if(t){var{type:f}=t,d=Ol(e,c);if(r){var m=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,v=f==="category"&&r.bandwidth?r.bandwidth()/m:0;return v=c==="angleAxis"&&i!=null&&i?.length>=2?vr(i[0]-i[1])*2*v:v,d&&a?a.map((b,C)=>({coordinate:r(b)+v,value:b,index:C,offset:v})):r.domain().map((b,C)=>({coordinate:r(b)+v,value:o?o[b]:b,index:C,offset:v}))}}},Fs=fe([Dt,ar,sE,D8,k8,wne,bne,sr],Ene),lE=fe([x8,w8,Rte],(e,t,n)=>b8(n.shared,e,t)),L8=e=>e.tooltip.settings.trigger,uE=e=>e.tooltip.settings.defaultIndex,yf=fe([dc,lE,L8,uE],T8),Sa=fe([yf,hc,pf,vf],oE),B8=fe([Fs,Sa],E8),cE=fe([yf],e=>{if(e)return e.dataKey}),_ne=fe([yf],e=>{if(e)return e.graphicalItemId}),F8=fe([dc,lE,L8,uE],P8),Sne=fe([Ms,Ds,Dt,ir,Fs,uE,F8,gf],I8),Cne=fe([yf,Sne],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Ane=fe([yf],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),Tne=fe([F8,Sa,Bs,pf,B8,gf,lE],N8);fe([Tne],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function PP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function NP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(n),!0).forEach(function(r){Ine(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ine(e,t,n){return(t=Pne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pne(e){var t=Nne(e,"string");return typeof t=="symbol"?t:t+""}function Nne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rne=()=>Ge(ar),One=()=>{var e=Rne(),t=Ge(Fs),n=Ge(D8);return rp(!e||!n?void 0:NP(NP({},e),{},{scale:n}),t)};function RP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(n),!0).forEach(function(r){kne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kne(e,t,n){return(t=Mne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mne(e){var t=Dne(e,"string");return typeof t=="symbol"?t:t+""}function Dne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lne=(e,t,n,r)=>{var i=t.find(o=>o&&o.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.chartY};if(e==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},Bne=(e,t,n,r)=>{var i=t.find(d=>d&&d.index===n);if(i){if(e==="centric"){var o=i.coordinate,{radius:a}=r;return vu(vu(vu({},r),Wn(r.cx,r.cy,a,o)),{},{angle:o,radius:a})}var c=i.coordinate,{angle:f}=r;return vu(vu(vu({},r),Wn(r.cx,r.cy,c,f)),{},{angle:f,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Fne(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}var j8=(e,t,n,r,i)=>{var o,a=(o=t?.length)!==null&&o!==void 0?o:0;if(a<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<a;c++){var f,d,m,v,b,C=c>0?(f=n[c-1])===null||f===void 0?void 0:f.coordinate:(d=n[a-1])===null||d===void 0?void 0:d.coordinate,P=(m=n[c])===null||m===void 0?void 0:m.coordinate,N=c>=a-1?(v=n[0])===null||v===void 0?void 0:v.coordinate:(b=n[c+1])===null||b===void 0?void 0:b.coordinate,R=void 0;if(!(C==null||P==null||N==null))if(vr(P-C)!==vr(N-P)){var D=[];if(vr(N-P)===vr(i[1]-i[0])){R=N;var F=P+i[1]-i[0];D[0]=Math.min(F,(F+C)/2),D[1]=Math.max(F,(F+C)/2)}else{R=C;var L=N+i[1]-i[0];D[0]=Math.min(P,(L+P)/2),D[1]=Math.max(P,(L+P)/2)}var U=[Math.min(P,(R+P)/2),Math.max(P,(R+P)/2)];if(e>U[0]&&e<=U[1]||e>=D[0]&&e<=D[1]){var G;return(G=n[c])===null||G===void 0?void 0:G.index}}else{var q=Math.min(C,N),W=Math.max(C,N);if(e>(q+P)/2&&e<=(W+P)/2){var Z;return(Z=n[c])===null||Z===void 0?void 0:Z.index}}}else if(t)for(var X=0;X<a;X++){var pe=t[X];if(pe!=null){var ae=t[X+1],le=t[X-1];if(X===0&&ae!=null&&e<=(pe.coordinate+ae.coordinate)/2||X===a-1&&le!=null&&e>(pe.coordinate+le.coordinate)/2||X>0&&X<a-1&&le!=null&&ae!=null&&e>(pe.coordinate+le.coordinate)/2&&e<=(pe.coordinate+ae.coordinate)/2)return pe.index}}return-1},jne=()=>Ge(Rb),dE=(e,t)=>t,U8=(e,t,n)=>n,fE=(e,t,n,r)=>r,Une=fe(Fs,e=>em(e,t=>t.coordinate)),hE=fe([dc,dE,U8,fE],T8),pE=fe([hE,hc,pf,vf],oE),Vne=(e,t,n)=>{if(t!=null){var r=dc(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},V8=fe([dc,dE,U8,fE],P8),Cp=fe([Ms,Ds,Dt,ir,Fs,fE,V8,gf],I8),zne=fe([hE,Cp],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),z8=fe([Fs,pE],E8),$ne=fe([V8,pE,Bs,pf,z8,gf,dE],N8),Gne=fe([hE,pE],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Hne=(e,t,n,r,i,o,a)=>{if(!(!e||!n||!r||!i)&&Fne(e,a)){var c=fY(e,t),f=j8(c,o,i,n,r),d=Lne(t,i,f,e);return{activeIndex:String(f),activeCoordinate:d}}},qne=(e,t,n,r,i,o,a)=>{if(!(!e||!r||!i||!o||!n)){var c=PJ(e,n);if(c){var f=hY(c,t),d=j8(f,a,o,r,i),m=Bne(t,o,d,c);return{activeIndex:String(d),activeCoordinate:m}}}},Wne=(e,t,n,r,i,o,a,c)=>{if(!(!e||!t||!r||!i||!o))return t==="horizontal"||t==="vertical"?Hne(e,t,r,i,o,a,c):qne(e,t,n,r,i,o,a)},Kne=fe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var r=e[t];if(r!=null)return n?r.panoramaElement:r.element}}),Yne=fe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(r=>parseInt(r,10)).concat(Object.values(Kn)),n=Array.from(new Set(t));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Oee}});function OP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(n),!0).forEach(function(r){Xne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xne(e,t,n){return(t=Jne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jne(e){var t=Zne(e,"string");return typeof t=="symbol"?t:t+""}function Zne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qne={},ere={zIndexMap:Object.values(Kn).reduce((e,t)=>kP(kP({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),Qne)},tre=new Set(Object.values(Kn));function nre(e){return tre.has(e)}var $8=hi({name:"zIndex",initialState:ere,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:gn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!nre(n)&&delete e.zIndexMap[n])},prepare:gn()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:r,isPanorama:i}=t.payload;e.zIndexMap[n]?i?e.zIndexMap[n].panoramaElement=r:e.zIndexMap[n].element=r:e.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:gn()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:gn()}}}),{registerZIndexPortal:rre,unregisterZIndexPortal:ire,registerZIndexPortalElement:ore,unregisterZIndexPortalElement:sre}=$8.actions,are=$8.reducer;function pi(e){var{zIndex:t,children:n}=e,r=GY(),i=r&&t!==void 0&&t!==0,o=Nr(),a=Zt();k.useLayoutEffect(()=>i?(a(rre({zIndex:t})),()=>{a(ire({zIndex:t}))}):Jd,[a,t,i]);var c=Ge(f=>Kne(f,t,o));return i?c?cw.createPortal(n,c):null:n}function Vx(){return Vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vx.apply(null,arguments)}function MP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function r0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MP(Object(n),!0).forEach(function(r){lre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lre(e,t,n){return(t=ure(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ure(e){var t=cre(e,"string");return typeof t=="symbol"?t:t+""}function cre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dre(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return k.isValidElement(t)?k.cloneElement(t,r):k.createElement(n,r)}function fre(e){var t,{coordinate:n,payload:r,index:i,offset:o,tooltipAxisBandSize:a,layout:c,cursor:f,tooltipEventType:d,chartName:m}=e,v=n,b=r,C=i;if(!f||!v||m!=="ScatterChart"&&d!=="axis")return null;var P,N,R;if(m==="ScatterChart")P=v,N=$X,R=Kn.cursorLine;else if(m==="BarChart")P=GX(c,v,o,a),N=FM,R=Kn.cursorRectangle;else if(c==="radial"&&Ek(v)){var{cx:D,cy:F,radius:L,startAngle:U,endAngle:G}=UM(v);P={cx:D,cy:F,startAngle:U,endAngle:G,innerRadius:L,outerRadius:L},N=zM,R=Kn.cursorLine}else P={points:kJ(c,v,o)},N=ym,R=Kn.cursorLine;var q=typeof f=="object"&&"className"in f?f.className:void 0,W=r0(r0(r0(r0({stroke:"#ccc",pointerEvents:"none"},o),P),ju(f)),{},{payload:b,payloadIndex:C,className:Ft("recharts-tooltip-cursor",q)});return k.createElement(pi,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:R},k.createElement(dre,{cursor:f,cursorComp:N,cursorProps:W}))}function hre(e){var t=One(),n=bM(),r=tf(),i=jne();return t==null||n==null||r==null||i==null?null:k.createElement(fre,Vx({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var G8=k.createContext(null),pre=()=>k.useContext(G8),ey={exports:{}},DP;function mre(){return DP||(DP=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,m){this.fn=f,this.context=d,this.once=m||!1}function o(f,d,m,v,b){if(typeof m!="function")throw new TypeError("The listener must be a function");var C=new i(m,v||f,b),P=n?n+d:d;return f._events[P]?f._events[P].fn?f._events[P]=[f._events[P],C]:f._events[P].push(C):(f._events[P]=C,f._eventsCount++),f}function a(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],m,v;if(this._eventsCount===0)return d;for(v in m=this._events)t.call(m,v)&&d.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},c.prototype.listeners=function(d){var m=n?n+d:d,v=this._events[m];if(!v)return[];if(v.fn)return[v.fn];for(var b=0,C=v.length,P=new Array(C);b<C;b++)P[b]=v[b].fn;return P},c.prototype.listenerCount=function(d){var m=n?n+d:d,v=this._events[m];return v?v.fn?1:v.length:0},c.prototype.emit=function(d,m,v,b,C,P){var N=n?n+d:d;if(!this._events[N])return!1;var R=this._events[N],D=arguments.length,F,L;if(R.fn){switch(R.once&&this.removeListener(d,R.fn,void 0,!0),D){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,m),!0;case 3:return R.fn.call(R.context,m,v),!0;case 4:return R.fn.call(R.context,m,v,b),!0;case 5:return R.fn.call(R.context,m,v,b,C),!0;case 6:return R.fn.call(R.context,m,v,b,C,P),!0}for(L=1,F=new Array(D-1);L<D;L++)F[L-1]=arguments[L];R.fn.apply(R.context,F)}else{var U=R.length,G;for(L=0;L<U;L++)switch(R[L].once&&this.removeListener(d,R[L].fn,void 0,!0),D){case 1:R[L].fn.call(R[L].context);break;case 2:R[L].fn.call(R[L].context,m);break;case 3:R[L].fn.call(R[L].context,m,v);break;case 4:R[L].fn.call(R[L].context,m,v,b);break;default:if(!F)for(G=1,F=new Array(D-1);G<D;G++)F[G-1]=arguments[G];R[L].fn.apply(R[L].context,F)}}return!0},c.prototype.on=function(d,m,v){return o(this,d,m,v,!1)},c.prototype.once=function(d,m,v){return o(this,d,m,v,!0)},c.prototype.removeListener=function(d,m,v,b){var C=n?n+d:d;if(!this._events[C])return this;if(!m)return a(this,C),this;var P=this._events[C];if(P.fn)P.fn===m&&(!b||P.once)&&(!v||P.context===v)&&a(this,C);else{for(var N=0,R=[],D=P.length;N<D;N++)(P[N].fn!==m||b&&!P[N].once||v&&P[N].context!==v)&&R.push(P[N]);R.length?this._events[C]=R.length===1?R[0]:R:a(this,C)}return this},c.prototype.removeAllListeners=function(d){var m;return d?(m=n?n+d:d,this._events[m]&&a(this,m)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c})(ey)),ey.exports}var gre=mre();const vre=so(gre);var zd=new vre,zx="recharts.syncEvent.tooltip",LP="recharts.syncEvent.brush";function mE(e,t){if(t){var n=Number.parseInt(t,10);if(!Mi(n))return e?.[n]}}var yre={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},H8=hi({name:"options",initialState:yre,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),xre=H8.reducer,{createEventEmitter:wre}=H8.actions;function bre(e){return e.tooltip.syncInteraction}var Ere={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},q8=hi({name:"chartData",initialState:Ere,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:BP,setDataStartEndIndexes:_re,setComputedData:Ofe}=q8.actions,Sre=q8.reducer,Cre=["x","y"];function FP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FP(Object(n),!0).forEach(function(r){Are(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Are(e,t,n){return(t=Tre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tre(e){var t=Ire(e,"string");return typeof t=="symbol"?t:t+""}function Ire(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pre(e,t){if(e==null)return{};var n,r,i=Nre(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Nre(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Rre(){var e=Ge(Ob),t=Ge(kb),n=Zt(),r=Ge(V4),i=Ge(Fs),o=tf(),a=ic(),c=Ge(f=>f.rootProps.className);k.useEffect(()=>{if(e==null)return Jd;var f=(d,m,v)=>{if(t!==v&&e===d){if(r==="index"){var b;if(a&&m!==null&&m!==void 0&&(b=m.payload)!==null&&b!==void 0&&b.coordinate&&m.payload.sourceViewBox){var C=m.payload.coordinate,{x:P,y:N}=C,R=Pre(C,Cre),{x:D,y:F,width:L,height:U}=m.payload.sourceViewBox,G=yu(yu({},R),{},{x:a.x+(L?(P-D)/L:0)*a.width,y:a.y+(U?(N-F)/U:0)*a.height});n(yu(yu({},m),{},{payload:yu(yu({},m.payload),{},{coordinate:G})}))}else n(m);return}if(i!=null){var q;if(typeof r=="function"){var W={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},Z=r(i,W);q=i[Z]}else r==="value"&&(q=i.find(Oe=>String(Oe.value)===m.payload.label));var{coordinate:X}=m.payload;if(q==null||m.payload.active===!1||X==null||a==null){n(jx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:pe,y:ae}=X,le=Math.min(pe,a.x+a.width),be=Math.min(ae,a.y+a.height),me={x:o==="horizontal"?q.coordinate:le,y:o==="horizontal"?be:q.coordinate},te=jx({active:m.payload.active,coordinate:me,dataKey:m.payload.dataKey,index:String(q.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox,graphicalItemId:m.payload.graphicalItemId});n(te)}}};return zd.on(zx,f),()=>{zd.off(zx,f)}},[c,n,t,e,r,i,o,a])}function Ore(){var e=Ge(Ob),t=Ge(kb),n=Zt();k.useEffect(()=>{if(e==null)return Jd;var r=(i,o,a)=>{t!==a&&e===i&&n(_re(o))};return zd.on(LP,r),()=>{zd.off(LP,r)}},[n,t,e])}function kre(){var e=Zt();k.useEffect(()=>{e(wre())},[e]),Rre(),Ore()}function Mre(e,t,n,r,i,o){var a=Ge(C=>Vne(C,e,t)),c=Ge(kb),f=Ge(Ob),d=Ge(V4),m=Ge(bre),v=m?.active,b=ic();k.useEffect(()=>{if(!v&&f!=null&&c!=null){var C=jx({active:o,coordinate:n,dataKey:a,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:b,graphicalItemId:void 0});zd.emit(zx,f,C,c)}},[v,n,a,i,r,c,f,d,o,b])}function jP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function UP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jP(Object(n),!0).forEach(function(r){Dre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dre(e,t,n){return(t=Lre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lre(e){var t=Bre(e,"string");return typeof t=="symbol"?t:t+""}function Bre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fre(e){return e.dataKey}function jre(e,t){return k.isValidElement(e)?k.cloneElement(e,t):typeof e=="function"?k.createElement(e,t):k.createElement(EX,t)}var VP=[],Ure={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ty(e){var t,n,r=Vn(e,Ure),{active:i,allowEscapeViewBox:o,animationDuration:a,animationEasing:c,content:f,filterNull:d,isAnimationActive:m,offset:v,payloadUniqBy:b,position:C,reverseDirection:P,useTranslate3d:N,wrapperStyle:R,cursor:D,shared:F,trigger:L,defaultIndex:U,portal:G,axisId:q}=r,W=Zt(),Z=typeof U=="number"?String(U):U;k.useEffect(()=>{W(Lte({shared:F,trigger:L,axisId:q,active:i,defaultIndex:Z}))},[W,F,L,q,i,Z]);var X=ic(),pe=kM(),ae=Nte(F),{activeIndex:le,isActive:be}=(t=Ge(st=>Gne(st,ae,L,Z)))!==null&&t!==void 0?t:{},me=Ge(st=>$ne(st,ae,L,Z)),te=Ge(st=>z8(st,ae,L,Z)),Oe=Ge(st=>zne(st,ae,L,Z)),se=me,ve=pre(),Ee=(n=i??be)!==null&&n!==void 0?n:!1,[Se,ne]=Bk([se,Ee]),he=ae==="axis"?te:void 0;Mre(ae,L,Oe,he,le,Ee);var Be=G??ve;if(Be==null||X==null||ae==null)return null;var Fe=se??VP;Ee||(Fe=VP),d&&Fe.length&&(Fe=Ok(Fe.filter(st=>st.value!=null&&(st.hide!==!0||r.includeHidden)),b,Fre));var Ze=Fe.length>0,Pe=k.createElement(PX,{allowEscapeViewBox:o,animationDuration:a,animationEasing:c,isAnimationActive:m,active:Ee,coordinate:Oe,hasPayload:Ze,offset:v,position:C,reverseDirection:P,useTranslate3d:N,viewBox:X,wrapperStyle:R,lastBoundingBox:Se,innerRef:ne,hasPortalFromProps:!!G},jre(f,UP(UP({},r),{},{payload:Fe,label:he,active:Ee,activeIndex:le,coordinate:Oe,accessibilityLayer:pe})));return k.createElement(k.Fragment,null,cw.createPortal(Pe,Be),Ee&&k.createElement(hre,{cursor:D,tooltipEventType:ae,coordinate:Oe,payload:Fe,index:le}))}var Tl=e=>null;Tl.displayName="Cell";function Vre(e,t,n){return(t=zre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zre(e){var t=$re(e,"string");return typeof t=="symbol"?t:t+""}function $re(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Gre{constructor(t){Vre(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function zP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zP(Object(n),!0).forEach(function(r){qre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qre(e,t,n){return(t=Wre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wre(e){var t=Kre(e,"string");return typeof t=="symbol"?t:t+""}function Kre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yre={cacheSize:2e3,enableCache:!0},W8=Hre({},Yre),$P=new Gre(W8.cacheSize),Xre={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},GP="recharts_measurement_span";function Jre(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",o=t.fontStyle||"",a=t.letterSpacing||"",c=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(a,"|").concat(c)}var HP=(e,t)=>{try{var n=document.getElementById(GP);n||(n=document.createElement("span"),n.setAttribute("id",GP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Xre,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Ed=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||xm.isSsr)return{width:0,height:0};if(!W8.enableCache)return HP(t,n);var r=Jre(t,n),i=$P.get(r);if(i)return i;var o=HP(t,n);return $P.set(r,o),o},K8;function Zre(e,t,n){return(t=Qre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qre(e){var t=eie(e,"string");return typeof t=="symbol"?t:t+""}function eie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,WP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tie=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,nie=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,rie={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},iie=["cm","mm","pt","pc","in","Q","px"];function oie(e){return iie.includes(e)}var Iu="NaN";function sie(e,t){return e*rie[t]}class Pr{static parse(t){var n,[,r,i]=(n=nie.exec(t))!==null&&n!==void 0?n:[];return r==null?Pr.NaN:new Pr(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Mi(t)&&(this.unit=""),n!==""&&!tie.test(n)&&(this.num=NaN,this.unit=""),oie(n)&&(this.num=sie(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Pr(NaN,""):new Pr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Pr(NaN,""):new Pr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Pr(NaN,""):new Pr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Pr(NaN,""):new Pr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Mi(this.num)}}K8=Pr;Zre(Pr,"NaN",new K8(NaN,""));function Y8(e){if(e==null||e.includes(Iu))return Iu;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,o]=(n=qP.exec(t))!==null&&n!==void 0?n:[],a=Pr.parse(r??""),c=Pr.parse(o??""),f=i==="*"?a.multiply(c):a.divide(c);if(f.isNaN())return Iu;t=t.replace(qP,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,m,v,b]=(d=WP.exec(t))!==null&&d!==void 0?d:[],C=Pr.parse(m??""),P=Pr.parse(b??""),N=v==="+"?C.add(P):C.subtract(P);if(N.isNaN())return Iu;t=t.replace(WP,N.toString())}return t}var KP=/\(([^()]*)\)/;function aie(e){for(var t=e,n;(n=KP.exec(t))!=null;){var[,r]=n;t=t.replace(KP,Y8(r))}return t}function lie(e){var t=e.replace(/\s+/g,"");return t=aie(t),t=Y8(t),t}function uie(e){try{return lie(e)}catch{return Iu}}function ny(e){var t=uie(e.slice(5,-1));return t===Iu?"":t}var cie=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],die=["dx","dy","angle","className","breakAll"];function $x(){return $x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$x.apply(null,arguments)}function YP(e,t){if(e==null)return{};var n,r,i=fie(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var X8=/[ \f\n\r\t\v\u2028\u2029]+/,J8=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];an(t)||(n?i=t.toString().split(""):i=t.toString().split(X8));var o=i.map(c=>({word:c,width:Ed(c,r).width})),a=n?0:Ed("",r).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}};function hie(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var Z8=(e,t,n,r)=>e.reduce((i,o)=>{var{word:a,width:c}=o,f=i[i.length-1];if(f&&c!=null&&(t==null||r||f.width+c+n<Number(t)))f.words.push(a),f.width+=c+n;else{var d={words:[a],width:c};i.push(d)}return i},[]),Q8=e=>e.reduce((t,n)=>t.width>n.width?t:n),pie="",XP=(e,t,n,r,i,o,a,c)=>{var f=e.slice(0,t),d=J8({breakAll:n,style:r,children:f+pie});if(!d)return[!1,[]];var m=Z8(d.wordsWithComputedWidth,o,a,c),v=m.length>i||Q8(m).width>Number(o);return[v,m]},mie=(e,t,n,r,i)=>{var{maxLines:o,children:a,style:c,breakAll:f}=e,d=Je(o),m=String(a),v=Z8(t,r,n,i);if(!d||i)return v;var b=v.length>o||Q8(v).width>Number(r);if(!b)return v;for(var C=0,P=m.length-1,N=0,R;C<=P&&N<=m.length-1;){var D=Math.floor((C+P)/2),F=D-1,[L,U]=XP(m,F,f,c,o,r,n,i),[G]=XP(m,D,f,c,o,r,n,i);if(!L&&!G&&(C=D+1),L&&G&&(P=D-1),!L&&G){R=U;break}N++}return R||v},JP=e=>{var t=an(e)?[]:e.toString().split(X8);return[{words:t,width:void 0}]},gie=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:a}=e;if((t||n)&&!xm.isSsr){var c,f,d=J8({breakAll:o,children:r,style:i});if(d){var{wordsWithComputedWidth:m,spaceWidth:v}=d;c=m,f=v}else return JP(r);return mie({breakAll:o,children:r,maxLines:a,style:i},c,f,t,!!n)}return JP(r)},eD="#808080",vie={angle:0,breakAll:!1,capHeight:"0.71em",fill:eD,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Bm=k.forwardRef((e,t)=>{var n=Vn(e,vie),{x:r,y:i,lineHeight:o,capHeight:a,fill:c,scaleToFit:f,textAnchor:d,verticalAnchor:m}=n,v=YP(n,cie),b=k.useMemo(()=>gie({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),{dx:C,dy:P,angle:N,className:R,breakAll:D}=v,F=YP(v,die);if(!ro(r)||!ro(i)||b.length===0)return null;var L=Number(r)+(Je(C)?C:0),U=Number(i)+(Je(P)?P:0);if(!Xt(L)||!Xt(U))return null;var G;switch(m){case"start":G=ny("calc(".concat(a,")"));break;case"middle":G=ny("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(a," / 2))"));break;default:G=ny("calc(".concat(b.length-1," * -").concat(o,")"));break}var q=[];if(f){var W=b[0].width,{width:Z}=v;q.push("scale(".concat(Je(Z)&&Je(W)?Z/W:1,")"))}return N&&q.push("rotate(".concat(N,", ").concat(L,", ").concat(U,")")),q.length&&(F.transform=q.join(" ")),k.createElement("text",$x({},ki(F),{ref:t,x:L,y:U,className:Ft("recharts-text",R),textAnchor:d,fill:c.includes("url")?eD:c}),b.map((X,pe)=>{var ae=X.words.join(D?"":" ");return k.createElement("tspan",{x:L,dy:pe===0?G:o,key:"".concat(ae,"-").concat(pe)},ae)}))});Bm.displayName="Text";var yie=["labelRef"],xie=["content"];function ZP(e,t){if(e==null)return{};var n,r,i=wie(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function QP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QP(Object(n),!0).forEach(function(r){bie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bie(e,t,n){return(t=Eie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eie(e){var t=_ie(e,"string");return typeof t=="symbol"?t:t+""}function _ie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gs(){return gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gs.apply(null,arguments)}var tD=k.createContext(null),nD=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:i,width:o,height:a,children:c}=e,f=k.useMemo(()=>({x:t,y:n,upperWidth:r,lowerWidth:i,width:o,height:a}),[t,n,r,i,o,a]);return k.createElement(tD.Provider,{value:f},c)},rD=()=>{var e=k.useContext(tD),t=ic();return e||wM(t)},Sie=k.createContext(null),Cie=()=>{var e=k.useContext(Sie),t=Ge(q4);return e||t},Aie=e=>{var{value:t,formatter:n}=e,r=an(e.children)?t:e.children;return typeof n=="function"?n(r):r},gE=e=>e!=null&&typeof e=="function",Tie=(e,t)=>{var n=vr(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Iie=(e,t,n,r,i)=>{var{offset:o,className:a}=e,{cx:c,cy:f,innerRadius:d,outerRadius:m,startAngle:v,endAngle:b,clockWise:C}=i,P=(d+m)/2,N=Tie(v,b),R=N>=0?1:-1,D,F;switch(t){case"insideStart":D=v+R*o,F=C;break;case"insideEnd":D=b-R*o,F=!C;break;case"end":D=b+R*o,F=C;break;default:throw new Error("Unsupported position ".concat(t))}F=N<=0?F:!F;var L=Wn(c,f,P,D),U=Wn(c,f,P,D+(F?1:-1)*359),G="M".concat(L.x,",").concat(L.y,`
    A`).concat(P,",").concat(P,",0,1,").concat(F?0:1,`,
    `).concat(U.x,",").concat(U.y),q=an(e.id)?Pd("recharts-radial-line-"):e.id;return k.createElement("text",gs({},r,{dominantBaseline:"central",className:Ft("recharts-radial-bar-label",a)}),k.createElement("defs",null,k.createElement("path",{id:q,d:G})),k.createElement("textPath",{xlinkHref:"#".concat(q)},n))},Pie=(e,t,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:c,endAngle:f}=e,d=(c+f)/2;if(n==="outside"){var{x:m,y:v}=Wn(r,i,a+t,d);return{x:m,y:v,textAnchor:m>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var b=(o+a)/2,{x:C,y:P}=Wn(r,i,b,d);return{x:C,y:P,textAnchor:"middle",verticalAnchor:"middle"}},Gx=e=>"cx"in e&&Je(e.cx),Nie=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,o;n!=null&&!Gx(n)&&(o=n);var{x:a,y:c,upperWidth:f,lowerWidth:d,height:m}=t,v=a,b=a+(f-d)/2,C=(v+b)/2,P=(f+d)/2,N=v+f/2,R=m>=0?1:-1,D=R*r,F=R>0?"end":"start",L=R>0?"start":"end",U=f>=0?1:-1,G=U*r,q=U>0?"end":"start",W=U>0?"start":"end";if(i==="top"){var Z={x:v+f/2,y:c-D,textAnchor:"middle",verticalAnchor:F};return jn(jn({},Z),o?{height:Math.max(c-o.y,0),width:f}:{})}if(i==="bottom"){var X={x:b+d/2,y:c+m+D,textAnchor:"middle",verticalAnchor:L};return jn(jn({},X),o?{height:Math.max(o.y+o.height-(c+m),0),width:d}:{})}if(i==="left"){var pe={x:C-G,y:c+m/2,textAnchor:q,verticalAnchor:"middle"};return jn(jn({},pe),o?{width:Math.max(pe.x-o.x,0),height:m}:{})}if(i==="right"){var ae={x:C+P+G,y:c+m/2,textAnchor:W,verticalAnchor:"middle"};return jn(jn({},ae),o?{width:Math.max(o.x+o.width-ae.x,0),height:m}:{})}var le=o?{width:P,height:m}:{};return i==="insideLeft"?jn({x:C+G,y:c+m/2,textAnchor:W,verticalAnchor:"middle"},le):i==="insideRight"?jn({x:C+P-G,y:c+m/2,textAnchor:q,verticalAnchor:"middle"},le):i==="insideTop"?jn({x:v+f/2,y:c+D,textAnchor:"middle",verticalAnchor:L},le):i==="insideBottom"?jn({x:b+d/2,y:c+m-D,textAnchor:"middle",verticalAnchor:F},le):i==="insideTopLeft"?jn({x:v+G,y:c+D,textAnchor:W,verticalAnchor:L},le):i==="insideTopRight"?jn({x:v+f-G,y:c+D,textAnchor:q,verticalAnchor:L},le):i==="insideBottomLeft"?jn({x:b+G,y:c+m-D,textAnchor:W,verticalAnchor:F},le):i==="insideBottomRight"?jn({x:b+d-G,y:c+m-D,textAnchor:q,verticalAnchor:F},le):i&&typeof i=="object"&&(Je(i.x)||Ss(i.x))&&(Je(i.y)||Ss(i.y))?jn({x:a+$r(i.x,P),y:c+$r(i.y,m),textAnchor:"end",verticalAnchor:"end"},le):jn({x:N,y:c+m/2,textAnchor:"middle",verticalAnchor:"middle"},le)},Rie={angle:0,offset:5,zIndex:Kn.label,position:"middle",textBreakAll:!1};function ha(e){var t=Vn(e,Rie),{viewBox:n,position:r,value:i,children:o,content:a,className:c="",textBreakAll:f,labelRef:d}=t,m=Cie(),v=rD(),b=r==="center"?v:m??v,C,P,N;if(n==null?C=b:Gx(n)?C=n:C=wM(n),!C||an(i)&&an(o)&&!k.isValidElement(a)&&typeof a!="function")return null;var R=jn(jn({},t),{},{viewBox:C});if(k.isValidElement(a)){var{labelRef:D}=R,F=ZP(R,yie);return k.cloneElement(a,F)}if(typeof a=="function"){var{content:L}=R,U=ZP(R,xie);if(P=k.createElement(a,U),k.isValidElement(P))return P}else P=Aie(t);var G=ki(t);if(Gx(C)){if(r==="insideStart"||r==="insideEnd"||r==="end")return Iie(t,r,P,G,C);N=Pie(C,t.offset,t.position)}else N=Nie(t,C);return k.createElement(pi,{zIndex:t.zIndex},k.createElement(Bm,gs({ref:d,className:Ft("recharts-label",c)},G,N,{textAnchor:hie(G.textAnchor)?G.textAnchor:N.textAnchor,breakAll:f}),P))}ha.displayName="Label";var Oie=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?k.createElement(ha,gs({key:"label-implicit"},r)):ro(e)?k.createElement(ha,gs({key:"label-implicit",value:e},r)):k.isValidElement(e)?e.type===ha?k.cloneElement(e,jn({key:"label-implicit"},r)):k.createElement(ha,gs({key:"label-implicit",content:e},r)):gE(e)?k.createElement(ha,gs({key:"label-implicit",content:e},r)):e&&typeof e=="object"?k.createElement(ha,gs({},e,{key:"label-implicit"},r)):null};function iD(e){var{label:t,labelRef:n}=e,r=rD();return Oie(t,r,n)||null}var ry={},iy={},eN;function kie(){return eN||(eN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(iy)),iy}var oy={},tN;function Mie(){return tN||(tN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(oy)),oy}var nN;function Die(){return nN||(nN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kie(),n=Mie(),r=$w();function i(o){if(r.isArrayLike(o))return t.last(n.toArray(o))}e.last=i})(ry)),ry}var sy,rN;function Lie(){return rN||(rN=1,sy=Die().last),sy}var Bie=Lie();const Fie=so(Bie);var jie=["valueAccessor"],Uie=["dataKey","clockWise","id","textBreakAll","zIndex"];function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ap.apply(null,arguments)}function iN(e,t){if(e==null)return{};var n,r,i=Vie(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Vie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var zie=e=>Array.isArray(e.value)?Fie(e.value):e.value,oD=k.createContext(void 0),sD=oD.Provider,aD=k.createContext(void 0),$ie=aD.Provider;function Gie(){return k.useContext(oD)}function Hie(){return k.useContext(aD)}function w0(e){var{valueAccessor:t=zie}=e,n=iN(e,jie),{dataKey:r,clockWise:i,id:o,textBreakAll:a,zIndex:c}=n,f=iN(n,Uie),d=Gie(),m=Hie(),v=d||m;return!v||!v.length?null:k.createElement(pi,{zIndex:c??Kn.label},k.createElement(Un,{className:"recharts-label-list"},v.map((b,C)=>{var P,N=an(r)?t(b,C):Vt(b&&b.payload,r),R=an(o)?{}:{id:"".concat(o,"-").concat(C)};return k.createElement(ha,Ap({key:"label-".concat(C)},ki(b),f,R,{fill:(P=n.fill)!==null&&P!==void 0?P:b.fill,parentViewBox:b.parentViewBox,value:N,textBreakAll:a,viewBox:b.viewBox,index:C,zIndex:0}))})))}w0.displayName="LabelList";function vE(e){var{label:t}=e;return t?t===!0?k.createElement(w0,{key:"labelList-implicit"}):k.isValidElement(t)||gE(t)?k.createElement(w0,{key:"labelList-implicit",content:t}):typeof t=="object"?k.createElement(w0,Ap({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var lD=e=>e.graphicalItems.polarItems,qie=fe([xn,df],jb),Fm=fe([lD,Cn,qie],Ub),Wie=fe([Fm],Vb),jm=fe([Wie,Am],zb),Kie=fe([jm,Cn,Fm],Gb);fe([jm,Cn,Fm],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var o,a=Vt(r,(o=t.dataKey)!==null&&o!==void 0?o:i.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:Vt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var oN=()=>{},Yie=fe([jm,Cn,Fm,Mm,xn],Kb),Xie=fe([Cn,qb,Wb,oN,Yie,oN,Dt,xn],Yb),uD=fe([Cn,Dt,jm,Kie,cf,xn,Xie],Xb),Jie=fe([uD,Cn,cc],Qb);fe([Cn,uD,Jie,xn],tE);var Zie={radiusAxis:{},angleAxis:{}},cD=hi({name:"polarAxis",initialState:Zie,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:kfe,removeRadiusAxis:Mfe,addAngleAxis:Dfe,removeAngleAxis:Lfe}=cD.actions,Qie=cD.reducer;function sN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function aN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sN(Object(n),!0).forEach(function(r){eoe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eoe(e,t,n){return(t=toe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function toe(e){var t=noe(e,"string");return typeof t=="symbol"?t:t+""}function noe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var roe=(e,t)=>t,yE=fe([lD,roe],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),ioe=[],xE=(e,t,n)=>n?.length===0?ioe:n,dD=fe([Am,yE,xE],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(o=>aN(aN({},t.presentationProps),o.props))),i!=null)return i}}),ooe=fe([dD,yE,xE],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var o,a=Vt(r,t.nameKey,t.name),c;return n!=null&&(o=n[i])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?c=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?c=r.fill:c=t.fill,{value:rc(a,t.dataKey),color:c,payload:r,type:t.legendType}})}),soe=fe([dD,yE,xE,ir],(e,t,n,r)=>{if(!(t==null||e==null))return lse({offset:r,pieSettings:t,displayedData:e,cells:n})}),ay={exports:{}},Wt={};var lN;function aoe(){if(lN)return Wt;lN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.view_transition"),C=Symbol.for("react.client.reference");function P(N){if(typeof N=="object"&&N!==null){var R=N.$$typeof;switch(R){case e:switch(N=N.type,N){case n:case i:case r:case f:case d:case b:return N;default:switch(N=N&&N.$$typeof,N){case a:case c:case v:case m:return N;case o:return N;default:return R}}case t:return R}}}return Wt.ContextConsumer=o,Wt.ContextProvider=a,Wt.Element=e,Wt.ForwardRef=c,Wt.Fragment=n,Wt.Lazy=v,Wt.Memo=m,Wt.Portal=t,Wt.Profiler=i,Wt.StrictMode=r,Wt.Suspense=f,Wt.SuspenseList=d,Wt.isContextConsumer=function(N){return P(N)===o},Wt.isContextProvider=function(N){return P(N)===a},Wt.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},Wt.isForwardRef=function(N){return P(N)===c},Wt.isFragment=function(N){return P(N)===n},Wt.isLazy=function(N){return P(N)===v},Wt.isMemo=function(N){return P(N)===m},Wt.isPortal=function(N){return P(N)===t},Wt.isProfiler=function(N){return P(N)===i},Wt.isStrictMode=function(N){return P(N)===r},Wt.isSuspense=function(N){return P(N)===f},Wt.isSuspenseList=function(N){return P(N)===d},Wt.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===n||N===i||N===r||N===f||N===d||typeof N=="object"&&N!==null&&(N.$$typeof===v||N.$$typeof===m||N.$$typeof===a||N.$$typeof===o||N.$$typeof===c||N.$$typeof===C||N.getModuleId!==void 0)},Wt.typeOf=P,Wt}var uN;function loe(){return uN||(uN=1,ay.exports=aoe()),ay.exports}var uoe=loe(),cN=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",dN=null,ly=null,fD=e=>{if(e===dN&&Array.isArray(ly))return ly;var t=[];return k.Children.forEach(e,n=>{an(n)||(uoe.isFragment(n)?t=t.concat(fD(n.props.children)):t.push(n))}),ly=t,dN=e,t};function Um(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>cN(i)):r=[cN(t)],fD(e).forEach(i=>{var o=El(i,"type.displayName")||El(i,"type.name");o&&r.indexOf(o)!==-1&&n.push(i)}),n}var uy={},fN;function coe(){return fN||(fN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(uy)),uy}var cy,hN;function doe(){return hN||(hN=1,cy=coe().isPlainObject),cy}var foe=doe();const hoe=so(foe);var pN,mN,gN,vN,yN;function xN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xN(Object(n),!0).forEach(function(r){poe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function poe(e,t,n){return(t=moe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function moe(e){var t=goe(e,"string");return typeof t=="symbol"?t:t+""}function goe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tp.apply(null,arguments)}function hd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var bN=(e,t,n,r,i)=>{var o=n-r,a;return a=On(pN||(pN=hd(["M ",",",""])),e,t),a+=On(mN||(mN=hd(["L ",",",""])),e+n,t),a+=On(gN||(gN=hd(["L ",",",""])),e+n-o/2,t+i),a+=On(vN||(vN=hd(["L ",",",""])),e+n-o/2-r,t+i),a+=On(yN||(yN=hd(["L ",","," Z"])),e,t),a},voe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yoe=e=>{var t=Vn(e,voe),{x:n,y:r,upperWidth:i,lowerWidth:o,height:a,className:c}=t,{animationEasing:f,animationDuration:d,animationBegin:m,isUpdateAnimationActive:v}=t,b=k.useRef(null),[C,P]=k.useState(-1),N=k.useRef(i),R=k.useRef(o),D=k.useRef(a),F=k.useRef(n),L=k.useRef(r),U=of(e,"trapezoid-");if(k.useEffect(()=>{if(b.current&&b.current.getTotalLength)try{var me=b.current.getTotalLength();me&&P(me)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||a!==+a||i===0&&o===0||a===0)return null;var G=Ft("recharts-trapezoid",c);if(!v)return k.createElement("g",null,k.createElement("path",Tp({},ki(t),{className:G,d:bN(n,r,i,o,a)})));var q=N.current,W=R.current,Z=D.current,X=F.current,pe=L.current,ae="0px ".concat(C===-1?1:C,"px"),le="".concat(C,"px 0px"),be=MM(["strokeDasharray"],d,f);return k.createElement(rf,{animationId:U,key:U,canBegin:C>0,duration:d,easing:f,isActive:v,begin:m},me=>{var te=Sn(q,i,me),Oe=Sn(W,o,me),se=Sn(Z,a,me),ve=Sn(X,n,me),Ee=Sn(pe,r,me);b.current&&(N.current=te,R.current=Oe,D.current=se,F.current=ve,L.current=Ee);var Se=me>0?{transition:be,strokeDasharray:le}:{strokeDasharray:ae};return k.createElement("path",Tp({},ki(t),{className:G,d:bN(ve,Ee,te,Oe,se),ref:b,style:wN(wN({},Se),t.style)}))})},xoe=["option","shapeType","activeClassName"];function woe(e,t){if(e==null)return{};var n,r,i=boe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function boe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function EN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ip(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EN(Object(n),!0).forEach(function(r){Eoe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Eoe(e,t,n){return(t=_oe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _oe(e){var t=Soe(e,"string");return typeof t=="symbol"?t:t+""}function Soe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Coe(e,t){return Ip(Ip({},t),e)}function Aoe(e,t){return e==="symbols"}function _N(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return k.createElement(FM,n);case"trapezoid":return k.createElement(yoe,n);case"sector":return k.createElement(zM,n);case"symbols":if(Aoe(t))return k.createElement(Qp,n);break;case"curve":return k.createElement(ym,n);default:return null}}function Toe(e){return k.isValidElement(e)?e.props:e}function Pp(e){var{option:t,shapeType:n,activeClassName:r="recharts-active-shape"}=e,i=woe(e,xoe),o;if(k.isValidElement(t))o=k.cloneElement(t,Ip(Ip({},i),Toe(t)));else if(typeof t=="function")o=t(i,i.index);else if(hoe(t)&&typeof t!="boolean"){var a=Coe(t,i);o=k.createElement(_N,{shapeType:n,elementProps:a})}else{var c=i;o=k.createElement(_N,{shapeType:n,elementProps:c})}return i.isActive?k.createElement(Un,{className:r},o):o}var Vm=(e,t,n)=>{var r=Zt();return(i,o)=>a=>{e?.(i,o,a),r(S8({activeIndex:String(o),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},zm=e=>{var t=Zt();return(n,r)=>i=>{e?.(n,r,i),t(Bte())}},$m=(e,t,n)=>{var r=Zt();return(i,o)=>a=>{e?.(i,o,a),r(Fte({activeIndex:String(o),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function wE(e){var{tooltipEntrySettings:t}=e,n=Zt(),r=Nr(),i=k.useRef(null);return k.useLayoutEffect(()=>{r||(i.current===null?n(kte(t)):i.current!==t&&n(Mte({prev:i.current,next:t})),i.current=t)},[t,n,r]),k.useLayoutEffect(()=>()=>{i.current&&(n(Dte(i.current)),i.current=null)},[n]),null}function hD(e){var{legendPayload:t}=e,n=Zt(),r=Nr(),i=k.useRef(null);return k.useLayoutEffect(()=>{r||(i.current===null?n(PM(t)):i.current!==t&&n(NM({prev:i.current,next:t})),i.current=t)},[n,r,t]),k.useLayoutEffect(()=>()=>{i.current&&(n(RM(i.current)),i.current=null)},[n]),null}function Ioe(e){var{legendPayload:t}=e,n=Zt(),r=Ge(Dt),i=k.useRef(null);return k.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(PM(t)):i.current!==t&&n(NM({prev:i.current,next:t})),i.current=t)},[n,r,t]),k.useLayoutEffect(()=>()=>{i.current&&(n(RM(i.current)),i.current=null)},[n]),null}var dy,Poe=()=>{var[e]=k.useState(()=>Pd("uid-"));return e},Noe=(dy=Y6.useId)!==null&&dy!==void 0?dy:Poe;function Roe(e,t){var n=Noe();return t||(e?"".concat(e,"-").concat(n):n)}var Ooe=k.createContext(void 0),bE=e=>{var{id:t,type:n,children:r}=e,i=Roe("recharts-".concat(n),t);return k.createElement(Ooe.Provider,{value:i},r(i))},koe={cartesianItems:[],polarItems:[]},pD=hi({name:"graphicalItems",initialState:koe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:gn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ao(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},prepare:gn()},removeCartesianGraphicalItem:{reducer(e,t){var n=Ao(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:gn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:gn()},removePolarGraphicalItem:{reducer(e,t){var n=Ao(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:gn()}}}),{addCartesianGraphicalItem:Moe,replaceCartesianGraphicalItem:Doe,removeCartesianGraphicalItem:Loe,addPolarGraphicalItem:Boe,removePolarGraphicalItem:Foe}=pD.actions,joe=pD.reducer,Uoe=e=>{var t=Zt(),n=k.useRef(null);return k.useLayoutEffect(()=>{n.current===null?t(Moe(e)):n.current!==e&&t(Doe({prev:n.current,next:e})),n.current=e},[t,e]),k.useLayoutEffect(()=>()=>{n.current&&(t(Loe(n.current)),n.current=null)},[t]),null},mD=k.memo(Uoe);function Voe(e){var t=Zt();return k.useLayoutEffect(()=>(t(Boe(e)),()=>{t(Foe(e))}),[t,e]),null}var zoe=["key"],$oe=["onMouseEnter","onClick","onMouseLeave"],Goe=["id"],Hoe=["id"];function SN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SN(Object(n),!0).forEach(function(r){qoe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qoe(e,t,n){return(t=Woe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Woe(e){var t=Koe(e,"string");return typeof t=="symbol"?t:t+""}function Koe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ca(){return Ca=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ca.apply(null,arguments)}function Gm(e,t){if(e==null)return{};var n,r,i=Yoe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Yoe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Xoe(e){var t=k.useMemo(()=>Um(e.children,Tl),[e.children]),n=Ge(r=>ooe(r,e.id,t));return n==null?null:k.createElement(Ioe,{legendPayload:n})}var Joe=k.memo(e=>{var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:o,fill:a,name:c,hide:f,tooltipType:d,id:m}=e,v={dataDefinedOnItem:r.map(b=>b.tooltipPayload),positions:r.map(b=>b.tooltipPosition),settings:{stroke:i,strokeWidth:o,fill:a,dataKey:t,nameKey:n,name:rc(c,t),hide:f,type:d,color:a,unit:"",graphicalItemId:m}};return k.createElement(wE,{tooltipEntrySettings:v})}),Zoe=(e,t)=>e>t?"start":e<t?"end":"middle",Qoe=(e,t,n)=>$r(typeof t=="function"?t(e):t,n,n*.8),ese=(e,t,n)=>{var{top:r,left:i,width:o,height:a}=t,c=jM(o,a),f=i+$r(e.cx,o,o/2),d=r+$r(e.cy,a,a/2),m=$r(e.innerRadius,c,0),v=Qoe(n,e.outerRadius,c),b=e.maxRadius||Math.sqrt(o*o+a*a)/2;return{cx:f,cy:d,innerRadius:m,outerRadius:v,maxRadius:b}},tse=(e,t)=>{var n=vr(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function nse(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var rse=(e,t)=>{if(k.isValidElement(e))return k.cloneElement(e,t);if(typeof e=="function")return e(t);var n=Ft("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:r}=t,i=Gm(t,zoe);return k.createElement(ym,Ca({},i,{type:"linear",className:n}))},ise=(e,t,n)=>{if(k.isValidElement(e))return k.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),k.isValidElement(r)))return r;var i=Ft("recharts-pie-label-text",nse(e));return k.createElement(Bm,Ca({},t,{alignmentBaseline:"middle",className:i}),r)};function ose(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:o,dataKey:a}=n;if(!r||!i||!t)return null;var c=Oi(n),f=ju(i),d=ju(o),m=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,v=t.map((b,C)=>{var P=(b.startAngle+b.endAngle)/2,N=Wn(b.cx,b.cy,b.outerRadius+m,P),R=kn(kn(kn(kn({},c),b),{},{stroke:"none"},f),{},{index:C,textAnchor:Zoe(N.x,b.cx)},N),D=kn(kn(kn(kn({},c),b),{},{fill:"none",stroke:b.fill},d),{},{index:C,points:[Wn(b.cx,b.cy,b.outerRadius,P),N],key:"line"});return k.createElement(pi,{zIndex:Kn.label,key:"label-".concat(b.startAngle,"-").concat(b.endAngle,"-").concat(b.midAngle,"-").concat(C)},k.createElement(Un,null,o&&rse(o,D),ise(i,R,Vt(b,a))))});return k.createElement(Un,{className:"recharts-pie-labels"},v)}function sse(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?k.createElement(vE,{label:i}):k.createElement(ose,{sectors:t,props:n,showLabels:r})}function ase(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:o,id:a}=e,c=Ge(Sa),f=Ge(cE),d=Ge(_ne),{onMouseEnter:m,onClick:v,onMouseLeave:b}=i,C=Gm(i,$oe),P=Vm(m,i.dataKey,a),N=zm(b),R=$m(v,i.dataKey,a);return t==null||t.length===0?null:k.createElement(k.Fragment,null,t.map((D,F)=>{if(D?.startAngle===0&&D?.endAngle===0&&t.length!==1)return null;var L=d==null||d===a,U=String(F)===c&&(f==null||i.dataKey===f)&&L,G=c?r:null,q=n&&U?n:G,W=kn(kn({},D),{},{stroke:D.stroke,tabIndex:-1,[Jw]:F,[Zw]:a});return k.createElement(Un,Ca({key:"sector-".concat(D?.startAngle,"-").concat(D?.endAngle,"-").concat(D.midAngle,"-").concat(F),tabIndex:-1,className:"recharts-pie-sector"},nc(C,D,F),{onMouseEnter:P(D,F),onMouseLeave:N(D,F),onClick:R(D,F)}),k.createElement(Pp,Ca({option:o??q,index:F,shapeType:"sector",isActive:U},W)))}))}function lse(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:o}=e,{cornerRadius:a,startAngle:c,endAngle:f,dataKey:d,nameKey:m,tooltipType:v}=n,b=Math.abs(n.minAngle),C=tse(c,f),P=Math.abs(C),N=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,R=r.filter(q=>Vt(q,d,0)!==0).length,D=(P>=360?R:R-1)*N,F=P-R*b-D,L=r.reduce((q,W)=>{var Z=Vt(W,d,0);return q+(Je(Z)?Z:0)},0),U;if(L>0){var G;U=r.map((q,W)=>{var Z=Vt(q,d,0),X=Vt(q,m,W),pe=ese(n,o,q),ae=(Je(Z)?Z:0)/L,le,be=kn(kn({},q),i&&i[W]&&i[W].props);W?le=G.endAngle+vr(C)*N*(Z!==0?1:0):le=c;var me=le+vr(C)*((Z!==0?b:0)+ae*F),te=(le+me)/2,Oe=(pe.innerRadius+pe.outerRadius)/2,se=[{name:X,value:Z,payload:be,dataKey:d,type:v,graphicalItemId:n.id}],ve=Wn(pe.cx,pe.cy,Oe,te);return G=kn(kn(kn(kn({},n.presentationProps),{},{percent:ae,cornerRadius:typeof a=="string"?parseFloat(a):a,name:X,tooltipPayload:se,midAngle:te,middleRadius:Oe,tooltipPosition:ve},be),pe),{},{value:Z,dataKey:d,startAngle:le,endAngle:me,payload:be,paddingAngle:vr(C)*N}),G})}return U}function use(e){var{showLabels:t,sectors:n,children:r}=e,i=k.useMemo(()=>!t||!n?[]:n.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[n,t]);return k.createElement($ie,{value:t?i:void 0},r)}function cse(e){var{props:t,previousSectorsRef:n,id:r}=e,{sectors:i,isAnimationActive:o,animationBegin:a,animationDuration:c,animationEasing:f,activeShape:d,inactiveShape:m,onAnimationStart:v,onAnimationEnd:b}=t,C=of(t,"recharts-pie-"),P=n.current,[N,R]=k.useState(!1),D=k.useCallback(()=>{typeof b=="function"&&b(),R(!1)},[b]),F=k.useCallback(()=>{typeof v=="function"&&v(),R(!0)},[v]);return k.createElement(use,{showLabels:!N,sectors:i},k.createElement(rf,{animationId:C,begin:a,duration:c,isActive:o,easing:f,onAnimationStart:F,onAnimationEnd:D,key:C},L=>{var U=[],G=i&&i[0],q=G?.startAngle;return i?.forEach((W,Z)=>{var X=P&&P[Z],pe=Z>0?El(W,"paddingAngle",0):0;if(X){var ae=Sn(X.endAngle-X.startAngle,W.endAngle-W.startAngle,L),le=kn(kn({},W),{},{startAngle:q+pe,endAngle:q+ae+pe});U.push(le),q=le.endAngle}else{var{endAngle:be,startAngle:me}=W,te=Sn(0,be-me,L),Oe=kn(kn({},W),{},{startAngle:q+pe,endAngle:q+te+pe});U.push(Oe),q=Oe.endAngle}}),n.current=U,k.createElement(Un,null,k.createElement(ase,{sectors:U,activeShape:d,inactiveShape:m,allOtherPieProps:t,shape:t.shape,id:r}))}),k.createElement(sse,{showLabels:!N,sectors:i,props:t}),t.children)}var dse={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Kn.area};function fse(e){var{id:t}=e,n=Gm(e,Goe),{hide:r,className:i,rootTabIndex:o}=e,a=k.useMemo(()=>Um(e.children,Tl),[e.children]),c=Ge(m=>soe(m,t,a)),f=k.useRef(null),d=Ft("recharts-pie",i);return r||c==null?(f.current=null,k.createElement(Un,{tabIndex:o,className:d})):k.createElement(pi,{zIndex:e.zIndex},k.createElement(Joe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:c,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),k.createElement(Un,{tabIndex:o,className:d},k.createElement(cse,{props:kn(kn({},n),{},{sectors:c}),previousSectorsRef:f,id:t})))}function gD(e){var t=Vn(e,dse),{id:n}=t,r=Gm(t,Hoe),i=Oi(r);return k.createElement(bE,{id:n,type:"pie"},o=>k.createElement(k.Fragment,null,k.createElement(Voe,{type:"pie",id:o,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),k.createElement(Xoe,Ca({},r,{id:o})),k.createElement(fse,Ca({},r,{id:o}))))}gD.displayName="Pie";function CN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function AN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CN(Object(n),!0).forEach(function(r){hse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hse(e,t,n){return(t=pse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pse(e){var t=mse(e,"string");return typeof t=="symbol"?t:t+""}function mse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vD=0,gse={xAxis:{},yAxis:{},zAxis:{}},yD=hi({name:"cartesianAxis",initialState:gse,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:gn()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:gn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:gn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:gn()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:gn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:gn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:gn()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:gn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:gn()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,i=e.yAxis[n];if(i){var o=i.widthHistory||[];if(o.length===3&&o[0]===o[2]&&r===o[1]&&r!==i.width&&Math.abs(r-o[0])<=1)return;var a=[...o,r].slice(-3);e.yAxis[n]=AN(AN({},e.yAxis[n]),{},{width:r,widthHistory:a})}}}}),{addXAxis:vse,replaceXAxis:yse,removeXAxis:xse,addYAxis:wse,replaceYAxis:bse,removeYAxis:Ese,addZAxis:Bfe,replaceZAxis:Ffe,removeZAxis:jfe,updateYAxisWidth:_se}=yD.actions,Sse=yD.reducer,Cse=fe([ir],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Ase=fe([Cse,Ms,Ds],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),xD=()=>Ge(Ase),TN=(e,t,n)=>{var r=n??e;if(!an(r))return $r(r,t,0)},Tse=(e,t,n)=>{var r={},i=e.filter(Pm),o=e.filter(d=>d.stackId==null),a=i.reduce((d,m)=>(d[m.stackId]||(d[m.stackId]=[]),d[m.stackId].push(m),d),r),c=Object.entries(a).map(d=>{var[m,v]=d,b=v.map(P=>P.dataKey),C=TN(t,n,v[0].barSize);return{stackId:m,dataKeys:b,barSize:C}}),f=o.map(d=>{var m=[d.dataKey].filter(b=>b!=null),v=TN(t,n,d.barSize);return{stackId:void 0,dataKeys:m,barSize:v}});return[...c,...f]};function IN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function i0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IN(Object(n),!0).forEach(function(r){Ise(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ise(e,t,n){return(t=Pse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pse(e){var t=Nse(e,"string");return typeof t=="symbol"?t:t+""}function Nse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rse(e,t,n,r,i){var o=r.length;if(!(o<1)){var a=$r(e,n,0,!0),c,f=[];if(Xt(r[0].barSize)){var d=!1,m=n/o,v=r.reduce((D,F)=>D+(F.barSize||0),0);v+=(o-1)*a,v>=n&&(v-=(o-1)*a,a=0),v>=n&&m>0&&(d=!0,m*=.9,v=o*m);var b=(n-v)/2>>0,C={offset:b-a,size:0};c=r.reduce((D,F)=>{var L,U={stackId:F.stackId,dataKeys:F.dataKeys,position:{offset:C.offset+C.size+a,size:d?m:(L=F.barSize)!==null&&L!==void 0?L:0}},G=[...D,U];return C=G[G.length-1].position,G},f)}else{var P=$r(t,n,0,!0);n-2*P-(o-1)*a<=0&&(a=0);var N=(n-2*P-(o-1)*a)/o;N>1&&(N>>=0);var R=Xt(i)?Math.min(N,i):N;c=r.reduce((D,F,L)=>[...D,{stackId:F.stackId,dataKeys:F.dataKeys,position:{offset:P+(N+a)*L+(N-R)/2,size:R}}],f)}return c}}var Ose=(e,t,n,r,i,o,a)=>{var c=an(a)?t:a,f=Rse(n,r,i!==o?i:o,e,c);return i!==o&&f!=null&&(f=f.map(d=>i0(i0({},d),{},{position:i0(i0({},d.position),{},{offset:d.position.offset-i/2})}))),f},kse=(e,t)=>{var n=Bb(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:o}=i;if(o)return o.find(a=>a.key===n)}}}};function Mse(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Xt(e.zIndex)?e.zIndex:t}var wD=e=>{var{chartData:t}=e,n=Zt(),r=Nr();return k.useEffect(()=>r?()=>{}:(n(BP(t)),()=>{n(BP(void 0))}),[t,n,r]),null},PN={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},bD=hi({name:"brush",initialState:PN,reducers:{setBrushSettings(e,t){return t.payload==null?PN:t.payload}}}),{setBrushSettings:Ufe}=bD.actions,Dse=bD.reducer;function NN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function o0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NN(Object(n),!0).forEach(function(r){ED(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ED(e,t,n){return(t=Lse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lse(e){var t=Bse(e,"string");return typeof t=="symbol"?t:t+""}function Bse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fse=(e,t)=>{var{x:n,y:r}=e,{x:i,y:o}=t;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},jse=e=>{var{x1:t,y1:n,x2:r,y2:i}=e;return Fse({x:t,y:n},{x:r,y:i})};class Hm{static create(t){return new Hm(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}ED(Hm,"EPS",1e-4);var Use=e=>{var t=Object.keys(e).reduce((n,r)=>o0(o0({},n),{},{[r]:Hm.create(e[r])}),{});return o0(o0({},t),{},{apply(n){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(o=>{var[a,c]=o;return[a,t[a].apply(c,{bandAware:r,position:i})]}))},isInRange(n){return Object.keys(n).every(r=>t[r].isInRange(n[r]))}})};function Vse(e){return(e%180+180)%180}var zse=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Vse(i),a=o*Math.PI/180,c=Math.atan(r/n),f=a>c&&a<Math.PI-c?r/Math.sin(a):n/Math.cos(a);return Math.abs(f)},$se={dots:[],areas:[],lines:[]},_D=hi({name:"referenceElements",initialState:$se,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ao(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ao(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ao(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:Vfe,removeDot:zfe,addArea:$fe,removeArea:Gfe,addLine:Gse,removeLine:Hse}=_D.actions,qse=_D.reducer,SD=k.createContext(void 0),Wse=e=>{var{children:t}=e,[n]=k.useState("".concat(Pd("recharts"),"-clip")),r=xD();if(r==null)return null;var{x:i,y:o,width:a,height:c}=r;return k.createElement(SD.Provider,{value:n},k.createElement("defs",null,k.createElement("clipPath",{id:n},k.createElement("rect",{x:i,y:o,height:c,width:a}))),t)},Kse=()=>k.useContext(SD);function RN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ON(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RN(Object(n),!0).forEach(function(r){Yse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yse(e,t,n){return(t=Xse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xse(e){var t=Jse(e,"string");return typeof t=="symbol"?t:t+""}function Jse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Np(){return Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Np.apply(null,arguments)}var Zse=(e,t)=>{var n;if(k.isValidElement(e))n=k.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{if(!Xt(t.x1)||!Xt(t.y1)||!Xt(t.x2)||!Xt(t.y2))return null;n=k.createElement("line",Np({},t,{className:"recharts-reference-line-line"}))}return n},Qse=(e,t,n,r,i,o)=>{var{x:a,width:c}=o,f=i.y.apply(e,{position:n});if(Mi(f)||t==="discard"&&!i.y.isInRange(f))return null;var d=[{x:a+c,y:f},{x:a,y:f}];return r==="left"?d.reverse():d},eae=(e,t,n,r,i,o)=>{var{y:a,height:c}=o,f=i.x.apply(e,{position:n});if(Mi(f)||t==="discard"&&!i.x.isInRange(f))return null;var d=[{x:f,y:a+c},{x:f,y:a}];return r==="top"?d.reverse():d},tae=(e,t,n,r)=>{var i=e.map(o=>r.apply(o,{position:n}));return t==="discard"&&i.some(o=>!r.isInRange(o))?null:i},nae=(e,t,n,r,i,o)=>{var{x:a,y:c,segment:f,ifOverflow:d}=o,m=ro(a),v=ro(c);return v?Qse(c,d,n,i,e,t):m?eae(a,d,n,r,e,t):f!=null&&f.length===2?tae(f,d,n,e):null};function rae(e){var t=Zt();return k.useEffect(()=>(t(Gse(e)),()=>{t(Hse(e))})),null}function iae(e){var{xAxisId:t,yAxisId:n,shape:r,className:i,ifOverflow:o}=e,a=Nr(),c=Kse(),f=Ge(q=>Ko(q,t)),d=Ge(q=>Yo(q,n)),m=Ge(q=>qu(q,"xAxis",t,a)),v=Ge(q=>qu(q,"yAxis",n,a)),b=ic();if(!c||!b||f==null||d==null||m==null||v==null)return null;var C=Use({x:m,y:v}),P=nae(C,b,e.position,f.orientation,d.orientation,e);if(!P)return null;var[{x:N,y:R},{x:D,y:F}]=P,L=o==="hidden"?"url(#".concat(c,")"):void 0,U=ON(ON({clipPath:L},ki(e)),{},{x1:N,y1:R,x2:D,y2:F}),G=jse({x1:N,y1:R,x2:D,y2:F});return k.createElement(pi,{zIndex:e.zIndex},k.createElement(Un,{className:Ft("recharts-reference-line",i)},Zse(r,U),k.createElement(nD,Np({},G,{lowerWidth:G.width,upperWidth:G.width}),k.createElement(iD,{label:e.label}),e.children)))}var oae={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Kn.line};function CD(e){var t=Vn(e,oae);return k.createElement(k.Fragment,null,k.createElement(rae,{yAxisId:t.yAxisId,xAxisId:t.xAxisId,ifOverflow:t.ifOverflow,x:t.x,y:t.y,segment:t.segment}),k.createElement(iae,t))}CD.displayName="ReferenceLine";function AD(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],r=0;r<e.length;r+=t){var i=e[r];i!==void 0&&n.push(i)}return n}function sae(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return zse(r,n)}function aae(e,t,n){var r=n==="width",{x:i,y:o,width:a,height:c}=e;return t===1?{start:r?i:o,end:r?i+a:o+c}:{start:r?i+a:o+c,end:r?i:o}}function $d(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-i)<=0}function lae(e,t){return AD(e,t+1)}function uae(e,t,n,r,i){for(var o=(r||[]).slice(),{start:a,end:c}=t,f=0,d=1,m=a,v=function(){var P=r?.[f];if(P===void 0)return{v:AD(r,d)};var N=f,R,D=()=>(R===void 0&&(R=n(P,N)),R),F=P.coordinate,L=f===0||$d(e,F,D,m,c);L||(f=0,m=a,d+=1),L&&(m=F+e*(D()/2+i),f+=d)},b;d<=o.length;)if(b=v(),b)return b.v;return[]}function cae(e,t,n,r,i){var o=(r||[]).slice(),a=o.length;if(a===0)return[];for(var{start:c,end:f}=t,d=1;d<=a;d++){for(var m=(a-1)%d,v=c,b=!0,C=function(){var F=r[P],L=P,U,G=()=>(U===void 0&&(U=n(F,L)),U),q=F.coordinate,W=P===m||$d(e,q,G,v,f);if(!W)return b=!1,1;W&&(v=q+e*(G()/2+i))},P=m;P<a&&!C();P+=d);if(b){for(var N=[],R=m;R<a;R+=d)N.push(r[R]);return N}}return[]}function kN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kN(Object(n),!0).forEach(function(r){dae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dae(e,t,n){return(t=fae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fae(e){var t=hae(e,"string");return typeof t=="symbol"?t:t+""}function hae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pae(e,t,n,r,i){for(var o=(r||[]).slice(),a=o.length,{start:c}=t,{end:f}=t,d=function(b){var C=o[b],P,N=()=>(P===void 0&&(P=n(C,b)),P);if(b===a-1){var R=e*(C.coordinate+e*N()/2-f);o[b]=C=Ur(Ur({},C),{},{tickCoord:R>0?C.coordinate-R*e:C.coordinate})}else o[b]=C=Ur(Ur({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var D=$d(e,C.tickCoord,N,c,f);D&&(f=C.tickCoord-e*(N()/2+i),o[b]=Ur(Ur({},C),{},{isShow:!0}))}},m=a-1;m>=0;m--)d(m);return o}function mae(e,t,n,r,i,o){var a=(r||[]).slice(),c=a.length,{start:f,end:d}=t;if(o){var m=r[c-1],v=n(m,c-1),b=e*(m.coordinate+e*v/2-d);if(a[c-1]=m=Ur(Ur({},m),{},{tickCoord:b>0?m.coordinate-b*e:m.coordinate}),m.tickCoord!=null){var C=$d(e,m.tickCoord,()=>v,f,d);C&&(d=m.tickCoord-e*(v/2+i),a[c-1]=Ur(Ur({},m),{},{isShow:!0}))}}for(var P=o?c-1:c,N=function(F){var L=a[F],U,G=()=>(U===void 0&&(U=n(L,F)),U);if(F===0){var q=e*(L.coordinate-e*G()/2-f);a[F]=L=Ur(Ur({},L),{},{tickCoord:q<0?L.coordinate-q*e:L.coordinate})}else a[F]=L=Ur(Ur({},L),{},{tickCoord:L.coordinate});if(L.tickCoord!=null){var W=$d(e,L.tickCoord,G,f,d);W&&(f=L.tickCoord+e*(G()/2+i),a[F]=Ur(Ur({},L),{},{isShow:!0}))}},R=0;R<P;R++)N(R);return a}function EE(e,t,n){var{tick:r,ticks:i,viewBox:o,minTickGap:a,orientation:c,interval:f,tickFormatter:d,unit:m,angle:v}=e;if(!i||!i.length||!r)return[];if(Je(f)||xm.isSsr){var b;return(b=lae(i,Je(f)?f:0))!==null&&b!==void 0?b:[]}var C=[],P=c==="top"||c==="bottom"?"width":"height",N=m&&P==="width"?Ed(m,{fontSize:t,letterSpacing:n}):{width:0,height:0},R=(L,U)=>{var G=typeof d=="function"?d(L.value,U):L.value;return P==="width"?sae(Ed(G,{fontSize:t,letterSpacing:n}),N,v):Ed(G,{fontSize:t,letterSpacing:n})[P]},D=i.length>=2?vr(i[1].coordinate-i[0].coordinate):1,F=aae(o,D,P);return f==="equidistantPreserveStart"?uae(D,F,R,i,a):f==="equidistantPreserveEnd"?cae(D,F,R,i,a):(f==="preserveStart"||f==="preserveStartEnd"?C=mae(D,F,R,i,a,f==="preserveStartEnd"):C=pae(D,F,R,i,a),C.filter(L=>L.isShow))}var gae=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=e,a=0;if(t){Array.from(t).forEach(m=>{if(m){var v=m.getBoundingClientRect();v.width>a&&(a=v.width)}});var c=n?n.getBoundingClientRect().width:0,f=i+o,d=a+f+c+(n?r:0);return Math.round(d)}return 0},vae=["axisLine","width","height","className","hide","ticks","axisType"];function yae(e,t){if(e==null)return{};var n,r,i=xae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xae(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Il(){return Il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Il.apply(null,arguments)}function MN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MN(Object(n),!0).forEach(function(r){wae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wae(e,t,n){return(t=bae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bae(e){var t=Eae(e,"string");return typeof t=="symbol"?t:t+""}function Eae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bs={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Kn.axis};function _ae(e){var{x:t,y:n,width:r,height:i,orientation:o,mirror:a,axisLine:c,otherSvgProps:f}=e;if(!c)return null;var d=qn(qn(qn({},f),Oi(c)),{},{fill:"none"});if(o==="top"||o==="bottom"){var m=+(o==="top"&&!a||o==="bottom"&&a);d=qn(qn({},d),{},{x1:t,y1:n+m*i,x2:t+r,y2:n+m*i})}else{var v=+(o==="left"&&!a||o==="right"&&a);d=qn(qn({},d),{},{x1:t+v*r,y1:n,x2:t+v*r,y2:n+i})}return k.createElement("line",Il({},d,{className:Ft("recharts-cartesian-axis-line",El(c,"className"))}))}function Sae(e,t,n,r,i,o,a,c,f){var d,m,v,b,C,P,N=c?-1:1,R=e.tickSize||a,D=Je(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":d=m=e.coordinate,b=n+ +!c*i,v=b-N*R,P=v-N*f,C=D;break;case"left":v=b=e.coordinate,m=t+ +!c*r,d=m-N*R,C=d-N*f,P=D;break;case"right":v=b=e.coordinate,m=t+ +c*r,d=m+N*R,C=d+N*f,P=D;break;default:d=m=e.coordinate,b=n+ +c*i,v=b+N*R,P=v+N*f,C=D;break}return{line:{x1:d,y1:v,x2:m,y2:b},tick:{x:C,y:P}}}function Cae(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Aae(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Tae(e){var{option:t,tickProps:n,value:r}=e,i,o=Ft(n.className,"recharts-cartesian-axis-tick-value");if(k.isValidElement(t))i=k.cloneElement(t,qn(qn({},n),{},{className:o}));else if(typeof t=="function")i=t(qn(qn({},n),{},{className:o}));else{var a="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(a=Ft(a,t?.className)),i=k.createElement(Bm,Il({},n,{className:a}),r)}return i}var Iae=k.forwardRef((e,t)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:o,tickFormatter:a,unit:c,padding:f,tickTextProps:d,orientation:m,mirror:v,x:b,y:C,width:P,height:N,tickSize:R,tickMargin:D,fontSize:F,letterSpacing:L,getTicksConfig:U,events:G,axisType:q}=e,W=EE(qn(qn({},U),{},{ticks:n}),F,L),Z=Cae(m,v),X=Aae(m,v),pe=Oi(U),ae=ju(r),le={};typeof i=="object"&&(le=i);var be=qn(qn({},pe),{},{fill:"none"},le),me=W.map(se=>qn({entry:se},Sae(se,b,C,P,N,m,R,v,D))),te=me.map(se=>{var{entry:ve,line:Ee}=se;return k.createElement(Un,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ve.value,"-").concat(ve.coordinate,"-").concat(ve.tickCoord)},i&&k.createElement("line",Il({},be,Ee,{className:Ft("recharts-cartesian-axis-tick-line",El(i,"className"))})))}),Oe=me.map((se,ve)=>{var{entry:Ee,tick:Se}=se,ne=qn(qn(qn(qn({textAnchor:Z,verticalAnchor:X},pe),{},{stroke:"none",fill:o},ae),Se),{},{index:ve,payload:Ee,visibleTicksCount:W.length,tickFormatter:a,padding:f},d);return k.createElement(Un,Il({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Ee.value,"-").concat(Ee.coordinate,"-").concat(Ee.tickCoord)},nc(G,Ee,ve)),r&&k.createElement(Tae,{option:r,tickProps:ne,value:"".concat(typeof a=="function"?a(Ee.value,ve):Ee.value).concat(c||"")}))});return k.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(q,"-ticks")},Oe.length>0&&k.createElement(pi,{zIndex:Kn.label},k.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(q,"-tick-labels"),ref:t},Oe)),te.length>0&&k.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(q,"-tick-lines")},te))}),Pae=k.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:o,hide:a,ticks:c,axisType:f}=e,d=yae(e,vae),[m,v]=k.useState(""),[b,C]=k.useState(""),P=k.useRef(null);k.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var R;return gae({ticks:P.current,label:(R=e.labelRef)===null||R===void 0?void 0:R.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=k.useCallback(R=>{if(R){var D=R.getElementsByClassName("recharts-cartesian-axis-tick-value");P.current=D;var F=D[0];if(F){var L=window.getComputedStyle(F),U=L.fontSize,G=L.letterSpacing;(U!==m||G!==b)&&(v(U),C(G))}}},[m,b]);return a||r!=null&&r<=0||i!=null&&i<=0?null:k.createElement(pi,{zIndex:e.zIndex},k.createElement(Un,{className:Ft("recharts-cartesian-axis",o)},k.createElement(_ae,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Oi(e)}),k.createElement(Iae,{ref:N,axisType:f,events:d,fontSize:m,getTicksConfig:e,height:e.height,letterSpacing:b,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:c,unit:e.unit,width:e.width,x:e.x,y:e.y}),k.createElement(nD,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},k.createElement(iD,{label:e.label,labelRef:e.labelRef}),e.children)))}),_E=k.forwardRef((e,t)=>{var n=Vn(e,bs);return k.createElement(Pae,Il({},n,{ref:t}))});_E.displayName="CartesianAxis";var Nae=["x1","y1","x2","y2","key"],Rae=["offset"],Oae=["xAxisId","yAxisId"],kae=["xAxisId","yAxisId"];function DN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DN(Object(n),!0).forEach(function(r){Mae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mae(e,t,n){return(t=Dae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dae(e){var t=Lae(e,"string");return typeof t=="symbol"?t:t+""}function Lae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gl.apply(null,arguments)}function Rp(e,t){if(e==null)return{};var n,r,i=Bae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Bae(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Fae=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:o,height:a,ry:c}=e;return k.createElement("rect",{x:r,y:i,ry:c,width:o,height:a,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function TD(e){var{option:t,lineItemProps:n}=e,r;if(k.isValidElement(t))r=k.cloneElement(t,n);else if(typeof t=="function")r=t(n);else{var i,{x1:o,y1:a,x2:c,y2:f,key:d}=n,m=Rp(n,Nae),v=(i=Oi(m))!==null&&i!==void 0?i:{},{offset:b}=v,C=Rp(v,Rae);r=k.createElement("line",gl({},C,{x1:o,y1:a,x2:c,y2:f,fill:"none",key:d}))}return r}function jae(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:a}=e,c=Rp(e,Oae),f=i.map((d,m)=>{var v=Vr(Vr({},c),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(m),index:m});return k.createElement(TD,{key:"line-".concat(m),option:r,lineItemProps:v})});return k.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function Uae(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:a}=e,c=Rp(e,kae),f=i.map((d,m)=>{var v=Vr(Vr({},c),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(m),index:m});return k.createElement(TD,{option:r,lineItemProps:v,key:"line-".concat(m)})});return k.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function Vae(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:o,height:a,horizontalPoints:c,horizontal:f=!0}=e;if(!f||!t||!t.length||c==null)return null;var d=c.map(v=>Math.round(v+i-i)).sort((v,b)=>v-b);i!==d[0]&&d.unshift(0);var m=d.map((v,b)=>{var C=!d[b+1],P=C?i+a-v:d[b+1]-v;if(P<=0)return null;var N=b%t.length;return k.createElement("rect",{key:"react-".concat(b),y:v,x:r,height:P,width:o,stroke:"none",fill:t[N],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function zae(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:o,width:a,height:c,verticalPoints:f}=e;if(!t||!n||!n.length)return null;var d=f.map(v=>Math.round(v+i-i)).sort((v,b)=>v-b);i!==d[0]&&d.unshift(0);var m=d.map((v,b)=>{var C=!d[b+1],P=C?i+a-v:d[b+1]-v;if(P<=0)return null;var N=b%n.length;return k.createElement("rect",{key:"react-".concat(b),x:v,y:o,width:P,height:c,stroke:"none",fill:n[N],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var $ae=(e,t)=>{var{xAxis:n,width:r,height:i,offset:o}=e;return pM(EE(Vr(Vr(Vr({},bs),n),{},{ticks:mM(n),viewBox:{x:0,y:0,width:r,height:i}})),o.left,o.left+o.width,t)},Gae=(e,t)=>{var{yAxis:n,width:r,height:i,offset:o}=e;return pM(EE(Vr(Vr(Vr({},bs),n),{},{ticks:mM(n),viewBox:{x:0,y:0,width:r,height:i}})),o.top,o.top+o.height,t)},Hae={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Kn.grid};function Hx(e){var t=tb(),n=nb(),r=bM(),i=Vr(Vr({},Vn(e,Hae)),{},{x:Je(e.x)?e.x:r.left,y:Je(e.y)?e.y:r.top,width:Je(e.width)?e.width:r.width,height:Je(e.height)?e.height:r.height}),{xAxisId:o,yAxisId:a,x:c,y:f,width:d,height:m,syncWithTicks:v,horizontalValues:b,verticalValues:C}=i,P=Nr(),N=Ge(X=>CP(X,"xAxis",o,P)),R=Ge(X=>CP(X,"yAxis",a,P));if(!Ho(d)||!Ho(m)||!Je(c)||!Je(f))return null;var D=i.verticalCoordinatesGenerator||$ae,F=i.horizontalCoordinatesGenerator||Gae,{horizontalPoints:L,verticalPoints:U}=i;if((!L||!L.length)&&typeof F=="function"){var G=b&&b.length,q=F({yAxis:R?Vr(Vr({},R),{},{ticks:G?b:R.ticks}):void 0,width:t??d,height:n??m,offset:r},G?!0:v);ip(Array.isArray(q),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof q,"]")),Array.isArray(q)&&(L=q)}if((!U||!U.length)&&typeof D=="function"){var W=C&&C.length,Z=D({xAxis:N?Vr(Vr({},N),{},{ticks:W?C:N.ticks}):void 0,width:t??d,height:n??m,offset:r},W?!0:v);ip(Array.isArray(Z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Z,"]")),Array.isArray(Z)&&(U=Z)}return k.createElement(pi,{zIndex:i.zIndex},k.createElement("g",{className:"recharts-cartesian-grid"},k.createElement(Fae,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),k.createElement(Vae,gl({},i,{horizontalPoints:L})),k.createElement(zae,gl({},i,{verticalPoints:U})),k.createElement(jae,gl({},i,{offset:r,horizontalPoints:L,xAxis:N,yAxis:R})),k.createElement(Uae,gl({},i,{offset:r,verticalPoints:U,xAxis:N,yAxis:R}))))}Hx.displayName="CartesianGrid";var qae={},ID=hi({name:"errorBars",initialState:qae,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Hfe,replaceErrorBar:qfe,removeErrorBar:Wfe}=ID.actions,Wae=ID.reducer,Kae=["children"];function Yae(e,t){if(e==null)return{};var n,r,i=Xae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Xae(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Jae={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Zae=k.createContext(Jae);function PD(e){var{children:t}=e,n=Yae(e,Kae);return k.createElement(Zae.Provider,{value:n},t)}function SE(e,t){var n,r,i=Ge(d=>Ko(d,e)),o=Ge(d=>Yo(d,t)),a=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:pr.allowDataOverflow,c=(r=o?.allowDataOverflow)!==null&&r!==void 0?r:mr.allowDataOverflow,f=a||c;return{needClip:f,needClipX:a,needClipY:c}}function ND(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=xD(),{needClipX:o,needClipY:a,needClip:c}=SE(t,n);if(!c||!i)return null;var{x:f,y:d,width:m,height:v}=i;return k.createElement("clipPath",{id:"clipPath-".concat(r)},k.createElement("rect",{x:o?f:f-m/2,y:a?d:d-v/2,width:o?m:m*2,height:a?v:v*2}))}var fy={exports:{}},hy={};var LN;function Qae(){if(LN)return hy;LN=1;var e=Wu();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,c=e.useDebugValue;return hy.useSyncExternalStoreWithSelector=function(f,d,m,v,b){var C=i(null);if(C.current===null){var P={hasValue:!1,value:null};C.current=P}else P=C.current;C=a(function(){function R(G){if(!D){if(D=!0,F=G,G=v(G),b!==void 0&&P.hasValue){var q=P.value;if(b(q,G))return L=q}return L=G}if(q=L,n(F,G))return q;var W=v(G);return b!==void 0&&b(q,W)?(F=G,q):(F=G,L=W)}var D=!1,F,L,U=m===void 0?null:m;return[function(){return R(d())},U===null?void 0:function(){return R(U())}]},[d,m,v,b]);var N=r(f,C[0],C[1]);return o(function(){P.hasValue=!0,P.value=N},[N]),c(N),N},hy}var BN;function ele(){return BN||(BN=1,fy.exports=Qae()),fy.exports}ele();function tle(e){e()}function nle(){let e=null,t=null;return{clear(){e=null,t=null},notify(){tle(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var FN={notify(){},get:()=>[]};function rle(e,t){let n,r=FN,i=0,o=!1;function a(N){m();const R=r.subscribe(N);let D=!1;return()=>{D||(D=!0,R(),v())}}function c(){r.notify()}function f(){P.onStateChange&&P.onStateChange()}function d(){return o}function m(){i++,n||(n=e.subscribe(f),r=nle())}function v(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=FN)}function b(){o||(o=!0,m())}function C(){o&&(o=!1,v())}const P={addNestedSub:a,notifyNestedSubs:c,handleChangeWrapper:f,isSubscribed:d,trySubscribe:b,tryUnsubscribe:C,getListeners:()=>r};return P}var ile=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ole=ile(),sle=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ale=sle(),lle=()=>ole||ale?k.useLayoutEffect:k.useEffect,ule=lle();function jN(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function cle(e,t){if(jN(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!jN(e[n[i]],t[n[i]]))return!1;return!0}var dle=Symbol.for("react-redux-context"),fle=typeof globalThis<"u"?globalThis:{};function hle(){if(!k.createContext)return{};const e=fle[dle]??=new Map;let t=e.get(k.createContext);return t||(t=k.createContext(null),e.set(k.createContext,t)),t}var ple=hle();function mle(e){const{children:t,context:n,serverState:r,store:i}=e,o=k.useMemo(()=>{const f=rle(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),a=k.useMemo(()=>i.getState(),[i]);ule(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),a!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,a]);const c=n||ple;return k.createElement(c.Provider,{value:o},t)}var gle=mle,vle=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function yle(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function qm(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(vle.has(r)){if(e[r]==null&&t[r]==null)continue;if(!cle(e[r],t[r]))return!1}else if(!yle(e[r],t[r]))return!1;return!0}function Dl(e,t){var n,r;return(n=(r=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:vD}function Ll(e,t){var n,r;return(n=(r=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:vD}var xle="Invariant failed";function wle(e,t){throw new Error(xle)}function qx(){return qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qx.apply(null,arguments)}function Op(e){return k.createElement(Pp,qx({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var ble=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Je(t))return t;var o=Je(r)||an(r);return o?t(r,i):(o||wle(),n)}},Ele=(e,t,n)=>n,_le=(e,t)=>t,xf=fe([Om,_le],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),Sle=fe([xf],e=>e?.maxBarSize),Cle=(e,t,n,r)=>r,Ale=fe([Dt,Om,Dl,Ll,Ele],(e,t,n,r,i)=>t.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),Tle=(e,t,n)=>{var r=Dt(e),i=Dl(e,t),o=Ll(e,t);if(!(i==null||o==null))return r==="horizontal"?Fx(e,"yAxis",o,n):Fx(e,"xAxis",i,n)},Ile=(e,t)=>{var n=Dt(e),r=Dl(e,t),i=Ll(e,t);if(!(r==null||i==null))return n==="horizontal"?SP(e,"xAxis",r):SP(e,"yAxis",i)},Ple=fe([Ale,Aee,Ile],Tse),Nle=(e,t,n)=>{var r,i,o=xf(e,t);if(o!=null){var a=Dl(e,t),c=Ll(e,t);if(!(a==null||c==null)){var f=Dt(e),d=F4(e),{maxBarSize:m}=o,v=an(m)?d:m,b,C;return f==="horizontal"?(b=_a(e,"xAxis",a,n),C=Ea(e,"xAxis",a,n)):(b=_a(e,"yAxis",c,n),C=Ea(e,"yAxis",c,n)),(r=(i=rp(b,C,!0))!==null&&i!==void 0?i:v)!==null&&r!==void 0?r:0}}},RD=(e,t,n)=>{var r=Dt(e),i=Dl(e,t),o=Ll(e,t);if(!(i==null||o==null)){var a,c;return r==="horizontal"?(a=_a(e,"xAxis",i,n),c=Ea(e,"xAxis",i,n)):(a=_a(e,"yAxis",o,n),c=Ea(e,"yAxis",o,n)),rp(a,c)}},Rle=fe([Ple,F4,Cee,j4,Nle,RD,Sle],Ose),Ole=(e,t,n)=>{var r=Dl(e,t);if(r!=null)return _a(e,"xAxis",r,n)},kle=(e,t,n)=>{var r=Ll(e,t);if(r!=null)return _a(e,"yAxis",r,n)},Mle=(e,t,n)=>{var r=Dl(e,t);if(r!=null)return Ea(e,"xAxis",r,n)},Dle=(e,t,n)=>{var r=Ll(e,t);if(r!=null)return Ea(e,"yAxis",r,n)},Lle=fe([Rle,xf],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),Ble=fe([Tle,xf],kse),Fle=fe([ir,Qw,Ole,kle,Mle,Dle,Lle,Dt,hee,RD,Ble,xf,Cle],(e,t,n,r,i,o,a,c,f,d,m,v,b)=>{var{chartData:C,dataStartIndex:P,dataEndIndex:N}=f;if(!(v==null||a==null||t==null||c!=="horizontal"&&c!=="vertical"||n==null||r==null||i==null||o==null||d==null)){var{data:R}=v,D;if(R!=null&&R.length>0?D=R:D=C?.slice(P,N+1),D!=null)return hue({layout:c,barSettings:v,pos:a,parentViewBox:t,bandSize:d,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:m,displayedData:D,offset:e,cells:b,dataStartIndex:P})}}),jle=["index"];function Wx(){return Wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wx.apply(null,arguments)}function Ule(e,t){if(e==null)return{};var n,r,i=Vle(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Vle(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var OD=k.createContext(void 0),zle=e=>{var t=k.useContext(OD);if(t!=null)return t.stackId;if(e!=null)return aY(e)},$le=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),Gle=e=>{var t=k.useContext(OD);if(t!=null){var{stackId:n}=t;return"url(#".concat($le(n,e),")")}},Hle=e=>{var{index:t}=e,n=Ule(e,jle),r=Gle(t);return k.createElement(Un,Wx({className:"recharts-bar-stack-layer",clipPath:r},n))},qle=["onMouseEnter","onMouseLeave","onClick"],Wle=["value","background","tooltipPosition"],Kle=["id"],Yle=["onMouseEnter","onClick","onMouseLeave"];function Ns(){return Ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ns.apply(null,arguments)}function UN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UN(Object(n),!0).forEach(function(r){Xle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xle(e,t,n){return(t=Jle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jle(e){var t=Zle(e,"string");return typeof t=="symbol"?t:t+""}function Zle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kp(e,t){if(e==null)return{};var n,r,i=Qle(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qle(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var eue=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:r,value:rc(n,t),payload:e}]},tue=k.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:o,hide:a,unit:c,tooltipType:f,id:d}=e,m={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:rc(o,t),hide:a,type:f,color:i,unit:c,graphicalItemId:d}};return k.createElement(wE,{tooltipEntrySettings:m})});function nue(e){var t=Ge(Sa),{data:n,dataKey:r,background:i,allOtherBarProps:o}=e,{onMouseEnter:a,onMouseLeave:c,onClick:f}=o,d=kp(o,qle),m=Vm(a,r,o.id),v=zm(c),b=$m(f,r,o.id);if(!i||n==null)return null;var C=ju(i);return k.createElement(pi,{zIndex:Mse(i,Kn.barBackground)},n.map((P,N)=>{var{value:R,background:D,tooltipPosition:F}=P,L=kp(P,Wle);if(!D)return null;var U=m(P,N),G=v(P,N),q=b(P,N),W=Kr(Kr(Kr(Kr(Kr({option:i,isActive:String(N)===t},L),{},{fill:"#eee"},D),C),nc(d,P,N)),{},{onMouseEnter:U,onMouseLeave:G,onClick:q,dataKey:r,index:N,className:"recharts-bar-background-rectangle"});return k.createElement(Op,Ns({key:"background-bar-".concat(N)},W))}))}function rue(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(o=>{var a={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return Kr(Kr({},a),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:a,fill:o.fill})});return k.createElement(sD,{value:t?i:void 0},n)}function iue(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:o,dataKey:a}=e,c=Ge(Sa),f=Ge(cE),d=n&&String(o)===c&&(f==null||a===f),m=d?n:t;return d?k.createElement(pi,{zIndex:Kn.activeBar},k.createElement(Op,Ns({},r,{name:String(r.name)},i,{isActive:d,option:m,index:o,dataKey:a}))):k.createElement(Op,Ns({},r,{name:String(r.name)},i,{isActive:d,option:m,index:o,dataKey:a}))}function oue(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:o}=e;return k.createElement(Op,Ns({},n,{name:String(n.name)},r,{isActive:!1,option:t,index:i,dataKey:o}))}function sue(e){var t,{data:n,props:r}=e,i=(t=Oi(r))!==null&&t!==void 0?t:{},{id:o}=i,a=kp(i,Kle),{shape:c,dataKey:f,activeBar:d}=r,{onMouseEnter:m,onClick:v,onMouseLeave:b}=r,C=kp(r,Yle),P=Vm(m,f,o),N=zm(b),R=$m(v,f,o);return n?k.createElement(k.Fragment,null,n.map((D,F)=>k.createElement(Hle,Ns({index:F,key:"rectangle-".concat(D?.x,"-").concat(D?.y,"-").concat(D?.value,"-").concat(F),className:"recharts-bar-rectangle"},nc(C,D,F),{onMouseEnter:P(D,F),onMouseLeave:N(D,F),onClick:R(D,F)}),d?k.createElement(iue,{shape:c,activeBar:d,baseProps:a,entry:D,index:F,dataKey:f}):k.createElement(oue,{shape:c,baseProps:a,entry:D,index:F,dataKey:f})))):null}function aue(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:o,animationBegin:a,animationDuration:c,animationEasing:f,onAnimationEnd:d,onAnimationStart:m}=t,v=n.current,b=of(t,"recharts-bar-"),[C,P]=k.useState(!1),N=!C,R=k.useCallback(()=>{typeof d=="function"&&d(),P(!1)},[d]),D=k.useCallback(()=>{typeof m=="function"&&m(),P(!0)},[m]);return k.createElement(rue,{showLabels:N,rects:r},k.createElement(rf,{animationId:b,begin:a,duration:c,isActive:o,easing:f,onAnimationEnd:R,onAnimationStart:D,key:b},F=>{var L=F===1?r:r?.map((U,G)=>{var q=v&&v[G];if(q)return Kr(Kr({},U),{},{x:Sn(q.x,U.x,F),y:Sn(q.y,U.y,F),width:Sn(q.width,U.width,F),height:Sn(q.height,U.height,F)});if(i==="horizontal"){var W=Sn(0,U.height,F),Z=Sn(U.stackedBarStart,U.y,F);return Kr(Kr({},U),{},{y:Z,height:W})}var X=Sn(0,U.width,F),pe=Sn(U.stackedBarStart,U.x,F);return Kr(Kr({},U),{},{width:X,x:pe})});return F>0&&(n.current=L??null),L==null?null:k.createElement(Un,null,k.createElement(sue,{props:t,data:L}))}),k.createElement(vE,{label:t.label}),t.children)}function lue(e){var t=k.useRef(null);return k.createElement(aue,{previousRectanglesRef:t,props:e})}var kD=0,uue=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Vt(e,t)}};class cue extends k.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:a,needClip:c,background:f,id:d}=this.props;if(t||n==null)return null;var m=Ft("recharts-bar",i),v=d;return k.createElement(Un,{className:m,id:d},c&&k.createElement("defs",null,k.createElement(ND,{clipPathId:v,xAxisId:o,yAxisId:a})),k.createElement(Un,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(v,")"):void 0},k.createElement(nue,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),k.createElement(lue,this.props)))}}var due={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:kD,xAxisId:0,yAxisId:0,zIndex:Kn.bar};function fue(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:a,animationBegin:c,animationDuration:f,animationEasing:d,isAnimationActive:m}=e,{needClip:v}=SE(t,n),b=tf(),C=Nr(),P=Um(e.children,Tl),N=Ge(F=>Fle(F,e.id,C,P));if(b!=="vertical"&&b!=="horizontal")return null;var R,D=N?.[0];return D==null||D.height==null||D.width==null?R=0:R=b==="vertical"?D.height/2:D.width/2,k.createElement(PD,{xAxisId:t,yAxisId:n,data:N,dataPointFormatter:uue,errorBarOffset:R},k.createElement(cue,Ns({},e,{layout:b,needClip:v,data:N,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:a,animationBegin:c,animationDuration:f,animationEasing:d,isAnimationActive:m})))}function hue(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:a,yAxis:c,xAxisTicks:f,yAxisTicks:d,stackedData:m,displayedData:v,offset:b,cells:C,parentViewBox:P,dataStartIndex:N}=e,R=t==="horizontal"?c:a,D=m?R.scale.domain():null,F=lY({numericAxis:R}),L=R.scale(F);return v.map((U,G)=>{var q,W,Z,X,pe,ae;if(m){var le=m[G+N];if(le==null)return null;q=nY(le,D)}else q=Vt(U,n),Array.isArray(q)||(q=[F,q]);var be=ble(r,kD)(q[1],G);if(t==="horizontal"){var me,[te,Oe]=[c.scale(q[0]),c.scale(q[1])];W=IT({axis:a,ticks:f,bandSize:o,offset:i.offset,entry:U,index:G}),Z=(me=Oe??te)!==null&&me!==void 0?me:void 0,X=i.size;var se=te-Oe;if(pe=Mi(se)?0:se,ae={x:W,y:b.top,width:X,height:b.height},Math.abs(be)>0&&Math.abs(pe)<Math.abs(be)){var ve=vr(pe||be)*(Math.abs(be)-Math.abs(pe));Z-=ve,pe+=ve}}else{var[Ee,Se]=[a.scale(q[0]),a.scale(q[1])];if(W=Ee,Z=IT({axis:c,ticks:d,bandSize:o,offset:i.offset,entry:U,index:G}),X=Se-Ee,pe=i.size,ae={x:b.left,y:Z,width:b.width,height:pe},Math.abs(be)>0&&Math.abs(X)<Math.abs(be)){var ne=vr(X||be)*(Math.abs(be)-Math.abs(X));X+=ne}}if(W==null||Z==null||X==null||pe==null)return null;var he=Kr(Kr({},U),{},{stackedBarStart:L,x:W,y:Z,width:X,height:pe,value:m?q:q[1],payload:U,background:ae,tooltipPosition:{x:W+X/2,y:Z+pe/2},parentViewBox:P},C&&C[G]&&C[G].props);return he}).filter(Boolean)}function pue(e){var t=Vn(e,due),n=zle(t.stackId),r=Nr();return k.createElement(bE,{id:t.id,type:"bar"},i=>k.createElement(k.Fragment,null,k.createElement(hD,{legendPayload:eue(t)}),k.createElement(tue,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),k.createElement(mD,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),k.createElement(pi,{zIndex:t.zIndex},k.createElement(fue,Ns({},t,{id:i})))))}var MD=k.memo(pue,qm);MD.displayName="Bar";var mue=["option","isActive"];function _d(){return _d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_d.apply(null,arguments)}function gue(e,t){if(e==null)return{};var n,r,i=vue(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yue(e){var{option:t,isActive:n}=e,r=gue(e,mue);return typeof t=="string"?k.createElement(Pp,_d({option:k.createElement(Qp,_d({type:t},r)),isActive:n,shapeType:"symbols"},r)):k.createElement(Pp,_d({option:t,isActive:n,shapeType:"symbols"},r))}var xue=(e,t,n,r,i,o,a)=>_a(e,"xAxis",t,a),wue=(e,t,n,r,i,o,a)=>Ea(e,"xAxis",t,a),bue=(e,t,n,r,i,o,a)=>_a(e,"yAxis",n,a),Eue=(e,t,n,r,i,o,a)=>Ea(e,"yAxis",n,a),_ue=(e,t,n,r)=>Ite(e,"zAxis",r,!1),Sue=(e,t,n,r,i)=>i,Cue=(e,t,n,r,i,o)=>o,Aue=(e,t,n,r,i,o,a)=>Ib(e,void 0,void 0,a),Tue=fe([Om,Sue],(e,t)=>e.filter(n=>n.type==="scatter").find(n=>n.id===t)),Iue=fe([Aue,xue,wue,bue,Eue,_ue,Tue,Cue],(e,t,n,r,i,o,a,c)=>{var{chartData:f,dataStartIndex:d,dataEndIndex:m}=e;if(a!=null){var v;if(a?.data!=null&&a.data.length>0?v=a.data:v=f?.slice(d,m+1),!(v==null||t==null||r==null||n==null||i==null||n?.length===0||i?.length===0))return zue({displayedData:v,xAxis:t,yAxis:r,zAxis:o,scatterSettings:a,xAxisTicks:n,yAxisTicks:i,cells:c})}}),Pue=["id"],Nue=["onMouseEnter","onClick","onMouseLeave"],Rue=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function Kx(e,t){if(e==null)return{};var n,r,i=Oue(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Oue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Pl(){return Pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pl.apply(null,arguments)}function VN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VN(Object(n),!0).forEach(function(r){kue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kue(e,t,n){return(t=Mue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mue(e){var t=Due(e,"string");return typeof t=="symbol"?t:t+""}function Due(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lue=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:r,value:rc(n,t),payload:e}]},Bue=k.memo(e=>{var{dataKey:t,points:n,stroke:r,strokeWidth:i,fill:o,name:a,hide:c,tooltipType:f,id:d}=e,m={dataDefinedOnItem:n?.map(v=>v.tooltipPayload),positions:n?.map(v=>v.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:o,nameKey:void 0,dataKey:t,name:rc(a,t),hide:c,type:f,color:o,unit:"",graphicalItemId:d}};return k.createElement(wE,{tooltipEntrySettings:m})});function Fue(e){var{points:t,props:n}=e,{line:r,lineType:i,lineJointType:o}=n;if(!r)return null;var a=Oi(n),c=ju(r),f,d;if(i==="joint")f=t.map(R=>{var D,F;return{x:(D=R.cx)!==null&&D!==void 0?D:null,y:(F=R.cy)!==null&&F!==void 0?F:null}});else if(i==="fitting"){var{xmin:m,xmax:v,a:b,b:C}=Nq(t),P=R=>b*R+C;f=[{x:m,y:P(m)},{x:v,y:P(v)}]}var N=fi(fi(fi({},a),{},{fill:"none",stroke:a&&a.fill},c),{},{points:f});return k.isValidElement(r)?d=k.cloneElement(r,N):typeof r=="function"?d=r(N):d=k.createElement(ym,Pl({},N,{type:o})),k.createElement(Un,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}function jue(e){var{showLabels:t,points:n,children:r}=e,i=ic(),o=k.useMemo(()=>n?.map(a=>{var c,f,d={x:(c=a.x)!==null&&c!==void 0?c:0,y:(f=a.y)!==null&&f!==void 0?f:0,width:a.width,height:a.height,lowerWidth:a.width,upperWidth:a.width};return fi(fi({},d),{},{value:void 0,payload:a.payload,viewBox:d,parentViewBox:i,fill:void 0})}),[i,n]);return k.createElement(sD,{value:t?o:void 0},r)}function Uue(e){var{points:t,allOtherScatterProps:n}=e,{shape:r,activeShape:i,dataKey:o}=n,{id:a}=n,c=Kx(n,Pue),f=Ge(Sa),{onMouseEnter:d,onClick:m,onMouseLeave:v}=n,b=Kx(n,Nue),C=Vm(d,o,a),P=zm(v),N=$m(m,o,a);if(!Gq(t))return null;var R=Oi(c);return k.createElement(k.Fragment,null,k.createElement(Fue,{points:t,props:c}),t.map((D,F)=>{var L=i!=null&&i!==!1,U=L&&f===String(F),G=L&&U?i:r,q=fi(fi(fi({},R),D),{},{[Jw]:F,[Zw]:String(a)});return k.createElement(pi,{key:"symbol-".concat(D?.cx,"-").concat(D?.cy,"-").concat(D?.size,"-").concat(F),zIndex:U?Kn.activeDot:void 0},k.createElement(Un,Pl({className:"recharts-scatter-symbol"},nc(b,D,F),{onMouseEnter:C(D,F),onMouseLeave:P(D,F),onClick:N(D,F)}),k.createElement(yue,Pl({option:G,isActive:U},q))))}))}function Vue(e){var{previousPointsRef:t,props:n}=e,{points:r,isAnimationActive:i,animationBegin:o,animationDuration:a,animationEasing:c}=n,f=t.current,d=of(n,"recharts-scatter-"),[m,v]=k.useState(!1),b=k.useCallback(()=>{v(!1)},[]),C=k.useCallback(()=>{v(!0)},[]),P=!m;return k.createElement(jue,{showLabels:P,points:r},n.children,k.createElement(rf,{animationId:d,begin:o,duration:a,isActive:i,easing:c,onAnimationEnd:b,onAnimationStart:C,key:d},N=>{var R=N===1?r:r?.map((D,F)=>{var L=f&&f[F];return L?fi(fi({},D),{},{cx:D.cx==null?void 0:Sn(L.cx,D.cx,N),cy:D.cy==null?void 0:Sn(L.cy,D.cy,N),size:Sn(L.size,D.size,N)}):fi(fi({},D),{},{size:Sn(0,D.size,N)})});return N>0&&(t.current=R),k.createElement(Un,null,k.createElement(Uue,{points:R,allOtherScatterProps:n,showLabels:P}))}),k.createElement(vE,{label:n.label}))}function zue(e){var{displayedData:t,xAxis:n,yAxis:r,zAxis:i,scatterSettings:o,xAxisTicks:a,yAxisTicks:c,cells:f}=e,d=an(n.dataKey)?o.dataKey:n.dataKey,m=an(r.dataKey)?o.dataKey:r.dataKey,v=i&&i.dataKey,b=i?i.range:X4.range,C=b&&b[0],P=n.scale.bandwidth?n.scale.bandwidth():0,N=r.scale.bandwidth?r.scale.bandwidth():0;return t.map((R,D)=>{var F=Vt(R,d),L=Vt(R,m),U=!an(v)&&Vt(R,v)||"-",G=[{name:an(n.dataKey)?o.name:n.name||String(n.dataKey),unit:n.unit||"",value:F,payload:R,dataKey:d,type:o.tooltipType},{name:an(r.dataKey)?o.name:r.name||String(r.dataKey),unit:r.unit||"",value:L,payload:R,dataKey:m,type:o.tooltipType}];U!=="-"&&G.push({name:i.name||i.dataKey,unit:i.unit||"",value:U,payload:R,dataKey:v,type:o.tooltipType});var q=TT({axis:n,ticks:a,bandSize:P,entry:R,index:D,dataKey:d}),W=TT({axis:r,ticks:c,bandSize:N,entry:R,index:D,dataKey:m}),Z=U!=="-"?i.scale(U):C,X=Math.sqrt(Math.max(Z,0)/Math.PI);return fi(fi({},R),{},{cx:q,cy:W,x:q==null?void 0:q-X,y:W==null?void 0:W-X,width:2*X,height:2*X,size:Z,node:{x:F,y:L,z:U},tooltipPayload:G,tooltipPosition:{x:q,y:W},payload:R},f&&f[D]&&f[D].props)})}var $ue=(e,t,n)=>({x:e.cx,y:e.cy,value:Number(n==="x"?e.node.x:e.node.y),errorVal:Vt(e,t)});function Gue(e){var{hide:t,points:n,className:r,needClip:i,xAxisId:o,yAxisId:a,id:c}=e,f=k.useRef(null);if(t)return null;var d=Ft("recharts-scatter",r),m=c;return k.createElement(pi,{zIndex:e.zIndex},k.createElement(Un,{className:d,clipPath:i?"url(#clipPath-".concat(m,")"):void 0,id:c},i&&k.createElement("defs",null,k.createElement(ND,{clipPathId:m,xAxisId:o,yAxisId:a})),k.createElement(PD,{xAxisId:o,yAxisId:a,data:n,dataPointFormatter:$ue,errorBarOffset:0},k.createElement(Un,{key:"recharts-scatter-symbols"},k.createElement(Vue,{props:e,previousPointsRef:f})))))}var DD={xAxisId:0,yAxisId:0,zAxisId:0,label:!1,line:!1,legendType:"circle",lineType:"joint",lineJointType:"linear",shape:"circle",hide:!1,isAnimationActive:"auto",animationBegin:0,animationDuration:400,animationEasing:"linear",zIndex:Kn.scatter};function Hue(e){var t=Vn(e,DD),{animationBegin:n,animationDuration:r,animationEasing:i,hide:o,isAnimationActive:a,legendType:c,lineJointType:f,lineType:d,shape:m,xAxisId:v,yAxisId:b,zAxisId:C}=t,P=Kx(t,Rue),{needClip:N}=SE(v,b),R=k.useMemo(()=>Um(e.children,Tl),[e.children]),D=Nr(),F=Ge(L=>Iue(L,v,b,C,e.id,R,D));return N==null||F==null?null:k.createElement(k.Fragment,null,k.createElement(Bue,{dataKey:e.dataKey,points:F,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:e.id}),k.createElement(Gue,Pl({},P,{xAxisId:v,yAxisId:b,zAxisId:C,lineType:d,lineJointType:f,legendType:c,shape:m,hide:o,isAnimationActive:a,animationBegin:n,animationDuration:r,animationEasing:i,points:F,needClip:N})))}function que(e){var t=Vn(e,DD),n=Nr();return k.createElement(bE,{id:t.id,type:"scatter"},r=>k.createElement(k.Fragment,null,k.createElement(hD,{legendPayload:Lue(t)}),k.createElement(mD,{type:"scatter",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:t.zAxisId,dataKey:t.dataKey,hide:t.hide,name:t.name,tooltipType:t.tooltipType,isPanorama:n}),k.createElement(Hue,Pl({},t,{id:r}))))}var LD=k.memo(que,qm);LD.displayName="Scatter";var Wue=["domain","range"],Kue=["domain","range"];function zN(e,t){if(e==null)return{};var n,r,i=Yue(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Yue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function $N(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function BD(e,t){if(e===t)return!0;var{domain:n,range:r}=e,i=zN(e,Wue),{domain:o,range:a}=t,c=zN(t,Kue);return!$N(n,o)||!$N(r,a)?!1:qm(i,c)}var Xue=["dangerouslySetInnerHTML","ticks","scale"],Jue=["id","scale"];function Yx(){return Yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yx.apply(null,arguments)}function GN(e,t){if(e==null)return{};var n,r,i=Zue(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Zue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Que(e){var t=Zt(),n=k.useRef(null);return k.useLayoutEffect(()=>{n.current===null?t(vse(e)):n.current!==e&&t(yse({prev:n.current,next:e})),n.current=e},[e,t]),k.useLayoutEffect(()=>()=>{n.current&&(t(xse(n.current)),n.current=null)},[t]),null}var ece=e=>{var{xAxisId:t,className:n}=e,r=Ge(Qw),i=Nr(),o="xAxis",a=Ge(D=>y8(D,o,t,i)),c=Ge(D=>p8(D,t)),f=Ge(D=>Ete(D,t)),d=Ge(D=>K4(D,t));if(c==null||f==null||d==null)return null;var{dangerouslySetInnerHTML:m,ticks:v,scale:b}=e,C=GN(e,Xue),{id:P,scale:N}=d,R=GN(d,Jue);return k.createElement(_E,Yx({},C,R,{x:f.x,y:f.y,width:c.width,height:c.height,className:Ft("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:a,axisType:o}))},tce={allowDataOverflow:pr.allowDataOverflow,allowDecimals:pr.allowDecimals,allowDuplicatedCategory:pr.allowDuplicatedCategory,angle:pr.angle,axisLine:bs.axisLine,height:pr.height,hide:!1,includeHidden:pr.includeHidden,interval:pr.interval,minTickGap:pr.minTickGap,mirror:pr.mirror,orientation:pr.orientation,padding:pr.padding,reversed:pr.reversed,scale:pr.scale,tick:pr.tick,tickCount:pr.tickCount,tickLine:bs.tickLine,tickSize:bs.tickSize,type:pr.type,xAxisId:0},nce=e=>{var t=Vn(e,tce);return k.createElement(k.Fragment,null,k.createElement(Que,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),k.createElement(ece,t))},Xx=k.memo(nce,BD);Xx.displayName="XAxis";var rce=["dangerouslySetInnerHTML","ticks","scale"],ice=["id","scale"];function Jx(){return Jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jx.apply(null,arguments)}function HN(e,t){if(e==null)return{};var n,r,i=oce(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function oce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function sce(e){var t=Zt(),n=k.useRef(null);return k.useLayoutEffect(()=>{n.current===null?t(wse(e)):n.current!==e&&t(bse({prev:n.current,next:e})),n.current=e},[e,t]),k.useLayoutEffect(()=>()=>{n.current&&(t(Ese(n.current)),n.current=null)},[t]),null}var ace=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,o=k.useRef(null),a=k.useRef(null),c=Ge(Qw),f=Nr(),d=Zt(),m="yAxis",v=Ge(q=>m8(q,t)),b=Ge(q=>Ste(q,t)),C=Ge(q=>y8(q,m,t,f)),P=Ge(q=>Y4(q,t));if(k.useLayoutEffect(()=>{if(!(r!=="auto"||!v||gE(i)||k.isValidElement(i)||P==null)){var q=o.current;if(q){var W=q.getCalculatedWidth();Math.round(v.width)!==Math.round(W)&&d(_se({id:t,width:W}))}}},[C,v,d,i,t,r,P]),v==null||b==null||P==null)return null;var{dangerouslySetInnerHTML:N,ticks:R,scale:D}=e,F=HN(e,rce),{id:L,scale:U}=P,G=HN(P,ice);return k.createElement(_E,Jx({},F,G,{ref:o,labelRef:a,x:b.x,y:b.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:v.width,height:v.height,className:Ft("recharts-".concat(m," ").concat(m),n),viewBox:c,ticks:C,axisType:m}))},lce={allowDataOverflow:mr.allowDataOverflow,allowDecimals:mr.allowDecimals,allowDuplicatedCategory:mr.allowDuplicatedCategory,angle:mr.angle,axisLine:bs.axisLine,hide:!1,includeHidden:mr.includeHidden,interval:mr.interval,minTickGap:mr.minTickGap,mirror:mr.mirror,orientation:mr.orientation,padding:mr.padding,reversed:mr.reversed,scale:mr.scale,tick:mr.tick,tickCount:mr.tickCount,tickLine:bs.tickLine,tickSize:bs.tickSize,type:mr.type,width:mr.width,yAxisId:0},uce=e=>{var t=Vn(e,lce);return k.createElement(k.Fragment,null,k.createElement(sce,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),k.createElement(ace,t))},Zx=k.memo(uce,BD);Zx.displayName="YAxis";var cce=(e,t)=>t,CE=fe([cce,Dt,q4,sr,M8,Fs,Une,ir],Wne),AE=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},FD=io("mouseClick"),jD=Qd();jD.startListening({actionCreator:FD,effect:(e,t)=>{var n=e.payload,r=CE(t.getState(),AE(n));r?.activeIndex!=null&&t.dispatch(jte({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Qx=io("mouseMove"),UD=Qd(),s0=null;UD.startListening({actionCreator:Qx,effect:(e,t)=>{var n=e.payload;s0!==null&&cancelAnimationFrame(s0);var r=AE(n);s0=requestAnimationFrame(()=>{var i=t.getState(),o=iE(i,i.tooltip.settings.shared);if(o==="axis"){var a=CE(i,r);a?.activeIndex!=null?t.dispatch(A8({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(C8())}s0=null})}});function dce(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var qN={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},VD=hi({name:"rootProps",initialState:qN,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:qN.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),fce=VD.reducer,{updateOptions:hce}=VD.actions,zD=hi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:pce}=zD.actions,mce=zD.reducer,$D=io("keyDown"),GD=io("focus"),TE=Qd();TE.startListening({actionCreator:$D,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var a=oE(i,hc(n),pf(n),vf(n)),c=a==null?-1:Number(a);if(!(!Number.isFinite(c)||c<0)){var f=Fs(n);if(o==="Enter"){var d=Cp(n,"axis","hover",String(i.index));t.dispatch(Ux({active:!i.active,activeIndex:i.index,activeCoordinate:d}));return}var m=Pte(n),v=m==="left-to-right"?1:-1,b=o==="ArrowRight"?1:-1,C=c+b*v;if(!(f==null||C>=f.length||C<0)){var P=Cp(n,"axis","hover",String(C));t.dispatch(Ux({active:!0,activeIndex:C.toString(),activeCoordinate:P}))}}}}}});TE.startListening({actionCreator:GD,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",a=Cp(n,"axis","hover",String(o));t.dispatch(Ux({active:!0,activeIndex:o,activeCoordinate:a}))}}}});var Ji=io("externalEvent"),HD=Qd(),py=new Map;HD.startListening({actionCreator:Ji,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(n!=null){r.persist();var i=r.type,o=py.get(i);o!==void 0&&cancelAnimationFrame(o);var a=requestAnimationFrame(()=>{try{var c=t.getState(),f={activeCoordinate:Cne(c),activeDataKey:cE(c),activeIndex:Sa(c),activeLabel:B8(c),activeTooltipIndex:Sa(c),isTooltipActive:Ane(c)};n(f,r)}finally{py.delete(i)}});py.set(i,a)}}});var gce=fe([dc],e=>e.tooltipItemPayloads),vce=fe([gce,gf,(e,t)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(c=>c.settings.graphicalItemId===r);if(i!=null){var{positions:o}=i;if(o!=null){var a=t(o,n);return a}}}),qD=io("touchMove"),WD=Qd();WD.startListening({actionCreator:qD,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var r=t.getState(),i=iE(r,r.tooltip.settings.shared);if(i==="axis"){var o=n.touches[0];if(o==null)return;var a=CE(r,AE({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));a?.activeIndex!=null&&t.dispatch(A8({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var c,f=n.touches[0];if(document.elementFromPoint==null||f==null)return;var d=document.elementFromPoint(f.clientX,f.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(Jw),v=(c=d.getAttribute(Zw))!==null&&c!==void 0?c:void 0,b=fc(r).find(N=>N.id===v);if(m==null||b==null||v==null)return;var{dataKey:C}=b,P=vce(r,m,v);t.dispatch(S8({activeDataKey:C,activeIndex:m,activeCoordinate:P,activeGraphicalItemId:v}))}}}});var yce=jk({brush:Dse,cartesianAxis:Sse,chartData:Sre,errorBars:Wae,graphicalItems:joe,layout:XK,legend:iX,options:xre,polarAxis:Qie,polarOptions:mce,referenceElements:qse,rootProps:fce,tooltip:Ute,zIndex:are}),xce=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return bK({reducer:yce,preloadedState:t,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([jD.middleware,UD.middleware,TE.middleware,HD.middleware,WD.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(eM({type:"raf"}))},devTools:{serialize:{replacer:dce},name:"recharts-".concat(n)}})};function KD(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Nr(),o=k.useRef(null);if(i)return n;o.current==null&&(o.current=xce(t,r));var a=Gw;return k.createElement(gle,{context:a,store:o.current},n)}function wce(e){var{layout:t,margin:n}=e,r=Zt(),i=Nr();return k.useEffect(()=>{i||(r(WK(t)),r(qK(n)))},[r,i,t,n]),null}var YD=k.memo(wce,qm);function XD(e){var t=Zt();return k.useEffect(()=>{t(hce(e))},[t,e]),null}function WN(e){var{zIndex:t,isPanorama:n}=e,r=k.useRef(null),i=Zt();return k.useLayoutEffect(()=>(r.current&&i(ore({zIndex:t,element:r.current,isPanorama:n})),()=>{i(sre({zIndex:t,isPanorama:n}))}),[i,t,n]),k.createElement("g",{tabIndex:-1,ref:r})}function KN(e){var{children:t,isPanorama:n}=e,r=Ge(Yne);if(!r||r.length===0)return t;var i=r.filter(a=>a<0),o=r.filter(a=>a>0);return k.createElement(k.Fragment,null,i.map(a=>k.createElement(WN,{key:a,zIndex:a,isPanorama:n})),t,o.map(a=>k.createElement(WN,{key:a,zIndex:a,isPanorama:n})))}var bce=["children"];function Ece(e,t){if(e==null)return{};var n,r,i=_ce(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _ce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Mp(){return Mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mp.apply(null,arguments)}var Sce={width:"100%",height:"100%",display:"block"},Cce=k.forwardRef((e,t)=>{var n=tb(),r=nb(),i=kM();if(!Ho(n)||!Ho(r))return null;var{children:o,otherAttributes:a,title:c,desc:f}=e,d,m;return a!=null&&(typeof a.tabIndex=="number"?d=a.tabIndex:d=i?0:void 0,typeof a.role=="string"?m=a.role:m=i?"application":void 0),k.createElement(Lw,Mp({},a,{title:c,desc:f,role:m,tabIndex:d,width:n,height:r,style:Sce,ref:t}),o)}),Ace=e=>{var{children:t}=e,n=Ge(hm);if(!n)return null;var{width:r,height:i,y:o,x:a}=n;return k.createElement(Lw,{width:r,height:i,x:a,y:o},t)},YN=k.forwardRef((e,t)=>{var{children:n}=e,r=Ece(e,bce),i=Nr();return i?k.createElement(Ace,null,k.createElement(KN,{isPanorama:!0},n)):k.createElement(Cce,Mp({ref:t},r),k.createElement(KN,{isPanorama:!1},n))});function Tce(){var e=Zt(),[t,n]=k.useState(null),r=Ge(pY);return k.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),o=i.width/t.offsetWidth;Xt(o)&&o!==r&&e(YK(o))}},[t,e,r]),n}function XN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ice(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XN(Object(n),!0).forEach(function(r){Pce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pce(e,t,n){return(t=Nce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nce(e){var t=Rce(e,"string");return typeof t=="symbol"?t:t+""}function Rce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nl(){return Nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nl.apply(null,arguments)}var Oce=()=>(kre(),null);function Dp(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var kce=k.forwardRef((e,t)=>{var n,r,i=k.useRef(null),[o,a]=k.useState({containerWidth:Dp((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:Dp((r=e.style)===null||r===void 0?void 0:r.height)}),c=k.useCallback((d,m)=>{a(v=>{var b=Math.round(d),C=Math.round(m);return v.containerWidth===b&&v.containerHeight===C?v:{containerWidth:b,containerHeight:C}})},[]),f=k.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:m,height:v}=d.getBoundingClientRect();c(m,v);var b=P=>{var{width:N,height:R}=P[0].contentRect;c(N,R)},C=new ResizeObserver(b);C.observe(d),i.current=C}},[t,c]);return k.useEffect(()=>()=>{var d=i.current;d?.disconnect()},[c]),k.createElement(k.Fragment,null,k.createElement(pm,{width:o.containerWidth,height:o.containerHeight}),k.createElement("div",Nl({ref:f},e)))}),Mce=k.forwardRef((e,t)=>{var{width:n,height:r}=e,[i,o]=k.useState({containerWidth:Dp(n),containerHeight:Dp(r)}),a=k.useCallback((f,d)=>{o(m=>{var v=Math.round(f),b=Math.round(d);return m.containerWidth===v&&m.containerHeight===b?m:{containerWidth:v,containerHeight:b}})},[]),c=k.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null){var{width:d,height:m}=f.getBoundingClientRect();a(d,m)}},[t,a]);return k.createElement(k.Fragment,null,k.createElement(pm,{width:i.containerWidth,height:i.containerHeight}),k.createElement("div",Nl({ref:c},e)))}),Dce=k.forwardRef((e,t)=>{var{width:n,height:r}=e;return k.createElement(k.Fragment,null,k.createElement(pm,{width:n,height:r}),k.createElement("div",Nl({ref:t},e)))}),Lce=k.forwardRef((e,t)=>{var{width:n,height:r}=e;return Ss(n)||Ss(r)?k.createElement(Mce,Nl({},e,{ref:t})):k.createElement(Dce,Nl({},e,{ref:t}))});function Bce(e){return e===!0?kce:Lce}var Fce=k.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:a,onDoubleClick:c,onMouseDown:f,onMouseEnter:d,onMouseLeave:m,onMouseMove:v,onMouseUp:b,onTouchEnd:C,onTouchMove:P,onTouchStart:N,style:R,width:D,responsive:F,dispatchTouchEvents:L=!0}=e,U=k.useRef(null),G=Zt(),[q,W]=k.useState(null),[Z,X]=k.useState(null),pe=Tce(),ae=eb(),le=ae?.width>0?ae.width:D,be=ae?.height>0?ae.height:i,me=k.useCallback(we=>{pe(we),typeof t=="function"&&t(we),W(we),X(we),we!=null&&(U.current=we)},[pe,t,W,X]),te=k.useCallback(we=>{G(FD(we)),G(Ji({handler:o,reactEvent:we}))},[G,o]),Oe=k.useCallback(we=>{G(Qx(we)),G(Ji({handler:d,reactEvent:we}))},[G,d]),se=k.useCallback(we=>{G(C8()),G(Ji({handler:m,reactEvent:we}))},[G,m]),ve=k.useCallback(we=>{G(Qx(we)),G(Ji({handler:v,reactEvent:we}))},[G,v]),Ee=k.useCallback(()=>{G(GD())},[G]),Se=k.useCallback(we=>{G($D(we.key))},[G]),ne=k.useCallback(we=>{G(Ji({handler:a,reactEvent:we}))},[G,a]),he=k.useCallback(we=>{G(Ji({handler:c,reactEvent:we}))},[G,c]),Be=k.useCallback(we=>{G(Ji({handler:f,reactEvent:we}))},[G,f]),Fe=k.useCallback(we=>{G(Ji({handler:b,reactEvent:we}))},[G,b]),Ze=k.useCallback(we=>{G(Ji({handler:N,reactEvent:we}))},[G,N]),Pe=k.useCallback(we=>{L&&G(qD(we)),G(Ji({handler:P,reactEvent:we}))},[G,L,P]),st=k.useCallback(we=>{G(Ji({handler:C,reactEvent:we}))},[G,C]),it=Bce(F);return k.createElement(G8.Provider,{value:q},k.createElement(tk.Provider,{value:Z},k.createElement(it,{width:le??R?.width,height:be??R?.height,className:Ft("recharts-wrapper",r),style:Ice({position:"relative",cursor:"default",width:le,height:be},R),onClick:te,onContextMenu:ne,onDoubleClick:he,onFocus:Ee,onKeyDown:Se,onMouseDown:Be,onMouseEnter:Oe,onMouseLeave:se,onMouseMove:ve,onMouseUp:Fe,onTouchEnd:st,onTouchMove:Pe,onTouchStart:Ze,ref:me},k.createElement(Oce,null),n)))}),jce=["width","height","responsive","children","className","style","compact","title","desc"];function Uce(e,t){if(e==null)return{};var n,r,i=Vce(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Vce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var JD=k.forwardRef((e,t)=>{var{width:n,height:r,responsive:i,children:o,className:a,style:c,compact:f,title:d,desc:m}=e,v=Uce(e,jce),b=Oi(v);return f?k.createElement(k.Fragment,null,k.createElement(pm,{width:n,height:r}),k.createElement(YN,{otherAttributes:b,title:d,desc:m},o)):k.createElement(Fce,{className:a,style:c,width:n,height:r,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},k.createElement(YN,{otherAttributes:b,title:d,desc:m,ref:t},k.createElement(Wse,null,o)))});function ew(){return ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ew.apply(null,arguments)}var zce={top:5,right:5,bottom:5,left:5},$ce={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:zce,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},ZD=k.forwardRef(function(t,n){var r,i=Vn(t.categoricalChartProps,$ce),{chartName:o,defaultTooltipEventType:a,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,categoricalChartProps:d}=t,m={chartName:o,defaultTooltipEventType:a,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,eventEmitter:void 0};return k.createElement(KD,{preloadedState:{options:m},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:o},k.createElement(wD,{chartData:d.data}),k.createElement(YD,{layout:i.layout,margin:i.margin}),k.createElement(XD,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),k.createElement(JD,ew({},i,{ref:n})))}),Gce=["axis","item"],Hce=k.forwardRef((e,t)=>k.createElement(ZD,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Gce,tooltipPayloadSearcher:mE,categoricalChartProps:e,ref:t}));function qce(e){var t=Zt();return k.useEffect(()=>{t(pce(e))},[t,e]),null}var Wce=["layout"];function tw(){return tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tw.apply(null,arguments)}function Kce(e,t){if(e==null)return{};var n,r,i=Yce(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Yce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Xce={top:5,right:5,bottom:5,left:5},QD={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Xce,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Jce=k.forwardRef(function(t,n){var r,i=Vn(t.categoricalChartProps,QD),{layout:o}=i,a=Kce(i,Wce),{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:m}=t,v={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,eventEmitter:void 0};return k.createElement(KD,{preloadedState:{options:v},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:c},k.createElement(wD,{chartData:i.data}),k.createElement(YD,{layout:o,margin:i.margin}),k.createElement(XD,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),k.createElement(qce,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),k.createElement(JD,tw({},a,{ref:n})))});function JN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JN(Object(n),!0).forEach(function(r){Zce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zce(e,t,n){return(t=Qce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qce(e){var t=ede(e,"string");return typeof t=="symbol"?t:t+""}function ede(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tde=["item"],nde=ZN(ZN({},QD),{},{layout:"centric",startAngle:0,endAngle:360}),rde=k.forwardRef((e,t)=>{var n=Vn(e,nde);return k.createElement(Jce,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:tde,tooltipPayloadSearcher:mE,categoricalChartProps:n,ref:t})}),ide=["item"],ode=k.forwardRef((e,t)=>k.createElement(ZD,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:ide,tooltipPayloadSearcher:mE,categoricalChartProps:e,ref:t}));const QN=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"],sde=({perfume:e})=>{const[t,n]=k.useState(null),[r,i]=k.useState(!1);k.useEffect(()=>{o()},[]);const o=async()=>{const{data:c}=await Ht.from("inventory").select("quantity").eq("product_id",e.id).single();n(c?c.quantity:0)},a=async c=>{if(c<0)return;i(!0);const{error:f}=await Ht.from("inventory").upsert({product_id:e.id,quantity:c,updated_at:new Date().toISOString()});f?alert("Error: "+f.message):n(c),i(!1)};return I.jsxs("tr",{className:"border-b border-stone-100",children:[I.jsx("td",{className:"px-4 py-2",children:e.name}),I.jsx("td",{className:"px-4 py-2 text-center",children:I.jsx("span",{className:`font-bold ${t!==null&&t>2?"text-green-600":"text-red-500"}`,children:t!==null?t:"..."})}),I.jsxs("td",{className:"px-4 py-2 text-right flex justify-end gap-1",children:[I.jsx("button",{onClick:()=>a((t||0)+1),disabled:r,className:"bg-stone-200 text-stone-800 px-2 py-1 rounded text-xs font-bold hover:bg-stone-300",children:"+"}),I.jsx("button",{onClick:()=>a((t||0)-1),disabled:r||(t||0)<=0,className:"bg-stone-200 text-stone-800 px-2 py-1 rounded text-xs font-bold hover:bg-stone-300",children:"-"})]})]})},ade=({onLogout:e})=>{const[t,n]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState("month"),[c,f]=k.useState(0),[d,m]=k.useState(0),[v,b]=k.useState([]),[C,P]=k.useState([]),[N,R]=k.useState([]),[D,F]=k.useState([]),[L,U]=k.useState("dashboard"),[G,q]=k.useState([]),[W,Z]=k.useState(null);k.useEffect(()=>{L==="dashboard"?X():L==="clients"&&pe()},[L,o]);const X=async()=>{i(!0);try{const me=new Date;o==="week"?me.setDate(me.getDate()-7):me.setDate(me.getDate()-30);const{data:te,error:Oe}=await Ht.from("transactions").select("*").gte("created_at",me.toISOString());if(Oe)throw Oe;const se=te||[],ve=new Date(me);o==="week"?ve.setDate(ve.getDate()-7):ve.setDate(ve.getDate()-30);const{data:Ee}=await Ht.from("transactions").select("*").gte("created_at",ve.toISOString()).lt("created_at",me.toISOString()),Se=Ee||[];n(se);const ne=se.reduce((Me,_e)=>Me+_e.amount,0);f(ne),m(se.length?Math.round(ne/se.length):0);const he=new Map;se.forEach(Me=>{const _e=Me.type==="product"?"Productos":"Servicios";he.set(_e,(he.get(_e)||0)+Me.amount)}),P(Array.from(he).map(([Me,_e])=>({name:Me,value:_e})));const Be=new Map,Fe=(Me,_e)=>{if(_e==="product"){const Ke=xa.find(dt=>dt.price5ml===Me||dt.price10ml===Me||dt.priceFullBottle===Me);return Ke?Ke.name:"Producto Genrico"}else{const Ke=dl.find(dt=>dt.price===Me);return Ke?Ke.name:"Servicio General"}};se.forEach(Me=>{const _e=Fe(Me.amount,Me.type);Be.has(_e)||Be.set(_e,{current:0,previous:0}),Be.get(_e).current++}),Se.forEach(Me=>{const _e=Fe(Me.amount,Me.type);Be.has(_e)||Be.set(_e,{current:0,previous:0}),Be.get(_e).previous++});const Ze=Array.from(Be.entries()).map(([Me,_e])=>({name:Me,count:_e.current})).sort((Me,_e)=>_e.count-Me.count).slice(0,5);R(Ze);const Pe=se.length||1,st=se.length/Be.size/Pe,it=[];Be.forEach((Me,_e)=>{if(Me.current===0)return;const Ke=Me.current/Pe,dt=Me.previous===0?1:(Me.current-Me.previous)/Me.previous;let It="question";Ke>=st&&dt>=0?It="star":Ke>=st&&dt<0?It="cow":Ke<st&&dt>=0?It="question":It="dog",it.push({name:_e,volume:Ke,growth:dt,type:It})}),F(it);const we=new Map;se.forEach(Me=>{if(!Me.client_id)return;const _e=we.get(Me.client_id)||{id:Me.client_id,phone:"Cargando...",total_spent:0,visit_count:0};_e.total_spent+=Me.amount,_e.visit_count+=1,we.set(Me.client_id,_e)});const tt=Array.from(we.keys());if(tt.length>0){const{data:Me}=await Ht.from("clients").select("id, phone").in("id",tt);Me?.forEach(_e=>{const Ke=we.get(_e.id);Ke&&(Ke.phone=_e.phone)})}b(Array.from(we.values()).sort((Me,_e)=>_e.total_spent-Me.total_spent).slice(0,10))}catch(me){console.error("Error fetching dashboard data:",me)}finally{i(!1)}},pe=async()=>{i(!0);const{data:me,error:te}=await Ht.from("clients").select("*").order("last_visit",{ascending:!1});te?console.error("Error fetching clients",te):q(me||[]),i(!1)},ae=async me=>{if(me.preventDefault(),!W)return;const{error:te}=await Ht.from("clients").update({phone:W.phone,visits:W.visits}).eq("id",W.id);te?alert("Error al actualizar: "+te.message):(Z(null),pe())},le=async me=>{if(!window.confirm("Ests seguro de eliminar este cliente? Esta accin no se puede deshacer y borrar su historial."))return;const{error:te}=await Ht.from("clients").delete().eq("id",me);te?alert("Error al eliminar: "+te.message):pe()},be=()=>{const me=["ID Transaccion","Fecha","Monto","Tipo","ID Cliente"],te=t.map(Ee=>[Ee.id,Ee.created_at,Ee.amount,Ee.type,Ee.client_id||"Annimo"]),Oe="data:text/csv;charset=utf-8,"+me.join(",")+`
`+te.map(Ee=>Ee.join(",")).join(`
`),se=encodeURI(Oe),ve=document.createElement("a");ve.setAttribute("href",se),ve.setAttribute("download",`reporte_financiero_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(ve),ve.click(),document.body.removeChild(ve)};return I.jsxs("div",{className:"max-w-6xl mx-auto p-4 py-8",children:[I.jsxs("div",{className:"flex justify-between items-center mb-8",children:[I.jsx("h1",{className:"text-3xl font-bold text-stone-900 serif",children:"Panel de Gestin"}),I.jsxs("div",{className:"flex gap-4",children:[L==="dashboard"&&I.jsxs("select",{value:o,onChange:me=>a(me.target.value),className:"bg-white border border-stone-300 rounded-lg px-3 py-2 text-sm",children:[I.jsx("option",{value:"week",children:"ltima Semana"}),I.jsx("option",{value:"month",children:"ltimo Mes"})]}),I.jsx("button",{onClick:e,className:"bg-stone-200 px-4 py-2 rounded-lg text-sm font-bold hover:bg-stone-300",children:"Cerrar Sesin"})]})]}),I.jsxs("div",{className:"flex gap-4 mb-6 border-b border-stone-200 pb-1",children:[I.jsx("button",{onClick:()=>U("dashboard"),className:`px-4 py-2 font-bold transition ${L==="dashboard"?"text-stone-900 border-b-2 border-stone-900":"text-stone-400 hover:text-stone-600"}`,children:"Dashboard"}),I.jsx("button",{onClick:()=>U("clients"),className:`px-4 py-2 font-bold transition ${L==="clients"?"text-stone-900 border-b-2 border-stone-900":"text-stone-400 hover:text-stone-600"}`,children:"Clientes"})]}),L==="dashboard"?I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex items-center justify-between",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-stone-500 text-sm uppercase tracking-wider mb-1",children:"Monto Neto"}),I.jsxs("h3",{className:"text-3xl font-bold text-green-600",children:["$",c.toLocaleString()]})]}),I.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:I.jsx(UL,{className:"text-green-600"})})]}),I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex items-center justify-between",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-stone-500 text-sm uppercase tracking-wider mb-1",children:"Ticket Promedio"}),I.jsxs("h3",{className:"text-3xl font-bold text-blue-600",children:["$",d.toLocaleString()]})]}),I.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:I.jsx(D_,{className:"text-blue-600"})})]}),I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex items-center justify-between",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-stone-500 text-sm uppercase tracking-wider mb-1",children:"Transacciones"}),I.jsx("h3",{className:"text-3xl font-bold text-purple-600",children:t.length})]}),I.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:I.jsx(D_,{className:"text-purple-600"})})]})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[I.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[I.jsx(JL,{size:18})," Origen de Ingresos"]}),I.jsx("div",{className:"h-[250px] w-full",children:I.jsx(Bv,{width:"100%",height:"100%",children:I.jsxs(rde,{children:[I.jsx(gD,{data:C,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",children:C.map((me,te)=>I.jsx(Tl,{fill:QN[te%QN.length]},`cell-${te}`))}),I.jsx(ty,{formatter:me=>`$${me.toLocaleString()}`}),I.jsx(OM,{})]})})})]}),I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[I.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[I.jsx(LL,{size:18})," Top Productos/Servicios"]}),I.jsx("div",{className:"h-[250px] w-full",children:I.jsx(Bv,{width:"100%",height:"100%",children:I.jsxs(Hce,{data:N,layout:"vertical",children:[I.jsx(Hx,{strokeDasharray:"3 3",horizontal:!1}),I.jsx(Xx,{type:"number",hide:!0}),I.jsx(Zx,{dataKey:"name",type:"category",width:100,style:{fontSize:"10px"}}),I.jsx(ty,{}),I.jsx(MD,{dataKey:"count",fill:"#8884d8",radius:[0,4,4,0]})]})})})]}),I.jsxs("div",{className:"md:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[I.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[I.jsx(tB,{size:18})," Matriz BCG (Crecimiento vs Participacin)"]}),I.jsxs("div",{className:"h-[300px] w-full relative",children:[I.jsx(Bv,{width:"100%",height:"100%",children:I.jsxs(ode,{margin:{top:20,right:20,bottom:20,left:20},children:[I.jsx(Hx,{}),I.jsx(Xx,{type:"number",dataKey:"volume",name:"Cuota (Volumen)",unit:"%",domain:[0,"auto"],tickFormatter:me=>Math.round(me*100)+"%"}),I.jsx(Zx,{type:"number",dataKey:"growth",name:"Crecimiento",unit:"%",tickFormatter:me=>Math.round(me*100)+"%"}),I.jsx(ty,{cursor:{strokeDasharray:"3 3"},formatter:(me,te)=>[Math.round(me*100)+"%",te==="volume"?"Cuota":"Crecimiento"]}),I.jsx(CD,{y:0,stroke:"#ccc",strokeDasharray:"3 3"}),I.jsx(LD,{name:"Productos",data:D,fill:"#8884d8",children:D.map((me,te)=>{let Oe="#8884d8";return me.type==="star"?Oe="#FFBB28":me.type==="cow"?Oe="#00C49F":me.type==="dog"?Oe="#FF8042":Oe="#999",I.jsx(Tl,{fill:Oe},`cell-${te}`)})})]})}),I.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 p-2 rounded border border-stone-200 text-xs shadow-lg grid grid-cols-2 gap-2",children:[I.jsxs("div",{className:"flex items-center gap-1",children:[I.jsx("div",{className:"w-3 h-3 bg-[#FFBB28] rounded-full"}),"  Estrella"]}),I.jsxs("div",{className:"flex items-center gap-1",children:[I.jsx("div",{className:"w-3 h-3 bg-[#00C49F] rounded-full"}),"  Vaca"]}),I.jsxs("div",{className:"flex items-center gap-1",children:[I.jsx("div",{className:"w-3 h-3 bg-[#999] rounded-full"}),"  Interrogante"]}),I.jsxs("div",{className:"flex items-center gap-1",children:[I.jsx("div",{className:"w-3 h-3 bg-[#FF8042] rounded-full"}),"  Perro"]})]})]}),I.jsx("p",{className:"text-xs text-stone-400 mt-2 text-center",children:"* Eje X: Cuota de Mercado (Volumen) | Eje Y: Crecimiento respecto al periodo anterior"})]})]}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[I.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[I.jsx(sB,{size:20})," Top 10 Clientes (Gasto)"]}),I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full text-sm text-left",children:[I.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500",children:I.jsxs("tr",{children:[I.jsx("th",{className:"px-4 py-2",children:"Cliente"}),I.jsx("th",{className:"px-4 py-2 text-right",children:"Visitas"}),I.jsx("th",{className:"px-4 py-2 text-right",children:"Total Gastado"})]})}),I.jsxs("tbody",{children:[v.map((me,te)=>I.jsxs("tr",{className:"border-b border-stone-100",children:[I.jsxs("td",{className:"px-4 py-3 font-medium",children:[te+1,". ",me.phone]}),I.jsx("td",{className:"px-4 py-3 text-right",children:me.visit_count}),I.jsxs("td",{className:"px-4 py-3 text-right font-bold text-green-600",children:["$",me.total_spent.toLocaleString()]})]},me.id)),v.length===0&&I.jsx("tr",{children:I.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-stone-400",children:"No hay suficientes datos"})})]})]})})]}),I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[I.jsxs("div",{className:"flex justify-between items-center mb-4",children:[I.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[I.jsx(XL,{size:20})," Inventario Perfumes"]}),I.jsxs("button",{onClick:be,className:"text-sm text-blue-600 font-bold hover:underline flex items-center gap-1",children:[I.jsx(VL,{size:14})," Exportar CSV"]})]}),I.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:I.jsxs("table",{className:"w-full text-xs text-left",children:[I.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500 sticky top-0",children:I.jsxs("tr",{children:[I.jsx("th",{className:"px-4 py-2",children:"Producto"}),I.jsx("th",{className:"px-4 py-2 text-center",children:"Stock Real"}),I.jsx("th",{className:"px-4 py-2 text-right",children:"Accin"})]})}),I.jsx("tbody",{children:xa.map(me=>I.jsx(sde,{perfume:me},me.id))})]})})]})]})]}):I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[I.jsx("h3",{className:"text-xl font-bold mb-6",children:"Gestin de Clientes"}),I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full text-sm text-left",children:[I.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500",children:I.jsxs("tr",{children:[I.jsx("th",{className:"px-6 py-3",children:"Telfono / Cliente"}),I.jsx("th",{className:"px-6 py-3 text-center",children:"Visitas (Lealtad)"}),I.jsx("th",{className:"px-6 py-3",children:"ltima Visita"}),I.jsx("th",{className:"px-6 py-3 text-right",children:"Acciones"})]})}),I.jsx("tbody",{children:G.map(me=>I.jsxs("tr",{className:"border-b border-stone-100 hover:bg-stone-50",children:[I.jsx("td",{className:"px-6 py-4 font-medium",children:me.phone}),I.jsx("td",{className:"px-6 py-4 text-center",children:I.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full font-bold",children:me.visits})}),I.jsx("td",{className:"px-6 py-4 text-stone-500",children:new Date(me.last_visit).toLocaleDateString()}),I.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[I.jsx("button",{onClick:()=>Z(me),className:"text-blue-600 hover:text-blue-800 font-medium text-xs px-2 py-1 bg-blue-50 rounded",children:"Editar"}),I.jsx("button",{onClick:()=>le(me.id),className:"text-red-600 hover:text-red-800 font-medium text-xs px-2 py-1 bg-red-50 rounded",children:"Eliminar"})]})]},me.id))})]})})]}),W&&I.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:I.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-sm",children:[I.jsx("h3",{className:"text-xl font-bold mb-4",children:"Editar Cliente"}),I.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-1",children:"Telfono"}),I.jsx("input",{type:"text",value:W.phone,onChange:me=>Z({...W,phone:me.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-1",children:"Visitas (Puntos)"}),I.jsx("input",{type:"number",value:W.visits,onChange:me=>Z({...W,visits:parseInt(me.target.value)}),className:"w-full px-4 py-2 border rounded-lg"})]}),I.jsxs("div",{className:"flex gap-2 mt-6",children:[I.jsx("button",{type:"button",onClick:()=>Z(null),className:"flex-1 px-4 py-2 bg-stone-200 text-stone-700 rounded-lg font-bold",children:"Cancelar"}),I.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-stone-900 text-white rounded-lg font-bold",children:"Guardar"})]})]})]})})]})},lde=()=>{const[e,t]=k.useState(null),[n,r]=k.useState(""),i=(a,c)=>{t(a),c&&r(c)},o=async()=>{await Ht.auth.signOut(),t(null),r("")};return e?e==="management"?I.jsx(ade,{onLogout:o}):I.jsx(MH,{onLogout:o}):I.jsx(oH,{onLogin:i})},ude=()=>{const[e,t]=k.useState("Todos"),[n,r]=k.useState(null),i=["Todos","Cortes","Color","Peinados"],o=e==="Todos"?L_:L_.filter(a=>a.category===e);return I.jsxs("div",{className:"animate-in fade-in duration-700",children:[I.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:i.map(a=>I.jsx("button",{onClick:()=>t(a),className:`px-6 py-2 rounded-full text-sm font-bold uppercase tracking-widest transition-all ${e===a?"bg-stone-900 text-white shadow-lg scale-105":"bg-stone-100 text-stone-500 hover:bg-stone-200"}`,children:a},a))}),I.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-8 space-y-8 px-4",children:o.map((a,c)=>I.jsxs("div",{className:"break-inside-avoid relative group cursor-zoom-in overflow-hidden rounded-xl shadow-md bg-stone-100",onClick:()=>r(a.url),children:[I.jsx("img",{src:a.url,alt:a.description,className:"w-full h-auto object-cover transform transition duration-700 group-hover:scale-110",loading:"lazy"}),I.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:I.jsxs("div",{className:"text-white text-center p-4 transform translate-y-4 group-hover:translate-y-0 transition duration-300",children:[I.jsx(lB,{className:"mx-auto mb-2 opacity-80"}),I.jsx("p",{className:"font-serif italic text-lg",children:a.description})]})})]},c))}),n&&I.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:()=>r(null),children:[I.jsx("button",{className:"absolute top-6 right-6 text-white/50 hover:text-white transition",onClick:()=>r(null),children:I.jsx(Wd,{size:32})}),I.jsx("img",{src:n,alt:"Zoom",className:"max-w-full max-h-[90vh] object-contain rounded-sm shadow-2xl scale-in-95 animate-in duration-300"})]})]})},cde=()=>{const e=t=>{const n=encodeURIComponent(`Hola, me gustara reservar el "${t}".`);window.open(`https://wa.me/${Pu}?text=${n}`,"_blank")};return I.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 min-h-[60vh]",children:[I.jsxs("div",{className:"text-center mb-16",children:[I.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Detalles con Amor"}),I.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-rose-500",children:"Amor Amor"}),I.jsx("p",{className:"text-stone-500 mt-4 max-w-2xl mx-auto",children:"Sorprende a quien ms quieres con nuestra seleccin exclusiva."})]}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:gB.map(t=>I.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-stone-100 hover:shadow-xl transition-shadow flex flex-col",children:[I.jsxs("div",{className:"bg-amber-50 p-8 flex justify-center items-center h-48 relative overflow-hidden group",children:[I.jsx("div",{className:"absolute inset-0 bg-amber-100 opacity-0 group-hover:opacity-20 transition-opacity"}),I.jsx(dw,{size:64,className:"text-amber-500 relative z-10"})]}),I.jsxs("div",{className:"p-8 flex-grow flex flex-col",children:[I.jsx("h3",{className:"serif text-2xl text-stone-900 mb-2",children:t.name}),I.jsx("div",{className:"text-3xl font-light text-stone-800 mb-6 font-serif",children:t.price>0?`$${t.price.toLocaleString("es-CL")}`:"A medida"}),I.jsx("div",{className:"space-y-3 mb-8 flex-grow",children:t.includes.map((n,r)=>I.jsxs("div",{className:"flex items-start text-stone-600",children:[I.jsx(GL,{size:16,className:"text-amber-400 mt-1 mr-2 flex-shrink-0 fill-current"}),I.jsx("span",{className:"text-sm",children:n})]},r))}),I.jsx("button",{onClick:()=>e(t.name),className:"w-full bg-stone-900 text-white py-3 rounded-full font-bold uppercase tracking-wider text-sm hover:bg-stone-800 transition shadow-md",children:"Reservar"})]})]},t.id))})]})},dde=()=>I.jsxs("div",{className:"min-h-screen bg-stone-950 text-white flex flex-col relative overflow-hidden",children:[I.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[600px] h-[600px] bg-rose-500/10 rounded-full blur-[120px] pointer-events-none"}),I.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-amber-500/10 rounded-full blur-[100px] pointer-events-none"}),I.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center px-4 py-8 max-w-lg mx-auto w-full z-10 space-y-8",children:[I.jsxs("div",{className:"text-center space-y-2 mb-4",children:[I.jsxs("h1",{className:"font-serif italic text-5xl md:text-6xl text-white tracking-tighter",children:["Tus3B ",I.jsx("span",{className:"text-amber-500",children:"Hub"})]}),I.jsx("p",{className:"text-stone-400 text-[10px] uppercase tracking-[0.4em] font-medium",children:"Belleza  Aroma  Regalos"})]}),I.jsxs("div",{className:"w-full space-y-4",children:[I.jsxs(ui,{to:"/style",className:"group block relative overflow-hidden rounded-2xl border border-stone-800 bg-stone-900/40 hover:bg-stone-900/60 transition-all duration-300",children:[I.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),I.jsxs("div",{className:"p-6 flex items-center justify-between",children:[I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx("div",{className:"w-12 h-12 rounded-full bg-stone-800 flex items-center justify-center text-white border border-stone-700 group-hover:border-white/50 transition-colors",children:I.jsx(hw,{size:24})}),I.jsxs("div",{children:[I.jsx("h2",{className:"font-serif text-2xl italic",children:"Style"}),I.jsx("p",{className:"text-[10px] text-stone-500 uppercase tracking-widest",children:"Peluquera & Color"})]})]}),I.jsx(bd,{size:20,className:"text-stone-600 group-hover:text-white transition-colors"})]})]}),I.jsx(ui,{to:"/perfum",className:"group block relative overflow-hidden rounded-2xl border border-amber-900/30 bg-stone-900/40 hover:bg-amber-950/20 transition-all duration-300",children:I.jsxs("div",{className:"p-6 flex items-center justify-between",children:[I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-900/20 flex items-center justify-center text-amber-500 border border-amber-500/20 group-hover:border-amber-500/50 transition-colors",children:I.jsx(Ad,{size:24})}),I.jsxs("div",{children:[I.jsx("h2",{className:"font-serif text-2xl text-amber-500",children:"Perfum"}),I.jsx("p",{className:"text-[10px] text-amber-800/80 uppercase tracking-widest",children:"Decants Exclusivos"})]})]}),I.jsx(bd,{size:20,className:"text-amber-900/50 group-hover:text-amber-500 transition-colors"})]})}),I.jsx(ui,{to:"/regalos",className:"group block relative overflow-hidden rounded-2xl border border-rose-900/30 bg-stone-900/40 hover:bg-rose-950/20 transition-all duration-300",children:I.jsxs("div",{className:"p-6 flex items-center justify-between",children:[I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx("div",{className:"w-12 h-12 rounded-full bg-rose-900/20 flex items-center justify-center text-rose-400 border border-rose-500/20 group-hover:border-rose-500/50 transition-colors",children:I.jsx(dw,{size:24})}),I.jsxs("div",{children:[I.jsx("h2",{className:"font-serif text-2xl text-rose-400",children:"Amor Amor"}),I.jsx("p",{className:"text-[10px] text-rose-800/80 uppercase tracking-widest",children:"Detalles Especiales"})]})]}),I.jsx(bd,{size:20,className:"text-rose-900/50 group-hover:text-rose-400 transition-colors"})]})})]}),I.jsx("div",{className:"w-full mt-4",children:I.jsxs(ui,{to:"/loyalty",className:"block relative bg-gradient-to-r from-stone-900 to-stone-800 p-1 rounded-2xl shadow-xl group",children:[I.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500 via-rose-500 to-amber-500 opacity-20 blur-md group-hover:opacity-40 transition-opacity"}),I.jsxs("div",{className:"relative bg-stone-950 rounded-xl p-5 flex items-center justify-between border border-white/5",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("div",{className:"bg-white text-black p-2 rounded-lg",children:I.jsx(bR,{size:20})}),I.jsxs("div",{children:[I.jsx("p",{className:"text-xs text-stone-400 font-medium",children:"Tus3B Club"}),I.jsx("p",{className:"text-sm font-bold text-white",children:"Mi Tarjeta Digital"})]})]}),I.jsx("span",{className:"text-[10px] bg-stone-800 px-2 py-1 rounded text-stone-300 group-hover:bg-stone-700 transition",children:"Ver Puntos"})]})]})}),I.jsx("div",{className:"w-full pt-4",children:I.jsx("p",{className:"text-center text-[10px] text-stone-600 mt-3",children:"Toca una categora para explorar"})})]}),I.jsx("div",{className:"text-center py-6 z-10",children:I.jsx("p",{className:"text-[9px] text-stone-700 uppercase tracking-widest",children:"Estilo  Confianza  Calidad"})})]}),fde=[{id:"1",title:"Hidratacin Profunda",preview:"Cabello seco y sin vida? Descubre el secreto de la hidratacin.",icon:I.jsx(zL,{className:"text-blue-400",size:24}),fullTip:"El agua caliente abre la cutcula y reseca tu cabello. Intenta lavar siempre con agua tibia y terminar con un chorro de agua fra para sellar el brillo. Complementa con una mascarilla hidratante una vez a la semana.",relatedProduct:"Masaje Capilar"},{id:"2",title:"Proteccin Trmica",preview:"No quemes tu cabello. Aprende a usar el calor a tu favor.",icon:I.jsx(oB,{className:"text-amber-500",size:24}),fullTip:"Antes de usar secador o plancha, SIEMPRE aplica un protector trmico. Es la diferencia entre un cabello sano y uno quebradizo. Ajusta la temperatura a medio, no mximo.",relatedProduct:"Brushing"},{id:"3",title:"Corte de Puntas",preview:"Mito o realidad? Cortar las puntas hace crecer el pelo.",icon:I.jsx(hw,{className:"text-rose-400",size:24}),fullTip:"Cortar las puntas no hace que crezca ms rpido desde la raz, pero evita que las puntas abiertas se sigan partiendo hacia arriba (tripa). Un corte cada 2-3 meses mantiene tu largo saludable.",relatedProduct:"Corte de Puntas"},{id:"4",title:"Cuidado del Color",preview:"Mantn tu tinte vibrante por mucho ms tiempo.",icon:I.jsx(Lu,{className:"text-purple-400",size:24}),fullTip:"Usa shampoos sin sulfatos para cabellos teidos. El sol oxida el color, as que usa sombreros o productos con filtro UV en verano. Lava tu cabello cada 2-3 das, no a diario.",relatedProduct:"Aplicacin de Tintura"},{id:"5",title:"Frizz Control",preview:"Doma el volumen y luce un cabello suave y ordenado.",icon:I.jsx(aB,{className:"text-teal-400",size:24}),fullTip:"El frizz es falta de hidratacin. No frotes tu cabello con la toalla; presiona suavemente. Usa fundas de almohada de satn o seda para evitar la friccin mientras duermes.",relatedProduct:"Corte Bordado"}],hde=()=>{const[e,t]=k.useState(null);return I.jsx("section",{className:"py-20 bg-stone-50",children:I.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[I.jsxs("div",{className:"text-center mb-12",children:[I.jsx("span",{className:"text-xs font-bold tracking-widest text-stone-500 uppercase",children:"Blog de Expertos"}),I.jsx("h2",{className:"serif text-4xl mt-2 text-stone-900",children:"Secretos de Greici Nataly"}),I.jsx("p",{className:"text-stone-600 mt-4 max-w-2xl mx-auto",children:"Tips profesionales para que mantengas tu cabello radiante entre cada visita al saln."})]}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:fde.map(n=>I.jsxs("div",{className:`bg-white rounded-2xl p-6 shadow-sm border border-stone-100 transition-all duration-300 ${e===n.id?"row-span-2 shadow-md ring-1 ring-stone-200":"hover:shadow-md"}`,children:[I.jsxs("div",{className:"flex items-start justify-between mb-4",children:[I.jsx("div",{className:"bg-stone-50 p-3 rounded-xl",children:n.icon}),n.relatedProduct&&I.jsx("span",{className:"text-[10px] bg-stone-100 px-2 py-1 rounded-full text-stone-500 font-bold uppercase",children:"Recomendado"})]}),I.jsx("h3",{className:"text-xl font-bold text-stone-900 mb-2",children:n.title}),e===n.id?I.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2",children:[I.jsx("p",{className:"text-stone-600 leading-relaxed mb-6 font-light",children:n.fullTip}),I.jsxs("div",{className:"flex justify-between items-center border-t border-stone-100 pt-4",children:[I.jsx("button",{onClick:()=>t(null),className:"text-stone-400 text-sm hover:text-stone-600 font-medium transition",children:"Cerrar"}),I.jsxs("a",{href:"#booking-section",className:"text-stone-900 text-sm font-bold flex items-center gap-1 hover:underline",children:["Agendar ",n.relatedProduct," ",I.jsx(bd,{size:14})]})]})]}):I.jsxs("div",{children:[I.jsx("p",{className:"text-stone-500 text-sm mb-4",children:n.preview}),I.jsxs("button",{onClick:()=>t(n.id),className:"text-stone-900 font-bold text-sm flex items-center gap-2 hover:gap-3 transition-all group",children:["Leer Tip ",I.jsx(bd,{size:14,className:"group-hover:text-amber-500 transition-colors"})]})]})]},n.id))}),I.jsx("div",{className:"mt-12 text-center",children:I.jsxs("div",{className:"inline-flex items-center gap-3 bg-white px-4 py-2 rounded-full shadow-sm border border-stone-100",children:[I.jsx("img",{src:"/images/gallery/work_1.png",alt:"Greici",className:"w-8 h-8 rounded-full object-cover",onError:n=>n.target.src="https://ui-avatars.com/api/?name=Greici+Nataly&background=random"}),I.jsxs("span",{className:"text-sm text-stone-600 italic",children:['"Tu cabello es tu corona, cudalo con amor."  ',I.jsx("span",{className:"font-bold text-stone-900",children:"Greici Nataly"})]})]})})]})})},pde=()=>{const{pathname:e}=Io();return mn.useEffect(()=>{window.scrollTo(0,0)},[e]),null},mde=()=>{const[e,t]=k.useState(null),n=()=>I.jsxs(I.Fragment,{children:[I.jsx(cB,{onCtaClick:()=>{document.getElementById("booking-section")?.scrollIntoView({behavior:"smooth"})}}),I.jsx("section",{className:"py-20 bg-white",children:I.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[I.jsxs("div",{className:"text-center mb-12",children:[I.jsx("h2",{className:"serif text-4xl text-stone-900",children:"Nuestros Servicios"}),I.jsx("p",{className:"text-stone-500 mt-2",children:"Transparencia y calidad en cada detalle."})]}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:dl.filter(r=>!r.homeServiceOnly).map(r=>I.jsxs("div",{className:"flex justify-between items-center border-b border-stone-100 pb-4",children:[I.jsxs("div",{children:[I.jsx("h3",{className:"font-bold text-stone-900",children:r.name}),I.jsx("p",{className:"text-xs text-stone-500",children:r.description})]}),I.jsxs("div",{className:"text-right ml-4",children:[I.jsxs("span",{className:"block font-serif font-bold text-lg text-stone-900",children:["$",r.price.toLocaleString("es-CL")]}),I.jsxs("span",{className:"text-[10px] text-stone-400 uppercase",children:[r.durationMin," min"]})]})]},r.id))}),I.jsx("div",{className:"mt-8 text-center",children:I.jsx(ui,{to:"/booking",className:"text-stone-900 font-bold border-b border-stone-900 hover:text-stone-600 hover:border-stone-600 transition",children:"Ver Men Completo"})})]})}),I.jsx("section",{className:"py-24 bg-stone-50 relative overflow-hidden",children:I.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[I.jsxs("div",{className:"relative",children:[I.jsx("div",{className:"absolute -top-4 -left-4 w-full h-full border-2 border-stone-200 rounded-sm"}),I.jsx("img",{src:"/images/gallery/work_1.png",alt:"Hair Styling",className:"rounded-sm shadow-xl relative z-10 w-full",onError:r=>{r.target.src="https://images.unsplash.com/photo-1560869713-7d0a29430803?auto=format&fit=crop&q=80&w=800"}})]}),I.jsxs("div",{className:"space-y-6",children:[I.jsx("span",{className:"text-xs font-bold tracking-widest text-stone-500 uppercase",children:"Portafolio"}),I.jsx("h3",{className:"serif text-4xl text-stone-900",children:"Experiencia que se nota"}),I.jsx("p",{className:"text-stone-600 font-light text-lg leading-relaxed",children:"Cada corte y color es una obra de arte personalizada. Revisa nuestra galera para encontrar la inspiracin de tu prximo look."}),I.jsx("div",{className:"flex items-center space-x-4 pt-4",children:I.jsx(ui,{to:"/gallery",className:"px-8 py-3 bg-stone-900 text-white rounded-full font-bold text-sm hover:bg-stone-700 transition no-underline flex items-center justify-center shadow-lg",children:"Ver Galera Completa"})})]})]})})}),I.jsx(hde,{}),I.jsx(WG,{}),I.jsxs("div",{id:"booking-section",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[I.jsxs("div",{className:"text-center mb-16",children:[I.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Tu momento es ahora"}),I.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Agenda tu Cita"})]}),I.jsx(T7,{onSuccess:r=>{t(r)}})]}),I.jsx("div",{className:"bg-white py-4 text-center",children:I.jsxs(ui,{to:"/admin",className:"text-[10px] text-stone-300 hover:text-stone-500 flex items-center justify-center gap-1 mx-auto transition no-underline",children:[I.jsx(nB,{size:10})," Admin"]})})]});return I.jsx(_L,{children:I.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[I.jsx(pde,{}),I.jsx(uB,{}),I.jsx("main",{className:"flex-grow pt-16 md:pt-0",children:I.jsxs(Q5,{children:[I.jsx(fs,{path:"/",element:I.jsx(dde,{})}),I.jsx(fs,{path:"/style",element:I.jsx(n,{})}),I.jsx(fs,{path:"/perfum",element:I.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[I.jsxs("div",{className:"text-center mb-16",children:[I.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Aromas Exclusivos"}),I.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Nuestra Coleccin"})]}),I.jsx(P7,{})]})}),I.jsx(fs,{path:"/regalos",element:I.jsx(cde,{})}),I.jsx(fs,{path:"/gallery",element:I.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[I.jsxs("div",{className:"text-center mb-16",children:[I.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Nuestro Arte"}),I.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Galera de Trabajos"}),I.jsx("p",{className:"text-stone-500 mt-4 max-w-2xl mx-auto",children:"Resultados reales de clientas felices. Insprate para tu prximo cambio de look."})]}),I.jsx(ude,{})]})}),I.jsx(fs,{path:"/loyalty",element:I.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 min-h-[60vh] flex flex-col justify-center items-center",children:I.jsx(iH,{})})}),I.jsx(fs,{path:"/admin",element:I.jsx(lde,{})}),I.jsx(fs,{path:"/confirmation",element:I.jsx(gde,{})})]})}),I.jsx(N7,{}),I.jsx(HG,{})]})})},gde=()=>{const t=Io().state;return t?I.jsx(qG,{isHomeService:t.booking.isHomeService,onGoHome:()=>window.location.href="/",onGoCatalog:()=>window.location.href="/perfum"}):I.jsx(J5,{to:"/"})};console.log("Iniciando aplicacin React...");const e6=document.getElementById("root");if(!e6)throw new Error("Could not find root element to mount to");try{t5.createRoot(e6).render(I.jsx(mn.StrictMode,{children:I.jsx(mde,{})})),console.log("Aplicacin montada correctamente.")}catch(e){console.error("Error al montar la aplicacin:",e);const t=document.getElementById("app-error");t&&(t.style.display="block",t.innerHTML="Error crtico al iniciar React: "+e.message)}
