function Tx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ro(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Id(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var zm={exports:{}},Gc={},$m={exports:{}},bt={};var L_;function BD(){if(L_)return bt;L_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function E(te){return te===null||typeof te!="object"?null:(te=y&&te[y]||te["@@iterator"],typeof te=="function"?te:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,P={};function N(te,he,Fe){this.props=te,this.context=he,this.refs=P,this.updater=Fe||C}N.prototype.isReactComponent={},N.prototype.setState=function(te,he){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,he,"setState")},N.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function L(){}L.prototype=N.prototype;function U(te,he,Fe){this.props=te,this.context=he,this.refs=P,this.updater=Fe||C}var F=U.prototype=new L;F.constructor=U,I(F,N.prototype),F.isPureReactComponent=!0;var z=Array.isArray,q=Object.prototype.hasOwnProperty,H={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function Z(te,he,Fe){var Le,lt={},Ne=null,ct=null;if(he!=null)for(Le in he.ref!==void 0&&(ct=he.ref),he.key!==void 0&&(Ne=""+he.key),he)q.call(he,Le)&&!W.hasOwnProperty(Le)&&(lt[Le]=he[Le]);var rt=arguments.length-2;if(rt===1)lt.children=Fe;else if(1<rt){for(var Ee=Array(rt),et=0;et<rt;et++)Ee[et]=arguments[et+2];lt.children=Ee}if(te&&te.defaultProps)for(Le in rt=te.defaultProps,rt)lt[Le]===void 0&&(lt[Le]=rt[Le]);return{$$typeof:t,type:te,key:Ne,ref:ct,props:lt,_owner:H.current}}function X(te,he){return{$$typeof:t,type:te.type,key:he,ref:te.ref,props:te.props,_owner:te._owner}}function ye(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function se(te){var he={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(Fe){return he[Fe]})}var ae=/\/+/g;function be(te,he){return typeof te=="object"&&te!==null&&te.key!=null?se(""+te.key):he.toString(36)}function fe(te,he,Fe,Le,lt){var Ne=typeof te;(Ne==="undefined"||Ne==="boolean")&&(te=null);var ct=!1;if(te===null)ct=!0;else switch(Ne){case"string":case"number":ct=!0;break;case"object":switch(te.$$typeof){case t:case e:ct=!0}}if(ct)return ct=te,lt=lt(ct),te=Le===""?"."+be(ct,0):Le,z(lt)?(Fe="",te!=null&&(Fe=te.replace(ae,"$&/")+"/"),fe(lt,he,Fe,"",function(et){return et})):lt!=null&&(ye(lt)&&(lt=X(lt,Fe+(!lt.key||ct&&ct.key===lt.key?"":(""+lt.key).replace(ae,"$&/")+"/")+te)),he.push(lt)),1;if(ct=0,Le=Le===""?".":Le+":",z(te))for(var rt=0;rt<te.length;rt++){Ne=te[rt];var Ee=Le+be(Ne,rt);ct+=fe(Ne,he,Fe,Ee,lt)}else if(Ee=E(te),typeof Ee=="function")for(te=Ee.call(te),rt=0;!(Ne=te.next()).done;)Ne=Ne.value,Ee=Le+be(Ne,rt++),ct+=fe(Ne,he,Fe,Ee,lt);else if(Ne==="object")throw he=String(te),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.");return ct}function ne(te,he,Fe){if(te==null)return te;var Le=[],lt=0;return fe(te,Le,"","",function(Ne){return he.call(Fe,Ne,lt++)}),Le}function we(te){if(te._status===-1){var he=te._result;he=he(),he.then(function(Fe){(te._status===0||te._status===-1)&&(te._status=1,te._result=Fe)},function(Fe){(te._status===0||te._status===-1)&&(te._status=2,te._result=Fe)}),te._status===-1&&(te._status=0,te._result=he)}if(te._status===1)return te._result.default;throw te._result}var me={current:null},xe={transition:null},Ae={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:xe,ReactCurrentOwner:H};function Ce(){throw Error("act(...) is not supported in production builds of React.")}return bt.Children={map:ne,forEach:function(te,he,Fe){ne(te,function(){he.apply(this,arguments)},Fe)},count:function(te){var he=0;return ne(te,function(){he++}),he},toArray:function(te){return ne(te,function(he){return he})||[]},only:function(te){if(!ye(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},bt.Component=N,bt.Fragment=n,bt.Profiler=i,bt.PureComponent=U,bt.StrictMode=r,bt.Suspense=f,bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ae,bt.act=Ce,bt.cloneElement=function(te,he,Fe){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var Le=I({},te.props),lt=te.key,Ne=te.ref,ct=te._owner;if(he!=null){if(he.ref!==void 0&&(Ne=he.ref,ct=H.current),he.key!==void 0&&(lt=""+he.key),te.type&&te.type.defaultProps)var rt=te.type.defaultProps;for(Ee in he)q.call(he,Ee)&&!W.hasOwnProperty(Ee)&&(Le[Ee]=he[Ee]===void 0&&rt!==void 0?rt[Ee]:he[Ee])}var Ee=arguments.length-2;if(Ee===1)Le.children=Fe;else if(1<Ee){rt=Array(Ee);for(var et=0;et<Ee;et++)rt[et]=arguments[et+2];Le.children=rt}return{$$typeof:t,type:te.type,key:lt,ref:Ne,props:Le,_owner:ct}},bt.createContext=function(te){return te={$$typeof:a,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:o,_context:te},te.Consumer=te},bt.createElement=Z,bt.createFactory=function(te){var he=Z.bind(null,te);return he.type=te,he},bt.createRef=function(){return{current:null}},bt.forwardRef=function(te){return{$$typeof:c,render:te}},bt.isValidElement=ye,bt.lazy=function(te){return{$$typeof:g,_payload:{_status:-1,_result:te},_init:we}},bt.memo=function(te,he){return{$$typeof:d,type:te,compare:he===void 0?null:he}},bt.startTransition=function(te){var he=xe.transition;xe.transition={};try{te()}finally{xe.transition=he}},bt.unstable_act=Ce,bt.useCallback=function(te,he){return me.current.useCallback(te,he)},bt.useContext=function(te){return me.current.useContext(te)},bt.useDebugValue=function(){},bt.useDeferredValue=function(te){return me.current.useDeferredValue(te)},bt.useEffect=function(te,he){return me.current.useEffect(te,he)},bt.useId=function(){return me.current.useId()},bt.useImperativeHandle=function(te,he,Fe){return me.current.useImperativeHandle(te,he,Fe)},bt.useInsertionEffect=function(te,he){return me.current.useInsertionEffect(te,he)},bt.useLayoutEffect=function(te,he){return me.current.useLayoutEffect(te,he)},bt.useMemo=function(te,he){return me.current.useMemo(te,he)},bt.useReducer=function(te,he,Fe){return me.current.useReducer(te,he,Fe)},bt.useRef=function(te){return me.current.useRef(te)},bt.useState=function(te){return me.current.useState(te)},bt.useSyncExternalStore=function(te,he,Fe){return me.current.useSyncExternalStore(te,he,Fe)},bt.useTransition=function(){return me.current.useTransition()},bt.version="18.3.1",bt}var B_;function Bu(){return B_||(B_=1,$m.exports=BD()),$m.exports}var F_;function FD(){if(F_)return Gc;F_=1;var t=Bu(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(c,f,d){var g,y={},E=null,C=null;d!==void 0&&(E=""+d),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(C=f.ref);for(g in f)r.call(f,g)&&!o.hasOwnProperty(g)&&(y[g]=f[g]);if(c&&c.defaultProps)for(g in f=c.defaultProps,f)y[g]===void 0&&(y[g]=f[g]);return{$$typeof:e,type:c,key:E,ref:C,props:y,_owner:i.current}}return Gc.Fragment=n,Gc.jsx=a,Gc.jsxs=a,Gc}var U_;function UD(){return U_||(U_=1,zm.exports=FD()),zm.exports}var k=UD(),M=Bu();const bn=ro(M),jD=Tx({__proto__:null,default:bn},[M]);var lh={},Hm={exports:{}},ai={},qm={exports:{}},Wm={};var j_;function VD(){return j_||(j_=1,(function(t){function e(xe,Ae){var Ce=xe.length;xe.push(Ae);e:for(;0<Ce;){var te=Ce-1>>>1,he=xe[te];if(0<i(he,Ae))xe[te]=Ae,xe[Ce]=he,Ce=te;else break e}}function n(xe){return xe.length===0?null:xe[0]}function r(xe){if(xe.length===0)return null;var Ae=xe[0],Ce=xe.pop();if(Ce!==Ae){xe[0]=Ce;e:for(var te=0,he=xe.length,Fe=he>>>1;te<Fe;){var Le=2*(te+1)-1,lt=xe[Le],Ne=Le+1,ct=xe[Ne];if(0>i(lt,Ce))Ne<he&&0>i(ct,lt)?(xe[te]=ct,xe[Ne]=Ce,te=Ne):(xe[te]=lt,xe[Le]=Ce,te=Le);else if(Ne<he&&0>i(ct,Ce))xe[te]=ct,xe[Ne]=Ce,te=Ne;else break e}}return Ae}function i(xe,Ae){var Ce=xe.sortIndex-Ae.sortIndex;return Ce!==0?Ce:xe.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var f=[],d=[],g=1,y=null,E=3,C=!1,I=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(xe){for(var Ae=n(d);Ae!==null;){if(Ae.callback===null)r(d);else if(Ae.startTime<=xe)r(d),Ae.sortIndex=Ae.expirationTime,e(f,Ae);else break;Ae=n(d)}}function z(xe){if(P=!1,F(xe),!I)if(n(f)!==null)I=!0,we(q);else{var Ae=n(d);Ae!==null&&me(z,Ae.startTime-xe)}}function q(xe,Ae){I=!1,P&&(P=!1,L(Z),Z=-1),C=!0;var Ce=E;try{for(F(Ae),y=n(f);y!==null&&(!(y.expirationTime>Ae)||xe&&!se());){var te=y.callback;if(typeof te=="function"){y.callback=null,E=y.priorityLevel;var he=te(y.expirationTime<=Ae);Ae=t.unstable_now(),typeof he=="function"?y.callback=he:y===n(f)&&r(f),F(Ae)}else r(f);y=n(f)}if(y!==null)var Fe=!0;else{var Le=n(d);Le!==null&&me(z,Le.startTime-Ae),Fe=!1}return Fe}finally{y=null,E=Ce,C=!1}}var H=!1,W=null,Z=-1,X=5,ye=-1;function se(){return!(t.unstable_now()-ye<X)}function ae(){if(W!==null){var xe=t.unstable_now();ye=xe;var Ae=!0;try{Ae=W(!0,xe)}finally{Ae?be():(H=!1,W=null)}}else H=!1}var be;if(typeof U=="function")be=function(){U(ae)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,ne=fe.port2;fe.port1.onmessage=ae,be=function(){ne.postMessage(null)}}else be=function(){N(ae,0)};function we(xe){W=xe,H||(H=!0,be())}function me(xe,Ae){Z=N(function(){xe(t.unstable_now())},Ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(xe){xe.callback=null},t.unstable_continueExecution=function(){I||C||(I=!0,we(q))},t.unstable_forceFrameRate=function(xe){0>xe||125<xe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<xe?Math.floor(1e3/xe):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(xe){switch(E){case 1:case 2:case 3:var Ae=3;break;default:Ae=E}var Ce=E;E=Ae;try{return xe()}finally{E=Ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(xe,Ae){switch(xe){case 1:case 2:case 3:case 4:case 5:break;default:xe=3}var Ce=E;E=xe;try{return Ae()}finally{E=Ce}},t.unstable_scheduleCallback=function(xe,Ae,Ce){var te=t.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?te+Ce:te):Ce=te,xe){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Ce+he,xe={id:g++,callback:Ae,priorityLevel:xe,startTime:Ce,expirationTime:he,sortIndex:-1},Ce>te?(xe.sortIndex=Ce,e(d,xe),n(f)===null&&xe===n(d)&&(P?(L(Z),Z=-1):P=!0,me(z,Ce-te))):(xe.sortIndex=he,e(f,xe),I||C||(I=!0,we(q))),xe},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(xe){var Ae=E;return function(){var Ce=E;E=Ae;try{return xe.apply(this,arguments)}finally{E=Ce}}}})(Wm)),Wm}var V_;function GD(){return V_||(V_=1,qm.exports=VD()),qm.exports}var G_;function zD(){if(G_)return ai;G_=1;var t=Bu(),e=GD();function n(l){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+l,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+l+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(l,p){a(l,p),a(l+"Capture",p)}function a(l,p){for(i[l]=p,l=0;l<p.length;l++)r.add(p[l])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function E(l){return f.call(y,l)?!0:f.call(g,l)?!1:d.test(l)?y[l]=!0:(g[l]=!0,!1)}function C(l,p,w,S){if(w!==null&&w.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return S?!1:w!==null?!w.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function I(l,p,w,S){if(p===null||typeof p>"u"||C(l,p,w,S))return!0;if(S)return!1;if(w!==null)switch(w.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function P(l,p,w,S,O,D,G){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=S,this.attributeNamespace=O,this.mustUseProperty=w,this.propertyName=l,this.type=p,this.sanitizeURL=D,this.removeEmptyString=G}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){N[l]=new P(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var p=l[0];N[p]=new P(p,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){N[l]=new P(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){N[l]=new P(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){N[l]=new P(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){N[l]=new P(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){N[l]=new P(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){N[l]=new P(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){N[l]=new P(l,5,!1,l.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function U(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var p=l.replace(L,U);N[p]=new P(p,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var p=l.replace(L,U);N[p]=new P(p,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var p=l.replace(L,U);N[p]=new P(p,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){N[l]=new P(l,1,!1,l.toLowerCase(),null,!1,!1)}),N.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){N[l]=new P(l,1,!1,l.toLowerCase(),null,!0,!0)});function F(l,p,w,S){var O=N.hasOwnProperty(p)?N[p]:null;(O!==null?O.type!==0:S||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(I(p,w,O,S)&&(w=null),S||O===null?E(p)&&(w===null?l.removeAttribute(p):l.setAttribute(p,""+w)):O.mustUseProperty?l[O.propertyName]=w===null?O.type===3?!1:"":w:(p=O.attributeName,S=O.attributeNamespace,w===null?l.removeAttribute(p):(O=O.type,w=O===3||O===4&&w===!0?"":""+w,S?l.setAttributeNS(S,p,w):l.setAttribute(p,w))))}var z=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),H=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ye=Symbol.for("react.provider"),se=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),xe=Symbol.iterator;function Ae(l){return l===null||typeof l!="object"?null:(l=xe&&l[xe]||l["@@iterator"],typeof l=="function"?l:null)}var Ce=Object.assign,te;function he(l){if(te===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);te=p&&p[1]||""}return`
`+te+l}var Fe=!1;function Le(l,p){if(!l||Fe)return"";Fe=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(ve){var S=ve}Reflect.construct(l,[],p)}else{try{p.call()}catch(ve){S=ve}l.call(p.prototype)}else{try{throw Error()}catch(ve){S=ve}l()}}catch(ve){if(ve&&S&&typeof ve.stack=="string"){for(var O=ve.stack.split(`
`),D=S.stack.split(`
`),G=O.length-1,J=D.length-1;1<=G&&0<=J&&O[G]!==D[J];)J--;for(;1<=G&&0<=J;G--,J--)if(O[G]!==D[J]){if(G!==1||J!==1)do if(G--,J--,0>J||O[G]!==D[J]){var ee=`
`+O[G].replace(" at new "," at ");return l.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",l.displayName)),ee}while(1<=G&&0<=J);break}}}finally{Fe=!1,Error.prepareStackTrace=w}return(l=l?l.displayName||l.name:"")?he(l):""}function lt(l){switch(l.tag){case 5:return he(l.type);case 16:return he("Lazy");case 13:return he("Suspense");case 19:return he("SuspenseList");case 0:case 2:case 15:return l=Le(l.type,!1),l;case 11:return l=Le(l.type.render,!1),l;case 1:return l=Le(l.type,!0),l;default:return""}}function Ne(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case W:return"Fragment";case H:return"Portal";case X:return"Profiler";case Z:return"StrictMode";case be:return"Suspense";case fe:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case se:return(l.displayName||"Context")+".Consumer";case ye:return(l._context.displayName||"Context")+".Provider";case ae:var p=l.render;return l=l.displayName,l||(l=p.displayName||p.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case ne:return p=l.displayName||null,p!==null?p:Ne(l.type)||"Memo";case we:p=l._payload,l=l._init;try{return Ne(l(p))}catch{}}return null}function ct(l){var p=l.type;switch(l.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=p.render,l=l.displayName||l.name||"",p.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(p);case 8:return p===Z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function rt(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ee(l){var p=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function et(l){var p=Ee(l)?"checked":"value",w=Object.getOwnPropertyDescriptor(l.constructor.prototype,p),S=""+l[p];if(!l.hasOwnProperty(p)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var O=w.get,D=w.set;return Object.defineProperty(l,p,{configurable:!0,get:function(){return O.call(this)},set:function(G){S=""+G,D.call(this,G)}}),Object.defineProperty(l,p,{enumerable:w.enumerable}),{getValue:function(){return S},setValue:function(G){S=""+G},stopTracking:function(){l._valueTracker=null,delete l[p]}}}}function Me(l){l._valueTracker||(l._valueTracker=et(l))}function _e(l){if(!l)return!1;var p=l._valueTracker;if(!p)return!0;var w=p.getValue(),S="";return l&&(S=Ee(l)?l.checked?"true":"false":l.value),l=S,l!==w?(p.setValue(l),!0):!1}function Ke(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function dt(l,p){var w=p.checked;return Ce({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??l._wrapperState.initialChecked})}function It(l,p){var w=p.defaultValue==null?"":p.defaultValue,S=p.checked!=null?p.checked:p.defaultChecked;w=rt(p.value!=null?p.value:w),l._wrapperState={initialChecked:S,initialValue:w,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function Cn(l,p){p=p.checked,p!=null&&F(l,"checked",p,!1)}function zt(l,p){Cn(l,p);var w=rt(p.value),S=p.type;if(w!=null)S==="number"?(w===0&&l.value===""||l.value!=w)&&(l.value=""+w):l.value!==""+w&&(l.value=""+w);else if(S==="submit"||S==="reset"){l.removeAttribute("value");return}p.hasOwnProperty("value")?_t(l,p.type,w):p.hasOwnProperty("defaultValue")&&_t(l,p.type,rt(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(l.defaultChecked=!!p.defaultChecked)}function Rt(l,p,w){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var S=p.type;if(!(S!=="submit"&&S!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+l._wrapperState.initialValue,w||p===l.value||(l.value=p),l.defaultValue=p}w=l.name,w!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,w!==""&&(l.name=w)}function _t(l,p,w){(p!=="number"||Ke(l.ownerDocument)!==l)&&(w==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+w&&(l.defaultValue=""+w))}var To=Array.isArray;function Ge(l,p,w,S){if(l=l.options,p){p={};for(var O=0;O<w.length;O++)p["$"+w[O]]=!0;for(w=0;w<l.length;w++)O=p.hasOwnProperty("$"+l[w].value),l[w].selected!==O&&(l[w].selected=O),O&&S&&(l[w].defaultSelected=!0)}else{for(w=""+rt(w),p=null,O=0;O<l.length;O++){if(l[O].value===w){l[O].selected=!0,S&&(l[O].defaultSelected=!0);return}p!==null||l[O].disabled||(p=l[O])}p!==null&&(p.selected=!0)}}function Rs(l,p){if(p.dangerouslySetInnerHTML!=null)throw Error(n(91));return Ce({},p,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function tc(l,p){var w=p.value;if(w==null){if(w=p.children,p=p.defaultValue,w!=null){if(p!=null)throw Error(n(92));if(To(w)){if(1<w.length)throw Error(n(93));w=w[0]}p=w}p==null&&(p=""),w=p}l._wrapperState={initialValue:rt(w)}}function Di(l,p){var w=rt(p.value),S=rt(p.defaultValue);w!=null&&(w=""+w,w!==l.value&&(l.value=w),p.defaultValue==null&&l.defaultValue!==w&&(l.defaultValue=w)),S!=null&&(l.defaultValue=""+S)}function Tl(l){var p=l.textContent;p===l._wrapperState.initialValue&&p!==""&&p!==null&&(l.value=p)}function Zr(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Il(l,p){return l==null||l==="http://www.w3.org/1999/xhtml"?Zr(p):l==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var pi,lr=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,w,S,O){MSApp.execUnsafeLocalFunction(function(){return l(p,w,S,O)})}:l})(function(l,p){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=p;else{for(pi=pi||document.createElement("div"),pi.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=pi.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;p.firstChild;)l.appendChild(p.firstChild)}});function Os(l,p){if(p){var w=l.firstChild;if(w&&w===l.lastChild&&w.nodeType===3){w.nodeValue=p;return}}l.textContent=p}var Io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bg=["Webkit","ms","Moz","O"];Object.keys(Io).forEach(function(l){bg.forEach(function(p){p=p+l.charAt(0).toUpperCase()+l.substring(1),Io[p]=Io[l]})});function yn(l,p,w){return p==null||typeof p=="boolean"||p===""?"":w||typeof p!="number"||p===0||Io.hasOwnProperty(l)&&Io[l]?(""+p).trim():p+"px"}function Be(l,p){l=l.style;for(var w in p)if(p.hasOwnProperty(w)){var S=w.indexOf("--")===0,O=yn(w,p[w],S);w==="float"&&(w="cssFloat"),S?l.setProperty(w,O):l[w]=O}}var kn=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lt(l,p){if(p){if(kn[l]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(n(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(n(61))}if(p.style!=null&&typeof p.style!="object")throw Error(n(62))}}function Qt(l,p){if(l.indexOf("-")===-1)return typeof p.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ho=null;function wa(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Pl=null,Et=null,Qr=null;function nc(l){if(l=Tc(l)){if(typeof Pl!="function")throw Error(n(280));var p=l.stateNode;p&&(p=bf(p),Pl(l.stateNode,l.type,p))}}function rc(l){Et?Qr?Qr.push(l):Qr=[l]:Et=l}function ei(){if(Et){var l=Et,p=Qr;if(Qr=Et=null,nc(l),p)for(l=0;l<p.length;l++)nc(p[l])}}function Nl(l,p){return l(p)}function Xn(){}var Po=!1;function Ea(l,p,w){if(Po)return l(p,w);Po=!0;try{return Nl(l,p,w)}finally{Po=!1,(Et!==null||Qr!==null)&&(Xn(),ei())}}function Rr(l,p){var w=l.stateNode;if(w===null)return null;var S=bf(w);if(S===null)return null;w=S[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(l=l.type,S=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!S;break e;default:l=!1}if(l)return null;if(w&&typeof w!="function")throw Error(n(231,p,typeof w));return w}var ic=!1;if(c)try{var gi={};Object.defineProperty(gi,"passive",{get:function(){ic=!0}}),window.addEventListener("test",gi,gi),window.removeEventListener("test",gi,gi)}catch{ic=!1}function oc(l,p,w,S,O,D,G,J,ee){var ve=Array.prototype.slice.call(arguments,3);try{p.apply(w,ve)}catch(Pe){this.onError(Pe)}}var Gn=!1,Li=null,wr=!1,je=null,ks={onError:function(l){Gn=!0,Li=l}};function sc(l,p,w,S,O,D,G,J,ee){Gn=!1,Li=null,oc.apply(ks,arguments)}function Or(l,p,w,S,O,D,G,J,ee){if(sc.apply(this,arguments),Gn){if(Gn){var ve=Li;Gn=!1,Li=null}else throw Error(n(198));wr||(wr=!0,je=ve)}}function ti(l){var p=l,w=l;if(l.alternate)for(;p.return;)p=p.return;else{l=p;do p=l,(p.flags&4098)!==0&&(w=p.return),l=p.return;while(l)}return p.tag===3?w:null}function ba(l){if(l.tag===13){var p=l.memoizedState;if(p===null&&(l=l.alternate,l!==null&&(p=l.memoizedState)),p!==null)return p.dehydrated}return null}function _a(l){if(ti(l)!==l)throw Error(n(188))}function Bi(l){var p=l.alternate;if(!p){if(p=ti(l),p===null)throw Error(n(188));return p!==l?null:l}for(var w=l,S=p;;){var O=w.return;if(O===null)break;var D=O.alternate;if(D===null){if(S=O.return,S!==null){w=S;continue}break}if(O.child===D.child){for(D=O.child;D;){if(D===w)return _a(O),l;if(D===S)return _a(O),p;D=D.sibling}throw Error(n(188))}if(w.return!==S.return)w=O,S=D;else{for(var G=!1,J=O.child;J;){if(J===w){G=!0,w=O,S=D;break}if(J===S){G=!0,S=O,w=D;break}J=J.sibling}if(!G){for(J=D.child;J;){if(J===w){G=!0,w=D,S=O;break}if(J===S){G=!0,S=D,w=O;break}J=J.sibling}if(!G)throw Error(n(189))}}if(w.alternate!==S)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?l:p}function ef(l){return l=Bi(l),l!==null?tf(l):null}function tf(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var p=tf(l);if(p!==null)return p;l=l.sibling}return null}var mi=e.unstable_scheduleCallback,ur=e.unstable_cancelCallback,en=e.unstable_shouldYield,nf=e.unstable_requestPaint,Ut=e.unstable_now,ac=e.unstable_getCurrentPriorityLevel,Se=e.unstable_ImmediatePriority,rf=e.unstable_UserBlockingPriority,Kt=e.unstable_NormalPriority,Ms=e.unstable_LowPriority,of=e.unstable_IdlePriority,Tt=null,vt=null;function At(l){if(vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Tt,l,void 0,(l.current.flags&128)===128)}catch{}}var $r=Math.clz32?Math.clz32:Mn,lc=Math.log,uc=Math.LN2;function Mn(l){return l>>>=0,l===0?32:31-(lc(l)/uc|0)|0}var vi=64,Rl=4194304;function Yt(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function yi(l,p){var w=l.pendingLanes;if(w===0)return 0;var S=0,O=l.suspendedLanes,D=l.pingedLanes,G=w&268435455;if(G!==0){var J=G&~O;J!==0?S=Yt(J):(D&=G,D!==0&&(S=Yt(D)))}else G=w&~O,G!==0?S=Yt(G):D!==0&&(S=Yt(D));if(S===0)return 0;if(p!==0&&p!==S&&(p&O)===0&&(O=S&-S,D=p&-p,O>=D||O===16&&(D&4194240)!==0))return p;if((S&4)!==0&&(S|=w&16),p=l.entangledLanes,p!==0)for(l=l.entanglements,p&=S;0<p;)w=31-$r(p),O=1<<w,S|=l[w],p&=~O;return S}function _g(l,p){switch(l){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ds(l,p){for(var w=l.suspendedLanes,S=l.pingedLanes,O=l.expirationTimes,D=l.pendingLanes;0<D;){var G=31-$r(D),J=1<<G,ee=O[G];ee===-1?((J&w)===0||(J&S)!==0)&&(O[G]=_g(J,p)):ee<=p&&(l.expiredLanes|=J),D&=~J}}function jt(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Jn(){var l=vi;return vi<<=1,(vi&4194240)===0&&(vi=64),l}function le(l){for(var p=[],w=0;31>w;w++)p.push(l);return p}function K(l,p,w){l.pendingLanes|=p,p!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,p=31-$r(p),l[p]=w}function tt(l,p){var w=l.pendingLanes&~p;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=p,l.mutableReadLanes&=p,l.entangledLanes&=p,p=l.entanglements;var S=l.eventTimes;for(l=l.expirationTimes;0<w;){var O=31-$r(w),D=1<<O;p[O]=0,S[O]=-1,l[O]=-1,w&=~D}}function Sn(l,p){var w=l.entangledLanes|=p;for(l=l.entanglements;w;){var S=31-$r(w),O=1<<S;O&p|l[S]&p&&(l[S]|=p),w&=~O}}var yt=0;function sf(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var Ol,kr,nt,tn,cc,dc=!1,Ls=[],xi=null,Fi=null,No=null,fn=new Map,oo=new Map,Er=[],at="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function af(l,p){switch(l){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":fn.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":oo.delete(p.pointerId)}}function ht(l,p,w,S,O,D){return l===null||l.nativeEvent!==D?(l={blockedOn:p,domEventName:w,eventSystemFlags:S,nativeEvent:D,targetContainers:[O]},p!==null&&(p=Tc(p),p!==null&&kr(p)),l):(l.eventSystemFlags|=S,p=l.targetContainers,O!==null&&p.indexOf(O)===-1&&p.push(O),l)}function Zn(l,p,w,S,O){switch(p){case"focusin":return xi=ht(xi,l,p,w,S,O),!0;case"dragenter":return Fi=ht(Fi,l,p,w,S,O),!0;case"mouseover":return No=ht(No,l,p,w,S,O),!0;case"pointerover":var D=O.pointerId;return fn.set(D,ht(fn.get(D)||null,l,p,w,S,O)),!0;case"gotpointercapture":return D=O.pointerId,oo.set(D,ht(oo.get(D)||null,l,p,w,S,O)),!0}return!1}function lf(l){var p=ka(l.target);if(p!==null){var w=ti(p);if(w!==null){if(p=w.tag,p===13){if(p=ba(w),p!==null){l.blockedOn=p,cc(l.priority,function(){nt(w)});return}}else if(p===3&&w.stateNode.current.memoizedState.isDehydrated){l.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Bs(l){if(l.blockedOn!==null)return!1;for(var p=l.targetContainers;0<p.length;){var w=kl(l.domEventName,l.eventSystemFlags,p[0],l.nativeEvent);if(w===null){w=l.nativeEvent;var S=new w.constructor(w.type,w);Ho=S,w.target.dispatchEvent(S),Ho=null}else return p=Tc(w),p!==null&&kr(p),l.blockedOn=w,!1;p.shift()}return!0}function fc(l,p,w){Bs(l)&&w.delete(p)}function qo(){dc=!1,xi!==null&&Bs(xi)&&(xi=null),Fi!==null&&Bs(Fi)&&(Fi=null),No!==null&&Bs(No)&&(No=null),fn.forEach(fc),oo.forEach(fc)}function Aa(l,p){l.blockedOn===p&&(l.blockedOn=null,dc||(dc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qo)))}function so(l){function p(O){return Aa(O,l)}if(0<Ls.length){Aa(Ls[0],l);for(var w=1;w<Ls.length;w++){var S=Ls[w];S.blockedOn===l&&(S.blockedOn=null)}}for(xi!==null&&Aa(xi,l),Fi!==null&&Aa(Fi,l),No!==null&&Aa(No,l),fn.forEach(p),oo.forEach(p),w=0;w<Er.length;w++)S=Er[w],S.blockedOn===l&&(S.blockedOn=null);for(;0<Er.length&&(w=Er[0],w.blockedOn===null);)lf(w),w.blockedOn===null&&Er.shift()}var Ui=z.ReactCurrentBatchConfig,Ro=!0;function uf(l,p,w,S){var O=yt,D=Ui.transition;Ui.transition=null;try{yt=1,Wo(l,p,w,S)}finally{yt=O,Ui.transition=D}}function Ca(l,p,w,S){var O=yt,D=Ui.transition;Ui.transition=null;try{yt=4,Wo(l,p,w,S)}finally{yt=O,Ui.transition=D}}function Wo(l,p,w,S){if(Ro){var O=kl(l,p,w,S);if(O===null)kg(l,p,S,Qn,w),af(l,S);else if(Zn(O,l,p,w,S))S.stopPropagation();else if(af(l,S),p&4&&-1<at.indexOf(l)){for(;O!==null;){var D=Tc(O);if(D!==null&&Ol(D),D=kl(l,p,w,S),D===null&&kg(l,p,S,Qn,w),D===O)break;O=D}O!==null&&S.stopPropagation()}else kg(l,p,S,null,w)}}var Qn=null;function kl(l,p,w,S){if(Qn=null,l=wa(S),l=ka(l),l!==null)if(p=ti(l),p===null)l=null;else if(w=p.tag,w===13){if(l=ba(p),l!==null)return l;l=null}else if(w===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;l=null}else p!==l&&(l=null);return Qn=l,null}function hc(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ac()){case Se:return 1;case rf:return 4;case Kt:case Ms:return 16;case of:return 536870912;default:return 16}default:return 16}}var ao=null,pc=null,Ml=null;function cf(){if(Ml)return Ml;var l,p=pc,w=p.length,S,O="value"in ao?ao.value:ao.textContent,D=O.length;for(l=0;l<w&&p[l]===O[l];l++);var G=w-l;for(S=1;S<=G&&p[w-S]===O[D-S];S++);return Ml=O.slice(l,1<S?1-S:void 0)}function Pt(l){var p=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&p===13&&(l=13)):l=p,l===10&&(l=13),32<=l||l===13?l:0}function Sa(){return!0}function Ta(){return!1}function Tn(l){function p(w,S,O,D,G){this._reactName=w,this._targetInst=O,this.type=S,this.nativeEvent=D,this.target=G,this.currentTarget=null;for(var J in l)l.hasOwnProperty(J)&&(w=l[J],this[J]=w?w(D):D[J]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Sa:Ta,this.isPropagationStopped=Ta,this}return Ce(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Sa)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Sa)},persist:function(){},isPersistent:Sa}),p}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ge=Tn(Fs),gt=Ce({},Fs,{view:0,detail:0}),er=Tn(gt),Us,Dl,Ia,Ll=Ce({},gt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pa,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ia&&(Ia&&l.type==="mousemove"?(Us=l.screenX-Ia.screenX,Dl=l.screenY-Ia.screenY):Dl=Us=0,Ia=l),Us)},movementY:function(l){return"movementY"in l?l.movementY:Dl}}),df=Tn(Ll),gc=Ce({},Ll,{dataTransfer:0}),Dn=Tn(gc),mc=Ce({},gt,{relatedTarget:0}),nn=Tn(mc),Bl=Ce({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ko=Tn(Bl),$t=Ce({},Fs,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),it=Tn($t),Ag=Ce({},Fs,{data:0}),qt=Tn(Ag),Yo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},js={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ji(l){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(l):(l=Cg[l])?!!p[l]:!1}function Pa(){return ji}var ff=Ce({},gt,{key:function(l){if(l.key){var p=Yo[l.key]||l.key;if(p!=="Unidentified")return p}return l.type==="keypress"?(l=Pt(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?js[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pa,charCode:function(l){return l.type==="keypress"?Pt(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Pt(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),vc=Tn(ff),hf=Ce({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yc=Tn(hf),Sg=Ce({},gt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pa}),Vs=Tn(Sg),xc=Ce({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tg=Tn(xc),Na=Ce({},Ll,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Ig=Tn(Na),Oo=[9,13,27,32],Gs=c&&"CompositionEvent"in window,cr=null;c&&"documentMode"in document&&(cr=document.documentMode);var pf=c&&"TextEvent"in window&&!cr,wi=c&&(!Gs||cr&&8<cr&&11>=cr),gf=" ",Fl=!1;function mf(l,p){switch(l){case"keyup":return Oo.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wc(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var br=!1;function Pg(l,p){switch(l){case"compositionend":return wc(p);case"keypress":return p.which!==32?null:(Fl=!0,gf);case"textInput":return l=p.data,l===gf&&Fl?null:l;default:return null}}function Ec(l,p){if(br)return l==="compositionend"||!Gs&&mf(l,p)?(l=cf(),Ml=pc=ao=null,br=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return wi&&p.locale!=="ko"?null:p.data;default:return null}}var Ra={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function St(l){var p=l&&l.nodeName&&l.nodeName.toLowerCase();return p==="input"?!!Ra[l.type]:p==="textarea"}function Oa(l,p,w,S){rc(S),p=xf(p,"onChange"),0<p.length&&(w=new ge("onChange","change",null,w,S),l.push({event:w,listeners:p}))}var j=null,s=null;function u(l){ZE(l,0)}function h(l){var p=Vl(l);if(_e(p))return l}function m(l,p){if(l==="change")return p}var v=!1;if(c){var x;if(c){var _="oninput"in document;if(!_){var T=document.createElement("div");T.setAttribute("oninput","return;"),_=typeof T.oninput=="function"}x=_}else x=!1;v=x&&(!document.documentMode||9<document.documentMode)}function R(){j&&(j.detachEvent("onpropertychange",B),s=j=null)}function B(l){if(l.propertyName==="value"&&h(s)){var p=[];Oa(p,s,l,wa(l)),Ea(u,p)}}function V(l,p,w){l==="focusin"?(R(),j=p,s=w,j.attachEvent("onpropertychange",B)):l==="focusout"&&R()}function $(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return h(s)}function Y(l,p){if(l==="click")return h(p)}function Q(l,p){if(l==="input"||l==="change")return h(p)}function re(l,p){return l===p&&(l!==0||1/l===1/p)||l!==l&&p!==p}var oe=typeof Object.is=="function"?Object.is:re;function pe(l,p){if(oe(l,p))return!0;if(typeof l!="object"||l===null||typeof p!="object"||p===null)return!1;var w=Object.keys(l),S=Object.keys(p);if(w.length!==S.length)return!1;for(S=0;S<w.length;S++){var O=w[S];if(!f.call(p,O)||!oe(l[O],p[O]))return!1}return!0}function Oe(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function ke(l,p){var w=Oe(l);l=0;for(var S;w;){if(w.nodeType===3){if(S=l+w.textContent.length,l<=p&&S>=p)return{node:w,offset:p-l};l=S}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Oe(w)}}function Ie(l,p){return l&&p?l===p?!0:l&&l.nodeType===3?!1:p&&p.nodeType===3?Ie(l,p.parentNode):"contains"in l?l.contains(p):l.compareDocumentPosition?!!(l.compareDocumentPosition(p)&16):!1:!1}function wt(){for(var l=window,p=Ke();p instanceof l.HTMLIFrameElement;){try{var w=typeof p.contentWindow.location.href=="string"}catch{w=!1}if(w)l=p.contentWindow;else break;p=Ke(l.document)}return p}function pt(l){var p=l&&l.nodeName&&l.nodeName.toLowerCase();return p&&(p==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||p==="textarea"||l.contentEditable==="true")}function Mr(l){var p=wt(),w=l.focusedElem,S=l.selectionRange;if(p!==w&&w&&w.ownerDocument&&Ie(w.ownerDocument.documentElement,w)){if(S!==null&&pt(w)){if(p=S.start,l=S.end,l===void 0&&(l=p),"selectionStart"in w)w.selectionStart=p,w.selectionEnd=Math.min(l,w.value.length);else if(l=(p=w.ownerDocument||document)&&p.defaultView||window,l.getSelection){l=l.getSelection();var O=w.textContent.length,D=Math.min(S.start,O);S=S.end===void 0?D:Math.min(S.end,O),!l.extend&&D>S&&(O=S,S=D,D=O),O=ke(w,D);var G=ke(w,S);O&&G&&(l.rangeCount!==1||l.anchorNode!==O.node||l.anchorOffset!==O.offset||l.focusNode!==G.node||l.focusOffset!==G.offset)&&(p=p.createRange(),p.setStart(O.node,O.offset),l.removeAllRanges(),D>S?(l.addRange(p),l.extend(G.node,G.offset)):(p.setEnd(G.node,G.offset),l.addRange(p)))}}for(p=[],l=w;l=l.parentNode;)l.nodeType===1&&p.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<p.length;w++)l=p[w],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var Ei=c&&"documentMode"in document&&11>=document.documentMode,Ln=null,Bt=null,xn=null,_r=!1;function Xo(l,p,w){var S=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;_r||Ln==null||Ln!==Ke(S)||(S=Ln,"selectionStart"in S&&pt(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),xn&&pe(xn,S)||(xn=S,S=xf(Bt,"onSelect"),0<S.length&&(p=new ge("onSelect","select",null,p,w),l.push({event:p,listeners:S}),p.target=Ln)))}function lo(l,p){var w={};return w[l.toLowerCase()]=p.toLowerCase(),w["Webkit"+l]="webkit"+p,w["Moz"+l]="moz"+p,w}var zs={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionend:lo("Transition","TransitionEnd")},bc={},$E={};c&&($E=document.createElement("div").style,"AnimationEvent"in window||(delete zs.animationend.animation,delete zs.animationiteration.animation,delete zs.animationstart.animation),"TransitionEvent"in window||delete zs.transitionend.transition);function vf(l){if(bc[l])return bc[l];if(!zs[l])return l;var p=zs[l],w;for(w in p)if(p.hasOwnProperty(w)&&w in $E)return bc[l]=p[w];return l}var HE=vf("animationend"),qE=vf("animationiteration"),WE=vf("animationstart"),KE=vf("transitionend"),YE=new Map,XE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $s(l,p){YE.set(l,p),o(p,[l])}for(var Ng=0;Ng<XE.length;Ng++){var Rg=XE[Ng],q8=Rg.toLowerCase(),W8=Rg[0].toUpperCase()+Rg.slice(1);$s(q8,"on"+W8)}$s(HE,"onAnimationEnd"),$s(qE,"onAnimationIteration"),$s(WE,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(KE,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K8=new Set("cancel close invalid load scroll toggle".split(" ").concat(_c));function JE(l,p,w){var S=l.type||"unknown-event";l.currentTarget=w,Or(S,p,void 0,l),l.currentTarget=null}function ZE(l,p){p=(p&4)!==0;for(var w=0;w<l.length;w++){var S=l[w],O=S.event;S=S.listeners;e:{var D=void 0;if(p)for(var G=S.length-1;0<=G;G--){var J=S[G],ee=J.instance,ve=J.currentTarget;if(J=J.listener,ee!==D&&O.isPropagationStopped())break e;JE(O,J,ve),D=ee}else for(G=0;G<S.length;G++){if(J=S[G],ee=J.instance,ve=J.currentTarget,J=J.listener,ee!==D&&O.isPropagationStopped())break e;JE(O,J,ve),D=ee}}}if(wr)throw l=je,wr=!1,je=null,l}function ln(l,p){var w=p[Ug];w===void 0&&(w=p[Ug]=new Set);var S=l+"__bubble";w.has(S)||(QE(p,l,2,!1),w.add(S))}function Og(l,p,w){var S=0;p&&(S|=4),QE(w,l,S,p)}var yf="_reactListening"+Math.random().toString(36).slice(2);function Ac(l){if(!l[yf]){l[yf]=!0,r.forEach(function(w){w!=="selectionchange"&&(K8.has(w)||Og(w,!1,l),Og(w,!0,l))});var p=l.nodeType===9?l:l.ownerDocument;p===null||p[yf]||(p[yf]=!0,Og("selectionchange",!1,p))}}function QE(l,p,w,S){switch(hc(p)){case 1:var O=uf;break;case 4:O=Ca;break;default:O=Wo}w=O.bind(null,p,w,l),O=void 0,!ic||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(O=!0),S?O!==void 0?l.addEventListener(p,w,{capture:!0,passive:O}):l.addEventListener(p,w,!0):O!==void 0?l.addEventListener(p,w,{passive:O}):l.addEventListener(p,w,!1)}function kg(l,p,w,S,O){var D=S;if((p&1)===0&&(p&2)===0&&S!==null)e:for(;;){if(S===null)return;var G=S.tag;if(G===3||G===4){var J=S.stateNode.containerInfo;if(J===O||J.nodeType===8&&J.parentNode===O)break;if(G===4)for(G=S.return;G!==null;){var ee=G.tag;if((ee===3||ee===4)&&(ee=G.stateNode.containerInfo,ee===O||ee.nodeType===8&&ee.parentNode===O))return;G=G.return}for(;J!==null;){if(G=ka(J),G===null)return;if(ee=G.tag,ee===5||ee===6){S=D=G;continue e}J=J.parentNode}}S=S.return}Ea(function(){var ve=D,Pe=wa(w),Re=[];e:{var Te=YE.get(l);if(Te!==void 0){var Ve=ge,Ye=l;switch(l){case"keypress":if(Pt(w)===0)break e;case"keydown":case"keyup":Ve=vc;break;case"focusin":Ye="focus",Ve=nn;break;case"focusout":Ye="blur",Ve=nn;break;case"beforeblur":case"afterblur":Ve=nn;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=df;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=Dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=Vs;break;case HE:case qE:case WE:Ve=Ko;break;case KE:Ve=Tg;break;case"scroll":Ve=er;break;case"wheel":Ve=Ig;break;case"copy":case"cut":case"paste":Ve=it;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=yc}var Xe=(p&4)!==0,Bn=!Xe&&l==="scroll",ue=Xe?Te!==null?Te+"Capture":null:Te;Xe=[];for(var ie=ve,ce;ie!==null;){ce=ie;var De=ce.stateNode;if(ce.tag===5&&De!==null&&(ce=De,ue!==null&&(De=Rr(ie,ue),De!=null&&Xe.push(Cc(ie,De,ce)))),Bn)break;ie=ie.return}0<Xe.length&&(Te=new Ve(Te,Ye,null,w,Pe),Re.push({event:Te,listeners:Xe}))}}if((p&7)===0){e:{if(Te=l==="mouseover"||l==="pointerover",Ve=l==="mouseout"||l==="pointerout",Te&&w!==Ho&&(Ye=w.relatedTarget||w.fromElement)&&(ka(Ye)||Ye[Jo]))break e;if((Ve||Te)&&(Te=Pe.window===Pe?Pe:(Te=Pe.ownerDocument)?Te.defaultView||Te.parentWindow:window,Ve?(Ye=w.relatedTarget||w.toElement,Ve=ve,Ye=Ye?ka(Ye):null,Ye!==null&&(Bn=ti(Ye),Ye!==Bn||Ye.tag!==5&&Ye.tag!==6)&&(Ye=null)):(Ve=null,Ye=ve),Ve!==Ye)){if(Xe=df,De="onMouseLeave",ue="onMouseEnter",ie="mouse",(l==="pointerout"||l==="pointerover")&&(Xe=yc,De="onPointerLeave",ue="onPointerEnter",ie="pointer"),Bn=Ve==null?Te:Vl(Ve),ce=Ye==null?Te:Vl(Ye),Te=new Xe(De,ie+"leave",Ve,w,Pe),Te.target=Bn,Te.relatedTarget=ce,De=null,ka(Pe)===ve&&(Xe=new Xe(ue,ie+"enter",Ye,w,Pe),Xe.target=ce,Xe.relatedTarget=Bn,De=Xe),Bn=De,Ve&&Ye)t:{for(Xe=Ve,ue=Ye,ie=0,ce=Xe;ce;ce=Ul(ce))ie++;for(ce=0,De=ue;De;De=Ul(De))ce++;for(;0<ie-ce;)Xe=Ul(Xe),ie--;for(;0<ce-ie;)ue=Ul(ue),ce--;for(;ie--;){if(Xe===ue||ue!==null&&Xe===ue.alternate)break t;Xe=Ul(Xe),ue=Ul(ue)}Xe=null}else Xe=null;Ve!==null&&eb(Re,Te,Ve,Xe,!1),Ye!==null&&Bn!==null&&eb(Re,Bn,Ye,Xe,!0)}}e:{if(Te=ve?Vl(ve):window,Ve=Te.nodeName&&Te.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Te.type==="file")var Ze=m;else if(St(Te))if(v)Ze=Q;else{Ze=$;var ot=V}else(Ve=Te.nodeName)&&Ve.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(Ze=Y);if(Ze&&(Ze=Ze(l,ve))){Oa(Re,Ze,w,Pe);break e}ot&&ot(l,Te,ve),l==="focusout"&&(ot=Te._wrapperState)&&ot.controlled&&Te.type==="number"&&_t(Te,"number",Te.value)}switch(ot=ve?Vl(ve):window,l){case"focusin":(St(ot)||ot.contentEditable==="true")&&(Ln=ot,Bt=ve,xn=null);break;case"focusout":xn=Bt=Ln=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Xo(Re,w,Pe);break;case"selectionchange":if(Ei)break;case"keydown":case"keyup":Xo(Re,w,Pe)}var st;if(Gs)e:{switch(l){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else br?mf(l,w)&&(ft="onCompositionEnd"):l==="keydown"&&w.keyCode===229&&(ft="onCompositionStart");ft&&(wi&&w.locale!=="ko"&&(br||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&br&&(st=cf()):(ao=Pe,pc="value"in ao?ao.value:ao.textContent,br=!0)),ot=xf(ve,ft),0<ot.length&&(ft=new qt(ft,l,null,w,Pe),Re.push({event:ft,listeners:ot}),st?ft.data=st:(st=wc(w),st!==null&&(ft.data=st)))),(st=pf?Pg(l,w):Ec(l,w))&&(ve=xf(ve,"onBeforeInput"),0<ve.length&&(Pe=new qt("onBeforeInput","beforeinput",null,w,Pe),Re.push({event:Pe,listeners:ve}),Pe.data=st))}ZE(Re,p)})}function Cc(l,p,w){return{instance:l,listener:p,currentTarget:w}}function xf(l,p){for(var w=p+"Capture",S=[];l!==null;){var O=l,D=O.stateNode;O.tag===5&&D!==null&&(O=D,D=Rr(l,w),D!=null&&S.unshift(Cc(l,D,O)),D=Rr(l,p),D!=null&&S.push(Cc(l,D,O))),l=l.return}return S}function Ul(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function eb(l,p,w,S,O){for(var D=p._reactName,G=[];w!==null&&w!==S;){var J=w,ee=J.alternate,ve=J.stateNode;if(ee!==null&&ee===S)break;J.tag===5&&ve!==null&&(J=ve,O?(ee=Rr(w,D),ee!=null&&G.unshift(Cc(w,ee,J))):O||(ee=Rr(w,D),ee!=null&&G.push(Cc(w,ee,J)))),w=w.return}G.length!==0&&l.push({event:p,listeners:G})}var Y8=/\r\n?/g,X8=/\u0000|\uFFFD/g;function tb(l){return(typeof l=="string"?l:""+l).replace(Y8,`
`).replace(X8,"")}function wf(l,p,w){if(p=tb(p),tb(l)!==p&&w)throw Error(n(425))}function Ef(){}var Mg=null,Dg=null;function Lg(l,p){return l==="textarea"||l==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var Bg=typeof setTimeout=="function"?setTimeout:void 0,J8=typeof clearTimeout=="function"?clearTimeout:void 0,nb=typeof Promise=="function"?Promise:void 0,Z8=typeof queueMicrotask=="function"?queueMicrotask:typeof nb<"u"?function(l){return nb.resolve(null).then(l).catch(Q8)}:Bg;function Q8(l){setTimeout(function(){throw l})}function Fg(l,p){var w=p,S=0;do{var O=w.nextSibling;if(l.removeChild(w),O&&O.nodeType===8)if(w=O.data,w==="/$"){if(S===0){l.removeChild(O),so(p);return}S--}else w!=="$"&&w!=="$?"&&w!=="$!"||S++;w=O}while(w);so(p)}function Hs(l){for(;l!=null;l=l.nextSibling){var p=l.nodeType;if(p===1||p===3)break;if(p===8){if(p=l.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return l}function rb(l){l=l.previousSibling;for(var p=0;l;){if(l.nodeType===8){var w=l.data;if(w==="$"||w==="$!"||w==="$?"){if(p===0)return l;p--}else w==="/$"&&p++}l=l.previousSibling}return null}var jl=Math.random().toString(36).slice(2),ko="__reactFiber$"+jl,Sc="__reactProps$"+jl,Jo="__reactContainer$"+jl,Ug="__reactEvents$"+jl,eD="__reactListeners$"+jl,tD="__reactHandles$"+jl;function ka(l){var p=l[ko];if(p)return p;for(var w=l.parentNode;w;){if(p=w[Jo]||w[ko]){if(w=p.alternate,p.child!==null||w!==null&&w.child!==null)for(l=rb(l);l!==null;){if(w=l[ko])return w;l=rb(l)}return p}l=w,w=l.parentNode}return null}function Tc(l){return l=l[ko]||l[Jo],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Vl(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function bf(l){return l[Sc]||null}var jg=[],Gl=-1;function qs(l){return{current:l}}function un(l){0>Gl||(l.current=jg[Gl],jg[Gl]=null,Gl--)}function rn(l,p){Gl++,jg[Gl]=l.current,l.current=p}var Ws={},Dr=qs(Ws),ni=qs(!1),Ma=Ws;function zl(l,p){var w=l.type.contextTypes;if(!w)return Ws;var S=l.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===p)return S.__reactInternalMemoizedMaskedChildContext;var O={},D;for(D in w)O[D]=p[D];return S&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=p,l.__reactInternalMemoizedMaskedChildContext=O),O}function ri(l){return l=l.childContextTypes,l!=null}function _f(){un(ni),un(Dr)}function ib(l,p,w){if(Dr.current!==Ws)throw Error(n(168));rn(Dr,p),rn(ni,w)}function ob(l,p,w){var S=l.stateNode;if(p=p.childContextTypes,typeof S.getChildContext!="function")return w;S=S.getChildContext();for(var O in S)if(!(O in p))throw Error(n(108,ct(l)||"Unknown",O));return Ce({},w,S)}function Af(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Ws,Ma=Dr.current,rn(Dr,l),rn(ni,ni.current),!0}function sb(l,p,w){var S=l.stateNode;if(!S)throw Error(n(169));w?(l=ob(l,p,Ma),S.__reactInternalMemoizedMergedChildContext=l,un(ni),un(Dr),rn(Dr,l)):un(ni),rn(ni,w)}var Zo=null,Cf=!1,Vg=!1;function ab(l){Zo===null?Zo=[l]:Zo.push(l)}function nD(l){Cf=!0,ab(l)}function Ks(){if(!Vg&&Zo!==null){Vg=!0;var l=0,p=yt;try{var w=Zo;for(yt=1;l<w.length;l++){var S=w[l];do S=S(!0);while(S!==null)}Zo=null,Cf=!1}catch(O){throw Zo!==null&&(Zo=Zo.slice(l+1)),mi(Se,Ks),O}finally{yt=p,Vg=!1}}return null}var $l=[],Hl=0,Sf=null,Tf=0,Vi=[],Gi=0,Da=null,Qo=1,es="";function La(l,p){$l[Hl++]=Tf,$l[Hl++]=Sf,Sf=l,Tf=p}function lb(l,p,w){Vi[Gi++]=Qo,Vi[Gi++]=es,Vi[Gi++]=Da,Da=l;var S=Qo;l=es;var O=32-$r(S)-1;S&=~(1<<O),w+=1;var D=32-$r(p)+O;if(30<D){var G=O-O%5;D=(S&(1<<G)-1).toString(32),S>>=G,O-=G,Qo=1<<32-$r(p)+O|w<<O|S,es=D+l}else Qo=1<<D|w<<O|S,es=l}function Gg(l){l.return!==null&&(La(l,1),lb(l,1,0))}function zg(l){for(;l===Sf;)Sf=$l[--Hl],$l[Hl]=null,Tf=$l[--Hl],$l[Hl]=null;for(;l===Da;)Da=Vi[--Gi],Vi[Gi]=null,es=Vi[--Gi],Vi[Gi]=null,Qo=Vi[--Gi],Vi[Gi]=null}var bi=null,_i=null,hn=!1,uo=null;function ub(l,p){var w=qi(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=l,p=l.deletions,p===null?(l.deletions=[w],l.flags|=16):p.push(w)}function cb(l,p){switch(l.tag){case 5:var w=l.type;return p=p.nodeType!==1||w.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(l.stateNode=p,bi=l,_i=Hs(p.firstChild),!0):!1;case 6:return p=l.pendingProps===""||p.nodeType!==3?null:p,p!==null?(l.stateNode=p,bi=l,_i=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(w=Da!==null?{id:Qo,overflow:es}:null,l.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=qi(18,null,null,0),w.stateNode=p,w.return=l,l.child=w,bi=l,_i=null,!0):!1;default:return!1}}function $g(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Hg(l){if(hn){var p=_i;if(p){var w=p;if(!cb(l,p)){if($g(l))throw Error(n(418));p=Hs(w.nextSibling);var S=bi;p&&cb(l,p)?ub(S,w):(l.flags=l.flags&-4097|2,hn=!1,bi=l)}}else{if($g(l))throw Error(n(418));l.flags=l.flags&-4097|2,hn=!1,bi=l}}}function db(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;bi=l}function If(l){if(l!==bi)return!1;if(!hn)return db(l),hn=!0,!1;var p;if((p=l.tag!==3)&&!(p=l.tag!==5)&&(p=l.type,p=p!=="head"&&p!=="body"&&!Lg(l.type,l.memoizedProps)),p&&(p=_i)){if($g(l))throw fb(),Error(n(418));for(;p;)ub(l,p),p=Hs(p.nextSibling)}if(db(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,p=0;l;){if(l.nodeType===8){var w=l.data;if(w==="/$"){if(p===0){_i=Hs(l.nextSibling);break e}p--}else w!=="$"&&w!=="$!"&&w!=="$?"||p++}l=l.nextSibling}_i=null}}else _i=bi?Hs(l.stateNode.nextSibling):null;return!0}function fb(){for(var l=_i;l;)l=Hs(l.nextSibling)}function ql(){_i=bi=null,hn=!1}function qg(l){uo===null?uo=[l]:uo.push(l)}var rD=z.ReactCurrentBatchConfig;function Ic(l,p,w){if(l=w.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var S=w.stateNode}if(!S)throw Error(n(147,l));var O=S,D=""+l;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===D?p.ref:(p=function(G){var J=O.refs;G===null?delete J[D]:J[D]=G},p._stringRef=D,p)}if(typeof l!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,l))}return l}function Pf(l,p){throw l=Object.prototype.toString.call(p),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":l))}function hb(l){var p=l._init;return p(l._payload)}function pb(l){function p(ue,ie){if(l){var ce=ue.deletions;ce===null?(ue.deletions=[ie],ue.flags|=16):ce.push(ie)}}function w(ue,ie){if(!l)return null;for(;ie!==null;)p(ue,ie),ie=ie.sibling;return null}function S(ue,ie){for(ue=new Map;ie!==null;)ie.key!==null?ue.set(ie.key,ie):ue.set(ie.index,ie),ie=ie.sibling;return ue}function O(ue,ie){return ue=na(ue,ie),ue.index=0,ue.sibling=null,ue}function D(ue,ie,ce){return ue.index=ce,l?(ce=ue.alternate,ce!==null?(ce=ce.index,ce<ie?(ue.flags|=2,ie):ce):(ue.flags|=2,ie)):(ue.flags|=1048576,ie)}function G(ue){return l&&ue.alternate===null&&(ue.flags|=2),ue}function J(ue,ie,ce,De){return ie===null||ie.tag!==6?(ie=Bm(ce,ue.mode,De),ie.return=ue,ie):(ie=O(ie,ce),ie.return=ue,ie)}function ee(ue,ie,ce,De){var Ze=ce.type;return Ze===W?Pe(ue,ie,ce.props.children,De,ce.key):ie!==null&&(ie.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===we&&hb(Ze)===ie.type)?(De=O(ie,ce.props),De.ref=Ic(ue,ie,ce),De.return=ue,De):(De=Qf(ce.type,ce.key,ce.props,null,ue.mode,De),De.ref=Ic(ue,ie,ce),De.return=ue,De)}function ve(ue,ie,ce,De){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ce.containerInfo||ie.stateNode.implementation!==ce.implementation?(ie=Fm(ce,ue.mode,De),ie.return=ue,ie):(ie=O(ie,ce.children||[]),ie.return=ue,ie)}function Pe(ue,ie,ce,De,Ze){return ie===null||ie.tag!==7?(ie=$a(ce,ue.mode,De,Ze),ie.return=ue,ie):(ie=O(ie,ce),ie.return=ue,ie)}function Re(ue,ie,ce){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=Bm(""+ie,ue.mode,ce),ie.return=ue,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case q:return ce=Qf(ie.type,ie.key,ie.props,null,ue.mode,ce),ce.ref=Ic(ue,null,ie),ce.return=ue,ce;case H:return ie=Fm(ie,ue.mode,ce),ie.return=ue,ie;case we:var De=ie._init;return Re(ue,De(ie._payload),ce)}if(To(ie)||Ae(ie))return ie=$a(ie,ue.mode,ce,null),ie.return=ue,ie;Pf(ue,ie)}return null}function Te(ue,ie,ce,De){var Ze=ie!==null?ie.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return Ze!==null?null:J(ue,ie,""+ce,De);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case q:return ce.key===Ze?ee(ue,ie,ce,De):null;case H:return ce.key===Ze?ve(ue,ie,ce,De):null;case we:return Ze=ce._init,Te(ue,ie,Ze(ce._payload),De)}if(To(ce)||Ae(ce))return Ze!==null?null:Pe(ue,ie,ce,De,null);Pf(ue,ce)}return null}function Ve(ue,ie,ce,De,Ze){if(typeof De=="string"&&De!==""||typeof De=="number")return ue=ue.get(ce)||null,J(ie,ue,""+De,Ze);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case q:return ue=ue.get(De.key===null?ce:De.key)||null,ee(ie,ue,De,Ze);case H:return ue=ue.get(De.key===null?ce:De.key)||null,ve(ie,ue,De,Ze);case we:var ot=De._init;return Ve(ue,ie,ce,ot(De._payload),Ze)}if(To(De)||Ae(De))return ue=ue.get(ce)||null,Pe(ie,ue,De,Ze,null);Pf(ie,De)}return null}function Ye(ue,ie,ce,De){for(var Ze=null,ot=null,st=ie,ft=ie=0,hr=null;st!==null&&ft<ce.length;ft++){st.index>ft?(hr=st,st=null):hr=st.sibling;var Ot=Te(ue,st,ce[ft],De);if(Ot===null){st===null&&(st=hr);break}l&&st&&Ot.alternate===null&&p(ue,st),ie=D(Ot,ie,ft),ot===null?Ze=Ot:ot.sibling=Ot,ot=Ot,st=hr}if(ft===ce.length)return w(ue,st),hn&&La(ue,ft),Ze;if(st===null){for(;ft<ce.length;ft++)st=Re(ue,ce[ft],De),st!==null&&(ie=D(st,ie,ft),ot===null?Ze=st:ot.sibling=st,ot=st);return hn&&La(ue,ft),Ze}for(st=S(ue,st);ft<ce.length;ft++)hr=Ve(st,ue,ft,ce[ft],De),hr!==null&&(l&&hr.alternate!==null&&st.delete(hr.key===null?ft:hr.key),ie=D(hr,ie,ft),ot===null?Ze=hr:ot.sibling=hr,ot=hr);return l&&st.forEach(function(ra){return p(ue,ra)}),hn&&La(ue,ft),Ze}function Xe(ue,ie,ce,De){var Ze=Ae(ce);if(typeof Ze!="function")throw Error(n(150));if(ce=Ze.call(ce),ce==null)throw Error(n(151));for(var ot=Ze=null,st=ie,ft=ie=0,hr=null,Ot=ce.next();st!==null&&!Ot.done;ft++,Ot=ce.next()){st.index>ft?(hr=st,st=null):hr=st.sibling;var ra=Te(ue,st,Ot.value,De);if(ra===null){st===null&&(st=hr);break}l&&st&&ra.alternate===null&&p(ue,st),ie=D(ra,ie,ft),ot===null?Ze=ra:ot.sibling=ra,ot=ra,st=hr}if(Ot.done)return w(ue,st),hn&&La(ue,ft),Ze;if(st===null){for(;!Ot.done;ft++,Ot=ce.next())Ot=Re(ue,Ot.value,De),Ot!==null&&(ie=D(Ot,ie,ft),ot===null?Ze=Ot:ot.sibling=Ot,ot=Ot);return hn&&La(ue,ft),Ze}for(st=S(ue,st);!Ot.done;ft++,Ot=ce.next())Ot=Ve(st,ue,ft,Ot.value,De),Ot!==null&&(l&&Ot.alternate!==null&&st.delete(Ot.key===null?ft:Ot.key),ie=D(Ot,ie,ft),ot===null?Ze=Ot:ot.sibling=Ot,ot=Ot);return l&&st.forEach(function(LD){return p(ue,LD)}),hn&&La(ue,ft),Ze}function Bn(ue,ie,ce,De){if(typeof ce=="object"&&ce!==null&&ce.type===W&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case q:e:{for(var Ze=ce.key,ot=ie;ot!==null;){if(ot.key===Ze){if(Ze=ce.type,Ze===W){if(ot.tag===7){w(ue,ot.sibling),ie=O(ot,ce.props.children),ie.return=ue,ue=ie;break e}}else if(ot.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===we&&hb(Ze)===ot.type){w(ue,ot.sibling),ie=O(ot,ce.props),ie.ref=Ic(ue,ot,ce),ie.return=ue,ue=ie;break e}w(ue,ot);break}else p(ue,ot);ot=ot.sibling}ce.type===W?(ie=$a(ce.props.children,ue.mode,De,ce.key),ie.return=ue,ue=ie):(De=Qf(ce.type,ce.key,ce.props,null,ue.mode,De),De.ref=Ic(ue,ie,ce),De.return=ue,ue=De)}return G(ue);case H:e:{for(ot=ce.key;ie!==null;){if(ie.key===ot)if(ie.tag===4&&ie.stateNode.containerInfo===ce.containerInfo&&ie.stateNode.implementation===ce.implementation){w(ue,ie.sibling),ie=O(ie,ce.children||[]),ie.return=ue,ue=ie;break e}else{w(ue,ie);break}else p(ue,ie);ie=ie.sibling}ie=Fm(ce,ue.mode,De),ie.return=ue,ue=ie}return G(ue);case we:return ot=ce._init,Bn(ue,ie,ot(ce._payload),De)}if(To(ce))return Ye(ue,ie,ce,De);if(Ae(ce))return Xe(ue,ie,ce,De);Pf(ue,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,ie!==null&&ie.tag===6?(w(ue,ie.sibling),ie=O(ie,ce),ie.return=ue,ue=ie):(w(ue,ie),ie=Bm(ce,ue.mode,De),ie.return=ue,ue=ie),G(ue)):w(ue,ie)}return Bn}var Wl=pb(!0),gb=pb(!1),Nf=qs(null),Rf=null,Kl=null,Wg=null;function Kg(){Wg=Kl=Rf=null}function Yg(l){var p=Nf.current;un(Nf),l._currentValue=p}function Xg(l,p,w){for(;l!==null;){var S=l.alternate;if((l.childLanes&p)!==p?(l.childLanes|=p,S!==null&&(S.childLanes|=p)):S!==null&&(S.childLanes&p)!==p&&(S.childLanes|=p),l===w)break;l=l.return}}function Yl(l,p){Rf=l,Wg=Kl=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&p)!==0&&(ii=!0),l.firstContext=null)}function zi(l){var p=l._currentValue;if(Wg!==l)if(l={context:l,memoizedValue:p,next:null},Kl===null){if(Rf===null)throw Error(n(308));Kl=l,Rf.dependencies={lanes:0,firstContext:l}}else Kl=Kl.next=l;return p}var Ba=null;function Jg(l){Ba===null?Ba=[l]:Ba.push(l)}function mb(l,p,w,S){var O=p.interleaved;return O===null?(w.next=w,Jg(p)):(w.next=O.next,O.next=w),p.interleaved=w,ts(l,S)}function ts(l,p){l.lanes|=p;var w=l.alternate;for(w!==null&&(w.lanes|=p),w=l,l=l.return;l!==null;)l.childLanes|=p,w=l.alternate,w!==null&&(w.childLanes|=p),w=l,l=l.return;return w.tag===3?w.stateNode:null}var Ys=!1;function Zg(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vb(l,p){l=l.updateQueue,p.updateQueue===l&&(p.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function ns(l,p){return{eventTime:l,lane:p,tag:0,payload:null,callback:null,next:null}}function Xs(l,p,w){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,(Nt&2)!==0){var O=S.pending;return O===null?p.next=p:(p.next=O.next,O.next=p),S.pending=p,ts(l,w)}return O=S.interleaved,O===null?(p.next=p,Jg(S)):(p.next=O.next,O.next=p),S.interleaved=p,ts(l,w)}function Of(l,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var S=p.lanes;S&=l.pendingLanes,w|=S,p.lanes=w,Sn(l,w)}}function yb(l,p){var w=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,w===S)){var O=null,D=null;if(w=w.firstBaseUpdate,w!==null){do{var G={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};D===null?O=D=G:D=D.next=G,w=w.next}while(w!==null);D===null?O=D=p:D=D.next=p}else O=D=p;w={baseState:S.baseState,firstBaseUpdate:O,lastBaseUpdate:D,shared:S.shared,effects:S.effects},l.updateQueue=w;return}l=w.lastBaseUpdate,l===null?w.firstBaseUpdate=p:l.next=p,w.lastBaseUpdate=p}function kf(l,p,w,S){var O=l.updateQueue;Ys=!1;var D=O.firstBaseUpdate,G=O.lastBaseUpdate,J=O.shared.pending;if(J!==null){O.shared.pending=null;var ee=J,ve=ee.next;ee.next=null,G===null?D=ve:G.next=ve,G=ee;var Pe=l.alternate;Pe!==null&&(Pe=Pe.updateQueue,J=Pe.lastBaseUpdate,J!==G&&(J===null?Pe.firstBaseUpdate=ve:J.next=ve,Pe.lastBaseUpdate=ee))}if(D!==null){var Re=O.baseState;G=0,Pe=ve=ee=null,J=D;do{var Te=J.lane,Ve=J.eventTime;if((S&Te)===Te){Pe!==null&&(Pe=Pe.next={eventTime:Ve,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var Ye=l,Xe=J;switch(Te=p,Ve=w,Xe.tag){case 1:if(Ye=Xe.payload,typeof Ye=="function"){Re=Ye.call(Ve,Re,Te);break e}Re=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=Xe.payload,Te=typeof Ye=="function"?Ye.call(Ve,Re,Te):Ye,Te==null)break e;Re=Ce({},Re,Te);break e;case 2:Ys=!0}}J.callback!==null&&J.lane!==0&&(l.flags|=64,Te=O.effects,Te===null?O.effects=[J]:Te.push(J))}else Ve={eventTime:Ve,lane:Te,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Pe===null?(ve=Pe=Ve,ee=Re):Pe=Pe.next=Ve,G|=Te;if(J=J.next,J===null){if(J=O.shared.pending,J===null)break;Te=J,J=Te.next,Te.next=null,O.lastBaseUpdate=Te,O.shared.pending=null}}while(!0);if(Pe===null&&(ee=Re),O.baseState=ee,O.firstBaseUpdate=ve,O.lastBaseUpdate=Pe,p=O.shared.interleaved,p!==null){O=p;do G|=O.lane,O=O.next;while(O!==p)}else D===null&&(O.shared.lanes=0);ja|=G,l.lanes=G,l.memoizedState=Re}}function xb(l,p,w){if(l=p.effects,p.effects=null,l!==null)for(p=0;p<l.length;p++){var S=l[p],O=S.callback;if(O!==null){if(S.callback=null,S=w,typeof O!="function")throw Error(n(191,O));O.call(S)}}}var Pc={},Mo=qs(Pc),Nc=qs(Pc),Rc=qs(Pc);function Fa(l){if(l===Pc)throw Error(n(174));return l}function Qg(l,p){switch(rn(Rc,p),rn(Nc,l),rn(Mo,Pc),l=p.nodeType,l){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Il(null,"");break;default:l=l===8?p.parentNode:p,p=l.namespaceURI||null,l=l.tagName,p=Il(p,l)}un(Mo),rn(Mo,p)}function Xl(){un(Mo),un(Nc),un(Rc)}function wb(l){Fa(Rc.current);var p=Fa(Mo.current),w=Il(p,l.type);p!==w&&(rn(Nc,l),rn(Mo,w))}function em(l){Nc.current===l&&(un(Mo),un(Nc))}var wn=qs(0);function Mf(l){for(var p=l;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var tm=[];function nm(){for(var l=0;l<tm.length;l++)tm[l]._workInProgressVersionPrimary=null;tm.length=0}var Df=z.ReactCurrentDispatcher,rm=z.ReactCurrentBatchConfig,Ua=0,En=null,tr=null,dr=null,Lf=!1,Oc=!1,kc=0,iD=0;function Lr(){throw Error(n(321))}function im(l,p){if(p===null)return!1;for(var w=0;w<p.length&&w<l.length;w++)if(!oe(l[w],p[w]))return!1;return!0}function om(l,p,w,S,O,D){if(Ua=D,En=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Df.current=l===null||l.memoizedState===null?lD:uD,l=w(S,O),Oc){D=0;do{if(Oc=!1,kc=0,25<=D)throw Error(n(301));D+=1,dr=tr=null,p.updateQueue=null,Df.current=cD,l=w(S,O)}while(Oc)}if(Df.current=Uf,p=tr!==null&&tr.next!==null,Ua=0,dr=tr=En=null,Lf=!1,p)throw Error(n(300));return l}function sm(){var l=kc!==0;return kc=0,l}function Do(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?En.memoizedState=dr=l:dr=dr.next=l,dr}function $i(){if(tr===null){var l=En.alternate;l=l!==null?l.memoizedState:null}else l=tr.next;var p=dr===null?En.memoizedState:dr.next;if(p!==null)dr=p,tr=l;else{if(l===null)throw Error(n(310));tr=l,l={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},dr===null?En.memoizedState=dr=l:dr=dr.next=l}return dr}function Mc(l,p){return typeof p=="function"?p(l):p}function am(l){var p=$i(),w=p.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=l;var S=tr,O=S.baseQueue,D=w.pending;if(D!==null){if(O!==null){var G=O.next;O.next=D.next,D.next=G}S.baseQueue=O=D,w.pending=null}if(O!==null){D=O.next,S=S.baseState;var J=G=null,ee=null,ve=D;do{var Pe=ve.lane;if((Ua&Pe)===Pe)ee!==null&&(ee=ee.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),S=ve.hasEagerState?ve.eagerState:l(S,ve.action);else{var Re={lane:Pe,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};ee===null?(J=ee=Re,G=S):ee=ee.next=Re,En.lanes|=Pe,ja|=Pe}ve=ve.next}while(ve!==null&&ve!==D);ee===null?G=S:ee.next=J,oe(S,p.memoizedState)||(ii=!0),p.memoizedState=S,p.baseState=G,p.baseQueue=ee,w.lastRenderedState=S}if(l=w.interleaved,l!==null){O=l;do D=O.lane,En.lanes|=D,ja|=D,O=O.next;while(O!==l)}else O===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function lm(l){var p=$i(),w=p.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=l;var S=w.dispatch,O=w.pending,D=p.memoizedState;if(O!==null){w.pending=null;var G=O=O.next;do D=l(D,G.action),G=G.next;while(G!==O);oe(D,p.memoizedState)||(ii=!0),p.memoizedState=D,p.baseQueue===null&&(p.baseState=D),w.lastRenderedState=D}return[D,S]}function Eb(){}function bb(l,p){var w=En,S=$i(),O=p(),D=!oe(S.memoizedState,O);if(D&&(S.memoizedState=O,ii=!0),S=S.queue,um(Cb.bind(null,w,S,l),[l]),S.getSnapshot!==p||D||dr!==null&&dr.memoizedState.tag&1){if(w.flags|=2048,Dc(9,Ab.bind(null,w,S,O,p),void 0,null),fr===null)throw Error(n(349));(Ua&30)!==0||_b(w,p,O)}return O}function _b(l,p,w){l.flags|=16384,l={getSnapshot:p,value:w},p=En.updateQueue,p===null?(p={lastEffect:null,stores:null},En.updateQueue=p,p.stores=[l]):(w=p.stores,w===null?p.stores=[l]:w.push(l))}function Ab(l,p,w,S){p.value=w,p.getSnapshot=S,Sb(p)&&Tb(l)}function Cb(l,p,w){return w(function(){Sb(p)&&Tb(l)})}function Sb(l){var p=l.getSnapshot;l=l.value;try{var w=p();return!oe(l,w)}catch{return!0}}function Tb(l){var p=ts(l,1);p!==null&&po(p,l,1,-1)}function Ib(l){var p=Do();return typeof l=="function"&&(l=l()),p.memoizedState=p.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mc,lastRenderedState:l},p.queue=l,l=l.dispatch=aD.bind(null,En,l),[p.memoizedState,l]}function Dc(l,p,w,S){return l={tag:l,create:p,destroy:w,deps:S,next:null},p=En.updateQueue,p===null?(p={lastEffect:null,stores:null},En.updateQueue=p,p.lastEffect=l.next=l):(w=p.lastEffect,w===null?p.lastEffect=l.next=l:(S=w.next,w.next=l,l.next=S,p.lastEffect=l)),l}function Pb(){return $i().memoizedState}function Bf(l,p,w,S){var O=Do();En.flags|=l,O.memoizedState=Dc(1|p,w,void 0,S===void 0?null:S)}function Ff(l,p,w,S){var O=$i();S=S===void 0?null:S;var D=void 0;if(tr!==null){var G=tr.memoizedState;if(D=G.destroy,S!==null&&im(S,G.deps)){O.memoizedState=Dc(p,w,D,S);return}}En.flags|=l,O.memoizedState=Dc(1|p,w,D,S)}function Nb(l,p){return Bf(8390656,8,l,p)}function um(l,p){return Ff(2048,8,l,p)}function Rb(l,p){return Ff(4,2,l,p)}function Ob(l,p){return Ff(4,4,l,p)}function kb(l,p){if(typeof p=="function")return l=l(),p(l),function(){p(null)};if(p!=null)return l=l(),p.current=l,function(){p.current=null}}function Mb(l,p,w){return w=w!=null?w.concat([l]):null,Ff(4,4,kb.bind(null,p,l),w)}function cm(){}function Db(l,p){var w=$i();p=p===void 0?null:p;var S=w.memoizedState;return S!==null&&p!==null&&im(p,S[1])?S[0]:(w.memoizedState=[l,p],l)}function Lb(l,p){var w=$i();p=p===void 0?null:p;var S=w.memoizedState;return S!==null&&p!==null&&im(p,S[1])?S[0]:(l=l(),w.memoizedState=[l,p],l)}function Bb(l,p,w){return(Ua&21)===0?(l.baseState&&(l.baseState=!1,ii=!0),l.memoizedState=w):(oe(w,p)||(w=Jn(),En.lanes|=w,ja|=w,l.baseState=!0),p)}function oD(l,p){var w=yt;yt=w!==0&&4>w?w:4,l(!0);var S=rm.transition;rm.transition={};try{l(!1),p()}finally{yt=w,rm.transition=S}}function Fb(){return $i().memoizedState}function sD(l,p,w){var S=ea(l);if(w={lane:S,action:w,hasEagerState:!1,eagerState:null,next:null},Ub(l))jb(p,w);else if(w=mb(l,p,w,S),w!==null){var O=qr();po(w,l,S,O),Vb(w,p,S)}}function aD(l,p,w){var S=ea(l),O={lane:S,action:w,hasEagerState:!1,eagerState:null,next:null};if(Ub(l))jb(p,O);else{var D=l.alternate;if(l.lanes===0&&(D===null||D.lanes===0)&&(D=p.lastRenderedReducer,D!==null))try{var G=p.lastRenderedState,J=D(G,w);if(O.hasEagerState=!0,O.eagerState=J,oe(J,G)){var ee=p.interleaved;ee===null?(O.next=O,Jg(p)):(O.next=ee.next,ee.next=O),p.interleaved=O;return}}catch{}finally{}w=mb(l,p,O,S),w!==null&&(O=qr(),po(w,l,S,O),Vb(w,p,S))}}function Ub(l){var p=l.alternate;return l===En||p!==null&&p===En}function jb(l,p){Oc=Lf=!0;var w=l.pending;w===null?p.next=p:(p.next=w.next,w.next=p),l.pending=p}function Vb(l,p,w){if((w&4194240)!==0){var S=p.lanes;S&=l.pendingLanes,w|=S,p.lanes=w,Sn(l,w)}}var Uf={readContext:zi,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},lD={readContext:zi,useCallback:function(l,p){return Do().memoizedState=[l,p===void 0?null:p],l},useContext:zi,useEffect:Nb,useImperativeHandle:function(l,p,w){return w=w!=null?w.concat([l]):null,Bf(4194308,4,kb.bind(null,p,l),w)},useLayoutEffect:function(l,p){return Bf(4194308,4,l,p)},useInsertionEffect:function(l,p){return Bf(4,2,l,p)},useMemo:function(l,p){var w=Do();return p=p===void 0?null:p,l=l(),w.memoizedState=[l,p],l},useReducer:function(l,p,w){var S=Do();return p=w!==void 0?w(p):p,S.memoizedState=S.baseState=p,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:p},S.queue=l,l=l.dispatch=sD.bind(null,En,l),[S.memoizedState,l]},useRef:function(l){var p=Do();return l={current:l},p.memoizedState=l},useState:Ib,useDebugValue:cm,useDeferredValue:function(l){return Do().memoizedState=l},useTransition:function(){var l=Ib(!1),p=l[0];return l=oD.bind(null,l[1]),Do().memoizedState=l,[p,l]},useMutableSource:function(){},useSyncExternalStore:function(l,p,w){var S=En,O=Do();if(hn){if(w===void 0)throw Error(n(407));w=w()}else{if(w=p(),fr===null)throw Error(n(349));(Ua&30)!==0||_b(S,p,w)}O.memoizedState=w;var D={value:w,getSnapshot:p};return O.queue=D,Nb(Cb.bind(null,S,D,l),[l]),S.flags|=2048,Dc(9,Ab.bind(null,S,D,w,p),void 0,null),w},useId:function(){var l=Do(),p=fr.identifierPrefix;if(hn){var w=es,S=Qo;w=(S&~(1<<32-$r(S)-1)).toString(32)+w,p=":"+p+"R"+w,w=kc++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=iD++,p=":"+p+"r"+w.toString(32)+":";return l.memoizedState=p},unstable_isNewReconciler:!1},uD={readContext:zi,useCallback:Db,useContext:zi,useEffect:um,useImperativeHandle:Mb,useInsertionEffect:Rb,useLayoutEffect:Ob,useMemo:Lb,useReducer:am,useRef:Pb,useState:function(){return am(Mc)},useDebugValue:cm,useDeferredValue:function(l){var p=$i();return Bb(p,tr.memoizedState,l)},useTransition:function(){var l=am(Mc)[0],p=$i().memoizedState;return[l,p]},useMutableSource:Eb,useSyncExternalStore:bb,useId:Fb,unstable_isNewReconciler:!1},cD={readContext:zi,useCallback:Db,useContext:zi,useEffect:um,useImperativeHandle:Mb,useInsertionEffect:Rb,useLayoutEffect:Ob,useMemo:Lb,useReducer:lm,useRef:Pb,useState:function(){return lm(Mc)},useDebugValue:cm,useDeferredValue:function(l){var p=$i();return tr===null?p.memoizedState=l:Bb(p,tr.memoizedState,l)},useTransition:function(){var l=lm(Mc)[0],p=$i().memoizedState;return[l,p]},useMutableSource:Eb,useSyncExternalStore:bb,useId:Fb,unstable_isNewReconciler:!1};function co(l,p){if(l&&l.defaultProps){p=Ce({},p),l=l.defaultProps;for(var w in l)p[w]===void 0&&(p[w]=l[w]);return p}return p}function dm(l,p,w,S){p=l.memoizedState,w=w(S,p),w=w==null?p:Ce({},p,w),l.memoizedState=w,l.lanes===0&&(l.updateQueue.baseState=w)}var jf={isMounted:function(l){return(l=l._reactInternals)?ti(l)===l:!1},enqueueSetState:function(l,p,w){l=l._reactInternals;var S=qr(),O=ea(l),D=ns(S,O);D.payload=p,w!=null&&(D.callback=w),p=Xs(l,D,O),p!==null&&(po(p,l,O,S),Of(p,l,O))},enqueueReplaceState:function(l,p,w){l=l._reactInternals;var S=qr(),O=ea(l),D=ns(S,O);D.tag=1,D.payload=p,w!=null&&(D.callback=w),p=Xs(l,D,O),p!==null&&(po(p,l,O,S),Of(p,l,O))},enqueueForceUpdate:function(l,p){l=l._reactInternals;var w=qr(),S=ea(l),O=ns(w,S);O.tag=2,p!=null&&(O.callback=p),p=Xs(l,O,S),p!==null&&(po(p,l,S,w),Of(p,l,S))}};function Gb(l,p,w,S,O,D,G){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,D,G):p.prototype&&p.prototype.isPureReactComponent?!pe(w,S)||!pe(O,D):!0}function zb(l,p,w){var S=!1,O=Ws,D=p.contextType;return typeof D=="object"&&D!==null?D=zi(D):(O=ri(p)?Ma:Dr.current,S=p.contextTypes,D=(S=S!=null)?zl(l,O):Ws),p=new p(w,D),l.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=jf,l.stateNode=p,p._reactInternals=l,S&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=O,l.__reactInternalMemoizedMaskedChildContext=D),p}function $b(l,p,w,S){l=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,S),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,S),p.state!==l&&jf.enqueueReplaceState(p,p.state,null)}function fm(l,p,w,S){var O=l.stateNode;O.props=w,O.state=l.memoizedState,O.refs={},Zg(l);var D=p.contextType;typeof D=="object"&&D!==null?O.context=zi(D):(D=ri(p)?Ma:Dr.current,O.context=zl(l,D)),O.state=l.memoizedState,D=p.getDerivedStateFromProps,typeof D=="function"&&(dm(l,p,D,w),O.state=l.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(p=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),p!==O.state&&jf.enqueueReplaceState(O,O.state,null),kf(l,w,O,S),O.state=l.memoizedState),typeof O.componentDidMount=="function"&&(l.flags|=4194308)}function Jl(l,p){try{var w="",S=p;do w+=lt(S),S=S.return;while(S);var O=w}catch(D){O=`
Error generating stack: `+D.message+`
`+D.stack}return{value:l,source:p,stack:O,digest:null}}function hm(l,p,w){return{value:l,source:null,stack:w??null,digest:p??null}}function pm(l,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var dD=typeof WeakMap=="function"?WeakMap:Map;function Hb(l,p,w){w=ns(-1,w),w.tag=3,w.payload={element:null};var S=p.value;return w.callback=function(){Wf||(Wf=!0,Pm=S),pm(l,p)},w}function qb(l,p,w){w=ns(-1,w),w.tag=3;var S=l.type.getDerivedStateFromError;if(typeof S=="function"){var O=p.value;w.payload=function(){return S(O)},w.callback=function(){pm(l,p)}}var D=l.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(w.callback=function(){pm(l,p),typeof S!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var G=p.stack;this.componentDidCatch(p.value,{componentStack:G!==null?G:""})}),w}function Wb(l,p,w){var S=l.pingCache;if(S===null){S=l.pingCache=new dD;var O=new Set;S.set(p,O)}else O=S.get(p),O===void 0&&(O=new Set,S.set(p,O));O.has(w)||(O.add(w),l=CD.bind(null,l,p,w),p.then(l,l))}function Kb(l){do{var p;if((p=l.tag===13)&&(p=l.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return l;l=l.return}while(l!==null);return null}function Yb(l,p,w,S,O){return(l.mode&1)===0?(l===p?l.flags|=65536:(l.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=ns(-1,1),p.tag=2,Xs(w,p,1))),w.lanes|=1),l):(l.flags|=65536,l.lanes=O,l)}var fD=z.ReactCurrentOwner,ii=!1;function Hr(l,p,w,S){p.child=l===null?gb(p,null,w,S):Wl(p,l.child,w,S)}function Xb(l,p,w,S,O){w=w.render;var D=p.ref;return Yl(p,O),S=om(l,p,w,S,D,O),w=sm(),l!==null&&!ii?(p.updateQueue=l.updateQueue,p.flags&=-2053,l.lanes&=~O,rs(l,p,O)):(hn&&w&&Gg(p),p.flags|=1,Hr(l,p,S,O),p.child)}function Jb(l,p,w,S,O){if(l===null){var D=w.type;return typeof D=="function"&&!Lm(D)&&D.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=D,Zb(l,p,D,S,O)):(l=Qf(w.type,null,S,p,p.mode,O),l.ref=p.ref,l.return=p,p.child=l)}if(D=l.child,(l.lanes&O)===0){var G=D.memoizedProps;if(w=w.compare,w=w!==null?w:pe,w(G,S)&&l.ref===p.ref)return rs(l,p,O)}return p.flags|=1,l=na(D,S),l.ref=p.ref,l.return=p,p.child=l}function Zb(l,p,w,S,O){if(l!==null){var D=l.memoizedProps;if(pe(D,S)&&l.ref===p.ref)if(ii=!1,p.pendingProps=S=D,(l.lanes&O)!==0)(l.flags&131072)!==0&&(ii=!0);else return p.lanes=l.lanes,rs(l,p,O)}return gm(l,p,w,S,O)}function Qb(l,p,w){var S=p.pendingProps,O=S.children,D=l!==null?l.memoizedState:null;if(S.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Ql,Ai),Ai|=w;else{if((w&1073741824)===0)return l=D!==null?D.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:l,cachePool:null,transitions:null},p.updateQueue=null,rn(Ql,Ai),Ai|=l,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=D!==null?D.baseLanes:w,rn(Ql,Ai),Ai|=S}else D!==null?(S=D.baseLanes|w,p.memoizedState=null):S=w,rn(Ql,Ai),Ai|=S;return Hr(l,p,O,w),p.child}function e_(l,p){var w=p.ref;(l===null&&w!==null||l!==null&&l.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function gm(l,p,w,S,O){var D=ri(w)?Ma:Dr.current;return D=zl(p,D),Yl(p,O),w=om(l,p,w,S,D,O),S=sm(),l!==null&&!ii?(p.updateQueue=l.updateQueue,p.flags&=-2053,l.lanes&=~O,rs(l,p,O)):(hn&&S&&Gg(p),p.flags|=1,Hr(l,p,w,O),p.child)}function t_(l,p,w,S,O){if(ri(w)){var D=!0;Af(p)}else D=!1;if(Yl(p,O),p.stateNode===null)Gf(l,p),zb(p,w,S),fm(p,w,S,O),S=!0;else if(l===null){var G=p.stateNode,J=p.memoizedProps;G.props=J;var ee=G.context,ve=w.contextType;typeof ve=="object"&&ve!==null?ve=zi(ve):(ve=ri(w)?Ma:Dr.current,ve=zl(p,ve));var Pe=w.getDerivedStateFromProps,Re=typeof Pe=="function"||typeof G.getSnapshotBeforeUpdate=="function";Re||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(J!==S||ee!==ve)&&$b(p,G,S,ve),Ys=!1;var Te=p.memoizedState;G.state=Te,kf(p,S,G,O),ee=p.memoizedState,J!==S||Te!==ee||ni.current||Ys?(typeof Pe=="function"&&(dm(p,w,Pe,S),ee=p.memoizedState),(J=Ys||Gb(p,w,J,S,Te,ee,ve))?(Re||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(p.flags|=4194308)):(typeof G.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=S,p.memoizedState=ee),G.props=S,G.state=ee,G.context=ve,S=J):(typeof G.componentDidMount=="function"&&(p.flags|=4194308),S=!1)}else{G=p.stateNode,vb(l,p),J=p.memoizedProps,ve=p.type===p.elementType?J:co(p.type,J),G.props=ve,Re=p.pendingProps,Te=G.context,ee=w.contextType,typeof ee=="object"&&ee!==null?ee=zi(ee):(ee=ri(w)?Ma:Dr.current,ee=zl(p,ee));var Ve=w.getDerivedStateFromProps;(Pe=typeof Ve=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(J!==Re||Te!==ee)&&$b(p,G,S,ee),Ys=!1,Te=p.memoizedState,G.state=Te,kf(p,S,G,O);var Ye=p.memoizedState;J!==Re||Te!==Ye||ni.current||Ys?(typeof Ve=="function"&&(dm(p,w,Ve,S),Ye=p.memoizedState),(ve=Ys||Gb(p,w,ve,S,Te,Ye,ee)||!1)?(Pe||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(S,Ye,ee),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(S,Ye,ee)),typeof G.componentDidUpdate=="function"&&(p.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof G.componentDidUpdate!="function"||J===l.memoizedProps&&Te===l.memoizedState||(p.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||J===l.memoizedProps&&Te===l.memoizedState||(p.flags|=1024),p.memoizedProps=S,p.memoizedState=Ye),G.props=S,G.state=Ye,G.context=ee,S=ve):(typeof G.componentDidUpdate!="function"||J===l.memoizedProps&&Te===l.memoizedState||(p.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||J===l.memoizedProps&&Te===l.memoizedState||(p.flags|=1024),S=!1)}return mm(l,p,w,S,D,O)}function mm(l,p,w,S,O,D){e_(l,p);var G=(p.flags&128)!==0;if(!S&&!G)return O&&sb(p,w,!1),rs(l,p,D);S=p.stateNode,fD.current=p;var J=G&&typeof w.getDerivedStateFromError!="function"?null:S.render();return p.flags|=1,l!==null&&G?(p.child=Wl(p,l.child,null,D),p.child=Wl(p,null,J,D)):Hr(l,p,J,D),p.memoizedState=S.state,O&&sb(p,w,!0),p.child}function n_(l){var p=l.stateNode;p.pendingContext?ib(l,p.pendingContext,p.pendingContext!==p.context):p.context&&ib(l,p.context,!1),Qg(l,p.containerInfo)}function r_(l,p,w,S,O){return ql(),qg(O),p.flags|=256,Hr(l,p,w,S),p.child}var vm={dehydrated:null,treeContext:null,retryLane:0};function ym(l){return{baseLanes:l,cachePool:null,transitions:null}}function i_(l,p,w){var S=p.pendingProps,O=wn.current,D=!1,G=(p.flags&128)!==0,J;if((J=G)||(J=l!==null&&l.memoizedState===null?!1:(O&2)!==0),J?(D=!0,p.flags&=-129):(l===null||l.memoizedState!==null)&&(O|=1),rn(wn,O&1),l===null)return Hg(p),l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((p.mode&1)===0?p.lanes=1:l.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(G=S.children,l=S.fallback,D?(S=p.mode,D=p.child,G={mode:"hidden",children:G},(S&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=G):D=eh(G,S,0,null),l=$a(l,S,w,null),D.return=p,l.return=p,D.sibling=l,p.child=D,p.child.memoizedState=ym(w),p.memoizedState=vm,l):xm(p,G));if(O=l.memoizedState,O!==null&&(J=O.dehydrated,J!==null))return hD(l,p,G,S,J,O,w);if(D){D=S.fallback,G=p.mode,O=l.child,J=O.sibling;var ee={mode:"hidden",children:S.children};return(G&1)===0&&p.child!==O?(S=p.child,S.childLanes=0,S.pendingProps=ee,p.deletions=null):(S=na(O,ee),S.subtreeFlags=O.subtreeFlags&14680064),J!==null?D=na(J,D):(D=$a(D,G,w,null),D.flags|=2),D.return=p,S.return=p,S.sibling=D,p.child=S,S=D,D=p.child,G=l.child.memoizedState,G=G===null?ym(w):{baseLanes:G.baseLanes|w,cachePool:null,transitions:G.transitions},D.memoizedState=G,D.childLanes=l.childLanes&~w,p.memoizedState=vm,S}return D=l.child,l=D.sibling,S=na(D,{mode:"visible",children:S.children}),(p.mode&1)===0&&(S.lanes=w),S.return=p,S.sibling=null,l!==null&&(w=p.deletions,w===null?(p.deletions=[l],p.flags|=16):w.push(l)),p.child=S,p.memoizedState=null,S}function xm(l,p){return p=eh({mode:"visible",children:p},l.mode,0,null),p.return=l,l.child=p}function Vf(l,p,w,S){return S!==null&&qg(S),Wl(p,l.child,null,w),l=xm(p,p.pendingProps.children),l.flags|=2,p.memoizedState=null,l}function hD(l,p,w,S,O,D,G){if(w)return p.flags&256?(p.flags&=-257,S=hm(Error(n(422))),Vf(l,p,G,S)):p.memoizedState!==null?(p.child=l.child,p.flags|=128,null):(D=S.fallback,O=p.mode,S=eh({mode:"visible",children:S.children},O,0,null),D=$a(D,O,G,null),D.flags|=2,S.return=p,D.return=p,S.sibling=D,p.child=S,(p.mode&1)!==0&&Wl(p,l.child,null,G),p.child.memoizedState=ym(G),p.memoizedState=vm,D);if((p.mode&1)===0)return Vf(l,p,G,null);if(O.data==="$!"){if(S=O.nextSibling&&O.nextSibling.dataset,S)var J=S.dgst;return S=J,D=Error(n(419)),S=hm(D,S,void 0),Vf(l,p,G,S)}if(J=(G&l.childLanes)!==0,ii||J){if(S=fr,S!==null){switch(G&-G){case 4:O=2;break;case 16:O=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:O=32;break;case 536870912:O=268435456;break;default:O=0}O=(O&(S.suspendedLanes|G))!==0?0:O,O!==0&&O!==D.retryLane&&(D.retryLane=O,ts(l,O),po(S,l,O,-1))}return Dm(),S=hm(Error(n(421))),Vf(l,p,G,S)}return O.data==="$?"?(p.flags|=128,p.child=l.child,p=SD.bind(null,l),O._reactRetry=p,null):(l=D.treeContext,_i=Hs(O.nextSibling),bi=p,hn=!0,uo=null,l!==null&&(Vi[Gi++]=Qo,Vi[Gi++]=es,Vi[Gi++]=Da,Qo=l.id,es=l.overflow,Da=p),p=xm(p,S.children),p.flags|=4096,p)}function o_(l,p,w){l.lanes|=p;var S=l.alternate;S!==null&&(S.lanes|=p),Xg(l.return,p,w)}function wm(l,p,w,S,O){var D=l.memoizedState;D===null?l.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:S,tail:w,tailMode:O}:(D.isBackwards=p,D.rendering=null,D.renderingStartTime=0,D.last=S,D.tail=w,D.tailMode=O)}function s_(l,p,w){var S=p.pendingProps,O=S.revealOrder,D=S.tail;if(Hr(l,p,S.children,w),S=wn.current,(S&2)!==0)S=S&1|2,p.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=p.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&o_(l,w,p);else if(l.tag===19)o_(l,w,p);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===p)break e;for(;l.sibling===null;){if(l.return===null||l.return===p)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}S&=1}if(rn(wn,S),(p.mode&1)===0)p.memoizedState=null;else switch(O){case"forwards":for(w=p.child,O=null;w!==null;)l=w.alternate,l!==null&&Mf(l)===null&&(O=w),w=w.sibling;w=O,w===null?(O=p.child,p.child=null):(O=w.sibling,w.sibling=null),wm(p,!1,O,w,D);break;case"backwards":for(w=null,O=p.child,p.child=null;O!==null;){if(l=O.alternate,l!==null&&Mf(l)===null){p.child=O;break}l=O.sibling,O.sibling=w,w=O,O=l}wm(p,!0,w,null,D);break;case"together":wm(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Gf(l,p){(p.mode&1)===0&&l!==null&&(l.alternate=null,p.alternate=null,p.flags|=2)}function rs(l,p,w){if(l!==null&&(p.dependencies=l.dependencies),ja|=p.lanes,(w&p.childLanes)===0)return null;if(l!==null&&p.child!==l.child)throw Error(n(153));if(p.child!==null){for(l=p.child,w=na(l,l.pendingProps),p.child=w,w.return=p;l.sibling!==null;)l=l.sibling,w=w.sibling=na(l,l.pendingProps),w.return=p;w.sibling=null}return p.child}function pD(l,p,w){switch(p.tag){case 3:n_(p),ql();break;case 5:wb(p);break;case 1:ri(p.type)&&Af(p);break;case 4:Qg(p,p.stateNode.containerInfo);break;case 10:var S=p.type._context,O=p.memoizedProps.value;rn(Nf,S._currentValue),S._currentValue=O;break;case 13:if(S=p.memoizedState,S!==null)return S.dehydrated!==null?(rn(wn,wn.current&1),p.flags|=128,null):(w&p.child.childLanes)!==0?i_(l,p,w):(rn(wn,wn.current&1),l=rs(l,p,w),l!==null?l.sibling:null);rn(wn,wn.current&1);break;case 19:if(S=(w&p.childLanes)!==0,(l.flags&128)!==0){if(S)return s_(l,p,w);p.flags|=128}if(O=p.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),rn(wn,wn.current),S)break;return null;case 22:case 23:return p.lanes=0,Qb(l,p,w)}return rs(l,p,w)}var a_,Em,l_,u_;a_=function(l,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)l.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Em=function(){},l_=function(l,p,w,S){var O=l.memoizedProps;if(O!==S){l=p.stateNode,Fa(Mo.current);var D=null;switch(w){case"input":O=dt(l,O),S=dt(l,S),D=[];break;case"select":O=Ce({},O,{value:void 0}),S=Ce({},S,{value:void 0}),D=[];break;case"textarea":O=Rs(l,O),S=Rs(l,S),D=[];break;default:typeof O.onClick!="function"&&typeof S.onClick=="function"&&(l.onclick=Ef)}Lt(w,S);var G;w=null;for(ve in O)if(!S.hasOwnProperty(ve)&&O.hasOwnProperty(ve)&&O[ve]!=null)if(ve==="style"){var J=O[ve];for(G in J)J.hasOwnProperty(G)&&(w||(w={}),w[G]="")}else ve!=="dangerouslySetInnerHTML"&&ve!=="children"&&ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(i.hasOwnProperty(ve)?D||(D=[]):(D=D||[]).push(ve,null));for(ve in S){var ee=S[ve];if(J=O?.[ve],S.hasOwnProperty(ve)&&ee!==J&&(ee!=null||J!=null))if(ve==="style")if(J){for(G in J)!J.hasOwnProperty(G)||ee&&ee.hasOwnProperty(G)||(w||(w={}),w[G]="");for(G in ee)ee.hasOwnProperty(G)&&J[G]!==ee[G]&&(w||(w={}),w[G]=ee[G])}else w||(D||(D=[]),D.push(ve,w)),w=ee;else ve==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,J=J?J.__html:void 0,ee!=null&&J!==ee&&(D=D||[]).push(ve,ee)):ve==="children"?typeof ee!="string"&&typeof ee!="number"||(D=D||[]).push(ve,""+ee):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&(i.hasOwnProperty(ve)?(ee!=null&&ve==="onScroll"&&ln("scroll",l),D||J===ee||(D=[])):(D=D||[]).push(ve,ee))}w&&(D=D||[]).push("style",w);var ve=D;(p.updateQueue=ve)&&(p.flags|=4)}},u_=function(l,p,w,S){w!==S&&(p.flags|=4)};function Lc(l,p){if(!hn)switch(l.tailMode){case"hidden":p=l.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?l.tail=null:w.sibling=null;break;case"collapsed":w=l.tail;for(var S=null;w!==null;)w.alternate!==null&&(S=w),w=w.sibling;S===null?p||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function Br(l){var p=l.alternate!==null&&l.alternate.child===l.child,w=0,S=0;if(p)for(var O=l.child;O!==null;)w|=O.lanes|O.childLanes,S|=O.subtreeFlags&14680064,S|=O.flags&14680064,O.return=l,O=O.sibling;else for(O=l.child;O!==null;)w|=O.lanes|O.childLanes,S|=O.subtreeFlags,S|=O.flags,O.return=l,O=O.sibling;return l.subtreeFlags|=S,l.childLanes=w,p}function gD(l,p,w){var S=p.pendingProps;switch(zg(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(p),null;case 1:return ri(p.type)&&_f(),Br(p),null;case 3:return S=p.stateNode,Xl(),un(ni),un(Dr),nm(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(l===null||l.child===null)&&(If(p)?p.flags|=4:l===null||l.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,uo!==null&&(Om(uo),uo=null))),Em(l,p),Br(p),null;case 5:em(p);var O=Fa(Rc.current);if(w=p.type,l!==null&&p.stateNode!=null)l_(l,p,w,S,O),l.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!S){if(p.stateNode===null)throw Error(n(166));return Br(p),null}if(l=Fa(Mo.current),If(p)){S=p.stateNode,w=p.type;var D=p.memoizedProps;switch(S[ko]=p,S[Sc]=D,l=(p.mode&1)!==0,w){case"dialog":ln("cancel",S),ln("close",S);break;case"iframe":case"object":case"embed":ln("load",S);break;case"video":case"audio":for(O=0;O<_c.length;O++)ln(_c[O],S);break;case"source":ln("error",S);break;case"img":case"image":case"link":ln("error",S),ln("load",S);break;case"details":ln("toggle",S);break;case"input":It(S,D),ln("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!D.multiple},ln("invalid",S);break;case"textarea":tc(S,D),ln("invalid",S)}Lt(w,D),O=null;for(var G in D)if(D.hasOwnProperty(G)){var J=D[G];G==="children"?typeof J=="string"?S.textContent!==J&&(D.suppressHydrationWarning!==!0&&wf(S.textContent,J,l),O=["children",J]):typeof J=="number"&&S.textContent!==""+J&&(D.suppressHydrationWarning!==!0&&wf(S.textContent,J,l),O=["children",""+J]):i.hasOwnProperty(G)&&J!=null&&G==="onScroll"&&ln("scroll",S)}switch(w){case"input":Me(S),Rt(S,D,!0);break;case"textarea":Me(S),Tl(S);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(S.onclick=Ef)}S=O,p.updateQueue=S,S!==null&&(p.flags|=4)}else{G=O.nodeType===9?O:O.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Zr(w)),l==="http://www.w3.org/1999/xhtml"?w==="script"?(l=G.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof S.is=="string"?l=G.createElement(w,{is:S.is}):(l=G.createElement(w),w==="select"&&(G=l,S.multiple?G.multiple=!0:S.size&&(G.size=S.size))):l=G.createElementNS(l,w),l[ko]=p,l[Sc]=S,a_(l,p,!1,!1),p.stateNode=l;e:{switch(G=Qt(w,S),w){case"dialog":ln("cancel",l),ln("close",l),O=S;break;case"iframe":case"object":case"embed":ln("load",l),O=S;break;case"video":case"audio":for(O=0;O<_c.length;O++)ln(_c[O],l);O=S;break;case"source":ln("error",l),O=S;break;case"img":case"image":case"link":ln("error",l),ln("load",l),O=S;break;case"details":ln("toggle",l),O=S;break;case"input":It(l,S),O=dt(l,S),ln("invalid",l);break;case"option":O=S;break;case"select":l._wrapperState={wasMultiple:!!S.multiple},O=Ce({},S,{value:void 0}),ln("invalid",l);break;case"textarea":tc(l,S),O=Rs(l,S),ln("invalid",l);break;default:O=S}Lt(w,O),J=O;for(D in J)if(J.hasOwnProperty(D)){var ee=J[D];D==="style"?Be(l,ee):D==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&lr(l,ee)):D==="children"?typeof ee=="string"?(w!=="textarea"||ee!=="")&&Os(l,ee):typeof ee=="number"&&Os(l,""+ee):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(i.hasOwnProperty(D)?ee!=null&&D==="onScroll"&&ln("scroll",l):ee!=null&&F(l,D,ee,G))}switch(w){case"input":Me(l),Rt(l,S,!1);break;case"textarea":Me(l),Tl(l);break;case"option":S.value!=null&&l.setAttribute("value",""+rt(S.value));break;case"select":l.multiple=!!S.multiple,D=S.value,D!=null?Ge(l,!!S.multiple,D,!1):S.defaultValue!=null&&Ge(l,!!S.multiple,S.defaultValue,!0);break;default:typeof O.onClick=="function"&&(l.onclick=Ef)}switch(w){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Br(p),null;case 6:if(l&&p.stateNode!=null)u_(l,p,l.memoizedProps,S);else{if(typeof S!="string"&&p.stateNode===null)throw Error(n(166));if(w=Fa(Rc.current),Fa(Mo.current),If(p)){if(S=p.stateNode,w=p.memoizedProps,S[ko]=p,(D=S.nodeValue!==w)&&(l=bi,l!==null))switch(l.tag){case 3:wf(S.nodeValue,w,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&wf(S.nodeValue,w,(l.mode&1)!==0)}D&&(p.flags|=4)}else S=(w.nodeType===9?w:w.ownerDocument).createTextNode(S),S[ko]=p,p.stateNode=S}return Br(p),null;case 13:if(un(wn),S=p.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(hn&&_i!==null&&(p.mode&1)!==0&&(p.flags&128)===0)fb(),ql(),p.flags|=98560,D=!1;else if(D=If(p),S!==null&&S.dehydrated!==null){if(l===null){if(!D)throw Error(n(318));if(D=p.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[ko]=p}else ql(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Br(p),D=!1}else uo!==null&&(Om(uo),uo=null),D=!0;if(!D)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=w,p):(S=S!==null,S!==(l!==null&&l.memoizedState!==null)&&S&&(p.child.flags|=8192,(p.mode&1)!==0&&(l===null||(wn.current&1)!==0?nr===0&&(nr=3):Dm())),p.updateQueue!==null&&(p.flags|=4),Br(p),null);case 4:return Xl(),Em(l,p),l===null&&Ac(p.stateNode.containerInfo),Br(p),null;case 10:return Yg(p.type._context),Br(p),null;case 17:return ri(p.type)&&_f(),Br(p),null;case 19:if(un(wn),D=p.memoizedState,D===null)return Br(p),null;if(S=(p.flags&128)!==0,G=D.rendering,G===null)if(S)Lc(D,!1);else{if(nr!==0||l!==null&&(l.flags&128)!==0)for(l=p.child;l!==null;){if(G=Mf(l),G!==null){for(p.flags|=128,Lc(D,!1),S=G.updateQueue,S!==null&&(p.updateQueue=S,p.flags|=4),p.subtreeFlags=0,S=w,w=p.child;w!==null;)D=w,l=S,D.flags&=14680066,G=D.alternate,G===null?(D.childLanes=0,D.lanes=l,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=G.childLanes,D.lanes=G.lanes,D.child=G.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=G.memoizedProps,D.memoizedState=G.memoizedState,D.updateQueue=G.updateQueue,D.type=G.type,l=G.dependencies,D.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),w=w.sibling;return rn(wn,wn.current&1|2),p.child}l=l.sibling}D.tail!==null&&Ut()>eu&&(p.flags|=128,S=!0,Lc(D,!1),p.lanes=4194304)}else{if(!S)if(l=Mf(G),l!==null){if(p.flags|=128,S=!0,w=l.updateQueue,w!==null&&(p.updateQueue=w,p.flags|=4),Lc(D,!0),D.tail===null&&D.tailMode==="hidden"&&!G.alternate&&!hn)return Br(p),null}else 2*Ut()-D.renderingStartTime>eu&&w!==1073741824&&(p.flags|=128,S=!0,Lc(D,!1),p.lanes=4194304);D.isBackwards?(G.sibling=p.child,p.child=G):(w=D.last,w!==null?w.sibling=G:p.child=G,D.last=G)}return D.tail!==null?(p=D.tail,D.rendering=p,D.tail=p.sibling,D.renderingStartTime=Ut(),p.sibling=null,w=wn.current,rn(wn,S?w&1|2:w&1),p):(Br(p),null);case 22:case 23:return Mm(),S=p.memoizedState!==null,l!==null&&l.memoizedState!==null!==S&&(p.flags|=8192),S&&(p.mode&1)!==0?(Ai&1073741824)!==0&&(Br(p),p.subtreeFlags&6&&(p.flags|=8192)):Br(p),null;case 24:return null;case 25:return null}throw Error(n(156,p.tag))}function mD(l,p){switch(zg(p),p.tag){case 1:return ri(p.type)&&_f(),l=p.flags,l&65536?(p.flags=l&-65537|128,p):null;case 3:return Xl(),un(ni),un(Dr),nm(),l=p.flags,(l&65536)!==0&&(l&128)===0?(p.flags=l&-65537|128,p):null;case 5:return em(p),null;case 13:if(un(wn),l=p.memoizedState,l!==null&&l.dehydrated!==null){if(p.alternate===null)throw Error(n(340));ql()}return l=p.flags,l&65536?(p.flags=l&-65537|128,p):null;case 19:return un(wn),null;case 4:return Xl(),null;case 10:return Yg(p.type._context),null;case 22:case 23:return Mm(),null;case 24:return null;default:return null}}var zf=!1,Fr=!1,vD=typeof WeakSet=="function"?WeakSet:Set,He=null;function Zl(l,p){var w=l.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(S){In(l,p,S)}else w.current=null}function bm(l,p,w){try{w()}catch(S){In(l,p,S)}}var c_=!1;function yD(l,p){if(Mg=Ro,l=wt(),pt(l)){if("selectionStart"in l)var w={start:l.selectionStart,end:l.selectionEnd};else e:{w=(w=l.ownerDocument)&&w.defaultView||window;var S=w.getSelection&&w.getSelection();if(S&&S.rangeCount!==0){w=S.anchorNode;var O=S.anchorOffset,D=S.focusNode;S=S.focusOffset;try{w.nodeType,D.nodeType}catch{w=null;break e}var G=0,J=-1,ee=-1,ve=0,Pe=0,Re=l,Te=null;t:for(;;){for(var Ve;Re!==w||O!==0&&Re.nodeType!==3||(J=G+O),Re!==D||S!==0&&Re.nodeType!==3||(ee=G+S),Re.nodeType===3&&(G+=Re.nodeValue.length),(Ve=Re.firstChild)!==null;)Te=Re,Re=Ve;for(;;){if(Re===l)break t;if(Te===w&&++ve===O&&(J=G),Te===D&&++Pe===S&&(ee=G),(Ve=Re.nextSibling)!==null)break;Re=Te,Te=Re.parentNode}Re=Ve}w=J===-1||ee===-1?null:{start:J,end:ee}}else w=null}w=w||{start:0,end:0}}else w=null;for(Dg={focusedElem:l,selectionRange:w},Ro=!1,He=p;He!==null;)if(p=He,l=p.child,(p.subtreeFlags&1028)!==0&&l!==null)l.return=p,He=l;else for(;He!==null;){p=He;try{var Ye=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Ye!==null){var Xe=Ye.memoizedProps,Bn=Ye.memoizedState,ue=p.stateNode,ie=ue.getSnapshotBeforeUpdate(p.elementType===p.type?Xe:co(p.type,Xe),Bn);ue.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var ce=p.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(De){In(p,p.return,De)}if(l=p.sibling,l!==null){l.return=p.return,He=l;break}He=p.return}return Ye=c_,c_=!1,Ye}function Bc(l,p,w){var S=p.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var O=S=S.next;do{if((O.tag&l)===l){var D=O.destroy;O.destroy=void 0,D!==void 0&&bm(p,w,D)}O=O.next}while(O!==S)}}function $f(l,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&l)===l){var S=w.create;w.destroy=S()}w=w.next}while(w!==p)}}function _m(l){var p=l.ref;if(p!==null){var w=l.stateNode;switch(l.tag){case 5:l=w;break;default:l=w}typeof p=="function"?p(l):p.current=l}}function d_(l){var p=l.alternate;p!==null&&(l.alternate=null,d_(p)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(p=l.stateNode,p!==null&&(delete p[ko],delete p[Sc],delete p[Ug],delete p[eD],delete p[tD])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function f_(l){return l.tag===5||l.tag===3||l.tag===4}function h_(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||f_(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Am(l,p,w){var S=l.tag;if(S===5||S===6)l=l.stateNode,p?w.nodeType===8?w.parentNode.insertBefore(l,p):w.insertBefore(l,p):(w.nodeType===8?(p=w.parentNode,p.insertBefore(l,w)):(p=w,p.appendChild(l)),w=w._reactRootContainer,w!=null||p.onclick!==null||(p.onclick=Ef));else if(S!==4&&(l=l.child,l!==null))for(Am(l,p,w),l=l.sibling;l!==null;)Am(l,p,w),l=l.sibling}function Cm(l,p,w){var S=l.tag;if(S===5||S===6)l=l.stateNode,p?w.insertBefore(l,p):w.appendChild(l);else if(S!==4&&(l=l.child,l!==null))for(Cm(l,p,w),l=l.sibling;l!==null;)Cm(l,p,w),l=l.sibling}var Ar=null,fo=!1;function Js(l,p,w){for(w=w.child;w!==null;)p_(l,p,w),w=w.sibling}function p_(l,p,w){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Tt,w)}catch{}switch(w.tag){case 5:Fr||Zl(w,p);case 6:var S=Ar,O=fo;Ar=null,Js(l,p,w),Ar=S,fo=O,Ar!==null&&(fo?(l=Ar,w=w.stateNode,l.nodeType===8?l.parentNode.removeChild(w):l.removeChild(w)):Ar.removeChild(w.stateNode));break;case 18:Ar!==null&&(fo?(l=Ar,w=w.stateNode,l.nodeType===8?Fg(l.parentNode,w):l.nodeType===1&&Fg(l,w),so(l)):Fg(Ar,w.stateNode));break;case 4:S=Ar,O=fo,Ar=w.stateNode.containerInfo,fo=!0,Js(l,p,w),Ar=S,fo=O;break;case 0:case 11:case 14:case 15:if(!Fr&&(S=w.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){O=S=S.next;do{var D=O,G=D.destroy;D=D.tag,G!==void 0&&((D&2)!==0||(D&4)!==0)&&bm(w,p,G),O=O.next}while(O!==S)}Js(l,p,w);break;case 1:if(!Fr&&(Zl(w,p),S=w.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=w.memoizedProps,S.state=w.memoizedState,S.componentWillUnmount()}catch(J){In(w,p,J)}Js(l,p,w);break;case 21:Js(l,p,w);break;case 22:w.mode&1?(Fr=(S=Fr)||w.memoizedState!==null,Js(l,p,w),Fr=S):Js(l,p,w);break;default:Js(l,p,w)}}function g_(l){var p=l.updateQueue;if(p!==null){l.updateQueue=null;var w=l.stateNode;w===null&&(w=l.stateNode=new vD),p.forEach(function(S){var O=TD.bind(null,l,S);w.has(S)||(w.add(S),S.then(O,O))})}}function ho(l,p){var w=p.deletions;if(w!==null)for(var S=0;S<w.length;S++){var O=w[S];try{var D=l,G=p,J=G;e:for(;J!==null;){switch(J.tag){case 5:Ar=J.stateNode,fo=!1;break e;case 3:Ar=J.stateNode.containerInfo,fo=!0;break e;case 4:Ar=J.stateNode.containerInfo,fo=!0;break e}J=J.return}if(Ar===null)throw Error(n(160));p_(D,G,O),Ar=null,fo=!1;var ee=O.alternate;ee!==null&&(ee.return=null),O.return=null}catch(ve){In(O,p,ve)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)m_(p,l),p=p.sibling}function m_(l,p){var w=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(ho(p,l),Lo(l),S&4){try{Bc(3,l,l.return),$f(3,l)}catch(Xe){In(l,l.return,Xe)}try{Bc(5,l,l.return)}catch(Xe){In(l,l.return,Xe)}}break;case 1:ho(p,l),Lo(l),S&512&&w!==null&&Zl(w,w.return);break;case 5:if(ho(p,l),Lo(l),S&512&&w!==null&&Zl(w,w.return),l.flags&32){var O=l.stateNode;try{Os(O,"")}catch(Xe){In(l,l.return,Xe)}}if(S&4&&(O=l.stateNode,O!=null)){var D=l.memoizedProps,G=w!==null?w.memoizedProps:D,J=l.type,ee=l.updateQueue;if(l.updateQueue=null,ee!==null)try{J==="input"&&D.type==="radio"&&D.name!=null&&Cn(O,D),Qt(J,G);var ve=Qt(J,D);for(G=0;G<ee.length;G+=2){var Pe=ee[G],Re=ee[G+1];Pe==="style"?Be(O,Re):Pe==="dangerouslySetInnerHTML"?lr(O,Re):Pe==="children"?Os(O,Re):F(O,Pe,Re,ve)}switch(J){case"input":zt(O,D);break;case"textarea":Di(O,D);break;case"select":var Te=O._wrapperState.wasMultiple;O._wrapperState.wasMultiple=!!D.multiple;var Ve=D.value;Ve!=null?Ge(O,!!D.multiple,Ve,!1):Te!==!!D.multiple&&(D.defaultValue!=null?Ge(O,!!D.multiple,D.defaultValue,!0):Ge(O,!!D.multiple,D.multiple?[]:"",!1))}O[Sc]=D}catch(Xe){In(l,l.return,Xe)}}break;case 6:if(ho(p,l),Lo(l),S&4){if(l.stateNode===null)throw Error(n(162));O=l.stateNode,D=l.memoizedProps;try{O.nodeValue=D}catch(Xe){In(l,l.return,Xe)}}break;case 3:if(ho(p,l),Lo(l),S&4&&w!==null&&w.memoizedState.isDehydrated)try{so(p.containerInfo)}catch(Xe){In(l,l.return,Xe)}break;case 4:ho(p,l),Lo(l);break;case 13:ho(p,l),Lo(l),O=l.child,O.flags&8192&&(D=O.memoizedState!==null,O.stateNode.isHidden=D,!D||O.alternate!==null&&O.alternate.memoizedState!==null||(Im=Ut())),S&4&&g_(l);break;case 22:if(Pe=w!==null&&w.memoizedState!==null,l.mode&1?(Fr=(ve=Fr)||Pe,ho(p,l),Fr=ve):ho(p,l),Lo(l),S&8192){if(ve=l.memoizedState!==null,(l.stateNode.isHidden=ve)&&!Pe&&(l.mode&1)!==0)for(He=l,Pe=l.child;Pe!==null;){for(Re=He=Pe;He!==null;){switch(Te=He,Ve=Te.child,Te.tag){case 0:case 11:case 14:case 15:Bc(4,Te,Te.return);break;case 1:Zl(Te,Te.return);var Ye=Te.stateNode;if(typeof Ye.componentWillUnmount=="function"){S=Te,w=Te.return;try{p=S,Ye.props=p.memoizedProps,Ye.state=p.memoizedState,Ye.componentWillUnmount()}catch(Xe){In(S,w,Xe)}}break;case 5:Zl(Te,Te.return);break;case 22:if(Te.memoizedState!==null){x_(Re);continue}}Ve!==null?(Ve.return=Te,He=Ve):x_(Re)}Pe=Pe.sibling}e:for(Pe=null,Re=l;;){if(Re.tag===5){if(Pe===null){Pe=Re;try{O=Re.stateNode,ve?(D=O.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(J=Re.stateNode,ee=Re.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,J.style.display=yn("display",G))}catch(Xe){In(l,l.return,Xe)}}}else if(Re.tag===6){if(Pe===null)try{Re.stateNode.nodeValue=ve?"":Re.memoizedProps}catch(Xe){In(l,l.return,Xe)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===l)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===l)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===l)break e;Pe===Re&&(Pe=null),Re=Re.return}Pe===Re&&(Pe=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:ho(p,l),Lo(l),S&4&&g_(l);break;case 21:break;default:ho(p,l),Lo(l)}}function Lo(l){var p=l.flags;if(p&2){try{e:{for(var w=l.return;w!==null;){if(f_(w)){var S=w;break e}w=w.return}throw Error(n(160))}switch(S.tag){case 5:var O=S.stateNode;S.flags&32&&(Os(O,""),S.flags&=-33);var D=h_(l);Cm(l,D,O);break;case 3:case 4:var G=S.stateNode.containerInfo,J=h_(l);Am(l,J,G);break;default:throw Error(n(161))}}catch(ee){In(l,l.return,ee)}l.flags&=-3}p&4096&&(l.flags&=-4097)}function xD(l,p,w){He=l,v_(l)}function v_(l,p,w){for(var S=(l.mode&1)!==0;He!==null;){var O=He,D=O.child;if(O.tag===22&&S){var G=O.memoizedState!==null||zf;if(!G){var J=O.alternate,ee=J!==null&&J.memoizedState!==null||Fr;J=zf;var ve=Fr;if(zf=G,(Fr=ee)&&!ve)for(He=O;He!==null;)G=He,ee=G.child,G.tag===22&&G.memoizedState!==null?w_(O):ee!==null?(ee.return=G,He=ee):w_(O);for(;D!==null;)He=D,v_(D),D=D.sibling;He=O,zf=J,Fr=ve}y_(l)}else(O.subtreeFlags&8772)!==0&&D!==null?(D.return=O,He=D):y_(l)}}function y_(l){for(;He!==null;){var p=He;if((p.flags&8772)!==0){var w=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Fr||$f(5,p);break;case 1:var S=p.stateNode;if(p.flags&4&&!Fr)if(w===null)S.componentDidMount();else{var O=p.elementType===p.type?w.memoizedProps:co(p.type,w.memoizedProps);S.componentDidUpdate(O,w.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var D=p.updateQueue;D!==null&&xb(p,D,S);break;case 3:var G=p.updateQueue;if(G!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=p.child.stateNode;break;case 1:w=p.child.stateNode}xb(p,G,w)}break;case 5:var J=p.stateNode;if(w===null&&p.flags&4){w=J;var ee=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&w.focus();break;case"img":ee.src&&(w.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var ve=p.alternate;if(ve!==null){var Pe=ve.memoizedState;if(Pe!==null){var Re=Pe.dehydrated;Re!==null&&so(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Fr||p.flags&512&&_m(p)}catch(Te){In(p,p.return,Te)}}if(p===l){He=null;break}if(w=p.sibling,w!==null){w.return=p.return,He=w;break}He=p.return}}function x_(l){for(;He!==null;){var p=He;if(p===l){He=null;break}var w=p.sibling;if(w!==null){w.return=p.return,He=w;break}He=p.return}}function w_(l){for(;He!==null;){var p=He;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{$f(4,p)}catch(ee){In(p,w,ee)}break;case 1:var S=p.stateNode;if(typeof S.componentDidMount=="function"){var O=p.return;try{S.componentDidMount()}catch(ee){In(p,O,ee)}}var D=p.return;try{_m(p)}catch(ee){In(p,D,ee)}break;case 5:var G=p.return;try{_m(p)}catch(ee){In(p,G,ee)}}}catch(ee){In(p,p.return,ee)}if(p===l){He=null;break}var J=p.sibling;if(J!==null){J.return=p.return,He=J;break}He=p.return}}var wD=Math.ceil,Hf=z.ReactCurrentDispatcher,Sm=z.ReactCurrentOwner,Hi=z.ReactCurrentBatchConfig,Nt=0,fr=null,zn=null,Cr=0,Ai=0,Ql=qs(0),nr=0,Fc=null,ja=0,qf=0,Tm=0,Uc=null,oi=null,Im=0,eu=1/0,is=null,Wf=!1,Pm=null,Zs=null,Kf=!1,Qs=null,Yf=0,jc=0,Nm=null,Xf=-1,Jf=0;function qr(){return(Nt&6)!==0?Ut():Xf!==-1?Xf:Xf=Ut()}function ea(l){return(l.mode&1)===0?1:(Nt&2)!==0&&Cr!==0?Cr&-Cr:rD.transition!==null?(Jf===0&&(Jf=Jn()),Jf):(l=yt,l!==0||(l=window.event,l=l===void 0?16:hc(l.type)),l)}function po(l,p,w,S){if(50<jc)throw jc=0,Nm=null,Error(n(185));K(l,w,S),((Nt&2)===0||l!==fr)&&(l===fr&&((Nt&2)===0&&(qf|=w),nr===4&&ta(l,Cr)),si(l,S),w===1&&Nt===0&&(p.mode&1)===0&&(eu=Ut()+500,Cf&&Ks()))}function si(l,p){var w=l.callbackNode;Ds(l,p);var S=yi(l,l===fr?Cr:0);if(S===0)w!==null&&ur(w),l.callbackNode=null,l.callbackPriority=0;else if(p=S&-S,l.callbackPriority!==p){if(w!=null&&ur(w),p===1)l.tag===0?nD(b_.bind(null,l)):ab(b_.bind(null,l)),Z8(function(){(Nt&6)===0&&Ks()}),w=null;else{switch(sf(S)){case 1:w=Se;break;case 4:w=rf;break;case 16:w=Kt;break;case 536870912:w=of;break;default:w=Kt}w=N_(w,E_.bind(null,l))}l.callbackPriority=p,l.callbackNode=w}}function E_(l,p){if(Xf=-1,Jf=0,(Nt&6)!==0)throw Error(n(327));var w=l.callbackNode;if(tu()&&l.callbackNode!==w)return null;var S=yi(l,l===fr?Cr:0);if(S===0)return null;if((S&30)!==0||(S&l.expiredLanes)!==0||p)p=Zf(l,S);else{p=S;var O=Nt;Nt|=2;var D=A_();(fr!==l||Cr!==p)&&(is=null,eu=Ut()+500,Ga(l,p));do try{_D();break}catch(J){__(l,J)}while(!0);Kg(),Hf.current=D,Nt=O,zn!==null?p=0:(fr=null,Cr=0,p=nr)}if(p!==0){if(p===2&&(O=jt(l),O!==0&&(S=O,p=Rm(l,O))),p===1)throw w=Fc,Ga(l,0),ta(l,S),si(l,Ut()),w;if(p===6)ta(l,S);else{if(O=l.current.alternate,(S&30)===0&&!ED(O)&&(p=Zf(l,S),p===2&&(D=jt(l),D!==0&&(S=D,p=Rm(l,D))),p===1))throw w=Fc,Ga(l,0),ta(l,S),si(l,Ut()),w;switch(l.finishedWork=O,l.finishedLanes=S,p){case 0:case 1:throw Error(n(345));case 2:za(l,oi,is);break;case 3:if(ta(l,S),(S&130023424)===S&&(p=Im+500-Ut(),10<p)){if(yi(l,0)!==0)break;if(O=l.suspendedLanes,(O&S)!==S){qr(),l.pingedLanes|=l.suspendedLanes&O;break}l.timeoutHandle=Bg(za.bind(null,l,oi,is),p);break}za(l,oi,is);break;case 4:if(ta(l,S),(S&4194240)===S)break;for(p=l.eventTimes,O=-1;0<S;){var G=31-$r(S);D=1<<G,G=p[G],G>O&&(O=G),S&=~D}if(S=O,S=Ut()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*wD(S/1960))-S,10<S){l.timeoutHandle=Bg(za.bind(null,l,oi,is),S);break}za(l,oi,is);break;case 5:za(l,oi,is);break;default:throw Error(n(329))}}}return si(l,Ut()),l.callbackNode===w?E_.bind(null,l):null}function Rm(l,p){var w=Uc;return l.current.memoizedState.isDehydrated&&(Ga(l,p).flags|=256),l=Zf(l,p),l!==2&&(p=oi,oi=w,p!==null&&Om(p)),l}function Om(l){oi===null?oi=l:oi.push.apply(oi,l)}function ED(l){for(var p=l;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var S=0;S<w.length;S++){var O=w[S],D=O.getSnapshot;O=O.value;try{if(!oe(D(),O))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function ta(l,p){for(p&=~Tm,p&=~qf,l.suspendedLanes|=p,l.pingedLanes&=~p,l=l.expirationTimes;0<p;){var w=31-$r(p),S=1<<w;l[w]=-1,p&=~S}}function b_(l){if((Nt&6)!==0)throw Error(n(327));tu();var p=yi(l,0);if((p&1)===0)return si(l,Ut()),null;var w=Zf(l,p);if(l.tag!==0&&w===2){var S=jt(l);S!==0&&(p=S,w=Rm(l,S))}if(w===1)throw w=Fc,Ga(l,0),ta(l,p),si(l,Ut()),w;if(w===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=p,za(l,oi,is),si(l,Ut()),null}function km(l,p){var w=Nt;Nt|=1;try{return l(p)}finally{Nt=w,Nt===0&&(eu=Ut()+500,Cf&&Ks())}}function Va(l){Qs!==null&&Qs.tag===0&&(Nt&6)===0&&tu();var p=Nt;Nt|=1;var w=Hi.transition,S=yt;try{if(Hi.transition=null,yt=1,l)return l()}finally{yt=S,Hi.transition=w,Nt=p,(Nt&6)===0&&Ks()}}function Mm(){Ai=Ql.current,un(Ql)}function Ga(l,p){l.finishedWork=null,l.finishedLanes=0;var w=l.timeoutHandle;if(w!==-1&&(l.timeoutHandle=-1,J8(w)),zn!==null)for(w=zn.return;w!==null;){var S=w;switch(zg(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&_f();break;case 3:Xl(),un(ni),un(Dr),nm();break;case 5:em(S);break;case 4:Xl();break;case 13:un(wn);break;case 19:un(wn);break;case 10:Yg(S.type._context);break;case 22:case 23:Mm()}w=w.return}if(fr=l,zn=l=na(l.current,null),Cr=Ai=p,nr=0,Fc=null,Tm=qf=ja=0,oi=Uc=null,Ba!==null){for(p=0;p<Ba.length;p++)if(w=Ba[p],S=w.interleaved,S!==null){w.interleaved=null;var O=S.next,D=w.pending;if(D!==null){var G=D.next;D.next=O,S.next=G}w.pending=S}Ba=null}return l}function __(l,p){do{var w=zn;try{if(Kg(),Df.current=Uf,Lf){for(var S=En.memoizedState;S!==null;){var O=S.queue;O!==null&&(O.pending=null),S=S.next}Lf=!1}if(Ua=0,dr=tr=En=null,Oc=!1,kc=0,Sm.current=null,w===null||w.return===null){nr=1,Fc=p,zn=null;break}e:{var D=l,G=w.return,J=w,ee=p;if(p=Cr,J.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var ve=ee,Pe=J,Re=Pe.tag;if((Pe.mode&1)===0&&(Re===0||Re===11||Re===15)){var Te=Pe.alternate;Te?(Pe.updateQueue=Te.updateQueue,Pe.memoizedState=Te.memoizedState,Pe.lanes=Te.lanes):(Pe.updateQueue=null,Pe.memoizedState=null)}var Ve=Kb(G);if(Ve!==null){Ve.flags&=-257,Yb(Ve,G,J,D,p),Ve.mode&1&&Wb(D,ve,p),p=Ve,ee=ve;var Ye=p.updateQueue;if(Ye===null){var Xe=new Set;Xe.add(ee),p.updateQueue=Xe}else Ye.add(ee);break e}else{if((p&1)===0){Wb(D,ve,p),Dm();break e}ee=Error(n(426))}}else if(hn&&J.mode&1){var Bn=Kb(G);if(Bn!==null){(Bn.flags&65536)===0&&(Bn.flags|=256),Yb(Bn,G,J,D,p),qg(Jl(ee,J));break e}}D=ee=Jl(ee,J),nr!==4&&(nr=2),Uc===null?Uc=[D]:Uc.push(D),D=G;do{switch(D.tag){case 3:D.flags|=65536,p&=-p,D.lanes|=p;var ue=Hb(D,ee,p);yb(D,ue);break e;case 1:J=ee;var ie=D.type,ce=D.stateNode;if((D.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Zs===null||!Zs.has(ce)))){D.flags|=65536,p&=-p,D.lanes|=p;var De=qb(D,J,p);yb(D,De);break e}}D=D.return}while(D!==null)}S_(w)}catch(Ze){p=Ze,zn===w&&w!==null&&(zn=w=w.return);continue}break}while(!0)}function A_(){var l=Hf.current;return Hf.current=Uf,l===null?Uf:l}function Dm(){(nr===0||nr===3||nr===2)&&(nr=4),fr===null||(ja&268435455)===0&&(qf&268435455)===0||ta(fr,Cr)}function Zf(l,p){var w=Nt;Nt|=2;var S=A_();(fr!==l||Cr!==p)&&(is=null,Ga(l,p));do try{bD();break}catch(O){__(l,O)}while(!0);if(Kg(),Nt=w,Hf.current=S,zn!==null)throw Error(n(261));return fr=null,Cr=0,nr}function bD(){for(;zn!==null;)C_(zn)}function _D(){for(;zn!==null&&!en();)C_(zn)}function C_(l){var p=P_(l.alternate,l,Ai);l.memoizedProps=l.pendingProps,p===null?S_(l):zn=p,Sm.current=null}function S_(l){var p=l;do{var w=p.alternate;if(l=p.return,(p.flags&32768)===0){if(w=gD(w,p,Ai),w!==null){zn=w;return}}else{if(w=mD(w,p),w!==null){w.flags&=32767,zn=w;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{nr=6,zn=null;return}}if(p=p.sibling,p!==null){zn=p;return}zn=p=l}while(p!==null);nr===0&&(nr=5)}function za(l,p,w){var S=yt,O=Hi.transition;try{Hi.transition=null,yt=1,AD(l,p,w,S)}finally{Hi.transition=O,yt=S}return null}function AD(l,p,w,S){do tu();while(Qs!==null);if((Nt&6)!==0)throw Error(n(327));w=l.finishedWork;var O=l.finishedLanes;if(w===null)return null;if(l.finishedWork=null,l.finishedLanes=0,w===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var D=w.lanes|w.childLanes;if(tt(l,D),l===fr&&(zn=fr=null,Cr=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||Kf||(Kf=!0,N_(Kt,function(){return tu(),null})),D=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||D){D=Hi.transition,Hi.transition=null;var G=yt;yt=1;var J=Nt;Nt|=4,Sm.current=null,yD(l,w),m_(w,l),Mr(Dg),Ro=!!Mg,Dg=Mg=null,l.current=w,xD(w),nf(),Nt=J,yt=G,Hi.transition=D}else l.current=w;if(Kf&&(Kf=!1,Qs=l,Yf=O),D=l.pendingLanes,D===0&&(Zs=null),At(w.stateNode),si(l,Ut()),p!==null)for(S=l.onRecoverableError,w=0;w<p.length;w++)O=p[w],S(O.value,{componentStack:O.stack,digest:O.digest});if(Wf)throw Wf=!1,l=Pm,Pm=null,l;return(Yf&1)!==0&&l.tag!==0&&tu(),D=l.pendingLanes,(D&1)!==0?l===Nm?jc++:(jc=0,Nm=l):jc=0,Ks(),null}function tu(){if(Qs!==null){var l=sf(Yf),p=Hi.transition,w=yt;try{if(Hi.transition=null,yt=16>l?16:l,Qs===null)var S=!1;else{if(l=Qs,Qs=null,Yf=0,(Nt&6)!==0)throw Error(n(331));var O=Nt;for(Nt|=4,He=l.current;He!==null;){var D=He,G=D.child;if((He.flags&16)!==0){var J=D.deletions;if(J!==null){for(var ee=0;ee<J.length;ee++){var ve=J[ee];for(He=ve;He!==null;){var Pe=He;switch(Pe.tag){case 0:case 11:case 15:Bc(8,Pe,D)}var Re=Pe.child;if(Re!==null)Re.return=Pe,He=Re;else for(;He!==null;){Pe=He;var Te=Pe.sibling,Ve=Pe.return;if(d_(Pe),Pe===ve){He=null;break}if(Te!==null){Te.return=Ve,He=Te;break}He=Ve}}}var Ye=D.alternate;if(Ye!==null){var Xe=Ye.child;if(Xe!==null){Ye.child=null;do{var Bn=Xe.sibling;Xe.sibling=null,Xe=Bn}while(Xe!==null)}}He=D}}if((D.subtreeFlags&2064)!==0&&G!==null)G.return=D,He=G;else e:for(;He!==null;){if(D=He,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Bc(9,D,D.return)}var ue=D.sibling;if(ue!==null){ue.return=D.return,He=ue;break e}He=D.return}}var ie=l.current;for(He=ie;He!==null;){G=He;var ce=G.child;if((G.subtreeFlags&2064)!==0&&ce!==null)ce.return=G,He=ce;else e:for(G=ie;He!==null;){if(J=He,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:$f(9,J)}}catch(Ze){In(J,J.return,Ze)}if(J===G){He=null;break e}var De=J.sibling;if(De!==null){De.return=J.return,He=De;break e}He=J.return}}if(Nt=O,Ks(),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Tt,l)}catch{}S=!0}return S}finally{yt=w,Hi.transition=p}}return!1}function T_(l,p,w){p=Jl(w,p),p=Hb(l,p,1),l=Xs(l,p,1),p=qr(),l!==null&&(K(l,1,p),si(l,p))}function In(l,p,w){if(l.tag===3)T_(l,l,w);else for(;p!==null;){if(p.tag===3){T_(p,l,w);break}else if(p.tag===1){var S=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Zs===null||!Zs.has(S))){l=Jl(w,l),l=qb(p,l,1),p=Xs(p,l,1),l=qr(),p!==null&&(K(p,1,l),si(p,l));break}}p=p.return}}function CD(l,p,w){var S=l.pingCache;S!==null&&S.delete(p),p=qr(),l.pingedLanes|=l.suspendedLanes&w,fr===l&&(Cr&w)===w&&(nr===4||nr===3&&(Cr&130023424)===Cr&&500>Ut()-Im?Ga(l,0):Tm|=w),si(l,p)}function I_(l,p){p===0&&((l.mode&1)===0?p=1:(p=Rl,Rl<<=1,(Rl&130023424)===0&&(Rl=4194304)));var w=qr();l=ts(l,p),l!==null&&(K(l,p,w),si(l,w))}function SD(l){var p=l.memoizedState,w=0;p!==null&&(w=p.retryLane),I_(l,w)}function TD(l,p){var w=0;switch(l.tag){case 13:var S=l.stateNode,O=l.memoizedState;O!==null&&(w=O.retryLane);break;case 19:S=l.stateNode;break;default:throw Error(n(314))}S!==null&&S.delete(p),I_(l,w)}var P_;P_=function(l,p,w){if(l!==null)if(l.memoizedProps!==p.pendingProps||ni.current)ii=!0;else{if((l.lanes&w)===0&&(p.flags&128)===0)return ii=!1,pD(l,p,w);ii=(l.flags&131072)!==0}else ii=!1,hn&&(p.flags&1048576)!==0&&lb(p,Tf,p.index);switch(p.lanes=0,p.tag){case 2:var S=p.type;Gf(l,p),l=p.pendingProps;var O=zl(p,Dr.current);Yl(p,w),O=om(null,p,S,l,O,w);var D=sm();return p.flags|=1,typeof O=="object"&&O!==null&&typeof O.render=="function"&&O.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ri(S)?(D=!0,Af(p)):D=!1,p.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,Zg(p),O.updater=jf,p.stateNode=O,O._reactInternals=p,fm(p,S,l,w),p=mm(null,p,S,!0,D,w)):(p.tag=0,hn&&D&&Gg(p),Hr(null,p,O,w),p=p.child),p;case 16:S=p.elementType;e:{switch(Gf(l,p),l=p.pendingProps,O=S._init,S=O(S._payload),p.type=S,O=p.tag=PD(S),l=co(S,l),O){case 0:p=gm(null,p,S,l,w);break e;case 1:p=t_(null,p,S,l,w);break e;case 11:p=Xb(null,p,S,l,w);break e;case 14:p=Jb(null,p,S,co(S.type,l),w);break e}throw Error(n(306,S,""))}return p;case 0:return S=p.type,O=p.pendingProps,O=p.elementType===S?O:co(S,O),gm(l,p,S,O,w);case 1:return S=p.type,O=p.pendingProps,O=p.elementType===S?O:co(S,O),t_(l,p,S,O,w);case 3:e:{if(n_(p),l===null)throw Error(n(387));S=p.pendingProps,D=p.memoizedState,O=D.element,vb(l,p),kf(p,S,null,w);var G=p.memoizedState;if(S=G.element,D.isDehydrated)if(D={element:S,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},p.updateQueue.baseState=D,p.memoizedState=D,p.flags&256){O=Jl(Error(n(423)),p),p=r_(l,p,S,w,O);break e}else if(S!==O){O=Jl(Error(n(424)),p),p=r_(l,p,S,w,O);break e}else for(_i=Hs(p.stateNode.containerInfo.firstChild),bi=p,hn=!0,uo=null,w=gb(p,null,S,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(ql(),S===O){p=rs(l,p,w);break e}Hr(l,p,S,w)}p=p.child}return p;case 5:return wb(p),l===null&&Hg(p),S=p.type,O=p.pendingProps,D=l!==null?l.memoizedProps:null,G=O.children,Lg(S,O)?G=null:D!==null&&Lg(S,D)&&(p.flags|=32),e_(l,p),Hr(l,p,G,w),p.child;case 6:return l===null&&Hg(p),null;case 13:return i_(l,p,w);case 4:return Qg(p,p.stateNode.containerInfo),S=p.pendingProps,l===null?p.child=Wl(p,null,S,w):Hr(l,p,S,w),p.child;case 11:return S=p.type,O=p.pendingProps,O=p.elementType===S?O:co(S,O),Xb(l,p,S,O,w);case 7:return Hr(l,p,p.pendingProps,w),p.child;case 8:return Hr(l,p,p.pendingProps.children,w),p.child;case 12:return Hr(l,p,p.pendingProps.children,w),p.child;case 10:e:{if(S=p.type._context,O=p.pendingProps,D=p.memoizedProps,G=O.value,rn(Nf,S._currentValue),S._currentValue=G,D!==null)if(oe(D.value,G)){if(D.children===O.children&&!ni.current){p=rs(l,p,w);break e}}else for(D=p.child,D!==null&&(D.return=p);D!==null;){var J=D.dependencies;if(J!==null){G=D.child;for(var ee=J.firstContext;ee!==null;){if(ee.context===S){if(D.tag===1){ee=ns(-1,w&-w),ee.tag=2;var ve=D.updateQueue;if(ve!==null){ve=ve.shared;var Pe=ve.pending;Pe===null?ee.next=ee:(ee.next=Pe.next,Pe.next=ee),ve.pending=ee}}D.lanes|=w,ee=D.alternate,ee!==null&&(ee.lanes|=w),Xg(D.return,w,p),J.lanes|=w;break}ee=ee.next}}else if(D.tag===10)G=D.type===p.type?null:D.child;else if(D.tag===18){if(G=D.return,G===null)throw Error(n(341));G.lanes|=w,J=G.alternate,J!==null&&(J.lanes|=w),Xg(G,w,p),G=D.sibling}else G=D.child;if(G!==null)G.return=D;else for(G=D;G!==null;){if(G===p){G=null;break}if(D=G.sibling,D!==null){D.return=G.return,G=D;break}G=G.return}D=G}Hr(l,p,O.children,w),p=p.child}return p;case 9:return O=p.type,S=p.pendingProps.children,Yl(p,w),O=zi(O),S=S(O),p.flags|=1,Hr(l,p,S,w),p.child;case 14:return S=p.type,O=co(S,p.pendingProps),O=co(S.type,O),Jb(l,p,S,O,w);case 15:return Zb(l,p,p.type,p.pendingProps,w);case 17:return S=p.type,O=p.pendingProps,O=p.elementType===S?O:co(S,O),Gf(l,p),p.tag=1,ri(S)?(l=!0,Af(p)):l=!1,Yl(p,w),zb(p,S,O),fm(p,S,O,w),mm(null,p,S,!0,l,w);case 19:return s_(l,p,w);case 22:return Qb(l,p,w)}throw Error(n(156,p.tag))};function N_(l,p){return mi(l,p)}function ID(l,p,w,S){this.tag=l,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qi(l,p,w,S){return new ID(l,p,w,S)}function Lm(l){return l=l.prototype,!(!l||!l.isReactComponent)}function PD(l){if(typeof l=="function")return Lm(l)?1:0;if(l!=null){if(l=l.$$typeof,l===ae)return 11;if(l===ne)return 14}return 2}function na(l,p){var w=l.alternate;return w===null?(w=qi(l.tag,p,l.key,l.mode),w.elementType=l.elementType,w.type=l.type,w.stateNode=l.stateNode,w.alternate=l,l.alternate=w):(w.pendingProps=p,w.type=l.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=l.flags&14680064,w.childLanes=l.childLanes,w.lanes=l.lanes,w.child=l.child,w.memoizedProps=l.memoizedProps,w.memoizedState=l.memoizedState,w.updateQueue=l.updateQueue,p=l.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=l.sibling,w.index=l.index,w.ref=l.ref,w}function Qf(l,p,w,S,O,D){var G=2;if(S=l,typeof l=="function")Lm(l)&&(G=1);else if(typeof l=="string")G=5;else e:switch(l){case W:return $a(w.children,O,D,p);case Z:G=8,O|=8;break;case X:return l=qi(12,w,p,O|2),l.elementType=X,l.lanes=D,l;case be:return l=qi(13,w,p,O),l.elementType=be,l.lanes=D,l;case fe:return l=qi(19,w,p,O),l.elementType=fe,l.lanes=D,l;case me:return eh(w,O,D,p);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case ye:G=10;break e;case se:G=9;break e;case ae:G=11;break e;case ne:G=14;break e;case we:G=16,S=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return p=qi(G,w,p,O),p.elementType=l,p.type=S,p.lanes=D,p}function $a(l,p,w,S){return l=qi(7,l,S,p),l.lanes=w,l}function eh(l,p,w,S){return l=qi(22,l,S,p),l.elementType=me,l.lanes=w,l.stateNode={isHidden:!1},l}function Bm(l,p,w){return l=qi(6,l,null,p),l.lanes=w,l}function Fm(l,p,w){return p=qi(4,l.children!==null?l.children:[],l.key,p),p.lanes=w,p.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},p}function ND(l,p,w,S,O){this.tag=p,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=le(0),this.expirationTimes=le(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=le(0),this.identifierPrefix=S,this.onRecoverableError=O,this.mutableSourceEagerHydrationData=null}function Um(l,p,w,S,O,D,G,J,ee){return l=new ND(l,p,w,J,ee),p===1?(p=1,D===!0&&(p|=8)):p=0,D=qi(3,null,null,p),l.current=D,D.stateNode=l,D.memoizedState={element:S,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zg(D),l}function RD(l,p,w){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:S==null?null:""+S,children:l,containerInfo:p,implementation:w}}function R_(l){if(!l)return Ws;l=l._reactInternals;e:{if(ti(l)!==l||l.tag!==1)throw Error(n(170));var p=l;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ri(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(n(171))}if(l.tag===1){var w=l.type;if(ri(w))return ob(l,w,p)}return p}function O_(l,p,w,S,O,D,G,J,ee){return l=Um(w,S,!0,l,O,D,G,J,ee),l.context=R_(null),w=l.current,S=qr(),O=ea(w),D=ns(S,O),D.callback=p??null,Xs(w,D,O),l.current.lanes=O,K(l,O,S),si(l,S),l}function th(l,p,w,S){var O=p.current,D=qr(),G=ea(O);return w=R_(w),p.context===null?p.context=w:p.pendingContext=w,p=ns(D,G),p.payload={element:l},S=S===void 0?null:S,S!==null&&(p.callback=S),l=Xs(O,p,G),l!==null&&(po(l,O,G,D),Of(l,O,G)),G}function nh(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function k_(l,p){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var w=l.retryLane;l.retryLane=w!==0&&w<p?w:p}}function jm(l,p){k_(l,p),(l=l.alternate)&&k_(l,p)}function OD(){return null}var M_=typeof reportError=="function"?reportError:function(l){console.error(l)};function Vm(l){this._internalRoot=l}rh.prototype.render=Vm.prototype.render=function(l){var p=this._internalRoot;if(p===null)throw Error(n(409));th(l,p,null,null)},rh.prototype.unmount=Vm.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var p=l.containerInfo;Va(function(){th(null,l,null,null)}),p[Jo]=null}};function rh(l){this._internalRoot=l}rh.prototype.unstable_scheduleHydration=function(l){if(l){var p=tn();l={blockedOn:null,target:l,priority:p};for(var w=0;w<Er.length&&p!==0&&p<Er[w].priority;w++);Er.splice(w,0,l),w===0&&lf(l)}};function Gm(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function ih(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function D_(){}function kD(l,p,w,S,O){if(O){if(typeof S=="function"){var D=S;S=function(){var ve=nh(G);D.call(ve)}}var G=O_(p,S,l,0,null,!1,!1,"",D_);return l._reactRootContainer=G,l[Jo]=G.current,Ac(l.nodeType===8?l.parentNode:l),Va(),G}for(;O=l.lastChild;)l.removeChild(O);if(typeof S=="function"){var J=S;S=function(){var ve=nh(ee);J.call(ve)}}var ee=Um(l,0,!1,null,null,!1,!1,"",D_);return l._reactRootContainer=ee,l[Jo]=ee.current,Ac(l.nodeType===8?l.parentNode:l),Va(function(){th(p,ee,w,S)}),ee}function oh(l,p,w,S,O){var D=w._reactRootContainer;if(D){var G=D;if(typeof O=="function"){var J=O;O=function(){var ee=nh(G);J.call(ee)}}th(p,G,l,O)}else G=kD(w,p,l,O,S);return nh(G)}Ol=function(l){switch(l.tag){case 3:var p=l.stateNode;if(p.current.memoizedState.isDehydrated){var w=Yt(p.pendingLanes);w!==0&&(Sn(p,w|1),si(p,Ut()),(Nt&6)===0&&(eu=Ut()+500,Ks()))}break;case 13:Va(function(){var S=ts(l,1);if(S!==null){var O=qr();po(S,l,1,O)}}),jm(l,1)}},kr=function(l){if(l.tag===13){var p=ts(l,134217728);if(p!==null){var w=qr();po(p,l,134217728,w)}jm(l,134217728)}},nt=function(l){if(l.tag===13){var p=ea(l),w=ts(l,p);if(w!==null){var S=qr();po(w,l,p,S)}jm(l,p)}},tn=function(){return yt},cc=function(l,p){var w=yt;try{return yt=l,p()}finally{yt=w}},Pl=function(l,p,w){switch(p){case"input":if(zt(l,w),p=w.name,w.type==="radio"&&p!=null){for(w=l;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<w.length;p++){var S=w[p];if(S!==l&&S.form===l.form){var O=bf(S);if(!O)throw Error(n(90));_e(S),zt(S,O)}}}break;case"textarea":Di(l,w);break;case"select":p=w.value,p!=null&&Ge(l,!!w.multiple,p,!1)}},Nl=km,Xn=Va;var MD={usingClientEntryPoint:!1,Events:[Tc,Vl,bf,rc,ei,km]},Vc={findFiberByHostInstance:ka,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DD={bundleType:Vc.bundleType,version:Vc.version,rendererPackageName:Vc.rendererPackageName,rendererConfig:Vc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=ef(l),l===null?null:l.stateNode},findFiberByHostInstance:Vc.findFiberByHostInstance||OD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{Tt=sh.inject(DD),vt=sh}catch{}}return ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MD,ai.createPortal=function(l,p){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gm(p))throw Error(n(200));return RD(l,p,null,w)},ai.createRoot=function(l,p){if(!Gm(l))throw Error(n(299));var w=!1,S="",O=M_;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(S=p.identifierPrefix),p.onRecoverableError!==void 0&&(O=p.onRecoverableError)),p=Um(l,1,!1,null,null,w,!1,S,O),l[Jo]=p.current,Ac(l.nodeType===8?l.parentNode:l),new Vm(p)},ai.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var p=l._reactInternals;if(p===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=ef(p),l=l===null?null:l.stateNode,l},ai.flushSync=function(l){return Va(l)},ai.hydrate=function(l,p,w){if(!ih(p))throw Error(n(200));return oh(null,l,p,!0,w)},ai.hydrateRoot=function(l,p,w){if(!Gm(l))throw Error(n(405));var S=w!=null&&w.hydratedSources||null,O=!1,D="",G=M_;if(w!=null&&(w.unstable_strictMode===!0&&(O=!0),w.identifierPrefix!==void 0&&(D=w.identifierPrefix),w.onRecoverableError!==void 0&&(G=w.onRecoverableError)),p=O_(p,null,l,1,w??null,O,!1,D,G),l[Jo]=p.current,Ac(l),S)for(l=0;l<S.length;l++)w=S[l],O=w._getVersion,O=O(w._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[w,O]:p.mutableSourceEagerHydrationData.push(w,O);return new rh(p)},ai.render=function(l,p,w){if(!ih(p))throw Error(n(200));return oh(null,l,p,!1,w)},ai.unmountComponentAtNode=function(l){if(!ih(l))throw Error(n(40));return l._reactRootContainer?(Va(function(){oh(null,null,l,!1,function(){l._reactRootContainer=null,l[Jo]=null})}),!0):!1},ai.unstable_batchedUpdates=km,ai.unstable_renderSubtreeIntoContainer=function(l,p,w,S){if(!ih(w))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return oh(l,p,w,!1,S)},ai.version="18.3.1-next-f1338f8080-20240426",ai}var z_;function cN(){if(z_)return Hm.exports;z_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hm.exports=zD(),Hm.exports}var $_;function $D(){if($_)return lh;$_=1;var t=cN();return lh.createRoot=t.createRoot,lh.hydrateRoot=t.hydrateRoot,lh}var HD=$D();const qD=ro(HD);var Vt=(t=>(t.HOME="HOME",t.BOOKING="BOOKING",t.CATALOG="CATALOG",t.CONTACT="CONTACT",t.CONFIRMATION="CONFIRMATION",t.LOYALTY="LOYALTY",t.ADMIN="ADMIN",t.GALLERY="GALLERY",t))(Vt||{}),WD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const KD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xt=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:c,...f},d)=>M.createElement("svg",{ref:d,...WD,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:`lucide lucide-${KD(t)}`,...f},[...e.map(([g,y])=>M.createElement(g,y)),...(Array.isArray(c)?c:[c])||[]]));return n.displayName=`${t}`,n},YD=xt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),XD=xt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),JD=xt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),ZD=xt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),dN=xt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),QD=xt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),e6=xt("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),t6=xt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),n6=xt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),fN=xt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),r6=xt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),i6=xt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),o6=xt("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),Zh=xt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),hN=xt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),s6=xt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),pN=xt("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),a6=xt("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),l6=xt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),u6=xt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),c6=xt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),d6=xt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),f6=xt("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),h6=xt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),p6=xt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),g6=xt("ScatterChart",[["circle",{cx:"7.5",cy:"7.5",r:".5",key:"1x97lo"}],["circle",{cx:"18.5",cy:"5.5",r:".5",key:"56iowl"}],["circle",{cx:"11.5",cy:"11.5",r:".5",key:"m9xkw9"}],["circle",{cx:"7.5",cy:"16.5",r:".5",key:"14ln9z"}],["circle",{cx:"17.5",cy:"14.5",r:".5",key:"14qxqt"}],["path",{d:"M3 3v18h18",key:"1s2lah"}]]),Ix=xt("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),gN=xt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),m6=xt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),v6=xt("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),y6=xt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),cd=xt("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),x6=xt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Vv=xt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Px=xt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),H_=xt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),w6=xt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),E6=xt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),hp=xt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b6=xt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),_6=({currentView:t,onChangeView:e})=>{const[n,r]=M.useState(!1),[i,o]=M.useState(!1);M.useEffect(()=>{const d=()=>{r(window.scrollY>50)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]);const a=`fixed w-full z-50 transition-all duration-300 ${n?"bg-white/90 backdrop-blur-md shadow-sm py-2":"bg-transparent py-4"}`,c=d=>`cursor-pointer font-medium tracking-wide transition-colors ${t===d?"text-stone-900 border-b-2 border-stone-800":n?"text-stone-600 hover:text-stone-900":"text-stone-800 hover:text-stone-600"}`,f=d=>{e(d),o(!1)};return k.jsxs("nav",{className:a,children:[k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"flex justify-between items-center h-16",children:[k.jsx("div",{className:"flex-shrink-0 flex items-center cursor-pointer",onClick:()=>f(Vt.HOME),children:k.jsxs("span",{className:"serif text-3xl font-bold italic tracking-tighter text-stone-900",children:["Tus3B ",k.jsx("span",{className:"text-stone-500 not-italic font-light text-xl ml-1",children:"Style"})]})}),k.jsxs("div",{className:"hidden md:flex space-x-12 items-center",children:[k.jsx("a",{onClick:()=>f(Vt.HOME),className:c(Vt.HOME),children:"Inicio"}),k.jsx("a",{onClick:()=>f(Vt.BOOKING),className:c(Vt.BOOKING),children:"Servicios & Reserva"}),k.jsx("a",{onClick:()=>f(Vt.CATALOG),className:c(Vt.CATALOG),children:"Perfumes (Decants)"}),k.jsx("button",{onClick:()=>f(Vt.BOOKING),className:"bg-stone-900 text-white px-6 py-2 rounded-full text-sm uppercase tracking-wider hover:bg-stone-800 transition shadow-lg",children:"Reservar"})]}),k.jsx("div",{className:"md:hidden flex items-center",children:k.jsx("button",{onClick:()=>o(!i),className:"text-stone-800 focus:outline-none",children:i?k.jsx(hp,{size:28}):k.jsx(s6,{size:28})})})]})}),i&&k.jsxs("div",{className:"md:hidden fixed inset-0 top-16 bg-white z-40 flex flex-col p-6 space-y-8 animate-in slide-in-from-right-10",children:[k.jsx("button",{onClick:()=>f(Vt.HOME),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:k.jsx("span",{children:"Inicio"})}),k.jsxs("button",{onClick:()=>f(Vt.BOOKING),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[k.jsx(Ix,{size:24}),k.jsx("span",{children:"Corte & Brushing"})]}),k.jsxs("button",{onClick:()=>f(Vt.CATALOG),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[k.jsx(cd,{size:24}),k.jsx("span",{children:"Perfumes"})]}),k.jsx("div",{className:"mt-auto pb-8",children:k.jsx("button",{onClick:()=>f(Vt.BOOKING),className:"w-full bg-stone-900 text-white py-4 rounded-xl text-center uppercase tracking-widest font-bold shadow-lg active:scale-95 transition-transform",children:"Agendar Cita"})})]})]})},A6=({onCtaClick:t})=>k.jsxs("div",{className:"relative h-screen min-h-[600px] w-full overflow-hidden",children:[k.jsxs("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/images/greici/greici-main-new.jpg')"},children:[k.jsx("div",{className:"absolute inset-0 bg-black/20 mix-blend-multiply"}),k.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-stone-900/60 via-transparent to-transparent"})]}),k.jsxs("div",{className:"relative h-full flex flex-col justify-center items-center text-center px-4",children:[k.jsx("h2",{className:"text-white text-base md:text-xl uppercase tracking-[0.3em] mb-4 font-light",children:"Belleza & Elegancia"}),k.jsxs("h1",{className:"text-white text-4xl md:text-7xl lg:text-8xl serif font-light mb-6 md:mb-8 max-w-4xl leading-tight",children:["Redefine Tu Estilo ",k.jsx("br",{})," ",k.jsx("span",{className:"italic",children:"Tu Esencia"})]}),k.jsx("p",{className:"text-stone-200 max-w-lg mx-auto text-lg mb-10 font-light",children:"Cortes profesionales a domicilio y perfumera de alta gama. Descubre nuestras ofertas de verano."}),k.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:k.jsx("button",{onClick:t,className:"px-8 py-4 bg-white text-stone-900 rounded-full font-bold uppercase tracking-widest hover:bg-stone-100 transition shadow-lg",children:"Reserva Tu Cita"})}),k.jsxs("div",{className:"mt-12 flex items-center justify-center space-x-8 text-white/90 text-sm font-medium",children:[k.jsxs("div",{className:"flex items-center bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10",children:[k.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),"Disponible Hoy"]}),k.jsxs("div",{className:"flex items-center bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10",children:[k.jsx("span",{className:"mr-1",children:"Desde"}),k.jsx("span",{className:"font-bold text-lg",children:"$7.000"})]})]})]})]}),ad="56984524774",hu=[{id:"cut-1",name:"Corte de Puntas / Flequillos",description:"Mantenimiento esencial para eliminar horquillas y sanear el cabello.",price:7e3,durationMin:30,includes:["Corte tcnico de puntas o flequillo","Sellado de puntas"]},{id:"cut-2",name:"Corte Bordado",description:"Elimina el frizz y puntas daadas sin afectar el largo de tu cabello.",price:1e4,durationMin:45,includes:["Corte con mquina bordadora","Limpieza de puntas"]},{id:"wash-1",name:"Lavado",description:"Lavado profesional refrescante.",price:5e3,durationMin:20,includes:["Shampoo profesional","Acondicionador"],homeServiceOnly:!0},{id:"massage-1",name:"Masaje Capilar",description:"Tratamiento profundo para hidratar y revitalizar tu cabello.",price:5e3,durationMin:30,includes:["Ampolla o crema de tratamiento","Masaje craneal"]},{id:"brushing-1",name:"Brushing",description:"Peinado profesional para dar volumen, brillo y movimiento.",price:14e3,durationMin:45,includes:["Secado","Modelado con cepillo"]},{id:"color-1",name:"Aplicacin de Tintura",description:"Aplicacin profesional de tu color (tintura no incluida).",price:1e4,durationMin:60,includes:["Aplicacin uniforme","Lavado final"],homeServiceOnly:!0}],C6=3e3,S6=30,T6=["Santiago Centro","uoa"],Su=[{id:"l1",brand:"Lancme",name:"La Vie Est Belle EDP",description:"La fragancia de la felicidad. Iris pallida, Jazmn Sambac y Azahar.",price5ml:6990,price10ml:12990,margin5ml:0,margin10ml:0,image:"/images/perfumes/la-vie-est-belle.png",notes:["Iris","Vainilla","Pralin"],category:"classic",stock:!1},{id:"l2",brand:"Carolina Herrera",name:"Good Girl EDP",description:"Audaz y sexy, elegante y enigmtica. El famoso tacn.",price5ml:7990,price10ml:14990,margin5ml:0,margin10ml:0,image:"/images/perfumes/good-girl.png",notes:["Tuberosa","Jazmn","Cacao"],category:"classic",stock:!1},{id:"l3",brand:"Lancme",name:"Idle EDP",description:"Para la mujer que suea a lo grande. Limpio y luminoso.",price5ml:6990,price10ml:12990,margin5ml:0,margin10ml:0,image:"/images/perfumes/idole.png",notes:["Rosa","Jazmn","Chipre Blanco"],category:"classic",stock:!1},{id:"l4",brand:"Giorgio Armani",name:"Acqua Di Gioia EDP",description:"La esencia de la alegra. Fresco, acutico y ctrico.",price5ml:6990,price10ml:12990,margin5ml:0,margin10ml:0,image:"/images/perfumes/acqua-di-gioia.png",notes:["Limn","Menta","Jazmn de Agua"],category:"classic",stock:!1},{id:"l5",brand:"Yves Saint Laurent",name:"Black Opium EDP",description:"Adrenalina y energa. Caf negro y flores blancas.",price5ml:7990,price10ml:14990,margin5ml:0,margin10ml:0,image:"/images/perfumes/black-opium.png",notes:["Caf","Vainilla","Flores Blancas"],category:"classic",stock:!1},{id:"l6",brand:"Dolce & Gabbana",name:"Light Blue EDT",description:"La alegra de vivir el Mediterrneo. Fresco y frutal.",price5ml:5990,price10ml:9990,margin5ml:0,margin10ml:0,image:"/images/perfumes/light-blue.png",notes:["Limn Siciliano","Manzana","Cedro"],category:"classic",stock:!1},{id:"a1",brand:"Lattafa",name:"Yara (Rosa) EDP",description:"El viral de TikTok. Dulce, cremoso y adictivo.",price5ml:5990,price10ml:8990,margin5ml:2803,margin10ml:4616,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-yara-rosa.png",secondaryImage:"/images/perfumes/yara-rosa-notes.jpg",notes:["Orqudea","Heliotropo","Frutas Tropicales"],category:"arab"},{id:"a2",brand:"Lattafa",name:"Yara Tous",description:"La versin tropical y solar de Yara. Mango y maracuy.",price5ml:5990,price10ml:8990,margin5ml:2850,margin10ml:4711,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-yara-tous.png",secondaryImage:"/images/perfumes/yara-tous-notes.jpg",notes:["Mango","Coco","Vainilla"],category:"arab"},{id:"a3",brand:"Lattafa",name:"Rave Now Women",description:"Dulce, frutal y vibrante. Energa pura en una botella.",price5ml:4990,price10ml:7990,margin5ml:2040,margin10ml:4091,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-rave-now-women.png",notes:["Frutas Rojas","Malvavisco","Almizcle"],category:"arab"},{id:"a4",brand:"Fragrance World",name:"Valentia Rome Intense",description:"Inspirada en el lujo italiano. Floral y moderna.",price5ml:5990,price10ml:8990,margin5ml:2898,margin10ml:4806,stock:!0,priceFullBottle:29990,image:"/images/perfumes/fw-valentia-rome.png",notes:["Jazmn","Grosella Negra","Vainilla Bourbon"],category:"arab"},{id:"a5",brand:"Maison Alhambra",name:"Leonie EDP",description:"Elegancia y sofisticacin. Una fragancia que impone presencia.",price5ml:4990,price10ml:6990,margin5ml:2183,margin10ml:3376,stock:!0,priceFullBottle:27990,image:"/images/perfumes/maison-alhambra-leonie.png",notes:["Floral","mbar","Vainilla"],category:"arab"},{id:"a6",brand:"Lattafa",name:"Ana Abiyedh",description:"Limpio, almizclado y frutal. Un aroma que dura todo el da.",price5ml:6990,price10ml:9990,margin5ml:3487,margin10ml:4983,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-ana-abiyedh.png",notes:["Almizcle Blanco","Pera","Bergamota"],category:"arab"},{id:"a7",brand:"Maison Alhambra",name:"Bad Femme",description:"Atrevida y seductora. Ideal para la noche.",price5ml:4990,price10ml:6990,margin5ml:2135,margin10ml:3281,stock:!0,priceFullBottle:27990,image:"/images/perfumes/maison-alhambra-bad-femme.png",notes:["Tuberosa","Jazmn","Cacao"],category:"arab"},{id:"d1",brand:"Lattafa",name:"Yara Desodorante Spray",description:"El complemento perfecto para tu perfume Yara.",price5ml:0,price10ml:0,margin5ml:0,margin10ml:0,stock:!0,priceFullBottle:5990,isSpray:!0,image:"/images/perfumes/yara-spray.png",notes:["Tropical","Dulce","Cremoso"],category:"arab"},{id:"d2",brand:"Lattafa",name:"Qaed Al Fursan Desodorante",description:"Fresco, pia ahumada y maderas.",price5ml:0,price10ml:0,margin5ml:0,margin10ml:0,stock:!0,priceFullBottle:5990,isSpray:!0,image:"/images/perfumes/qaed-al-fursan-spray.png",notes:["Pia","Musgo","Azafrn"],category:"arab"},{id:"a8",brand:"Armaf",name:"Club de Nuit Intense Woman EDP",description:"Un chipre floral intenso y elegante. Misterioso.",price5ml:5990,price10ml:8990,margin5ml:0,margin10ml:0,image:"/images/perfumes/club-de-nuit-intense-woman.png",notes:["Rosa","Azafrn","Geranio"],category:"arab",stock:!1},{id:"a9",brand:"Lattafa",name:"Eclaire EDP",description:"Dulce y envolvente, con notas gourmand irresistibles.",price5ml:5990,price10ml:8990,margin5ml:0,margin10ml:0,image:"/images/perfumes/lattafa-eclaire.png",notes:["Caramelo","Leche","Miel"],category:"arab",stock:!1},{id:"a10",brand:"Armaf",name:"Club de Nuit Untold EDP",description:"El dupe perfecto de Baccarat Rouge 540. Lujoso y dulce.",price5ml:6990,price10ml:9990,margin5ml:0,margin10ml:0,image:"/images/perfumes/club-de-nuit-untold.png",notes:["Azafrn","Jazmn","Amberwood"],category:"arab",stock:!1},{id:"a11",brand:"Lattafa",name:"Khamrah EDP",description:"Clido y especiado. Canela, dtiles y pralin.",price5ml:6990,price10ml:9990,margin5ml:0,margin10ml:0,image:"/images/perfumes/lattafa-khamrah.png",notes:["Canela","Dtiles","Pralin"],category:"arab",stock:!1},{id:"a12",brand:"Armaf",name:"Club de Nuit Imperiale",description:"Floral, fresco y frutal. Elegancia moderna.",price5ml:5990,price10ml:8990,margin5ml:0,margin10ml:0,image:"/images/perfumes/club-de-nuit-imperiale.png",notes:["Litchi","Bergamota","Rosa Turca"],category:"arab",stock:!1}],q_=[{id:"1",url:"/images/greici/greici-portrait.jpg",category:"Cortes",description:"Estilista Greici Nataly"},{id:"2",url:"/images/greici/greici-salon-wide.jpg",category:"Color",description:"Atencin Personalizada"},{id:"3",url:"/images/greici/greici-back-view.jpg",category:"Cortes",description:"Acabados Perfectos"},{id:"4",url:"/images/greici/greici-red-shirt.jpg",category:"Cortes",description:"Precisin y Estilo"},{id:"5",url:"/images/greici/greici-side-work.jpg",category:"Color",description:"Tcnica Profesional"}],I6=[{id:"r1",name:"Maria Paz",rating:5,comment:"Me encant el servicio, muy profesionales y puntuales. El corte que me hicieron fue exactamente lo que peda.",date:"Hace 2 semanas"},{id:"r2",name:"Carla S.",rating:5,comment:"Increble la atencin a domicilio. Todo muy limpio y ordenado, y los perfumes huelen delicioso. Totalmente recomendada.",date:"Hace 1 mes"},{id:"r3",name:"Valentina R.",rating:5,comment:"Compr el Lattafa Yara y es exquisito, lleg super rpido. Adems aprovech de hacerme un masaje capilar y qued como nueva.",date:"Hace 3 semanas"},{id:"r4",name:"Isidora M.",rating:5,comment:"Excelente experiencia con Tus3B. La calidad de los productos y la dedicacin en el servicio se notan. Volver a comprar seguro.",date:"Hace 1 mes"},{id:"r5",name:"Fernanda L.",rating:5,comment:"Muy buena disposicin y asesora para elegir mi perfume. Los precios son muy convenientes para la calidad que ofrecen.",date:"Hace 2 semanas"},{id:"r6",name:"Camila J.",rating:4,comment:"Todo super bien, el perfume lleg en perfecto estado. Solo demor un poquito ms de lo esperado la coordinacin, pero la atencin un 7.",date:"Hace 1 mes"}];var os={},uh={},Gv=function(t,e){return Gv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Gv(t,e)};function mN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gv(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Qh=function(){return Qh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Qh.apply(this,arguments)};function Fu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function vN(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function yN(t,e){return function(n,r){e(n,r,t)}}function xN(t,e,n,r,i,o){function a(L){if(L!==void 0&&typeof L!="function")throw new TypeError("Function expected");return L}for(var c=r.kind,f=c==="getter"?"get":c==="setter"?"set":"value",d=!e&&t?r.static?t:t.prototype:null,g=e||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),y,E=!1,C=n.length-1;C>=0;C--){var I={};for(var P in r)I[P]=P==="access"?{}:r[P];for(var P in r.access)I.access[P]=r.access[P];I.addInitializer=function(L){if(E)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(L||null))};var N=(0,n[C])(c==="accessor"?{get:g.get,set:g.set}:g[f],I);if(c==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(y=a(N.get))&&(g.get=y),(y=a(N.set))&&(g.set=y),(y=a(N.init))&&i.unshift(y)}else(y=a(N))&&(c==="field"?i.unshift(y):g[f]=y)}d&&Object.defineProperty(d,r.name,g),E=!0}function wN(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function EN(t){return typeof t=="symbol"?t:"".concat(t)}function bN(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function _N(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function qe(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(g){try{d(r.next(g))}catch(y){a(y)}}function f(g){try{d(r.throw(g))}catch(y){a(y)}}function d(g){g.done?o(g.value):i(g.value).then(c,f)}d((r=r.apply(t,e||[])).next())})}function AN(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(g){return f([d,g])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(g){d=[6,g],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var pp=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function CN(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&pp(e,t,n)}function e0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nx(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function SN(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Nx(arguments[e]));return t}function TN(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,c=o.length;a<c;a++,i++)r[i]=o[a];return r}function IN(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Tu(t){return this instanceof Tu?(this.v=t,this):new Tu(t)}function PN(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(C){return function(I){return Promise.resolve(I).then(C,y)}}function c(C,I){r[C]&&(i[C]=function(P){return new Promise(function(N,L){o.push([C,P,N,L])>1||f(C,P)})},I&&(i[C]=I(i[C])))}function f(C,I){try{d(r[C](I))}catch(P){E(o[0][3],P)}}function d(C){C.value instanceof Tu?Promise.resolve(C.value.v).then(g,y):E(o[0][2],C)}function g(C){f("next",C)}function y(C){f("throw",C)}function E(C,I){C(I),o.shift(),o.length&&f(o[0][0],o[0][1])}}function NN(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=t[i]?function(a){return(n=!n)?{value:Tu(t[i](a)),done:!1}:o?o(a):a}:o}}function RN(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof e0=="function"?e0(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(c,f){a=t[o](a),i(c,f,a.done,a.value)})}}function i(o,a,c,f){Promise.resolve(f).then(function(d){o({value:d,done:c})},a)}}function ON(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var P6=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},zv=function(t){return zv=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},zv(t)};function kN(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=zv(t),r=0;r<n.length;r++)n[r]!=="default"&&pp(e,t,n[r]);return P6(e,t),e}function MN(t){return t&&t.__esModule?t:{default:t}}function DN(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function LN(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function BN(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function FN(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var N6=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function UN(t){function e(o){t.error=t.hasError?new N6(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(i,function(a){return e(a),i()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function jN(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,o,a){return r?e?".jsx":".js":i&&(!o||!a)?n:i+o+"."+a.toLowerCase()+"js"}):t}const R6={__extends:mN,__assign:Qh,__rest:Fu,__decorate:vN,__param:yN,__esDecorate:xN,__runInitializers:wN,__propKey:EN,__setFunctionName:bN,__metadata:_N,__awaiter:qe,__generator:AN,__createBinding:pp,__exportStar:CN,__values:e0,__read:Nx,__spread:SN,__spreadArrays:TN,__spreadArray:IN,__await:Tu,__asyncGenerator:PN,__asyncDelegator:NN,__asyncValues:RN,__makeTemplateObject:ON,__importStar:kN,__importDefault:MN,__classPrivateFieldGet:DN,__classPrivateFieldSet:LN,__classPrivateFieldIn:BN,__addDisposableResource:FN,__disposeResources:UN,__rewriteRelativeImportExtension:jN},O6=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:FN,get __assign(){return Qh},__asyncDelegator:NN,__asyncGenerator:PN,__asyncValues:RN,__await:Tu,__awaiter:qe,__classPrivateFieldGet:DN,__classPrivateFieldIn:BN,__classPrivateFieldSet:LN,__createBinding:pp,__decorate:vN,__disposeResources:UN,__esDecorate:xN,__exportStar:CN,__extends:mN,__generator:AN,__importDefault:MN,__importStar:kN,__makeTemplateObject:ON,__metadata:_N,__param:yN,__propKey:EN,__read:Nx,__rest:Fu,__rewriteRelativeImportExtension:jN,__runInitializers:wN,__setFunctionName:bN,__spread:SN,__spreadArray:IN,__spreadArrays:TN,__values:e0,default:R6},Symbol.toStringTag,{value:"Module"})),k6=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let gp=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},VN=class extends gp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},$v=class extends gp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Hv=class extends gp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var t0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(t0||(t0={}));class M6{constructor(e,{headers:n={},customFetch:r,region:i=t0.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=k6(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return qe(this,arguments,void 0,function*(n,r={}){var i;let o,a;try{const{headers:c,method:f,body:d,signal:g,timeout:y}=r;let E={},{region:C}=r;C||(C=this.region);const I=new URL(`${this.url}/${n}`);C&&C!=="any"&&(E["x-region"]=C,I.searchParams.set("forceFunctionRegion",C));let P;d&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",P=d):typeof d=="string"?(E["Content-Type"]="text/plain",P=d):typeof FormData<"u"&&d instanceof FormData?P=d:(E["Content-Type"]="application/json",P=JSON.stringify(d)):P=d;let N=g;y&&(a=new AbortController,o=setTimeout(()=>a.abort(),y),g?(N=a.signal,g.addEventListener("abort",()=>a.abort())):N=a.signal);const L=yield this.fetch(I.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),c),body:P,signal:N}).catch(q=>{throw new VN(q)}),U=L.headers.get("x-relay-error");if(U&&U==="true")throw new $v(L);if(!L.ok)throw new Hv(L);let F=((i=L.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),z;return F==="application/json"?z=yield L.json():F==="application/octet-stream"||F==="application/pdf"?z=yield L.blob():F==="text/event-stream"?z=L:F==="multipart/form-data"?z=yield L.formData():z=yield L.text(),{data:z,error:null,response:L}}catch(c){return{data:null,error:c,response:c instanceof Hv||c instanceof $v?c.context:void 0}}finally{o&&clearTimeout(o)}})}}const D6=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return t0},FunctionsClient:M6,FunctionsError:gp,FunctionsFetchError:VN,FunctionsHttpError:Hv,FunctionsRelayError:$v},Symbol.toStringTag,{value:"Module"})),GN=Id(D6);var Ur={};const Uu=Id(O6);var ch={},dh={},fh={},hh={},ph={},gh={},W_;function zN(){if(W_)return gh;W_=1,Object.defineProperty(gh,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return gh.default=t,gh}var K_;function $N(){if(K_)return ph;K_=1,Object.defineProperty(ph,"__esModule",{value:!0});const e=Uu.__importDefault(zN());let n=class{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let c=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var d,g,y,E;let C=null,I=null,P=null,N=f.status,L=f.statusText;if(f.ok){if(this.method!=="HEAD"){const q=await f.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?I=q:I=JSON.parse(q))}const F=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),z=(y=f.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");F&&z&&z.length>1&&(P=parseInt(z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(I)&&(I.length>1?(C={code:"PGRST116",details:`Results contain ${I.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},I=null,P=null,N=406,L="Not Acceptable"):I.length===1?I=I[0]:I=null)}else{const F=await f.text();try{C=JSON.parse(F),Array.isArray(C)&&f.status===404&&(I=[],C=null,N=200,L="OK")}catch{f.status===404&&F===""?(N=204,L="No Content"):C={message:F}}if(C&&this.isMaybeSingle&&(!((E=C?.details)===null||E===void 0)&&E.includes("0 rows"))&&(C=null,N=200,L="OK"),C&&this.shouldThrowOnError)throw new e.default(C)}return{error:C,data:I,count:P,status:N,statusText:L}});return this.shouldThrowOnError||(c=c.catch(f=>{var d,g,y,E,C,I;let P="";const N=f?.cause;if(N){const L=(d=N?.message)!==null&&d!==void 0?d:"",U=(g=N?.code)!==null&&g!==void 0?g:"";P=`${(y=f?.name)!==null&&y!==void 0?y:"FetchError"}: ${f?.message}`,P+=`

Caused by: ${(E=N?.name)!==null&&E!==void 0?E:"Error"}: ${L}`,U&&(P+=` (${U})`),N?.stack&&(P+=`
${N.stack}`)}else P=(C=f?.stack)!==null&&C!==void 0?C:"";return{error:{message:`${(I=f?.name)!==null&&I!==void 0?I:"FetchError"}: ${f?.message}`,details:P,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(i,o)}returns(){return this}overrideTypes(){return this}};return ph.default=n,ph}var Y_;function HN(){if(Y_)return hh;Y_=1,Object.defineProperty(hh,"__esModule",{value:!0});const e=Uu.__importDefault($N());let n=class extends e.default{select(i){let o=!1;const a=(i??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:c,referencedTable:f=c}={}){const d=f?`${f}.order`:"order",g=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${g?`${g},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:c=a}={}){const f=typeof c>"u"?"offset":`${c}.offset`,d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${i}`),this.url.searchParams.set(d,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:c=!1,wal:f=!1,format:d="text"}={}){var g;const y=[i?"analyze":null,o?"verbose":null,a?"settings":null,c?"buffers":null,f?"wal":null].filter(Boolean).join("|"),E=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${E}"; options=${y};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return hh.default=n,hh}var X_;function Rx(){if(X_)return fh;X_=1,Object.defineProperty(fh,"__esModule",{value:!0});const e=Uu.__importDefault(HN()),n=new RegExp("[,()]");let r=class extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}regexMatch(o,a){return this.url.searchParams.append(o,`match.${a}`),this}regexIMatch(o,a){return this.url.searchParams.append(o,`imatch.${a}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}isDistinct(o,a){return this.url.searchParams.append(o,`isdistinct.${a}`),this}in(o,a){const c=Array.from(new Set(a)).map(f=>typeof f=="string"&&n.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${c})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:c,type:f}={}){let d="";f==="plain"?d="pl":f==="phrase"?d="ph":f==="websearch"&&(d="w");const g=c===void 0?"":`(${c})`;return this.url.searchParams.append(o,`${d}fts${g}.${a}`),this}match(o){return Object.entries(o).forEach(([a,c])=>{this.url.searchParams.append(a,`eq.${c}`)}),this}not(o,a,c){return this.url.searchParams.append(o,`not.${a}.${c}`),this}or(o,{foreignTable:a,referencedTable:c=a}={}){const f=c?`${c}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,a,c){return this.url.searchParams.append(o,`${a}.${c}`),this}};return fh.default=r,fh}var J_;function qN(){if(J_)return dh;J_=1,Object.defineProperty(dh,"__esModule",{value:!0});const e=Uu.__importDefault(Rx());let n=class{constructor(i,{headers:o={},schema:a,fetch:c}){this.url=i,this.headers=new Headers(o),this.schema=a,this.fetch=c}select(i,o){const{head:a=!1,count:c}=o??{},f=a?"HEAD":"GET";let d=!1;const g=(i??"*").split("").map(y=>/\s/.test(y)&&!d?"":(y==='"'&&(d=!d),y)).join("");return this.url.searchParams.set("select",g),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:a=!0}={}){var c;const f="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(d.length>0){const g=[...new Set(d)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:c,defaultToNull:f=!0}={}){var d;const g="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),c&&this.headers.append("Prefer",`count=${c}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const y=i.reduce((E,C)=>E.concat(Object.keys(C)),[]);if(y.length>0){const E=[...new Set(y)].map(C=>`"${C}"`);this.url.searchParams.set("columns",E.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:o}={}){var a;const c="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var o;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};return dh.default=n,dh}var Z_;function L6(){if(Z_)return ch;Z_=1,Object.defineProperty(ch,"__esModule",{value:!0});const t=Uu,e=t.__importDefault(qN()),n=t.__importDefault(Rx());let r=class WN{constructor(o,{headers:a={},schema:c,fetch:f}={}){this.url=o,this.headers=new Headers(a),this.schemaName=c,this.fetch=f}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new WN(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:c=!1,get:f=!1,count:d}={}){var g;let y;const E=new URL(`${this.url}/rpc/${o}`);let C;c||f?(y=c?"HEAD":"GET",Object.entries(a).filter(([P,N])=>N!==void 0).map(([P,N])=>[P,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([P,N])=>{E.searchParams.append(P,N)})):(y="POST",C=a);const I=new Headers(this.headers);return d&&I.set("Prefer",`count=${d}`),new n.default({method:y,url:E,headers:I,schema:this.schemaName,body:C,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}};return ch.default=r,ch}var Q_;function KN(){if(Q_)return Ur;Q_=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.PostgrestError=Ur.PostgrestBuilder=Ur.PostgrestTransformBuilder=Ur.PostgrestFilterBuilder=Ur.PostgrestQueryBuilder=Ur.PostgrestClient=void 0;const t=Uu,e=t.__importDefault(L6());Ur.PostgrestClient=e.default;const n=t.__importDefault(qN());Ur.PostgrestQueryBuilder=n.default;const r=t.__importDefault(Rx());Ur.PostgrestFilterBuilder=r.default;const i=t.__importDefault(HN());Ur.PostgrestTransformBuilder=i.default;const o=t.__importDefault($N());Ur.PostgrestBuilder=o.default;const a=t.__importDefault(zN());return Ur.PostgrestError=a.default,Ur.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:a.default},Ur}class YN{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const B6="2.87.1",F6=`realtime-js/${B6}`,XN="1.0.0",U6="2.0.0",e2=XN,qv=1e4,j6=1e3,V6=100;var el;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(el||(el={}));var $n;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})($n||($n={}));var vo;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(vo||(vo={}));var Wv;(function(t){t.websocket="websocket"})(Wv||(Wv={}));var tl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(tl||(tl={}));class G6{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,o;const a=e.topic,c=(i=e.ref)!==null&&i!==void 0?i:"",f=(o=e.join_ref)!==null&&o!==void 0?o:"",d=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+c.length+a.length+d.length+y.length,C=new ArrayBuffer(this.HEADER_LENGTH+E);let I=new DataView(C),P=0;I.setUint8(P++,this.KINDS.userBroadcastPush),I.setUint8(P++,f.length),I.setUint8(P++,c.length),I.setUint8(P++,a.length),I.setUint8(P++,d.length),I.setUint8(P++,y.length),I.setUint8(P++,n),Array.from(f,L=>I.setUint8(P++,L.charCodeAt(0))),Array.from(c,L=>I.setUint8(P++,L.charCodeAt(0))),Array.from(a,L=>I.setUint8(P++,L.charCodeAt(0))),Array.from(d,L=>I.setUint8(P++,L.charCodeAt(0))),Array.from(y,L=>I.setUint8(P++,L.charCodeAt(0)));var N=new Uint8Array(C.byteLength+r.byteLength);return N.set(new Uint8Array(C),0),N.set(new Uint8Array(r),C.byteLength),N.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,a,c,f]=r;return n({join_ref:i,ref:o,topic:a,event:c,payload:f})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),c=n.getUint8(4);let f=this.HEADER_LENGTH+4;const d=r.decode(e.slice(f,f+i));f=f+i;const g=r.decode(e.slice(f,f+o));f=f+o;const y=r.decode(e.slice(f,f+a));f=f+a;const E=e.slice(f,e.byteLength),C=c===this.JSON_ENCODING?JSON.parse(r.decode(E)):E,I={type:this.BROADCAST_EVENT,event:g,payload:C};return a>0&&(I.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:I}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class JN{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var on;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(on||(on={}));const t2=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=z6(a,t,e,i),o),{}):{}},z6=(t,e,n,r)=>{const i=e.find(c=>c.name===t),o=i?.type,a=n[t];return o&&!r.includes(o)?ZN(o,a):Kv(a)},ZN=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return W6(e,n)}switch(t){case on.bool:return $6(e);case on.float4:case on.float8:case on.int2:case on.int4:case on.int8:case on.numeric:case on.oid:return H6(e);case on.json:case on.jsonb:return q6(e);case on.timestamp:return K6(e);case on.abstime:case on.date:case on.daterange:case on.int4range:case on.int8range:case on.money:case on.reltime:case on.text:case on.time:case on.timestamptz:case on.timetz:case on.tsrange:case on.tstzrange:return Kv(e);default:return Kv(e)}},Kv=t=>t,$6=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},H6=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},q6=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},W6=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(c=>ZN(e,c))}return t},K6=t=>typeof t=="string"?t.replace(" ","T"):t,QN=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Km{constructor(e,n,r={},i=qv){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Yv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Yv||(Yv={}));let eR=class Vh{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vh.syncState(this.state,i,o,a),this.pendingDiffs.forEach(f=>{this.state=Vh.syncDiff(this.state,f,o,a)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Vh.syncDiff(this.state,i,o,a),c())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),a=this.transformState(n),c={},f={};return this.map(o,(d,g)=>{a[d]||(f[d]=g)}),this.map(a,(d,g)=>{const y=o[d];if(y){const E=g.map(N=>N.presence_ref),C=y.map(N=>N.presence_ref),I=g.filter(N=>C.indexOf(N.presence_ref)<0),P=y.filter(N=>E.indexOf(N.presence_ref)<0);I.length>0&&(c[d]=I),P.length>0&&(f[d]=P)}else c[d]=g}),this.syncDiff(o,{joins:c,leaves:f},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(c,f)=>{var d;const g=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(f),g.length>0){const y=e[c].map(C=>C.presence_ref),E=g.filter(C=>y.indexOf(C.presence_ref)<0);e[c].unshift(...E)}r(c,g,f)}),this.map(a,(c,f)=>{let d=e[c];if(!d)return;const g=f.map(y=>y.presence_ref);d=d.filter(y=>g.indexOf(y.presence_ref)<0),e[c]=d,i(c,d,f),d.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Xv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Xv||(Xv={}));var wu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(wu||(wu={}));var Fo;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Fo||(Fo={}));const Y6=$n;let tR=class ed{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=$n.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Km(this,vo.join,this.params,this.timeout),this.rejoinTimer=new JN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$n.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$n.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=$n.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$n.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=$n.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vo.reply,{},(a,c)=>{this._trigger(this._replyEventName(c),a)}),this.presence=new eR(this),this.broadcastEndpointURL=QN(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==$n.closed){const{config:{broadcast:a,presence:c,private:f}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(C=>C.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[wu.PRESENCE]&&this.bindings[wu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,y={},E={broadcast:a,presence:Object.assign(Object.assign({},c),{enabled:g}),postgres_changes:d,private:f};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(C=>e?.(Fo.CHANNEL_ERROR,C)),this._onClose(()=>e?.(Fo.CLOSED)),this.updateJoinPayload(Object.assign({config:E},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:C})=>{var I;if(this.socket._isManualToken()||this.socket.setAuth(),C===void 0){e?.(Fo.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,N=(I=P?.length)!==null&&I!==void 0?I:0,L=[];for(let U=0;U<N;U++){const F=P[U],{filter:{event:z,schema:q,table:H,filter:W}}=F,Z=C&&C[U];if(Z&&Z.event===z&&ed.isFilterValueEqual(Z.schema,q)&&ed.isFilterValueEqual(Z.table,H)&&ed.isFilterValueEqual(Z.filter,W))L.push(Object.assign(Object.assign({},F),{id:Z.id}));else{this.unsubscribe(),this.state=$n.errored,e?.(Fo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,e&&e(Fo.SUBSCRIBED);return}}).receive("error",C=>{this.state=$n.errored,e?.(Fo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{e?.(Fo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===$n.joined&&e===wu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let f=c.statusText;try{const d=await c.json();f=d.error||d.message||f}catch{}return Promise.reject(new Error(f))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,c,f;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=$n.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vo.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Km(this,vo.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=$n.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Km(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>V6){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const a=e.toLocaleLowerCase(),{close:c,error:f,leave:d,join:g}=vo;if(r&&[c,f,d,g].indexOf(a)>=0&&r!==this._joinRef())return;let E=this._onMessage(a,n,r);if(n&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(C=>{var I,P,N;return((I=C.filter)===null||I===void 0?void 0:I.event)==="*"||((N=(P=C.filter)===null||P===void 0?void 0:P.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===a}).map(C=>C.callback(E,r)):(o=this.bindings[a])===null||o===void 0||o.filter(C=>{var I,P,N,L,U,F;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in C){const z=C.id,q=(I=C.filter)===null||I===void 0?void 0:I.event;return z&&((P=n.ids)===null||P===void 0?void 0:P.includes(z))&&(q==="*"||q?.toLocaleLowerCase()===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const z=(U=(L=C?.filter)===null||L===void 0?void 0:L.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return z==="*"||z===((F=n?.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===a}).map(C=>{if(typeof E=="object"&&"ids"in E){const I=E.data,{schema:P,table:N,commit_timestamp:L,type:U,errors:F}=I;E=Object.assign(Object.assign({},{schema:P,table:N,commit_timestamp:L,eventType:U,new:{},old:{},errors:F}),this._getPayloadRecords(I))}C.callback(E,r)})}_isClosed(){return this.state===$n.closed}_isJoined(){return this.state===$n.joined}_isJoining(){return this.state===$n.joining}_isLeaving(){return this.state===$n.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&ed.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vo.close,{},e)}_onError(e){this._on(vo.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$n.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=t2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=t2(e.columns,e.old_record)),n}};const Ym=()=>{},mh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},X6=[1e3,2e3,5e3,1e4],J6=1e4,Z6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let Q6=class{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qv,this.transport=null,this.heartbeatIntervalMs=mh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ym,this.ref=0,this.reconnectTimer=null,this.vsn=e2,this.logger=Ym,this.conn=null,this.sendBuffer=[],this.serializer=new G6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Wv.websocket}`,this.httpEndpoint=QN(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=YN.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case el.connecting:return tl.Connecting;case el.open:return tl.Open;case el.closing:return tl.Closing;default:return tl.Closed}}isConnected(){return this.connectionState()===tl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new tR(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,a=()=>{this.encode(e,c=>{var f;(f=this.conn)===null||f===void 0||f.send(c)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(j6,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},mh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:a}=n,c=a?`(${a})`:"",f=o.status||"";this.log("receive",`${f} ${r} ${i} ${c}`.trim(),o),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===el.open||this.conn.readyState===el.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(vo.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Z6],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:F6};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(vo.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new JN(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},mh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,a,c,f,d,g,y,E,C;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:qv,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:mh.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(c=e?.heartbeatCallback)!==null&&c!==void 0?c:Ym,this.vsn=(f=e?.vsn)!==null&&f!==void 0?f:e2,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e?.reconnectAfterMs)!==null&&d!==void 0?d:(I=>X6[I-1]||J6),this.vsn){case XN:this.encode=(g=e?.encode)!==null&&g!==void 0?g:((I,P)=>P(JSON.stringify(I))),this.decode=(y=e?.decode)!==null&&y!==void 0?y:((I,P)=>P(JSON.parse(I)));break;case U6:this.encode=(E=e?.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(C=e?.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};const eL=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:Y6,get REALTIME_LISTEN_TYPES(){return wu},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Xv},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Yv},get REALTIME_SUBSCRIBE_STATES(){return Fo},RealtimeChannel:tR,RealtimeClient:Q6,RealtimePresence:eR,WebSocketFactory:YN},Symbol.toStringTag,{value:"Module"})),nR=Id(eL);class Pd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class rR extends Pd{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class n0 extends Pd{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Ox=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),tL=()=>Response,Jv=t=>{if(Array.isArray(t))return t.map(n=>Jv(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Jv(r)}),e},nL=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},rL=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Xm=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},iL=(t,e,n)=>qe(void 0,void 0,void 0,function*(){const r=yield tL();t instanceof r&&!n?.noResolveJson?t.json().then(i=>{const o=t.status||500,a=i?.statusCode||o+"";e(new rR(Xm(i),o,a))}).catch(i=>{e(new n0(Xm(i),i))}):e(new n0(Xm(t),t))}),oL=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!r?i:(nL(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Nd(t,e,n,r,i,o){return qe(this,void 0,void 0,function*(){return new Promise((a,c)=>{t(n,oL(e,r,i,o)).then(f=>{if(!f.ok)throw f;return r?.noResolveJson?f:f.json()}).then(f=>a(f)).catch(f=>iL(f,c,r))})})}function dd(t,e,n,r){return qe(this,void 0,void 0,function*(){return Nd(t,"GET",e,n,r)})}function mo(t,e,n,r,i){return qe(this,void 0,void 0,function*(){return Nd(t,"POST",e,r,i,n)})}function Zv(t,e,n,r,i){return qe(this,void 0,void 0,function*(){return Nd(t,"PUT",e,r,i,n)})}function sL(t,e,n,r){return qe(this,void 0,void 0,function*(){return Nd(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function kx(t,e,n,r,i){return qe(this,void 0,void 0,function*(){return Nd(t,"DELETE",e,r,i,n)})}class aL{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return qe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pn(e))return{data:null,error:e};throw e}})}}var iR;class lL{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[iR]="BlobDownloadBuilder",this.promise=null}asStream(){return new aL(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return qe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pn(e))return{data:null,error:e};throw e}})}}iR=Symbol.toStringTag;const uL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},n2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cL{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Ox(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return qe(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},n2),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const f=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),f&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(f))):(o=r,c["cache-control"]=`max-age=${a.cacheControl}`,c["content-type"]=a.contentType,f&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(f))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),i?.headers&&(c=Object.assign(Object.assign({},c),i.headers));const d=this._removeEmptyFolders(n),g=this._getFinalPath(d),y=yield(e=="PUT"?Zv:mo)(this.fetch,`${this.url}/object/${g}`,o,Object.assign({headers:c},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:y.Id,fullPath:y.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(pn(o))return{data:null,error:o};throw o}})}upload(e,n,r){return qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return qe(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${a}`);c.searchParams.set("token",n);try{let f;const d=Object.assign({upsert:n2.upsert},i),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",d.cacheControl)):(f=r,g["cache-control"]=`max-age=${d.cacheControl}`,g["content-type"]=d.contentType);const y=yield Zv(this.fetch,c.toString(),f,{headers:g});return{data:{path:o,fullPath:y.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(pn(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,n){return qe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const o=yield mo(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+o.url),c=a.searchParams.get("token");if(!c)throw new Pd("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}})}update(e,n,r){return qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return qe(this,void 0,void 0,function*(){try{return{data:yield mo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}copy(e,n,r){return qe(this,void 0,void 0,function*(){try{return{data:{path:(yield mo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return qe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield mo(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return qe(this,void 0,void 0,function*(){try{const i=yield mo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),a=o?`?${o}`:"",c=this._getFinalPath(e),f=()=>dd(this.fetch,`${this.url}/${i}/${c}${a}`,{headers:this.headers,noResolveJson:!0});return new lL(f,this.shouldThrowOnError)}info(e){return qe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield dd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Jv(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}})}exists(e){return qe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield sL(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r)&&r instanceof n0){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const c=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&i.push(f);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(e){return qe(this,void 0,void 0,function*(){try{return{data:yield kx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}list(e,n,r){return qe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},uL),n),{prefix:e||""});return{data:yield mo(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}listV2(e,n){return qe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield mo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const oR="2.87.1",sR={"X-Client-Info":`storage-js/${oR}`};class dL{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sR),n),this.fetch=Ox(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return qe(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield dd(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}getBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield dd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}createBucket(e){return qe(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield mo(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return qe(this,void 0,void 0,function*(){try{return{data:yield Zv(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield mo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield kx(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var fd=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function fL(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function hL(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function pL(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:a}){const c=fL(t.baseUrl,r,i),f=await hL(t.auth),d=await e(c,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...f,...a},body:o?JSON.stringify(o):void 0}),g=await d.text(),y=(d.headers.get("content-type")||"").includes("application/json"),E=y&&g?JSON.parse(g):g;if(!d.ok){const C=y?E:void 0,I=C?.error;throw new fd(I?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:I?.type,icebergCode:I?.code,details:C})}return{status:d.status,headers:d.headers,data:E}}}}function vh(t){return t.join("")}var gL=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:vh(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vh(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vh(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vh(t.namespace)}`}),!0}catch(e){if(e instanceof fd&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof fd&&n.status===409)return;throw n}}};function nu(t){return t.join("")}var mL=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nu(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${nu(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${nu(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${nu(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nu(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${nu(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof fd&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof fd&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},vL=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=pL({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new gL(this.client,e),this.tableOps=new mL(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class aR{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sR),n),this.fetch=Ox(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield mo(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}listBuckets(e){return qe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield dd(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield kx(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}from(e){if(!rL(e))throw new Pd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new vL({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>qe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(o,a){const c=o[a];return typeof c!="function"?c:(...f)=>qe(this,void 0,void 0,function*(){try{return{data:yield c.apply(o,f),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}})}})}}const Mx={"X-Client-Info":`storage-js/${oR}`,"Content-Type":"application/json"};class Dx extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ui(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Gh extends Dx{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lR extends Dx{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var Qv;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Qv||(Qv={}));const mp=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),yL=()=>Response,uR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},xL=t=>Array.from(new Float32Array(t)),wL=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},r2=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),EL=(t,e,n)=>qe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const i=t.status||500,o=t;if(typeof o.json=="function")o.json().then(a=>{const c=a?.statusCode||a?.code||i+"";e(new Gh(r2(a),i,c))}).catch(()=>{const a=i+"",c=o.statusText||`HTTP ${i} error`;e(new Gh(c,i,a))});else{const a=i+"",c=o.statusText||`HTTP ${i} error`;e(new Gh(c,i,a))}}else e(new lR(r2(t),t))}),bL=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return r?(uR(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function _L(t,e,n,r,i,o){return qe(this,void 0,void 0,function*(){return new Promise((a,c)=>{t(n,bL(e,r,i,o)).then(f=>{if(!f.ok)throw f;if(r?.noResolveJson)return f;const d=f.headers.get("content-type");return!d||!d.includes("application/json")?{}:f.json()}).then(f=>a(f)).catch(f=>EL(f,c,r))})})}function Ti(t,e,n,r,i){return qe(this,void 0,void 0,function*(){return _L(t,"POST",e,r,i,n)})}class cR{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mx),n),this.fetch=mp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return qe(this,void 0,void 0,function*(){try{return{data:(yield Ti(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}getIndex(e,n){return qe(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ui(r))return{data:null,error:r};throw r}})}listIndexes(e){return qe(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return qe(this,void 0,void 0,function*(){try{return{data:(yield Ti(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ui(r))return{data:null,error:r};throw r}})}}class dR{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mx),n),this.fetch=mp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return qe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ti(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}getVectors(e){return qe(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}listVectors(e){return qe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ti(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}queryVectors(e){return qe(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}deleteVectors(e){return qe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ti(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}}class fR{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mx),n),this.fetch=mp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:(yield Ti(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}getBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}listBuckets(){return qe(this,arguments,void 0,function*(e={}){try{return{data:yield Ti(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}deleteBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:(yield Ti(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}}class hR extends fR{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new pR(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return qe(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return qe(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return qe(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return qe(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class pR extends cR{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return qe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return qe(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return qe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return qe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new gR(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class gR extends dR{constructor(e,n,r,i,o){super(e,n,o),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return qe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return qe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return qe(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return qe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return qe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class AL extends dL{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new cL(this.url,this.headers,e,this.fetch)}get vectors(){return new hR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new aR(this.url+"/iceberg",this.headers,this.fetch)}}const CL=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:aR,StorageApiError:rR,StorageClient:AL,StorageError:Pd,StorageUnknownError:n0,StorageVectorsApiError:Gh,StorageVectorsClient:hR,StorageVectorsError:Dx,get StorageVectorsErrorCode(){return Qv},StorageVectorsUnknownError:lR,VectorBucketApi:fR,VectorBucketScope:pR,VectorDataApi:dR,VectorIndexApi:cR,VectorIndexScope:gR,isPlainObject:uR,isStorageError:pn,isStorageVectorsError:ui,normalizeToFloat32:xL,resolveFetch:mp,resolveResponse:yL,validateVectorDimension:wL},Symbol.toStringTag,{value:"Module"})),SL=Id(CL);var Jm={},zc={},i2;function TL(){return i2||(i2=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.version=void 0,zc.version="2.87.1"),zc}var o2;function IL(){return o2||(o2=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=TL();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(Jm)),Jm}var Zm={},s2;function PL(){return s2||(s2=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=i=>i?(...o)=>i(...o):(...o)=>fetch(...o);t.resolveFetch=e;const n=()=>Headers;t.resolveHeadersConstructor=n;const r=(i,o,a)=>{const c=(0,t.resolveFetch)(a),f=(0,t.resolveHeadersConstructor)();return async(d,g)=>{var y;const E=(y=await o())!==null&&y!==void 0?y:i;let C=new f(g?.headers);return C.has("apikey")||C.set("apikey",i),C.has("Authorization")||C.set("Authorization",`Bearer ${E}`),c(d,Object.assign(Object.assign({},g),{headers:C}))}};t.fetchWithAuth=r})(Zm)),Zm}var ss={},a2;function NL(){if(a2)return ss;a2=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.isBrowser=void 0,ss.uuid=t,ss.ensureTrailingSlash=e,ss.applySettingDefaults=r,ss.validateSupabaseUrl=i;function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var a=Math.random()*16|0,c=o=="x"?a:a&3|8;return c.toString(16)})}function e(o){return o.endsWith("/")?o:o+"/"}const n=()=>typeof window<"u";ss.isBrowser=n;function r(o,a){var c,f;const{db:d,auth:g,realtime:y,global:E}=o,{db:C,auth:I,realtime:P,global:N}=a,L={db:Object.assign(Object.assign({},C),d),auth:Object.assign(Object.assign({},I),g),realtime:Object.assign(Object.assign({},P),y),storage:{},global:Object.assign(Object.assign(Object.assign({},N),E),{headers:Object.assign(Object.assign({},(c=N?.headers)!==null&&c!==void 0?c:{}),(f=E?.headers)!==null&&f!==void 0?f:{})}),accessToken:async()=>""};return o.accessToken?L.accessToken=o.accessToken:delete L.accessToken,L}function i(o){const a=o?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return ss}var $c={};const mR="2.87.1",uu=30*1e3,ey=3,Qm=ey*uu,RL="http://localhost:9999",OL="supabase.auth.token",kL={"X-Client-Info":`gotrue-js/${mR}`},ty="X-Supabase-Api-Version",vR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ML=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,DL=600*1e3;let Iu=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function Qe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let yR=class extends Iu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function xR(t){return Qe(t)&&t.name==="AuthApiError"}let sa=class extends Iu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},_s=class extends Iu{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}},li=class extends _s{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function wR(t){return Qe(t)&&t.name==="AuthSessionMissingError"}let Wa=class extends _s{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},td=class extends _s{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},nd=class extends _s{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function ER(t){return Qe(t)&&t.name==="AuthImplicitGrantRedirectError"}let ny=class extends _s{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},r0=class extends _s{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function zh(t){return Qe(t)&&t.name==="AuthRetryableFetchError"}let ry=class extends _s{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function LL(t){return Qe(t)&&t.name==="AuthWeakPasswordError"}let i0=class extends _s{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const o0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),l2=` 	
\r=`.split(""),BL=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<l2.length;e+=1)t[l2[e].charCodeAt(0)]=-2;for(let e=0;e<o0.length;e+=1)t[o0[e].charCodeAt(0)]=e;return t})();function u2(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(o0[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(o0[r]),e.queuedBits-=6}}function bR(t,e,n){const r=BL[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function c2(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{jL(a,r,n)};for(let a=0;a<t.length;a+=1)bR(t.charCodeAt(a),i,o);return e.join("")}function FL(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function UL(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}FL(r,e)}}function jL(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Eu(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)bR(t.charCodeAt(i),n,r);return new Uint8Array(e)}function VL(t){const e=[];return UL(t,n=>e.push(n)),new Uint8Array(e)}function nl(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>u2(i,n,r)),u2(null,n,r),e.join("")}function GL(t){return Math.round(Date.now()/1e3)+t}function zL(){return Symbol("auth-callback")}const Tr=()=>typeof window<"u"&&typeof document<"u",Ha={tested:!1,writable:!1},_R=()=>{if(!Tr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ha.tested)return Ha.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ha.tested=!0,Ha.writable=!0}catch{Ha.tested=!0,Ha.writable=!1}return Ha.writable};function $L(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const AR=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),HL=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",cu=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},qa=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Sr=async(t,e)=>{await t.removeItem(e)};class vp{constructor(){this.promise=new vp.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}vp.promiseConstructor=Promise;function e1(t){const e=t.split(".");if(e.length!==3)throw new i0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ML.test(e[r]))throw new i0("JWT not in base64url format");return{header:JSON.parse(c2(e[0])),payload:JSON.parse(c2(e[1])),signature:Eu(e[2]),raw:{header:e[0],payload:e[1]}}}async function qL(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function WL(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function KL(t){return("0"+t.toString(16)).substr(-2)}function YL(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,KL).join("")}async function XL(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function JL(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await XL(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ru(t,e,n=!1){const r=YL();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await cu(t,`${e}-code-verifier`,i);const o=await JL(r);return[o,r===o?"plain":"s256"]}const ZL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function QL(t){const e=t.headers.get(ty);if(!e||!e.match(ZL))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function e5(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function t5(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const n5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function iu(t){if(!n5.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function t1(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function r5(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function d2(t){return JSON.parse(JSON.stringify(t))}const Ka=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),i5=[502,503,504];async function f2(t){var e;if(!HL(t))throw new r0(Ka(t),0);if(i5.includes(t.status))throw new r0(Ka(t),t.status);let n;try{n=await t.json()}catch(o){throw new sa(Ka(o),o)}let r;const i=QL(t);if(i&&i.getTime()>=vR["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ry(Ka(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new li}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new ry(Ka(n),t.status,n.weak_password.reasons);throw new yR(Ka(n),t.status||500,r)}const o5=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ut(t,e,n,r){var i;const o=Object.assign({},r?.headers);o[ty]||(o[ty]=vR["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",f=await s5(t,e,n+c,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(f):{data:Object.assign({},f),error:null}}async function s5(t,e,n,r,i,o){const a=o5(e,r,i,o);let c;try{c=await t(n,Object.assign({},a))}catch(f){throw console.error(f),new r0(Ka(f),0)}if(c.ok||await f2(c),r?.noResolveJson)return c;try{return await c.json()}catch(f){await f2(f)}}function go(t){var e;let n=null;u5(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=GL(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function h2(t){const e=go(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function aa(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function a5(t){return{data:t,error:null}}function l5(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,a=Fu(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},f=Object.assign({},a);return{data:{properties:c,user:f},error:null}}function p2(t){return t}function u5(t){return t.access_token&&t.refresh_token&&t.expires_in}const $h=["global","local","others"];let Lx=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=AR(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=$h[0]){if($h.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$h.join(", ")}`);try{return await ut(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ut(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:aa})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Fu(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await ut(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:l5,redirectTo:n?.redirectTo})}catch(n){if(Qe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ut(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:aa})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,a,c,f;try{const d={nextPage:null,lastPage:0,total:0},g=await ut(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:p2});if(g.error)throw g.error;const y=await g.json(),E=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,C=(f=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&f!==void 0?f:[];return C.length>0&&(C.forEach(I=>{const P=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(I.split(";")[1].split("=")[1]);d[`${N}Page`]=P}),d.total=parseInt(E)),{data:Object.assign(Object.assign({},y),d),error:null}}catch(d){if(Qe(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){iu(e);try{return await ut(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:aa})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){iu(e);try{return await ut(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:aa})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){iu(e);try{return await ut(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:aa})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){iu(e.userId);try{const{data:n,error:r}=await ut(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){iu(e.userId),iu(e.id);try{return{data:await ut(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,a,c,f;try{const d={nextPage:null,lastPage:0,total:0},g=await ut(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:p2});if(g.error)throw g.error;const y=await g.json(),E=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,C=(f=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&f!==void 0?f:[];return C.length>0&&(C.forEach(I=>{const P=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(I.split(";")[1].split("=")[1]);d[`${N}Page`]=P}),d.total=parseInt(E)),{data:Object.assign(Object.assign({},y),d),error:null}}catch(d){if(Qe(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await ut(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ut(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ut(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ut(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ut(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}};function g2(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ya={debug:!!(globalThis&&_R()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let CR=class extends Bx{};class c5 extends Bx{}async function SR(t,e,n){Ya.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ya.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Ya.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Ya.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ya.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new CR(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ya.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const m2={};async function d5(t,e,n){var r;const i=(r=m2[t])!==null&&r!==void 0?r:Promise.resolve(),o=Promise.race([i.catch(()=>null),e>=0?new Promise((a,c)=>{setTimeout(()=>{c(new c5(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(a=>a)).catch(a=>{if(a&&a.isAcquireTimeout)throw a;return null}).then(async()=>await n());return m2[t]=o.catch(async a=>{if(a&&a.isAcquireTimeout)return await i,null;throw a}),await o}function f5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function TR(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function h5(t){return parseInt(t,16)}function p5(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function g5(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:c,requestId:f,resources:d,scheme:g,uri:y,version:E}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const C=TR(t.address),I=g?`${g}://${r}`:r,P=t.statement?`${t.statement}
`:"",N=`${I} wants you to sign in with your Ethereum account:
${C}

${P}`;let L=`URI: ${y}
Version: ${E}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(L+=`
Expiration Time: ${i.toISOString()}`),c&&(L+=`
Not Before: ${c.toISOString()}`),f&&(L+=`
Request ID: ${f}`),d){let U=`
Resources:`;for(const F of d){if(!F||typeof F!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${F}`);U+=`
- ${F}`}L+=U}return`${N}
${L}`}class Hn extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class s0 extends Hn{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function m5({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Hn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Hn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Hn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Hn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Hn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Hn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new Hn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Hn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(IR(a)){if(o.rp.id!==a)return new Hn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Hn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Hn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Hn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Hn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function v5({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Hn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Hn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(IR(r)){if(n.rpId!==r)return new Hn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Hn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Hn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Hn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class y5{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const x5=new y5;function w5(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Fu(t,["challenge","user","excludeCredentials"]),o=Eu(e).buffer,a=Object.assign(Object.assign({},n),{id:Eu(n.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const d=r[f];c.excludeCredentials[f]=Object.assign(Object.assign({},d),{id:Eu(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function E5(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Fu(t,["challenge","allowCredentials"]),i=Eu(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const c=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},c),{id:Eu(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function b5(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:nl(new Uint8Array(t.response.attestationObject)),clientDataJSON:nl(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function _5(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:nl(new Uint8Array(i.authenticatorData)),clientDataJSON:nl(new Uint8Array(i.clientDataJSON)),signature:nl(new Uint8Array(i.signature)),userHandle:i.userHandle?nl(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function IR(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function v2(){var t,e;return!!(Tr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function A5(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new s0("Browser returned unexpected credential type",e)}:{data:null,error:new s0("Empty credential response",e)}}catch(e){return{data:null,error:m5({error:e,options:t})}}}async function C5(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new s0("Browser returned unexpected credential type",e)}:{data:null,error:new s0("Empty credential response",e)}}catch(e){return{data:null,error:v5({error:e,options:t})}}}const S5={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},T5={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function a0(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(e(a)){const c=r[o];e(c)?r[o]=a0(c,a):r[o]=a0(a)}else r[o]=a}return r}function I5(t,e){return a0(S5,t,e||{})}function P5(t,e){return a0(T5,t,e||{})}class N5{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){try{const{data:a,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:c};const f=i??x5.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=I5(a.webauthn.credential_options.publicKey,o?.create),{data:g,error:y}=await A5({publicKey:d,signal:f});return g?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const d=P5(a.webauthn.credential_options.publicKey,o?.request),{data:g,error:y}=await C5(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:f}));return g?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(a){return Qe(a)?{data:null,error:a}:{data:null,error:new sa("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Iu("rpId is required for WebAuthn authentication")};try{if(!v2())return{data:null,error:new sa("Browser does not support WebAuthn",null)};const{data:a,error:c}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:c};const{webauthn:f}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:r,credential_response:f.credential_response}})}catch(a){return Qe(a)?{data:null,error:a}:{data:null,error:new sa("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Iu("rpId is required for WebAuthn registration")};try{if(!v2())return{data:null,error:new sa("Browser does not support WebAuthn",null)};const{data:a,error:c}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===e&&E.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:c};const{data:f,error:d}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return f?this._verify({factorId:a.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:d}}catch(a){return Qe(a)?{data:null,error:a}:{data:null,error:new sa("Unexpected error in register",a)}}}}f5();const R5={url:RL,storageKey:OL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:kL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function y2(t,e,n){return await n()}const ou={};let Fx=class iy{get jwks(){var e,n;return(n=(e=ou[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ou[this.storageKey]=Object.assign(Object.assign({},ou[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ou[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ou[this.storageKey]=Object.assign(Object.assign({},ou[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},R5),e);if(this.storageKey=o.storageKey,this.instanceID=(n=iy.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,iy.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Tr()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Lx({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=AR(o.fetch),this.lock=o.lock||y2,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Tr()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=SR:this.lock=y2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new N5(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:_R()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=g2(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=g2(this.memoryStorage)),Tr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${mR}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Tr()&&(n=$L(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Tr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),ER(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Qe(n)?this._returnResult({error:n}):this._returnResult({error:new sa("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:go}),{data:a,error:c}=o;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});const f=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(o){if(Qe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:g,password:y,options:E}=e;let C=null,I=null;this.flowType==="pkce"&&([C,I]=await ru(this.storage,this.storageKey)),o=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E?.emailRedirectTo,body:{email:g,password:y,data:(n=E?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:E?.captchaToken},code_challenge:C,code_challenge_method:I},xform:go})}else if("phone"in e){const{phone:g,password:y,options:E}=e;o=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(r=E?.data)!==null&&r!==void 0?r:{},channel:(i=E?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:E?.captchaToken}},xform:go})}else throw new td("You must provide either an email or phone number and a password");const{data:a,error:c}=o;if(c||!a)return await Sr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const f=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(o){if(await Sr(this.storage,`${this.storageKey}-code-verifier`),Qe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:c}=e;n=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:h2})}else if("phone"in e){const{phone:o,password:a,options:c}=e;n=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:h2})}else throw new td("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new Wa;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Qe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,a,c,f,d,g,y,E;let C,I;if("message"in e)C=e.message,I=e.signature;else{const{chain:P,wallet:N,statement:L,options:U}=e;let F;if(Tr())if(typeof N=="object")F=N;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")F=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=N}const z=new URL((n=U?.url)!==null&&n!==void 0?n:window.location.href),q=await F.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const H=TR(q[0]);let W=(r=U?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!W){const X=await F.request({method:"eth_chainId"});W=h5(X)}const Z={domain:z.host,address:H,statement:L,uri:z.href,version:"1",chainId:W,nonce:(i=U?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=U?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=U?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(f=U?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(d=U?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(g=U?.signInWithEthereum)===null||g===void 0?void 0:g.resources};C=g5(Z),I=await F.request({method:"personal_sign",params:[p5(C),H]})}try{const{data:P,error:N}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:I},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:go});if(N)throw N;if(!P||!P.session||!P.user){const L=new Wa;return this._returnResult({data:{user:null,session:null},error:L})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:N})}catch(P){if(Qe(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async signInWithSolana(e){var n,r,i,o,a,c,f,d,g,y,E,C;let I,P;if("message"in e)I=e.message,P=e.signature;else{const{chain:N,wallet:L,statement:U,options:F}=e;let z;if(Tr())if(typeof L=="object")z=L;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))z=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!F?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=L}const q=new URL((n=F?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in z&&z.signIn){const H=await z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},F?.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),U?{statement:U}:null));let W;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")W=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)W=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)I=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),P=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${q.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(i=(r=F?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=F?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...!((a=F?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...!((c=F?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...!((f=F?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...!((d=F?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...!((y=(g=F?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...F.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const H=await z.signMessage(new TextEncoder().encode(I),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=H}}try{const{data:N,error:L}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:I,signature:nl(P)},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:go});if(L)throw L;if(!N||!N.session||!N.user){const U=new Wa;return this._returnResult({data:{user:null,session:null},error:U})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:L})}catch(N){if(Qe(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(e){const n=await qa(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:a}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:go});if(await Sr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const c=new Wa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(await Sr(this.storage,`${this.storageKey}-code-verifier`),Qe(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=e,c=await ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:go}),{data:f,error:d}=c;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!f||!f.session||!f.user){const g=new Wa;return this._returnResult({data:{user:null,session:null},error:g})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:d})}catch(n){if(Qe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,a;try{if("email"in e){const{email:c,options:f}=e;let d=null,g=null;this.flowType==="pkce"&&([d,g]=await ru(this.storage,this.storageKey));const{error:y}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:d,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:c,options:f}=e,{data:d,error:g}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=f?.data)!==null&&i!==void 0?i:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(a=f?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:g})}throw new td("You must provide either an email or phone number.")}catch(c){if(await Sr(this.storage,`${this.storageKey}-code-verifier`),Qe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:c}=await ut(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:go});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");const f=a.session,d=a.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(i){if(Qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,a;try{let c=null,f=null;this.flowType==="pkce"&&([c,f]=await ru(this.storage,this.storageKey));const d=await ut(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:f}),headers:this.headers,xform:a5});return!((o=d.data)===null||o===void 0)&&o.url&&Tr()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(c){if(await Sr(this.storage,`${this.storageKey}-code-verifier`),Qe(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new li;const{error:i}=await ut(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Qe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:a}=await ut(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:a,error:c}=await ut(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new td("You must provide either an email or phone number and a type")}catch(n){if(Qe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await qa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Qm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await qa(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=t1()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=r5(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:aa}):await this._useSession(async n=>{var r,i,o;const{data:a,error:c}=n;if(c)throw c;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new li}:await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:aa})})}catch(n){if(Qe(n))return wR(n)&&(await this._removeSession(),await Sr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new li;const a=i.session;let c=null,f=null;this.flowType==="pkce"&&e.email!=null&&([c,f]=await ru(this.storage,this.storageKey));const{data:d,error:g}=await ut(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:f}),jwt:a.access_token,xform:aa});if(g)throw g;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await Sr(this.storage,`${this.storageKey}-code-verifier`),Qe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new li;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=e1(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:c,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(Qe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:c}=n;if(c)throw c;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new li;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Qe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Tr())throw new nd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new nd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new ny("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ny("No code detected.");const{data:U,error:F}=await this._exchangeCodeForSession(e.code);if(F)throw F;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:c,expires_at:f,token_type:d}=e;if(!o||!c||!a||!d)throw new nd("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(c);let E=g+y;f&&(E=parseInt(f));const C=E-g;C*1e3<=uu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${y}s`);const I=E-y;g-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,E,g):g-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,E,g);const{data:P,error:N}=await this._getUser(o);if(N)throw N;const L={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:y,expires_at:E,refresh_token:a,token_type:d,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:e.type},error:null})}catch(r){if(Qe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await qa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({error:o});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:c}=await this.admin.signOut(a,e);if(c&&!(xR(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await Sr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=zL(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ru(this.storage,this.storageKey,!0));try{return await ut(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Sr(this.storage,`${this.storageKey}-code-verifier`),Qe(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,c,f,d,g;const{data:y,error:E}=o;if(E)throw E;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ut(this.fetch,"GET",C,{headers:this.headers,jwt:(g=(d=y.session)===null||d===void 0?void 0:d.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return Tr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(Qe(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:c,token:f,access_token:d,nonce:g}=e,y=await ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:f,access_token:d,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:go}),{data:E,error:C}=y;return C?this._returnResult({data:{user:null,session:null},error:C}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new Wa}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:C}))}catch(i){if(await Sr(this.storage,`${this.storageKey}-code-verifier`),Qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await ut(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await WL(async i=>(i>0&&await qL(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ut(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:go})),(i,o)=>{const a=200*Math.pow(2,i);return o&&zh(o)&&Date.now()+a-r<uu})}catch(r){if(this._debug(n,"error",r),Qe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Tr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await qa(this.storage,this.storageKey);if(i&&this.userStorage){let a=await qa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await cu(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a?.user)!==null&&e!==void 0?e:t1()}else if(i&&!i.user&&!i.user){const a=await qa(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,await Sr(this.storage,this.storageKey+"-user"),await cu(this.storage,this.storageKey,i)):i.user=t1()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Qm;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Qm}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),zh(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:c}=await this._getUser(i.access_token);!c&&a?.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new li;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new vp;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new li;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(i,"error",o),Qe(o)){const a={data:null,error:o};return zh(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(f){o.push(f)}});if(await Promise.all(a),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Sr(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await cu(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=d2(i);await cu(this.storage,this.storageKey,o)}else{const i=d2(n);await cu(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Sr(this.storage,this.storageKey),await Sr(this.storage,this.storageKey+"-code-verifier"),await Sr(this.storage,this.storageKey+"-user"),this.userStorage&&await Sr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),uu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/uu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${uu}ms, refresh threshold is ${ey} ticks`),i<=ey&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Bx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await ru(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(c.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await ut(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:d}=await ut(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&f.type==="totp"&&(!((i=f?.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?b5(e.webauthn.credential_response):_5(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:f}=await ut(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:f}))})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await ut(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:w5(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:E5(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n?.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=e1(r.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ut(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new li})})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new li});const a=await ut(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Tr()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Qe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new li});const a=await ut(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Tr()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Qe(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ut(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new li})})}catch(e){if(Qe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ut(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new li})})}catch(n){if(Qe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(c=>c.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+DL>i)return r;const{data:o,error:a}=await ut(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:C,error:I}=await this.getSession();if(I||!C.session)return this._returnResult({data:null,error:I});r=C.session.access_token}const{header:i,payload:o,signature:a,raw:{header:c,payload:f}}=e1(r);n?.allowExpired||e5(o.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!d){const{error:C}=await this.getUser(r);if(C)throw C;return{data:{claims:o,header:i,signature:a},error:null}}const g=t5(i.alg),y=await crypto.subtle.importKey("jwk",d,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,a,VL(`${c}.${f}`)))throw new i0("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(Qe(r))return this._returnResult({data:null,error:r});throw r}}};Fx.nextInstanceID={};const O5=Lx,k5=Fx,M5=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:O5,AuthApiError:yR,AuthClient:k5,AuthError:Iu,AuthImplicitGrantRedirectError:nd,AuthInvalidCredentialsError:td,AuthInvalidJwtError:i0,AuthInvalidTokenResponseError:Wa,AuthPKCEGrantCodeExchangeError:ny,AuthRetryableFetchError:r0,AuthSessionMissingError:li,AuthUnknownError:sa,AuthWeakPasswordError:ry,CustomAuthError:_s,GoTrueAdminApi:Lx,GoTrueClient:Fx,NavigatorLockAcquireTimeoutError:CR,SIGN_OUT_SCOPES:$h,isAuthApiError:xR,isAuthError:Qe,isAuthImplicitGrantRedirectError:ER,isAuthRetryableFetchError:zh,isAuthSessionMissingError:wR,isAuthWeakPasswordError:LL,lockInternals:Ya,navigatorLock:SR,processLock:d5},Symbol.toStringTag,{value:"Module"})),PR=Id(M5);var x2;function D5(){if(x2)return $c;x2=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.SupabaseAuthClient=void 0;const t=PR;let e=class extends t.AuthClient{constructor(r){super(r)}};return $c.SupabaseAuthClient=e,$c}var w2;function E2(){if(w2)return uh;w2=1,Object.defineProperty(uh,"__esModule",{value:!0});const t=GN,e=KN(),n=nR,r=SL,i=IL(),o=PL(),a=NL(),c=D5();class f{constructor(g,y,E){var C,I,P;this.supabaseUrl=g,this.supabaseKey=y;const N=(0,a.validateSupabaseUrl)(g);if(!y)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",N),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",N),this.storageUrl=new URL("storage/v1",N),this.functionsUrl=new URL("functions/v1",N);const L=`sb-${N.hostname.split(".")[0]}-auth-token`,U={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:L}),global:i.DEFAULT_GLOBAL_OPTIONS},F=(0,a.applySettingDefaults)(E??{},U);this.storageKey=(C=F.auth.storageKey)!==null&&C!==void 0?C:"",this.headers=(I=F.global.headers)!==null&&I!==void 0?I:{},F.accessToken?(this.accessToken=F.accessToken,this.auth=new Proxy({},{get:(z,q)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(q)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((P=F.auth)!==null&&P!==void 0?P:{},this.headers,F.global.fetch),this.fetch=(0,o.fetchWithAuth)(y,this._getAccessToken.bind(this),F.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},F.realtime)),this.accessToken&&this.accessToken().then(z=>this.realtime.setAuth(z)).catch(z=>console.warn("Failed to set initial Realtime auth token:",z)),this.rest=new e.PostgrestClient(new URL("rest/v1",N).href,{headers:this.headers,schema:F.db.schema,fetch:this.fetch}),this.storage=new r.StorageClient(this.storageUrl.href,this.headers,this.fetch,E?.storage),F.accessToken||this._listenForAuthEvents()}get functions(){return new t.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(g){return this.rest.from(g)}schema(g){return this.rest.schema(g)}rpc(g,y={},E={head:!1,get:!1,count:void 0}){return this.rest.rpc(g,y,E)}channel(g,y={config:{}}){return this.realtime.channel(g,y)}getChannels(){return this.realtime.getChannels()}removeChannel(g){return this.realtime.removeChannel(g)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var g,y;if(this.accessToken)return await this.accessToken();const{data:E}=await this.auth.getSession();return(y=(g=E.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:g,persistSession:y,detectSessionInUrl:E,storage:C,userStorage:I,storageKey:P,flowType:N,lock:L,debug:U,throwOnError:F},z,q){const H={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},H),z),storageKey:P,autoRefreshToken:g,persistSession:y,detectSessionInUrl:E,storage:C,userStorage:I,flowType:N,lock:L,debug:U,throwOnError:F,fetch:q,hasCustomAuthorizationHeader:Object.keys(this.headers).some(W=>W.toLowerCase()==="authorization")})}_initRealtimeClient(g){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},g),{params:Object.assign({apikey:this.supabaseKey},g?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((y,E)=>{this._handleTokenChanged(y,"CLIENT",E?.access_token)})}_handleTokenChanged(g,y,E){(g==="TOKEN_REFRESHED"||g==="SIGNED_IN")&&this.changedAccessToken!==E?(this.changedAccessToken=E,this.realtime.setAuth(E)):g==="SIGNED_OUT"&&(this.realtime.setAuth(),y=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return uh.default=f,uh}var b2;function L5(){return b2||(b2=1,(function(t){var e=os&&os.__createBinding||(Object.create?(function(g,y,E,C){C===void 0&&(C=E);var I=Object.getOwnPropertyDescriptor(y,E);(!I||("get"in I?!y.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return y[E]}}),Object.defineProperty(g,C,I)}):(function(g,y,E,C){C===void 0&&(C=E),g[C]=y[E]})),n=os&&os.__exportStar||function(g,y){for(var E in g)E!=="default"&&!Object.prototype.hasOwnProperty.call(y,E)&&e(y,g,E)},r=os&&os.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const i=r(E2());n(PR,t);var o=KN();Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return o.PostgrestError}});var a=GN;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return a.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return a.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return a.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return a.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return a.FunctionRegion}}),n(nR,t);var c=E2();Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return r(c).default}});const f=(g,y,E)=>new i.default(g,y,E);t.createClient=f;function d(){if(typeof window<"u"||typeof process>"u")return!1;const g=process.version;if(g==null)return!1;const y=g.match(/^v(\d+)\./);return y?parseInt(y[1],10)<=18:!1}d()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(os)),os}var NR=L5();const RR=ro(NR),B5=Tx({__proto__:null,default:RR},[NR]),{PostgrestError:$le,FunctionsHttpError:Hle,FunctionsFetchError:qle,FunctionsRelayError:Wle,FunctionsError:Kle,FunctionRegion:Yle,SupabaseClient:Xle,createClient:F5,GoTrueAdminApi:Jle,GoTrueClient:Zle,AuthAdminApi:Qle,AuthClient:eue,navigatorLock:tue,NavigatorLockAcquireTimeoutError:nue,lockInternals:rue,processLock:iue,SIGN_OUT_SCOPES:oue,AuthError:sue,AuthApiError:aue,AuthUnknownError:lue,CustomAuthError:uue,AuthSessionMissingError:cue,AuthInvalidTokenResponseError:due,AuthInvalidCredentialsError:fue,AuthImplicitGrantRedirectError:hue,AuthPKCEGrantCodeExchangeError:pue,AuthRetryableFetchError:gue,AuthWeakPasswordError:mue,AuthInvalidJwtError:vue,isAuthError:yue,isAuthApiError:xue,isAuthSessionMissingError:wue,isAuthImplicitGrantRedirectError:Eue,isAuthRetryableFetchError:bue,isAuthWeakPasswordError:_ue,RealtimePresence:Aue,RealtimeChannel:Cue,RealtimeClient:Sue,REALTIME_LISTEN_TYPES:Tue,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:Iue,REALTIME_PRESENCE_LISTEN_EVENTS:Pue,REALTIME_SUBSCRIBE_STATES:Nue,REALTIME_CHANNEL_STATES:Rue}=RR||B5,n1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GEMINI_API_KEY:"",VITE_SUPABASE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hYmpsaGpsa2VlaGFjenhyZ2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4Mzg5MDMsImV4cCI6MjA4MTQxNDkwM30.eHuUAZMQ9eGffxCwYwOczhzZuRksv41QoUaIulebpT4",VITE_SUPABASE_URL:"https://mabjlhjlkeehaczxrgcy.supabase.co"},OR=t=>n1&&n1[t]?n1[t]:"",r1=OR("VITE_SUPABASE_URL"),_2=OR("VITE_SUPABASE_KEY");let kR=null;if(r1&&_2&&r1!=="https://placeholder.supabase.co")try{kR=F5(r1,_2)}catch(t){console.error("Error initializing Supabase:",t)}else console.warn("VITE_SUPABASE_URL o VITE_SUPABASE_KEY no configuradas. El backend funcionar en modo MOCK (sin persistencia).");const Un=kR,U5=({onSuccess:t})=>{const[e,n]=M.useState(hu[0].id),r=hu.find(we=>we.id===e)||hu[0],[i,o]=M.useState({name:"",email:"",phone:"+569 ",date:"",time:"",isHomeService:!1,address:"",serviceId:r.id,serviceName:r.name,referral:""}),[a,c]=M.useState(!1),[f,d]=M.useState(!1),[g,y]=M.useState([]),[E,C]=M.useState([]),[I,P]=M.useState({}),[N,L]=M.useState(null),[U,F]=M.useState(!1);M.useEffect(()=>{o(we=>({...we,serviceId:r.id,serviceName:r.name,isHomeService:r.homeServiceOnly?!0:we.isHomeService}))},[r]);const z=r.durationMin+(i.isHomeService?S6:0),q=r.price+(i.isHomeService?C6:0);M.useEffect(()=>{i.date&&H(i.date)},[i.date]),M.useEffect(()=>{i.date&&W()},[i.date,E,z]),M.useEffect(()=>{const me=setTimeout(()=>{if(i.name.length>3&&i.phone.length>8){const Ae=JSON.parse(localStorage.getItem("mock_bookings")||"[]").find(Ce=>Ce.phone.replace(/\s/g,"")===i.phone.replace(/\s/g,"")&&Ce.name.toLowerCase()===i.name.toLowerCase());Ae&&(L(Ae),F(!0))}},1e3);return()=>clearTimeout(me)},[i.name,i.phone]);const H=async we=>{d(!0);try{let me=[];if(Un){const{data:te,error:he}=await Un.from("bookings").select("time, duration_minutes").eq("date",we);!he&&te&&(me=te.map(Fe=>{const[Le,lt]=Fe.time.split(":").map(Number),Ne=Le*60+lt;return{start:Ne,end:Ne+Fe.duration_minutes}}))}const Ce=JSON.parse(localStorage.getItem("mock_bookings")||"[]").filter(te=>te.date===we).map(te=>{const[he,Fe]=te.time.split(":").map(Number),Le=he*60+Fe,lt=te.duration_minutes||60;return{start:Le,end:Le+lt}});C([...me,...Ce])}catch(me){console.warn("Error fetching slots",me),C([])}finally{d(!1)}},W=()=>{const xe=[];for(let Ae=9;Ae<20;Ae++)for(let Ce=0;Ce<60;Ce+=30){const te=Ae*60+Ce,he=te+z;if(he>1200)continue;if(!E.some(Le=>te>=Le.start&&te<Le.end||he>Le.start&&he<=Le.end||te<=Le.start&&he>=Le.end)){const Le=`${Ae.toString().padStart(2,"0")}:${Ce.toString().padStart(2,"0")}`;xe.push(Le)}}y(xe),i.time&&!xe.includes(i.time)&&o(Ae=>({...Ae,time:""}))},Z=()=>{const we={};return i.name||(we.name="El nombre es obligatorio"),(!i.phone||i.phone.trim()==="+569")&&(we.phone="El telfono es obligatorio"),i.email?/\S+@\S+\.\S+/.test(i.email)||(we.email="El formato del email no es vlido"):we.email="El email es obligatorio",i.date||(we.date="Selecciona una fecha"),i.time||(we.time="Selecciona una hora"),i.isHomeService&&!i.address&&(we.address="La direccin es obligatoria para servicio a domicilio"),P(we),Object.keys(we).length===0},X=we=>{const{name:me,value:xe,type:Ae}=we.target,Ce=we.target.checked;o(te=>({...te,[me]:Ae==="checkbox"?Ce:xe})),I[me]&&P(te=>{const he={...te};return delete he[me],he})},ye=we=>{o(me=>({...me,time:we})),I.time&&P(me=>{const xe={...me};return delete xe.time,xe})},se=async()=>{const we=JSON.parse(localStorage.getItem("mock_bookings")||"[]"),me={id:Date.now(),...i,duration_minutes:z,created_at:new Date().toISOString()};if(we.push(me),localStorage.setItem("mock_bookings",JSON.stringify(we)),Un)try{const{error:xe}=await Un.from("leads").upsert({phone:i.phone,name:i.name,email:i.email,last_booking_date:i.date},{onConflict:"phone"});xe&&console.warn("Error saving lead:",xe),await Un.from("bookings").insert([{name:i.name,email:i.email,phone:i.phone,date:i.date,time:i.time,is_home_service:i.isHomeService,address:i.address||null,duration_minutes:z}])}catch(xe){console.warn("Supabase save failed, relying on local:",xe)}},ae=we=>{const xe=JSON.parse(localStorage.getItem("mock_bookings")||"[]").filter(Ae=>Ae.id!==we);localStorage.setItem("mock_bookings",JSON.stringify(xe))},be=()=>{N&&(ae(N.id),L(null),F(!1))},fe=()=>{F(!1),o(we=>({...we,name:"",phone:"+569 "})),alert(`Entendido. Tu cita anterior (${N.date} a las ${N.time}) se mantiene. Gracias!`)},ne=async we=>{if(!Z())return;c(!0),await se();const me=`${r.name}${i.isHomeService?" + Domicilio":" (En Studio)"}`,xe=new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(q),Ae=`
Hola Tus3B Style, acabo de reservar en la web.
--------------------------------
*Cliente:* ${i.name}
*Telfono:* ${i.phone}
*Servicio:* ${me}
*Fecha:* ${i.date}
*Hora:* ${i.time}
*Duracin:* ${z} min
${i.isHomeService?`*Direccin:* ${i.address}`:""}
${i.referral?`*Referido por:* ${i.referral}`:""}
*Total:* ${xe}
--------------------------------
Espero su confirmacin final. Gracias.
    `.trim();await new Promise(Ce=>setTimeout(Ce,800)),c(!1),t&&t(i);{const Ce=`https://wa.me/${ad}?text=${encodeURIComponent(Ae)}`;window.open(Ce,"_blank")}};return k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start fade-in pb-12 relative",children:[U&&N&&k.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 bg-white/95 backdrop-blur-sm rounded-2xl animate-in fade-in zoom-in-95",children:k.jsxs("div",{className:"bg-white border border-stone-200 shadow-2xl p-8 rounded-2xl max-w-sm text-center",children:[k.jsx(YD,{className:"mx-auto text-amber-500 mb-4 h-12 w-12"}),k.jsx("h3",{className:"serif text-2xl font-bold text-stone-900 mb-2",children:"Ya tienes una reserva"}),k.jsxs("p",{className:"text-stone-600 mb-6 text-sm",children:["Hemos encontrado una cita para ",k.jsx("strong",{children:N.name})," el da ",k.jsx("strong",{children:N.date})," a las ",k.jsx("strong",{children:N.time}),"."]}),k.jsx("p",{className:"font-bold text-stone-900 mb-6 text-lg",children:"Deseas cambiar tu reserva?"}),k.jsxs("div",{className:"space-y-3",children:[k.jsx("button",{onClick:be,className:"w-full bg-stone-900 text-white py-3 rounded-xl font-bold hover:bg-stone-700 transition",children:"S, cambiar cita"}),k.jsx("button",{onClick:fe,className:"w-full bg-stone-100 text-stone-600 py-3 rounded-xl font-bold hover:bg-stone-200 transition",children:"No, mantener la anterior"})]})]})}),k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 relative",children:[!Un&&k.jsxs("div",{className:"absolute top-0 right-0 bg-amber-100 text-amber-800 text-[10px] font-bold px-3 py-1 rounded-bl-lg flex items-center gap-1 z-10",children:[k.jsx(i6,{size:12})," MODO DEMO"]}),k.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Elige tu Servicio"}),k.jsxs("div",{className:"relative mb-6",children:[k.jsx("select",{value:e,onChange:we=>n(we.target.value),className:"w-full p-4 rounded-xl bg-stone-50 border border-stone-200 text-stone-900 font-serif text-lg focus:ring-2 focus:ring-stone-900 outline-none appearance-none",children:hu.map(we=>k.jsxs("option",{value:we.id,children:[we.name," - $",we.price.toLocaleString("es-CL")]},we.id))}),k.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:k.jsx("svg",{className:"w-5 h-5 text-stone-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),k.jsx("p",{className:"text-stone-500 font-light text-sm mb-4",children:r.description}),k.jsxs("div",{className:"flex justify-between items-center bg-stone-50 p-4 rounded-xl mb-4",children:[k.jsxs("div",{children:[k.jsx("span",{className:"block text-2xl font-semibold text-stone-900",children:new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(q)}),k.jsx("span",{className:"text-xs text-stone-500 uppercase tracking-wide",children:"Precio Estimado"})]}),k.jsxs("div",{className:"text-right",children:[k.jsxs("span",{className:"block text-lg font-medium text-stone-900",children:[z," min"]}),k.jsx("span",{className:"text-xs text-stone-500 uppercase tracking-wide",children:"Duracin"})]})]}),k.jsx("div",{className:"mb-4",children:k.jsxs("div",{className:`flex items-start p-3 rounded-lg border relative transition-colors ${r.homeServiceOnly?"bg-amber-50 border-amber-200":"bg-blue-50/50 border-blue-100"}`,children:[k.jsx("div",{className:"flex items-center h-5 mt-0.5",children:k.jsx("input",{id:"isHomeService",name:"isHomeService",type:"checkbox",checked:i.isHomeService,onChange:X,disabled:r.homeServiceOnly,className:"focus:ring-stone-500 h-5 w-5 text-stone-900 border-gray-300 rounded cursor-pointer disabled:opacity-50"})}),k.jsxs("div",{className:"ml-3",children:[k.jsx("label",{htmlFor:"isHomeService",className:"font-bold text-stone-900 cursor-pointer",children:r.homeServiceOnly?"Servicio Exclusivo a Domicilio":"Servicio a Domicilio? (+ $3.000)"}),k.jsxs("p",{className:"text-xs text-stone-500 mt-1 leading-relaxed",children:["Vamos a tu casa en ",T6.join(", "),". ",k.jsx("br",{}),k.jsx("span",{className:"text-blue-600 font-medium",children:"Incluye +30 min de traslado."})]})]})]})}),k.jsx("h4",{className:"text-xs uppercase tracking-widest text-stone-400 mb-3 font-bold mt-6",children:"Incluye"}),k.jsx("ul",{className:"space-y-2",children:r.includes.map((we,me)=>k.jsxs("li",{className:"flex items-center text-sm text-stone-700",children:[k.jsx(dN,{size:14,className:"text-stone-900 mr-2"}),we]},me))})]}),k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[k.jsxs("h3",{className:"serif text-xl text-stone-900 mb-4 flex items-center gap-2",children:[k.jsx("span",{className:"bg-stone-900 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center font-sans",children:"1"}),"Tus Datos"]}),k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Nombre y Apellido"}),k.jsx("input",{type:"text",name:"name",value:i.name,onChange:X,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${I.name?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"Ej: Mara Prez"}),I.name&&k.jsx("p",{className:"text-red-500 text-xs mt-1",children:I.name})]}),k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Telfono"}),k.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:X,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${I.phone?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"+569...",inputMode:"numeric"}),I.phone&&k.jsx("p",{className:"text-red-500 text-xs mt-1",children:I.phone})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Email"}),k.jsx("input",{type:"email",name:"email",value:i.email,onChange:X,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${I.email?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"correo@ejemplo.com"}),I.email&&k.jsx("p",{className:"text-red-500 text-xs mt-1",children:I.email})]})]}),k.jsxs("div",{className:"animate-in fade-in pt-2",children:[k.jsxs("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1 flex items-center gap-1",children:[k.jsx(w6,{size:12})," Quin te recomend? (Opcional)"]}),k.jsx("input",{type:"text",name:"referral",value:i.referral,onChange:X,className:"w-full px-4 py-3 rounded-lg bg-purple-50 border border-purple-100 focus:border-purple-300 focus:ring-1 outline-none transition-all placeholder-purple-300 text-purple-900",placeholder:"Nombre o Telfono de tu amiga"})]}),i.isHomeService&&k.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 pt-2",children:[k.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Direccin (Comuna y Calle)"}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{type:"text",name:"address",value:i.address,onChange:X,className:`w-full px-4 py-3 rounded-lg bg-amber-50 border ${I.address?"border-red-300 focus:border-red-500":"border-amber-200 focus:border-amber-500"} focus:ring-1 pl-10 outline-none transition-all`,placeholder:"Av. Irarrzaval 1234, uoa"}),k.jsx(hN,{size:18,className:"absolute left-3 top-3.5 text-amber-500"})]}),I.address&&k.jsx("p",{className:"text-red-500 text-xs mt-1",children:I.address})]})]})]})]}),k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[k.jsxs("h3",{className:"serif text-xl text-stone-900 mb-4 flex items-center gap-2",children:[k.jsx("span",{className:"bg-stone-900 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center font-sans",children:"2"}),"Fecha y Hora"]}),k.jsxs("div",{className:"mb-6",children:[k.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Selecciona un da"}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{type:"date",name:"date",min:new Date().toISOString().split("T")[0],value:i.date,onChange:X,className:`w-full px-4 py-4 rounded-xl bg-stone-50 border ${I.date?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} text-lg font-medium shadow-sm outline-none`}),k.jsx(ZD,{size:20,className:"absolute right-4 top-4.5 text-stone-400 pointer-events-none"})]}),I.date&&k.jsx("p",{className:"text-red-500 text-xs mt-1",children:I.date})]}),i.date&&k.jsxs("div",{className:"animate-in fade-in",children:[k.jsxs("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-3 flex justify-between",children:[k.jsx("span",{children:"Horas Disponibles"}),f&&k.jsxs("span",{className:"flex items-center text-stone-400",children:[k.jsx(Zh,{size:12,className:"animate-spin mr-1"})," Buscando..."]})]}),g.length>0?k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-4 gap-3",children:g.map(we=>k.jsx("button",{onClick:()=>ye(we),className:`py-3 px-2 rounded-lg text-sm font-bold transition-all transform active:scale-95 ${i.time===we?"bg-stone-900 text-white shadow-md scale-105 ring-2 ring-offset-2 ring-stone-900":"bg-white border border-stone-200 text-stone-600 hover:border-stone-900 hover:bg-stone-50"}`,children:we},we))}),I.time&&k.jsx("p",{className:"text-red-500 text-xs mt-2 text-center bg-red-50 p-2 rounded",children:I.time})]}):k.jsx("div",{className:"bg-stone-50 p-4 rounded-lg text-center text-stone-500 text-sm",children:f?"Cargando...":"No hay horas disponibles para este da. Intenta otra fecha."})]}),!i.date&&k.jsxs("div",{className:"text-center py-8 text-stone-400 text-sm italic",children:[k.jsx(QD,{size:32,className:"mx-auto mb-2 opacity-20"}),"Selecciona una fecha para ver disponibilidad"]})]}),k.jsxs("div",{className:"pt-2 sticky bottom-4 z-10",children:[k.jsxs("button",{onClick:()=>ne(),disabled:a,className:"w-full flex justify-center items-center space-x-2 bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-xl shadow-xl transition-all transform hover:-translate-y-1 disabled:opacity-75 disabled:cursor-not-allowed disabled:transform-none",children:[a?k.jsx(Zh,{className:"animate-spin"}):k.jsx(x6,{size:22}),k.jsx("span",{className:"text-lg",children:a?"Procesando...":"Confirmar y Enviar WhatsApp"})]}),k.jsx("p",{className:"text-xs text-center text-stone-400 mt-3 px-4",children:"Al confirmar, volvers al inicio y se abrir WhatsApp."})]})]})]})},j5=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(null),i=M.useMemo(()=>{const E=new Set;return Su.forEach(C=>C.notes.forEach(I=>E.add(I))),Array.from(E).sort()},[]),o=M.useMemo(()=>Su.filter(E=>{const C=E.name.toLowerCase().includes(t.toLowerCase())||E.brand.toLowerCase().includes(t.toLowerCase()),I=n?E.notes.includes(n):!0;return C&&I}).sort((E,C)=>E.stock&&!C.stock?-1:!E.stock&&C.stock?1:0),[t,n]),a=o.filter(E=>E.category==="classic"),c=o.filter(E=>E.category==="arab"),f=(E,C)=>{const I=C==="5ml"?E.price5ml:E.price10ml,P=`Hola Tus3B Style, quiero comprar el decant de *${E.brand} - ${E.name}* en formato *${C}* por $${I}. Tienen disponibilidad?`,N=`https://wa.me/${ad}?text=${encodeURIComponent(P)}`;window.open(N,"_blank")},d=E=>{if(!E.priceFullBottle)return;const C=`Hola Tus3B Style, quiero comprar la botella completa de *${E.brand} - ${E.name}* por $${E.priceFullBottle.toLocaleString("es-CL")}. Tienen disponibilidad?`,I=`https://wa.me/${ad}?text=${encodeURIComponent(C)}`;window.open(I,"_blank")},g=()=>{window.open(`https://wa.me/${ad}?text=${encodeURIComponent("Hola Tus3B Style, me gustara cotizar/encargar un perfume que no veo en el catlogo.")}`,"_blank")},y=E=>k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12",children:E.map((C,I)=>k.jsxs("div",{className:"group flex flex-col h-full",children:[k.jsxs("div",{className:"relative aspect-[4/5] overflow-hidden bg-white rounded-2xl mb-5 shadow-[0_2px_10px_-4px_rgba(0,0,0,0.05)] border border-stone-100 transition-all duration-300 group-hover:shadow-[0_8px_30px_-4px_rgba(0,0,0,0.1)]",children:[!t&&!n&&k.jsx("div",{className:"absolute top-0 left-0 bg-stone-900 text-white w-8 h-8 flex items-center justify-center font-serif text-sm border-br-xl z-10",children:I+1}),k.jsxs("div",{className:"relative w-full h-full p-8 transition-transform duration-700 ease-out group-hover:scale-105",children:[k.jsx("img",{src:C.image,alt:C.name,className:`w-full h-full object-contain ${C.secondaryImage?"transition-opacity duration-500 group-hover:opacity-0":""}`}),C.secondaryImage&&k.jsx("img",{src:C.secondaryImage,alt:`${C.name} detalle`,className:"absolute inset-0 w-full h-full object-contain p-0 transition-opacity duration-500 opacity-0 group-hover:opacity-100"})]}),k.jsx("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity bg-stone-900/90 text-white text-[10px] uppercase font-bold px-2 py-1 rounded",children:"Original"}),!C.stock&&k.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-[1px] flex items-center justify-center z-20",children:k.jsx("span",{className:"bg-stone-900 text-white px-4 py-2 rounded-lg font-bold uppercase tracking-widest text-xs shadow-lg",children:"Agotado"})})]}),k.jsxs("div",{className:"flex-1 flex flex-col",children:[k.jsx("h4",{className:"text-xs uppercase tracking-wider text-stone-500 font-bold mb-1",children:C.brand}),k.jsx("h3",{className:"serif text-2xl text-stone-900 mb-2 group-hover:text-stone-700 transition-colors",children:C.name}),k.jsx("p",{className:"text-stone-600 text-sm mb-4 line-clamp-3 leading-relaxed flex-grow",children:C.description}),k.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:C.notes.slice(0,3).map(P=>k.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-stone-50 text-stone-500 px-2 py-1 rounded border border-stone-100",children:P},P))}),k.jsxs("div",{className:"mt-auto space-y-3",children:[!C.isSpray&&k.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[k.jsxs("button",{onClick:()=>f(C,"5ml"),disabled:!C.stock,className:`group/btn flex flex-col items-center justify-center p-2.5 border rounded-lg transition-all duration-300 ${C.stock?"border-stone-200 hover:border-stone-900 hover:bg-stone-900":"border-stone-100 bg-stone-50 opacity-50 cursor-not-allowed"}`,children:[k.jsx("span",{className:"text-[10px] font-bold text-stone-500 uppercase mb-0.5 group-hover/btn:text-stone-400",children:"5 ML"}),k.jsxs("span",{className:"text-stone-900 font-semibold group-hover/btn:text-white",children:["$",C.price5ml.toLocaleString("es-CL")]})]}),k.jsxs("button",{onClick:()=>f(C,"10ml"),disabled:!C.stock,className:`group/btn flex flex-col items-center justify-center p-2.5 border rounded-lg transition-all duration-300 ${C.stock?"border-stone-200 hover:border-stone-900 hover:bg-stone-900":"border-stone-100 bg-stone-50 opacity-50 cursor-not-allowed"}`,children:[k.jsx("span",{className:"text-[10px] font-bold text-stone-500 uppercase mb-0.5 group-hover/btn:text-stone-400",children:"10 ML"}),k.jsxs("span",{className:"text-stone-900 font-semibold group-hover/btn:text-white",children:["$",C.price10ml.toLocaleString("es-CL")]})]})]}),C.priceFullBottle&&k.jsxs("button",{onClick:()=>d(C),disabled:!C.stock,className:`w-full flex items-center justify-center gap-2 p-3 rounded-lg font-bold uppercase text-xs tracking-wider transition-all ${C.stock?"bg-stone-900 text-white hover:bg-stone-800 shadow-md hover:shadow-lg":"bg-stone-100 text-stone-400 cursor-not-allowed"}`,children:[k.jsx(cd,{size:14}),k.jsxs("span",{children:["Botella ",C.isSpray?"200ml":"100ml"," - $",C.priceFullBottle.toLocaleString("es-CL")]})]})]})]})]},C.id))});return k.jsxs("div",{className:"space-y-16 fade-in",children:[k.jsxs("div",{className:"flex flex-col border-b border-stone-200 pb-8 gap-6",children:[k.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[k.jsxs("div",{children:[k.jsx("h3",{className:"serif text-4xl text-stone-900",children:"Catlogo de Decants"}),k.jsx("p",{className:"text-stone-500 mt-2 max-w-xl",children:"Descubre tu firma olfativa con nuestra curadura de perfumes 100% originales."})]}),k.jsxs("div",{className:"relative w-full md:w-72",children:[k.jsx("input",{type:"text",placeholder:"Buscar marca o nombre...",className:"pl-10 pr-4 py-3 border border-stone-300 rounded-xl focus:ring-stone-900 focus:border-stone-900 w-full transition-shadow hover:shadow-sm",value:t,onChange:E=>e(E.target.value)}),k.jsx(gN,{size:18,className:"absolute left-3 top-3.5 text-stone-400"})]})]}),k.jsx("div",{className:"w-full overflow-x-auto pb-2 -mx-4 px-4 md:mx-0 md:px-0 scrollbar-hide",children:k.jsxs("div",{className:"flex flex-nowrap md:flex-wrap gap-2 items-center min-w-max",children:[k.jsx("span",{className:"text-xs font-bold uppercase text-stone-400 mr-2 sticky left-0 bg-white pl-2 md:pl-0",children:"Filtrar:"}),i.map(E=>k.jsx("button",{onClick:()=>r(n===E?null:E),className:`text-xs px-4 py-2 rounded-full border transition-all duration-200 whitespace-nowrap ${n===E?"bg-stone-900 text-white border-stone-900 shadow-md":"bg-white text-stone-600 border-stone-200 active:bg-stone-100"}`,children:E},E))]})})]}),a.length>0&&k.jsxs("section",{children:[k.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[k.jsx("div",{className:"bg-stone-100 p-2 rounded-full",children:k.jsx(e6,{size:24,className:"text-stone-800"})}),k.jsxs("div",{children:[k.jsx("h2",{className:"serif text-3xl text-stone-900",children:"Clsicos del Lujo"}),k.jsx("p",{className:"text-sm text-stone-500 uppercase tracking-widest font-bold mt-1",children:"Ranking de Tendencia 2025-26"})]})]}),y(a)]}),a.length>0&&c.length>0&&k.jsx("div",{className:"border-t border-stone-100"}),c.length>0&&k.jsxs("section",{children:[k.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[k.jsx("div",{className:"bg-amber-50 p-2 rounded-full",children:k.jsx(Vv,{size:24,className:"text-amber-600"})}),k.jsxs("div",{children:[k.jsx("h2",{className:"serif text-3xl text-stone-900",children:"Tendencia rabe"}),k.jsx("p",{className:"text-sm text-amber-600/80 uppercase tracking-widest font-bold mt-1",children:"Exclusividad & Notas Gourmand"})]})]}),y(c)]}),o.length===0&&k.jsxs("div",{className:"text-center py-24 bg-stone-50 rounded-2xl border border-dashed border-stone-200",children:[k.jsx(cd,{size:48,className:"mx-auto text-stone-300 mb-4"}),k.jsx("h4",{className:"text-stone-900 font-bold text-lg mb-1",children:"No encontramos resultados"}),k.jsx("p",{className:"text-stone-500 text-sm",children:"Prueba ajustando tus filtros de bsqueda."})]}),k.jsxs("div",{className:"mt-20 bg-stone-900 rounded-3xl p-8 md:p-14 text-center text-white relative overflow-hidden shadow-2xl ring-1 ring-white/10",children:[k.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[k.jsx("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-full mb-6 ring-1 ring-white/20",children:k.jsx(a6,{size:32,className:"text-yellow-200"})}),k.jsx("h3",{className:"serif text-3xl md:text-5xl mb-6",children:"Buscas algo exclusivo?"}),k.jsx("p",{className:"text-stone-300 mb-10 max-w-2xl mx-auto text-lg font-light leading-relaxed",children:"Si no encuentras tu fragancia favorita en nuestro catlogo, contctanos. Hacemos encargos especiales para que encuentres tu firma olfativa perfecta."}),k.jsxs("button",{onClick:g,className:"group inline-flex items-center bg-white text-stone-900 px-8 py-4 rounded-full font-bold uppercase tracking-widest hover:bg-stone-100 transition-all transform hover:-translate-y-1 shadow-[0_10px_20px_-10px_rgba(255,255,255,0.3)]",children:[k.jsx(pN,{className:"mr-3 group-hover:text-amber-600 transition-colors",size:20}),"Cotizar Encargo"]})]}),k.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://images.unsplash.com/photo-1541643600914-78b084683601?auto=format&fit=crop&q=80')] opacity-20 bg-cover bg-center mix-blend-overlay grayscale"})]})]})},V5=()=>k.jsx("footer",{className:"bg-stone-900 text-white py-12 md:py-16",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 text-center md:text-left",children:[k.jsxs("div",{children:[k.jsxs("span",{className:"serif text-3xl font-bold italic tracking-tighter block mb-4",children:["Tus3B ",k.jsx("span",{className:"text-stone-400 not-italic font-light text-xl ml-1",children:"Style"})]}),k.jsx("p",{className:"text-stone-400 font-light max-w-xs mx-auto md:mx-0",children:"Elevando tu estilo con servicios de peluquera premium a domicilio y lo mejor de la perfumera internacional."})]}),k.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[k.jsx("h4",{className:"uppercase tracking-widest text-xs font-bold text-stone-500 mb-4",children:"Contacto"}),k.jsxs("a",{href:`https://wa.me/${ad}`,className:"text-stone-300 hover:text-white mb-2 transition flex items-center gap-2",children:[k.jsx(pN,{size:16})," WhatsApp: +56 9 8452 4774"]}),k.jsx("span",{className:"text-stone-300 mb-2",children:"Santiago, Chile"}),k.jsx("span",{className:"text-stone-300",children:"contacto@tus3b.cl"})]}),k.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[k.jsx("h4",{className:"uppercase tracking-widest text-xs font-bold text-stone-500 mb-4",children:"Sguenos"}),k.jsx("div",{className:"flex space-x-4",children:k.jsx("a",{href:"#",className:"p-2 bg-stone-800 rounded-full hover:bg-stone-700 transition",children:k.jsx(o6,{size:20})})})]})]}),k.jsxs("div",{className:"border-t border-stone-800 mt-12 pt-8 text-center text-stone-500 text-sm font-light",children:[" ",new Date().getFullYear()," Tus3B Style. Todos los derechos reservados."]})]})});var G5={};let z5,$5;function H5(){return{geminiUrl:z5,vertexUrl:$5}}function q5(t,e,n,r){var i,o;if(!t?.baseUrl){const a=H5();return e?(i=a.vertexUrl)!==null&&i!==void 0?i:n:(o=a.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}class As{}function Ue(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function A(t,e,n){for(let o=0;o<e.length-1;o++){const a=e[o];if(a.endsWith("[]")){const c=a.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[c])){const f=t[c];if(Array.isArray(n))for(let d=0;d<f.length;d++){const g=f[d];A(g,e.slice(o+1),n[d])}else for(const d of f)A(d,e.slice(o+1),n)}return}else if(a.endsWith("[0]")){const c=a.slice(0,-3);c in t||(t[c]=[{}]);const f=t[c];A(f[0],e.slice(o+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function b(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(c=>b(c,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function W5(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),a=new Set;let c=-1;for(let f=0;f<i.length;f++)if(i[f]==="*"){c=f;break}if(c!==-1&&o.length>c)for(let f=c;f<o.length;f++){const d=o[f];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}oy(t,i,o,0,a)}}function oy(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const a=o.slice(0,-2),c=t;if(a in c&&Array.isArray(c[a]))for(const f of c[a])oy(f,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,c=Object.keys(a).filter(d=>!d.startsWith("_")&&!i.has(d)),f={};for(const d of c)f[d]=a[d];for(const[d,g]of Object.entries(f)){const y=[];for(const E of n.slice(r))E==="*"?y.push(d):y.push(E);A(a,y,g)}for(const d of c)delete a[d]}}else{const a=t;o in a&&oy(a[o],e,n,r+1,i)}}function Ux(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function K5(t){const e={},n=b(t,["operationName"]);n!=null&&A(e,["operationName"],n);const r=b(t,["resourceName"]);return r!=null&&A(e,["_url","resourceName"],r),e}function Y5(t){const e={},n=b(t,["name"]);n!=null&&A(e,["name"],n);const r=b(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=b(t,["done"]);i!=null&&A(e,["done"],i);const o=b(t,["error"]);o!=null&&A(e,["error"],o);const a=b(t,["response","generateVideoResponse"]);return a!=null&&A(e,["response"],J5(a)),e}function X5(t){const e={},n=b(t,["name"]);n!=null&&A(e,["name"],n);const r=b(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=b(t,["done"]);i!=null&&A(e,["done"],i);const o=b(t,["error"]);o!=null&&A(e,["error"],o);const a=b(t,["response"]);return a!=null&&A(e,["response"],Z5(a)),e}function J5(t){const e={},n=b(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Q5(a))),A(e,["generatedVideos"],o)}const r=b(t,["raiMediaFilteredCount"]);r!=null&&A(e,["raiMediaFilteredCount"],r);const i=b(t,["raiMediaFilteredReasons"]);return i!=null&&A(e,["raiMediaFilteredReasons"],i),e}function Z5(t){const e={},n=b(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>eB(a))),A(e,["generatedVideos"],o)}const r=b(t,["raiMediaFilteredCount"]);r!=null&&A(e,["raiMediaFilteredCount"],r);const i=b(t,["raiMediaFilteredReasons"]);return i!=null&&A(e,["raiMediaFilteredReasons"],i),e}function Q5(t){const e={},n=b(t,["video"]);return n!=null&&A(e,["video"],sB(n)),e}function eB(t){const e={},n=b(t,["_self"]);return n!=null&&A(e,["video"],aB(n)),e}function tB(t){const e={},n=b(t,["operationName"]);return n!=null&&A(e,["_url","operationName"],n),e}function nB(t){const e={},n=b(t,["operationName"]);return n!=null&&A(e,["_url","operationName"],n),e}function rB(t){const e={},n=b(t,["name"]);n!=null&&A(e,["name"],n);const r=b(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=b(t,["done"]);i!=null&&A(e,["done"],i);const o=b(t,["error"]);o!=null&&A(e,["error"],o);const a=b(t,["response"]);return a!=null&&A(e,["response"],iB(a)),e}function iB(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["parent"]);r!=null&&A(e,["parent"],r);const i=b(t,["documentName"]);return i!=null&&A(e,["documentName"],i),e}function MR(t){const e={},n=b(t,["name"]);n!=null&&A(e,["name"],n);const r=b(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=b(t,["done"]);i!=null&&A(e,["done"],i);const o=b(t,["error"]);o!=null&&A(e,["error"],o);const a=b(t,["response"]);return a!=null&&A(e,["response"],oB(a)),e}function oB(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["parent"]);r!=null&&A(e,["parent"],r);const i=b(t,["documentName"]);return i!=null&&A(e,["documentName"],i),e}function sB(t){const e={},n=b(t,["uri"]);n!=null&&A(e,["uri"],n);const r=b(t,["encodedVideo"]);r!=null&&A(e,["videoBytes"],Ux(r));const i=b(t,["encoding"]);return i!=null&&A(e,["mimeType"],i),e}function aB(t){const e={},n=b(t,["gcsUri"]);n!=null&&A(e,["uri"],n);const r=b(t,["bytesBase64Encoded"]);r!=null&&A(e,["videoBytes"],Ux(r));const i=b(t,["mimeType"]);return i!=null&&A(e,["mimeType"],i),e}var A2;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(A2||(A2={}));var C2;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(C2||(C2={}));var S2;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(S2||(S2={}));var ua;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ua||(ua={}));var T2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(T2||(T2={}));var I2;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(I2||(I2={}));var P2;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(P2||(P2={}));var N2;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(N2||(N2={}));var R2;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(R2||(R2={}));var O2;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(O2||(O2={}));var k2;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(k2||(k2={}));var M2;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(M2||(M2={}));var D2;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(D2||(D2={}));var L2;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(L2||(L2={}));var B2;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(B2||(B2={}));var F2;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(F2||(F2={}));var U2;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(U2||(U2={}));var j2;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(j2||(j2={}));var V2;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(V2||(V2={}));var l0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(l0||(l0={}));var G2;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(G2||(G2={}));var z2;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(z2||(z2={}));var $2;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})($2||($2={}));var sy;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(sy||(sy={}));var H2;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(H2||(H2={}));var q2;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(q2||(q2={}));var W2;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(W2||(W2={}));var K2;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(K2||(K2={}));var Y2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Y2||(Y2={}));var X2;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(X2||(X2={}));var J2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(J2||(J2={}));var Z2;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Z2||(Z2={}));var Q2;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Q2||(Q2={}));var eA;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(eA||(eA={}));var tA;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(tA||(tA={}));var nA;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(nA||(nA={}));var rA;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rA||(rA={}));var iA;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(iA||(iA={}));var oA;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(oA||(oA={}));var sA;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(sA||(sA={}));var aA;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(aA||(aA={}));var lA;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(lA||(lA={}));var uA;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(uA||(uA={}));var cA;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(cA||(cA={}));var dA;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(dA||(dA={}));var fA;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(fA||(fA={}));var hA;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(hA||(hA={}));var pA;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(pA||(pA={}));var gA;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(gA||(gA={}));var mA;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(mA||(mA={}));var vA;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(vA||(vA={}));var yA;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(yA||(yA={}));var xA;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(xA||(xA={}));var wA;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(wA||(wA={}));var EA;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(EA||(EA={}));var pu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(pu||(pu={}));class ay{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Hc{get text(){var e,n,r,i,o,a,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",g=!1;const y=[];for(const E of(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[C,I]of Object.entries(E))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(I!==null||I!==void 0)&&y.push(C);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;g=!0,d+=E.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?d:void 0}get data(){var e,n,r,i,o,a,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const g=[];for(const y of(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[E,C]of Object.entries(y))E!=="inlineData"&&(C!==null||C!==void 0)&&g.push(E);y.inlineData&&typeof y.inlineData.data=="string"&&(d+=atob(y.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,o,a,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,r,i,o,a,c,f,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if(g?.length!==0)return(d=g?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,o,a,c,f,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(f=(c=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if(g?.length!==0)return(d=g?.[0])===null||d===void 0?void 0:d.output}}class bA{}class _A{}class lB{}class uB{}class cB{}class dB{}class AA{}class CA{}class SA{}class fB{}class u0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new u0;let i;const o=e;return n?i=X5(o):i=Y5(o),Object.assign(r,i),r}}class TA{}class IA{}class PA{}class NA{}class hB{}class pB{}class gB{}class jx{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new jx,o=rB(e);return Object.assign(r,o),r}}class mB{}class vB{}class yB{}class RA{}class xB{get text(){var e,n,r;let i="",o=!1;const a=[];for(const c of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[f,d]of Object.entries(c))f!=="text"&&f!=="thought"&&d!==null&&a.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,i+=c.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(a))c!=="inlineData"&&f!==null&&o.push(c);a.inlineData&&typeof a.inlineData.data=="string"&&(i+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class wB{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Vx{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Vx,o=MR(e);return Object.assign(r,o),r}}function kt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function DR(t,e){const n=kt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function LR(t){return Array.isArray(t)?t.map(e=>c0(e)):[c0(t)]}function c0(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function BR(t){const e=c0(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function FR(t){const e=c0(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function OA(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function UR(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>OA(e)):[OA(t)]}function ly(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function kA(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function MA(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Gr(t){if(t==null)throw new Error("ContentUnion is required");return ly(t)?t:{role:"user",parts:UR(t)}}function Gx(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Gr(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Gr(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Gr(n)):[Gr(e)]}function Zi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(kA(t)||MA(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Gr(t)]}const e=[],n=[],r=ly(t[0]);for(const i of t){const o=ly(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(kA(i)||MA(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:UR(n)}),e}function EB(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ua).includes(n[0].toUpperCase())?n[0].toUpperCase():ua.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ua).includes(r.toUpperCase())?r.toUpperCase():ua.TYPE_UNSPECIFIED})}}function bu(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&EB(t.type,e);for(const[a,c]of Object.entries(t))if(c!=null)if(a=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(ua).includes(c.toUpperCase())?c.toUpperCase():ua.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=bu(c);else if(r.includes(a)){const f=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}f.push(bu(d))}e[a]=f}else if(i.includes(a)){const f={};for(const[d,g]of Object.entries(c))f[d]=bu(g);e[a]=f}else{if(a==="additionalProperties")continue;e[a]=c}return e}function zx(t){return bu(t)}function $x(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Hx(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ju(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=bu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=bu(e.response));return t}function Vu(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function bB(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Cs(t,e){if(typeof e!="string")throw new Error("name must be a string");return bB(t,e,"cachedContents")}function jR(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function va(t){return Ux(t)}function _B(t){return t!=null&&typeof t=="object"&&"name"in t}function AB(t){return t!=null&&typeof t=="object"&&"video"in t}function CB(t){return t!=null&&typeof t=="object"&&"uri"in t}function VR(t){var e;let n;if(_B(t)&&(n=t.name),!(CB(t)&&(n=t.uri,n===void 0))&&!(AB(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function GR(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function zR(t){for(const e of["models","tunedModels","publisherModels"])if(SB(t,e))return t[e];return[]}function SB(t,e){return t!==null&&typeof t=="object"&&e in t}function TB(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function IB(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const a=TB(i,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function $R(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function PB(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function HR(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const a of i){if(typeof a!="object"||a===null)continue;const f=a.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Gu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function qR(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function NB(t){const e={},n=b(t,["responsesFile"]);n!=null&&A(e,["fileName"],n);const r=b(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>c7(a))),A(e,["inlinedResponses"],o)}const i=b(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),A(e,["inlinedEmbedContentResponses"],o)}return e}function RB(t){const e={},n=b(t,["predictionsFormat"]);n!=null&&A(e,["format"],n);const r=b(t,["gcsDestination","outputUriPrefix"]);r!=null&&A(e,["gcsUri"],r);const i=b(t,["bigqueryDestination","outputUri"]);return i!=null&&A(e,["bigqueryUri"],i),e}function OB(t){const e={},n=b(t,["format"]);n!=null&&A(e,["predictionsFormat"],n);const r=b(t,["gcsUri"]);r!=null&&A(e,["gcsDestination","outputUriPrefix"],r);const i=b(t,["bigqueryUri"]);if(i!=null&&A(e,["bigqueryDestination","outputUri"],i),b(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(b(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(b(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Hh(t){const e={},n=b(t,["name"]);n!=null&&A(e,["name"],n);const r=b(t,["metadata","displayName"]);r!=null&&A(e,["displayName"],r);const i=b(t,["metadata","state"]);i!=null&&A(e,["state"],qR(i));const o=b(t,["metadata","createTime"]);o!=null&&A(e,["createTime"],o);const a=b(t,["metadata","endTime"]);a!=null&&A(e,["endTime"],a);const c=b(t,["metadata","updateTime"]);c!=null&&A(e,["updateTime"],c);const f=b(t,["metadata","model"]);f!=null&&A(e,["model"],f);const d=b(t,["metadata","output"]);return d!=null&&A(e,["dest"],NB(HR(d))),e}function uy(t){const e={},n=b(t,["name"]);n!=null&&A(e,["name"],n);const r=b(t,["displayName"]);r!=null&&A(e,["displayName"],r);const i=b(t,["state"]);i!=null&&A(e,["state"],qR(i));const o=b(t,["error"]);o!=null&&A(e,["error"],o);const a=b(t,["createTime"]);a!=null&&A(e,["createTime"],a);const c=b(t,["startTime"]);c!=null&&A(e,["startTime"],c);const f=b(t,["endTime"]);f!=null&&A(e,["endTime"],f);const d=b(t,["updateTime"]);d!=null&&A(e,["updateTime"],d);const g=b(t,["model"]);g!=null&&A(e,["model"],g);const y=b(t,["inputConfig"]);y!=null&&A(e,["src"],kB(y));const E=b(t,["outputConfig"]);E!=null&&A(e,["dest"],RB(HR(E)));const C=b(t,["completionStats"]);return C!=null&&A(e,["completionStats"],C),e}function kB(t){const e={},n=b(t,["instancesFormat"]);n!=null&&A(e,["format"],n);const r=b(t,["gcsSource","uris"]);r!=null&&A(e,["gcsUri"],r);const i=b(t,["bigquerySource","inputUri"]);return i!=null&&A(e,["bigqueryUri"],i),e}function MB(t,e){const n={};if(b(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(b(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(b(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=b(e,["fileName"]);r!=null&&A(n,["fileName"],r);const i=b(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>u7(t,a))),A(n,["requests","requests"],o)}return n}function DB(t){const e={},n=b(t,["format"]);n!=null&&A(e,["instancesFormat"],n);const r=b(t,["gcsUri"]);r!=null&&A(e,["gcsSource","uris"],r);const i=b(t,["bigqueryUri"]);if(i!=null&&A(e,["bigquerySource","inputUri"],i),b(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(b(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function LB(t){const e={},n=b(t,["data"]);if(n!=null&&A(e,["data"],n),b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function BB(t,e){const n={},r=b(e,["name"]);return r!=null&&A(n,["_url","name"],Gu(t,r)),n}function FB(t,e){const n={},r=b(e,["name"]);return r!=null&&A(n,["_url","name"],Gu(t,r)),n}function UB(t){const e={},n=b(t,["content"]);n!=null&&A(e,["content"],n);const r=b(t,["citationMetadata"]);r!=null&&A(e,["citationMetadata"],jB(r));const i=b(t,["tokenCount"]);i!=null&&A(e,["tokenCount"],i);const o=b(t,["finishReason"]);o!=null&&A(e,["finishReason"],o);const a=b(t,["avgLogprobs"]);a!=null&&A(e,["avgLogprobs"],a);const c=b(t,["groundingMetadata"]);c!=null&&A(e,["groundingMetadata"],c);const f=b(t,["index"]);f!=null&&A(e,["index"],f);const d=b(t,["logprobsResult"]);d!=null&&A(e,["logprobsResult"],d);const g=b(t,["safetyRatings"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(C=>C)),A(e,["safetyRatings"],E)}const y=b(t,["urlContextMetadata"]);return y!=null&&A(e,["urlContextMetadata"],y),e}function jB(t){const e={},n=b(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),A(e,["citations"],r)}return e}function WR(t){const e={},n=b(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>v7(o))),A(e,["parts"],i)}const r=b(t,["role"]);return r!=null&&A(e,["role"],r),e}function VB(t,e){const n={},r=b(t,["displayName"]);if(e!==void 0&&r!=null&&A(e,["batch","displayName"],r),b(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function GB(t,e){const n={},r=b(t,["displayName"]);e!==void 0&&r!=null&&A(e,["displayName"],r);const i=b(t,["dest"]);return e!==void 0&&i!=null&&A(e,["outputConfig"],OB(PB(i))),n}function DA(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["src"]);i!=null&&A(n,["batch","inputConfig"],MB(t,$R(t,i)));const o=b(e,["config"]);return o!=null&&VB(o,n),n}function zB(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["model"],kt(t,r));const i=b(e,["src"]);i!=null&&A(n,["inputConfig"],DB($R(t,i)));const o=b(e,["config"]);return o!=null&&GB(o,n),n}function $B(t,e){const n={},r=b(t,["displayName"]);return e!==void 0&&r!=null&&A(e,["batch","displayName"],r),n}function HB(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["src"]);i!=null&&A(n,["batch","inputConfig"],ZB(t,i));const o=b(e,["config"]);return o!=null&&$B(o,n),n}function qB(t,e){const n={},r=b(e,["name"]);return r!=null&&A(n,["_url","name"],Gu(t,r)),n}function WB(t,e){const n={},r=b(e,["name"]);return r!=null&&A(n,["_url","name"],Gu(t,r)),n}function KB(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["name"]);r!=null&&A(e,["name"],r);const i=b(t,["done"]);i!=null&&A(e,["done"],i);const o=b(t,["error"]);return o!=null&&A(e,["error"],o),e}function YB(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["name"]);r!=null&&A(e,["name"],r);const i=b(t,["done"]);i!=null&&A(e,["done"],i);const o=b(t,["error"]);return o!=null&&A(e,["error"],o),e}function XB(t,e){const n={},r=b(e,["contents"]);if(r!=null){let o=Gx(t,r);Array.isArray(o)&&(o=o.map(a=>a)),A(n,["requests[]","request","content"],o)}const i=b(e,["config"]);return i!=null&&(A(n,["_self"],JB(i,n)),W5(n,{"requests[].*":"requests[].request.*"})),n}function JB(t,e){const n={},r=b(t,["taskType"]);e!==void 0&&r!=null&&A(e,["requests[]","taskType"],r);const i=b(t,["title"]);e!==void 0&&i!=null&&A(e,["requests[]","title"],i);const o=b(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&A(e,["requests[]","outputDimensionality"],o),b(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(b(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ZB(t,e){const n={},r=b(e,["fileName"]);r!=null&&A(n,["file_name"],r);const i=b(e,["inlinedRequests"]);return i!=null&&A(n,["requests"],XB(t,i)),n}function QB(t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["fileUri"]);n!=null&&A(e,["fileUri"],n);const r=b(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function e7(t){const e={},n=b(t,["id"]);n!=null&&A(e,["id"],n);const r=b(t,["args"]);r!=null&&A(e,["args"],r);const i=b(t,["name"]);if(i!=null&&A(e,["name"],i),b(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(b(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function t7(t){const e={},n=b(t,["mode"]);n!=null&&A(e,["mode"],n);const r=b(t,["allowedFunctionNames"]);if(r!=null&&A(e,["allowedFunctionNames"],r),b(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function n7(t,e,n){const r={},i=b(e,["systemInstruction"]);n!==void 0&&i!=null&&A(n,["systemInstruction"],WR(Gr(i)));const o=b(e,["temperature"]);o!=null&&A(r,["temperature"],o);const a=b(e,["topP"]);a!=null&&A(r,["topP"],a);const c=b(e,["topK"]);c!=null&&A(r,["topK"],c);const f=b(e,["candidateCount"]);f!=null&&A(r,["candidateCount"],f);const d=b(e,["maxOutputTokens"]);d!=null&&A(r,["maxOutputTokens"],d);const g=b(e,["stopSequences"]);g!=null&&A(r,["stopSequences"],g);const y=b(e,["responseLogprobs"]);y!=null&&A(r,["responseLogprobs"],y);const E=b(e,["logprobs"]);E!=null&&A(r,["logprobs"],E);const C=b(e,["presencePenalty"]);C!=null&&A(r,["presencePenalty"],C);const I=b(e,["frequencyPenalty"]);I!=null&&A(r,["frequencyPenalty"],I);const P=b(e,["seed"]);P!=null&&A(r,["seed"],P);const N=b(e,["responseMimeType"]);N!=null&&A(r,["responseMimeType"],N);const L=b(e,["responseSchema"]);L!=null&&A(r,["responseSchema"],zx(L));const U=b(e,["responseJsonSchema"]);if(U!=null&&A(r,["responseJsonSchema"],U),b(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=b(e,["safetySettings"]);if(n!==void 0&&F!=null){let be=F;Array.isArray(be)&&(be=be.map(fe=>y7(fe))),A(n,["safetySettings"],be)}const z=b(e,["tools"]);if(n!==void 0&&z!=null){let be=Vu(z);Array.isArray(be)&&(be=be.map(fe=>w7(ju(fe)))),A(n,["tools"],be)}const q=b(e,["toolConfig"]);if(n!==void 0&&q!=null&&A(n,["toolConfig"],x7(q)),b(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=b(e,["cachedContent"]);n!==void 0&&H!=null&&A(n,["cachedContent"],Cs(t,H));const W=b(e,["responseModalities"]);W!=null&&A(r,["responseModalities"],W);const Z=b(e,["mediaResolution"]);Z!=null&&A(r,["mediaResolution"],Z);const X=b(e,["speechConfig"]);if(X!=null&&A(r,["speechConfig"],$x(X)),b(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ye=b(e,["thinkingConfig"]);ye!=null&&A(r,["thinkingConfig"],ye);const se=b(e,["imageConfig"]);se!=null&&A(r,["imageConfig"],l7(se));const ae=b(e,["enableEnhancedCivicAnswers"]);return ae!=null&&A(r,["enableEnhancedCivicAnswers"],ae),r}function r7(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>UB(d))),A(e,["candidates"],f)}const i=b(t,["modelVersion"]);i!=null&&A(e,["modelVersion"],i);const o=b(t,["promptFeedback"]);o!=null&&A(e,["promptFeedback"],o);const a=b(t,["responseId"]);a!=null&&A(e,["responseId"],a);const c=b(t,["usageMetadata"]);return c!=null&&A(e,["usageMetadata"],c),e}function i7(t,e){const n={},r=b(e,["name"]);return r!=null&&A(n,["_url","name"],Gu(t,r)),n}function o7(t,e){const n={},r=b(e,["name"]);return r!=null&&A(n,["_url","name"],Gu(t,r)),n}function s7(t){const e={};if(b(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(t,["enableWidget"]);return n!=null&&A(e,["enableWidget"],n),e}function a7(t){const e={};if(b(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(t,["timeRangeFilter"]);return n!=null&&A(e,["timeRangeFilter"],n),e}function l7(t){const e={},n=b(t,["aspectRatio"]);n!=null&&A(e,["aspectRatio"],n);const r=b(t,["imageSize"]);if(r!=null&&A(e,["imageSize"],r),b(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(b(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function u7(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["request","model"],kt(t,r));const i=b(e,["contents"]);if(i!=null){let c=Zi(i);Array.isArray(c)&&(c=c.map(f=>WR(f))),A(n,["request","contents"],c)}const o=b(e,["metadata"]);o!=null&&A(n,["metadata"],o);const a=b(e,["config"]);return a!=null&&A(n,["request","generationConfig"],n7(t,a,b(n,["request"],{}))),n}function c7(t){const e={},n=b(t,["response"]);n!=null&&A(e,["response"],r7(n));const r=b(t,["error"]);return r!=null&&A(e,["error"],r),e}function d7(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=b(t,["pageToken"]);if(e!==void 0&&i!=null&&A(e,["_query","pageToken"],i),b(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function f7(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=b(t,["pageToken"]);e!==void 0&&i!=null&&A(e,["_query","pageToken"],i);const o=b(t,["filter"]);return e!==void 0&&o!=null&&A(e,["_query","filter"],o),n}function h7(t){const e={},n=b(t,["config"]);return n!=null&&d7(n,e),e}function p7(t){const e={},n=b(t,["config"]);return n!=null&&f7(n,e),e}function g7(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=b(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Hh(a))),A(e,["batchJobs"],o)}return e}function m7(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=b(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>uy(a))),A(e,["batchJobs"],o)}return e}function v7(t){const e={},n=b(t,["mediaResolution"]);n!=null&&A(e,["mediaResolution"],n);const r=b(t,["codeExecutionResult"]);r!=null&&A(e,["codeExecutionResult"],r);const i=b(t,["executableCode"]);i!=null&&A(e,["executableCode"],i);const o=b(t,["fileData"]);o!=null&&A(e,["fileData"],QB(o));const a=b(t,["functionCall"]);a!=null&&A(e,["functionCall"],e7(a));const c=b(t,["functionResponse"]);c!=null&&A(e,["functionResponse"],c);const f=b(t,["inlineData"]);f!=null&&A(e,["inlineData"],LB(f));const d=b(t,["text"]);d!=null&&A(e,["text"],d);const g=b(t,["thought"]);g!=null&&A(e,["thought"],g);const y=b(t,["thoughtSignature"]);y!=null&&A(e,["thoughtSignature"],y);const E=b(t,["videoMetadata"]);return E!=null&&A(e,["videoMetadata"],E),e}function y7(t){const e={},n=b(t,["category"]);if(n!=null&&A(e,["category"],n),b(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=b(t,["threshold"]);return r!=null&&A(e,["threshold"],r),e}function x7(t){const e={},n=b(t,["functionCallingConfig"]);n!=null&&A(e,["functionCallingConfig"],t7(n));const r=b(t,["retrievalConfig"]);return r!=null&&A(e,["retrievalConfig"],r),e}function w7(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(y=>y)),A(e,["functionDeclarations"],g)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(t,["googleSearchRetrieval"]);r!=null&&A(e,["googleSearchRetrieval"],r);const i=b(t,["computerUse"]);i!=null&&A(e,["computerUse"],i);const o=b(t,["fileSearch"]);o!=null&&A(e,["fileSearch"],o);const a=b(t,["codeExecution"]);if(a!=null&&A(e,["codeExecution"],a),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=b(t,["googleMaps"]);c!=null&&A(e,["googleMaps"],s7(c));const f=b(t,["googleSearch"]);f!=null&&A(e,["googleSearch"],a7(f));const d=b(t,["urlContext"]);return d!=null&&A(e,["urlContext"],d),e}var gs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(gs||(gs={}));class El{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!r||Object.keys(r).length===0?a={config:{}}:typeof r=="object"?a=Object.assign({},r):a=r,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(i=a.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class E7 extends As{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new El(gs.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=DA(this.apiClient,e),r=n._url,i=Ue("{model}:batchGenerateContent",r),c=n.batch.inputConfig.requests,f=c.requests,d=[];for(const g of f){const y=Object.assign({},g);if(y.systemInstruction){const E=y.systemInstruction;delete y.systemInstruction;const C=y.request;C.systemInstruction=E,y.request=C}d.push(y)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),a=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(a)r.dest=`${a}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=zB(this.apiClient,e);return c=Ue("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>uy(g))}else{const d=DA(this.apiClient,e);return c=Ue("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Hh(g))}}async createEmbeddingsInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=HB(this.apiClient,e);return o=Ue("{model}:asyncBatchEmbedContent",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>Hh(f))}}async get(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=o7(this.apiClient,e);return c=Ue("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>uy(g))}else{const d=i7(this.apiClient,e);return c=Ue("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Hh(g))}}async cancel(e){var n,r,i,o;let a="",c={};if(this.apiClient.isVertexAI()){const f=FB(this.apiClient,e);a=Ue("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=BB(this.apiClient,e);a=Ue("batches/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=p7(e);return c=Ue("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=m7(g),E=new RA;return Object.assign(E,y),E})}else{const d=h7(e);return c=Ue("batches",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=g7(g),E=new RA;return Object.assign(E,y),E})}}async delete(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=WB(this.apiClient,e);return c=Ue("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>YB(g))}else{const d=qB(this.apiClient,e);return c=Ue("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>KB(g))}}}function b7(t){const e={},n=b(t,["data"]);if(n!=null&&A(e,["data"],n),b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function LA(t){const e={},n=b(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>H7(o))),A(e,["parts"],i)}const r=b(t,["role"]);return r!=null&&A(e,["role"],r),e}function _7(t,e){const n={},r=b(t,["ttl"]);e!==void 0&&r!=null&&A(e,["ttl"],r);const i=b(t,["expireTime"]);e!==void 0&&i!=null&&A(e,["expireTime"],i);const o=b(t,["displayName"]);e!==void 0&&o!=null&&A(e,["displayName"],o);const a=b(t,["contents"]);if(e!==void 0&&a!=null){let g=Zi(a);Array.isArray(g)&&(g=g.map(y=>LA(y))),A(e,["contents"],g)}const c=b(t,["systemInstruction"]);e!==void 0&&c!=null&&A(e,["systemInstruction"],LA(Gr(c)));const f=b(t,["tools"]);if(e!==void 0&&f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>W7(y))),A(e,["tools"],g)}const d=b(t,["toolConfig"]);if(e!==void 0&&d!=null&&A(e,["toolConfig"],q7(d)),b(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function A7(t,e){const n={},r=b(t,["ttl"]);e!==void 0&&r!=null&&A(e,["ttl"],r);const i=b(t,["expireTime"]);e!==void 0&&i!=null&&A(e,["expireTime"],i);const o=b(t,["displayName"]);e!==void 0&&o!=null&&A(e,["displayName"],o);const a=b(t,["contents"]);if(e!==void 0&&a!=null){let y=Zi(a);Array.isArray(y)&&(y=y.map(E=>E)),A(e,["contents"],y)}const c=b(t,["systemInstruction"]);e!==void 0&&c!=null&&A(e,["systemInstruction"],Gr(c));const f=b(t,["tools"]);if(e!==void 0&&f!=null){let y=f;Array.isArray(y)&&(y=y.map(E=>K7(E))),A(e,["tools"],y)}const d=b(t,["toolConfig"]);e!==void 0&&d!=null&&A(e,["toolConfig"],d);const g=b(t,["kmsKeyName"]);return e!==void 0&&g!=null&&A(e,["encryption_spec","kmsKeyName"],g),n}function C7(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["model"],DR(t,r));const i=b(e,["config"]);return i!=null&&_7(i,n),n}function S7(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["model"],DR(t,r));const i=b(e,["config"]);return i!=null&&A7(i,n),n}function T7(t,e){const n={},r=b(e,["name"]);return r!=null&&A(n,["_url","name"],Cs(t,r)),n}function I7(t,e){const n={},r=b(e,["name"]);return r!=null&&A(n,["_url","name"],Cs(t,r)),n}function P7(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function N7(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function R7(t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["fileUri"]);n!=null&&A(e,["fileUri"],n);const r=b(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function O7(t){const e={},n=b(t,["id"]);n!=null&&A(e,["id"],n);const r=b(t,["args"]);r!=null&&A(e,["args"],r);const i=b(t,["name"]);if(i!=null&&A(e,["name"],i),b(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(b(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function k7(t){const e={},n=b(t,["mode"]);n!=null&&A(e,["mode"],n);const r=b(t,["allowedFunctionNames"]);if(r!=null&&A(e,["allowedFunctionNames"],r),b(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function M7(t){const e={};if(b(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(t,["description"]);n!=null&&A(e,["description"],n);const r=b(t,["name"]);r!=null&&A(e,["name"],r);const i=b(t,["parameters"]);i!=null&&A(e,["parameters"],i);const o=b(t,["parametersJsonSchema"]);o!=null&&A(e,["parametersJsonSchema"],o);const a=b(t,["response"]);a!=null&&A(e,["response"],a);const c=b(t,["responseJsonSchema"]);return c!=null&&A(e,["responseJsonSchema"],c),e}function D7(t,e){const n={},r=b(e,["name"]);return r!=null&&A(n,["_url","name"],Cs(t,r)),n}function L7(t,e){const n={},r=b(e,["name"]);return r!=null&&A(n,["_url","name"],Cs(t,r)),n}function B7(t){const e={};if(b(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(t,["enableWidget"]);return n!=null&&A(e,["enableWidget"],n),e}function F7(t){const e={};if(b(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(t,["timeRangeFilter"]);return n!=null&&A(e,["timeRangeFilter"],n),e}function U7(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=b(t,["pageToken"]);return e!==void 0&&i!=null&&A(e,["_query","pageToken"],i),n}function j7(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=b(t,["pageToken"]);return e!==void 0&&i!=null&&A(e,["_query","pageToken"],i),n}function V7(t){const e={},n=b(t,["config"]);return n!=null&&U7(n,e),e}function G7(t){const e={},n=b(t,["config"]);return n!=null&&j7(n,e),e}function z7(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=b(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),A(e,["cachedContents"],o)}return e}function $7(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=b(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),A(e,["cachedContents"],o)}return e}function H7(t){const e={},n=b(t,["mediaResolution"]);n!=null&&A(e,["mediaResolution"],n);const r=b(t,["codeExecutionResult"]);r!=null&&A(e,["codeExecutionResult"],r);const i=b(t,["executableCode"]);i!=null&&A(e,["executableCode"],i);const o=b(t,["fileData"]);o!=null&&A(e,["fileData"],R7(o));const a=b(t,["functionCall"]);a!=null&&A(e,["functionCall"],O7(a));const c=b(t,["functionResponse"]);c!=null&&A(e,["functionResponse"],c);const f=b(t,["inlineData"]);f!=null&&A(e,["inlineData"],b7(f));const d=b(t,["text"]);d!=null&&A(e,["text"],d);const g=b(t,["thought"]);g!=null&&A(e,["thought"],g);const y=b(t,["thoughtSignature"]);y!=null&&A(e,["thoughtSignature"],y);const E=b(t,["videoMetadata"]);return E!=null&&A(e,["videoMetadata"],E),e}function q7(t){const e={},n=b(t,["functionCallingConfig"]);n!=null&&A(e,["functionCallingConfig"],k7(n));const r=b(t,["retrievalConfig"]);return r!=null&&A(e,["retrievalConfig"],r),e}function W7(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(y=>y)),A(e,["functionDeclarations"],g)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(t,["googleSearchRetrieval"]);r!=null&&A(e,["googleSearchRetrieval"],r);const i=b(t,["computerUse"]);i!=null&&A(e,["computerUse"],i);const o=b(t,["fileSearch"]);o!=null&&A(e,["fileSearch"],o);const a=b(t,["codeExecution"]);if(a!=null&&A(e,["codeExecution"],a),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=b(t,["googleMaps"]);c!=null&&A(e,["googleMaps"],B7(c));const f=b(t,["googleSearch"]);f!=null&&A(e,["googleSearch"],F7(f));const d=b(t,["urlContext"]);return d!=null&&A(e,["urlContext"],d),e}function K7(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>M7(E))),A(e,["functionDeclarations"],y)}const r=b(t,["retrieval"]);r!=null&&A(e,["retrieval"],r);const i=b(t,["googleSearchRetrieval"]);i!=null&&A(e,["googleSearchRetrieval"],i);const o=b(t,["computerUse"]);if(o!=null&&A(e,["computerUse"],o),b(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=b(t,["codeExecution"]);a!=null&&A(e,["codeExecution"],a);const c=b(t,["enterpriseWebSearch"]);c!=null&&A(e,["enterpriseWebSearch"],c);const f=b(t,["googleMaps"]);f!=null&&A(e,["googleMaps"],f);const d=b(t,["googleSearch"]);d!=null&&A(e,["googleSearch"],d);const g=b(t,["urlContext"]);return g!=null&&A(e,["urlContext"],g),e}function Y7(t,e){const n={},r=b(t,["ttl"]);e!==void 0&&r!=null&&A(e,["ttl"],r);const i=b(t,["expireTime"]);return e!==void 0&&i!=null&&A(e,["expireTime"],i),n}function X7(t,e){const n={},r=b(t,["ttl"]);e!==void 0&&r!=null&&A(e,["ttl"],r);const i=b(t,["expireTime"]);return e!==void 0&&i!=null&&A(e,["expireTime"],i),n}function J7(t,e){const n={},r=b(e,["name"]);r!=null&&A(n,["_url","name"],Cs(t,r));const i=b(e,["config"]);return i!=null&&Y7(i,n),n}function Z7(t,e){const n={},r=b(e,["name"]);r!=null&&A(n,["_url","name"],Cs(t,r));const i=b(e,["config"]);return i!=null&&X7(i,n),n}class Q7 extends As{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new El(gs.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=S7(this.apiClient,e);return c=Ue("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const d=C7(this.apiClient,e);return c=Ue("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=L7(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const d=D7(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=I7(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=N7(g),E=new PA;return Object.assign(E,y),E})}else{const d=T7(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=P7(g),E=new PA;return Object.assign(E,y),E})}}async update(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=Z7(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const d=J7(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async listInternal(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=G7(e);return c=Ue("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=$7(g),E=new NA;return Object.assign(E,y),E})}else{const d=V7(e);return c=Ue("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=z7(g),E=new NA;return Object.assign(E,y),E})}}}function d0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function BA(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(t){return this instanceof mt?(this.v=t,this):new mt(t)}function Eo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(C){return function(I){return Promise.resolve(I).then(C,y)}}function c(C,I){r[C]&&(i[C]=function(P){return new Promise(function(N,L){o.push([C,P,N,L])>1||f(C,P)})},I&&(i[C]=I(i[C])))}function f(C,I){try{d(r[C](I))}catch(P){E(o[0][3],P)}}function d(C){C.value instanceof mt?Promise.resolve(C.value.v).then(g,y):E(o[0][2],C)}function g(C){f("next",C)}function y(C){f("throw",C)}function E(C,I){C(I),o.shift(),o.length&&f(o[0][0],o[0][1])}}function bo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof BA=="function"?BA(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(c,f){a=t[o](a),i(c,f,a.done,a.value)})}}function i(o,a,c,f){Promise.resolve(f).then(function(d){o({value:d,done:c})},a)}}function e9(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:KR(n)}function KR(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function t9(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function FA(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!KR(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class n9{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new r9(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class r9{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),t9(o)}async sendMessage(e){var n;await this.sendPromise;const r=Gr(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,a,c;const f=await i,d=(a=(o=f.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,g=f.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let E=[];g!=null&&(E=(c=g.slice(y))!==null&&c!==void 0?c:[]);const C=d?[d]:[];this.recordHistory(r,C,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Gr(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?FA(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Eo(this,arguments,function*(){var i,o,a,c,f,d;const g=[];try{for(var y=!0,E=bo(e),C;C=yield mt(E.next()),i=C.done,!i;y=!0){c=C.value,y=!1;const I=c;if(e9(I)){const P=(d=(f=I.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content;P!==void 0&&g.push(P)}yield yield mt(I)}}catch(I){o={error:I}}finally{try{!y&&!i&&(a=E.return)&&(yield mt(a.call(E)))}finally{if(o)throw o.error}}this.recordHistory(n,g)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...FA(r)):this.history.push(e),this.history.push(...i)}}class yp extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yp.prototype)}}function i9(t){const e={},n=b(t,["file"]);return n!=null&&A(e,["file"],n),e}function o9(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function s9(t){const e={},n=b(t,["name"]);return n!=null&&A(e,["_url","file"],VR(n)),e}function a9(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function l9(t){const e={},n=b(t,["name"]);return n!=null&&A(e,["_url","file"],VR(n)),e}function u9(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=b(t,["pageToken"]);return e!==void 0&&i!=null&&A(e,["_query","pageToken"],i),n}function c9(t){const e={},n=b(t,["config"]);return n!=null&&u9(n,e),e}function d9(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=b(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),A(e,["files"],o)}return e}class f9 extends As{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new El(gs.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=c9(e);return o=Ue("files",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const g=d;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>{const d=d9(f),g=new mB;return Object.assign(g,d),g})}}async createInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=i9(e);return o=Ue("upload/v1beta/files",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=o9(f),g=new vB;return Object.assign(g,d),g})}}async get(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=l9(e);return o=Ue("files/{file}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=s9(e);return o=Ue("files/{file}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const g=d;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>{const d=a9(f),g=new yB;return Object.assign(g,d),g})}}}function qh(t){const e={},n=b(t,["data"]);if(n!=null&&A(e,["data"],n),b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function h9(t){const e={},n=b(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>P9(o))),A(e,["parts"],i)}const r=b(t,["role"]);return r!=null&&A(e,["role"],r),e}function p9(t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["fileUri"]);n!=null&&A(e,["fileUri"],n);const r=b(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function g9(t){const e={},n=b(t,["id"]);n!=null&&A(e,["id"],n);const r=b(t,["args"]);r!=null&&A(e,["args"],r);const i=b(t,["name"]);if(i!=null&&A(e,["name"],i),b(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(b(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function m9(t){const e={};if(b(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(t,["description"]);n!=null&&A(e,["description"],n);const r=b(t,["name"]);r!=null&&A(e,["name"],r);const i=b(t,["parameters"]);i!=null&&A(e,["parameters"],i);const o=b(t,["parametersJsonSchema"]);o!=null&&A(e,["parametersJsonSchema"],o);const a=b(t,["response"]);a!=null&&A(e,["response"],a);const c=b(t,["responseJsonSchema"]);return c!=null&&A(e,["responseJsonSchema"],c),e}function v9(t){const e={},n=b(t,["modelSelectionConfig"]);n!=null&&A(e,["modelConfig"],n);const r=b(t,["responseJsonSchema"]);r!=null&&A(e,["responseJsonSchema"],r);const i=b(t,["audioTimestamp"]);i!=null&&A(e,["audioTimestamp"],i);const o=b(t,["candidateCount"]);o!=null&&A(e,["candidateCount"],o);const a=b(t,["enableAffectiveDialog"]);a!=null&&A(e,["enableAffectiveDialog"],a);const c=b(t,["frequencyPenalty"]);c!=null&&A(e,["frequencyPenalty"],c);const f=b(t,["logprobs"]);f!=null&&A(e,["logprobs"],f);const d=b(t,["maxOutputTokens"]);d!=null&&A(e,["maxOutputTokens"],d);const g=b(t,["mediaResolution"]);g!=null&&A(e,["mediaResolution"],g);const y=b(t,["presencePenalty"]);y!=null&&A(e,["presencePenalty"],y);const E=b(t,["responseLogprobs"]);E!=null&&A(e,["responseLogprobs"],E);const C=b(t,["responseMimeType"]);C!=null&&A(e,["responseMimeType"],C);const I=b(t,["responseModalities"]);I!=null&&A(e,["responseModalities"],I);const P=b(t,["responseSchema"]);P!=null&&A(e,["responseSchema"],P);const N=b(t,["routingConfig"]);N!=null&&A(e,["routingConfig"],N);const L=b(t,["seed"]);L!=null&&A(e,["seed"],L);const U=b(t,["speechConfig"]);U!=null&&A(e,["speechConfig"],YR(U));const F=b(t,["stopSequences"]);F!=null&&A(e,["stopSequences"],F);const z=b(t,["temperature"]);z!=null&&A(e,["temperature"],z);const q=b(t,["thinkingConfig"]);q!=null&&A(e,["thinkingConfig"],q);const H=b(t,["topK"]);H!=null&&A(e,["topK"],H);const W=b(t,["topP"]);if(W!=null&&A(e,["topP"],W),b(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function y9(t){const e={};if(b(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(t,["enableWidget"]);return n!=null&&A(e,["enableWidget"],n),e}function x9(t){const e={};if(b(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(t,["timeRangeFilter"]);return n!=null&&A(e,["timeRangeFilter"],n),e}function w9(t,e){const n={},r=b(t,["generationConfig"]);e!==void 0&&r!=null&&A(e,["setup","generationConfig"],r);const i=b(t,["responseModalities"]);e!==void 0&&i!=null&&A(e,["setup","generationConfig","responseModalities"],i);const o=b(t,["temperature"]);e!==void 0&&o!=null&&A(e,["setup","generationConfig","temperature"],o);const a=b(t,["topP"]);e!==void 0&&a!=null&&A(e,["setup","generationConfig","topP"],a);const c=b(t,["topK"]);e!==void 0&&c!=null&&A(e,["setup","generationConfig","topK"],c);const f=b(t,["maxOutputTokens"]);e!==void 0&&f!=null&&A(e,["setup","generationConfig","maxOutputTokens"],f);const d=b(t,["mediaResolution"]);e!==void 0&&d!=null&&A(e,["setup","generationConfig","mediaResolution"],d);const g=b(t,["seed"]);e!==void 0&&g!=null&&A(e,["setup","generationConfig","seed"],g);const y=b(t,["speechConfig"]);e!==void 0&&y!=null&&A(e,["setup","generationConfig","speechConfig"],Hx(y));const E=b(t,["thinkingConfig"]);e!==void 0&&E!=null&&A(e,["setup","generationConfig","thinkingConfig"],E);const C=b(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&A(e,["setup","generationConfig","enableAffectiveDialog"],C);const I=b(t,["systemInstruction"]);e!==void 0&&I!=null&&A(e,["setup","systemInstruction"],h9(Gr(I)));const P=b(t,["tools"]);if(e!==void 0&&P!=null){let H=Vu(P);Array.isArray(H)&&(H=H.map(W=>R9(ju(W)))),A(e,["setup","tools"],H)}const N=b(t,["sessionResumption"]);e!==void 0&&N!=null&&A(e,["setup","sessionResumption"],N9(N));const L=b(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&A(e,["setup","inputAudioTranscription"],L);const U=b(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&A(e,["setup","outputAudioTranscription"],U);const F=b(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&A(e,["setup","realtimeInputConfig"],F);const z=b(t,["contextWindowCompression"]);e!==void 0&&z!=null&&A(e,["setup","contextWindowCompression"],z);const q=b(t,["proactivity"]);if(e!==void 0&&q!=null&&A(e,["setup","proactivity"],q),b(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function E9(t,e){const n={},r=b(t,["generationConfig"]);e!==void 0&&r!=null&&A(e,["setup","generationConfig"],v9(r));const i=b(t,["responseModalities"]);e!==void 0&&i!=null&&A(e,["setup","generationConfig","responseModalities"],i);const o=b(t,["temperature"]);e!==void 0&&o!=null&&A(e,["setup","generationConfig","temperature"],o);const a=b(t,["topP"]);e!==void 0&&a!=null&&A(e,["setup","generationConfig","topP"],a);const c=b(t,["topK"]);e!==void 0&&c!=null&&A(e,["setup","generationConfig","topK"],c);const f=b(t,["maxOutputTokens"]);e!==void 0&&f!=null&&A(e,["setup","generationConfig","maxOutputTokens"],f);const d=b(t,["mediaResolution"]);e!==void 0&&d!=null&&A(e,["setup","generationConfig","mediaResolution"],d);const g=b(t,["seed"]);e!==void 0&&g!=null&&A(e,["setup","generationConfig","seed"],g);const y=b(t,["speechConfig"]);e!==void 0&&y!=null&&A(e,["setup","generationConfig","speechConfig"],YR(Hx(y)));const E=b(t,["thinkingConfig"]);e!==void 0&&E!=null&&A(e,["setup","generationConfig","thinkingConfig"],E);const C=b(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&A(e,["setup","generationConfig","enableAffectiveDialog"],C);const I=b(t,["systemInstruction"]);e!==void 0&&I!=null&&A(e,["setup","systemInstruction"],Gr(I));const P=b(t,["tools"]);if(e!==void 0&&P!=null){let W=Vu(P);Array.isArray(W)&&(W=W.map(Z=>O9(ju(Z)))),A(e,["setup","tools"],W)}const N=b(t,["sessionResumption"]);e!==void 0&&N!=null&&A(e,["setup","sessionResumption"],N);const L=b(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&A(e,["setup","inputAudioTranscription"],L);const U=b(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&A(e,["setup","outputAudioTranscription"],U);const F=b(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&A(e,["setup","realtimeInputConfig"],F);const z=b(t,["contextWindowCompression"]);e!==void 0&&z!=null&&A(e,["setup","contextWindowCompression"],z);const q=b(t,["proactivity"]);e!==void 0&&q!=null&&A(e,["setup","proactivity"],q);const H=b(t,["explicitVadSignal"]);return e!==void 0&&H!=null&&A(e,["setup","explicitVadSignal"],H),n}function b9(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["setup","model"],kt(t,r));const i=b(e,["config"]);return i!=null&&A(n,["config"],w9(i,n)),n}function _9(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["setup","model"],kt(t,r));const i=b(e,["config"]);return i!=null&&A(n,["config"],E9(i,n)),n}function A9(t){const e={},n=b(t,["musicGenerationConfig"]);return n!=null&&A(e,["musicGenerationConfig"],n),e}function C9(t){const e={},n=b(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),A(e,["weightedPrompts"],r)}return e}function S9(t){const e={},n=b(t,["media"]);if(n!=null){let d=LR(n);Array.isArray(d)&&(d=d.map(g=>qh(g))),A(e,["mediaChunks"],d)}const r=b(t,["audio"]);r!=null&&A(e,["audio"],qh(FR(r)));const i=b(t,["audioStreamEnd"]);i!=null&&A(e,["audioStreamEnd"],i);const o=b(t,["video"]);o!=null&&A(e,["video"],qh(BR(o)));const a=b(t,["text"]);a!=null&&A(e,["text"],a);const c=b(t,["activityStart"]);c!=null&&A(e,["activityStart"],c);const f=b(t,["activityEnd"]);return f!=null&&A(e,["activityEnd"],f),e}function T9(t){const e={},n=b(t,["media"]);if(n!=null){let d=LR(n);Array.isArray(d)&&(d=d.map(g=>g)),A(e,["mediaChunks"],d)}const r=b(t,["audio"]);r!=null&&A(e,["audio"],FR(r));const i=b(t,["audioStreamEnd"]);i!=null&&A(e,["audioStreamEnd"],i);const o=b(t,["video"]);o!=null&&A(e,["video"],BR(o));const a=b(t,["text"]);a!=null&&A(e,["text"],a);const c=b(t,["activityStart"]);c!=null&&A(e,["activityStart"],c);const f=b(t,["activityEnd"]);return f!=null&&A(e,["activityEnd"],f),e}function I9(t){const e={},n=b(t,["setupComplete"]);n!=null&&A(e,["setupComplete"],n);const r=b(t,["serverContent"]);r!=null&&A(e,["serverContent"],r);const i=b(t,["toolCall"]);i!=null&&A(e,["toolCall"],i);const o=b(t,["toolCallCancellation"]);o!=null&&A(e,["toolCallCancellation"],o);const a=b(t,["usageMetadata"]);a!=null&&A(e,["usageMetadata"],k9(a));const c=b(t,["goAway"]);c!=null&&A(e,["goAway"],c);const f=b(t,["sessionResumptionUpdate"]);f!=null&&A(e,["sessionResumptionUpdate"],f);const d=b(t,["voiceActivityDetectionSignal"]);return d!=null&&A(e,["voiceActivityDetectionSignal"],d),e}function P9(t){const e={},n=b(t,["mediaResolution"]);n!=null&&A(e,["mediaResolution"],n);const r=b(t,["codeExecutionResult"]);r!=null&&A(e,["codeExecutionResult"],r);const i=b(t,["executableCode"]);i!=null&&A(e,["executableCode"],i);const o=b(t,["fileData"]);o!=null&&A(e,["fileData"],p9(o));const a=b(t,["functionCall"]);a!=null&&A(e,["functionCall"],g9(a));const c=b(t,["functionResponse"]);c!=null&&A(e,["functionResponse"],c);const f=b(t,["inlineData"]);f!=null&&A(e,["inlineData"],qh(f));const d=b(t,["text"]);d!=null&&A(e,["text"],d);const g=b(t,["thought"]);g!=null&&A(e,["thought"],g);const y=b(t,["thoughtSignature"]);y!=null&&A(e,["thoughtSignature"],y);const E=b(t,["videoMetadata"]);return E!=null&&A(e,["videoMetadata"],E),e}function N9(t){const e={},n=b(t,["handle"]);if(n!=null&&A(e,["handle"],n),b(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function YR(t){const e={},n=b(t,["voiceConfig"]);n!=null&&A(e,["voiceConfig"],n);const r=b(t,["languageCode"]);if(r!=null&&A(e,["languageCode"],r),b(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function R9(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(y=>y)),A(e,["functionDeclarations"],g)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(t,["googleSearchRetrieval"]);r!=null&&A(e,["googleSearchRetrieval"],r);const i=b(t,["computerUse"]);i!=null&&A(e,["computerUse"],i);const o=b(t,["fileSearch"]);o!=null&&A(e,["fileSearch"],o);const a=b(t,["codeExecution"]);if(a!=null&&A(e,["codeExecution"],a),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=b(t,["googleMaps"]);c!=null&&A(e,["googleMaps"],y9(c));const f=b(t,["googleSearch"]);f!=null&&A(e,["googleSearch"],x9(f));const d=b(t,["urlContext"]);return d!=null&&A(e,["urlContext"],d),e}function O9(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>m9(E))),A(e,["functionDeclarations"],y)}const r=b(t,["retrieval"]);r!=null&&A(e,["retrieval"],r);const i=b(t,["googleSearchRetrieval"]);i!=null&&A(e,["googleSearchRetrieval"],i);const o=b(t,["computerUse"]);if(o!=null&&A(e,["computerUse"],o),b(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=b(t,["codeExecution"]);a!=null&&A(e,["codeExecution"],a);const c=b(t,["enterpriseWebSearch"]);c!=null&&A(e,["enterpriseWebSearch"],c);const f=b(t,["googleMaps"]);f!=null&&A(e,["googleMaps"],f);const d=b(t,["googleSearch"]);d!=null&&A(e,["googleSearch"],d);const g=b(t,["urlContext"]);return g!=null&&A(e,["urlContext"],g),e}function k9(t){const e={},n=b(t,["promptTokenCount"]);n!=null&&A(e,["promptTokenCount"],n);const r=b(t,["cachedContentTokenCount"]);r!=null&&A(e,["cachedContentTokenCount"],r);const i=b(t,["candidatesTokenCount"]);i!=null&&A(e,["responseTokenCount"],i);const o=b(t,["toolUsePromptTokenCount"]);o!=null&&A(e,["toolUsePromptTokenCount"],o);const a=b(t,["thoughtsTokenCount"]);a!=null&&A(e,["thoughtsTokenCount"],a);const c=b(t,["totalTokenCount"]);c!=null&&A(e,["totalTokenCount"],c);const f=b(t,["promptTokensDetails"]);if(f!=null){let C=f;Array.isArray(C)&&(C=C.map(I=>I)),A(e,["promptTokensDetails"],C)}const d=b(t,["cacheTokensDetails"]);if(d!=null){let C=d;Array.isArray(C)&&(C=C.map(I=>I)),A(e,["cacheTokensDetails"],C)}const g=b(t,["candidatesTokensDetails"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(I=>I)),A(e,["responseTokensDetails"],C)}const y=b(t,["toolUsePromptTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(I=>I)),A(e,["toolUsePromptTokensDetails"],C)}const E=b(t,["trafficType"]);return E!=null&&A(e,["trafficType"],E),e}function M9(t){const e={},n=b(t,["data"]);if(n!=null&&A(e,["data"],n),b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function D9(t){const e={},n=b(t,["content"]);n!=null&&A(e,["content"],n);const r=b(t,["citationMetadata"]);r!=null&&A(e,["citationMetadata"],L9(r));const i=b(t,["tokenCount"]);i!=null&&A(e,["tokenCount"],i);const o=b(t,["finishReason"]);o!=null&&A(e,["finishReason"],o);const a=b(t,["avgLogprobs"]);a!=null&&A(e,["avgLogprobs"],a);const c=b(t,["groundingMetadata"]);c!=null&&A(e,["groundingMetadata"],c);const f=b(t,["index"]);f!=null&&A(e,["index"],f);const d=b(t,["logprobsResult"]);d!=null&&A(e,["logprobsResult"],d);const g=b(t,["safetyRatings"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(C=>C)),A(e,["safetyRatings"],E)}const y=b(t,["urlContextMetadata"]);return y!=null&&A(e,["urlContextMetadata"],y),e}function L9(t){const e={},n=b(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),A(e,["citations"],r)}return e}function B9(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["contents"]);if(i!=null){let o=Zi(i);Array.isArray(o)&&(o=o.map(a=>a)),A(n,["contents"],o)}return n}function F9(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),A(e,["tokensInfo"],i)}return e}function U9(t){const e={},n=b(t,["values"]);n!=null&&A(e,["values"],n);const r=b(t,["statistics"]);return r!=null&&A(e,["statistics"],j9(r)),e}function j9(t){const e={},n=b(t,["truncated"]);n!=null&&A(e,["truncated"],n);const r=b(t,["token_count"]);return r!=null&&A(e,["tokenCount"],r),e}function xp(t){const e={},n=b(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>YF(o))),A(e,["parts"],i)}const r=b(t,["role"]);return r!=null&&A(e,["role"],r),e}function V9(t){const e={},n=b(t,["controlType"]);n!=null&&A(e,["controlType"],n);const r=b(t,["enableControlImageComputation"]);return r!=null&&A(e,["computeControl"],r),e}function G9(t){const e={};if(b(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(b(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(b(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function z9(t,e){const n={},r=b(t,["systemInstruction"]);e!==void 0&&r!=null&&A(e,["systemInstruction"],Gr(r));const i=b(t,["tools"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>eO(c))),A(e,["tools"],a)}const o=b(t,["generationConfig"]);return e!==void 0&&o!=null&&A(e,["generationConfig"],MF(o)),n}function $9(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["contents"]);if(i!=null){let a=Zi(i);Array.isArray(a)&&(a=a.map(c=>xp(c))),A(n,["contents"],a)}const o=b(e,["config"]);return o!=null&&G9(o),n}function H9(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["contents"]);if(i!=null){let a=Zi(i);Array.isArray(a)&&(a=a.map(c=>c)),A(n,["contents"],a)}const o=b(e,["config"]);return o!=null&&z9(o,n),n}function q9(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["totalTokens"]);r!=null&&A(e,["totalTokens"],r);const i=b(t,["cachedContentTokenCount"]);return i!=null&&A(e,["cachedContentTokenCount"],i),e}function W9(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["totalTokens"]);return r!=null&&A(e,["totalTokens"],r),e}function K9(t,e){const n={},r=b(e,["model"]);return r!=null&&A(n,["_url","name"],kt(t,r)),n}function Y9(t,e){const n={},r=b(e,["model"]);return r!=null&&A(n,["_url","name"],kt(t,r)),n}function X9(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function J9(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function Z9(t,e){const n={},r=b(t,["outputGcsUri"]);e!==void 0&&r!=null&&A(e,["parameters","storageUri"],r);const i=b(t,["negativePrompt"]);e!==void 0&&i!=null&&A(e,["parameters","negativePrompt"],i);const o=b(t,["numberOfImages"]);e!==void 0&&o!=null&&A(e,["parameters","sampleCount"],o);const a=b(t,["aspectRatio"]);e!==void 0&&a!=null&&A(e,["parameters","aspectRatio"],a);const c=b(t,["guidanceScale"]);e!==void 0&&c!=null&&A(e,["parameters","guidanceScale"],c);const f=b(t,["seed"]);e!==void 0&&f!=null&&A(e,["parameters","seed"],f);const d=b(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&A(e,["parameters","safetySetting"],d);const g=b(t,["personGeneration"]);e!==void 0&&g!=null&&A(e,["parameters","personGeneration"],g);const y=b(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&A(e,["parameters","includeSafetyAttributes"],y);const E=b(t,["includeRaiReason"]);e!==void 0&&E!=null&&A(e,["parameters","includeRaiReason"],E);const C=b(t,["language"]);e!==void 0&&C!=null&&A(e,["parameters","language"],C);const I=b(t,["outputMimeType"]);e!==void 0&&I!=null&&A(e,["parameters","outputOptions","mimeType"],I);const P=b(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&A(e,["parameters","outputOptions","compressionQuality"],P);const N=b(t,["addWatermark"]);e!==void 0&&N!=null&&A(e,["parameters","addWatermark"],N);const L=b(t,["labels"]);e!==void 0&&L!=null&&A(e,["labels"],L);const U=b(t,["editMode"]);e!==void 0&&U!=null&&A(e,["parameters","editMode"],U);const F=b(t,["baseSteps"]);return e!==void 0&&F!=null&&A(e,["parameters","editConfig","baseSteps"],F),n}function Q9(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["prompt"]);i!=null&&A(n,["instances[0]","prompt"],i);const o=b(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>tU(f))),A(n,["instances[0]","referenceImages"],c)}const a=b(e,["config"]);return a!=null&&Z9(a,n),n}function eF(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>wp(o))),A(e,["generatedImages"],i)}return e}function tF(t,e){const n={},r=b(t,["taskType"]);e!==void 0&&r!=null&&A(e,["requests[]","taskType"],r);const i=b(t,["title"]);e!==void 0&&i!=null&&A(e,["requests[]","title"],i);const o=b(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&A(e,["requests[]","outputDimensionality"],o),b(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(b(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function nF(t,e){const n={},r=b(t,["taskType"]);e!==void 0&&r!=null&&A(e,["instances[]","task_type"],r);const i=b(t,["title"]);e!==void 0&&i!=null&&A(e,["instances[]","title"],i);const o=b(t,["outputDimensionality"]);e!==void 0&&o!=null&&A(e,["parameters","outputDimensionality"],o);const a=b(t,["mimeType"]);e!==void 0&&a!=null&&A(e,["instances[]","mimeType"],a);const c=b(t,["autoTruncate"]);return e!==void 0&&c!=null&&A(e,["parameters","autoTruncate"],c),n}function rF(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["contents"]);if(i!=null){let c=Gx(t,i);Array.isArray(c)&&(c=c.map(f=>f)),A(n,["requests[]","content"],c)}const o=b(e,["config"]);o!=null&&tF(o,n);const a=b(e,["model"]);return a!==void 0&&A(n,["requests[]","model"],kt(t,a)),n}function iF(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["contents"]);if(i!=null){let a=Gx(t,i);Array.isArray(a)&&(a=a.map(c=>c)),A(n,["instances[]","content"],a)}const o=b(e,["config"]);return o!=null&&nF(o,n),n}function oF(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),A(e,["embeddings"],o)}const i=b(t,["metadata"]);return i!=null&&A(e,["metadata"],i),e}function sF(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>U9(a))),A(e,["embeddings"],o)}const i=b(t,["metadata"]);return i!=null&&A(e,["metadata"],i),e}function aF(t){const e={},n=b(t,["endpoint"]);n!=null&&A(e,["name"],n);const r=b(t,["deployedModelId"]);return r!=null&&A(e,["deployedModelId"],r),e}function lF(t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["fileUri"]);n!=null&&A(e,["fileUri"],n);const r=b(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function uF(t){const e={},n=b(t,["id"]);n!=null&&A(e,["id"],n);const r=b(t,["args"]);r!=null&&A(e,["args"],r);const i=b(t,["name"]);if(i!=null&&A(e,["name"],i),b(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(b(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cF(t){const e={},n=b(t,["mode"]);n!=null&&A(e,["mode"],n);const r=b(t,["allowedFunctionNames"]);if(r!=null&&A(e,["allowedFunctionNames"],r),b(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dF(t){const e={};if(b(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(t,["description"]);n!=null&&A(e,["description"],n);const r=b(t,["name"]);r!=null&&A(e,["name"],r);const i=b(t,["parameters"]);i!=null&&A(e,["parameters"],i);const o=b(t,["parametersJsonSchema"]);o!=null&&A(e,["parametersJsonSchema"],o);const a=b(t,["response"]);a!=null&&A(e,["response"],a);const c=b(t,["responseJsonSchema"]);return c!=null&&A(e,["responseJsonSchema"],c),e}function fF(t,e,n){const r={},i=b(e,["systemInstruction"]);n!==void 0&&i!=null&&A(n,["systemInstruction"],xp(Gr(i)));const o=b(e,["temperature"]);o!=null&&A(r,["temperature"],o);const a=b(e,["topP"]);a!=null&&A(r,["topP"],a);const c=b(e,["topK"]);c!=null&&A(r,["topK"],c);const f=b(e,["candidateCount"]);f!=null&&A(r,["candidateCount"],f);const d=b(e,["maxOutputTokens"]);d!=null&&A(r,["maxOutputTokens"],d);const g=b(e,["stopSequences"]);g!=null&&A(r,["stopSequences"],g);const y=b(e,["responseLogprobs"]);y!=null&&A(r,["responseLogprobs"],y);const E=b(e,["logprobs"]);E!=null&&A(r,["logprobs"],E);const C=b(e,["presencePenalty"]);C!=null&&A(r,["presencePenalty"],C);const I=b(e,["frequencyPenalty"]);I!=null&&A(r,["frequencyPenalty"],I);const P=b(e,["seed"]);P!=null&&A(r,["seed"],P);const N=b(e,["responseMimeType"]);N!=null&&A(r,["responseMimeType"],N);const L=b(e,["responseSchema"]);L!=null&&A(r,["responseSchema"],zx(L));const U=b(e,["responseJsonSchema"]);if(U!=null&&A(r,["responseJsonSchema"],U),b(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=b(e,["safetySettings"]);if(n!==void 0&&F!=null){let be=F;Array.isArray(be)&&(be=be.map(fe=>nU(fe))),A(n,["safetySettings"],be)}const z=b(e,["tools"]);if(n!==void 0&&z!=null){let be=Vu(z);Array.isArray(be)&&(be=be.map(fe=>uU(ju(fe)))),A(n,["tools"],be)}const q=b(e,["toolConfig"]);if(n!==void 0&&q!=null&&A(n,["toolConfig"],lU(q)),b(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=b(e,["cachedContent"]);n!==void 0&&H!=null&&A(n,["cachedContent"],Cs(t,H));const W=b(e,["responseModalities"]);W!=null&&A(r,["responseModalities"],W);const Z=b(e,["mediaResolution"]);Z!=null&&A(r,["mediaResolution"],Z);const X=b(e,["speechConfig"]);if(X!=null&&A(r,["speechConfig"],$x(X)),b(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ye=b(e,["thinkingConfig"]);ye!=null&&A(r,["thinkingConfig"],ye);const se=b(e,["imageConfig"]);se!=null&&A(r,["imageConfig"],UF(se));const ae=b(e,["enableEnhancedCivicAnswers"]);return ae!=null&&A(r,["enableEnhancedCivicAnswers"],ae),r}function hF(t,e,n){const r={},i=b(e,["systemInstruction"]);n!==void 0&&i!=null&&A(n,["systemInstruction"],Gr(i));const o=b(e,["temperature"]);o!=null&&A(r,["temperature"],o);const a=b(e,["topP"]);a!=null&&A(r,["topP"],a);const c=b(e,["topK"]);c!=null&&A(r,["topK"],c);const f=b(e,["candidateCount"]);f!=null&&A(r,["candidateCount"],f);const d=b(e,["maxOutputTokens"]);d!=null&&A(r,["maxOutputTokens"],d);const g=b(e,["stopSequences"]);g!=null&&A(r,["stopSequences"],g);const y=b(e,["responseLogprobs"]);y!=null&&A(r,["responseLogprobs"],y);const E=b(e,["logprobs"]);E!=null&&A(r,["logprobs"],E);const C=b(e,["presencePenalty"]);C!=null&&A(r,["presencePenalty"],C);const I=b(e,["frequencyPenalty"]);I!=null&&A(r,["frequencyPenalty"],I);const P=b(e,["seed"]);P!=null&&A(r,["seed"],P);const N=b(e,["responseMimeType"]);N!=null&&A(r,["responseMimeType"],N);const L=b(e,["responseSchema"]);L!=null&&A(r,["responseSchema"],zx(L));const U=b(e,["responseJsonSchema"]);U!=null&&A(r,["responseJsonSchema"],U);const F=b(e,["routingConfig"]);F!=null&&A(r,["routingConfig"],F);const z=b(e,["modelSelectionConfig"]);z!=null&&A(r,["modelConfig"],z);const q=b(e,["safetySettings"]);if(n!==void 0&&q!=null){let we=q;Array.isArray(we)&&(we=we.map(me=>me)),A(n,["safetySettings"],we)}const H=b(e,["tools"]);if(n!==void 0&&H!=null){let we=Vu(H);Array.isArray(we)&&(we=we.map(me=>eO(ju(me)))),A(n,["tools"],we)}const W=b(e,["toolConfig"]);n!==void 0&&W!=null&&A(n,["toolConfig"],W);const Z=b(e,["labels"]);n!==void 0&&Z!=null&&A(n,["labels"],Z);const X=b(e,["cachedContent"]);n!==void 0&&X!=null&&A(n,["cachedContent"],Cs(t,X));const ye=b(e,["responseModalities"]);ye!=null&&A(r,["responseModalities"],ye);const se=b(e,["mediaResolution"]);se!=null&&A(r,["mediaResolution"],se);const ae=b(e,["speechConfig"]);ae!=null&&A(r,["speechConfig"],QR($x(ae)));const be=b(e,["audioTimestamp"]);be!=null&&A(r,["audioTimestamp"],be);const fe=b(e,["thinkingConfig"]);fe!=null&&A(r,["thinkingConfig"],fe);const ne=b(e,["imageConfig"]);if(ne!=null&&A(r,["imageConfig"],jF(ne)),b(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function UA(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["contents"]);if(i!=null){let a=Zi(i);Array.isArray(a)&&(a=a.map(c=>xp(c))),A(n,["contents"],a)}const o=b(e,["config"]);return o!=null&&A(n,["generationConfig"],fF(t,o,n)),n}function jA(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["contents"]);if(i!=null){let a=Zi(i);Array.isArray(a)&&(a=a.map(c=>c)),A(n,["contents"],a)}const o=b(e,["config"]);return o!=null&&A(n,["generationConfig"],hF(t,o,n)),n}function VA(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>D9(d))),A(e,["candidates"],f)}const i=b(t,["modelVersion"]);i!=null&&A(e,["modelVersion"],i);const o=b(t,["promptFeedback"]);o!=null&&A(e,["promptFeedback"],o);const a=b(t,["responseId"]);a!=null&&A(e,["responseId"],a);const c=b(t,["usageMetadata"]);return c!=null&&A(e,["usageMetadata"],c),e}function GA(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(g=>g)),A(e,["candidates"],d)}const i=b(t,["createTime"]);i!=null&&A(e,["createTime"],i);const o=b(t,["modelVersion"]);o!=null&&A(e,["modelVersion"],o);const a=b(t,["promptFeedback"]);a!=null&&A(e,["promptFeedback"],a);const c=b(t,["responseId"]);c!=null&&A(e,["responseId"],c);const f=b(t,["usageMetadata"]);return f!=null&&A(e,["usageMetadata"],f),e}function pF(t,e){const n={};if(b(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=b(t,["numberOfImages"]);e!==void 0&&r!=null&&A(e,["parameters","sampleCount"],r);const i=b(t,["aspectRatio"]);e!==void 0&&i!=null&&A(e,["parameters","aspectRatio"],i);const o=b(t,["guidanceScale"]);if(e!==void 0&&o!=null&&A(e,["parameters","guidanceScale"],o),b(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=b(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&A(e,["parameters","safetySetting"],a);const c=b(t,["personGeneration"]);e!==void 0&&c!=null&&A(e,["parameters","personGeneration"],c);const f=b(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&A(e,["parameters","includeSafetyAttributes"],f);const d=b(t,["includeRaiReason"]);e!==void 0&&d!=null&&A(e,["parameters","includeRaiReason"],d);const g=b(t,["language"]);e!==void 0&&g!=null&&A(e,["parameters","language"],g);const y=b(t,["outputMimeType"]);e!==void 0&&y!=null&&A(e,["parameters","outputOptions","mimeType"],y);const E=b(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&A(e,["parameters","outputOptions","compressionQuality"],E),b(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(b(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=b(t,["imageSize"]);if(e!==void 0&&C!=null&&A(e,["parameters","sampleImageSize"],C),b(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function gF(t,e){const n={},r=b(t,["outputGcsUri"]);e!==void 0&&r!=null&&A(e,["parameters","storageUri"],r);const i=b(t,["negativePrompt"]);e!==void 0&&i!=null&&A(e,["parameters","negativePrompt"],i);const o=b(t,["numberOfImages"]);e!==void 0&&o!=null&&A(e,["parameters","sampleCount"],o);const a=b(t,["aspectRatio"]);e!==void 0&&a!=null&&A(e,["parameters","aspectRatio"],a);const c=b(t,["guidanceScale"]);e!==void 0&&c!=null&&A(e,["parameters","guidanceScale"],c);const f=b(t,["seed"]);e!==void 0&&f!=null&&A(e,["parameters","seed"],f);const d=b(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&A(e,["parameters","safetySetting"],d);const g=b(t,["personGeneration"]);e!==void 0&&g!=null&&A(e,["parameters","personGeneration"],g);const y=b(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&A(e,["parameters","includeSafetyAttributes"],y);const E=b(t,["includeRaiReason"]);e!==void 0&&E!=null&&A(e,["parameters","includeRaiReason"],E);const C=b(t,["language"]);e!==void 0&&C!=null&&A(e,["parameters","language"],C);const I=b(t,["outputMimeType"]);e!==void 0&&I!=null&&A(e,["parameters","outputOptions","mimeType"],I);const P=b(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&A(e,["parameters","outputOptions","compressionQuality"],P);const N=b(t,["addWatermark"]);e!==void 0&&N!=null&&A(e,["parameters","addWatermark"],N);const L=b(t,["labels"]);e!==void 0&&L!=null&&A(e,["labels"],L);const U=b(t,["imageSize"]);e!==void 0&&U!=null&&A(e,["parameters","sampleImageSize"],U);const F=b(t,["enhancePrompt"]);return e!==void 0&&F!=null&&A(e,["parameters","enhancePrompt"],F),n}function mF(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["prompt"]);i!=null&&A(n,["instances[0]","prompt"],i);const o=b(e,["config"]);return o!=null&&pF(o,n),n}function vF(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["prompt"]);i!=null&&A(n,["instances[0]","prompt"],i);const o=b(e,["config"]);return o!=null&&gF(o,n),n}function yF(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>NF(a))),A(e,["generatedImages"],o)}const i=b(t,["positivePromptSafetyAttributes"]);return i!=null&&A(e,["positivePromptSafetyAttributes"],JR(i)),e}function xF(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>wp(a))),A(e,["generatedImages"],o)}const i=b(t,["positivePromptSafetyAttributes"]);return i!=null&&A(e,["positivePromptSafetyAttributes"],ZR(i)),e}function wF(t,e){const n={},r=b(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&A(e,["parameters","sampleCount"],r),b(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=b(t,["durationSeconds"]);if(e!==void 0&&i!=null&&A(e,["parameters","durationSeconds"],i),b(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=b(t,["aspectRatio"]);e!==void 0&&o!=null&&A(e,["parameters","aspectRatio"],o);const a=b(t,["resolution"]);e!==void 0&&a!=null&&A(e,["parameters","resolution"],a);const c=b(t,["personGeneration"]);if(e!==void 0&&c!=null&&A(e,["parameters","personGeneration"],c),b(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=b(t,["negativePrompt"]);e!==void 0&&f!=null&&A(e,["parameters","negativePrompt"],f);const d=b(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&A(e,["parameters","enhancePrompt"],d),b(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=b(t,["lastFrame"]);e!==void 0&&g!=null&&A(e,["instances[0]","lastFrame"],Ep(g));const y=b(t,["referenceImages"]);if(e!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(C=>bU(C))),A(e,["instances[0]","referenceImages"],E)}if(b(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(b(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function EF(t,e){const n={},r=b(t,["numberOfVideos"]);e!==void 0&&r!=null&&A(e,["parameters","sampleCount"],r);const i=b(t,["outputGcsUri"]);e!==void 0&&i!=null&&A(e,["parameters","storageUri"],i);const o=b(t,["fps"]);e!==void 0&&o!=null&&A(e,["parameters","fps"],o);const a=b(t,["durationSeconds"]);e!==void 0&&a!=null&&A(e,["parameters","durationSeconds"],a);const c=b(t,["seed"]);e!==void 0&&c!=null&&A(e,["parameters","seed"],c);const f=b(t,["aspectRatio"]);e!==void 0&&f!=null&&A(e,["parameters","aspectRatio"],f);const d=b(t,["resolution"]);e!==void 0&&d!=null&&A(e,["parameters","resolution"],d);const g=b(t,["personGeneration"]);e!==void 0&&g!=null&&A(e,["parameters","personGeneration"],g);const y=b(t,["pubsubTopic"]);e!==void 0&&y!=null&&A(e,["parameters","pubsubTopic"],y);const E=b(t,["negativePrompt"]);e!==void 0&&E!=null&&A(e,["parameters","negativePrompt"],E);const C=b(t,["enhancePrompt"]);e!==void 0&&C!=null&&A(e,["parameters","enhancePrompt"],C);const I=b(t,["generateAudio"]);e!==void 0&&I!=null&&A(e,["parameters","generateAudio"],I);const P=b(t,["lastFrame"]);e!==void 0&&P!=null&&A(e,["instances[0]","lastFrame"],Co(P));const N=b(t,["referenceImages"]);if(e!==void 0&&N!=null){let F=N;Array.isArray(F)&&(F=F.map(z=>_U(z))),A(e,["instances[0]","referenceImages"],F)}const L=b(t,["mask"]);e!==void 0&&L!=null&&A(e,["instances[0]","mask"],EU(L));const U=b(t,["compressionQuality"]);return e!==void 0&&U!=null&&A(e,["parameters","compressionQuality"],U),n}function bF(t){const e={},n=b(t,["name"]);n!=null&&A(e,["name"],n);const r=b(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=b(t,["done"]);i!=null&&A(e,["done"],i);const o=b(t,["error"]);o!=null&&A(e,["error"],o);const a=b(t,["response","generateVideoResponse"]);return a!=null&&A(e,["response"],SF(a)),e}function _F(t){const e={},n=b(t,["name"]);n!=null&&A(e,["name"],n);const r=b(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=b(t,["done"]);i!=null&&A(e,["done"],i);const o=b(t,["error"]);o!=null&&A(e,["error"],o);const a=b(t,["response"]);return a!=null&&A(e,["response"],TF(a)),e}function AF(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["prompt"]);i!=null&&A(n,["instances[0]","prompt"],i);const o=b(e,["image"]);o!=null&&A(n,["instances[0]","image"],Ep(o));const a=b(e,["video"]);a!=null&&A(n,["instances[0]","video"],tO(a));const c=b(e,["source"]);c!=null&&IF(c,n);const f=b(e,["config"]);return f!=null&&wF(f,n),n}function CF(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["prompt"]);i!=null&&A(n,["instances[0]","prompt"],i);const o=b(e,["image"]);o!=null&&A(n,["instances[0]","image"],Co(o));const a=b(e,["video"]);a!=null&&A(n,["instances[0]","video"],nO(a));const c=b(e,["source"]);c!=null&&PF(c,n);const f=b(e,["config"]);return f!=null&&EF(f,n),n}function SF(t){const e={},n=b(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>OF(a))),A(e,["generatedVideos"],o)}const r=b(t,["raiMediaFilteredCount"]);r!=null&&A(e,["raiMediaFilteredCount"],r);const i=b(t,["raiMediaFilteredReasons"]);return i!=null&&A(e,["raiMediaFilteredReasons"],i),e}function TF(t){const e={},n=b(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>kF(a))),A(e,["generatedVideos"],o)}const r=b(t,["raiMediaFilteredCount"]);r!=null&&A(e,["raiMediaFilteredCount"],r);const i=b(t,["raiMediaFilteredReasons"]);return i!=null&&A(e,["raiMediaFilteredReasons"],i),e}function IF(t,e){const n={},r=b(t,["prompt"]);e!==void 0&&r!=null&&A(e,["instances[0]","prompt"],r);const i=b(t,["image"]);e!==void 0&&i!=null&&A(e,["instances[0]","image"],Ep(i));const o=b(t,["video"]);return e!==void 0&&o!=null&&A(e,["instances[0]","video"],tO(o)),n}function PF(t,e){const n={},r=b(t,["prompt"]);e!==void 0&&r!=null&&A(e,["instances[0]","prompt"],r);const i=b(t,["image"]);e!==void 0&&i!=null&&A(e,["instances[0]","image"],Co(i));const o=b(t,["video"]);return e!==void 0&&o!=null&&A(e,["instances[0]","video"],nO(o)),n}function NF(t){const e={},n=b(t,["_self"]);n!=null&&A(e,["image"],VF(n));const r=b(t,["raiFilteredReason"]);r!=null&&A(e,["raiFilteredReason"],r);const i=b(t,["_self"]);return i!=null&&A(e,["safetyAttributes"],JR(i)),e}function wp(t){const e={},n=b(t,["_self"]);n!=null&&A(e,["image"],XR(n));const r=b(t,["raiFilteredReason"]);r!=null&&A(e,["raiFilteredReason"],r);const i=b(t,["_self"]);i!=null&&A(e,["safetyAttributes"],ZR(i));const o=b(t,["prompt"]);return o!=null&&A(e,["enhancedPrompt"],o),e}function RF(t){const e={},n=b(t,["_self"]);n!=null&&A(e,["mask"],XR(n));const r=b(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),A(e,["labels"],i)}return e}function OF(t){const e={},n=b(t,["video"]);return n!=null&&A(e,["video"],xU(n)),e}function kF(t){const e={},n=b(t,["_self"]);return n!=null&&A(e,["video"],wU(n)),e}function MF(t){const e={},n=b(t,["modelSelectionConfig"]);n!=null&&A(e,["modelConfig"],n);const r=b(t,["responseJsonSchema"]);r!=null&&A(e,["responseJsonSchema"],r);const i=b(t,["audioTimestamp"]);i!=null&&A(e,["audioTimestamp"],i);const o=b(t,["candidateCount"]);o!=null&&A(e,["candidateCount"],o);const a=b(t,["enableAffectiveDialog"]);a!=null&&A(e,["enableAffectiveDialog"],a);const c=b(t,["frequencyPenalty"]);c!=null&&A(e,["frequencyPenalty"],c);const f=b(t,["logprobs"]);f!=null&&A(e,["logprobs"],f);const d=b(t,["maxOutputTokens"]);d!=null&&A(e,["maxOutputTokens"],d);const g=b(t,["mediaResolution"]);g!=null&&A(e,["mediaResolution"],g);const y=b(t,["presencePenalty"]);y!=null&&A(e,["presencePenalty"],y);const E=b(t,["responseLogprobs"]);E!=null&&A(e,["responseLogprobs"],E);const C=b(t,["responseMimeType"]);C!=null&&A(e,["responseMimeType"],C);const I=b(t,["responseModalities"]);I!=null&&A(e,["responseModalities"],I);const P=b(t,["responseSchema"]);P!=null&&A(e,["responseSchema"],P);const N=b(t,["routingConfig"]);N!=null&&A(e,["routingConfig"],N);const L=b(t,["seed"]);L!=null&&A(e,["seed"],L);const U=b(t,["speechConfig"]);U!=null&&A(e,["speechConfig"],QR(U));const F=b(t,["stopSequences"]);F!=null&&A(e,["stopSequences"],F);const z=b(t,["temperature"]);z!=null&&A(e,["temperature"],z);const q=b(t,["thinkingConfig"]);q!=null&&A(e,["thinkingConfig"],q);const H=b(t,["topK"]);H!=null&&A(e,["topK"],H);const W=b(t,["topP"]);if(W!=null&&A(e,["topP"],W),b(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function DF(t,e){const n={},r=b(e,["model"]);return r!=null&&A(n,["_url","name"],kt(t,r)),n}function LF(t,e){const n={},r=b(e,["model"]);return r!=null&&A(n,["_url","name"],kt(t,r)),n}function BF(t){const e={};if(b(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(t,["enableWidget"]);return n!=null&&A(e,["enableWidget"],n),e}function FF(t){const e={};if(b(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(t,["timeRangeFilter"]);return n!=null&&A(e,["timeRangeFilter"],n),e}function UF(t){const e={},n=b(t,["aspectRatio"]);n!=null&&A(e,["aspectRatio"],n);const r=b(t,["imageSize"]);if(r!=null&&A(e,["imageSize"],r),b(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(b(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function jF(t){const e={},n=b(t,["aspectRatio"]);n!=null&&A(e,["aspectRatio"],n);const r=b(t,["imageSize"]);r!=null&&A(e,["imageSize"],r);const i=b(t,["outputMimeType"]);i!=null&&A(e,["imageOutputOptions","mimeType"],i);const o=b(t,["outputCompressionQuality"]);return o!=null&&A(e,["imageOutputOptions","compressionQuality"],o),e}function VF(t){const e={},n=b(t,["bytesBase64Encoded"]);n!=null&&A(e,["imageBytes"],va(n));const r=b(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function XR(t){const e={},n=b(t,["gcsUri"]);n!=null&&A(e,["gcsUri"],n);const r=b(t,["bytesBase64Encoded"]);r!=null&&A(e,["imageBytes"],va(r));const i=b(t,["mimeType"]);return i!=null&&A(e,["mimeType"],i),e}function Ep(t){const e={};if(b(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=b(t,["imageBytes"]);n!=null&&A(e,["bytesBase64Encoded"],va(n));const r=b(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function Co(t){const e={},n=b(t,["gcsUri"]);n!=null&&A(e,["gcsUri"],n);const r=b(t,["imageBytes"]);r!=null&&A(e,["bytesBase64Encoded"],va(r));const i=b(t,["mimeType"]);return i!=null&&A(e,["mimeType"],i),e}function GF(t,e,n){const r={},i=b(e,["pageSize"]);n!==void 0&&i!=null&&A(n,["_query","pageSize"],i);const o=b(e,["pageToken"]);n!==void 0&&o!=null&&A(n,["_query","pageToken"],o);const a=b(e,["filter"]);n!==void 0&&a!=null&&A(n,["_query","filter"],a);const c=b(e,["queryBase"]);return n!==void 0&&c!=null&&A(n,["_url","models_url"],GR(t,c)),r}function zF(t,e,n){const r={},i=b(e,["pageSize"]);n!==void 0&&i!=null&&A(n,["_query","pageSize"],i);const o=b(e,["pageToken"]);n!==void 0&&o!=null&&A(n,["_query","pageToken"],o);const a=b(e,["filter"]);n!==void 0&&a!=null&&A(n,["_query","filter"],a);const c=b(e,["queryBase"]);return n!==void 0&&c!=null&&A(n,["_url","models_url"],GR(t,c)),r}function $F(t,e){const n={},r=b(e,["config"]);return r!=null&&GF(t,r,n),n}function HF(t,e){const n={},r=b(e,["config"]);return r!=null&&zF(t,r,n),n}function qF(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=b(t,["_self"]);if(i!=null){let o=zR(i);Array.isArray(o)&&(o=o.map(a=>cy(a))),A(e,["models"],o)}return e}function WF(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=b(t,["_self"]);if(i!=null){let o=zR(i);Array.isArray(o)&&(o=o.map(a=>dy(a))),A(e,["models"],o)}return e}function KF(t){const e={},n=b(t,["maskMode"]);n!=null&&A(e,["maskMode"],n);const r=b(t,["segmentationClasses"]);r!=null&&A(e,["maskClasses"],r);const i=b(t,["maskDilation"]);return i!=null&&A(e,["dilation"],i),e}function cy(t){const e={},n=b(t,["name"]);n!=null&&A(e,["name"],n);const r=b(t,["displayName"]);r!=null&&A(e,["displayName"],r);const i=b(t,["description"]);i!=null&&A(e,["description"],i);const o=b(t,["version"]);o!=null&&A(e,["version"],o);const a=b(t,["_self"]);a!=null&&A(e,["tunedModelInfo"],cU(a));const c=b(t,["inputTokenLimit"]);c!=null&&A(e,["inputTokenLimit"],c);const f=b(t,["outputTokenLimit"]);f!=null&&A(e,["outputTokenLimit"],f);const d=b(t,["supportedGenerationMethods"]);d!=null&&A(e,["supportedActions"],d);const g=b(t,["temperature"]);g!=null&&A(e,["temperature"],g);const y=b(t,["maxTemperature"]);y!=null&&A(e,["maxTemperature"],y);const E=b(t,["topP"]);E!=null&&A(e,["topP"],E);const C=b(t,["topK"]);C!=null&&A(e,["topK"],C);const I=b(t,["thinking"]);return I!=null&&A(e,["thinking"],I),e}function dy(t){const e={},n=b(t,["name"]);n!=null&&A(e,["name"],n);const r=b(t,["displayName"]);r!=null&&A(e,["displayName"],r);const i=b(t,["description"]);i!=null&&A(e,["description"],i);const o=b(t,["versionId"]);o!=null&&A(e,["version"],o);const a=b(t,["deployedModels"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(E=>aF(E))),A(e,["endpoints"],y)}const c=b(t,["labels"]);c!=null&&A(e,["labels"],c);const f=b(t,["_self"]);f!=null&&A(e,["tunedModelInfo"],dU(f));const d=b(t,["defaultCheckpointId"]);d!=null&&A(e,["defaultCheckpointId"],d);const g=b(t,["checkpoints"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(E=>E)),A(e,["checkpoints"],y)}return e}function YF(t){const e={},n=b(t,["mediaResolution"]);n!=null&&A(e,["mediaResolution"],n);const r=b(t,["codeExecutionResult"]);r!=null&&A(e,["codeExecutionResult"],r);const i=b(t,["executableCode"]);i!=null&&A(e,["executableCode"],i);const o=b(t,["fileData"]);o!=null&&A(e,["fileData"],lF(o));const a=b(t,["functionCall"]);a!=null&&A(e,["functionCall"],uF(a));const c=b(t,["functionResponse"]);c!=null&&A(e,["functionResponse"],c);const f=b(t,["inlineData"]);f!=null&&A(e,["inlineData"],M9(f));const d=b(t,["text"]);d!=null&&A(e,["text"],d);const g=b(t,["thought"]);g!=null&&A(e,["thought"],g);const y=b(t,["thoughtSignature"]);y!=null&&A(e,["thoughtSignature"],y);const E=b(t,["videoMetadata"]);return E!=null&&A(e,["videoMetadata"],E),e}function XF(t){const e={},n=b(t,["productImage"]);return n!=null&&A(e,["image"],Co(n)),e}function JF(t,e){const n={},r=b(t,["numberOfImages"]);e!==void 0&&r!=null&&A(e,["parameters","sampleCount"],r);const i=b(t,["baseSteps"]);e!==void 0&&i!=null&&A(e,["parameters","baseSteps"],i);const o=b(t,["outputGcsUri"]);e!==void 0&&o!=null&&A(e,["parameters","storageUri"],o);const a=b(t,["seed"]);e!==void 0&&a!=null&&A(e,["parameters","seed"],a);const c=b(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&A(e,["parameters","safetySetting"],c);const f=b(t,["personGeneration"]);e!==void 0&&f!=null&&A(e,["parameters","personGeneration"],f);const d=b(t,["addWatermark"]);e!==void 0&&d!=null&&A(e,["parameters","addWatermark"],d);const g=b(t,["outputMimeType"]);e!==void 0&&g!=null&&A(e,["parameters","outputOptions","mimeType"],g);const y=b(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&A(e,["parameters","outputOptions","compressionQuality"],y);const E=b(t,["enhancePrompt"]);e!==void 0&&E!=null&&A(e,["parameters","enhancePrompt"],E);const C=b(t,["labels"]);return e!==void 0&&C!=null&&A(e,["labels"],C),n}function ZF(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["source"]);i!=null&&eU(i,n);const o=b(e,["config"]);return o!=null&&JF(o,n),n}function QF(t){const e={},n=b(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>wp(i))),A(e,["generatedImages"],r)}return e}function eU(t,e){const n={},r=b(t,["prompt"]);e!==void 0&&r!=null&&A(e,["instances[0]","prompt"],r);const i=b(t,["personImage"]);e!==void 0&&i!=null&&A(e,["instances[0]","personImage","image"],Co(i));const o=b(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>XF(c))),A(e,["instances[0]","productImages"],a)}return n}function tU(t){const e={},n=b(t,["referenceImage"]);n!=null&&A(e,["referenceImage"],Co(n));const r=b(t,["referenceId"]);r!=null&&A(e,["referenceId"],r);const i=b(t,["referenceType"]);i!=null&&A(e,["referenceType"],i);const o=b(t,["maskImageConfig"]);o!=null&&A(e,["maskImageConfig"],KF(o));const a=b(t,["controlImageConfig"]);a!=null&&A(e,["controlImageConfig"],V9(a));const c=b(t,["styleImageConfig"]);c!=null&&A(e,["styleImageConfig"],c);const f=b(t,["subjectImageConfig"]);return f!=null&&A(e,["subjectImageConfig"],f),e}function JR(t){const e={},n=b(t,["safetyAttributes","categories"]);n!=null&&A(e,["categories"],n);const r=b(t,["safetyAttributes","scores"]);r!=null&&A(e,["scores"],r);const i=b(t,["contentType"]);return i!=null&&A(e,["contentType"],i),e}function ZR(t){const e={},n=b(t,["safetyAttributes","categories"]);n!=null&&A(e,["categories"],n);const r=b(t,["safetyAttributes","scores"]);r!=null&&A(e,["scores"],r);const i=b(t,["contentType"]);return i!=null&&A(e,["contentType"],i),e}function nU(t){const e={},n=b(t,["category"]);if(n!=null&&A(e,["category"],n),b(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=b(t,["threshold"]);return r!=null&&A(e,["threshold"],r),e}function rU(t){const e={},n=b(t,["image"]);return n!=null&&A(e,["image"],Co(n)),e}function iU(t,e){const n={},r=b(t,["mode"]);e!==void 0&&r!=null&&A(e,["parameters","mode"],r);const i=b(t,["maxPredictions"]);e!==void 0&&i!=null&&A(e,["parameters","maxPredictions"],i);const o=b(t,["confidenceThreshold"]);e!==void 0&&o!=null&&A(e,["parameters","confidenceThreshold"],o);const a=b(t,["maskDilation"]);e!==void 0&&a!=null&&A(e,["parameters","maskDilation"],a);const c=b(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&A(e,["parameters","binaryColorThreshold"],c);const f=b(t,["labels"]);return e!==void 0&&f!=null&&A(e,["labels"],f),n}function oU(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["source"]);i!=null&&aU(i,n);const o=b(e,["config"]);return o!=null&&iU(o,n),n}function sU(t){const e={},n=b(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>RF(i))),A(e,["generatedMasks"],r)}return e}function aU(t,e){const n={},r=b(t,["prompt"]);e!==void 0&&r!=null&&A(e,["instances[0]","prompt"],r);const i=b(t,["image"]);e!==void 0&&i!=null&&A(e,["instances[0]","image"],Co(i));const o=b(t,["scribbleImage"]);return e!==void 0&&o!=null&&A(e,["instances[0]","scribble"],rU(o)),n}function QR(t){const e={},n=b(t,["voiceConfig"]);n!=null&&A(e,["voiceConfig"],n);const r=b(t,["languageCode"]);if(r!=null&&A(e,["languageCode"],r),b(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function lU(t){const e={},n=b(t,["functionCallingConfig"]);n!=null&&A(e,["functionCallingConfig"],cF(n));const r=b(t,["retrievalConfig"]);return r!=null&&A(e,["retrievalConfig"],r),e}function uU(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(y=>y)),A(e,["functionDeclarations"],g)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(t,["googleSearchRetrieval"]);r!=null&&A(e,["googleSearchRetrieval"],r);const i=b(t,["computerUse"]);i!=null&&A(e,["computerUse"],i);const o=b(t,["fileSearch"]);o!=null&&A(e,["fileSearch"],o);const a=b(t,["codeExecution"]);if(a!=null&&A(e,["codeExecution"],a),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=b(t,["googleMaps"]);c!=null&&A(e,["googleMaps"],BF(c));const f=b(t,["googleSearch"]);f!=null&&A(e,["googleSearch"],FF(f));const d=b(t,["urlContext"]);return d!=null&&A(e,["urlContext"],d),e}function eO(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>dF(E))),A(e,["functionDeclarations"],y)}const r=b(t,["retrieval"]);r!=null&&A(e,["retrieval"],r);const i=b(t,["googleSearchRetrieval"]);i!=null&&A(e,["googleSearchRetrieval"],i);const o=b(t,["computerUse"]);if(o!=null&&A(e,["computerUse"],o),b(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=b(t,["codeExecution"]);a!=null&&A(e,["codeExecution"],a);const c=b(t,["enterpriseWebSearch"]);c!=null&&A(e,["enterpriseWebSearch"],c);const f=b(t,["googleMaps"]);f!=null&&A(e,["googleMaps"],f);const d=b(t,["googleSearch"]);d!=null&&A(e,["googleSearch"],d);const g=b(t,["urlContext"]);return g!=null&&A(e,["urlContext"],g),e}function cU(t){const e={},n=b(t,["baseModel"]);n!=null&&A(e,["baseModel"],n);const r=b(t,["createTime"]);r!=null&&A(e,["createTime"],r);const i=b(t,["updateTime"]);return i!=null&&A(e,["updateTime"],i),e}function dU(t){const e={},n=b(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&A(e,["baseModel"],n);const r=b(t,["createTime"]);r!=null&&A(e,["createTime"],r);const i=b(t,["updateTime"]);return i!=null&&A(e,["updateTime"],i),e}function fU(t,e){const n={},r=b(t,["displayName"]);e!==void 0&&r!=null&&A(e,["displayName"],r);const i=b(t,["description"]);e!==void 0&&i!=null&&A(e,["description"],i);const o=b(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&A(e,["defaultCheckpointId"],o),n}function hU(t,e){const n={},r=b(t,["displayName"]);e!==void 0&&r!=null&&A(e,["displayName"],r);const i=b(t,["description"]);e!==void 0&&i!=null&&A(e,["description"],i);const o=b(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&A(e,["defaultCheckpointId"],o),n}function pU(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","name"],kt(t,r));const i=b(e,["config"]);return i!=null&&fU(i,n),n}function gU(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["config"]);return i!=null&&hU(i,n),n}function mU(t,e){const n={},r=b(t,["outputGcsUri"]);e!==void 0&&r!=null&&A(e,["parameters","storageUri"],r);const i=b(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&A(e,["parameters","safetySetting"],i);const o=b(t,["personGeneration"]);e!==void 0&&o!=null&&A(e,["parameters","personGeneration"],o);const a=b(t,["includeRaiReason"]);e!==void 0&&a!=null&&A(e,["parameters","includeRaiReason"],a);const c=b(t,["outputMimeType"]);e!==void 0&&c!=null&&A(e,["parameters","outputOptions","mimeType"],c);const f=b(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&A(e,["parameters","outputOptions","compressionQuality"],f);const d=b(t,["enhanceInputImage"]);e!==void 0&&d!=null&&A(e,["parameters","upscaleConfig","enhanceInputImage"],d);const g=b(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&A(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const y=b(t,["labels"]);e!==void 0&&y!=null&&A(e,["labels"],y);const E=b(t,["numberOfImages"]);e!==void 0&&E!=null&&A(e,["parameters","sampleCount"],E);const C=b(t,["mode"]);return e!==void 0&&C!=null&&A(e,["parameters","mode"],C),n}function vU(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["_url","model"],kt(t,r));const i=b(e,["image"]);i!=null&&A(n,["instances[0]","image"],Co(i));const o=b(e,["upscaleFactor"]);o!=null&&A(n,["parameters","upscaleConfig","upscaleFactor"],o);const a=b(e,["config"]);return a!=null&&mU(a,n),n}function yU(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>wp(o))),A(e,["generatedImages"],i)}return e}function xU(t){const e={},n=b(t,["uri"]);n!=null&&A(e,["uri"],n);const r=b(t,["encodedVideo"]);r!=null&&A(e,["videoBytes"],va(r));const i=b(t,["encoding"]);return i!=null&&A(e,["mimeType"],i),e}function wU(t){const e={},n=b(t,["gcsUri"]);n!=null&&A(e,["uri"],n);const r=b(t,["bytesBase64Encoded"]);r!=null&&A(e,["videoBytes"],va(r));const i=b(t,["mimeType"]);return i!=null&&A(e,["mimeType"],i),e}function EU(t){const e={},n=b(t,["image"]);n!=null&&A(e,["_self"],Co(n));const r=b(t,["maskMode"]);return r!=null&&A(e,["maskMode"],r),e}function bU(t){const e={},n=b(t,["image"]);n!=null&&A(e,["image"],Ep(n));const r=b(t,["referenceType"]);return r!=null&&A(e,["referenceType"],r),e}function _U(t){const e={},n=b(t,["image"]);n!=null&&A(e,["image"],Co(n));const r=b(t,["referenceType"]);return r!=null&&A(e,["referenceType"],r),e}function tO(t){const e={},n=b(t,["uri"]);n!=null&&A(e,["uri"],n);const r=b(t,["videoBytes"]);r!=null&&A(e,["encodedVideo"],va(r));const i=b(t,["mimeType"]);return i!=null&&A(e,["encoding"],i),e}function nO(t){const e={},n=b(t,["uri"]);n!=null&&A(e,["gcsUri"],n);const r=b(t,["videoBytes"]);r!=null&&A(e,["bytesBase64Encoded"],va(r));const i=b(t,["mimeType"]);return i!=null&&A(e,["mimeType"],i),e}function AU(t,e){const n={},r=b(t,["displayName"]);return e!==void 0&&r!=null&&A(e,["displayName"],r),n}function CU(t){const e={},n=b(t,["config"]);return n!=null&&AU(n,e),e}function SU(t,e){const n={},r=b(t,["force"]);return e!==void 0&&r!=null&&A(e,["_query","force"],r),n}function TU(t){const e={},n=b(t,["name"]);n!=null&&A(e,["_url","name"],n);const r=b(t,["config"]);return r!=null&&SU(r,e),e}function IU(t){const e={},n=b(t,["name"]);return n!=null&&A(e,["_url","name"],n),e}function PU(t,e){const n={},r=b(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),A(e,["customMetadata"],o)}const i=b(t,["chunkingConfig"]);return e!==void 0&&i!=null&&A(e,["chunkingConfig"],i),n}function NU(t){const e={},n=b(t,["name"]);n!=null&&A(e,["name"],n);const r=b(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=b(t,["done"]);i!=null&&A(e,["done"],i);const o=b(t,["error"]);o!=null&&A(e,["error"],o);const a=b(t,["response"]);return a!=null&&A(e,["response"],OU(a)),e}function RU(t){const e={},n=b(t,["fileSearchStoreName"]);n!=null&&A(e,["_url","file_search_store_name"],n);const r=b(t,["fileName"]);r!=null&&A(e,["fileName"],r);const i=b(t,["config"]);return i!=null&&PU(i,e),e}function OU(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["parent"]);r!=null&&A(e,["parent"],r);const i=b(t,["documentName"]);return i!=null&&A(e,["documentName"],i),e}function kU(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=b(t,["pageToken"]);return e!==void 0&&i!=null&&A(e,["_query","pageToken"],i),n}function MU(t){const e={},n=b(t,["config"]);return n!=null&&kU(n,e),e}function DU(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=b(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),A(e,["fileSearchStores"],o)}return e}function rO(t,e){const n={},r=b(t,["mimeType"]);e!==void 0&&r!=null&&A(e,["mimeType"],r);const i=b(t,["displayName"]);e!==void 0&&i!=null&&A(e,["displayName"],i);const o=b(t,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),A(e,["customMetadata"],c)}const a=b(t,["chunkingConfig"]);return e!==void 0&&a!=null&&A(e,["chunkingConfig"],a),n}function LU(t){const e={},n=b(t,["fileSearchStoreName"]);n!=null&&A(e,["_url","file_search_store_name"],n);const r=b(t,["config"]);return r!=null&&rO(r,e),e}function BU(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}const FU="Content-Type",UU="X-Server-Timeout",jU="User-Agent",fy="x-goog-api-client",VU="1.33.0",GU=`google-genai-sdk/${VU}`,zU="v1beta1",$U="v1beta";class HU{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:zU,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:$U,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[a,c]of Object.entries(e.queryParams))i.searchParams.append(a,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,a=o.signal;if(n.timeout&&n?.timeout>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&qU(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await zA(i),new ay(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await zA(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Eo(this,arguments,function*(){var r;const i=(r=e?.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let a="";const c="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:g}=yield mt(i.read());if(d){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=o.decode(g,{stream:!0});try{const I=JSON.parse(y);if("error"in I){const P=JSON.parse(JSON.stringify(I.error)),N=P.status,L=P.code,U=`got status: ${N}. ${JSON.stringify(I)}`;if(L>=400&&L<600)throw new yp({message:U,status:L})}}catch(I){if(I.name==="ApiError")throw I}a+=y;let E=-1,C=0;for(;;){E=-1,C=0;for(const N of f){const L=a.indexOf(N);L!==-1&&(E===-1||L<E)&&(E=L,C=N.length)}if(E===-1)break;const I=a.substring(0,E);a=a.substring(E+C);const P=I.trim();if(P.startsWith(c)){const N=P.substring(c.length).trim();try{const L=new Response(N,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield mt(new ay(L))}catch(L){throw new Error(`exception parsing stream chunk ${N}. ${L}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=GU+" "+this.clientOptions.userAgentExtra;return e[jU]=n,e[fy]=n,e[FU]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(UU,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,a=await o.stat(e);i.sizeBytes=String(a.size);const c=(r=n?.mimeType)!==null&&r!==void 0?r:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=c;const f={file:i},d=this.getFileName(e),g=Ue("upload/v1beta/files",f._url),y=await this.fetchUploadUrl(g,i.sizeBytes,i.mimeType,d,f,n?.httpOptions);return o.upload(e,y,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,a=await o.stat(n),c=String(a.size),f=(i=r?.mimeType)!==null&&i!==void 0?i:a.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(n),y={};r!=null&&rO(r,y);const E=await this.fetchUploadUrl(d,c,f,g,y,r?.httpOptions);return o.uploadToFileSearchStore(n,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,a){var c;let f={};a?f=a:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const d=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:f});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(c=d?.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function zA(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new yp({message:i,status:n}):new Error(i)}}function qU(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,a){const c=Object.assign({},o);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f)){const d=a[f],g=c[f];d&&typeof d=="object"&&!Array.isArray(d)&&g&&typeof g=="object"&&!Array.isArray(g)?c[f]=r(g,d):(g&&d&&typeof g!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof g}, New type: ${typeof d}. Overwriting.`),c[f]=d)}return c}const i=r(n,e);t.body=JSON.stringify(i)}const WU="mcp_used/unknown";let KU=!1;function iO(t){for(const e of t)if(YU(e)||typeof e=="object"&&"inputSchema"in e)return!0;return KU}function oO(t){var e;const n=(e=t[fy])!==null&&e!==void 0?e:"";t[fy]=(n+` ${WU}`).trimStart()}function YU(t){return t!==null&&typeof t=="object"&&t instanceof qx}function XU(t){return Eo(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const a=yield mt(n.listTools({cursor:i}));for(const c of a.tools)yield yield mt(c),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class qx{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new qx(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},a=[];for(const g of this.mcpClients)try{for(var c=!0,f=(n=void 0,bo(XU(g))),d;d=await f.next(),e=d.done,!e;c=!0){i=d.value,c=!1;const y=i;a.push(y);const E=y.name;if(o[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);o[E]=g}}catch(y){n={error:y}}finally{try{!c&&!e&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),IB(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:a.isError?{error:a}:a}})}return n}}async function JU(t,e,n){const r=new wB;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class ZU{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=tj(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const g=new Promise(F=>{d=F}),y=e.callbacks,E=function(){d({})},C=this.apiClient,I={onopen:E,onmessage:F=>{JU(C,y.onmessage,F)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(F){},onclose:(r=y?.onclose)!==null&&r!==void 0?r:function(F){}},P=this.webSocketFactory.create(f,ej(a),I);P.connect(),await g;const U={setup:{model:kt(this.apiClient,e.model)}};return P.send(JSON.stringify(U)),new QU(P,this.apiClient)}}class QU{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=C9(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=A9(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(pu.PLAY)}pause(){this.sendPlaybackControl(pu.PAUSE)}stop(){this.sendPlaybackControl(pu.STOP)}resetContext(){this.sendPlaybackControl(pu.RESET_CONTEXT)}close(){this.conn.close()}}function ej(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function tj(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}const nj="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function rj(t,e,n){const r=new xB;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const a=I9(o);Object.assign(r,a)}else Object.assign(r,o);e(r)}class ij{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new ZU(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,a,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let g;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&iO(e.config.tools)&&oO(y);const E=lj(y);if(this.apiClient.isVertexAI())g=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,g);else{const X=this.apiClient.getApiKey();let ye="BidiGenerateContent",se="key";X?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ye="BidiGenerateContentConstrained",se="access_token"),g=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${ye}?${se}=${X}`}let C=()=>{};const I=new Promise(X=>{C=X}),P=e.callbacks,N=function(){var X;(X=P?.onopen)===null||X===void 0||X.call(P),C({})},L=this.apiClient,U={onopen:N,onmessage:X=>{rj(L,P.onmessage,X)},onerror:(n=P?.onerror)!==null&&n!==void 0?n:function(X){},onclose:(r=P?.onclose)!==null&&r!==void 0?r:function(X){}},F=this.webSocketFactory.create(g,aj(E),U);F.connect(),await I;let z=kt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&z.startsWith("publishers/")){const X=this.apiClient.getProject(),ye=this.apiClient.getLocation();z=`projects/${X}/locations/${ye}/`+z}let q={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[l0.AUDIO]}:e.config.responseModalities=[l0.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(c=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[],W=[];for(const X of H)if(this.isCallableTool(X)){const ye=X;W.push(await ye.tool())}else W.push(X);W.length>0&&(e.config.tools=W);const Z={model:z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=_9(this.apiClient,Z):q=b9(this.apiClient,Z),delete q.config,F.send(JSON.stringify(q)),new sj(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const oj={turnComplete:!0};class sj{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Zi(n.turns),e.isVertexAI()||(r=r.map(i=>xp(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(nj)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},oj),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:T9(e)}:n={realtimeInput:S9(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function aj(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function lj(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}const $A=10;function HA(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const a of(n=t?.tools)!==null&&n!==void 0?n:[])if(_u(a)){i=!0;break}if(!i)return!0;const o=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function _u(t){return"callTool"in t&&typeof t.callTool=="function"}function uj(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>_u(i)))!==null&&r!==void 0?r:!1}function qA(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(_u(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function WA(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class cj extends As{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,a,c;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!uj(n)||HA(n.config))return await this.generateContentInternal(f);const d=qA(n);if(d.length>0){const P=d.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let g,y;const E=Zi(f.contents),C=(o=(i=(r=f.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:$A;let I=0;for(;I<C&&(g=await this.generateContentInternal(f),!(!g.functionCalls||g.functionCalls.length===0));){const P=g.candidates[0].content,N=[];for(const L of(c=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[])if(_u(L)){const F=await L.callTool(g.functionCalls);N.push(...F)}I++,y={role:"user",parts:N},f.contents=Zi(f.contents),f.contents.push(P),f.contents.push(y),WA(f.config)&&(E.push(P),E.push(y))}return WA(f.config)&&(g.automaticFunctionCallingHistory=E),g},this.generateContentStream=async n=>{var r,i,o,a,c;if(this.maybeMoveToResponseJsonSchem(n),HA(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const f=qA(n);if(f.length>0){const y=f.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(o=(i=(r=n?.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,g=(c=(a=n?.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const a=[];if(r?.generatedImages)for(const f of r.generatedImages)f&&f?.safetyAttributes&&((i=f?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=f?.safetyAttributes:a.push(f);let c;return o?c={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:c={generatedImages:a,sdkHttpResponse:r.sdkHttpResponse},c}),this.list=async n=>{var r;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((r=a.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new El(gs.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(a),a)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,a,c,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(o=n.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((f=(c=n.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const a=await Promise.all(o.map(async f=>_u(f)?await f.tool():f)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(c.config.tools=a,e.config&&e.config.tools&&iO(e.config.tools)){const f=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),oO(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const a of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(_u(a)){const c=a,f=await c.tool();for(const d of(i=f.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,c)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:$A;let a=!1,c=0;const f=await this.initAfcToolsMap(e);return(function(d,g,y){return Eo(this,arguments,function*(){for(var E,C,I,P,N,L;c<o;){a&&(c++,a=!1);const q=yield mt(d.processParamsMaybeAddMcpUsage(y)),H=yield mt(d.generateContentStreamInternal(q)),W=[],Z=[];try{for(var U=!0,F=(C=void 0,bo(H)),z;z=yield mt(F.next()),E=z.done,!E;U=!0){P=z.value,U=!1;const X=P;if(yield yield mt(X),X.candidates&&(!((N=X.candidates[0])===null||N===void 0)&&N.content)){Z.push(X.candidates[0].content);for(const ye of(L=X.candidates[0].content.parts)!==null&&L!==void 0?L:[])if(c<o&&ye.functionCall){if(!ye.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(ye.functionCall.name)){const se=yield mt(g.get(ye.functionCall.name).callTool([ye.functionCall]));W.push(...se)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${ye.functionCall.name}`)}}}}catch(X){C={error:X}}finally{try{!U&&!E&&(I=F.return)&&(yield mt(I.call(F)))}finally{if(C)throw C.error}}if(W.length>0){a=!0;const X=new Hc;X.candidates=[{content:{role:"user",parts:W}}],yield yield mt(X);const ye=[];ye.push(...Z),ye.push({role:"user",parts:W});const se=Zi(y.contents).concat(ye);y.contents=se}else break}})})(this,f,e)}async generateContentInternal(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=jA(this.apiClient,e);return c=Ue("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=GA(g),E=new Hc;return Object.assign(E,y),E})}else{const d=UA(this.apiClient,e);return c=Ue("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=VA(g),E=new Hc;return Object.assign(E,y),E})}}async generateContentStreamInternal(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=jA(this.apiClient,e);return c=Ue("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(y){return Eo(this,arguments,function*(){var E,C,I,P;try{for(var N=!0,L=bo(y),U;U=yield mt(L.next()),E=U.done,!E;N=!0){P=U.value,N=!1;const F=P,z=GA(yield mt(F.json()));z.sdkHttpResponse={headers:F.headers};const q=new Hc;Object.assign(q,z),yield yield mt(q)}}catch(F){C={error:F}}finally{try{!N&&!E&&(I=L.return)&&(yield mt(I.call(L)))}finally{if(C)throw C.error}}})})}else{const d=UA(this.apiClient,e);return c=Ue("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(y){return Eo(this,arguments,function*(){var E,C,I,P;try{for(var N=!0,L=bo(y),U;U=yield mt(L.next()),E=U.done,!E;N=!0){P=U.value,N=!1;const F=P,z=VA(yield mt(F.json()));z.sdkHttpResponse={headers:F.headers};const q=new Hc;Object.assign(q,z),yield yield mt(q)}}catch(F){C={error:F}}finally{try{!N&&!E&&(I=L.return)&&(yield mt(I.call(L)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=iF(this.apiClient,e);return c=Ue("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=sF(g),E=new bA;return Object.assign(E,y),E})}else{const d=rF(this.apiClient,e);return c=Ue("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=oF(g),E=new bA;return Object.assign(E,y),E})}}async generateImagesInternal(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=vF(this.apiClient,e);return c=Ue("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=xF(g),E=new _A;return Object.assign(E,y),E})}else{const d=mF(this.apiClient,e);return c=Ue("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=yF(g),E=new _A;return Object.assign(E,y),E})}}async editImageInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=Q9(this.apiClient,e);return o=Ue("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const g=d;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>{const d=eF(f),g=new lB;return Object.assign(g,d),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=vU(this.apiClient,e);return o=Ue("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const g=d;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>{const d=yU(f),g=new uB;return Object.assign(g,d),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=ZF(this.apiClient,e);return o=Ue("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=QF(f),g=new cB;return Object.assign(g,d),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=oU(this.apiClient,e);return o=Ue("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=sU(f),g=new dB;return Object.assign(g,d),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=LF(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>dy(g))}else{const d=DF(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>cy(g))}}async listInternal(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=HF(this.apiClient,e);return c=Ue("{models_url}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=WF(g),E=new AA;return Object.assign(E,y),E})}else{const d=$F(this.apiClient,e);return c=Ue("{models_url}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=qF(g),E=new AA;return Object.assign(E,y),E})}}async update(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=gU(this.apiClient,e);return c=Ue("{model}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>dy(g))}else{const d=pU(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>cy(g))}}async delete(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=Y9(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=J9(g),E=new CA;return Object.assign(E,y),E})}else{const d=K9(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=X9(g),E=new CA;return Object.assign(E,y),E})}}async countTokens(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=H9(this.apiClient,e);return c=Ue("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=W9(g),E=new SA;return Object.assign(E,y),E})}else{const d=$9(this.apiClient,e);return c=Ue("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=q9(g),E=new SA;return Object.assign(E,y),E})}}async computeTokens(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=B9(this.apiClient,e);return o=Ue("{model}:computeTokens",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const g=d;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>{const d=F9(f),g=new fB;return Object.assign(g,d),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=CF(this.apiClient,e);return c=Ue("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const y=_F(g),E=new u0;return Object.assign(E,y),E})}else{const d=AF(this.apiClient,e);return c=Ue("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const y=bF(g),E=new u0;return Object.assign(E,y),E})}}}class dj extends As{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=nB(e);return c=Ue("{operationName}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a}else{const d=tB(e);return c=Ue("{operationName}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=K5(e);return o=Ue("{resourceName}:fetchPredictOperation",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}function fj(t){const e={},n=b(t,["data"]);if(n!=null&&A(e,["data"],n),b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function hj(t){const e={},n=b(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>bj(o))),A(e,["parts"],i)}const r=b(t,["role"]);return r!=null&&A(e,["role"],r),e}function pj(t,e,n){const r={},i=b(e,["expireTime"]);n!==void 0&&i!=null&&A(n,["expireTime"],i);const o=b(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&A(n,["newSessionExpireTime"],o);const a=b(e,["uses"]);n!==void 0&&a!=null&&A(n,["uses"],a);const c=b(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&A(n,["bidiGenerateContentSetup"],Ej(t,c));const f=b(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&A(n,["fieldMask"],f),r}function gj(t,e){const n={},r=b(e,["config"]);return r!=null&&A(n,["config"],pj(t,r,n)),n}function mj(t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["fileUri"]);n!=null&&A(e,["fileUri"],n);const r=b(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function vj(t){const e={},n=b(t,["id"]);n!=null&&A(e,["id"],n);const r=b(t,["args"]);r!=null&&A(e,["args"],r);const i=b(t,["name"]);if(i!=null&&A(e,["name"],i),b(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(b(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yj(t){const e={};if(b(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(t,["enableWidget"]);return n!=null&&A(e,["enableWidget"],n),e}function xj(t){const e={};if(b(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(t,["timeRangeFilter"]);return n!=null&&A(e,["timeRangeFilter"],n),e}function wj(t,e){const n={},r=b(t,["generationConfig"]);e!==void 0&&r!=null&&A(e,["setup","generationConfig"],r);const i=b(t,["responseModalities"]);e!==void 0&&i!=null&&A(e,["setup","generationConfig","responseModalities"],i);const o=b(t,["temperature"]);e!==void 0&&o!=null&&A(e,["setup","generationConfig","temperature"],o);const a=b(t,["topP"]);e!==void 0&&a!=null&&A(e,["setup","generationConfig","topP"],a);const c=b(t,["topK"]);e!==void 0&&c!=null&&A(e,["setup","generationConfig","topK"],c);const f=b(t,["maxOutputTokens"]);e!==void 0&&f!=null&&A(e,["setup","generationConfig","maxOutputTokens"],f);const d=b(t,["mediaResolution"]);e!==void 0&&d!=null&&A(e,["setup","generationConfig","mediaResolution"],d);const g=b(t,["seed"]);e!==void 0&&g!=null&&A(e,["setup","generationConfig","seed"],g);const y=b(t,["speechConfig"]);e!==void 0&&y!=null&&A(e,["setup","generationConfig","speechConfig"],Hx(y));const E=b(t,["thinkingConfig"]);e!==void 0&&E!=null&&A(e,["setup","generationConfig","thinkingConfig"],E);const C=b(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&A(e,["setup","generationConfig","enableAffectiveDialog"],C);const I=b(t,["systemInstruction"]);e!==void 0&&I!=null&&A(e,["setup","systemInstruction"],hj(Gr(I)));const P=b(t,["tools"]);if(e!==void 0&&P!=null){let H=Vu(P);Array.isArray(H)&&(H=H.map(W=>Aj(ju(W)))),A(e,["setup","tools"],H)}const N=b(t,["sessionResumption"]);e!==void 0&&N!=null&&A(e,["setup","sessionResumption"],_j(N));const L=b(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&A(e,["setup","inputAudioTranscription"],L);const U=b(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&A(e,["setup","outputAudioTranscription"],U);const F=b(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&A(e,["setup","realtimeInputConfig"],F);const z=b(t,["contextWindowCompression"]);e!==void 0&&z!=null&&A(e,["setup","contextWindowCompression"],z);const q=b(t,["proactivity"]);if(e!==void 0&&q!=null&&A(e,["setup","proactivity"],q),b(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Ej(t,e){const n={},r=b(e,["model"]);r!=null&&A(n,["setup","model"],kt(t,r));const i=b(e,["config"]);return i!=null&&A(n,["config"],wj(i,n)),n}function bj(t){const e={},n=b(t,["mediaResolution"]);n!=null&&A(e,["mediaResolution"],n);const r=b(t,["codeExecutionResult"]);r!=null&&A(e,["codeExecutionResult"],r);const i=b(t,["executableCode"]);i!=null&&A(e,["executableCode"],i);const o=b(t,["fileData"]);o!=null&&A(e,["fileData"],mj(o));const a=b(t,["functionCall"]);a!=null&&A(e,["functionCall"],vj(a));const c=b(t,["functionResponse"]);c!=null&&A(e,["functionResponse"],c);const f=b(t,["inlineData"]);f!=null&&A(e,["inlineData"],fj(f));const d=b(t,["text"]);d!=null&&A(e,["text"],d);const g=b(t,["thought"]);g!=null&&A(e,["thought"],g);const y=b(t,["thoughtSignature"]);y!=null&&A(e,["thoughtSignature"],y);const E=b(t,["videoMetadata"]);return E!=null&&A(e,["videoMetadata"],E),e}function _j(t){const e={},n=b(t,["handle"]);if(n!=null&&A(e,["handle"],n),b(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Aj(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(y=>y)),A(e,["functionDeclarations"],g)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(t,["googleSearchRetrieval"]);r!=null&&A(e,["googleSearchRetrieval"],r);const i=b(t,["computerUse"]);i!=null&&A(e,["computerUse"],i);const o=b(t,["fileSearch"]);o!=null&&A(e,["fileSearch"],o);const a=b(t,["codeExecution"]);if(a!=null&&A(e,["codeExecution"],a),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=b(t,["googleMaps"]);c!=null&&A(e,["googleMaps"],yj(c));const f=b(t,["googleSearch"]);f!=null&&A(e,["googleSearch"],xj(f));const d=b(t,["urlContext"]);return d!=null&&A(e,["urlContext"],d),e}function Cj(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function Sj(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=Cj(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)o?t.fieldMask=o:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];i.length>0&&(c=i.map(d=>a.includes(d)?`generationConfig.${d}`:d));const f=[];o&&f.push(o),c.length>0&&f.push(...c),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class Tj extends As{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=gj(this.apiClient,e);o=Ue("auth_tokens",c._url),a=c._query,delete c.config,delete c._url,delete c._query;const f=Sj(c,e.config);return i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}function Ij(t,e){const n={},r=b(t,["force"]);return e!==void 0&&r!=null&&A(e,["_query","force"],r),n}function Pj(t){const e={},n=b(t,["name"]);n!=null&&A(e,["_url","name"],n);const r=b(t,["config"]);return r!=null&&Ij(r,e),e}function Nj(t){const e={},n=b(t,["name"]);return n!=null&&A(e,["_url","name"],n),e}function Rj(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=b(t,["pageToken"]);return e!==void 0&&i!=null&&A(e,["_query","pageToken"],i),n}function Oj(t){const e={},n=b(t,["parent"]);n!=null&&A(e,["_url","parent"],n);const r=b(t,["config"]);return r!=null&&Rj(r,e),e}function kj(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=b(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),A(e,["documents"],o)}return e}class Mj extends As{constructor(e){super(),this.apiClient=e,this.list=async n=>new El(gs.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Nj(e);return o=Ue("{name}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Pj(e);i=Ue("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Oj(e);return o=Ue("{parent}/documents",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=kj(f),g=new hB;return Object.assign(g,d),g})}}}class Dj extends As{constructor(e,n=new Mj(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new El(gs.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=CU(e);return o=Ue("fileSearchStores",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async get(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=IU(e);return o=Ue("{name}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=TU(e);i=Ue("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=MU(e);return o=Ue("fileSearchStores",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=DU(f),g=new pB;return Object.assign(g,d),g})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=LU(e);return o=Ue("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=BU(f),g=new gB;return Object.assign(g,d),g})}}async importFile(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=RU(e);return o=Ue("{file_search_store_name}:importFile",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=NU(f),g=new jx;return Object.assign(g,d),g})}}}let sO=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return sO=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const Lj=()=>sO();function hy(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const py=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Qi extends Error{}class Xr extends Qi{constructor(e,n,r,i){super(`${Xr.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new bp({message:r,cause:py(n)});const o=n;return e===400?new lO(e,o,r,i):e===401?new uO(e,o,r,i):e===403?new cO(e,o,r,i):e===404?new dO(e,o,r,i):e===409?new fO(e,o,r,i):e===422?new hO(e,o,r,i):e===429?new pO(e,o,r,i):e>=500?new gO(e,o,r,i):new Xr(e,o,r,i)}}class gy extends Xr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class bp extends Xr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class aO extends bp{constructor({message:e}={}){super({message:e??"Request timed out."})}}class lO extends Xr{}class uO extends Xr{}class cO extends Xr{}class dO extends Xr{}class fO extends Xr{}class hO extends Xr{}class pO extends Xr{}class gO extends Xr{}const Bj=/^[a-z][a-z0-9+.-]*:/i,Fj=t=>Bj.test(t);let my=t=>(my=Array.isArray,my(t));const Uj=my;let jj=Uj;const KA=jj;function Vj(t){if(!t)return!0;for(const e in t)return!1;return!0}function Gj(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const zj=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Qi(`${t} must be an integer`);if(e<0)throw new Qi(`${t} must be a positive integer`);return e},$j=t=>{try{return JSON.parse(t)}catch{return}};const Hj=t=>new Promise(e=>setTimeout(e,t));const du="0.0.1";function qj(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Wj=()=>{var t,e,n,r,i;const o=qj();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":du,"X-Stainless-OS":XA(Deno.build.os),"X-Stainless-Arch":YA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":du,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":du,"X-Stainless-OS":XA((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":YA((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const a=Kj();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":du,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":du,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Kj(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,a=r[3]||0;return{browser:e,version:`${i}.${o}.${a}`}}}return null}const YA=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",XA=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let yh;const Yj=()=>yh??(yh=Wj());function Xj(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function mO(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Jj(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return mO({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function vO(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Zj(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}const Qj=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const yO=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function i1(t,e,n){return yO(),new File(t,e??"unknown_file",n)}function eV(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const tV=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const xO=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",nV=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&xO(t),rV=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function iV(t,e,n){if(yO(),t=await t,nV(t))return t instanceof File?t:i1([await t.arrayBuffer()],t.name);if(rV(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),i1(await vy(i),e,n)}const r=await vy(t);if(e||(e=eV(t)),!n?.type){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return i1(r,e,n)}async function vy(t){var e,n,r,i,o;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(xO(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(tV(t))try{for(var c=!0,f=bo(t),d;d=await f.next(),e=d.done,!e;c=!0){i=d.value,c=!1;const g=i;a.push(...await vy(g))}}catch(g){n={error:g}}finally{try{!c&&!e&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}else{const g=(o=t?.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${g?`; constructor: ${g}`:""}${oV(t)}`)}return a}function oV(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class wO{constructor(e){this._client=e}}wO._key=[];function EO(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const JA=Object.freeze(Object.create(null)),sV=(t=EO)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],a=n.reduce((g,y,E)=>{var C,I,P;/[?#]/.test(y)&&(i=!0);const N=r[E];let L=(i?encodeURIComponent:t)(""+N);return E!==r.length&&(N==null||typeof N=="object"&&N.toString===((P=Object.getPrototypeOf((I=Object.getPrototypeOf((C=N.hasOwnProperty)!==null&&C!==void 0?C:JA))!==null&&I!==void 0?I:JA))===null||P===void 0?void 0:P.toString))&&(L=N+"",o.push({start:g.length+y.length,length:L.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),g+y+(E===r.length?"":L)},""),c=a.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(c))!==null;)o.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(o.sort((g,y)=>g.start-y.start),o.length>0){let g=0;const y=o.reduce((E,C)=>{const I=" ".repeat(C.start-g),P="^".repeat(C.length);return g=C.start+C.length,E+I+P},"");throw new Qi(`Path parameters result in path with invalid segments:
${o.map(E=>E.error).join(`
`)}
${a}
${y}`)}return a}),xh=sV(EO);class bO extends wO{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=d0(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Qi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Qi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(xh`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(xh`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(xh`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:a=this._client.apiVersion}=o,c=d0(o,["api_version"]);return this._client.get(xh`/${a}/interactions/${e}`,Object.assign(Object.assign({query:c},r),{stream:(i=n?.stream)!==null&&i!==void 0?i:!1}))}}bO._key=Object.freeze(["interactions"]);class _O extends bO{}function aV(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let wh;function Wx(t){let e;return(wh??(e=new globalThis.TextEncoder,wh=e.encode.bind(e)))(t)}let Eh;function ZA(t){let e;return(Eh??(e=new globalThis.TextDecoder,Eh=e.decode.bind(e)))(t)}class _p{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Wx(e):e;this.buffer=aV([this.buffer,n]);const r=[];let i;for(;(i=lV(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(ZA(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,a=ZA(this.buffer.subarray(0,o));r.push(a),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}_p.NEWLINE_CHARS=new Set([`
`,"\r"]);_p.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function lV(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function uV(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const f0={off:0,error:200,warn:300,info:400,debug:500},QA=(t,e,n)=>{if(t){if(Gj(f0,t))return t;Wr(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(f0))}`)}};function rd(){}function bh(t,e,n){return!e||f0[t]>f0[n]?rd:e[t].bind(e)}const cV={error:rd,warn:rd,info:rd,debug:rd};let eC=new WeakMap;function Wr(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return cV;const i=eC.get(n);if(i&&i[0]===r)return i[1];const o={error:bh("error",n,r),warn:bh("warn",n,r),info:bh("info",n,r),debug:bh("debug",n,r)};return eC.set(n,[r,o]),o}const Xa=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);class gu{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?Wr(r):console;function a(){return Eo(this,arguments,function*(){var f,d,g,y;if(i)throw new Qi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let E=!1;try{try{for(var C=!0,I=bo(dV(e,n)),P;P=yield mt(I.next()),f=P.done,!f;C=!0){y=P.value,C=!1;const N=y;if(!E)if(N.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield mt(JSON.parse(N.data))}catch(L){throw o.error("Could not parse message into JSON:",N.data),o.error("From chunk:",N.raw),L}}}catch(N){d={error:N}}finally{try{!C&&!f&&(g=I.return)&&(yield mt(g.call(I)))}finally{if(d)throw d.error}}E=!0}catch(N){if(hy(N))return yield mt(void 0);throw N}finally{E||n.abort()}})}return new gu(a,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return Eo(this,arguments,function*(){var f,d,g,y;const E=new _p,C=vO(e);try{for(var I=!0,P=bo(C),N;N=yield mt(P.next()),f=N.done,!f;I=!0){y=N.value,I=!1;const L=y;for(const U of E.decode(L))yield yield mt(U)}}catch(L){d={error:L}}finally{try{!I&&!f&&(g=P.return)&&(yield mt(g.call(P)))}finally{if(d)throw d.error}}for(const L of E.flush())yield yield mt(L)})}function a(){return Eo(this,arguments,function*(){var f,d,g,y;if(i)throw new Qi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let E=!1;try{try{for(var C=!0,I=bo(o()),P;P=yield mt(I.next()),f=P.done,!f;C=!0){y=P.value,C=!1;const N=y;E||N&&(yield yield mt(JSON.parse(N)))}}catch(N){d={error:N}}finally{try{!C&&!f&&(g=I.return)&&(yield mt(g.call(I)))}finally{if(d)throw d.error}}E=!0}catch(N){if(hy(N))return yield mt(void 0);throw N}finally{E||n.abort()}})}return new gu(a,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const a=r.next();e.push(a),n.push(a)}return o.shift()}});return[new gu(()=>i(e),this.controller,this.client),new gu(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return mO({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const a=Wx(JSON.stringify(i)+`
`);r.enqueue(a)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function dV(t,e){return Eo(this,arguments,function*(){var r,i,o,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Qi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Qi("Attempted to iterate over a response with no body");const c=new hV,f=new _p,d=vO(t.body);try{for(var g=!0,y=bo(fV(d)),E;E=yield mt(y.next()),r=E.done,!r;g=!0){a=E.value,g=!1;const C=a;for(const I of f.decode(C)){const P=c.decode(I);P&&(yield yield mt(P))}}}catch(C){i={error:C}}finally{try{!g&&!r&&(o=y.return)&&(yield mt(o.call(y)))}finally{if(i)throw i.error}}for(const C of f.flush()){const I=c.decode(C);I&&(yield yield mt(I))}})}function fV(t){return Eo(this,arguments,function*(){var n,r,i,o;let a=new Uint8Array;try{for(var c=!0,f=bo(t),d;d=yield mt(f.next()),n=d.done,!n;c=!0){o=d.value,c=!1;const g=o;if(g==null)continue;const y=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?Wx(g):g;let E=new Uint8Array(a.length+y.length);E.set(a),E.set(y,a.length),a=E;let C;for(;(C=uV(a))!==-1;)yield yield mt(a.slice(0,C)),a=a.slice(C)}}catch(g){r={error:g}}finally{try{!c&&!n&&(i=f.return)&&(yield mt(i.call(f)))}finally{if(r)throw r.error}}a.length>0&&(yield yield mt(a))})}class hV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=pV(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function pV(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function gV(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,a=await(async()=>{var c;if(e.options.stream)return Wr(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):gu.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type"),d=(c=f?.split(";")[0])===null||c===void 0?void 0:c.trim();return d?.includes("application/json")||d?.endsWith("+json")?await n.json():await n.text()})();return Wr(t).debug(`[${r}] response parsed`,Xa({retryOfRequestLogID:i,url:n.url,status:n.status,body:a,durationMs:Date.now()-o})),a}class Kx extends Promise{constructor(e,n,r=gV){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Kx(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const AO=Symbol("brand.privateNullableHeaders");function*mV(t){if(!t)return;if(AO in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():KA(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=KA(r[1])?r[1]:[r[1]];let a=!1;for(const c of o)c!==void 0&&(e&&!a&&(a=!0,yield[i,null]),yield[i,c])}}const o1=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,a]of mV(r)){const c=o.toLowerCase();i.has(c)||(e.delete(o),i.add(c)),a===null?(e.delete(o),n.add(c)):(e.append(o,a),n.delete(c))}}return{[AO]:!0,values:e,nulls:n}};const s1=t=>{var e,n,r,i,o,a;if(typeof globalThis.process<"u")return(r=(n=(e=G5)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(a=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||a===void 0?void 0:a.trim()};var CO;class Ap{constructor(e){var n,r,i,o,a,c,f,d=e===void 0?{}:e,{baseURL:g=s1("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(n=s1("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=d,C=d0(d,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:y,apiVersion:E},C),{baseURL:g||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(r=I.timeout)!==null&&r!==void 0?r:Ap.DEFAULT_TIMEOUT,this.logger=(i=I.logger)!==null&&i!==void 0?i:console;const P="warn";this.logLevel=P,this.logLevel=(a=(o=QA(I.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:QA(s1("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:P,this.fetchOptions=I.fetchOptions,this.maxRetries=(c=I.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(f=I.fetch)!==null&&f!==void 0?f:Xj(),this.encoder=Qj,this._options=I,this.apiKey=y,this.apiVersion=E}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return o1([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Qi(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${du}`}defaultIdempotencyKey(){return`stainless-node-retry-${Lj()}`}makeStatusError(e,n,r,i){return Xr.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=Fj(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return Vj(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new Kx(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,a;const c=await e,f=(i=c.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=f),await this.prepareOptions(c);const{req:d,url:g,timeout:y}=await this.buildRequest(c,{retryCount:f-n});await this.prepareRequest(d,{url:g,options:c});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=r===void 0?"":`, retryOf: ${r}`,I=Date.now();if(Wr(this).debug(`[${E}] sending request`,Xa({retryOfRequestLogID:r,method:c.method,url:g,options:c,headers:d.headers})),!((o=c.signal)===null||o===void 0)&&o.aborted)throw new gy;const P=new AbortController,N=await this.fetchWithTimeout(g,d,y,P).catch(py),L=Date.now();if(N instanceof globalThis.Error){const F=`retrying, ${n} attempts remaining`;if(!((a=c.signal)===null||a===void 0)&&a.aborted)throw new gy;const z=hy(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(n)return Wr(this).info(`[${E}] connection ${z?"timed out":"failed"} - ${F}`),Wr(this).debug(`[${E}] connection ${z?"timed out":"failed"} (${F})`,Xa({retryOfRequestLogID:r,url:g,durationMs:L-I,message:N.message})),this.retryRequest(c,n,r??E);throw Wr(this).info(`[${E}] connection ${z?"timed out":"failed"} - error; no more retries left`),Wr(this).debug(`[${E}] connection ${z?"timed out":"failed"} (error; no more retries left)`,Xa({retryOfRequestLogID:r,url:g,durationMs:L-I,message:N.message})),z?new aO:new bp({cause:N})}const U=`[${E}${C}] ${d.method} ${g} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${L-I}ms`;if(!N.ok){const F=await this.shouldRetry(N);if(n&&F){const X=`retrying, ${n} attempts remaining`;return await Zj(N.body),Wr(this).info(`${U} - ${X}`),Wr(this).debug(`[${E}] response error (${X})`,Xa({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:L-I})),this.retryRequest(c,n,r??E,N.headers)}const z=F?"error; no more retries left":"error; not retryable";Wr(this).info(`${U} - ${z}`);const q=await N.text().catch(X=>py(X).message),H=$j(q),W=H?void 0:q;throw Wr(this).debug(`[${E}] response error (${z})`,Xa({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,message:W,durationMs:Date.now()-I})),this.makeStatusError(N.status,H,W,N.headers)}return Wr(this).info(U),Wr(this).debug(`[${E}] response start`,Xa({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:L-I})),{response:N,options:c,controller:P,requestLogID:E,retryOfRequestLogID:r,startTime:I}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:a,method:c}=o,f=d0(o,["signal","method"]);a&&a.addEventListener("abort",()=>i.abort());const d=setTimeout(()=>i.abort(),r),g=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,y=Object.assign(Object.assign(Object.assign({signal:i.signal},g?{duplex:"half"}:{}),{method:"GET"}),f);c&&(y.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let a;const c=i?.get("retry-after-ms");if(c){const d=parseFloat(c);Number.isNaN(d)||(a=d)}const f=i?.get("retry-after");if(f&&!a){const d=parseFloat(f);Number.isNaN(d)?a=Date.parse(f)-Date.now():a=d*1e3}if(!(a&&0<=a&&a<60*1e3)){const d=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,d)}return await Hj(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,a=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return a*c*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const a=Object.assign({},e),{method:c,path:f,query:d,defaultBaseURL:g}=a,y=this.buildURL(f,d,g);"timeout"in a&&zj("timeout",a.timeout),a.timeout=(r=a.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:E,body:C}=this.buildBody({options:a}),I=await this.buildHeaders({options:e,method:c,bodyHeaders:E,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:I},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:y,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const a=o1([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Yj()),await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=o1([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Jj(e)}:this.encoder({body:e,headers:r})}}Ap.DEFAULT_TIMEOUT=6e4;class yr extends Ap{constructor(){super(...arguments),this.interactions=new _O(this)}}CO=yr;yr.GeminiNextGenAPIClient=CO;yr.GeminiNextGenAPIClientError=Qi;yr.APIError=Xr;yr.APIConnectionError=bp;yr.APIConnectionTimeoutError=aO;yr.APIUserAbortError=gy;yr.NotFoundError=dO;yr.ConflictError=fO;yr.RateLimitError=pO;yr.BadRequestError=lO;yr.AuthenticationError=uO;yr.InternalServerError=gO;yr.PermissionDeniedError=cO;yr.UnprocessableEntityError=hO;yr.toFile=iV;yr.Interactions=_O;function vV(t,e){const n={},r=b(t,["name"]);return r!=null&&A(n,["_url","name"],r),n}function yV(t,e){const n={},r=b(t,["name"]);return r!=null&&A(n,["_url","name"],r),n}function xV(t,e){const n={},r=b(t,["sdkHttpResponse"]);return r!=null&&A(n,["sdkHttpResponse"],r),n}function wV(t,e){const n={},r=b(t,["sdkHttpResponse"]);return r!=null&&A(n,["sdkHttpResponse"],r),n}function EV(t,e,n){const r={};if(b(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=b(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&A(e,["displayName"],i),b(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=b(t,["epochCount"]);e!==void 0&&o!=null&&A(e,["tuningTask","hyperparameters","epochCount"],o);const a=b(t,["learningRateMultiplier"]);if(a!=null&&A(r,["tuningTask","hyperparameters","learningRateMultiplier"],a),b(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(b(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(b(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=b(t,["batchSize"]);e!==void 0&&c!=null&&A(e,["tuningTask","hyperparameters","batchSize"],c);const f=b(t,["learningRate"]);if(e!==void 0&&f!=null&&A(e,["tuningTask","hyperparameters","learningRate"],f),b(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(b(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function bV(t,e,n){const r={};let i=b(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const C=b(t,["validationDataset"]);e!==void 0&&C!=null&&A(e,["supervisedTuningSpec"],tC(C))}else if(i==="PREFERENCE_TUNING"){const C=b(t,["validationDataset"]);e!==void 0&&C!=null&&A(e,["preferenceOptimizationSpec"],tC(C))}const o=b(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&A(e,["tunedModelDisplayName"],o);const a=b(t,["description"]);e!==void 0&&a!=null&&A(e,["description"],a);let c=b(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const C=b(t,["epochCount"]);e!==void 0&&C!=null&&A(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(c==="PREFERENCE_TUNING"){const C=b(t,["epochCount"]);e!==void 0&&C!=null&&A(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let f=b(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const C=b(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&A(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(f==="PREFERENCE_TUNING"){const C=b(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&A(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let d=b(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=b(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&A(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(d==="PREFERENCE_TUNING"){const C=b(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&A(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let g=b(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const C=b(t,["adapterSize"]);e!==void 0&&C!=null&&A(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(g==="PREFERENCE_TUNING"){const C=b(t,["adapterSize"]);e!==void 0&&C!=null&&A(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(b(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(b(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=b(t,["labels"]);e!==void 0&&y!=null&&A(e,["labels"],y);const E=b(t,["beta"]);return e!==void 0&&E!=null&&A(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),r}function _V(t,e){const n={},r=b(t,["baseModel"]);r!=null&&A(n,["baseModel"],r);const i=b(t,["preTunedModel"]);i!=null&&A(n,["preTunedModel"],i);const o=b(t,["trainingDataset"]);o!=null&&MV(o);const a=b(t,["config"]);return a!=null&&EV(a,n),n}function AV(t,e){const n={},r=b(t,["baseModel"]);r!=null&&A(n,["baseModel"],r);const i=b(t,["preTunedModel"]);i!=null&&A(n,["preTunedModel"],i);const o=b(t,["trainingDataset"]);o!=null&&DV(o,n,e);const a=b(t,["config"]);return a!=null&&bV(a,n,e),n}function CV(t,e){const n={},r=b(t,["name"]);return r!=null&&A(n,["_url","name"],r),n}function SV(t,e){const n={},r=b(t,["name"]);return r!=null&&A(n,["_url","name"],r),n}function TV(t,e,n){const r={},i=b(t,["pageSize"]);e!==void 0&&i!=null&&A(e,["_query","pageSize"],i);const o=b(t,["pageToken"]);e!==void 0&&o!=null&&A(e,["_query","pageToken"],o);const a=b(t,["filter"]);return e!==void 0&&a!=null&&A(e,["_query","filter"],a),r}function IV(t,e,n){const r={},i=b(t,["pageSize"]);e!==void 0&&i!=null&&A(e,["_query","pageSize"],i);const o=b(t,["pageToken"]);e!==void 0&&o!=null&&A(e,["_query","pageToken"],o);const a=b(t,["filter"]);return e!==void 0&&a!=null&&A(e,["_query","filter"],a),r}function PV(t,e){const n={},r=b(t,["config"]);return r!=null&&TV(r,n),n}function NV(t,e){const n={},r=b(t,["config"]);return r!=null&&IV(r,n),n}function RV(t,e){const n={},r=b(t,["sdkHttpResponse"]);r!=null&&A(n,["sdkHttpResponse"],r);const i=b(t,["nextPageToken"]);i!=null&&A(n,["nextPageToken"],i);const o=b(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>SO(c))),A(n,["tuningJobs"],a)}return n}function OV(t,e){const n={},r=b(t,["sdkHttpResponse"]);r!=null&&A(n,["sdkHttpResponse"],r);const i=b(t,["nextPageToken"]);i!=null&&A(n,["nextPageToken"],i);const o=b(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>yy(c))),A(n,["tuningJobs"],a)}return n}function kV(t,e){const n={},r=b(t,["name"]);r!=null&&A(n,["model"],r);const i=b(t,["name"]);return i!=null&&A(n,["endpoint"],i),n}function MV(t,e){const n={};if(b(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(b(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=b(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),A(n,["examples","examples"],i)}return n}function DV(t,e,n){const r={};let i=b(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const a=b(t,["gcsUri"]);e!==void 0&&a!=null&&A(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(i==="PREFERENCE_TUNING"){const a=b(t,["gcsUri"]);e!==void 0&&a!=null&&A(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=b(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=b(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&A(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=b(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&A(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(b(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function SO(t,e){const n={},r=b(t,["sdkHttpResponse"]);r!=null&&A(n,["sdkHttpResponse"],r);const i=b(t,["name"]);i!=null&&A(n,["name"],i);const o=b(t,["state"]);o!=null&&A(n,["state"],jR(o));const a=b(t,["createTime"]);a!=null&&A(n,["createTime"],a);const c=b(t,["tuningTask","startTime"]);c!=null&&A(n,["startTime"],c);const f=b(t,["tuningTask","completeTime"]);f!=null&&A(n,["endTime"],f);const d=b(t,["updateTime"]);d!=null&&A(n,["updateTime"],d);const g=b(t,["description"]);g!=null&&A(n,["description"],g);const y=b(t,["baseModel"]);y!=null&&A(n,["baseModel"],y);const E=b(t,["_self"]);return E!=null&&A(n,["tunedModel"],kV(E)),n}function yy(t,e){const n={},r=b(t,["sdkHttpResponse"]);r!=null&&A(n,["sdkHttpResponse"],r);const i=b(t,["name"]);i!=null&&A(n,["name"],i);const o=b(t,["state"]);o!=null&&A(n,["state"],jR(o));const a=b(t,["createTime"]);a!=null&&A(n,["createTime"],a);const c=b(t,["startTime"]);c!=null&&A(n,["startTime"],c);const f=b(t,["endTime"]);f!=null&&A(n,["endTime"],f);const d=b(t,["updateTime"]);d!=null&&A(n,["updateTime"],d);const g=b(t,["error"]);g!=null&&A(n,["error"],g);const y=b(t,["description"]);y!=null&&A(n,["description"],y);const E=b(t,["baseModel"]);E!=null&&A(n,["baseModel"],E);const C=b(t,["tunedModel"]);C!=null&&A(n,["tunedModel"],C);const I=b(t,["preTunedModel"]);I!=null&&A(n,["preTunedModel"],I);const P=b(t,["supervisedTuningSpec"]);P!=null&&A(n,["supervisedTuningSpec"],P);const N=b(t,["preferenceOptimizationSpec"]);N!=null&&A(n,["preferenceOptimizationSpec"],N);const L=b(t,["tuningDataStats"]);L!=null&&A(n,["tuningDataStats"],L);const U=b(t,["encryptionSpec"]);U!=null&&A(n,["encryptionSpec"],U);const F=b(t,["partnerModelTuningSpec"]);F!=null&&A(n,["partnerModelTuningSpec"],F);const z=b(t,["customBaseModel"]);z!=null&&A(n,["customBaseModel"],z);const q=b(t,["experiment"]);q!=null&&A(n,["experiment"],q);const H=b(t,["labels"]);H!=null&&A(n,["labels"],H);const W=b(t,["outputUri"]);W!=null&&A(n,["outputUri"],W);const Z=b(t,["pipelineJob"]);Z!=null&&A(n,["pipelineJob"],Z);const X=b(t,["serviceAccount"]);X!=null&&A(n,["serviceAccount"],X);const ye=b(t,["tunedModelDisplayName"]);ye!=null&&A(n,["tunedModelDisplayName"],ye);const se=b(t,["veoTuningSpec"]);return se!=null&&A(n,["veoTuningSpec"],se),n}function LV(t,e){const n={},r=b(t,["sdkHttpResponse"]);r!=null&&A(n,["sdkHttpResponse"],r);const i=b(t,["name"]);i!=null&&A(n,["name"],i);const o=b(t,["metadata"]);o!=null&&A(n,["metadata"],o);const a=b(t,["done"]);a!=null&&A(n,["done"],a);const c=b(t,["error"]);return c!=null&&A(n,["error"],c),n}function tC(t,e){const n={},r=b(t,["gcsUri"]);r!=null&&A(n,["validationDatasetUri"],r);const i=b(t,["vertexDatasetResource"]);return i!=null&&A(n,["validationDatasetUri"],i),n}class BV extends As{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new El(gs.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:sy.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=SV(e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>yy(g))}else{const d=CV(e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>SO(g))}}async listInternal(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=NV(e);return c=Ue("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=OV(g),E=new TA;return Object.assign(E,y),E})}else{const d=PV(e);return c=Ue("tunedModels",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=RV(g),E=new TA;return Object.assign(E,y),E})}}async cancel(e){var n,r,i,o;let a,c="",f={};if(this.apiClient.isVertexAI()){const d=yV(e);return c=Ue("{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=wV(g),E=new IA;return Object.assign(E,y),E})}else{const d=vV(e);return c=Ue("{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),a.then(g=>{const y=xV(g),E=new IA;return Object.assign(E,y),E})}}async tuneInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const c=AV(e,e);return o=Ue("tuningJobs",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const g=d;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>yy(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_V(e);return o=Ue("tunedModels",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const g=d;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>LV(f))}}}class FV{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const UV=1024*1024*8,jV=3,VV=1e3,GV=2,h0="x-goog-upload-status";async function zV(t,e,n){var r;const i=await TO(t,e,n),o=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[h0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function $V(t,e,n){var r;const i=await TO(t,e,n),o=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[h0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=MR(o),c=new Vx;return Object.assign(c,a),c}async function TO(t,e,n){var r,i;let o=0,a=0,c=new ay(new Response),f="upload";for(o=t.size;a<o;){const d=Math.min(UV,o-a),g=t.slice(a,a+d);a+d>=o&&(f+=", finalize");let y=0,E=VV;for(;y<jV&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((r=c?.headers)===null||r===void 0)&&r[h0]));)y++,await qV(E),E=E*GV;if(a+=d,((i=c?.headers)===null||i===void 0?void 0:i[h0])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function HV(t){return{size:t.size,type:t.type}}function qV(t){return new Promise(e=>setTimeout(e,t))}class WV{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zV(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $V(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await HV(e)}}class KV{create(e,n,r){return new YV(e,n,r)}}class YV{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const nC="x-goog-api-key";class XV{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(nC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(nC,this.apiKey)}}}const JV="gl-node/";class ZV{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new yr({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=q5(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new XV(this.apiKey);this.apiClient=new HU({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:JV+"web",uploader:new WV,downloader:new FV}),this.models=new cj(this.apiClient),this.live=new ij(this.apiClient,i,new KV),this.batches=new E7(this.apiClient),this.chats=new n9(this.models,this.apiClient),this.caches=new Q7(this.apiClient),this.files=new f9(this.apiClient),this.operations=new dj(this.apiClient),this.authTokens=new Tj(this.apiClient),this.tunings=new BV(this.apiClient),this.fileSearchStores=new Dj(this.apiClient)}}const QV={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GEMINI_API_KEY:"",VITE_SUPABASE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hYmpsaGpsa2VlaGFjenhyZ2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4Mzg5MDMsImV4cCI6MjA4MTQxNDkwM30.eHuUAZMQ9eGffxCwYwOczhzZuRksv41QoUaIulebpT4",VITE_SUPABASE_URL:"https://mabjlhjlkeehaczxrgcy.supabase.co"},eG=()=>{},rC=eG();let xy=null;if(rC)try{xy=new ZV({apiKey:rC})}catch(t){console.error("Error initializing Gemini:",t)}else console.warn("VITE_GEMINI_API_KEY no encontrada. El chat funcionar en modo DEMO.");const tG=async(t,e)=>{if(!xy)return await new Promise(o=>setTimeout(o,800)),t.toLowerCase().includes("precio")||t.toLowerCase().includes("valor")?"Nuestros cortes parten desde $19.990. Los decants de perfumes tienen precios variados, por ejemplo Good Girl 5ml a $8.990. Te gustara ver el catlogo completo?":t.toLowerCase().includes("domicilio")||t.toLowerCase().includes("casa")?"S! Vamos a tu domicilio en Santiago Centro y uoa por un recargo de $3.000 adicional. Llevamos todo lo necesario para tu cambio de look.":t.toLowerCase().includes("hola")||t.toLowerCase().includes("buenos")?"Hola! Bienvenid@ a Tus3B Style. Soy tu asistente virtual (Modo Demo). Puedo ayudarte con precios, zonas de cobertura y recomendaciones de perfumes.":"Gracias por tu mensaje. Como estoy en Modo Demo (sin API Key configurada), mis respuestas son limitadas. Te sugiero contactarnos directamente por WhatsApp para una atencin personalizada.";const n=Su.map(o=>`- ${o.brand} ${o.name}: ${o.description}. Notas: ${o.notes.join(", ")}. Precio 5ml: ${o.price5ml}, 10ml: ${o.price10ml}.`).join(`
`),r=hu.map(o=>`- ${o.name}: ${o.description}. Precio: ${o.price}. Incluye: ${o.includes.join(", ")}.`).join(`
`),i=`
    Eres "StyleBot", un asistente experto en belleza y perfumera para la tienda "Tus3B Style" en Chile.
    
    Tus objetivos:
    1. Recomendar perfumes de nuestro catlogo basndote en los gustos del usuario (dulce, fresco, para noche, etc).
    2. Informar sobre nuestro servicio de corte y brushing ($19.990) y el recargo a domicilio ($3.000 para Santiago/uoa).
    
    Contexto del Catlogo de Perfumes:
    ${n}

    Contexto de Servicios de Peluquera:
    ${r}

    Reglas:
    - S amable, sofisticado pero cercano.
    - Responde en espaol de Chile.
    - Si te preguntan por un perfume que NO est en la lista, di amablemente que no lo tienes pero sugiere uno similar del catlogo.
    - Mantn las respuestas breves (mximo 3 oraciones).
    - Anima al usuario a reservar o comprar.
  `;try{return(await xy.models.generateContent({model:"gemini-1.5-flash",contents:[{role:"user",parts:[{text:i+`

 Historial de chat:
`+e.join(`
`)+`

Usuario: `+t}]}]})).text||"Lo siento, no pude procesar tu solicitud."}catch(o){return console.error("Error calling Gemini:",o),"Hubo un error al conectar con el asistente. Por favor intenta ms tarde."}},nG=()=>{const[t,e]=M.useState(!1),[n,r]=M.useState([{role:"bot",text:"Hola! Soy tu asistente de estilo. Buscas un perfume especial o tienes dudas sobre el corte a domicilio?"}]),[i,o]=M.useState(""),[a,c]=M.useState(!1),f=M.useRef(null),d=()=>{f.current?.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{d()},[n,t]);const g=async()=>{if(!i.trim()||a)return;const E=i;r(P=>[...P,{role:"user",text:E}]),o(""),c(!0);const C=n.map(P=>`${P.role==="user"?"Usuario":"Bot"}: ${P.text}`),I=await tG(E,C);r(P=>[...P,{role:"bot",text:I}]),c(!1)},y=E=>{E.key==="Enter"&&g()};return k.jsxs(k.Fragment,{children:[k.jsx("button",{onClick:()=>e(!t),className:`fixed bottom-6 right-6 z-50 p-4 rounded-full shadow-2xl transition-all duration-300 hover:scale-110 flex items-center justify-center ${t?"bg-stone-800 rotate-90":"bg-stone-900 rotate-0"}`,children:t?k.jsx(hp,{color:"white"}):k.jsx(Vv,{color:"white"})}),t&&k.jsxs("div",{className:"fixed bottom-24 right-6 w-80 sm:w-96 bg-white rounded-2xl shadow-2xl border border-stone-200 z-50 flex flex-col overflow-hidden animate-in slide-in-from-bottom-10 fade-in duration-300 h-[500px]",children:[k.jsxs("div",{className:"bg-stone-900 p-4 flex items-center space-x-3",children:[k.jsx("div",{className:"bg-stone-700 p-2 rounded-full",children:k.jsx(Vv,{size:16,className:"text-yellow-400"})}),k.jsxs("div",{children:[k.jsx("h3",{className:"text-white font-serif font-bold",children:"Asistente Tus3B"}),k.jsx("p",{className:"text-stone-400 text-xs",children:"Te ayudo a elegir tu estilo"})]})]}),k.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-stone-50",children:[n.map((E,C)=>k.jsx("div",{className:`flex ${E.role==="user"?"justify-end":"justify-start"}`,children:k.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-sm ${E.role==="user"?"bg-stone-800 text-white rounded-br-none":"bg-white text-stone-800 border border-stone-200 rounded-bl-none shadow-sm"}`,children:E.text})},C)),a&&k.jsx("div",{className:"flex justify-start",children:k.jsxs("div",{className:"bg-white p-3 rounded-2xl rounded-bl-none border border-stone-200 shadow-sm flex items-center space-x-2",children:[k.jsx(Zh,{size:16,className:"animate-spin text-stone-400"}),k.jsx("span",{className:"text-xs text-stone-400",children:"Escribiendo..."})]})}),k.jsx("div",{ref:f})]}),k.jsxs("div",{className:"p-3 bg-white border-t border-stone-100 flex items-center gap-2",children:[k.jsx("input",{type:"text",value:i,onChange:E=>o(E.target.value),onKeyDown:y,placeholder:"Pregunta por perfumes o cortes...",className:"flex-1 text-sm border-none focus:ring-0 bg-stone-100 rounded-full px-4 py-2 text-stone-800 placeholder-stone-400"}),k.jsx("button",{onClick:g,disabled:a||!i.trim(),className:"p-2 bg-stone-900 text-white rounded-full hover:bg-stone-700 disabled:opacity-50 transition",children:k.jsx(m6,{size:16})})]})]})]})},rG=({isHomeService:t,onGoHome:e,onGoCatalog:n})=>(M.useEffect(()=>{window.scrollTo(0,0)},[]),k.jsx("div",{className:"min-h-[70vh] flex items-center justify-center p-4 fade-in",children:k.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-3xl shadow-2xl border border-stone-100 max-w-2xl w-full text-center relative overflow-hidden",children:[k.jsx("div",{className:"absolute -top-20 -right-20 w-64 h-64 bg-green-50 rounded-full opacity-50 blur-3xl pointer-events-none"}),k.jsx("div",{className:"absolute -bottom-20 -left-20 w-64 h-64 bg-amber-50 rounded-full opacity-50 blur-3xl pointer-events-none"}),k.jsxs("div",{className:"relative z-10",children:[k.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 text-green-600 rounded-full mb-6 shadow-sm animate-in zoom-in spin-in-12 duration-700",children:k.jsx(dN,{size:40,strokeWidth:2.5})}),k.jsx("h2",{className:"serif text-4xl text-stone-900 mb-3",children:"Reserva Confirmada!"}),k.jsx("p",{className:"text-xl text-stone-600 font-light mb-8",children:"Gracias por tu confianza!"}),!t&&k.jsxs("div",{className:"bg-stone-50 p-6 rounded-2xl mb-8 border border-stone-100 transform transition hover:scale-105 duration-300",children:[k.jsxs("h3",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-3 flex items-center justify-center gap-2",children:[k.jsx(hN,{size:14})," Direccin del Servicio"]}),k.jsx("p",{className:"text-xl font-medium text-stone-800",children:"Diagonal Vicua Mackenna 2004"}),k.jsx("p",{className:"text-lg text-stone-600",children:"Torre B, Santiago"})]}),k.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-8",children:[k.jsxs("button",{onClick:e,className:"flex items-center justify-center gap-2 px-8 py-4 bg-stone-100 text-stone-700 rounded-xl font-bold hover:bg-stone-200 transition-colors w-full sm:w-auto",children:[k.jsx(r6,{size:20}),"Regresar al Inicio"]}),k.jsxs("button",{onClick:n,className:"flex items-center justify-center gap-2 px-8 py-4 bg-stone-900 text-white rounded-xl font-bold hover:bg-stone-800 transition-transform hover:-translate-y-1 shadow-lg w-full sm:w-auto",children:[k.jsx(cd,{size:20}),k.jsxs("span",{children:["Venta de Perfumes ",k.jsx("span",{className:"block text-[10px] font-normal opacity-80 leading-none mt-0.5",children:"Formatos 5ml y 10ml"})]})]})]})]})]})})),iG=()=>k.jsx("section",{className:"py-24 bg-white",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"text-center mb-16",children:[k.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Testimonios"}),k.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Lo que dicen nuestras clientas"})]}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:I6.map(t=>k.jsxs("div",{className:"bg-stone-50 p-8 rounded-sm hover:shadow-lg transition-shadow duration-300 relative",children:[k.jsx(f6,{className:"absolute top-6 right-6 text-stone-200",size:40}),k.jsx("div",{className:"flex space-x-1 mb-4 text-amber-500",children:[...Array(5)].map((e,n)=>k.jsx(Px,{size:16,fill:n<t.rating?"currentColor":"none",className:n<t.rating?"text-amber-500":"text-stone-300"},n))}),k.jsxs("p",{className:"text-stone-600 italic mb-6 leading-relaxed relative z-10",children:['"',t.comment,'"']}),k.jsxs("div",{className:"flex justify-between items-end border-t border-stone-200 pt-4",children:[k.jsxs("div",{children:[k.jsx("h4",{className:"font-bold text-stone-900",children:t.name}),k.jsx("span",{className:"text-xs text-stone-400 font-medium",children:"Cliente Verificado"})]}),k.jsx("span",{className:"text-xs text-stone-400",children:t.date})]})]},t.id))})]})});var oG=Object.defineProperty,p0=Object.getOwnPropertySymbols,IO=Object.prototype.hasOwnProperty,PO=Object.prototype.propertyIsEnumerable,iC=(t,e,n)=>e in t?oG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wy=(t,e)=>{for(var n in e||(e={}))IO.call(e,n)&&iC(t,n,e[n]);if(p0)for(var n of p0(e))PO.call(e,n)&&iC(t,n,e[n]);return t},Ey=(t,e)=>{var n={};for(var r in t)IO.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&p0)for(var r of p0(t))e.indexOf(r)<0&&PO.call(t,r)&&(n[r]=t[r]);return n};var cl;(t=>{const e=class Ct{constructor(f,d,g,y){if(this.version=f,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],f<Ct.MIN_VERSION||f>Ct.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=f*4+17;let E=[];for(let I=0;I<this.size;I++)E.push(!1);for(let I=0;I<this.size;I++)this.modules.push(E.slice()),this.isFunction.push(E.slice());this.drawFunctionPatterns();const C=this.addEccAndInterleave(g);if(this.drawCodewords(C),y==-1){let I=1e9;for(let P=0;P<8;P++){this.applyMask(P),this.drawFormatBits(P);const N=this.getPenaltyScore();N<I&&(y=P,I=N),this.applyMask(P)}}i(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(f,d){const g=t.QrSegment.makeSegments(f);return Ct.encodeSegments(g,d)}static encodeBinary(f,d){const g=t.QrSegment.makeBytes(f);return Ct.encodeSegments([g],d)}static encodeSegments(f,d,g=1,y=40,E=-1,C=!0){if(!(Ct.MIN_VERSION<=g&&g<=y&&y<=Ct.MAX_VERSION)||E<-1||E>7)throw new RangeError("Invalid value");let I,P;for(I=g;;I++){const F=Ct.getNumDataCodewords(I,d)*8,z=a.getTotalBits(f,I);if(z<=F){P=z;break}if(I>=y)throw new RangeError("Data too long")}for(const F of[Ct.Ecc.MEDIUM,Ct.Ecc.QUARTILE,Ct.Ecc.HIGH])C&&P<=Ct.getNumDataCodewords(I,F)*8&&(d=F);let N=[];for(const F of f){n(F.mode.modeBits,4,N),n(F.numChars,F.mode.numCharCountBits(I),N);for(const z of F.getData())N.push(z)}i(N.length==P);const L=Ct.getNumDataCodewords(I,d)*8;i(N.length<=L),n(0,Math.min(4,L-N.length),N),n(0,(8-N.length%8)%8,N),i(N.length%8==0);for(let F=236;N.length<L;F^=253)n(F,8,N);let U=[];for(;U.length*8<N.length;)U.push(0);return N.forEach((F,z)=>U[z>>>3]|=F<<7-(z&7)),new Ct(I,d,U,E)}getModule(f,d){return 0<=f&&f<this.size&&0<=d&&d<this.size&&this.modules[d][f]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const f=this.getAlignmentPatternPositions(),d=f.length;for(let g=0;g<d;g++)for(let y=0;y<d;y++)g==0&&y==0||g==0&&y==d-1||g==d-1&&y==0||this.drawAlignmentPattern(f[g],f[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(f){const d=this.errorCorrectionLevel.formatBits<<3|f;let g=d;for(let E=0;E<10;E++)g=g<<1^(g>>>9)*1335;const y=(d<<10|g)^21522;i(y>>>15==0);for(let E=0;E<=5;E++)this.setFunctionModule(8,E,r(y,E));this.setFunctionModule(8,7,r(y,6)),this.setFunctionModule(8,8,r(y,7)),this.setFunctionModule(7,8,r(y,8));for(let E=9;E<15;E++)this.setFunctionModule(14-E,8,r(y,E));for(let E=0;E<8;E++)this.setFunctionModule(this.size-1-E,8,r(y,E));for(let E=8;E<15;E++)this.setFunctionModule(8,this.size-15+E,r(y,E));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let f=this.version;for(let g=0;g<12;g++)f=f<<1^(f>>>11)*7973;const d=this.version<<12|f;i(d>>>18==0);for(let g=0;g<18;g++){const y=r(d,g),E=this.size-11+g%3,C=Math.floor(g/3);this.setFunctionModule(E,C,y),this.setFunctionModule(C,E,y)}}drawFinderPattern(f,d){for(let g=-4;g<=4;g++)for(let y=-4;y<=4;y++){const E=Math.max(Math.abs(y),Math.abs(g)),C=f+y,I=d+g;0<=C&&C<this.size&&0<=I&&I<this.size&&this.setFunctionModule(C,I,E!=2&&E!=4)}}drawAlignmentPattern(f,d){for(let g=-2;g<=2;g++)for(let y=-2;y<=2;y++)this.setFunctionModule(f+y,d+g,Math.max(Math.abs(y),Math.abs(g))!=1)}setFunctionModule(f,d,g){this.modules[d][f]=g,this.isFunction[d][f]=!0}addEccAndInterleave(f){const d=this.version,g=this.errorCorrectionLevel;if(f.length!=Ct.getNumDataCodewords(d,g))throw new RangeError("Invalid argument");const y=Ct.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][d],E=Ct.ECC_CODEWORDS_PER_BLOCK[g.ordinal][d],C=Math.floor(Ct.getNumRawDataModules(d)/8),I=y-C%y,P=Math.floor(C/y);let N=[];const L=Ct.reedSolomonComputeDivisor(E);for(let F=0,z=0;F<y;F++){let q=f.slice(z,z+P-E+(F<I?0:1));z+=q.length;const H=Ct.reedSolomonComputeRemainder(q,L);F<I&&q.push(0),N.push(q.concat(H))}let U=[];for(let F=0;F<N[0].length;F++)N.forEach((z,q)=>{(F!=P-E||q>=I)&&U.push(z[F])});return i(U.length==C),U}drawCodewords(f){if(f.length!=Math.floor(Ct.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let y=0;y<this.size;y++)for(let E=0;E<2;E++){const C=g-E,P=(g+1&2)==0?this.size-1-y:y;!this.isFunction[P][C]&&d<f.length*8&&(this.modules[P][C]=r(f[d>>>3],7-(d&7)),d++)}}i(d==f.length*8)}applyMask(f){if(f<0||f>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let g=0;g<this.size;g++){let y;switch(f){case 0:y=(g+d)%2==0;break;case 1:y=d%2==0;break;case 2:y=g%3==0;break;case 3:y=(g+d)%3==0;break;case 4:y=(Math.floor(g/3)+Math.floor(d/2))%2==0;break;case 5:y=g*d%2+g*d%3==0;break;case 6:y=(g*d%2+g*d%3)%2==0;break;case 7:y=((g+d)%2+g*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][g]&&y&&(this.modules[d][g]=!this.modules[d][g])}}getPenaltyScore(){let f=0;for(let E=0;E<this.size;E++){let C=!1,I=0,P=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[E][N]==C?(I++,I==5?f+=Ct.PENALTY_N1:I>5&&f++):(this.finderPenaltyAddHistory(I,P),C||(f+=this.finderPenaltyCountPatterns(P)*Ct.PENALTY_N3),C=this.modules[E][N],I=1);f+=this.finderPenaltyTerminateAndCount(C,I,P)*Ct.PENALTY_N3}for(let E=0;E<this.size;E++){let C=!1,I=0,P=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[N][E]==C?(I++,I==5?f+=Ct.PENALTY_N1:I>5&&f++):(this.finderPenaltyAddHistory(I,P),C||(f+=this.finderPenaltyCountPatterns(P)*Ct.PENALTY_N3),C=this.modules[N][E],I=1);f+=this.finderPenaltyTerminateAndCount(C,I,P)*Ct.PENALTY_N3}for(let E=0;E<this.size-1;E++)for(let C=0;C<this.size-1;C++){const I=this.modules[E][C];I==this.modules[E][C+1]&&I==this.modules[E+1][C]&&I==this.modules[E+1][C+1]&&(f+=Ct.PENALTY_N2)}let d=0;for(const E of this.modules)d=E.reduce((C,I)=>C+(I?1:0),d);const g=this.size*this.size,y=Math.ceil(Math.abs(d*20-g*10)/g)-1;return i(0<=y&&y<=9),f+=y*Ct.PENALTY_N4,i(0<=f&&f<=2568888),f}getAlignmentPatternPositions(){if(this.version==1)return[];{const f=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(f*2-2))*2;let g=[6];for(let y=this.size-7;g.length<f;y-=d)g.splice(1,0,y);return g}}static getNumRawDataModules(f){if(f<Ct.MIN_VERSION||f>Ct.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*f+128)*f+64;if(f>=2){const g=Math.floor(f/7)+2;d-=(25*g-10)*g-55,f>=7&&(d-=36)}return i(208<=d&&d<=29648),d}static getNumDataCodewords(f,d){return Math.floor(Ct.getNumRawDataModules(f)/8)-Ct.ECC_CODEWORDS_PER_BLOCK[d.ordinal][f]*Ct.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][f]}static reedSolomonComputeDivisor(f){if(f<1||f>255)throw new RangeError("Degree out of range");let d=[];for(let y=0;y<f-1;y++)d.push(0);d.push(1);let g=1;for(let y=0;y<f;y++){for(let E=0;E<d.length;E++)d[E]=Ct.reedSolomonMultiply(d[E],g),E+1<d.length&&(d[E]^=d[E+1]);g=Ct.reedSolomonMultiply(g,2)}return d}static reedSolomonComputeRemainder(f,d){let g=d.map(y=>0);for(const y of f){const E=y^g.shift();g.push(0),d.forEach((C,I)=>g[I]^=Ct.reedSolomonMultiply(C,E))}return g}static reedSolomonMultiply(f,d){if(f>>>8||d>>>8)throw new RangeError("Byte out of range");let g=0;for(let y=7;y>=0;y--)g=g<<1^(g>>>7)*285,g^=(d>>>y&1)*f;return i(g>>>8==0),g}finderPenaltyCountPatterns(f){const d=f[1];i(d<=this.size*3);const g=d>0&&f[2]==d&&f[3]==d*3&&f[4]==d&&f[5]==d;return(g&&f[0]>=d*4&&f[6]>=d?1:0)+(g&&f[6]>=d*4&&f[0]>=d?1:0)}finderPenaltyTerminateAndCount(f,d,g){return f&&(this.finderPenaltyAddHistory(d,g),d=0),d+=this.size,this.finderPenaltyAddHistory(d,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(f,d){d[0]==0&&(f+=this.size),d.pop(),d.unshift(f)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(c,f,d){if(f<0||f>31||c>>>f)throw new RangeError("Value out of range");for(let g=f-1;g>=0;g--)d.push(c>>>g&1)}function r(c,f){return(c>>>f&1)!=0}function i(c){if(!c)throw new Error("Assertion error")}const o=class Pn{constructor(f,d,g){if(this.mode=f,this.numChars=d,this.bitData=g,d<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(f){let d=[];for(const g of f)n(g,8,d);return new Pn(Pn.Mode.BYTE,f.length,d)}static makeNumeric(f){if(!Pn.isNumeric(f))throw new RangeError("String contains non-numeric characters");let d=[];for(let g=0;g<f.length;){const y=Math.min(f.length-g,3);n(parseInt(f.substring(g,g+y),10),y*3+1,d),g+=y}return new Pn(Pn.Mode.NUMERIC,f.length,d)}static makeAlphanumeric(f){if(!Pn.isAlphanumeric(f))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],g;for(g=0;g+2<=f.length;g+=2){let y=Pn.ALPHANUMERIC_CHARSET.indexOf(f.charAt(g))*45;y+=Pn.ALPHANUMERIC_CHARSET.indexOf(f.charAt(g+1)),n(y,11,d)}return g<f.length&&n(Pn.ALPHANUMERIC_CHARSET.indexOf(f.charAt(g)),6,d),new Pn(Pn.Mode.ALPHANUMERIC,f.length,d)}static makeSegments(f){return f==""?[]:Pn.isNumeric(f)?[Pn.makeNumeric(f)]:Pn.isAlphanumeric(f)?[Pn.makeAlphanumeric(f)]:[Pn.makeBytes(Pn.toUtf8ByteArray(f))]}static makeEci(f){let d=[];if(f<0)throw new RangeError("ECI assignment value out of range");if(f<128)n(f,8,d);else if(f<16384)n(2,2,d),n(f,14,d);else if(f<1e6)n(6,3,d),n(f,21,d);else throw new RangeError("ECI assignment value out of range");return new Pn(Pn.Mode.ECI,0,d)}static isNumeric(f){return Pn.NUMERIC_REGEX.test(f)}static isAlphanumeric(f){return Pn.ALPHANUMERIC_REGEX.test(f)}getData(){return this.bitData.slice()}static getTotalBits(f,d){let g=0;for(const y of f){const E=y.mode.numCharCountBits(d);if(y.numChars>=1<<E)return 1/0;g+=4+E+y.bitData.length}return g}static toUtf8ByteArray(f){f=encodeURI(f);let d=[];for(let g=0;g<f.length;g++)f.charAt(g)!="%"?d.push(f.charCodeAt(g)):(d.push(parseInt(f.substring(g+1,g+3),16)),g+=2);return d}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=o;t.QrSegment=o})(cl||(cl={}));(t=>{(e=>{const n=class{constructor(i,o){this.ordinal=i,this.formatBits=o}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(cl||(cl={}));(t=>{(e=>{const n=class{constructor(i,o){this.modeBits=i,this.numBitsCharCount=o}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(cl||(cl={}));var mu=cl;var sG={L:mu.QrCode.Ecc.LOW,M:mu.QrCode.Ecc.MEDIUM,Q:mu.QrCode.Ecc.QUARTILE,H:mu.QrCode.Ecc.HIGH},NO=128,RO="L",OO="#FFFFFF",kO="#000000",MO=!1,DO=1,aG=4,lG=0,uG=.1;function LO(t,e=0){const n=[];return t.forEach(function(r,i){let o=null;r.forEach(function(a,c){if(!a&&o!==null){n.push(`M${o+e} ${i+e}h${c-o}v1H${o+e}z`),o=null;return}if(c===r.length-1){if(!a)return;o===null?n.push(`M${c+e},${i+e} h1v1H${c+e}z`):n.push(`M${o+e},${i+e} h${c+1-o}v1H${o+e}z`);return}a&&o===null&&(o=c)})}),n.join("")}function BO(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((i,o)=>o<e.x||o>=e.x+e.w?i:!1))}function cG(t,e,n,r){if(r==null)return null;const i=t.length+n*2,o=Math.floor(e*uG),a=i/e,c=(r.width||o)*a,f=(r.height||o)*a,d=r.x==null?t.length/2-c/2:r.x*a,g=r.y==null?t.length/2-f/2:r.y*a,y=r.opacity==null?1:r.opacity;let E=null;if(r.excavate){let I=Math.floor(d),P=Math.floor(g),N=Math.ceil(c+d-I),L=Math.ceil(f+g-P);E={x:I,y:P,w:N,h:L}}const C=r.crossOrigin;return{x:d,y:g,h:f,w:c,excavation:E,opacity:y,crossOrigin:C}}function dG(t,e){return e!=null?Math.max(Math.floor(e),0):t?aG:lG}function FO({value:t,level:e,minVersion:n,includeMargin:r,marginSize:i,imageSettings:o,size:a,boostLevel:c}){let f=bn.useMemo(()=>{const I=(Array.isArray(t)?t:[t]).reduce((P,N)=>(P.push(...mu.QrSegment.makeSegments(N)),P),[]);return mu.QrCode.encodeSegments(I,sG[e],n,void 0,void 0,c)},[t,e,n,c]);const{cells:d,margin:g,numCells:y,calculatedImageSettings:E}=bn.useMemo(()=>{let C=f.getModules();const I=dG(r,i),P=C.length+I*2,N=cG(C,a,I,o);return{cells:C,margin:I,numCells:P,calculatedImageSettings:N}},[f,a,o,r,i]);return{qrcode:f,margin:g,cells:d,numCells:y,calculatedImageSettings:E}}var fG=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),hG=bn.forwardRef(function(e,n){const r=e,{value:i,size:o=NO,level:a=RO,bgColor:c=OO,fgColor:f=kO,includeMargin:d=MO,minVersion:g=DO,boostLevel:y,marginSize:E,imageSettings:C}=r,P=Ey(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:N}=P,L=Ey(P,["style"]),U=C?.src,F=bn.useRef(null),z=bn.useRef(null),q=bn.useCallback(fe=>{F.current=fe,typeof n=="function"?n(fe):n&&(n.current=fe)},[n]),[H,W]=bn.useState(!1),{margin:Z,cells:X,numCells:ye,calculatedImageSettings:se}=FO({value:i,level:a,minVersion:g,boostLevel:y,includeMargin:d,marginSize:E,imageSettings:C,size:o});bn.useEffect(()=>{if(F.current!=null){const fe=F.current,ne=fe.getContext("2d");if(!ne)return;let we=X;const me=z.current,xe=se!=null&&me!==null&&me.complete&&me.naturalHeight!==0&&me.naturalWidth!==0;xe&&se.excavation!=null&&(we=BO(X,se.excavation));const Ae=window.devicePixelRatio||1;fe.height=fe.width=o*Ae;const Ce=o/ye*Ae;ne.scale(Ce,Ce),ne.fillStyle=c,ne.fillRect(0,0,ye,ye),ne.fillStyle=f,fG?ne.fill(new Path2D(LO(we,Z))):X.forEach(function(te,he){te.forEach(function(Fe,Le){Fe&&ne.fillRect(Le+Z,he+Z,1,1)})}),se&&(ne.globalAlpha=se.opacity),xe&&ne.drawImage(me,se.x+Z,se.y+Z,se.w,se.h)}}),bn.useEffect(()=>{W(!1)},[U]);const ae=wy({height:o,width:o},N);let be=null;return U!=null&&(be=bn.createElement("img",{src:U,key:U,style:{display:"none"},onLoad:()=>{W(!0)},ref:z,crossOrigin:se?.crossOrigin})),bn.createElement(bn.Fragment,null,bn.createElement("canvas",wy({style:ae,height:o,width:o,ref:q,role:"img"},L)),be)});hG.displayName="QRCodeCanvas";var UO=bn.forwardRef(function(e,n){const r=e,{value:i,size:o=NO,level:a=RO,bgColor:c=OO,fgColor:f=kO,includeMargin:d=MO,minVersion:g=DO,boostLevel:y,title:E,marginSize:C,imageSettings:I}=r,P=Ey(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:N,cells:L,numCells:U,calculatedImageSettings:F}=FO({value:i,level:a,minVersion:g,boostLevel:y,includeMargin:d,marginSize:C,imageSettings:I,size:o});let z=L,q=null;I!=null&&F!=null&&(F.excavation!=null&&(z=BO(L,F.excavation)),q=bn.createElement("image",{href:I.src,height:F.h,width:F.w,x:F.x+N,y:F.y+N,preserveAspectRatio:"none",opacity:F.opacity,crossOrigin:F.crossOrigin}));const H=LO(z,N);return bn.createElement("svg",wy({height:o,width:o,viewBox:`0 0 ${U} ${U}`,ref:n,role:"img"},P),!!E&&bn.createElement("title",null,E),bn.createElement("path",{fill:c,d:`M0,0 h${U}v${U}H0z`,shapeRendering:"crispEdges"}),bn.createElement("path",{fill:f,d:H,shapeRendering:"crispEdges"}),q)});UO.displayName="QRCodeSVG";const pG=({clientName:t,token:e,visits:n,nextReward:r,tier:i="Silver"})=>{const[o,a]=M.useState(!1),f=(d=>{switch(d){case"Diamante":return{name:"Diamante",color:"from-blue-400 to-purple-600"};case"Gold":return{name:"Gold",color:"from-amber-300 to-amber-600"};default:return{name:"Silver",color:"from-stone-400 to-stone-600"}}})(i);return k.jsxs("div",{className:"perspective-1000 w-full max-w-sm mx-auto h-56 cursor-pointer group",onClick:()=>a(!o),children:[k.jsxs("div",{className:`relative w-full h-full duration-700 preserve-3d transition-all ${o?"rotate-y-180":""}`,children:[k.jsxs("div",{className:"absolute inset-0 backface-hidden w-full h-full rounded-2xl p-6 shadow-2xl overflow-hidden bg-stone-900 border border-stone-800 flex flex-col justify-between",children:[k.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${f.color} opacity-20 rounded-full blur-3xl -mr-10 -mt-10`}),k.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[k.jsxs("div",{children:[k.jsx("h3",{className:"text-amber-500 font-serif italic text-lg opacity-80",children:"Tus3B Club"}),k.jsx("p",{className:"text-white font-bold text-xl tracking-wide mt-1",children:t||"Miembro Exclusivo"})]}),k.jsx("div",{className:"px-3 py-1 rounded-full border border-white/10 bg-white/5 backdrop-blur-md",children:k.jsx("span",{className:`bg-clip-text text-transparent bg-gradient-to-r ${f.color} font-bold text-xs uppercase tracking-wider`,children:f.name})})]}),k.jsxs("div",{className:"relative z-10",children:[k.jsxs("div",{className:"flex justify-between items-end mb-2",children:[k.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((d,g)=>k.jsx(Px,{size:16,className:`${g<n%5?"text-amber-400 fill-amber-400":"text-stone-700"}`},g))}),k.jsxs("div",{className:"text-right",children:[k.jsx("p",{className:"text-stone-400 text-xs",children:"Prxima recompensa"}),k.jsxs("p",{className:"text-white font-mono",children:[5-n%5," visitas"]})]})]}),k.jsx("div",{className:"w-full bg-stone-800 h-1 rounded-full overflow-hidden",children:k.jsx("div",{className:`h-full bg-gradient-to-r ${f.color}`,style:{width:`${n%5/5*100}%`}})})]}),k.jsx("div",{className:"absolute bottom-4 right-4 animate-pulse",children:k.jsx(h6,{size:14,className:"text-stone-600"})})]}),k.jsxs("div",{className:"absolute inset-0 backface-hidden w-full h-full bg-white rounded-2xl p-6 shadow-xl rotate-y-180 flex flex-col items-center justify-center border-2 border-amber-500",children:[k.jsx("div",{className:"bg-white p-2 rounded-lg",children:k.jsx(UO,{value:e,size:150,level:"H"})}),k.jsxs("p",{className:"mt-4 text-stone-900 font-bold tracking-widest text-xs",children:[e.slice(0,8),"..."]}),k.jsx("p",{className:"text-xs text-stone-500 mt-1 uppercase",children:"Escanea para sumar puntos"})]})]}),k.jsx("style",{children:`
        .perspective-1000 { perspective: 1000px; }
        .preserve-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
      `})]})},gG=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(!1),[i,o]=M.useState(null),[a,c]=M.useState([]),f=async d=>{d&&d.preventDefault();const y=new URLSearchParams(window.location.search).get("token");if(!(!y&&t.length<8)){r(!0);try{let E=Un.from("clients").select("*");y?E=E.eq("member_token",y):E=E.eq("phone",t);const{data:C,error:I}=await E.single(),{data:P}=await Un.from("rewards").select("*").eq("is_active",!0);if(P&&c(P),I&&I.code!=="PGRST116"){console.error("Error fetching loyalty:",I),y||alert("Hubo un error al consultar. Intenta de nuevo."),r(!1);return}C?o({visits:C.visits,referrals:C.referrals,nextReward:5,token:C.member_token,tier:C.tier,hair_service_count:C.hair_service_count||0,discount_5th_visit_available:C.discount_5th_visit_available,free_cut_available:C.free_cut_available}):y||o({visits:0,referrals:0,nextReward:5,token:"new-client",tier:"Silver",hair_service_count:0})}catch(E){console.error("Unexpected error:",E)}finally{r(!1)}}};return bn.useEffect(()=>{new URLSearchParams(window.location.search).get("token")&&f()},[]),k.jsxs("div",{className:"bg-gradient-to-br from-stone-900 to-stone-800 rounded-3xl p-8 text-white relative overflow-hidden shadow-2xl",children:[k.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-purple-500 rounded-full blur-[60px] opacity-30"}),k.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-amber-500 rounded-full blur-[60px] opacity-30"}),k.jsxs("div",{className:"relative z-10 text-center",children:[k.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-2xl mb-6 backdrop-blur-sm border border-white/10",children:k.jsx(fN,{size:32,className:"text-amber-400"})}),k.jsx("h3",{className:"serif text-3xl mb-2",children:"Club Fidelidad"}),k.jsx("p",{className:"text-stone-300 font-light mb-8 max-w-sm mx-auto",children:"Tu preferencia tiene recompensas. Acumula visitas y gana descuentos exclusivos."}),i?k.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-500 mb-8",children:[k.jsx(pG,{clientName:i.name||"Miembro Exclusivo",token:i.token||"pending-token",visits:i.visits,nextReward:5,tier:i.tier}),k.jsxs("div",{className:"text-center mt-6",children:[k.jsxs("div",{className:"mb-6 bg-white/5 p-4 rounded-xl border border-purple-500/20",children:[k.jsxs("h4",{className:"text-purple-300 font-bold mb-3 flex items-center justify-center gap-2",children:[k.jsx(Ix,{size:18}),"Peluquera & Estilo"]}),k.jsxs("div",{className:"mb-4",children:[k.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[k.jsx("span",{className:"text-stone-300",children:"Desc. 10% (Cada 5)"}),k.jsx("span",{className:i.discount_5th_visit_available?"text-green-400 font-bold":"text-stone-400",children:i.discount_5th_visit_available?"DISPONIBLE!":`${(i.hair_service_count||0)%5} / 5`})]}),k.jsx("div",{className:"h-2 bg-stone-700 rounded-full overflow-hidden",children:k.jsx("div",{className:`h-full ${i.discount_5th_visit_available?"bg-green-500":"bg-purple-500"}`,style:{width:i.discount_5th_visit_available?"100%":`${(i.hair_service_count||0)%5*20}%`}})})]}),k.jsxs("div",{children:[k.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[k.jsx("span",{className:"text-stone-300",children:"Corte Gratis (Cada 10)"}),k.jsx("span",{className:i.free_cut_available?"text-amber-400 font-bold":"text-stone-400",children:i.free_cut_available?"CANJEAR!":`${(i.hair_service_count||0)%10} / 10`})]}),k.jsx("div",{className:"h-2 bg-stone-700 rounded-full overflow-hidden",children:k.jsx("div",{className:`h-full ${i.free_cut_available?"bg-amber-500":"bg-purple-400/60"}`,style:{width:i.free_cut_available?"100%":`${(i.hair_service_count||0)%10*10}%`}})})]})]}),k.jsx("p",{className:"text-sm text-stone-300 mb-4",children:i.visits>=5?"Felicidades! Tienes un descuento disponible.":`Te faltan ${5-i.visits} visitas para tu recompensa.`}),k.jsx("button",{onClick:()=>o(null),className:"text-sm text-stone-400 hover:text-white underline decoration-stone-600 underline-offset-4",children:"Consultar otro nmero"})]})]}):k.jsxs("form",{onSubmit:f,className:"max-w-xs mx-auto",children:[k.jsxs("div",{className:"relative",children:[k.jsx("input",{type:"tel",value:t,onChange:d=>e(d.target.value),placeholder:"Ingresa tu telfono...",className:"w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 pl-10 text-white placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-amber-400 transition"}),k.jsx(gN,{size:18,className:"absolute left-3 top-3.5 text-stone-400"})]}),k.jsx("button",{type:"submit",disabled:n||t.length<8,className:"w-full mt-4 bg-white text-stone-900 font-bold py-3 rounded-xl hover:bg-amber-50 transition flex justify-center items-center disabled:opacity-50 disabled:cursor-not-allowed",children:n?k.jsx(Zh,{className:"animate-spin"}):"Consultar Puntos"})]}),k.jsxs("div",{className:"mt-8 pt-8 border-t border-white/10 text-left space-y-3",children:[k.jsx("h3",{className:"serif text-xl mb-4 text-center",children:"Canjes Disponibles"}),k.jsx("div",{className:"grid grid-cols-1 gap-3",children:a.length>0?a.map(d=>{const g=d.allowed_perfume_segment==="arab",y=(i?.visits||0)>=d.cost_visits;return k.jsx("div",{className:`bg-white/5 p-4 rounded-xl border ${y?"border-amber-500/50":"border-white/5"} relative`,children:k.jsxs("div",{className:"flex justify-between items-start",children:[k.jsxs("div",{children:[k.jsxs("h4",{className:"font-bold text-white text-sm flex items-center gap-1",children:[d.name,g&&k.jsx("span",{className:"text-amber-400 text-xs",children:"*"})]}),k.jsx("p",{className:"text-xs text-stone-400 mt-0.5",children:d.description}),g&&k.jsx("p",{className:"text-[10px] text-amber-500/80 italic mt-1",children:"* Vlido solo para perfumera rabe"})]}),k.jsxs("div",{className:"text-right",children:[k.jsxs("span",{className:`block font-mono font-bold ${y?"text-amber-400":"text-stone-500"}`,children:[d.cost_visits," PTS"]}),y&&k.jsx("button",{className:"text-[10px] bg-amber-500 text-stone-900 px-2 py-0.5 rounded mt-1 font-bold hover:bg-amber-400 transition",onClick:()=>alert("Solicita este canje en caja mostrando tu QR"),children:"CANJEAR"})]})]})},d.id)}):k.jsxs("div",{className:"flex items-start gap-4",children:[k.jsx("div",{className:"bg-amber-500/20 p-2 rounded-lg text-amber-400 mt-1",children:k.jsx(Px,{size:16})}),k.jsxs("div",{children:[k.jsx("h4",{className:"font-bold text-white text-sm",children:"5ta Visita con Descuento"}),k.jsx("p",{className:"text-xs text-stone-400 mt-0.5",children:"Completa 4 visitas y la 5ta tiene un precio especial."})]})]})})]})]})]})},mG=({onLogin:t})=>{const[e,n]=M.useState(""),[r,i]=M.useState(""),[o,a]=M.useState(""),c=f=>{f.preventDefault(),a(""),e==="admin2026"?t("service"):e==="Chile2026#"?r==="jacontulianoc@gmail.com"?t("management",r):a("Correo no autorizado para gestin"):a("Contrasea incorrecta")};return k.jsx("div",{className:"flex flex-col items-center justify-center min-h-[50vh] bg-stone-50 p-4",children:k.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-stone-100 max-w-sm w-full text-center",children:[k.jsx(y6,{className:"w-12 h-12 text-stone-900 mx-auto mb-4"}),k.jsx("h2",{className:"text-xl font-bold text-stone-900 mb-6",children:"Acceso Administrativo"}),k.jsxs("form",{onSubmit:c,className:"space-y-4",children:[k.jsx("input",{type:"email",value:r,onChange:f=>i(f.target.value),placeholder:"Correo (Solo Gestin)",className:"w-full px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-stone-900 outline-none"}),k.jsx("input",{type:"password",value:e,onChange:f=>n(f.target.value),placeholder:"Contrasea",className:"w-full px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-stone-900 outline-none"}),o&&k.jsx("p",{className:"text-red-500 text-sm",children:o}),k.jsx("button",{type:"submit",className:"w-full bg-stone-900 text-white py-3 rounded-lg font-bold",children:"Ingresar"}),k.jsx("p",{className:"text-xs text-stone-400 mt-4",children:"* Ingrese solo contrasea para Atencin Clientes"})]})]})})};var ze;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ze||(ze={}));var oC=new Map([[ze.QR_CODE,"QR_CODE"],[ze.AZTEC,"AZTEC"],[ze.CODABAR,"CODABAR"],[ze.CODE_39,"CODE_39"],[ze.CODE_93,"CODE_93"],[ze.CODE_128,"CODE_128"],[ze.DATA_MATRIX,"DATA_MATRIX"],[ze.MAXICODE,"MAXICODE"],[ze.ITF,"ITF"],[ze.EAN_13,"EAN_13"],[ze.EAN_8,"EAN_8"],[ze.PDF_417,"PDF_417"],[ze.RSS_14,"RSS_14"],[ze.RSS_EXPANDED,"RSS_EXPANDED"],[ze.UPC_A,"UPC_A"],[ze.UPC_E,"UPC_E"],[ze.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),sC;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(sC||(sC={}));function vG(t){return Object.values(ze).includes(t)}var g0;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(g0||(g0={}));var yG=(function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[g0.SCAN_TYPE_CAMERA,g0.SCAN_TYPE_FILE],t})(),jO=(function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!oC.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,oC.get(e))},t})(),aC=(function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t})(),by;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(by||(by={}));var xG=(function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:by.UNKWOWN_ERROR}},t})(),wG=(function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t})();function as(t){return typeof t>"u"||t===null}var vu=(function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t})(),VO=(function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),a=Object.keys(e),c=0,f=a;c<f.length;c++){var d=f[c];if(o.has(d))return n.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},t})(),id={exports:{}},EG=id.exports,lC;function bG(){return lC||(lC=1,(function(t,e){(function(n,r){r(e)})(EG,(function(n){function r(j){return j==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,s){j.__proto__=s}||function(j,s){for(var u in s)s.hasOwnProperty(u)&&(j[u]=s[u])};function o(j,s){i(j,s);function u(){this.constructor=j}j.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}function a(j,s){var u=Object.setPrototypeOf;u?u(j,s):j.__proto__=s}function c(j,s){s===void 0&&(s=j.constructor);var u=Error.captureStackTrace;u&&u(j,s)}var f=(function(j){o(s,j);function s(u){var h=this.constructor,m=j.call(this,u)||this;return Object.defineProperty(m,"name",{value:h.name,enumerable:!1}),a(m,h.prototype),c(m),m}return s})(Error);class d extends f{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}d.kind="Exception";class g extends d{}g.kind="ArgumentException";class y extends d{}y.kind="IllegalArgumentException";class E{constructor(s){if(this.binarizer=s,s===null)throw new y("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,u){return this.binarizer.getBlackRow(s,u)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,u,h,m){const v=this.binarizer.getLuminanceSource().crop(s,u,h,m);return new E(this.binarizer.createBinarizer(v))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new E(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new E(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class C extends d{static getChecksumInstance(){return new C}}C.kind="ChecksumException";class I{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class P{static arraycopy(s,u,h,m,v){for(;v--;)h[m++]=s[u++]}static currentTimeMillis(){return Date.now()}}class N extends d{}N.kind="IndexOutOfBoundsException";class L extends N{constructor(s=void 0,u=void 0){super(u),this.index=s,this.message=u}}L.kind="ArrayIndexOutOfBoundsException";class U{static fill(s,u){for(let h=0,m=s.length;h<m;h++)s[h]=u}static fillWithin(s,u,h,m){U.rangeCheck(s.length,u,h);for(let v=u;v<h;v++)s[v]=m}static rangeCheck(s,u,h){if(u>h)throw new y("fromIndex("+u+") > toIndex("+h+")");if(u<0)throw new L(u);if(h>s)throw new L(h)}static asList(...s){return s}static create(s,u,h){return Array.from({length:s}).map(v=>Array.from({length:u}).fill(h))}static createInt32Array(s,u,h){return Array.from({length:s}).map(v=>Int32Array.from({length:u}).fill(h))}static equals(s,u){if(!s||!u||!s.length||!u.length||s.length!==u.length)return!1;for(let h=0,m=s.length;h<m;h++)if(s[h]!==u[h])return!1;return!0}static hashCode(s){if(s===null)return 0;let u=1;for(const h of s)u=31*u+h;return u}static fillUint8Array(s,u){for(let h=0;h!==s.length;h++)s[h]=u}static copyOf(s,u){return s.slice(0,u)}static copyOfUint8Array(s,u){if(s.length<=u){const h=new Uint8Array(u);return h.set(s),h}return s.slice(0,u)}static copyOfRange(s,u,h){const m=h-u,v=new Int32Array(m);return P.arraycopy(s,u,v,0,m),v}static binarySearch(s,u,h){h===void 0&&(h=U.numberComparator);let m=0,v=s.length-1;for(;m<=v;){const x=v+m>>1,_=h(u,s[x]);if(_>0)m=x+1;else if(_<0)v=x-1;else return x}return-m-1}static numberComparator(s,u){return s-u}}class F{static numberOfTrailingZeros(s){let u;if(s===0)return 32;let h=31;return u=s<<16,u!==0&&(h-=16,s=u),u=s<<8,u!==0&&(h-=8,s=u),u=s<<4,u!==0&&(h-=4,s=u),u=s<<2,u!==0&&(h-=2,s=u),h-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let u=1;return s>>>16||(u+=16,s<<=16),s>>>24||(u+=8,s<<=8),s>>>28||(u+=4,s<<=4),s>>>30||(u+=2,s<<=2),u-=s>>>31,u}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,u){return Math.trunc(s/u)}static parseInt(s,u=void 0){return parseInt(s,u)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class z{constructor(s,u){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,u==null?this.bits=z.makeArray(s):this.bits=u)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const u=z.makeArray(s);P.arraycopy(this.bits,0,u,0,this.bits.length),this.bits=u}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const u=this.size;if(s>=u)return u;const h=this.bits;let m=Math.floor(s/32),v=h[m];v&=~((1<<(s&31))-1);const x=h.length;for(;v===0;){if(++m===x)return u;v=h[m]}const _=m*32+F.numberOfTrailingZeros(v);return _>u?u:_}getNextUnset(s){const u=this.size;if(s>=u)return u;const h=this.bits;let m=Math.floor(s/32),v=~h[m];v&=~((1<<(s&31))-1);const x=h.length;for(;v===0;){if(++m===x)return u;v=~h[m]}const _=m*32+F.numberOfTrailingZeros(v);return _>u?u:_}setBulk(s,u){this.bits[Math.floor(s/32)]=u}setRange(s,u){if(u<s||s<0||u>this.size)throw new y;if(u===s)return;u--;const h=Math.floor(s/32),m=Math.floor(u/32),v=this.bits;for(let x=h;x<=m;x++){const _=x>h?0:s&31,R=(2<<(x<m?31:u&31))-(1<<_);v[x]|=R}}clear(){const s=this.bits.length,u=this.bits;for(let h=0;h<s;h++)u[h]=0}isRange(s,u,h){if(u<s||s<0||u>this.size)throw new y;if(u===s)return!0;u--;const m=Math.floor(s/32),v=Math.floor(u/32),x=this.bits;for(let _=m;_<=v;_++){const T=_>m?0:s&31,B=(2<<(_<v?31:u&31))-(1<<T)&4294967295;if((x[_]&B)!==(h?B:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,u){if(u<0||u>32)throw new y("Num bits must be between 0 and 32");this.ensureCapacity(this.size+u);for(let h=u;h>0;h--)this.appendBit((s>>h-1&1)===1)}appendBitArray(s){const u=s.size;this.ensureCapacity(this.size+u);for(let h=0;h<u;h++)this.appendBit(s.get(h))}xor(s){if(this.size!==s.size)throw new y("Sizes don't match");const u=this.bits;for(let h=0,m=u.length;h<m;h++)u[h]^=s.bits[h]}toBytes(s,u,h,m){for(let v=0;v<m;v++){let x=0;for(let _=0;_<8;_++)this.get(s)&&(x|=1<<7-_),s++;u[h+v]=x}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),u=Math.floor((this.size-1)/32),h=u+1,m=this.bits;for(let v=0;v<h;v++){let x=m[v];x=x>>1&1431655765|(x&1431655765)<<1,x=x>>2&858993459|(x&858993459)<<2,x=x>>4&252645135|(x&252645135)<<4,x=x>>8&16711935|(x&16711935)<<8,x=x>>16&65535|(x&65535)<<16,s[u-v]=x}if(this.size!==h*32){const v=h*32-this.size;let x=s[0]>>>v;for(let _=1;_<h;_++){const T=s[_];x|=T<<32-v,s[_-1]=x,x=T>>>v}s[h-1]=x}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof z))return!1;const u=s;return this.size===u.size&&U.equals(this.bits,u.bits)}hashCode(){return 31*this.size+U.hashCode(this.bits)}toString(){let s="";for(let u=0,h=this.size;u<h;u++)(u&7)===0&&(s+=" "),s+=this.get(u)?"X":".";return s}clone(){return new z(this.size,this.bits.slice())}}var q;(function(j){j[j.OTHER=0]="OTHER",j[j.PURE_BARCODE=1]="PURE_BARCODE",j[j.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",j[j.TRY_HARDER=3]="TRY_HARDER",j[j.CHARACTER_SET=4]="CHARACTER_SET",j[j.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",j[j.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",j[j.ASSUME_GS1=7]="ASSUME_GS1",j[j.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",j[j.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",j[j.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(q||(q={}));var H=q;class W extends d{static getFormatInstance(){return new W}}W.kind="FormatException";var Z;(function(j){j[j.Cp437=0]="Cp437",j[j.ISO8859_1=1]="ISO8859_1",j[j.ISO8859_2=2]="ISO8859_2",j[j.ISO8859_3=3]="ISO8859_3",j[j.ISO8859_4=4]="ISO8859_4",j[j.ISO8859_5=5]="ISO8859_5",j[j.ISO8859_6=6]="ISO8859_6",j[j.ISO8859_7=7]="ISO8859_7",j[j.ISO8859_8=8]="ISO8859_8",j[j.ISO8859_9=9]="ISO8859_9",j[j.ISO8859_10=10]="ISO8859_10",j[j.ISO8859_11=11]="ISO8859_11",j[j.ISO8859_13=12]="ISO8859_13",j[j.ISO8859_14=13]="ISO8859_14",j[j.ISO8859_15=14]="ISO8859_15",j[j.ISO8859_16=15]="ISO8859_16",j[j.SJIS=16]="SJIS",j[j.Cp1250=17]="Cp1250",j[j.Cp1251=18]="Cp1251",j[j.Cp1252=19]="Cp1252",j[j.Cp1256=20]="Cp1256",j[j.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",j[j.UTF8=22]="UTF8",j[j.ASCII=23]="ASCII",j[j.Big5=24]="Big5",j[j.GB18030=25]="GB18030",j[j.EUC_KR=26]="EUC_KR"})(Z||(Z={}));class X{constructor(s,u,h,...m){this.valueIdentifier=s,this.name=h,typeof u=="number"?this.values=Int32Array.from([u]):this.values=u,this.otherEncodingNames=m,X.VALUE_IDENTIFIER_TO_ECI.set(s,this),X.NAME_TO_ECI.set(h,this);const v=this.values;for(let x=0,_=v.length;x!==_;x++){const T=v[x];X.VALUES_TO_ECI.set(T,this)}for(const x of m)X.NAME_TO_ECI.set(x,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new W("incorect value");const u=X.VALUES_TO_ECI.get(s);if(u===void 0)throw new W("incorect value");return u}static getCharacterSetECIByName(s){const u=X.NAME_TO_ECI.get(s);if(u===void 0)throw new W("incorect value");return u}equals(s){if(!(s instanceof X))return!1;const u=s;return this.getName()===u.getName()}}X.VALUE_IDENTIFIER_TO_ECI=new Map,X.VALUES_TO_ECI=new Map,X.NAME_TO_ECI=new Map,X.Cp437=new X(Z.Cp437,Int32Array.from([0,2]),"Cp437"),X.ISO8859_1=new X(Z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),X.ISO8859_2=new X(Z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),X.ISO8859_3=new X(Z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),X.ISO8859_4=new X(Z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),X.ISO8859_5=new X(Z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),X.ISO8859_6=new X(Z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),X.ISO8859_7=new X(Z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),X.ISO8859_8=new X(Z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),X.ISO8859_9=new X(Z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),X.ISO8859_10=new X(Z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),X.ISO8859_11=new X(Z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),X.ISO8859_13=new X(Z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),X.ISO8859_14=new X(Z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),X.ISO8859_15=new X(Z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),X.ISO8859_16=new X(Z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),X.SJIS=new X(Z.SJIS,20,"SJIS","Shift_JIS"),X.Cp1250=new X(Z.Cp1250,21,"Cp1250","windows-1250"),X.Cp1251=new X(Z.Cp1251,22,"Cp1251","windows-1251"),X.Cp1252=new X(Z.Cp1252,23,"Cp1252","windows-1252"),X.Cp1256=new X(Z.Cp1256,24,"Cp1256","windows-1256"),X.UnicodeBigUnmarked=new X(Z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),X.UTF8=new X(Z.UTF8,26,"UTF8","UTF-8"),X.ASCII=new X(Z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),X.Big5=new X(Z.Big5,28,"Big5"),X.GB18030=new X(Z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),X.EUC_KR=new X(Z.EUC_KR,30,"EUC_KR","EUC-KR");class ye extends d{}ye.kind="UnsupportedOperationException";class se{static decode(s,u){const h=this.encodingName(u);return this.customDecoder?this.customDecoder(s,h):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(h)?this.decodeFallback(s,h):new TextDecoder(h).decode(s)}static shouldDecodeOnFallback(s){return!se.isBrowser()&&s==="ISO-8859-1"}static encode(s,u){const h=this.encodingName(u);return this.customEncoder?this.customEncoder(s,h):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof X?s:X.getCharacterSetECIByName(s)}static decodeFallback(s,u){const h=this.encodingCharacterSet(u);if(se.isDecodeFallbackSupported(h)){let m="";for(let v=0,x=s.length;v<x;v++){let _=s[v].toString(16);_.length<2&&(_="0"+_),m+="%"+_}return decodeURIComponent(m)}if(h.equals(X.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new ye(`Encoding ${this.encodingName(u)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(X.UTF8)||s.equals(X.ISO8859_1)||s.equals(X.ASCII)}static encodeFallback(s){const h=btoa(unescape(encodeURIComponent(s))).split(""),m=[];for(let v=0;v<h.length;v++)m.push(h[v].charCodeAt(0));return new Uint8Array(m)}}class ae{static castAsNonUtf8Char(s,u=null){const h=u?u.getName():this.ISO88591;return se.decode(new Uint8Array([s]),h)}static guessEncoding(s,u){if(u!=null&&u.get(H.CHARACTER_SET)!==void 0)return u.get(H.CHARACTER_SET).toString();const h=s.length;let m=!0,v=!0,x=!0,_=0,T=0,R=0,B=0,V=0,$=0,Y=0,Q=0,re=0,oe=0,pe=0;const Oe=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let ke=0;ke<h&&(m||v||x);ke++){const Ie=s[ke]&255;x&&(_>0?(Ie&128)===0?x=!1:_--:(Ie&128)!==0&&((Ie&64)===0?x=!1:(_++,(Ie&32)===0?T++:(_++,(Ie&16)===0?R++:(_++,(Ie&8)===0?B++:x=!1))))),m&&(Ie>127&&Ie<160?m=!1:Ie>159&&(Ie<192||Ie===215||Ie===247)&&pe++),v&&(V>0?Ie<64||Ie===127||Ie>252?v=!1:V--:Ie===128||Ie===160||Ie>239?v=!1:Ie>160&&Ie<224?($++,Q=0,Y++,Y>re&&(re=Y)):Ie>127?(V++,Y=0,Q++,Q>oe&&(oe=Q)):(Y=0,Q=0))}return x&&_>0&&(x=!1),v&&V>0&&(v=!1),x&&(Oe||T+R+B>0)?ae.UTF8:v&&(ae.ASSUME_SHIFT_JIS||re>=3||oe>=3)?ae.SHIFT_JIS:m&&v?re===2&&$===2||pe*10>=h?ae.SHIFT_JIS:ae.ISO88591:m?ae.ISO88591:v?ae.SHIFT_JIS:x?ae.UTF8:ae.PLATFORM_DEFAULT_ENCODING}static format(s,...u){let h=-1;function m(x,_,T,R,B,V){if(x==="%%")return"%";if(u[++h]===void 0)return;x=R?parseInt(R.substr(1)):void 0;let $=B?parseInt(B.substr(1)):void 0,Y;switch(V){case"s":Y=u[h];break;case"c":Y=u[h][0];break;case"f":Y=parseFloat(u[h]).toFixed(x);break;case"p":Y=parseFloat(u[h]).toPrecision(x);break;case"e":Y=parseFloat(u[h]).toExponential(x);break;case"x":Y=parseInt(u[h]).toString($||16);break;case"d":Y=parseFloat(parseInt(u[h],$||10).toPrecision(x)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString($);let Q=parseInt(T),re=T&&T[0]+""=="0"?"0":" ";for(;Y.length<Q;)Y=_!==void 0?Y+re:re+Y;return Y}let v=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(v,m)}static getBytes(s,u){return se.encode(s,u)}static getCharCode(s,u=0){return s.charCodeAt(u)}static getCharAt(s){return String.fromCharCode(s)}}ae.SHIFT_JIS=X.SJIS.getName(),ae.GB2312="GB2312",ae.ISO88591=X.ISO8859_1.getName(),ae.EUC_JP="EUC_JP",ae.UTF8=X.UTF8.getName(),ae.PLATFORM_DEFAULT_ENCODING=ae.UTF8,ae.ASSUME_SHIFT_JIS=!1;class be{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=ae.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,u,h){for(let m=u;u<u+h;m++)this.append(s[m]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,u){this.value=this.value.substr(0,s)+u+this.value.substr(s+1)}substring(s,u){return this.value.substring(s,u)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,u){this.value=this.value.substr(0,s)+u+this.value.substr(s+u.length)}}class fe{constructor(s,u,h,m){if(this.width=s,this.height=u,this.rowSize=h,this.bits=m,u==null&&(u=s),this.height=u,s<1||u<1)throw new y("Both dimensions must be greater than 0");h==null&&(h=Math.floor((s+31)/32)),this.rowSize=h,m==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const u=s.length,h=s[0].length,m=new fe(h,u);for(let v=0;v<u;v++){const x=s[v];for(let _=0;_<h;_++)x[_]&&m.set(_,v)}return m}static parseFromString(s,u,h){if(s===null)throw new y("stringRepresentation cannot be null");const m=new Array(s.length);let v=0,x=0,_=-1,T=0,R=0;for(;R<s.length;)if(s.charAt(R)===`
`||s.charAt(R)==="\r"){if(v>x){if(_===-1)_=v-x;else if(v-x!==_)throw new y("row lengths do not match");x=v,T++}R++}else if(s.substring(R,R+u.length)===u)R+=u.length,m[v]=!0,v++;else if(s.substring(R,R+h.length)===h)R+=h.length,m[v]=!1,v++;else throw new y("illegal character encountered: "+s.substring(R));if(v>x){if(_===-1)_=v-x;else if(v-x!==_)throw new y("row lengths do not match");T++}const B=new fe(_,T);for(let V=0;V<v;V++)m[V]&&B.set(Math.floor(V%_),Math.floor(V/_));return B}get(s,u){const h=u*this.rowSize+Math.floor(s/32);return(this.bits[h]>>>(s&31)&1)!==0}set(s,u){const h=u*this.rowSize+Math.floor(s/32);this.bits[h]|=1<<(s&31)&4294967295}unset(s,u){const h=u*this.rowSize+Math.floor(s/32);this.bits[h]&=~(1<<(s&31)&4294967295)}flip(s,u){const h=u*this.rowSize+Math.floor(s/32);this.bits[h]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new y("input matrix dimensions do not match");const u=new z(Math.floor(this.width/32)+1),h=this.rowSize,m=this.bits;for(let v=0,x=this.height;v<x;v++){const _=v*h,T=s.getRow(v,u).getBitArray();for(let R=0;R<h;R++)m[_+R]^=T[R]}}clear(){const s=this.bits,u=s.length;for(let h=0;h<u;h++)s[h]=0}setRegion(s,u,h,m){if(u<0||s<0)throw new y("Left and top must be nonnegative");if(m<1||h<1)throw new y("Height and width must be at least 1");const v=s+h,x=u+m;if(x>this.height||v>this.width)throw new y("The region must fit inside the matrix");const _=this.rowSize,T=this.bits;for(let R=u;R<x;R++){const B=R*_;for(let V=s;V<v;V++)T[B+Math.floor(V/32)]|=1<<(V&31)&4294967295}}getRow(s,u){u==null||u.getSize()<this.width?u=new z(this.width):u.clear();const h=this.rowSize,m=this.bits,v=s*h;for(let x=0;x<h;x++)u.setBulk(x*32,m[v+x]);return u}setRow(s,u){P.arraycopy(u.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),u=this.getHeight();let h=new z(s),m=new z(s);for(let v=0,x=Math.floor((u+1)/2);v<x;v++)h=this.getRow(v,h),m=this.getRow(u-1-v,m),h.reverse(),m.reverse(),this.setRow(v,m),this.setRow(u-1-v,h)}getEnclosingRectangle(){const s=this.width,u=this.height,h=this.rowSize,m=this.bits;let v=s,x=u,_=-1,T=-1;for(let R=0;R<u;R++)for(let B=0;B<h;B++){const V=m[R*h+B];if(V!==0){if(R<x&&(x=R),R>T&&(T=R),B*32<v){let $=0;for(;(V<<31-$&4294967295)===0;)$++;B*32+$<v&&(v=B*32+$)}if(B*32+31>_){let $=31;for(;!(V>>>$);)$--;B*32+$>_&&(_=B*32+$)}}}return _<v||T<x?null:Int32Array.from([v,x,_-v+1,T-x+1])}getTopLeftOnBit(){const s=this.rowSize,u=this.bits;let h=0;for(;h<u.length&&u[h]===0;)h++;if(h===u.length)return null;const m=h/s;let v=h%s*32;const x=u[h];let _=0;for(;(x<<31-_&4294967295)===0;)_++;return v+=_,Int32Array.from([v,m])}getBottomRightOnBit(){const s=this.rowSize,u=this.bits;let h=u.length-1;for(;h>=0&&u[h]===0;)h--;if(h<0)return null;const m=Math.floor(h/s);let v=Math.floor(h%s)*32;const x=u[h];let _=31;for(;!(x>>>_);)_--;return v+=_,Int32Array.from([v,m])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof fe))return!1;const u=s;return this.width===u.width&&this.height===u.height&&this.rowSize===u.rowSize&&U.equals(this.bits,u.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+U.hashCode(this.bits),s}toString(s="X ",u="  ",h=`
`){return this.buildToString(s,u,h)}buildToString(s,u,h){let m=new be;for(let v=0,x=this.height;v<x;v++){for(let _=0,T=this.width;_<T;_++)m.append(this.get(_,v)?s:u);m.append(h)}return m.toString()}clone(){return new fe(this.width,this.height,this.rowSize,this.bits.slice())}}class ne extends d{static getNotFoundInstance(){return new ne}}ne.kind="NotFoundException";class we extends I{constructor(s){super(s),this.luminances=we.EMPTY,this.buckets=new Int32Array(we.LUMINANCE_BUCKETS)}getBlackRow(s,u){const h=this.getLuminanceSource(),m=h.getWidth();u==null||u.getSize()<m?u=new z(m):u.clear(),this.initArrays(m);const v=h.getRow(s,this.luminances),x=this.buckets;for(let T=0;T<m;T++)x[(v[T]&255)>>we.LUMINANCE_SHIFT]++;const _=we.estimateBlackPoint(x);if(m<3)for(let T=0;T<m;T++)(v[T]&255)<_&&u.set(T);else{let T=v[0]&255,R=v[1]&255;for(let B=1;B<m-1;B++){const V=v[B+1]&255;(R*4-T-V)/2<_&&u.set(B),T=R,R=V}}return u}getBlackMatrix(){const s=this.getLuminanceSource(),u=s.getWidth(),h=s.getHeight(),m=new fe(u,h);this.initArrays(u);const v=this.buckets;for(let T=1;T<5;T++){const R=Math.floor(h*T/5),B=s.getRow(R,this.luminances),V=Math.floor(u*4/5);for(let $=Math.floor(u/5);$<V;$++){const Y=B[$]&255;v[Y>>we.LUMINANCE_SHIFT]++}}const x=we.estimateBlackPoint(v),_=s.getMatrix();for(let T=0;T<h;T++){const R=T*u;for(let B=0;B<u;B++)(_[R+B]&255)<x&&m.set(B,T)}return m}createBinarizer(s){return new we(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const u=this.buckets;for(let h=0;h<we.LUMINANCE_BUCKETS;h++)u[h]=0}static estimateBlackPoint(s){const u=s.length;let h=0,m=0,v=0;for(let B=0;B<u;B++)s[B]>v&&(m=B,v=s[B]),s[B]>h&&(h=s[B]);let x=0,_=0;for(let B=0;B<u;B++){const V=B-m,$=s[B]*V*V;$>_&&(x=B,_=$)}if(m>x){const B=m;m=x,x=B}if(x-m<=u/16)throw new ne;let T=x-1,R=-1;for(let B=x-1;B>m;B--){const V=B-m,$=V*V*(x-B)*(h-s[B]);$>R&&(T=B,R=$)}return T<<we.LUMINANCE_SHIFT}}we.LUMINANCE_BITS=5,we.LUMINANCE_SHIFT=8-we.LUMINANCE_BITS,we.LUMINANCE_BUCKETS=1<<we.LUMINANCE_BITS,we.EMPTY=Uint8ClampedArray.from([0]);class me extends we{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),u=s.getWidth(),h=s.getHeight();if(u>=me.MINIMUM_DIMENSION&&h>=me.MINIMUM_DIMENSION){const m=s.getMatrix();let v=u>>me.BLOCK_SIZE_POWER;(u&me.BLOCK_SIZE_MASK)!==0&&v++;let x=h>>me.BLOCK_SIZE_POWER;(h&me.BLOCK_SIZE_MASK)!==0&&x++;const _=me.calculateBlackPoints(m,v,x,u,h),T=new fe(u,h);me.calculateThresholdForBlock(m,v,x,u,h,_,T),this.matrix=T}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new me(s)}static calculateThresholdForBlock(s,u,h,m,v,x,_){const T=v-me.BLOCK_SIZE,R=m-me.BLOCK_SIZE;for(let B=0;B<h;B++){let V=B<<me.BLOCK_SIZE_POWER;V>T&&(V=T);const $=me.cap(B,2,h-3);for(let Y=0;Y<u;Y++){let Q=Y<<me.BLOCK_SIZE_POWER;Q>R&&(Q=R);const re=me.cap(Y,2,u-3);let oe=0;for(let Oe=-2;Oe<=2;Oe++){const ke=x[$+Oe];oe+=ke[re-2]+ke[re-1]+ke[re]+ke[re+1]+ke[re+2]}const pe=oe/25;me.thresholdBlock(s,Q,V,pe,m,_)}}}static cap(s,u,h){return s<u?u:s>h?h:s}static thresholdBlock(s,u,h,m,v,x){for(let _=0,T=h*v+u;_<me.BLOCK_SIZE;_++,T+=v)for(let R=0;R<me.BLOCK_SIZE;R++)(s[T+R]&255)<=m&&x.set(u+R,h+_)}static calculateBlackPoints(s,u,h,m,v){const x=v-me.BLOCK_SIZE,_=m-me.BLOCK_SIZE,T=new Array(h);for(let R=0;R<h;R++){T[R]=new Int32Array(u);let B=R<<me.BLOCK_SIZE_POWER;B>x&&(B=x);for(let V=0;V<u;V++){let $=V<<me.BLOCK_SIZE_POWER;$>_&&($=_);let Y=0,Q=255,re=0;for(let pe=0,Oe=B*m+$;pe<me.BLOCK_SIZE;pe++,Oe+=m){for(let ke=0;ke<me.BLOCK_SIZE;ke++){const Ie=s[Oe+ke]&255;Y+=Ie,Ie<Q&&(Q=Ie),Ie>re&&(re=Ie)}if(re-Q>me.MIN_DYNAMIC_RANGE)for(pe++,Oe+=m;pe<me.BLOCK_SIZE;pe++,Oe+=m)for(let ke=0;ke<me.BLOCK_SIZE;ke++)Y+=s[Oe+ke]&255}let oe=Y>>me.BLOCK_SIZE_POWER*2;if(re-Q<=me.MIN_DYNAMIC_RANGE&&(oe=Q/2,R>0&&V>0)){const pe=(T[R-1][V]+2*T[R][V-1]+T[R-1][V-1])/4;Q<pe&&(oe=pe)}T[R][V]=oe}}return T}}me.BLOCK_SIZE_POWER=3,me.BLOCK_SIZE=1<<me.BLOCK_SIZE_POWER,me.BLOCK_SIZE_MASK=me.BLOCK_SIZE-1,me.MINIMUM_DIMENSION=me.BLOCK_SIZE*5,me.MIN_DYNAMIC_RANGE=24;class xe{constructor(s,u){this.width=s,this.height=u}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,u,h,m){throw new ye("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ye("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ye("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let u=new be;for(let h=0;h<this.height;h++){const m=this.getRow(h,s);for(let v=0;v<this.width;v++){const x=m[v]&255;let _;x<64?_="#":x<128?_="+":x<192?_=".":_=" ",u.append(_)}u.append(`
`)}return u.toString()}}class Ae extends xe{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,u){const h=this.delegate.getRow(s,u),m=this.getWidth();for(let v=0;v<m;v++)h[v]=255-(h[v]&255);return h}getMatrix(){const s=this.delegate.getMatrix(),u=this.getWidth()*this.getHeight(),h=new Uint8ClampedArray(u);for(let m=0;m<u;m++)h[m]=255-(s[m]&255);return h}isCropSupported(){return this.delegate.isCropSupported()}crop(s,u,h,m){return new Ae(this.delegate.crop(s,u,h,m))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ae(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ae(this.delegate.rotateCounterClockwise45())}}class Ce extends xe{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Ce.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const u=s.getContext("2d").getImageData(0,0,s.width,s.height);return Ce.toGrayscaleBuffer(u.data,s.width,s.height)}static toGrayscaleBuffer(s,u,h){const m=new Uint8ClampedArray(u*h);for(let v=0,x=0,_=s.length;v<_;v+=4,x++){let T;if(s[v+3]===0)T=255;else{const B=s[v],V=s[v+1],$=s[v+2];T=306*B+601*V+117*$+512>>10}m[x]=T}return m}getRow(s,u){if(s<0||s>=this.getHeight())throw new y("Requested row is outside the image: "+s);const h=this.getWidth(),m=s*h;return u===null?u=this.buffer.slice(m,m+h):(u.length<h&&(u=new Uint8ClampedArray(h)),u.set(this.buffer.slice(m,m+h))),u}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,u,h,m){return super.crop(s,u,h,m),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const u=this.getTempCanvasElement(),h=u.getContext("2d"),m=s*Ce.DEGREE_TO_RADIANS,v=this.canvas.width,x=this.canvas.height,_=Math.ceil(Math.abs(Math.cos(m))*v+Math.abs(Math.sin(m))*x),T=Math.ceil(Math.abs(Math.sin(m))*v+Math.abs(Math.cos(m))*x);return u.width=_,u.height=T,h.translate(_/2,T/2),h.rotate(m),h.drawImage(this.canvas,v/-2,x/-2),this.buffer=Ce.makeBufferFromCanvasImageData(u),this}invert(){return new Ae(this)}}Ce.DEGREE_TO_RADIANS=Math.PI/180;class te{constructor(s,u,h){this.deviceId=s,this.label=u,this.kind="videoinput",this.groupId=h||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var he=(globalThis||ah||self||window||void 0)&&(globalThis||ah||self||window||void 0).__awaiter||function(j,s,u,h){function m(v){return v instanceof u?v:new u(function(x){x(v)})}return new(u||(u=Promise))(function(v,x){function _(B){try{R(h.next(B))}catch(V){x(V)}}function T(B){try{R(h.throw(B))}catch(V){x(V)}}function R(B){B.done?v(B.value):m(B.value).then(_,T)}R((h=h.apply(j,s||[])).next())})};class Fe{constructor(s,u=500,h){this.reader=s,this.timeBetweenScansMillis=u,this._hints=h,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return he(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),u=[];for(const h of s){const m=h.kind==="video"?"videoinput":h.kind;if(m!=="videoinput")continue;const v=h.deviceId||h.id,x=h.label||`Video device ${u.length+1}`,_=h.groupId,T={deviceId:v,label:x,kind:m,groupId:_};u.push(T)}return u})}getVideoInputDevices(){return he(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(u=>new te(u.deviceId,u.label))})}findDeviceById(s){return he(this,void 0,void 0,function*(){const u=yield this.listVideoInputDevices();return u?u.find(h=>h.deviceId===s):null})}decodeFromInputVideoDevice(s,u){return he(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,u)})}decodeOnceFromVideoDevice(s,u){return he(this,void 0,void 0,function*(){this.reset();let h;s?h={deviceId:{exact:s}}:h={facingMode:"environment"};const m={video:h};return yield this.decodeOnceFromConstraints(m,u)})}decodeOnceFromConstraints(s,u){return he(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(h,u)})}decodeOnceFromStream(s,u){return he(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(s,u);return yield this.decodeOnce(h)})}decodeFromInputVideoDeviceContinuously(s,u,h){return he(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,u,h)})}decodeFromVideoDevice(s,u,h){return he(this,void 0,void 0,function*(){let m;s?m={deviceId:{exact:s}}:m={facingMode:"environment"};const v={video:m};return yield this.decodeFromConstraints(v,u,h)})}decodeFromConstraints(s,u,h){return he(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(m,u,h)})}decodeFromStream(s,u,h){return he(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(s,u);return yield this.decodeContinuously(m,h)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,u){return he(this,void 0,void 0,function*(){const h=this.prepareVideoElement(u);return this.addVideoSource(h,s),this.videoElement=h,this.stream=s,yield this.playVideoOnLoadAsync(h),h})}playVideoOnLoadAsync(s){return new Promise((u,h)=>this.playVideoOnLoad(s,()=>u()))}playVideoOnLoad(s,u){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",u),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return he(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,u){const h=document.getElementById(s);if(!h)throw new g(`element with id '${s}' not found`);if(h.nodeName.toLowerCase()!==u.toLowerCase())throw new g(`element with id '${s}' must be an ${u} element`);return h}decodeFromImage(s,u){if(!s&&!u)throw new g("either imageElement with a src set or an url must be provided");return u&&!s?this.decodeFromImageUrl(u):this.decodeFromImageElement(s)}decodeFromVideo(s,u){if(!s&&!u)throw new g("Either an element with a src set or an URL must be provided");return u&&!s?this.decodeFromVideoUrl(u):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,u,h){if(s===void 0&&u===void 0)throw new g("Either an element with a src set or an URL must be provided");return u&&!s?this.decodeFromVideoUrlContinuously(u,h):this.decodeFromVideoElementContinuously(s,h)}decodeFromImageElement(s){if(!s)throw new g("An image element must be provided.");this.reset();const u=this.prepareImageElement(s);this.imageElement=u;let h;return this.isImageLoaded(u)?h=this.decodeOnce(u,!1,!0):h=this._decodeOnLoadImage(u),h}decodeFromVideoElement(s){const u=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(u)}decodeFromVideoElementContinuously(s,u){const h=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(h,u)}_decodeFromVideoElementSetup(s){if(!s)throw new g("A video element must be provided.");this.reset();const u=this.prepareVideoElement(s);return this.videoElement=u,u}decodeFromImageUrl(s){if(!s)throw new g("An URL must be provided.");this.reset();const u=this.prepareImageElement();this.imageElement=u;const h=this._decodeOnLoadImage(u);return u.src=s,h}decodeFromVideoUrl(s){if(!s)throw new g("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),h=this.decodeFromVideoElement(u);return u.src=s,h}decodeFromVideoUrlContinuously(s,u){if(!s)throw new g("An URL must be provided.");this.reset();const h=this.prepareVideoElement(),m=this.decodeFromVideoElementContinuously(h,u);return h.src=s,m}_decodeOnLoadImage(s){return new Promise((u,h)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(u,h),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return he(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,u){return he(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,u)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let u;return typeof s>"u"&&(u=document.createElement("img"),u.width=200,u.height=200),typeof s=="string"&&(u=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(u=s),u}prepareVideoElement(s){let u;return!s&&typeof document<"u"&&(u=document.createElement("video"),u.width=200,u.height=200),typeof s=="string"&&(u=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(u=s),u.setAttribute("autoplay","true"),u.setAttribute("muted","true"),u.setAttribute("playsinline","true"),u}decodeOnce(s,u=!0,h=!0){this._stopAsyncDecode=!1;const m=(v,x)=>{if(this._stopAsyncDecode){x(new ne("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const _=this.decode(s);v(_)}catch(_){const T=u&&_ instanceof ne,B=(_ instanceof C||_ instanceof W)&&h;if(T||B)return setTimeout(m,this._timeBetweenDecodingAttempts,v,x);x(_)}};return new Promise((v,x)=>m(v,x))}decodeContinuously(s,u){this._stopContinuousDecode=!1;const h=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const m=this.decode(s);u(m,null),setTimeout(h,this.timeBetweenScansMillis)}catch(m){u(null,m);const v=m instanceof C||m instanceof W,x=m instanceof ne;(v||x)&&setTimeout(h,this._timeBetweenDecodingAttempts)}};h()}decode(s){const u=this.createBinaryBitmap(s);return this.decodeBitmap(u)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,u,h){u||(u={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),h||(h=this.captureCanvasContext),h.drawImage(s,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}drawImageOnCanvas(s,u,h=this.captureCanvasContext){u||(u={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),h||(h=this.captureCanvasContext),h.drawImage(s,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const u=this.getCaptureCanvas(s),h=new Ce(u),m=new me(h);return new E(m)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const h=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=h}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const u=this.createCaptureCanvas(s);this.captureCanvas=u}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const u=document.createElement("canvas");let h,m;return typeof s<"u"&&(s instanceof HTMLVideoElement?(h=s.videoWidth,m=s.videoHeight):s instanceof HTMLImageElement&&(h=s.naturalWidth||s.width,m=s.naturalHeight||s.height)),u.style.width=h+"px",u.style.height=m+"px",u.width=h,u.height=m,u}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,u){try{s.srcObject=u}catch{s.src=URL.createObjectURL(u)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Le{constructor(s,u,h=u==null?0:8*u.length,m,v,x=P.currentTimeMillis()){this.text=s,this.rawBytes=u,this.numBits=h,this.resultPoints=m,this.format=v,this.timestamp=x,this.text=s,this.rawBytes=u,h==null?this.numBits=u==null?0:8*u.length:this.numBits=h,this.resultPoints=m,this.format=v,this.resultMetadata=null,x==null?this.timestamp=P.currentTimeMillis():this.timestamp=x}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,u){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,u)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const u=this.resultPoints;if(u===null)this.resultPoints=s;else if(s!==null&&s.length>0){const h=new Array(u.length+s.length);P.arraycopy(u,0,h,0,u.length),P.arraycopy(s,0,h,u.length,s.length),this.resultPoints=h}}getTimestamp(){return this.timestamp}toString(){return this.text}}var lt;(function(j){j[j.AZTEC=0]="AZTEC",j[j.CODABAR=1]="CODABAR",j[j.CODE_39=2]="CODE_39",j[j.CODE_93=3]="CODE_93",j[j.CODE_128=4]="CODE_128",j[j.DATA_MATRIX=5]="DATA_MATRIX",j[j.EAN_8=6]="EAN_8",j[j.EAN_13=7]="EAN_13",j[j.ITF=8]="ITF",j[j.MAXICODE=9]="MAXICODE",j[j.PDF_417=10]="PDF_417",j[j.QR_CODE=11]="QR_CODE",j[j.RSS_14=12]="RSS_14",j[j.RSS_EXPANDED=13]="RSS_EXPANDED",j[j.UPC_A=14]="UPC_A",j[j.UPC_E=15]="UPC_E",j[j.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(lt||(lt={}));var Ne=lt,ct;(function(j){j[j.OTHER=0]="OTHER",j[j.ORIENTATION=1]="ORIENTATION",j[j.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",j[j.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",j[j.ISSUE_NUMBER=4]="ISSUE_NUMBER",j[j.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",j[j.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",j[j.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",j[j.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",j[j.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",j[j.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ct||(ct={}));var rt=ct;class Ee{constructor(s,u,h,m,v=-1,x=-1){this.rawBytes=s,this.text=u,this.byteSegments=h,this.ecLevel=m,this.structuredAppendSequenceNumber=v,this.structuredAppendParity=x,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class et{exp(s){return this.expTable[s]}log(s){if(s===0)throw new y;return this.logTable[s]}static addOrSubtract(s,u){return s^u}}class Me{constructor(s,u){if(u.length===0)throw new y;this.field=s;const h=u.length;if(h>1&&u[0]===0){let m=1;for(;m<h&&u[m]===0;)m++;m===h?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(h-m),P.arraycopy(u,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const u=this.coefficients;let h;if(s===1){h=0;for(let x=0,_=u.length;x!==_;x++){const T=u[x];h=et.addOrSubtract(h,T)}return h}h=u[0];const m=u.length,v=this.field;for(let x=1;x<m;x++)h=et.addOrSubtract(v.multiply(s,h),u[x]);return h}addOrSubtract(s){if(!this.field.equals(s.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let u=this.coefficients,h=s.coefficients;if(u.length>h.length){const x=u;u=h,h=x}let m=new Int32Array(h.length);const v=h.length-u.length;P.arraycopy(h,0,m,0,v);for(let x=v;x<h.length;x++)m[x]=et.addOrSubtract(u[x-v],h[x]);return new Me(this.field,m)}multiply(s){if(!this.field.equals(s.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const u=this.coefficients,h=u.length,m=s.coefficients,v=m.length,x=new Int32Array(h+v-1),_=this.field;for(let T=0;T<h;T++){const R=u[T];for(let B=0;B<v;B++)x[T+B]=et.addOrSubtract(x[T+B],_.multiply(R,m[B]))}return new Me(_,x)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const u=this.coefficients.length,h=this.field,m=new Int32Array(u),v=this.coefficients;for(let x=0;x<u;x++)m[x]=h.multiply(v[x],s);return new Me(h,m)}multiplyByMonomial(s,u){if(s<0)throw new y;if(u===0)return this.field.getZero();const h=this.coefficients,m=h.length,v=new Int32Array(m+s),x=this.field;for(let _=0;_<m;_++)v[_]=x.multiply(h[_],u);return new Me(x,v)}divide(s){if(!this.field.equals(s.field))throw new y("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new y("Divide by 0");const u=this.field;let h=u.getZero(),m=this;const v=s.getCoefficient(s.getDegree()),x=u.inverse(v);for(;m.getDegree()>=s.getDegree()&&!m.isZero();){const _=m.getDegree()-s.getDegree(),T=u.multiply(m.getCoefficient(m.getDegree()),x),R=s.multiplyByMonomial(_,T),B=u.buildMonomial(_,T);h=h.addOrSubtract(B),m=m.addOrSubtract(R)}return[h,m]}toString(){let s="";for(let u=this.getDegree();u>=0;u--){let h=this.getCoefficient(u);if(h!==0){if(h<0?(s+=" - ",h=-h):s.length>0&&(s+=" + "),u===0||h!==1){const m=this.field.log(h);m===0?s+="1":m===1?s+="a":(s+="a^",s+=m)}u!==0&&(u===1?s+="x":(s+="x^",s+=u))}}return s}}class _e extends d{}_e.kind="ArithmeticException";class Ke extends et{constructor(s,u,h){super(),this.primitive=s,this.size=u,this.generatorBase=h;const m=new Int32Array(u);let v=1;for(let _=0;_<u;_++)m[_]=v,v*=2,v>=u&&(v^=s,v&=u-1);this.expTable=m;const x=new Int32Array(u);for(let _=0;_<u-1;_++)x[m[_]]=_;this.logTable=x,this.zero=new Me(this,Int32Array.from([0])),this.one=new Me(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,u){if(s<0)throw new y;if(u===0)return this.zero;const h=new Int32Array(s+1);return h[0]=u,new Me(this,h)}inverse(s){if(s===0)throw new _e;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,u){return s===0||u===0?0:this.expTable[(this.logTable[s]+this.logTable[u])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}Ke.AZTEC_DATA_12=new Ke(4201,4096,1),Ke.AZTEC_DATA_10=new Ke(1033,1024,1),Ke.AZTEC_DATA_6=new Ke(67,64,1),Ke.AZTEC_PARAM=new Ke(19,16,1),Ke.QR_CODE_FIELD_256=new Ke(285,256,0),Ke.DATA_MATRIX_FIELD_256=new Ke(301,256,1),Ke.AZTEC_DATA_8=Ke.DATA_MATRIX_FIELD_256,Ke.MAXICODE_FIELD_64=Ke.AZTEC_DATA_6;class dt extends d{}dt.kind="ReedSolomonException";class It extends d{}It.kind="IllegalStateException";class Cn{constructor(s){this.field=s}decode(s,u){const h=this.field,m=new Me(h,s),v=new Int32Array(u);let x=!0;for(let Y=0;Y<u;Y++){const Q=m.evaluateAt(h.exp(Y+h.getGeneratorBase()));v[v.length-1-Y]=Q,Q!==0&&(x=!1)}if(x)return;const _=new Me(h,v),T=this.runEuclideanAlgorithm(h.buildMonomial(u,1),_,u),R=T[0],B=T[1],V=this.findErrorLocations(R),$=this.findErrorMagnitudes(B,V);for(let Y=0;Y<V.length;Y++){const Q=s.length-1-h.log(V[Y]);if(Q<0)throw new dt("Bad error location");s[Q]=Ke.addOrSubtract(s[Q],$[Y])}}runEuclideanAlgorithm(s,u,h){if(s.getDegree()<u.getDegree()){const Y=s;s=u,u=Y}const m=this.field;let v=s,x=u,_=m.getZero(),T=m.getOne();for(;x.getDegree()>=(h/2|0);){let Y=v,Q=_;if(v=x,_=T,v.isZero())throw new dt("r_{i-1} was zero");x=Y;let re=m.getZero();const oe=v.getCoefficient(v.getDegree()),pe=m.inverse(oe);for(;x.getDegree()>=v.getDegree()&&!x.isZero();){const Oe=x.getDegree()-v.getDegree(),ke=m.multiply(x.getCoefficient(x.getDegree()),pe);re=re.addOrSubtract(m.buildMonomial(Oe,ke)),x=x.addOrSubtract(v.multiplyByMonomial(Oe,ke))}if(T=re.multiply(_).addOrSubtract(Q),x.getDegree()>=v.getDegree())throw new It("Division algorithm failed to reduce polynomial?")}const R=T.getCoefficient(0);if(R===0)throw new dt("sigmaTilde(0) was zero");const B=m.inverse(R),V=T.multiplyScalar(B),$=x.multiplyScalar(B);return[V,$]}findErrorLocations(s){const u=s.getDegree();if(u===1)return Int32Array.from([s.getCoefficient(1)]);const h=new Int32Array(u);let m=0;const v=this.field;for(let x=1;x<v.getSize()&&m<u;x++)s.evaluateAt(x)===0&&(h[m]=v.inverse(x),m++);if(m!==u)throw new dt("Error locator degree does not match number of roots");return h}findErrorMagnitudes(s,u){const h=u.length,m=new Int32Array(h),v=this.field;for(let x=0;x<h;x++){const _=v.inverse(u[x]);let T=1;for(let R=0;R<h;R++)if(x!==R){const B=v.multiply(u[R],_),V=(B&1)===0?B|1:B&-2;T=v.multiply(T,V)}m[x]=v.multiply(s.evaluateAt(_),v.inverse(T)),v.getGeneratorBase()!==0&&(m[x]=v.multiply(m[x],_))}return m}}var zt;(function(j){j[j.UPPER=0]="UPPER",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.DIGIT=3]="DIGIT",j[j.PUNCT=4]="PUNCT",j[j.BINARY=5]="BINARY"})(zt||(zt={}));class Rt{decode(s){this.ddata=s;let u=s.getBits(),h=this.extractBits(u),m=this.correctBits(h),v=Rt.convertBoolArrayToByteArray(m),x=Rt.getEncodedData(m),_=new Ee(v,x,null,null);return _.setNumBits(m.length),_}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let u=s.length,h=zt.UPPER,m=zt.UPPER,v="",x=0;for(;x<u;)if(m===zt.BINARY){if(u-x<5)break;let _=Rt.readCode(s,x,5);if(x+=5,_===0){if(u-x<11)break;_=Rt.readCode(s,x,11)+31,x+=11}for(let T=0;T<_;T++){if(u-x<8){x=u;break}const R=Rt.readCode(s,x,8);v+=ae.castAsNonUtf8Char(R),x+=8}m=h}else{let _=m===zt.DIGIT?4:5;if(u-x<_)break;let T=Rt.readCode(s,x,_);x+=_;let R=Rt.getCharacter(m,T);R.startsWith("CTRL_")?(h=m,m=Rt.getTable(R.charAt(5)),R.charAt(6)==="L"&&(h=m)):(v+=R,m=h)}return v}static getTable(s){switch(s){case"L":return zt.LOWER;case"P":return zt.PUNCT;case"M":return zt.MIXED;case"D":return zt.DIGIT;case"B":return zt.BINARY;case"U":default:return zt.UPPER}}static getCharacter(s,u){switch(s){case zt.UPPER:return Rt.UPPER_TABLE[u];case zt.LOWER:return Rt.LOWER_TABLE[u];case zt.MIXED:return Rt.MIXED_TABLE[u];case zt.PUNCT:return Rt.PUNCT_TABLE[u];case zt.DIGIT:return Rt.DIGIT_TABLE[u];default:throw new It("Bad table")}}correctBits(s){let u,h;this.ddata.getNbLayers()<=2?(h=6,u=Ke.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(h=8,u=Ke.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(h=10,u=Ke.AZTEC_DATA_10):(h=12,u=Ke.AZTEC_DATA_12);let m=this.ddata.getNbDatablocks(),v=s.length/h;if(v<m)throw new W;let x=s.length%h,_=new Int32Array(v);for(let $=0;$<v;$++,x+=h)_[$]=Rt.readCode(s,x,h);try{new Cn(u).decode(_,v-m)}catch($){throw new W($)}let T=(1<<h)-1,R=0;for(let $=0;$<m;$++){let Y=_[$];if(Y===0||Y===T)throw new W;(Y===1||Y===T-1)&&R++}let B=new Array(m*h-R),V=0;for(let $=0;$<m;$++){let Y=_[$];if(Y===1||Y===T-1)B.fill(Y>1,V,V+h-1),V+=h-1;else for(let Q=h-1;Q>=0;--Q)B[V++]=(Y&1<<Q)!==0}return B}extractBits(s){let u=this.ddata.isCompact(),h=this.ddata.getNbLayers(),m=(u?11:14)+h*4,v=new Int32Array(m),x=new Array(this.totalBitsInLayer(h,u));if(u)for(let _=0;_<v.length;_++)v[_]=_;else{let _=m+1+2*F.truncDivision(F.truncDivision(m,2)-1,15),T=m/2,R=F.truncDivision(_,2);for(let B=0;B<T;B++){let V=B+F.truncDivision(B,15);v[T-B-1]=R-V-1,v[T+B]=R+V+1}}for(let _=0,T=0;_<h;_++){let R=(h-_)*4+(u?9:12),B=_*2,V=m-1-B;for(let $=0;$<R;$++){let Y=$*2;for(let Q=0;Q<2;Q++)x[T+Y+Q]=s.get(v[B+Q],v[B+$]),x[T+2*R+Y+Q]=s.get(v[B+$],v[V-Q]),x[T+4*R+Y+Q]=s.get(v[V-Q],v[V-$]),x[T+6*R+Y+Q]=s.get(v[V-$],v[B+Q])}T+=R*8}return x}static readCode(s,u,h){let m=0;for(let v=u;v<u+h;v++)m<<=1,s[v]&&(m|=1);return m}static readByte(s,u){let h=s.length-u;return h>=8?Rt.readCode(s,u,8):Rt.readCode(s,u,h)<<8-h}static convertBoolArrayToByteArray(s){let u=new Uint8Array((s.length+7)/8);for(let h=0;h<u.length;h++)u[h]=Rt.readByte(s,8*h);return u}totalBitsInLayer(s,u){return((u?88:112)+16*s)*s}}Rt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Rt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Rt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Rt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Rt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class _t{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,u,h,m){const v=s-h,x=u-m;return Math.sqrt(v*v+x*x)}static sum(s){let u=0;for(let h=0,m=s.length;h!==m;h++){const v=s[h];u+=v}return u}}class To{static floatToIntBits(s){return s}}To.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ge{constructor(s,u){this.x=s,this.y=u}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Ge){const u=s;return this.x===u.x&&this.y===u.y}return!1}hashCode(){return 31*To.floatToIntBits(this.x)+To.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const u=this.distance(s[0],s[1]),h=this.distance(s[1],s[2]),m=this.distance(s[0],s[2]);let v,x,_;if(h>=u&&h>=m?(x=s[0],v=s[1],_=s[2]):m>=h&&m>=u?(x=s[1],v=s[0],_=s[2]):(x=s[2],v=s[0],_=s[1]),this.crossProductZ(v,x,_)<0){const T=v;v=_,_=T}s[0]=v,s[1]=x,s[2]=_}static distance(s,u){return _t.distance(s.x,s.y,u.x,u.y)}static crossProductZ(s,u,h){const m=u.x,v=u.y;return(h.x-m)*(s.y-v)-(h.y-v)*(s.x-m)}}class Rs{constructor(s,u){this.bits=s,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class tc extends Rs{constructor(s,u,h,m,v){super(s,u),this.compact=h,this.nbDatablocks=m,this.nbLayers=v}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Di{constructor(s,u,h,m){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),u==null&&(u=Di.INIT_SIZE),h==null&&(h=s.getWidth()/2|0),m==null&&(m=s.getHeight()/2|0);const v=u/2|0;if(this.leftInit=h-v,this.rightInit=h+v,this.upInit=m-v,this.downInit=m+v,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ne}detect(){let s=this.leftInit,u=this.rightInit,h=this.upInit,m=this.downInit,v=!1,x=!0,_=!1,T=!1,R=!1,B=!1,V=!1;const $=this.width,Y=this.height;for(;x;){x=!1;let Q=!0;for(;(Q||!T)&&u<$;)Q=this.containsBlackPoint(h,m,u,!1),Q?(u++,x=!0,T=!0):T||u++;if(u>=$){v=!0;break}let re=!0;for(;(re||!R)&&m<Y;)re=this.containsBlackPoint(s,u,m,!0),re?(m++,x=!0,R=!0):R||m++;if(m>=Y){v=!0;break}let oe=!0;for(;(oe||!B)&&s>=0;)oe=this.containsBlackPoint(h,m,s,!1),oe?(s--,x=!0,B=!0):B||s--;if(s<0){v=!0;break}let pe=!0;for(;(pe||!V)&&h>=0;)pe=this.containsBlackPoint(s,u,h,!0),pe?(h--,x=!0,V=!0):V||h--;if(h<0){v=!0;break}x&&(_=!0)}if(!v&&_){const Q=u-s;let re=null;for(let ke=1;re===null&&ke<Q;ke++)re=this.getBlackPointOnSegment(s,m-ke,s+ke,m);if(re==null)throw new ne;let oe=null;for(let ke=1;oe===null&&ke<Q;ke++)oe=this.getBlackPointOnSegment(s,h+ke,s+ke,h);if(oe==null)throw new ne;let pe=null;for(let ke=1;pe===null&&ke<Q;ke++)pe=this.getBlackPointOnSegment(u,h+ke,u-ke,h);if(pe==null)throw new ne;let Oe=null;for(let ke=1;Oe===null&&ke<Q;ke++)Oe=this.getBlackPointOnSegment(u,m-ke,u-ke,m);if(Oe==null)throw new ne;return this.centerEdges(Oe,re,pe,oe)}else throw new ne}getBlackPointOnSegment(s,u,h,m){const v=_t.round(_t.distance(s,u,h,m)),x=(h-s)/v,_=(m-u)/v,T=this.image;for(let R=0;R<v;R++){const B=_t.round(s+R*x),V=_t.round(u+R*_);if(T.get(B,V))return new Ge(B,V)}return null}centerEdges(s,u,h,m){const v=s.getX(),x=s.getY(),_=u.getX(),T=u.getY(),R=h.getX(),B=h.getY(),V=m.getX(),$=m.getY(),Y=Di.CORR;return v<this.width/2?[new Ge(V-Y,$+Y),new Ge(_+Y,T+Y),new Ge(R-Y,B-Y),new Ge(v+Y,x-Y)]:[new Ge(V+Y,$+Y),new Ge(_+Y,T-Y),new Ge(R-Y,B+Y),new Ge(v-Y,x-Y)]}containsBlackPoint(s,u,h,m){const v=this.image;if(m){for(let x=s;x<=u;x++)if(v.get(x,h))return!0}else for(let x=s;x<=u;x++)if(v.get(h,x))return!0;return!1}}Di.INIT_SIZE=10,Di.CORR=1;class Tl{static checkAndNudgePoints(s,u){const h=s.getWidth(),m=s.getHeight();let v=!0;for(let x=0;x<u.length&&v;x+=2){const _=Math.floor(u[x]),T=Math.floor(u[x+1]);if(_<-1||_>h||T<-1||T>m)throw new ne;v=!1,_===-1?(u[x]=0,v=!0):_===h&&(u[x]=h-1,v=!0),T===-1?(u[x+1]=0,v=!0):T===m&&(u[x+1]=m-1,v=!0)}v=!0;for(let x=u.length-2;x>=0&&v;x-=2){const _=Math.floor(u[x]),T=Math.floor(u[x+1]);if(_<-1||_>h||T<-1||T>m)throw new ne;v=!1,_===-1?(u[x]=0,v=!0):_===h&&(u[x]=h-1,v=!0),T===-1?(u[x+1]=0,v=!0):T===m&&(u[x+1]=m-1,v=!0)}}}class Zr{constructor(s,u,h,m,v,x,_,T,R){this.a11=s,this.a21=u,this.a31=h,this.a12=m,this.a22=v,this.a32=x,this.a13=_,this.a23=T,this.a33=R}static quadrilateralToQuadrilateral(s,u,h,m,v,x,_,T,R,B,V,$,Y,Q,re,oe){const pe=Zr.quadrilateralToSquare(s,u,h,m,v,x,_,T);return Zr.squareToQuadrilateral(R,B,V,$,Y,Q,re,oe).times(pe)}transformPoints(s){const u=s.length,h=this.a11,m=this.a12,v=this.a13,x=this.a21,_=this.a22,T=this.a23,R=this.a31,B=this.a32,V=this.a33;for(let $=0;$<u;$+=2){const Y=s[$],Q=s[$+1],re=v*Y+T*Q+V;s[$]=(h*Y+x*Q+R)/re,s[$+1]=(m*Y+_*Q+B)/re}}transformPointsWithValues(s,u){const h=this.a11,m=this.a12,v=this.a13,x=this.a21,_=this.a22,T=this.a23,R=this.a31,B=this.a32,V=this.a33,$=s.length;for(let Y=0;Y<$;Y++){const Q=s[Y],re=u[Y],oe=v*Q+T*re+V;s[Y]=(h*Q+x*re+R)/oe,u[Y]=(m*Q+_*re+B)/oe}}static squareToQuadrilateral(s,u,h,m,v,x,_,T){const R=s-h+v-_,B=u-m+x-T;if(R===0&&B===0)return new Zr(h-s,v-h,s,m-u,x-m,u,0,0,1);{const V=h-v,$=_-v,Y=m-x,Q=T-x,re=V*Q-$*Y,oe=(R*Q-$*B)/re,pe=(V*B-R*Y)/re;return new Zr(h-s+oe*h,_-s+pe*_,s,m-u+oe*m,T-u+pe*T,u,oe,pe,1)}}static quadrilateralToSquare(s,u,h,m,v,x,_,T){return Zr.squareToQuadrilateral(s,u,h,m,v,x,_,T).buildAdjoint()}buildAdjoint(){return new Zr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Zr(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Il extends Tl{sampleGrid(s,u,h,m,v,x,_,T,R,B,V,$,Y,Q,re,oe,pe,Oe,ke){const Ie=Zr.quadrilateralToQuadrilateral(m,v,x,_,T,R,B,V,$,Y,Q,re,oe,pe,Oe,ke);return this.sampleGridWithTransform(s,u,h,Ie)}sampleGridWithTransform(s,u,h,m){if(u<=0||h<=0)throw new ne;const v=new fe(u,h),x=new Float32Array(2*u);for(let _=0;_<h;_++){const T=x.length,R=_+.5;for(let B=0;B<T;B+=2)x[B]=B/2+.5,x[B+1]=R;m.transformPoints(x),Tl.checkAndNudgePoints(s,x);try{for(let B=0;B<T;B+=2)s.get(Math.floor(x[B]),Math.floor(x[B+1]))&&v.set(B/2,_)}catch{throw new ne}}return v}}class pi{static setGridSampler(s){pi.gridSampler=s}static getInstance(){return pi.gridSampler}}pi.gridSampler=new Il;class lr{constructor(s,u){this.x=s,this.y=u}toResultPoint(){return new Ge(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Os{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let u=this.getMatrixCenter(),h=this.getBullsEyeCorners(u);if(s){let x=h[0];h[0]=h[2],h[2]=x}this.extractParameters(h);let m=this.sampleGrid(this.image,h[this.shift%4],h[(this.shift+1)%4],h[(this.shift+2)%4],h[(this.shift+3)%4]),v=this.getMatrixCornerPoints(h);return new tc(m,v,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new ne;let u=2*this.nbCenterLayers,h=new Int32Array([this.sampleLine(s[0],s[1],u),this.sampleLine(s[1],s[2],u),this.sampleLine(s[2],s[3],u),this.sampleLine(s[3],s[0],u)]);this.shift=this.getRotation(h,u);let m=0;for(let x=0;x<4;x++){let _=h[(this.shift+x)%4];this.compact?(m<<=7,m+=_>>1&127):(m<<=10,m+=(_>>2&992)+(_>>1&31))}let v=this.getCorrectedParameterData(m,this.compact);this.compact?(this.nbLayers=(v>>6)+1,this.nbDataBlocks=(v&63)+1):(this.nbLayers=(v>>11)+1,this.nbDataBlocks=(v&2047)+1)}getRotation(s,u){let h=0;s.forEach((m,v,x)=>{let _=(m>>u-2<<1)+(m&1);h=(h<<3)+_}),h=((h&1)<<11)+(h>>1);for(let m=0;m<4;m++)if(F.bitCount(h^this.EXPECTED_CORNER_BITS[m])<=2)return m;throw new ne}getCorrectedParameterData(s,u){let h,m;u?(h=7,m=2):(h=10,m=4);let v=h-m,x=new Int32Array(h);for(let T=h-1;T>=0;--T)x[T]=s&15,s>>=4;try{new Cn(Ke.AZTEC_PARAM).decode(x,v)}catch{throw new ne}let _=0;for(let T=0;T<m;T++)_=(_<<4)+x[T];return _}getBullsEyeCorners(s){let u=s,h=s,m=s,v=s,x=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let V=this.getFirstDifferent(u,x,1,-1),$=this.getFirstDifferent(h,x,1,1),Y=this.getFirstDifferent(m,x,-1,1),Q=this.getFirstDifferent(v,x,-1,-1);if(this.nbCenterLayers>2){let re=this.distancePoint(Q,V)*this.nbCenterLayers/(this.distancePoint(v,u)*(this.nbCenterLayers+2));if(re<.75||re>1.25||!this.isWhiteOrBlackRectangle(V,$,Y,Q))break}u=V,h=$,m=Y,v=Q,x=!x}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ne;this.compact=this.nbCenterLayers===5;let _=new Ge(u.getX()+.5,u.getY()-.5),T=new Ge(h.getX()+.5,h.getY()+.5),R=new Ge(m.getX()-.5,m.getY()+.5),B=new Ge(v.getX()-.5,v.getY()-.5);return this.expandSquare([_,T,R,B],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,u,h,m;try{let _=new Di(this.image).detect();s=_[0],u=_[1],h=_[2],m=_[3]}catch{let T=this.image.getWidth()/2,R=this.image.getHeight()/2;s=this.getFirstDifferent(new lr(T+7,R-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new lr(T+7,R+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new lr(T-7,R+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new lr(T-7,R-7),!1,-1,-1).toResultPoint()}let v=_t.round((s.getX()+m.getX()+u.getX()+h.getX())/4),x=_t.round((s.getY()+m.getY()+u.getY()+h.getY())/4);try{let _=new Di(this.image,15,v,x).detect();s=_[0],u=_[1],h=_[2],m=_[3]}catch{s=this.getFirstDifferent(new lr(v+7,x-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new lr(v+7,x+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new lr(v-7,x+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new lr(v-7,x-7),!1,-1,-1).toResultPoint()}return v=_t.round((s.getX()+m.getX()+u.getX()+h.getX())/4),x=_t.round((s.getY()+m.getY()+u.getY()+h.getY())/4),new lr(v,x)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,u,h,m,v){let x=pi.getInstance(),_=this.getDimension(),T=_/2-this.nbCenterLayers,R=_/2+this.nbCenterLayers;return x.sampleGrid(s,_,_,T,T,R,T,R,R,T,R,u.getX(),u.getY(),h.getX(),h.getY(),m.getX(),m.getY(),v.getX(),v.getY())}sampleLine(s,u,h){let m=0,v=this.distanceResultPoint(s,u),x=v/h,_=s.getX(),T=s.getY(),R=x*(u.getX()-s.getX())/v,B=x*(u.getY()-s.getY())/v;for(let V=0;V<h;V++)this.image.get(_t.round(_+V*R),_t.round(T+V*B))&&(m|=1<<h-V-1);return m}isWhiteOrBlackRectangle(s,u,h,m){let v=3;s=new lr(s.getX()-v,s.getY()+v),u=new lr(u.getX()-v,u.getY()-v),h=new lr(h.getX()+v,h.getY()-v),m=new lr(m.getX()+v,m.getY()+v);let x=this.getColor(m,s);if(x===0)return!1;let _=this.getColor(s,u);return _!==x||(_=this.getColor(u,h),_!==x)?!1:(_=this.getColor(h,m),_===x)}getColor(s,u){let h=this.distancePoint(s,u),m=(u.getX()-s.getX())/h,v=(u.getY()-s.getY())/h,x=0,_=s.getX(),T=s.getY(),R=this.image.get(s.getX(),s.getY()),B=Math.ceil(h);for(let $=0;$<B;$++)_+=m,T+=v,this.image.get(_t.round(_),_t.round(T))!==R&&x++;let V=x/h;return V>.1&&V<.9?0:V<=.1===R?1:-1}getFirstDifferent(s,u,h,m){let v=s.getX()+h,x=s.getY()+m;for(;this.isValid(v,x)&&this.image.get(v,x)===u;)v+=h,x+=m;for(v-=h,x-=m;this.isValid(v,x)&&this.image.get(v,x)===u;)v+=h;for(v-=h;this.isValid(v,x)&&this.image.get(v,x)===u;)x+=m;return x-=m,new lr(v,x)}expandSquare(s,u,h){let m=h/(2*u),v=s[0].getX()-s[2].getX(),x=s[0].getY()-s[2].getY(),_=(s[0].getX()+s[2].getX())/2,T=(s[0].getY()+s[2].getY())/2,R=new Ge(_+m*v,T+m*x),B=new Ge(_-m*v,T-m*x);v=s[1].getX()-s[3].getX(),x=s[1].getY()-s[3].getY(),_=(s[1].getX()+s[3].getX())/2,T=(s[1].getY()+s[3].getY())/2;let V=new Ge(_+m*v,T+m*x),$=new Ge(_-m*v,T-m*x);return[R,V,B,$]}isValid(s,u){return s>=0&&s<this.image.getWidth()&&u>0&&u<this.image.getHeight()}isValidPoint(s){let u=_t.round(s.getX()),h=_t.round(s.getY());return this.isValid(u,h)}distancePoint(s,u){return _t.distance(s.getX(),s.getY(),u.getX(),u.getY())}distanceResultPoint(s,u){return _t.distance(s.getX(),s.getY(),u.getX(),u.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class Io{decode(s,u=null){let h=null,m=new Os(s.getBlackMatrix()),v=null,x=null;try{let B=m.detectMirror(!1);v=B.getPoints(),this.reportFoundResultPoints(u,v),x=new Rt().decode(B)}catch(B){h=B}if(x==null)try{let B=m.detectMirror(!0);v=B.getPoints(),this.reportFoundResultPoints(u,v),x=new Rt().decode(B)}catch(B){throw h??B}let _=new Le(x.getText(),x.getRawBytes(),x.getNumBits(),v,Ne.AZTEC,P.currentTimeMillis()),T=x.getByteSegments();T!=null&&_.putMetadata(rt.BYTE_SEGMENTS,T);let R=x.getECLevel();return R!=null&&_.putMetadata(rt.ERROR_CORRECTION_LEVEL,R),_}reportFoundResultPoints(s,u){if(s!=null){let h=s.get(H.NEED_RESULT_POINT_CALLBACK);h!=null&&u.forEach((m,v,x)=>{h.foundPossibleResultPoint(m)})}}reset(){}}class bg extends Fe{constructor(s=500){super(new Io,s)}}class yn{decode(s,u){try{return this.doDecode(s,u)}catch{if(u&&u.get(H.TRY_HARDER)===!0&&s.isRotateSupported()){const v=s.rotateCounterClockwise(),x=this.doDecode(v,u),_=x.getResultMetadata();let T=270;_!==null&&_.get(rt.ORIENTATION)===!0&&(T=T+_.get(rt.ORIENTATION)%360),x.putMetadata(rt.ORIENTATION,T);const R=x.getResultPoints();if(R!==null){const B=v.getHeight();for(let V=0;V<R.length;V++)R[V]=new Ge(B-R[V].getY()-1,R[V].getX())}return x}else throw new ne}}reset(){}doDecode(s,u){const h=s.getWidth(),m=s.getHeight();let v=new z(h);const x=u&&u.get(H.TRY_HARDER)===!0,_=Math.max(1,m>>(x?8:5));let T;x?T=m:T=15;const R=Math.trunc(m/2);for(let B=0;B<T;B++){const V=Math.trunc((B+1)/2),$=(B&1)===0,Y=R+_*($?V:-V);if(Y<0||Y>=m)break;try{v=s.getBlackRow(Y,v)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(v.reverse(),u&&u.get(H.NEED_RESULT_POINT_CALLBACK)===!0)){const re=new Map;u.forEach((oe,pe)=>re.set(pe,oe)),re.delete(H.NEED_RESULT_POINT_CALLBACK),u=re}try{const re=this.decodeRow(Y,v,u);if(Q===1){re.putMetadata(rt.ORIENTATION,180);const oe=re.getResultPoints();oe!==null&&(oe[0]=new Ge(h-oe[0].getX()-1,oe[0].getY()),oe[1]=new Ge(h-oe[1].getX()-1,oe[1].getY()))}return re}catch{}}}throw new ne}static recordPattern(s,u,h){const m=h.length;for(let R=0;R<m;R++)h[R]=0;const v=s.getSize();if(u>=v)throw new ne;let x=!s.get(u),_=0,T=u;for(;T<v;){if(s.get(T)!==x)h[_]++;else{if(++_===m)break;h[_]=1,x=!x}T++}if(!(_===m||_===m-1&&T===v))throw new ne}static recordPatternInReverse(s,u,h){let m=h.length,v=s.get(u);for(;u>0&&m>=0;)s.get(--u)!==v&&(m--,v=!v);if(m>=0)throw new ne;yn.recordPattern(s,u+1,h)}static patternMatchVariance(s,u,h){const m=s.length;let v=0,x=0;for(let R=0;R<m;R++)v+=s[R],x+=u[R];if(v<x)return Number.POSITIVE_INFINITY;const _=v/x;h*=_;let T=0;for(let R=0;R<m;R++){const B=s[R],V=u[R]*_,$=B>V?B-V:V-B;if($>h)return Number.POSITIVE_INFINITY;T+=$}return T/v}}class Be extends yn{static findStartPattern(s){const u=s.getSize(),h=s.getNextSet(0);let m=0,v=Int32Array.from([0,0,0,0,0,0]),x=h,_=!1;const T=6;for(let R=h;R<u;R++)if(s.get(R)!==_)v[m]++;else{if(m===T-1){let B=Be.MAX_AVG_VARIANCE,V=-1;for(let $=Be.CODE_START_A;$<=Be.CODE_START_C;$++){const Y=yn.patternMatchVariance(v,Be.CODE_PATTERNS[$],Be.MAX_INDIVIDUAL_VARIANCE);Y<B&&(B=Y,V=$)}if(V>=0&&s.isRange(Math.max(0,x-(R-x)/2),x,!1))return Int32Array.from([x,R,V]);x+=v[0]+v[1],v=v.slice(2,v.length-1),v[m-1]=0,v[m]=0,m--}else m++;v[m]=1,_=!_}throw new ne}static decodeCode(s,u,h){yn.recordPattern(s,h,u);let m=Be.MAX_AVG_VARIANCE,v=-1;for(let x=0;x<Be.CODE_PATTERNS.length;x++){const _=Be.CODE_PATTERNS[x],T=this.patternMatchVariance(u,_,Be.MAX_INDIVIDUAL_VARIANCE);T<m&&(m=T,v=x)}if(v>=0)return v;throw new ne}decodeRow(s,u,h){const m=h&&h.get(H.ASSUME_GS1)===!0,v=Be.findStartPattern(u),x=v[2];let _=0;const T=new Uint8Array(20);T[_++]=x;let R;switch(x){case Be.CODE_START_A:R=Be.CODE_CODE_A;break;case Be.CODE_START_B:R=Be.CODE_CODE_B;break;case Be.CODE_START_C:R=Be.CODE_CODE_C;break;default:throw new W}let B=!1,V=!1,$="",Y=v[0],Q=v[1];const re=Int32Array.from([0,0,0,0,0,0]);let oe=0,pe=0,Oe=x,ke=0,Ie=!0,wt=!1,pt=!1;for(;!B;){const lo=V;switch(V=!1,oe=pe,pe=Be.decodeCode(u,re,Q),T[_++]=pe,pe!==Be.CODE_STOP&&(Ie=!0),pe!==Be.CODE_STOP&&(ke++,Oe+=ke*pe),Y=Q,Q+=re.reduce((zs,bc)=>zs+bc,0),pe){case Be.CODE_START_A:case Be.CODE_START_B:case Be.CODE_START_C:throw new W}switch(R){case Be.CODE_CODE_A:if(pe<64)pt===wt?$+=String.fromCharCode(32+pe):$+=String.fromCharCode(32+pe+128),pt=!1;else if(pe<96)pt===wt?$+=String.fromCharCode(pe-64):$+=String.fromCharCode(pe+64),pt=!1;else switch(pe!==Be.CODE_STOP&&(Ie=!1),pe){case Be.CODE_FNC_1:m&&($.length===0?$+="]C1":$+="");break;case Be.CODE_FNC_2:case Be.CODE_FNC_3:break;case Be.CODE_FNC_4_A:!wt&&pt?(wt=!0,pt=!1):wt&&pt?(wt=!1,pt=!1):pt=!0;break;case Be.CODE_SHIFT:V=!0,R=Be.CODE_CODE_B;break;case Be.CODE_CODE_B:R=Be.CODE_CODE_B;break;case Be.CODE_CODE_C:R=Be.CODE_CODE_C;break;case Be.CODE_STOP:B=!0;break}break;case Be.CODE_CODE_B:if(pe<96)pt===wt?$+=String.fromCharCode(32+pe):$+=String.fromCharCode(32+pe+128),pt=!1;else switch(pe!==Be.CODE_STOP&&(Ie=!1),pe){case Be.CODE_FNC_1:m&&($.length===0?$+="]C1":$+="");break;case Be.CODE_FNC_2:case Be.CODE_FNC_3:break;case Be.CODE_FNC_4_B:!wt&&pt?(wt=!0,pt=!1):wt&&pt?(wt=!1,pt=!1):pt=!0;break;case Be.CODE_SHIFT:V=!0,R=Be.CODE_CODE_A;break;case Be.CODE_CODE_A:R=Be.CODE_CODE_A;break;case Be.CODE_CODE_C:R=Be.CODE_CODE_C;break;case Be.CODE_STOP:B=!0;break}break;case Be.CODE_CODE_C:if(pe<100)pe<10&&($+="0"),$+=pe;else switch(pe!==Be.CODE_STOP&&(Ie=!1),pe){case Be.CODE_FNC_1:m&&($.length===0?$+="]C1":$+="");break;case Be.CODE_CODE_A:R=Be.CODE_CODE_A;break;case Be.CODE_CODE_B:R=Be.CODE_CODE_B;break;case Be.CODE_STOP:B=!0;break}break}lo&&(R=R===Be.CODE_CODE_A?Be.CODE_CODE_B:Be.CODE_CODE_A)}const Mr=Q-Y;if(Q=u.getNextUnset(Q),!u.isRange(Q,Math.min(u.getSize(),Q+(Q-Y)/2),!1))throw new ne;if(Oe-=ke*oe,Oe%103!==oe)throw new C;const Ei=$.length;if(Ei===0)throw new ne;Ei>0&&Ie&&(R===Be.CODE_CODE_C?$=$.substring(0,Ei-2):$=$.substring(0,Ei-1));const Ln=(v[1]+v[0])/2,Bt=Y+Mr/2,xn=T.length,_r=new Uint8Array(xn);for(let lo=0;lo<xn;lo++)_r[lo]=T[lo];const Xo=[new Ge(Ln,s),new Ge(Bt,s)];return new Le($,_r,0,Xo,Ne.CODE_128,new Date().getTime())}}Be.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Be.MAX_AVG_VARIANCE=.25,Be.MAX_INDIVIDUAL_VARIANCE=.7,Be.CODE_SHIFT=98,Be.CODE_CODE_C=99,Be.CODE_CODE_B=100,Be.CODE_CODE_A=101,Be.CODE_FNC_1=102,Be.CODE_FNC_2=97,Be.CODE_FNC_3=96,Be.CODE_FNC_4_A=101,Be.CODE_FNC_4_B=100,Be.CODE_START_A=103,Be.CODE_START_B=104,Be.CODE_START_C=105,Be.CODE_STOP=106;class kn extends yn{constructor(s=!1,u=!1){super(),this.usingCheckDigit=s,this.extendedMode=u,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,u,h){let m=this.counters;m.fill(0),this.decodeRowResult="";let v=kn.findAsteriskPattern(u,m),x=u.getNextSet(v[1]),_=u.getSize(),T,R;do{kn.recordPattern(u,x,m);let re=kn.toNarrowWidePattern(m);if(re<0)throw new ne;T=kn.patternToChar(re),this.decodeRowResult+=T,R=x;for(let oe of m)x+=oe;x=u.getNextSet(x)}while(T!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let B=0;for(let re of m)B+=re;let V=x-R-B;if(x!==_&&V*2<B)throw new ne;if(this.usingCheckDigit){let re=this.decodeRowResult.length-1,oe=0;for(let pe=0;pe<re;pe++)oe+=kn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(pe));if(this.decodeRowResult.charAt(re)!==kn.ALPHABET_STRING.charAt(oe%43))throw new C;this.decodeRowResult=this.decodeRowResult.substring(0,re)}if(this.decodeRowResult.length===0)throw new ne;let $;this.extendedMode?$=kn.decodeExtended(this.decodeRowResult):$=this.decodeRowResult;let Y=(v[1]+v[0])/2,Q=R+B/2;return new Le($,null,0,[new Ge(Y,s),new Ge(Q,s)],Ne.CODE_39,new Date().getTime())}static findAsteriskPattern(s,u){let h=s.getSize(),m=s.getNextSet(0),v=0,x=m,_=!1,T=u.length;for(let R=m;R<h;R++)if(s.get(R)!==_)u[v]++;else{if(v===T-1){if(this.toNarrowWidePattern(u)===kn.ASTERISK_ENCODING&&s.isRange(Math.max(0,x-Math.floor((R-x)/2)),x,!1))return[x,R];x+=u[0]+u[1],u.copyWithin(0,2,2+v-1),u[v-1]=0,u[v]=0,v--}else v++;u[v]=1,_=!_}throw new ne}static toNarrowWidePattern(s){let u=s.length,h=0,m;do{let v=2147483647;for(let T of s)T<v&&T>h&&(v=T);h=v,m=0;let x=0,_=0;for(let T=0;T<u;T++){let R=s[T];R>h&&(_|=1<<u-1-T,m++,x+=R)}if(m===3){for(let T=0;T<u&&m>0;T++){let R=s[T];if(R>h&&(m--,R*2>=x))return-1}return _}}while(m>3);return-1}static patternToChar(s){for(let u=0;u<kn.CHARACTER_ENCODINGS.length;u++)if(kn.CHARACTER_ENCODINGS[u]===s)return kn.ALPHABET_STRING.charAt(u);if(s===kn.ASTERISK_ENCODING)return"*";throw new ne}static decodeExtended(s){let u=s.length,h="";for(let m=0;m<u;m++){let v=s.charAt(m);if(v==="+"||v==="$"||v==="%"||v==="/"){let x=s.charAt(m+1),_="\0";switch(v){case"+":if(x>="A"&&x<="Z")_=String.fromCharCode(x.charCodeAt(0)+32);else throw new W;break;case"$":if(x>="A"&&x<="Z")_=String.fromCharCode(x.charCodeAt(0)-64);else throw new W;break;case"%":if(x>="A"&&x<="E")_=String.fromCharCode(x.charCodeAt(0)-38);else if(x>="F"&&x<="J")_=String.fromCharCode(x.charCodeAt(0)-11);else if(x>="K"&&x<="O")_=String.fromCharCode(x.charCodeAt(0)+16);else if(x>="P"&&x<="T")_=String.fromCharCode(x.charCodeAt(0)+43);else if(x==="U")_="\0";else if(x==="V")_="@";else if(x==="W")_="`";else if(x==="X"||x==="Y"||x==="Z")_="";else throw new W;break;case"/":if(x>="A"&&x<="O")_=String.fromCharCode(x.charCodeAt(0)-32);else if(x==="Z")_=":";else throw new W;break}h+=_,m++}else h+=v}return h}}kn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",kn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],kn.ASTERISK_ENCODING=148;class Lt extends yn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,u,h){let m=this.decodeStart(u),v=this.decodeEnd(u),x=new be;Lt.decodeMiddle(u,m[1],v[0],x);let _=x.toString(),T=null;h!=null&&(T=h.get(H.ALLOWED_LENGTHS)),T==null&&(T=Lt.DEFAULT_ALLOWED_LENGTHS);let R=_.length,B=!1,V=0;for(let Q of T){if(R===Q){B=!0;break}Q>V&&(V=Q)}if(!B&&R>V&&(B=!0),!B)throw new W;const $=[new Ge(m[1],s),new Ge(v[0],s)];return new Le(_,null,0,$,Ne.ITF,new Date().getTime())}static decodeMiddle(s,u,h,m){let v=new Int32Array(10),x=new Int32Array(5),_=new Int32Array(5);for(v.fill(0),x.fill(0),_.fill(0);u<h;){yn.recordPattern(s,u,v);for(let R=0;R<5;R++){let B=2*R;x[R]=v[B],_[R]=v[B+1]}let T=Lt.decodeDigit(x);m.append(T.toString()),T=this.decodeDigit(_),m.append(T.toString()),v.forEach(function(R){u+=R})}}decodeStart(s){let u=Lt.skipWhiteSpace(s),h=Lt.findGuardPattern(s,u,Lt.START_PATTERN);return this.narrowLineWidth=(h[1]-h[0])/4,this.validateQuietZone(s,h[0]),h}validateQuietZone(s,u){let h=this.narrowLineWidth*10;h=h<u?h:u;for(let m=u-1;h>0&&m>=0&&!s.get(m);m--)h--;if(h!==0)throw new ne}static skipWhiteSpace(s){const u=s.getSize(),h=s.getNextSet(0);if(h===u)throw new ne;return h}decodeEnd(s){s.reverse();try{let u=Lt.skipWhiteSpace(s),h;try{h=Lt.findGuardPattern(s,u,Lt.END_PATTERN_REVERSED[0])}catch(v){v instanceof ne&&(h=Lt.findGuardPattern(s,u,Lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,h[0]);let m=h[0];return h[0]=s.getSize()-h[1],h[1]=s.getSize()-m,h}finally{s.reverse()}}static findGuardPattern(s,u,h){let m=h.length,v=new Int32Array(m),x=s.getSize(),_=!1,T=0,R=u;v.fill(0);for(let B=u;B<x;B++)if(s.get(B)!==_)v[T]++;else{if(T===m-1){if(yn.patternMatchVariance(v,h,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return[R,B];R+=v[0]+v[1],P.arraycopy(v,2,v,0,T-1),v[T-1]=0,v[T]=0,T--}else T++;v[T]=1,_=!_}throw new ne}static decodeDigit(s){let u=Lt.MAX_AVG_VARIANCE,h=-1,m=Lt.PATTERNS.length;for(let v=0;v<m;v++){let x=Lt.PATTERNS[v],_=yn.patternMatchVariance(s,x,Lt.MAX_INDIVIDUAL_VARIANCE);_<u?(u=_,h=v):_===u&&(h=-1)}if(h>=0)return h%10;throw new ne}}Lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Lt.MAX_AVG_VARIANCE=.38,Lt.MAX_INDIVIDUAL_VARIANCE=.5,Lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Lt.START_PATTERN=Int32Array.from([1,1,1,1]),Lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Qt extends yn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let u=!1,h,m=0,v=Int32Array.from([0,0,0]);for(;!u;){v=Int32Array.from([0,0,0]),h=Qt.findGuardPattern(s,m,!1,this.START_END_PATTERN,v);let x=h[0];m=h[1];let _=x-(m-x);_>=0&&(u=s.isRange(_,x,!1))}return h}static checkChecksum(s){return Qt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let u=s.length;if(u===0)return!1;let h=parseInt(s.charAt(u-1),10);return Qt.getStandardUPCEANChecksum(s.substring(0,u-1))===h}static getStandardUPCEANChecksum(s){let u=s.length,h=0;for(let m=u-1;m>=0;m-=2){let v=s.charAt(m).charCodeAt(0)-48;if(v<0||v>9)throw new W;h+=v}h*=3;for(let m=u-2;m>=0;m-=2){let v=s.charAt(m).charCodeAt(0)-48;if(v<0||v>9)throw new W;h+=v}return(1e3-h)%10}static decodeEnd(s,u){return Qt.findGuardPattern(s,u,!1,Qt.START_END_PATTERN,new Int32Array(Qt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,u,h,m){return this.findGuardPattern(s,u,h,m,new Int32Array(m.length))}static findGuardPattern(s,u,h,m,v){let x=s.getSize();u=h?s.getNextUnset(u):s.getNextSet(u);let _=0,T=u,R=m.length,B=h;for(let V=u;V<x;V++)if(s.get(V)!==B)v[_]++;else{if(_===R-1){if(yn.patternMatchVariance(v,m,Qt.MAX_INDIVIDUAL_VARIANCE)<Qt.MAX_AVG_VARIANCE)return Int32Array.from([T,V]);T+=v[0]+v[1];let $=v.slice(2,v.length-1);for(let Y=0;Y<_-1;Y++)v[Y]=$[Y];v[_-1]=0,v[_]=0,_--}else _++;v[_]=1,B=!B}throw new ne}static decodeDigit(s,u,h,m){this.recordPattern(s,h,u);let v=this.MAX_AVG_VARIANCE,x=-1,_=m.length;for(let T=0;T<_;T++){let R=m[T],B=yn.patternMatchVariance(u,R,Qt.MAX_INDIVIDUAL_VARIANCE);B<v&&(v=B,x=T)}if(x>=0)return x;throw new ne}}Qt.MAX_AVG_VARIANCE=.48,Qt.MAX_INDIVIDUAL_VARIANCE=.7,Qt.START_END_PATTERN=Int32Array.from([1,1,1]),Qt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Qt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ho{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,u,h){let m=this.decodeRowStringBuffer,v=this.decodeMiddle(u,h,m),x=m.toString(),_=Ho.parseExtensionString(x),T=[new Ge((h[0]+h[1])/2,s),new Ge(v,s)],R=new Le(x,null,0,T,Ne.UPC_EAN_EXTENSION,new Date().getTime());return _!=null&&R.putAllMetadata(_),R}decodeMiddle(s,u,h){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let v=s.getSize(),x=u[1],_=0;for(let R=0;R<5&&x<v;R++){let B=Qt.decodeDigit(s,m,x,Qt.L_AND_G_PATTERNS);h+=String.fromCharCode(48+B%10);for(let V of m)x+=V;B>=10&&(_|=1<<4-R),R!==4&&(x=s.getNextSet(x),x=s.getNextUnset(x))}if(h.length!==5)throw new ne;let T=this.determineCheckDigit(_);if(Ho.extensionChecksum(h.toString())!==T)throw new ne;return x}static extensionChecksum(s){let u=s.length,h=0;for(let m=u-2;m>=0;m-=2)h+=s.charAt(m).charCodeAt(0)-48;h*=3;for(let m=u-1;m>=0;m-=2)h+=s.charAt(m).charCodeAt(0)-48;return h*=3,h%10}determineCheckDigit(s){for(let u=0;u<10;u++)if(s===this.CHECK_DIGIT_ENCODINGS[u])return u;throw new ne}static parseExtensionString(s){if(s.length!==5)return null;let u=Ho.parseExtension5String(s);return u==null?null:new Map([[rt.SUGGESTED_PRICE,u]])}static parseExtension5String(s){let u;switch(s.charAt(0)){case"0":u="";break;case"5":u="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}u="";break;default:u="";break}let h=parseInt(s.substring(1)),m=(h/100).toString(),v=h%100,x=v<10?"0"+v:v.toString();return u+m+"."+x}}class wa{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,u,h){let m=this.decodeRowStringBuffer,v=this.decodeMiddle(u,h,m),x=m.toString(),_=wa.parseExtensionString(x),T=[new Ge((h[0]+h[1])/2,s),new Ge(v,s)],R=new Le(x,null,0,T,Ne.UPC_EAN_EXTENSION,new Date().getTime());return _!=null&&R.putAllMetadata(_),R}decodeMiddle(s,u,h){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let v=s.getSize(),x=u[1],_=0;for(let T=0;T<2&&x<v;T++){let R=Qt.decodeDigit(s,m,x,Qt.L_AND_G_PATTERNS);h+=String.fromCharCode(48+R%10);for(let B of m)x+=B;R>=10&&(_|=1<<1-T),T!==1&&(x=s.getNextSet(x),x=s.getNextUnset(x))}if(h.length!==2)throw new ne;if(parseInt(h.toString())%4!==_)throw new ne;return x}static parseExtensionString(s){return s.length!==2?null:new Map([[rt.ISSUE_NUMBER,parseInt(s)]])}}class Pl{static decodeRow(s,u,h){let m=Qt.findGuardPattern(u,h,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ho().decodeRow(s,u,m)}catch{return new wa().decodeRow(s,u,m)}}}Pl.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Et extends Qt{constructor(){super(),this.decodeRowStringBuffer="",Et.L_AND_G_PATTERNS=Et.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let u=Et.L_PATTERNS[s-10],h=new Int32Array(u.length);for(let m=0;m<u.length;m++)h[m]=u[u.length-m-1];Et.L_AND_G_PATTERNS[s]=h}}decodeRow(s,u,h){let m=Et.findStartGuardPattern(u),v=h==null?null:h.get(H.NEED_RESULT_POINT_CALLBACK);if(v!=null){const Ie=new Ge((m[0]+m[1])/2,s);v.foundPossibleResultPoint(Ie)}let x=this.decodeMiddle(u,m,this.decodeRowStringBuffer),_=x.rowOffset,T=x.resultString;if(v!=null){const Ie=new Ge(_,s);v.foundPossibleResultPoint(Ie)}let R=this.decodeEnd(u,_);if(v!=null){const Ie=new Ge((R[0]+R[1])/2,s);v.foundPossibleResultPoint(Ie)}let B=R[1],V=B+(B-R[0]);if(V>=u.getSize()||!u.isRange(B,V,!1))throw new ne;let $=T.toString();if($.length<8)throw new W;if(!Et.checkChecksum($))throw new C;let Y=(m[1]+m[0])/2,Q=(R[1]+R[0])/2,re=this.getBarcodeFormat(),oe=[new Ge(Y,s),new Ge(Q,s)],pe=new Le($,null,0,oe,re,new Date().getTime()),Oe=0;try{let Ie=Pl.decodeRow(s,u,R[1]);pe.putMetadata(rt.UPC_EAN_EXTENSION,Ie.getText()),pe.putAllMetadata(Ie.getResultMetadata()),pe.addResultPoints(Ie.getResultPoints()),Oe=Ie.getText().length}catch{}let ke=h==null?null:h.get(H.ALLOWED_EAN_EXTENSIONS);if(ke!=null){let Ie=!1;for(let wt in ke)if(Oe.toString()===wt){Ie=!0;break}if(!Ie)throw new ne}return pe}decodeEnd(s,u){return Et.findGuardPattern(s,u,!1,Et.START_END_PATTERN,new Int32Array(Et.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return Et.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let u=s.length;if(u===0)return!1;let h=parseInt(s.charAt(u-1),10);return Et.getStandardUPCEANChecksum(s.substring(0,u-1))===h}static getStandardUPCEANChecksum(s){let u=s.length,h=0;for(let m=u-1;m>=0;m-=2){let v=s.charAt(m).charCodeAt(0)-48;if(v<0||v>9)throw new W;h+=v}h*=3;for(let m=u-2;m>=0;m-=2){let v=s.charAt(m).charCodeAt(0)-48;if(v<0||v>9)throw new W;h+=v}return(1e3-h)%10}}class Qr extends Et{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,u,h){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let v=s.getSize(),x=u[1],_=0;for(let R=0;R<6&&x<v;R++){let B=Et.decodeDigit(s,m,x,Et.L_AND_G_PATTERNS);h+=String.fromCharCode(48+B%10);for(let V of m)x+=V;B>=10&&(_|=1<<5-R)}h=Qr.determineFirstDigit(h,_),x=Et.findGuardPattern(s,x,!0,Et.MIDDLE_PATTERN,new Int32Array(Et.MIDDLE_PATTERN.length).fill(0))[1];for(let R=0;R<6&&x<v;R++){let B=Et.decodeDigit(s,m,x,Et.L_PATTERNS);h+=String.fromCharCode(48+B);for(let V of m)x+=V}return{rowOffset:x,resultString:h}}getBarcodeFormat(){return Ne.EAN_13}static determineFirstDigit(s,u){for(let h=0;h<10;h++)if(u===this.FIRST_DIGIT_ENCODINGS[h])return s=String.fromCharCode(48+h)+s,s;throw new ne}}Qr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class nc extends Et{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,u,h){const m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let v=s.getSize(),x=u[1];for(let T=0;T<4&&x<v;T++){let R=Et.decodeDigit(s,m,x,Et.L_PATTERNS);h+=String.fromCharCode(48+R);for(let B of m)x+=B}x=Et.findGuardPattern(s,x,!0,Et.MIDDLE_PATTERN,new Int32Array(Et.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<4&&x<v;T++){let R=Et.decodeDigit(s,m,x,Et.L_PATTERNS);h+=String.fromCharCode(48+R);for(let B of m)x+=B}return{rowOffset:x,resultString:h}}getBarcodeFormat(){return Ne.EAN_8}}class rc extends Et{constructor(){super(...arguments),this.ean13Reader=new Qr}getBarcodeFormat(){return Ne.UPC_A}decode(s,u){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,u,h){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,u,h))}decodeMiddle(s,u,h){return this.ean13Reader.decodeMiddle(s,u,h)}maybeReturnResult(s){let u=s.getText();if(u.charAt(0)==="0"){let h=new Le(u.substring(1),null,null,s.getResultPoints(),Ne.UPC_A);return s.getResultMetadata()!=null&&h.putAllMetadata(s.getResultMetadata()),h}else throw new ne}reset(){this.ean13Reader.reset()}}class ei extends Et{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,u,h){const m=this.decodeMiddleCounters.map(R=>R);m[0]=0,m[1]=0,m[2]=0,m[3]=0;const v=s.getSize();let x=u[1],_=0;for(let R=0;R<6&&x<v;R++){const B=ei.decodeDigit(s,m,x,ei.L_AND_G_PATTERNS);h+=String.fromCharCode(48+B%10);for(let V of m)x+=V;B>=10&&(_|=1<<5-R)}let T=ei.determineNumSysAndCheckDigit(h,_);return{rowOffset:x,resultString:T}}decodeEnd(s,u){return ei.findGuardPatternWithoutCounters(s,u,!0,ei.MIDDLE_END_PATTERN)}checkChecksum(s){return Et.checkChecksum(ei.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,u){for(let h=0;h<=1;h++)for(let m=0;m<10;m++)if(u===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[h][m]){let v=String.fromCharCode(48+h),x=String.fromCharCode(48+m);return v+s+x}throw ne.getNotFoundInstance()}getBarcodeFormat(){return Ne.UPC_E}static convertUPCEtoUPCA(s){const u=s.slice(1,7).split("").map(v=>v.charCodeAt(0)),h=new be;h.append(s.charAt(0));let m=u[5];switch(m){case 0:case 1:case 2:h.appendChars(u,0,2),h.append(m),h.append("0000"),h.appendChars(u,2,3);break;case 3:h.appendChars(u,0,3),h.append("00000"),h.appendChars(u,3,2);break;case 4:h.appendChars(u,0,4),h.append("00000"),h.append(u[4]);break;default:h.appendChars(u,0,5),h.append("0000"),h.append(m);break}return s.length>=8&&h.append(s.charAt(7)),h.toString()}}ei.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ei.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Nl extends yn{constructor(s){super();let u=s==null?null:s.get(H.POSSIBLE_FORMATS),h=[];r(u)?(h.push(new Qr),h.push(new rc),h.push(new nc),h.push(new ei)):(u.indexOf(Ne.EAN_13)>-1&&h.push(new Qr),u.indexOf(Ne.UPC_A)>-1&&h.push(new rc),u.indexOf(Ne.EAN_8)>-1&&h.push(new nc),u.indexOf(Ne.UPC_E)>-1&&h.push(new ei)),this.readers=h}decodeRow(s,u,h){for(let m of this.readers)try{const v=m.decodeRow(s,u,h),x=v.getBarcodeFormat()===Ne.EAN_13&&v.getText().charAt(0)==="0",_=h==null?null:h.get(H.POSSIBLE_FORMATS),T=_==null||_.includes(Ne.UPC_A);if(x&&T){const R=v.getRawBytes(),B=new Le(v.getText().substring(1),R,R?R.length:null,v.getResultPoints(),Ne.UPC_A);return B.putAllMetadata(v.getResultMetadata()),B}return v}catch{}throw new ne}reset(){for(let s of this.readers)s.reset()}}class Xn extends yn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,u){for(let h=0;h<u.length;h++)if(yn.patternMatchVariance(s,u[h],Xn.MAX_INDIVIDUAL_VARIANCE)<Xn.MAX_AVG_VARIANCE)return h;throw new ne}static count(s){return _t.sum(new Int32Array(s))}static increment(s,u){let h=0,m=u[0];for(let v=1;v<s.length;v++)u[v]>m&&(m=u[v],h=v);s[h]++}static decrement(s,u){let h=0,m=u[0];for(let v=1;v<s.length;v++)u[v]<m&&(m=u[v],h=v);s[h]--}static isFinderPattern(s){let u=s[0]+s[1],h=u+s[2]+s[3],m=u/h;if(m>=Xn.MIN_FINDER_PATTERN_RATIO&&m<=Xn.MAX_FINDER_PATTERN_RATIO){let v=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER;for(let _ of s)_>x&&(x=_),_<v&&(v=_);return x<10*v}return!1}}Xn.MAX_AVG_VARIANCE=.2,Xn.MAX_INDIVIDUAL_VARIANCE=.45,Xn.MIN_FINDER_PATTERN_RATIO=9.5/12,Xn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Po{constructor(s,u){this.value=s,this.checksumPortion=u}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Po))return!1;const u=s;return this.value===u.value&&this.checksumPortion===u.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ea{constructor(s,u,h,m,v){this.value=s,this.startEnd=u,this.value=s,this.startEnd=u,this.resultPoints=new Array,this.resultPoints.push(new Ge(h,v)),this.resultPoints.push(new Ge(m,v))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Ea))return!1;const u=s;return this.value===u.value}hashCode(){return this.value}}class Rr{constructor(){}static getRSSvalue(s,u,h){let m=0;for(let T of s)m+=T;let v=0,x=0,_=s.length;for(let T=0;T<_-1;T++){let R;for(R=1,x|=1<<T;R<s[T];R++,x&=~(1<<T)){let B=Rr.combins(m-R-1,_-T-2);if(h&&x===0&&m-R-(_-T-1)>=_-T-1&&(B-=Rr.combins(m-R-(_-T),_-T-2)),_-T-1>1){let V=0;for(let $=m-R-(_-T-2);$>u;$--)V+=Rr.combins(m-R-$-1,_-T-3);B-=V*(_-1-T)}else m-R>u&&B--;v+=B}m-=R}return v}static combins(s,u){let h,m;s-u>u?(m=u,h=s-u):(m=s-u,h=u);let v=1,x=1;for(let _=s;_>h;_--)v*=_,x<=m&&(v/=x,x++);for(;x<=m;)v/=x,x++;return v}}class ic{static buildBitArray(s){let u=s.length*2-1;s[s.length-1].getRightChar()==null&&(u-=1);let h=12*u,m=new z(h),v=0,_=s[0].getRightChar().getValue();for(let T=11;T>=0;--T)(_&1<<T)!=0&&m.set(v),v++;for(let T=1;T<s.length;++T){let R=s[T],B=R.getLeftChar().getValue();for(let V=11;V>=0;--V)(B&1<<V)!=0&&m.set(v),v++;if(R.getRightChar()!=null){let V=R.getRightChar().getValue();for(let $=11;$>=0;--$)(V&1<<$)!=0&&m.set(v),v++}}return m}}class gi{constructor(s,u){u?this.decodedInformation=null:(this.finished=s,this.decodedInformation=u)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class oc{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class Gn extends oc{constructor(s,u){super(s),this.value=u}getValue(){return this.value}isFNC1(){return this.value===Gn.FNC1}}Gn.FNC1="$";class Li extends oc{constructor(s,u,h){super(s),h?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=u}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class wr extends oc{constructor(s,u,h){if(super(s),u<0||u>10||h<0||h>10)throw new W;this.firstDigit=u,this.secondDigit=h}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===wr.FNC1}isSecondDigitFNC1(){return this.secondDigit===wr.FNC1}isAnyFNC1(){return this.firstDigit===wr.FNC1||this.secondDigit===wr.FNC1}}wr.FNC1=10;class je{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new ne;let u=s.substring(0,2);for(let v of je.TWO_DIGIT_DATA_LENGTH)if(v[0]===u)return v[1]===je.VARIABLE_LENGTH?je.processVariableAI(2,v[2],s):je.processFixedAI(2,v[1],s);if(s.length<3)throw new ne;let h=s.substring(0,3);for(let v of je.THREE_DIGIT_DATA_LENGTH)if(v[0]===h)return v[1]===je.VARIABLE_LENGTH?je.processVariableAI(3,v[2],s):je.processFixedAI(3,v[1],s);for(let v of je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(v[0]===h)return v[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,v[2],s):je.processFixedAI(4,v[1],s);if(s.length<4)throw new ne;let m=s.substring(0,4);for(let v of je.FOUR_DIGIT_DATA_LENGTH)if(v[0]===m)return v[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,v[2],s):je.processFixedAI(4,v[1],s);throw new ne}static processFixedAI(s,u,h){if(h.length<s)throw new ne;let m=h.substring(0,s);if(h.length<s+u)throw new ne;let v=h.substring(s,s+u),x=h.substring(s+u),_="("+m+")"+v,T=je.parseFieldsInGeneralPurpose(x);return T==null?_:_+T}static processVariableAI(s,u,h){let m=h.substring(0,s),v;h.length<s+u?v=h.length:v=s+u;let x=h.substring(s,v),_=h.substring(v),T="("+m+")"+x,R=je.parseFieldsInGeneralPurpose(_);return R==null?T:T+R}}je.VARIABLE_LENGTH=[],je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",je.VARIABLE_LENGTH,20],["22",je.VARIABLE_LENGTH,29],["30",je.VARIABLE_LENGTH,8],["37",je.VARIABLE_LENGTH,8],["90",je.VARIABLE_LENGTH,30],["91",je.VARIABLE_LENGTH,30],["92",je.VARIABLE_LENGTH,30],["93",je.VARIABLE_LENGTH,30],["94",je.VARIABLE_LENGTH,30],["95",je.VARIABLE_LENGTH,30],["96",je.VARIABLE_LENGTH,30],["97",je.VARIABLE_LENGTH,3],["98",je.VARIABLE_LENGTH,30],["99",je.VARIABLE_LENGTH,30]],je.THREE_DIGIT_DATA_LENGTH=[["240",je.VARIABLE_LENGTH,30],["241",je.VARIABLE_LENGTH,30],["242",je.VARIABLE_LENGTH,6],["250",je.VARIABLE_LENGTH,30],["251",je.VARIABLE_LENGTH,30],["253",je.VARIABLE_LENGTH,17],["254",je.VARIABLE_LENGTH,20],["400",je.VARIABLE_LENGTH,30],["401",je.VARIABLE_LENGTH,30],["402",17],["403",je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",je.VARIABLE_LENGTH,20],["421",je.VARIABLE_LENGTH,15],["422",3],["423",je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",je.VARIABLE_LENGTH,15],["391",je.VARIABLE_LENGTH,18],["392",je.VARIABLE_LENGTH,15],["393",je.VARIABLE_LENGTH,18],["703",je.VARIABLE_LENGTH,30]],je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",je.VARIABLE_LENGTH,20],["8003",je.VARIABLE_LENGTH,30],["8004",je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",je.VARIABLE_LENGTH,30],["8008",je.VARIABLE_LENGTH,12],["8018",18],["8020",je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",je.VARIABLE_LENGTH,70],["8200",je.VARIABLE_LENGTH,70]];class ks{constructor(s){this.buffer=new be,this.information=s}decodeAllCodes(s,u){let h=u,m=null;do{let v=this.decodeGeneralPurposeField(h,m),x=je.parseFieldsInGeneralPurpose(v.getNewString());if(x!=null&&s.append(x),v.isRemaining()?m=""+v.getRemainingValue():m=null,h===v.getNewPosition())break;h=v.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let u=s;u<s+3;++u)if(this.information.get(u))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let v=this.extractNumericValueFromBitArray(s,4);return v===0?new wr(this.information.getSize(),wr.FNC1,wr.FNC1):new wr(this.information.getSize(),v-1,wr.FNC1)}let u=this.extractNumericValueFromBitArray(s,7),h=(u-8)/11,m=(u-8)%11;return new wr(s+7,h,m)}extractNumericValueFromBitArray(s,u){return ks.extractNumericValueFromBitArray(this.information,s,u)}static extractNumericValueFromBitArray(s,u,h){let m=0;for(let v=0;v<h;++v)s.get(u+v)&&(m|=1<<h-v-1);return m}decodeGeneralPurposeField(s,u){this.buffer.setLengthToZero(),u!=null&&this.buffer.append(u),this.current.setPosition(s);let h=this.parseBlocks();return h!=null&&h.isRemaining()?new Li(this.current.getPosition(),this.buffer.toString(),h.getRemainingValue()):new Li(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,u;do{let h=this.current.getPosition();if(this.current.isAlpha()?(u=this.parseAlphaBlock(),s=u.isFinished()):this.current.isIsoIec646()?(u=this.parseIsoIec646Block(),s=u.isFinished()):(u=this.parseNumericBlock(),s=u.isFinished()),!(h!==this.current.getPosition())&&!s)break}while(!s);return u.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let u;return s.isSecondDigitFNC1()?u=new Li(this.current.getPosition(),this.buffer.toString()):u=new Li(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new gi(!0,u)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let u=new Li(this.current.getPosition(),this.buffer.toString());return new gi(!0,u)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new gi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let u=new Li(this.current.getPosition(),this.buffer.toString());return new gi(!0,u)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new gi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let u=new Li(this.current.getPosition(),this.buffer.toString());return new gi(!0,u)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new gi(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,5);if(u>=5&&u<16)return!0;if(s+7>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(s,7);if(h>=64&&h<116)return!0;if(s+8>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(s,8);return m>=232&&m<253}decodeIsoIec646(s){let u=this.extractNumericValueFromBitArray(s,5);if(u===15)return new Gn(s+5,Gn.FNC1);if(u>=5&&u<15)return new Gn(s+5,"0"+(u-5));let h=this.extractNumericValueFromBitArray(s,7);if(h>=64&&h<90)return new Gn(s+7,""+(h+1));if(h>=90&&h<116)return new Gn(s+7,""+(h+7));let m=this.extractNumericValueFromBitArray(s,8),v;switch(m){case 232:v="!";break;case 233:v='"';break;case 234:v="%";break;case 235:v="&";break;case 236:v="'";break;case 237:v="(";break;case 238:v=")";break;case 239:v="*";break;case 240:v="+";break;case 241:v=",";break;case 242:v="-";break;case 243:v=".";break;case 244:v="/";break;case 245:v=":";break;case 246:v=";";break;case 247:v="<";break;case 248:v="=";break;case 249:v=">";break;case 250:v="?";break;case 251:v="_";break;case 252:v=" ";break;default:throw new W}return new Gn(s+8,v)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,5);if(u>=5&&u<16)return!0;if(s+6>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(s,6);return h>=16&&h<63}decodeAlphanumeric(s){let u=this.extractNumericValueFromBitArray(s,5);if(u===15)return new Gn(s+5,Gn.FNC1);if(u>=5&&u<15)return new Gn(s+5,"0"+(u-5));let h=this.extractNumericValueFromBitArray(s,6);if(h>=32&&h<58)return new Gn(s+6,""+(h+33));let m;switch(h){case 58:m="*";break;case 59:m=",";break;case 60:m="-";break;case 61:m=".";break;case 62:m="/";break;default:throw new It("Decoding invalid alphanumeric value: "+h)}return new Gn(s+6,m)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let u=0;u<5&&u+s<this.information.getSize();++u)if(u===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+u))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let u=s;u<s+3;++u)if(this.information.get(u))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let u=0;u<4&&u+s<this.information.getSize();++u)if(this.information.get(s+u))return!1;return!0}}class sc{constructor(s){this.information=s,this.generalDecoder=new ks(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Or extends sc{constructor(s){super(s)}encodeCompressedGtin(s,u){s.append("(01)");let h=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,u,h)}encodeCompressedGtinWithoutAI(s,u,h){for(let m=0;m<4;++m){let v=this.getGeneralDecoder().extractNumericValueFromBitArray(u+10*m,10);v/100===0&&s.append("0"),v/10===0&&s.append("0"),s.append(v)}Or.appendCheckDigit(s,h)}static appendCheckDigit(s,u){let h=0;for(let m=0;m<13;m++){let v=s.charAt(m+u).charCodeAt(0)-48;h+=(m&1)===0?3*v:v}h=10-h%10,h===10&&(h=0),s.append(h)}}Or.GTIN_SIZE=40;class ti extends Or{constructor(s){super(s)}parseInformation(){let s=new be;s.append("(01)");let u=s.length(),h=this.getGeneralDecoder().extractNumericValueFromBitArray(ti.HEADER_SIZE,4);return s.append(h),this.encodeCompressedGtinWithoutAI(s,ti.HEADER_SIZE+4,u),this.getGeneralDecoder().decodeAllCodes(s,ti.HEADER_SIZE+44)}}ti.HEADER_SIZE=4;class ba extends sc{constructor(s){super(s)}parseInformation(){let s=new be;return this.getGeneralDecoder().decodeAllCodes(s,ba.HEADER_SIZE)}}ba.HEADER_SIZE=5;class _a extends Or{constructor(s){super(s)}encodeCompressedWeight(s,u,h){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(u,h);this.addWeightCode(s,m);let v=this.checkWeight(m),x=1e5;for(let _=0;_<5;++_)v/x===0&&s.append("0"),x/=10;s.append(v)}}class Bi extends _a{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=Bi.HEADER_SIZE+_a.GTIN_SIZE+Bi.WEIGHT_SIZE)throw new ne;let s=new be;return this.encodeCompressedGtin(s,Bi.HEADER_SIZE),this.encodeCompressedWeight(s,Bi.HEADER_SIZE+_a.GTIN_SIZE,Bi.WEIGHT_SIZE),s.toString()}}Bi.HEADER_SIZE=5,Bi.WEIGHT_SIZE=15;class ef extends Bi{constructor(s){super(s)}addWeightCode(s,u){s.append("(3103)")}checkWeight(s){return s}}class tf extends Bi{constructor(s){super(s)}addWeightCode(s,u){u<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class mi extends Or{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<mi.HEADER_SIZE+Or.GTIN_SIZE)throw new ne;let s=new be;this.encodeCompressedGtin(s,mi.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(mi.HEADER_SIZE+Or.GTIN_SIZE,mi.LAST_DIGIT_SIZE);s.append("(392"),s.append(u),s.append(")");let h=this.getGeneralDecoder().decodeGeneralPurposeField(mi.HEADER_SIZE+Or.GTIN_SIZE+mi.LAST_DIGIT_SIZE,null);return s.append(h.getNewString()),s.toString()}}mi.HEADER_SIZE=8,mi.LAST_DIGIT_SIZE=2;class ur extends Or{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<ur.HEADER_SIZE+Or.GTIN_SIZE)throw new ne;let s=new be;this.encodeCompressedGtin(s,ur.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(ur.HEADER_SIZE+Or.GTIN_SIZE,ur.LAST_DIGIT_SIZE);s.append("(393"),s.append(u),s.append(")");let h=this.getGeneralDecoder().extractNumericValueFromBitArray(ur.HEADER_SIZE+Or.GTIN_SIZE+ur.LAST_DIGIT_SIZE,ur.FIRST_THREE_DIGITS_SIZE);h/100==0&&s.append("0"),h/10==0&&s.append("0"),s.append(h);let m=this.getGeneralDecoder().decodeGeneralPurposeField(ur.HEADER_SIZE+Or.GTIN_SIZE+ur.LAST_DIGIT_SIZE+ur.FIRST_THREE_DIGITS_SIZE,null);return s.append(m.getNewString()),s.toString()}}ur.HEADER_SIZE=8,ur.LAST_DIGIT_SIZE=2,ur.FIRST_THREE_DIGITS_SIZE=10;class en extends _a{constructor(s,u,h){super(s),this.dateCode=h,this.firstAIdigits=u}parseInformation(){if(this.getInformation().getSize()!=en.HEADER_SIZE+en.GTIN_SIZE+en.WEIGHT_SIZE+en.DATE_SIZE)throw new ne;let s=new be;return this.encodeCompressedGtin(s,en.HEADER_SIZE),this.encodeCompressedWeight(s,en.HEADER_SIZE+en.GTIN_SIZE,en.WEIGHT_SIZE),this.encodeCompressedDate(s,en.HEADER_SIZE+en.GTIN_SIZE+en.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,u){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(u,en.DATE_SIZE);if(h==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let m=h%32;h/=32;let v=h%12+1;h/=12;let x=h;x/10==0&&s.append("0"),s.append(x),v/10==0&&s.append("0"),s.append(v),m/10==0&&s.append("0"),s.append(m)}addWeightCode(s,u){s.append("("),s.append(this.firstAIdigits),s.append(u/1e5),s.append(")")}checkWeight(s){return s%1e5}}en.HEADER_SIZE=8,en.WEIGHT_SIZE=20,en.DATE_SIZE=16;function nf(j){try{if(j.get(1))return new ti(j);if(!j.get(2))return new ba(j);switch(ks.extractNumericValueFromBitArray(j,1,4)){case 4:return new ef(j);case 5:return new tf(j)}switch(ks.extractNumericValueFromBitArray(j,1,5)){case 12:return new mi(j);case 13:return new ur(j)}switch(ks.extractNumericValueFromBitArray(j,1,7)){case 56:return new en(j,"310","11");case 57:return new en(j,"320","11");case 58:return new en(j,"310","13");case 59:return new en(j,"320","13");case 60:return new en(j,"310","15");case 61:return new en(j,"320","15");case 62:return new en(j,"310","17");case 63:return new en(j,"320","17")}}catch(s){throw console.log(s),new It("unknown decoder: "+j)}}class Ut{constructor(s,u,h,m){this.leftchar=s,this.rightchar=u,this.finderpattern=h,this.maybeLast=m}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,u){return s instanceof Ut?Ut.equalsOrNull(s.leftchar,u.leftchar)&&Ut.equalsOrNull(s.rightchar,u.rightchar)&&Ut.equalsOrNull(s.finderpattern,u.finderpattern):!1}static equalsOrNull(s,u){return s===null?u===null:Ut.equals(s,u)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ac{constructor(s,u,h){this.pairs=s,this.rowNumber=u,this.wasReversed=h}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,u){return s instanceof ac?this.checkEqualitity(s,u)&&s.wasReversed===u.wasReversed:!1}checkEqualitity(s,u){if(!s||!u)return;let h;return s.forEach((m,v)=>{u.forEach(x=>{m.getLeftChar().getValue()===x.getLeftChar().getValue()&&m.getRightChar().getValue()===x.getRightChar().getValue()&&m.getFinderPatter().getValue()===x.getFinderPatter().getValue()&&(h=!0)})}),h}}class Se extends Xn{constructor(s){super(...arguments),this.pairs=new Array(Se.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,u,h){this.pairs.length=0,this.startFromEven=!1;try{return Se.constructResult(this.decodeRow2pairs(s,u))}catch(m){this.verbose&&console.log(m)}return this.pairs.length=0,this.startFromEven=!0,Se.constructResult(this.decodeRow2pairs(s,u))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,u){let h=!1;for(;!h;)try{this.pairs.push(this.retrieveNextPair(u,this.pairs,s))}catch(v){if(v instanceof ne){if(!this.pairs.length)throw new ne;h=!0}}if(this.checkChecksum())return this.pairs;let m;if(this.rows.length?m=!0:m=!1,this.storeRow(s,!1),m){let v=this.checkRowsBoolean(!1);if(v!=null||(v=this.checkRowsBoolean(!0),v!=null))return v}throw new ne}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let u=null;try{u=this.checkRows(new Array,0)}catch(h){this.verbose&&console.log(h)}return s&&(this.rows=this.rows.reverse()),u}checkRows(s,u){for(let h=u;h<this.rows.length;h++){let m=this.rows[h];this.pairs.length=0;for(let x of s)this.pairs.push(x.getPairs());if(this.pairs.push(m.getPairs()),!Se.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let v=new Array(s);v.push(m);try{return this.checkRows(v,h+1)}catch(x){this.verbose&&console.log(x)}}throw new ne}static isValidSequence(s){for(let u of Se.FINDER_PATTERN_SEQUENCES){if(s.length>u.length)continue;let h=!0;for(let m=0;m<s.length;m++)if(s[m].getFinderPattern().getValue()!=u[m]){h=!1;break}if(h)return!0}return!1}storeRow(s,u){let h=0,m=!1,v=!1;for(;h<this.rows.length;){let x=this.rows[h];if(x.getRowNumber()>s){v=x.isEquivalent(this.pairs);break}m=x.isEquivalent(this.pairs),h++}v||m||Se.isPartialRow(this.pairs,this.rows)||(this.rows.push(h,new ac(this.pairs,s,u)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,u){for(let h of u)if(h.getPairs().length!==s.length){for(let m of h.getPairs())for(let v of s)if(Ut.equals(m,v))break}}static isPartialRow(s,u){for(let h of u){let m=!0;for(let v of s){let x=!1;for(let _ of h.getPairs())if(v.equals(_)){x=!0;break}if(!x){m=!1;break}}if(m)return!0}return!1}getRows(){return this.rows}static constructResult(s){let u=ic.buildBitArray(s),m=nf(u).parseInformation(),v=s[0].getFinderPattern().getResultPoints(),x=s[s.length-1].getFinderPattern().getResultPoints(),_=[v[0],v[1],x[0],x[1]];return new Le(m,null,null,_,Ne.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),u=s.getLeftChar(),h=s.getRightChar();if(h==null)return!1;let m=h.getChecksumPortion(),v=2;for(let _=1;_<this.pairs.size();++_){let T=this.pairs.get(_);m+=T.getLeftChar().getChecksumPortion(),v++;let R=T.getRightChar();R!=null&&(m+=R.getChecksumPortion(),v++)}return m%=211,211*(v-4)+m==u.getValue()}static getNextSecondBar(s,u){let h;return s.get(u)?(h=s.getNextUnset(u),h=s.getNextSet(h)):(h=s.getNextSet(u),h=s.getNextUnset(h)),h}retrieveNextPair(s,u,h){let m=u.length%2==0;this.startFromEven&&(m=!m);let v,x=!0,_=-1;do this.findNextPair(s,u,_),v=this.parseFoundFinderPattern(s,h,m),v==null?_=Se.getNextSecondBar(s,this.startEnd[0]):x=!1;while(x);let T=this.decodeDataCharacter(s,v,m,!0);if(!this.isEmptyPair(u)&&u[u.length-1].mustBeLast())throw new ne;let R;try{R=this.decodeDataCharacter(s,v,m,!1)}catch(B){R=null,this.verbose&&console.log(B)}return new Ut(T,R,v,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,u,h){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let v=s.getSize(),x;h>=0?x=h:this.isEmptyPair(u)?x=0:x=u[u.length-1].getFinderPattern().getStartEnd()[1];let _=u.length%2!=0;this.startFromEven&&(_=!_);let T=!1;for(;x<v&&(T=!s.get(x),!!T);)x++;let R=0,B=x;for(let V=x;V<v;V++)if(s.get(V)!=T)m[R]++;else{if(R==3){if(_&&Se.reverseCounters(m),Se.isFinderPattern(m)){this.startEnd[0]=B,this.startEnd[1]=V;return}_&&Se.reverseCounters(m),B+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,R--}else R++;m[R]=1,T=!T}throw new ne}static reverseCounters(s){let u=s.length;for(let h=0;h<u/2;++h){let m=s[h];s[h]=s[u-h-1],s[u-h-1]=m}}parseFoundFinderPattern(s,u,h){let m,v,x;if(h){let R=this.startEnd[0]-1;for(;R>=0&&!s.get(R);)R--;R++,m=this.startEnd[0]-R,v=R,x=this.startEnd[1]}else v=this.startEnd[0],x=s.getNextUnset(this.startEnd[1]+1),m=x-this.startEnd[1];let _=this.getDecodeFinderCounters();P.arraycopy(_,0,_,1,_.length-1),_[0]=m;let T;try{T=this.parseFinderValue(_,Se.FINDER_PATTERNS)}catch{return null}return new Ea(T,[v,x],v,x,u)}decodeDataCharacter(s,u,h,m){let v=this.getDataCharacterCounters();for(let Bt=0;Bt<v.length;Bt++)v[Bt]=0;if(m)Se.recordPatternInReverse(s,u.getStartEnd()[0],v);else{Se.recordPattern(s,u.getStartEnd()[1],v);for(let Bt=0,xn=v.length-1;Bt<xn;Bt++,xn--){let _r=v[Bt];v[Bt]=v[xn],v[xn]=_r}}let x=17,_=_t.sum(new Int32Array(v))/x,T=(u.getStartEnd()[1]-u.getStartEnd()[0])/15;if(Math.abs(_-T)/T>.3)throw new ne;let R=this.getOddCounts(),B=this.getEvenCounts(),V=this.getOddRoundingErrors(),$=this.getEvenRoundingErrors();for(let Bt=0;Bt<v.length;Bt++){let xn=1*v[Bt]/_,_r=xn+.5;if(_r<1){if(xn<.3)throw new ne;_r=1}else if(_r>8){if(xn>8.7)throw new ne;_r=8}let Xo=Bt/2;(Bt&1)==0?(R[Xo]=_r,V[Xo]=xn-_r):(B[Xo]=_r,$[Xo]=xn-_r)}this.adjustOddEvenCounts(x);let Y=4*u.getValue()+(h?0:2)+(m?0:1)-1,Q=0,re=0;for(let Bt=R.length-1;Bt>=0;Bt--){if(Se.isNotA1left(u,h,m)){let xn=Se.WEIGHTS[Y][2*Bt];re+=R[Bt]*xn}Q+=R[Bt]}let oe=0;for(let Bt=B.length-1;Bt>=0;Bt--)if(Se.isNotA1left(u,h,m)){let xn=Se.WEIGHTS[Y][2*Bt+1];oe+=B[Bt]*xn}let pe=re+oe;if((Q&1)!=0||Q>13||Q<4)throw new ne;let Oe=(13-Q)/2,ke=Se.SYMBOL_WIDEST[Oe],Ie=9-ke,wt=Rr.getRSSvalue(R,ke,!0),pt=Rr.getRSSvalue(B,Ie,!1),Mr=Se.EVEN_TOTAL_SUBSET[Oe],Ei=Se.GSUM[Oe],Ln=wt*Mr+pt+Ei;return new Po(Ln,pe)}static isNotA1left(s,u,h){return!(s.getValue()==0&&u&&h)}adjustOddEvenCounts(s){let u=_t.sum(new Int32Array(this.getOddCounts())),h=_t.sum(new Int32Array(this.getEvenCounts())),m=!1,v=!1;u>13?v=!0:u<4&&(m=!0);let x=!1,_=!1;h>13?_=!0:h<4&&(x=!0);let T=u+h-s,R=(u&1)==1,B=(h&1)==0;if(T==1)if(R){if(B)throw new ne;v=!0}else{if(!B)throw new ne;_=!0}else if(T==-1)if(R){if(B)throw new ne;m=!0}else{if(!B)throw new ne;x=!0}else if(T==0){if(R){if(!B)throw new ne;u<h?(m=!0,_=!0):(v=!0,x=!0)}else if(B)throw new ne}else throw new ne;if(m){if(v)throw new ne;Se.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(v&&Se.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(_)throw new ne;Se.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Se.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Se.SYMBOL_WIDEST=[7,5,4,3,1],Se.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Se.GSUM=[0,348,1388,2948,3988],Se.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Se.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Se.FINDER_PAT_A=0,Se.FINDER_PAT_B=1,Se.FINDER_PAT_C=2,Se.FINDER_PAT_D=3,Se.FINDER_PAT_E=4,Se.FINDER_PAT_F=5,Se.FINDER_PATTERN_SEQUENCES=[[Se.FINDER_PAT_A,Se.FINDER_PAT_A],[Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B],[Se.FINDER_PAT_A,Se.FINDER_PAT_C,Se.FINDER_PAT_B,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_C],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F]],Se.MAX_PAIRS=11;class rf extends Po{constructor(s,u,h){super(s,u),this.count=0,this.finderPattern=h}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Kt extends Xn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,u,h){const m=this.decodePair(u,!1,s,h);Kt.addOrTally(this.possibleLeftPairs,m),u.reverse();let v=this.decodePair(u,!0,s,h);Kt.addOrTally(this.possibleRightPairs,v),u.reverse();for(let x of this.possibleLeftPairs)if(x.getCount()>1){for(let _ of this.possibleRightPairs)if(_.getCount()>1&&Kt.checkChecksum(x,_))return Kt.constructResult(x,_)}throw new ne}static addOrTally(s,u){if(u==null)return;let h=!1;for(let m of s)if(m.getValue()===u.getValue()){m.incrementCount(),h=!0;break}h||s.push(u)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,u){let h=4537077*s.getValue()+u.getValue(),m=new String(h).toString(),v=new be;for(let R=13-m.length;R>0;R--)v.append("0");v.append(m);let x=0;for(let R=0;R<13;R++){let B=v.charAt(R).charCodeAt(0)-48;x+=(R&1)===0?3*B:B}x=10-x%10,x===10&&(x=0),v.append(x.toString());let _=s.getFinderPattern().getResultPoints(),T=u.getFinderPattern().getResultPoints();return new Le(v.toString(),null,0,[_[0],_[1],T[0],T[1]],Ne.RSS_14,new Date().getTime())}static checkChecksum(s,u){let h=(s.getChecksumPortion()+16*u.getChecksumPortion())%79,m=9*s.getFinderPattern().getValue()+u.getFinderPattern().getValue();return m>72&&m--,m>8&&m--,h===m}decodePair(s,u,h,m){try{let v=this.findFinderPattern(s,u),x=this.parseFoundFinderPattern(s,h,u,v),_=m==null?null:m.get(H.NEED_RESULT_POINT_CALLBACK);if(_!=null){let B=(v[0]+v[1])/2;u&&(B=s.getSize()-1-B),_.foundPossibleResultPoint(new Ge(B,h))}let T=this.decodeDataCharacter(s,x,!0),R=this.decodeDataCharacter(s,x,!1);return new rf(1597*T.getValue()+R.getValue(),T.getChecksumPortion()+4*R.getChecksumPortion(),x)}catch{return null}}decodeDataCharacter(s,u,h){let m=this.getDataCharacterCounters();for(let oe=0;oe<m.length;oe++)m[oe]=0;if(h)yn.recordPatternInReverse(s,u.getStartEnd()[0],m);else{yn.recordPattern(s,u.getStartEnd()[1]+1,m);for(let oe=0,pe=m.length-1;oe<pe;oe++,pe--){let Oe=m[oe];m[oe]=m[pe],m[pe]=Oe}}let v=h?16:15,x=_t.sum(new Int32Array(m))/v,_=this.getOddCounts(),T=this.getEvenCounts(),R=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let oe=0;oe<m.length;oe++){let pe=m[oe]/x,Oe=Math.floor(pe+.5);Oe<1?Oe=1:Oe>8&&(Oe=8);let ke=Math.floor(oe/2);(oe&1)===0?(_[ke]=Oe,R[ke]=pe-Oe):(T[ke]=Oe,B[ke]=pe-Oe)}this.adjustOddEvenCounts(h,v);let V=0,$=0;for(let oe=_.length-1;oe>=0;oe--)$*=9,$+=_[oe],V+=_[oe];let Y=0,Q=0;for(let oe=T.length-1;oe>=0;oe--)Y*=9,Y+=T[oe],Q+=T[oe];let re=$+3*Y;if(h){if((V&1)!==0||V>12||V<4)throw new ne;let oe=(12-V)/2,pe=Kt.OUTSIDE_ODD_WIDEST[oe],Oe=9-pe,ke=Rr.getRSSvalue(_,pe,!1),Ie=Rr.getRSSvalue(T,Oe,!0),wt=Kt.OUTSIDE_EVEN_TOTAL_SUBSET[oe],pt=Kt.OUTSIDE_GSUM[oe];return new Po(ke*wt+Ie+pt,re)}else{if((Q&1)!==0||Q>10||Q<4)throw new ne;let oe=(10-Q)/2,pe=Kt.INSIDE_ODD_WIDEST[oe],Oe=9-pe,ke=Rr.getRSSvalue(_,pe,!0),Ie=Rr.getRSSvalue(T,Oe,!1),wt=Kt.INSIDE_ODD_TOTAL_SUBSET[oe],pt=Kt.INSIDE_GSUM[oe];return new Po(Ie*wt+ke+pt,re)}}findFinderPattern(s,u){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=s.getSize(),v=!1,x=0;for(;x<m&&(v=!s.get(x),u!==v);)x++;let _=0,T=x;for(let R=x;R<m;R++)if(s.get(R)!==v)h[_]++;else{if(_===3){if(Xn.isFinderPattern(h))return[T,R];T+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,_--}else _++;h[_]=1,v=!v}throw new ne}parseFoundFinderPattern(s,u,h,m){let v=s.get(m[0]),x=m[0]-1;for(;x>=0&&v!==s.get(x);)x--;x++;const _=m[0]-x,T=this.getDecodeFinderCounters(),R=new Int32Array(T.length);P.arraycopy(T,0,R,1,T.length-1),R[0]=_;const B=this.parseFinderValue(R,Kt.FINDER_PATTERNS);let V=x,$=m[1];return h&&(V=s.getSize()-1-V,$=s.getSize()-1-$),new Ea(B,[x,m[1]],V,$,u)}adjustOddEvenCounts(s,u){let h=_t.sum(new Int32Array(this.getOddCounts())),m=_t.sum(new Int32Array(this.getEvenCounts())),v=!1,x=!1,_=!1,T=!1;s?(h>12?x=!0:h<4&&(v=!0),m>12?T=!0:m<4&&(_=!0)):(h>11?x=!0:h<5&&(v=!0),m>10?T=!0:m<4&&(_=!0));let R=h+m-u,B=(h&1)===(s?1:0),V=(m&1)===1;if(R===1)if(B){if(V)throw new ne;x=!0}else{if(!V)throw new ne;T=!0}else if(R===-1)if(B){if(V)throw new ne;v=!0}else{if(!V)throw new ne;_=!0}else if(R===0){if(B){if(!V)throw new ne;h<m?(v=!0,T=!0):(x=!0,_=!0)}else if(V)throw new ne}else throw new ne;if(v){if(x)throw new ne;Xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&Xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),_){if(T)throw new ne;Xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&Xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Kt.OUTSIDE_GSUM=[0,161,961,2015,2715],Kt.INSIDE_GSUM=[0,336,1036,1516],Kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Kt.INSIDE_ODD_WIDEST=[2,4,6,8],Kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ms extends yn{constructor(s,u){super(),this.readers=[],this.verbose=u===!0;const h=s?s.get(H.POSSIBLE_FORMATS):null,m=s&&s.get(H.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;h?((h.includes(Ne.EAN_13)||h.includes(Ne.UPC_A)||h.includes(Ne.EAN_8)||h.includes(Ne.UPC_E))&&this.readers.push(new Nl(s)),h.includes(Ne.CODE_39)&&this.readers.push(new kn(m)),h.includes(Ne.CODE_128)&&this.readers.push(new Be),h.includes(Ne.ITF)&&this.readers.push(new Lt),h.includes(Ne.RSS_14)&&this.readers.push(new Kt),h.includes(Ne.RSS_EXPANDED)&&this.readers.push(new Se(this.verbose))):(this.readers.push(new Nl(s)),this.readers.push(new kn),this.readers.push(new Nl(s)),this.readers.push(new Be),this.readers.push(new Lt),this.readers.push(new Kt),this.readers.push(new Se(this.verbose)))}decodeRow(s,u,h){for(let m=0;m<this.readers.length;m++)try{return this.readers[m].decodeRow(s,u,h)}catch{}throw new ne}reset(){this.readers.forEach(s=>s.reset())}}class of extends Fe{constructor(s=500,u){super(new Ms(u),s,u)}}class Tt{constructor(s,u,h){this.ecCodewords=s,this.ecBlocks=[u],h&&this.ecBlocks.push(h)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class vt{constructor(s,u){this.count=s,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class At{constructor(s,u,h,m,v,x){this.versionNumber=s,this.symbolSizeRows=u,this.symbolSizeColumns=h,this.dataRegionSizeRows=m,this.dataRegionSizeColumns=v,this.ecBlocks=x;let _=0;const T=x.getECCodewords(),R=x.getECBlocks();for(let B of R)_+=B.getCount()*(B.getDataCodewords()+T);this.totalCodewords=_}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,u){if((s&1)!==0||(u&1)!==0)throw new W;for(let h of At.VERSIONS)if(h.symbolSizeRows===s&&h.symbolSizeColumns===u)return h;throw new W}toString(){return""+this.versionNumber}static buildVersions(){return[new At(1,10,10,8,8,new Tt(5,new vt(1,3))),new At(2,12,12,10,10,new Tt(7,new vt(1,5))),new At(3,14,14,12,12,new Tt(10,new vt(1,8))),new At(4,16,16,14,14,new Tt(12,new vt(1,12))),new At(5,18,18,16,16,new Tt(14,new vt(1,18))),new At(6,20,20,18,18,new Tt(18,new vt(1,22))),new At(7,22,22,20,20,new Tt(20,new vt(1,30))),new At(8,24,24,22,22,new Tt(24,new vt(1,36))),new At(9,26,26,24,24,new Tt(28,new vt(1,44))),new At(10,32,32,14,14,new Tt(36,new vt(1,62))),new At(11,36,36,16,16,new Tt(42,new vt(1,86))),new At(12,40,40,18,18,new Tt(48,new vt(1,114))),new At(13,44,44,20,20,new Tt(56,new vt(1,144))),new At(14,48,48,22,22,new Tt(68,new vt(1,174))),new At(15,52,52,24,24,new Tt(42,new vt(2,102))),new At(16,64,64,14,14,new Tt(56,new vt(2,140))),new At(17,72,72,16,16,new Tt(36,new vt(4,92))),new At(18,80,80,18,18,new Tt(48,new vt(4,114))),new At(19,88,88,20,20,new Tt(56,new vt(4,144))),new At(20,96,96,22,22,new Tt(68,new vt(4,174))),new At(21,104,104,24,24,new Tt(56,new vt(6,136))),new At(22,120,120,18,18,new Tt(68,new vt(6,175))),new At(23,132,132,20,20,new Tt(62,new vt(8,163))),new At(24,144,144,22,22,new Tt(62,new vt(8,156),new vt(2,155))),new At(25,8,18,6,16,new Tt(7,new vt(1,5))),new At(26,8,32,6,14,new Tt(11,new vt(1,10))),new At(27,12,26,10,24,new Tt(14,new vt(1,16))),new At(28,12,36,10,16,new Tt(18,new vt(1,22))),new At(29,16,36,14,16,new Tt(24,new vt(1,32))),new At(30,16,48,14,22,new Tt(28,new vt(1,49)))]}}At.VERSIONS=At.buildVersions();class $r{constructor(s){const u=s.getHeight();if(u<8||u>144||(u&1)!==0)throw new W;this.version=$r.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new fe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const u=s.getHeight(),h=s.getWidth();return At.getVersionForDimensions(u,h)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let u=0,h=4,m=0;const v=this.mappingBitMatrix.getHeight(),x=this.mappingBitMatrix.getWidth();let _=!1,T=!1,R=!1,B=!1;do if(h===v&&m===0&&!_)s[u++]=this.readCorner1(v,x)&255,h-=2,m+=2,_=!0;else if(h===v-2&&m===0&&(x&3)!==0&&!T)s[u++]=this.readCorner2(v,x)&255,h-=2,m+=2,T=!0;else if(h===v+4&&m===2&&(x&7)===0&&!R)s[u++]=this.readCorner3(v,x)&255,h-=2,m+=2,R=!0;else if(h===v-2&&m===0&&(x&7)===4&&!B)s[u++]=this.readCorner4(v,x)&255,h-=2,m+=2,B=!0;else{do h<v&&m>=0&&!this.readMappingMatrix.get(m,h)&&(s[u++]=this.readUtah(h,m,v,x)&255),h-=2,m+=2;while(h>=0&&m<x);h+=1,m+=3;do h>=0&&m<x&&!this.readMappingMatrix.get(m,h)&&(s[u++]=this.readUtah(h,m,v,x)&255),h+=2,m-=2;while(h<v&&m>=0);h+=3,m+=1}while(h<v||m<x);if(u!==this.version.getTotalCodewords())throw new W;return s}readModule(s,u,h,m){return s<0&&(s+=h,u+=4-(h+4&7)),u<0&&(u+=m,s+=4-(m+4&7)),this.readMappingMatrix.set(u,s),this.mappingBitMatrix.get(u,s)}readUtah(s,u,h,m){let v=0;return this.readModule(s-2,u-2,h,m)&&(v|=1),v<<=1,this.readModule(s-2,u-1,h,m)&&(v|=1),v<<=1,this.readModule(s-1,u-2,h,m)&&(v|=1),v<<=1,this.readModule(s-1,u-1,h,m)&&(v|=1),v<<=1,this.readModule(s-1,u,h,m)&&(v|=1),v<<=1,this.readModule(s,u-2,h,m)&&(v|=1),v<<=1,this.readModule(s,u-1,h,m)&&(v|=1),v<<=1,this.readModule(s,u,h,m)&&(v|=1),v}readCorner1(s,u){let h=0;return this.readModule(s-1,0,s,u)&&(h|=1),h<<=1,this.readModule(s-1,1,s,u)&&(h|=1),h<<=1,this.readModule(s-1,2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-1,s,u)&&(h|=1),h<<=1,this.readModule(1,u-1,s,u)&&(h|=1),h<<=1,this.readModule(2,u-1,s,u)&&(h|=1),h<<=1,this.readModule(3,u-1,s,u)&&(h|=1),h}readCorner2(s,u){let h=0;return this.readModule(s-3,0,s,u)&&(h|=1),h<<=1,this.readModule(s-2,0,s,u)&&(h|=1),h<<=1,this.readModule(s-1,0,s,u)&&(h|=1),h<<=1,this.readModule(0,u-4,s,u)&&(h|=1),h<<=1,this.readModule(0,u-3,s,u)&&(h|=1),h<<=1,this.readModule(0,u-2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-1,s,u)&&(h|=1),h<<=1,this.readModule(1,u-1,s,u)&&(h|=1),h}readCorner3(s,u){let h=0;return this.readModule(s-1,0,s,u)&&(h|=1),h<<=1,this.readModule(s-1,u-1,s,u)&&(h|=1),h<<=1,this.readModule(0,u-3,s,u)&&(h|=1),h<<=1,this.readModule(0,u-2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-1,s,u)&&(h|=1),h<<=1,this.readModule(1,u-3,s,u)&&(h|=1),h<<=1,this.readModule(1,u-2,s,u)&&(h|=1),h<<=1,this.readModule(1,u-1,s,u)&&(h|=1),h}readCorner4(s,u){let h=0;return this.readModule(s-3,0,s,u)&&(h|=1),h<<=1,this.readModule(s-2,0,s,u)&&(h|=1),h<<=1,this.readModule(s-1,0,s,u)&&(h|=1),h<<=1,this.readModule(0,u-2,s,u)&&(h|=1),h<<=1,this.readModule(0,u-1,s,u)&&(h|=1),h<<=1,this.readModule(1,u-1,s,u)&&(h|=1),h<<=1,this.readModule(2,u-1,s,u)&&(h|=1),h<<=1,this.readModule(3,u-1,s,u)&&(h|=1),h}extractDataRegion(s){const u=this.version.getSymbolSizeRows(),h=this.version.getSymbolSizeColumns();if(s.getHeight()!==u)throw new y("Dimension of bitMatrix must match the version size");const m=this.version.getDataRegionSizeRows(),v=this.version.getDataRegionSizeColumns(),x=u/m|0,_=h/v|0,T=x*m,R=_*v,B=new fe(R,T);for(let V=0;V<x;++V){const $=V*m;for(let Y=0;Y<_;++Y){const Q=Y*v;for(let re=0;re<m;++re){const oe=V*(m+2)+1+re,pe=$+re;for(let Oe=0;Oe<v;++Oe){const ke=Y*(v+2)+1+Oe;if(s.get(ke,oe)){const Ie=Q+Oe;B.set(Ie,pe)}}}}}return B}}class lc{constructor(s,u){this.numDataCodewords=s,this.codewords=u}static getDataBlocks(s,u){const h=u.getECBlocks();let m=0;const v=h.getECBlocks();for(let re of v)m+=re.getCount();const x=new Array(m);let _=0;for(let re of v)for(let oe=0;oe<re.getCount();oe++){const pe=re.getDataCodewords(),Oe=h.getECCodewords()+pe;x[_++]=new lc(pe,new Uint8Array(Oe))}const R=x[0].codewords.length-h.getECCodewords(),B=R-1;let V=0;for(let re=0;re<B;re++)for(let oe=0;oe<_;oe++)x[oe].codewords[re]=s[V++];const $=u.getVersionNumber()===24,Y=$?8:_;for(let re=0;re<Y;re++)x[re].codewords[R-1]=s[V++];const Q=x[0].codewords.length;for(let re=R;re<Q;re++)for(let oe=0;oe<_;oe++){const pe=$?(oe+8)%_:oe,Oe=$&&pe>7?re-1:re;x[pe].codewords[Oe]=s[V++]}if(V!==s.length)throw new y;return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class uc{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new y(""+s);let u=0,h=this.bitOffset,m=this.byteOffset;const v=this.bytes;if(h>0){const x=8-h,_=s<x?s:x,T=x-_,R=255>>8-_<<T;u=(v[m]&R)>>T,s-=_,h+=_,h===8&&(h=0,m++)}if(s>0){for(;s>=8;)u=u<<8|v[m]&255,m++,s-=8;if(s>0){const x=8-s,_=255>>x<<x;u=u<<s|(v[m]&_)>>x,h+=s}}return this.bitOffset=h,this.byteOffset=m,u}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Mn;(function(j){j[j.PAD_ENCODE=0]="PAD_ENCODE",j[j.ASCII_ENCODE=1]="ASCII_ENCODE",j[j.C40_ENCODE=2]="C40_ENCODE",j[j.TEXT_ENCODE=3]="TEXT_ENCODE",j[j.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",j[j.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",j[j.BASE256_ENCODE=6]="BASE256_ENCODE"})(Mn||(Mn={}));class vi{static decode(s){const u=new uc(s),h=new be,m=new be,v=new Array;let x=Mn.ASCII_ENCODE;do if(x===Mn.ASCII_ENCODE)x=this.decodeAsciiSegment(u,h,m);else{switch(x){case Mn.C40_ENCODE:this.decodeC40Segment(u,h);break;case Mn.TEXT_ENCODE:this.decodeTextSegment(u,h);break;case Mn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(u,h);break;case Mn.EDIFACT_ENCODE:this.decodeEdifactSegment(u,h);break;case Mn.BASE256_ENCODE:this.decodeBase256Segment(u,h,v);break;default:throw new W}x=Mn.ASCII_ENCODE}while(x!==Mn.PAD_ENCODE&&u.available()>0);return m.length()>0&&h.append(m.toString()),new Ee(s,h.toString(),v.length===0?null:v,null)}static decodeAsciiSegment(s,u,h){let m=!1;do{let v=s.readBits(8);if(v===0)throw new W;if(v<=128)return m&&(v+=128),u.append(String.fromCharCode(v-1)),Mn.ASCII_ENCODE;if(v===129)return Mn.PAD_ENCODE;if(v<=229){const x=v-130;x<10&&u.append("0"),u.append(""+x)}else switch(v){case 230:return Mn.C40_ENCODE;case 231:return Mn.BASE256_ENCODE;case 232:u.append("");break;case 233:case 234:break;case 235:m=!0;break;case 236:u.append("[)>05"),h.insert(0,"");break;case 237:u.append("[)>06"),h.insert(0,"");break;case 238:return Mn.ANSIX12_ENCODE;case 239:return Mn.TEXT_ENCODE;case 240:return Mn.EDIFACT_ENCODE;case 241:break;default:if(v!==254||s.available()!==0)throw new W;break}}while(s.available()>0);return Mn.ASCII_ENCODE}static decodeC40Segment(s,u){let h=!1;const m=[];let v=0;do{if(s.available()===8)return;const x=s.readBits(8);if(x===254)return;this.parseTwoBytes(x,s.readBits(8),m);for(let _=0;_<3;_++){const T=m[_];switch(v){case 0:if(T<3)v=T+1;else if(T<this.C40_BASIC_SET_CHARS.length){const R=this.C40_BASIC_SET_CHARS[T];h?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),h=!1):u.append(R)}else throw new W;break;case 1:h?(u.append(String.fromCharCode(T+128)),h=!1):u.append(String.fromCharCode(T)),v=0;break;case 2:if(T<this.C40_SHIFT2_SET_CHARS.length){const R=this.C40_SHIFT2_SET_CHARS[T];h?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),h=!1):u.append(R)}else switch(T){case 27:u.append("");break;case 30:h=!0;break;default:throw new W}v=0;break;case 3:h?(u.append(String.fromCharCode(T+224)),h=!1):u.append(String.fromCharCode(T+96)),v=0;break;default:throw new W}}}while(s.available()>0)}static decodeTextSegment(s,u){let h=!1,m=[],v=0;do{if(s.available()===8)return;const x=s.readBits(8);if(x===254)return;this.parseTwoBytes(x,s.readBits(8),m);for(let _=0;_<3;_++){const T=m[_];switch(v){case 0:if(T<3)v=T+1;else if(T<this.TEXT_BASIC_SET_CHARS.length){const R=this.TEXT_BASIC_SET_CHARS[T];h?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),h=!1):u.append(R)}else throw new W;break;case 1:h?(u.append(String.fromCharCode(T+128)),h=!1):u.append(String.fromCharCode(T)),v=0;break;case 2:if(T<this.TEXT_SHIFT2_SET_CHARS.length){const R=this.TEXT_SHIFT2_SET_CHARS[T];h?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),h=!1):u.append(R)}else switch(T){case 27:u.append("");break;case 30:h=!0;break;default:throw new W}v=0;break;case 3:if(T<this.TEXT_SHIFT3_SET_CHARS.length){const R=this.TEXT_SHIFT3_SET_CHARS[T];h?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),h=!1):u.append(R),v=0}else throw new W;break;default:throw new W}}}while(s.available()>0)}static decodeAnsiX12Segment(s,u){const h=[];do{if(s.available()===8)return;const m=s.readBits(8);if(m===254)return;this.parseTwoBytes(m,s.readBits(8),h);for(let v=0;v<3;v++){const x=h[v];switch(x){case 0:u.append("\r");break;case 1:u.append("*");break;case 2:u.append(">");break;case 3:u.append(" ");break;default:if(x<14)u.append(String.fromCharCode(x+44));else if(x<40)u.append(String.fromCharCode(x+51));else throw new W;break}}}while(s.available()>0)}static parseTwoBytes(s,u,h){let m=(s<<8)+u-1,v=Math.floor(m/1600);h[0]=v,m-=v*1600,v=Math.floor(m/40),h[1]=v,h[2]=m-v*40}static decodeEdifactSegment(s,u){do{if(s.available()<=16)return;for(let h=0;h<4;h++){let m=s.readBits(6);if(m===31){const v=8-s.getBitOffset();v!==8&&s.readBits(v);return}(m&32)===0&&(m|=64),u.append(String.fromCharCode(m))}}while(s.available()>0)}static decodeBase256Segment(s,u,h){let m=1+s.getByteOffset();const v=this.unrandomize255State(s.readBits(8),m++);let x;if(v===0?x=s.available()/8|0:v<250?x=v:x=250*(v-249)+this.unrandomize255State(s.readBits(8),m++),x<0)throw new W;const _=new Uint8Array(x);for(let T=0;T<x;T++){if(s.available()<8)throw new W;_[T]=this.unrandomize255State(s.readBits(8),m++)}h.push(_);try{u.append(se.decode(_,ae.ISO88591))}catch(T){throw new It("Platform does not support required encoding: "+T.message)}}static unrandomize255State(s,u){const h=149*u%255+1,m=s-h;return m>=0?m:m+256}}vi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],vi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],vi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],vi.TEXT_SHIFT2_SET_CHARS=vi.C40_SHIFT2_SET_CHARS,vi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Rl{constructor(){this.rsDecoder=new Cn(Ke.DATA_MATRIX_FIELD_256)}decode(s){const u=new $r(s),h=u.getVersion(),m=u.readCodewords(),v=lc.getDataBlocks(m,h);let x=0;for(let R of v)x+=R.getNumDataCodewords();const _=new Uint8Array(x),T=v.length;for(let R=0;R<T;R++){const B=v[R],V=B.getCodewords(),$=B.getNumDataCodewords();this.correctErrors(V,$);for(let Y=0;Y<$;Y++)_[Y*T+R]=V[Y]}return vi.decode(_)}correctErrors(s,u){const h=new Int32Array(s);try{this.rsDecoder.decode(h,s.length-u)}catch{throw new C}for(let m=0;m<u;m++)s[m]=h[m]}}class Yt{constructor(s){this.image=s,this.rectangleDetector=new Di(this.image)}detect(){const s=this.rectangleDetector.detect();let u=this.detectSolid1(s);if(u=this.detectSolid2(u),u[3]=this.correctTopRight(u),!u[3])throw new ne;u=this.shiftToModuleCenter(u);const h=u[0],m=u[1],v=u[2],x=u[3];let _=this.transitionsBetween(h,x)+1,T=this.transitionsBetween(v,x)+1;(_&1)===1&&(_+=1),(T&1)===1&&(T+=1),4*_<7*T&&4*T<7*_&&(_=T=Math.max(_,T));let R=Yt.sampleGrid(this.image,h,m,v,x,_,T);return new Rs(R,[h,m,v,x])}static shiftPoint(s,u,h){let m=(u.getX()-s.getX())/(h+1),v=(u.getY()-s.getY())/(h+1);return new Ge(s.getX()+m,s.getY()+v)}static moveAway(s,u,h){let m=s.getX(),v=s.getY();return m<u?m-=1:m+=1,v<h?v-=1:v+=1,new Ge(m,v)}detectSolid1(s){let u=s[0],h=s[1],m=s[3],v=s[2],x=this.transitionsBetween(u,h),_=this.transitionsBetween(h,m),T=this.transitionsBetween(m,v),R=this.transitionsBetween(v,u),B=x,V=[v,u,h,m];return B>_&&(B=_,V[0]=u,V[1]=h,V[2]=m,V[3]=v),B>T&&(B=T,V[0]=h,V[1]=m,V[2]=v,V[3]=u),B>R&&(V[0]=m,V[1]=v,V[2]=u,V[3]=h),V}detectSolid2(s){let u=s[0],h=s[1],m=s[2],v=s[3],x=this.transitionsBetween(u,v),_=Yt.shiftPoint(h,m,(x+1)*4),T=Yt.shiftPoint(m,h,(x+1)*4),R=this.transitionsBetween(_,u),B=this.transitionsBetween(T,v);return R<B?(s[0]=u,s[1]=h,s[2]=m,s[3]=v):(s[0]=h,s[1]=m,s[2]=v,s[3]=u),s}correctTopRight(s){let u=s[0],h=s[1],m=s[2],v=s[3],x=this.transitionsBetween(u,v),_=this.transitionsBetween(h,v),T=Yt.shiftPoint(u,h,(_+1)*4),R=Yt.shiftPoint(m,h,(x+1)*4);x=this.transitionsBetween(T,v),_=this.transitionsBetween(R,v);let B=new Ge(v.getX()+(m.getX()-h.getX())/(x+1),v.getY()+(m.getY()-h.getY())/(x+1)),V=new Ge(v.getX()+(u.getX()-h.getX())/(_+1),v.getY()+(u.getY()-h.getY())/(_+1));if(!this.isValid(B))return this.isValid(V)?V:null;if(!this.isValid(V))return B;let $=this.transitionsBetween(T,B)+this.transitionsBetween(R,B),Y=this.transitionsBetween(T,V)+this.transitionsBetween(R,V);return $>Y?B:V}shiftToModuleCenter(s){let u=s[0],h=s[1],m=s[2],v=s[3],x=this.transitionsBetween(u,v)+1,_=this.transitionsBetween(m,v)+1,T=Yt.shiftPoint(u,h,_*4),R=Yt.shiftPoint(m,h,x*4);x=this.transitionsBetween(T,v)+1,_=this.transitionsBetween(R,v)+1,(x&1)===1&&(x+=1),(_&1)===1&&(_+=1);let B=(u.getX()+h.getX()+m.getX()+v.getX())/4,V=(u.getY()+h.getY()+m.getY()+v.getY())/4;u=Yt.moveAway(u,B,V),h=Yt.moveAway(h,B,V),m=Yt.moveAway(m,B,V),v=Yt.moveAway(v,B,V);let $,Y;return T=Yt.shiftPoint(u,h,_*4),T=Yt.shiftPoint(T,v,x*4),$=Yt.shiftPoint(h,u,_*4),$=Yt.shiftPoint($,m,x*4),R=Yt.shiftPoint(m,v,_*4),R=Yt.shiftPoint(R,h,x*4),Y=Yt.shiftPoint(v,m,_*4),Y=Yt.shiftPoint(Y,u,x*4),[T,$,R,Y]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,u,h,m,v,x,_){return pi.getInstance().sampleGrid(s,x,_,.5,.5,x-.5,.5,x-.5,_-.5,.5,_-.5,u.getX(),u.getY(),v.getX(),v.getY(),m.getX(),m.getY(),h.getX(),h.getY())}transitionsBetween(s,u){let h=Math.trunc(s.getX()),m=Math.trunc(s.getY()),v=Math.trunc(u.getX()),x=Math.trunc(u.getY()),_=Math.abs(x-m)>Math.abs(v-h);if(_){let re=h;h=m,m=re,re=v,v=x,x=re}let T=Math.abs(v-h),R=Math.abs(x-m),B=-T/2,V=m<x?1:-1,$=h<v?1:-1,Y=0,Q=this.image.get(_?m:h,_?h:m);for(let re=h,oe=m;re!==v;re+=$){let pe=this.image.get(_?oe:re,_?re:oe);if(pe!==Q&&(Y++,Q=pe),B+=R,B>0){if(oe===x)break;oe+=V,B-=T}}return Y}}class yi{constructor(){this.decoder=new Rl}decode(s,u=null){let h,m;if(u!=null&&u.has(H.PURE_BARCODE)){const R=yi.extractPureBits(s.getBlackMatrix());h=this.decoder.decode(R),m=yi.NO_POINTS}else{const R=new Yt(s.getBlackMatrix()).detect();h=this.decoder.decode(R.getBits()),m=R.getPoints()}const v=h.getRawBytes(),x=new Le(h.getText(),v,8*v.length,m,Ne.DATA_MATRIX,P.currentTimeMillis()),_=h.getByteSegments();_!=null&&x.putMetadata(rt.BYTE_SEGMENTS,_);const T=h.getECLevel();return T!=null&&x.putMetadata(rt.ERROR_CORRECTION_LEVEL,T),x}reset(){}static extractPureBits(s){const u=s.getTopLeftOnBit(),h=s.getBottomRightOnBit();if(u==null||h==null)throw new ne;const m=this.moduleSize(u,s);let v=u[1];const x=h[1];let _=u[0];const R=(h[0]-_+1)/m,B=(x-v+1)/m;if(R<=0||B<=0)throw new ne;const V=m/2;v+=V,_+=V;const $=new fe(R,B);for(let Y=0;Y<B;Y++){const Q=v+Y*m;for(let re=0;re<R;re++)s.get(_+re*m,Q)&&$.set(re,Y)}return $}static moduleSize(s,u){const h=u.getWidth();let m=s[0];const v=s[1];for(;m<h&&u.get(m,v);)m++;if(m===h)throw new ne;const x=m-s[0];if(x===0)throw new ne;return x}}yi.NO_POINTS=[];class _g extends Fe{constructor(s=500){super(new yi,s)}}var Ds;(function(j){j[j.L=0]="L",j[j.M=1]="M",j[j.Q=2]="Q",j[j.H=3]="H"})(Ds||(Ds={}));class jt{constructor(s,u,h){this.value=s,this.stringValue=u,this.bits=h,jt.FOR_BITS.set(h,this),jt.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return jt.L;case"M":return jt.M;case"Q":return jt.Q;case"H":return jt.H;default:throw new g(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof jt))return!1;const u=s;return this.value===u.value}static forBits(s){if(s<0||s>=jt.FOR_BITS.size)throw new y;return jt.FOR_BITS.get(s)}}jt.FOR_BITS=new Map,jt.FOR_VALUE=new Map,jt.L=new jt(Ds.L,"L",1),jt.M=new jt(Ds.M,"M",0),jt.Q=new jt(Ds.Q,"Q",3),jt.H=new jt(Ds.H,"H",2);class Jn{constructor(s){this.errorCorrectionLevel=jt.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,u){return F.bitCount(s^u)}static decodeFormatInformation(s,u){const h=Jn.doDecodeFormatInformation(s,u);return h!==null?h:Jn.doDecodeFormatInformation(s^Jn.FORMAT_INFO_MASK_QR,u^Jn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,u){let h=Number.MAX_SAFE_INTEGER,m=0;for(const v of Jn.FORMAT_INFO_DECODE_LOOKUP){const x=v[0];if(x===s||x===u)return new Jn(v[1]);let _=Jn.numBitsDiffering(s,x);_<h&&(m=v[1],h=_),s!==u&&(_=Jn.numBitsDiffering(u,x),_<h&&(m=v[1],h=_))}return h<=3?new Jn(m):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Jn))return!1;const u=s;return this.errorCorrectionLevel===u.errorCorrectionLevel&&this.dataMask===u.dataMask}}Jn.FORMAT_INFO_MASK_QR=21522,Jn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class le{constructor(s,...u){this.ecCodewordsPerBlock=s,this.ecBlocks=u}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const u=this.ecBlocks;for(const h of u)s+=h.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class K{constructor(s,u){this.count=s,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class tt{constructor(s,u,...h){this.versionNumber=s,this.alignmentPatternCenters=u,this.ecBlocks=h;let m=0;const v=h[0].getECCodewordsPerBlock(),x=h[0].getECBlocks();for(const _ of x)m+=_.getCount()*(_.getDataCodewords()+v);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new W;try{return this.getVersionForNumber((s-17)/4)}catch{throw new W}}static getVersionForNumber(s){if(s<1||s>40)throw new y;return tt.VERSIONS[s-1]}static decodeVersionInformation(s){let u=Number.MAX_SAFE_INTEGER,h=0;for(let m=0;m<tt.VERSION_DECODE_INFO.length;m++){const v=tt.VERSION_DECODE_INFO[m];if(v===s)return tt.getVersionForNumber(m+7);const x=Jn.numBitsDiffering(s,v);x<u&&(h=m+7,u=x)}return u<=3?tt.getVersionForNumber(h):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),u=new fe(s);u.setRegion(0,0,9,9),u.setRegion(s-8,0,8,9),u.setRegion(0,s-8,9,8);const h=this.alignmentPatternCenters.length;for(let m=0;m<h;m++){const v=this.alignmentPatternCenters[m]-2;for(let x=0;x<h;x++)m===0&&(x===0||x===h-1)||m===h-1&&x===0||u.setRegion(this.alignmentPatternCenters[x]-2,v,5,5)}return u.setRegion(6,9,1,s-17),u.setRegion(9,6,s-17,1),this.versionNumber>6&&(u.setRegion(s-11,0,3,6),u.setRegion(0,s-11,6,3)),u}toString(){return""+this.versionNumber}}tt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),tt.VERSIONS=[new tt(1,new Int32Array(0),new le(7,new K(1,19)),new le(10,new K(1,16)),new le(13,new K(1,13)),new le(17,new K(1,9))),new tt(2,Int32Array.from([6,18]),new le(10,new K(1,34)),new le(16,new K(1,28)),new le(22,new K(1,22)),new le(28,new K(1,16))),new tt(3,Int32Array.from([6,22]),new le(15,new K(1,55)),new le(26,new K(1,44)),new le(18,new K(2,17)),new le(22,new K(2,13))),new tt(4,Int32Array.from([6,26]),new le(20,new K(1,80)),new le(18,new K(2,32)),new le(26,new K(2,24)),new le(16,new K(4,9))),new tt(5,Int32Array.from([6,30]),new le(26,new K(1,108)),new le(24,new K(2,43)),new le(18,new K(2,15),new K(2,16)),new le(22,new K(2,11),new K(2,12))),new tt(6,Int32Array.from([6,34]),new le(18,new K(2,68)),new le(16,new K(4,27)),new le(24,new K(4,19)),new le(28,new K(4,15))),new tt(7,Int32Array.from([6,22,38]),new le(20,new K(2,78)),new le(18,new K(4,31)),new le(18,new K(2,14),new K(4,15)),new le(26,new K(4,13),new K(1,14))),new tt(8,Int32Array.from([6,24,42]),new le(24,new K(2,97)),new le(22,new K(2,38),new K(2,39)),new le(22,new K(4,18),new K(2,19)),new le(26,new K(4,14),new K(2,15))),new tt(9,Int32Array.from([6,26,46]),new le(30,new K(2,116)),new le(22,new K(3,36),new K(2,37)),new le(20,new K(4,16),new K(4,17)),new le(24,new K(4,12),new K(4,13))),new tt(10,Int32Array.from([6,28,50]),new le(18,new K(2,68),new K(2,69)),new le(26,new K(4,43),new K(1,44)),new le(24,new K(6,19),new K(2,20)),new le(28,new K(6,15),new K(2,16))),new tt(11,Int32Array.from([6,30,54]),new le(20,new K(4,81)),new le(30,new K(1,50),new K(4,51)),new le(28,new K(4,22),new K(4,23)),new le(24,new K(3,12),new K(8,13))),new tt(12,Int32Array.from([6,32,58]),new le(24,new K(2,92),new K(2,93)),new le(22,new K(6,36),new K(2,37)),new le(26,new K(4,20),new K(6,21)),new le(28,new K(7,14),new K(4,15))),new tt(13,Int32Array.from([6,34,62]),new le(26,new K(4,107)),new le(22,new K(8,37),new K(1,38)),new le(24,new K(8,20),new K(4,21)),new le(22,new K(12,11),new K(4,12))),new tt(14,Int32Array.from([6,26,46,66]),new le(30,new K(3,115),new K(1,116)),new le(24,new K(4,40),new K(5,41)),new le(20,new K(11,16),new K(5,17)),new le(24,new K(11,12),new K(5,13))),new tt(15,Int32Array.from([6,26,48,70]),new le(22,new K(5,87),new K(1,88)),new le(24,new K(5,41),new K(5,42)),new le(30,new K(5,24),new K(7,25)),new le(24,new K(11,12),new K(7,13))),new tt(16,Int32Array.from([6,26,50,74]),new le(24,new K(5,98),new K(1,99)),new le(28,new K(7,45),new K(3,46)),new le(24,new K(15,19),new K(2,20)),new le(30,new K(3,15),new K(13,16))),new tt(17,Int32Array.from([6,30,54,78]),new le(28,new K(1,107),new K(5,108)),new le(28,new K(10,46),new K(1,47)),new le(28,new K(1,22),new K(15,23)),new le(28,new K(2,14),new K(17,15))),new tt(18,Int32Array.from([6,30,56,82]),new le(30,new K(5,120),new K(1,121)),new le(26,new K(9,43),new K(4,44)),new le(28,new K(17,22),new K(1,23)),new le(28,new K(2,14),new K(19,15))),new tt(19,Int32Array.from([6,30,58,86]),new le(28,new K(3,113),new K(4,114)),new le(26,new K(3,44),new K(11,45)),new le(26,new K(17,21),new K(4,22)),new le(26,new K(9,13),new K(16,14))),new tt(20,Int32Array.from([6,34,62,90]),new le(28,new K(3,107),new K(5,108)),new le(26,new K(3,41),new K(13,42)),new le(30,new K(15,24),new K(5,25)),new le(28,new K(15,15),new K(10,16))),new tt(21,Int32Array.from([6,28,50,72,94]),new le(28,new K(4,116),new K(4,117)),new le(26,new K(17,42)),new le(28,new K(17,22),new K(6,23)),new le(30,new K(19,16),new K(6,17))),new tt(22,Int32Array.from([6,26,50,74,98]),new le(28,new K(2,111),new K(7,112)),new le(28,new K(17,46)),new le(30,new K(7,24),new K(16,25)),new le(24,new K(34,13))),new tt(23,Int32Array.from([6,30,54,78,102]),new le(30,new K(4,121),new K(5,122)),new le(28,new K(4,47),new K(14,48)),new le(30,new K(11,24),new K(14,25)),new le(30,new K(16,15),new K(14,16))),new tt(24,Int32Array.from([6,28,54,80,106]),new le(30,new K(6,117),new K(4,118)),new le(28,new K(6,45),new K(14,46)),new le(30,new K(11,24),new K(16,25)),new le(30,new K(30,16),new K(2,17))),new tt(25,Int32Array.from([6,32,58,84,110]),new le(26,new K(8,106),new K(4,107)),new le(28,new K(8,47),new K(13,48)),new le(30,new K(7,24),new K(22,25)),new le(30,new K(22,15),new K(13,16))),new tt(26,Int32Array.from([6,30,58,86,114]),new le(28,new K(10,114),new K(2,115)),new le(28,new K(19,46),new K(4,47)),new le(28,new K(28,22),new K(6,23)),new le(30,new K(33,16),new K(4,17))),new tt(27,Int32Array.from([6,34,62,90,118]),new le(30,new K(8,122),new K(4,123)),new le(28,new K(22,45),new K(3,46)),new le(30,new K(8,23),new K(26,24)),new le(30,new K(12,15),new K(28,16))),new tt(28,Int32Array.from([6,26,50,74,98,122]),new le(30,new K(3,117),new K(10,118)),new le(28,new K(3,45),new K(23,46)),new le(30,new K(4,24),new K(31,25)),new le(30,new K(11,15),new K(31,16))),new tt(29,Int32Array.from([6,30,54,78,102,126]),new le(30,new K(7,116),new K(7,117)),new le(28,new K(21,45),new K(7,46)),new le(30,new K(1,23),new K(37,24)),new le(30,new K(19,15),new K(26,16))),new tt(30,Int32Array.from([6,26,52,78,104,130]),new le(30,new K(5,115),new K(10,116)),new le(28,new K(19,47),new K(10,48)),new le(30,new K(15,24),new K(25,25)),new le(30,new K(23,15),new K(25,16))),new tt(31,Int32Array.from([6,30,56,82,108,134]),new le(30,new K(13,115),new K(3,116)),new le(28,new K(2,46),new K(29,47)),new le(30,new K(42,24),new K(1,25)),new le(30,new K(23,15),new K(28,16))),new tt(32,Int32Array.from([6,34,60,86,112,138]),new le(30,new K(17,115)),new le(28,new K(10,46),new K(23,47)),new le(30,new K(10,24),new K(35,25)),new le(30,new K(19,15),new K(35,16))),new tt(33,Int32Array.from([6,30,58,86,114,142]),new le(30,new K(17,115),new K(1,116)),new le(28,new K(14,46),new K(21,47)),new le(30,new K(29,24),new K(19,25)),new le(30,new K(11,15),new K(46,16))),new tt(34,Int32Array.from([6,34,62,90,118,146]),new le(30,new K(13,115),new K(6,116)),new le(28,new K(14,46),new K(23,47)),new le(30,new K(44,24),new K(7,25)),new le(30,new K(59,16),new K(1,17))),new tt(35,Int32Array.from([6,30,54,78,102,126,150]),new le(30,new K(12,121),new K(7,122)),new le(28,new K(12,47),new K(26,48)),new le(30,new K(39,24),new K(14,25)),new le(30,new K(22,15),new K(41,16))),new tt(36,Int32Array.from([6,24,50,76,102,128,154]),new le(30,new K(6,121),new K(14,122)),new le(28,new K(6,47),new K(34,48)),new le(30,new K(46,24),new K(10,25)),new le(30,new K(2,15),new K(64,16))),new tt(37,Int32Array.from([6,28,54,80,106,132,158]),new le(30,new K(17,122),new K(4,123)),new le(28,new K(29,46),new K(14,47)),new le(30,new K(49,24),new K(10,25)),new le(30,new K(24,15),new K(46,16))),new tt(38,Int32Array.from([6,32,58,84,110,136,162]),new le(30,new K(4,122),new K(18,123)),new le(28,new K(13,46),new K(32,47)),new le(30,new K(48,24),new K(14,25)),new le(30,new K(42,15),new K(32,16))),new tt(39,Int32Array.from([6,26,54,82,110,138,166]),new le(30,new K(20,117),new K(4,118)),new le(28,new K(40,47),new K(7,48)),new le(30,new K(43,24),new K(22,25)),new le(30,new K(10,15),new K(67,16))),new tt(40,Int32Array.from([6,30,58,86,114,142,170]),new le(30,new K(19,118),new K(6,119)),new le(28,new K(18,47),new K(31,48)),new le(30,new K(34,24),new K(34,25)),new le(30,new K(20,15),new K(61,16)))];var Sn;(function(j){j[j.DATA_MASK_000=0]="DATA_MASK_000",j[j.DATA_MASK_001=1]="DATA_MASK_001",j[j.DATA_MASK_010=2]="DATA_MASK_010",j[j.DATA_MASK_011=3]="DATA_MASK_011",j[j.DATA_MASK_100=4]="DATA_MASK_100",j[j.DATA_MASK_101=5]="DATA_MASK_101",j[j.DATA_MASK_110=6]="DATA_MASK_110",j[j.DATA_MASK_111=7]="DATA_MASK_111"})(Sn||(Sn={}));class yt{constructor(s,u){this.value=s,this.isMasked=u}unmaskBitMatrix(s,u){for(let h=0;h<u;h++)for(let m=0;m<u;m++)this.isMasked(h,m)&&s.flip(m,h)}}yt.values=new Map([[Sn.DATA_MASK_000,new yt(Sn.DATA_MASK_000,(j,s)=>(j+s&1)===0)],[Sn.DATA_MASK_001,new yt(Sn.DATA_MASK_001,(j,s)=>(j&1)===0)],[Sn.DATA_MASK_010,new yt(Sn.DATA_MASK_010,(j,s)=>s%3===0)],[Sn.DATA_MASK_011,new yt(Sn.DATA_MASK_011,(j,s)=>(j+s)%3===0)],[Sn.DATA_MASK_100,new yt(Sn.DATA_MASK_100,(j,s)=>(Math.floor(j/2)+Math.floor(s/3)&1)===0)],[Sn.DATA_MASK_101,new yt(Sn.DATA_MASK_101,(j,s)=>j*s%6===0)],[Sn.DATA_MASK_110,new yt(Sn.DATA_MASK_110,(j,s)=>j*s%6<3)],[Sn.DATA_MASK_111,new yt(Sn.DATA_MASK_111,(j,s)=>(j+s+j*s%3&1)===0)]]);class sf{constructor(s){const u=s.getHeight();if(u<21||(u&3)!==1)throw new W;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let v=0;v<6;v++)s=this.copyBit(v,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let v=5;v>=0;v--)s=this.copyBit(8,v,s);const u=this.bitMatrix.getHeight();let h=0;const m=u-7;for(let v=u-1;v>=m;v--)h=this.copyBit(8,v,h);for(let v=u-8;v<u;v++)h=this.copyBit(v,8,h);if(this.parsedFormatInfo=Jn.decodeFormatInformation(s,h),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),u=Math.floor((s-17)/4);if(u<=6)return tt.getVersionForNumber(u);let h=0;const m=s-11;for(let x=5;x>=0;x--)for(let _=s-9;_>=m;_--)h=this.copyBit(_,x,h);let v=tt.decodeVersionInformation(h);if(v!==null&&v.getDimensionForVersion()===s)return this.parsedVersion=v,v;h=0;for(let x=5;x>=0;x--)for(let _=s-9;_>=m;_--)h=this.copyBit(x,_,h);if(v=tt.decodeVersionInformation(h),v!==null&&v.getDimensionForVersion()===s)return this.parsedVersion=v,v;throw new W}copyBit(s,u,h){return(this.isMirror?this.bitMatrix.get(u,s):this.bitMatrix.get(s,u))?h<<1|1:h<<1}readCodewords(){const s=this.readFormatInformation(),u=this.readVersion(),h=yt.values.get(s.getDataMask()),m=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,m);const v=u.buildFunctionPattern();let x=!0;const _=new Uint8Array(u.getTotalCodewords());let T=0,R=0,B=0;for(let V=m-1;V>0;V-=2){V===6&&V--;for(let $=0;$<m;$++){const Y=x?m-1-$:$;for(let Q=0;Q<2;Q++)v.get(V-Q,Y)||(B++,R<<=1,this.bitMatrix.get(V-Q,Y)&&(R|=1),B===8&&(_[T++]=R,B=0,R=0))}x=!x}if(T!==u.getTotalCodewords())throw new W;return _}remask(){if(this.parsedFormatInfo===null)return;const s=yt.values[this.parsedFormatInfo.getDataMask()],u=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,u)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let u=0,h=s.getWidth();u<h;u++)for(let m=u+1,v=s.getHeight();m<v;m++)s.get(u,m)!==s.get(m,u)&&(s.flip(m,u),s.flip(u,m))}}class Ol{constructor(s,u){this.numDataCodewords=s,this.codewords=u}static getDataBlocks(s,u,h){if(s.length!==u.getTotalCodewords())throw new y;const m=u.getECBlocksForLevel(h);let v=0;const x=m.getECBlocks();for(const Q of x)v+=Q.getCount();const _=new Array(v);let T=0;for(const Q of x)for(let re=0;re<Q.getCount();re++){const oe=Q.getDataCodewords(),pe=m.getECCodewordsPerBlock()+oe;_[T++]=new Ol(oe,new Uint8Array(pe))}const R=_[0].codewords.length;let B=_.length-1;for(;B>=0&&_[B].codewords.length!==R;)B--;B++;const V=R-m.getECCodewordsPerBlock();let $=0;for(let Q=0;Q<V;Q++)for(let re=0;re<T;re++)_[re].codewords[Q]=s[$++];for(let Q=B;Q<T;Q++)_[Q].codewords[V]=s[$++];const Y=_[0].codewords.length;for(let Q=V;Q<Y;Q++)for(let re=0;re<T;re++){const oe=re<B?Q:Q+1;_[re].codewords[oe]=s[$++]}return _}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var kr;(function(j){j[j.TERMINATOR=0]="TERMINATOR",j[j.NUMERIC=1]="NUMERIC",j[j.ALPHANUMERIC=2]="ALPHANUMERIC",j[j.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",j[j.BYTE=4]="BYTE",j[j.ECI=5]="ECI",j[j.KANJI=6]="KANJI",j[j.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",j[j.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",j[j.HANZI=9]="HANZI"})(kr||(kr={}));class nt{constructor(s,u,h,m){this.value=s,this.stringValue=u,this.characterCountBitsForVersions=h,this.bits=m,nt.FOR_BITS.set(m,this),nt.FOR_VALUE.set(s,this)}static forBits(s){const u=nt.FOR_BITS.get(s);if(u===void 0)throw new y;return u}getCharacterCountBits(s){const u=s.getVersionNumber();let h;return u<=9?h=0:u<=26?h=1:h=2,this.characterCountBitsForVersions[h]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof nt))return!1;const u=s;return this.value===u.value}toString(){return this.stringValue}}nt.FOR_BITS=new Map,nt.FOR_VALUE=new Map,nt.TERMINATOR=new nt(kr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),nt.NUMERIC=new nt(kr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),nt.ALPHANUMERIC=new nt(kr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),nt.STRUCTURED_APPEND=new nt(kr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),nt.BYTE=new nt(kr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),nt.ECI=new nt(kr.ECI,"ECI",Int32Array.from([0,0,0]),7),nt.KANJI=new nt(kr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),nt.FNC1_FIRST_POSITION=new nt(kr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),nt.FNC1_SECOND_POSITION=new nt(kr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),nt.HANZI=new nt(kr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class tn{static decode(s,u,h,m){const v=new uc(s);let x=new be;const _=new Array;let T=-1,R=-1;try{let B=null,V=!1,$;do{if(v.available()<4)$=nt.TERMINATOR;else{const Y=v.readBits(4);$=nt.forBits(Y)}switch($){case nt.TERMINATOR:break;case nt.FNC1_FIRST_POSITION:case nt.FNC1_SECOND_POSITION:V=!0;break;case nt.STRUCTURED_APPEND:if(v.available()<16)throw new W;T=v.readBits(8),R=v.readBits(8);break;case nt.ECI:const Y=tn.parseECIValue(v);if(B=X.getCharacterSetECIByValue(Y),B===null)throw new W;break;case nt.HANZI:const Q=v.readBits(4),re=v.readBits($.getCharacterCountBits(u));Q===tn.GB2312_SUBSET&&tn.decodeHanziSegment(v,x,re);break;default:const oe=v.readBits($.getCharacterCountBits(u));switch($){case nt.NUMERIC:tn.decodeNumericSegment(v,x,oe);break;case nt.ALPHANUMERIC:tn.decodeAlphanumericSegment(v,x,oe,V);break;case nt.BYTE:tn.decodeByteSegment(v,x,oe,B,_,m);break;case nt.KANJI:tn.decodeKanjiSegment(v,x,oe);break;default:throw new W}break}}while($!==nt.TERMINATOR)}catch{throw new W}return new Ee(s,x.toString(),_.length===0?null:_,h===null?null:h.toString(),T,R)}static decodeHanziSegment(s,u,h){if(h*13>s.available())throw new W;const m=new Uint8Array(2*h);let v=0;for(;h>0;){const x=s.readBits(13);let _=x/96<<8&4294967295|x%96;_<959?_+=41377:_+=42657,m[v]=_>>8&255,m[v+1]=_&255,v+=2,h--}try{u.append(se.decode(m,ae.GB2312))}catch(x){throw new W(x)}}static decodeKanjiSegment(s,u,h){if(h*13>s.available())throw new W;const m=new Uint8Array(2*h);let v=0;for(;h>0;){const x=s.readBits(13);let _=x/192<<8&4294967295|x%192;_<7936?_+=33088:_+=49472,m[v]=_>>8,m[v+1]=_,v+=2,h--}try{u.append(se.decode(m,ae.SHIFT_JIS))}catch(x){throw new W(x)}}static decodeByteSegment(s,u,h,m,v,x){if(8*h>s.available())throw new W;const _=new Uint8Array(h);for(let R=0;R<h;R++)_[R]=s.readBits(8);let T;m===null?T=ae.guessEncoding(_,x):T=m.getName();try{u.append(se.decode(_,T))}catch(R){throw new W(R)}v.push(_)}static toAlphaNumericChar(s){if(s>=tn.ALPHANUMERIC_CHARS.length)throw new W;return tn.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,u,h,m){const v=u.length();for(;h>1;){if(s.available()<11)throw new W;const x=s.readBits(11);u.append(tn.toAlphaNumericChar(Math.floor(x/45))),u.append(tn.toAlphaNumericChar(x%45)),h-=2}if(h===1){if(s.available()<6)throw new W;u.append(tn.toAlphaNumericChar(s.readBits(6)))}if(m)for(let x=v;x<u.length();x++)u.charAt(x)==="%"&&(x<u.length()-1&&u.charAt(x+1)==="%"?u.deleteCharAt(x+1):u.setCharAt(x,""))}static decodeNumericSegment(s,u,h){for(;h>=3;){if(s.available()<10)throw new W;const m=s.readBits(10);if(m>=1e3)throw new W;u.append(tn.toAlphaNumericChar(Math.floor(m/100))),u.append(tn.toAlphaNumericChar(Math.floor(m/10)%10)),u.append(tn.toAlphaNumericChar(m%10)),h-=3}if(h===2){if(s.available()<7)throw new W;const m=s.readBits(7);if(m>=100)throw new W;u.append(tn.toAlphaNumericChar(Math.floor(m/10))),u.append(tn.toAlphaNumericChar(m%10))}else if(h===1){if(s.available()<4)throw new W;const m=s.readBits(4);if(m>=10)throw new W;u.append(tn.toAlphaNumericChar(m))}}static parseECIValue(s){const u=s.readBits(8);if((u&128)===0)return u&127;if((u&192)===128){const h=s.readBits(8);return(u&63)<<8&4294967295|h}if((u&224)===192){const h=s.readBits(16);return(u&31)<<16&4294967295|h}throw new W}}tn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",tn.GB2312_SUBSET=1;class cc{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const u=s[0];s[0]=s[2],s[2]=u}}class dc{constructor(){this.rsDecoder=new Cn(Ke.QR_CODE_FIELD_256)}decodeBooleanArray(s,u){return this.decodeBitMatrix(fe.parseFromBooleanArray(s),u)}decodeBitMatrix(s,u){const h=new sf(s);let m=null;try{return this.decodeBitMatrixParser(h,u)}catch(v){m=v}try{h.remask(),h.setMirror(!0),h.readVersion(),h.readFormatInformation(),h.mirror();const v=this.decodeBitMatrixParser(h,u);return v.setOther(new cc(!0)),v}catch(v){throw m!==null?m:v}}decodeBitMatrixParser(s,u){const h=s.readVersion(),m=s.readFormatInformation().getErrorCorrectionLevel(),v=s.readCodewords(),x=Ol.getDataBlocks(v,h,m);let _=0;for(const B of x)_+=B.getNumDataCodewords();const T=new Uint8Array(_);let R=0;for(const B of x){const V=B.getCodewords(),$=B.getNumDataCodewords();this.correctErrors(V,$);for(let Y=0;Y<$;Y++)T[R++]=V[Y]}return tn.decode(T,h,m,u)}correctErrors(s,u){const h=new Int32Array(s);try{this.rsDecoder.decode(h,s.length-u)}catch{throw new C}for(let m=0;m<u;m++)s[m]=h[m]}}class Ls extends Ge{constructor(s,u,h){super(s,u),this.estimatedModuleSize=h}aboutEquals(s,u,h){if(Math.abs(u-this.getY())<=s&&Math.abs(h-this.getX())<=s){const m=Math.abs(s-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(s,u,h){const m=(this.getX()+u)/2,v=(this.getY()+s)/2,x=(this.estimatedModuleSize+h)/2;return new Ls(m,v,x)}}class xi{constructor(s,u,h,m,v,x,_){this.image=s,this.startX=u,this.startY=h,this.width=m,this.height=v,this.moduleSize=x,this.resultPointCallback=_,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,u=this.height,h=this.width,m=s+h,v=this.startY+u/2,x=new Int32Array(3),_=this.image;for(let T=0;T<u;T++){const R=v+((T&1)===0?Math.floor((T+1)/2):-Math.floor((T+1)/2));x[0]=0,x[1]=0,x[2]=0;let B=s;for(;B<m&&!_.get(B,R);)B++;let V=0;for(;B<m;){if(_.get(B,R))if(V===1)x[1]++;else if(V===2){if(this.foundPatternCross(x)){const $=this.handlePossibleCenter(x,R,B);if($!==null)return $}x[0]=x[2],x[1]=1,x[2]=0,V=1}else x[++V]++;else V===1&&V++,x[V]++;B++}if(this.foundPatternCross(x)){const $=this.handlePossibleCenter(x,R,m);if($!==null)return $}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ne}static centerFromEnd(s,u){return u-s[2]-s[1]/2}foundPatternCross(s){const u=this.moduleSize,h=u/2;for(let m=0;m<3;m++)if(Math.abs(u-s[m])>=h)return!1;return!0}crossCheckVertical(s,u,h,m){const v=this.image,x=v.getHeight(),_=this.crossCheckStateCount;_[0]=0,_[1]=0,_[2]=0;let T=s;for(;T>=0&&v.get(u,T)&&_[1]<=h;)_[1]++,T--;if(T<0||_[1]>h)return NaN;for(;T>=0&&!v.get(u,T)&&_[0]<=h;)_[0]++,T--;if(_[0]>h)return NaN;for(T=s+1;T<x&&v.get(u,T)&&_[1]<=h;)_[1]++,T++;if(T===x||_[1]>h)return NaN;for(;T<x&&!v.get(u,T)&&_[2]<=h;)_[2]++,T++;if(_[2]>h)return NaN;const R=_[0]+_[1]+_[2];return 5*Math.abs(R-m)>=2*m?NaN:this.foundPatternCross(_)?xi.centerFromEnd(_,T):NaN}handlePossibleCenter(s,u,h){const m=s[0]+s[1]+s[2],v=xi.centerFromEnd(s,h),x=this.crossCheckVertical(u,v,2*s[1],m);if(!isNaN(x)){const _=(s[0]+s[1]+s[2])/3;for(const R of this.possibleCenters)if(R.aboutEquals(_,x,v))return R.combineEstimate(x,v,_);const T=new Ls(v,x,_);this.possibleCenters.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return null}}class Fi extends Ge{constructor(s,u,h,m){super(s,u),this.estimatedModuleSize=h,this.count=m,m===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,u,h){if(Math.abs(u-this.getY())<=s&&Math.abs(h-this.getX())<=s){const m=Math.abs(s-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(s,u,h){const m=this.count+1,v=(this.count*this.getX()+u)/m,x=(this.count*this.getY()+s)/m,_=(this.count*this.estimatedModuleSize+h)/m;return new Fi(v,x,_,m)}}class No{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class fn{constructor(s,u){this.image=s,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=u}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const u=s!=null&&s.get(H.TRY_HARDER)!==void 0,h=s!=null&&s.get(H.PURE_BARCODE)!==void 0,m=this.image,v=m.getHeight(),x=m.getWidth();let _=Math.floor(3*v/(4*fn.MAX_MODULES));(_<fn.MIN_SKIP||u)&&(_=fn.MIN_SKIP);let T=!1;const R=new Int32Array(5);for(let V=_-1;V<v&&!T;V+=_){R[0]=0,R[1]=0,R[2]=0,R[3]=0,R[4]=0;let $=0;for(let Y=0;Y<x;Y++)if(m.get(Y,V))($&1)===1&&$++,R[$]++;else if(($&1)===0)if($===4)if(fn.foundPatternCross(R)){if(this.handlePossibleCenter(R,V,Y,h)===!0)if(_=2,this.hasSkipped===!0)T=this.haveMultiplyConfirmedCenters();else{const re=this.findRowSkip();re>R[2]&&(V+=re-R[2]-_,Y=x-1)}else{R[0]=R[2],R[1]=R[3],R[2]=R[4],R[3]=1,R[4]=0,$=3;continue}$=0,R[0]=0,R[1]=0,R[2]=0,R[3]=0,R[4]=0}else R[0]=R[2],R[1]=R[3],R[2]=R[4],R[3]=1,R[4]=0,$=3;else R[++$]++;else R[$]++;fn.foundPatternCross(R)&&this.handlePossibleCenter(R,V,x,h)===!0&&(_=R[0],this.hasSkipped&&(T=this.haveMultiplyConfirmedCenters()))}const B=this.selectBestPatterns();return Ge.orderBestPatterns(B),new No(B)}static centerFromEnd(s,u){return u-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let u=0;for(let v=0;v<5;v++){const x=s[v];if(x===0)return!1;u+=x}if(u<7)return!1;const h=u/7,m=h/2;return Math.abs(h-s[0])<m&&Math.abs(h-s[1])<m&&Math.abs(3*h-s[2])<3*m&&Math.abs(h-s[3])<m&&Math.abs(h-s[4])<m}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,u,h,m){const v=this.getCrossCheckStateCount();let x=0;const _=this.image;for(;s>=x&&u>=x&&_.get(u-x,s-x);)v[2]++,x++;if(s<x||u<x)return!1;for(;s>=x&&u>=x&&!_.get(u-x,s-x)&&v[1]<=h;)v[1]++,x++;if(s<x||u<x||v[1]>h)return!1;for(;s>=x&&u>=x&&_.get(u-x,s-x)&&v[0]<=h;)v[0]++,x++;if(v[0]>h)return!1;const T=_.getHeight(),R=_.getWidth();for(x=1;s+x<T&&u+x<R&&_.get(u+x,s+x);)v[2]++,x++;if(s+x>=T||u+x>=R)return!1;for(;s+x<T&&u+x<R&&!_.get(u+x,s+x)&&v[3]<h;)v[3]++,x++;if(s+x>=T||u+x>=R||v[3]>=h)return!1;for(;s+x<T&&u+x<R&&_.get(u+x,s+x)&&v[4]<h;)v[4]++,x++;if(v[4]>=h)return!1;const B=v[0]+v[1]+v[2]+v[3]+v[4];return Math.abs(B-m)<2*m&&fn.foundPatternCross(v)}crossCheckVertical(s,u,h,m){const v=this.image,x=v.getHeight(),_=this.getCrossCheckStateCount();let T=s;for(;T>=0&&v.get(u,T);)_[2]++,T--;if(T<0)return NaN;for(;T>=0&&!v.get(u,T)&&_[1]<=h;)_[1]++,T--;if(T<0||_[1]>h)return NaN;for(;T>=0&&v.get(u,T)&&_[0]<=h;)_[0]++,T--;if(_[0]>h)return NaN;for(T=s+1;T<x&&v.get(u,T);)_[2]++,T++;if(T===x)return NaN;for(;T<x&&!v.get(u,T)&&_[3]<h;)_[3]++,T++;if(T===x||_[3]>=h)return NaN;for(;T<x&&v.get(u,T)&&_[4]<h;)_[4]++,T++;if(_[4]>=h)return NaN;const R=_[0]+_[1]+_[2]+_[3]+_[4];return 5*Math.abs(R-m)>=2*m?NaN:fn.foundPatternCross(_)?fn.centerFromEnd(_,T):NaN}crossCheckHorizontal(s,u,h,m){const v=this.image,x=v.getWidth(),_=this.getCrossCheckStateCount();let T=s;for(;T>=0&&v.get(T,u);)_[2]++,T--;if(T<0)return NaN;for(;T>=0&&!v.get(T,u)&&_[1]<=h;)_[1]++,T--;if(T<0||_[1]>h)return NaN;for(;T>=0&&v.get(T,u)&&_[0]<=h;)_[0]++,T--;if(_[0]>h)return NaN;for(T=s+1;T<x&&v.get(T,u);)_[2]++,T++;if(T===x)return NaN;for(;T<x&&!v.get(T,u)&&_[3]<h;)_[3]++,T++;if(T===x||_[3]>=h)return NaN;for(;T<x&&v.get(T,u)&&_[4]<h;)_[4]++,T++;if(_[4]>=h)return NaN;const R=_[0]+_[1]+_[2]+_[3]+_[4];return 5*Math.abs(R-m)>=m?NaN:fn.foundPatternCross(_)?fn.centerFromEnd(_,T):NaN}handlePossibleCenter(s,u,h,m){const v=s[0]+s[1]+s[2]+s[3]+s[4];let x=fn.centerFromEnd(s,h),_=this.crossCheckVertical(u,Math.floor(x),s[2],v);if(!isNaN(_)&&(x=this.crossCheckHorizontal(Math.floor(x),Math.floor(_),s[2],v),!isNaN(x)&&(!m||this.crossCheckDiagonal(Math.floor(_),Math.floor(x),s[2],v)))){const T=v/7;let R=!1;const B=this.possibleCenters;for(let V=0,$=B.length;V<$;V++){const Y=B[V];if(Y.aboutEquals(T,_,x)){B[V]=Y.combineEstimate(_,x,T),R=!0;break}}if(!R){const V=new Fi(x,_,T);B.push(V),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(V)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let u=null;for(const h of this.possibleCenters)if(h.getCount()>=fn.CENTER_QUORUM)if(u==null)u=h;else return this.hasSkipped=!0,Math.floor((Math.abs(u.getX()-h.getX())-Math.abs(u.getY()-h.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,u=0;const h=this.possibleCenters.length;for(const x of this.possibleCenters)x.getCount()>=fn.CENTER_QUORUM&&(s++,u+=x.getEstimatedModuleSize());if(s<3)return!1;const m=u/h;let v=0;for(const x of this.possibleCenters)v+=Math.abs(x.getEstimatedModuleSize()-m);return v<=.05*u}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new ne;const u=this.possibleCenters;let h;if(s>3){let m=0,v=0;for(const T of this.possibleCenters){const R=T.getEstimatedModuleSize();m+=R,v+=R*R}h=m/s;let x=Math.sqrt(v/s-h*h);u.sort((T,R)=>{const B=Math.abs(R.getEstimatedModuleSize()-h),V=Math.abs(T.getEstimatedModuleSize()-h);return B<V?-1:B>V?1:0});const _=Math.max(.2*h,x);for(let T=0;T<u.length&&u.length>3;T++){const R=u[T];Math.abs(R.getEstimatedModuleSize()-h)>_&&(u.splice(T,1),T--)}}if(u.length>3){let m=0;for(const v of u)m+=v.getEstimatedModuleSize();h=m/u.length,u.sort((v,x)=>{if(x.getCount()===v.getCount()){const _=Math.abs(x.getEstimatedModuleSize()-h),T=Math.abs(v.getEstimatedModuleSize()-h);return _<T?1:_>T?-1:0}else return x.getCount()-v.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]}}fn.CENTER_QUORUM=2,fn.MIN_SKIP=3,fn.MAX_MODULES=57;class oo{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(H.NEED_RESULT_POINT_CALLBACK);const h=new fn(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(h)}processFinderPatternInfo(s){const u=s.getTopLeft(),h=s.getTopRight(),m=s.getBottomLeft(),v=this.calculateModuleSize(u,h,m);if(v<1)throw new ne("No pattern found in proccess finder.");const x=oo.computeDimension(u,h,m,v),_=tt.getProvisionalVersionForDimension(x),T=_.getDimensionForVersion()-7;let R=null;if(_.getAlignmentPatternCenters().length>0){const Y=h.getX()-u.getX()+m.getX(),Q=h.getY()-u.getY()+m.getY(),re=1-3/T,oe=Math.floor(u.getX()+re*(Y-u.getX())),pe=Math.floor(u.getY()+re*(Q-u.getY()));for(let Oe=4;Oe<=16;Oe<<=1)try{R=this.findAlignmentInRegion(v,oe,pe,Oe);break}catch(ke){if(!(ke instanceof ne))throw ke}}const B=oo.createTransform(u,h,m,R,x),V=oo.sampleGrid(this.image,B,x);let $;return R===null?$=[m,u,h]:$=[m,u,h,R],new Rs(V,$)}static createTransform(s,u,h,m,v){const x=v-3.5;let _,T,R,B;return m!==null?(_=m.getX(),T=m.getY(),R=x-3,B=R):(_=u.getX()-s.getX()+h.getX(),T=u.getY()-s.getY()+h.getY(),R=x,B=x),Zr.quadrilateralToQuadrilateral(3.5,3.5,x,3.5,R,B,3.5,x,s.getX(),s.getY(),u.getX(),u.getY(),_,T,h.getX(),h.getY())}static sampleGrid(s,u,h){return pi.getInstance().sampleGridWithTransform(s,h,h,u)}static computeDimension(s,u,h,m){const v=_t.round(Ge.distance(s,u)/m),x=_t.round(Ge.distance(s,h)/m);let _=Math.floor((v+x)/2)+7;switch(_&3){case 0:_++;break;case 2:_--;break;case 3:throw new ne("Dimensions could be not found.")}return _}calculateModuleSize(s,u,h){return(this.calculateModuleSizeOneWay(s,u)+this.calculateModuleSizeOneWay(s,h))/2}calculateModuleSizeOneWay(s,u){const h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(u.getX()),Math.floor(u.getY())),m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(h)?m/7:isNaN(m)?h/7:(h+m)/14}sizeOfBlackWhiteBlackRunBothWays(s,u,h,m){let v=this.sizeOfBlackWhiteBlackRun(s,u,h,m),x=1,_=s-(h-s);_<0?(x=s/(s-_),_=0):_>=this.image.getWidth()&&(x=(this.image.getWidth()-1-s)/(_-s),_=this.image.getWidth()-1);let T=Math.floor(u-(m-u)*x);return x=1,T<0?(x=u/(u-T),T=0):T>=this.image.getHeight()&&(x=(this.image.getHeight()-1-u)/(T-u),T=this.image.getHeight()-1),_=Math.floor(s+(_-s)*x),v+=this.sizeOfBlackWhiteBlackRun(s,u,_,T),v-1}sizeOfBlackWhiteBlackRun(s,u,h,m){const v=Math.abs(m-u)>Math.abs(h-s);if(v){let Y=s;s=u,u=Y,Y=h,h=m,m=Y}const x=Math.abs(h-s),_=Math.abs(m-u);let T=-x/2;const R=s<h?1:-1,B=u<m?1:-1;let V=0;const $=h+R;for(let Y=s,Q=u;Y!==$;Y+=R){const re=v?Q:Y,oe=v?Y:Q;if(V===1===this.image.get(re,oe)){if(V===2)return _t.distance(Y,Q,s,u);V++}if(T+=_,T>0){if(Q===m)break;Q+=B,T-=x}}return V===2?_t.distance(h+R,m,s,u):NaN}findAlignmentInRegion(s,u,h,m){const v=Math.floor(m*s),x=Math.max(0,u-v),_=Math.min(this.image.getWidth()-1,u+v);if(_-x<s*3)throw new ne("Alignment top exceeds estimated module size.");const T=Math.max(0,h-v),R=Math.min(this.image.getHeight()-1,h+v);if(R-T<s*3)throw new ne("Alignment bottom exceeds estimated module size.");return new xi(this.image,x,T,_-x,R-T,s,this.resultPointCallback).find()}}class Er{constructor(){this.decoder=new dc}getDecoder(){return this.decoder}decode(s,u){let h,m;if(u!=null&&u.get(H.PURE_BARCODE)!==void 0){const T=Er.extractPureBits(s.getBlackMatrix());h=this.decoder.decodeBitMatrix(T,u),m=Er.NO_POINTS}else{const T=new oo(s.getBlackMatrix()).detect(u);h=this.decoder.decodeBitMatrix(T.getBits(),u),m=T.getPoints()}h.getOther()instanceof cc&&h.getOther().applyMirroredCorrection(m);const v=new Le(h.getText(),h.getRawBytes(),void 0,m,Ne.QR_CODE,void 0),x=h.getByteSegments();x!==null&&v.putMetadata(rt.BYTE_SEGMENTS,x);const _=h.getECLevel();return _!==null&&v.putMetadata(rt.ERROR_CORRECTION_LEVEL,_),h.hasStructuredAppend()&&(v.putMetadata(rt.STRUCTURED_APPEND_SEQUENCE,h.getStructuredAppendSequenceNumber()),v.putMetadata(rt.STRUCTURED_APPEND_PARITY,h.getStructuredAppendParity())),v}reset(){}static extractPureBits(s){const u=s.getTopLeftOnBit(),h=s.getBottomRightOnBit();if(u===null||h===null)throw new ne;const m=this.moduleSize(u,s);let v=u[1],x=h[1],_=u[0],T=h[0];if(_>=T||v>=x)throw new ne;if(x-v!==T-_&&(T=_+(x-v),T>=s.getWidth()))throw new ne;const R=Math.round((T-_+1)/m),B=Math.round((x-v+1)/m);if(R<=0||B<=0)throw new ne;if(B!==R)throw new ne;const V=Math.floor(m/2);v+=V,_+=V;const $=_+Math.floor((R-1)*m)-T;if($>0){if($>V)throw new ne;_-=$}const Y=v+Math.floor((B-1)*m)-x;if(Y>0){if(Y>V)throw new ne;v-=Y}const Q=new fe(R,B);for(let re=0;re<B;re++){const oe=v+Math.floor(re*m);for(let pe=0;pe<R;pe++)s.get(_+Math.floor(pe*m),oe)&&Q.set(pe,re)}return Q}static moduleSize(s,u){const h=u.getHeight(),m=u.getWidth();let v=s[0],x=s[1],_=!0,T=0;for(;v<m&&x<h;){if(_!==u.get(v,x)){if(++T===5)break;_=!_}v++,x++}if(v===m||x===h)throw new ne;return(v-s[0])/7}}Er.NO_POINTS=new Array;class at{PDF417Common(){}static getBitCountSum(s){return _t.sum(s)}static toIntArray(s){if(s==null||!s.length)return at.EMPTY_INT_ARRAY;const u=new Int32Array(s.length);let h=0;for(const m of s)u[h++]=m;return u}static getCodeword(s){const u=U.binarySearch(at.SYMBOL_TABLE,s&262143);return u<0?-1:(at.CODEWORD_TABLE[u]-1)%at.NUMBER_OF_CODEWORDS}}at.NUMBER_OF_CODEWORDS=929,at.MAX_CODEWORDS_IN_BARCODE=at.NUMBER_OF_CODEWORDS-1,at.MIN_ROWS_IN_BARCODE=3,at.MAX_ROWS_IN_BARCODE=90,at.MODULES_IN_CODEWORD=17,at.MODULES_IN_STOP_PATTERN=18,at.BARS_IN_MODULE=8,at.EMPTY_INT_ARRAY=new Int32Array([]),at.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),at.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class af{constructor(s,u){this.bits=s,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class ht{static detectMultiple(s,u,h){let m=s.getBlackMatrix(),v=ht.detect(h,m);return v.length||(m=m.clone(),m.rotate180(),v=ht.detect(h,m)),new af(m,v)}static detect(s,u){const h=new Array;let m=0,v=0,x=!1;for(;m<u.getHeight();){const _=ht.findVertices(u,m,v);if(_[0]==null&&_[3]==null){if(!x)break;x=!1,v=0;for(const T of h)T[1]!=null&&(m=Math.trunc(Math.max(m,T[1].getY()))),T[3]!=null&&(m=Math.max(m,Math.trunc(T[3].getY())));m+=ht.ROW_STEP;continue}if(x=!0,h.push(_),!s)break;_[2]!=null?(v=Math.trunc(_[2].getX()),m=Math.trunc(_[2].getY())):(v=Math.trunc(_[4].getX()),m=Math.trunc(_[4].getY()))}return h}static findVertices(s,u,h){const m=s.getHeight(),v=s.getWidth(),x=new Array(8);return ht.copyToResult(x,ht.findRowsWithPattern(s,m,v,u,h,ht.START_PATTERN),ht.INDEXES_START_PATTERN),x[4]!=null&&(h=Math.trunc(x[4].getX()),u=Math.trunc(x[4].getY())),ht.copyToResult(x,ht.findRowsWithPattern(s,m,v,u,h,ht.STOP_PATTERN),ht.INDEXES_STOP_PATTERN),x}static copyToResult(s,u,h){for(let m=0;m<h.length;m++)s[h[m]]=u[m]}static findRowsWithPattern(s,u,h,m,v,x){const _=new Array(4);let T=!1;const R=new Int32Array(x.length);for(;m<u;m+=ht.ROW_STEP){let V=ht.findGuardPattern(s,v,m,h,!1,x,R);if(V!=null){for(;m>0;){const $=ht.findGuardPattern(s,v,--m,h,!1,x,R);if($!=null)V=$;else{m++;break}}_[0]=new Ge(V[0],m),_[1]=new Ge(V[1],m),T=!0;break}}let B=m+1;if(T){let V=0,$=Int32Array.from([Math.trunc(_[0].getX()),Math.trunc(_[1].getX())]);for(;B<u;B++){const Y=ht.findGuardPattern(s,$[0],B,h,!1,x,R);if(Y!=null&&Math.abs($[0]-Y[0])<ht.MAX_PATTERN_DRIFT&&Math.abs($[1]-Y[1])<ht.MAX_PATTERN_DRIFT)$=Y,V=0;else{if(V>ht.SKIPPED_ROW_COUNT_MAX)break;V++}}B-=V+1,_[2]=new Ge($[0],B),_[3]=new Ge($[1],B)}return B-m<ht.BARCODE_MIN_HEIGHT&&U.fill(_,null),_}static findGuardPattern(s,u,h,m,v,x,_){U.fillWithin(_,0,_.length,0);let T=u,R=0;for(;s.get(T,h)&&T>0&&R++<ht.MAX_PIXEL_DRIFT;)T--;let B=T,V=0,$=x.length;for(let Y=v;B<m;B++)if(s.get(B,h)!==Y)_[V]++;else{if(V===$-1){if(ht.patternMatchVariance(_,x,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return new Int32Array([T,B]);T+=_[0]+_[1],P.arraycopy(_,2,_,0,V-1),_[V-1]=0,_[V]=0,V--}else V++;_[V]=1,Y=!Y}return V===$-1&&ht.patternMatchVariance(_,x,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE?new Int32Array([T,B-1]):null}static patternMatchVariance(s,u,h){let m=s.length,v=0,x=0;for(let R=0;R<m;R++)v+=s[R],x+=u[R];if(v<x)return 1/0;let _=v/x;h*=_;let T=0;for(let R=0;R<m;R++){let B=s[R],V=u[R]*_,$=B>V?B-V:V-B;if($>h)return 1/0;T+=$}return T/v}}ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ht.MAX_AVG_VARIANCE=.42,ht.MAX_INDIVIDUAL_VARIANCE=.8,ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ht.MAX_PIXEL_DRIFT=3,ht.MAX_PATTERN_DRIFT=5,ht.SKIPPED_ROW_COUNT_MAX=25,ht.ROW_STEP=5,ht.BARCODE_MIN_HEIGHT=10;class Zn{constructor(s,u){if(u.length===0)throw new y;this.field=s;let h=u.length;if(h>1&&u[0]===0){let m=1;for(;m<h&&u[m]===0;)m++;m===h?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(h-m),P.arraycopy(u,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let m=0;for(let v of this.coefficients)m=this.field.add(m,v);return m}let u=this.coefficients[0],h=this.coefficients.length;for(let m=1;m<h;m++)u=this.field.add(this.field.multiply(s,u),this.coefficients[m]);return u}add(s){if(!this.field.equals(s.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let u=this.coefficients,h=s.coefficients;if(u.length>h.length){let x=u;u=h,h=x}let m=new Int32Array(h.length),v=h.length-u.length;P.arraycopy(h,0,m,0,v);for(let x=v;x<h.length;x++)m[x]=this.field.add(u[x-v],h[x]);return new Zn(this.field,m)}subtract(s){if(!this.field.equals(s.field))throw new y("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Zn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Zn(this.field,new Int32Array([0]));let u=this.coefficients,h=u.length,m=s.coefficients,v=m.length,x=new Int32Array(h+v-1);for(let _=0;_<h;_++){let T=u[_];for(let R=0;R<v;R++)x[_+R]=this.field.add(x[_+R],this.field.multiply(T,m[R]))}return new Zn(this.field,x)}negative(){let s=this.coefficients.length,u=new Int32Array(s);for(let h=0;h<s;h++)u[h]=this.field.subtract(0,this.coefficients[h]);return new Zn(this.field,u)}multiplyScalar(s){if(s===0)return new Zn(this.field,new Int32Array([0]));if(s===1)return this;let u=this.coefficients.length,h=new Int32Array(u);for(let m=0;m<u;m++)h[m]=this.field.multiply(this.coefficients[m],s);return new Zn(this.field,h)}multiplyByMonomial(s,u){if(s<0)throw new y;if(u===0)return new Zn(this.field,new Int32Array([0]));let h=this.coefficients.length,m=new Int32Array(h+s);for(let v=0;v<h;v++)m[v]=this.field.multiply(this.coefficients[v],u);return new Zn(this.field,m)}toString(){let s=new be;for(let u=this.getDegree();u>=0;u--){let h=this.getCoefficient(u);h!==0&&(h<0?(s.append(" - "),h=-h):s.length()>0&&s.append(" + "),(u===0||h!==1)&&s.append(h),u!==0&&(u===1?s.append("x"):(s.append("x^"),s.append(u))))}return s.toString()}}class lf{add(s,u){return(s+u)%this.modulus}subtract(s,u){return(this.modulus+s-u)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new y;return this.logTable[s]}inverse(s){if(s===0)throw new _e;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,u){return s===0||u===0?0:this.expTable[(this.logTable[s]+this.logTable[u])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class Bs extends lf{constructor(s,u){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let h=1;for(let m=0;m<s;m++)this.expTable[m]=h,h=h*u%s;for(let m=0;m<s-1;m++)this.logTable[this.expTable[m]]=m;this.zero=new Zn(this,new Int32Array([0])),this.one=new Zn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,u){if(s<0)throw new y;if(u===0)return this.zero;let h=new Int32Array(s+1);return h[0]=u,new Zn(this,h)}}Bs.PDF417_GF=new Bs(at.NUMBER_OF_CODEWORDS,3);class fc{constructor(){this.field=Bs.PDF417_GF}decode(s,u,h){let m=new Zn(this.field,s),v=new Int32Array(u),x=!1;for(let Q=u;Q>0;Q--){let re=m.evaluateAt(this.field.exp(Q));v[u-Q]=re,re!==0&&(x=!0)}if(!x)return 0;let _=this.field.getOne();if(h!=null)for(const Q of h){let re=this.field.exp(s.length-1-Q),oe=new Zn(this.field,new Int32Array([this.field.subtract(0,re),1]));_=_.multiply(oe)}let T=new Zn(this.field,v),R=this.runEuclideanAlgorithm(this.field.buildMonomial(u,1),T,u),B=R[0],V=R[1],$=this.findErrorLocations(B),Y=this.findErrorMagnitudes(V,B,$);for(let Q=0;Q<$.length;Q++){let re=s.length-1-this.field.log($[Q]);if(re<0)throw C.getChecksumInstance();s[re]=this.field.subtract(s[re],Y[Q])}return $.length}runEuclideanAlgorithm(s,u,h){if(s.getDegree()<u.getDegree()){let $=s;s=u,u=$}let m=s,v=u,x=this.field.getZero(),_=this.field.getOne();for(;v.getDegree()>=Math.round(h/2);){let $=m,Y=x;if(m=v,x=_,m.isZero())throw C.getChecksumInstance();v=$;let Q=this.field.getZero(),re=m.getCoefficient(m.getDegree()),oe=this.field.inverse(re);for(;v.getDegree()>=m.getDegree()&&!v.isZero();){let pe=v.getDegree()-m.getDegree(),Oe=this.field.multiply(v.getCoefficient(v.getDegree()),oe);Q=Q.add(this.field.buildMonomial(pe,Oe)),v=v.subtract(m.multiplyByMonomial(pe,Oe))}_=Q.multiply(x).subtract(Y).negative()}let T=_.getCoefficient(0);if(T===0)throw C.getChecksumInstance();let R=this.field.inverse(T),B=_.multiply(R),V=v.multiply(R);return[B,V]}findErrorLocations(s){let u=s.getDegree(),h=new Int32Array(u),m=0;for(let v=1;v<this.field.getSize()&&m<u;v++)s.evaluateAt(v)===0&&(h[m]=this.field.inverse(v),m++);if(m!==u)throw C.getChecksumInstance();return h}findErrorMagnitudes(s,u,h){let m=u.getDegree(),v=new Int32Array(m);for(let R=1;R<=m;R++)v[m-R]=this.field.multiply(R,u.getCoefficient(R));let x=new Zn(this.field,v),_=h.length,T=new Int32Array(_);for(let R=0;R<_;R++){let B=this.field.inverse(h[R]),V=this.field.subtract(0,s.evaluateAt(B)),$=this.field.inverse(x.evaluateAt(B));T[R]=this.field.multiply(V,$)}return T}}class qo{constructor(s,u,h,m,v){s instanceof qo?this.constructor_2(s):this.constructor_1(s,u,h,m,v)}constructor_1(s,u,h,m,v){const x=u==null||h==null,_=m==null||v==null;if(x&&_)throw new ne;x?(u=new Ge(0,m.getY()),h=new Ge(0,v.getY())):_&&(m=new Ge(s.getWidth()-1,u.getY()),v=new Ge(s.getWidth()-1,h.getY())),this.image=s,this.topLeft=u,this.bottomLeft=h,this.topRight=m,this.bottomRight=v,this.minX=Math.trunc(Math.min(u.getX(),h.getX())),this.maxX=Math.trunc(Math.max(m.getX(),v.getX())),this.minY=Math.trunc(Math.min(u.getY(),m.getY())),this.maxY=Math.trunc(Math.max(h.getY(),v.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,u){return s==null?u:u==null?s:new qo(s.image,s.topLeft,s.bottomLeft,u.topRight,u.bottomRight)}addMissingRows(s,u,h){let m=this.topLeft,v=this.bottomLeft,x=this.topRight,_=this.bottomRight;if(s>0){let T=h?this.topLeft:this.topRight,R=Math.trunc(T.getY()-s);R<0&&(R=0);let B=new Ge(T.getX(),R);h?m=B:x=B}if(u>0){let T=h?this.bottomLeft:this.bottomRight,R=Math.trunc(T.getY()+u);R>=this.image.getHeight()&&(R=this.image.getHeight()-1);let B=new Ge(T.getX(),R);h?v=B:_=B}return new qo(this.image,m,v,x,_)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Aa{constructor(s,u,h,m){this.columnCount=s,this.errorCorrectionLevel=m,this.rowCountUpperPart=u,this.rowCountLowerPart=h,this.rowCount=u+h}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class so{constructor(){this.buffer=""}static form(s,u){let h=-1;function m(x,_,T,R,B,V){if(x==="%%")return"%";if(u[++h]===void 0)return;x=R?parseInt(R.substr(1)):void 0;let $=B?parseInt(B.substr(1)):void 0,Y;switch(V){case"s":Y=u[h];break;case"c":Y=u[h][0];break;case"f":Y=parseFloat(u[h]).toFixed(x);break;case"p":Y=parseFloat(u[h]).toPrecision(x);break;case"e":Y=parseFloat(u[h]).toExponential(x);break;case"x":Y=parseInt(u[h]).toString($||16);break;case"d":Y=parseFloat(parseInt(u[h],$||10).toPrecision(x)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString($);let Q=parseInt(T),re=T&&T[0]+""=="0"?"0":" ";for(;Y.length<Q;)Y=_!==void 0?Y+re:re+Y;return Y}let v=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(v,m)}format(s,...u){this.buffer+=so.form(s,u)}toString(){return this.buffer}}class Ui{constructor(s){this.boundingBox=new qo(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let u=this.getCodeword(s);if(u!=null)return u;for(let h=1;h<Ui.MAX_NEARBY_DISTANCE;h++){let m=this.imageRowToCodewordIndex(s)-h;if(m>=0&&(u=this.codewords[m],u!=null)||(m=this.imageRowToCodewordIndex(s)+h,m<this.codewords.length&&(u=this.codewords[m],u!=null)))return u}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,u){this.codewords[this.imageRowToCodewordIndex(s)]=u}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new so;let u=0;for(const h of this.codewords){if(h==null){s.format("%3d:    |   %n",u++);continue}s.format("%3d: %3d|%3d%n",u++,h.getRowNumber(),h.getValue())}return s.toString()}}Ui.MAX_NEARBY_DISTANCE=5;class Ro{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let u=this.values.get(s);u==null&&(u=0),u++,this.values.set(s,u)}getValue(){let s=-1,u=new Array;for(const[h,m]of this.values.entries()){const v={getKey:()=>h,getValue:()=>m};v.getValue()>s?(s=v.getValue(),u=[],u.push(v.getKey())):v.getValue()===s&&u.push(v.getKey())}return at.toIntArray(u)}getConfidence(s){return this.values.get(s)}}class uf extends Ui{constructor(s,u){super(s),this._isLeft=u}setRowNumbers(){for(let s of this.getCodewords())s?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let u=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(u,s);let h=this.getBoundingBox(),m=this._isLeft?h.getTopLeft():h.getTopRight(),v=this._isLeft?h.getBottomLeft():h.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(m.getY())),_=this.imageRowToCodewordIndex(Math.trunc(v.getY())),T=-1,R=1,B=0;for(let V=x;V<_;V++){if(u[V]==null)continue;let $=u[V],Y=$.getRowNumber()-T;if(Y===0)B++;else if(Y===1)R=Math.max(R,B),B=1,T=$.getRowNumber();else if(Y<0||$.getRowNumber()>=s.getRowCount()||Y>V)u[V]=null;else{let Q;R>2?Q=(R-2)*Y:Q=Y;let re=Q>=V;for(let oe=1;oe<=Q&&!re;oe++)re=u[V-oe]!=null;re?u[V]=null:(T=$.getRowNumber(),B=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let u=new Int32Array(s.getRowCount());for(let h of this.getCodewords())if(h!=null){let m=h.getRowNumber();if(m>=u.length)continue;u[m]++}return u}adjustIncompleteIndicatorColumnRowNumbers(s){let u=this.getBoundingBox(),h=this._isLeft?u.getTopLeft():u.getTopRight(),m=this._isLeft?u.getBottomLeft():u.getBottomRight(),v=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.imageRowToCodewordIndex(Math.trunc(m.getY())),_=this.getCodewords(),T=-1;for(let R=v;R<x;R++){if(_[R]==null)continue;let B=_[R];B.setRowNumberAsRowIndicatorColumn();let V=B.getRowNumber()-T;V===0||(V===1?T=B.getRowNumber():B.getRowNumber()>=s.getRowCount()?_[R]=null:T=B.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),u=new Ro,h=new Ro,m=new Ro,v=new Ro;for(let _ of s){if(_==null)continue;_.setRowNumberAsRowIndicatorColumn();let T=_.getValue()%30,R=_.getRowNumber();switch(this._isLeft||(R+=2),R%3){case 0:h.setValue(T*3+1);break;case 1:v.setValue(T/3),m.setValue(T%3);break;case 2:u.setValue(T+1);break}}if(u.getValue().length===0||h.getValue().length===0||m.getValue().length===0||v.getValue().length===0||u.getValue()[0]<1||h.getValue()[0]+m.getValue()[0]<at.MIN_ROWS_IN_BARCODE||h.getValue()[0]+m.getValue()[0]>at.MAX_ROWS_IN_BARCODE)return null;let x=new Aa(u.getValue()[0],h.getValue()[0],m.getValue()[0],v.getValue()[0]);return this.removeIncorrectCodewords(s,x),x}removeIncorrectCodewords(s,u){for(let h=0;h<s.length;h++){let m=s[h];if(s[h]==null)continue;let v=m.getValue()%30,x=m.getRowNumber();if(x>u.getRowCount()){s[h]=null;continue}switch(this._isLeft||(x+=2),x%3){case 0:v*3+1!==u.getRowCountUpperPart()&&(s[h]=null);break;case 1:(Math.trunc(v/3)!==u.getErrorCorrectionLevel()||v%3!==u.getRowCountLowerPart())&&(s[h]=null);break;case 2:v+1!==u.getColumnCount()&&(s[h]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ca{constructor(s,u){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=u,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=at.MAX_CODEWORDS_IN_BARCODE,u;do u=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<u);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let u=1;u<this.barcodeColumnCount+1;u++){let h=this.detectionResultColumns[u].getCodewords();for(let m=0;m<h.length;m++)h[m]!=null&&(h[m].hasValidRowNumber()||this.adjustRowNumbers(u,m,h))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<s.length;h++)if(s[h]!=null&&u[h]!=null&&s[h].getRowNumber()===u[h].getRowNumber())for(let m=1;m<=this.barcodeColumnCount;m++){let v=this.detectionResultColumns[m].getCodewords()[h];v!=null&&(v.setRowNumber(s[h].getRowNumber()),v.hasValidRowNumber()||(this.detectionResultColumns[m].getCodewords()[h]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<u.length;h++){if(u[h]==null)continue;let m=u[h].getRowNumber(),v=0;for(let x=this.barcodeColumnCount+1;x>0&&v<this.ADJUST_ROW_NUMBER_SKIP;x--){let _=this.detectionResultColumns[x].getCodewords()[h];_!=null&&(v=Ca.adjustRowNumberIfValid(m,v,_),_.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,u=this.detectionResultColumns[0].getCodewords();for(let h=0;h<u.length;h++){if(u[h]==null)continue;let m=u[h].getRowNumber(),v=0;for(let x=1;x<this.barcodeColumnCount+1&&v<this.ADJUST_ROW_NUMBER_SKIP;x++){let _=this.detectionResultColumns[x].getCodewords()[h];_!=null&&(v=Ca.adjustRowNumberIfValid(m,v,_),_.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,u,h){return h==null||h.hasValidRowNumber()||(h.isValidRowNumber(s)?(h.setRowNumber(s),u=0):++u),u}adjustRowNumbers(s,u,h){if(!this.detectionResultColumns[s-1])return;let m=h[u],v=this.detectionResultColumns[s-1].getCodewords(),x=v;this.detectionResultColumns[s+1]!=null&&(x=this.detectionResultColumns[s+1].getCodewords());let _=new Array(14);_[2]=v[u],_[3]=x[u],u>0&&(_[0]=h[u-1],_[4]=v[u-1],_[5]=x[u-1]),u>1&&(_[8]=h[u-2],_[10]=v[u-2],_[11]=x[u-2]),u<h.length-1&&(_[1]=h[u+1],_[6]=v[u+1],_[7]=x[u+1]),u<h.length-2&&(_[9]=h[u+2],_[12]=v[u+2],_[13]=x[u+2]);for(let T of _)if(Ca.adjustRowNumber(m,T))return}static adjustRowNumber(s,u){return u==null?!1:u.hasValidRowNumber()&&u.getBucket()===s.getBucket()?(s.setRowNumber(u.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,u){this.detectionResultColumns[s]=u}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let u=new so;for(let h=0;h<s.getCodewords().length;h++){u.format("CW %3d:",h);for(let m=0;m<this.barcodeColumnCount+2;m++){if(this.detectionResultColumns[m]==null){u.format("    |   ");continue}let v=this.detectionResultColumns[m].getCodewords()[h];if(v==null){u.format("    |   ");continue}u.format(" %3d|%3d",v.getRowNumber(),v.getValue())}u.format("%n")}return u.toString()}}class Wo{constructor(s,u,h,m){this.rowNumber=Wo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(u),this.bucket=Math.trunc(h),this.value=Math.trunc(m)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Wo.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Wo.BARCODE_ROW_UNKNOWN=-1;class Qn{static initialize(){for(let s=0;s<at.SYMBOL_TABLE.length;s++){let u=at.SYMBOL_TABLE[s],h=u&1;for(let m=0;m<at.BARS_IN_MODULE;m++){let v=0;for(;(u&1)===h;)v+=1,u>>=1;h=u&1,Qn.RATIOS_TABLE[s]||(Qn.RATIOS_TABLE[s]=new Array(at.BARS_IN_MODULE)),Qn.RATIOS_TABLE[s][at.BARS_IN_MODULE-m-1]=Math.fround(v/at.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let u=Qn.getDecodedCodewordValue(Qn.sampleBitCounts(s));return u!==-1?u:Qn.getClosestDecodedValue(s)}static sampleBitCounts(s){let u=_t.sum(s),h=new Int32Array(at.BARS_IN_MODULE),m=0,v=0;for(let x=0;x<at.MODULES_IN_CODEWORD;x++){let _=u/(2*at.MODULES_IN_CODEWORD)+x*u/at.MODULES_IN_CODEWORD;v+s[m]<=_&&(v+=s[m],m++),h[m]++}return h}static getDecodedCodewordValue(s){let u=Qn.getBitValue(s);return at.getCodeword(u)===-1?-1:u}static getBitValue(s){let u=0;for(let h=0;h<s.length;h++)for(let m=0;m<s[h];m++)u=u<<1|(h%2===0?1:0);return Math.trunc(u)}static getClosestDecodedValue(s){let u=_t.sum(s),h=new Array(at.BARS_IN_MODULE);if(u>1)for(let x=0;x<h.length;x++)h[x]=Math.fround(s[x]/u);let m=To.MAX_VALUE,v=-1;this.bSymbolTableReady||Qn.initialize();for(let x=0;x<Qn.RATIOS_TABLE.length;x++){let _=0,T=Qn.RATIOS_TABLE[x];for(let R=0;R<at.BARS_IN_MODULE;R++){let B=Math.fround(T[R]-h[R]);if(_+=Math.fround(B*B),_>=m)break}_<m&&(m=_,v=at.SYMBOL_TABLE[x])}return v}}Qn.bSymbolTableReady=!1,Qn.RATIOS_TABLE=new Array(at.SYMBOL_TABLE.length).map(j=>new Array(at.BARS_IN_MODULE));class kl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class hc{static parseLong(s,u=void 0){return parseInt(s,u)}}class ao extends d{}ao.kind="NullPointerException";class pc{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,u,h){if(s==null)throw new ao;if(u<0||u>s.length||h<0||u+h>s.length||u+h<0)throw new N;if(h===0)return;for(let m=0;m<h;m++)this.write(s[u+m])}flush(){}close(){}}class Ml extends d{}class cf extends pc{constructor(s=32){if(super(),this.count=0,s<0)throw new y("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let h=this.buf.length<<1;if(h-s<0&&(h=s),h<0){if(s<0)throw new Ml;h=F.MAX_VALUE}this.buf=U.copyOfUint8Array(this.buf,h)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,u,h){if(u<0||u>s.length||h<0||u+h-s.length>0)throw new N;this.ensureCapacity(this.count+h),P.arraycopy(s,u,this.buf,this.count,h),this.count+=h}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return U.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var Pt;(function(j){j[j.ALPHA=0]="ALPHA",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.PUNCT=3]="PUNCT",j[j.ALPHA_SHIFT=4]="ALPHA_SHIFT",j[j.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pt||(Pt={}));function Sa(){if(typeof window<"u")return window.BigInt||null;if(typeof ah<"u")return ah.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ta;function Tn(j){if(typeof Ta>"u"&&(Ta=Sa()),Ta===null)throw new Error("BigInt is not supported!");return Ta(j)}function Fs(){let j=[];j[0]=Tn(1);let s=Tn(900);j[1]=s;for(let u=2;u<16;u++)j[u]=j[u-1]*s;return j}class ge{static decode(s,u){let h=new be(""),m=X.ISO8859_1;h.enableDecoding(m);let v=1,x=s[v++],_=new kl;for(;v<s[0];){switch(x){case ge.TEXT_COMPACTION_MODE_LATCH:v=ge.textCompaction(s,v,h);break;case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:v=ge.byteCompaction(x,s,m,v,h);break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(s[v++]);break;case ge.NUMERIC_COMPACTION_MODE_LATCH:v=ge.numericCompaction(s,v,h);break;case ge.ECI_CHARSET:X.getCharacterSetECIByValue(s[v++]);break;case ge.ECI_GENERAL_PURPOSE:v+=2;break;case ge.ECI_USER_DEFINED:v++;break;case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:v=ge.decodeMacroBlock(s,v,_);break;case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:throw new W;default:v--,v=ge.textCompaction(s,v,h);break}if(v<s.length)x=s[v++];else throw W.getFormatInstance()}if(h.length()===0)throw W.getFormatInstance();let T=new Ee(null,h.toString(),null,u);return T.setOther(_),T}static decodeMacroBlock(s,u,h){if(u+ge.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw W.getFormatInstance();let m=new Int32Array(ge.NUMBER_OF_SEQUENCE_CODEWORDS);for(let _=0;_<ge.NUMBER_OF_SEQUENCE_CODEWORDS;_++,u++)m[_]=s[u];h.setSegmentIndex(F.parseInt(ge.decodeBase900toBase10(m,ge.NUMBER_OF_SEQUENCE_CODEWORDS)));let v=new be;u=ge.textCompaction(s,u,v),h.setFileId(v.toString());let x=-1;for(s[u]===ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(x=u+1);u<s[0];)switch(s[u]){case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(u++,s[u]){case ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let _=new be;u=ge.textCompaction(s,u+1,_),h.setFileName(_.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let T=new be;u=ge.textCompaction(s,u+1,T),h.setSender(T.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let R=new be;u=ge.textCompaction(s,u+1,R),h.setAddressee(R.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let B=new be;u=ge.numericCompaction(s,u+1,B),h.setSegmentCount(F.parseInt(B.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let V=new be;u=ge.numericCompaction(s,u+1,V),h.setTimestamp(hc.parseLong(V.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let $=new be;u=ge.numericCompaction(s,u+1,$),h.setChecksum(F.parseInt($.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Y=new be;u=ge.numericCompaction(s,u+1,Y),h.setFileSize(hc.parseLong(Y.toString()));break;default:throw W.getFormatInstance()}break;case ge.MACRO_PDF417_TERMINATOR:u++,h.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(x!==-1){let _=u-x;h.isLastSegment()&&_--,h.setOptionalData(U.copyOfRange(s,x,x+_))}return u}static textCompaction(s,u,h){let m=new Int32Array((s[0]-u)*2),v=new Int32Array((s[0]-u)*2),x=0,_=!1;for(;u<s[0]&&!_;){let T=s[u++];if(T<ge.TEXT_COMPACTION_MODE_LATCH)m[x]=T/30,m[x+1]=T%30,x+=2;else switch(T){case ge.TEXT_COMPACTION_MODE_LATCH:m[x++]=ge.TEXT_COMPACTION_MODE_LATCH;break;case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:u--,_=!0;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m[x]=ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,T=s[u++],v[x]=T,x++;break}}return ge.decodeTextCompaction(m,v,x,h),u}static decodeTextCompaction(s,u,h,m){let v=Pt.ALPHA,x=Pt.ALPHA,_=0;for(;_<h;){let T=s[_],R="";switch(v){case Pt.ALPHA:if(T<26)R=String.fromCharCode(65+T);else switch(T){case 26:R=" ";break;case ge.LL:v=Pt.LOWER;break;case ge.ML:v=Pt.MIXED;break;case ge.PS:x=v,v=Pt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(u[_]);break;case ge.TEXT_COMPACTION_MODE_LATCH:v=Pt.ALPHA;break}break;case Pt.LOWER:if(T<26)R=String.fromCharCode(97+T);else switch(T){case 26:R=" ";break;case ge.AS:x=v,v=Pt.ALPHA_SHIFT;break;case ge.ML:v=Pt.MIXED;break;case ge.PS:x=v,v=Pt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(u[_]);break;case ge.TEXT_COMPACTION_MODE_LATCH:v=Pt.ALPHA;break}break;case Pt.MIXED:if(T<ge.PL)R=ge.MIXED_CHARS[T];else switch(T){case ge.PL:v=Pt.PUNCT;break;case 26:R=" ";break;case ge.LL:v=Pt.LOWER;break;case ge.AL:v=Pt.ALPHA;break;case ge.PS:x=v,v=Pt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(u[_]);break;case ge.TEXT_COMPACTION_MODE_LATCH:v=Pt.ALPHA;break}break;case Pt.PUNCT:if(T<ge.PAL)R=ge.PUNCT_CHARS[T];else switch(T){case ge.PAL:v=Pt.ALPHA;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(u[_]);break;case ge.TEXT_COMPACTION_MODE_LATCH:v=Pt.ALPHA;break}break;case Pt.ALPHA_SHIFT:if(v=x,T<26)R=String.fromCharCode(65+T);else switch(T){case 26:R=" ";break;case ge.TEXT_COMPACTION_MODE_LATCH:v=Pt.ALPHA;break}break;case Pt.PUNCT_SHIFT:if(v=x,T<ge.PAL)R=ge.PUNCT_CHARS[T];else switch(T){case ge.PAL:v=Pt.ALPHA;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(u[_]);break;case ge.TEXT_COMPACTION_MODE_LATCH:v=Pt.ALPHA;break}break}R!==""&&m.append(R),_++}}static byteCompaction(s,u,h,m,v){let x=new cf,_=0,T=0,R=!1;switch(s){case ge.BYTE_COMPACTION_MODE_LATCH:let B=new Int32Array(6),V=u[m++];for(;m<u[0]&&!R;)switch(B[_++]=V,T=900*T+V,V=u[m++],V){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:m--,R=!0;break;default:if(_%5===0&&_>0){for(let $=0;$<6;++$)x.write(Number(Tn(T)>>Tn(8*(5-$))));T=0,_=0}break}m===u[0]&&V<ge.TEXT_COMPACTION_MODE_LATCH&&(B[_++]=V);for(let $=0;$<_;$++)x.write(B[$]);break;case ge.BYTE_COMPACTION_MODE_LATCH_6:for(;m<u[0]&&!R;){let $=u[m++];if($<ge.TEXT_COMPACTION_MODE_LATCH)_++,T=900*T+$;else switch($){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:m--,R=!0;break}if(_%5===0&&_>0){for(let Y=0;Y<6;++Y)x.write(Number(Tn(T)>>Tn(8*(5-Y))));T=0,_=0}}break}return v.append(se.decode(x.toByteArray(),h)),m}static numericCompaction(s,u,h){let m=0,v=!1,x=new Int32Array(ge.MAX_NUMERIC_CODEWORDS);for(;u<s[0]&&!v;){let _=s[u++];if(u===s[0]&&(v=!0),_<ge.TEXT_COMPACTION_MODE_LATCH)x[m]=_,m++;else switch(_){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:u--,v=!0;break}(m%ge.MAX_NUMERIC_CODEWORDS===0||_===ge.NUMERIC_COMPACTION_MODE_LATCH||v)&&m>0&&(h.append(ge.decodeBase900toBase10(x,m)),m=0)}return u}static decodeBase900toBase10(s,u){let h=Tn(0);for(let v=0;v<u;v++)h+=ge.EXP900[u-v-1]*Tn(s[v]);let m=h.toString();if(m.charAt(0)!=="1")throw new W;return m.substring(1)}}ge.TEXT_COMPACTION_MODE_LATCH=900,ge.BYTE_COMPACTION_MODE_LATCH=901,ge.NUMERIC_COMPACTION_MODE_LATCH=902,ge.BYTE_COMPACTION_MODE_LATCH_6=924,ge.ECI_USER_DEFINED=925,ge.ECI_GENERAL_PURPOSE=926,ge.ECI_CHARSET=927,ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ge.MACRO_PDF417_TERMINATOR=922,ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ge.MAX_NUMERIC_CODEWORDS=15,ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ge.PL=25,ge.LL=27,ge.AS=27,ge.ML=28,ge.AL=28,ge.PS=29,ge.PAL=29,ge.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ge.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ge.EXP900=Sa()?Fs():[],ge.NUMBER_OF_SEQUENCE_CODEWORDS=2;class gt{constructor(){}static decode(s,u,h,m,v,x,_){let T=new qo(s,u,h,m,v),R=null,B=null,V;for(let Q=!0;;Q=!1){if(u!=null&&(R=gt.getRowIndicatorColumn(s,T,u,!0,x,_)),m!=null&&(B=gt.getRowIndicatorColumn(s,T,m,!1,x,_)),V=gt.merge(R,B),V==null)throw ne.getNotFoundInstance();let re=V.getBoundingBox();if(Q&&re!=null&&(re.getMinY()<T.getMinY()||re.getMaxY()>T.getMaxY()))T=re;else break}V.setBoundingBox(T);let $=V.getBarcodeColumnCount()+1;V.setDetectionResultColumn(0,R),V.setDetectionResultColumn($,B);let Y=R!=null;for(let Q=1;Q<=$;Q++){let re=Y?Q:$-Q;if(V.getDetectionResultColumn(re)!==void 0)continue;let oe;re===0||re===$?oe=new uf(T,re===0):oe=new Ui(T),V.setDetectionResultColumn(re,oe);let pe=-1,Oe=pe;for(let ke=T.getMinY();ke<=T.getMaxY();ke++){if(pe=gt.getStartColumn(V,re,ke,Y),pe<0||pe>T.getMaxX()){if(Oe===-1)continue;pe=Oe}let Ie=gt.detectCodeword(s,T.getMinX(),T.getMaxX(),Y,pe,ke,x,_);Ie!=null&&(oe.setCodeword(ke,Ie),Oe=pe,x=Math.min(x,Ie.getWidth()),_=Math.max(_,Ie.getWidth()))}}return gt.createDecoderResult(V)}static merge(s,u){if(s==null&&u==null)return null;let h=gt.getBarcodeMetadata(s,u);if(h==null)return null;let m=qo.merge(gt.adjustBoundingBox(s),gt.adjustBoundingBox(u));return new Ca(h,m)}static adjustBoundingBox(s){if(s==null)return null;let u=s.getRowHeights();if(u==null)return null;let h=gt.getMax(u),m=0;for(let _ of u)if(m+=h-_,_>0)break;let v=s.getCodewords();for(let _=0;m>0&&v[_]==null;_++)m--;let x=0;for(let _=u.length-1;_>=0&&(x+=h-u[_],!(u[_]>0));_--);for(let _=v.length-1;x>0&&v[_]==null;_--)x--;return s.getBoundingBox().addMissingRows(m,x,s.isLeft())}static getMax(s){let u=-1;for(let h of s)u=Math.max(u,h);return u}static getBarcodeMetadata(s,u){let h;if(s==null||(h=s.getBarcodeMetadata())==null)return u==null?null:u.getBarcodeMetadata();let m;return u==null||(m=u.getBarcodeMetadata())==null?h:h.getColumnCount()!==m.getColumnCount()&&h.getErrorCorrectionLevel()!==m.getErrorCorrectionLevel()&&h.getRowCount()!==m.getRowCount()?null:h}static getRowIndicatorColumn(s,u,h,m,v,x){let _=new uf(u,m);for(let T=0;T<2;T++){let R=T===0?1:-1,B=Math.trunc(Math.trunc(h.getX()));for(let V=Math.trunc(Math.trunc(h.getY()));V<=u.getMaxY()&&V>=u.getMinY();V+=R){let $=gt.detectCodeword(s,0,s.getWidth(),m,B,V,v,x);$!=null&&(_.setCodeword(V,$),m?B=$.getStartX():B=$.getEndX())}}return _}static adjustCodewordCount(s,u){let h=u[0][1],m=h.getValue(),v=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-gt.getNumberOfECCodeWords(s.getBarcodeECLevel());if(m.length===0){if(v<1||v>at.MAX_CODEWORDS_IN_BARCODE)throw ne.getNotFoundInstance();h.setValue(v)}else m[0]!==v&&h.setValue(v)}static createDecoderResult(s){let u=gt.createBarcodeMatrix(s);gt.adjustCodewordCount(s,u);let h=new Array,m=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),v=[],x=new Array;for(let T=0;T<s.getBarcodeRowCount();T++)for(let R=0;R<s.getBarcodeColumnCount();R++){let B=u[T][R+1].getValue(),V=T*s.getBarcodeColumnCount()+R;B.length===0?h.push(V):B.length===1?m[V]=B[0]:(x.push(V),v.push(B))}let _=new Array(v.length);for(let T=0;T<_.length;T++)_[T]=v[T];return gt.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),m,at.toIntArray(h),at.toIntArray(x),_)}static createDecoderResultFromAmbiguousValues(s,u,h,m,v){let x=new Int32Array(m.length),_=100;for(;_-- >0;){for(let T=0;T<x.length;T++)u[m[T]]=v[T][x[T]];try{return gt.decodeCodewords(u,s,h)}catch(T){if(!(T instanceof C))throw T}if(x.length===0)throw C.getChecksumInstance();for(let T=0;T<x.length;T++)if(x[T]<v[T].length-1){x[T]++;break}else if(x[T]=0,T===x.length-1)throw C.getChecksumInstance()}throw C.getChecksumInstance()}static createBarcodeMatrix(s){let u=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let m=0;m<u.length;m++)for(let v=0;v<u[m].length;v++)u[m][v]=new Ro;let h=0;for(let m of s.getDetectionResultColumns()){if(m!=null){for(let v of m.getCodewords())if(v!=null){let x=v.getRowNumber();if(x>=0){if(x>=u.length)continue;u[x][h].setValue(v.getValue())}}}h++}return u}static isValidBarcodeColumn(s,u){return u>=0&&u<=s.getBarcodeColumnCount()+1}static getStartColumn(s,u,h,m){let v=m?1:-1,x=null;if(gt.isValidBarcodeColumn(s,u-v)&&(x=s.getDetectionResultColumn(u-v).getCodeword(h)),x!=null)return m?x.getEndX():x.getStartX();if(x=s.getDetectionResultColumn(u).getCodewordNearby(h),x!=null)return m?x.getStartX():x.getEndX();if(gt.isValidBarcodeColumn(s,u-v)&&(x=s.getDetectionResultColumn(u-v).getCodewordNearby(h)),x!=null)return m?x.getEndX():x.getStartX();let _=0;for(;gt.isValidBarcodeColumn(s,u-v);){u-=v;for(let T of s.getDetectionResultColumn(u).getCodewords())if(T!=null)return(m?T.getEndX():T.getStartX())+v*_*(T.getEndX()-T.getStartX());_++}return m?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,u,h,m,v,x,_,T){v=gt.adjustCodewordStartColumn(s,u,h,m,v,x);let R=gt.getModuleBitCount(s,u,h,m,v,x);if(R==null)return null;let B,V=_t.sum(R);if(m)B=v+V;else{for(let Q=0;Q<R.length/2;Q++){let re=R[Q];R[Q]=R[R.length-1-Q],R[R.length-1-Q]=re}B=v,v=B-V}if(!gt.checkCodewordSkew(V,_,T))return null;let $=Qn.getDecodedValue(R),Y=at.getCodeword($);return Y===-1?null:new Wo(v,B,gt.getCodewordBucketNumber($),Y)}static getModuleBitCount(s,u,h,m,v,x){let _=v,T=new Int32Array(8),R=0,B=m?1:-1,V=m;for(;(m?_<h:_>=u)&&R<T.length;)s.get(_,x)===V?(T[R]++,_+=B):(R++,V=!V);return R===T.length||_===(m?h:u)&&R===T.length-1?T:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,u,h,m,v,x){let _=v,T=m?-1:1;for(let R=0;R<2;R++){for(;(m?_>=u:_<h)&&m===s.get(_,x);){if(Math.abs(v-_)>gt.CODEWORD_SKEW_SIZE)return v;_+=T}T=-T,m=!m}return _}static checkCodewordSkew(s,u,h){return u-gt.CODEWORD_SKEW_SIZE<=s&&s<=h+gt.CODEWORD_SKEW_SIZE}static decodeCodewords(s,u,h){if(s.length===0)throw W.getFormatInstance();let m=1<<u+1,v=gt.correctErrors(s,h,m);gt.verifyCodewordCount(s,m);let x=ge.decode(s,""+u);return x.setErrorsCorrected(v),x.setErasures(h.length),x}static correctErrors(s,u,h){if(u!=null&&u.length>h/2+gt.MAX_ERRORS||h<0||h>gt.MAX_EC_CODEWORDS)throw C.getChecksumInstance();return gt.errorCorrection.decode(s,h,u)}static verifyCodewordCount(s,u){if(s.length<4)throw W.getFormatInstance();let h=s[0];if(h>s.length)throw W.getFormatInstance();if(h===0)if(u<s.length)s[0]=s.length-u;else throw W.getFormatInstance()}static getBitCountForCodeword(s){let u=new Int32Array(8),h=0,m=u.length-1;for(;!((s&1)!==h&&(h=s&1,m--,m<0));)u[m]++,s>>=1;return u}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return gt.getCodewordBucketNumber(gt.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let u=new so;for(let h=0;h<s.length;h++){u.format("Row %2d: ",h);for(let m=0;m<s[h].length;m++){let v=s[h][m];v.getValue().length===0?u.format("        ",null):u.format("%4d(%2d)",v.getValue()[0],v.getConfidence(v.getValue()[0]))}u.format("%n")}return u.toString()}}gt.CODEWORD_SKEW_SIZE=2,gt.MAX_ERRORS=3,gt.MAX_EC_CODEWORDS=512,gt.errorCorrection=new fc;class er{decode(s,u=null){let h=er.decode(s,u,!1);if(h==null||h.length===0||h[0]==null)throw ne.getNotFoundInstance();return h[0]}decodeMultiple(s,u=null){try{return er.decode(s,u,!0)}catch(h){throw h instanceof W||h instanceof C?ne.getNotFoundInstance():h}}static decode(s,u,h){const m=new Array,v=ht.detectMultiple(s,u,h);for(const x of v.getPoints()){const _=gt.decode(v.getBits(),x[4],x[5],x[6],x[7],er.getMinCodewordWidth(x),er.getMaxCodewordWidth(x)),T=new Le(_.getText(),_.getRawBytes(),void 0,x,Ne.PDF_417);T.putMetadata(rt.ERROR_CORRECTION_LEVEL,_.getECLevel());const R=_.getOther();R!=null&&T.putMetadata(rt.PDF417_EXTRA_METADATA,R),m.push(T)}return m.map(x=>x)}static getMaxWidth(s,u){return s==null||u==null?0:Math.trunc(Math.abs(s.getX()-u.getX()))}static getMinWidth(s,u){return s==null||u==null?F.MAX_VALUE:Math.trunc(Math.abs(s.getX()-u.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(er.getMaxWidth(s[0],s[4]),er.getMaxWidth(s[6],s[2])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN),Math.max(er.getMaxWidth(s[1],s[5]),er.getMaxWidth(s[7],s[3])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(er.getMinWidth(s[0],s[4]),er.getMinWidth(s[6],s[2])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN),Math.min(er.getMinWidth(s[1],s[5]),er.getMinWidth(s[7],s[3])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN)))}reset(){}}class Us extends d{}Us.kind="ReaderException";class Dl{constructor(s,u){this.verbose=s===!0,u&&this.setHints(u)}decode(s,u){return u&&this.setHints(u),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const u=!r(s)&&s.get(H.TRY_HARDER)===!0,h=r(s)?null:s.get(H.POSSIBLE_FORMATS),m=new Array;if(!r(h)){const v=h.some(x=>x===Ne.UPC_A||x===Ne.UPC_E||x===Ne.EAN_13||x===Ne.EAN_8||x===Ne.CODABAR||x===Ne.CODE_39||x===Ne.CODE_93||x===Ne.CODE_128||x===Ne.ITF||x===Ne.RSS_14||x===Ne.RSS_EXPANDED);v&&!u&&m.push(new Ms(s,this.verbose)),h.includes(Ne.QR_CODE)&&m.push(new Er),h.includes(Ne.DATA_MATRIX)&&m.push(new yi),h.includes(Ne.AZTEC)&&m.push(new Io),h.includes(Ne.PDF_417)&&m.push(new er),v&&u&&m.push(new Ms(s,this.verbose))}m.length===0&&(u||m.push(new Ms(s,this.verbose)),m.push(new Er),m.push(new yi),m.push(new Io),m.push(new er),u&&m.push(new Ms(s,this.verbose))),this.readers=m}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new Us("No readers where selected, nothing can be read.");for(const u of this.readers)try{return u.decode(s,this.hints)}catch(h){if(h instanceof Us)continue}throw new ne("No MultiFormat Readers were able to detect the code.")}}class Ia extends Fe{constructor(s=null,u=500){const h=new Dl;h.setHints(s),super(h,u)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class Ll extends Fe{constructor(s=500){super(new er,s)}}class df extends Fe{constructor(s=500){super(new Er,s)}}var gc;(function(j){j[j.ERROR_CORRECTION=0]="ERROR_CORRECTION",j[j.CHARACTER_SET=1]="CHARACTER_SET",j[j.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",j[j.MIN_SIZE=3]="MIN_SIZE",j[j.MAX_SIZE=4]="MAX_SIZE",j[j.MARGIN=5]="MARGIN",j[j.PDF417_COMPACT=6]="PDF417_COMPACT",j[j.PDF417_COMPACTION=7]="PDF417_COMPACTION",j[j.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",j[j.AZTEC_LAYERS=9]="AZTEC_LAYERS",j[j.QR_VERSION=10]="QR_VERSION"})(gc||(gc={}));var Dn=gc;class mc{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Me(s,Int32Array.from([1])))}buildGenerator(s){const u=this.cachedGenerators;if(s>=u.length){let h=u[u.length-1];const m=this.field;for(let v=u.length;v<=s;v++){const x=h.multiply(new Me(m,Int32Array.from([1,m.exp(v-1+m.getGeneratorBase())])));u.push(x),h=x}}return u[s]}encode(s,u){if(u===0)throw new y("No error correction bytes");const h=s.length-u;if(h<=0)throw new y("No data bytes provided");const m=this.buildGenerator(u),v=new Int32Array(h);P.arraycopy(s,0,v,0,h);let x=new Me(this.field,v);x=x.multiplyByMonomial(u,1);const T=x.divide(m)[1].getCoefficients(),R=u-T.length;for(let B=0;B<R;B++)s[h+B]=0;P.arraycopy(T,0,s,h+R,T.length)}}class nn{constructor(){}static applyMaskPenaltyRule1(s){return nn.applyMaskPenaltyRule1Internal(s,!0)+nn.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let u=0;const h=s.getArray(),m=s.getWidth(),v=s.getHeight();for(let x=0;x<v-1;x++){const _=h[x];for(let T=0;T<m-1;T++){const R=_[T];R===_[T+1]&&R===h[x+1][T]&&R===h[x+1][T+1]&&u++}}return nn.N2*u}static applyMaskPenaltyRule3(s){let u=0;const h=s.getArray(),m=s.getWidth(),v=s.getHeight();for(let x=0;x<v;x++)for(let _=0;_<m;_++){const T=h[x];_+6<m&&T[_]===1&&T[_+1]===0&&T[_+2]===1&&T[_+3]===1&&T[_+4]===1&&T[_+5]===0&&T[_+6]===1&&(nn.isWhiteHorizontal(T,_-4,_)||nn.isWhiteHorizontal(T,_+7,_+11))&&u++,x+6<v&&h[x][_]===1&&h[x+1][_]===0&&h[x+2][_]===1&&h[x+3][_]===1&&h[x+4][_]===1&&h[x+5][_]===0&&h[x+6][_]===1&&(nn.isWhiteVertical(h,_,x-4,x)||nn.isWhiteVertical(h,_,x+7,x+11))&&u++}return u*nn.N3}static isWhiteHorizontal(s,u,h){u=Math.max(u,0),h=Math.min(h,s.length);for(let m=u;m<h;m++)if(s[m]===1)return!1;return!0}static isWhiteVertical(s,u,h,m){h=Math.max(h,0),m=Math.min(m,s.length);for(let v=h;v<m;v++)if(s[v][u]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let u=0;const h=s.getArray(),m=s.getWidth(),v=s.getHeight();for(let T=0;T<v;T++){const R=h[T];for(let B=0;B<m;B++)R[B]===1&&u++}const x=s.getHeight()*s.getWidth();return Math.floor(Math.abs(u*2-x)*10/x)*nn.N4}static getDataMaskBit(s,u,h){let m,v;switch(s){case 0:m=h+u&1;break;case 1:m=h&1;break;case 2:m=u%3;break;case 3:m=(h+u)%3;break;case 4:m=Math.floor(h/2)+Math.floor(u/3)&1;break;case 5:v=h*u,m=(v&1)+v%3;break;case 6:v=h*u,m=(v&1)+v%3&1;break;case 7:v=h*u,m=v%3+(h+u&1)&1;break;default:throw new y("Invalid mask pattern: "+s)}return m===0}static applyMaskPenaltyRule1Internal(s,u){let h=0;const m=u?s.getHeight():s.getWidth(),v=u?s.getWidth():s.getHeight(),x=s.getArray();for(let _=0;_<m;_++){let T=0,R=-1;for(let B=0;B<v;B++){const V=u?x[_][B]:x[B][_];V===R?T++:(T>=5&&(h+=nn.N1+(T-5)),T=1,R=V)}T>=5&&(h+=nn.N1+(T-5))}return h}}nn.N1=3,nn.N2=3,nn.N3=40,nn.N4=10;class Bl{constructor(s,u){this.width=s,this.height=u;const h=new Array(u);for(let m=0;m!==u;m++)h[m]=new Uint8Array(s);this.bytes=h}getHeight(){return this.height}getWidth(){return this.width}get(s,u){return this.bytes[u][s]}getArray(){return this.bytes}setNumber(s,u,h){this.bytes[u][s]=h}setBoolean(s,u,h){this.bytes[u][s]=h?1:0}clear(s){for(const u of this.bytes)U.fill(u,s)}equals(s){if(!(s instanceof Bl))return!1;const u=s;if(this.width!==u.width||this.height!==u.height)return!1;for(let h=0,m=this.height;h<m;++h){const v=this.bytes[h],x=u.bytes[h];for(let _=0,T=this.width;_<T;++_)if(v[_]!==x[_])return!1}return!0}toString(){const s=new be;for(let u=0,h=this.height;u<h;++u){const m=this.bytes[u];for(let v=0,x=this.width;v<x;++v)switch(m[v]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class Ko{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new be;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<Ko.NUM_MASK_PATTERNS}}Ko.NUM_MASK_PATTERNS=8;class $t extends d{}$t.kind="WriterException";class it{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,u,h,m,v){it.clearMatrix(v),it.embedBasicPatterns(h,v),it.embedTypeInfo(u,m,v),it.maybeEmbedVersionInfo(h,v),it.embedDataBits(s,m,v)}static embedBasicPatterns(s,u){it.embedPositionDetectionPatternsAndSeparators(u),it.embedDarkDotAtLeftBottomCorner(u),it.maybeEmbedPositionAdjustmentPatterns(s,u),it.embedTimingPatterns(u)}static embedTypeInfo(s,u,h){const m=new z;it.makeTypeInfoBits(s,u,m);for(let v=0,x=m.getSize();v<x;++v){const _=m.get(m.getSize()-1-v),T=it.TYPE_INFO_COORDINATES[v],R=T[0],B=T[1];if(h.setBoolean(R,B,_),v<8){const V=h.getWidth()-v-1;h.setBoolean(V,8,_)}else{const $=h.getHeight()-7+(v-8);h.setBoolean(8,$,_)}}}static maybeEmbedVersionInfo(s,u){if(s.getVersionNumber()<7)return;const h=new z;it.makeVersionInfoBits(s,h);let m=17;for(let v=0;v<6;++v)for(let x=0;x<3;++x){const _=h.get(m);m--,u.setBoolean(v,u.getHeight()-11+x,_),u.setBoolean(u.getHeight()-11+x,v,_)}}static embedDataBits(s,u,h){let m=0,v=-1,x=h.getWidth()-1,_=h.getHeight()-1;for(;x>0;){for(x===6&&(x-=1);_>=0&&_<h.getHeight();){for(let T=0;T<2;++T){const R=x-T;if(!it.isEmpty(h.get(R,_)))continue;let B;m<s.getSize()?(B=s.get(m),++m):B=!1,u!==255&&nn.getDataMaskBit(u,R,_)&&(B=!B),h.setBoolean(R,_,B)}_+=v}v=-v,_+=v,x-=2}if(m!==s.getSize())throw new $t("Not all bits consumed: "+m+"/"+s.getSize())}static findMSBSet(s){return 32-F.numberOfLeadingZeros(s)}static calculateBCHCode(s,u){if(u===0)throw new y("0 polynomial");const h=it.findMSBSet(u);for(s<<=h-1;it.findMSBSet(s)>=h;)s^=u<<it.findMSBSet(s)-h;return s}static makeTypeInfoBits(s,u,h){if(!Ko.isValidMaskPattern(u))throw new $t("Invalid mask pattern");const m=s.getBits()<<3|u;h.appendBits(m,5);const v=it.calculateBCHCode(m,it.TYPE_INFO_POLY);h.appendBits(v,10);const x=new z;if(x.appendBits(it.TYPE_INFO_MASK_PATTERN,15),h.xor(x),h.getSize()!==15)throw new $t("should not happen but we got: "+h.getSize())}static makeVersionInfoBits(s,u){u.appendBits(s.getVersionNumber(),6);const h=it.calculateBCHCode(s.getVersionNumber(),it.VERSION_INFO_POLY);if(u.appendBits(h,12),u.getSize()!==18)throw new $t("should not happen but we got: "+u.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let u=8;u<s.getWidth()-8;++u){const h=(u+1)%2;it.isEmpty(s.get(u,6))&&s.setNumber(u,6,h),it.isEmpty(s.get(6,u))&&s.setNumber(6,u,h)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new $t;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,u,h){for(let m=0;m<8;++m){if(!it.isEmpty(h.get(s+m,u)))throw new $t;h.setNumber(s+m,u,0)}}static embedVerticalSeparationPattern(s,u,h){for(let m=0;m<7;++m){if(!it.isEmpty(h.get(s,u+m)))throw new $t;h.setNumber(s,u+m,0)}}static embedPositionAdjustmentPattern(s,u,h){for(let m=0;m<5;++m){const v=it.POSITION_ADJUSTMENT_PATTERN[m];for(let x=0;x<5;++x)h.setNumber(s+x,u+m,v[x])}}static embedPositionDetectionPattern(s,u,h){for(let m=0;m<7;++m){const v=it.POSITION_DETECTION_PATTERN[m];for(let x=0;x<7;++x)h.setNumber(s+x,u+m,v[x])}}static embedPositionDetectionPatternsAndSeparators(s){const u=it.POSITION_DETECTION_PATTERN[0].length;it.embedPositionDetectionPattern(0,0,s),it.embedPositionDetectionPattern(s.getWidth()-u,0,s),it.embedPositionDetectionPattern(0,s.getWidth()-u,s);const h=8;it.embedHorizontalSeparationPattern(0,h-1,s),it.embedHorizontalSeparationPattern(s.getWidth()-h,h-1,s),it.embedHorizontalSeparationPattern(0,s.getWidth()-h,s);const m=7;it.embedVerticalSeparationPattern(m,0,s),it.embedVerticalSeparationPattern(s.getHeight()-m-1,0,s),it.embedVerticalSeparationPattern(m,s.getHeight()-m,s)}static maybeEmbedPositionAdjustmentPatterns(s,u){if(s.getVersionNumber()<2)return;const h=s.getVersionNumber()-1,m=it.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[h];for(let v=0,x=m.length;v!==x;v++){const _=m[v];if(_>=0)for(let T=0;T!==x;T++){const R=m[T];R>=0&&it.isEmpty(u.get(R,_))&&it.embedPositionAdjustmentPattern(R-2,_-2,u)}}}}it.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),it.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),it.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),it.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),it.VERSION_INFO_POLY=7973,it.TYPE_INFO_POLY=1335,it.TYPE_INFO_MASK_PATTERN=21522;class Ag{constructor(s,u){this.dataBytes=s,this.errorCorrectionBytes=u}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class qt{constructor(){}static calculateMaskPenalty(s){return nn.applyMaskPenaltyRule1(s)+nn.applyMaskPenaltyRule2(s)+nn.applyMaskPenaltyRule3(s)+nn.applyMaskPenaltyRule4(s)}static encode(s,u,h=null){let m=qt.DEFAULT_BYTE_MODE_ENCODING;const v=h!==null&&h.get(Dn.CHARACTER_SET)!==void 0;v&&(m=h.get(Dn.CHARACTER_SET).toString());const x=this.chooseMode(s,m),_=new z;if(x===nt.BYTE&&(v||qt.DEFAULT_BYTE_MODE_ENCODING!==m)){const ke=X.getCharacterSetECIByName(m);ke!==void 0&&this.appendECI(ke,_)}this.appendModeInfo(x,_);const T=new z;this.appendBytes(s,x,T,m);let R;if(h!==null&&h.get(Dn.QR_VERSION)!==void 0){const ke=Number.parseInt(h.get(Dn.QR_VERSION).toString(),10);R=tt.getVersionForNumber(ke);const Ie=this.calculateBitsNeeded(x,_,T,R);if(!this.willFit(Ie,R,u))throw new $t("Data too big for requested version")}else R=this.recommendVersion(u,x,_,T);const B=new z;B.appendBitArray(_);const V=x===nt.BYTE?T.getSizeInBytes():s.length;this.appendLengthInfo(V,R,x,B),B.appendBitArray(T);const $=R.getECBlocksForLevel(u),Y=R.getTotalCodewords()-$.getTotalECCodewords();this.terminateBits(Y,B);const Q=this.interleaveWithECBytes(B,R.getTotalCodewords(),Y,$.getNumBlocks()),re=new Ko;re.setECLevel(u),re.setMode(x),re.setVersion(R);const oe=R.getDimensionForVersion(),pe=new Bl(oe,oe),Oe=this.chooseMaskPattern(Q,u,R,pe);return re.setMaskPattern(Oe),it.buildMatrix(Q,u,R,Oe,pe),re.setMatrix(pe),re}static recommendVersion(s,u,h,m){const v=this.calculateBitsNeeded(u,h,m,tt.getVersionForNumber(1)),x=this.chooseVersion(v,s),_=this.calculateBitsNeeded(u,h,m,x);return this.chooseVersion(_,s)}static calculateBitsNeeded(s,u,h,m){return u.getSize()+s.getCharacterCountBits(m)+h.getSize()}static getAlphanumericCode(s){return s<qt.ALPHANUMERIC_TABLE.length?qt.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,u=null){if(X.SJIS.getName()===u&&this.isOnlyDoubleByteKanji(s))return nt.KANJI;let h=!1,m=!1;for(let v=0,x=s.length;v<x;++v){const _=s.charAt(v);if(qt.isDigit(_))h=!0;else if(this.getAlphanumericCode(_.charCodeAt(0))!==-1)m=!0;else return nt.BYTE}return m?nt.ALPHANUMERIC:h?nt.NUMERIC:nt.BYTE}static isOnlyDoubleByteKanji(s){let u;try{u=se.encode(s,X.SJIS)}catch{return!1}const h=u.length;if(h%2!==0)return!1;for(let m=0;m<h;m+=2){const v=u[m]&255;if((v<129||v>159)&&(v<224||v>235))return!1}return!0}static chooseMaskPattern(s,u,h,m){let v=Number.MAX_SAFE_INTEGER,x=-1;for(let _=0;_<Ko.NUM_MASK_PATTERNS;_++){it.buildMatrix(s,u,h,_,m);let T=this.calculateMaskPenalty(m);T<v&&(v=T,x=_)}return x}static chooseVersion(s,u){for(let h=1;h<=40;h++){const m=tt.getVersionForNumber(h);if(qt.willFit(s,m,u))return m}throw new $t("Data too big")}static willFit(s,u,h){const m=u.getTotalCodewords(),x=u.getECBlocksForLevel(h).getTotalECCodewords(),_=m-x,T=(s+7)/8;return _>=T}static terminateBits(s,u){const h=s*8;if(u.getSize()>h)throw new $t("data bits cannot fit in the QR Code"+u.getSize()+" > "+h);for(let x=0;x<4&&u.getSize()<h;++x)u.appendBit(!1);const m=u.getSize()&7;if(m>0)for(let x=m;x<8;x++)u.appendBit(!1);const v=s-u.getSizeInBytes();for(let x=0;x<v;++x)u.appendBits((x&1)===0?236:17,8);if(u.getSize()!==h)throw new $t("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,u,h,m,v,x){if(m>=h)throw new $t("Block ID too large");const _=s%h,T=h-_,R=Math.floor(s/h),B=R+1,V=Math.floor(u/h),$=V+1,Y=R-V,Q=B-$;if(Y!==Q)throw new $t("EC bytes mismatch");if(h!==T+_)throw new $t("RS blocks mismatch");if(s!==(V+Y)*T+($+Q)*_)throw new $t("Total bytes mismatch");m<T?(v[0]=V,x[0]=Y):(v[0]=$,x[0]=Q)}static interleaveWithECBytes(s,u,h,m){if(s.getSizeInBytes()!==h)throw new $t("Number of bits and data bytes does not match");let v=0,x=0,_=0;const T=new Array;for(let B=0;B<m;++B){const V=new Int32Array(1),$=new Int32Array(1);qt.getNumDataBytesAndNumECBytesForBlockID(u,h,m,B,V,$);const Y=V[0],Q=new Uint8Array(Y);s.toBytes(8*v,Q,0,Y);const re=qt.generateECBytes(Q,$[0]);T.push(new Ag(Q,re)),x=Math.max(x,Y),_=Math.max(_,re.length),v+=V[0]}if(h!==v)throw new $t("Data bytes does not match offset");const R=new z;for(let B=0;B<x;++B)for(const V of T){const $=V.getDataBytes();B<$.length&&R.appendBits($[B],8)}for(let B=0;B<_;++B)for(const V of T){const $=V.getErrorCorrectionBytes();B<$.length&&R.appendBits($[B],8)}if(u!==R.getSizeInBytes())throw new $t("Interleaving error: "+u+" and "+R.getSizeInBytes()+" differ.");return R}static generateECBytes(s,u){const h=s.length,m=new Int32Array(h+u);for(let x=0;x<h;x++)m[x]=s[x]&255;new mc(Ke.QR_CODE_FIELD_256).encode(m,u);const v=new Uint8Array(u);for(let x=0;x<u;x++)v[x]=m[h+x];return v}static appendModeInfo(s,u){u.appendBits(s.getBits(),4)}static appendLengthInfo(s,u,h,m){const v=h.getCharacterCountBits(u);if(s>=1<<v)throw new $t(s+" is bigger than "+((1<<v)-1));m.appendBits(s,v)}static appendBytes(s,u,h,m){switch(u){case nt.NUMERIC:qt.appendNumericBytes(s,h);break;case nt.ALPHANUMERIC:qt.appendAlphanumericBytes(s,h);break;case nt.BYTE:qt.append8BitBytes(s,h,m);break;case nt.KANJI:qt.appendKanjiBytes(s,h);break;default:throw new $t("Invalid mode: "+u)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const u=qt.getDigit(s);return u>=0&&u<=9}static appendNumericBytes(s,u){const h=s.length;let m=0;for(;m<h;){const v=qt.getDigit(s.charAt(m));if(m+2<h){const x=qt.getDigit(s.charAt(m+1)),_=qt.getDigit(s.charAt(m+2));u.appendBits(v*100+x*10+_,10),m+=3}else if(m+1<h){const x=qt.getDigit(s.charAt(m+1));u.appendBits(v*10+x,7),m+=2}else u.appendBits(v,4),m++}}static appendAlphanumericBytes(s,u){const h=s.length;let m=0;for(;m<h;){const v=qt.getAlphanumericCode(s.charCodeAt(m));if(v===-1)throw new $t;if(m+1<h){const x=qt.getAlphanumericCode(s.charCodeAt(m+1));if(x===-1)throw new $t;u.appendBits(v*45+x,11),m+=2}else u.appendBits(v,6),m++}}static append8BitBytes(s,u,h){let m;try{m=se.encode(s,h)}catch(v){throw new $t(v)}for(let v=0,x=m.length;v!==x;v++){const _=m[v];u.appendBits(_,8)}}static appendKanjiBytes(s,u){let h;try{h=se.encode(s,X.SJIS)}catch(v){throw new $t(v)}const m=h.length;for(let v=0;v<m;v+=2){const x=h[v]&255,_=h[v+1]&255,T=x<<8&4294967295|_;let R=-1;if(T>=33088&&T<=40956?R=T-33088:T>=57408&&T<=60351&&(R=T-49472),R===-1)throw new $t("Invalid byte sequence");const B=(R>>8)*192+(R&255);u.appendBits(B,13)}}static appendECI(s,u){u.appendBits(nt.ECI.getBits(),4),u.appendBits(s.getValue(),8)}}qt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),qt.DEFAULT_BYTE_MODE_ENCODING=X.UTF8.getName();class Yo{write(s,u,h,m=null){if(s.length===0)throw new y("Found empty contents");if(u<0||h<0)throw new y("Requested dimensions are too small: "+u+"x"+h);let v=jt.L,x=Yo.QUIET_ZONE_SIZE;m!==null&&(m.get(Dn.ERROR_CORRECTION)!==void 0&&(v=jt.fromString(m.get(Dn.ERROR_CORRECTION).toString())),m.get(Dn.MARGIN)!==void 0&&(x=Number.parseInt(m.get(Dn.MARGIN).toString(),10)));const _=qt.encode(s,v,m);return this.renderResult(_,u,h,x)}writeToDom(s,u,h,m,v=null){typeof s=="string"&&(s=document.querySelector(s));const x=this.write(u,h,m,v);s&&s.appendChild(x)}renderResult(s,u,h,m){const v=s.getMatrix();if(v===null)throw new It;const x=v.getWidth(),_=v.getHeight(),T=x+m*2,R=_+m*2,B=Math.max(u,T),V=Math.max(h,R),$=Math.min(Math.floor(B/T),Math.floor(V/R)),Y=Math.floor((B-x*$)/2),Q=Math.floor((V-_*$)/2),re=this.createSVGElement(B,V);for(let oe=0,pe=Q;oe<_;oe++,pe+=$)for(let Oe=0,ke=Y;Oe<x;Oe++,ke+=$)if(v.get(Oe,oe)===1){const Ie=this.createSvgRectElement(ke,pe,$,$);re.appendChild(Ie)}return re}createSVGElement(s,u){const h=document.createElementNS(Yo.SVG_NS,"svg");return h.setAttributeNS(null,"height",s.toString()),h.setAttributeNS(null,"width",u.toString()),h}createSvgRectElement(s,u,h,m){const v=document.createElementNS(Yo.SVG_NS,"rect");return v.setAttributeNS(null,"x",s.toString()),v.setAttributeNS(null,"y",u.toString()),v.setAttributeNS(null,"height",h.toString()),v.setAttributeNS(null,"width",m.toString()),v.setAttributeNS(null,"fill","#000000"),v}}Yo.QUIET_ZONE_SIZE=4,Yo.SVG_NS="http://www.w3.org/2000/svg";class js{encode(s,u,h,m,v){if(s.length===0)throw new y("Found empty contents");if(u!==Ne.QR_CODE)throw new y("Can only encode QR_CODE, but got "+u);if(h<0||m<0)throw new y(`Requested dimensions are too small: ${h}x${m}`);let x=jt.L,_=js.QUIET_ZONE_SIZE;v!==null&&(v.get(Dn.ERROR_CORRECTION)!==void 0&&(x=jt.fromString(v.get(Dn.ERROR_CORRECTION).toString())),v.get(Dn.MARGIN)!==void 0&&(_=Number.parseInt(v.get(Dn.MARGIN).toString(),10)));const T=qt.encode(s,x,v);return js.renderResult(T,h,m,_)}static renderResult(s,u,h,m){const v=s.getMatrix();if(v===null)throw new It;const x=v.getWidth(),_=v.getHeight(),T=x+m*2,R=_+m*2,B=Math.max(u,T),V=Math.max(h,R),$=Math.min(Math.floor(B/T),Math.floor(V/R)),Y=Math.floor((B-x*$)/2),Q=Math.floor((V-_*$)/2),re=new fe(B,V);for(let oe=0,pe=Q;oe<_;oe++,pe+=$)for(let Oe=0,ke=Y;Oe<x;Oe++,ke+=$)v.get(Oe,oe)===1&&re.setRegion(ke,pe,$,$);return re}}js.QUIET_ZONE_SIZE=4;class Cg{encode(s,u,h,m,v){let x;switch(u){case Ne.QR_CODE:x=new js;break;default:throw new y("No encoder available for format "+u)}return x.encode(s,u,h,m,v)}}class ji extends xe{constructor(s,u,h,m,v,x,_,T){if(super(x,_),this.yuvData=s,this.dataWidth=u,this.dataHeight=h,this.left=m,this.top=v,m+x>u||v+_>h)throw new y("Crop rectangle does not fit within image data.");T&&this.reverseHorizontal(x,_)}getRow(s,u){if(s<0||s>=this.getHeight())throw new y("Requested row is outside the image: "+s);const h=this.getWidth();(u==null||u.length<h)&&(u=new Uint8ClampedArray(h));const m=(s+this.top)*this.dataWidth+this.left;return P.arraycopy(this.yuvData,m,u,0,h),u}getMatrix(){const s=this.getWidth(),u=this.getHeight();if(s===this.dataWidth&&u===this.dataHeight)return this.yuvData;const h=s*u,m=new Uint8ClampedArray(h);let v=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return P.arraycopy(this.yuvData,v,m,0,h),m;for(let x=0;x<u;x++){const _=x*s;P.arraycopy(this.yuvData,v,m,_,s),v+=this.dataWidth}return m}isCropSupported(){return!0}crop(s,u,h,m){return new ji(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+u,h,m,!1)}renderThumbnail(){const s=this.getWidth()/ji.THUMBNAIL_SCALE_FACTOR,u=this.getHeight()/ji.THUMBNAIL_SCALE_FACTOR,h=new Int32Array(s*u),m=this.yuvData;let v=this.top*this.dataWidth+this.left;for(let x=0;x<u;x++){const _=x*s;for(let T=0;T<s;T++){const R=m[v+T*ji.THUMBNAIL_SCALE_FACTOR]&255;h[_+T]=4278190080|R*65793}v+=this.dataWidth*ji.THUMBNAIL_SCALE_FACTOR}return h}getThumbnailWidth(){return this.getWidth()/ji.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ji.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,u){const h=this.yuvData;for(let m=0,v=this.top*this.dataWidth+this.left;m<u;m++,v+=this.dataWidth){const x=v+s/2;for(let _=v,T=v+s-1;_<x;_++,T--){const R=h[_];h[_]=h[T],h[T]=R}}}invert(){return new Ae(this)}}ji.THUMBNAIL_SCALE_FACTOR=2;class Pa extends xe{constructor(s,u,h,m,v,x,_){if(super(u,h),this.dataWidth=m,this.dataHeight=v,this.left=x,this.top=_,s.BYTES_PER_ELEMENT===4){const T=u*h,R=new Uint8ClampedArray(T);for(let B=0;B<T;B++){const V=s[B],$=V>>16&255,Y=V>>7&510,Q=V&255;R[B]=($+Y+Q)/4&255}this.luminances=R}else this.luminances=s;if(m===void 0&&(this.dataWidth=u),v===void 0&&(this.dataHeight=h),x===void 0&&(this.left=0),_===void 0&&(this.top=0),this.left+u>this.dataWidth||this.top+h>this.dataHeight)throw new y("Crop rectangle does not fit within image data.")}getRow(s,u){if(s<0||s>=this.getHeight())throw new y("Requested row is outside the image: "+s);const h=this.getWidth();(u==null||u.length<h)&&(u=new Uint8ClampedArray(h));const m=(s+this.top)*this.dataWidth+this.left;return P.arraycopy(this.luminances,m,u,0,h),u}getMatrix(){const s=this.getWidth(),u=this.getHeight();if(s===this.dataWidth&&u===this.dataHeight)return this.luminances;const h=s*u,m=new Uint8ClampedArray(h);let v=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return P.arraycopy(this.luminances,v,m,0,h),m;for(let x=0;x<u;x++){const _=x*s;P.arraycopy(this.luminances,v,m,_,s),v+=this.dataWidth}return m}isCropSupported(){return!0}crop(s,u,h,m){return new Pa(this.luminances,h,m,this.dataWidth,this.dataHeight,this.left+s,this.top+u)}invert(){return new Ae(this)}}class ff extends X{static forName(s){return this.getCharacterSetECIByName(s)}}class vc{}vc.ISO_8859_1=X.ISO8859_1;class hf{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class yc{static singletonList(s){return[s]}static min(s,u){return s.sort(u)[0]}}class Sg{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Vs extends Sg{constructor(s,u,h){super(s),this.value=u,this.bitCount=h}appendTo(s,u){s.appendBits(this.value,this.bitCount)}add(s,u){return new Vs(this,s,u)}addBinaryShift(s,u){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Vs(this,s,u)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+F.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class xc extends Vs{constructor(s,u,h){super(s,0,0),this.binaryShiftStart=u,this.binaryShiftByteCount=h}appendTo(s,u){for(let h=0;h<this.binaryShiftByteCount;h++)(h===0||h===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):h===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(u[this.binaryShiftStart+h],8)}addBinaryShift(s,u){return new xc(this,s,u)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Tg(j,s,u){return new xc(j,s,u)}function Na(j,s,u){return new Vs(j,s,u)}const Ig=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Oo=0,Gs=1,cr=2,pf=3,wi=4,gf=new Vs(null,0,0),Fl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function mf(j){for(let s of j)U.fill(s,-1);return j[Oo][wi]=0,j[Gs][wi]=0,j[Gs][Oo]=28,j[pf][wi]=0,j[cr][wi]=0,j[cr][Oo]=15,j}const wc=mf(U.createInt32Array(6,6));class br{constructor(s,u,h,m){this.token=s,this.mode=u,this.binaryShiftByteCount=h,this.bitCount=m}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,u){let h=this.bitCount,m=this.token;if(s!==this.mode){let x=Fl[this.mode][s];m=Na(m,x&65535,x>>16),h+=x>>16}let v=s===cr?4:5;return m=Na(m,u,v),new br(m,s,0,h+v)}shiftAndAppend(s,u){let h=this.token,m=this.mode===cr?4:5;return h=Na(h,wc[this.mode][s],m),h=Na(h,u,5),new br(h,this.mode,0,this.bitCount+m+5)}addBinaryShiftChar(s){let u=this.token,h=this.mode,m=this.bitCount;if(this.mode===wi||this.mode===cr){let _=Fl[h][Oo];u=Na(u,_&65535,_>>16),m+=_>>16,h=Oo}let v=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,x=new br(u,h,this.binaryShiftByteCount+1,m+v);return x.binaryShiftByteCount===2078&&(x=x.endBinaryShift(s+1)),x}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let u=this.token;return u=Tg(u,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new br(u,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let u=this.bitCount+(Fl[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?u+=br.calculateBinaryShiftCost(s)-br.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(u+=10),u<=s.bitCount}toBitArray(s){let u=[];for(let m=this.endBinaryShift(s.length).token;m!==null;m=m.getPrevious())u.unshift(m);let h=new z;for(const m of u)m.appendTo(h,s);return h}toString(){return ae.format("%s bits=%d bytes=%d",Ig[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}br.INITIAL_STATE=new br(gf,Oo,0,0);function Pg(j){const s=ae.getCharCode(" "),u=ae.getCharCode("."),h=ae.getCharCode(",");j[Oo][s]=1;const m=ae.getCharCode("Z"),v=ae.getCharCode("A");for(let $=v;$<=m;$++)j[Oo][$]=$-v+2;j[Gs][s]=1;const x=ae.getCharCode("z"),_=ae.getCharCode("a");for(let $=_;$<=x;$++)j[Gs][$]=$-_+2;j[cr][s]=1;const T=ae.getCharCode("9"),R=ae.getCharCode("0");for(let $=R;$<=T;$++)j[cr][$]=$-R+2;j[cr][h]=12,j[cr][u]=13;const B=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let $=0;$<B.length;$++)j[pf][ae.getCharCode(B[$])]=$;const V=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let $=0;$<V.length;$++)ae.getCharCode(V[$])>0&&(j[wi][ae.getCharCode(V[$])]=$);return j}const Ec=Pg(U.createInt32Array(5,256));class Ra{constructor(s){this.text=s}encode(){const s=ae.getCharCode(" "),u=ae.getCharCode(`
`);let h=yc.singletonList(br.INITIAL_STATE);for(let v=0;v<this.text.length;v++){let x,_=v+1<this.text.length?this.text[v+1]:0;switch(this.text[v]){case ae.getCharCode("\r"):x=_===u?2:0;break;case ae.getCharCode("."):x=_===s?3:0;break;case ae.getCharCode(","):x=_===s?4:0;break;case ae.getCharCode(":"):x=_===s?5:0;break;default:x=0}x>0?(h=Ra.updateStateListForPair(h,v,x),v++):h=this.updateStateListForChar(h,v)}return yc.min(h,(v,x)=>v.getBitCount()-x.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,u){const h=[];for(let m of s)this.updateStateForChar(m,u,h);return Ra.simplifyStates(h)}updateStateForChar(s,u,h){let m=this.text[u]&255,v=Ec[s.getMode()][m]>0,x=null;for(let _=0;_<=wi;_++){let T=Ec[_][m];if(T>0){if(x==null&&(x=s.endBinaryShift(u)),!v||_===s.getMode()||_===cr){const R=x.latchAndAppend(_,T);h.push(R)}if(!v&&wc[s.getMode()][_]>=0){const R=x.shiftAndAppend(_,T);h.push(R)}}}if(s.getBinaryShiftByteCount()>0||Ec[s.getMode()][m]===0){let _=s.addBinaryShiftChar(u);h.push(_)}}static updateStateListForPair(s,u,h){const m=[];for(let v of s)this.updateStateForPair(v,u,h,m);return this.simplifyStates(m)}static updateStateForPair(s,u,h,m){let v=s.endBinaryShift(u);if(m.push(v.latchAndAppend(wi,h)),s.getMode()!==wi&&m.push(v.shiftAndAppend(wi,h)),h===3||h===4){let x=v.latchAndAppend(cr,16-h).latchAndAppend(cr,1);m.push(x)}if(s.getBinaryShiftByteCount()>0){let x=s.addBinaryShiftChar(u).addBinaryShiftChar(u+1);m.push(x)}}static simplifyStates(s){let u=[];for(const h of s){let m=!0;for(const v of u){if(v.isBetterThanOrEqualTo(h)){m=!1;break}h.isBetterThanOrEqualTo(v)&&(u=u.filter(x=>x!==v))}m&&u.push(h)}return u}}class St{constructor(){}static encodeBytes(s){return St.encode(s,St.DEFAULT_EC_PERCENT,St.DEFAULT_AZTEC_LAYERS)}static encode(s,u,h){let m=new Ra(s).encode(),v=F.truncDivision(m.getSize()*u,100)+11,x=m.getSize()+v,_,T,R,B,V;if(h!==St.DEFAULT_AZTEC_LAYERS){if(_=h<0,T=Math.abs(h),T>(_?St.MAX_NB_BITS_COMPACT:St.MAX_NB_BITS))throw new y(ae.format("Illegal value %s for layers",h));R=St.totalBitsInLayer(T,_),B=St.WORD_SIZE[T];let Ie=R-R%B;if(V=St.stuffBits(m,B),V.getSize()+v>Ie)throw new y("Data to large for user specified layer");if(_&&V.getSize()>B*64)throw new y("Data to large for user specified layer")}else{B=0,V=null;for(let Ie=0;;Ie++){if(Ie>St.MAX_NB_BITS)throw new y("Data too large for an Aztec code");if(_=Ie<=3,T=_?Ie+1:Ie,R=St.totalBitsInLayer(T,_),x>R)continue;(V==null||B!==St.WORD_SIZE[T])&&(B=St.WORD_SIZE[T],V=St.stuffBits(m,B));let wt=R-R%B;if(!(_&&V.getSize()>B*64)&&V.getSize()+v<=wt)break}}let $=St.generateCheckWords(V,R,B),Y=V.getSize()/B,Q=St.generateModeMessage(_,T,Y),re=(_?11:14)+T*4,oe=new Int32Array(re),pe;if(_){pe=re;for(let Ie=0;Ie<oe.length;Ie++)oe[Ie]=Ie}else{pe=re+1+2*F.truncDivision(F.truncDivision(re,2)-1,15);let Ie=F.truncDivision(re,2),wt=F.truncDivision(pe,2);for(let pt=0;pt<Ie;pt++){let Mr=pt+F.truncDivision(pt,15);oe[Ie-pt-1]=wt-Mr-1,oe[Ie+pt]=wt+Mr+1}}let Oe=new fe(pe);for(let Ie=0,wt=0;Ie<T;Ie++){let pt=(T-Ie)*4+(_?9:12);for(let Mr=0;Mr<pt;Mr++){let Ei=Mr*2;for(let Ln=0;Ln<2;Ln++)$.get(wt+Ei+Ln)&&Oe.set(oe[Ie*2+Ln],oe[Ie*2+Mr]),$.get(wt+pt*2+Ei+Ln)&&Oe.set(oe[Ie*2+Mr],oe[re-1-Ie*2-Ln]),$.get(wt+pt*4+Ei+Ln)&&Oe.set(oe[re-1-Ie*2-Ln],oe[re-1-Ie*2-Mr]),$.get(wt+pt*6+Ei+Ln)&&Oe.set(oe[re-1-Ie*2-Mr],oe[Ie*2+Ln])}wt+=pt*8}if(St.drawModeMessage(Oe,_,pe,Q),_)St.drawBullsEye(Oe,F.truncDivision(pe,2),5);else{St.drawBullsEye(Oe,F.truncDivision(pe,2),7);for(let Ie=0,wt=0;Ie<F.truncDivision(re,2)-1;Ie+=15,wt+=16)for(let pt=F.truncDivision(pe,2)&1;pt<pe;pt+=2)Oe.set(F.truncDivision(pe,2)-wt,pt),Oe.set(F.truncDivision(pe,2)+wt,pt),Oe.set(pt,F.truncDivision(pe,2)-wt),Oe.set(pt,F.truncDivision(pe,2)+wt)}let ke=new hf;return ke.setCompact(_),ke.setSize(pe),ke.setLayers(T),ke.setCodeWords(Y),ke.setMatrix(Oe),ke}static drawBullsEye(s,u,h){for(let m=0;m<h;m+=2)for(let v=u-m;v<=u+m;v++)s.set(v,u-m),s.set(v,u+m),s.set(u-m,v),s.set(u+m,v);s.set(u-h,u-h),s.set(u-h+1,u-h),s.set(u-h,u-h+1),s.set(u+h,u-h),s.set(u+h,u-h+1),s.set(u+h,u+h-1)}static generateModeMessage(s,u,h){let m=new z;return s?(m.appendBits(u-1,2),m.appendBits(h-1,6),m=St.generateCheckWords(m,28,4)):(m.appendBits(u-1,5),m.appendBits(h-1,11),m=St.generateCheckWords(m,40,4)),m}static drawModeMessage(s,u,h,m){let v=F.truncDivision(h,2);if(u)for(let x=0;x<7;x++){let _=v-3+x;m.get(x)&&s.set(_,v-5),m.get(x+7)&&s.set(v+5,_),m.get(20-x)&&s.set(_,v+5),m.get(27-x)&&s.set(v-5,_)}else for(let x=0;x<10;x++){let _=v-5+x+F.truncDivision(x,5);m.get(x)&&s.set(_,v-7),m.get(x+10)&&s.set(v+7,_),m.get(29-x)&&s.set(_,v+7),m.get(39-x)&&s.set(v-7,_)}}static generateCheckWords(s,u,h){let m=s.getSize()/h,v=new mc(St.getGF(h)),x=F.truncDivision(u,h),_=St.bitsToWords(s,h,x);v.encode(_,x-m);let T=u%h,R=new z;R.appendBits(0,T);for(const B of Array.from(_))R.appendBits(B,h);return R}static bitsToWords(s,u,h){let m=new Int32Array(h),v,x;for(v=0,x=s.getSize()/u;v<x;v++){let _=0;for(let T=0;T<u;T++)_|=s.get(v*u+T)?1<<u-T-1:0;m[v]=_}return m}static getGF(s){switch(s){case 4:return Ke.AZTEC_PARAM;case 6:return Ke.AZTEC_DATA_6;case 8:return Ke.AZTEC_DATA_8;case 10:return Ke.AZTEC_DATA_10;case 12:return Ke.AZTEC_DATA_12;default:throw new y("Unsupported word size "+s)}}static stuffBits(s,u){let h=new z,m=s.getSize(),v=(1<<u)-2;for(let x=0;x<m;x+=u){let _=0;for(let T=0;T<u;T++)(x+T>=m||s.get(x+T))&&(_|=1<<u-1-T);(_&v)===v?(h.appendBits(_&v,u),x--):(_&v)===0?(h.appendBits(_|1,u),x--):h.appendBits(_,u)}return h}static totalBitsInLayer(s,u){return((u?88:112)+16*s)*s}}St.DEFAULT_EC_PERCENT=33,St.DEFAULT_AZTEC_LAYERS=0,St.MAX_NB_BITS=32,St.MAX_NB_BITS_COMPACT=4,St.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Oa{encode(s,u,h,m){return this.encodeWithHints(s,u,h,m,null)}encodeWithHints(s,u,h,m,v){let x=vc.ISO_8859_1,_=St.DEFAULT_EC_PERCENT,T=St.DEFAULT_AZTEC_LAYERS;return v!=null&&(v.has(Dn.CHARACTER_SET)&&(x=ff.forName(v.get(Dn.CHARACTER_SET).toString())),v.has(Dn.ERROR_CORRECTION)&&(_=F.parseInt(v.get(Dn.ERROR_CORRECTION).toString())),v.has(Dn.AZTEC_LAYERS)&&(T=F.parseInt(v.get(Dn.AZTEC_LAYERS).toString()))),Oa.encodeLayers(s,u,h,m,x,_,T)}static encodeLayers(s,u,h,m,v,x,_){if(u!==Ne.AZTEC)throw new y("Can only encode AZTEC, but got "+u);let T=St.encode(ae.getBytes(s,v),x,_);return Oa.renderResult(T,h,m)}static renderResult(s,u,h){let m=s.getMatrix();if(m==null)throw new It;let v=m.getWidth(),x=m.getHeight(),_=Math.max(u,v),T=Math.max(h,x),R=Math.min(_/v,T/x),B=(_-v*R)/2,V=(T-x*R)/2,$=new fe(_,T);for(let Y=0,Q=V;Y<x;Y++,Q+=R)for(let re=0,oe=B;re<v;re++,oe+=R)m.get(re,Y)&&$.setRegion(oe,Q,R,R);return $}}n.AbstractExpandedDecoder=sc,n.ArgumentException=g,n.ArithmeticException=_e,n.AztecCode=hf,n.AztecCodeReader=Io,n.AztecCodeWriter=Oa,n.AztecDecoder=Rt,n.AztecDetector=Os,n.AztecDetectorResult=tc,n.AztecEncoder=St,n.AztecHighLevelEncoder=Ra,n.AztecPoint=lr,n.BarcodeFormat=Ne,n.Binarizer=I,n.BinaryBitmap=E,n.BitArray=z,n.BitMatrix=fe,n.BitSource=uc,n.BrowserAztecCodeReader=bg,n.BrowserBarcodeReader=of,n.BrowserCodeReader=Fe,n.BrowserDatamatrixCodeReader=_g,n.BrowserMultiFormatReader=Ia,n.BrowserPDF417Reader=Ll,n.BrowserQRCodeReader=df,n.BrowserQRCodeSvgWriter=Yo,n.CharacterSetECI=X,n.ChecksumException=C,n.Code128Reader=Be,n.Code39Reader=kn,n.DataMatrixDecodedBitStreamParser=vi,n.DataMatrixReader=yi,n.DecodeHintType=H,n.DecoderResult=Ee,n.DefaultGridSampler=Il,n.DetectorResult=Rs,n.EAN13Reader=Qr,n.EncodeHintType=Dn,n.Exception=d,n.FormatException=W,n.GenericGF=Ke,n.GenericGFPoly=Me,n.GlobalHistogramBinarizer=we,n.GridSampler=Tl,n.GridSamplerInstance=pi,n.HTMLCanvasElementLuminanceSource=Ce,n.HybridBinarizer=me,n.ITFReader=Lt,n.IllegalArgumentException=y,n.IllegalStateException=It,n.InvertedLuminanceSource=Ae,n.LuminanceSource=xe,n.MathUtils=_t,n.MultiFormatOneDReader=Ms,n.MultiFormatReader=Dl,n.MultiFormatWriter=Cg,n.NotFoundException=ne,n.OneDReader=yn,n.PDF417DecodedBitStreamParser=ge,n.PDF417DecoderErrorCorrection=fc,n.PDF417Reader=er,n.PDF417ResultMetadata=kl,n.PerspectiveTransform=Zr,n.PlanarYUVLuminanceSource=ji,n.QRCodeByteMatrix=Bl,n.QRCodeDataMask=yt,n.QRCodeDecodedBitStreamParser=tn,n.QRCodeDecoderErrorCorrectionLevel=jt,n.QRCodeDecoderFormatInformation=Jn,n.QRCodeEncoder=qt,n.QRCodeEncoderQRCode=Ko,n.QRCodeMaskUtil=nn,n.QRCodeMatrixUtil=it,n.QRCodeMode=nt,n.QRCodeReader=Er,n.QRCodeVersion=tt,n.QRCodeWriter=js,n.RGBLuminanceSource=Pa,n.RSS14Reader=Kt,n.RSSExpandedReader=Se,n.ReaderException=Us,n.ReedSolomonDecoder=Cn,n.ReedSolomonEncoder=mc,n.ReedSolomonException=dt,n.Result=Le,n.ResultMetadataType=rt,n.ResultPoint=Ge,n.StringUtils=ae,n.UnsupportedOperationException=ye,n.VideoInputDevice=te,n.WhiteRectangleDetector=Di,n.WriterException=$t,n.ZXingArrays=U,n.ZXingCharset=ff,n.ZXingInteger=F,n.ZXingStandardCharsets=vc,n.ZXingStringBuilder=be,n.ZXingStringEncoding=se,n.ZXingSystem=P,n.createAbstractExpandedDecoder=nf,Object.defineProperty(n,"__esModule",{value:!0})}))})(id,id.exports)),id.exports}var cn=bG();const _G=ro(cn),AG=Tx({__proto__:null,default:_G},[cn]);var uC=(function(){function t(e,n,r){if(this.formatMap=new Map([[ze.QR_CODE,cn.BarcodeFormat.QR_CODE],[ze.AZTEC,cn.BarcodeFormat.AZTEC],[ze.CODABAR,cn.BarcodeFormat.CODABAR],[ze.CODE_39,cn.BarcodeFormat.CODE_39],[ze.CODE_93,cn.BarcodeFormat.CODE_93],[ze.CODE_128,cn.BarcodeFormat.CODE_128],[ze.DATA_MATRIX,cn.BarcodeFormat.DATA_MATRIX],[ze.MAXICODE,cn.BarcodeFormat.MAXICODE],[ze.ITF,cn.BarcodeFormat.ITF],[ze.EAN_13,cn.BarcodeFormat.EAN_13],[ze.EAN_8,cn.BarcodeFormat.EAN_8],[ze.PDF_417,cn.BarcodeFormat.PDF_417],[ze.RSS_14,cn.BarcodeFormat.RSS_14],[ze.RSS_EXPANDED,cn.BarcodeFormat.RSS_EXPANDED],[ze.UPC_A,cn.BarcodeFormat.UPC_A],[ze.UPC_E,cn.BarcodeFormat.UPC_E],[ze.UPC_EAN_EXTENSION,cn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!AG)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(e),o=new Map;o.set(cn.DecodeHintType.POSSIBLE_FORMATS,i),o.set(cn.DecodeHintType.TRY_HARDER,!1),this.hints=o}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,i){try{r(n.decode(e))}catch(o){i(o)}})},t.prototype.decode=function(e){var n=new cn.MultiFormatReader(this.verbose,this.hints),r=new cn.HTMLCanvasElementLuminanceSource(e),i=new cn.BinaryBitmap(new cn.HybridBinarizer(r)),o=n.decode(i);return{text:o.text,format:jO.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t})(),CG=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(g){try{d(r.next(g))}catch(y){a(y)}}function f(g){try{d(r.throw(g))}catch(y){a(y)}}function d(g){g.done?o(g.value):i(g.value).then(c,f)}d((r=r.apply(t,e||[])).next())})},SG=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(g){return f([d,g])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(g){d=[6,g],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},cC=(function(){function t(e,n,r){if(this.formatMap=new Map([[ze.QR_CODE,"qr_code"],[ze.AZTEC,"aztec"],[ze.CODABAR,"codabar"],[ze.CODE_39,"code_39"],[ze.CODE_93,"code_93"],[ze.CODE_128,"code_128"],[ze.DATA_MATRIX,"data_matrix"],[ze.ITF,"itf"],[ze.EAN_13,"ean_13"],[ze.EAN_8,"ean_8"],[ze.PDF_417,"pdf417"],[ze.UPC_A,"upc_a"],[ze.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return CG(this,void 0,void 0,function(){var n,r;return SG(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:jO.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,i=0,o=e;i<o.length;i++){var a=o[i],c=a.boundingBox.width*a.boundingBox.height;c>r&&(r=c,n=a)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t})(),dC=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(g){try{d(r.next(g))}catch(y){a(y)}}function f(g){try{d(r.throw(g))}catch(y){a(y)}}function d(g){g.done?o(g.value):i(g.value).then(c,f)}d((r=r.apply(t,e||[])).next())})},fC=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(g){return f([d,g])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(g){d=[6,g],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},TG=(function(){function t(e,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&cC.isSupported()?(this.primaryDecoder=new cC(e,r,i),this.secondaryDecoder=new uC(e,r,i)):this.primaryDecoder=new uC(e,r,i)}return t.prototype.decodeAsync=function(e){return dC(this,void 0,void 0,function(){var n;return fC(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return dC(this,void 0,void 0,function(){var n,r;return fC(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];e+=i}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t})(),Yx=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),m0=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(g){try{d(r.next(g))}catch(y){a(y)}}function f(g){try{d(r.throw(g))}catch(y){a(y)}}function d(g){g.done?o(g.value):i(g.value).then(c,f)}d((r=r.apply(t,e||[])).next())})},v0=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(g){return f([d,g])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(g){d=[6,g],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},GO=(function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t})(),IG=(function(t){Yx(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(GO),PG=(function(t){Yx(e,t);function e(n){return t.call(this,"zoom",n)||this}return e})(IG),NG=(function(t){Yx(e,t);function e(n){return t.call(this,"torch",n)||this}return e})(GO),RG=(function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new PG(this.track)},t.prototype.torchFeature=function(){return new NG(this.track)},t})(),OG=(function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return m0(this,void 0,void 0,function(){var o,a;return v0(this,function(c){switch(c.label){case 0:return o=new t(e,n,i),r.aspectRatio?(a={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(a)]):[3,2];case 1:c.sent(),c.label=2;case 2:return o.setupSurface(),[2,o]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return m0(this,void 0,void 0,function(){return v0(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var i=e.mediaStream.getVideoTracks(),o=i.length,a=0;e.mediaStream.getVideoTracks().forEach(function(c){e.mediaStream.removeTrack(c),c.stop(),++a,a>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new RG(this.getFirstTrackOrFail())},t})(),kG=(function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return m0(this,void 0,void 0,function(){return v0(this,function(i){return[2,OG.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return m0(this,void 0,void 0,function(){var n,r;return v0(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}})})},t})(),hC=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(g){try{d(r.next(g))}catch(y){a(y)}}function f(g){try{d(r.throw(g))}catch(y){a(y)}}function d(g){g.done?o(g.value):i(g.value).then(c,f)}d((r=r.apply(t,e||[])).next())})},pC=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(g){return f([d,g])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(g){d=[6,g],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},MG=(function(){function t(){}return t.failIfNotSupported=function(){return hC(this,void 0,void 0,function(){return pC(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return hC(this,void 0,void 0,function(){return pC(this,function(n){return[2,kG.create(e)]})})},t})(),DG=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(g){try{d(r.next(g))}catch(y){a(y)}}function f(g){try{d(r.throw(g))}catch(y){a(y)}}function d(g){g.done?o(g.value):i(g.value).then(c,f)}d((r=r.apply(t,e||[])).next())})},LG=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(g){return f([d,g])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(g){d=[6,g],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},BG=(function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=vu.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=vu.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return DG(this,void 0,void 0,function(){var e,n,r,i,o,a,c;return LG(this,function(f){switch(f.label){case 0:return e=function(d){for(var g=d.getVideoTracks(),y=0,E=g;y<E.length;y++){var C=E[y];C.enabled=!1,C.stop(),d.removeTrack(C)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=f.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=f.sent(),i=[],o=0,a=r;o<a.length;o++)c=a[o],c.kind==="videoinput"&&i.push({id:c.deviceId,label:c.label});return e(n),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(o){for(var a=[],c=0,f=o;c<f.length;c++){var d=f[c];d.kind==="video"&&a.push({id:d.id,label:d.label})}e(a)},i=MediaStreamTrack;i.getSources(r)})},t})(),Nn;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Nn||(Nn={}));var FG=(function(){function t(){this.state=Nn.NOT_STARTED,this.onGoingTransactionNewState=Nn.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Nn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Nn.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Nn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Nn.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Nn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Nn.UNKNOWN:throw"Transition from unknown is not allowed";case Nn.NOT_STARTED:this.failIfNewStateIs(e,[Nn.PAUSED]);break;case Nn.SCANNING:break;case Nn.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t})(),UG=(function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Nn.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Nn.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Nn.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Nn.PAUSED},t})(),jG=(function(){function t(){}return t.create=function(){return new UG(new FG)},t})(),VG=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ci=(function(t){VG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(yG),GG=(function(){function t(e,n){this.logger=n,this.fps=Ci.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ci.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?VO.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!as(this.qrbox)},t.create=function(e,n){return new t(e,n)},t})(),zG=(function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new wG(this.verbose),this.qrcode=new TG(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=jG.create()}return t.prototype.start=function(e,n,r,i){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var a;i?a=i:a=this.verbose?this.logger.log:function(){};var c=GG.create(n,this.logger);this.clearElement();var f=!1;c.videoConstraints&&(c.isMediaStreamConstraintsValid()?f=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=f,g=document.getElementById(this.elementId);g.clientWidth?g.clientWidth:Ci.DEFAULT_WIDTH,g.style.position="relative",this.shouldScan=!0,this.element=g;var y=this,E=this.stateManagerProxy.startTransition(Nn.SCANNING);return new Promise(function(C,I){var P=d?c.videoConstraints:y.createVideoConstraints(e);if(!P){E.cancel(),I("videoConstraints should be defined");return}var N={};(!d||c.aspectRatio)&&(N.aspectRatio=c.aspectRatio);var L={onRenderSurfaceReady:function(U,F){y.setupUi(U,F,c),y.isScanning=!0,y.foreverScan(c,r,a)}};MG.failIfNotSupported().then(function(U){U.create(P).then(function(F){return F.render(o.element,N,L).then(function(z){y.renderedCamera=z,E.execute(),C(null)}).catch(function(z){E.cancel(),I(z)})}).catch(function(F){E.cancel(),I(vu.errorGettingUserMedia(F))})}).catch(function(U){E.cancel(),I(vu.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Nn.PAUSED),this.showPausedState(),(as(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Nn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Nn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var o=document.getElementById(Ci.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(as(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var a=new Image;a.onload=function(){var c=a.width,f=a.height,d=document.getElementById(r.elementId),g=d.clientWidth?d.clientWidth:Ci.DEFAULT_WIDTH,y=Math.max(d.clientHeight?d.clientHeight:f,Ci.FILE_SCAN_MIN_HEIGHT),E=r.computeCanvasDrawConfig(c,f,g,y);if(n){var C=r.createCanvasElement(g,y,"qr-canvas-visible");C.style.display="inline-block",d.appendChild(C);var I=C.getContext("2d");if(!I)throw"Unable to get 2d context from canvas";I.canvas.width=g,I.canvas.height=y,I.drawImage(a,0,0,c,f,E.x,E.y,E.width,E.height)}var P=Ci.FILE_SCAN_HIDDEN_CANVAS_PADDING,N=Math.max(a.width,E.width),L=Math.max(a.height,E.height),U=N+2*P,F=L+2*P,z=r.createCanvasElement(U,F);d.appendChild(z);var q=z.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=U,q.canvas.height=F,q.drawImage(a,0,0,c,f,P,P,N,L);try{r.qrcode.decodeRobustlyAsync(z).then(function(H){i(aC.createFromQrcodeResult(H))}).catch(o)}catch(H){o("QR code parse error, error = ".concat(H))}},a.onerror=o,a.onabort=o,a.onstalled=o,a.onsuspend=o,a.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return BG.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!VO.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[ze.QR_CODE,ze.AZTEC,ze.CODABAR,ze.CODE_39,ze.CODE_93,ze.CODE_128,ze.DATA_MATRIX,ze.MAXICODE,ze.ITF,ze.EAN_13,ze.EAN_8,ze.PDF_417,ze.RSS_14,ze.RSS_EXPANDED,ze.UPC_A,ze.UPC_E,ze.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=e.formatsToSupport;i<o.length;i++){var a=o[i];vG(a)?r.push(a):this.logger.warn("Invalid format: ".concat(a," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(as(e))return!0;if(!as(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(as(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return as(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var a=this.toQrdimensions(e,n,o),c=function(d){if(d<Ci.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ci.MIN_QR_BOX_SIZE,"px.")},f=function(d){return d>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=e),d};c(a.width),c(a.height),a.width=f(a.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var i=as(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,n,i);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var a=r.isShadedBoxEnabled()&&o.height<=n,c={x:0,y:0,width:e,height:n},f=a?this.getShadedRegionBounds(e,n,o):c,d=this.createCanvasElement(f.width,f.height),g={willReadFrequently:!0},y=d.getContext("2d",g);y.canvas.width=f.width,y.canvas.height=f.height,this.element.append(d),a&&this.possiblyInsertShadingElement(this.element,e,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=f,this.context=y,this.canvasElement=d},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=vu.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,aC.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=vu.codeParseError(i);return n(o,xG.createFrom(o)),!1})},t.prototype.foreverScan=function(e,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),a=o.videoWidth/o.clientWidth,c=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var f=this.qrRegion.width*a,d=this.qrRegion.height*c,g=this.qrRegion.x*a,y=this.qrRegion.y*c;this.context.drawImage(o,g,y,f,d,0,0,this.qrRegion.width,this.qrRegion.height);var E=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,n,r)},i.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(C){!C&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){E()})):E()}).catch(function(C){i.logger.logError("Error happend while scanning context",C),E()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",a=function(I){if(I in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(I,"'")},c=Object.keys(e);if(c.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(c.length," keys");var f=Object.keys(e)[0];if(f!==n&&f!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(f===n){var d=e.facingMode;if(typeof d=="string"){if(a(d))return{facingMode:d}}else if(typeof d=="object")if(o in d){if(a(d["".concat(o)]))return{facingMode:{exact:d["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var g=typeof d;throw"Invalid type of 'facingMode' = ".concat(g)}}else{var y=e.deviceId;if(typeof y=="string")return{deviceId:y};if(typeof y=="object"){if(o in y)return{deviceId:{exact:y["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var E=typeof y;throw"Invalid type of 'deviceId' = ".concat(E)}}}var C=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(C)},t.prototype.computeCanvasDrawConfig=function(e,n,r,i){if(e<=r&&n<=i){var o=(r-e)/2,a=(i-n)/2;return{x:o,y:a,width:e,height:n}}else{var c=e,f=n;return e>r&&(n=r/e*n,e=r),n>i&&(e=i/n*e,n=i),this.logger.log("Image downsampled from "+"".concat(c,"X").concat(f)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Ci.BORDER_SHADER_MATCH_COLOR:Ci.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var i=e,o=n,a=document.createElement("canvas");return a.style.width="".concat(i,"px"),a.style.height="".concat(o,"px"),a.style.display="none",a.id=as(r)?"qr-canvas":r,a},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,i){if(!(n-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var a=(n-i.width)/2,c=(r-i.height)/2;if(o.style.borderLeft="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(Ci.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var f=5,d=40;this.insertShaderBorders(o,d,f,-f,null,0,!0),this.insertShaderBorders(o,d,f,-f,null,0,!1),this.insertShaderBorders(o,d,f,null,-f,0,!0),this.insertShaderBorders(o,d,f,null,-f,0,!1),this.insertShaderBorders(o,f,d+f,-f,null,-f,!0),this.insertShaderBorders(o,f,d+f,null,-f,-f,!0),this.insertShaderBorders(o,f,d+f,-f,null,-f,!1),this.insertShaderBorders(o,f,d+f,null,-f,-f,!1),this.hasBorderShaders=!0}e.append(o)}},t.prototype.insertShaderBorders=function(e,n,r,i,o,a,c){var f=document.createElement("div");f.style.position="absolute",f.style.backgroundColor=Ci.BORDER_SHADER_DEFAULT_COLOR,f.style.width="".concat(n,"px"),f.style.height="".concat(r,"px"),i!==null&&(f.style.top="".concat(i,"px")),o!==null&&(f.style.bottom="".concat(o,"px")),c?f.style.left="".concat(a,"px"):f.style.right="".concat(a,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(f),e.appendChild(f)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t})(),gC;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(gC||(gC={}));const $G=({onLogout:t})=>{const[e,n]=M.useState(""),[r,i]=M.useState(""),[o,a]=M.useState(!1),[c,f]=M.useState(null),[d,g]=M.useState("loyalty"),[y,E]=M.useState("Corte"),[C,I]=M.useState("7000"),[P,N]=M.useState("0"),[L,U]=M.useState(null);M.useEffect(()=>{if(o&&!c){const Z=new zG("reader"),X={fps:10,qrbox:{width:250,height:250}};return Z.start({facingMode:"environment"},X,z,q).catch(ye=>{console.error("Error starting scanner:",ye),i("Error iniciando cmara: "+ye)}),()=>{Z.stop().then(()=>Z.clear()).catch(console.error)}}},[o,c]);const F=async(Z,X,ye,se)=>{if(X<=0)return;const{error:ae}=await Un.from("transactions").insert({client_id:Z,amount:X,type:ye,description:se});ae&&console.error("Error recording transaction:",ae)},z=async(Z,X)=>{if(!c){f(Z),a(!1);try{i("Procesando...");const{data:ye,error:se}=await Un.rpc("register_visit",{token_input:Z});if(se)throw se;if(ye.success){if(i("OK: "+ye.message+" Visitas: "+ye.new_visits),d==="hair"){const ae=parseInt(C)||0,{data:be}=await Un.from("clients").select("id").eq("member_token",Z).single();be&&await F(be.id,ae,"service",`Servicio: ${y}`)}}else i("Error: "+ye.message);setTimeout(()=>{f(null),i("")},4e3)}catch(ye){console.error(ye),i("Error al procesar el cdigo."),f(null)}}},q=Z=>{console.warn(Z)},H=async()=>{if(!L||!window.confirm("Confirmar canje del 10% de Descuento?"))return;const{data:Z,error:X}=await Un.rpc("redeem_discount_5th",{token_input:L.member_token});if(X)i("Error: "+X.message);else if(i(Z.message),Z.success){const{data:ye}=await Un.from("clients").select("*").eq("id",L.id).single();U(ye)}},W=async()=>{if(!(e.length<8))try{const{data:Z,error:X}=await Un.from("clients").select("*").eq("phone",e).single();if(X&&X.code!=="PGRST116"){alert("Error al buscar cliente");return}const se=(Z?Z.visits:0)+1,{data:ae,error:be}=await Un.from("clients").upsert({phone:e,visits:se,last_visit:new Date().toISOString()},{onConflict:"phone"}).select().single();if(be){console.error(be),alert("Error al actualizar visita");return}const fe=d==="hair"?parseInt(C)||0:parseInt(P)||0;await F(ae.id,fe,"service",d==="hair"?`Manual: ${y}`:"Manual: Visita"),U(ae),i("Visita registrada para "+e+". Total: "+se),n("")}catch(Z){console.error(Z),alert("Error de conexin")}};return k.jsxs("div",{className:"max-w-2xl mx-auto p-4 py-12",children:[k.jsxs("h2",{className:"text-3xl serif text-stone-900 mb-8 border-b pb-4 flex justify-between items-center",children:[k.jsx("span",{children:"Panel de Atencin"}),k.jsx("button",{onClick:t,className:"text-sm bg-stone-200 px-3 py-1 rounded hover:bg-stone-300 transition",children:"Salir"})]}),k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 mb-8",children:[k.jsxs("h3",{className:"text-xl font-bold text-stone-900 mb-4 flex items-center gap-2",children:[k.jsx(c6,{className:"text-green-600"}),"Registrar Visita Manual"]}),k.jsx("p",{className:"text-sm text-stone-500 mb-6",children:"Ingrese nmero y monto para registrar."}),k.jsxs("div",{className:"flex gap-4 mb-4 flex-wrap",children:[k.jsx("input",{type:"tel",value:e,onChange:Z=>n(Z.target.value),placeholder:"+569...",className:"flex-1 min-w-[150px] px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-green-600 outline-none"}),d==="loyalty"&&k.jsx("input",{type:"number",value:P,onChange:Z=>N(Z.target.value),placeholder:"Monto ($)",className:"w-32 px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-green-600 outline-none"}),k.jsxs("button",{onClick:W,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition flex items-center gap-2",children:[k.jsx(p6,{size:18}),"Registrar"]})]}),k.jsx("div",{className:"flex justify-center mb-6",children:k.jsxs("div",{className:"bg-stone-800 p-1 rounded-xl inline-flex",children:[k.jsx("button",{onClick:()=>g("loyalty"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${d==="loyalty"?"bg-amber-500 text-stone-900":"text-stone-400 hover:text-white"}`,children:"Visitas"}),k.jsx("button",{onClick:()=>g("hair"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${d==="hair"?"bg-purple-500 text-white":"text-stone-400 hover:text-white"}`,children:"Peluquera"}),k.jsx("button",{onClick:()=>g("inventory"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${d==="inventory"?"bg-blue-500 text-white":"text-stone-400 hover:text-white"}`,children:"Inventario"})]})}),k.jsxs("div",{className:"bg-stone-800 p-6 rounded-2xl shadow-xl border border-white/5",children:[k.jsx("h3",{className:"serif text-xl mb-4 text-center text-white",children:d==="loyalty"?"Registrar Visita":d==="hair"?"Registrar Servicio Peluquera":"Gestin de Inventario"}),d==="inventory"&&k.jsx("div",{className:"overflow-x-auto",children:k.jsxs("table",{className:"w-full text-xs text-left text-stone-300",children:[k.jsx("thead",{className:"text-xs text-stone-400 uppercase bg-stone-700/50",children:k.jsxs("tr",{children:[k.jsx("th",{className:"px-3 py-2",children:"Perfume"}),k.jsx("th",{className:"px-3 py-2 text-center",children:"5ml"}),k.jsx("th",{className:"px-3 py-2 text-center",children:"10ml"}),k.jsx("th",{className:"px-3 py-2 text-right",children:"Margen (5+10)"})]})}),k.jsx("tbody",{children:Su.map(Z=>k.jsxs("tr",{className:"border-b border-stone-700 hover:bg-stone-700/20",children:[k.jsx("td",{className:"px-3 py-2 font-medium text-white",children:Z.name}),k.jsxs("td",{className:"px-3 py-2 text-center text-green-400",children:["$",Z.price5ml.toLocaleString()]}),k.jsxs("td",{className:"px-3 py-2 text-center text-green-400",children:["$",Z.price10ml.toLocaleString()]}),k.jsxs("td",{className:"px-3 py-2 text-right text-blue-400 font-bold",children:["+$",((Z.margin5ml||0)+(Z.margin10ml||0)).toLocaleString()]})]},Z.id))})]})}),d==="hair"&&k.jsxs("div",{className:"mb-4 space-y-3",children:[k.jsxs("select",{value:y,onChange:Z=>E(Z.target.value),className:"w-full bg-stone-900 border border-white/10 rounded-lg px-3 py-2 text-white",children:[k.jsx("option",{value:"Corte",children:"Corte ($7.000+)"}),k.jsx("option",{value:"Lavado",children:"Lavado ($5.000)"}),k.jsx("option",{value:"Tintura",children:"Tintura ($10.000+)"}),k.jsx("option",{value:"Masaje",children:"Masaje ($5.000)"})]}),k.jsx("input",{type:"number",value:C,onChange:Z=>I(Z.target.value),placeholder:"Precio Real",className:"w-full bg-stone-900 border border-white/10 rounded-lg px-3 py-2 text-white"})]}),d!=="inventory"&&k.jsxs("button",{onClick:()=>a(!0),className:`w-full py-4 rounded-xl flex items-center justify-center gap-2 font-bold text-lg transition ${d==="hair"?"bg-purple-600 hover:bg-purple-500 text-white":"bg-amber-500 hover:bg-amber-400 text-stone-900"}`,children:[k.jsx(d6,{size:24}),d==="hair"?"Escanear para Servicio":"Escanear Tarjeta"]}),r&&k.jsx("div",{className:"mt-4 p-3 bg-green-500/20 text-green-400 rounded-lg text-sm font-medium whitespace-pre-wrap",children:r}),L&&k.jsxs("div",{className:"mt-6 border-t border-white/10 pt-4",children:[k.jsxs("h3",{className:"font-bold text-white mb-3",children:["Cliente: ",L.phone]}),k.jsx("div",{className:"space-y-3",children:L.discount_5th_visit_available?k.jsx("button",{onClick:H,className:"w-full bg-purple-600 text-white py-2 rounded",children:"Canjear 10%"}):k.jsx("div",{className:"text-stone-500 text-xs text-center",children:"Sin descuento disponible"})})]})]}),o&&k.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center p-4",children:k.jsxs("div",{className:"bg-white p-4 rounded-2xl w-full max-w-sm relative",children:[k.jsx("button",{onClick:()=>a(!1),className:"absolute -top-12 right-0 text-white p-2",children:k.jsx(hp,{size:32})}),k.jsx("h3",{className:"text-center font-bold mb-4",children:"Escanea el Cdigo del Cliente"}),k.jsx("div",{id:"reader",className:"w-full bg-stone-100 rounded-lg overflow-hidden"})]})})]})]})};function zO(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=zO(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ft(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=zO(t))&&(r&&(r+=" "),r+=e);return r}var HG=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Xx(t){if(typeof t!="string")return!1;var e=HG;return e.includes(t)}var qG=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],WG=new Set(qG);function $O(t){return typeof t!="string"?!1:WG.has(t)}function HO(t){return typeof t=="string"&&t.startsWith("data-")}function Ri(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&($O(n)||HO(n))&&(e[n]=t[n]);return e}function Pu(t){if(t==null)return null;if(M.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Ri(e)}return typeof t=="object"&&!Array.isArray(t)?Ri(t):null}function Oi(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&($O(n)||HO(n)||Xx(n))&&(e[n]=t[n]);return e}var KG=["children","width","height","viewBox","className","style","title","desc"];function _y(){return _y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_y.apply(null,arguments)}function YG(t,e){if(t==null)return{};var n,r,i=XG(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function XG(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Jx=M.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:o,className:a,style:c,title:f,desc:d}=t,g=YG(t,KG),y=o||{width:r,height:i,x:0,y:0},E=Ft("recharts-surface",a);return M.createElement("svg",_y({},Oi(g),{className:E,width:r,height:i,style:c,viewBox:"".concat(y.x," ").concat(y.y," ").concat(y.width," ").concat(y.height),ref:e}),M.createElement("title",null,f),M.createElement("desc",null,d),n)}),JG=["children","className"];function Ay(){return Ay=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ay.apply(null,arguments)}function ZG(t,e){if(t==null)return{};var n,r,i=QG(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function QG(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var jn=M.forwardRef((t,e)=>{var{children:n,className:r}=t,i=ZG(t,JG),o=Ft("recharts-layer",r);return M.createElement("g",Ay({className:o},Oi(i),{ref:e}),n)}),Zx=cN(),qO=M.createContext(null),ez=()=>M.useContext(qO);function sn(t){return function(){return t}}const WO=Math.cos,y0=Math.sin,So=Math.sqrt,x0=Math.PI,Cp=2*x0,Cy=Math.PI,Sy=2*Cy,Ja=1e-6,tz=Sy-Ja;function KO(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function nz(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return KO;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class rz{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?KO:nz(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,c=this._y1,f=r-e,d=i-n,g=a-e,y=c-n,E=g*g+y*y;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(E>Ja)if(!(Math.abs(y*f-d*g)>Ja)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let C=r-a,I=i-c,P=f*f+d*d,N=C*C+I*I,L=Math.sqrt(P),U=Math.sqrt(E),F=o*Math.tan((Cy-Math.acos((P+E-N)/(2*L*U)))/2),z=F/U,q=F/L;Math.abs(z-1)>Ja&&this._append`L${e+z*g},${n+z*y}`,this._append`A${o},${o},0,0,${+(y*C>g*I)},${this._x1=e+q*f},${this._y1=n+q*d}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),f=r*Math.sin(i),d=e+c,g=n+f,y=1^a,E=a?i-o:o-i;this._x1===null?this._append`M${d},${g}`:(Math.abs(this._x1-d)>Ja||Math.abs(this._y1-g)>Ja)&&this._append`L${d},${g}`,r&&(E<0&&(E=E%Sy+Sy),E>tz?this._append`A${r},${r},0,1,${y},${e-c},${n-f}A${r},${r},0,1,${y},${this._x1=d},${this._y1=g}`:E>Ja&&this._append`A${r},${r},0,${+(E>=Cy)},${y},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Qx(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new rz(e)}function ew(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function YO(t){this._context=t}YO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Sp(t){return new YO(t)}function XO(t){return t[0]}function JO(t){return t[1]}function ZO(t,e){var n=sn(!0),r=null,i=Sp,o=null,a=Qx(c);t=typeof t=="function"?t:t===void 0?XO:sn(t),e=typeof e=="function"?e:e===void 0?JO:sn(e);function c(f){var d,g=(f=ew(f)).length,y,E=!1,C;for(r==null&&(o=i(C=a())),d=0;d<=g;++d)!(d<g&&n(y=f[d],d,f))===E&&((E=!E)?o.lineStart():o.lineEnd()),E&&o.point(+t(y,d,f),+e(y,d,f));if(C)return o=null,C+""||null}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:sn(+f),c):t},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:sn(+f),c):e},c.defined=function(f){return arguments.length?(n=typeof f=="function"?f:sn(!!f),c):n},c.curve=function(f){return arguments.length?(i=f,r!=null&&(o=i(r)),c):i},c.context=function(f){return arguments.length?(f==null?r=o=null:o=i(r=f),c):r},c}function _h(t,e,n){var r=null,i=sn(!0),o=null,a=Sp,c=null,f=Qx(d);t=typeof t=="function"?t:t===void 0?XO:sn(+t),e=typeof e=="function"?e:sn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?JO:sn(+n);function d(y){var E,C,I,P=(y=ew(y)).length,N,L=!1,U,F=new Array(P),z=new Array(P);for(o==null&&(c=a(U=f())),E=0;E<=P;++E){if(!(E<P&&i(N=y[E],E,y))===L)if(L=!L)C=E,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),I=E-1;I>=C;--I)c.point(F[I],z[I]);c.lineEnd(),c.areaEnd()}L&&(F[E]=+t(N,E,y),z[E]=+e(N,E,y),c.point(r?+r(N,E,y):F[E],n?+n(N,E,y):z[E]))}if(U)return c=null,U+""||null}function g(){return ZO().defined(i).curve(a).context(o)}return d.x=function(y){return arguments.length?(t=typeof y=="function"?y:sn(+y),r=null,d):t},d.x0=function(y){return arguments.length?(t=typeof y=="function"?y:sn(+y),d):t},d.x1=function(y){return arguments.length?(r=y==null?null:typeof y=="function"?y:sn(+y),d):r},d.y=function(y){return arguments.length?(e=typeof y=="function"?y:sn(+y),n=null,d):e},d.y0=function(y){return arguments.length?(e=typeof y=="function"?y:sn(+y),d):e},d.y1=function(y){return arguments.length?(n=y==null?null:typeof y=="function"?y:sn(+y),d):n},d.lineX0=d.lineY0=function(){return g().x(t).y(e)},d.lineY1=function(){return g().x(t).y(n)},d.lineX1=function(){return g().x(r).y(e)},d.defined=function(y){return arguments.length?(i=typeof y=="function"?y:sn(!!y),d):i},d.curve=function(y){return arguments.length?(a=y,o!=null&&(c=a(o)),d):a},d.context=function(y){return arguments.length?(y==null?o=c=null:c=a(o=y),d):o},d}class QO{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function iz(t){return new QO(t,!0)}function oz(t){return new QO(t,!1)}const tw={draw(t,e){const n=So(e/x0);t.moveTo(n,0),t.arc(0,0,n,0,Cp)}},sz={draw(t,e){const n=So(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},e3=So(1/3),az=e3*2,lz={draw(t,e){const n=So(e/az),r=n*e3;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},uz={draw(t,e){const n=So(e),r=-n/2;t.rect(r,r,n,n)}},cz=.8908130915292852,t3=y0(x0/10)/y0(7*x0/10),dz=y0(Cp/10)*t3,fz=-WO(Cp/10)*t3,hz={draw(t,e){const n=So(e*cz),r=dz*n,i=fz*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=Cp*o/5,c=WO(a),f=y0(a);t.lineTo(f*n,-c*n),t.lineTo(c*r-f*i,f*r+c*i)}t.closePath()}},a1=So(3),pz={draw(t,e){const n=-So(e/(a1*3));t.moveTo(0,n*2),t.lineTo(-a1*n,-n),t.lineTo(a1*n,-n),t.closePath()}},Wi=-.5,Ki=So(3)/2,Ty=1/So(12),gz=(Ty/2+1)*3,mz={draw(t,e){const n=So(e/gz),r=n/2,i=n*Ty,o=r,a=n*Ty+n,c=-o,f=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(c,f),t.lineTo(Wi*r-Ki*i,Ki*r+Wi*i),t.lineTo(Wi*o-Ki*a,Ki*o+Wi*a),t.lineTo(Wi*c-Ki*f,Ki*c+Wi*f),t.lineTo(Wi*r+Ki*i,Wi*i-Ki*r),t.lineTo(Wi*o+Ki*a,Wi*a-Ki*o),t.lineTo(Wi*c+Ki*f,Wi*f-Ki*c),t.closePath()}};function vz(t,e){let n=null,r=Qx(i);t=typeof t=="function"?t:sn(t||tw),e=typeof e=="function"?e:sn(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:sn(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:sn(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function w0(){}function E0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function n3(t){this._context=t}n3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:E0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:E0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function yz(t){return new n3(t)}function r3(t){this._context=t}r3.prototype={areaStart:w0,areaEnd:w0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:E0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xz(t){return new r3(t)}function i3(t){this._context=t}i3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:E0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function wz(t){return new i3(t)}function o3(t){this._context=t}o3.prototype={areaStart:w0,areaEnd:w0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Ez(t){return new o3(t)}function mC(t){return t<0?-1:1}function vC(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),c=(o*i+a*r)/(r+i);return(mC(o)+mC(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(c))||0}function yC(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function l1(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,c=(o-r)/3;t._context.bezierCurveTo(r+c,i+c*e,o-c,a-c*n,o,a)}function b0(t){this._context=t}b0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l1(this,this._t0,yC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,l1(this,yC(this,n=vC(this,t,e)),n);break;default:l1(this,this._t0,n=vC(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function s3(t){this._context=new a3(t)}(s3.prototype=Object.create(b0.prototype)).point=function(t,e){b0.prototype.point.call(this,e,t)};function a3(t){this._context=t}a3.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function bz(t){return new b0(t)}function _z(t){return new s3(t)}function l3(t){this._context=t}l3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=xC(t),i=xC(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function xC(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function Az(t){return new l3(t)}function Tp(t,e){this._context=t,this._t=e}Tp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Cz(t){return new Tp(t,.5)}function Sz(t){return new Tp(t,0)}function Tz(t){return new Tp(t,1)}function dl(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,c=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<c;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Iy(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Iz(t,e){return t[e]}function Pz(t){const e=[];return e.key=t,e}function Nz(){var t=sn([]),e=Iy,n=dl,r=Iz;function i(o){var a=Array.from(t.apply(this,arguments),Pz),c,f=a.length,d=-1,g;for(const y of o)for(c=0,++d;c<f;++c)(a[c][d]=[0,+r(y,a[c].key,d,o)]).data=y;for(c=0,g=ew(e(a));c<f;++c)a[g[c]].index=c;return n(a,g),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:sn(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:sn(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?Iy:typeof o=="function"?o:sn(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??dl,i):n},i}function Rz(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}dl(t,e)}}function Oz(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var a=0,c=0;a<i;++a)c+=t[a][n][1]||0;r[n][1]+=r[n][0]=-c/2}dl(t,e)}}function kz(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var c=0,f=0,d=0;c<a;++c){for(var g=t[e[c]],y=g[r][1]||0,E=g[r-1][1]||0,C=(y-E)/2,I=0;I<c;++I){var P=t[e[I]],N=P[r][1]||0,L=P[r-1][1]||0;C+=N-L}f+=y,d+=C*y}i[r-1][1]+=i[r-1][0]=n,f&&(n-=d/f)}i[r-1][1]+=i[r-1][0]=n,dl(t,e)}}var u1={},c1={},wC;function Mz(){return wC||(wC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(c1)),c1}var d1={},EC;function u3(){return EC||(EC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(d1)),d1}var f1={},bC;function nw(){return bC||(bC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(f1)),f1}var h1={},p1={},_C;function Dz(){return _C||(_C=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(p1)),p1}var AC;function rw(){return AC||(AC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Dz(),n=nw();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const o=[],a=i.length;if(a===0)return o;let c=0,f="",d="",g=!1;for(i.charCodeAt(0)===46&&(o.push(""),c++);c<a;){const y=i[c];d?y==="\\"&&c+1<a?(c++,f+=i[c]):y===d?d="":f+=y:g?y==='"'||y==="'"?d=y:y==="]"?(g=!1,o.push(f),f=""):f+=y:y==="["?(g=!0,f&&(o.push(f),f="")):y==="."?f&&(o.push(f),f=""):f+=y,c++}return f&&o.push(f),o}t.toPath=r})(h1)),h1}var CC;function iw(){return CC||(CC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mz(),n=u3(),r=nw(),i=rw();function o(c,f,d){if(c==null)return d;switch(typeof f){case"string":{if(e.isUnsafeProperty(f))return d;const g=c[f];return g===void 0?n.isDeepKey(f)?o(c,i.toPath(f),d):d:g}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const g=c[f];return g===void 0?d:g}default:{if(Array.isArray(f))return a(c,f,d);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),e.isUnsafeProperty(f))return d;const g=c[f];return g===void 0?d:g}}}function a(c,f,d){if(f.length===0)return d;let g=c;for(let y=0;y<f.length;y++){if(g==null||e.isUnsafeProperty(f[y]))return d;g=g[f[y]]}return g===void 0?d:g}t.get=o})(u1)),u1}var g1,SC;function Lz(){return SC||(SC=1,g1=iw().get),g1}var Bz=Lz();const fl=ro(Bz);var Fz=4;function ca(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fz,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Rn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,o,a)=>{var c=n[a-1];return typeof c=="string"?i+c+o:c!==void 0?i+ca(c)+o:i+o},"")}var vr=t=>t===0?0:t>0?1:-1,ki=t=>typeof t=="number"&&t!=+t,ms=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Je=t=>(typeof t=="number"||t instanceof Number)&&!ki(t),eo=t=>Je(t)||typeof t=="string",Uz=0,hd=t=>{var e=++Uz;return"".concat(t||"").concat(e)},zr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Je(e)&&typeof e!="string")return r;var o;if(ms(e)){if(n==null)return r;var a=e.indexOf("%");o=n*parseFloat(e.slice(0,a))/100}else o=+e;return ki(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},c3=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function _n(t,e,n){return Je(t)&&Je(e)?ca(t+n*(e-t)):e}function d3(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):fl(r,e))===n)}var jz=t=>{for(var e=t.length,n=0,r=0,i=0,o=0,a=1/0,c=-1/0,f=0,d=0,g=0;g<e;g++){var y,E;f=((y=t[g])===null||y===void 0?void 0:y.cx)||0,d=((E=t[g])===null||E===void 0?void 0:E.cy)||0,n+=f,r+=d,i+=f*d,o+=f*f,a=Math.min(a,f),c=Math.max(c,f)}var C=e*o!==n*n?(e*i-n*r)/(e*o-n*n):0;return{xmin:a,xmax:c,a:C,b:(r-C*n)/e}},an=t=>t===null||typeof t>"u",Rd=t=>an(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Vz(t){return t!=null}function Od(){}var Gz=["type","size","sizeType"];function Py(){return Py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Py.apply(null,arguments)}function TC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TC(Object(n),!0).forEach(function(r){zz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zz(t,e,n){return(e=$z(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $z(t){var e=Hz(t,"string");return typeof e=="symbol"?e:e+""}function Hz(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qz(t,e){if(t==null)return{};var n,r,i=Wz(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Wz(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var f3={symbolCircle:tw,symbolCross:sz,symbolDiamond:lz,symbolSquare:uz,symbolStar:hz,symbolTriangle:pz,symbolWye:mz},Kz=Math.PI/180,Yz=t=>{var e="symbol".concat(Rd(t));return f3[e]||tw},Xz=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Kz;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Jz=(t,e)=>{f3["symbol".concat(Rd(t))]=e},Ip=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=qz(t,Gz),o=IC(IC({},i),{},{type:e,size:n,sizeType:r}),a="circle";typeof e=="string"&&(a=e);var c=()=>{var E=Yz(a),C=vz().type(E).size(Xz(n,r,a)),I=C();if(I!==null)return I},{className:f,cx:d,cy:g}=o,y=Oi(o);return Je(d)&&Je(g)&&Je(n)?M.createElement("path",Py({},y,{className:Ft("recharts-symbols",f),transform:"translate(".concat(d,", ").concat(g,")"),d:c()})):null};Ip.registerSymbol=Jz;var h3=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,Zz=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(M.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Xx(i)&&(r[i]=(o=>n[i](n,o)))}),r},Qz=(t,e,n)=>r=>(t(e,n,r),null),zu=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var o=t[i];Xx(i)&&typeof o=="function"&&(r||(r={}),r[i]=Qz(o,e,n))}),r},e$=t=>Array.isArray(t)&&t.length>0;function PC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PC(Object(n),!0).forEach(function(r){n$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n$(t,e,n){return(e=r$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r$(t){var e=i$(t,"string");return typeof e=="symbol"?e:e+""}function i$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vn(t,e){var n=t$({},t),r=e,i=Object.keys(e),o=i.reduce((a,c)=>(a[c]===void 0&&r[c]!==void 0&&(a[c]=r[c]),a),n);return o}function _0(){return _0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_0.apply(null,arguments)}function NC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function o$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NC(Object(n),!0).forEach(function(r){s$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s$(t,e,n){return(e=a$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a$(t){var e=l$(t,"string");return typeof e=="symbol"?e:e+""}function l$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xi=32,u$={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function c$(t){var{data:e,iconType:n,inactiveColor:r}=t,i=Xi/2,o=Xi/6,a=Xi/3,c=e.inactive?r:e.color,f=n??e.type;if(f==="none")return null;if(f==="plainline"){var d;return M.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:(d=e.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:i,x2:Xi,y2:i,className:"recharts-legend-icon"})}if(f==="line")return M.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(Xi,"M").concat(2*a,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(f==="rect")return M.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Xi/8,"h").concat(Xi,"v").concat(Xi*3/4,"h").concat(-Xi,"z"),className:"recharts-legend-icon"});if(M.isValidElement(e.legendIcon)){var g=o$({},e);return delete g.legendIcon,M.cloneElement(e.legendIcon,g)}return M.createElement(Ip,{fill:c,cx:i,cy:i,size:Xi,sizeType:"diameter",type:f})}function d$(t){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:o,iconType:a}=t,c={x:0,y:0,width:Xi,height:Xi},f={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((g,y)=>{var E=g.formatter||i,C=Ft({"recharts-legend-item":!0,["legend-item-".concat(y)]:!0,inactive:g.inactive});if(g.type==="none")return null;var I=g.inactive?o:g.color,P=E?E(g.value,g,y):g.value;return M.createElement("li",_0({className:C,style:f,key:"legend-item-".concat(y)},zu(t,g,y)),M.createElement(Jx,{width:n,height:n,viewBox:c,style:d,"aria-label":"".concat(P," legend icon")},M.createElement(c$,{data:g,iconType:a,inactiveColor:o})),M.createElement("span",{className:"recharts-legend-item-text",style:{color:I}},P))})}var f$=t=>{var e=Vn(t,u$),{payload:n,layout:r,align:i}=e;if(!n||!n.length)return null;var o={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return M.createElement("ul",{className:"recharts-default-legend",style:o},M.createElement(d$,_0({},e,{payload:n})))},m1={},v1={},RC;function h$(){return RC||(RC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let o=0;o<n.length;o++){const a=n[o],c=r(a);i.has(c)||i.set(c,a)}return Array.from(i.values())}t.uniqBy=e})(v1)),v1}var y1={},OC;function p3(){return OC||(OC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(y1)),y1}var x1={},w1={},E1={},kC;function p$(){return kC||(kC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(E1)),E1}var MC;function ow(){return MC||(MC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=p$();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(w1)),w1}var b1={},DC;function g$(){return DC||(DC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(b1)),b1}var LC;function m$(){return LC||(LC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ow(),n=g$();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(x1)),x1}var _1={},A1={},BC;function v$(){return BC||(BC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iw();function n(r){return function(i){return e.get(i,r)}}t.property=n})(A1)),A1}var C1={},S1={},T1={},I1={},FC;function g3(){return FC||(FC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(I1)),I1}var P1={},UC;function m3(){return UC||(UC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(P1)),P1}var N1={},jC;function v3(){return jC||(jC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(N1)),N1}var VC;function y$(){return VC||(VC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=g3(),n=m3(),r=v3();function i(g,y,E){return typeof E!="function"?i(g,y,()=>{}):o(g,y,function C(I,P,N,L,U,F){const z=E(I,P,N,L,U,F);return z!==void 0?!!z:o(I,P,C,F)},new Map)}function o(g,y,E,C){if(y===g)return!0;switch(typeof y){case"object":return a(g,y,E,C);case"function":return Object.keys(y).length>0?o(g,{...y},E,C):r.eq(g,y);default:return e.isObject(g)?typeof y=="string"?y==="":!0:r.eq(g,y)}}function a(g,y,E,C){if(y==null)return!0;if(Array.isArray(y))return f(g,y,E,C);if(y instanceof Map)return c(g,y,E,C);if(y instanceof Set)return d(g,y,E,C);const I=Object.keys(y);if(g==null||n.isPrimitive(g))return I.length===0;if(I.length===0)return!0;if(C?.has(y))return C.get(y)===g;C?.set(y,g);try{for(let P=0;P<I.length;P++){const N=I[P];if(!n.isPrimitive(g)&&!(N in g)||y[N]===void 0&&g[N]!==void 0||y[N]===null&&g[N]!==null||!E(g[N],y[N],N,g,y,C))return!1}return!0}finally{C?.delete(y)}}function c(g,y,E,C){if(y.size===0)return!0;if(!(g instanceof Map))return!1;for(const[I,P]of y.entries()){const N=g.get(I);if(E(N,P,I,g,y,C)===!1)return!1}return!0}function f(g,y,E,C){if(y.length===0)return!0;if(!Array.isArray(g))return!1;const I=new Set;for(let P=0;P<y.length;P++){const N=y[P];let L=!1;for(let U=0;U<g.length;U++){if(I.has(U))continue;const F=g[U];let z=!1;if(E(F,N,P,g,y,C)&&(z=!0),z){I.add(U),L=!0;break}}if(!L)return!1}return!0}function d(g,y,E,C){return y.size===0?!0:g instanceof Set?f([...g],[...y],E,C):!1}t.isMatchWith=i,t.isSetMatch=d})(T1)),T1}var GC;function y3(){return GC||(GC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=y$();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(S1)),S1}var R1={},O1={},k1={},zC;function x$(){return zC||(zC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(k1)),k1}var M1={},$C;function x3(){return $C||($C=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(M1)),M1}var D1={},HC;function w3(){return HC||(HC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",a="[object Symbol]",c="[object Date]",f="[object Map]",d="[object Set]",g="[object Array]",y="[object Function]",E="[object ArrayBuffer]",C="[object Object]",I="[object Error]",P="[object DataView]",N="[object Uint8Array]",L="[object Uint8ClampedArray]",U="[object Uint16Array]",F="[object Uint32Array]",z="[object BigUint64Array]",q="[object Int8Array]",H="[object Int16Array]",W="[object Int32Array]",Z="[object BigInt64Array]",X="[object Float32Array]",ye="[object Float64Array]";t.argumentsTag=o,t.arrayBufferTag=E,t.arrayTag=g,t.bigInt64ArrayTag=Z,t.bigUint64ArrayTag=z,t.booleanTag=i,t.dataViewTag=P,t.dateTag=c,t.errorTag=I,t.float32ArrayTag=X,t.float64ArrayTag=ye,t.functionTag=y,t.int16ArrayTag=H,t.int32ArrayTag=W,t.int8ArrayTag=q,t.mapTag=f,t.numberTag=r,t.objectTag=C,t.regexpTag=e,t.setTag=d,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=U,t.uint32ArrayTag=F,t.uint8ArrayTag=N,t.uint8ClampedArrayTag=L})(D1)),D1}var L1={},qC;function w$(){return qC||(qC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(L1)),L1}var WC;function E3(){return WC||(WC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x$(),n=x3(),r=w3(),i=m3(),o=w$();function a(g,y){return c(g,void 0,g,new Map,y)}function c(g,y,E,C=new Map,I=void 0){const P=I?.(g,y,E,C);if(P!==void 0)return P;if(i.isPrimitive(g))return g;if(C.has(g))return C.get(g);if(Array.isArray(g)){const N=new Array(g.length);C.set(g,N);for(let L=0;L<g.length;L++)N[L]=c(g[L],L,E,C,I);return Object.hasOwn(g,"index")&&(N.index=g.index),Object.hasOwn(g,"input")&&(N.input=g.input),N}if(g instanceof Date)return new Date(g.getTime());if(g instanceof RegExp){const N=new RegExp(g.source,g.flags);return N.lastIndex=g.lastIndex,N}if(g instanceof Map){const N=new Map;C.set(g,N);for(const[L,U]of g)N.set(L,c(U,L,E,C,I));return N}if(g instanceof Set){const N=new Set;C.set(g,N);for(const L of g)N.add(c(L,void 0,E,C,I));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(g))return g.subarray();if(o.isTypedArray(g)){const N=new(Object.getPrototypeOf(g)).constructor(g.length);C.set(g,N);for(let L=0;L<g.length;L++)N[L]=c(g[L],L,E,C,I);return N}if(g instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&g instanceof SharedArrayBuffer)return g.slice(0);if(g instanceof DataView){const N=new DataView(g.buffer.slice(0),g.byteOffset,g.byteLength);return C.set(g,N),f(N,g,E,C,I),N}if(typeof File<"u"&&g instanceof File){const N=new File([g],g.name,{type:g.type});return C.set(g,N),f(N,g,E,C,I),N}if(typeof Blob<"u"&&g instanceof Blob){const N=new Blob([g],{type:g.type});return C.set(g,N),f(N,g,E,C,I),N}if(g instanceof Error){const N=new g.constructor;return C.set(g,N),N.message=g.message,N.name=g.name,N.stack=g.stack,N.cause=g.cause,f(N,g,E,C,I),N}if(g instanceof Boolean){const N=new Boolean(g.valueOf());return C.set(g,N),f(N,g,E,C,I),N}if(g instanceof Number){const N=new Number(g.valueOf());return C.set(g,N),f(N,g,E,C,I),N}if(g instanceof String){const N=new String(g.valueOf());return C.set(g,N),f(N,g,E,C,I),N}if(typeof g=="object"&&d(g)){const N=Object.create(Object.getPrototypeOf(g));return C.set(g,N),f(N,g,E,C,I),N}return g}function f(g,y,E=g,C,I){const P=[...Object.keys(y),...e.getSymbols(y)];for(let N=0;N<P.length;N++){const L=P[N],U=Object.getOwnPropertyDescriptor(g,L);(U==null||U.writable)&&(g[L]=c(y[L],L,E,C,I))}}function d(g){switch(n.getTag(g)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=c,t.copyProperties=f})(O1)),O1}var KC;function E$(){return KC||(KC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E3();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(R1)),R1}var YC;function b$(){return YC||(YC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=y3(),n=E$();function r(i){return i=n.cloneDeep(i),o=>e.isMatch(o,i)}t.matches=r})(C1)),C1}var B1={},F1={},U1={},XC;function _$(){return XC||(XC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E3(),n=w3();function r(i,o){return e.cloneDeepWith(i,(a,c,f,d)=>{const g=o?.(a,c,f,d);if(g!==void 0)return g;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const y=new i.constructor(i?.valueOf());return e.copyProperties(y,i),y}case n.argumentsTag:{const y={};return e.copyProperties(y,i),y.length=i.length,y[Symbol.iterator]=i[Symbol.iterator],y}default:return}})}t.cloneDeepWith=r})(U1)),U1}var JC;function A$(){return JC||(JC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_$();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(F1)),F1}var j1={},V1={},ZC;function b3(){return ZC||(ZC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(V1)),V1}var G1={},QC;function C$(){return QC||(QC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x3();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(G1)),G1}var eS;function S$(){return eS||(eS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=u3(),n=b3(),r=C$(),i=rw();function o(a,c){let f;if(Array.isArray(c)?f=c:typeof c=="string"&&e.isDeepKey(c)&&a?.[c]==null?f=i.toPath(c):f=[c],f.length===0)return!1;let d=a;for(let g=0;g<f.length;g++){const y=f[g];if((d==null||!Object.hasOwn(d,y))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(y)&&y<d.length))return!1;d=d[y]}return!0}t.has=o})(j1)),j1}var tS;function T$(){return tS||(tS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=y3(),n=nw(),r=A$(),i=iw(),o=S$();function a(c,f){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=n.toKey(c);break}}return f=r.cloneDeep(f),function(d){const g=i.get(d,c);return g===void 0?o.has(d,c):f===void 0?g===void 0:e.isMatch(g,f)}}t.matchesProperty=a})(B1)),B1}var nS;function I$(){return nS||(nS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=p3(),n=v$(),r=b$(),i=T$();function o(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=o})(_1)),_1}var rS;function P$(){return rS||(rS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h$(),n=p3(),r=m$(),i=I$();function o(a,c=n.identity){return r.isArrayLikeObject(a)?e.uniqBy(Array.from(a),i.iteratee(c)):[]}t.uniqBy=o})(m1)),m1}var z1,iS;function N$(){return iS||(iS=1,z1=P$().uniqBy),z1}var R$=N$();const oS=ro(R$);function _3(t,e,n){return e===!0?oS(t,n):typeof e=="function"?oS(t,e):t}var $1={exports:{}},H1={},q1={exports:{}},W1={};var sS;function O$(){if(sS)return W1;sS=1;var t=Bu();function e(y,E){return y===E&&(y!==0||1/y===1/E)||y!==y&&E!==E}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,a=t.useDebugValue;function c(y,E){var C=E(),I=r({inst:{value:C,getSnapshot:E}}),P=I[0].inst,N=I[1];return o(function(){P.value=C,P.getSnapshot=E,f(P)&&N({inst:P})},[y,C,E]),i(function(){return f(P)&&N({inst:P}),y(function(){f(P)&&N({inst:P})})},[y]),a(C),C}function f(y){var E=y.getSnapshot;y=y.value;try{var C=E();return!n(y,C)}catch{return!0}}function d(y,E){return E()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return W1.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,W1}var aS;function k$(){return aS||(aS=1,q1.exports=O$()),q1.exports}var lS;function M$(){if(lS)return H1;lS=1;var t=Bu(),e=k$();function n(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,a=t.useEffect,c=t.useMemo,f=t.useDebugValue;return H1.useSyncExternalStoreWithSelector=function(d,g,y,E,C){var I=o(null);if(I.current===null){var P={hasValue:!1,value:null};I.current=P}else P=I.current;I=c(function(){function L(H){if(!U){if(U=!0,F=H,H=E(H),C!==void 0&&P.hasValue){var W=P.value;if(C(W,H))return z=W}return z=H}if(W=z,r(F,H))return W;var Z=E(H);return C!==void 0&&C(W,Z)?(F=H,W):(F=H,z=Z)}var U=!1,F,z,q=y===void 0?null:y;return[function(){return L(g())},q===null?void 0:function(){return L(q())}]},[g,y,E,C]);var N=i(d,I[0],I[1]);return a(function(){P.hasValue=!0,P.value=N},[N]),f(N),N},H1}var uS;function D$(){return uS||(uS=1,$1.exports=M$()),$1.exports}var L$=D$(),sw=M.createContext(null),B$=t=>t,Zt=()=>{var t=M.useContext(sw);return t?t.store.dispatch:B$},Wh=()=>{},F$=()=>Wh,U$=(t,e)=>t===e;function $e(t){var e=M.useContext(sw);return L$.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:F$,e?e.store.getState:Wh,e?e.store.getState:Wh,e?t:Wh,U$)}function j$(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function V$(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function G$(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var cS=t=>Array.isArray(t)?t:[t];function z$(t){const e=Array.isArray(t[0])?t[0]:t;return G$(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function $$(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var H$=class{constructor(t){this.value=t}deref(){return this.value}},q$=typeof WeakRef<"u"?WeakRef:H$,W$=0,dS=1;function Ah(){return{s:W$,v:void 0,o:null,p:null}}function A3(t,e={}){let n=Ah();const{resultEqualityCheck:r}=e;let i,o=0;function a(){let c=n;const{length:f}=arguments;for(let y=0,E=f;y<E;y++){const C=arguments[y];if(typeof C=="function"||typeof C=="object"&&C!==null){let I=c.o;I===null&&(c.o=I=new WeakMap);const P=I.get(C);P===void 0?(c=Ah(),I.set(C,c)):c=P}else{let I=c.p;I===null&&(c.p=I=new Map);const P=I.get(C);P===void 0?(c=Ah(),I.set(C,c)):c=P}}const d=c;let g;if(c.s===dS)g=c.v;else if(g=t.apply(null,arguments),o++,r){const y=i?.deref?.()??i;y!=null&&r(y,g)&&(g=y,o!==0&&o--),i=typeof g=="object"&&g!==null||typeof g=="function"?new q$(g):g}return d.s=dS,d.v=g,g}return a.clearCache=()=>{n=Ah(),a.resetResultsCount()},a.resultsCount=()=>o,a.resetResultsCount=()=>{o=0},a}function K$(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let o=0,a=0,c,f={},d=i.pop();typeof d=="object"&&(f=d,d=i.pop()),j$(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const g={...n,...f},{memoize:y,memoizeOptions:E=[],argsMemoize:C=A3,argsMemoizeOptions:I=[]}=g,P=cS(E),N=cS(I),L=z$(i),U=y(function(){return o++,d.apply(null,arguments)},...P),F=C(function(){a++;const q=$$(L,arguments);return c=U.apply(null,q),c},...N);return Object.assign(F,{resultFunc:d,memoizedResultFunc:U,dependencies:L,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>c,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:y,argsMemoize:C})};return Object.assign(r,{withTypes:()=>r}),r}var de=K$(A3),Y$=Object.assign((t,e=de)=>{V$(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(o=>t[o]);return e(r,(...o)=>o.reduce((a,c,f)=>(a[n[f]]=c,a),{}))},{withTypes:()=>Y$}),K1={},Y1={},X1={},fS;function X$(){return fS||(fS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const a=e(r),c=e(i);if(a===c&&a===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?c-a:a-c}return 0};t.compareValues=n})(X1)),X1}var J1={},Z1={},hS;function C3(){return hS||(hS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Z1)),Z1}var pS;function J$(){return pS||(pS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C3(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||e.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||a!=null&&Object.hasOwn(a,o)}t.isKey=i})(J1)),J1}var gS;function Z$(){return gS||(gS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X$(),n=J$(),r=rw();function i(o,a,c,f){if(o==null)return[];c=f?void 0:c,Array.isArray(o)||(o=Object.values(o)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(C=>String(C));const d=(C,I)=>{let P=C;for(let N=0;N<I.length&&P!=null;++N)P=P[I[N]];return P},g=(C,I)=>I==null||C==null?I:typeof C=="object"&&"key"in C?Object.hasOwn(I,C.key)?I[C.key]:d(I,C.path):typeof C=="function"?C(I):Array.isArray(C)?d(I,C):typeof I=="object"?I[C]:I,y=a.map(C=>(Array.isArray(C)&&C.length===1&&(C=C[0]),C==null||typeof C=="function"||Array.isArray(C)||n.isKey(C)?C:{key:C,path:r.toPath(C)}));return o.map(C=>({original:C,criteria:y.map(I=>g(I,C))})).slice().sort((C,I)=>{for(let P=0;P<y.length;P++){const N=e.compareValues(C.criteria[P],I.criteria[P],c[P]);if(N!==0)return N}return 0}).map(C=>C.original)}t.orderBy=i})(Y1)),Y1}var Q1={},mS;function Q$(){return mS||(mS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],o=Math.floor(r),a=(c,f)=>{for(let d=0;d<c.length;d++){const g=c[d];Array.isArray(g)&&f<o?a(g,f+1):i.push(g)}};return a(n,0),i}t.flatten=e})(Q1)),Q1}var ev={},vS;function S3(){return vS||(vS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=b3(),n=ow(),r=g3(),i=v3();function o(a,c,f){return r.isObject(f)&&(typeof c=="number"&&n.isArrayLike(f)&&e.isIndex(c)&&c<f.length||typeof c=="string"&&c in f)?i.eq(f[c],a):!1}t.isIterateeCall=o})(ev)),ev}var yS;function eH(){return yS||(yS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Z$(),n=Q$(),r=S3();function i(o,...a){const c=a.length;return c>1&&r.isIterateeCall(o,a[0],a[1])?a=[]:c>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(o,n.flatten(a),["asc"])}t.sortBy=i})(K1)),K1}var tv,xS;function tH(){return xS||(xS=1,tv=eH().sortBy),tv}var nH=tH();const Pp=ro(nH);var T3=t=>t.legend.settings,rH=t=>t.legend.size,iH=t=>t.legend.payload,oH=de([iH,T3],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Pp(r,n):r});function sH(){return $e(oH)}var Ch=1;function I3(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=M.useState({height:0,left:0,top:0,width:0}),r=M.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),a={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(a.height-e.height)>Ch||Math.abs(a.left-e.left)>Ch||Math.abs(a.top-e.top)>Ch||Math.abs(a.width-e.width)>Ch)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Ir(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var aH=typeof Symbol=="function"&&Symbol.observable||"@@observable",wS=aH,nv=()=>Math.random().toString(36).substring(7).split("").join("."),lH={INIT:`@@redux/INIT${nv()}`,REPLACE:`@@redux/REPLACE${nv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${nv()}`},A0=lH;function aw(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function P3(t,e,n){if(typeof t!="function")throw new Error(Ir(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ir(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ir(1));return n(P3)(t,e)}let r=t,i=e,o=new Map,a=o,c=0,f=!1;function d(){a===o&&(a=new Map,o.forEach((N,L)=>{a.set(L,N)}))}function g(){if(f)throw new Error(Ir(3));return i}function y(N){if(typeof N!="function")throw new Error(Ir(4));if(f)throw new Error(Ir(5));let L=!0;d();const U=c++;return a.set(U,N),function(){if(L){if(f)throw new Error(Ir(6));L=!1,d(),a.delete(U),o=null}}}function E(N){if(!aw(N))throw new Error(Ir(7));if(typeof N.type>"u")throw new Error(Ir(8));if(typeof N.type!="string")throw new Error(Ir(17));if(f)throw new Error(Ir(9));try{f=!0,i=r(i,N)}finally{f=!1}return(o=a).forEach(U=>{U()}),N}function C(N){if(typeof N!="function")throw new Error(Ir(10));r=N,E({type:A0.REPLACE})}function I(){const N=y;return{subscribe(L){if(typeof L!="object"||L===null)throw new Error(Ir(11));function U(){const z=L;z.next&&z.next(g())}return U(),{unsubscribe:N(U)}},[wS](){return this}}}return E({type:A0.INIT}),{dispatch:E,subscribe:y,getState:g,replaceReducer:C,[wS]:I}}function uH(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:A0.INIT})>"u")throw new Error(Ir(12));if(typeof n(void 0,{type:A0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ir(13))})}function N3(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const a=e[o];typeof t[a]=="function"&&(n[a]=t[a])}const r=Object.keys(n);let i;try{uH(n)}catch(o){i=o}return function(a={},c){if(i)throw i;let f=!1;const d={};for(let g=0;g<r.length;g++){const y=r[g],E=n[y],C=a[y],I=E(C,c);if(typeof I>"u")throw c&&c.type,new Error(Ir(14));d[y]=I,f=f||I!==C}return f=f||r.length!==Object.keys(a).length,f?d:a}}function C0(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function cH(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(Ir(15))};const a={getState:i.getState,dispatch:(f,...d)=>o(f,...d)},c=t.map(f=>f(a));return o=C0(...c)(i.dispatch),{...i,dispatch:o}}}function R3(t){return aw(t)&&"type"in t&&typeof t.type=="string"}var O3=Symbol.for("immer-nothing"),ES=Symbol.for("immer-draftable"),Jr=Symbol.for("immer-state");function yo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Pi=Object,Nu=Pi.getPrototypeOf,S0="constructor",Np="prototype",Ny="configurable",T0="enumerable",Kh="writable",pd="value",vs=t=>!!t&&!!t[Jr];function Ao(t){return t?k3(t)||Op(t)||!!t[ES]||!!t[S0]?.[ES]||kp(t)||Mp(t):!1}var dH=Pi[Np][S0].toString(),bS=new WeakMap;function k3(t){if(!t||!lw(t))return!1;const e=Nu(t);if(e===null||e===Pi[Np])return!0;const n=Pi.hasOwnProperty.call(e,S0)&&e[S0];if(n===Object)return!0;if(!fu(n))return!1;let r=bS.get(n);return r===void 0&&(r=Function.toString.call(n),bS.set(n,r)),r===dH}function Rp(t,e,n=!0){kd(t)===0?(n?Reflect.ownKeys(t):Pi.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function kd(t){const e=t[Jr];return e?e.type_:Op(t)?1:kp(t)?2:Mp(t)?3:0}var _S=(t,e,n=kd(t))=>n===2?t.has(e):Pi[Np].hasOwnProperty.call(t,e),Ry=(t,e,n=kd(t))=>n===2?t.get(e):t[e],I0=(t,e,n,r=kd(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function fH(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Op=Array.isArray,kp=t=>t instanceof Map,Mp=t=>t instanceof Set,lw=t=>typeof t=="object",fu=t=>typeof t=="function",rv=t=>typeof t=="boolean";function hH(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var ls=t=>t.copy_||t.base_,uw=t=>t.modified_?t.copy_:t.base_;function Oy(t,e){if(kp(t))return new Map(t);if(Mp(t))return new Set(t);if(Op(t))return Array[Np].slice.call(t);const n=k3(t);if(e===!0||e==="class_only"&&!n){const r=Pi.getOwnPropertyDescriptors(t);delete r[Jr];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const a=i[o],c=r[a];c[Kh]===!1&&(c[Kh]=!0,c[Ny]=!0),(c.get||c.set)&&(r[a]={[Ny]:!0,[Kh]:!0,[T0]:c[T0],[pd]:t[a]})}return Pi.create(Nu(t),r)}else{const r=Nu(t);if(r!==null&&n)return{...t};const i=Pi.create(r);return Pi.assign(i,t)}}function cw(t,e=!1){return Dp(t)||vs(t)||!Ao(t)||(kd(t)>1&&Pi.defineProperties(t,{set:Sh,add:Sh,clear:Sh,delete:Sh}),Pi.freeze(t),e&&Rp(t,(n,r)=>{cw(r,!0)},!1)),t}function pH(){yo(2)}var Sh={[pd]:pH};function Dp(t){return t===null||!lw(t)?!0:Pi.isFrozen(t)}var P0="MapSet",ky="Patches",AS="ArrayMethods",M3={};function hl(t){const e=M3[t];return e||yo(0,t),e}var CS=t=>!!M3[t],gd,D3=()=>gd,gH=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:CS(P0)?hl(P0):void 0,arrayMethodsPlugin_:CS(AS)?hl(AS):void 0});function SS(t,e){e&&(t.patchPlugin_=hl(ky),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function My(t){Dy(t),t.drafts_.forEach(mH),t.drafts_=null}function Dy(t){t===gd&&(gd=t.parent_)}var TS=t=>gd=gH(gd,t);function mH(t){const e=t[Jr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function IS(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Jr].modified_&&(My(e),yo(4)),Ao(t)&&(t=PS(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Jr].base_,t,e)}else t=PS(e,n);return vH(e,t,!0),My(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==O3?t:void 0}function PS(t,e){if(Dp(e))return e;const n=e[Jr];if(!n)return N0(e,t.handledSet_,t);if(!Lp(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);F3(n,t)}return n.copy_}function vH(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&cw(e,n)}function L3(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var Lp=(t,e)=>t.scope_===e,yH=[];function B3(t,e,n,r){const i=ls(t),o=t.type_;if(r!==void 0&&Ry(i,r,o)===e){I0(i,r,n,o);return}if(!t.draftLocations_){const c=t.draftLocations_=new Map;Rp(i,(f,d)=>{if(vs(d)){const g=c.get(d)||[];g.push(f),c.set(d,g)}})}const a=t.draftLocations_.get(e)??yH;for(const c of a)I0(i,c,n,o)}function xH(t,e,n){t.callbacks_.push(function(i){const o=e;if(!o||!Lp(o,i))return;i.mapSetPlugin_?.fixSetContents(o);const a=uw(o);B3(t,o.draft_??o,a,n),F3(o,i)})}function F3(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}L3(t)}}function wH(t,e,n){const{scope_:r}=t;if(vs(n)){const i=n[Jr];Lp(i,r)&&i.callbacks_.push(function(){Yh(t);const a=uw(i);B3(t,n,a,e)})}else Ao(n)&&t.callbacks_.push(function(){const o=ls(t);t.type_===3?o.has(n)&&N0(n,r.handledSet_,r):Ry(o,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&N0(Ry(t.copy_,e,t.type_),r.handledSet_,r)})}function N0(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||vs(t)||e.has(t)||!Ao(t)||Dp(t)||(e.add(t),Rp(t,(r,i)=>{if(vs(i)){const o=i[Jr];if(Lp(o,n)){const a=uw(o);I0(t,r,a,t.type_),L3(o)}}else Ao(i)&&N0(i,e,n)})),t}function EH(t,e){const n=Op(t),r={type_:n?1:0,scope_:e?e.scope_:D3(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,o=R0;n&&(i=[r],o=md);const{revoke:a,proxy:c}=Proxy.revocable(i,o);return r.draft_=c,r.revoke_=a,[c,r]}var R0={get(t,e){if(e===Jr)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=ls(t);if(!_S(i,e,t.type_))return bH(t,i,e);const o=i[e];if(t.finalized_||!Ao(o)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&hH(e))return o;if(o===iv(t.base_,e)){Yh(t);const a=t.type_===1?+e:e,c=By(t.scope_,o,t,a);return t.copy_[a]=c}return o},has(t,e){return e in ls(t)},ownKeys(t){return Reflect.ownKeys(ls(t))},set(t,e,n){const r=U3(ls(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=iv(ls(t),e),o=i?.[Jr];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(fH(n,i)&&(n!==void 0||_S(t.base_,e,t.type_)))return!0;Yh(t),Ly(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),wH(t,e,n)),!0},deleteProperty(t,e){return Yh(t),iv(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Ly(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ls(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[Kh]:!0,[Ny]:t.type_!==1||e!=="length",[T0]:r[T0],[pd]:n[e]}},defineProperty(){yo(11)},getPrototypeOf(t){return Nu(t.base_)},setPrototypeOf(){yo(12)}},md={};for(let t in R0){let e=R0[t];md[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}md.deleteProperty=function(t,e){return md.set.call(this,t,e,void 0)};md.set=function(t,e,n){return R0.set.call(this,t[0],e,n,t[0])};function iv(t,e){const n=t[Jr];return(n?ls(n):t)[e]}function bH(t,e,n){const r=U3(e,n);return r?pd in r?r[pd]:r.get?.call(t.draft_):void 0}function U3(t,e){if(!(e in t))return;let n=Nu(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Nu(n)}}function Ly(t){t.modified_||(t.modified_=!0,t.parent_&&Ly(t.parent_))}function Yh(t){t.copy_||(t.assigned_=new Map,t.copy_=Oy(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var _H=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(fu(n)&&!fu(r)){const a=r;r=n;const c=this;return function(d=a,...g){return c.produce(d,y=>r.call(this,y,...g))}}fu(r)||yo(6),i!==void 0&&!fu(i)&&yo(7);let o;if(Ao(n)){const a=TS(this),c=By(a,n,void 0);let f=!0;try{o=r(c),f=!1}finally{f?My(a):Dy(a)}return SS(a,i),IS(o,a)}else if(!n||!lw(n)){if(o=r(n),o===void 0&&(o=n),o===O3&&(o=void 0),this.autoFreeze_&&cw(o,!0),i){const a=[],c=[];hl(ky).generateReplacementPatches_(n,o,{patches_:a,inversePatches_:c}),i(a,c)}return o}else yo(1,n)},this.produceWithPatches=(n,r)=>{if(fu(n))return(c,...f)=>this.produceWithPatches(c,d=>n(d,...f));let i,o;return[this.produce(n,r,(c,f)=>{i=c,o=f}),i,o]},rv(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),rv(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),rv(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ao(e)||yo(8),vs(e)&&(e=_o(e));const n=TS(this),r=By(n,e,void 0);return r[Jr].isManual_=!0,Dy(n),r}finishDraft(e,n){const r=e&&e[Jr];(!r||!r.isManual_)&&yo(9);const{scope_:i}=r;return SS(i,n),IS(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const o=n[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(n=n.slice(r+1));const i=hl(ky).applyPatches_;return vs(e)?i(e,n):this.produce(e,o=>i(o,n))}};function By(t,e,n,r){const[i,o]=kp(e)?hl(P0).proxyMap_(e,n):Mp(e)?hl(P0).proxySet_(e,n):EH(e,n);return(n?.scope_??D3()).drafts_.push(i),o.callbacks_=n?.callbacks_??[],o.key_=r,n&&r!==void 0?xH(n,o,r):o.callbacks_.push(function(f){f.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:d}=f;o.modified_&&d&&d.generatePatches_(o,[],f)}),i}function _o(t){return vs(t)||yo(10,t),j3(t)}function j3(t){if(!Ao(t)||Dp(t))return t;const e=t[Jr];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Oy(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Oy(t,!0);return Rp(n,(i,o)=>{I0(n,i,j3(o))},r),e&&(e.finalized_=!1),n}var AH=new _H,V3=AH.produce;function G3(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var CH=G3(),SH=G3,TH=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?C0:C0.apply(null,arguments)};function to(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Ni(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>R3(r)&&r.type===t,n}var z3=class od extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,od.prototype)}static get[Symbol.species](){return od}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new od(...e[0].concat(this)):new od(...e.concat(this))}};function NS(t){return Ao(t)?V3(t,()=>{}):t}function Th(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function IH(t){return typeof t=="boolean"}var PH=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let a=new z3;return n&&(IH(n)?a.push(CH):a.push(SH(n.extraArgument))),a},$3="RTK_autoBatch",gn=()=>t=>({payload:t,meta:{[$3]:!0}}),RS=t=>e=>{setTimeout(e,t)},H3=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,a=!1;const c=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:RS(10):t.type==="callback"?t.queueNotification:RS(t.timeout),d=()=>{a=!1,o&&(o=!1,c.forEach(g=>g()))};return Object.assign({},r,{subscribe(g){const y=()=>i&&g(),E=r.subscribe(y);return c.add(g),()=>{E(),c.delete(g)}},dispatch(g){try{return i=!g?.meta?.[$3],o=!i,o&&(a||(a=!0,f(d))),r.dispatch(g)}finally{i=!0}}})},NH=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new z3(t);return r&&i.push(H3(typeof r=="object"?r:void 0)),i};function RH(t){const e=PH(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:a=void 0}=t||{};let c;if(typeof n=="function")c=n;else if(aw(n))c=N3(n);else throw new Error(Ni(1));let f;typeof r=="function"?f=r(e):f=e();let d=C0;i&&(d=TH({trace:!1,...typeof i=="object"&&i}));const g=cH(...f),y=NH(g);let E=typeof a=="function"?a(y):y();const C=d(...E);return P3(c,o,C)}function q3(t){const e={},n=[];let r;const i={addCase(o,a){const c=typeof o=="string"?o:o.type;if(!c)throw new Error(Ni(28));if(c in e)throw new Error(Ni(29));return e[c]=a,i},addAsyncThunk(o,a){return a.pending&&(e[o.pending.type]=a.pending),a.rejected&&(e[o.rejected.type]=a.rejected),a.fulfilled&&(e[o.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:o.settled,reducer:a.settled}),i},addMatcher(o,a){return n.push({matcher:o,reducer:a}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function OH(t){return typeof t=="function"}function kH(t,e){let[n,r,i]=q3(e),o;if(OH(t))o=()=>NS(t());else{const c=NS(t);o=()=>c}function a(c=o(),f){let d=[n[f.type],...r.filter(({matcher:g})=>g(f)).map(({reducer:g})=>g)];return d.filter(g=>!!g).length===0&&(d=[i]),d.reduce((g,y)=>{if(y)if(vs(g)){const C=y(g,f);return C===void 0?g:C}else{if(Ao(g))return V3(g,E=>y(E,f));{const E=y(g,f);if(E===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return E}}return g},c)}return a.getInitialState=o,a}var MH="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",DH=(t=21)=>{let e="",n=t;for(;n--;)e+=MH[Math.random()*64|0];return e},LH=Symbol.for("rtk-slice-createasyncthunk");function BH(t,e){return`${t}/${e}`}function FH({creators:t}={}){const e=t?.asyncThunk?.[LH];return function(r){const{name:i,reducerPath:o=i}=r;if(!i)throw new Error(Ni(11));const a=(typeof r.reducers=="function"?r.reducers(jH()):r.reducers)||{},c=Object.keys(a),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(F,z){const q=typeof F=="string"?F:F.type;if(!q)throw new Error(Ni(12));if(q in f.sliceCaseReducersByType)throw new Error(Ni(13));return f.sliceCaseReducersByType[q]=z,d},addMatcher(F,z){return f.sliceMatchers.push({matcher:F,reducer:z}),d},exposeAction(F,z){return f.actionCreators[F]=z,d},exposeCaseReducer(F,z){return f.sliceCaseReducersByName[F]=z,d}};c.forEach(F=>{const z=a[F],q={reducerName:F,type:BH(i,F),createNotation:typeof r.reducers=="function"};GH(z)?$H(q,z,d,e):VH(q,z,d)});function g(){const[F={},z=[],q=void 0]=typeof r.extraReducers=="function"?q3(r.extraReducers):[r.extraReducers],H={...F,...f.sliceCaseReducersByType};return kH(r.initialState,W=>{for(let Z in H)W.addCase(Z,H[Z]);for(let Z of f.sliceMatchers)W.addMatcher(Z.matcher,Z.reducer);for(let Z of z)W.addMatcher(Z.matcher,Z.reducer);q&&W.addDefaultCase(q)})}const y=F=>F,E=new Map,C=new WeakMap;let I;function P(F,z){return I||(I=g()),I(F,z)}function N(){return I||(I=g()),I.getInitialState()}function L(F,z=!1){function q(W){let Z=W[F];return typeof Z>"u"&&z&&(Z=Th(C,q,N)),Z}function H(W=y){const Z=Th(E,z,()=>new WeakMap);return Th(Z,W,()=>{const X={};for(const[ye,se]of Object.entries(r.selectors??{}))X[ye]=UH(se,W,()=>Th(C,W,N),z);return X})}return{reducerPath:F,getSelectors:H,get selectors(){return H(q)},selectSlice:q}}const U={name:i,reducer:P,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:N,...L(o),injectInto(F,{reducerPath:z,...q}={}){const H=z??o;return F.inject({reducerPath:H,reducer:P},q),{...U,...L(H,!0)}}};return U}}function UH(t,e,n,r){function i(o,...a){let c=e(o);return typeof c>"u"&&r&&(c=n()),t(c,...a)}return i.unwrapped=t,i}var fi=FH();function jH(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function VH({type:t,reducerName:e,createNotation:n},r,i){let o,a;if("reducer"in r){if(n&&!zH(r))throw new Error(Ni(17));o=r.reducer,a=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,a?to(t,a):to(t))}function GH(t){return t._reducerDefinitionType==="asyncThunk"}function zH(t){return t._reducerDefinitionType==="reducerWithPrepare"}function $H({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Ni(18));const{payloadCreator:o,fulfilled:a,pending:c,rejected:f,settled:d,options:g}=n,y=i(t,o,g);r.exposeAction(e,y),a&&r.addCase(y.fulfilled,a),c&&r.addCase(y.pending,c),f&&r.addCase(y.rejected,f),d&&r.addMatcher(y.settled,d),r.exposeCaseReducer(e,{fulfilled:a||Ih,pending:c||Ih,rejected:f||Ih,settled:d||Ih})}function Ih(){}var HH="task",W3="listener",K3="completed",dw="cancelled",qH=`task-${dw}`,WH=`task-${K3}`,Fy=`${W3}-${dw}`,KH=`${W3}-${K3}`,Bp=class{constructor(t){this.code=t,this.message=`${HH} ${dw} (reason: ${t})`}name="TaskAbortError";message},fw=(t,e)=>{if(typeof t!="function")throw new TypeError(Ni(32))},O0=()=>{},Y3=(t,e=O0)=>(t.catch(e),t),X3=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),al=t=>{if(t.aborted)throw new Bp(t.reason)};function J3(t,e){let n=O0;return new Promise((r,i)=>{const o=()=>i(new Bp(t.reason));if(t.aborted){o();return}n=X3(t,o),e.finally(()=>n()).then(r,i)}).finally(()=>{n=O0})}var YH=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Bp?"cancelled":"rejected",error:n}}finally{e?.()}},k0=t=>e=>Y3(J3(t,e).then(n=>(al(t),n))),Z3=t=>{const e=k0(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Au}=Object,OS={},Fp="listenerMiddleware",XH=(t,e)=>{const n=r=>X3(t,()=>r.abort(t.reason));return(r,i)=>{fw(r);const o=new AbortController;n(o);const a=YH(async()=>{al(t),al(o.signal);const c=await r({pause:k0(o.signal),delay:Z3(o.signal),signal:o.signal});return al(o.signal),c},()=>o.abort(WH));return i?.autoJoin&&e.push(a.catch(O0)),{result:k0(t)(a),cancel(){o.abort(qH)}}}},JH=(t,e)=>{const n=async(r,i)=>{al(e);let o=()=>{};const c=[new Promise((f,d)=>{let g=t({predicate:r,effect:(y,E)=>{E.unsubscribe(),f([y,E.getState(),E.getOriginalState()])}});o=()=>{g(),d()}})];i!=null&&c.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await J3(e,Promise.race(c));return al(e),f}finally{o()}};return(r,i)=>Y3(n(r,i))},Q3=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:o}=t;if(e)i=to(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Ni(21));return fw(o),{predicate:i,type:e,effect:o}},ek=Au(t=>{const{type:e,predicate:n,effect:r}=Q3(t);return{id:DH(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ni(22))}}},{withTypes:()=>ek}),kS=(t,e)=>{const{type:n,effect:r,predicate:i}=Q3(e);return Array.from(t.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},Uy=t=>{t.pending.forEach(e=>{e.abort(Fy)})},ZH=(t,e)=>()=>{for(const n of e.keys())Uy(n);t.clear()},MS=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},tk=Au(to(`${Fp}/add`),{withTypes:()=>tk}),QH=to(`${Fp}/removeAll`),nk=Au(to(`${Fp}/remove`),{withTypes:()=>nk}),eq=(...t)=>{console.error(`${Fp}/error`,...t)},Md=(t={})=>{const e=new Map,n=new Map,r=C=>{const I=n.get(C)??0;n.set(C,I+1)},i=C=>{const I=n.get(C)??1;I===1?n.delete(C):n.set(C,I-1)},{extra:o,onError:a=eq}=t;fw(a);const c=C=>(C.unsubscribe=()=>e.delete(C.id),e.set(C.id,C),I=>{C.unsubscribe(),I?.cancelActive&&Uy(C)}),f=C=>{const I=kS(e,C)??ek(C);return c(I)};Au(f,{withTypes:()=>f});const d=C=>{const I=kS(e,C);return I&&(I.unsubscribe(),C.cancelActive&&Uy(I)),!!I};Au(d,{withTypes:()=>d});const g=async(C,I,P,N)=>{const L=new AbortController,U=JH(f,L.signal),F=[];try{C.pending.add(L),r(C),await Promise.resolve(C.effect(I,Au({},P,{getOriginalState:N,condition:(z,q)=>U(z,q).then(Boolean),take:U,delay:Z3(L.signal),pause:k0(L.signal),extra:o,signal:L.signal,fork:XH(L.signal,F),unsubscribe:C.unsubscribe,subscribe:()=>{e.set(C.id,C)},cancelActiveListeners:()=>{C.pending.forEach((z,q,H)=>{z!==L&&(z.abort(Fy),H.delete(z))})},cancel:()=>{L.abort(Fy),C.pending.delete(L)},throwIfCancelled:()=>{al(L.signal)}})))}catch(z){z instanceof Bp||MS(a,z,{raisedBy:"effect"})}finally{await Promise.all(F),L.abort(KH),i(C),C.pending.delete(L)}},y=ZH(e,n);return{middleware:C=>I=>P=>{if(!R3(P))return I(P);if(tk.match(P))return f(P.payload);if(QH.match(P)){y();return}if(nk.match(P))return d(P.payload);let N=C.getState();const L=()=>{if(N===OS)throw new Error(Ni(23));return N};let U;try{if(U=I(P),e.size>0){const F=C.getState(),z=Array.from(e.values());for(const q of z){let H=!1;try{H=q.predicate(P,F,N)}catch(W){H=!1,MS(a,W,{raisedBy:"predicate"})}H&&g(q,P,C,L)}}}finally{N=OS}return U},startListening:f,stopListening:d,clearListeners:y}};function Ni(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var tq={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},rk=fi({name:"chartLayout",initialState:tq,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,o;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(o=e.payload.left)!==null&&o!==void 0?o:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:nq,setLayout:rq,setChartSize:iq,setScale:oq}=rk.actions,sq=rk.reducer;function ik(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function Xt(t){return Number.isFinite(t)}function Vo(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function DS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DS(Object(n),!0).forEach(function(r){aq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aq(t,e,n){return(e=lq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lq(t){var e=uq(t,"string");return typeof e=="symbol"?e:e+""}function uq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gt(t,e,n){return an(t)||an(e)?n:eo(e)?fl(t,e,n):typeof e=="function"?e(t):n}var cq=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:o,verticalAlign:a,layout:c}=e;if((c==="vertical"||c==="horizontal"&&a==="middle")&&o!=="center"&&Je(t[o]))return yu(yu({},t),{},{[o]:t[o]+(r||0)});if((c==="horizontal"||c==="vertical"&&o==="center")&&a!=="middle"&&Je(t[a]))return yu(yu({},t),{},{[a]:t[a]+(i||0)})}return t},bl=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",ok=(t,e,n,r)=>{if(r)return t.map(c=>c.coordinate);var i,o,a=t.map(c=>(c.coordinate===e&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate));return i||a.push(e),o||a.push(n),a},sk=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:o,scale:a,realScaleType:c,isCategorical:f,categoricalDomain:d,tickCount:g,ticks:y,niceTicks:E,axisType:C}=t;if(!a)return null;var I=c==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,P=i==="category"&&a.bandwidth?a.bandwidth()/I:0;if(P=C==="angleAxis"&&o&&o.length>=2?vr(o[0]-o[1])*2*P:P,y||E){var N=(y||E||[]).map((L,U)=>{var F=r?r.indexOf(L):L;return{coordinate:a(F)+P,value:L,offset:P,index:U}});return N.filter(L=>!ki(L.coordinate))}return f&&d?d.map((L,U)=>({coordinate:a(L)+P,value:L,index:U,offset:P})):a.ticks&&g!=null?a.ticks(g).map((L,U)=>({coordinate:a(L)+P,value:L,offset:P,index:U})):a.domain().map((L,U)=>({coordinate:a(L)+P,value:r?r[L]:L,index:U,offset:P}))},LS=1e-4,dq=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-LS,o=Math.max(r[0],r[1])+LS,a=t(e[0]),c=t(e[n-1]);(a<i||a>o||c<i||c>o)&&t.domain([e[0],e[n-1]])}},fq=(t,e)=>{if(!e||e.length!==2||!Je(e[0])||!Je(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Je(t[0])||t[0]<n)&&(i[0]=n),(!Je(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},hq=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var o=0,a=0,c=0;c<n;++c){var f=t[c],d=f?.[i];if(d!=null){var g=d[1],y=d[0],E=ki(g)?y:g;E>=0?(d[0]=o,d[1]=o+E,o=g):(d[0]=a,d[1]=a+E,a=g)}}}},pq=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var o=0,a=0;a<n;++a){var c=t[a],f=c?.[i];if(f!=null){var d=ki(f[1])?f[0]:f[1];d>=0?(f[0]=o,f[1]=o+d,o=f[1]):(f[0]=0,f[1]=0)}}}},gq={sign:hq,expand:Rz,none:dl,silhouette:Oz,wiggle:kz,positive:pq},mq=(t,e,n)=>{var r,i=(r=gq[n])!==null&&r!==void 0?r:dl,o=Nz().keys(e).value((c,f)=>Number(Gt(c,f,0))).order(Iy).offset(i),a=o(t);return a.forEach((c,f)=>{c.forEach((d,g)=>{var y=Gt(t[g],e[f],0);Array.isArray(y)&&y.length===2&&Je(y[0])&&Je(y[1])&&(d[0]=y[0],d[1]=y[1])})}),a};function vq(t){return t==null?void 0:String(t)}function BS(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:o,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!an(i[e.dataKey])){var c=d3(n,"value",i[e.dataKey]);if(c)return c.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var f=Gt(i,an(a)?e.dataKey:a);return an(f)?null:e.scale(f)}var FS=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:o,index:a}=t;if(e.type==="category")return n[a]?n[a].coordinate+r:null;var c=Gt(o,e.dataKey,e.scale.domain()[a]);return an(c)?null:e.scale(c)-i/2+r},yq=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},xq=t=>{var e=t.flat(2).filter(Je);return[Math.min(...e),Math.max(...e)]},wq=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Eq=(t,e,n)=>{if(t!=null)return wq(Object.keys(t).reduce((r,i)=>{var o=t[i];if(!o)return r;var{stackedData:a}=o,c=a.reduce((f,d)=>{var g=ik(d,e,n),y=xq(g);return!Xt(y[0])||!Xt(y[1])?f:[Math.min(f[0],y[0]),Math.max(f[1],y[1])]},[1/0,-1/0]);return[Math.min(c[0],r[0]),Math.max(c[1],r[1])]},[1/0,-1/0]))},US=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,M0=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=Pp(e,g=>g.coordinate),o=1/0,a=1,c=i.length;a<c;a++){var f=i[a],d=i[a-1];o=Math.min((f?.coordinate||0)-(d?.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function VS(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:o}=t;return yu(yu({},e),{},{dataKey:n,payload:r,value:i,name:o})}function $u(t,e){if(t)return String(t);if(typeof e=="string")return e}var bq=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},_q=(t,e)=>e==="centric"?t.angle:t.radius,Ss=t=>t.layout.width,Ts=t=>t.layout.height,Aq=t=>t.layout.scale,ak=t=>t.layout.margin,Up=de(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),jp=de(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),hw="data-recharts-item-index",pw="data-recharts-item-id",Dd=60;function GS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ph(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GS(Object(n),!0).forEach(function(r){Cq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cq(t,e,n){return(e=Sq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sq(t){var e=Tq(t,"string");return typeof e=="symbol"?e:e+""}function Tq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Iq=t=>t.brush.height;function Pq(t){var e=jp(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Dd;return n+i}return n},0)}function Nq(t){var e=jp(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Dd;return n+i}return n},0)}function Rq(t){var e=Up(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Oq(t){var e=Up(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var ir=de([Ss,Ts,ak,Iq,Pq,Nq,Rq,Oq,T3,rH],(t,e,n,r,i,o,a,c,f,d)=>{var g={left:(n.left||0)+i,right:(n.right||0)+o},y={top:(n.top||0)+a,bottom:(n.bottom||0)+c},E=Ph(Ph({},y),g),C=E.bottom;E.bottom+=r,E=cq(E,f,d);var I=t-E.left-E.right,P=e-E.top-E.bottom;return Ph(Ph({brushBottom:C},E),{},{width:Math.max(I,0),height:Math.max(P,0)})}),kq=de(ir,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),gw=de(Ss,Ts,(t,e)=>({x:0,y:0,width:t,height:e})),Mq=M.createContext(null),Nr=()=>M.useContext(Mq)!=null,Vp=t=>t.brush,Gp=de([Vp,ir,ak],(t,e,n)=>({height:t.height,x:Je(t.x)?t.x:e.left,y:Je(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Je(t.width)?t.width:e.width})),ov={},sv={},av={},zS;function Dq(){return zS||(zS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:o}={}){let a,c=null;const f=o!=null&&o.includes("leading"),d=o==null||o.includes("trailing"),g=()=>{c!==null&&(n.apply(a,c),a=void 0,c=null)},y=()=>{d&&g(),P()};let E=null;const C=()=>{E!=null&&clearTimeout(E),E=setTimeout(()=>{E=null,y()},r)},I=()=>{E!==null&&(clearTimeout(E),E=null)},P=()=>{I(),a=void 0,c=null},N=()=>{g()},L=function(...U){if(i?.aborted)return;a=this,c=U;const F=E==null;C(),f&&F&&g()};return L.schedule=C,L.cancel=P,L.flush=N,i?.addEventListener("abort",P,{once:!0}),L}t.debounce=e})(av)),av}var $S;function Lq(){return $S||($S=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Dq();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:a=!1,trailing:c=!0,maxWait:f}=o,d=Array(2);a&&(d[0]="leading"),c&&(d[1]="trailing");let g,y=null;const E=e.debounce(function(...P){g=r.apply(this,P),y=null},i,{edges:d}),C=function(...P){return f!=null&&(y===null&&(y=Date.now()),Date.now()-y>=f)?(g=r.apply(this,P),y=Date.now(),E.cancel(),E.schedule(),g):(E.apply(this,P),g)},I=()=>(E.flush(),g);return C.cancel=E.cancel,C.flush=I,C}t.debounce=n})(sv)),sv}var HS;function Bq(){return HS||(HS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Lq();function n(r,i=0,o={}){const{leading:a=!0,trailing:c=!0}=o;return e.debounce(r,i,{leading:a,maxWait:i,trailing:c})}t.throttle=n})(ov)),ov}var lv,qS;function Fq(){return qS||(qS=1,lv=Bq().throttle),lv}var Uq=Fq();const jq=ro(Uq);var D0=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(n.replace(/%s/g,()=>i[a++]))}},lk=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:o,maxHeight:a}=n,c=ms(r)?t:Number(r),f=ms(i)?e:Number(i);return o&&o>0&&(c?f=c/o:f&&(c=f*o),a&&f!=null&&f>a&&(f=a)),{calculatedWidth:c,calculatedHeight:f}},Vq={width:0,height:0,overflow:"visible"},Gq={width:0,overflowX:"visible"},zq={height:0,overflowY:"visible"},$q={},Hq=t=>{var{width:e,height:n}=t,r=ms(e),i=ms(n);return r&&i?Vq:r?Gq:i?zq:$q};function qq(t){var{width:e,height:n,aspect:r}=t,i=e,o=n;return i===void 0&&o===void 0?(i="100%",o="100%"):i===void 0?i=r&&r>0?void 0:"100%":o===void 0&&(o=r&&r>0?void 0:"100%"),{width:i,height:o}}function jy(){return jy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jy.apply(null,arguments)}function WS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WS(Object(n),!0).forEach(function(r){Wq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wq(t,e,n){return(e=Kq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kq(t){var e=Yq(t,"string");return typeof e=="symbol"?e:e+""}function Yq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uk=M.createContext({width:-1,height:-1});function Xq(t){return Vo(t.width)&&Vo(t.height)}function ck(t){var{children:e,width:n,height:r}=t,i=M.useMemo(()=>({width:n,height:r}),[n,r]);return Xq(i)?M.createElement(uk.Provider,{value:i},e):null}var mw=()=>M.useContext(uk),Jq=M.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:o,minWidth:a=0,minHeight:c,maxHeight:f,children:d,debounce:g=0,id:y,className:E,onResize:C,style:I={}}=t,P=M.useRef(null),N=M.useRef();N.current=C,M.useImperativeHandle(e,()=>P.current);var[L,U]=M.useState({containerWidth:r.width,containerHeight:r.height}),F=M.useCallback((Z,X)=>{U(ye=>{var se=Math.round(Z),ae=Math.round(X);return ye.containerWidth===se&&ye.containerHeight===ae?ye:{containerWidth:se,containerHeight:ae}})},[]);M.useEffect(()=>{if(P.current==null||typeof ResizeObserver>"u")return Od;var Z=ae=>{var be,{width:fe,height:ne}=ae[0].contentRect;F(fe,ne),(be=N.current)===null||be===void 0||be.call(N,fe,ne)};g>0&&(Z=jq(Z,g,{trailing:!0,leading:!1}));var X=new ResizeObserver(Z),{width:ye,height:se}=P.current.getBoundingClientRect();return F(ye,se),X.observe(P.current),()=>{X.disconnect()}},[F,g]);var{containerWidth:z,containerHeight:q}=L;D0(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:H,calculatedHeight:W}=lk(z,q,{width:i,height:o,aspect:n,maxHeight:f});return D0(H!=null&&H>0||W!=null&&W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,H,W,i,o,a,c,n),M.createElement("div",{id:y?"".concat(y):void 0,className:Ft("recharts-responsive-container",E),style:KS(KS({},I),{},{width:i,height:o,minWidth:a,minHeight:c,maxHeight:f}),ref:P},M.createElement("div",{style:Hq({width:i,height:o})},M.createElement(ck,{width:H,height:W},d)))}),uv=M.forwardRef((t,e)=>{var n=mw();if(Vo(n.width)&&Vo(n.height))return t.children;var{width:r,height:i}=qq({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:o,calculatedHeight:a}=lk(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Je(o)&&Je(a)?M.createElement(ck,{width:o,height:a},t.children):M.createElement(Jq,jy({},t,{width:r,height:i,ref:e}))});function dk(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var Hu=()=>{var t,e=Nr(),n=$e(kq),r=$e(Gp),i=(t=$e(Vp))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Zq={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},fk=()=>{var t;return(t=$e(ir))!==null&&t!==void 0?t:Zq},vw=()=>$e(Ss),yw=()=>$e(Ts),Qq=()=>$e(t=>t.layout.margin),Dt=t=>t.layout.layoutType,Ld=()=>$e(Dt),eW=()=>{var t=Ld();return t!==void 0},zp=t=>{var e=Zt(),n=Nr(),{width:r,height:i}=t,o=mw(),a=r,c=i;return o&&(a=o.width>0?o.width:r,c=o.height>0?o.height:i),M.useEffect(()=>{!n&&Vo(a)&&Vo(c)&&e(iq({width:a,height:c}))},[e,n,a,c]),null},hk=Symbol.for("immer-nothing"),YS=Symbol.for("immer-draftable"),Mi=Symbol.for("immer-state");function xo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var vd=Object.getPrototypeOf;function Ru(t){return!!t&&!!t[Mi]}function pl(t){return t?pk(t)||Array.isArray(t)||!!t[YS]||!!t.constructor?.[YS]||Bd(t)||Hp(t):!1}var tW=Object.prototype.constructor.toString(),XS=new WeakMap;function pk(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=XS.get(n);return r===void 0&&(r=Function.toString.call(n),XS.set(n,r)),r===tW}function L0(t,e,n=!0){$p(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function $p(t){const e=t[Mi];return e?e.type_:Array.isArray(t)?1:Bd(t)?2:Hp(t)?3:0}function Vy(t,e){return $p(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function gk(t,e,n){const r=$p(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function nW(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Bd(t){return t instanceof Map}function Hp(t){return t instanceof Set}function Za(t){return t.copy_||t.base_}function Gy(t,e){if(Bd(t))return new Map(t);if(Hp(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=pk(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Mi];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const a=i[o],c=r[a];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[a]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[a]})}return Object.create(vd(t),r)}else{const r=vd(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function xw(t,e=!1){return qp(t)||Ru(t)||!pl(t)||($p(t)>1&&Object.defineProperties(t,{set:Nh,add:Nh,clear:Nh,delete:Nh}),Object.freeze(t),e&&Object.values(t).forEach(n=>xw(n,!0))),t}function rW(){xo(2)}var Nh={value:rW};function qp(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var iW={};function gl(t){const e=iW[t];return e||xo(0,t),e}var yd;function mk(){return yd}function oW(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function JS(t,e){e&&(gl("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function zy(t){$y(t),t.drafts_.forEach(sW),t.drafts_=null}function $y(t){t===yd&&(yd=t.parent_)}function ZS(t){return yd=oW(yd,t)}function sW(t){const e=t[Mi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function QS(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Mi].modified_&&(zy(e),xo(4)),pl(t)&&(t=B0(e,t),e.parent_||F0(e,t)),e.patches_&&gl("Patches").generateReplacementPatches_(n[Mi].base_,t,e.patches_,e.inversePatches_)):t=B0(e,n,[]),zy(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==hk?t:void 0}function B0(t,e,n){if(qp(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[Mi];if(!i)return L0(e,(o,a)=>eT(t,i,e,o,a,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return F0(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let a=o,c=!1;i.type_===3&&(a=new Set(o),o.clear(),c=!0),L0(a,(f,d)=>eT(t,i,o,f,d,n,c),r),F0(t,o,!1),n&&t.patches_&&gl("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function eT(t,e,n,r,i,o,a){if(i==null||typeof i!="object"&&!a)return;const c=qp(i);if(!(c&&!a)){if(Ru(i)){const f=o&&e&&e.type_!==3&&!Vy(e.assigned_,r)?o.concat(r):void 0,d=B0(t,i,f);if(gk(n,r,d),Ru(d))t.canAutoFreeze_=!1;else return}else a&&n.add(i);if(pl(i)&&!c){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&c)return;B0(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Bd(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&F0(t,i)}}}function F0(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&xw(e,n)}function aW(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:mk(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=ww;n&&(i=[r],o=xd);const{revoke:a,proxy:c}=Proxy.revocable(i,o);return r.draft_=c,r.revoke_=a,c}var ww={get(t,e){if(e===Mi)return t;const n=Za(t);if(!Vy(n,e))return lW(t,n,e);const r=n[e];return t.finalized_||!pl(r)?r:r===cv(t.base_,e)?(dv(t),t.copy_[e]=qy(r,t)):r},has(t,e){return e in Za(t)},ownKeys(t){return Reflect.ownKeys(Za(t))},set(t,e,n){const r=vk(Za(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=cv(Za(t),e),o=i?.[Mi];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(nW(n,i)&&(n!==void 0||Vy(t.base_,e)))return!0;dv(t),Hy(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return cv(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,dv(t),Hy(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Za(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){xo(11)},getPrototypeOf(t){return vd(t.base_)},setPrototypeOf(){xo(12)}},xd={};L0(ww,(t,e)=>{xd[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});xd.deleteProperty=function(t,e){return xd.set.call(this,t,e,void 0)};xd.set=function(t,e,n){return ww.set.call(this,t[0],e,n,t[0])};function cv(t,e){const n=t[Mi];return(n?Za(n):t)[e]}function lW(t,e,n){const r=vk(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function vk(t,e){if(!(e in t))return;let n=vd(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=vd(n)}}function Hy(t){t.modified_||(t.modified_=!0,t.parent_&&Hy(t.parent_))}function dv(t){t.copy_||(t.copy_=Gy(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var uW=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const a=this;return function(f=o,...d){return a.produce(f,g=>n.call(this,g,...d))}}typeof n!="function"&&xo(6),r!==void 0&&typeof r!="function"&&xo(7);let i;if(pl(e)){const o=ZS(this),a=qy(e,void 0);let c=!0;try{i=n(a),c=!1}finally{c?zy(o):$y(o)}return JS(o,r),QS(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===hk&&(i=void 0),this.autoFreeze_&&xw(i,!0),r){const o=[],a=[];gl("Patches").generateReplacementPatches_(e,i,o,a),r(o,a)}return i}else xo(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...c)=>this.produceWithPatches(a,f=>e(f,...c));let r,i;return[this.produce(e,n,(a,c)=>{r=a,i=c}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){pl(t)||xo(8),Ru(t)&&(t=cW(t));const e=ZS(this),n=qy(t,void 0);return n[Mi].isManual_=!0,$y(e),n}finishDraft(t,e){const n=t&&t[Mi];(!n||!n.isManual_)&&xo(9);const{scope_:r}=n;return JS(r,e),QS(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=gl("Patches").applyPatches_;return Ru(t)?r(t,e):this.produce(t,i=>r(i,e))}};function qy(t,e){const n=Bd(t)?gl("MapSet").proxyMap_(t,e):Hp(t)?gl("MapSet").proxySet_(t,e):aW(t,e);return(e?e.scope_:mk()).drafts_.push(n),n}function cW(t){return Ru(t)||xo(10,t),yk(t)}function yk(t){if(!pl(t)||qp(t))return t;const e=t[Mi];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Gy(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Gy(t,!0);return L0(n,(i,o)=>{gk(n,i,yk(o))},r),e&&(e.finalized_=!1),n}var dW=new uW;dW.produce;var fW={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},xk=fi({name:"legend",initialState:fW,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:gn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=_o(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:gn()},removeLegendPayload:{reducer(t,e){var n=_o(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:gn()}}}),{setLegendSize:tT,setLegendSettings:hW,addLegendPayload:wk,replaceLegendPayload:Ek,removeLegendPayload:bk}=xk.actions,pW=xk.reducer,gW=["contextPayload"];function Wy(){return Wy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wy.apply(null,arguments)}function nT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ou(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nT(Object(n),!0).forEach(function(r){mW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mW(t,e,n){return(e=vW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vW(t){var e=yW(t,"string");return typeof e=="symbol"?e:e+""}function yW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xW(t,e){if(t==null)return{};var n,r,i=wW(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wW(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function EW(t){return t.value}function bW(t){var{contextPayload:e}=t,n=xW(t,gW),r=_3(e,t.payloadUniqBy,EW),i=Ou(Ou({},n),{},{payload:r});return M.isValidElement(t.content)?M.cloneElement(t.content,i):typeof t.content=="function"?M.createElement(t.content,i):M.createElement(f$,i)}function _W(t,e,n,r,i,o){var{layout:a,align:c,verticalAlign:f}=e,d,g;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(c==="center"&&a==="vertical"?d={left:((r||0)-o.width)/2}:d=c==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(f==="middle"?g={top:((i||0)-o.height)/2}:g=f==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Ou(Ou({},d),g)}function AW(t){var e=Zt();return M.useEffect(()=>{e(hW(t))},[e,t]),null}function CW(t){var e=Zt();return M.useEffect(()=>(e(tT(t)),()=>{e(tT({width:0,height:0}))}),[e,t]),null}function SW(t,e,n,r){return t==="vertical"&&Je(e)?{height:e}:t==="horizontal"?{width:n||r}:null}var TW={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function _k(t){var e=Vn(t,TW),n=sH(),r=ez(),i=Qq(),{width:o,height:a,wrapperStyle:c,portal:f}=e,[d,g]=I3([n]),y=vw(),E=yw();if(y==null||E==null)return null;var C=y-(i?.left||0)-(i?.right||0),I=SW(e.layout,a,o,C),P=f?c:Ou(Ou({position:"absolute",width:I?.width||o||"auto",height:I?.height||a||"auto"},_W(c,e,i,y,E,d)),c),N=f??r;if(N==null||n==null)return null;var L=M.createElement("div",{className:"recharts-legend-wrapper",style:P,ref:g},M.createElement(AW,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!f&&M.createElement(CW,{width:d.width,height:d.height}),M.createElement(bW,Wy({},e,I,{margin:i,chartWidth:y,chartHeight:E,contextPayload:n})));return Zx.createPortal(L,N)}_k.displayName="Legend";function Ky(){return Ky=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ky.apply(null,arguments)}function rT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rT(Object(n),!0).forEach(function(r){IW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IW(t,e,n){return(e=PW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PW(t){var e=NW(t,"string");return typeof e=="symbol"?e:e+""}function NW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RW(t){return Array.isArray(t)&&eo(t[0])&&eo(t[1])?t.join(" ~ "):t}var OW=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:a,itemSorter:c,wrapperClassName:f,labelClassName:d,label:g,labelFormatter:y,accessibilityLayer:E=!1}=t,C=()=>{if(o&&o.length){var q={padding:0,margin:0},H=(c?Pp(o,c):o).map((W,Z)=>{if(W.type==="none")return null;var X=W.formatter||a||RW,{value:ye,name:se}=W,ae=ye,be=se;if(X){var fe=X(ye,se,W,Z,o);if(Array.isArray(fe))[ae,be]=fe;else if(fe!=null)ae=fe;else return null}var ne=fv({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},r);return M.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Z),style:ne},eo(be)?M.createElement("span",{className:"recharts-tooltip-item-name"},be):null,eo(be)?M.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,M.createElement("span",{className:"recharts-tooltip-item-value"},ae),M.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return M.createElement("ul",{className:"recharts-tooltip-item-list",style:q},H)}return null},I=fv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),P=fv({margin:0},i),N=!an(g),L=N?g:"",U=Ft("recharts-default-tooltip",f),F=Ft("recharts-tooltip-label",d);N&&y&&o!==void 0&&o!==null&&(L=y(g,o));var z=E?{role:"status","aria-live":"assertive"}:{};return M.createElement("div",Ky({className:U,style:I},z),M.createElement("p",{className:F,style:P},M.isValidElement(L)?L:"".concat(L)),C())},qc="recharts-tooltip-wrapper",kW={visibility:"hidden"};function MW(t){var{coordinate:e,translateX:n,translateY:r}=t;return Ft(qc,{["".concat(qc,"-right")]:Je(n)&&e&&Je(e.x)&&n>=e.x,["".concat(qc,"-left")]:Je(n)&&e&&Je(e.x)&&n<e.x,["".concat(qc,"-bottom")]:Je(r)&&e&&Je(e.y)&&r>=e.y,["".concat(qc,"-top")]:Je(r)&&e&&Je(e.y)&&r<e.y})}function iT(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:a,tooltipDimension:c,viewBox:f,viewBoxDimension:d}=t;if(o&&Je(o[r]))return o[r];var g=n[r]-c-(i>0?i:0),y=n[r]+i;if(e[r])return a[r]?g:y;var E=f[r];if(E==null)return 0;if(a[r]){var C=g,I=E;return C<I?Math.max(y,E):Math.max(g,E)}if(d==null)return 0;var P=y+c,N=E+d;return P>N?Math.max(g,E):Math.max(y,E)}function DW(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function LW(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:a,useTranslate3d:c,viewBox:f}=t,d,g,y;return a.height>0&&a.width>0&&n?(g=iT({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:f,viewBoxDimension:f.width}),y=iT({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:f,viewBoxDimension:f.height}),d=DW({translateX:g,translateY:y,useTranslate3d:c})):d=kW,{cssProperties:d,cssClasses:MW({translateX:g,translateY:y,coordinate:n})}}function oT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oT(Object(n),!0).forEach(function(r){Yy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yy(t,e,n){return(e=BW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BW(t){var e=FW(t,"string");return typeof e=="symbol"?e:e+""}function FW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class UW extends M.PureComponent{constructor(){super(...arguments),Yy(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Yy(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:a,hasPayload:c,isAnimationActive:f,offset:d,position:g,reverseDirection:y,useTranslate3d:E,viewBox:C,wrapperStyle:I,lastBoundingBox:P,innerRef:N,hasPortalFromProps:L}=this.props,{cssClasses:U,cssProperties:F}=LW({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:d,position:g,reverseDirection:y,tooltipBox:{height:P.height,width:P.width},useTranslate3d:E,viewBox:C}),z=L?{}:Rh(Rh({transition:f&&e?"transform ".concat(r,"ms ").concat(i):void 0},F),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&c?"visible":"hidden",position:"absolute",top:0,left:0}),q=Rh(Rh({},z),{},{visibility:!this.state.dismissed&&e&&c?"visible":"hidden"},I);return M.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:U,style:q,ref:N},o)}}var Ak=()=>{var t;return(t=$e(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Xy(){return Xy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xy.apply(null,arguments)}function sT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sT(Object(n),!0).forEach(function(r){jW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jW(t,e,n){return(e=VW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VW(t){var e=GW(t,"string");return typeof e=="symbol"?e:e+""}function GW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lT={curveBasisClosed:xz,curveBasisOpen:wz,curveBasis:yz,curveBumpX:iz,curveBumpY:oz,curveLinearClosed:Ez,curveLinear:Sp,curveMonotoneX:bz,curveMonotoneY:_z,curveNatural:Az,curveStep:Cz,curveStepAfter:Tz,curveStepBefore:Sz},U0=t=>Xt(t.x)&&Xt(t.y),uT=t=>t.base!=null&&U0(t.base)&&U0(t),Wc=t=>t.x,Kc=t=>t.y,zW=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Rd(t));return(n==="curveMonotone"||n==="curveBump")&&e?lT["".concat(n).concat(e==="vertical"?"Y":"X")]:lT[n]||Sp},$W=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=t,a=zW(e,i),c=o?n.filter(U0):n,f;if(Array.isArray(r)){var d=n.map((C,I)=>aT(aT({},C),{},{base:r[I]}));i==="vertical"?f=_h().y(Kc).x1(Wc).x0(C=>C.base.x):f=_h().x(Wc).y1(Kc).y0(C=>C.base.y);var g=f.defined(uT).curve(a),y=o?d.filter(uT):d;return g(y)}i==="vertical"&&Je(r)?f=_h().y(Kc).x1(Wc).x0(r):Je(r)?f=_h().x(Wc).y1(Kc).y0(r):f=ZO().x(Wc).y(Kc);var E=f.defined(U0).curve(a);return E(c)},Wp=t=>{var{className:e,points:n,path:r,pathRef:i}=t,o=Ld();if((!n||!n.length)&&!r)return null;var a={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||o,connectNulls:t.connectNulls},c=n&&n.length?$W(a):r;return M.createElement("path",Xy({},Ri(t),Zz(t),{className:Ft("recharts-curve",e),d:c===null?void 0:c,ref:i}))},HW=["x","y","top","left","width","height","className"];function Jy(){return Jy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jy.apply(null,arguments)}function cT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cT(Object(n),!0).forEach(function(r){WW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WW(t,e,n){return(e=KW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KW(t){var e=YW(t,"string");return typeof e=="symbol"?e:e+""}function YW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XW(t,e){if(t==null)return{};var n,r,i=JW(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function JW(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ZW=(t,e,n,r,i,o)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n),QW=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:o=0,height:a=0,className:c}=t,f=XW(t,HW),d=qW({x:e,y:n,top:r,left:i,width:o,height:a},f);return!Je(e)||!Je(n)||!Je(o)||!Je(a)||!Je(r)||!Je(i)?null:M.createElement("path",Jy({},Oi(d),{className:Ft("recharts-cross",c),d:ZW(e,n,o,a,r,i)}))};function eK(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function dT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dT(Object(n),!0).forEach(function(r){tK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tK(t,e,n){return(e=nK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nK(t){var e=rK(t,"string");return typeof e=="symbol"?e:e+""}function rK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iK=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Ck=(t,e,n)=>t.map(r=>"".concat(iK(r)," ").concat(e,"ms ").concat(n)).join(","),oK=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),wd=(t,e)=>Object.keys(e).reduce((n,r)=>fT(fT({},n),{},{[r]:t(r,e[r])}),{});function hT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hT(Object(n),!0).forEach(function(r){sK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sK(t,e,n){return(e=aK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aK(t){var e=lK(t,"string");return typeof e=="symbol"?e:e+""}function lK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j0=(t,e,n)=>t+(e-t)*n,Zy=t=>{var{from:e,to:n}=t;return e!==n},Sk=(t,e,n)=>{var r=wd((i,o)=>{if(Zy(o)){var[a,c]=t(o.from,o.to,o.velocity);return rr(rr({},o),{},{from:a,velocity:c})}return o},e);return n<1?wd((i,o)=>Zy(o)&&r[i]!=null?rr(rr({},o),{},{velocity:j0(o.velocity,r[i].velocity,n),from:j0(o.from,r[i].from,n)}):o,e):Sk(t,r,n-1)};function uK(t,e,n,r,i,o){var a,c=r.reduce((E,C)=>rr(rr({},E),{},{[C]:{from:t[C],velocity:0,to:e[C]}}),{}),f=()=>wd((E,C)=>C.from,c),d=()=>!Object.values(c).filter(Zy).length,g=null,y=E=>{a||(a=E);var C=E-a,I=C/n.dt;c=Sk(n,c,I),i(rr(rr(rr({},t),e),f())),a=E,d()||(g=o.setTimeout(y))};return()=>(g=o.setTimeout(y),()=>{var E;(E=g)===null||E===void 0||E()})}function cK(t,e,n,r,i,o,a){var c=null,f=i.reduce((y,E)=>{var C=t[E],I=e[E];return C==null||I==null?y:rr(rr({},y),{},{[E]:[C,I]})},{}),d,g=y=>{d||(d=y);var E=(y-d)/r,C=wd((P,N)=>j0(...N,n(E)),f);if(o(rr(rr(rr({},t),e),C)),E<1)c=a.setTimeout(g);else{var I=wd((P,N)=>j0(...N,n(1)),f);o(rr(rr(rr({},t),e),I))}};return()=>(c=a.setTimeout(g),()=>{var y;(y=c)===null||y===void 0||y()})}const dK=(t,e,n,r,i,o)=>{var a=oK(t,e);return n==null?()=>(i(rr(rr({},t),e)),()=>{}):n.isStepper===!0?uK(t,e,n,a,i,o):cK(t,e,n,r,a,i,o)};var V0=1e-4,Tk=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Ik=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),pT=(t,e)=>n=>{var r=Tk(t,e);return Ik(r,n)},fK=(t,e)=>n=>{var r=Tk(t,e),i=[...r.map((o,a)=>o*a).slice(1),0];return Ik(i,n)},hK=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(o=>parseFloat(o));return[i[0],i[1],i[2],i[3]]},pK=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=hK(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},gK=(t,e,n,r)=>{var i=pT(t,n),o=pT(e,r),a=fK(t,n),c=d=>d>1?1:d<0?0:d,f=d=>{for(var g=d>1?1:d,y=g,E=0;E<8;++E){var C=i(y)-g,I=a(y);if(Math.abs(C-g)<V0||I<V0)return o(y);y=c(y-C/I)}return o(y)};return f.isStepper=!1,f},gT=function(){return gK(...pK(...arguments))},mK=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,o=(a,c,f)=>{var d=-(a-c)*n,g=f*r,y=f+(d-g)*i/1e3,E=f*i/1e3+a;return Math.abs(E-c)<V0&&Math.abs(y)<V0?[c,0]:[E,y]};return o.isStepper=!0,o.dt=i,o},vK=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return gT(t);case"spring":return mK();default:if(t.split("(")[0]==="cubic-bezier")return gT(t)}return typeof t=="function"?t:null};function yK(t){var e,n=()=>null,r=!1,i=null,o=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var c=a,[f,...d]=c;if(typeof f=="number"){i=t.setTimeout(o.bind(null,d),f);return}o(f),i=t.setTimeout(o.bind(null,d));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,i&&(i(),i=null),o(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class xK{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=a=>{a-r>=n?e(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{i!=null&&cancelAnimationFrame(i)}}}function wK(){return yK(new xK)}var EK=M.createContext(wK);function bK(t,e){var n=M.useContext(EK);return M.useMemo(()=>e??n(t),[t,e,n])}var _K=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Kp={isSsr:_K()},AK={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},mT={t:0},hv={t:1};function Fd(t){var e=Vn(t,AK),{isActive:n,canBegin:r,duration:i,easing:o,begin:a,onAnimationEnd:c,onAnimationStart:f,children:d}=e,g=n==="auto"?!Kp.isSsr:n,y=bK(e.animationId,e.animationManager),[E,C]=M.useState(g?mT:hv),I=M.useRef(null);return M.useEffect(()=>{g||C(hv)},[g]),M.useEffect(()=>{if(!g||!r)return Od;var P=dK(mT,hv,vK(o),i,C,y.getTimeoutController()),N=()=>{I.current=P()};return y.start([f,a,N,i,c]),()=>{y.stop(),I.current&&I.current(),c()}},[g,r,i,o,a,f,c,y]),d(E.t)}function Ud(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=M.useRef(hd(e)),r=M.useRef(t);return r.current!==t&&(n.current=hd(e),r.current=t),n.current}var CK=["radius"],SK=["radius"],vT,yT,xT,wT,ET,bT,_T,AT,CT,ST;function TT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TT(Object(n),!0).forEach(function(r){TK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TK(t,e,n){return(e=IK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IK(t){var e=PK(t,"string");return typeof e=="symbol"?e:e+""}function PK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G0(){return G0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G0.apply(null,arguments)}function PT(t,e){if(t==null)return{};var n,r,i=NK(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function NK(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Bo(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var NT=(t,e,n,r,i)=>{var o=ca(n),a=ca(r),c=Math.min(Math.abs(o)/2,Math.abs(a)/2),f=a>=0?1:-1,d=o>=0?1:-1,g=a>=0&&o>=0||a<0&&o<0?1:0,y;if(c>0&&i instanceof Array){for(var E=[0,0,0,0],C=0,I=4;C<I;C++)E[C]=i[C]>c?c:i[C];y=Rn(vT||(vT=Bo(["M",",",""])),t,e+f*E[0]),E[0]>0&&(y+=Rn(yT||(yT=Bo(["A ",",",",0,0,",",",",",""])),E[0],E[0],g,t+d*E[0],e)),y+=Rn(xT||(xT=Bo(["L ",",",""])),t+n-d*E[1],e),E[1]>0&&(y+=Rn(wT||(wT=Bo(["A ",",",",0,0,",`,
        `,",",""])),E[1],E[1],g,t+n,e+f*E[1])),y+=Rn(ET||(ET=Bo(["L ",",",""])),t+n,e+r-f*E[2]),E[2]>0&&(y+=Rn(bT||(bT=Bo(["A ",",",",0,0,",`,
        `,",",""])),E[2],E[2],g,t+n-d*E[2],e+r)),y+=Rn(_T||(_T=Bo(["L ",",",""])),t+d*E[3],e+r),E[3]>0&&(y+=Rn(AT||(AT=Bo(["A ",",",",0,0,",`,
        `,",",""])),E[3],E[3],g,t,e+r-f*E[3])),y+="Z"}else if(c>0&&i===+i&&i>0){var P=Math.min(c,i);y=Rn(CT||(CT=Bo(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+f*P,P,P,g,t+d*P,e,t+n-d*P,e,P,P,g,t+n,e+f*P,t+n,e+r-f*P,P,P,g,t+n-d*P,e+r,t+d*P,e+r,P,P,g,t,e+r-f*P)}else y=Rn(ST||(ST=Bo(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return y},RT={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pk=t=>{var e=Vn(t,RT),n=M.useRef(null),[r,i]=M.useState(-1);M.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var me=n.current.getTotalLength();me&&i(me)}catch{}},[]);var{x:o,y:a,width:c,height:f,radius:d,className:g}=e,{animationEasing:y,animationDuration:E,animationBegin:C,isAnimationActive:I,isUpdateAnimationActive:P}=e,N=M.useRef(c),L=M.useRef(f),U=M.useRef(o),F=M.useRef(a),z=M.useMemo(()=>({x:o,y:a,width:c,height:f,radius:d}),[o,a,c,f,d]),q=Ud(z,"rectangle-");if(o!==+o||a!==+a||c!==+c||f!==+f||c===0||f===0)return null;var H=Ft("recharts-rectangle",g);if(!P){var W=Oi(e),{radius:Z}=W,X=PT(W,CK);return M.createElement("path",G0({},X,{x:ca(o),y:ca(a),width:ca(c),height:ca(f),radius:typeof d=="number"?d:void 0,className:H,d:NT(o,a,c,f,d)}))}var ye=N.current,se=L.current,ae=U.current,be=F.current,fe="0px ".concat(r===-1?1:r,"px"),ne="".concat(r,"px 0px"),we=Ck(["strokeDasharray"],E,typeof y=="string"?y:RT.animationEasing);return M.createElement(Fd,{animationId:q,key:q,canBegin:r>0,duration:E,easing:y,isActive:P,begin:C},me=>{var xe=_n(ye,c,me),Ae=_n(se,f,me),Ce=_n(ae,o,me),te=_n(be,a,me);n.current&&(N.current=xe,L.current=Ae,U.current=Ce,F.current=te);var he;I?me>0?he={transition:we,strokeDasharray:ne}:he={strokeDasharray:fe}:he={strokeDasharray:ne};var Fe=Oi(e),{radius:Le}=Fe,lt=PT(Fe,SK);return M.createElement("path",G0({},lt,{radius:typeof d=="number"?d:void 0,className:H,d:NT(Ce,te,xe,Ae,d),ref:n,style:IT(IT({},he),e.style)}))})};function OT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OT(Object(n),!0).forEach(function(r){RK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RK(t,e,n){return(e=OK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OK(t){var e=kK(t,"string");return typeof e=="symbol"?e:e+""}function kK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var z0=Math.PI/180,MK=t=>t*180/Math.PI,Wn=(t,e,n,r)=>({x:t+Math.cos(-z0*r)*n,y:e+Math.sin(-z0*r)*n}),Nk=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},DK=(t,e)=>{var{x:n,y:r}=t,{x:i,y:o}=e;return Math.sqrt((n-i)**2+(r-o)**2)},LK=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:o}=e,a=DK({x:n,y:r},{x:i,y:o});if(a<=0)return{radius:a,angle:0};var c=(n-i)/a,f=Math.acos(c);return r>o&&(f=2*Math.PI-f),{radius:a,angle:MK(f),angleInRadian:f}},BK=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-o*360,endAngle:n-o*360}},FK=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return t+a*360},UK=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:o}=LK({x:n,y:r},e),{innerRadius:a,outerRadius:c}=e;if(i<a||i>c||i===0)return null;var{startAngle:f,endAngle:d}=BK(e),g=o,y;if(f<=d){for(;g>d;)g-=360;for(;g<f;)g+=360;y=g>=f&&g<=d}else{for(;g>f;)g-=360;for(;g<d;)g+=360;y=g>=d&&g<=f}return y?kT(kT({},e),{},{radius:i,angle:FK(g,e)}):null};function Rk(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:o}=t,a=Wn(e,n,r,i),c=Wn(e,n,r,o);return{points:[a,c],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}var MT,DT,LT,BT,FT,UT,jT;function Qy(){return Qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qy.apply(null,arguments)}function rl(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var jK=(t,e)=>{var n=vr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Oh=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:o,isExternal:a,cornerRadius:c,cornerIsExternal:f}=t,d=c*(a?1:-1)+r,g=Math.asin(c/d)/z0,y=f?i:i+o*g,E=Wn(e,n,d,y),C=Wn(e,n,r,y),I=f?i-o*g:i,P=Wn(e,n,d*Math.cos(g*z0),I);return{center:E,circleTangency:C,lineTangency:P,theta:g}},Ok=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:a}=t,c=jK(o,a),f=o+c,d=Wn(e,n,i,o),g=Wn(e,n,i,f),y=Rn(MT||(MT=rl(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,i,i,+(Math.abs(c)>180),+(o>f),g.x,g.y);if(r>0){var E=Wn(e,n,r,o),C=Wn(e,n,r,f);y+=Rn(DT||(DT=rl(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),C.x,C.y,r,r,+(Math.abs(c)>180),+(o<=f),E.x,E.y)}else y+=Rn(LT||(LT=rl(["L ",","," Z"])),e,n);return y},VK=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:c,startAngle:f,endAngle:d}=t,g=vr(d-f),{circleTangency:y,lineTangency:E,theta:C}=Oh({cx:e,cy:n,radius:i,angle:f,sign:g,cornerRadius:o,cornerIsExternal:c}),{circleTangency:I,lineTangency:P,theta:N}=Oh({cx:e,cy:n,radius:i,angle:d,sign:-g,cornerRadius:o,cornerIsExternal:c}),L=c?Math.abs(f-d):Math.abs(f-d)-C-N;if(L<0)return a?Rn(BT||(BT=rl(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),E.x,E.y,o,o,o*2,o,o,-o*2):Ok({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:d});var U=Rn(FT||(FT=rl(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),E.x,E.y,o,o,+(g<0),y.x,y.y,i,i,+(L>180),+(g<0),I.x,I.y,o,o,+(g<0),P.x,P.y);if(r>0){var{circleTangency:F,lineTangency:z,theta:q}=Oh({cx:e,cy:n,radius:r,angle:f,sign:g,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),{circleTangency:H,lineTangency:W,theta:Z}=Oh({cx:e,cy:n,radius:r,angle:d,sign:-g,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),X=c?Math.abs(f-d):Math.abs(f-d)-q-Z;if(X<0&&o===0)return"".concat(U,"L").concat(e,",").concat(n,"Z");U+=Rn(UT||(UT=rl(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),W.x,W.y,o,o,+(g<0),H.x,H.y,r,r,+(X>180),+(g>0),F.x,F.y,o,o,+(g<0),z.x,z.y)}else U+=Rn(jT||(jT=rl(["L",",","Z"])),e,n);return U},GK={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},kk=t=>{var e=Vn(t,GK),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:a,forceCornerRadius:c,cornerIsExternal:f,startAngle:d,endAngle:g,className:y}=e;if(o<i||d===g)return null;var E=Ft("recharts-sector",y),C=o-i,I=zr(a,C,0,!0),P;return I>0&&Math.abs(d-g)<360?P=VK({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(I,C/2),forceCornerRadius:c,cornerIsExternal:f,startAngle:d,endAngle:g}):P=Ok({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:d,endAngle:g}),M.createElement("path",Qy({},Oi(e),{className:E,d:P}))};function zK(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(h3(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:o,outerRadius:a,angle:c}=e,f=Wn(r,i,o,c),d=Wn(r,i,a,c);return[{x:f.x,y:f.y},{x:d.x,y:d.y}]}return Rk(e)}}var pv={},gv={},mv={},VT;function $K(){return VT||(VT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C3();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(mv)),mv}var GT;function HK(){return GT||(GT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$K();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(gv)),gv}var zT;function qK(){return zT||(zT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S3(),n=HK();function r(i,o,a){a&&typeof a!="number"&&e.isIterateeCall(i,o,a)&&(o=a=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),a=a===void 0?i<o?1:-1:n.toFinite(a);const c=Math.max(Math.ceil((o-i)/(a||1)),0),f=new Array(c);for(let d=0;d<c;d++)f[d]=i,i+=a;return f}t.range=r})(pv)),pv}var vv,$T;function WK(){return $T||($T=1,vv=qK().range),vv}var KK=WK();const Mk=ro(KK);function da(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function YK(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ew(t){let e,n,r;t.length!==2?(e=da,n=(c,f)=>da(t(c),f),r=(c,f)=>t(c)-f):(e=t===da||t===YK?t:XK,n=t,r=t);function i(c,f,d=0,g=c.length){if(d<g){if(e(f,f)!==0)return g;do{const y=d+g>>>1;n(c[y],f)<0?d=y+1:g=y}while(d<g)}return d}function o(c,f,d=0,g=c.length){if(d<g){if(e(f,f)!==0)return g;do{const y=d+g>>>1;n(c[y],f)<=0?d=y+1:g=y}while(d<g)}return d}function a(c,f,d=0,g=c.length){const y=i(c,f,d,g-1);return y>d&&r(c[y-1],f)>-r(c[y],f)?y-1:y}return{left:i,center:a,right:o}}function XK(){return 0}function Dk(t){return t===null?NaN:+t}function*JK(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const ZK=Ew(da),jd=ZK.right;Ew(Dk).center;class HT extends Map{constructor(e,n=tY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(qT(this,e))}has(e){return super.has(qT(this,e))}set(e,n){return super.set(QK(this,e),n)}delete(e){return super.delete(eY(this,e))}}function qT({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function QK({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function eY({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function tY(t){return t!==null&&typeof t=="object"?t.valueOf():t}function nY(t=da){if(t===da)return Lk;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Lk(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const rY=Math.sqrt(50),iY=Math.sqrt(10),oY=Math.sqrt(2);function $0(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=rY?10:o>=iY?5:o>=oY?2:1;let c,f,d;return i<0?(d=Math.pow(10,-i)/a,c=Math.round(t*d),f=Math.round(e*d),c/d<t&&++c,f/d>e&&--f,d=-d):(d=Math.pow(10,i)*a,c=Math.round(t/d),f=Math.round(e/d),c*d<t&&++c,f*d>e&&--f),f<c&&.5<=n&&n<2?$0(t,e,n*2):[c,f,d]}function ex(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?$0(e,t,n):$0(t,e,n);if(!(o>=i))return[];const c=o-i+1,f=new Array(c);if(r)if(a<0)for(let d=0;d<c;++d)f[d]=(o-d)/-a;else for(let d=0;d<c;++d)f[d]=(o-d)*a;else if(a<0)for(let d=0;d<c;++d)f[d]=(i+d)/-a;else for(let d=0;d<c;++d)f[d]=(i+d)*a;return f}function tx(t,e,n){return e=+e,t=+t,n=+n,$0(t,e,n)[2]}function nx(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?tx(e,t,n):tx(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function WT(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function KT(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Bk(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Lk:nY(i);r>n;){if(r-n>600){const f=r-n+1,d=e-n+1,g=Math.log(f),y=.5*Math.exp(2*g/3),E=.5*Math.sqrt(g*y*(f-y)/f)*(d-f/2<0?-1:1),C=Math.max(n,Math.floor(e-d*y/f+E)),I=Math.min(r,Math.floor(e+(f-d)*y/f+E));Bk(t,e,C,I,i)}const o=t[e];let a=n,c=r;for(Yc(t,n,e),i(t[r],o)>0&&Yc(t,n,r);a<c;){for(Yc(t,a,c),++a,--c;i(t[a],o)<0;)++a;for(;i(t[c],o)>0;)--c}i(t[n],o)===0?Yc(t,n,c):(++c,Yc(t,c,r)),c<=e&&(n=c+1),e<=c&&(r=c-1)}return t}function Yc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function sY(t,e,n){if(t=Float64Array.from(JK(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return KT(t);if(e>=1)return WT(t);var r,i=(r-1)*e,o=Math.floor(i),a=WT(Bk(t,o).subarray(0,o+1)),c=KT(t.subarray(o+1));return a+(c-a)*(i-o)}}function aY(t,e,n=Dk){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),c=+n(t[o+1],o+1,t);return a+(c-a)*(i-o)}}function lY(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function io(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Is(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const rx=Symbol("implicit");function bw(){var t=new HT,e=[],n=[],r=rx;function i(o){let a=t.get(o);if(a===void 0){if(r!==rx)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new HT;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return bw(e,n).unknown(r)},io.apply(i,arguments),i}function _w(){var t=bw().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,c=!1,f=0,d=0,g=.5;delete t.unknown;function y(){var E=e().length,C=i<r,I=C?i:r,P=C?r:i;o=(P-I)/Math.max(1,E-f+d*2),c&&(o=Math.floor(o)),I+=(P-I-o*(E-f))*g,a=o*(1-f),c&&(I=Math.round(I),a=Math.round(a));var N=lY(E).map(function(L){return I+o*L});return n(C?N.reverse():N)}return t.domain=function(E){return arguments.length?(e(E),y()):e()},t.range=function(E){return arguments.length?([r,i]=E,r=+r,i=+i,y()):[r,i]},t.rangeRound=function(E){return[r,i]=E,r=+r,i=+i,c=!0,y()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(E){return arguments.length?(c=!!E,y()):c},t.padding=function(E){return arguments.length?(f=Math.min(1,d=+E),y()):f},t.paddingInner=function(E){return arguments.length?(f=Math.min(1,E),y()):f},t.paddingOuter=function(E){return arguments.length?(d=+E,y()):d},t.align=function(E){return arguments.length?(g=Math.max(0,Math.min(1,E)),y()):g},t.copy=function(){return _w(e(),[r,i]).round(c).paddingInner(f).paddingOuter(d).align(g)},io.apply(y(),arguments)}function Fk(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Fk(e())},t}function uY(){return Fk(_w.apply(null,arguments).paddingInner(1))}function Aw(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Uk(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Vd(){}var Ed=.7,H0=1/Ed,Cu="\\s*([+-]?\\d+)\\s*",bd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cY=/^#([0-9a-f]{3,8})$/,dY=new RegExp(`^rgb\\(${Cu},${Cu},${Cu}\\)$`),fY=new RegExp(`^rgb\\(${jo},${jo},${jo}\\)$`),hY=new RegExp(`^rgba\\(${Cu},${Cu},${Cu},${bd}\\)$`),pY=new RegExp(`^rgba\\(${jo},${jo},${jo},${bd}\\)$`),gY=new RegExp(`^hsl\\(${bd},${jo},${jo}\\)$`),mY=new RegExp(`^hsla\\(${bd},${jo},${jo},${bd}\\)$`),YT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Aw(Vd,_d,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:XT,formatHex:XT,formatHex8:vY,formatHsl:yY,formatRgb:JT,toString:JT});function XT(){return this.rgb().formatHex()}function vY(){return this.rgb().formatHex8()}function yY(){return jk(this).formatHsl()}function JT(){return this.rgb().formatRgb()}function _d(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=cY.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ZT(e):n===3?new ci(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?kh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?kh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=dY.exec(t))?new ci(e[1],e[2],e[3],1):(e=fY.exec(t))?new ci(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=hY.exec(t))?kh(e[1],e[2],e[3],e[4]):(e=pY.exec(t))?kh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=gY.exec(t))?tI(e[1],e[2]/100,e[3]/100,1):(e=mY.exec(t))?tI(e[1],e[2]/100,e[3]/100,e[4]):YT.hasOwnProperty(t)?ZT(YT[t]):t==="transparent"?new ci(NaN,NaN,NaN,0):null}function ZT(t){return new ci(t>>16&255,t>>8&255,t&255,1)}function kh(t,e,n,r){return r<=0&&(t=e=n=NaN),new ci(t,e,n,r)}function xY(t){return t instanceof Vd||(t=_d(t)),t?(t=t.rgb(),new ci(t.r,t.g,t.b,t.opacity)):new ci}function ix(t,e,n,r){return arguments.length===1?xY(t):new ci(t,e,n,r??1)}function ci(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Aw(ci,ix,Uk(Vd,{brighter(t){return t=t==null?H0:Math.pow(H0,t),new ci(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ed:Math.pow(Ed,t),new ci(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ci(ll(this.r),ll(this.g),ll(this.b),q0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:QT,formatHex:QT,formatHex8:wY,formatRgb:eI,toString:eI}));function QT(){return`#${il(this.r)}${il(this.g)}${il(this.b)}`}function wY(){return`#${il(this.r)}${il(this.g)}${il(this.b)}${il((isNaN(this.opacity)?1:this.opacity)*255)}`}function eI(){const t=q0(this.opacity);return`${t===1?"rgb(":"rgba("}${ll(this.r)}, ${ll(this.g)}, ${ll(this.b)}${t===1?")":`, ${t})`}`}function q0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ll(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function il(t){return t=ll(t),(t<16?"0":"")+t.toString(16)}function tI(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new wo(t,e,n,r)}function jk(t){if(t instanceof wo)return new wo(t.h,t.s,t.l,t.opacity);if(t instanceof Vd||(t=_d(t)),!t)return new wo;if(t instanceof wo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,c=o-i,f=(o+i)/2;return c?(e===o?a=(n-r)/c+(n<r)*6:n===o?a=(r-e)/c+2:a=(e-n)/c+4,c/=f<.5?o+i:2-o-i,a*=60):c=f>0&&f<1?0:a,new wo(a,c,f,t.opacity)}function EY(t,e,n,r){return arguments.length===1?jk(t):new wo(t,e,n,r??1)}function wo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Aw(wo,EY,Uk(Vd,{brighter(t){return t=t==null?H0:Math.pow(H0,t),new wo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ed:Math.pow(Ed,t),new wo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ci(yv(t>=240?t-240:t+120,i,r),yv(t,i,r),yv(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new wo(nI(this.h),Mh(this.s),Mh(this.l),q0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=q0(this.opacity);return`${t===1?"hsl(":"hsla("}${nI(this.h)}, ${Mh(this.s)*100}%, ${Mh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function nI(t){return t=(t||0)%360,t<0?t+360:t}function Mh(t){return Math.max(0,Math.min(1,t||0))}function yv(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Cw=t=>()=>t;function bY(t,e){return function(n){return t+n*e}}function _Y(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function AY(t){return(t=+t)==1?Vk:function(e,n){return n-e?_Y(e,n,t):Cw(isNaN(e)?n:e)}}function Vk(t,e){var n=e-t;return n?bY(t,n):Cw(isNaN(t)?e:t)}const rI=(function t(e){var n=AY(e);function r(i,o){var a=n((i=ix(i)).r,(o=ix(o)).r),c=n(i.g,o.g),f=n(i.b,o.b),d=Vk(i.opacity,o.opacity);return function(g){return i.r=a(g),i.g=c(g),i.b=f(g),i.opacity=d(g),i+""}}return r.gamma=t,r})(1);function CY(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function SY(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function TY(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=qu(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(c){for(a=0;a<r;++a)o[a]=i[a](c);return o}}function IY(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function W0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function PY(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=qu(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var ox=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xv=new RegExp(ox.source,"g");function NY(t){return function(){return t}}function RY(t){return function(e){return t(e)+""}}function OY(t,e){var n=ox.lastIndex=xv.lastIndex=0,r,i,o,a=-1,c=[],f=[];for(t=t+"",e=e+"";(r=ox.exec(t))&&(i=xv.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),c[a]?c[a]+=o:c[++a]=o),(r=r[0])===(i=i[0])?c[a]?c[a]+=i:c[++a]=i:(c[++a]=null,f.push({i:a,x:W0(r,i)})),n=xv.lastIndex;return n<e.length&&(o=e.slice(n),c[a]?c[a]+=o:c[++a]=o),c.length<2?f[0]?RY(f[0].x):NY(e):(e=f.length,function(d){for(var g=0,y;g<e;++g)c[(y=f[g]).i]=y.x(d);return c.join("")})}function qu(t,e){var n=typeof e,r;return e==null||n==="boolean"?Cw(e):(n==="number"?W0:n==="string"?(r=_d(e))?(e=r,rI):OY:e instanceof _d?rI:e instanceof Date?IY:SY(e)?CY:Array.isArray(e)?TY:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?PY:W0)(t,e)}function Sw(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function kY(t,e){e===void 0&&(e=t,t=qu);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var c=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[c](a-c)}}function MY(t){return function(){return t}}function K0(t){return+t}var iI=[0,1];function Yr(t){return t}function sx(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:MY(isNaN(e)?NaN:.5)}function DY(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function LY(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=sx(i,r),o=n(a,o)):(r=sx(r,i),o=n(o,a)),function(c){return o(r(c))}}function BY(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=sx(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(c){var f=jd(t,c,1,r)-1;return o[f](i[f](c))}}function Gd(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Yp(){var t=iI,e=iI,n=qu,r,i,o,a=Yr,c,f,d;function g(){var E=Math.min(t.length,e.length);return a!==Yr&&(a=DY(t[0],t[E-1])),c=E>2?BY:LY,f=d=null,y}function y(E){return E==null||isNaN(E=+E)?o:(f||(f=c(t.map(r),e,n)))(r(a(E)))}return y.invert=function(E){return a(i((d||(d=c(e,t.map(r),W0)))(E)))},y.domain=function(E){return arguments.length?(t=Array.from(E,K0),g()):t.slice()},y.range=function(E){return arguments.length?(e=Array.from(E),g()):e.slice()},y.rangeRound=function(E){return e=Array.from(E),n=Sw,g()},y.clamp=function(E){return arguments.length?(a=E?!0:Yr,g()):a!==Yr},y.interpolate=function(E){return arguments.length?(n=E,g()):n},y.unknown=function(E){return arguments.length?(o=E,y):o},function(E,C){return r=E,i=C,g()}}function Tw(){return Yp()(Yr,Yr)}function FY(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Y0(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ku(t){return t=Y0(Math.abs(t)),t?t[1]:NaN}function UY(t,e){return function(n,r){for(var i=n.length,o=[],a=0,c=t[0],f=0;i>0&&c>0&&(f+c+1>r&&(c=Math.max(1,r-f)),o.push(n.substring(i-=c,i+c)),!((f+=c+1)>r));)c=t[a=(a+1)%t.length];return o.reverse().join(e)}}function jY(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var VY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ad(t){if(!(e=VY.exec(t)))throw new Error("invalid format: "+t);var e;return new Iw({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ad.prototype=Iw.prototype;function Iw(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Iw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function GY(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Gk;function zY(t,e){var n=Y0(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Gk=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Y0(t,Math.max(0,e+o-1))[0]}function oI(t,e){var n=Y0(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const sI={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:FY,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>oI(t*100,e),r:oI,s:zY,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function aI(t){return t}var lI=Array.prototype.map,uI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $Y(t){var e=t.grouping===void 0||t.thousands===void 0?aI:UY(lI.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?aI:jY(lI.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function d(y){y=Ad(y);var E=y.fill,C=y.align,I=y.sign,P=y.symbol,N=y.zero,L=y.width,U=y.comma,F=y.precision,z=y.trim,q=y.type;q==="n"?(U=!0,q="g"):sI[q]||(F===void 0&&(F=12),z=!0,q="g"),(N||E==="0"&&C==="=")&&(N=!0,E="0",C="=");var H=P==="$"?n:P==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",W=P==="$"?r:/[%p]/.test(q)?a:"",Z=sI[q],X=/[defgprs%]/.test(q);F=F===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,F)):Math.max(0,Math.min(20,F));function ye(se){var ae=H,be=W,fe,ne,we;if(q==="c")be=Z(se)+be,se="";else{se=+se;var me=se<0||1/se<0;if(se=isNaN(se)?f:Z(Math.abs(se),F),z&&(se=GY(se)),me&&+se==0&&I!=="+"&&(me=!1),ae=(me?I==="("?I:c:I==="-"||I==="("?"":I)+ae,be=(q==="s"?uI[8+Gk/3]:"")+be+(me&&I==="("?")":""),X){for(fe=-1,ne=se.length;++fe<ne;)if(we=se.charCodeAt(fe),48>we||we>57){be=(we===46?i+se.slice(fe+1):se.slice(fe))+be,se=se.slice(0,fe);break}}}U&&!N&&(se=e(se,1/0));var xe=ae.length+se.length+be.length,Ae=xe<L?new Array(L-xe+1).join(E):"";switch(U&&N&&(se=e(Ae+se,Ae.length?L-be.length:1/0),Ae=""),C){case"<":se=ae+se+be+Ae;break;case"=":se=ae+Ae+se+be;break;case"^":se=Ae.slice(0,xe=Ae.length>>1)+ae+se+be+Ae.slice(xe);break;default:se=Ae+ae+se+be;break}return o(se)}return ye.toString=function(){return y+""},ye}function g(y,E){var C=d((y=Ad(y),y.type="f",y)),I=Math.max(-8,Math.min(8,Math.floor(ku(E)/3)))*3,P=Math.pow(10,-I),N=uI[8+I/3];return function(L){return C(P*L)+N}}return{format:d,formatPrefix:g}}var Dh,Pw,zk;HY({thousands:",",grouping:[3],currency:["$",""]});function HY(t){return Dh=$Y(t),Pw=Dh.format,zk=Dh.formatPrefix,Dh}function qY(t){return Math.max(0,-ku(Math.abs(t)))}function WY(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ku(e)/3)))*3-ku(Math.abs(t)))}function KY(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ku(e)-ku(t))+1}function $k(t,e,n,r){var i=nx(t,e,n),o;switch(r=Ad(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=WY(i,a))&&(r.precision=o),zk(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=KY(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=qY(i))&&(r.precision=o-(r.type==="%")*2);break}}return Pw(r)}function ya(t){var e=t.domain;return t.ticks=function(n){var r=e();return ex(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return $k(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],c=r[o],f,d,g=10;for(c<a&&(d=a,a=c,c=d,d=i,i=o,o=d);g-- >0;){if(d=tx(a,c,n),d===f)return r[i]=a,r[o]=c,e(r);if(d>0)a=Math.floor(a/d)*d,c=Math.ceil(c/d)*d;else if(d<0)a=Math.ceil(a*d)/d,c=Math.floor(c*d)/d;else break;f=d}return t},t}function Hk(){var t=Tw();return t.copy=function(){return Gd(t,Hk())},io.apply(t,arguments),ya(t)}function qk(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,K0),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return qk(t).unknown(e)},t=arguments.length?Array.from(t,K0):[0,1],ya(n)}function Wk(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function cI(t){return Math.log(t)}function dI(t){return Math.exp(t)}function YY(t){return-Math.log(-t)}function XY(t){return-Math.exp(-t)}function JY(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ZY(t){return t===10?JY:t===Math.E?Math.exp:e=>Math.pow(t,e)}function QY(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function fI(t){return(e,n)=>-t(-e,n)}function Nw(t){const e=t(cI,dI),n=e.domain;let r=10,i,o;function a(){return i=QY(r),o=ZY(r),n()[0]<0?(i=fI(i),o=fI(o),t(YY,XY)):t(cI,dI),e}return e.base=function(c){return arguments.length?(r=+c,a()):r},e.domain=function(c){return arguments.length?(n(c),a()):n()},e.ticks=c=>{const f=n();let d=f[0],g=f[f.length-1];const y=g<d;y&&([d,g]=[g,d]);let E=i(d),C=i(g),I,P;const N=c==null?10:+c;let L=[];if(!(r%1)&&C-E<N){if(E=Math.floor(E),C=Math.ceil(C),d>0){for(;E<=C;++E)for(I=1;I<r;++I)if(P=E<0?I/o(-E):I*o(E),!(P<d)){if(P>g)break;L.push(P)}}else for(;E<=C;++E)for(I=r-1;I>=1;--I)if(P=E>0?I/o(-E):I*o(E),!(P<d)){if(P>g)break;L.push(P)}L.length*2<N&&(L=ex(d,g,N))}else L=ex(E,C,Math.min(C-E,N)).map(o);return y?L.reverse():L},e.tickFormat=(c,f)=>{if(c==null&&(c=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Ad(f)).precision==null&&(f.trim=!0),f=Pw(f)),c===1/0)return f;const d=Math.max(1,r*c/e.ticks().length);return g=>{let y=g/o(Math.round(i(g)));return y*r<r-.5&&(y*=r),y<=d?f(g):""}},e.nice=()=>n(Wk(n(),{floor:c=>o(Math.floor(i(c))),ceil:c=>o(Math.ceil(i(c)))})),e}function Kk(){const t=Nw(Yp()).domain([1,10]);return t.copy=()=>Gd(t,Kk()).base(t.base()),io.apply(t,arguments),t}function hI(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function pI(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Rw(t){var e=1,n=t(hI(e),pI(e));return n.constant=function(r){return arguments.length?t(hI(e=+r),pI(e)):e},ya(n)}function Yk(){var t=Rw(Yp());return t.copy=function(){return Gd(t,Yk()).constant(t.constant())},io.apply(t,arguments)}function gI(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function eX(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function tX(t){return t<0?-t*t:t*t}function Ow(t){var e=t(Yr,Yr),n=1;function r(){return n===1?t(Yr,Yr):n===.5?t(eX,tX):t(gI(n),gI(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},ya(e)}function kw(){var t=Ow(Yp());return t.copy=function(){return Gd(t,kw()).exponent(t.exponent())},io.apply(t,arguments),t}function nX(){return kw.apply(null,arguments).exponent(.5)}function mI(t){return Math.sign(t)*t*t}function rX(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Xk(){var t=Tw(),e=[0,1],n=!1,r;function i(o){var a=rX(t(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return t.invert(mI(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,K0)).map(mI)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Xk(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},io.apply(i,arguments),ya(i)}function Jk(){var t=[],e=[],n=[],r;function i(){var a=0,c=Math.max(1,e.length);for(n=new Array(c-1);++a<c;)n[a-1]=aY(t,a/c);return o}function o(a){return a==null||isNaN(a=+a)?r:e[jd(n,a)]}return o.invertExtent=function(a){var c=e.indexOf(a);return c<0?[NaN,NaN]:[c>0?n[c-1]:t[0],c<n.length?n[c]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let c of a)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(da),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Jk().domain(t).range(e).unknown(r)},io.apply(o,arguments)}function Zk(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(f){return f!=null&&f<=f?i[jd(r,f,0,n)]:o}function c(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*e-(f-n)*t)/(n+1);return a}return a.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,c()):[t,e]},a.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,c()):i.slice()},a.invertExtent=function(f){var d=i.indexOf(f);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],e]:[r[d-1],r[d]]},a.unknown=function(f){return arguments.length&&(o=f),a},a.thresholds=function(){return r.slice()},a.copy=function(){return Zk().domain([t,e]).range(i).unknown(o)},io.apply(ya(a),arguments)}function Qk(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[jd(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Qk().domain(t).range(e).unknown(n)},io.apply(i,arguments)}const wv=new Date,Ev=new Date;function or(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),c=i.ceil(o);return o-a<c-o?a:c},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,c)=>{const f=[];if(o=i.ceil(o),c=c==null?1:Math.floor(c),!(o<a)||!(c>0))return f;let d;do f.push(d=new Date(+o)),e(o,c),t(o);while(d<o&&o<a);return f},i.filter=o=>or(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,c)=>{if(a>=a)if(c<0)for(;++c<=0;)for(;e(a,-1),!o(a););else for(;--c>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(wv.setTime(+o),Ev.setTime(+a),t(wv),t(Ev),Math.floor(n(wv,Ev))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const X0=or(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);X0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?or(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):X0);X0.range;const ds=1e3,Ji=ds*60,fs=Ji*60,ys=fs*24,Mw=ys*7,vI=ys*30,bv=ys*365,ol=or(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ds)},(t,e)=>(e-t)/ds,t=>t.getUTCSeconds());ol.range;const Dw=or(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ds)},(t,e)=>{t.setTime(+t+e*Ji)},(t,e)=>(e-t)/Ji,t=>t.getMinutes());Dw.range;const Lw=or(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ji)},(t,e)=>(e-t)/Ji,t=>t.getUTCMinutes());Lw.range;const Bw=or(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ds-t.getMinutes()*Ji)},(t,e)=>{t.setTime(+t+e*fs)},(t,e)=>(e-t)/fs,t=>t.getHours());Bw.range;const Fw=or(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*fs)},(t,e)=>(e-t)/fs,t=>t.getUTCHours());Fw.range;const zd=or(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ji)/ys,t=>t.getDate()-1);zd.range;const Xp=or(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ys,t=>t.getUTCDate()-1);Xp.range;const eM=or(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ys,t=>Math.floor(t/ys));eM.range;function _l(t){return or(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ji)/Mw)}const Jp=_l(0),J0=_l(1),iX=_l(2),oX=_l(3),Mu=_l(4),sX=_l(5),aX=_l(6);Jp.range;J0.range;iX.range;oX.range;Mu.range;sX.range;aX.range;function Al(t){return or(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Mw)}const Zp=Al(0),Z0=Al(1),lX=Al(2),uX=Al(3),Du=Al(4),cX=Al(5),dX=Al(6);Zp.range;Z0.range;lX.range;uX.range;Du.range;cX.range;dX.range;const Uw=or(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Uw.range;const jw=or(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());jw.range;const xs=or(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());xs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:or(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});xs.range;const ws=or(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ws.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:or(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ws.range;function tM(t,e,n,r,i,o){const a=[[ol,1,ds],[ol,5,5*ds],[ol,15,15*ds],[ol,30,30*ds],[o,1,Ji],[o,5,5*Ji],[o,15,15*Ji],[o,30,30*Ji],[i,1,fs],[i,3,3*fs],[i,6,6*fs],[i,12,12*fs],[r,1,ys],[r,2,2*ys],[n,1,Mw],[e,1,vI],[e,3,3*vI],[t,1,bv]];function c(d,g,y){const E=g<d;E&&([d,g]=[g,d]);const C=y&&typeof y.range=="function"?y:f(d,g,y),I=C?C.range(d,+g+1):[];return E?I.reverse():I}function f(d,g,y){const E=Math.abs(g-d)/y,C=Ew(([,,N])=>N).right(a,E);if(C===a.length)return t.every(nx(d/bv,g/bv,y));if(C===0)return X0.every(Math.max(nx(d,g,y),1));const[I,P]=a[E/a[C-1][2]<a[C][2]/E?C-1:C];return I.every(P)}return[c,f]}const[fX,hX]=tM(ws,jw,Zp,eM,Fw,Lw),[pX,gX]=tM(xs,Uw,Jp,zd,Bw,Dw);function _v(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Av(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Xc(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function mX(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,c=t.months,f=t.shortMonths,d=Jc(i),g=Zc(i),y=Jc(o),E=Zc(o),C=Jc(a),I=Zc(a),P=Jc(c),N=Zc(c),L=Jc(f),U=Zc(f),F={a:me,A:xe,b:Ae,B:Ce,c:null,d:_I,e:_I,f:UX,g:YX,G:JX,H:LX,I:BX,j:FX,L:nM,m:jX,M:VX,p:te,q:he,Q:SI,s:TI,S:GX,u:zX,U:$X,V:HX,w:qX,W:WX,x:null,X:null,y:KX,Y:XX,Z:ZX,"%":CI},z={a:Fe,A:Le,b:lt,B:Ne,c:null,d:AI,e:AI,f:nJ,g:fJ,G:pJ,H:QX,I:eJ,j:tJ,L:iM,m:rJ,M:iJ,p:ct,q:rt,Q:SI,s:TI,S:oJ,u:sJ,U:aJ,V:lJ,w:uJ,W:cJ,x:null,X:null,y:dJ,Y:hJ,Z:gJ,"%":CI},q={a:ye,A:se,b:ae,B:be,c:fe,d:EI,e:EI,f:OX,g:wI,G:xI,H:bI,I:bI,j:IX,L:RX,m:TX,M:PX,p:X,q:SX,Q:MX,s:DX,S:NX,u:EX,U:bX,V:_X,w:wX,W:AX,x:ne,X:we,y:wI,Y:xI,Z:CX,"%":kX};F.x=H(n,F),F.X=H(r,F),F.c=H(e,F),z.x=H(n,z),z.X=H(r,z),z.c=H(e,z);function H(Ee,et){return function(Me){var _e=[],Ke=-1,dt=0,It=Ee.length,Cn,zt,Rt;for(Me instanceof Date||(Me=new Date(+Me));++Ke<It;)Ee.charCodeAt(Ke)===37&&(_e.push(Ee.slice(dt,Ke)),(zt=yI[Cn=Ee.charAt(++Ke)])!=null?Cn=Ee.charAt(++Ke):zt=Cn==="e"?" ":"0",(Rt=et[Cn])&&(Cn=Rt(Me,zt)),_e.push(Cn),dt=Ke+1);return _e.push(Ee.slice(dt,Ke)),_e.join("")}}function W(Ee,et){return function(Me){var _e=Xc(1900,void 0,1),Ke=Z(_e,Ee,Me+="",0),dt,It;if(Ke!=Me.length)return null;if("Q"in _e)return new Date(_e.Q);if("s"in _e)return new Date(_e.s*1e3+("L"in _e?_e.L:0));if(et&&!("Z"in _e)&&(_e.Z=0),"p"in _e&&(_e.H=_e.H%12+_e.p*12),_e.m===void 0&&(_e.m="q"in _e?_e.q:0),"V"in _e){if(_e.V<1||_e.V>53)return null;"w"in _e||(_e.w=1),"Z"in _e?(dt=Av(Xc(_e.y,0,1)),It=dt.getUTCDay(),dt=It>4||It===0?Z0.ceil(dt):Z0(dt),dt=Xp.offset(dt,(_e.V-1)*7),_e.y=dt.getUTCFullYear(),_e.m=dt.getUTCMonth(),_e.d=dt.getUTCDate()+(_e.w+6)%7):(dt=_v(Xc(_e.y,0,1)),It=dt.getDay(),dt=It>4||It===0?J0.ceil(dt):J0(dt),dt=zd.offset(dt,(_e.V-1)*7),_e.y=dt.getFullYear(),_e.m=dt.getMonth(),_e.d=dt.getDate()+(_e.w+6)%7)}else("W"in _e||"U"in _e)&&("w"in _e||(_e.w="u"in _e?_e.u%7:"W"in _e?1:0),It="Z"in _e?Av(Xc(_e.y,0,1)).getUTCDay():_v(Xc(_e.y,0,1)).getDay(),_e.m=0,_e.d="W"in _e?(_e.w+6)%7+_e.W*7-(It+5)%7:_e.w+_e.U*7-(It+6)%7);return"Z"in _e?(_e.H+=_e.Z/100|0,_e.M+=_e.Z%100,Av(_e)):_v(_e)}}function Z(Ee,et,Me,_e){for(var Ke=0,dt=et.length,It=Me.length,Cn,zt;Ke<dt;){if(_e>=It)return-1;if(Cn=et.charCodeAt(Ke++),Cn===37){if(Cn=et.charAt(Ke++),zt=q[Cn in yI?et.charAt(Ke++):Cn],!zt||(_e=zt(Ee,Me,_e))<0)return-1}else if(Cn!=Me.charCodeAt(_e++))return-1}return _e}function X(Ee,et,Me){var _e=d.exec(et.slice(Me));return _e?(Ee.p=g.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function ye(Ee,et,Me){var _e=C.exec(et.slice(Me));return _e?(Ee.w=I.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function se(Ee,et,Me){var _e=y.exec(et.slice(Me));return _e?(Ee.w=E.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function ae(Ee,et,Me){var _e=L.exec(et.slice(Me));return _e?(Ee.m=U.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function be(Ee,et,Me){var _e=P.exec(et.slice(Me));return _e?(Ee.m=N.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function fe(Ee,et,Me){return Z(Ee,e,et,Me)}function ne(Ee,et,Me){return Z(Ee,n,et,Me)}function we(Ee,et,Me){return Z(Ee,r,et,Me)}function me(Ee){return a[Ee.getDay()]}function xe(Ee){return o[Ee.getDay()]}function Ae(Ee){return f[Ee.getMonth()]}function Ce(Ee){return c[Ee.getMonth()]}function te(Ee){return i[+(Ee.getHours()>=12)]}function he(Ee){return 1+~~(Ee.getMonth()/3)}function Fe(Ee){return a[Ee.getUTCDay()]}function Le(Ee){return o[Ee.getUTCDay()]}function lt(Ee){return f[Ee.getUTCMonth()]}function Ne(Ee){return c[Ee.getUTCMonth()]}function ct(Ee){return i[+(Ee.getUTCHours()>=12)]}function rt(Ee){return 1+~~(Ee.getUTCMonth()/3)}return{format:function(Ee){var et=H(Ee+="",F);return et.toString=function(){return Ee},et},parse:function(Ee){var et=W(Ee+="",!1);return et.toString=function(){return Ee},et},utcFormat:function(Ee){var et=H(Ee+="",z);return et.toString=function(){return Ee},et},utcParse:function(Ee){var et=W(Ee+="",!0);return et.toString=function(){return Ee},et}}}var yI={"-":"",_:" ",0:"0"},xr=/^\s*\d+/,vX=/^%/,yX=/[\\^$*+?|[\]().{}]/g;function Mt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function xX(t){return t.replace(yX,"\\$&")}function Jc(t){return new RegExp("^(?:"+t.map(xX).join("|")+")","i")}function Zc(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function wX(t,e,n){var r=xr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function EX(t,e,n){var r=xr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function bX(t,e,n){var r=xr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function _X(t,e,n){var r=xr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function AX(t,e,n){var r=xr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function xI(t,e,n){var r=xr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function wI(t,e,n){var r=xr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function CX(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function SX(t,e,n){var r=xr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function TX(t,e,n){var r=xr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function EI(t,e,n){var r=xr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function IX(t,e,n){var r=xr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function bI(t,e,n){var r=xr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function PX(t,e,n){var r=xr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function NX(t,e,n){var r=xr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function RX(t,e,n){var r=xr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function OX(t,e,n){var r=xr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function kX(t,e,n){var r=vX.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function MX(t,e,n){var r=xr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function DX(t,e,n){var r=xr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function _I(t,e){return Mt(t.getDate(),e,2)}function LX(t,e){return Mt(t.getHours(),e,2)}function BX(t,e){return Mt(t.getHours()%12||12,e,2)}function FX(t,e){return Mt(1+zd.count(xs(t),t),e,3)}function nM(t,e){return Mt(t.getMilliseconds(),e,3)}function UX(t,e){return nM(t,e)+"000"}function jX(t,e){return Mt(t.getMonth()+1,e,2)}function VX(t,e){return Mt(t.getMinutes(),e,2)}function GX(t,e){return Mt(t.getSeconds(),e,2)}function zX(t){var e=t.getDay();return e===0?7:e}function $X(t,e){return Mt(Jp.count(xs(t)-1,t),e,2)}function rM(t){var e=t.getDay();return e>=4||e===0?Mu(t):Mu.ceil(t)}function HX(t,e){return t=rM(t),Mt(Mu.count(xs(t),t)+(xs(t).getDay()===4),e,2)}function qX(t){return t.getDay()}function WX(t,e){return Mt(J0.count(xs(t)-1,t),e,2)}function KX(t,e){return Mt(t.getFullYear()%100,e,2)}function YX(t,e){return t=rM(t),Mt(t.getFullYear()%100,e,2)}function XX(t,e){return Mt(t.getFullYear()%1e4,e,4)}function JX(t,e){var n=t.getDay();return t=n>=4||n===0?Mu(t):Mu.ceil(t),Mt(t.getFullYear()%1e4,e,4)}function ZX(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Mt(e/60|0,"0",2)+Mt(e%60,"0",2)}function AI(t,e){return Mt(t.getUTCDate(),e,2)}function QX(t,e){return Mt(t.getUTCHours(),e,2)}function eJ(t,e){return Mt(t.getUTCHours()%12||12,e,2)}function tJ(t,e){return Mt(1+Xp.count(ws(t),t),e,3)}function iM(t,e){return Mt(t.getUTCMilliseconds(),e,3)}function nJ(t,e){return iM(t,e)+"000"}function rJ(t,e){return Mt(t.getUTCMonth()+1,e,2)}function iJ(t,e){return Mt(t.getUTCMinutes(),e,2)}function oJ(t,e){return Mt(t.getUTCSeconds(),e,2)}function sJ(t){var e=t.getUTCDay();return e===0?7:e}function aJ(t,e){return Mt(Zp.count(ws(t)-1,t),e,2)}function oM(t){var e=t.getUTCDay();return e>=4||e===0?Du(t):Du.ceil(t)}function lJ(t,e){return t=oM(t),Mt(Du.count(ws(t),t)+(ws(t).getUTCDay()===4),e,2)}function uJ(t){return t.getUTCDay()}function cJ(t,e){return Mt(Z0.count(ws(t)-1,t),e,2)}function dJ(t,e){return Mt(t.getUTCFullYear()%100,e,2)}function fJ(t,e){return t=oM(t),Mt(t.getUTCFullYear()%100,e,2)}function hJ(t,e){return Mt(t.getUTCFullYear()%1e4,e,4)}function pJ(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Du(t):Du.ceil(t),Mt(t.getUTCFullYear()%1e4,e,4)}function gJ(){return"+0000"}function CI(){return"%"}function SI(t){return+t}function TI(t){return Math.floor(+t/1e3)}var su,sM,aM;mJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mJ(t){return su=mX(t),sM=su.format,su.parse,aM=su.utcFormat,su.utcParse,su}function vJ(t){return new Date(t)}function yJ(t){return t instanceof Date?+t:+new Date(+t)}function Vw(t,e,n,r,i,o,a,c,f,d){var g=Tw(),y=g.invert,E=g.domain,C=d(".%L"),I=d(":%S"),P=d("%I:%M"),N=d("%I %p"),L=d("%a %d"),U=d("%b %d"),F=d("%B"),z=d("%Y");function q(H){return(f(H)<H?C:c(H)<H?I:a(H)<H?P:o(H)<H?N:r(H)<H?i(H)<H?L:U:n(H)<H?F:z)(H)}return g.invert=function(H){return new Date(y(H))},g.domain=function(H){return arguments.length?E(Array.from(H,yJ)):E().map(vJ)},g.ticks=function(H){var W=E();return t(W[0],W[W.length-1],H??10)},g.tickFormat=function(H,W){return W==null?q:d(W)},g.nice=function(H){var W=E();return(!H||typeof H.range!="function")&&(H=e(W[0],W[W.length-1],H??10)),H?E(Wk(W,H)):g},g.copy=function(){return Gd(g,Vw(t,e,n,r,i,o,a,c,f,d))},g}function xJ(){return io.apply(Vw(pX,gX,xs,Uw,Jp,zd,Bw,Dw,ol,sM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wJ(){return io.apply(Vw(fX,hX,ws,jw,Zp,Xp,Fw,Lw,ol,aM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qp(){var t=0,e=1,n,r,i,o,a=Yr,c=!1,f;function d(y){return y==null||isNaN(y=+y)?f:a(i===0?.5:(y=(o(y)-n)*i,c?Math.max(0,Math.min(1,y)):y))}d.domain=function(y){return arguments.length?([t,e]=y,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(y){return arguments.length?(c=!!y,d):c},d.interpolator=function(y){return arguments.length?(a=y,d):a};function g(y){return function(E){var C,I;return arguments.length?([C,I]=E,a=y(C,I),d):[a(0),a(1)]}}return d.range=g(qu),d.rangeRound=g(Sw),d.unknown=function(y){return arguments.length?(f=y,d):f},function(y){return o=y,n=y(t),r=y(e),i=n===r?0:1/(r-n),d}}function xa(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function lM(){var t=ya(Qp()(Yr));return t.copy=function(){return xa(t,lM())},Is.apply(t,arguments)}function uM(){var t=Nw(Qp()).domain([1,10]);return t.copy=function(){return xa(t,uM()).base(t.base())},Is.apply(t,arguments)}function cM(){var t=Rw(Qp());return t.copy=function(){return xa(t,cM()).constant(t.constant())},Is.apply(t,arguments)}function Gw(){var t=Ow(Qp());return t.copy=function(){return xa(t,Gw()).exponent(t.exponent())},Is.apply(t,arguments)}function EJ(){return Gw.apply(null,arguments).exponent(.5)}function dM(){var t=[],e=Yr;function n(r){if(r!=null&&!isNaN(r=+r))return e((jd(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(da),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>sY(t,o/r))},n.copy=function(){return dM(e).domain(t)},Is.apply(n,arguments)}function eg(){var t=0,e=.5,n=1,r=1,i,o,a,c,f,d=Yr,g,y=!1,E;function C(P){return isNaN(P=+P)?E:(P=.5+((P=+g(P))-o)*(r*P<r*o?c:f),d(y?Math.max(0,Math.min(1,P)):P))}C.domain=function(P){return arguments.length?([t,e,n]=P,i=g(t=+t),o=g(e=+e),a=g(n=+n),c=i===o?0:.5/(o-i),f=o===a?0:.5/(a-o),r=o<i?-1:1,C):[t,e,n]},C.clamp=function(P){return arguments.length?(y=!!P,C):y},C.interpolator=function(P){return arguments.length?(d=P,C):d};function I(P){return function(N){var L,U,F;return arguments.length?([L,U,F]=N,d=kY(P,[L,U,F]),C):[d(0),d(.5),d(1)]}}return C.range=I(qu),C.rangeRound=I(Sw),C.unknown=function(P){return arguments.length?(E=P,C):E},function(P){return g=P,i=P(t),o=P(e),a=P(n),c=i===o?0:.5/(o-i),f=o===a?0:.5/(a-o),r=o<i?-1:1,C}}function fM(){var t=ya(eg()(Yr));return t.copy=function(){return xa(t,fM())},Is.apply(t,arguments)}function hM(){var t=Nw(eg()).domain([.1,1,10]);return t.copy=function(){return xa(t,hM()).base(t.base())},Is.apply(t,arguments)}function pM(){var t=Rw(eg());return t.copy=function(){return xa(t,pM()).constant(t.constant())},Is.apply(t,arguments)}function zw(){var t=Ow(eg());return t.copy=function(){return xa(t,zw()).exponent(t.exponent())},Is.apply(t,arguments)}function bJ(){return zw.apply(null,arguments).exponent(.5)}const sd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:_w,scaleDiverging:fM,scaleDivergingLog:hM,scaleDivergingPow:zw,scaleDivergingSqrt:bJ,scaleDivergingSymlog:pM,scaleIdentity:qk,scaleImplicit:rx,scaleLinear:Hk,scaleLog:Kk,scaleOrdinal:bw,scalePoint:uY,scalePow:kw,scaleQuantile:Jk,scaleQuantize:Zk,scaleRadial:Xk,scaleSequential:lM,scaleSequentialLog:uM,scaleSequentialPow:Gw,scaleSequentialQuantile:dM,scaleSequentialSqrt:EJ,scaleSequentialSymlog:cM,scaleSqrt:nX,scaleSymlog:Yk,scaleThreshold:Qk,scaleTime:xJ,scaleUtc:wJ,tickFormat:$k},Symbol.toStringTag,{value:"Module"}));var Ps=t=>t.chartData,tg=de([Ps],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),$w=(t,e,n,r)=>r?tg(t):Ps(t),_J=(t,e,n)=>n?tg(t):Ps(t);function fa(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Xt(e)&&Xt(n))return!0}return!1}function II(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function gM(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,o;if(Xt(n))i=n;else if(typeof n=="function")return;if(Xt(r))o=r;else if(typeof r=="function")return;var a=[i,o];if(fa(a))return a}}function AJ(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(fa(r))return II(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,o]=t,a,c;if(i==="auto")e!=null&&(a=Math.min(...e));else if(Je(i))a=i;else if(typeof i=="function")try{e!=null&&(a=i(e?.[0]))}catch{}else if(typeof i=="string"&&US.test(i)){var f=US.exec(i);if(f==null||f[1]==null||e==null)a=void 0;else{var d=+f[1];a=e[0]-d}}else a=e?.[0];if(o==="auto")e!=null&&(c=Math.max(...e));else if(Je(o))c=o;else if(typeof o=="function")try{e!=null&&(c=o(e?.[1]))}catch{}else if(typeof o=="string"&&jS.test(o)){var g=jS.exec(o);if(g==null||g[1]==null||e==null)c=void 0;else{var y=+g[1];c=e[1]+y}}else c=e?.[1];var E=[a,c];if(fa(E))return e==null?E:II(E,e,n)}}}var Wu=1e9,CJ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},qw,mn=!0,no="[DecimalError] ",ul=no+"Invalid argument: ",Hw=no+"Exponent out of range: ",Ku=Math.floor,Qa=Math.pow,SJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ii,mr=1e7,dn=7,mM=9007199254740991,Q0=Ku(mM/dn),We={};We.absoluteValue=We.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};We.comparedTo=We.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};We.decimalPlaces=We.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*dn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};We.dividedBy=We.div=function(t){return hs(this,new this.constructor(t))};We.dividedToIntegerBy=We.idiv=function(t){var e=this,n=e.constructor;return Jt(hs(e,new n(t),0,1),n.precision)};We.equals=We.eq=function(t){return!this.cmp(t)};We.exponent=function(){return Yn(this)};We.greaterThan=We.gt=function(t){return this.cmp(t)>0};We.greaterThanOrEqualTo=We.gte=function(t){return this.cmp(t)>=0};We.isInteger=We.isint=function(){return this.e>this.d.length-2};We.isNegative=We.isneg=function(){return this.s<0};We.isPositive=We.ispos=function(){return this.s>0};We.isZero=function(){return this.s===0};We.lessThan=We.lt=function(t){return this.cmp(t)<0};We.lessThanOrEqualTo=We.lte=function(t){return this.cmp(t)<1};We.logarithm=We.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ii))throw Error(no+"NaN");if(n.s<1)throw Error(no+(n.s?"NaN":"-Infinity"));return n.eq(Ii)?new r(0):(mn=!1,e=hs(Cd(n,o),Cd(t,o),o),mn=!0,Jt(e,i))};We.minus=We.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?xM(e,t):vM(e,(t.s=-t.s,t))};We.modulo=We.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(no+"NaN");return n.s?(mn=!1,e=hs(n,t,0,1).times(t),mn=!0,n.minus(e)):Jt(new r(n),i)};We.naturalExponential=We.exp=function(){return yM(this)};We.naturalLogarithm=We.ln=function(){return Cd(this)};We.negated=We.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};We.plus=We.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?vM(e,t):xM(e,(t.s=-t.s,t))};We.precision=We.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ul+t);if(e=Yn(i)+1,r=i.d.length-1,n=r*dn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};We.squareRoot=We.sqrt=function(){var t,e,n,r,i,o,a,c=this,f=c.constructor;if(c.s<1){if(!c.s)return new f(0);throw Error(no+"NaN")}for(t=Yn(c),mn=!1,i=Math.sqrt(+c),i==0||i==1/0?(e=Uo(c.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Ku((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new f(e)):r=new f(i.toString()),n=f.precision,i=a=n+3;;)if(o=r,r=o.plus(hs(c,o,a+2)).times(.5),Uo(o.d).slice(0,a)===(e=Uo(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Jt(o,n+1,0),o.times(o).eq(c)){r=o;break}}else if(e!="9999")break;a+=4}return mn=!0,Jt(r,n)};We.times=We.mul=function(t){var e,n,r,i,o,a,c,f,d,g=this,y=g.constructor,E=g.d,C=(t=new y(t)).d;if(!g.s||!t.s)return new y(0);for(t.s*=g.s,n=g.e+t.e,f=E.length,d=C.length,f<d&&(o=E,E=C,C=o,a=f,f=d,d=a),o=[],a=f+d,r=a;r--;)o.push(0);for(r=d;--r>=0;){for(e=0,i=f+r;i>r;)c=o[i]+C[r]*E[i-r-1]+e,o[i--]=c%mr|0,e=c/mr|0;o[i]=(o[i]+e)%mr|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,mn?Jt(t,y.precision):t};We.toDecimalPlaces=We.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Go(t,0,Wu),e===void 0?e=r.rounding:Go(e,0,8),Jt(n,t+Yn(n)+1,e))};We.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=ml(r,!0):(Go(t,0,Wu),e===void 0?e=i.rounding:Go(e,0,8),r=Jt(new i(r),t+1,e),n=ml(r,!0,t+1)),n};We.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?ml(i):(Go(t,0,Wu),e===void 0?e=o.rounding:Go(e,0,8),r=Jt(new o(i),t+Yn(i)+1,e),n=ml(r.abs(),!1,t+Yn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};We.toInteger=We.toint=function(){var t=this,e=t.constructor;return Jt(new e(t),Yn(t)+1,e.rounding)};We.toNumber=function(){return+this};We.toPower=We.pow=function(t){var e,n,r,i,o,a,c=this,f=c.constructor,d=12,g=+(t=new f(t));if(!t.s)return new f(Ii);if(c=new f(c),!c.s){if(t.s<1)throw Error(no+"Infinity");return c}if(c.eq(Ii))return c;if(r=f.precision,t.eq(Ii))return Jt(c,r);if(e=t.e,n=t.d.length-1,a=e>=n,o=c.s,a){if((n=g<0?-g:g)<=mM){for(i=new f(Ii),e=Math.ceil(r/dn+4),mn=!1;n%2&&(i=i.times(c),NI(i.d,e)),n=Ku(n/2),n!==0;)c=c.times(c),NI(c.d,e);return mn=!0,t.s<0?new f(Ii).div(i):Jt(i,r)}}else if(o<0)throw Error(no+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,c.s=1,mn=!1,i=t.times(Cd(c,r+d)),mn=!0,i=yM(i),i.s=o,i};We.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Yn(i),r=ml(i,n<=o.toExpNeg||n>=o.toExpPos)):(Go(t,1,Wu),e===void 0?e=o.rounding:Go(e,0,8),i=Jt(new o(i),t,e),n=Yn(i),r=ml(i,t<=n||n<=o.toExpNeg,t)),r};We.toSignificantDigits=We.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Go(t,1,Wu),e===void 0?e=r.rounding:Go(e,0,8)),Jt(new r(n),t,e)};We.toString=We.valueOf=We.val=We.toJSON=We[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Yn(t),n=t.constructor;return ml(t,e<=n.toExpNeg||e>=n.toExpPos)};function vM(t,e){var n,r,i,o,a,c,f,d,g=t.constructor,y=g.precision;if(!t.s||!e.s)return e.s||(e=new g(t)),mn?Jt(e,y):e;if(f=t.d,d=e.d,a=t.e,i=e.e,f=f.slice(),o=a-i,o){for(o<0?(r=f,o=-o,c=d.length):(r=d,i=a,c=f.length),a=Math.ceil(y/dn),c=a>c?a+1:c+1,o>c&&(o=c,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(c=f.length,o=d.length,c-o<0&&(o=c,r=d,d=f,f=r),n=0;o;)n=(f[--o]=f[o]+d[o]+n)/mr|0,f[o]%=mr;for(n&&(f.unshift(n),++i),c=f.length;f[--c]==0;)f.pop();return e.d=f,e.e=i,mn?Jt(e,y):e}function Go(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ul+t)}function Uo(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=dn-r.length,n&&(o+=ia(n)),o+=r;a=t[e],r=a+"",n=dn-r.length,n&&(o+=ia(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var hs=(function(){function t(r,i){var o,a=0,c=r.length;for(r=r.slice();c--;)o=r[c]*i+a,r[c]=o%mr|0,a=o/mr|0;return a&&r.unshift(a),r}function e(r,i,o,a){var c,f;if(o!=a)f=o>a?1:-1;else for(c=f=0;c<o;c++)if(r[c]!=i[c]){f=r[c]>i[c]?1:-1;break}return f}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*mr+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var c,f,d,g,y,E,C,I,P,N,L,U,F,z,q,H,W,Z,X=r.constructor,ye=r.s==i.s?1:-1,se=r.d,ae=i.d;if(!r.s)return new X(r);if(!i.s)throw Error(no+"Division by zero");for(f=r.e-i.e,W=ae.length,q=se.length,C=new X(ye),I=C.d=[],d=0;ae[d]==(se[d]||0);)++d;if(ae[d]>(se[d]||0)&&--f,o==null?U=o=X.precision:a?U=o+(Yn(r)-Yn(i))+1:U=o,U<0)return new X(0);if(U=U/dn+2|0,d=0,W==1)for(g=0,ae=ae[0],U++;(d<q||g)&&U--;d++)F=g*mr+(se[d]||0),I[d]=F/ae|0,g=F%ae|0;else{for(g=mr/(ae[0]+1)|0,g>1&&(ae=t(ae,g),se=t(se,g),W=ae.length,q=se.length),z=W,P=se.slice(0,W),N=P.length;N<W;)P[N++]=0;Z=ae.slice(),Z.unshift(0),H=ae[0],ae[1]>=mr/2&&++H;do g=0,c=e(ae,P,W,N),c<0?(L=P[0],W!=N&&(L=L*mr+(P[1]||0)),g=L/H|0,g>1?(g>=mr&&(g=mr-1),y=t(ae,g),E=y.length,N=P.length,c=e(y,P,E,N),c==1&&(g--,n(y,W<E?Z:ae,E))):(g==0&&(c=g=1),y=ae.slice()),E=y.length,E<N&&y.unshift(0),n(P,y,N),c==-1&&(N=P.length,c=e(ae,P,W,N),c<1&&(g++,n(P,W<N?Z:ae,N))),N=P.length):c===0&&(g++,P=[0]),I[d++]=g,c&&P[0]?P[N++]=se[z]||0:(P=[se[z]],N=1);while((z++<q||P[0]!==void 0)&&U--)}return I[0]||I.shift(),C.e=f,Jt(C,a?o+Yn(C)+1:o)}})();function yM(t,e){var n,r,i,o,a,c,f=0,d=0,g=t.constructor,y=g.precision;if(Yn(t)>16)throw Error(Hw+Yn(t));if(!t.s)return new g(Ii);for(mn=!1,c=y,a=new g(.03125);t.abs().gte(.1);)t=t.times(a),d+=5;for(r=Math.log(Qa(2,d))/Math.LN10*2+5|0,c+=r,n=i=o=new g(Ii),g.precision=c;;){if(i=Jt(i.times(t),c),n=n.times(++f),a=o.plus(hs(i,n,c)),Uo(a.d).slice(0,c)===Uo(o.d).slice(0,c)){for(;d--;)o=Jt(o.times(o),c);return g.precision=y,e==null?(mn=!0,Jt(o,y)):o}o=a}}function Yn(t){for(var e=t.e*dn,n=t.d[0];n>=10;n/=10)e++;return e}function Cv(t,e,n){if(e>t.LN10.sd())throw mn=!0,n&&(t.precision=n),Error(no+"LN10 precision limit exceeded");return Jt(new t(t.LN10),e)}function ia(t){for(var e="";t--;)e+="0";return e}function Cd(t,e){var n,r,i,o,a,c,f,d,g,y=1,E=10,C=t,I=C.d,P=C.constructor,N=P.precision;if(C.s<1)throw Error(no+(C.s?"NaN":"-Infinity"));if(C.eq(Ii))return new P(0);if(e==null?(mn=!1,d=N):d=e,C.eq(10))return e==null&&(mn=!0),Cv(P,d);if(d+=E,P.precision=d,n=Uo(I),r=n.charAt(0),o=Yn(C),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)C=C.times(t),n=Uo(C.d),r=n.charAt(0),y++;o=Yn(C),r>1?(C=new P("0."+n),o++):C=new P(r+"."+n.slice(1))}else return f=Cv(P,d+2,N).times(o+""),C=Cd(new P(r+"."+n.slice(1)),d-E).plus(f),P.precision=N,e==null?(mn=!0,Jt(C,N)):C;for(c=a=C=hs(C.minus(Ii),C.plus(Ii),d),g=Jt(C.times(C),d),i=3;;){if(a=Jt(a.times(g),d),f=c.plus(hs(a,new P(i),d)),Uo(f.d).slice(0,d)===Uo(c.d).slice(0,d))return c=c.times(2),o!==0&&(c=c.plus(Cv(P,d+2,N).times(o+""))),c=hs(c,new P(y),d),P.precision=N,e==null?(mn=!0,Jt(c,N)):c;c=f,i+=2}}function PI(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Ku(n/dn),t.d=[],r=(n+1)%dn,n<0&&(r+=dn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=dn;r<i;)t.d.push(+e.slice(r,r+=dn));e=e.slice(r),r=dn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),mn&&(t.e>Q0||t.e<-Q0))throw Error(Hw+n)}else t.s=0,t.e=0,t.d=[0];return t}function Jt(t,e,n){var r,i,o,a,c,f,d,g,y=t.d;for(a=1,o=y[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=dn,i=e,d=y[g=0];else{if(g=Math.ceil((r+1)/dn),o=y.length,g>=o)return t;for(d=o=y[g],a=1;o>=10;o/=10)a++;r%=dn,i=r-dn+a}if(n!==void 0&&(o=Qa(10,a-i-1),c=d/o%10|0,f=e<0||y[g+1]!==void 0||d%o,f=n<4?(c||f)&&(n==0||n==(t.s<0?3:2)):c>5||c==5&&(n==4||f||n==6&&(r>0?i>0?d/Qa(10,a-i):0:y[g-1])%10&1||n==(t.s<0?8:7))),e<1||!y[0])return f?(o=Yn(t),y.length=1,e=e-o-1,y[0]=Qa(10,(dn-e%dn)%dn),t.e=Ku(-e/dn)||0):(y.length=1,y[0]=t.e=t.s=0),t;if(r==0?(y.length=g,o=1,g--):(y.length=g+1,o=Qa(10,dn-r),y[g]=i>0?(d/Qa(10,a-i)%Qa(10,i)|0)*o:0),f)for(;;)if(g==0){(y[0]+=o)==mr&&(y[0]=1,++t.e);break}else{if(y[g]+=o,y[g]!=mr)break;y[g--]=0,o=1}for(r=y.length;y[--r]===0;)y.pop();if(mn&&(t.e>Q0||t.e<-Q0))throw Error(Hw+Yn(t));return t}function xM(t,e){var n,r,i,o,a,c,f,d,g,y,E=t.constructor,C=E.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new E(t),mn?Jt(e,C):e;if(f=t.d,y=e.d,r=e.e,d=t.e,f=f.slice(),a=d-r,a){for(g=a<0,g?(n=f,a=-a,c=y.length):(n=y,r=d,c=f.length),i=Math.max(Math.ceil(C/dn),c)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=f.length,c=y.length,g=i<c,g&&(c=i),i=0;i<c;i++)if(f[i]!=y[i]){g=f[i]<y[i];break}a=0}for(g&&(n=f,f=y,y=n,e.s=-e.s),c=f.length,i=y.length-c;i>0;--i)f[c++]=0;for(i=y.length;i>a;){if(f[--i]<y[i]){for(o=i;o&&f[--o]===0;)f[o]=mr-1;--f[o],f[i]+=mr}f[i]-=y[i]}for(;f[--c]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(e.d=f,e.e=r,mn?Jt(e,C):e):new E(0)}function ml(t,e,n){var r,i=Yn(t),o=Uo(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+ia(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+ia(-i-1)+o,n&&(r=n-a)>0&&(o+=ia(r))):i>=a?(o+=ia(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+ia(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=ia(r))),t.s<0?"-"+o:o}function NI(t,e){if(t.length>e)return t.length=e,!0}function wM(t){var e,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(ul+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return PI(a,o.toString())}else if(typeof o!="string")throw Error(ul+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,SJ.test(o))PI(a,o);else throw Error(ul+o)}if(i.prototype=We,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=wM,i.config=i.set=TJ,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function TJ(t){if(!t||typeof t!="object")throw Error(no+"Object expected");var e,n,r,i=["precision",1,Wu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Ku(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(ul+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ul+n+": "+r);return this}var qw=wM(CJ);Ii=new qw(1);const Ht=qw;var IJ=t=>t,EM={},bM=t=>t===EM,RI=t=>function e(){return arguments.length===0||arguments.length===1&&bM(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},_M=(t,e)=>t===1?e:RI(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(a=>a!==EM).length;return o>=t?e(...r):_M(t-o,RI(function(){for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];var d=r.map(g=>bM(g)?c.shift():g);return e(...d,...c)}))}),PJ=t=>_M(t.length,t),ax=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},NJ=PJ((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),RJ=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return IJ;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce((c,f)=>f(c),o(...arguments))}};function AM(t){var e;return t===0?e=1:e=Math.floor(new Ht(t).abs().log(10).toNumber())+1,e}function CM(t,e,n){for(var r=new Ht(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var SM=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},TM=(t,e,n)=>{if(t.lte(0))return new Ht(0);var r=AM(t.toNumber()),i=new Ht(10).pow(r),o=t.div(i),a=r!==1?.05:.1,c=new Ht(Math.ceil(o.div(a).toNumber())).add(n).mul(a),f=c.mul(i);return e?new Ht(f.toNumber()):new Ht(Math.ceil(f.toNumber()))},OJ=(t,e,n)=>{var r=new Ht(1),i=new Ht(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Ht(10).pow(AM(t)-1),i=new Ht(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Ht(Math.floor(t)))}else t===0?i=new Ht(Math.floor((e-1)/2)):n||(i=new Ht(Math.floor(t)));var a=Math.floor((e-1)/2),c=RJ(NJ(f=>i.add(new Ht(f-a).mul(r)).toNumber()),ax);return c(0,e)},IM=function(e,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Ht(0),tickMin:new Ht(0),tickMax:new Ht(0)};var a=TM(new Ht(n).sub(e).div(r-1),i,o),c;e<=0&&n>=0?c=new Ht(0):(c=new Ht(e).add(n).div(2),c=c.sub(new Ht(c).mod(a)));var f=Math.ceil(c.sub(e).div(a).toNumber()),d=Math.ceil(new Ht(n).sub(c).div(a).toNumber()),g=f+d+1;return g>r?IM(e,n,r,i,o+1):(g<r&&(d=n>0?d+(r-g):d,f=n>0?f:f+(r-g)),{step:a,tickMin:c.sub(new Ht(f).mul(a)),tickMax:c.add(new Ht(d).mul(a))})},kJ=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),[c,f]=SM([n,r]);if(c===-1/0||f===1/0){var d=f===1/0?[c,...ax(0,i-1).map(()=>1/0)]:[...ax(0,i-1).map(()=>-1/0),f];return n>r?d.reverse():d}if(c===f)return OJ(c,i,o);var{step:g,tickMin:y,tickMax:E}=IM(c,f,a,o,0),C=CM(y,E.add(new Ht(.1).mul(g)),g);return n>r?C.reverse():C},MJ=function(e,n){var[r,i]=e,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,c]=SM([r,i]);if(a===-1/0||c===1/0)return[r,i];if(a===c)return[a];var f=Math.max(n,2),d=TM(new Ht(c).sub(a).div(f-1),o,0),g=[...CM(new Ht(a),new Ht(c),d),c];return o===!1&&(g=g.map(y=>Math.round(y))),r>i?g.reverse():g},PM=t=>t.rootProps.maxBarSize,DJ=t=>t.rootProps.barGap,NM=t=>t.rootProps.barCategoryGap,LJ=t=>t.rootProps.barSize,$d=t=>t.rootProps.stackOffset,RM=t=>t.rootProps.reverseStackOrder,Ww=t=>t.options.chartName,Kw=t=>t.rootProps.syncId,OM=t=>t.rootProps.syncMethod,Yw=t=>t.options.eventEmitter,Kn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},us={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Si={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},ng=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},BJ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:us.angleAxisId,includeHidden:!1,name:void 0,reversed:us.reversed,scale:us.scale,tick:us.tick,tickCount:void 0,ticks:void 0,type:us.type,unit:void 0},FJ={allowDataOverflow:Si.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Si.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Si.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Si.scale,tick:Si.tick,tickCount:Si.tickCount,ticks:void 0,type:Si.type,unit:void 0},UJ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:us.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:us.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:us.scale,tick:us.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},jJ={allowDataOverflow:Si.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Si.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Si.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Si.scale,tick:Si.tick,tickCount:Si.tickCount,ticks:void 0,type:"category",unit:void 0},Xw=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?UJ:BJ,Jw=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?jJ:FJ,rg=t=>t.polarOptions,Zw=de([Ss,Ts,ir],Nk),kM=de([rg,Zw],(t,e)=>{if(t!=null)return zr(t.innerRadius,e,0)}),MM=de([rg,Zw],(t,e)=>{if(t!=null)return zr(t.outerRadius,e,e*.8)}),VJ=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},DM=de([rg],VJ);de([Xw,DM],ng);var LM=de([Zw,kM,MM],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});de([Jw,LM],ng);var BM=de([Dt,rg,kM,MM,Ss,Ts],(t,e,n,r,i,o)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:a,cy:c,startAngle:f,endAngle:d}=e;return{cx:zr(a,i,i/2),cy:zr(c,o,o/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:d,clockWise:!1}}}),vn=(t,e)=>e,Hd=(t,e,n)=>n;function Qw(t){return t?.id}function FM(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:o}=n,a=new Map;return t.forEach(c=>{var f,d=(f=c.data)!==null&&f!==void 0?f:r;if(!(d==null||d.length===0)){var g=Qw(c);d.forEach((y,E)=>{var C=o==null||i?E:String(Gt(y,o,null)),I=Gt(y,c.dataKey,0),P;a.has(C)?P=a.get(C):P={},Object.assign(P,{[g]:I}),a.set(C,P)})}}),Array.from(a.values())}function ig(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var og=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function sg(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function GJ(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var sr=t=>{var e=Dt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Yu=t=>t.tooltip.settings.axisId;function OI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ep(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OI(Object(n),!0).forEach(function(r){zJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zJ(t,e,n){return(e=$J(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $J(t){var e=HJ(t,"string");return typeof e=="symbol"?e:e+""}function HJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lx=[0,"auto"],pr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},UM=(t,e)=>t.cartesianAxis.xAxis[e],zo=(t,e)=>{var n=UM(t,e);return n??pr},gr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:lx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Dd},jM=(t,e)=>t.cartesianAxis.yAxis[e],$o=(t,e)=>{var n=jM(t,e);return n??gr},VM={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},eE=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??VM},An=(t,e,n)=>{switch(e){case"xAxis":return zo(t,n);case"yAxis":return $o(t,n);case"zAxis":return eE(t,n);case"angleAxis":return Xw(t,n);case"radiusAxis":return Jw(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},qJ=(t,e,n)=>{switch(e){case"xAxis":return zo(t,n);case"yAxis":return $o(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},qd=(t,e,n)=>{switch(e){case"xAxis":return zo(t,n);case"yAxis":return $o(t,n);case"angleAxis":return Xw(t,n);case"radiusAxis":return Jw(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},GM=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function tE(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var ag=t=>t.graphicalItems.cartesianItems,WJ=de([vn,Hd],tE),nE=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),Wd=de([ag,An,WJ],nE,{memoizeOptions:{resultEqualityCheck:sg}}),zM=de([Wd],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(ig)),$M=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),KJ=de([Wd],$M),rE=t=>t.map(e=>e.data).filter(Boolean).flat(1),YJ=de([Wd],rE,{memoizeOptions:{resultEqualityCheck:sg}}),iE=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},oE=de([YJ,$w],iE),sE=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:Gt(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Gt(i,r)}))):t.map(r=>({value:r})),lg=de([oE,An,Wd],sE);function HM(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Xh(t){if(eo(t)||t instanceof Date){var e=Number(t);if(Xt(e))return e}}function kI(t){if(Array.isArray(t)){var e=[Xh(t[0]),Xh(t[1])];return fa(e)?e:void 0}var n=Xh(t);if(n!=null)return[n,n]}function Es(t){return t.map(Xh).filter(Vz)}function XJ(t,e,n){return!n||typeof e!="number"||ki(e)?[]:n.length?Es(n.flatMap(r=>{var i=Gt(t,r.dataKey),o,a;if(Array.isArray(i)?[o,a]=i:o=a=i,!(!Xt(o)||!Xt(a)))return[e-o,e+a]})):[]}var ar=t=>{var e=sr(t),n=Yu(t);return qd(t,e,n)},Kd=de([ar],t=>t?.dataKey),JJ=de([zM,$w,ar],FM),qM=(t,e,n,r)=>{var i={},o=e.reduce((a,c)=>{if(c.stackId==null)return a;var f=a[c.stackId];return f==null&&(f=[]),f.push(c),a[c.stackId]=f,a},i);return Object.fromEntries(Object.entries(o).map(a=>{var[c,f]=a,d=r?[...f].reverse():f,g=d.map(Qw);return[c,{stackedData:mq(t,g,n),graphicalItems:d}]}))},ux=de([JJ,zM,$d,RM],qM),WM=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:o}=e;if(r==null&&n!=="zAxis"){var a=Eq(t,i,o);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},ZJ=de([An],t=>t.allowDataOverflow),aE=t=>{var e;if(t==null||!("domain"in t))return lx;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Es(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:lx},lE=de([An],aE),uE=de([lE,ZJ],gM),QJ=de([ux,Ps,vn,uE],WM,{memoizeOptions:{resultEqualityCheck:og}}),ug=t=>t.errorBars,eZ=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>HM(n,r)),tp=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),a=Math.min(...o),c=Math.max(...o);return[a,c]}},cE=(t,e,n,r,i)=>{var o,a;if(n.length>0&&t.forEach(c=>{n.forEach(f=>{var d,g,y=(d=r[f.id])===null||d===void 0?void 0:d.filter(L=>HM(i,L)),E=Gt(c,(g=e.dataKey)!==null&&g!==void 0?g:f.dataKey),C=XJ(c,E,y);if(C.length>=2){var I=Math.min(...C),P=Math.max(...C);(o==null||I<o)&&(o=I),(a==null||P>a)&&(a=P)}var N=kI(E);N!=null&&(o=o==null?N[0]:Math.min(o,N[0]),a=a==null?N[1]:Math.max(a,N[1]))})}),e?.dataKey!=null&&t.forEach(c=>{var f=kI(Gt(c,e.dataKey));f!=null&&(o=o==null?f[0]:Math.min(o,f[0]),a=a==null?f[1]:Math.max(a,f[1]))}),Xt(o)&&Xt(a))return[o,a]},tZ=de([oE,An,KJ,ug,vn],cE,{memoizeOptions:{resultEqualityCheck:og}});function nZ(t){var{value:e}=t;if(eo(e)||e instanceof Date)return e}var rZ=(t,e,n)=>{var r=t.map(nZ).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&c3(r))?Mk(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},KM=t=>t.referenceElements.dots,Xu=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),iZ=de([KM,vn,Hd],Xu),YM=t=>t.referenceElements.areas,oZ=de([YM,vn,Hd],Xu),XM=t=>t.referenceElements.lines,sZ=de([XM,vn,Hd],Xu),JM=(t,e)=>{if(t!=null){var n=Es(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},aZ=de(iZ,vn,JM),ZM=(t,e)=>{if(t!=null){var n=Es(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},lZ=de([oZ,vn],ZM);function uZ(t){var e;if(t.x!=null)return Es([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Es(n)}function cZ(t){var e;if(t.y!=null)return Es([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Es(n)}var QM=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?uZ(r):cZ(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},dZ=de([sZ,vn],QM),fZ=de(aZ,dZ,lZ,(t,e,n)=>tp(t,n,e)),dE=(t,e,n,r,i,o,a,c)=>{if(n!=null)return n;var f=a==="vertical"&&c==="xAxis"||a==="horizontal"&&c==="yAxis",d=f?tp(r,o,i):tp(o,i);return AJ(e,d,t.allowDataOverflow)},hZ=de([An,lE,uE,QJ,tZ,fZ,Dt,vn],dE,{memoizeOptions:{resultEqualityCheck:og}}),pZ=[0,1],fE=(t,e,n,r,i,o,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:c,type:f}=t,d=bl(e,o);if(d&&c==null){var g;return Mk(0,(g=n?.length)!==null&&g!==void 0?g:0)}return f==="category"?rZ(r,t,d):i==="expand"?pZ:a}},hE=de([An,Dt,oE,lg,$d,vn,hZ],fE),e4=(t,e,n,r,i)=>{if(t!=null){var{scale:o,type:a}=t;if(o==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof o=="string"){var c="scale".concat(Rd(o));return c in sd?c:"point"}}},Ju=de([An,Dt,GM,Ww,vn],e4);function gZ(t){if(t!=null){if(t in sd)return sd[t]();var e="scale".concat(Rd(t));if(e in sd)return sd[e]()}}function pE(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=gZ(e);if(i!=null){var o=i.domain(n).range(r);return dq(o),o}}}var gE=(t,e,n)=>{var r=aE(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&fa(t))return kJ(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&fa(t))return MJ(t,e.tickCount,e.allowDecimals)}},mE=de([hE,qd,Ju],gE),vE=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&fa(e)&&Array.isArray(n)&&n.length>0){var i=e[0],o=n[0],a=e[1],c=n[n.length-1];return[Math.min(i,o),Math.max(a,c)]}return e},mZ=de([An,hE,mE,vn],vE),vZ=de(lg,An,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Es(t.map(y=>y.value))).sort((y,E)=>y-E),i=r[0],o=r[r.length-1];if(i==null||o==null)return 1/0;var a=o-i;if(a===0)return 1/0;for(var c=0;c<r.length-1;c++){var f=r[c],d=r[c+1];if(!(f==null||d==null)){var g=d-f;n=Math.min(n,g)}}return n/a}}),t4=de(vZ,Dt,NM,ir,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!Xt(t))return 0;var o=e==="vertical"?r.height:r.width;if(i==="gap")return t*o/2;if(i==="no-gap"){var a=zr(n,t*o),c=t*o/2;return c-a-(c-a)/o*a}return 0}),yZ=(t,e,n)=>{var r=zo(t,e);return r==null||typeof r.padding!="string"?0:t4(t,"xAxis",e,n,r.padding)},xZ=(t,e,n)=>{var r=$o(t,e);return r==null||typeof r.padding!="string"?0:t4(t,"yAxis",e,n,r.padding)},wZ=de(zo,yZ,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),EZ=de($o,xZ,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),bZ=de([ir,wZ,Gp,Vp,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[t.left+e.left,t.left+t.width-e.right]}),_Z=de([ir,Dt,EZ,Gp,Vp,(t,e,n)=>n],(t,e,n,r,i,o)=>{var{padding:a}=i;return o?[r.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Yd=(t,e,n,r)=>{var i;switch(e){case"xAxis":return bZ(t,n,r);case"yAxis":return _Z(t,n,r);case"zAxis":return(i=eE(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return DM(t);case"radiusAxis":return LM(t,n);default:return}},n4=de([An,Yd],ng),Lu=de([An,Ju,mZ,n4],pE);de([Wd,ug,vn],eZ);function r4(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var cg=(t,e)=>e,dg=(t,e,n)=>n,AZ=de(Up,cg,dg,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(r4)),CZ=de(jp,cg,dg,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(r4)),i4=(t,e)=>({width:t.width,height:e.height}),SZ=(t,e)=>{var n=typeof e.width=="number"?e.width:Dd;return{width:n,height:t.height}},o4=de(ir,zo,i4),TZ=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},IZ=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},PZ=de(Ts,ir,AZ,cg,dg,(t,e,n,r,i)=>{var o={},a;return n.forEach(c=>{var f=i4(e,c);a==null&&(a=TZ(e,r,t));var d=r==="top"&&!i||r==="bottom"&&i;o[c.id]=a-Number(d)*f.height,a+=(d?-1:1)*f.height}),o}),NZ=de(Ss,ir,CZ,cg,dg,(t,e,n,r,i)=>{var o={},a;return n.forEach(c=>{var f=SZ(e,c);a==null&&(a=IZ(e,r,t));var d=r==="left"&&!i||r==="right"&&i;o[c.id]=a-Number(d)*f.width,a+=(d?-1:1)*f.width}),o}),RZ=(t,e)=>{var n=zo(t,e);if(n!=null)return PZ(t,n.orientation,n.mirror)},OZ=de([ir,zo,RZ,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),kZ=(t,e)=>{var n=$o(t,e);if(n!=null)return NZ(t,n.orientation,n.mirror)},MZ=de([ir,$o,kZ,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),s4=de(ir,$o,(t,e)=>{var n=typeof e.width=="number"?e.width:Dd;return{width:n,height:t.height}}),MI=(t,e,n)=>{switch(e){case"xAxis":return o4(t,n).width;case"yAxis":return s4(t,n).height;default:return}},a4=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:a}=n,c=bl(t,r),f=e.map(d=>d.value);if(a&&c&&o==="category"&&i&&c3(f))return f}},yE=de([Dt,lg,An,vn],a4),l4=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,a=bl(t,r);if(a&&(i==="number"||o!=="auto"))return e.map(c=>c.value)}},xE=de([Dt,lg,qd,vn],l4),DI=de([Dt,qJ,Ju,Lu,yE,xE,Yd,mE,vn],(t,e,n,r,i,o,a,c,f)=>{if(e!=null){var d=bl(t,f);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:f,categoricalDomain:o,duplicateDomain:i,isCategorical:d,niceTicks:c,range:a,realScaleType:n,scale:r}}}),DZ=(t,e,n,r,i,o,a,c,f)=>{if(!(e==null||r==null)){var d=bl(t,f),{type:g,ticks:y,tickCount:E}=e,C=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,I=g==="category"&&r.bandwidth?r.bandwidth()/C:0;I=f==="angleAxis"&&o!=null&&o.length>=2?vr(o[0]-o[1])*2*I:I;var P=y||i;if(P){var N=P.map((L,U)=>{var F=a?a.indexOf(L):L;return{index:U,coordinate:r(F)+I,value:L,offset:I}});return N.filter(L=>Xt(L.coordinate))}return d&&c?c.map((L,U)=>({coordinate:r(L)+I,value:L,index:U,offset:I})).filter(L=>Xt(L.coordinate)):r.ticks?r.ticks(E).map(L=>({coordinate:r(L)+I,value:L,offset:I})):r.domain().map((L,U)=>({coordinate:r(L)+I,value:a?a[L]:L,index:U,offset:I}))}},u4=de([Dt,qd,Ju,Lu,mE,Yd,yE,xE,vn],DZ),LZ=(t,e,n,r,i,o,a)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var c=bl(t,a),{tickCount:f}=e,d=0;return d=a==="angleAxis"&&r?.length>=2?vr(r[0]-r[1])*2*d:d,c&&o?o.map((g,y)=>({coordinate:n(g)+d,value:g,index:y,offset:d})):n.ticks?n.ticks(f).map(g=>({coordinate:n(g)+d,value:g,offset:d})):n.domain().map((g,y)=>({coordinate:n(g)+d,value:i?i[g]:g,index:y,offset:d}))}},ha=de([Dt,qd,Lu,Yd,yE,xE,vn],LZ),pa=de(An,Lu,(t,e)=>{if(!(t==null||e==null))return ep(ep({},t),{},{scale:e})}),BZ=de([An,Ju,hE,n4],pE),FZ=de((t,e,n)=>eE(t,n),BZ,(t,e)=>{if(!(t==null||e==null))return ep(ep({},t),{},{scale:e})}),UZ=de([Dt,Up,jp],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),c4=t=>t.options.defaultTooltipEventType,d4=t=>t.options.validateTooltipEventTypes;function f4(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function wE(t,e){var n=c4(t),r=d4(t);return f4(e,n,r)}function jZ(t){return $e(e=>wE(e,t))}var h4=(t,e)=>{var n,r=Number(e);if(!(ki(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},VZ=t=>t.tooltip.settings,la={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},GZ={itemInteraction:{click:la,hover:la},axisInteraction:{click:la,hover:la},keyboardInteraction:la,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},p4=fi({name:"tooltip",initialState:GZ,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:gn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=_o(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:gn()},removeTooltipEntrySettings:{reducer(t,e){var n=_o(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:gn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:zZ,replaceTooltipEntrySettings:$Z,removeTooltipEntrySettings:HZ,setTooltipSettingsState:qZ,setActiveMouseOverItemIndex:g4,mouseLeaveItem:WZ,mouseLeaveChart:m4,setActiveClickItemIndex:KZ,setMouseOverAxisIndex:v4,setMouseClickAxisIndex:YZ,setSyncInteraction:cx,setKeyboardInteraction:dx}=p4.actions,XZ=p4.reducer;function LI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LI(Object(n),!0).forEach(function(r){JZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JZ(t,e,n){return(e=ZZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZZ(t){var e=QZ(t,"string");return typeof e=="symbol"?e:e+""}function QZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eQ(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function tQ(t){return t.index!=null}var y4=(t,e,n,r)=>{if(e==null)return la;var i=eQ(t,e,n);if(i==null)return la;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var o=t.settings.active===!0;if(tQ(i)){if(o)return Lh(Lh({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Lh(Lh({},la),{},{coordinate:i.coordinate})};function nQ(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function rQ(t,e){var n=nQ(t),r=e[0],i=e[1];if(n===void 0)return!1;var o=Math.min(r,i),a=Math.max(r,i);return n>=o&&n<=a}function iQ(t,e,n){if(n==null||e==null)return!0;var r=Gt(t,e);return r==null||!fa(n)?!0:rQ(r,n)}var EE=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var o=Number(i);if(!Xt(o))return i;var a=0,c=1/0;e.length>0&&(c=e.length-1);var f=Math.max(a,Math.min(o,c)),d=e[f];return d==null||iQ(d,n,r)?String(f):null},x4=(t,e,n,r,i,o,a,c)=>{if(!(o==null||c==null)){var f=a[0],d=f==null?void 0:c(f.positions,o);if(d!=null)return d;var g=i?.[Number(o)];if(g)switch(n){case"horizontal":return{x:g.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:g.coordinate}}}},w4=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var o=t.tooltipItemPayloads[0];return o!=null?[o]:[]}return t.tooltipItemPayloads.filter(a=>{var c;return((c=a.settings)===null||c===void 0?void 0:c.graphicalItemId)===i})},Xd=t=>t.options.tooltipPayloadSearcher,Zu=t=>t.tooltip;function BI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BI(Object(n),!0).forEach(function(r){oQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oQ(t,e,n){return(e=sQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sQ(t){var e=aQ(t,"string");return typeof e=="symbol"?e:e+""}function aQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lQ(t,e){return t??e}var E4=(t,e,n,r,i,o,a)=>{if(!(e==null||o==null)){var{chartData:c,computedData:f,dataStartIndex:d,dataEndIndex:g}=n,y=[];return t.reduce((E,C)=>{var I,{dataDefinedOnItem:P,settings:N}=C,L=lQ(P,c),U=Array.isArray(L)?ik(L,d,g):L,F=(I=N?.dataKey)!==null&&I!==void 0?I:r,z=N?.nameKey,q;if(r&&Array.isArray(U)&&!Array.isArray(U[0])&&a==="axis"?q=d3(U,r,i):q=o(U,e,f,z),Array.isArray(q))q.forEach(W=>{var Z=FI(FI({},N),{},{name:W.name,unit:W.unit,color:void 0,fill:void 0});E.push(VS({tooltipEntrySettings:Z,dataKey:W.dataKey,payload:W.payload,value:Gt(W.payload,W.dataKey),name:W.name}))});else{var H;E.push(VS({tooltipEntrySettings:N,dataKey:F,payload:q,value:Gt(q,F),name:(H=Gt(q,z))!==null&&H!==void 0?H:N?.name}))}return E},y)}},bE=de([ar,Dt,GM,Ww,sr],e4),uQ=de([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),cQ=de([sr,Yu],tE),Qu=de([uQ,ar,cQ],nE,{memoizeOptions:{resultEqualityCheck:sg}}),dQ=de([Qu],t=>t.filter(ig)),fQ=de([Qu],rE,{memoizeOptions:{resultEqualityCheck:sg}}),ec=de([fQ,Ps],iE),hQ=de([dQ,Ps,ar],FM),_E=de([ec,ar,Qu],sE),b4=de([ar],aE),pQ=de([ar],t=>t.allowDataOverflow),_4=de([b4,pQ],gM),gQ=de([Qu],t=>t.filter(ig)),mQ=de([hQ,gQ,$d,RM],qM),vQ=de([mQ,Ps,sr,_4],WM),yQ=de([Qu],$M),xQ=de([ec,ar,yQ,ug,sr],cE,{memoizeOptions:{resultEqualityCheck:og}}),wQ=de([KM,sr,Yu],Xu),EQ=de([wQ,sr],JM),bQ=de([YM,sr,Yu],Xu),_Q=de([bQ,sr],ZM),AQ=de([XM,sr,Yu],Xu),CQ=de([AQ,sr],QM),SQ=de([EQ,CQ,_Q],tp),TQ=de([ar,b4,_4,vQ,xQ,SQ,Dt,sr],dE),Jd=de([ar,Dt,ec,_E,$d,sr,TQ],fE),IQ=de([Jd,ar,bE],gE),PQ=de([ar,Jd,IQ,sr],vE),A4=t=>{var e=sr(t),n=Yu(t),r=!1;return Yd(t,e,n,r)},C4=de([ar,A4],ng),S4=de([ar,bE,PQ,C4],pE),NQ=de([Dt,_E,ar,sr],a4),RQ=de([Dt,_E,ar,sr],l4),OQ=(t,e,n,r,i,o,a,c)=>{if(e){var{type:f}=e,d=bl(t,c);if(r){var g=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,y=f==="category"&&r.bandwidth?r.bandwidth()/g:0;return y=c==="angleAxis"&&i!=null&&i?.length>=2?vr(i[0]-i[1])*2*y:y,d&&a?a.map((E,C)=>({coordinate:r(E)+y,value:E,index:C,offset:y})):r.domain().map((E,C)=>({coordinate:r(E)+y,value:o?o[E]:E,index:C,offset:y}))}}},Ns=de([Dt,ar,bE,S4,A4,NQ,RQ,sr],OQ),AE=de([c4,d4,VZ],(t,e,n)=>f4(n.shared,t,e)),T4=t=>t.tooltip.settings.trigger,CE=t=>t.tooltip.settings.defaultIndex,Zd=de([Zu,AE,T4,CE],y4),ga=de([Zd,ec,Kd,Jd],EE),I4=de([Ns,ga],h4),SE=de([Zd],t=>{if(t)return t.dataKey}),kQ=de([Zd],t=>{if(t)return t.graphicalItemId}),P4=de([Zu,AE,T4,CE],w4),MQ=de([Ss,Ts,Dt,ir,Ns,CE,P4,Xd],x4),DQ=de([Zd,MQ],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),LQ=de([Zd],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),BQ=de([P4,ga,Ps,Kd,I4,Xd,AE],E4);de([BQ],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function UI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UI(Object(n),!0).forEach(function(r){FQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FQ(t,e,n){return(e=UQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UQ(t){var e=jQ(t,"string");return typeof e=="symbol"?e:e+""}function jQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VQ=()=>$e(ar),GQ=()=>{var t=VQ(),e=$e(Ns),n=$e(S4);return M0(!t||!n?void 0:jI(jI({},t),{},{scale:n}),e)};function VI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function au(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VI(Object(n),!0).forEach(function(r){zQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zQ(t,e,n){return(e=$Q(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Q(t){var e=HQ(t,"string");return typeof e=="symbol"?e:e+""}function HQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qQ=(t,e,n,r)=>{var i=e.find(o=>o&&o.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},WQ=(t,e,n,r)=>{var i=e.find(d=>d&&d.index===n);if(i){if(t==="centric"){var o=i.coordinate,{radius:a}=r;return au(au(au({},r),Wn(r.cx,r.cy,a,o)),{},{angle:o,radius:a})}var c=i.coordinate,{angle:f}=r;return au(au(au({},r),Wn(r.cx,r.cy,c,f)),{},{angle:f,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function KQ(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var N4=(t,e,n,r,i)=>{var o,a=(o=e?.length)!==null&&o!==void 0?o:0;if(a<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<a;c++){var f,d,g,y,E,C=c>0?(f=n[c-1])===null||f===void 0?void 0:f.coordinate:(d=n[a-1])===null||d===void 0?void 0:d.coordinate,I=(g=n[c])===null||g===void 0?void 0:g.coordinate,P=c>=a-1?(y=n[0])===null||y===void 0?void 0:y.coordinate:(E=n[c+1])===null||E===void 0?void 0:E.coordinate,N=void 0;if(!(C==null||I==null||P==null))if(vr(I-C)!==vr(P-I)){var L=[];if(vr(P-I)===vr(i[1]-i[0])){N=P;var U=I+i[1]-i[0];L[0]=Math.min(U,(U+C)/2),L[1]=Math.max(U,(U+C)/2)}else{N=C;var F=P+i[1]-i[0];L[0]=Math.min(I,(F+I)/2),L[1]=Math.max(I,(F+I)/2)}var z=[Math.min(I,(N+I)/2),Math.max(I,(N+I)/2)];if(t>z[0]&&t<=z[1]||t>=L[0]&&t<=L[1]){var q;return(q=n[c])===null||q===void 0?void 0:q.index}}else{var H=Math.min(C,P),W=Math.max(C,P);if(t>(H+I)/2&&t<=(W+I)/2){var Z;return(Z=n[c])===null||Z===void 0?void 0:Z.index}}}else if(e)for(var X=0;X<a;X++){var ye=e[X];if(ye!=null){var se=e[X+1],ae=e[X-1];if(X===0&&se!=null&&t<=(ye.coordinate+se.coordinate)/2||X===a-1&&ae!=null&&t>(ye.coordinate+ae.coordinate)/2||X>0&&X<a-1&&ae!=null&&se!=null&&t>(ye.coordinate+ae.coordinate)/2&&t<=(ye.coordinate+se.coordinate)/2)return ye.index}}return-1},YQ=()=>$e(Ww),TE=(t,e)=>e,R4=(t,e,n)=>n,IE=(t,e,n,r)=>r,XQ=de(Ns,t=>Pp(t,e=>e.coordinate)),PE=de([Zu,TE,R4,IE],y4),NE=de([PE,ec,Kd,Jd],EE),JQ=(t,e,n)=>{if(e!=null){var r=Zu(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},O4=de([Zu,TE,R4,IE],w4),np=de([Ss,Ts,Dt,ir,Ns,IE,O4,Xd],x4),ZQ=de([PE,np],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),k4=de([Ns,NE],h4),QQ=de([O4,NE,Ps,Kd,k4,Xd,TE],E4),eee=de([PE,NE],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),tee=(t,e,n,r,i,o,a)=>{if(!(!t||!n||!r||!i)&&KQ(t,a)){var c=bq(t,e),f=N4(c,o,i,n,r),d=qQ(e,i,f,t);return{activeIndex:String(f),activeCoordinate:d}}},nee=(t,e,n,r,i,o,a)=>{if(!(!t||!r||!i||!o||!n)){var c=UK(t,n);if(c){var f=_q(c,e),d=N4(f,a,o,r,i),g=WQ(e,o,d,c);return{activeIndex:String(d),activeCoordinate:g}}}},ree=(t,e,n,r,i,o,a,c)=>{if(!(!t||!e||!r||!i||!o))return e==="horizontal"||e==="vertical"?tee(t,e,r,i,o,a,c):nee(t,e,n,r,i,o,a)},iee=de(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),oee=de(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Kn)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:GJ}});function GI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GI(Object(n),!0).forEach(function(r){see(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function see(t,e,n){return(e=aee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aee(t){var e=lee(t,"string");return typeof e=="symbol"?e:e+""}function lee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uee={},cee={zIndexMap:Object.values(Kn).reduce((t,e)=>zI(zI({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),uee)},dee=new Set(Object.values(Kn));function fee(t){return dee.has(t)}var M4=fi({name:"zIndex",initialState:cee,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:gn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!fee(n)&&delete t.zIndexMap[n])},prepare:gn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:gn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:gn()}}}),{registerZIndexPortal:hee,unregisterZIndexPortal:pee,registerZIndexPortalElement:gee,unregisterZIndexPortalElement:mee}=M4.actions,vee=M4.reducer;function hi(t){var{zIndex:e,children:n}=t,r=eW(),i=r&&e!==void 0&&e!==0,o=Nr(),a=Zt();M.useLayoutEffect(()=>i?(a(hee({zIndex:e})),()=>{a(pee({zIndex:e}))}):Od,[a,e,i]);var c=$e(f=>iee(f,e,o));return i?c?Zx.createPortal(n,c):null:n}function fx(){return fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fx.apply(null,arguments)}function $I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$I(Object(n),!0).forEach(function(r){yee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$I(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yee(t,e,n){return(e=xee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xee(t){var e=wee(t,"string");return typeof e=="symbol"?e:e+""}function wee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eee(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return M.isValidElement(e)?M.cloneElement(e,r):M.createElement(n,r)}function bee(t){var e,{coordinate:n,payload:r,index:i,offset:o,tooltipAxisBandSize:a,layout:c,cursor:f,tooltipEventType:d,chartName:g}=t,y=n,E=r,C=i;if(!f||!y||g!=="ScatterChart"&&d!=="axis")return null;var I,P,N;if(g==="ScatterChart")I=y,P=QW,N=Kn.cursorLine;else if(g==="BarChart")I=eK(c,y,o,a),P=Pk,N=Kn.cursorRectangle;else if(c==="radial"&&h3(y)){var{cx:L,cy:U,radius:F,startAngle:z,endAngle:q}=Rk(y);I={cx:L,cy:U,startAngle:z,endAngle:q,innerRadius:F,outerRadius:F},P=kk,N=Kn.cursorLine}else I={points:zK(c,y,o)},P=Wp,N=Kn.cursorLine;var H=typeof f=="object"&&"className"in f?f.className:void 0,W=Bh(Bh(Bh(Bh({stroke:"#ccc",pointerEvents:"none"},o),I),Pu(f)),{},{payload:E,payloadIndex:C,className:Ft("recharts-tooltip-cursor",H)});return M.createElement(hi,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:N},M.createElement(Eee,{cursor:f,cursorComp:P,cursorProps:W}))}function _ee(t){var e=GQ(),n=fk(),r=Ld(),i=YQ();return e==null||n==null||r==null||i==null?null:M.createElement(bee,fx({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var D4=M.createContext(null),Aee=()=>M.useContext(D4),Sv={exports:{}},HI;function Cee(){return HI||(HI=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,g){this.fn=f,this.context=d,this.once=g||!1}function o(f,d,g,y,E){if(typeof g!="function")throw new TypeError("The listener must be a function");var C=new i(g,y||f,E),I=n?n+d:d;return f._events[I]?f._events[I].fn?f._events[I]=[f._events[I],C]:f._events[I].push(C):(f._events[I]=C,f._eventsCount++),f}function a(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],g,y;if(this._eventsCount===0)return d;for(y in g=this._events)e.call(g,y)&&d.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(g)):d},c.prototype.listeners=function(d){var g=n?n+d:d,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var E=0,C=y.length,I=new Array(C);E<C;E++)I[E]=y[E].fn;return I},c.prototype.listenerCount=function(d){var g=n?n+d:d,y=this._events[g];return y?y.fn?1:y.length:0},c.prototype.emit=function(d,g,y,E,C,I){var P=n?n+d:d;if(!this._events[P])return!1;var N=this._events[P],L=arguments.length,U,F;if(N.fn){switch(N.once&&this.removeListener(d,N.fn,void 0,!0),L){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,g),!0;case 3:return N.fn.call(N.context,g,y),!0;case 4:return N.fn.call(N.context,g,y,E),!0;case 5:return N.fn.call(N.context,g,y,E,C),!0;case 6:return N.fn.call(N.context,g,y,E,C,I),!0}for(F=1,U=new Array(L-1);F<L;F++)U[F-1]=arguments[F];N.fn.apply(N.context,U)}else{var z=N.length,q;for(F=0;F<z;F++)switch(N[F].once&&this.removeListener(d,N[F].fn,void 0,!0),L){case 1:N[F].fn.call(N[F].context);break;case 2:N[F].fn.call(N[F].context,g);break;case 3:N[F].fn.call(N[F].context,g,y);break;case 4:N[F].fn.call(N[F].context,g,y,E);break;default:if(!U)for(q=1,U=new Array(L-1);q<L;q++)U[q-1]=arguments[q];N[F].fn.apply(N[F].context,U)}}return!0},c.prototype.on=function(d,g,y){return o(this,d,g,y,!1)},c.prototype.once=function(d,g,y){return o(this,d,g,y,!0)},c.prototype.removeListener=function(d,g,y,E){var C=n?n+d:d;if(!this._events[C])return this;if(!g)return a(this,C),this;var I=this._events[C];if(I.fn)I.fn===g&&(!E||I.once)&&(!y||I.context===y)&&a(this,C);else{for(var P=0,N=[],L=I.length;P<L;P++)(I[P].fn!==g||E&&!I[P].once||y&&I[P].context!==y)&&N.push(I[P]);N.length?this._events[C]=N.length===1?N[0]:N:a(this,C)}return this},c.prototype.removeAllListeners=function(d){var g;return d?(g=n?n+d:d,this._events[g]&&a(this,g)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c})(Sv)),Sv.exports}var See=Cee();const Tee=ro(See);var Sd=new Tee,hx="recharts.syncEvent.tooltip",qI="recharts.syncEvent.brush";function RE(t,e){if(e){var n=Number.parseInt(e,10);if(!ki(n))return t?.[n]}}var Iee={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},L4=fi({name:"options",initialState:Iee,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Pee=L4.reducer,{createEventEmitter:Nee}=L4.actions;function Ree(t){return t.tooltip.syncInteraction}var Oee={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},B4=fi({name:"chartData",initialState:Oee,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:WI,setDataStartEndIndexes:kee,setComputedData:Due}=B4.actions,Mee=B4.reducer,Dee=["x","y"];function KI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KI(Object(n),!0).forEach(function(r){Lee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lee(t,e,n){return(e=Bee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bee(t){var e=Fee(t,"string");return typeof e=="symbol"?e:e+""}function Fee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uee(t,e){if(t==null)return{};var n,r,i=jee(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jee(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Vee(){var t=$e(Kw),e=$e(Yw),n=Zt(),r=$e(OM),i=$e(Ns),o=Ld(),a=Hu(),c=$e(f=>f.rootProps.className);M.useEffect(()=>{if(t==null)return Od;var f=(d,g,y)=>{if(e!==y&&t===d){if(r==="index"){var E;if(a&&g!==null&&g!==void 0&&(E=g.payload)!==null&&E!==void 0&&E.coordinate&&g.payload.sourceViewBox){var C=g.payload.coordinate,{x:I,y:P}=C,N=Uee(C,Dee),{x:L,y:U,width:F,height:z}=g.payload.sourceViewBox,q=lu(lu({},N),{},{x:a.x+(F?(I-L)/F:0)*a.width,y:a.y+(z?(P-U)/z:0)*a.height});n(lu(lu({},g),{},{payload:lu(lu({},g.payload),{},{coordinate:q})}))}else n(g);return}if(i!=null){var H;if(typeof r=="function"){var W={activeTooltipIndex:g.payload.index==null?void 0:Number(g.payload.index),isTooltipActive:g.payload.active,activeIndex:g.payload.index==null?void 0:Number(g.payload.index),activeLabel:g.payload.label,activeDataKey:g.payload.dataKey,activeCoordinate:g.payload.coordinate},Z=r(i,W);H=i[Z]}else r==="value"&&(H=i.find(we=>String(we.value)===g.payload.label));var{coordinate:X}=g.payload;if(H==null||g.payload.active===!1||X==null||a==null){n(cx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:ye,y:se}=X,ae=Math.min(ye,a.x+a.width),be=Math.min(se,a.y+a.height),fe={x:o==="horizontal"?H.coordinate:ae,y:o==="horizontal"?be:H.coordinate},ne=cx({active:g.payload.active,coordinate:fe,dataKey:g.payload.dataKey,index:String(H.index),label:g.payload.label,sourceViewBox:g.payload.sourceViewBox,graphicalItemId:g.payload.graphicalItemId});n(ne)}}};return Sd.on(hx,f),()=>{Sd.off(hx,f)}},[c,n,e,t,r,i,o,a])}function Gee(){var t=$e(Kw),e=$e(Yw),n=Zt();M.useEffect(()=>{if(t==null)return Od;var r=(i,o,a)=>{e!==a&&t===i&&n(kee(o))};return Sd.on(qI,r),()=>{Sd.off(qI,r)}},[n,e,t])}function zee(){var t=Zt();M.useEffect(()=>{t(Nee())},[t]),Vee(),Gee()}function $ee(t,e,n,r,i,o){var a=$e(C=>JQ(C,t,e)),c=$e(Yw),f=$e(Kw),d=$e(OM),g=$e(Ree),y=g?.active,E=Hu();M.useEffect(()=>{if(!y&&f!=null&&c!=null){var C=cx({active:o,coordinate:n,dataKey:a,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:E,graphicalItemId:void 0});Sd.emit(hx,f,C,c)}},[y,n,a,i,r,c,f,d,o,E])}function YI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YI(Object(n),!0).forEach(function(r){Hee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hee(t,e,n){return(e=qee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qee(t){var e=Wee(t,"string");return typeof e=="symbol"?e:e+""}function Wee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kee(t){return t.dataKey}function Yee(t,e){return M.isValidElement(t)?M.cloneElement(t,e):typeof t=="function"?M.createElement(t,e):M.createElement(OW,e)}var JI=[],Xee={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Tv(t){var e,n,r=Vn(t,Xee),{active:i,allowEscapeViewBox:o,animationDuration:a,animationEasing:c,content:f,filterNull:d,isAnimationActive:g,offset:y,payloadUniqBy:E,position:C,reverseDirection:I,useTranslate3d:P,wrapperStyle:N,cursor:L,shared:U,trigger:F,defaultIndex:z,portal:q,axisId:H}=r,W=Zt(),Z=typeof z=="number"?String(z):z;M.useEffect(()=>{W(qZ({shared:U,trigger:F,axisId:H,active:i,defaultIndex:Z}))},[W,U,F,H,i,Z]);var X=Hu(),ye=Ak(),se=jZ(U),{activeIndex:ae,isActive:be}=(e=$e(ct=>eee(ct,se,F,Z)))!==null&&e!==void 0?e:{},fe=$e(ct=>QQ(ct,se,F,Z)),ne=$e(ct=>k4(ct,se,F,Z)),we=$e(ct=>ZQ(ct,se,F,Z)),me=fe,xe=Aee(),Ae=(n=i??be)!==null&&n!==void 0?n:!1,[Ce,te]=I3([me,Ae]),he=se==="axis"?ne:void 0;$ee(se,F,we,he,ae,Ae);var Fe=q??xe;if(Fe==null||X==null||se==null)return null;var Le=me??JI;Ae||(Le=JI),d&&Le.length&&(Le=_3(Le.filter(ct=>ct.value!=null&&(ct.hide!==!0||r.includeHidden)),E,Kee));var lt=Le.length>0,Ne=M.createElement(UW,{allowEscapeViewBox:o,animationDuration:a,animationEasing:c,isAnimationActive:g,active:Ae,coordinate:we,hasPayload:lt,offset:y,position:C,reverseDirection:I,useTranslate3d:P,viewBox:X,wrapperStyle:N,lastBoundingBox:Ce,innerRef:te,hasPortalFromProps:!!q},Yee(f,XI(XI({},r),{},{payload:Le,label:he,active:Ae,activeIndex:ae,coordinate:we,accessibilityLayer:ye})));return M.createElement(M.Fragment,null,Zx.createPortal(Ne,Fe),Ae&&M.createElement(_ee,{cursor:L,tooltipEventType:se,coordinate:we,payload:Le,index:ae}))}var vl=t=>null;vl.displayName="Cell";function Jee(t,e,n){return(e=Zee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zee(t){var e=Qee(t,"string");return typeof e=="symbol"?e:e+""}function Qee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ete{constructor(e){Jee(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function ZI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tte(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZI(Object(n),!0).forEach(function(r){nte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nte(t,e,n){return(e=rte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rte(t){var e=ite(t,"string");return typeof e=="symbol"?e:e+""}function ite(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ote={cacheSize:2e3,enableCache:!0},F4=tte({},ote),QI=new ete(F4.cacheSize),ste={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},eP="recharts_measurement_span";function ate(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",o=e.fontStyle||"",a=e.letterSpacing||"",c=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(a,"|").concat(c)}var tP=(t,e)=>{try{var n=document.getElementById(eP);n||(n=document.createElement("span"),n.setAttribute("id",eP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,ste,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},ld=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Kp.isSsr)return{width:0,height:0};if(!F4.enableCache)return tP(e,n);var r=ate(e,n),i=QI.get(r);if(i)return i;var o=tP(e,n);return QI.set(r,o),o},U4;function lte(t,e,n){return(e=ute(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ute(t){var e=cte(t,"string");return typeof e=="symbol"?e:e+""}function cte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dte=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,fte=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hte={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pte=["cm","mm","pt","pc","in","Q","px"];function gte(t){return pte.includes(t)}var xu="NaN";function mte(t,e){return t*hte[e]}class Pr{static parse(e){var n,[,r,i]=(n=fte.exec(e))!==null&&n!==void 0?n:[];return r==null?Pr.NaN:new Pr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,ki(e)&&(this.unit=""),n!==""&&!dte.test(n)&&(this.num=NaN,this.unit=""),gte(n)&&(this.num=mte(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Pr(NaN,""):new Pr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Pr(NaN,""):new Pr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Pr(NaN,""):new Pr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Pr(NaN,""):new Pr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ki(this.num)}}U4=Pr;lte(Pr,"NaN",new U4(NaN,""));function j4(t){if(t==null||t.includes(xu))return xu;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,o]=(n=nP.exec(e))!==null&&n!==void 0?n:[],a=Pr.parse(r??""),c=Pr.parse(o??""),f=i==="*"?a.multiply(c):a.divide(c);if(f.isNaN())return xu;e=e.replace(nP,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,g,y,E]=(d=rP.exec(e))!==null&&d!==void 0?d:[],C=Pr.parse(g??""),I=Pr.parse(E??""),P=y==="+"?C.add(I):C.subtract(I);if(P.isNaN())return xu;e=e.replace(rP,P.toString())}return e}var iP=/\(([^()]*)\)/;function vte(t){for(var e=t,n;(n=iP.exec(e))!=null;){var[,r]=n;e=e.replace(iP,j4(r))}return e}function yte(t){var e=t.replace(/\s+/g,"");return e=vte(e),e=j4(e),e}function xte(t){try{return yte(t)}catch{return xu}}function Iv(t){var e=xte(t.slice(5,-1));return e===xu?"":e}var wte=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Ete=["dx","dy","angle","className","breakAll"];function px(){return px=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},px.apply(null,arguments)}function oP(t,e){if(t==null)return{};var n,r,i=bte(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bte(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var V4=/[ \f\n\r\t\v\u2028\u2029]+/,G4=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];an(e)||(n?i=e.toString().split(""):i=e.toString().split(V4));var o=i.map(c=>({word:c,width:ld(c,r).width})),a=n?0:ld("",r).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}};function _te(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var z4=(t,e,n,r)=>t.reduce((i,o)=>{var{word:a,width:c}=o,f=i[i.length-1];if(f&&c!=null&&(e==null||r||f.width+c+n<Number(e)))f.words.push(a),f.width+=c+n;else{var d={words:[a],width:c};i.push(d)}return i},[]),$4=t=>t.reduce((e,n)=>e.width>n.width?e:n),Ate="",sP=(t,e,n,r,i,o,a,c)=>{var f=t.slice(0,e),d=G4({breakAll:n,style:r,children:f+Ate});if(!d)return[!1,[]];var g=z4(d.wordsWithComputedWidth,o,a,c),y=g.length>i||$4(g).width>Number(o);return[y,g]},Cte=(t,e,n,r,i)=>{var{maxLines:o,children:a,style:c,breakAll:f}=t,d=Je(o),g=String(a),y=z4(e,r,n,i);if(!d||i)return y;var E=y.length>o||$4(y).width>Number(r);if(!E)return y;for(var C=0,I=g.length-1,P=0,N;C<=I&&P<=g.length-1;){var L=Math.floor((C+I)/2),U=L-1,[F,z]=sP(g,U,f,c,o,r,n,i),[q]=sP(g,L,f,c,o,r,n,i);if(!F&&!q&&(C=L+1),F&&q&&(I=L-1),!F&&q){N=z;break}P++}return N||y},aP=t=>{var e=an(t)?[]:t.toString().split(V4);return[{words:e,width:void 0}]},Ste=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:a}=t;if((e||n)&&!Kp.isSsr){var c,f,d=G4({breakAll:o,children:r,style:i});if(d){var{wordsWithComputedWidth:g,spaceWidth:y}=d;c=g,f=y}else return aP(r);return Cte({breakAll:o,children:r,maxLines:a,style:i},c,f,e,!!n)}return aP(r)},H4="#808080",Tte={angle:0,breakAll:!1,capHeight:"0.71em",fill:H4,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},fg=M.forwardRef((t,e)=>{var n=Vn(t,Tte),{x:r,y:i,lineHeight:o,capHeight:a,fill:c,scaleToFit:f,textAnchor:d,verticalAnchor:g}=n,y=oP(n,wte),E=M.useMemo(()=>Ste({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:f,style:y.style,width:y.width}),[y.breakAll,y.children,y.maxLines,f,y.style,y.width]),{dx:C,dy:I,angle:P,className:N,breakAll:L}=y,U=oP(y,Ete);if(!eo(r)||!eo(i)||E.length===0)return null;var F=Number(r)+(Je(C)?C:0),z=Number(i)+(Je(I)?I:0);if(!Xt(F)||!Xt(z))return null;var q;switch(g){case"start":q=Iv("calc(".concat(a,")"));break;case"middle":q=Iv("calc(".concat((E.length-1)/2," * -").concat(o," + (").concat(a," / 2))"));break;default:q=Iv("calc(".concat(E.length-1," * -").concat(o,")"));break}var H=[];if(f){var W=E[0].width,{width:Z}=y;H.push("scale(".concat(Je(Z)&&Je(W)?Z/W:1,")"))}return P&&H.push("rotate(".concat(P,", ").concat(F,", ").concat(z,")")),H.length&&(U.transform=H.join(" ")),M.createElement("text",px({},Oi(U),{ref:e,x:F,y:z,className:Ft("recharts-text",N),textAnchor:d,fill:c.includes("url")?H4:c}),E.map((X,ye)=>{var se=X.words.join(L?"":" ");return M.createElement("tspan",{x:F,dy:ye===0?q:o,key:"".concat(se,"-").concat(ye)},se)}))});fg.displayName="Text";var Ite=["labelRef"],Pte=["content"];function lP(t,e){if(t==null)return{};var n,r,i=Nte(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Nte(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function uP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uP(Object(n),!0).forEach(function(r){Rte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rte(t,e,n){return(e=Ote(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ote(t){var e=kte(t,"string");return typeof e=="symbol"?e:e+""}function kte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cs(){return cs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cs.apply(null,arguments)}var q4=M.createContext(null),W4=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:o,height:a,children:c}=t,f=M.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:o,height:a}),[e,n,r,i,o,a]);return M.createElement(q4.Provider,{value:f},c)},K4=()=>{var t=M.useContext(q4),e=Hu();return t||dk(e)},Mte=M.createContext(null),Dte=()=>{var t=M.useContext(Mte),e=$e(BM);return t||e},Lte=t=>{var{value:e,formatter:n}=t,r=an(t.children)?e:t.children;return typeof n=="function"?n(r):r},OE=t=>t!=null&&typeof t=="function",Bte=(t,e)=>{var n=vr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Fte=(t,e,n,r,i)=>{var{offset:o,className:a}=t,{cx:c,cy:f,innerRadius:d,outerRadius:g,startAngle:y,endAngle:E,clockWise:C}=i,I=(d+g)/2,P=Bte(y,E),N=P>=0?1:-1,L,U;switch(e){case"insideStart":L=y+N*o,U=C;break;case"insideEnd":L=E-N*o,U=!C;break;case"end":L=E+N*o,U=C;break;default:throw new Error("Unsupported position ".concat(e))}U=P<=0?U:!U;var F=Wn(c,f,I,L),z=Wn(c,f,I,L+(U?1:-1)*359),q="M".concat(F.x,",").concat(F.y,`
    A`).concat(I,",").concat(I,",0,1,").concat(U?0:1,`,
    `).concat(z.x,",").concat(z.y),H=an(t.id)?hd("recharts-radial-line-"):t.id;return M.createElement("text",cs({},r,{dominantBaseline:"central",className:Ft("recharts-radial-bar-label",a)}),M.createElement("defs",null,M.createElement("path",{id:H,d:q})),M.createElement("textPath",{xlinkHref:"#".concat(H)},n))},Ute=(t,e,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:c,endAngle:f}=t,d=(c+f)/2;if(n==="outside"){var{x:g,y}=Wn(r,i,a+e,d);return{x:g,y,textAnchor:g>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var E=(o+a)/2,{x:C,y:I}=Wn(r,i,E,d);return{x:C,y:I,textAnchor:"middle",verticalAnchor:"middle"}},gx=t=>"cx"in t&&Je(t.cx),jte=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,o;n!=null&&!gx(n)&&(o=n);var{x:a,y:c,upperWidth:f,lowerWidth:d,height:g}=e,y=a,E=a+(f-d)/2,C=(y+E)/2,I=(f+d)/2,P=y+f/2,N=g>=0?1:-1,L=N*r,U=N>0?"end":"start",F=N>0?"start":"end",z=f>=0?1:-1,q=z*r,H=z>0?"end":"start",W=z>0?"start":"end";if(i==="top"){var Z={x:y+f/2,y:c-L,textAnchor:"middle",verticalAnchor:U};return Fn(Fn({},Z),o?{height:Math.max(c-o.y,0),width:f}:{})}if(i==="bottom"){var X={x:E+d/2,y:c+g+L,textAnchor:"middle",verticalAnchor:F};return Fn(Fn({},X),o?{height:Math.max(o.y+o.height-(c+g),0),width:d}:{})}if(i==="left"){var ye={x:C-q,y:c+g/2,textAnchor:H,verticalAnchor:"middle"};return Fn(Fn({},ye),o?{width:Math.max(ye.x-o.x,0),height:g}:{})}if(i==="right"){var se={x:C+I+q,y:c+g/2,textAnchor:W,verticalAnchor:"middle"};return Fn(Fn({},se),o?{width:Math.max(o.x+o.width-se.x,0),height:g}:{})}var ae=o?{width:I,height:g}:{};return i==="insideLeft"?Fn({x:C+q,y:c+g/2,textAnchor:W,verticalAnchor:"middle"},ae):i==="insideRight"?Fn({x:C+I-q,y:c+g/2,textAnchor:H,verticalAnchor:"middle"},ae):i==="insideTop"?Fn({x:y+f/2,y:c+L,textAnchor:"middle",verticalAnchor:F},ae):i==="insideBottom"?Fn({x:E+d/2,y:c+g-L,textAnchor:"middle",verticalAnchor:U},ae):i==="insideTopLeft"?Fn({x:y+q,y:c+L,textAnchor:W,verticalAnchor:F},ae):i==="insideTopRight"?Fn({x:y+f-q,y:c+L,textAnchor:H,verticalAnchor:F},ae):i==="insideBottomLeft"?Fn({x:E+q,y:c+g-L,textAnchor:W,verticalAnchor:U},ae):i==="insideBottomRight"?Fn({x:E+d-q,y:c+g-L,textAnchor:H,verticalAnchor:U},ae):i&&typeof i=="object"&&(Je(i.x)||ms(i.x))&&(Je(i.y)||ms(i.y))?Fn({x:a+zr(i.x,I),y:c+zr(i.y,g),textAnchor:"end",verticalAnchor:"end"},ae):Fn({x:P,y:c+g/2,textAnchor:"middle",verticalAnchor:"middle"},ae)},Vte={angle:0,offset:5,zIndex:Kn.label,position:"middle",textBreakAll:!1};function oa(t){var e=Vn(t,Vte),{viewBox:n,position:r,value:i,children:o,content:a,className:c="",textBreakAll:f,labelRef:d}=e,g=Dte(),y=K4(),E=r==="center"?y:g??y,C,I,P;if(n==null?C=E:gx(n)?C=n:C=dk(n),!C||an(i)&&an(o)&&!M.isValidElement(a)&&typeof a!="function")return null;var N=Fn(Fn({},e),{},{viewBox:C});if(M.isValidElement(a)){var{labelRef:L}=N,U=lP(N,Ite);return M.cloneElement(a,U)}if(typeof a=="function"){var{content:F}=N,z=lP(N,Pte);if(I=M.createElement(a,z),M.isValidElement(I))return I}else I=Lte(e);var q=Oi(e);if(gx(C)){if(r==="insideStart"||r==="insideEnd"||r==="end")return Fte(e,r,I,q,C);P=Ute(C,e.offset,e.position)}else P=jte(e,C);return M.createElement(hi,{zIndex:e.zIndex},M.createElement(fg,cs({ref:d,className:Ft("recharts-label",c)},q,P,{textAnchor:_te(q.textAnchor)?q.textAnchor:P.textAnchor,breakAll:f}),I))}oa.displayName="Label";var Gte=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?M.createElement(oa,cs({key:"label-implicit"},r)):eo(t)?M.createElement(oa,cs({key:"label-implicit",value:t},r)):M.isValidElement(t)?t.type===oa?M.cloneElement(t,Fn({key:"label-implicit"},r)):M.createElement(oa,cs({key:"label-implicit",content:t},r)):OE(t)?M.createElement(oa,cs({key:"label-implicit",content:t},r)):t&&typeof t=="object"?M.createElement(oa,cs({},t,{key:"label-implicit"},r)):null};function Y4(t){var{label:e,labelRef:n}=t,r=K4();return Gte(e,r,n)||null}var Pv={},Nv={},cP;function zte(){return cP||(cP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(Nv)),Nv}var Rv={},dP;function $te(){return dP||(dP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(Rv)),Rv}var fP;function Hte(){return fP||(fP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zte(),n=$te(),r=ow();function i(o){if(r.isArrayLike(o))return e.last(n.toArray(o))}t.last=i})(Pv)),Pv}var Ov,hP;function qte(){return hP||(hP=1,Ov=Hte().last),Ov}var Wte=qte();const Kte=ro(Wte);var Yte=["valueAccessor"],Xte=["dataKey","clockWise","id","textBreakAll","zIndex"];function rp(){return rp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rp.apply(null,arguments)}function pP(t,e){if(t==null)return{};var n,r,i=Jte(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Jte(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Zte=t=>Array.isArray(t.value)?Kte(t.value):t.value,X4=M.createContext(void 0),J4=X4.Provider,Z4=M.createContext(void 0),Qte=Z4.Provider;function ene(){return M.useContext(X4)}function tne(){return M.useContext(Z4)}function Jh(t){var{valueAccessor:e=Zte}=t,n=pP(t,Yte),{dataKey:r,clockWise:i,id:o,textBreakAll:a,zIndex:c}=n,f=pP(n,Xte),d=ene(),g=tne(),y=d||g;return!y||!y.length?null:M.createElement(hi,{zIndex:c??Kn.label},M.createElement(jn,{className:"recharts-label-list"},y.map((E,C)=>{var I,P=an(r)?e(E,C):Gt(E&&E.payload,r),N=an(o)?{}:{id:"".concat(o,"-").concat(C)};return M.createElement(oa,rp({key:"label-".concat(C)},Oi(E),f,N,{fill:(I=n.fill)!==null&&I!==void 0?I:E.fill,parentViewBox:E.parentViewBox,value:P,textBreakAll:a,viewBox:E.viewBox,index:C,zIndex:0}))})))}Jh.displayName="LabelList";function kE(t){var{label:e}=t;return e?e===!0?M.createElement(Jh,{key:"labelList-implicit"}):M.isValidElement(e)||OE(e)?M.createElement(Jh,{key:"labelList-implicit",content:e}):typeof e=="object"?M.createElement(Jh,rp({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var Q4=t=>t.graphicalItems.polarItems,nne=de([vn,Hd],tE),hg=de([Q4,An,nne],nE),rne=de([hg],rE),pg=de([rne,tg],iE),ine=de([pg,An,hg],sE);de([pg,An,hg],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var o,a=Gt(r,(o=e.dataKey)!==null&&o!==void 0?o:i.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:Gt(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var gP=()=>{},one=de([pg,An,hg,ug,vn],cE),sne=de([An,lE,uE,gP,one,gP,Dt,vn],dE),e8=de([An,Dt,pg,ine,$d,vn,sne],fE),ane=de([e8,An,Ju],gE);de([An,e8,ane,vn],vE);var lne={radiusAxis:{},angleAxis:{}},t8=fi({name:"polarAxis",initialState:lne,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Lue,removeRadiusAxis:Bue,addAngleAxis:Fue,removeAngleAxis:Uue}=t8.actions,une=t8.reducer;function mP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mP(Object(n),!0).forEach(function(r){cne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cne(t,e,n){return(e=dne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dne(t){var e=fne(t,"string");return typeof e=="symbol"?e:e+""}function fne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hne=(t,e)=>e,ME=de([Q4,hne],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),pne=[],DE=(t,e,n)=>n?.length===0?pne:n,n8=de([tg,ME,DE],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(o=>vP(vP({},e.presentationProps),o.props))),i!=null)return i}}),gne=de([n8,ME,DE],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var o,a=Gt(r,e.nameKey,e.name),c;return n!=null&&(o=n[i])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?c=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?c=r.fill:c=e.fill,{value:$u(a,e.dataKey),color:c,payload:r,type:e.legendType}})}),mne=de([n8,ME,DE,ir],(t,e,n,r)=>{if(!(e==null||t==null))return yre({offset:r,pieSettings:e,displayedData:t,cells:n})}),kv={exports:{}},Wt={};var yP;function vne(){if(yP)return Wt;yP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.view_transition"),C=Symbol.for("react.client.reference");function I(P){if(typeof P=="object"&&P!==null){var N=P.$$typeof;switch(N){case t:switch(P=P.type,P){case n:case i:case r:case f:case d:case E:return P;default:switch(P=P&&P.$$typeof,P){case a:case c:case y:case g:return P;case o:return P;default:return N}}case e:return N}}}return Wt.ContextConsumer=o,Wt.ContextProvider=a,Wt.Element=t,Wt.ForwardRef=c,Wt.Fragment=n,Wt.Lazy=y,Wt.Memo=g,Wt.Portal=e,Wt.Profiler=i,Wt.StrictMode=r,Wt.Suspense=f,Wt.SuspenseList=d,Wt.isContextConsumer=function(P){return I(P)===o},Wt.isContextProvider=function(P){return I(P)===a},Wt.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===t},Wt.isForwardRef=function(P){return I(P)===c},Wt.isFragment=function(P){return I(P)===n},Wt.isLazy=function(P){return I(P)===y},Wt.isMemo=function(P){return I(P)===g},Wt.isPortal=function(P){return I(P)===e},Wt.isProfiler=function(P){return I(P)===i},Wt.isStrictMode=function(P){return I(P)===r},Wt.isSuspense=function(P){return I(P)===f},Wt.isSuspenseList=function(P){return I(P)===d},Wt.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===n||P===i||P===r||P===f||P===d||typeof P=="object"&&P!==null&&(P.$$typeof===y||P.$$typeof===g||P.$$typeof===a||P.$$typeof===o||P.$$typeof===c||P.$$typeof===C||P.getModuleId!==void 0)},Wt.typeOf=I,Wt}var xP;function yne(){return xP||(xP=1,kv.exports=vne()),kv.exports}var xne=yne(),wP=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",EP=null,Mv=null,r8=t=>{if(t===EP&&Array.isArray(Mv))return Mv;var e=[];return M.Children.forEach(t,n=>{an(n)||(xne.isFragment(n)?e=e.concat(r8(n.props.children)):e.push(n))}),Mv=e,EP=t,e};function gg(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>wP(i)):r=[wP(e)],r8(t).forEach(i=>{var o=fl(i,"type.displayName")||fl(i,"type.name");o&&r.indexOf(o)!==-1&&n.push(i)}),n}var Dv={},bP;function wne(){return bP||(bP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(Dv)),Dv}var Lv,_P;function Ene(){return _P||(_P=1,Lv=wne().isPlainObject),Lv}var bne=Ene();const _ne=ro(bne);var AP,CP,SP,TP,IP;function PP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PP(Object(n),!0).forEach(function(r){Ane(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ane(t,e,n){return(e=Cne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cne(t){var e=Sne(t,"string");return typeof e=="symbol"?e:e+""}function Sne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ip(){return ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ip.apply(null,arguments)}function Qc(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var RP=(t,e,n,r,i)=>{var o=n-r,a;return a=Rn(AP||(AP=Qc(["M ",",",""])),t,e),a+=Rn(CP||(CP=Qc(["L ",",",""])),t+n,e),a+=Rn(SP||(SP=Qc(["L ",",",""])),t+n-o/2,e+i),a+=Rn(TP||(TP=Qc(["L ",",",""])),t+n-o/2-r,e+i),a+=Rn(IP||(IP=Qc(["L ",","," Z"])),t,e),a},Tne={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ine=t=>{var e=Vn(t,Tne),{x:n,y:r,upperWidth:i,lowerWidth:o,height:a,className:c}=e,{animationEasing:f,animationDuration:d,animationBegin:g,isUpdateAnimationActive:y}=e,E=M.useRef(null),[C,I]=M.useState(-1),P=M.useRef(i),N=M.useRef(o),L=M.useRef(a),U=M.useRef(n),F=M.useRef(r),z=Ud(t,"trapezoid-");if(M.useEffect(()=>{if(E.current&&E.current.getTotalLength)try{var fe=E.current.getTotalLength();fe&&I(fe)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||a!==+a||i===0&&o===0||a===0)return null;var q=Ft("recharts-trapezoid",c);if(!y)return M.createElement("g",null,M.createElement("path",ip({},Oi(e),{className:q,d:RP(n,r,i,o,a)})));var H=P.current,W=N.current,Z=L.current,X=U.current,ye=F.current,se="0px ".concat(C===-1?1:C,"px"),ae="".concat(C,"px 0px"),be=Ck(["strokeDasharray"],d,f);return M.createElement(Fd,{animationId:z,key:z,canBegin:C>0,duration:d,easing:f,isActive:y,begin:g},fe=>{var ne=_n(H,i,fe),we=_n(W,o,fe),me=_n(Z,a,fe),xe=_n(X,n,fe),Ae=_n(ye,r,fe);E.current&&(P.current=ne,N.current=we,L.current=me,U.current=xe,F.current=Ae);var Ce=fe>0?{transition:be,strokeDasharray:ae}:{strokeDasharray:se};return M.createElement("path",ip({},Oi(e),{className:q,d:RP(xe,Ae,ne,we,me),ref:E,style:NP(NP({},Ce),e.style)}))})},Pne=["option","shapeType","activeClassName"];function Nne(t,e){if(t==null)return{};var n,r,i=Rne(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function OP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function op(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OP(Object(n),!0).forEach(function(r){One(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function One(t,e,n){return(e=kne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kne(t){var e=Mne(t,"string");return typeof e=="symbol"?e:e+""}function Mne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dne(t,e){return op(op({},e),t)}function Lne(t,e){return t==="symbols"}function kP(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return M.createElement(Pk,n);case"trapezoid":return M.createElement(Ine,n);case"sector":return M.createElement(kk,n);case"symbols":if(Lne(e))return M.createElement(Ip,n);break;case"curve":return M.createElement(Wp,n);default:return null}}function Bne(t){return M.isValidElement(t)?t.props:t}function sp(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=Nne(t,Pne),o;if(M.isValidElement(e))o=M.cloneElement(e,op(op({},i),Bne(e)));else if(typeof e=="function")o=e(i,i.index);else if(_ne(e)&&typeof e!="boolean"){var a=Dne(e,i);o=M.createElement(kP,{shapeType:n,elementProps:a})}else{var c=i;o=M.createElement(kP,{shapeType:n,elementProps:c})}return i.isActive?M.createElement(jn,{className:r},o):o}var mg=(t,e,n)=>{var r=Zt();return(i,o)=>a=>{t?.(i,o,a),r(g4({activeIndex:String(o),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},vg=t=>{var e=Zt();return(n,r)=>i=>{t?.(n,r,i),e(WZ())}},yg=(t,e,n)=>{var r=Zt();return(i,o)=>a=>{t?.(i,o,a),r(KZ({activeIndex:String(o),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function LE(t){var{tooltipEntrySettings:e}=t,n=Zt(),r=Nr(),i=M.useRef(null);return M.useLayoutEffect(()=>{r||(i.current===null?n(zZ(e)):i.current!==e&&n($Z({prev:i.current,next:e})),i.current=e)},[e,n,r]),M.useLayoutEffect(()=>()=>{i.current&&(n(HZ(i.current)),i.current=null)},[n]),null}function i8(t){var{legendPayload:e}=t,n=Zt(),r=Nr(),i=M.useRef(null);return M.useLayoutEffect(()=>{r||(i.current===null?n(wk(e)):i.current!==e&&n(Ek({prev:i.current,next:e})),i.current=e)},[n,r,e]),M.useLayoutEffect(()=>()=>{i.current&&(n(bk(i.current)),i.current=null)},[n]),null}function Fne(t){var{legendPayload:e}=t,n=Zt(),r=$e(Dt),i=M.useRef(null);return M.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(wk(e)):i.current!==e&&n(Ek({prev:i.current,next:e})),i.current=e)},[n,r,e]),M.useLayoutEffect(()=>()=>{i.current&&(n(bk(i.current)),i.current=null)},[n]),null}var Bv,Une=()=>{var[t]=M.useState(()=>hd("uid-"));return t},jne=(Bv=jD.useId)!==null&&Bv!==void 0?Bv:Une;function Vne(t,e){var n=jne();return e||(t?"".concat(t,"-").concat(n):n)}var Gne=M.createContext(void 0),BE=t=>{var{id:e,type:n,children:r}=t,i=Vne("recharts-".concat(n),e);return M.createElement(Gne.Provider,{value:i},r(i))},zne={cartesianItems:[],polarItems:[]},o8=fi({name:"graphicalItems",initialState:zne,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:gn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=_o(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:gn()},removeCartesianGraphicalItem:{reducer(t,e){var n=_o(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:gn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:gn()},removePolarGraphicalItem:{reducer(t,e){var n=_o(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:gn()}}}),{addCartesianGraphicalItem:$ne,replaceCartesianGraphicalItem:Hne,removeCartesianGraphicalItem:qne,addPolarGraphicalItem:Wne,removePolarGraphicalItem:Kne}=o8.actions,Yne=o8.reducer,Xne=t=>{var e=Zt(),n=M.useRef(null);return M.useLayoutEffect(()=>{n.current===null?e($ne(t)):n.current!==t&&e(Hne({prev:n.current,next:t})),n.current=t},[e,t]),M.useLayoutEffect(()=>()=>{n.current&&(e(qne(n.current)),n.current=null)},[e]),null},s8=M.memo(Xne);function Jne(t){var e=Zt();return M.useLayoutEffect(()=>(e(Wne(t)),()=>{e(Kne(t))}),[e,t]),null}var Zne=["key"],Qne=["onMouseEnter","onClick","onMouseLeave"],ere=["id"],tre=["id"];function MP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function On(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MP(Object(n),!0).forEach(function(r){nre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nre(t,e,n){return(e=rre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rre(t){var e=ire(t,"string");return typeof e=="symbol"?e:e+""}function ire(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ma(){return ma=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ma.apply(null,arguments)}function xg(t,e){if(t==null)return{};var n,r,i=ore(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ore(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function sre(t){var e=M.useMemo(()=>gg(t.children,vl),[t.children]),n=$e(r=>gne(r,t.id,e));return n==null?null:M.createElement(Fne,{legendPayload:n})}var are=M.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:o,fill:a,name:c,hide:f,tooltipType:d,id:g}=t,y={dataDefinedOnItem:r.map(E=>E.tooltipPayload),positions:r.map(E=>E.tooltipPosition),settings:{stroke:i,strokeWidth:o,fill:a,dataKey:e,nameKey:n,name:$u(c,e),hide:f,type:d,color:a,unit:"",graphicalItemId:g}};return M.createElement(LE,{tooltipEntrySettings:y})}),lre=(t,e)=>t>e?"start":t<e?"end":"middle",ure=(t,e,n)=>zr(typeof e=="function"?e(t):e,n,n*.8),cre=(t,e,n)=>{var{top:r,left:i,width:o,height:a}=e,c=Nk(o,a),f=i+zr(t.cx,o,o/2),d=r+zr(t.cy,a,a/2),g=zr(t.innerRadius,c,0),y=ure(n,t.outerRadius,c),E=t.maxRadius||Math.sqrt(o*o+a*a)/2;return{cx:f,cy:d,innerRadius:g,outerRadius:y,maxRadius:E}},dre=(t,e)=>{var n=vr(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function fre(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var hre=(t,e)=>{if(M.isValidElement(t))return M.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Ft("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=xg(e,Zne);return M.createElement(Wp,ma({},i,{type:"linear",className:n}))},pre=(t,e,n)=>{if(M.isValidElement(t))return M.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),M.isValidElement(r)))return r;var i=Ft("recharts-pie-label-text",fre(t));return M.createElement(fg,ma({},e,{alignmentBaseline:"middle",className:i}),r)};function gre(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:o,dataKey:a}=n;if(!r||!i||!e)return null;var c=Ri(n),f=Pu(i),d=Pu(o),g=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,y=e.map((E,C)=>{var I=(E.startAngle+E.endAngle)/2,P=Wn(E.cx,E.cy,E.outerRadius+g,I),N=On(On(On(On({},c),E),{},{stroke:"none"},f),{},{index:C,textAnchor:lre(P.x,E.cx)},P),L=On(On(On(On({},c),E),{},{fill:"none",stroke:E.fill},d),{},{index:C,points:[Wn(E.cx,E.cy,E.outerRadius,I),P],key:"line"});return M.createElement(hi,{zIndex:Kn.label,key:"label-".concat(E.startAngle,"-").concat(E.endAngle,"-").concat(E.midAngle,"-").concat(C)},M.createElement(jn,null,o&&hre(o,L),pre(i,N,Gt(E,a))))});return M.createElement(jn,{className:"recharts-pie-labels"},y)}function mre(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?M.createElement(kE,{label:i}):M.createElement(gre,{sectors:e,props:n,showLabels:r})}function vre(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:o,id:a}=t,c=$e(ga),f=$e(SE),d=$e(kQ),{onMouseEnter:g,onClick:y,onMouseLeave:E}=i,C=xg(i,Qne),I=mg(g,i.dataKey,a),P=vg(E),N=yg(y,i.dataKey,a);return e==null||e.length===0?null:M.createElement(M.Fragment,null,e.map((L,U)=>{if(L?.startAngle===0&&L?.endAngle===0&&e.length!==1)return null;var F=d==null||d===a,z=String(U)===c&&(f==null||i.dataKey===f)&&F,q=c?r:null,H=n&&z?n:q,W=On(On({},L),{},{stroke:L.stroke,tabIndex:-1,[hw]:U,[pw]:a});return M.createElement(jn,ma({key:"sector-".concat(L?.startAngle,"-").concat(L?.endAngle,"-").concat(L.midAngle,"-").concat(U),tabIndex:-1,className:"recharts-pie-sector"},zu(C,L,U),{onMouseEnter:I(L,U),onMouseLeave:P(L,U),onClick:N(L,U)}),M.createElement(sp,ma({option:o??H,index:U,shapeType:"sector",isActive:z},W)))}))}function yre(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:o}=t,{cornerRadius:a,startAngle:c,endAngle:f,dataKey:d,nameKey:g,tooltipType:y}=n,E=Math.abs(n.minAngle),C=dre(c,f),I=Math.abs(C),P=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,N=r.filter(H=>Gt(H,d,0)!==0).length,L=(I>=360?N:N-1)*P,U=I-N*E-L,F=r.reduce((H,W)=>{var Z=Gt(W,d,0);return H+(Je(Z)?Z:0)},0),z;if(F>0){var q;z=r.map((H,W)=>{var Z=Gt(H,d,0),X=Gt(H,g,W),ye=cre(n,o,H),se=(Je(Z)?Z:0)/F,ae,be=On(On({},H),i&&i[W]&&i[W].props);W?ae=q.endAngle+vr(C)*P*(Z!==0?1:0):ae=c;var fe=ae+vr(C)*((Z!==0?E:0)+se*U),ne=(ae+fe)/2,we=(ye.innerRadius+ye.outerRadius)/2,me=[{name:X,value:Z,payload:be,dataKey:d,type:y,graphicalItemId:n.id}],xe=Wn(ye.cx,ye.cy,we,ne);return q=On(On(On(On({},n.presentationProps),{},{percent:se,cornerRadius:typeof a=="string"?parseFloat(a):a,name:X,tooltipPayload:me,midAngle:ne,middleRadius:we,tooltipPosition:xe},be),ye),{},{value:Z,dataKey:d,startAngle:ae,endAngle:fe,payload:be,paddingAngle:vr(C)*P}),q})}return z}function xre(t){var{showLabels:e,sectors:n,children:r}=t,i=M.useMemo(()=>!e||!n?[]:n.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[n,e]);return M.createElement(Qte,{value:e?i:void 0},r)}function wre(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:o,animationBegin:a,animationDuration:c,animationEasing:f,activeShape:d,inactiveShape:g,onAnimationStart:y,onAnimationEnd:E}=e,C=Ud(e,"recharts-pie-"),I=n.current,[P,N]=M.useState(!1),L=M.useCallback(()=>{typeof E=="function"&&E(),N(!1)},[E]),U=M.useCallback(()=>{typeof y=="function"&&y(),N(!0)},[y]);return M.createElement(xre,{showLabels:!P,sectors:i},M.createElement(Fd,{animationId:C,begin:a,duration:c,isActive:o,easing:f,onAnimationStart:U,onAnimationEnd:L,key:C},F=>{var z=[],q=i&&i[0],H=q?.startAngle;return i?.forEach((W,Z)=>{var X=I&&I[Z],ye=Z>0?fl(W,"paddingAngle",0):0;if(X){var se=_n(X.endAngle-X.startAngle,W.endAngle-W.startAngle,F),ae=On(On({},W),{},{startAngle:H+ye,endAngle:H+se+ye});z.push(ae),H=ae.endAngle}else{var{endAngle:be,startAngle:fe}=W,ne=_n(0,be-fe,F),we=On(On({},W),{},{startAngle:H+ye,endAngle:H+ne+ye});z.push(we),H=we.endAngle}}),n.current=z,M.createElement(jn,null,M.createElement(vre,{sectors:z,activeShape:d,inactiveShape:g,allOtherPieProps:e,shape:e.shape,id:r}))}),M.createElement(mre,{showLabels:!P,sectors:i,props:e}),e.children)}var Ere={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Kn.area};function bre(t){var{id:e}=t,n=xg(t,ere),{hide:r,className:i,rootTabIndex:o}=t,a=M.useMemo(()=>gg(t.children,vl),[t.children]),c=$e(g=>mne(g,e,a)),f=M.useRef(null),d=Ft("recharts-pie",i);return r||c==null?(f.current=null,M.createElement(jn,{tabIndex:o,className:d})):M.createElement(hi,{zIndex:t.zIndex},M.createElement(are,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:c,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),M.createElement(jn,{tabIndex:o,className:d},M.createElement(wre,{props:On(On({},n),{},{sectors:c}),previousSectorsRef:f,id:e})))}function a8(t){var e=Vn(t,Ere),{id:n}=e,r=xg(e,tre),i=Ri(r);return M.createElement(BE,{id:n,type:"pie"},o=>M.createElement(M.Fragment,null,M.createElement(Jne,{type:"pie",id:o,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),M.createElement(sre,ma({},r,{id:o})),M.createElement(bre,ma({},r,{id:o}))))}a8.displayName="Pie";function DP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DP(Object(n),!0).forEach(function(r){_re(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _re(t,e,n){return(e=Are(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Are(t){var e=Cre(t,"string");return typeof e=="symbol"?e:e+""}function Cre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var l8=0,Sre={xAxis:{},yAxis:{},zAxis:{}},u8=fi({name:"cartesianAxis",initialState:Sre,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:gn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:gn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:gn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:gn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:gn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:gn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:gn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:gn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:gn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var o=i.widthHistory||[];if(o.length===3&&o[0]===o[2]&&r===o[1]&&r!==i.width&&Math.abs(r-o[0])<=1)return;var a=[...o,r].slice(-3);t.yAxis[n]=LP(LP({},t.yAxis[n]),{},{width:r,widthHistory:a})}}}}),{addXAxis:Tre,replaceXAxis:Ire,removeXAxis:Pre,addYAxis:Nre,replaceYAxis:Rre,removeYAxis:Ore,addZAxis:jue,replaceZAxis:Vue,removeZAxis:Gue,updateYAxisWidth:kre}=u8.actions,Mre=u8.reducer,Dre=de([ir],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Lre=de([Dre,Ss,Ts],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),c8=()=>$e(Lre),BP=(t,e,n)=>{var r=n??t;if(!an(r))return zr(r,e,0)},Bre=(t,e,n)=>{var r={},i=t.filter(ig),o=t.filter(d=>d.stackId==null),a=i.reduce((d,g)=>(d[g.stackId]||(d[g.stackId]=[]),d[g.stackId].push(g),d),r),c=Object.entries(a).map(d=>{var[g,y]=d,E=y.map(I=>I.dataKey),C=BP(e,n,y[0].barSize);return{stackId:g,dataKeys:E,barSize:C}}),f=o.map(d=>{var g=[d.dataKey].filter(E=>E!=null),y=BP(e,n,d.barSize);return{stackId:void 0,dataKeys:g,barSize:y}});return[...c,...f]};function FP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(n),!0).forEach(function(r){Fre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fre(t,e,n){return(e=Ure(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ure(t){var e=jre(t,"string");return typeof e=="symbol"?e:e+""}function jre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vre(t,e,n,r,i){var o=r.length;if(!(o<1)){var a=zr(t,n,0,!0),c,f=[];if(Xt(r[0].barSize)){var d=!1,g=n/o,y=r.reduce((L,U)=>L+(U.barSize||0),0);y+=(o-1)*a,y>=n&&(y-=(o-1)*a,a=0),y>=n&&g>0&&(d=!0,g*=.9,y=o*g);var E=(n-y)/2>>0,C={offset:E-a,size:0};c=r.reduce((L,U)=>{var F,z={stackId:U.stackId,dataKeys:U.dataKeys,position:{offset:C.offset+C.size+a,size:d?g:(F=U.barSize)!==null&&F!==void 0?F:0}},q=[...L,z];return C=q[q.length-1].position,q},f)}else{var I=zr(e,n,0,!0);n-2*I-(o-1)*a<=0&&(a=0);var P=(n-2*I-(o-1)*a)/o;P>1&&(P>>=0);var N=Xt(i)?Math.min(P,i):P;c=r.reduce((L,U,F)=>[...L,{stackId:U.stackId,dataKeys:U.dataKeys,position:{offset:I+(P+a)*F+(P-N)/2,size:N}}],f)}return c}}var Gre=(t,e,n,r,i,o,a)=>{var c=an(a)?e:a,f=Vre(n,r,i!==o?i:o,t,c);return i!==o&&f!=null&&(f=f.map(d=>Fh(Fh({},d),{},{position:Fh(Fh({},d.position),{},{offset:d.position.offset-i/2})}))),f},zre=(t,e)=>{var n=Qw(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:o}=i;if(o)return o.find(a=>a.key===n)}}}};function $re(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Xt(t.zIndex)?t.zIndex:e}var d8=t=>{var{chartData:e}=t,n=Zt(),r=Nr();return M.useEffect(()=>r?()=>{}:(n(WI(e)),()=>{n(WI(void 0))}),[e,n,r]),null},UP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},f8=fi({name:"brush",initialState:UP,reducers:{setBrushSettings(t,e){return e.payload==null?UP:e.payload}}}),{setBrushSettings:zue}=f8.actions,Hre=f8.reducer;function jP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jP(Object(n),!0).forEach(function(r){h8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h8(t,e,n){return(e=qre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qre(t){var e=Wre(t,"string");return typeof e=="symbol"?e:e+""}function Wre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kre=(t,e)=>{var{x:n,y:r}=t,{x:i,y:o}=e;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},Yre=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return Kre({x:e,y:n},{x:r,y:i})};class wg{static create(e){return new wg(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}default:return this.scale(e)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}h8(wg,"EPS",1e-4);var Xre=t=>{var e=Object.keys(t).reduce((n,r)=>Uh(Uh({},n),{},{[r]:wg.create(t[r])}),{});return Uh(Uh({},e),{},{apply(n){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(o=>{var[a,c]=o;return[a,e[a].apply(c,{bandAware:r,position:i})]}))},isInRange(n){return Object.keys(n).every(r=>e[r].isInRange(n[r]))}})};function Jre(t){return(t%180+180)%180}var Zre=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Jre(i),a=o*Math.PI/180,c=Math.atan(r/n),f=a>c&&a<Math.PI-c?r/Math.sin(a):n/Math.cos(a);return Math.abs(f)},Qre={dots:[],areas:[],lines:[]},p8=fi({name:"referenceElements",initialState:Qre,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=_o(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=_o(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=_o(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:$ue,removeDot:Hue,addArea:que,removeArea:Wue,addLine:eie,removeLine:tie}=p8.actions,nie=p8.reducer,g8=M.createContext(void 0),rie=t=>{var{children:e}=t,[n]=M.useState("".concat(hd("recharts"),"-clip")),r=c8();if(r==null)return null;var{x:i,y:o,width:a,height:c}=r;return M.createElement(g8.Provider,{value:n},M.createElement("defs",null,M.createElement("clipPath",{id:n},M.createElement("rect",{x:i,y:o,height:c,width:a}))),e)},iie=()=>M.useContext(g8);function VP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VP(Object(n),!0).forEach(function(r){oie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oie(t,e,n){return(e=sie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sie(t){var e=aie(t,"string");return typeof e=="symbol"?e:e+""}function aie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ap.apply(null,arguments)}var lie=(t,e)=>{var n;if(M.isValidElement(t))n=M.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!Xt(e.x1)||!Xt(e.y1)||!Xt(e.x2)||!Xt(e.y2))return null;n=M.createElement("line",ap({},e,{className:"recharts-reference-line-line"}))}return n},uie=(t,e,n,r,i,o)=>{var{x:a,width:c}=o,f=i.y.apply(t,{position:n});if(ki(f)||e==="discard"&&!i.y.isInRange(f))return null;var d=[{x:a+c,y:f},{x:a,y:f}];return r==="left"?d.reverse():d},cie=(t,e,n,r,i,o)=>{var{y:a,height:c}=o,f=i.x.apply(t,{position:n});if(ki(f)||e==="discard"&&!i.x.isInRange(f))return null;var d=[{x:f,y:a+c},{x:f,y:a}];return r==="top"?d.reverse():d},die=(t,e,n,r)=>{var i=t.map(o=>r.apply(o,{position:n}));return e==="discard"&&i.some(o=>!r.isInRange(o))?null:i},fie=(t,e,n,r,i,o)=>{var{x:a,y:c,segment:f,ifOverflow:d}=o,g=eo(a),y=eo(c);return y?uie(c,d,n,i,t,e):g?cie(a,d,n,r,t,e):f!=null&&f.length===2?die(f,d,n,t):null};function hie(t){var e=Zt();return M.useEffect(()=>(e(eie(t)),()=>{e(tie(t))})),null}function pie(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:o}=t,a=Nr(),c=iie(),f=$e(H=>zo(H,e)),d=$e(H=>$o(H,n)),g=$e(H=>Lu(H,"xAxis",e,a)),y=$e(H=>Lu(H,"yAxis",n,a)),E=Hu();if(!c||!E||f==null||d==null||g==null||y==null)return null;var C=Xre({x:g,y}),I=fie(C,E,t.position,f.orientation,d.orientation,t);if(!I)return null;var[{x:P,y:N},{x:L,y:U}]=I,F=o==="hidden"?"url(#".concat(c,")"):void 0,z=GP(GP({clipPath:F},Oi(t)),{},{x1:P,y1:N,x2:L,y2:U}),q=Yre({x1:P,y1:N,x2:L,y2:U});return M.createElement(hi,{zIndex:t.zIndex},M.createElement(jn,{className:Ft("recharts-reference-line",i)},lie(r,z),M.createElement(W4,ap({},q,{lowerWidth:q.width,upperWidth:q.width}),M.createElement(Y4,{label:t.label}),t.children)))}var gie={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Kn.line};function m8(t){var e=Vn(t,gie);return M.createElement(M.Fragment,null,M.createElement(hie,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),M.createElement(pie,e))}m8.displayName="ReferenceLine";function v8(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function mie(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Zre(r,n)}function vie(t,e,n){var r=n==="width",{x:i,y:o,width:a,height:c}=t;return e===1?{start:r?i:o,end:r?i+a:o+c}:{start:r?i+a:o+c,end:r?i:o}}function Td(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function yie(t,e){return v8(t,e+1)}function xie(t,e,n,r,i){for(var o=(r||[]).slice(),{start:a,end:c}=e,f=0,d=1,g=a,y=function(){var I=r?.[f];if(I===void 0)return{v:v8(r,d)};var P=f,N,L=()=>(N===void 0&&(N=n(I,P)),N),U=I.coordinate,F=f===0||Td(t,U,L,g,c);F||(f=0,g=a,d+=1),F&&(g=U+t*(L()/2+i),f+=d)},E;d<=o.length;)if(E=y(),E)return E.v;return[]}function wie(t,e,n,r,i){var o=(r||[]).slice(),a=o.length;if(a===0)return[];for(var{start:c,end:f}=e,d=1;d<=a;d++){for(var g=(a-1)%d,y=c,E=!0,C=function(){var U=r[I],F=I,z,q=()=>(z===void 0&&(z=n(U,F)),z),H=U.coordinate,W=I===g||Td(t,H,q,y,f);if(!W)return E=!1,1;W&&(y=H+t*(q()/2+i))},I=g;I<a&&!C();I+=d);if(E){for(var P=[],N=g;N<a;N+=d)P.push(r[N]);return P}}return[]}function zP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zP(Object(n),!0).forEach(function(r){Eie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eie(t,e,n){return(e=bie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bie(t){var e=_ie(t,"string");return typeof e=="symbol"?e:e+""}function _ie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Aie(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,{start:c}=e,{end:f}=e,d=function(E){var C=o[E],I,P=()=>(I===void 0&&(I=n(C,E)),I);if(E===a-1){var N=t*(C.coordinate+t*P()/2-f);o[E]=C=jr(jr({},C),{},{tickCoord:N>0?C.coordinate-N*t:C.coordinate})}else o[E]=C=jr(jr({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var L=Td(t,C.tickCoord,P,c,f);L&&(f=C.tickCoord-t*(P()/2+i),o[E]=jr(jr({},C),{},{isShow:!0}))}},g=a-1;g>=0;g--)d(g);return o}function Cie(t,e,n,r,i,o){var a=(r||[]).slice(),c=a.length,{start:f,end:d}=e;if(o){var g=r[c-1],y=n(g,c-1),E=t*(g.coordinate+t*y/2-d);if(a[c-1]=g=jr(jr({},g),{},{tickCoord:E>0?g.coordinate-E*t:g.coordinate}),g.tickCoord!=null){var C=Td(t,g.tickCoord,()=>y,f,d);C&&(d=g.tickCoord-t*(y/2+i),a[c-1]=jr(jr({},g),{},{isShow:!0}))}}for(var I=o?c-1:c,P=function(U){var F=a[U],z,q=()=>(z===void 0&&(z=n(F,U)),z);if(U===0){var H=t*(F.coordinate-t*q()/2-f);a[U]=F=jr(jr({},F),{},{tickCoord:H<0?F.coordinate-H*t:F.coordinate})}else a[U]=F=jr(jr({},F),{},{tickCoord:F.coordinate});if(F.tickCoord!=null){var W=Td(t,F.tickCoord,q,f,d);W&&(f=F.tickCoord+t*(q()/2+i),a[U]=jr(jr({},F),{},{isShow:!0}))}},N=0;N<I;N++)P(N);return a}function FE(t,e,n){var{tick:r,ticks:i,viewBox:o,minTickGap:a,orientation:c,interval:f,tickFormatter:d,unit:g,angle:y}=t;if(!i||!i.length||!r)return[];if(Je(f)||Kp.isSsr){var E;return(E=yie(i,Je(f)?f:0))!==null&&E!==void 0?E:[]}var C=[],I=c==="top"||c==="bottom"?"width":"height",P=g&&I==="width"?ld(g,{fontSize:e,letterSpacing:n}):{width:0,height:0},N=(F,z)=>{var q=typeof d=="function"?d(F.value,z):F.value;return I==="width"?mie(ld(q,{fontSize:e,letterSpacing:n}),P,y):ld(q,{fontSize:e,letterSpacing:n})[I]},L=i.length>=2?vr(i[1].coordinate-i[0].coordinate):1,U=vie(o,L,I);return f==="equidistantPreserveStart"?xie(L,U,N,i,a):f==="equidistantPreserveEnd"?wie(L,U,N,i,a):(f==="preserveStart"||f==="preserveStartEnd"?C=Cie(L,U,N,i,a,f==="preserveStartEnd"):C=Aie(L,U,N,i,a),C.filter(F=>F.isShow))}var Sie=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=t,a=0;if(e){Array.from(e).forEach(g=>{if(g){var y=g.getBoundingClientRect();y.width>a&&(a=y.width)}});var c=n?n.getBoundingClientRect().width:0,f=i+o,d=a+f+c+(n?r:0);return Math.round(d)}return 0},Tie=["axisLine","width","height","className","hide","ticks","axisType"];function Iie(t,e){if(t==null)return{};var n,r,i=Pie(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Pie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function yl(){return yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yl.apply(null,arguments)}function $P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$P(Object(n),!0).forEach(function(r){Nie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nie(t,e,n){return(e=Rie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rie(t){var e=Oie(t,"string");return typeof e=="symbol"?e:e+""}function Oie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ps={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Kn.axis};function kie(t){var{x:e,y:n,width:r,height:i,orientation:o,mirror:a,axisLine:c,otherSvgProps:f}=t;if(!c)return null;var d=qn(qn(qn({},f),Ri(c)),{},{fill:"none"});if(o==="top"||o==="bottom"){var g=+(o==="top"&&!a||o==="bottom"&&a);d=qn(qn({},d),{},{x1:e,y1:n+g*i,x2:e+r,y2:n+g*i})}else{var y=+(o==="left"&&!a||o==="right"&&a);d=qn(qn({},d),{},{x1:e+y*r,y1:n,x2:e+y*r,y2:n+i})}return M.createElement("line",yl({},d,{className:Ft("recharts-cartesian-axis-line",fl(c,"className"))}))}function Mie(t,e,n,r,i,o,a,c,f){var d,g,y,E,C,I,P=c?-1:1,N=t.tickSize||a,L=Je(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=g=t.coordinate,E=n+ +!c*i,y=E-P*N,I=y-P*f,C=L;break;case"left":y=E=t.coordinate,g=e+ +!c*r,d=g-P*N,C=d-P*f,I=L;break;case"right":y=E=t.coordinate,g=e+ +c*r,d=g+P*N,C=d+P*f,I=L;break;default:d=g=t.coordinate,E=n+ +c*i,y=E+P*N,I=y+P*f,C=L;break}return{line:{x1:d,y1:y,x2:g,y2:E},tick:{x:C,y:I}}}function Die(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Lie(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Bie(t){var{option:e,tickProps:n,value:r}=t,i,o=Ft(n.className,"recharts-cartesian-axis-tick-value");if(M.isValidElement(e))i=M.cloneElement(e,qn(qn({},n),{},{className:o}));else if(typeof e=="function")i=e(qn(qn({},n),{},{className:o}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=Ft(a,e?.className)),i=M.createElement(fg,yl({},n,{className:a}),r)}return i}var Fie=M.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:o,tickFormatter:a,unit:c,padding:f,tickTextProps:d,orientation:g,mirror:y,x:E,y:C,width:I,height:P,tickSize:N,tickMargin:L,fontSize:U,letterSpacing:F,getTicksConfig:z,events:q,axisType:H}=t,W=FE(qn(qn({},z),{},{ticks:n}),U,F),Z=Die(g,y),X=Lie(g,y),ye=Ri(z),se=Pu(r),ae={};typeof i=="object"&&(ae=i);var be=qn(qn({},ye),{},{fill:"none"},ae),fe=W.map(me=>qn({entry:me},Mie(me,E,C,I,P,g,N,y,L))),ne=fe.map(me=>{var{entry:xe,line:Ae}=me;return M.createElement(jn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(xe.value,"-").concat(xe.coordinate,"-").concat(xe.tickCoord)},i&&M.createElement("line",yl({},be,Ae,{className:Ft("recharts-cartesian-axis-tick-line",fl(i,"className"))})))}),we=fe.map((me,xe)=>{var{entry:Ae,tick:Ce}=me,te=qn(qn(qn(qn({textAnchor:Z,verticalAnchor:X},ye),{},{stroke:"none",fill:o},se),Ce),{},{index:xe,payload:Ae,visibleTicksCount:W.length,tickFormatter:a,padding:f},d);return M.createElement(jn,yl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Ae.value,"-").concat(Ae.coordinate,"-").concat(Ae.tickCoord)},zu(q,Ae,xe)),r&&M.createElement(Bie,{option:r,tickProps:te,value:"".concat(typeof a=="function"?a(Ae.value,xe):Ae.value).concat(c||"")}))});return M.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(H,"-ticks")},we.length>0&&M.createElement(hi,{zIndex:Kn.label},M.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(H,"-tick-labels"),ref:e},we)),ne.length>0&&M.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(H,"-tick-lines")},ne))}),Uie=M.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:o,hide:a,ticks:c,axisType:f}=t,d=Iie(t,Tie),[g,y]=M.useState(""),[E,C]=M.useState(""),I=M.useRef(null);M.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var N;return Sie({ticks:I.current,label:(N=t.labelRef)===null||N===void 0?void 0:N.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var P=M.useCallback(N=>{if(N){var L=N.getElementsByClassName("recharts-cartesian-axis-tick-value");I.current=L;var U=L[0];if(U){var F=window.getComputedStyle(U),z=F.fontSize,q=F.letterSpacing;(z!==g||q!==E)&&(y(z),C(q))}}},[g,E]);return a||r!=null&&r<=0||i!=null&&i<=0?null:M.createElement(hi,{zIndex:t.zIndex},M.createElement(jn,{className:Ft("recharts-cartesian-axis",o)},M.createElement(kie,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Ri(t)}),M.createElement(Fie,{ref:P,axisType:f,events:d,fontSize:g,getTicksConfig:t,height:t.height,letterSpacing:E,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:c,unit:t.unit,width:t.width,x:t.x,y:t.y}),M.createElement(W4,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},M.createElement(Y4,{label:t.label,labelRef:t.labelRef}),t.children)))}),UE=M.forwardRef((t,e)=>{var n=Vn(t,ps);return M.createElement(Uie,yl({},n,{ref:e}))});UE.displayName="CartesianAxis";var jie=["x1","y1","x2","y2","key"],Vie=["offset"],Gie=["xAxisId","yAxisId"],zie=["xAxisId","yAxisId"];function HP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(n),!0).forEach(function(r){$ie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ie(t,e,n){return(e=Hie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hie(t){var e=qie(t,"string");return typeof e=="symbol"?e:e+""}function qie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sl(){return sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sl.apply(null,arguments)}function lp(t,e){if(t==null)return{};var n,r,i=Wie(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Wie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Kie=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:o,height:a,ry:c}=t;return M.createElement("rect",{x:r,y:i,ry:c,width:o,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function y8(t){var{option:e,lineItemProps:n}=t,r;if(M.isValidElement(e))r=M.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:o,y1:a,x2:c,y2:f,key:d}=n,g=lp(n,jie),y=(i=Ri(g))!==null&&i!==void 0?i:{},{offset:E}=y,C=lp(y,Vie);r=M.createElement("line",sl({},C,{x1:o,y1:a,x2:c,y2:f,fill:"none",key:d}))}return r}function Yie(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:a}=t,c=lp(t,Gie),f=i.map((d,g)=>{var y=Vr(Vr({},c),{},{x1:e,y1:d,x2:e+n,y2:d,key:"line-".concat(g),index:g});return M.createElement(y8,{key:"line-".concat(g),option:r,lineItemProps:y})});return M.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function Xie(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:a}=t,c=lp(t,zie),f=i.map((d,g)=>{var y=Vr(Vr({},c),{},{x1:d,y1:e,x2:d,y2:e+n,key:"line-".concat(g),index:g});return M.createElement(y8,{option:r,lineItemProps:y,key:"line-".concat(g)})});return M.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function Jie(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:o,height:a,horizontalPoints:c,horizontal:f=!0}=t;if(!f||!e||!e.length||c==null)return null;var d=c.map(y=>Math.round(y+i-i)).sort((y,E)=>y-E);i!==d[0]&&d.unshift(0);var g=d.map((y,E)=>{var C=!d[E+1],I=C?i+a-y:d[E+1]-y;if(I<=0)return null;var P=E%e.length;return M.createElement("rect",{key:"react-".concat(E),y,x:r,height:I,width:o,stroke:"none",fill:e[P],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},g)}function Zie(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:o,width:a,height:c,verticalPoints:f}=t;if(!e||!n||!n.length)return null;var d=f.map(y=>Math.round(y+i-i)).sort((y,E)=>y-E);i!==d[0]&&d.unshift(0);var g=d.map((y,E)=>{var C=!d[E+1],I=C?i+a-y:d[E+1]-y;if(I<=0)return null;var P=E%n.length;return M.createElement("rect",{key:"react-".concat(E),x:y,y:o,width:I,height:c,stroke:"none",fill:n[P],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},g)}var Qie=(t,e)=>{var{xAxis:n,width:r,height:i,offset:o}=t;return ok(FE(Vr(Vr(Vr({},ps),n),{},{ticks:sk(n),viewBox:{x:0,y:0,width:r,height:i}})),o.left,o.left+o.width,e)},eoe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:o}=t;return ok(FE(Vr(Vr(Vr({},ps),n),{},{ticks:sk(n),viewBox:{x:0,y:0,width:r,height:i}})),o.top,o.top+o.height,e)},toe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Kn.grid};function mx(t){var e=vw(),n=yw(),r=fk(),i=Vr(Vr({},Vn(t,toe)),{},{x:Je(t.x)?t.x:r.left,y:Je(t.y)?t.y:r.top,width:Je(t.width)?t.width:r.width,height:Je(t.height)?t.height:r.height}),{xAxisId:o,yAxisId:a,x:c,y:f,width:d,height:g,syncWithTicks:y,horizontalValues:E,verticalValues:C}=i,I=Nr(),P=$e(X=>DI(X,"xAxis",o,I)),N=$e(X=>DI(X,"yAxis",a,I));if(!Vo(d)||!Vo(g)||!Je(c)||!Je(f))return null;var L=i.verticalCoordinatesGenerator||Qie,U=i.horizontalCoordinatesGenerator||eoe,{horizontalPoints:F,verticalPoints:z}=i;if((!F||!F.length)&&typeof U=="function"){var q=E&&E.length,H=U({yAxis:N?Vr(Vr({},N),{},{ticks:q?E:N.ticks}):void 0,width:e??d,height:n??g,offset:r},q?!0:y);D0(Array.isArray(H),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof H,"]")),Array.isArray(H)&&(F=H)}if((!z||!z.length)&&typeof L=="function"){var W=C&&C.length,Z=L({xAxis:P?Vr(Vr({},P),{},{ticks:W?C:P.ticks}):void 0,width:e??d,height:n??g,offset:r},W?!0:y);D0(Array.isArray(Z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Z,"]")),Array.isArray(Z)&&(z=Z)}return M.createElement(hi,{zIndex:i.zIndex},M.createElement("g",{className:"recharts-cartesian-grid"},M.createElement(Kie,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),M.createElement(Jie,sl({},i,{horizontalPoints:F})),M.createElement(Zie,sl({},i,{verticalPoints:z})),M.createElement(Yie,sl({},i,{offset:r,horizontalPoints:F,xAxis:P,yAxis:N})),M.createElement(Xie,sl({},i,{offset:r,verticalPoints:z,xAxis:P,yAxis:N}))))}mx.displayName="CartesianGrid";var noe={},x8=fi({name:"errorBars",initialState:noe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Kue,replaceErrorBar:Yue,removeErrorBar:Xue}=x8.actions,roe=x8.reducer,ioe=["children"];function ooe(t,e){if(t==null)return{};var n,r,i=soe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function soe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var aoe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},loe=M.createContext(aoe);function w8(t){var{children:e}=t,n=ooe(t,ioe);return M.createElement(loe.Provider,{value:n},e)}function jE(t,e){var n,r,i=$e(d=>zo(d,t)),o=$e(d=>$o(d,e)),a=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:pr.allowDataOverflow,c=(r=o?.allowDataOverflow)!==null&&r!==void 0?r:gr.allowDataOverflow,f=a||c;return{needClip:f,needClipX:a,needClipY:c}}function E8(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=c8(),{needClipX:o,needClipY:a,needClip:c}=jE(e,n);if(!c||!i)return null;var{x:f,y:d,width:g,height:y}=i;return M.createElement("clipPath",{id:"clipPath-".concat(r)},M.createElement("rect",{x:o?f:f-g/2,y:a?d:d-y/2,width:o?g:g*2,height:a?y:y*2}))}var Fv={exports:{}},Uv={};var qP;function uoe(){if(qP)return Uv;qP=1;var t=Bu();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;return Uv.useSyncExternalStoreWithSelector=function(f,d,g,y,E){var C=i(null);if(C.current===null){var I={hasValue:!1,value:null};C.current=I}else I=C.current;C=a(function(){function N(q){if(!L){if(L=!0,U=q,q=y(q),E!==void 0&&I.hasValue){var H=I.value;if(E(H,q))return F=H}return F=q}if(H=F,n(U,q))return H;var W=y(q);return E!==void 0&&E(H,W)?(U=q,H):(U=q,F=W)}var L=!1,U,F,z=g===void 0?null:g;return[function(){return N(d())},z===null?void 0:function(){return N(z())}]},[d,g,y,E]);var P=r(f,C[0],C[1]);return o(function(){I.hasValue=!0,I.value=P},[P]),c(P),P},Uv}var WP;function coe(){return WP||(WP=1,Fv.exports=uoe()),Fv.exports}coe();function doe(t){t()}function foe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){doe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var KP={notify(){},get:()=>[]};function hoe(t,e){let n,r=KP,i=0,o=!1;function a(P){g();const N=r.subscribe(P);let L=!1;return()=>{L||(L=!0,N(),y())}}function c(){r.notify()}function f(){I.onStateChange&&I.onStateChange()}function d(){return o}function g(){i++,n||(n=t.subscribe(f),r=foe())}function y(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=KP)}function E(){o||(o=!0,g())}function C(){o&&(o=!1,y())}const I={addNestedSub:a,notifyNestedSubs:c,handleChangeWrapper:f,isSubscribed:d,trySubscribe:E,tryUnsubscribe:C,getListeners:()=>r};return I}var poe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",goe=poe(),moe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",voe=moe(),yoe=()=>goe||voe?M.useLayoutEffect:M.useEffect,xoe=yoe();function YP(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function woe(t,e){if(YP(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!YP(t[n[i]],e[n[i]]))return!1;return!0}var Eoe=Symbol.for("react-redux-context"),boe=typeof globalThis<"u"?globalThis:{};function _oe(){if(!M.createContext)return{};const t=boe[Eoe]??=new Map;let e=t.get(M.createContext);return e||(e=M.createContext(null),t.set(M.createContext,e)),e}var Aoe=_oe();function Coe(t){const{children:e,context:n,serverState:r,store:i}=t,o=M.useMemo(()=>{const f=hoe(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),a=M.useMemo(()=>i.getState(),[i]);xoe(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),a!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,a]);const c=n||Aoe;return M.createElement(c.Provider,{value:o},e)}var Soe=Coe,Toe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Ioe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function Eg(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(Toe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!woe(t[r],e[r]))return!1}else if(!Ioe(t[r],e[r]))return!1;return!0}function Cl(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:l8}function Sl(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:l8}var Poe="Invariant failed";function Noe(t,e){throw new Error(Poe)}function vx(){return vx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vx.apply(null,arguments)}function up(t){return M.createElement(sp,vx({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Roe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Je(e))return e;var o=Je(r)||an(r);return o?e(r,i):(o||Noe(),n)}},Ooe=(t,e,n)=>n,koe=(t,e)=>e,Qd=de([ag,koe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Moe=de([Qd],t=>t?.maxBarSize),Doe=(t,e,n,r)=>r,Loe=de([Dt,ag,Cl,Sl,Ooe],(t,e,n,r,i)=>e.filter(o=>t==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),Boe=(t,e,n)=>{var r=Dt(t),i=Cl(t,e),o=Sl(t,e);if(!(i==null||o==null))return r==="horizontal"?ux(t,"yAxis",o,n):ux(t,"xAxis",i,n)},Foe=(t,e)=>{var n=Dt(t),r=Cl(t,e),i=Sl(t,e);if(!(r==null||i==null))return n==="horizontal"?MI(t,"xAxis",r):MI(t,"yAxis",i)},Uoe=de([Loe,LJ,Foe],Bre),joe=(t,e,n)=>{var r,i,o=Qd(t,e);if(o!=null){var a=Cl(t,e),c=Sl(t,e);if(!(a==null||c==null)){var f=Dt(t),d=PM(t),{maxBarSize:g}=o,y=an(g)?d:g,E,C;return f==="horizontal"?(E=pa(t,"xAxis",a,n),C=ha(t,"xAxis",a,n)):(E=pa(t,"yAxis",c,n),C=ha(t,"yAxis",c,n)),(r=(i=M0(E,C,!0))!==null&&i!==void 0?i:y)!==null&&r!==void 0?r:0}}},b8=(t,e,n)=>{var r=Dt(t),i=Cl(t,e),o=Sl(t,e);if(!(i==null||o==null)){var a,c;return r==="horizontal"?(a=pa(t,"xAxis",i,n),c=ha(t,"xAxis",i,n)):(a=pa(t,"yAxis",o,n),c=ha(t,"yAxis",o,n)),M0(a,c)}},Voe=de([Uoe,PM,DJ,NM,joe,b8,Moe],Gre),Goe=(t,e,n)=>{var r=Cl(t,e);if(r!=null)return pa(t,"xAxis",r,n)},zoe=(t,e,n)=>{var r=Sl(t,e);if(r!=null)return pa(t,"yAxis",r,n)},$oe=(t,e,n)=>{var r=Cl(t,e);if(r!=null)return ha(t,"xAxis",r,n)},Hoe=(t,e,n)=>{var r=Sl(t,e);if(r!=null)return ha(t,"yAxis",r,n)},qoe=de([Voe,Qd],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),Woe=de([Boe,Qd],zre),Koe=de([ir,gw,Goe,zoe,$oe,Hoe,qoe,Dt,_J,b8,Woe,Qd,Doe],(t,e,n,r,i,o,a,c,f,d,g,y,E)=>{var{chartData:C,dataStartIndex:I,dataEndIndex:P}=f;if(!(y==null||a==null||e==null||c!=="horizontal"&&c!=="vertical"||n==null||r==null||i==null||o==null||d==null)){var{data:N}=y,L;if(N!=null&&N.length>0?L=N:L=C?.slice(I,P+1),L!=null)return _se({layout:c,barSettings:y,pos:a,parentViewBox:e,bandSize:d,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:g,displayedData:L,offset:t,cells:E,dataStartIndex:I})}}),Yoe=["index"];function yx(){return yx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yx.apply(null,arguments)}function Xoe(t,e){if(t==null)return{};var n,r,i=Joe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Joe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _8=M.createContext(void 0),Zoe=t=>{var e=M.useContext(_8);if(e!=null)return e.stackId;if(t!=null)return vq(t)},Qoe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),ese=t=>{var e=M.useContext(_8);if(e!=null){var{stackId:n}=e;return"url(#".concat(Qoe(n,t),")")}},tse=t=>{var{index:e}=t,n=Xoe(t,Yoe),r=ese(e);return M.createElement(jn,yx({className:"recharts-bar-stack-layer",clipPath:r},n))},nse=["onMouseEnter","onMouseLeave","onClick"],rse=["value","background","tooltipPosition"],ise=["id"],ose=["onMouseEnter","onClick","onMouseLeave"];function bs(){return bs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bs.apply(null,arguments)}function XP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XP(Object(n),!0).forEach(function(r){sse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sse(t,e,n){return(e=ase(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ase(t){var e=lse(t,"string");return typeof e=="symbol"?e:e+""}function lse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cp(t,e){if(t==null)return{};var n,r,i=use(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function use(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var cse=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:r,value:$u(n,e),payload:t}]},dse=M.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:o,hide:a,unit:c,tooltipType:f,id:d}=t,g={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:$u(o,e),hide:a,type:f,color:i,unit:c,graphicalItemId:d}};return M.createElement(LE,{tooltipEntrySettings:g})});function fse(t){var e=$e(ga),{data:n,dataKey:r,background:i,allOtherBarProps:o}=t,{onMouseEnter:a,onMouseLeave:c,onClick:f}=o,d=cp(o,nse),g=mg(a,r,o.id),y=vg(c),E=yg(f,r,o.id);if(!i||n==null)return null;var C=Pu(i);return M.createElement(hi,{zIndex:$re(i,Kn.barBackground)},n.map((I,P)=>{var{value:N,background:L,tooltipPosition:U}=I,F=cp(I,rse);if(!L)return null;var z=g(I,P),q=y(I,P),H=E(I,P),W=Kr(Kr(Kr(Kr(Kr({option:i,isActive:String(P)===e},F),{},{fill:"#eee"},L),C),zu(d,I,P)),{},{onMouseEnter:z,onMouseLeave:q,onClick:H,dataKey:r,index:P,className:"recharts-bar-background-rectangle"});return M.createElement(up,bs({key:"background-bar-".concat(P)},W))}))}function hse(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(o=>{var a={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return Kr(Kr({},a),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:a,fill:o.fill})});return M.createElement(J4,{value:e?i:void 0},n)}function pse(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:o,dataKey:a}=t,c=$e(ga),f=$e(SE),d=n&&String(o)===c&&(f==null||a===f),g=d?n:e;return d?M.createElement(hi,{zIndex:Kn.activeBar},M.createElement(up,bs({},r,{name:String(r.name)},i,{isActive:d,option:g,index:o,dataKey:a}))):M.createElement(up,bs({},r,{name:String(r.name)},i,{isActive:d,option:g,index:o,dataKey:a}))}function gse(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:o}=t;return M.createElement(up,bs({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:o}))}function mse(t){var e,{data:n,props:r}=t,i=(e=Ri(r))!==null&&e!==void 0?e:{},{id:o}=i,a=cp(i,ise),{shape:c,dataKey:f,activeBar:d}=r,{onMouseEnter:g,onClick:y,onMouseLeave:E}=r,C=cp(r,ose),I=mg(g,f,o),P=vg(E),N=yg(y,f,o);return n?M.createElement(M.Fragment,null,n.map((L,U)=>M.createElement(tse,bs({index:U,key:"rectangle-".concat(L?.x,"-").concat(L?.y,"-").concat(L?.value,"-").concat(U),className:"recharts-bar-rectangle"},zu(C,L,U),{onMouseEnter:I(L,U),onMouseLeave:P(L,U),onClick:N(L,U)}),d?M.createElement(pse,{shape:c,activeBar:d,baseProps:a,entry:L,index:U,dataKey:f}):M.createElement(gse,{shape:c,baseProps:a,entry:L,index:U,dataKey:f})))):null}function vse(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:o,animationBegin:a,animationDuration:c,animationEasing:f,onAnimationEnd:d,onAnimationStart:g}=e,y=n.current,E=Ud(e,"recharts-bar-"),[C,I]=M.useState(!1),P=!C,N=M.useCallback(()=>{typeof d=="function"&&d(),I(!1)},[d]),L=M.useCallback(()=>{typeof g=="function"&&g(),I(!0)},[g]);return M.createElement(hse,{showLabels:P,rects:r},M.createElement(Fd,{animationId:E,begin:a,duration:c,isActive:o,easing:f,onAnimationEnd:N,onAnimationStart:L,key:E},U=>{var F=U===1?r:r?.map((z,q)=>{var H=y&&y[q];if(H)return Kr(Kr({},z),{},{x:_n(H.x,z.x,U),y:_n(H.y,z.y,U),width:_n(H.width,z.width,U),height:_n(H.height,z.height,U)});if(i==="horizontal"){var W=_n(0,z.height,U),Z=_n(z.stackedBarStart,z.y,U);return Kr(Kr({},z),{},{y:Z,height:W})}var X=_n(0,z.width,U),ye=_n(z.stackedBarStart,z.x,U);return Kr(Kr({},z),{},{width:X,x:ye})});return U>0&&(n.current=F??null),F==null?null:M.createElement(jn,null,M.createElement(mse,{props:e,data:F}))}),M.createElement(kE,{label:e.label}),e.children)}function yse(t){var e=M.useRef(null);return M.createElement(vse,{previousRectanglesRef:e,props:t})}var A8=0,xse=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Gt(t,e)}};class wse extends M.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:a,needClip:c,background:f,id:d}=this.props;if(e||n==null)return null;var g=Ft("recharts-bar",i),y=d;return M.createElement(jn,{className:g,id:d},c&&M.createElement("defs",null,M.createElement(E8,{clipPathId:y,xAxisId:o,yAxisId:a})),M.createElement(jn,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(y,")"):void 0},M.createElement(fse,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),M.createElement(yse,this.props)))}}var Ese={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:A8,xAxisId:0,yAxisId:0,zIndex:Kn.bar};function bse(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:a,animationBegin:c,animationDuration:f,animationEasing:d,isAnimationActive:g}=t,{needClip:y}=jE(e,n),E=Ld(),C=Nr(),I=gg(t.children,vl),P=$e(U=>Koe(U,t.id,C,I));if(E!=="vertical"&&E!=="horizontal")return null;var N,L=P?.[0];return L==null||L.height==null||L.width==null?N=0:N=E==="vertical"?L.height/2:L.width/2,M.createElement(w8,{xAxisId:e,yAxisId:n,data:P,dataPointFormatter:xse,errorBarOffset:N},M.createElement(wse,bs({},t,{layout:E,needClip:y,data:P,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:a,animationBegin:c,animationDuration:f,animationEasing:d,isAnimationActive:g})))}function _se(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:a,yAxis:c,xAxisTicks:f,yAxisTicks:d,stackedData:g,displayedData:y,offset:E,cells:C,parentViewBox:I,dataStartIndex:P}=t,N=e==="horizontal"?c:a,L=g?N.scale.domain():null,U=yq({numericAxis:N}),F=N.scale(U);return y.map((z,q)=>{var H,W,Z,X,ye,se;if(g){var ae=g[q+P];if(ae==null)return null;H=fq(ae,L)}else H=Gt(z,n),Array.isArray(H)||(H=[U,H]);var be=Roe(r,A8)(H[1],q);if(e==="horizontal"){var fe,[ne,we]=[c.scale(H[0]),c.scale(H[1])];W=FS({axis:a,ticks:f,bandSize:o,offset:i.offset,entry:z,index:q}),Z=(fe=we??ne)!==null&&fe!==void 0?fe:void 0,X=i.size;var me=ne-we;if(ye=ki(me)?0:me,se={x:W,y:E.top,width:X,height:E.height},Math.abs(be)>0&&Math.abs(ye)<Math.abs(be)){var xe=vr(ye||be)*(Math.abs(be)-Math.abs(ye));Z-=xe,ye+=xe}}else{var[Ae,Ce]=[a.scale(H[0]),a.scale(H[1])];if(W=Ae,Z=FS({axis:c,ticks:d,bandSize:o,offset:i.offset,entry:z,index:q}),X=Ce-Ae,ye=i.size,se={x:E.left,y:Z,width:E.width,height:ye},Math.abs(be)>0&&Math.abs(X)<Math.abs(be)){var te=vr(X||be)*(Math.abs(be)-Math.abs(X));X+=te}}if(W==null||Z==null||X==null||ye==null)return null;var he=Kr(Kr({},z),{},{stackedBarStart:F,x:W,y:Z,width:X,height:ye,value:g?H:H[1],payload:z,background:se,tooltipPosition:{x:W+X/2,y:Z+ye/2},parentViewBox:I},C&&C[q]&&C[q].props);return he}).filter(Boolean)}function Ase(t){var e=Vn(t,Ese),n=Zoe(e.stackId),r=Nr();return M.createElement(BE,{id:e.id,type:"bar"},i=>M.createElement(M.Fragment,null,M.createElement(i8,{legendPayload:cse(e)}),M.createElement(dse,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),M.createElement(s8,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),M.createElement(hi,{zIndex:e.zIndex},M.createElement(bse,bs({},e,{id:i})))))}var C8=M.memo(Ase,Eg);C8.displayName="Bar";var Cse=["option","isActive"];function ud(){return ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ud.apply(null,arguments)}function Sse(t,e){if(t==null)return{};var n,r,i=Tse(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Tse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ise(t){var{option:e,isActive:n}=t,r=Sse(t,Cse);return typeof e=="string"?M.createElement(sp,ud({option:M.createElement(Ip,ud({type:e},r)),isActive:n,shapeType:"symbols"},r)):M.createElement(sp,ud({option:e,isActive:n,shapeType:"symbols"},r))}var Pse=(t,e,n,r,i,o,a)=>pa(t,"xAxis",e,a),Nse=(t,e,n,r,i,o,a)=>ha(t,"xAxis",e,a),Rse=(t,e,n,r,i,o,a)=>pa(t,"yAxis",n,a),Ose=(t,e,n,r,i,o,a)=>ha(t,"yAxis",n,a),kse=(t,e,n,r)=>FZ(t,"zAxis",r,!1),Mse=(t,e,n,r,i)=>i,Dse=(t,e,n,r,i,o)=>o,Lse=(t,e,n,r,i,o,a)=>$w(t,void 0,void 0,a),Bse=de([ag,Mse],(t,e)=>t.filter(n=>n.type==="scatter").find(n=>n.id===e)),Fse=de([Lse,Pse,Nse,Rse,Ose,kse,Bse,Dse],(t,e,n,r,i,o,a,c)=>{var{chartData:f,dataStartIndex:d,dataEndIndex:g}=t;if(a!=null){var y;if(a?.data!=null&&a.data.length>0?y=a.data:y=f?.slice(d,g+1),!(y==null||e==null||r==null||n==null||i==null||n?.length===0||i?.length===0))return Zse({displayedData:y,xAxis:e,yAxis:r,zAxis:o,scatterSettings:a,xAxisTicks:n,yAxisTicks:i,cells:c})}}),Use=["id"],jse=["onMouseEnter","onClick","onMouseLeave"],Vse=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function xx(t,e){if(t==null)return{};var n,r,i=Gse(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Gse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xl.apply(null,arguments)}function JP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function di(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JP(Object(n),!0).forEach(function(r){zse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zse(t,e,n){return(e=$se(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $se(t){var e=Hse(t,"string");return typeof e=="symbol"?e:e+""}function Hse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qse=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:r,value:$u(n,e),payload:t}]},Wse=M.memo(t=>{var{dataKey:e,points:n,stroke:r,strokeWidth:i,fill:o,name:a,hide:c,tooltipType:f,id:d}=t,g={dataDefinedOnItem:n?.map(y=>y.tooltipPayload),positions:n?.map(y=>y.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:o,nameKey:void 0,dataKey:e,name:$u(a,e),hide:c,type:f,color:o,unit:"",graphicalItemId:d}};return M.createElement(LE,{tooltipEntrySettings:g})});function Kse(t){var{points:e,props:n}=t,{line:r,lineType:i,lineJointType:o}=n;if(!r)return null;var a=Ri(n),c=Pu(r),f,d;if(i==="joint")f=e.map(N=>{var L,U;return{x:(L=N.cx)!==null&&L!==void 0?L:null,y:(U=N.cy)!==null&&U!==void 0?U:null}});else if(i==="fitting"){var{xmin:g,xmax:y,a:E,b:C}=jz(e),I=N=>E*N+C;f=[{x:g,y:I(g)},{x:y,y:I(y)}]}var P=di(di(di({},a),{},{fill:"none",stroke:a&&a.fill},c),{},{points:f});return M.isValidElement(r)?d=M.cloneElement(r,P):typeof r=="function"?d=r(P):d=M.createElement(Wp,xl({},P,{type:o})),M.createElement(jn,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}function Yse(t){var{showLabels:e,points:n,children:r}=t,i=Hu(),o=M.useMemo(()=>n?.map(a=>{var c,f,d={x:(c=a.x)!==null&&c!==void 0?c:0,y:(f=a.y)!==null&&f!==void 0?f:0,width:a.width,height:a.height,lowerWidth:a.width,upperWidth:a.width};return di(di({},d),{},{value:void 0,payload:a.payload,viewBox:d,parentViewBox:i,fill:void 0})}),[i,n]);return M.createElement(J4,{value:e?o:void 0},r)}function Xse(t){var{points:e,allOtherScatterProps:n}=t,{shape:r,activeShape:i,dataKey:o}=n,{id:a}=n,c=xx(n,Use),f=$e(ga),{onMouseEnter:d,onClick:g,onMouseLeave:y}=n,E=xx(n,jse),C=mg(d,o,a),I=vg(y),P=yg(g,o,a);if(!e$(e))return null;var N=Ri(c);return M.createElement(M.Fragment,null,M.createElement(Kse,{points:e,props:c}),e.map((L,U)=>{var F=i!=null&&i!==!1,z=F&&f===String(U),q=F&&z?i:r,H=di(di(di({},N),L),{},{[hw]:U,[pw]:String(a)});return M.createElement(hi,{key:"symbol-".concat(L?.cx,"-").concat(L?.cy,"-").concat(L?.size,"-").concat(U),zIndex:z?Kn.activeDot:void 0},M.createElement(jn,xl({className:"recharts-scatter-symbol"},zu(E,L,U),{onMouseEnter:C(L,U),onMouseLeave:I(L,U),onClick:P(L,U)}),M.createElement(Ise,xl({option:q,isActive:z},H))))}))}function Jse(t){var{previousPointsRef:e,props:n}=t,{points:r,isAnimationActive:i,animationBegin:o,animationDuration:a,animationEasing:c}=n,f=e.current,d=Ud(n,"recharts-scatter-"),[g,y]=M.useState(!1),E=M.useCallback(()=>{y(!1)},[]),C=M.useCallback(()=>{y(!0)},[]),I=!g;return M.createElement(Yse,{showLabels:I,points:r},n.children,M.createElement(Fd,{animationId:d,begin:o,duration:a,isActive:i,easing:c,onAnimationEnd:E,onAnimationStart:C,key:d},P=>{var N=P===1?r:r?.map((L,U)=>{var F=f&&f[U];return F?di(di({},L),{},{cx:L.cx==null?void 0:_n(F.cx,L.cx,P),cy:L.cy==null?void 0:_n(F.cy,L.cy,P),size:_n(F.size,L.size,P)}):di(di({},L),{},{size:_n(0,L.size,P)})});return P>0&&(e.current=N),M.createElement(jn,null,M.createElement(Xse,{points:N,allOtherScatterProps:n,showLabels:I}))}),M.createElement(kE,{label:n.label}))}function Zse(t){var{displayedData:e,xAxis:n,yAxis:r,zAxis:i,scatterSettings:o,xAxisTicks:a,yAxisTicks:c,cells:f}=t,d=an(n.dataKey)?o.dataKey:n.dataKey,g=an(r.dataKey)?o.dataKey:r.dataKey,y=i&&i.dataKey,E=i?i.range:VM.range,C=E&&E[0],I=n.scale.bandwidth?n.scale.bandwidth():0,P=r.scale.bandwidth?r.scale.bandwidth():0;return e.map((N,L)=>{var U=Gt(N,d),F=Gt(N,g),z=!an(y)&&Gt(N,y)||"-",q=[{name:an(n.dataKey)?o.name:n.name||String(n.dataKey),unit:n.unit||"",value:U,payload:N,dataKey:d,type:o.tooltipType},{name:an(r.dataKey)?o.name:r.name||String(r.dataKey),unit:r.unit||"",value:F,payload:N,dataKey:g,type:o.tooltipType}];z!=="-"&&q.push({name:i.name||i.dataKey,unit:i.unit||"",value:z,payload:N,dataKey:y,type:o.tooltipType});var H=BS({axis:n,ticks:a,bandSize:I,entry:N,index:L,dataKey:d}),W=BS({axis:r,ticks:c,bandSize:P,entry:N,index:L,dataKey:g}),Z=z!=="-"?i.scale(z):C,X=Math.sqrt(Math.max(Z,0)/Math.PI);return di(di({},N),{},{cx:H,cy:W,x:H==null?void 0:H-X,y:W==null?void 0:W-X,width:2*X,height:2*X,size:Z,node:{x:U,y:F,z},tooltipPayload:q,tooltipPosition:{x:H,y:W},payload:N},f&&f[L]&&f[L].props)})}var Qse=(t,e,n)=>({x:t.cx,y:t.cy,value:Number(n==="x"?t.node.x:t.node.y),errorVal:Gt(t,e)});function eae(t){var{hide:e,points:n,className:r,needClip:i,xAxisId:o,yAxisId:a,id:c}=t,f=M.useRef(null);if(e)return null;var d=Ft("recharts-scatter",r),g=c;return M.createElement(hi,{zIndex:t.zIndex},M.createElement(jn,{className:d,clipPath:i?"url(#clipPath-".concat(g,")"):void 0,id:c},i&&M.createElement("defs",null,M.createElement(E8,{clipPathId:g,xAxisId:o,yAxisId:a})),M.createElement(w8,{xAxisId:o,yAxisId:a,data:n,dataPointFormatter:Qse,errorBarOffset:0},M.createElement(jn,{key:"recharts-scatter-symbols"},M.createElement(Jse,{props:t,previousPointsRef:f})))))}var S8={xAxisId:0,yAxisId:0,zAxisId:0,label:!1,line:!1,legendType:"circle",lineType:"joint",lineJointType:"linear",shape:"circle",hide:!1,isAnimationActive:"auto",animationBegin:0,animationDuration:400,animationEasing:"linear",zIndex:Kn.scatter};function tae(t){var e=Vn(t,S8),{animationBegin:n,animationDuration:r,animationEasing:i,hide:o,isAnimationActive:a,legendType:c,lineJointType:f,lineType:d,shape:g,xAxisId:y,yAxisId:E,zAxisId:C}=e,I=xx(e,Vse),{needClip:P}=jE(y,E),N=M.useMemo(()=>gg(t.children,vl),[t.children]),L=Nr(),U=$e(F=>Fse(F,y,E,C,t.id,N,L));return P==null||U==null?null:M.createElement(M.Fragment,null,M.createElement(Wse,{dataKey:t.dataKey,points:U,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:t.id}),M.createElement(eae,xl({},I,{xAxisId:y,yAxisId:E,zAxisId:C,lineType:d,lineJointType:f,legendType:c,shape:g,hide:o,isAnimationActive:a,animationBegin:n,animationDuration:r,animationEasing:i,points:U,needClip:P})))}function nae(t){var e=Vn(t,S8),n=Nr();return M.createElement(BE,{id:e.id,type:"scatter"},r=>M.createElement(M.Fragment,null,M.createElement(i8,{legendPayload:qse(e)}),M.createElement(s8,{type:"scatter",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:e.zAxisId,dataKey:e.dataKey,hide:e.hide,name:e.name,tooltipType:e.tooltipType,isPanorama:n}),M.createElement(tae,xl({},e,{id:r}))))}var T8=M.memo(nae,Eg);T8.displayName="Scatter";var rae=["domain","range"],iae=["domain","range"];function ZP(t,e){if(t==null)return{};var n,r,i=oae(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function QP(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function I8(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=ZP(t,rae),{domain:o,range:a}=e,c=ZP(e,iae);return!QP(n,o)||!QP(r,a)?!1:Eg(i,c)}var sae=["dangerouslySetInnerHTML","ticks","scale"],aae=["id","scale"];function wx(){return wx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wx.apply(null,arguments)}function eN(t,e){if(t==null)return{};var n,r,i=lae(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function uae(t){var e=Zt(),n=M.useRef(null);return M.useLayoutEffect(()=>{n.current===null?e(Tre(t)):n.current!==t&&e(Ire({prev:n.current,next:t})),n.current=t},[t,e]),M.useLayoutEffect(()=>()=>{n.current&&(e(Pre(n.current)),n.current=null)},[e]),null}var cae=t=>{var{xAxisId:e,className:n}=t,r=$e(gw),i=Nr(),o="xAxis",a=$e(L=>u4(L,o,e,i)),c=$e(L=>o4(L,e)),f=$e(L=>OZ(L,e)),d=$e(L=>UM(L,e));if(c==null||f==null||d==null)return null;var{dangerouslySetInnerHTML:g,ticks:y,scale:E}=t,C=eN(t,sae),{id:I,scale:P}=d,N=eN(d,aae);return M.createElement(UE,wx({},C,N,{x:f.x,y:f.y,width:c.width,height:c.height,className:Ft("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:a,axisType:o}))},dae={allowDataOverflow:pr.allowDataOverflow,allowDecimals:pr.allowDecimals,allowDuplicatedCategory:pr.allowDuplicatedCategory,angle:pr.angle,axisLine:ps.axisLine,height:pr.height,hide:!1,includeHidden:pr.includeHidden,interval:pr.interval,minTickGap:pr.minTickGap,mirror:pr.mirror,orientation:pr.orientation,padding:pr.padding,reversed:pr.reversed,scale:pr.scale,tick:pr.tick,tickCount:pr.tickCount,tickLine:ps.tickLine,tickSize:ps.tickSize,type:pr.type,xAxisId:0},fae=t=>{var e=Vn(t,dae);return M.createElement(M.Fragment,null,M.createElement(uae,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),M.createElement(cae,e))},Ex=M.memo(fae,I8);Ex.displayName="XAxis";var hae=["dangerouslySetInnerHTML","ticks","scale"],pae=["id","scale"];function bx(){return bx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bx.apply(null,arguments)}function tN(t,e){if(t==null)return{};var n,r,i=gae(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function gae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function mae(t){var e=Zt(),n=M.useRef(null);return M.useLayoutEffect(()=>{n.current===null?e(Nre(t)):n.current!==t&&e(Rre({prev:n.current,next:t})),n.current=t},[t,e]),M.useLayoutEffect(()=>()=>{n.current&&(e(Ore(n.current)),n.current=null)},[e]),null}var vae=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,o=M.useRef(null),a=M.useRef(null),c=$e(gw),f=Nr(),d=Zt(),g="yAxis",y=$e(H=>s4(H,e)),E=$e(H=>MZ(H,e)),C=$e(H=>u4(H,g,e,f)),I=$e(H=>jM(H,e));if(M.useLayoutEffect(()=>{if(!(r!=="auto"||!y||OE(i)||M.isValidElement(i)||I==null)){var H=o.current;if(H){var W=H.getCalculatedWidth();Math.round(y.width)!==Math.round(W)&&d(kre({id:e,width:W}))}}},[C,y,d,i,e,r,I]),y==null||E==null||I==null)return null;var{dangerouslySetInnerHTML:P,ticks:N,scale:L}=t,U=tN(t,hae),{id:F,scale:z}=I,q=tN(I,pae);return M.createElement(UE,bx({},U,q,{ref:o,labelRef:a,x:E.x,y:E.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:y.width,height:y.height,className:Ft("recharts-".concat(g," ").concat(g),n),viewBox:c,ticks:C,axisType:g}))},yae={allowDataOverflow:gr.allowDataOverflow,allowDecimals:gr.allowDecimals,allowDuplicatedCategory:gr.allowDuplicatedCategory,angle:gr.angle,axisLine:ps.axisLine,hide:!1,includeHidden:gr.includeHidden,interval:gr.interval,minTickGap:gr.minTickGap,mirror:gr.mirror,orientation:gr.orientation,padding:gr.padding,reversed:gr.reversed,scale:gr.scale,tick:gr.tick,tickCount:gr.tickCount,tickLine:ps.tickLine,tickSize:ps.tickSize,type:gr.type,width:gr.width,yAxisId:0},xae=t=>{var e=Vn(t,yae);return M.createElement(M.Fragment,null,M.createElement(mae,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),M.createElement(vae,e))},_x=M.memo(xae,I8);_x.displayName="YAxis";var wae=(t,e)=>e,VE=de([wae,Dt,BM,sr,C4,Ns,XQ,ir],ree),GE=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},P8=to("mouseClick"),N8=Md();N8.startListening({actionCreator:P8,effect:(t,e)=>{var n=t.payload,r=VE(e.getState(),GE(n));r?.activeIndex!=null&&e.dispatch(YZ({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Ax=to("mouseMove"),R8=Md(),jh=null;R8.startListening({actionCreator:Ax,effect:(t,e)=>{var n=t.payload;jh!==null&&cancelAnimationFrame(jh);var r=GE(n);jh=requestAnimationFrame(()=>{var i=e.getState(),o=wE(i,i.tooltip.settings.shared);if(o==="axis"){var a=VE(i,r);a?.activeIndex!=null?e.dispatch(v4({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(m4())}jh=null})}});function Eae(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var nN={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},O8=fi({name:"rootProps",initialState:nN,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:nN.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),bae=O8.reducer,{updateOptions:_ae}=O8.actions,k8=fi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Aae}=k8.actions,Cae=k8.reducer,M8=to("keyDown"),D8=to("focus"),zE=Md();zE.startListening({actionCreator:M8,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=t.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var a=EE(i,ec(n),Kd(n),Jd(n)),c=a==null?-1:Number(a);if(!(!Number.isFinite(c)||c<0)){var f=Ns(n);if(o==="Enter"){var d=np(n,"axis","hover",String(i.index));e.dispatch(dx({active:!i.active,activeIndex:i.index,activeCoordinate:d}));return}var g=UZ(n),y=g==="left-to-right"?1:-1,E=o==="ArrowRight"?1:-1,C=c+E*y;if(!(f==null||C>=f.length||C<0)){var I=np(n,"axis","hover",String(C));e.dispatch(dx({active:!0,activeIndex:C.toString(),activeCoordinate:I}))}}}}}});zE.startListening({actionCreator:D8,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",a=np(n,"axis","hover",String(o));e.dispatch(dx({active:!0,activeIndex:o,activeCoordinate:a}))}}}});var Yi=to("externalEvent"),L8=Md(),jv=new Map;L8.startListening({actionCreator:Yi,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,o=jv.get(i);o!==void 0&&cancelAnimationFrame(o);var a=requestAnimationFrame(()=>{try{var c=e.getState(),f={activeCoordinate:DQ(c),activeDataKey:SE(c),activeIndex:ga(c),activeLabel:I4(c),activeTooltipIndex:ga(c),isTooltipActive:LQ(c)};n(f,r)}finally{jv.delete(i)}});jv.set(i,a)}}});var Sae=de([Zu],t=>t.tooltipItemPayloads),Tae=de([Sae,Xd,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(c=>c.settings.graphicalItemId===r);if(i!=null){var{positions:o}=i;if(o!=null){var a=e(o,n);return a}}}),B8=to("touchMove"),F8=Md();F8.startListening({actionCreator:B8,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=wE(r,r.tooltip.settings.shared);if(i==="axis"){var o=n.touches[0];if(o==null)return;var a=VE(r,GE({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));a?.activeIndex!=null&&e.dispatch(v4({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var c,f=n.touches[0];if(document.elementFromPoint==null||f==null)return;var d=document.elementFromPoint(f.clientX,f.clientY);if(!d||!d.getAttribute)return;var g=d.getAttribute(hw),y=(c=d.getAttribute(pw))!==null&&c!==void 0?c:void 0,E=Qu(r).find(P=>P.id===y);if(g==null||E==null||y==null)return;var{dataKey:C}=E,I=Tae(r,g,y);e.dispatch(g4({activeDataKey:C,activeIndex:g,activeCoordinate:I,activeGraphicalItemId:y}))}}}});var Iae=N3({brush:Hre,cartesianAxis:Mre,chartData:Mee,errorBars:roe,graphicalItems:Yne,layout:sq,legend:pW,options:Pee,polarAxis:une,polarOptions:Cae,referenceElements:nie,rootProps:bae,tooltip:XZ,zIndex:vee}),Pae=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return RH({reducer:Iae,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([N8.middleware,R8.middleware,zE.middleware,L8.middleware,F8.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(H3({type:"raf"}))},devTools:{serialize:{replacer:Eae},name:"recharts-".concat(n)}})};function U8(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Nr(),o=M.useRef(null);if(i)return n;o.current==null&&(o.current=Pae(e,r));var a=sw;return M.createElement(Soe,{context:a,store:o.current},n)}function Nae(t){var{layout:e,margin:n}=t,r=Zt(),i=Nr();return M.useEffect(()=>{i||(r(rq(e)),r(nq(n)))},[r,i,e,n]),null}var j8=M.memo(Nae,Eg);function V8(t){var e=Zt();return M.useEffect(()=>{e(_ae(t))},[e,t]),null}function rN(t){var{zIndex:e,isPanorama:n}=t,r=M.useRef(null),i=Zt();return M.useLayoutEffect(()=>(r.current&&i(gee({zIndex:e,element:r.current,isPanorama:n})),()=>{i(mee({zIndex:e,isPanorama:n}))}),[i,e,n]),M.createElement("g",{tabIndex:-1,ref:r})}function iN(t){var{children:e,isPanorama:n}=t,r=$e(oee);if(!r||r.length===0)return e;var i=r.filter(a=>a<0),o=r.filter(a=>a>0);return M.createElement(M.Fragment,null,i.map(a=>M.createElement(rN,{key:a,zIndex:a,isPanorama:n})),e,o.map(a=>M.createElement(rN,{key:a,zIndex:a,isPanorama:n})))}var Rae=["children"];function Oae(t,e){if(t==null)return{};var n,r,i=kae(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function dp(){return dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dp.apply(null,arguments)}var Mae={width:"100%",height:"100%",display:"block"},Dae=M.forwardRef((t,e)=>{var n=vw(),r=yw(),i=Ak();if(!Vo(n)||!Vo(r))return null;var{children:o,otherAttributes:a,title:c,desc:f}=t,d,g;return a!=null&&(typeof a.tabIndex=="number"?d=a.tabIndex:d=i?0:void 0,typeof a.role=="string"?g=a.role:g=i?"application":void 0),M.createElement(Jx,dp({},a,{title:c,desc:f,role:g,tabIndex:d,width:n,height:r,style:Mae,ref:e}),o)}),Lae=t=>{var{children:e}=t,n=$e(Gp);if(!n)return null;var{width:r,height:i,y:o,x:a}=n;return M.createElement(Jx,{width:r,height:i,x:a,y:o},e)},oN=M.forwardRef((t,e)=>{var{children:n}=t,r=Oae(t,Rae),i=Nr();return i?M.createElement(Lae,null,M.createElement(iN,{isPanorama:!0},n)):M.createElement(Dae,dp({ref:e},r),M.createElement(iN,{isPanorama:!1},n))});function Bae(){var t=Zt(),[e,n]=M.useState(null),r=$e(Aq);return M.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),o=i.width/e.offsetWidth;Xt(o)&&o!==r&&t(oq(o))}},[e,t,r]),n}function sN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sN(Object(n),!0).forEach(function(r){Uae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uae(t,e,n){return(e=jae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jae(t){var e=Vae(t,"string");return typeof e=="symbol"?e:e+""}function Vae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wl(){return wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wl.apply(null,arguments)}var Gae=()=>(zee(),null);function fp(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var zae=M.forwardRef((t,e)=>{var n,r,i=M.useRef(null),[o,a]=M.useState({containerWidth:fp((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:fp((r=t.style)===null||r===void 0?void 0:r.height)}),c=M.useCallback((d,g)=>{a(y=>{var E=Math.round(d),C=Math.round(g);return y.containerWidth===E&&y.containerHeight===C?y:{containerWidth:E,containerHeight:C}})},[]),f=M.useCallback(d=>{if(typeof e=="function"&&e(d),d!=null&&typeof ResizeObserver<"u"){var{width:g,height:y}=d.getBoundingClientRect();c(g,y);var E=I=>{var{width:P,height:N}=I[0].contentRect;c(P,N)},C=new ResizeObserver(E);C.observe(d),i.current=C}},[e,c]);return M.useEffect(()=>()=>{var d=i.current;d?.disconnect()},[c]),M.createElement(M.Fragment,null,M.createElement(zp,{width:o.containerWidth,height:o.containerHeight}),M.createElement("div",wl({ref:f},t)))}),$ae=M.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,o]=M.useState({containerWidth:fp(n),containerHeight:fp(r)}),a=M.useCallback((f,d)=>{o(g=>{var y=Math.round(f),E=Math.round(d);return g.containerWidth===y&&g.containerHeight===E?g:{containerWidth:y,containerHeight:E}})},[]),c=M.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null){var{width:d,height:g}=f.getBoundingClientRect();a(d,g)}},[e,a]);return M.createElement(M.Fragment,null,M.createElement(zp,{width:i.containerWidth,height:i.containerHeight}),M.createElement("div",wl({ref:c},t)))}),Hae=M.forwardRef((t,e)=>{var{width:n,height:r}=t;return M.createElement(M.Fragment,null,M.createElement(zp,{width:n,height:r}),M.createElement("div",wl({ref:e},t)))}),qae=M.forwardRef((t,e)=>{var{width:n,height:r}=t;return ms(n)||ms(r)?M.createElement($ae,wl({},t,{ref:e})):M.createElement(Hae,wl({},t,{ref:e}))});function Wae(t){return t===!0?zae:qae}var Kae=M.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:a,onDoubleClick:c,onMouseDown:f,onMouseEnter:d,onMouseLeave:g,onMouseMove:y,onMouseUp:E,onTouchEnd:C,onTouchMove:I,onTouchStart:P,style:N,width:L,responsive:U,dispatchTouchEvents:F=!0}=t,z=M.useRef(null),q=Zt(),[H,W]=M.useState(null),[Z,X]=M.useState(null),ye=Bae(),se=mw(),ae=se?.width>0?se.width:L,be=se?.height>0?se.height:i,fe=M.useCallback(Ee=>{ye(Ee),typeof e=="function"&&e(Ee),W(Ee),X(Ee),Ee!=null&&(z.current=Ee)},[ye,e,W,X]),ne=M.useCallback(Ee=>{q(P8(Ee)),q(Yi({handler:o,reactEvent:Ee}))},[q,o]),we=M.useCallback(Ee=>{q(Ax(Ee)),q(Yi({handler:d,reactEvent:Ee}))},[q,d]),me=M.useCallback(Ee=>{q(m4()),q(Yi({handler:g,reactEvent:Ee}))},[q,g]),xe=M.useCallback(Ee=>{q(Ax(Ee)),q(Yi({handler:y,reactEvent:Ee}))},[q,y]),Ae=M.useCallback(()=>{q(D8())},[q]),Ce=M.useCallback(Ee=>{q(M8(Ee.key))},[q]),te=M.useCallback(Ee=>{q(Yi({handler:a,reactEvent:Ee}))},[q,a]),he=M.useCallback(Ee=>{q(Yi({handler:c,reactEvent:Ee}))},[q,c]),Fe=M.useCallback(Ee=>{q(Yi({handler:f,reactEvent:Ee}))},[q,f]),Le=M.useCallback(Ee=>{q(Yi({handler:E,reactEvent:Ee}))},[q,E]),lt=M.useCallback(Ee=>{q(Yi({handler:P,reactEvent:Ee}))},[q,P]),Ne=M.useCallback(Ee=>{F&&q(B8(Ee)),q(Yi({handler:I,reactEvent:Ee}))},[q,F,I]),ct=M.useCallback(Ee=>{q(Yi({handler:C,reactEvent:Ee}))},[q,C]),rt=Wae(U);return M.createElement(D4.Provider,{value:H},M.createElement(qO.Provider,{value:Z},M.createElement(rt,{width:ae??N?.width,height:be??N?.height,className:Ft("recharts-wrapper",r),style:Fae({position:"relative",cursor:"default",width:ae,height:be},N),onClick:ne,onContextMenu:te,onDoubleClick:he,onFocus:Ae,onKeyDown:Ce,onMouseDown:Fe,onMouseEnter:we,onMouseLeave:me,onMouseMove:xe,onMouseUp:Le,onTouchEnd:ct,onTouchMove:Ne,onTouchStart:lt,ref:fe},M.createElement(Gae,null),n)))}),Yae=["width","height","responsive","children","className","style","compact","title","desc"];function Xae(t,e){if(t==null)return{};var n,r,i=Jae(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Jae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var G8=M.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:o,className:a,style:c,compact:f,title:d,desc:g}=t,y=Xae(t,Yae),E=Ri(y);return f?M.createElement(M.Fragment,null,M.createElement(zp,{width:n,height:r}),M.createElement(oN,{otherAttributes:E,title:d,desc:g},o)):M.createElement(Kae,{className:a,style:c,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},M.createElement(oN,{otherAttributes:E,title:d,desc:g,ref:e},M.createElement(rie,null,o)))});function Cx(){return Cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cx.apply(null,arguments)}var Zae={top:5,right:5,bottom:5,left:5},Qae={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Zae,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},z8=M.forwardRef(function(e,n){var r,i=Vn(e.categoricalChartProps,Qae),{chartName:o,defaultTooltipEventType:a,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,categoricalChartProps:d}=e,g={chartName:o,defaultTooltipEventType:a,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,eventEmitter:void 0};return M.createElement(U8,{preloadedState:{options:g},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:o},M.createElement(d8,{chartData:d.data}),M.createElement(j8,{layout:i.layout,margin:i.margin}),M.createElement(V8,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),M.createElement(G8,Cx({},i,{ref:n})))}),ele=["axis","item"],tle=M.forwardRef((t,e)=>M.createElement(z8,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ele,tooltipPayloadSearcher:RE,categoricalChartProps:t,ref:e}));function nle(t){var e=Zt();return M.useEffect(()=>{e(Aae(t))},[e,t]),null}var rle=["layout"];function Sx(){return Sx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sx.apply(null,arguments)}function ile(t,e){if(t==null)return{};var n,r,i=ole(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ole(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sle={top:5,right:5,bottom:5,left:5},$8={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:sle,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},ale=M.forwardRef(function(e,n){var r,i=Vn(e.categoricalChartProps,$8),{layout:o}=i,a=ile(i,rle),{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:g}=e,y={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:g,eventEmitter:void 0};return M.createElement(U8,{preloadedState:{options:y},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:c},M.createElement(d8,{chartData:i.data}),M.createElement(j8,{layout:o,margin:i.margin}),M.createElement(V8,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),M.createElement(nle,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),M.createElement(G8,Sx({},a,{ref:n})))});function aN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aN(Object(n),!0).forEach(function(r){lle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lle(t,e,n){return(e=ule(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ule(t){var e=cle(t,"string");return typeof e=="symbol"?e:e+""}function cle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dle=["item"],fle=lN(lN({},$8),{},{layout:"centric",startAngle:0,endAngle:360}),hle=M.forwardRef((t,e)=>{var n=Vn(t,fle);return M.createElement(ale,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:dle,tooltipPayloadSearcher:RE,categoricalChartProps:n,ref:e})}),ple=["item"],gle=M.forwardRef((t,e)=>M.createElement(z8,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:ple,tooltipPayloadSearcher:RE,categoricalChartProps:t,ref:e}));const uN=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"],mle=({onLogout:t})=>{const[e,n]=M.useState([]),[r,i]=M.useState(!0),[o,a]=M.useState("month"),[c,f]=M.useState(0),[d,g]=M.useState(0),[y,E]=M.useState([]),[C,I]=M.useState([]),[P,N]=M.useState([]),[L,U]=M.useState([]),[F,z]=M.useState("dashboard"),[q,H]=M.useState([]),[W,Z]=M.useState(null);M.useEffect(()=>{F==="dashboard"?X():F==="clients"&&ye()},[F,o]);const X=async()=>{i(!0);try{const fe=new Date;o==="week"?fe.setDate(fe.getDate()-7):fe.setDate(fe.getDate()-30);const{data:ne,error:we}=await Un.from("transactions").select("*").gte("created_at",fe.toISOString());if(we)throw we;const me=ne||[],xe=new Date(fe);o==="week"?xe.setDate(xe.getDate()-7):xe.setDate(xe.getDate()-30);const{data:Ae}=await Un.from("transactions").select("*").gte("created_at",xe.toISOString()).lt("created_at",fe.toISOString()),Ce=Ae||[];n(me);const te=me.reduce((Me,_e)=>Me+_e.amount,0);f(te),g(me.length?Math.round(te/me.length):0);const he=new Map;me.forEach(Me=>{const _e=Me.type==="product"?"Productos":"Servicios";he.set(_e,(he.get(_e)||0)+Me.amount)}),I(Array.from(he).map(([Me,_e])=>({name:Me,value:_e})));const Fe=new Map,Le=(Me,_e)=>{if(_e==="product"){const Ke=Su.find(dt=>dt.price5ml===Me||dt.price10ml===Me||dt.priceFullBottle===Me);return Ke?Ke.name:"Producto Genrico"}else{const Ke=hu.find(dt=>dt.price===Me);return Ke?Ke.name:"Servicio General"}};me.forEach(Me=>{const _e=Le(Me.amount,Me.type);Fe.has(_e)||Fe.set(_e,{current:0,previous:0}),Fe.get(_e).current++}),Ce.forEach(Me=>{const _e=Le(Me.amount,Me.type);Fe.has(_e)||Fe.set(_e,{current:0,previous:0}),Fe.get(_e).previous++});const lt=Array.from(Fe.entries()).map(([Me,_e])=>({name:Me,count:_e.current})).sort((Me,_e)=>_e.count-Me.count).slice(0,5);N(lt);const Ne=me.length||1,ct=me.length/Fe.size/Ne,rt=[];Fe.forEach((Me,_e)=>{if(Me.current===0)return;const Ke=Me.current/Ne,dt=Me.previous===0?1:(Me.current-Me.previous)/Me.previous;let It="question";Ke>=ct&&dt>=0?It="star":Ke>=ct&&dt<0?It="cow":Ke<ct&&dt>=0?It="question":It="dog",rt.push({name:_e,volume:Ke,growth:dt,type:It})}),U(rt);const Ee=new Map;me.forEach(Me=>{if(!Me.client_id)return;const _e=Ee.get(Me.client_id)||{id:Me.client_id,phone:"Cargando...",total_spent:0,visit_count:0};_e.total_spent+=Me.amount,_e.visit_count+=1,Ee.set(Me.client_id,_e)});const et=Array.from(Ee.keys());if(et.length>0){const{data:Me}=await Un.from("clients").select("id, phone").in("id",et);Me?.forEach(_e=>{const Ke=Ee.get(_e.id);Ke&&(Ke.phone=_e.phone)})}E(Array.from(Ee.values()).sort((Me,_e)=>_e.total_spent-Me.total_spent).slice(0,10))}catch(fe){console.error("Error fetching dashboard data:",fe)}finally{i(!1)}},ye=async()=>{i(!0);const{data:fe,error:ne}=await Un.from("clients").select("*").order("last_visit",{ascending:!1});ne?console.error("Error fetching clients",ne):H(fe||[]),i(!1)},se=async fe=>{if(fe.preventDefault(),!W)return;const{error:ne}=await Un.from("clients").update({phone:W.phone,visits:W.visits}).eq("id",W.id);ne?alert("Error al actualizar: "+ne.message):(Z(null),ye())},ae=async fe=>{if(!window.confirm("Ests seguro de eliminar este cliente? Esta accin no se puede deshacer y borrar su historial."))return;const{error:ne}=await Un.from("clients").delete().eq("id",fe);ne?alert("Error al eliminar: "+ne.message):ye()},be=()=>{const fe=["ID Transaccion","Fecha","Monto","Tipo","ID Cliente"],ne=e.map(Ae=>[Ae.id,Ae.created_at,Ae.amount,Ae.type,Ae.client_id||"Annimo"]),we="data:text/csv;charset=utf-8,"+fe.join(",")+`
`+ne.map(Ae=>Ae.join(",")).join(`
`),me=encodeURI(we),xe=document.createElement("a");xe.setAttribute("href",me),xe.setAttribute("download",`reporte_financiero_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(xe),xe.click(),document.body.removeChild(xe)};return k.jsxs("div",{className:"max-w-6xl mx-auto p-4 py-8",children:[k.jsxs("div",{className:"flex justify-between items-center mb-8",children:[k.jsx("h1",{className:"text-3xl font-bold text-stone-900 serif",children:"Panel de Gestin"}),k.jsxs("div",{className:"flex gap-4",children:[F==="dashboard"&&k.jsxs("select",{value:o,onChange:fe=>a(fe.target.value),className:"bg-white border border-stone-300 rounded-lg px-3 py-2 text-sm",children:[k.jsx("option",{value:"week",children:"ltima Semana"}),k.jsx("option",{value:"month",children:"ltimo Mes"})]}),k.jsx("button",{onClick:t,className:"bg-stone-200 px-4 py-2 rounded-lg text-sm font-bold hover:bg-stone-300",children:"Cerrar Sesin"})]})]}),k.jsxs("div",{className:"flex gap-4 mb-6 border-b border-stone-200 pb-1",children:[k.jsx("button",{onClick:()=>z("dashboard"),className:`px-4 py-2 font-bold transition ${F==="dashboard"?"text-stone-900 border-b-2 border-stone-900":"text-stone-400 hover:text-stone-600"}`,children:"Dashboard"}),k.jsx("button",{onClick:()=>z("clients"),className:`px-4 py-2 font-bold transition ${F==="clients"?"text-stone-900 border-b-2 border-stone-900":"text-stone-400 hover:text-stone-600"}`,children:"Clientes"})]}),F==="dashboard"?k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex items-center justify-between",children:[k.jsxs("div",{children:[k.jsx("p",{className:"text-stone-500 text-sm uppercase tracking-wider mb-1",children:"Monto Neto"}),k.jsxs("h3",{className:"text-3xl font-bold text-green-600",children:["$",c.toLocaleString()]})]}),k.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:k.jsx(t6,{className:"text-green-600"})})]}),k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex items-center justify-between",children:[k.jsxs("div",{children:[k.jsx("p",{className:"text-stone-500 text-sm uppercase tracking-wider mb-1",children:"Ticket Promedio"}),k.jsxs("h3",{className:"text-3xl font-bold text-blue-600",children:["$",d.toLocaleString()]})]}),k.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:k.jsx(H_,{className:"text-blue-600"})})]}),k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex items-center justify-between",children:[k.jsxs("div",{children:[k.jsx("p",{className:"text-stone-500 text-sm uppercase tracking-wider mb-1",children:"Transacciones"}),k.jsx("h3",{className:"text-3xl font-bold text-purple-600",children:e.length})]}),k.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:k.jsx(H_,{className:"text-purple-600"})})]})]}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[k.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[k.jsx(u6,{size:18})," Origen de Ingresos"]}),k.jsx("div",{className:"h-[250px] w-full",children:k.jsx(uv,{width:"100%",height:"100%",children:k.jsxs(hle,{children:[k.jsx(a8,{data:C,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",children:C.map((fe,ne)=>k.jsx(vl,{fill:uN[ne%uN.length]},`cell-${ne}`))}),k.jsx(Tv,{formatter:fe=>`$${fe.toLocaleString()}`}),k.jsx(_k,{})]})})})]}),k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[k.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[k.jsx(JD,{size:18})," Top Productos/Servicios"]}),k.jsx("div",{className:"h-[250px] w-full",children:k.jsx(uv,{width:"100%",height:"100%",children:k.jsxs(tle,{data:P,layout:"vertical",children:[k.jsx(mx,{strokeDasharray:"3 3",horizontal:!1}),k.jsx(Ex,{type:"number",hide:!0}),k.jsx(_x,{dataKey:"name",type:"category",width:100,style:{fontSize:"10px"}}),k.jsx(Tv,{}),k.jsx(C8,{dataKey:"count",fill:"#8884d8",radius:[0,4,4,0]})]})})})]}),k.jsxs("div",{className:"md:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[k.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[k.jsx(g6,{size:18})," Matriz BCG (Crecimiento vs Participacin)"]}),k.jsxs("div",{className:"h-[300px] w-full relative",children:[k.jsx(uv,{width:"100%",height:"100%",children:k.jsxs(gle,{margin:{top:20,right:20,bottom:20,left:20},children:[k.jsx(mx,{}),k.jsx(Ex,{type:"number",dataKey:"volume",name:"Cuota (Volumen)",unit:"%",domain:[0,"auto"],tickFormatter:fe=>Math.round(fe*100)+"%"}),k.jsx(_x,{type:"number",dataKey:"growth",name:"Crecimiento",unit:"%",tickFormatter:fe=>Math.round(fe*100)+"%"}),k.jsx(Tv,{cursor:{strokeDasharray:"3 3"},formatter:(fe,ne)=>[Math.round(fe*100)+"%",ne==="volume"?"Cuota":"Crecimiento"]}),k.jsx(m8,{y:0,stroke:"#ccc",strokeDasharray:"3 3"}),k.jsx(T8,{name:"Productos",data:L,fill:"#8884d8",children:L.map((fe,ne)=>{let we="#8884d8";return fe.type==="star"?we="#FFBB28":fe.type==="cow"?we="#00C49F":fe.type==="dog"?we="#FF8042":we="#999",k.jsx(vl,{fill:we},`cell-${ne}`)})})]})}),k.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 p-2 rounded border border-stone-200 text-xs shadow-lg grid grid-cols-2 gap-2",children:[k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("div",{className:"w-3 h-3 bg-[#FFBB28] rounded-full"}),"  Estrella"]}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("div",{className:"w-3 h-3 bg-[#00C49F] rounded-full"}),"  Vaca"]}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("div",{className:"w-3 h-3 bg-[#999] rounded-full"}),"  Interrogante"]}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("div",{className:"w-3 h-3 bg-[#FF8042] rounded-full"}),"  Perro"]})]})]}),k.jsx("p",{className:"text-xs text-stone-400 mt-2 text-center",children:"* Eje X: Cuota de Mercado (Volumen) | Eje Y: Crecimiento respecto al periodo anterior"})]})]}),k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[k.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[k.jsx(E6,{size:20})," Top 10 Clientes (Gasto)"]}),k.jsx("div",{className:"overflow-x-auto",children:k.jsxs("table",{className:"w-full text-sm text-left",children:[k.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500",children:k.jsxs("tr",{children:[k.jsx("th",{className:"px-4 py-2",children:"Cliente"}),k.jsx("th",{className:"px-4 py-2 text-right",children:"Visitas"}),k.jsx("th",{className:"px-4 py-2 text-right",children:"Total Gastado"})]})}),k.jsxs("tbody",{children:[y.map((fe,ne)=>k.jsxs("tr",{className:"border-b border-stone-100",children:[k.jsxs("td",{className:"px-4 py-3 font-medium",children:[ne+1,". ",fe.phone]}),k.jsx("td",{className:"px-4 py-3 text-right",children:fe.visit_count}),k.jsxs("td",{className:"px-4 py-3 text-right font-bold text-green-600",children:["$",fe.total_spent.toLocaleString()]})]},fe.id)),y.length===0&&k.jsx("tr",{children:k.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-stone-400",children:"No hay suficientes datos"})})]})]})})]}),k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[k.jsxs("div",{className:"flex justify-between items-center mb-4",children:[k.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[k.jsx(l6,{size:20})," Inventario Perfumes"]}),k.jsxs("button",{onClick:be,className:"text-sm text-blue-600 font-bold hover:underline flex items-center gap-1",children:[k.jsx(n6,{size:14})," Exportar CSV"]})]}),k.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:k.jsxs("table",{className:"w-full text-xs text-left",children:[k.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500 sticky top-0",children:k.jsxs("tr",{children:[k.jsx("th",{className:"px-4 py-2",children:"Producto"}),k.jsx("th",{className:"px-4 py-2 text-center",children:"Stock"}),k.jsx("th",{className:"px-4 py-2 text-right",children:"Margen 10ml"})]})}),k.jsx("tbody",{children:Su.map(fe=>k.jsxs("tr",{className:"border-b border-stone-100",children:[k.jsx("td",{className:"px-4 py-2",children:fe.name}),k.jsx("td",{className:"px-4 py-2 text-center",children:k.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] ${fe.stock?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:fe.stock?"OK":"AGOTADO"})}),k.jsxs("td",{className:"px-4 py-2 text-right text-blue-600 font-medium",children:["$",(fe.margin10ml||0).toLocaleString()]})]},fe.id))})]})})]})]})]}):k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[k.jsx("h3",{className:"text-xl font-bold mb-6",children:"Gestin de Clientes"}),k.jsx("div",{className:"overflow-x-auto",children:k.jsxs("table",{className:"w-full text-sm text-left",children:[k.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500",children:k.jsxs("tr",{children:[k.jsx("th",{className:"px-6 py-3",children:"Telfono / Cliente"}),k.jsx("th",{className:"px-6 py-3 text-center",children:"Visitas (Lealtad)"}),k.jsx("th",{className:"px-6 py-3",children:"ltima Visita"}),k.jsx("th",{className:"px-6 py-3 text-right",children:"Acciones"})]})}),k.jsx("tbody",{children:q.map(fe=>k.jsxs("tr",{className:"border-b border-stone-100 hover:bg-stone-50",children:[k.jsx("td",{className:"px-6 py-4 font-medium",children:fe.phone}),k.jsx("td",{className:"px-6 py-4 text-center",children:k.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full font-bold",children:fe.visits})}),k.jsx("td",{className:"px-6 py-4 text-stone-500",children:new Date(fe.last_visit).toLocaleDateString()}),k.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[k.jsx("button",{onClick:()=>Z(fe),className:"text-blue-600 hover:text-blue-800 font-medium text-xs px-2 py-1 bg-blue-50 rounded",children:"Editar"}),k.jsx("button",{onClick:()=>ae(fe.id),className:"text-red-600 hover:text-red-800 font-medium text-xs px-2 py-1 bg-red-50 rounded",children:"Eliminar"})]})]},fe.id))})]})})]}),W&&k.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:k.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-sm",children:[k.jsx("h3",{className:"text-xl font-bold mb-4",children:"Editar Cliente"}),k.jsxs("form",{onSubmit:se,className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-1",children:"Telfono"}),k.jsx("input",{type:"text",value:W.phone,onChange:fe=>Z({...W,phone:fe.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-1",children:"Visitas (Puntos)"}),k.jsx("input",{type:"number",value:W.visits,onChange:fe=>Z({...W,visits:parseInt(fe.target.value)}),className:"w-full px-4 py-2 border rounded-lg"})]}),k.jsxs("div",{className:"flex gap-2 mt-6",children:[k.jsx("button",{type:"button",onClick:()=>Z(null),className:"flex-1 px-4 py-2 bg-stone-200 text-stone-700 rounded-lg font-bold",children:"Cancelar"}),k.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-stone-900 text-white rounded-lg font-bold",children:"Guardar"})]})]})]})})]})},vle=()=>{const[t,e]=M.useState(null),[n,r]=M.useState(""),i=(a,c)=>{e(a),c&&r(c)},o=()=>{e(null),r("")};return t?t==="management"?k.jsx(mle,{onLogout:o}):k.jsx($G,{onLogout:o}):k.jsx(mG,{onLogin:i})},yle=()=>{const[t,e]=M.useState("Todos"),[n,r]=M.useState(null),i=["Todos","Cortes","Color","Peinados"],o=t==="Todos"?q_:q_.filter(a=>a.category===t);return k.jsxs("div",{className:"animate-in fade-in duration-700",children:[k.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:i.map(a=>k.jsx("button",{onClick:()=>e(a),className:`px-6 py-2 rounded-full text-sm font-bold uppercase tracking-widest transition-all ${t===a?"bg-stone-900 text-white shadow-lg scale-105":"bg-stone-100 text-stone-500 hover:bg-stone-200"}`,children:a},a))}),k.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-8 space-y-8 px-4",children:o.map((a,c)=>k.jsxs("div",{className:"break-inside-avoid relative group cursor-zoom-in overflow-hidden rounded-xl shadow-md bg-stone-100",onClick:()=>r(a.url),children:[k.jsx("img",{src:a.url,alt:a.description,className:"w-full h-auto object-cover transform transition duration-700 group-hover:scale-110",loading:"lazy"}),k.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:k.jsxs("div",{className:"text-white text-center p-4 transform translate-y-4 group-hover:translate-y-0 transition duration-300",children:[k.jsx(b6,{className:"mx-auto mb-2 opacity-80"}),k.jsx("p",{className:"font-serif italic text-lg",children:a.description})]})})]},c))}),n&&k.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:()=>r(null),children:[k.jsx("button",{className:"absolute top-6 right-6 text-white/50 hover:text-white transition",onClick:()=>r(null),children:k.jsx(hp,{size:32})}),k.jsx("img",{src:n,alt:"Zoom",className:"max-w-full max-h-[90vh] object-contain rounded-sm shadow-2xl scale-in-95 animate-in duration-300"})]})]})},xle=()=>{const[t,e]=M.useState(Vt.HOME),[n,r]=M.useState(null);bn.useEffect(()=>{new URLSearchParams(window.location.search).get("token")&&e(Vt.LOYALTY)},[]);const i=()=>{switch(t){case Vt.ADMIN:return k.jsx(vle,{});case Vt.GALLERY:return k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[k.jsxs("div",{className:"text-center mb-16",children:[k.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Nuestro Arte"}),k.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Galera de Trabajos"}),k.jsx("p",{className:"text-stone-500 mt-4 max-w-2xl mx-auto",children:"Resultados reales de clientas felices. Insprate para tu prximo cambio de look."})]}),k.jsx(yle,{})]});case Vt.LOYALTY:return k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 min-h-[60vh] flex flex-col justify-center items-center",children:k.jsx(gG,{})});case Vt.BOOKING:return k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[k.jsxs("div",{className:"text-center mb-16",children:[k.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Reserva tu momento"}),k.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Agenda tu Cita"})]}),k.jsx(U5,{onSuccess:o=>{r(o),e(Vt.CONFIRMATION)}})]});case Vt.CONFIRMATION:return k.jsx(rG,{isHomeService:n?.isHomeService||!1,onGoHome:()=>e(Vt.HOME),onGoCatalog:()=>e(Vt.CATALOG)});case Vt.CATALOG:return k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[k.jsxs("div",{className:"text-center mb-16",children:[k.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Aromas Exclusivos"}),k.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Nuestra Coleccin"})]}),k.jsx(j5,{})]});case Vt.HOME:default:return k.jsxs(k.Fragment,{children:[k.jsx(A6,{onCtaClick:()=>e(Vt.BOOKING)}),k.jsx("section",{className:"py-24 bg-white",children:k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[k.jsx("div",{children:k.jsx("img",{src:"/images/gallery/work_1.png",alt:"Hair Styling",className:"rounded-sm shadow-xl",onError:o=>{o.target.src="https://images.unsplash.com/photo-1560869713-7d0a29430803?auto=format&fit=crop&q=80&w=800"}})}),k.jsxs("div",{className:"space-y-6",children:[k.jsx("h3",{className:"serif text-4xl text-stone-900",children:"Corte, Color & Styling"}),k.jsx("p",{className:"text-stone-600 font-light text-lg leading-relaxed",children:"Desde cortes de puntas esenciales hasta cambios de look completos con coloracin. Descubre nuestros nuevos servicios de verano 2026."}),k.jsxs("div",{className:"flex items-center space-x-4 pt-2",children:[k.jsx("button",{onClick:()=>e(Vt.GALLERY),className:"px-6 py-2 bg-stone-100 text-stone-900 rounded-full font-bold text-sm hover:bg-stone-200 transition",children:"Ver Galera"}),k.jsxs("div",{className:"flex items-center space-x-2 text-stone-900 font-medium",children:[k.jsx(Ix,{size:20}),k.jsx("span",{children:"Desde $7.000"})]})]})]})]})})}),k.jsxs("section",{className:"py-16 bg-stone-900 text-white relative overflow-hidden",children:[k.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-amber-500 rounded-full blur-[100px] opacity-20 transform translate-x-1/2 -translate-y-1/2"}),k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10",children:[k.jsx(fN,{className:"mx-auto text-amber-400 mb-4 h-12 w-12"}),k.jsx("h2",{className:"serif text-3xl md:text-4xl mb-4",children:"Ya eres Clienta?"}),k.jsx("p",{className:"text-stone-300 max-w-lg mx-auto mb-8",children:"Revisa tus puntos acumulados y descubre cunto te falta para tu **Descuento de la 5ta Visita**."}),k.jsx("button",{onClick:()=>e(Vt.LOYALTY),className:"bg-white text-stone-900 px-8 py-3 rounded-full font-bold hover:bg-amber-50 transition shadow-lg",children:"Revisar mis Puntos"})]})]}),k.jsx("section",{className:"py-24 bg-stone-50",children:k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center flex-row-reverse",children:[k.jsxs("div",{className:"order-2 md:order-1 space-y-6",children:[k.jsxs("h3",{className:"serif text-4xl text-stone-900",children:["Alta Perfumera ",k.jsx("br",{})," en Decants"]}),k.jsx("p",{className:"text-stone-600 font-light text-lg leading-relaxed",children:"Accede a las fragancias ms deseadas del mundo en formatos de 5 y 10 ml. La forma inteligente de coleccionar aromas y descubrir tu nueva firma olfativa."}),k.jsxs("div",{className:"flex items-center space-x-2 text-stone-900 font-medium pt-2",children:[k.jsx(cd,{size:20}),k.jsx("span",{children:"100% Originales"})]}),k.jsxs("button",{onClick:()=>e(Vt.CATALOG),className:"inline-flex items-center text-stone-900 border-b border-stone-900 pb-1 hover:text-stone-600 hover:border-stone-600 transition mt-4",children:["Explorar Catlogo ",k.jsx(XD,{size:16,className:"ml-2"})]})]}),k.jsx("div",{className:"order-1 md:order-2",children:k.jsx("img",{src:"https://images.unsplash.com/photo-1615634260167-c8cdede054de?auto=format&fit=crop&q=80&w=800",alt:"Perfumes",className:"rounded-sm shadow-xl"})})]})})}),k.jsx(iG,{}),k.jsx("div",{className:"bg-white py-4 text-center",children:k.jsxs("button",{onClick:()=>e(Vt.ADMIN),className:"text-[10px] text-stone-300 hover:text-stone-500 flex items-center justify-center gap-1 mx-auto transition",children:[k.jsx(v6,{size:10})," Admin"]})})]})}};return k.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[k.jsx(_6,{currentView:t,onChangeView:e}),k.jsx("main",{className:"flex-grow pt-16 md:pt-0",children:i()}),k.jsx(V5,{}),k.jsx(nG,{})]})};console.log("Iniciando aplicacin React...");const H8=document.getElementById("root");if(!H8)throw new Error("Could not find root element to mount to");try{qD.createRoot(H8).render(k.jsx(bn.StrictMode,{children:k.jsx(xle,{})})),console.log("Aplicacin montada correctamente.")}catch(t){console.error("Error al montar la aplicacin:",t);const e=document.getElementById("app-error");e&&(e.style.display="block",e.innerHTML="Error crtico al iniciar React: "+t.message)}
