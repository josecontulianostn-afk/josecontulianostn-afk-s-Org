function Y0(t,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in t)){const l=Object.getOwnPropertyDescriptor(o,s);l&&Object.defineProperty(t,s,l.get?l:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function Yu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Yo(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function o(){var s=!1;try{s=this instanceof o}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var s=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(n,o,s.get?s:{enumerable:!0,get:function(){return t[o]}})}),n}var Xa={exports:{}},$o={},Za={exports:{}},ve={};var hh;function Q0(){if(hh)return ve;hh=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),w=Symbol.iterator;function _(N){return N===null||typeof N!="object"?null:(N=w&&N[w]||N["@@iterator"],typeof N=="function"?N:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,A={};function C(N,F,de){this.props=N,this.context=F,this.refs=A,this.updater=de||S}C.prototype.isReactComponent={},C.prototype.setState=function(N,F){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,F,"setState")},C.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function P(){}P.prototype=C.prototype;function U(N,F,de){this.props=N,this.context=F,this.refs=A,this.updater=de||S}var b=U.prototype=new P;b.constructor=U,x(b,C.prototype),b.isPureReactComponent=!0;var O=Array.isArray,H=Object.prototype.hasOwnProperty,z={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function he(N,F,de){var le,ye={},_e=null,Re=null;if(F!=null)for(le in F.ref!==void 0&&(Re=F.ref),F.key!==void 0&&(_e=""+F.key),F)H.call(F,le)&&!W.hasOwnProperty(le)&&(ye[le]=F[le]);var xe=arguments.length-2;if(xe===1)ye.children=de;else if(1<xe){for(var De=Array(xe),Et=0;Et<xe;Et++)De[Et]=arguments[Et+2];ye.children=De}if(N&&N.defaultProps)for(le in xe=N.defaultProps,xe)ye[le]===void 0&&(ye[le]=xe[le]);return{$$typeof:t,type:N,key:_e,ref:Re,props:ye,_owner:z.current}}function j(N,F){return{$$typeof:t,type:N.type,key:F,ref:N.ref,props:N.props,_owner:N._owner}}function me(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function Ie(N){var F={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(de){return F[de]})}var Ve=/\/+/g;function ge(N,F){return typeof N=="object"&&N!==null&&N.key!=null?Ie(""+N.key):F.toString(36)}function Me(N,F,de,le,ye){var _e=typeof N;(_e==="undefined"||_e==="boolean")&&(N=null);var Re=!1;if(N===null)Re=!0;else switch(_e){case"string":case"number":Re=!0;break;case"object":switch(N.$$typeof){case t:case e:Re=!0}}if(Re)return Re=N,ye=ye(Re),N=le===""?"."+ge(Re,0):le,O(ye)?(de="",N!=null&&(de=N.replace(Ve,"$&/")+"/"),Me(ye,F,de,"",function(Et){return Et})):ye!=null&&(me(ye)&&(ye=j(ye,de+(!ye.key||Re&&Re.key===ye.key?"":(""+ye.key).replace(Ve,"$&/")+"/")+N)),F.push(ye)),1;if(Re=0,le=le===""?".":le+":",O(N))for(var xe=0;xe<N.length;xe++){_e=N[xe];var De=le+ge(_e,xe);Re+=Me(_e,F,de,De,ye)}else if(De=_(N),typeof De=="function")for(N=De.call(N),xe=0;!(_e=N.next()).done;)_e=_e.value,De=le+ge(_e,xe++),Re+=Me(_e,F,de,De,ye);else if(_e==="object")throw F=String(N),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return Re}function at(N,F,de){if(N==null)return N;var le=[],ye=0;return Me(N,le,"","",function(_e){return F.call(de,_e,ye++)}),le}function Y(N){if(N._status===-1){var F=N._result;F=F(),F.then(function(de){(N._status===0||N._status===-1)&&(N._status=1,N._result=de)},function(de){(N._status===0||N._status===-1)&&(N._status=2,N._result=de)}),N._status===-1&&(N._status=0,N._result=F)}if(N._status===1)return N._result.default;throw N._result}var ue={current:null},G={transition:null},X={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:G,ReactCurrentOwner:z};function J(){throw Error("act(...) is not supported in production builds of React.")}return ve.Children={map:at,forEach:function(N,F,de){at(N,function(){F.apply(this,arguments)},de)},count:function(N){var F=0;return at(N,function(){F++}),F},toArray:function(N){return at(N,function(F){return F})||[]},only:function(N){if(!me(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},ve.Component=C,ve.Fragment=n,ve.Profiler=s,ve.PureComponent=U,ve.StrictMode=o,ve.Suspense=p,ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,ve.act=J,ve.cloneElement=function(N,F,de){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var le=x({},N.props),ye=N.key,_e=N.ref,Re=N._owner;if(F!=null){if(F.ref!==void 0&&(_e=F.ref,Re=z.current),F.key!==void 0&&(ye=""+F.key),N.type&&N.type.defaultProps)var xe=N.type.defaultProps;for(De in F)H.call(F,De)&&!W.hasOwnProperty(De)&&(le[De]=F[De]===void 0&&xe!==void 0?xe[De]:F[De])}var De=arguments.length-2;if(De===1)le.children=de;else if(1<De){xe=Array(De);for(var Et=0;Et<De;Et++)xe[Et]=arguments[Et+2];le.children=xe}return{$$typeof:t,type:N.type,key:ye,ref:_e,props:le,_owner:Re}},ve.createContext=function(N){return N={$$typeof:a,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:l,_context:N},N.Consumer=N},ve.createElement=he,ve.createFactory=function(N){var F=he.bind(null,N);return F.type=N,F},ve.createRef=function(){return{current:null}},ve.forwardRef=function(N){return{$$typeof:f,render:N}},ve.isValidElement=me,ve.lazy=function(N){return{$$typeof:g,_payload:{_status:-1,_result:N},_init:Y}},ve.memo=function(N,F){return{$$typeof:m,type:N,compare:F===void 0?null:F}},ve.startTransition=function(N){var F=G.transition;G.transition={};try{N()}finally{G.transition=F}},ve.unstable_act=J,ve.useCallback=function(N,F){return ue.current.useCallback(N,F)},ve.useContext=function(N){return ue.current.useContext(N)},ve.useDebugValue=function(){},ve.useDeferredValue=function(N){return ue.current.useDeferredValue(N)},ve.useEffect=function(N,F){return ue.current.useEffect(N,F)},ve.useId=function(){return ue.current.useId()},ve.useImperativeHandle=function(N,F,de){return ue.current.useImperativeHandle(N,F,de)},ve.useInsertionEffect=function(N,F){return ue.current.useInsertionEffect(N,F)},ve.useLayoutEffect=function(N,F){return ue.current.useLayoutEffect(N,F)},ve.useMemo=function(N,F){return ue.current.useMemo(N,F)},ve.useReducer=function(N,F,de){return ue.current.useReducer(N,F,de)},ve.useRef=function(N){return ue.current.useRef(N)},ve.useState=function(N){return ue.current.useState(N)},ve.useSyncExternalStore=function(N,F,de){return ue.current.useSyncExternalStore(N,F,de)},ve.useTransition=function(){return ue.current.useTransition()},ve.version="18.3.1",ve}var ph;function Qu(){return ph||(ph=1,Za.exports=Q0()),Za.exports}var mh;function X0(){if(mh)return $o;mh=1;var t=Qu(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(f,p,m){var g,w={},_=null,S=null;m!==void 0&&(_=""+m),p.key!==void 0&&(_=""+p.key),p.ref!==void 0&&(S=p.ref);for(g in p)o.call(p,g)&&!l.hasOwnProperty(g)&&(w[g]=p[g]);if(f&&f.defaultProps)for(g in p=f.defaultProps,p)w[g]===void 0&&(w[g]=p[g]);return{$$typeof:e,type:f,key:_,ref:S,props:w,_owner:s.current}}return $o.Fragment=n,$o.jsx=a,$o.jsxs=a,$o}var gh;function Z0(){return gh||(gh=1,Xa.exports=X0()),Xa.exports}var E=Z0(),pe=Qu();const e_=Yu(pe);var us={},eu={exports:{}},yt={},tu={exports:{}},nu={};var vh;function t_(){return vh||(vh=1,(function(t){function e(G,X){var J=G.length;G.push(X);e:for(;0<J;){var N=J-1>>>1,F=G[N];if(0<s(F,X))G[N]=X,G[J]=F,J=N;else break e}}function n(G){return G.length===0?null:G[0]}function o(G){if(G.length===0)return null;var X=G[0],J=G.pop();if(J!==X){G[0]=J;e:for(var N=0,F=G.length,de=F>>>1;N<de;){var le=2*(N+1)-1,ye=G[le],_e=le+1,Re=G[_e];if(0>s(ye,J))_e<F&&0>s(Re,ye)?(G[N]=Re,G[_e]=J,N=_e):(G[N]=ye,G[le]=J,N=le);else if(_e<F&&0>s(Re,J))G[N]=Re,G[_e]=J,N=_e;else break e}}return X}function s(G,X){var J=G.sortIndex-X.sortIndex;return J!==0?J:G.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var a=Date,f=a.now();t.unstable_now=function(){return a.now()-f}}var p=[],m=[],g=1,w=null,_=3,S=!1,x=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(G){for(var X=n(m);X!==null;){if(X.callback===null)o(m);else if(X.startTime<=G)o(m),X.sortIndex=X.expirationTime,e(p,X);else break;X=n(m)}}function O(G){if(A=!1,b(G),!x)if(n(p)!==null)x=!0,Y(H);else{var X=n(m);X!==null&&ue(O,X.startTime-G)}}function H(G,X){x=!1,A&&(A=!1,P(he),he=-1),S=!0;var J=_;try{for(b(X),w=n(p);w!==null&&(!(w.expirationTime>X)||G&&!Ie());){var N=w.callback;if(typeof N=="function"){w.callback=null,_=w.priorityLevel;var F=N(w.expirationTime<=X);X=t.unstable_now(),typeof F=="function"?w.callback=F:w===n(p)&&o(p),b(X)}else o(p);w=n(p)}if(w!==null)var de=!0;else{var le=n(m);le!==null&&ue(O,le.startTime-X),de=!1}return de}finally{w=null,_=J,S=!1}}var z=!1,W=null,he=-1,j=5,me=-1;function Ie(){return!(t.unstable_now()-me<j)}function Ve(){if(W!==null){var G=t.unstable_now();me=G;var X=!0;try{X=W(!0,G)}finally{X?ge():(z=!1,W=null)}}else z=!1}var ge;if(typeof U=="function")ge=function(){U(Ve)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,at=Me.port2;Me.port1.onmessage=Ve,ge=function(){at.postMessage(null)}}else ge=function(){C(Ve,0)};function Y(G){W=G,z||(z=!0,ge())}function ue(G,X){he=C(function(){G(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){x||S||(x=!0,Y(H))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(p)},t.unstable_next=function(G){switch(_){case 1:case 2:case 3:var X=3;break;default:X=_}var J=_;_=X;try{return G()}finally{_=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=_;_=G;try{return X()}finally{_=J}},t.unstable_scheduleCallback=function(G,X,J){var N=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?N+J:N):J=N,G){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=J+F,G={id:g++,callback:X,priorityLevel:G,startTime:J,expirationTime:F,sortIndex:-1},J>N?(G.sortIndex=J,e(m,G),n(p)===null&&G===n(m)&&(A?(P(he),he=-1):A=!0,ue(O,J-N))):(G.sortIndex=F,e(p,G),x||S||(x=!0,Y(H))),G},t.unstable_shouldYield=Ie,t.unstable_wrapCallback=function(G){var X=_;return function(){var J=_;_=X;try{return G.apply(this,arguments)}finally{_=J}}}})(nu)),nu}var yh;function n_(){return yh||(yh=1,tu.exports=t_()),tu.exports}var _h;function r_(){if(_h)return yt;_h=1;var t=Qu(),e=n_();function n(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,u=1;u<arguments.length;u++)i+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(r,i){a(r,i),a(r+"Capture",i)}function a(r,i){for(s[r]=i,r=0;r<i.length;r++)o.add(i[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},w={};function _(r){return p.call(w,r)?!0:p.call(g,r)?!1:m.test(r)?w[r]=!0:(g[r]=!0,!1)}function S(r,i,u,h){if(u!==null&&u.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:u!==null?!u.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,i,u,h){if(i===null||typeof i>"u"||S(r,i,u,h))return!0;if(h)return!1;if(u!==null)switch(u.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function A(r,i,u,h,v,y,T){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=r,this.type=i,this.sanitizeURL=y,this.removeEmptyString=T}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){C[r]=new A(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];C[i]=new A(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){C[r]=new A(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){C[r]=new A(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){C[r]=new A(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){C[r]=new A(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){C[r]=new A(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){C[r]=new A(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){C[r]=new A(r,5,!1,r.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function U(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(P,U);C[i]=new A(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(P,U);C[i]=new A(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(P,U);C[i]=new A(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){C[r]=new A(r,1,!1,r.toLowerCase(),null,!1,!1)}),C.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){C[r]=new A(r,1,!1,r.toLowerCase(),null,!0,!0)});function b(r,i,u,h){var v=C.hasOwnProperty(i)?C[i]:null;(v!==null?v.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(x(i,u,v,h)&&(u=null),h||v===null?_(i)&&(u===null?r.removeAttribute(i):r.setAttribute(i,""+u)):v.mustUseProperty?r[v.propertyName]=u===null?v.type===3?!1:"":u:(i=v.attributeName,h=v.attributeNamespace,u===null?r.removeAttribute(i):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,h?r.setAttributeNS(h,i,u):r.setAttribute(i,u))))}var O=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),z=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),me=Symbol.for("react.provider"),Ie=Symbol.for("react.context"),Ve=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),at=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),G=Symbol.iterator;function X(r){return r===null||typeof r!="object"?null:(r=G&&r[G]||r["@@iterator"],typeof r=="function"?r:null)}var J=Object.assign,N;function F(r){if(N===void 0)try{throw Error()}catch(u){var i=u.stack.trim().match(/\n( *(at )?)/);N=i&&i[1]||""}return`
`+N+r}var de=!1;function le(r,i){if(!r||de)return"";de=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(L){var h=L}Reflect.construct(r,[],i)}else{try{i.call()}catch(L){h=L}r.call(i.prototype)}else{try{throw Error()}catch(L){h=L}r()}}catch(L){if(L&&h&&typeof L.stack=="string"){for(var v=L.stack.split(`
`),y=h.stack.split(`
`),T=v.length-1,I=y.length-1;1<=T&&0<=I&&v[T]!==y[I];)I--;for(;1<=T&&0<=I;T--,I--)if(v[T]!==y[I]){if(T!==1||I!==1)do if(T--,I--,0>I||v[T]!==y[I]){var R=`
`+v[T].replace(" at new "," at ");return r.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",r.displayName)),R}while(1<=T&&0<=I);break}}}finally{de=!1,Error.prepareStackTrace=u}return(r=r?r.displayName||r.name:"")?F(r):""}function ye(r){switch(r.tag){case 5:return F(r.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return r=le(r.type,!1),r;case 11:return r=le(r.type.render,!1),r;case 1:return r=le(r.type,!0),r;default:return""}}function _e(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case W:return"Fragment";case z:return"Portal";case j:return"Profiler";case he:return"StrictMode";case ge:return"Suspense";case Me:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Ie:return(r.displayName||"Context")+".Consumer";case me:return(r._context.displayName||"Context")+".Provider";case Ve:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case at:return i=r.displayName||null,i!==null?i:_e(r.type)||"Memo";case Y:i=r._payload,r=r._init;try{return _e(r(i))}catch{}}return null}function Re(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(i);case 8:return i===he?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function xe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function De(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Et(r){var i=De(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,y=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return v.call(this)},set:function(T){h=""+T,y.call(this,T)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Zo(r){r._valueTracker||(r._valueTracker=Et(r))}function yc(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var u=i.getValue(),h="";return r&&(h=De(r)?r.checked?"true":"false":r.value),r=h,r!==u?(i.setValue(r),!0):!1}function ei(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function il(r,i){var u=i.checked;return J({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??r._wrapperState.initialChecked})}function _c(r,i){var u=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;u=xe(i.value!=null?i.value:u),r._wrapperState={initialChecked:h,initialValue:u,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function wc(r,i){i=i.checked,i!=null&&b(r,"checked",i,!1)}function sl(r,i){wc(r,i);var u=xe(i.value),h=i.type;if(u!=null)h==="number"?(u===0&&r.value===""||r.value!=u)&&(r.value=""+u):r.value!==""+u&&(r.value=""+u);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?ll(r,i.type,u):i.hasOwnProperty("defaultValue")&&ll(r,i.type,xe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function Ec(r,i,u){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,u||i===r.value||(r.value=i),r.defaultValue=i}u=r.name,u!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,u!==""&&(r.name=u)}function ll(r,i,u){(i!=="number"||ei(r.ownerDocument)!==r)&&(u==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+u&&(r.defaultValue=""+u))}var Zr=Array.isArray;function ar(r,i,u,h){if(r=r.options,i){i={};for(var v=0;v<u.length;v++)i["$"+u[v]]=!0;for(u=0;u<r.length;u++)v=i.hasOwnProperty("$"+r[u].value),r[u].selected!==v&&(r[u].selected=v),v&&h&&(r[u].defaultSelected=!0)}else{for(u=""+xe(u),i=null,v=0;v<r.length;v++){if(r[v].value===u){r[v].selected=!0,h&&(r[v].defaultSelected=!0);return}i!==null||r[v].disabled||(i=r[v])}i!==null&&(i.selected=!0)}}function al(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return J({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Sc(r,i){var u=i.value;if(u==null){if(u=i.children,i=i.defaultValue,u!=null){if(i!=null)throw Error(n(92));if(Zr(u)){if(1<u.length)throw Error(n(93));u=u[0]}i=u}i==null&&(i=""),u=i}r._wrapperState={initialValue:xe(u)}}function Tc(r,i){var u=xe(i.value),h=xe(i.defaultValue);u!=null&&(u=""+u,u!==r.value&&(r.value=u),i.defaultValue==null&&r.defaultValue!==u&&(r.defaultValue=u)),h!=null&&(r.defaultValue=""+h)}function xc(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Cc(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ul(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Cc(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ti,Ac=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,u,h,v){MSApp.execUnsafeLocalFunction(function(){return r(i,u,h,v)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(ti=ti||document.createElement("div"),ti.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ti.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function eo(r,i){if(i){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=i;return}}r.textContent=i}var to={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ey=["Webkit","ms","Moz","O"];Object.keys(to).forEach(function(r){ey.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),to[i]=to[r]})});function Ic(r,i,u){return i==null||typeof i=="boolean"||i===""?"":u||typeof i!="number"||i===0||to.hasOwnProperty(r)&&to[r]?(""+i).trim():i+"px"}function Rc(r,i){r=r.style;for(var u in i)if(i.hasOwnProperty(u)){var h=u.indexOf("--")===0,v=Ic(u,i[u],h);u==="float"&&(u="cssFloat"),h?r.setProperty(u,v):r[u]=v}}var ty=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cl(r,i){if(i){if(ty[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function dl(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fl=null;function hl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var pl=null,ur=null,cr=null;function kc(r){if(r=xo(r)){if(typeof pl!="function")throw Error(n(280));var i=r.stateNode;i&&(i=xi(i),pl(r.stateNode,r.type,i))}}function Nc(r){ur?cr?cr.push(r):cr=[r]:ur=r}function Pc(){if(ur){var r=ur,i=cr;if(cr=ur=null,kc(r),i)for(r=0;r<i.length;r++)kc(i[r])}}function bc(r,i){return r(i)}function Mc(){}var ml=!1;function Dc(r,i,u){if(ml)return r(i,u);ml=!0;try{return bc(r,i,u)}finally{ml=!1,(ur!==null||cr!==null)&&(Mc(),Pc())}}function no(r,i){var u=r.stateNode;if(u===null)return null;var h=xi(u);if(h===null)return null;u=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(n(231,i,typeof u));return u}var gl=!1;if(f)try{var ro={};Object.defineProperty(ro,"passive",{get:function(){gl=!0}}),window.addEventListener("test",ro,ro),window.removeEventListener("test",ro,ro)}catch{gl=!1}function ny(r,i,u,h,v,y,T,I,R){var L=Array.prototype.slice.call(arguments,3);try{i.apply(u,L)}catch(V){this.onError(V)}}var oo=!1,ni=null,ri=!1,vl=null,ry={onError:function(r){oo=!0,ni=r}};function oy(r,i,u,h,v,y,T,I,R){oo=!1,ni=null,ny.apply(ry,arguments)}function iy(r,i,u,h,v,y,T,I,R){if(oy.apply(this,arguments),oo){if(oo){var L=ni;oo=!1,ni=null}else throw Error(n(198));ri||(ri=!0,vl=L)}}function $n(r){var i=r,u=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(u=i.return),r=i.return;while(r)}return i.tag===3?u:null}function Lc(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Uc(r){if($n(r)!==r)throw Error(n(188))}function sy(r){var i=r.alternate;if(!i){if(i=$n(r),i===null)throw Error(n(188));return i!==r?null:r}for(var u=r,h=i;;){var v=u.return;if(v===null)break;var y=v.alternate;if(y===null){if(h=v.return,h!==null){u=h;continue}break}if(v.child===y.child){for(y=v.child;y;){if(y===u)return Uc(v),r;if(y===h)return Uc(v),i;y=y.sibling}throw Error(n(188))}if(u.return!==h.return)u=v,h=y;else{for(var T=!1,I=v.child;I;){if(I===u){T=!0,u=v,h=y;break}if(I===h){T=!0,h=v,u=y;break}I=I.sibling}if(!T){for(I=y.child;I;){if(I===u){T=!0,u=y,h=v;break}if(I===h){T=!0,h=y,u=v;break}I=I.sibling}if(!T)throw Error(n(189))}}if(u.alternate!==h)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?r:i}function Oc(r){return r=sy(r),r!==null?Fc(r):null}function Fc(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Fc(r);if(i!==null)return i;r=r.sibling}return null}var $c=e.unstable_scheduleCallback,Vc=e.unstable_cancelCallback,ly=e.unstable_shouldYield,ay=e.unstable_requestPaint,Be=e.unstable_now,uy=e.unstable_getCurrentPriorityLevel,yl=e.unstable_ImmediatePriority,Bc=e.unstable_UserBlockingPriority,oi=e.unstable_NormalPriority,cy=e.unstable_LowPriority,Gc=e.unstable_IdlePriority,ii=null,jt=null;function dy(r){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(ii,r,void 0,(r.current.flags&128)===128)}catch{}}var Lt=Math.clz32?Math.clz32:py,fy=Math.log,hy=Math.LN2;function py(r){return r>>>=0,r===0?32:31-(fy(r)/hy|0)|0}var si=64,li=4194304;function io(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function ai(r,i){var u=r.pendingLanes;if(u===0)return 0;var h=0,v=r.suspendedLanes,y=r.pingedLanes,T=u&268435455;if(T!==0){var I=T&~v;I!==0?h=io(I):(y&=T,y!==0&&(h=io(y)))}else T=u&~v,T!==0?h=io(T):y!==0&&(h=io(y));if(h===0)return 0;if(i!==0&&i!==h&&(i&v)===0&&(v=h&-h,y=i&-i,v>=y||v===16&&(y&4194240)!==0))return i;if((h&4)!==0&&(h|=u&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)u=31-Lt(i),v=1<<u,h|=r[u],i&=~v;return h}function my(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gy(r,i){for(var u=r.suspendedLanes,h=r.pingedLanes,v=r.expirationTimes,y=r.pendingLanes;0<y;){var T=31-Lt(y),I=1<<T,R=v[T];R===-1?((I&u)===0||(I&h)!==0)&&(v[T]=my(I,i)):R<=i&&(r.expiredLanes|=I),y&=~I}}function _l(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function qc(){var r=si;return si<<=1,(si&4194240)===0&&(si=64),r}function wl(r){for(var i=[],u=0;31>u;u++)i.push(r);return i}function so(r,i,u){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Lt(i),r[i]=u}function vy(r,i){var u=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<u;){var v=31-Lt(u),y=1<<v;i[v]=0,h[v]=-1,r[v]=-1,u&=~y}}function El(r,i){var u=r.entangledLanes|=i;for(r=r.entanglements;u;){var h=31-Lt(u),v=1<<h;v&i|r[h]&i&&(r[h]|=i),u&=~v}}var Ce=0;function Hc(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var zc,Sl,Jc,Wc,jc,Tl=!1,ui=[],gn=null,vn=null,yn=null,lo=new Map,ao=new Map,_n=[],yy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kc(r,i){switch(r){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":vn=null;break;case"mouseover":case"mouseout":yn=null;break;case"pointerover":case"pointerout":lo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ao.delete(i.pointerId)}}function uo(r,i,u,h,v,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:u,eventSystemFlags:h,nativeEvent:y,targetContainers:[v]},i!==null&&(i=xo(i),i!==null&&Sl(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,v!==null&&i.indexOf(v)===-1&&i.push(v),r)}function _y(r,i,u,h,v){switch(i){case"focusin":return gn=uo(gn,r,i,u,h,v),!0;case"dragenter":return vn=uo(vn,r,i,u,h,v),!0;case"mouseover":return yn=uo(yn,r,i,u,h,v),!0;case"pointerover":var y=v.pointerId;return lo.set(y,uo(lo.get(y)||null,r,i,u,h,v)),!0;case"gotpointercapture":return y=v.pointerId,ao.set(y,uo(ao.get(y)||null,r,i,u,h,v)),!0}return!1}function Yc(r){var i=Vn(r.target);if(i!==null){var u=$n(i);if(u!==null){if(i=u.tag,i===13){if(i=Lc(u),i!==null){r.blockedOn=i,jc(r.priority,function(){Jc(u)});return}}else if(i===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ci(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var u=Cl(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(u===null){u=r.nativeEvent;var h=new u.constructor(u.type,u);fl=h,u.target.dispatchEvent(h),fl=null}else return i=xo(u),i!==null&&Sl(i),r.blockedOn=u,!1;i.shift()}return!0}function Qc(r,i,u){ci(r)&&u.delete(i)}function wy(){Tl=!1,gn!==null&&ci(gn)&&(gn=null),vn!==null&&ci(vn)&&(vn=null),yn!==null&&ci(yn)&&(yn=null),lo.forEach(Qc),ao.forEach(Qc)}function co(r,i){r.blockedOn===i&&(r.blockedOn=null,Tl||(Tl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wy)))}function fo(r){function i(v){return co(v,r)}if(0<ui.length){co(ui[0],r);for(var u=1;u<ui.length;u++){var h=ui[u];h.blockedOn===r&&(h.blockedOn=null)}}for(gn!==null&&co(gn,r),vn!==null&&co(vn,r),yn!==null&&co(yn,r),lo.forEach(i),ao.forEach(i),u=0;u<_n.length;u++)h=_n[u],h.blockedOn===r&&(h.blockedOn=null);for(;0<_n.length&&(u=_n[0],u.blockedOn===null);)Yc(u),u.blockedOn===null&&_n.shift()}var dr=O.ReactCurrentBatchConfig,di=!0;function Ey(r,i,u,h){var v=Ce,y=dr.transition;dr.transition=null;try{Ce=1,xl(r,i,u,h)}finally{Ce=v,dr.transition=y}}function Sy(r,i,u,h){var v=Ce,y=dr.transition;dr.transition=null;try{Ce=4,xl(r,i,u,h)}finally{Ce=v,dr.transition=y}}function xl(r,i,u,h){if(di){var v=Cl(r,i,u,h);if(v===null)Gl(r,i,h,fi,u),Kc(r,h);else if(_y(v,r,i,u,h))h.stopPropagation();else if(Kc(r,h),i&4&&-1<yy.indexOf(r)){for(;v!==null;){var y=xo(v);if(y!==null&&zc(y),y=Cl(r,i,u,h),y===null&&Gl(r,i,h,fi,u),y===v)break;v=y}v!==null&&h.stopPropagation()}else Gl(r,i,h,null,u)}}var fi=null;function Cl(r,i,u,h){if(fi=null,r=hl(h),r=Vn(r),r!==null)if(i=$n(r),i===null)r=null;else if(u=i.tag,u===13){if(r=Lc(i),r!==null)return r;r=null}else if(u===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return fi=r,null}function Xc(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uy()){case yl:return 1;case Bc:return 4;case oi:case cy:return 16;case Gc:return 536870912;default:return 16}default:return 16}}var wn=null,Al=null,hi=null;function Zc(){if(hi)return hi;var r,i=Al,u=i.length,h,v="value"in wn?wn.value:wn.textContent,y=v.length;for(r=0;r<u&&i[r]===v[r];r++);var T=u-r;for(h=1;h<=T&&i[u-h]===v[y-h];h++);return hi=v.slice(r,1<h?1-h:void 0)}function pi(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function mi(){return!0}function ed(){return!1}function St(r){function i(u,h,v,y,T){this._reactName=u,this._targetInst=v,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(u=r[I],this[I]=u?u(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?mi:ed,this.isPropagationStopped=ed,this}return J(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),i}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=St(fr),ho=J({},fr,{view:0,detail:0}),Ty=St(ho),Rl,kl,po,gi=J({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pl,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==po&&(po&&r.type==="mousemove"?(Rl=r.screenX-po.screenX,kl=r.screenY-po.screenY):kl=Rl=0,po=r),Rl)},movementY:function(r){return"movementY"in r?r.movementY:kl}}),td=St(gi),xy=J({},gi,{dataTransfer:0}),Cy=St(xy),Ay=J({},ho,{relatedTarget:0}),Nl=St(Ay),Iy=J({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ry=St(Iy),ky=J({},fr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ny=St(ky),Py=J({},fr,{data:0}),nd=St(Py),by={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},My={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ly(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Dy[r])?!!i[r]:!1}function Pl(){return Ly}var Uy=J({},ho,{key:function(r){if(r.key){var i=by[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=pi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?My[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pl,charCode:function(r){return r.type==="keypress"?pi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?pi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Oy=St(Uy),Fy=J({},gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rd=St(Fy),$y=J({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pl}),Vy=St($y),By=J({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gy=St(By),qy=J({},gi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Hy=St(qy),zy=[9,13,27,32],bl=f&&"CompositionEvent"in window,mo=null;f&&"documentMode"in document&&(mo=document.documentMode);var Jy=f&&"TextEvent"in window&&!mo,od=f&&(!bl||mo&&8<mo&&11>=mo),id=" ",sd=!1;function ld(r,i){switch(r){case"keyup":return zy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ad(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var hr=!1;function Wy(r,i){switch(r){case"compositionend":return ad(i);case"keypress":return i.which!==32?null:(sd=!0,id);case"textInput":return r=i.data,r===id&&sd?null:r;default:return null}}function jy(r,i){if(hr)return r==="compositionend"||!bl&&ld(r,i)?(r=Zc(),hi=Al=wn=null,hr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return od&&i.locale!=="ko"?null:i.data;default:return null}}var Ky={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ud(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Ky[r.type]:i==="textarea"}function cd(r,i,u,h){Nc(h),i=Ei(i,"onChange"),0<i.length&&(u=new Il("onChange","change",null,u,h),r.push({event:u,listeners:i}))}var go=null,vo=null;function Yy(r){Rd(r,0)}function vi(r){var i=yr(r);if(yc(i))return r}function Qy(r,i){if(r==="change")return i}var dd=!1;if(f){var Ml;if(f){var Dl="oninput"in document;if(!Dl){var fd=document.createElement("div");fd.setAttribute("oninput","return;"),Dl=typeof fd.oninput=="function"}Ml=Dl}else Ml=!1;dd=Ml&&(!document.documentMode||9<document.documentMode)}function hd(){go&&(go.detachEvent("onpropertychange",pd),vo=go=null)}function pd(r){if(r.propertyName==="value"&&vi(vo)){var i=[];cd(i,vo,r,hl(r)),Dc(Yy,i)}}function Xy(r,i,u){r==="focusin"?(hd(),go=i,vo=u,go.attachEvent("onpropertychange",pd)):r==="focusout"&&hd()}function Zy(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vi(vo)}function e0(r,i){if(r==="click")return vi(i)}function t0(r,i){if(r==="input"||r==="change")return vi(i)}function n0(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Ut=typeof Object.is=="function"?Object.is:n0;function yo(r,i){if(Ut(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var u=Object.keys(r),h=Object.keys(i);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var v=u[h];if(!p.call(i,v)||!Ut(r[v],i[v]))return!1}return!0}function md(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function gd(r,i){var u=md(r);r=0;for(var h;u;){if(u.nodeType===3){if(h=r+u.textContent.length,r<=i&&h>=i)return{node:u,offset:i-r};r=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=md(u)}}function vd(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?vd(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function yd(){for(var r=window,i=ei();i instanceof r.HTMLIFrameElement;){try{var u=typeof i.contentWindow.location.href=="string"}catch{u=!1}if(u)r=i.contentWindow;else break;i=ei(r.document)}return i}function Ll(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function r0(r){var i=yd(),u=r.focusedElem,h=r.selectionRange;if(i!==u&&u&&u.ownerDocument&&vd(u.ownerDocument.documentElement,u)){if(h!==null&&Ll(u)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in u)u.selectionStart=i,u.selectionEnd=Math.min(r,u.value.length);else if(r=(i=u.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var v=u.textContent.length,y=Math.min(h.start,v);h=h.end===void 0?y:Math.min(h.end,v),!r.extend&&y>h&&(v=h,h=y,y=v),v=gd(u,y);var T=gd(u,h);v&&T&&(r.rangeCount!==1||r.anchorNode!==v.node||r.anchorOffset!==v.offset||r.focusNode!==T.node||r.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(v.node,v.offset),r.removeAllRanges(),y>h?(r.addRange(i),r.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),r.addRange(i)))}}for(i=[],r=u;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<i.length;u++)r=i[u],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var o0=f&&"documentMode"in document&&11>=document.documentMode,pr=null,Ul=null,_o=null,Ol=!1;function _d(r,i,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ol||pr==null||pr!==ei(h)||(h=pr,"selectionStart"in h&&Ll(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),_o&&yo(_o,h)||(_o=h,h=Ei(Ul,"onSelect"),0<h.length&&(i=new Il("onSelect","select",null,i,u),r.push({event:i,listeners:h}),i.target=pr)))}function yi(r,i){var u={};return u[r.toLowerCase()]=i.toLowerCase(),u["Webkit"+r]="webkit"+i,u["Moz"+r]="moz"+i,u}var mr={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionend:yi("Transition","TransitionEnd")},Fl={},wd={};f&&(wd=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);function _i(r){if(Fl[r])return Fl[r];if(!mr[r])return r;var i=mr[r],u;for(u in i)if(i.hasOwnProperty(u)&&u in wd)return Fl[r]=i[u];return r}var Ed=_i("animationend"),Sd=_i("animationiteration"),Td=_i("animationstart"),xd=_i("transitionend"),Cd=new Map,Ad="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(r,i){Cd.set(r,i),l(i,[r])}for(var $l=0;$l<Ad.length;$l++){var Vl=Ad[$l],i0=Vl.toLowerCase(),s0=Vl[0].toUpperCase()+Vl.slice(1);En(i0,"on"+s0)}En(Ed,"onAnimationEnd"),En(Sd,"onAnimationIteration"),En(Td,"onAnimationStart"),En("dblclick","onDoubleClick"),En("focusin","onFocus"),En("focusout","onBlur"),En(xd,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l0=new Set("cancel close invalid load scroll toggle".split(" ").concat(wo));function Id(r,i,u){var h=r.type||"unknown-event";r.currentTarget=u,iy(h,i,void 0,r),r.currentTarget=null}function Rd(r,i){i=(i&4)!==0;for(var u=0;u<r.length;u++){var h=r[u],v=h.event;h=h.listeners;e:{var y=void 0;if(i)for(var T=h.length-1;0<=T;T--){var I=h[T],R=I.instance,L=I.currentTarget;if(I=I.listener,R!==y&&v.isPropagationStopped())break e;Id(v,I,L),y=R}else for(T=0;T<h.length;T++){if(I=h[T],R=I.instance,L=I.currentTarget,I=I.listener,R!==y&&v.isPropagationStopped())break e;Id(v,I,L),y=R}}}if(ri)throw r=vl,ri=!1,vl=null,r}function Pe(r,i){var u=i[jl];u===void 0&&(u=i[jl]=new Set);var h=r+"__bubble";u.has(h)||(kd(i,r,2,!1),u.add(h))}function Bl(r,i,u){var h=0;i&&(h|=4),kd(u,r,h,i)}var wi="_reactListening"+Math.random().toString(36).slice(2);function Eo(r){if(!r[wi]){r[wi]=!0,o.forEach(function(u){u!=="selectionchange"&&(l0.has(u)||Bl(u,!1,r),Bl(u,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[wi]||(i[wi]=!0,Bl("selectionchange",!1,i))}}function kd(r,i,u,h){switch(Xc(i)){case 1:var v=Ey;break;case 4:v=Sy;break;default:v=xl}u=v.bind(null,i,u,r),v=void 0,!gl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(v=!0),h?v!==void 0?r.addEventListener(i,u,{capture:!0,passive:v}):r.addEventListener(i,u,!0):v!==void 0?r.addEventListener(i,u,{passive:v}):r.addEventListener(i,u,!1)}function Gl(r,i,u,h,v){var y=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var I=h.stateNode.containerInfo;if(I===v||I.nodeType===8&&I.parentNode===v)break;if(T===4)for(T=h.return;T!==null;){var R=T.tag;if((R===3||R===4)&&(R=T.stateNode.containerInfo,R===v||R.nodeType===8&&R.parentNode===v))return;T=T.return}for(;I!==null;){if(T=Vn(I),T===null)return;if(R=T.tag,R===5||R===6){h=y=T;continue e}I=I.parentNode}}h=h.return}Dc(function(){var L=y,V=hl(u),B=[];e:{var $=Cd.get(r);if($!==void 0){var Q=Il,te=r;switch(r){case"keypress":if(pi(u)===0)break e;case"keydown":case"keyup":Q=Oy;break;case"focusin":te="focus",Q=Nl;break;case"focusout":te="blur",Q=Nl;break;case"beforeblur":case"afterblur":Q=Nl;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=td;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Vy;break;case Ed:case Sd:case Td:Q=Ry;break;case xd:Q=Gy;break;case"scroll":Q=Ty;break;case"wheel":Q=Hy;break;case"copy":case"cut":case"paste":Q=Ny;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=rd}var ne=(i&4)!==0,Ge=!ne&&r==="scroll",M=ne?$!==null?$+"Capture":null:$;ne=[];for(var k=L,D;k!==null;){D=k;var q=D.stateNode;if(D.tag===5&&q!==null&&(D=q,M!==null&&(q=no(k,M),q!=null&&ne.push(So(k,q,D)))),Ge)break;k=k.return}0<ne.length&&($=new Q($,te,null,u,V),B.push({event:$,listeners:ne}))}}if((i&7)===0){e:{if($=r==="mouseover"||r==="pointerover",Q=r==="mouseout"||r==="pointerout",$&&u!==fl&&(te=u.relatedTarget||u.fromElement)&&(Vn(te)||te[en]))break e;if((Q||$)&&($=V.window===V?V:($=V.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(te=u.relatedTarget||u.toElement,Q=L,te=te?Vn(te):null,te!==null&&(Ge=$n(te),te!==Ge||te.tag!==5&&te.tag!==6)&&(te=null)):(Q=null,te=L),Q!==te)){if(ne=td,q="onMouseLeave",M="onMouseEnter",k="mouse",(r==="pointerout"||r==="pointerover")&&(ne=rd,q="onPointerLeave",M="onPointerEnter",k="pointer"),Ge=Q==null?$:yr(Q),D=te==null?$:yr(te),$=new ne(q,k+"leave",Q,u,V),$.target=Ge,$.relatedTarget=D,q=null,Vn(V)===L&&(ne=new ne(M,k+"enter",te,u,V),ne.target=D,ne.relatedTarget=Ge,q=ne),Ge=q,Q&&te)t:{for(ne=Q,M=te,k=0,D=ne;D;D=gr(D))k++;for(D=0,q=M;q;q=gr(q))D++;for(;0<k-D;)ne=gr(ne),k--;for(;0<D-k;)M=gr(M),D--;for(;k--;){if(ne===M||M!==null&&ne===M.alternate)break t;ne=gr(ne),M=gr(M)}ne=null}else ne=null;Q!==null&&Nd(B,$,Q,ne,!1),te!==null&&Ge!==null&&Nd(B,Ge,te,ne,!0)}}e:{if($=L?yr(L):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var re=Qy;else if(ud($))if(dd)re=t0;else{re=Zy;var ie=Xy}else(Q=$.nodeName)&&Q.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(re=e0);if(re&&(re=re(r,L))){cd(B,re,u,V);break e}ie&&ie(r,$,L),r==="focusout"&&(ie=$._wrapperState)&&ie.controlled&&$.type==="number"&&ll($,"number",$.value)}switch(ie=L?yr(L):window,r){case"focusin":(ud(ie)||ie.contentEditable==="true")&&(pr=ie,Ul=L,_o=null);break;case"focusout":_o=Ul=pr=null;break;case"mousedown":Ol=!0;break;case"contextmenu":case"mouseup":case"dragend":Ol=!1,_d(B,u,V);break;case"selectionchange":if(o0)break;case"keydown":case"keyup":_d(B,u,V)}var se;if(bl)e:{switch(r){case"compositionstart":var ce="onCompositionStart";break e;case"compositionend":ce="onCompositionEnd";break e;case"compositionupdate":ce="onCompositionUpdate";break e}ce=void 0}else hr?ld(r,u)&&(ce="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(ce="onCompositionStart");ce&&(od&&u.locale!=="ko"&&(hr||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&hr&&(se=Zc()):(wn=V,Al="value"in wn?wn.value:wn.textContent,hr=!0)),ie=Ei(L,ce),0<ie.length&&(ce=new nd(ce,r,null,u,V),B.push({event:ce,listeners:ie}),se?ce.data=se:(se=ad(u),se!==null&&(ce.data=se)))),(se=Jy?Wy(r,u):jy(r,u))&&(L=Ei(L,"onBeforeInput"),0<L.length&&(V=new nd("onBeforeInput","beforeinput",null,u,V),B.push({event:V,listeners:L}),V.data=se))}Rd(B,i)})}function So(r,i,u){return{instance:r,listener:i,currentTarget:u}}function Ei(r,i){for(var u=i+"Capture",h=[];r!==null;){var v=r,y=v.stateNode;v.tag===5&&y!==null&&(v=y,y=no(r,u),y!=null&&h.unshift(So(r,y,v)),y=no(r,i),y!=null&&h.push(So(r,y,v))),r=r.return}return h}function gr(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Nd(r,i,u,h,v){for(var y=i._reactName,T=[];u!==null&&u!==h;){var I=u,R=I.alternate,L=I.stateNode;if(R!==null&&R===h)break;I.tag===5&&L!==null&&(I=L,v?(R=no(u,y),R!=null&&T.unshift(So(u,R,I))):v||(R=no(u,y),R!=null&&T.push(So(u,R,I)))),u=u.return}T.length!==0&&r.push({event:i,listeners:T})}var a0=/\r\n?/g,u0=/\u0000|\uFFFD/g;function Pd(r){return(typeof r=="string"?r:""+r).replace(a0,`
`).replace(u0,"")}function Si(r,i,u){if(i=Pd(i),Pd(r)!==i&&u)throw Error(n(425))}function Ti(){}var ql=null,Hl=null;function zl(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Jl=typeof setTimeout=="function"?setTimeout:void 0,c0=typeof clearTimeout=="function"?clearTimeout:void 0,bd=typeof Promise=="function"?Promise:void 0,d0=typeof queueMicrotask=="function"?queueMicrotask:typeof bd<"u"?function(r){return bd.resolve(null).then(r).catch(f0)}:Jl;function f0(r){setTimeout(function(){throw r})}function Wl(r,i){var u=i,h=0;do{var v=u.nextSibling;if(r.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(h===0){r.removeChild(v),fo(i);return}h--}else u!=="$"&&u!=="$?"&&u!=="$!"||h++;u=v}while(u);fo(i)}function Sn(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Md(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(i===0)return r;i--}else u==="/$"&&i++}r=r.previousSibling}return null}var vr=Math.random().toString(36).slice(2),Kt="__reactFiber$"+vr,To="__reactProps$"+vr,en="__reactContainer$"+vr,jl="__reactEvents$"+vr,h0="__reactListeners$"+vr,p0="__reactHandles$"+vr;function Vn(r){var i=r[Kt];if(i)return i;for(var u=r.parentNode;u;){if(i=u[en]||u[Kt]){if(u=i.alternate,i.child!==null||u!==null&&u.child!==null)for(r=Md(r);r!==null;){if(u=r[Kt])return u;r=Md(r)}return i}r=u,u=r.parentNode}return null}function xo(r){return r=r[Kt]||r[en],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function yr(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function xi(r){return r[To]||null}var Kl=[],_r=-1;function Tn(r){return{current:r}}function be(r){0>_r||(r.current=Kl[_r],Kl[_r]=null,_r--)}function ke(r,i){_r++,Kl[_r]=r.current,r.current=i}var xn={},nt=Tn(xn),ht=Tn(!1),Bn=xn;function wr(r,i){var u=r.type.contextTypes;if(!u)return xn;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var v={},y;for(y in u)v[y]=i[y];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=v),v}function pt(r){return r=r.childContextTypes,r!=null}function Ci(){be(ht),be(nt)}function Dd(r,i,u){if(nt.current!==xn)throw Error(n(168));ke(nt,i),ke(ht,u)}function Ld(r,i,u){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var v in h)if(!(v in i))throw Error(n(108,Re(r)||"Unknown",v));return J({},u,h)}function Ai(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||xn,Bn=nt.current,ke(nt,r),ke(ht,ht.current),!0}function Ud(r,i,u){var h=r.stateNode;if(!h)throw Error(n(169));u?(r=Ld(r,i,Bn),h.__reactInternalMemoizedMergedChildContext=r,be(ht),be(nt),ke(nt,r)):be(ht),ke(ht,u)}var tn=null,Ii=!1,Yl=!1;function Od(r){tn===null?tn=[r]:tn.push(r)}function m0(r){Ii=!0,Od(r)}function Cn(){if(!Yl&&tn!==null){Yl=!0;var r=0,i=Ce;try{var u=tn;for(Ce=1;r<u.length;r++){var h=u[r];do h=h(!0);while(h!==null)}tn=null,Ii=!1}catch(v){throw tn!==null&&(tn=tn.slice(r+1)),$c(yl,Cn),v}finally{Ce=i,Yl=!1}}return null}var Er=[],Sr=0,Ri=null,ki=0,It=[],Rt=0,Gn=null,nn=1,rn="";function qn(r,i){Er[Sr++]=ki,Er[Sr++]=Ri,Ri=r,ki=i}function Fd(r,i,u){It[Rt++]=nn,It[Rt++]=rn,It[Rt++]=Gn,Gn=r;var h=nn;r=rn;var v=32-Lt(h)-1;h&=~(1<<v),u+=1;var y=32-Lt(i)+v;if(30<y){var T=v-v%5;y=(h&(1<<T)-1).toString(32),h>>=T,v-=T,nn=1<<32-Lt(i)+v|u<<v|h,rn=y+r}else nn=1<<y|u<<v|h,rn=r}function Ql(r){r.return!==null&&(qn(r,1),Fd(r,1,0))}function Xl(r){for(;r===Ri;)Ri=Er[--Sr],Er[Sr]=null,ki=Er[--Sr],Er[Sr]=null;for(;r===Gn;)Gn=It[--Rt],It[Rt]=null,rn=It[--Rt],It[Rt]=null,nn=It[--Rt],It[Rt]=null}var Tt=null,xt=null,Le=!1,Ot=null;function $d(r,i){var u=bt(5,null,null,0);u.elementType="DELETED",u.stateNode=i,u.return=r,i=r.deletions,i===null?(r.deletions=[u],r.flags|=16):i.push(u)}function Vd(r,i){switch(r.tag){case 5:var u=r.type;return i=i.nodeType!==1||u.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,Tt=r,xt=Sn(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,Tt=r,xt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(u=Gn!==null?{id:nn,overflow:rn}:null,r.memoizedState={dehydrated:i,treeContext:u,retryLane:1073741824},u=bt(18,null,null,0),u.stateNode=i,u.return=r,r.child=u,Tt=r,xt=null,!0):!1;default:return!1}}function Zl(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ea(r){if(Le){var i=xt;if(i){var u=i;if(!Vd(r,i)){if(Zl(r))throw Error(n(418));i=Sn(u.nextSibling);var h=Tt;i&&Vd(r,i)?$d(h,u):(r.flags=r.flags&-4097|2,Le=!1,Tt=r)}}else{if(Zl(r))throw Error(n(418));r.flags=r.flags&-4097|2,Le=!1,Tt=r}}}function Bd(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Tt=r}function Ni(r){if(r!==Tt)return!1;if(!Le)return Bd(r),Le=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!zl(r.type,r.memoizedProps)),i&&(i=xt)){if(Zl(r))throw Gd(),Error(n(418));for(;i;)$d(r,i),i=Sn(i.nextSibling)}if(Bd(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"){if(i===0){xt=Sn(r.nextSibling);break e}i--}else u!=="$"&&u!=="$!"&&u!=="$?"||i++}r=r.nextSibling}xt=null}}else xt=Tt?Sn(r.stateNode.nextSibling):null;return!0}function Gd(){for(var r=xt;r;)r=Sn(r.nextSibling)}function Tr(){xt=Tt=null,Le=!1}function ta(r){Ot===null?Ot=[r]:Ot.push(r)}var g0=O.ReactCurrentBatchConfig;function Co(r,i,u){if(r=u.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(n(309));var h=u.stateNode}if(!h)throw Error(n(147,r));var v=h,y=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(T){var I=v.refs;T===null?delete I[y]:I[y]=T},i._stringRef=y,i)}if(typeof r!="string")throw Error(n(284));if(!u._owner)throw Error(n(290,r))}return r}function Pi(r,i){throw r=Object.prototype.toString.call(i),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function qd(r){var i=r._init;return i(r._payload)}function Hd(r){function i(M,k){if(r){var D=M.deletions;D===null?(M.deletions=[k],M.flags|=16):D.push(k)}}function u(M,k){if(!r)return null;for(;k!==null;)i(M,k),k=k.sibling;return null}function h(M,k){for(M=new Map;k!==null;)k.key!==null?M.set(k.key,k):M.set(k.index,k),k=k.sibling;return M}function v(M,k){return M=Mn(M,k),M.index=0,M.sibling=null,M}function y(M,k,D){return M.index=D,r?(D=M.alternate,D!==null?(D=D.index,D<k?(M.flags|=2,k):D):(M.flags|=2,k)):(M.flags|=1048576,k)}function T(M){return r&&M.alternate===null&&(M.flags|=2),M}function I(M,k,D,q){return k===null||k.tag!==6?(k=Ja(D,M.mode,q),k.return=M,k):(k=v(k,D),k.return=M,k)}function R(M,k,D,q){var re=D.type;return re===W?V(M,k,D.props.children,q,D.key):k!==null&&(k.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Y&&qd(re)===k.type)?(q=v(k,D.props),q.ref=Co(M,k,D),q.return=M,q):(q=ts(D.type,D.key,D.props,null,M.mode,q),q.ref=Co(M,k,D),q.return=M,q)}function L(M,k,D,q){return k===null||k.tag!==4||k.stateNode.containerInfo!==D.containerInfo||k.stateNode.implementation!==D.implementation?(k=Wa(D,M.mode,q),k.return=M,k):(k=v(k,D.children||[]),k.return=M,k)}function V(M,k,D,q,re){return k===null||k.tag!==7?(k=Qn(D,M.mode,q,re),k.return=M,k):(k=v(k,D),k.return=M,k)}function B(M,k,D){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Ja(""+k,M.mode,D),k.return=M,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case H:return D=ts(k.type,k.key,k.props,null,M.mode,D),D.ref=Co(M,null,k),D.return=M,D;case z:return k=Wa(k,M.mode,D),k.return=M,k;case Y:var q=k._init;return B(M,q(k._payload),D)}if(Zr(k)||X(k))return k=Qn(k,M.mode,D,null),k.return=M,k;Pi(M,k)}return null}function $(M,k,D,q){var re=k!==null?k.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return re!==null?null:I(M,k,""+D,q);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case H:return D.key===re?R(M,k,D,q):null;case z:return D.key===re?L(M,k,D,q):null;case Y:return re=D._init,$(M,k,re(D._payload),q)}if(Zr(D)||X(D))return re!==null?null:V(M,k,D,q,null);Pi(M,D)}return null}function Q(M,k,D,q,re){if(typeof q=="string"&&q!==""||typeof q=="number")return M=M.get(D)||null,I(k,M,""+q,re);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case H:return M=M.get(q.key===null?D:q.key)||null,R(k,M,q,re);case z:return M=M.get(q.key===null?D:q.key)||null,L(k,M,q,re);case Y:var ie=q._init;return Q(M,k,D,ie(q._payload),re)}if(Zr(q)||X(q))return M=M.get(D)||null,V(k,M,q,re,null);Pi(k,q)}return null}function te(M,k,D,q){for(var re=null,ie=null,se=k,ce=k=0,Ye=null;se!==null&&ce<D.length;ce++){se.index>ce?(Ye=se,se=null):Ye=se.sibling;var Ee=$(M,se,D[ce],q);if(Ee===null){se===null&&(se=Ye);break}r&&se&&Ee.alternate===null&&i(M,se),k=y(Ee,k,ce),ie===null?re=Ee:ie.sibling=Ee,ie=Ee,se=Ye}if(ce===D.length)return u(M,se),Le&&qn(M,ce),re;if(se===null){for(;ce<D.length;ce++)se=B(M,D[ce],q),se!==null&&(k=y(se,k,ce),ie===null?re=se:ie.sibling=se,ie=se);return Le&&qn(M,ce),re}for(se=h(M,se);ce<D.length;ce++)Ye=Q(se,M,ce,D[ce],q),Ye!==null&&(r&&Ye.alternate!==null&&se.delete(Ye.key===null?ce:Ye.key),k=y(Ye,k,ce),ie===null?re=Ye:ie.sibling=Ye,ie=Ye);return r&&se.forEach(function(Dn){return i(M,Dn)}),Le&&qn(M,ce),re}function ne(M,k,D,q){var re=X(D);if(typeof re!="function")throw Error(n(150));if(D=re.call(D),D==null)throw Error(n(151));for(var ie=re=null,se=k,ce=k=0,Ye=null,Ee=D.next();se!==null&&!Ee.done;ce++,Ee=D.next()){se.index>ce?(Ye=se,se=null):Ye=se.sibling;var Dn=$(M,se,Ee.value,q);if(Dn===null){se===null&&(se=Ye);break}r&&se&&Dn.alternate===null&&i(M,se),k=y(Dn,k,ce),ie===null?re=Dn:ie.sibling=Dn,ie=Dn,se=Ye}if(Ee.done)return u(M,se),Le&&qn(M,ce),re;if(se===null){for(;!Ee.done;ce++,Ee=D.next())Ee=B(M,Ee.value,q),Ee!==null&&(k=y(Ee,k,ce),ie===null?re=Ee:ie.sibling=Ee,ie=Ee);return Le&&qn(M,ce),re}for(se=h(M,se);!Ee.done;ce++,Ee=D.next())Ee=Q(se,M,ce,Ee.value,q),Ee!==null&&(r&&Ee.alternate!==null&&se.delete(Ee.key===null?ce:Ee.key),k=y(Ee,k,ce),ie===null?re=Ee:ie.sibling=Ee,ie=Ee);return r&&se.forEach(function(K0){return i(M,K0)}),Le&&qn(M,ce),re}function Ge(M,k,D,q){if(typeof D=="object"&&D!==null&&D.type===W&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case H:e:{for(var re=D.key,ie=k;ie!==null;){if(ie.key===re){if(re=D.type,re===W){if(ie.tag===7){u(M,ie.sibling),k=v(ie,D.props.children),k.return=M,M=k;break e}}else if(ie.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Y&&qd(re)===ie.type){u(M,ie.sibling),k=v(ie,D.props),k.ref=Co(M,ie,D),k.return=M,M=k;break e}u(M,ie);break}else i(M,ie);ie=ie.sibling}D.type===W?(k=Qn(D.props.children,M.mode,q,D.key),k.return=M,M=k):(q=ts(D.type,D.key,D.props,null,M.mode,q),q.ref=Co(M,k,D),q.return=M,M=q)}return T(M);case z:e:{for(ie=D.key;k!==null;){if(k.key===ie)if(k.tag===4&&k.stateNode.containerInfo===D.containerInfo&&k.stateNode.implementation===D.implementation){u(M,k.sibling),k=v(k,D.children||[]),k.return=M,M=k;break e}else{u(M,k);break}else i(M,k);k=k.sibling}k=Wa(D,M.mode,q),k.return=M,M=k}return T(M);case Y:return ie=D._init,Ge(M,k,ie(D._payload),q)}if(Zr(D))return te(M,k,D,q);if(X(D))return ne(M,k,D,q);Pi(M,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,k!==null&&k.tag===6?(u(M,k.sibling),k=v(k,D),k.return=M,M=k):(u(M,k),k=Ja(D,M.mode,q),k.return=M,M=k),T(M)):u(M,k)}return Ge}var xr=Hd(!0),zd=Hd(!1),bi=Tn(null),Mi=null,Cr=null,na=null;function ra(){na=Cr=Mi=null}function oa(r){var i=bi.current;be(bi),r._currentValue=i}function ia(r,i,u){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===u)break;r=r.return}}function Ar(r,i){Mi=r,na=Cr=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(mt=!0),r.firstContext=null)}function kt(r){var i=r._currentValue;if(na!==r)if(r={context:r,memoizedValue:i,next:null},Cr===null){if(Mi===null)throw Error(n(308));Cr=r,Mi.dependencies={lanes:0,firstContext:r}}else Cr=Cr.next=r;return i}var Hn=null;function sa(r){Hn===null?Hn=[r]:Hn.push(r)}function Jd(r,i,u,h){var v=i.interleaved;return v===null?(u.next=u,sa(i)):(u.next=v.next,v.next=u),i.interleaved=u,on(r,h)}function on(r,i){r.lanes|=i;var u=r.alternate;for(u!==null&&(u.lanes|=i),u=r,r=r.return;r!==null;)r.childLanes|=i,u=r.alternate,u!==null&&(u.childLanes|=i),u=r,r=r.return;return u.tag===3?u.stateNode:null}var An=!1;function la(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wd(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function sn(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function In(r,i,u){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(we&2)!==0){var v=h.pending;return v===null?i.next=i:(i.next=v.next,v.next=i),h.pending=i,on(r,u)}return v=h.interleaved,v===null?(i.next=i,sa(h)):(i.next=v.next,v.next=i),h.interleaved=i,on(r,u)}function Di(r,i,u){if(i=i.updateQueue,i!==null&&(i=i.shared,(u&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,u|=h,i.lanes=u,El(r,u)}}function jd(r,i){var u=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var v=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?v=y=T:y=y.next=T,u=u.next}while(u!==null);y===null?v=y=i:y=y.next=i}else v=y=i;u={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:y,shared:h.shared,effects:h.effects},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=i:r.next=i,u.lastBaseUpdate=i}function Li(r,i,u,h){var v=r.updateQueue;An=!1;var y=v.firstBaseUpdate,T=v.lastBaseUpdate,I=v.shared.pending;if(I!==null){v.shared.pending=null;var R=I,L=R.next;R.next=null,T===null?y=L:T.next=L,T=R;var V=r.alternate;V!==null&&(V=V.updateQueue,I=V.lastBaseUpdate,I!==T&&(I===null?V.firstBaseUpdate=L:I.next=L,V.lastBaseUpdate=R))}if(y!==null){var B=v.baseState;T=0,V=L=R=null,I=y;do{var $=I.lane,Q=I.eventTime;if((h&$)===$){V!==null&&(V=V.next={eventTime:Q,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var te=r,ne=I;switch($=i,Q=u,ne.tag){case 1:if(te=ne.payload,typeof te=="function"){B=te.call(Q,B,$);break e}B=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=ne.payload,$=typeof te=="function"?te.call(Q,B,$):te,$==null)break e;B=J({},B,$);break e;case 2:An=!0}}I.callback!==null&&I.lane!==0&&(r.flags|=64,$=v.effects,$===null?v.effects=[I]:$.push(I))}else Q={eventTime:Q,lane:$,tag:I.tag,payload:I.payload,callback:I.callback,next:null},V===null?(L=V=Q,R=B):V=V.next=Q,T|=$;if(I=I.next,I===null){if(I=v.shared.pending,I===null)break;$=I,I=$.next,$.next=null,v.lastBaseUpdate=$,v.shared.pending=null}}while(!0);if(V===null&&(R=B),v.baseState=R,v.firstBaseUpdate=L,v.lastBaseUpdate=V,i=v.shared.interleaved,i!==null){v=i;do T|=v.lane,v=v.next;while(v!==i)}else y===null&&(v.shared.lanes=0);Wn|=T,r.lanes=T,r.memoizedState=B}}function Kd(r,i,u){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],v=h.callback;if(v!==null){if(h.callback=null,h=u,typeof v!="function")throw Error(n(191,v));v.call(h)}}}var Ao={},Yt=Tn(Ao),Io=Tn(Ao),Ro=Tn(Ao);function zn(r){if(r===Ao)throw Error(n(174));return r}function aa(r,i){switch(ke(Ro,i),ke(Io,r),ke(Yt,Ao),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ul(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=ul(i,r)}be(Yt),ke(Yt,i)}function Ir(){be(Yt),be(Io),be(Ro)}function Yd(r){zn(Ro.current);var i=zn(Yt.current),u=ul(i,r.type);i!==u&&(ke(Io,r),ke(Yt,u))}function ua(r){Io.current===r&&(be(Yt),be(Io))}var Oe=Tn(0);function Ui(r){for(var i=r;i!==null;){if(i.tag===13){var u=i.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ca=[];function da(){for(var r=0;r<ca.length;r++)ca[r]._workInProgressVersionPrimary=null;ca.length=0}var Oi=O.ReactCurrentDispatcher,fa=O.ReactCurrentBatchConfig,Jn=0,Fe=null,Je=null,je=null,Fi=!1,ko=!1,No=0,v0=0;function rt(){throw Error(n(321))}function ha(r,i){if(i===null)return!1;for(var u=0;u<i.length&&u<r.length;u++)if(!Ut(r[u],i[u]))return!1;return!0}function pa(r,i,u,h,v,y){if(Jn=y,Fe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Oi.current=r===null||r.memoizedState===null?E0:S0,r=u(h,v),ko){y=0;do{if(ko=!1,No=0,25<=y)throw Error(n(301));y+=1,je=Je=null,i.updateQueue=null,Oi.current=T0,r=u(h,v)}while(ko)}if(Oi.current=Bi,i=Je!==null&&Je.next!==null,Jn=0,je=Je=Fe=null,Fi=!1,i)throw Error(n(300));return r}function ma(){var r=No!==0;return No=0,r}function Qt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?Fe.memoizedState=je=r:je=je.next=r,je}function Nt(){if(Je===null){var r=Fe.alternate;r=r!==null?r.memoizedState:null}else r=Je.next;var i=je===null?Fe.memoizedState:je.next;if(i!==null)je=i,Je=r;else{if(r===null)throw Error(n(310));Je=r,r={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},je===null?Fe.memoizedState=je=r:je=je.next=r}return je}function Po(r,i){return typeof i=="function"?i(r):i}function ga(r){var i=Nt(),u=i.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=r;var h=Je,v=h.baseQueue,y=u.pending;if(y!==null){if(v!==null){var T=v.next;v.next=y.next,y.next=T}h.baseQueue=v=y,u.pending=null}if(v!==null){y=v.next,h=h.baseState;var I=T=null,R=null,L=y;do{var V=L.lane;if((Jn&V)===V)R!==null&&(R=R.next={lane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),h=L.hasEagerState?L.eagerState:r(h,L.action);else{var B={lane:V,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null};R===null?(I=R=B,T=h):R=R.next=B,Fe.lanes|=V,Wn|=V}L=L.next}while(L!==null&&L!==y);R===null?T=h:R.next=I,Ut(h,i.memoizedState)||(mt=!0),i.memoizedState=h,i.baseState=T,i.baseQueue=R,u.lastRenderedState=h}if(r=u.interleaved,r!==null){v=r;do y=v.lane,Fe.lanes|=y,Wn|=y,v=v.next;while(v!==r)}else v===null&&(u.lanes=0);return[i.memoizedState,u.dispatch]}function va(r){var i=Nt(),u=i.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=r;var h=u.dispatch,v=u.pending,y=i.memoizedState;if(v!==null){u.pending=null;var T=v=v.next;do y=r(y,T.action),T=T.next;while(T!==v);Ut(y,i.memoizedState)||(mt=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),u.lastRenderedState=y}return[y,h]}function Qd(){}function Xd(r,i){var u=Fe,h=Nt(),v=i(),y=!Ut(h.memoizedState,v);if(y&&(h.memoizedState=v,mt=!0),h=h.queue,ya(tf.bind(null,u,h,r),[r]),h.getSnapshot!==i||y||je!==null&&je.memoizedState.tag&1){if(u.flags|=2048,bo(9,ef.bind(null,u,h,v,i),void 0,null),Ke===null)throw Error(n(349));(Jn&30)!==0||Zd(u,i,v)}return v}function Zd(r,i,u){r.flags|=16384,r={getSnapshot:i,value:u},i=Fe.updateQueue,i===null?(i={lastEffect:null,stores:null},Fe.updateQueue=i,i.stores=[r]):(u=i.stores,u===null?i.stores=[r]:u.push(r))}function ef(r,i,u,h){i.value=u,i.getSnapshot=h,nf(i)&&rf(r)}function tf(r,i,u){return u(function(){nf(i)&&rf(r)})}function nf(r){var i=r.getSnapshot;r=r.value;try{var u=i();return!Ut(r,u)}catch{return!0}}function rf(r){var i=on(r,1);i!==null&&Bt(i,r,1,-1)}function of(r){var i=Qt();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:r},i.queue=r,r=r.dispatch=w0.bind(null,Fe,r),[i.memoizedState,r]}function bo(r,i,u,h){return r={tag:r,create:i,destroy:u,deps:h,next:null},i=Fe.updateQueue,i===null?(i={lastEffect:null,stores:null},Fe.updateQueue=i,i.lastEffect=r.next=r):(u=i.lastEffect,u===null?i.lastEffect=r.next=r:(h=u.next,u.next=r,r.next=h,i.lastEffect=r)),r}function sf(){return Nt().memoizedState}function $i(r,i,u,h){var v=Qt();Fe.flags|=r,v.memoizedState=bo(1|i,u,void 0,h===void 0?null:h)}function Vi(r,i,u,h){var v=Nt();h=h===void 0?null:h;var y=void 0;if(Je!==null){var T=Je.memoizedState;if(y=T.destroy,h!==null&&ha(h,T.deps)){v.memoizedState=bo(i,u,y,h);return}}Fe.flags|=r,v.memoizedState=bo(1|i,u,y,h)}function lf(r,i){return $i(8390656,8,r,i)}function ya(r,i){return Vi(2048,8,r,i)}function af(r,i){return Vi(4,2,r,i)}function uf(r,i){return Vi(4,4,r,i)}function cf(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function df(r,i,u){return u=u!=null?u.concat([r]):null,Vi(4,4,cf.bind(null,i,r),u)}function _a(){}function ff(r,i){var u=Nt();i=i===void 0?null:i;var h=u.memoizedState;return h!==null&&i!==null&&ha(i,h[1])?h[0]:(u.memoizedState=[r,i],r)}function hf(r,i){var u=Nt();i=i===void 0?null:i;var h=u.memoizedState;return h!==null&&i!==null&&ha(i,h[1])?h[0]:(r=r(),u.memoizedState=[r,i],r)}function pf(r,i,u){return(Jn&21)===0?(r.baseState&&(r.baseState=!1,mt=!0),r.memoizedState=u):(Ut(u,i)||(u=qc(),Fe.lanes|=u,Wn|=u,r.baseState=!0),i)}function y0(r,i){var u=Ce;Ce=u!==0&&4>u?u:4,r(!0);var h=fa.transition;fa.transition={};try{r(!1),i()}finally{Ce=u,fa.transition=h}}function mf(){return Nt().memoizedState}function _0(r,i,u){var h=Pn(r);if(u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},gf(r))vf(i,u);else if(u=Jd(r,i,u,h),u!==null){var v=ct();Bt(u,r,h,v),yf(u,i,h)}}function w0(r,i,u){var h=Pn(r),v={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(gf(r))vf(i,v);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var T=i.lastRenderedState,I=y(T,u);if(v.hasEagerState=!0,v.eagerState=I,Ut(I,T)){var R=i.interleaved;R===null?(v.next=v,sa(i)):(v.next=R.next,R.next=v),i.interleaved=v;return}}catch{}finally{}u=Jd(r,i,v,h),u!==null&&(v=ct(),Bt(u,r,h,v),yf(u,i,h))}}function gf(r){var i=r.alternate;return r===Fe||i!==null&&i===Fe}function vf(r,i){ko=Fi=!0;var u=r.pending;u===null?i.next=i:(i.next=u.next,u.next=i),r.pending=i}function yf(r,i,u){if((u&4194240)!==0){var h=i.lanes;h&=r.pendingLanes,u|=h,i.lanes=u,El(r,u)}}var Bi={readContext:kt,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},E0={readContext:kt,useCallback:function(r,i){return Qt().memoizedState=[r,i===void 0?null:i],r},useContext:kt,useEffect:lf,useImperativeHandle:function(r,i,u){return u=u!=null?u.concat([r]):null,$i(4194308,4,cf.bind(null,i,r),u)},useLayoutEffect:function(r,i){return $i(4194308,4,r,i)},useInsertionEffect:function(r,i){return $i(4,2,r,i)},useMemo:function(r,i){var u=Qt();return i=i===void 0?null:i,r=r(),u.memoizedState=[r,i],r},useReducer:function(r,i,u){var h=Qt();return i=u!==void 0?u(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=_0.bind(null,Fe,r),[h.memoizedState,r]},useRef:function(r){var i=Qt();return r={current:r},i.memoizedState=r},useState:of,useDebugValue:_a,useDeferredValue:function(r){return Qt().memoizedState=r},useTransition:function(){var r=of(!1),i=r[0];return r=y0.bind(null,r[1]),Qt().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,u){var h=Fe,v=Qt();if(Le){if(u===void 0)throw Error(n(407));u=u()}else{if(u=i(),Ke===null)throw Error(n(349));(Jn&30)!==0||Zd(h,i,u)}v.memoizedState=u;var y={value:u,getSnapshot:i};return v.queue=y,lf(tf.bind(null,h,y,r),[r]),h.flags|=2048,bo(9,ef.bind(null,h,y,u,i),void 0,null),u},useId:function(){var r=Qt(),i=Ke.identifierPrefix;if(Le){var u=rn,h=nn;u=(h&~(1<<32-Lt(h)-1)).toString(32)+u,i=":"+i+"R"+u,u=No++,0<u&&(i+="H"+u.toString(32)),i+=":"}else u=v0++,i=":"+i+"r"+u.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},S0={readContext:kt,useCallback:ff,useContext:kt,useEffect:ya,useImperativeHandle:df,useInsertionEffect:af,useLayoutEffect:uf,useMemo:hf,useReducer:ga,useRef:sf,useState:function(){return ga(Po)},useDebugValue:_a,useDeferredValue:function(r){var i=Nt();return pf(i,Je.memoizedState,r)},useTransition:function(){var r=ga(Po)[0],i=Nt().memoizedState;return[r,i]},useMutableSource:Qd,useSyncExternalStore:Xd,useId:mf,unstable_isNewReconciler:!1},T0={readContext:kt,useCallback:ff,useContext:kt,useEffect:ya,useImperativeHandle:df,useInsertionEffect:af,useLayoutEffect:uf,useMemo:hf,useReducer:va,useRef:sf,useState:function(){return va(Po)},useDebugValue:_a,useDeferredValue:function(r){var i=Nt();return Je===null?i.memoizedState=r:pf(i,Je.memoizedState,r)},useTransition:function(){var r=va(Po)[0],i=Nt().memoizedState;return[r,i]},useMutableSource:Qd,useSyncExternalStore:Xd,useId:mf,unstable_isNewReconciler:!1};function Ft(r,i){if(r&&r.defaultProps){i=J({},i),r=r.defaultProps;for(var u in r)i[u]===void 0&&(i[u]=r[u]);return i}return i}function wa(r,i,u,h){i=r.memoizedState,u=u(h,i),u=u==null?i:J({},i,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Gi={isMounted:function(r){return(r=r._reactInternals)?$n(r)===r:!1},enqueueSetState:function(r,i,u){r=r._reactInternals;var h=ct(),v=Pn(r),y=sn(h,v);y.payload=i,u!=null&&(y.callback=u),i=In(r,y,v),i!==null&&(Bt(i,r,v,h),Di(i,r,v))},enqueueReplaceState:function(r,i,u){r=r._reactInternals;var h=ct(),v=Pn(r),y=sn(h,v);y.tag=1,y.payload=i,u!=null&&(y.callback=u),i=In(r,y,v),i!==null&&(Bt(i,r,v,h),Di(i,r,v))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var u=ct(),h=Pn(r),v=sn(u,h);v.tag=2,i!=null&&(v.callback=i),i=In(r,v,h),i!==null&&(Bt(i,r,h,u),Di(i,r,h))}};function _f(r,i,u,h,v,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,T):i.prototype&&i.prototype.isPureReactComponent?!yo(u,h)||!yo(v,y):!0}function wf(r,i,u){var h=!1,v=xn,y=i.contextType;return typeof y=="object"&&y!==null?y=kt(y):(v=pt(i)?Bn:nt.current,h=i.contextTypes,y=(h=h!=null)?wr(r,v):xn),i=new i(u,y),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Gi,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=v,r.__reactInternalMemoizedMaskedChildContext=y),i}function Ef(r,i,u,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(u,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(u,h),i.state!==r&&Gi.enqueueReplaceState(i,i.state,null)}function Ea(r,i,u,h){var v=r.stateNode;v.props=u,v.state=r.memoizedState,v.refs={},la(r);var y=i.contextType;typeof y=="object"&&y!==null?v.context=kt(y):(y=pt(i)?Bn:nt.current,v.context=wr(r,y)),v.state=r.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(wa(r,i,y,u),v.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(i=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),i!==v.state&&Gi.enqueueReplaceState(v,v.state,null),Li(r,u,v,h),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308)}function Rr(r,i){try{var u="",h=i;do u+=ye(h),h=h.return;while(h);var v=u}catch(y){v=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:i,stack:v,digest:null}}function Sa(r,i,u){return{value:r,source:null,stack:u??null,digest:i??null}}function Ta(r,i){try{console.error(i.value)}catch(u){setTimeout(function(){throw u})}}var x0=typeof WeakMap=="function"?WeakMap:Map;function Sf(r,i,u){u=sn(-1,u),u.tag=3,u.payload={element:null};var h=i.value;return u.callback=function(){Ki||(Ki=!0,Fa=h),Ta(r,i)},u}function Tf(r,i,u){u=sn(-1,u),u.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var v=i.value;u.payload=function(){return h(v)},u.callback=function(){Ta(r,i)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Ta(r,i),typeof h!="function"&&(kn===null?kn=new Set([this]):kn.add(this));var T=i.stack;this.componentDidCatch(i.value,{componentStack:T!==null?T:""})}),u}function xf(r,i,u){var h=r.pingCache;if(h===null){h=r.pingCache=new x0;var v=new Set;h.set(i,v)}else v=h.get(i),v===void 0&&(v=new Set,h.set(i,v));v.has(u)||(v.add(u),r=F0.bind(null,r,i,u),i.then(r,r))}function Cf(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Af(r,i,u,h,v){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(i=sn(-1,1),i.tag=2,In(u,i,1))),u.lanes|=1),r):(r.flags|=65536,r.lanes=v,r)}var C0=O.ReactCurrentOwner,mt=!1;function ut(r,i,u,h){i.child=r===null?zd(i,null,u,h):xr(i,r.child,u,h)}function If(r,i,u,h,v){u=u.render;var y=i.ref;return Ar(i,v),h=pa(r,i,u,h,y,v),u=ma(),r!==null&&!mt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~v,ln(r,i,v)):(Le&&u&&Ql(i),i.flags|=1,ut(r,i,h,v),i.child)}function Rf(r,i,u,h,v){if(r===null){var y=u.type;return typeof y=="function"&&!za(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(i.tag=15,i.type=y,kf(r,i,y,h,v)):(r=ts(u.type,null,h,i,i.mode,v),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,(r.lanes&v)===0){var T=y.memoizedProps;if(u=u.compare,u=u!==null?u:yo,u(T,h)&&r.ref===i.ref)return ln(r,i,v)}return i.flags|=1,r=Mn(y,h),r.ref=i.ref,r.return=i,i.child=r}function kf(r,i,u,h,v){if(r!==null){var y=r.memoizedProps;if(yo(y,h)&&r.ref===i.ref)if(mt=!1,i.pendingProps=h=y,(r.lanes&v)!==0)(r.flags&131072)!==0&&(mt=!0);else return i.lanes=r.lanes,ln(r,i,v)}return xa(r,i,u,h,v)}function Nf(r,i,u){var h=i.pendingProps,v=h.children,y=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Nr,Ct),Ct|=u;else{if((u&1073741824)===0)return r=y!==null?y.baseLanes|u:u,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,ke(Nr,Ct),Ct|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:u,ke(Nr,Ct),Ct|=h}else y!==null?(h=y.baseLanes|u,i.memoizedState=null):h=u,ke(Nr,Ct),Ct|=h;return ut(r,i,v,u),i.child}function Pf(r,i){var u=i.ref;(r===null&&u!==null||r!==null&&r.ref!==u)&&(i.flags|=512,i.flags|=2097152)}function xa(r,i,u,h,v){var y=pt(u)?Bn:nt.current;return y=wr(i,y),Ar(i,v),u=pa(r,i,u,h,y,v),h=ma(),r!==null&&!mt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~v,ln(r,i,v)):(Le&&h&&Ql(i),i.flags|=1,ut(r,i,u,v),i.child)}function bf(r,i,u,h,v){if(pt(u)){var y=!0;Ai(i)}else y=!1;if(Ar(i,v),i.stateNode===null)Hi(r,i),wf(i,u,h),Ea(i,u,h,v),h=!0;else if(r===null){var T=i.stateNode,I=i.memoizedProps;T.props=I;var R=T.context,L=u.contextType;typeof L=="object"&&L!==null?L=kt(L):(L=pt(u)?Bn:nt.current,L=wr(i,L));var V=u.getDerivedStateFromProps,B=typeof V=="function"||typeof T.getSnapshotBeforeUpdate=="function";B||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(I!==h||R!==L)&&Ef(i,T,h,L),An=!1;var $=i.memoizedState;T.state=$,Li(i,h,T,v),R=i.memoizedState,I!==h||$!==R||ht.current||An?(typeof V=="function"&&(wa(i,u,V,h),R=i.memoizedState),(I=An||_f(i,u,I,h,$,R,L))?(B||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(i.flags|=4194308)):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=R),T.props=h,T.state=R,T.context=L,h=I):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{T=i.stateNode,Wd(r,i),I=i.memoizedProps,L=i.type===i.elementType?I:Ft(i.type,I),T.props=L,B=i.pendingProps,$=T.context,R=u.contextType,typeof R=="object"&&R!==null?R=kt(R):(R=pt(u)?Bn:nt.current,R=wr(i,R));var Q=u.getDerivedStateFromProps;(V=typeof Q=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(I!==B||$!==R)&&Ef(i,T,h,R),An=!1,$=i.memoizedState,T.state=$,Li(i,h,T,v);var te=i.memoizedState;I!==B||$!==te||ht.current||An?(typeof Q=="function"&&(wa(i,u,Q,h),te=i.memoizedState),(L=An||_f(i,u,L,h,$,te,R)||!1)?(V||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,te,R),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,te,R)),typeof T.componentDidUpdate=="function"&&(i.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof T.componentDidUpdate!="function"||I===r.memoizedProps&&$===r.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&$===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=te),T.props=h,T.state=te,T.context=R,h=L):(typeof T.componentDidUpdate!="function"||I===r.memoizedProps&&$===r.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&$===r.memoizedState||(i.flags|=1024),h=!1)}return Ca(r,i,u,h,y,v)}function Ca(r,i,u,h,v,y){Pf(r,i);var T=(i.flags&128)!==0;if(!h&&!T)return v&&Ud(i,u,!1),ln(r,i,y);h=i.stateNode,C0.current=i;var I=T&&typeof u.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&T?(i.child=xr(i,r.child,null,y),i.child=xr(i,null,I,y)):ut(r,i,I,y),i.memoizedState=h.state,v&&Ud(i,u,!0),i.child}function Mf(r){var i=r.stateNode;i.pendingContext?Dd(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Dd(r,i.context,!1),aa(r,i.containerInfo)}function Df(r,i,u,h,v){return Tr(),ta(v),i.flags|=256,ut(r,i,u,h),i.child}var Aa={dehydrated:null,treeContext:null,retryLane:0};function Ia(r){return{baseLanes:r,cachePool:null,transitions:null}}function Lf(r,i,u){var h=i.pendingProps,v=Oe.current,y=!1,T=(i.flags&128)!==0,I;if((I=T)||(I=r!==null&&r.memoizedState===null?!1:(v&2)!==0),I?(y=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(v|=1),ke(Oe,v&1),r===null)return ea(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(T=h.children,r=h.fallback,y?(h=i.mode,y=i.child,T={mode:"hidden",children:T},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=T):y=ns(T,h,0,null),r=Qn(r,h,u,null),y.return=i,r.return=i,y.sibling=r,i.child=y,i.child.memoizedState=Ia(u),i.memoizedState=Aa,r):Ra(i,T));if(v=r.memoizedState,v!==null&&(I=v.dehydrated,I!==null))return A0(r,i,T,h,I,v,u);if(y){y=h.fallback,T=i.mode,v=r.child,I=v.sibling;var R={mode:"hidden",children:h.children};return(T&1)===0&&i.child!==v?(h=i.child,h.childLanes=0,h.pendingProps=R,i.deletions=null):(h=Mn(v,R),h.subtreeFlags=v.subtreeFlags&14680064),I!==null?y=Mn(I,y):(y=Qn(y,T,u,null),y.flags|=2),y.return=i,h.return=i,h.sibling=y,i.child=h,h=y,y=i.child,T=r.child.memoizedState,T=T===null?Ia(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},y.memoizedState=T,y.childLanes=r.childLanes&~u,i.memoizedState=Aa,h}return y=r.child,r=y.sibling,h=Mn(y,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=u),h.return=i,h.sibling=null,r!==null&&(u=i.deletions,u===null?(i.deletions=[r],i.flags|=16):u.push(r)),i.child=h,i.memoizedState=null,h}function Ra(r,i){return i=ns({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function qi(r,i,u,h){return h!==null&&ta(h),xr(i,r.child,null,u),r=Ra(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function A0(r,i,u,h,v,y,T){if(u)return i.flags&256?(i.flags&=-257,h=Sa(Error(n(422))),qi(r,i,T,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(y=h.fallback,v=i.mode,h=ns({mode:"visible",children:h.children},v,0,null),y=Qn(y,v,T,null),y.flags|=2,h.return=i,y.return=i,h.sibling=y,i.child=h,(i.mode&1)!==0&&xr(i,r.child,null,T),i.child.memoizedState=Ia(T),i.memoizedState=Aa,y);if((i.mode&1)===0)return qi(r,i,T,null);if(v.data==="$!"){if(h=v.nextSibling&&v.nextSibling.dataset,h)var I=h.dgst;return h=I,y=Error(n(419)),h=Sa(y,h,void 0),qi(r,i,T,h)}if(I=(T&r.childLanes)!==0,mt||I){if(h=Ke,h!==null){switch(T&-T){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(h.suspendedLanes|T))!==0?0:v,v!==0&&v!==y.retryLane&&(y.retryLane=v,on(r,v),Bt(h,r,v,-1))}return Ha(),h=Sa(Error(n(421))),qi(r,i,T,h)}return v.data==="$?"?(i.flags|=128,i.child=r.child,i=$0.bind(null,r),v._reactRetry=i,null):(r=y.treeContext,xt=Sn(v.nextSibling),Tt=i,Le=!0,Ot=null,r!==null&&(It[Rt++]=nn,It[Rt++]=rn,It[Rt++]=Gn,nn=r.id,rn=r.overflow,Gn=i),i=Ra(i,h.children),i.flags|=4096,i)}function Uf(r,i,u){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),ia(r.return,i,u)}function ka(r,i,u,h,v){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:v}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=u,y.tailMode=v)}function Of(r,i,u){var h=i.pendingProps,v=h.revealOrder,y=h.tail;if(ut(r,i,h.children,u),h=Oe.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Uf(r,u,i);else if(r.tag===19)Uf(r,u,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(ke(Oe,h),(i.mode&1)===0)i.memoizedState=null;else switch(v){case"forwards":for(u=i.child,v=null;u!==null;)r=u.alternate,r!==null&&Ui(r)===null&&(v=u),u=u.sibling;u=v,u===null?(v=i.child,i.child=null):(v=u.sibling,u.sibling=null),ka(i,!1,v,u,y);break;case"backwards":for(u=null,v=i.child,i.child=null;v!==null;){if(r=v.alternate,r!==null&&Ui(r)===null){i.child=v;break}r=v.sibling,v.sibling=u,u=v,v=r}ka(i,!0,u,null,y);break;case"together":ka(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Hi(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function ln(r,i,u){if(r!==null&&(i.dependencies=r.dependencies),Wn|=i.lanes,(u&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(n(153));if(i.child!==null){for(r=i.child,u=Mn(r,r.pendingProps),i.child=u,u.return=i;r.sibling!==null;)r=r.sibling,u=u.sibling=Mn(r,r.pendingProps),u.return=i;u.sibling=null}return i.child}function I0(r,i,u){switch(i.tag){case 3:Mf(i),Tr();break;case 5:Yd(i);break;case 1:pt(i.type)&&Ai(i);break;case 4:aa(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,v=i.memoizedProps.value;ke(bi,h._currentValue),h._currentValue=v;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(ke(Oe,Oe.current&1),i.flags|=128,null):(u&i.child.childLanes)!==0?Lf(r,i,u):(ke(Oe,Oe.current&1),r=ln(r,i,u),r!==null?r.sibling:null);ke(Oe,Oe.current&1);break;case 19:if(h=(u&i.childLanes)!==0,(r.flags&128)!==0){if(h)return Of(r,i,u);i.flags|=128}if(v=i.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ke(Oe,Oe.current),h)break;return null;case 22:case 23:return i.lanes=0,Nf(r,i,u)}return ln(r,i,u)}var Ff,Na,$f,Vf;Ff=function(r,i){for(var u=i.child;u!==null;){if(u.tag===5||u.tag===6)r.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Na=function(){},$f=function(r,i,u,h){var v=r.memoizedProps;if(v!==h){r=i.stateNode,zn(Yt.current);var y=null;switch(u){case"input":v=il(r,v),h=il(r,h),y=[];break;case"select":v=J({},v,{value:void 0}),h=J({},h,{value:void 0}),y=[];break;case"textarea":v=al(r,v),h=al(r,h),y=[];break;default:typeof v.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Ti)}cl(u,h);var T;u=null;for(L in v)if(!h.hasOwnProperty(L)&&v.hasOwnProperty(L)&&v[L]!=null)if(L==="style"){var I=v[L];for(T in I)I.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else L!=="dangerouslySetInnerHTML"&&L!=="children"&&L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(s.hasOwnProperty(L)?y||(y=[]):(y=y||[]).push(L,null));for(L in h){var R=h[L];if(I=v?.[L],h.hasOwnProperty(L)&&R!==I&&(R!=null||I!=null))if(L==="style")if(I){for(T in I)!I.hasOwnProperty(T)||R&&R.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in R)R.hasOwnProperty(T)&&I[T]!==R[T]&&(u||(u={}),u[T]=R[T])}else u||(y||(y=[]),y.push(L,u)),u=R;else L==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,I=I?I.__html:void 0,R!=null&&I!==R&&(y=y||[]).push(L,R)):L==="children"?typeof R!="string"&&typeof R!="number"||(y=y||[]).push(L,""+R):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&(s.hasOwnProperty(L)?(R!=null&&L==="onScroll"&&Pe("scroll",r),y||I===R||(y=[])):(y=y||[]).push(L,R))}u&&(y=y||[]).push("style",u);var L=y;(i.updateQueue=L)&&(i.flags|=4)}},Vf=function(r,i,u,h){u!==h&&(i.flags|=4)};function Mo(r,i){if(!Le)switch(r.tailMode){case"hidden":i=r.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function ot(r){var i=r.alternate!==null&&r.alternate.child===r.child,u=0,h=0;if(i)for(var v=r.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags&14680064,h|=v.flags&14680064,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=h,r.childLanes=u,i}function R0(r,i,u){var h=i.pendingProps;switch(Xl(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(i),null;case 1:return pt(i.type)&&Ci(),ot(i),null;case 3:return h=i.stateNode,Ir(),be(ht),be(nt),da(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Ni(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ot!==null&&(Ba(Ot),Ot=null))),Na(r,i),ot(i),null;case 5:ua(i);var v=zn(Ro.current);if(u=i.type,r!==null&&i.stateNode!=null)$f(r,i,u,h,v),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(n(166));return ot(i),null}if(r=zn(Yt.current),Ni(i)){h=i.stateNode,u=i.type;var y=i.memoizedProps;switch(h[Kt]=i,h[To]=y,r=(i.mode&1)!==0,u){case"dialog":Pe("cancel",h),Pe("close",h);break;case"iframe":case"object":case"embed":Pe("load",h);break;case"video":case"audio":for(v=0;v<wo.length;v++)Pe(wo[v],h);break;case"source":Pe("error",h);break;case"img":case"image":case"link":Pe("error",h),Pe("load",h);break;case"details":Pe("toggle",h);break;case"input":_c(h,y),Pe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},Pe("invalid",h);break;case"textarea":Sc(h,y),Pe("invalid",h)}cl(u,y),v=null;for(var T in y)if(y.hasOwnProperty(T)){var I=y[T];T==="children"?typeof I=="string"?h.textContent!==I&&(y.suppressHydrationWarning!==!0&&Si(h.textContent,I,r),v=["children",I]):typeof I=="number"&&h.textContent!==""+I&&(y.suppressHydrationWarning!==!0&&Si(h.textContent,I,r),v=["children",""+I]):s.hasOwnProperty(T)&&I!=null&&T==="onScroll"&&Pe("scroll",h)}switch(u){case"input":Zo(h),Ec(h,y,!0);break;case"textarea":Zo(h),xc(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Ti)}h=v,i.updateQueue=h,h!==null&&(i.flags|=4)}else{T=v.nodeType===9?v:v.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Cc(u)),r==="http://www.w3.org/1999/xhtml"?u==="script"?(r=T.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=T.createElement(u,{is:h.is}):(r=T.createElement(u),u==="select"&&(T=r,h.multiple?T.multiple=!0:h.size&&(T.size=h.size))):r=T.createElementNS(r,u),r[Kt]=i,r[To]=h,Ff(r,i,!1,!1),i.stateNode=r;e:{switch(T=dl(u,h),u){case"dialog":Pe("cancel",r),Pe("close",r),v=h;break;case"iframe":case"object":case"embed":Pe("load",r),v=h;break;case"video":case"audio":for(v=0;v<wo.length;v++)Pe(wo[v],r);v=h;break;case"source":Pe("error",r),v=h;break;case"img":case"image":case"link":Pe("error",r),Pe("load",r),v=h;break;case"details":Pe("toggle",r),v=h;break;case"input":_c(r,h),v=il(r,h),Pe("invalid",r);break;case"option":v=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},v=J({},h,{value:void 0}),Pe("invalid",r);break;case"textarea":Sc(r,h),v=al(r,h),Pe("invalid",r);break;default:v=h}cl(u,v),I=v;for(y in I)if(I.hasOwnProperty(y)){var R=I[y];y==="style"?Rc(r,R):y==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Ac(r,R)):y==="children"?typeof R=="string"?(u!=="textarea"||R!=="")&&eo(r,R):typeof R=="number"&&eo(r,""+R):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?R!=null&&y==="onScroll"&&Pe("scroll",r):R!=null&&b(r,y,R,T))}switch(u){case"input":Zo(r),Ec(r,h,!1);break;case"textarea":Zo(r),xc(r);break;case"option":h.value!=null&&r.setAttribute("value",""+xe(h.value));break;case"select":r.multiple=!!h.multiple,y=h.value,y!=null?ar(r,!!h.multiple,y,!1):h.defaultValue!=null&&ar(r,!!h.multiple,h.defaultValue,!0);break;default:typeof v.onClick=="function"&&(r.onclick=Ti)}switch(u){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ot(i),null;case 6:if(r&&i.stateNode!=null)Vf(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(n(166));if(u=zn(Ro.current),zn(Yt.current),Ni(i)){if(h=i.stateNode,u=i.memoizedProps,h[Kt]=i,(y=h.nodeValue!==u)&&(r=Tt,r!==null))switch(r.tag){case 3:Si(h.nodeValue,u,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Si(h.nodeValue,u,(r.mode&1)!==0)}y&&(i.flags|=4)}else h=(u.nodeType===9?u:u.ownerDocument).createTextNode(h),h[Kt]=i,i.stateNode=h}return ot(i),null;case 13:if(be(Oe),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Le&&xt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Gd(),Tr(),i.flags|=98560,y=!1;else if(y=Ni(i),h!==null&&h.dehydrated!==null){if(r===null){if(!y)throw Error(n(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[Kt]=i}else Tr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),y=!1}else Ot!==null&&(Ba(Ot),Ot=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=u,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Oe.current&1)!==0?We===0&&(We=3):Ha())),i.updateQueue!==null&&(i.flags|=4),ot(i),null);case 4:return Ir(),Na(r,i),r===null&&Eo(i.stateNode.containerInfo),ot(i),null;case 10:return oa(i.type._context),ot(i),null;case 17:return pt(i.type)&&Ci(),ot(i),null;case 19:if(be(Oe),y=i.memoizedState,y===null)return ot(i),null;if(h=(i.flags&128)!==0,T=y.rendering,T===null)if(h)Mo(y,!1);else{if(We!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(T=Ui(r),T!==null){for(i.flags|=128,Mo(y,!1),h=T.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=u,u=i.child;u!==null;)y=u,r=h,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,r=T.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),u=u.sibling;return ke(Oe,Oe.current&1|2),i.child}r=r.sibling}y.tail!==null&&Be()>Pr&&(i.flags|=128,h=!0,Mo(y,!1),i.lanes=4194304)}else{if(!h)if(r=Ui(T),r!==null){if(i.flags|=128,h=!0,u=r.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),Mo(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!Le)return ot(i),null}else 2*Be()-y.renderingStartTime>Pr&&u!==1073741824&&(i.flags|=128,h=!0,Mo(y,!1),i.lanes=4194304);y.isBackwards?(T.sibling=i.child,i.child=T):(u=y.last,u!==null?u.sibling=T:i.child=T,y.last=T)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=Be(),i.sibling=null,u=Oe.current,ke(Oe,h?u&1|2:u&1),i):(ot(i),null);case 22:case 23:return qa(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(Ct&1073741824)!==0&&(ot(i),i.subtreeFlags&6&&(i.flags|=8192)):ot(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function k0(r,i){switch(Xl(i),i.tag){case 1:return pt(i.type)&&Ci(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Ir(),be(ht),be(nt),da(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return ua(i),null;case 13:if(be(Oe),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(n(340));Tr()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return be(Oe),null;case 4:return Ir(),null;case 10:return oa(i.type._context),null;case 22:case 23:return qa(),null;case 24:return null;default:return null}}var zi=!1,it=!1,N0=typeof WeakSet=="function"?WeakSet:Set,Z=null;function kr(r,i){var u=r.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){$e(r,i,h)}else u.current=null}function Pa(r,i,u){try{u()}catch(h){$e(r,i,h)}}var Bf=!1;function P0(r,i){if(ql=di,r=yd(),Ll(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var v=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var T=0,I=-1,R=-1,L=0,V=0,B=r,$=null;t:for(;;){for(var Q;B!==u||v!==0&&B.nodeType!==3||(I=T+v),B!==y||h!==0&&B.nodeType!==3||(R=T+h),B.nodeType===3&&(T+=B.nodeValue.length),(Q=B.firstChild)!==null;)$=B,B=Q;for(;;){if(B===r)break t;if($===u&&++L===v&&(I=T),$===y&&++V===h&&(R=T),(Q=B.nextSibling)!==null)break;B=$,$=B.parentNode}B=Q}u=I===-1||R===-1?null:{start:I,end:R}}else u=null}u=u||{start:0,end:0}}else u=null;for(Hl={focusedElem:r,selectionRange:u},di=!1,Z=i;Z!==null;)if(i=Z,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Z=r;else for(;Z!==null;){i=Z;try{var te=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var ne=te.memoizedProps,Ge=te.memoizedState,M=i.stateNode,k=M.getSnapshotBeforeUpdate(i.elementType===i.type?ne:Ft(i.type,ne),Ge);M.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var D=i.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(q){$e(i,i.return,q)}if(r=i.sibling,r!==null){r.return=i.return,Z=r;break}Z=i.return}return te=Bf,Bf=!1,te}function Do(r,i,u){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var v=h=h.next;do{if((v.tag&r)===r){var y=v.destroy;v.destroy=void 0,y!==void 0&&Pa(i,u,y)}v=v.next}while(v!==h)}}function Ji(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var u=i=i.next;do{if((u.tag&r)===r){var h=u.create;u.destroy=h()}u=u.next}while(u!==i)}}function ba(r){var i=r.ref;if(i!==null){var u=r.stateNode;switch(r.tag){case 5:r=u;break;default:r=u}typeof i=="function"?i(r):i.current=r}}function Gf(r){var i=r.alternate;i!==null&&(r.alternate=null,Gf(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Kt],delete i[To],delete i[jl],delete i[h0],delete i[p0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function qf(r){return r.tag===5||r.tag===3||r.tag===4}function Hf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||qf(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ma(r,i,u){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?u.nodeType===8?u.parentNode.insertBefore(r,i):u.insertBefore(r,i):(u.nodeType===8?(i=u.parentNode,i.insertBefore(r,u)):(i=u,i.appendChild(r)),u=u._reactRootContainer,u!=null||i.onclick!==null||(i.onclick=Ti));else if(h!==4&&(r=r.child,r!==null))for(Ma(r,i,u),r=r.sibling;r!==null;)Ma(r,i,u),r=r.sibling}function Da(r,i,u){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?u.insertBefore(r,i):u.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Da(r,i,u),r=r.sibling;r!==null;)Da(r,i,u),r=r.sibling}var Xe=null,$t=!1;function Rn(r,i,u){for(u=u.child;u!==null;)zf(r,i,u),u=u.sibling}function zf(r,i,u){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(ii,u)}catch{}switch(u.tag){case 5:it||kr(u,i);case 6:var h=Xe,v=$t;Xe=null,Rn(r,i,u),Xe=h,$t=v,Xe!==null&&($t?(r=Xe,u=u.stateNode,r.nodeType===8?r.parentNode.removeChild(u):r.removeChild(u)):Xe.removeChild(u.stateNode));break;case 18:Xe!==null&&($t?(r=Xe,u=u.stateNode,r.nodeType===8?Wl(r.parentNode,u):r.nodeType===1&&Wl(r,u),fo(r)):Wl(Xe,u.stateNode));break;case 4:h=Xe,v=$t,Xe=u.stateNode.containerInfo,$t=!0,Rn(r,i,u),Xe=h,$t=v;break;case 0:case 11:case 14:case 15:if(!it&&(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){v=h=h.next;do{var y=v,T=y.destroy;y=y.tag,T!==void 0&&((y&2)!==0||(y&4)!==0)&&Pa(u,i,T),v=v.next}while(v!==h)}Rn(r,i,u);break;case 1:if(!it&&(kr(u,i),h=u.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(I){$e(u,i,I)}Rn(r,i,u);break;case 21:Rn(r,i,u);break;case 22:u.mode&1?(it=(h=it)||u.memoizedState!==null,Rn(r,i,u),it=h):Rn(r,i,u);break;default:Rn(r,i,u)}}function Jf(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var u=r.stateNode;u===null&&(u=r.stateNode=new N0),i.forEach(function(h){var v=V0.bind(null,r,h);u.has(h)||(u.add(h),h.then(v,v))})}}function Vt(r,i){var u=i.deletions;if(u!==null)for(var h=0;h<u.length;h++){var v=u[h];try{var y=r,T=i,I=T;e:for(;I!==null;){switch(I.tag){case 5:Xe=I.stateNode,$t=!1;break e;case 3:Xe=I.stateNode.containerInfo,$t=!0;break e;case 4:Xe=I.stateNode.containerInfo,$t=!0;break e}I=I.return}if(Xe===null)throw Error(n(160));zf(y,T,v),Xe=null,$t=!1;var R=v.alternate;R!==null&&(R.return=null),v.return=null}catch(L){$e(v,i,L)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Wf(i,r),i=i.sibling}function Wf(r,i){var u=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Vt(i,r),Xt(r),h&4){try{Do(3,r,r.return),Ji(3,r)}catch(ne){$e(r,r.return,ne)}try{Do(5,r,r.return)}catch(ne){$e(r,r.return,ne)}}break;case 1:Vt(i,r),Xt(r),h&512&&u!==null&&kr(u,u.return);break;case 5:if(Vt(i,r),Xt(r),h&512&&u!==null&&kr(u,u.return),r.flags&32){var v=r.stateNode;try{eo(v,"")}catch(ne){$e(r,r.return,ne)}}if(h&4&&(v=r.stateNode,v!=null)){var y=r.memoizedProps,T=u!==null?u.memoizedProps:y,I=r.type,R=r.updateQueue;if(r.updateQueue=null,R!==null)try{I==="input"&&y.type==="radio"&&y.name!=null&&wc(v,y),dl(I,T);var L=dl(I,y);for(T=0;T<R.length;T+=2){var V=R[T],B=R[T+1];V==="style"?Rc(v,B):V==="dangerouslySetInnerHTML"?Ac(v,B):V==="children"?eo(v,B):b(v,V,B,L)}switch(I){case"input":sl(v,y);break;case"textarea":Tc(v,y);break;case"select":var $=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!y.multiple;var Q=y.value;Q!=null?ar(v,!!y.multiple,Q,!1):$!==!!y.multiple&&(y.defaultValue!=null?ar(v,!!y.multiple,y.defaultValue,!0):ar(v,!!y.multiple,y.multiple?[]:"",!1))}v[To]=y}catch(ne){$e(r,r.return,ne)}}break;case 6:if(Vt(i,r),Xt(r),h&4){if(r.stateNode===null)throw Error(n(162));v=r.stateNode,y=r.memoizedProps;try{v.nodeValue=y}catch(ne){$e(r,r.return,ne)}}break;case 3:if(Vt(i,r),Xt(r),h&4&&u!==null&&u.memoizedState.isDehydrated)try{fo(i.containerInfo)}catch(ne){$e(r,r.return,ne)}break;case 4:Vt(i,r),Xt(r);break;case 13:Vt(i,r),Xt(r),v=r.child,v.flags&8192&&(y=v.memoizedState!==null,v.stateNode.isHidden=y,!y||v.alternate!==null&&v.alternate.memoizedState!==null||(Oa=Be())),h&4&&Jf(r);break;case 22:if(V=u!==null&&u.memoizedState!==null,r.mode&1?(it=(L=it)||V,Vt(i,r),it=L):Vt(i,r),Xt(r),h&8192){if(L=r.memoizedState!==null,(r.stateNode.isHidden=L)&&!V&&(r.mode&1)!==0)for(Z=r,V=r.child;V!==null;){for(B=Z=V;Z!==null;){switch($=Z,Q=$.child,$.tag){case 0:case 11:case 14:case 15:Do(4,$,$.return);break;case 1:kr($,$.return);var te=$.stateNode;if(typeof te.componentWillUnmount=="function"){h=$,u=$.return;try{i=h,te.props=i.memoizedProps,te.state=i.memoizedState,te.componentWillUnmount()}catch(ne){$e(h,u,ne)}}break;case 5:kr($,$.return);break;case 22:if($.memoizedState!==null){Yf(B);continue}}Q!==null?(Q.return=$,Z=Q):Yf(B)}V=V.sibling}e:for(V=null,B=r;;){if(B.tag===5){if(V===null){V=B;try{v=B.stateNode,L?(y=v.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(I=B.stateNode,R=B.memoizedProps.style,T=R!=null&&R.hasOwnProperty("display")?R.display:null,I.style.display=Ic("display",T))}catch(ne){$e(r,r.return,ne)}}}else if(B.tag===6){if(V===null)try{B.stateNode.nodeValue=L?"":B.memoizedProps}catch(ne){$e(r,r.return,ne)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===r)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===r)break e;for(;B.sibling===null;){if(B.return===null||B.return===r)break e;V===B&&(V=null),B=B.return}V===B&&(V=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:Vt(i,r),Xt(r),h&4&&Jf(r);break;case 21:break;default:Vt(i,r),Xt(r)}}function Xt(r){var i=r.flags;if(i&2){try{e:{for(var u=r.return;u!==null;){if(qf(u)){var h=u;break e}u=u.return}throw Error(n(160))}switch(h.tag){case 5:var v=h.stateNode;h.flags&32&&(eo(v,""),h.flags&=-33);var y=Hf(r);Da(r,y,v);break;case 3:case 4:var T=h.stateNode.containerInfo,I=Hf(r);Ma(r,I,T);break;default:throw Error(n(161))}}catch(R){$e(r,r.return,R)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function b0(r,i,u){Z=r,jf(r)}function jf(r,i,u){for(var h=(r.mode&1)!==0;Z!==null;){var v=Z,y=v.child;if(v.tag===22&&h){var T=v.memoizedState!==null||zi;if(!T){var I=v.alternate,R=I!==null&&I.memoizedState!==null||it;I=zi;var L=it;if(zi=T,(it=R)&&!L)for(Z=v;Z!==null;)T=Z,R=T.child,T.tag===22&&T.memoizedState!==null?Qf(v):R!==null?(R.return=T,Z=R):Qf(v);for(;y!==null;)Z=y,jf(y),y=y.sibling;Z=v,zi=I,it=L}Kf(r)}else(v.subtreeFlags&8772)!==0&&y!==null?(y.return=v,Z=y):Kf(r)}}function Kf(r){for(;Z!==null;){var i=Z;if((i.flags&8772)!==0){var u=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:it||Ji(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!it)if(u===null)h.componentDidMount();else{var v=i.elementType===i.type?u.memoizedProps:Ft(i.type,u.memoizedProps);h.componentDidUpdate(v,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&Kd(i,y,h);break;case 3:var T=i.updateQueue;if(T!==null){if(u=null,i.child!==null)switch(i.child.tag){case 5:u=i.child.stateNode;break;case 1:u=i.child.stateNode}Kd(i,T,u)}break;case 5:var I=i.stateNode;if(u===null&&i.flags&4){u=I;var R=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&u.focus();break;case"img":R.src&&(u.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var L=i.alternate;if(L!==null){var V=L.memoizedState;if(V!==null){var B=V.dehydrated;B!==null&&fo(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}it||i.flags&512&&ba(i)}catch($){$e(i,i.return,$)}}if(i===r){Z=null;break}if(u=i.sibling,u!==null){u.return=i.return,Z=u;break}Z=i.return}}function Yf(r){for(;Z!==null;){var i=Z;if(i===r){Z=null;break}var u=i.sibling;if(u!==null){u.return=i.return,Z=u;break}Z=i.return}}function Qf(r){for(;Z!==null;){var i=Z;try{switch(i.tag){case 0:case 11:case 15:var u=i.return;try{Ji(4,i)}catch(R){$e(i,u,R)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var v=i.return;try{h.componentDidMount()}catch(R){$e(i,v,R)}}var y=i.return;try{ba(i)}catch(R){$e(i,y,R)}break;case 5:var T=i.return;try{ba(i)}catch(R){$e(i,T,R)}}}catch(R){$e(i,i.return,R)}if(i===r){Z=null;break}var I=i.sibling;if(I!==null){I.return=i.return,Z=I;break}Z=i.return}}var M0=Math.ceil,Wi=O.ReactCurrentDispatcher,La=O.ReactCurrentOwner,Pt=O.ReactCurrentBatchConfig,we=0,Ke=null,qe=null,Ze=0,Ct=0,Nr=Tn(0),We=0,Lo=null,Wn=0,ji=0,Ua=0,Uo=null,gt=null,Oa=0,Pr=1/0,an=null,Ki=!1,Fa=null,kn=null,Yi=!1,Nn=null,Qi=0,Oo=0,$a=null,Xi=-1,Zi=0;function ct(){return(we&6)!==0?Be():Xi!==-1?Xi:Xi=Be()}function Pn(r){return(r.mode&1)===0?1:(we&2)!==0&&Ze!==0?Ze&-Ze:g0.transition!==null?(Zi===0&&(Zi=qc()),Zi):(r=Ce,r!==0||(r=window.event,r=r===void 0?16:Xc(r.type)),r)}function Bt(r,i,u,h){if(50<Oo)throw Oo=0,$a=null,Error(n(185));so(r,u,h),((we&2)===0||r!==Ke)&&(r===Ke&&((we&2)===0&&(ji|=u),We===4&&bn(r,Ze)),vt(r,h),u===1&&we===0&&(i.mode&1)===0&&(Pr=Be()+500,Ii&&Cn()))}function vt(r,i){var u=r.callbackNode;gy(r,i);var h=ai(r,r===Ke?Ze:0);if(h===0)u!==null&&Vc(u),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(u!=null&&Vc(u),i===1)r.tag===0?m0(Zf.bind(null,r)):Od(Zf.bind(null,r)),d0(function(){(we&6)===0&&Cn()}),u=null;else{switch(Hc(h)){case 1:u=yl;break;case 4:u=Bc;break;case 16:u=oi;break;case 536870912:u=Gc;break;default:u=oi}u=lh(u,Xf.bind(null,r))}r.callbackPriority=i,r.callbackNode=u}}function Xf(r,i){if(Xi=-1,Zi=0,(we&6)!==0)throw Error(n(327));var u=r.callbackNode;if(br()&&r.callbackNode!==u)return null;var h=ai(r,r===Ke?Ze:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||i)i=es(r,h);else{i=h;var v=we;we|=2;var y=th();(Ke!==r||Ze!==i)&&(an=null,Pr=Be()+500,Kn(r,i));do try{U0();break}catch(I){eh(r,I)}while(!0);ra(),Wi.current=y,we=v,qe!==null?i=0:(Ke=null,Ze=0,i=We)}if(i!==0){if(i===2&&(v=_l(r),v!==0&&(h=v,i=Va(r,v))),i===1)throw u=Lo,Kn(r,0),bn(r,h),vt(r,Be()),u;if(i===6)bn(r,h);else{if(v=r.current.alternate,(h&30)===0&&!D0(v)&&(i=es(r,h),i===2&&(y=_l(r),y!==0&&(h=y,i=Va(r,y))),i===1))throw u=Lo,Kn(r,0),bn(r,h),vt(r,Be()),u;switch(r.finishedWork=v,r.finishedLanes=h,i){case 0:case 1:throw Error(n(345));case 2:Yn(r,gt,an);break;case 3:if(bn(r,h),(h&130023424)===h&&(i=Oa+500-Be(),10<i)){if(ai(r,0)!==0)break;if(v=r.suspendedLanes,(v&h)!==h){ct(),r.pingedLanes|=r.suspendedLanes&v;break}r.timeoutHandle=Jl(Yn.bind(null,r,gt,an),i);break}Yn(r,gt,an);break;case 4:if(bn(r,h),(h&4194240)===h)break;for(i=r.eventTimes,v=-1;0<h;){var T=31-Lt(h);y=1<<T,T=i[T],T>v&&(v=T),h&=~y}if(h=v,h=Be()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*M0(h/1960))-h,10<h){r.timeoutHandle=Jl(Yn.bind(null,r,gt,an),h);break}Yn(r,gt,an);break;case 5:Yn(r,gt,an);break;default:throw Error(n(329))}}}return vt(r,Be()),r.callbackNode===u?Xf.bind(null,r):null}function Va(r,i){var u=Uo;return r.current.memoizedState.isDehydrated&&(Kn(r,i).flags|=256),r=es(r,i),r!==2&&(i=gt,gt=u,i!==null&&Ba(i)),r}function Ba(r){gt===null?gt=r:gt.push.apply(gt,r)}function D0(r){for(var i=r;;){if(i.flags&16384){var u=i.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var v=u[h],y=v.getSnapshot;v=v.value;try{if(!Ut(y(),v))return!1}catch{return!1}}}if(u=i.child,i.subtreeFlags&16384&&u!==null)u.return=i,i=u;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function bn(r,i){for(i&=~Ua,i&=~ji,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var u=31-Lt(i),h=1<<u;r[u]=-1,i&=~h}}function Zf(r){if((we&6)!==0)throw Error(n(327));br();var i=ai(r,0);if((i&1)===0)return vt(r,Be()),null;var u=es(r,i);if(r.tag!==0&&u===2){var h=_l(r);h!==0&&(i=h,u=Va(r,h))}if(u===1)throw u=Lo,Kn(r,0),bn(r,i),vt(r,Be()),u;if(u===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Yn(r,gt,an),vt(r,Be()),null}function Ga(r,i){var u=we;we|=1;try{return r(i)}finally{we=u,we===0&&(Pr=Be()+500,Ii&&Cn())}}function jn(r){Nn!==null&&Nn.tag===0&&(we&6)===0&&br();var i=we;we|=1;var u=Pt.transition,h=Ce;try{if(Pt.transition=null,Ce=1,r)return r()}finally{Ce=h,Pt.transition=u,we=i,(we&6)===0&&Cn()}}function qa(){Ct=Nr.current,be(Nr)}function Kn(r,i){r.finishedWork=null,r.finishedLanes=0;var u=r.timeoutHandle;if(u!==-1&&(r.timeoutHandle=-1,c0(u)),qe!==null)for(u=qe.return;u!==null;){var h=u;switch(Xl(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Ci();break;case 3:Ir(),be(ht),be(nt),da();break;case 5:ua(h);break;case 4:Ir();break;case 13:be(Oe);break;case 19:be(Oe);break;case 10:oa(h.type._context);break;case 22:case 23:qa()}u=u.return}if(Ke=r,qe=r=Mn(r.current,null),Ze=Ct=i,We=0,Lo=null,Ua=ji=Wn=0,gt=Uo=null,Hn!==null){for(i=0;i<Hn.length;i++)if(u=Hn[i],h=u.interleaved,h!==null){u.interleaved=null;var v=h.next,y=u.pending;if(y!==null){var T=y.next;y.next=v,h.next=T}u.pending=h}Hn=null}return r}function eh(r,i){do{var u=qe;try{if(ra(),Oi.current=Bi,Fi){for(var h=Fe.memoizedState;h!==null;){var v=h.queue;v!==null&&(v.pending=null),h=h.next}Fi=!1}if(Jn=0,je=Je=Fe=null,ko=!1,No=0,La.current=null,u===null||u.return===null){We=1,Lo=i,qe=null;break}e:{var y=r,T=u.return,I=u,R=i;if(i=Ze,I.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var L=R,V=I,B=V.tag;if((V.mode&1)===0&&(B===0||B===11||B===15)){var $=V.alternate;$?(V.updateQueue=$.updateQueue,V.memoizedState=$.memoizedState,V.lanes=$.lanes):(V.updateQueue=null,V.memoizedState=null)}var Q=Cf(T);if(Q!==null){Q.flags&=-257,Af(Q,T,I,y,i),Q.mode&1&&xf(y,L,i),i=Q,R=L;var te=i.updateQueue;if(te===null){var ne=new Set;ne.add(R),i.updateQueue=ne}else te.add(R);break e}else{if((i&1)===0){xf(y,L,i),Ha();break e}R=Error(n(426))}}else if(Le&&I.mode&1){var Ge=Cf(T);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),Af(Ge,T,I,y,i),ta(Rr(R,I));break e}}y=R=Rr(R,I),We!==4&&(We=2),Uo===null?Uo=[y]:Uo.push(y),y=T;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var M=Sf(y,R,i);jd(y,M);break e;case 1:I=R;var k=y.type,D=y.stateNode;if((y.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(kn===null||!kn.has(D)))){y.flags|=65536,i&=-i,y.lanes|=i;var q=Tf(y,I,i);jd(y,q);break e}}y=y.return}while(y!==null)}rh(u)}catch(re){i=re,qe===u&&u!==null&&(qe=u=u.return);continue}break}while(!0)}function th(){var r=Wi.current;return Wi.current=Bi,r===null?Bi:r}function Ha(){(We===0||We===3||We===2)&&(We=4),Ke===null||(Wn&268435455)===0&&(ji&268435455)===0||bn(Ke,Ze)}function es(r,i){var u=we;we|=2;var h=th();(Ke!==r||Ze!==i)&&(an=null,Kn(r,i));do try{L0();break}catch(v){eh(r,v)}while(!0);if(ra(),we=u,Wi.current=h,qe!==null)throw Error(n(261));return Ke=null,Ze=0,We}function L0(){for(;qe!==null;)nh(qe)}function U0(){for(;qe!==null&&!ly();)nh(qe)}function nh(r){var i=sh(r.alternate,r,Ct);r.memoizedProps=r.pendingProps,i===null?rh(r):qe=i,La.current=null}function rh(r){var i=r;do{var u=i.alternate;if(r=i.return,(i.flags&32768)===0){if(u=R0(u,i,Ct),u!==null){qe=u;return}}else{if(u=k0(u,i),u!==null){u.flags&=32767,qe=u;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{We=6,qe=null;return}}if(i=i.sibling,i!==null){qe=i;return}qe=i=r}while(i!==null);We===0&&(We=5)}function Yn(r,i,u){var h=Ce,v=Pt.transition;try{Pt.transition=null,Ce=1,O0(r,i,u,h)}finally{Pt.transition=v,Ce=h}return null}function O0(r,i,u,h){do br();while(Nn!==null);if((we&6)!==0)throw Error(n(327));u=r.finishedWork;var v=r.finishedLanes;if(u===null)return null;if(r.finishedWork=null,r.finishedLanes=0,u===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var y=u.lanes|u.childLanes;if(vy(r,y),r===Ke&&(qe=Ke=null,Ze=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Yi||(Yi=!0,lh(oi,function(){return br(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=Pt.transition,Pt.transition=null;var T=Ce;Ce=1;var I=we;we|=4,La.current=null,P0(r,u),Wf(u,r),r0(Hl),di=!!ql,Hl=ql=null,r.current=u,b0(u),ay(),we=I,Ce=T,Pt.transition=y}else r.current=u;if(Yi&&(Yi=!1,Nn=r,Qi=v),y=r.pendingLanes,y===0&&(kn=null),dy(u.stateNode),vt(r,Be()),i!==null)for(h=r.onRecoverableError,u=0;u<i.length;u++)v=i[u],h(v.value,{componentStack:v.stack,digest:v.digest});if(Ki)throw Ki=!1,r=Fa,Fa=null,r;return(Qi&1)!==0&&r.tag!==0&&br(),y=r.pendingLanes,(y&1)!==0?r===$a?Oo++:(Oo=0,$a=r):Oo=0,Cn(),null}function br(){if(Nn!==null){var r=Hc(Qi),i=Pt.transition,u=Ce;try{if(Pt.transition=null,Ce=16>r?16:r,Nn===null)var h=!1;else{if(r=Nn,Nn=null,Qi=0,(we&6)!==0)throw Error(n(331));var v=we;for(we|=4,Z=r.current;Z!==null;){var y=Z,T=y.child;if((Z.flags&16)!==0){var I=y.deletions;if(I!==null){for(var R=0;R<I.length;R++){var L=I[R];for(Z=L;Z!==null;){var V=Z;switch(V.tag){case 0:case 11:case 15:Do(8,V,y)}var B=V.child;if(B!==null)B.return=V,Z=B;else for(;Z!==null;){V=Z;var $=V.sibling,Q=V.return;if(Gf(V),V===L){Z=null;break}if($!==null){$.return=Q,Z=$;break}Z=Q}}}var te=y.alternate;if(te!==null){var ne=te.child;if(ne!==null){te.child=null;do{var Ge=ne.sibling;ne.sibling=null,ne=Ge}while(ne!==null)}}Z=y}}if((y.subtreeFlags&2064)!==0&&T!==null)T.return=y,Z=T;else e:for(;Z!==null;){if(y=Z,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Do(9,y,y.return)}var M=y.sibling;if(M!==null){M.return=y.return,Z=M;break e}Z=y.return}}var k=r.current;for(Z=k;Z!==null;){T=Z;var D=T.child;if((T.subtreeFlags&2064)!==0&&D!==null)D.return=T,Z=D;else e:for(T=k;Z!==null;){if(I=Z,(I.flags&2048)!==0)try{switch(I.tag){case 0:case 11:case 15:Ji(9,I)}}catch(re){$e(I,I.return,re)}if(I===T){Z=null;break e}var q=I.sibling;if(q!==null){q.return=I.return,Z=q;break e}Z=I.return}}if(we=v,Cn(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(ii,r)}catch{}h=!0}return h}finally{Ce=u,Pt.transition=i}}return!1}function oh(r,i,u){i=Rr(u,i),i=Sf(r,i,1),r=In(r,i,1),i=ct(),r!==null&&(so(r,1,i),vt(r,i))}function $e(r,i,u){if(r.tag===3)oh(r,r,u);else for(;i!==null;){if(i.tag===3){oh(i,r,u);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(kn===null||!kn.has(h))){r=Rr(u,r),r=Tf(i,r,1),i=In(i,r,1),r=ct(),i!==null&&(so(i,1,r),vt(i,r));break}}i=i.return}}function F0(r,i,u){var h=r.pingCache;h!==null&&h.delete(i),i=ct(),r.pingedLanes|=r.suspendedLanes&u,Ke===r&&(Ze&u)===u&&(We===4||We===3&&(Ze&130023424)===Ze&&500>Be()-Oa?Kn(r,0):Ua|=u),vt(r,i)}function ih(r,i){i===0&&((r.mode&1)===0?i=1:(i=li,li<<=1,(li&130023424)===0&&(li=4194304)));var u=ct();r=on(r,i),r!==null&&(so(r,i,u),vt(r,u))}function $0(r){var i=r.memoizedState,u=0;i!==null&&(u=i.retryLane),ih(r,u)}function V0(r,i){var u=0;switch(r.tag){case 13:var h=r.stateNode,v=r.memoizedState;v!==null&&(u=v.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(n(314))}h!==null&&h.delete(i),ih(r,u)}var sh;sh=function(r,i,u){if(r!==null)if(r.memoizedProps!==i.pendingProps||ht.current)mt=!0;else{if((r.lanes&u)===0&&(i.flags&128)===0)return mt=!1,I0(r,i,u);mt=(r.flags&131072)!==0}else mt=!1,Le&&(i.flags&1048576)!==0&&Fd(i,ki,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;Hi(r,i),r=i.pendingProps;var v=wr(i,nt.current);Ar(i,u),v=pa(null,i,h,r,v,u);var y=ma();return i.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,pt(h)?(y=!0,Ai(i)):y=!1,i.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,la(i),v.updater=Gi,i.stateNode=v,v._reactInternals=i,Ea(i,h,r,u),i=Ca(null,i,h,!0,y,u)):(i.tag=0,Le&&y&&Ql(i),ut(null,i,v,u),i=i.child),i;case 16:h=i.elementType;e:{switch(Hi(r,i),r=i.pendingProps,v=h._init,h=v(h._payload),i.type=h,v=i.tag=G0(h),r=Ft(h,r),v){case 0:i=xa(null,i,h,r,u);break e;case 1:i=bf(null,i,h,r,u);break e;case 11:i=If(null,i,h,r,u);break e;case 14:i=Rf(null,i,h,Ft(h.type,r),u);break e}throw Error(n(306,h,""))}return i;case 0:return h=i.type,v=i.pendingProps,v=i.elementType===h?v:Ft(h,v),xa(r,i,h,v,u);case 1:return h=i.type,v=i.pendingProps,v=i.elementType===h?v:Ft(h,v),bf(r,i,h,v,u);case 3:e:{if(Mf(i),r===null)throw Error(n(387));h=i.pendingProps,y=i.memoizedState,v=y.element,Wd(r,i),Li(i,h,null,u);var T=i.memoizedState;if(h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){v=Rr(Error(n(423)),i),i=Df(r,i,h,u,v);break e}else if(h!==v){v=Rr(Error(n(424)),i),i=Df(r,i,h,u,v);break e}else for(xt=Sn(i.stateNode.containerInfo.firstChild),Tt=i,Le=!0,Ot=null,u=zd(i,null,h,u),i.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Tr(),h===v){i=ln(r,i,u);break e}ut(r,i,h,u)}i=i.child}return i;case 5:return Yd(i),r===null&&ea(i),h=i.type,v=i.pendingProps,y=r!==null?r.memoizedProps:null,T=v.children,zl(h,v)?T=null:y!==null&&zl(h,y)&&(i.flags|=32),Pf(r,i),ut(r,i,T,u),i.child;case 6:return r===null&&ea(i),null;case 13:return Lf(r,i,u);case 4:return aa(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=xr(i,null,h,u):ut(r,i,h,u),i.child;case 11:return h=i.type,v=i.pendingProps,v=i.elementType===h?v:Ft(h,v),If(r,i,h,v,u);case 7:return ut(r,i,i.pendingProps,u),i.child;case 8:return ut(r,i,i.pendingProps.children,u),i.child;case 12:return ut(r,i,i.pendingProps.children,u),i.child;case 10:e:{if(h=i.type._context,v=i.pendingProps,y=i.memoizedProps,T=v.value,ke(bi,h._currentValue),h._currentValue=T,y!==null)if(Ut(y.value,T)){if(y.children===v.children&&!ht.current){i=ln(r,i,u);break e}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var I=y.dependencies;if(I!==null){T=y.child;for(var R=I.firstContext;R!==null;){if(R.context===h){if(y.tag===1){R=sn(-1,u&-u),R.tag=2;var L=y.updateQueue;if(L!==null){L=L.shared;var V=L.pending;V===null?R.next=R:(R.next=V.next,V.next=R),L.pending=R}}y.lanes|=u,R=y.alternate,R!==null&&(R.lanes|=u),ia(y.return,u,i),I.lanes|=u;break}R=R.next}}else if(y.tag===10)T=y.type===i.type?null:y.child;else if(y.tag===18){if(T=y.return,T===null)throw Error(n(341));T.lanes|=u,I=T.alternate,I!==null&&(I.lanes|=u),ia(T,u,i),T=y.sibling}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===i){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}ut(r,i,v.children,u),i=i.child}return i;case 9:return v=i.type,h=i.pendingProps.children,Ar(i,u),v=kt(v),h=h(v),i.flags|=1,ut(r,i,h,u),i.child;case 14:return h=i.type,v=Ft(h,i.pendingProps),v=Ft(h.type,v),Rf(r,i,h,v,u);case 15:return kf(r,i,i.type,i.pendingProps,u);case 17:return h=i.type,v=i.pendingProps,v=i.elementType===h?v:Ft(h,v),Hi(r,i),i.tag=1,pt(h)?(r=!0,Ai(i)):r=!1,Ar(i,u),wf(i,h,v),Ea(i,h,v,u),Ca(null,i,h,!0,r,u);case 19:return Of(r,i,u);case 22:return Nf(r,i,u)}throw Error(n(156,i.tag))};function lh(r,i){return $c(r,i)}function B0(r,i,u,h){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(r,i,u,h){return new B0(r,i,u,h)}function za(r){return r=r.prototype,!(!r||!r.isReactComponent)}function G0(r){if(typeof r=="function")return za(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Ve)return 11;if(r===at)return 14}return 2}function Mn(r,i){var u=r.alternate;return u===null?(u=bt(r.tag,i,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=i,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&14680064,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,i=r.dependencies,u.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u}function ts(r,i,u,h,v,y){var T=2;if(h=r,typeof r=="function")za(r)&&(T=1);else if(typeof r=="string")T=5;else e:switch(r){case W:return Qn(u.children,v,y,i);case he:T=8,v|=8;break;case j:return r=bt(12,u,i,v|2),r.elementType=j,r.lanes=y,r;case ge:return r=bt(13,u,i,v),r.elementType=ge,r.lanes=y,r;case Me:return r=bt(19,u,i,v),r.elementType=Me,r.lanes=y,r;case ue:return ns(u,v,y,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case me:T=10;break e;case Ie:T=9;break e;case Ve:T=11;break e;case at:T=14;break e;case Y:T=16,h=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return i=bt(T,u,i,v),i.elementType=r,i.type=h,i.lanes=y,i}function Qn(r,i,u,h){return r=bt(7,r,h,i),r.lanes=u,r}function ns(r,i,u,h){return r=bt(22,r,h,i),r.elementType=ue,r.lanes=u,r.stateNode={isHidden:!1},r}function Ja(r,i,u){return r=bt(6,r,null,i),r.lanes=u,r}function Wa(r,i,u){return i=bt(4,r.children!==null?r.children:[],r.key,i),i.lanes=u,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function q0(r,i,u,h,v){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wl(0),this.expirationTimes=wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wl(0),this.identifierPrefix=h,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function ja(r,i,u,h,v,y,T,I,R){return r=new q0(r,i,u,I,R),i===1?(i=1,y===!0&&(i|=8)):i=0,y=bt(3,null,null,i),r.current=y,y.stateNode=r,y.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},la(y),r}function H0(r,i,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:h==null?null:""+h,children:r,containerInfo:i,implementation:u}}function ah(r){if(!r)return xn;r=r._reactInternals;e:{if($n(r)!==r||r.tag!==1)throw Error(n(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(pt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(r.tag===1){var u=r.type;if(pt(u))return Ld(r,u,i)}return i}function uh(r,i,u,h,v,y,T,I,R){return r=ja(u,h,!0,r,v,y,T,I,R),r.context=ah(null),u=r.current,h=ct(),v=Pn(u),y=sn(h,v),y.callback=i??null,In(u,y,v),r.current.lanes=v,so(r,v,h),vt(r,h),r}function rs(r,i,u,h){var v=i.current,y=ct(),T=Pn(v);return u=ah(u),i.context===null?i.context=u:i.pendingContext=u,i=sn(y,T),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=In(v,i,T),r!==null&&(Bt(r,v,T,y),Di(r,v,T)),T}function os(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ch(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<i?u:i}}function Ka(r,i){ch(r,i),(r=r.alternate)&&ch(r,i)}function z0(){return null}var dh=typeof reportError=="function"?reportError:function(r){console.error(r)};function Ya(r){this._internalRoot=r}is.prototype.render=Ya.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(n(409));rs(r,i,null,null)},is.prototype.unmount=Ya.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;jn(function(){rs(null,r,null,null)}),i[en]=null}};function is(r){this._internalRoot=r}is.prototype.unstable_scheduleHydration=function(r){if(r){var i=Wc();r={blockedOn:null,target:r,priority:i};for(var u=0;u<_n.length&&i!==0&&i<_n[u].priority;u++);_n.splice(u,0,r),u===0&&Yc(r)}};function Qa(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ss(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function fh(){}function J0(r,i,u,h,v){if(v){if(typeof h=="function"){var y=h;h=function(){var L=os(T);y.call(L)}}var T=uh(i,h,r,0,null,!1,!1,"",fh);return r._reactRootContainer=T,r[en]=T.current,Eo(r.nodeType===8?r.parentNode:r),jn(),T}for(;v=r.lastChild;)r.removeChild(v);if(typeof h=="function"){var I=h;h=function(){var L=os(R);I.call(L)}}var R=ja(r,0,!1,null,null,!1,!1,"",fh);return r._reactRootContainer=R,r[en]=R.current,Eo(r.nodeType===8?r.parentNode:r),jn(function(){rs(i,R,u,h)}),R}function ls(r,i,u,h,v){var y=u._reactRootContainer;if(y){var T=y;if(typeof v=="function"){var I=v;v=function(){var R=os(T);I.call(R)}}rs(i,T,r,v)}else T=J0(u,i,r,v,h);return os(T)}zc=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var u=io(i.pendingLanes);u!==0&&(El(i,u|1),vt(i,Be()),(we&6)===0&&(Pr=Be()+500,Cn()))}break;case 13:jn(function(){var h=on(r,1);if(h!==null){var v=ct();Bt(h,r,1,v)}}),Ka(r,1)}},Sl=function(r){if(r.tag===13){var i=on(r,134217728);if(i!==null){var u=ct();Bt(i,r,134217728,u)}Ka(r,134217728)}},Jc=function(r){if(r.tag===13){var i=Pn(r),u=on(r,i);if(u!==null){var h=ct();Bt(u,r,i,h)}Ka(r,i)}},Wc=function(){return Ce},jc=function(r,i){var u=Ce;try{return Ce=r,i()}finally{Ce=u}},pl=function(r,i,u){switch(i){case"input":if(sl(r,u),i=u.name,u.type==="radio"&&i!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<u.length;i++){var h=u[i];if(h!==r&&h.form===r.form){var v=xi(h);if(!v)throw Error(n(90));yc(h),sl(h,v)}}}break;case"textarea":Tc(r,u);break;case"select":i=u.value,i!=null&&ar(r,!!u.multiple,i,!1)}},bc=Ga,Mc=jn;var W0={usingClientEntryPoint:!1,Events:[xo,yr,xi,Nc,Pc,Ga]},Fo={findFiberByHostInstance:Vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j0={bundleType:Fo.bundleType,version:Fo.version,rendererPackageName:Fo.rendererPackageName,rendererConfig:Fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Oc(r),r===null?null:r.stateNode},findFiberByHostInstance:Fo.findFiberByHostInstance||z0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var as=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!as.isDisabled&&as.supportsFiber)try{ii=as.inject(j0),jt=as}catch{}}return yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W0,yt.createPortal=function(r,i){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qa(i))throw Error(n(200));return H0(r,i,null,u)},yt.createRoot=function(r,i){if(!Qa(r))throw Error(n(299));var u=!1,h="",v=dh;return i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=ja(r,1,!1,null,null,u,!1,h,v),r[en]=i.current,Eo(r.nodeType===8?r.parentNode:r),new Ya(i)},yt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Oc(i),r=r===null?null:r.stateNode,r},yt.flushSync=function(r){return jn(r)},yt.hydrate=function(r,i,u){if(!ss(i))throw Error(n(200));return ls(null,r,i,!0,u)},yt.hydrateRoot=function(r,i,u){if(!Qa(r))throw Error(n(405));var h=u!=null&&u.hydratedSources||null,v=!1,y="",T=dh;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),i=uh(i,null,r,1,u??null,v,!1,y,T),r[en]=i.current,Eo(r),h)for(r=0;r<h.length;r++)u=h[r],v=u._getVersion,v=v(u._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[u,v]:i.mutableSourceEagerHydrationData.push(u,v);return new is(i)},yt.render=function(r,i,u){if(!ss(i))throw Error(n(200));return ls(null,r,i,!1,u)},yt.unmountComponentAtNode=function(r){if(!ss(r))throw Error(n(40));return r._reactRootContainer?(jn(function(){ls(null,null,r,!1,function(){r._reactRootContainer=null,r[en]=null})}),!0):!1},yt.unstable_batchedUpdates=Ga,yt.unstable_renderSubtreeIntoContainer=function(r,i,u,h){if(!ss(u))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return ls(r,i,u,!1,h)},yt.version="18.3.1-next-f1338f8080-20240426",yt}var wh;function o_(){if(wh)return eu.exports;wh=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),eu.exports=r_(),eu.exports}var Eh;function i_(){if(Eh)return us;Eh=1;var t=o_();return us.createRoot=t.createRoot,us.hydrateRoot=t.hydrateRoot,us}var s_=i_();const l_=Yu(s_);var Ae=(t=>(t.HOME="HOME",t.BOOKING="BOOKING",t.CATALOG="CATALOG",t.CONTACT="CONTACT",t.CONFIRMATION="CONFIRMATION",t.LOYALTY="LOYALTY",t.ADMIN="ADMIN",t.GALLERY="GALLERY",t))(Ae||{}),a_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const u_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Te=(t,e)=>{const n=pe.forwardRef(({color:o="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:a,children:f,...p},m)=>pe.createElement("svg",{ref:m,...a_,width:s,height:s,stroke:o,strokeWidth:a?Number(l)*24/Number(s):l,className:`lucide lucide-${u_(t)}`,...p},[...e.map(([g,w])=>pe.createElement(g,w)),...(Array.isArray(f)?f:[f])||[]]));return n.displayName=`${t}`,n},c_=Te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),d_=Te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),f_=Te("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Dm=Te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),h_=Te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),p_=Te("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Lm=Te("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),m_=Te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),g_=Te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),v_=Te("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),Ns=Te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Um=Te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),y_=Te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Om=Te("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),__=Te("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),w_=Te("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),E_=Te("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),S_=Te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Fm=Te("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),$m=Te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),T_=Te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),x_=Te("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),C_=Te("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Ws=Te("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),A_=Te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),gu=Te("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Vm=Te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),I_=Te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),R_=Te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Xu=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),k_=Te("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),N_=({currentView:t,onChangeView:e})=>{const[n,o]=pe.useState(!1),[s,l]=pe.useState(!1);pe.useEffect(()=>{const m=()=>{o(window.scrollY>50)};return window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)},[]);const a=`fixed w-full z-50 transition-all duration-300 ${n?"bg-white/90 backdrop-blur-md shadow-sm py-2":"bg-transparent py-4"}`,f=m=>`cursor-pointer font-medium tracking-wide transition-colors ${t===m?"text-stone-900 border-b-2 border-stone-800":n?"text-stone-600 hover:text-stone-900":"text-stone-800 hover:text-stone-600"}`,p=m=>{e(m),l(!1)};return E.jsxs("nav",{className:a,children:[E.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"flex justify-between items-center h-16",children:[E.jsx("div",{className:"flex-shrink-0 flex items-center cursor-pointer",onClick:()=>p(Ae.HOME),children:E.jsxs("span",{className:"serif text-3xl font-bold italic tracking-tighter text-stone-900",children:["Tus3B ",E.jsx("span",{className:"text-stone-500 not-italic font-light text-xl ml-1",children:"Style"})]})}),E.jsxs("div",{className:"hidden md:flex space-x-12 items-center",children:[E.jsx("a",{onClick:()=>p(Ae.HOME),className:f(Ae.HOME),children:"Inicio"}),E.jsx("a",{onClick:()=>p(Ae.BOOKING),className:f(Ae.BOOKING),children:"Servicios & Reserva"}),E.jsx("a",{onClick:()=>p(Ae.CATALOG),className:f(Ae.CATALOG),children:"Perfumes (Decants)"}),E.jsx("button",{onClick:()=>p(Ae.BOOKING),className:"bg-stone-900 text-white px-6 py-2 rounded-full text-sm uppercase tracking-wider hover:bg-stone-800 transition shadow-lg",children:"Reservar"})]}),E.jsx("div",{className:"md:hidden flex items-center",children:E.jsx("button",{onClick:()=>l(!s),className:"text-stone-800 focus:outline-none",children:s?E.jsx(Xu,{size:28}):E.jsx(y_,{size:28})})})]})}),s&&E.jsxs("div",{className:"md:hidden fixed inset-0 top-16 bg-white z-40 flex flex-col p-6 space-y-8 animate-in slide-in-from-right-10",children:[E.jsx("button",{onClick:()=>p(Ae.HOME),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:E.jsx("span",{children:"Inicio"})}),E.jsxs("button",{onClick:()=>p(Ae.BOOKING),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[E.jsx(Fm,{size:24}),E.jsx("span",{children:"Corte & Brushing"})]}),E.jsxs("button",{onClick:()=>p(Ae.CATALOG),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[E.jsx(Ws,{size:24}),E.jsx("span",{children:"Perfumes"})]}),E.jsx("div",{className:"mt-auto pb-8",children:E.jsx("button",{onClick:()=>p(Ae.BOOKING),className:"w-full bg-stone-900 text-white py-4 rounded-xl text-center uppercase tracking-widest font-bold shadow-lg active:scale-95 transition-transform",children:"Agendar Cita"})})]})]})},P_=({onCtaClick:t})=>E.jsxs("div",{className:"relative h-screen min-h-[600px] w-full overflow-hidden",children:[E.jsxs("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('https://images.unsplash.com/photo-1634449571010-02389ed0f9b0?q=80&w=2070&auto=format&fit=crop')"},children:[E.jsx("div",{className:"absolute inset-0 bg-black/20 mix-blend-multiply"}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-stone-900/60 via-transparent to-transparent"})]}),E.jsxs("div",{className:"relative h-full flex flex-col justify-center items-center text-center px-4",children:[E.jsx("h2",{className:"text-white text-base md:text-xl uppercase tracking-[0.3em] mb-4 font-light",children:"Belleza & Elegancia"}),E.jsxs("h1",{className:"text-white text-4xl md:text-7xl lg:text-8xl serif font-light mb-6 md:mb-8 max-w-4xl leading-tight",children:["Redefine Tu Estilo ",E.jsx("br",{})," ",E.jsx("span",{className:"italic",children:"Tu Esencia"})]}),E.jsx("p",{className:"text-stone-200 max-w-lg mx-auto text-lg mb-10 font-light",children:"Cortes profesionales a domicilio y perfumera de alta gama. Descubre nuestras ofertas de verano."}),E.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:E.jsx("button",{onClick:t,className:"px-8 py-4 bg-white text-stone-900 rounded-full font-bold uppercase tracking-widest hover:bg-stone-100 transition shadow-lg",children:"Reserva Tu Cita"})}),E.jsxs("div",{className:"mt-12 flex items-center justify-center space-x-8 text-white/90 text-sm font-medium",children:[E.jsxs("div",{className:"flex items-center bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10",children:[E.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),"Disponible Hoy"]}),E.jsxs("div",{className:"flex items-center bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10",children:[E.jsx("span",{className:"mr-1",children:"Desde"}),E.jsx("span",{className:"font-bold text-lg",children:"$7.000"})]})]})]})]}),Ps="56984524774",qo=[{id:"cut-1",name:"Corte de Puntas / Flequillos",description:"Mantenimiento esencial para eliminar horquillas y sanear el cabello.",price:7e3,durationMin:30,includes:["Corte tcnico de puntas o flequillo","Sellado de puntas"]},{id:"cut-2",name:"Corte Bordado",description:"Elimina el frizz y puntas daadas sin afectar el largo de tu cabello.",price:1e4,durationMin:45,includes:["Corte con mquina bordadora","Limpieza de puntas"]},{id:"wash-1",name:"Lavado",description:"Lavado profesional refrescante.",price:5e3,durationMin:20,includes:["Shampoo profesional","Acondicionador"],homeServiceOnly:!0},{id:"massage-1",name:"Masaje Capilar",description:"Tratamiento profundo para hidratar y revitalizar tu cabello.",price:5e3,durationMin:30,includes:["Ampolla o crema de tratamiento","Masaje craneal"]},{id:"brushing-1",name:"Brushing",description:"Peinado profesional para dar volumen, brillo y movimiento.",price:14e3,durationMin:45,includes:["Secado","Modelado con cepillo"]},{id:"color-1",name:"Aplicacin de Tintura",description:"Aplicacin profesional de tu color (tintura no incluida).",price:1e4,durationMin:60,includes:["Aplicacin uniforme","Lavado final"],homeServiceOnly:!0}],b_=3e3,M_=30,D_=["Santiago Centro","uoa"],vu=[{id:"p1",brand:"Lancme",name:"La Vie Est Belle EDP",description:'Proyectado como el lder indiscutible en valor. Destaca por su nota de "Iris Noble" y se mantiene como el pilar del lujo y la "felicidad".',price5ml:9990,price10ml:18990,image:"/images/perfumes/lancome-la-vie-est-belle.png",notes:["Floral Gourmand","Iris Noble","Pachul"],category:"classic"},{id:"p2",brand:"Carolina Herrera",name:"Good Girl EDP",description:"Un smbolo de estatus masivo en Chile. Su aroma potente (tuberosa y caf) y su icnica botella de tacn aseguran su puesto en el podio.",price5ml:9990,price10ml:18990,image:"/images/perfumes/carolina-herrera-good-girl.png",notes:["mbar Floral","Tuberosa","Caf"],category:"classic"},{id:"p3",brand:"Lancme",name:"Idle EDP",description:"Se consolida como la opcin moderna y elegante, especialmente atractiva para el segmento millennial que busca notas de flores blancas y sal.",price5ml:10500,price10ml:19500,image:"/images/perfumes/lancome-idole.png",notes:["Chipre Floral","Flores Blancas","Sal"],category:"classic"},{id:"p4",brand:"Giorgio Armani",name:"Acqua Di Gioia EDP",description:"Un clsico esencial para el verano chileno. Se mantiene en el top por su perfil fresco de menta y limn, ideal para el uso diario.",price5ml:9500,price10ml:17900,image:"/images/perfumes/armani-acqua-di-gioia.png",notes:["Floral Acutica","Menta","Limn"],category:"classic"},{id:"p5",brand:"Yves Saint Laurent",name:"Black Opium EDP",description:"Sigue firme en las listas de popularidad para 2025-26, siendo la opcin preferida para la vida nocturna y fiestas por su intensidad.",price5ml:10990,price10ml:19990,image:"/images/perfumes/ysl-black-opium.png",notes:["Oriental Vainilla","Caf","Vainilla"],category:"classic"},{id:"p6",brand:"Dolce & Gabbana",name:"Light Blue EDT",description:"A pesar de las nuevas propuestas, este clsico mantiene su popularidad gracias a su reconocimiento global y frescura, ideal para primavera-verano.",price5ml:8990,price10ml:16990,image:"/images/perfumes/dg-light-blue.png",notes:["Floral Frutal","Manzana","Cedro"],category:"classic"},{id:"a1",brand:"Lattafa",name:"Yara EDP",description:"Es el fenmeno viral del momento en Chile. Destaca por su aroma dulce y cremoso (a menudo comparado con batido de fresa) y lidera las ventas online.",price5ml:5990,price10ml:10990,image:"/images/perfumes/lattafa-yara.png",notes:["Orqudea","Heliotropo","Frutas Tropicales"],category:"arab"},{id:"a2",brand:"Armaf",name:"Club de Nuit Intense Woman",description:"Un superventas constante en tiendas especializadas chilenas. Es muy buscado por su perfil olfativo oscuro y elegante, similar a Coco Noir de Chanel.",price5ml:6500,price10ml:11990,image:"/images/perfumes/armaf-club-de-nuit-intense.png",notes:["Rosa","Azafrn","Pachul"],category:"arab"},{id:"a3",brand:"Lattafa",name:"Eclaire EDP",description:"Una tendencia creciente en 2025-26 dentro de la categora gourmand (aromas comestibles).",price5ml:6990,price10ml:12500,image:"/images/perfumes/lattafa-eclaire.png",notes:["Caramelo","Leche","Miel"],category:"arab"},{id:"a4",brand:"Armaf",name:"Club de Nuit Imperiale",description:"Gana popularidad por su similitud con Delina Exclusif. Es una opcin floral frutal muy potente y femenina disponible en el retail local.",price5ml:7500,price10ml:13500,image:"/images/perfumes/armaf-imperiale.png",notes:["Lichi","Bergamota","Rosa Turca"],category:"arab"},{id:"a5",brand:"Armaf",name:"Club de Nuit Untold",description:"Aunque es unisex, tiene una venta masiva en el pblico femenino por ser la alternativa directa al lujoso Baccarat Rouge 540.",price5ml:7500,price10ml:13500,image:"/images/perfumes/armaf-untold.png",notes:["Azafrn","Jazmn","mbar Gris"],category:"arab"},{id:"a6",brand:"Lattafa",name:"Khamrah",description:"Un xito rotundo en ventas globales y locales. Es una fragancia unisex que muchas mujeres chilenas adoptan en invierno por su calidez especiada y dulce.",price5ml:7990,price10ml:14500,image:"/images/perfumes/lattafa-khamrah.png",notes:["Dtiles","Canela","Vainilla"],category:"arab"}],Sh=[{id:"1",url:"/images/gallery/work_1.png",category:"Cortes",description:"Corte Bob Estilizado"},{id:"2",url:"https://images.unsplash.com/photo-1562322140-8baeececf3df?auto=format&fit=crop&q=80&w=800",category:"Color",description:"Balayage Caramelo"},{id:"3",url:"https://images.unsplash.com/photo-1595476108010-b4d1f102b1b1?auto=format&fit=crop&q=80&w=800",category:"Cortes",description:"Melena Midi con Movimiento"},{id:"4",url:"https://images.unsplash.com/photo-1605497788044-5a32c7078486?auto=format&fit=crop&q=80&w=800",category:"Peinados",description:"Ondas Playeras"},{id:"5",url:"https://images.unsplash.com/photo-1522337360705-8b13d520a15e?auto=format&fit=crop&q=80&w=800",category:"Color",description:"Babylights Rubios"},{id:"6",url:"https://images.unsplash.com/photo-1492106087820-71f171ce71d0?auto=format&fit=crop&q=80&w=800",category:"Peinados",description:"Recogido Elegante"}],L_=[{id:"r1",name:"Maria Paz",rating:5,comment:"Me encant el servicio, muy profesionales y puntuales. El corte que me hicieron fue exactamente lo que peda.",date:"Hace 2 semanas"},{id:"r2",name:"Carla S.",rating:5,comment:"Increble la atencin a domicilio. Todo muy limpio y ordenado, y los perfumes huelen delicioso. Totalmente recomendada.",date:"Hace 1 mes"},{id:"r3",name:"Valentina R.",rating:5,comment:"Compr el Lattafa Yara y es exquisito, lleg super rpido. Adems aprovech de hacerme un masaje capilar y qued como nueva.",date:"Hace 3 semanas"},{id:"r4",name:"Isidora M.",rating:5,comment:"Excelente experiencia con Tus3B. La calidad de los productos y la dedicacin en el servicio se notan. Volver a comprar seguro.",date:"Hace 1 mes"},{id:"r5",name:"Fernanda L.",rating:5,comment:"Muy buena disposicin y asesora para elegir mi perfume. Los precios son muy convenientes para la calidad que ofrecen.",date:"Hace 2 semanas"},{id:"r6",name:"Camila J.",rating:4,comment:"Todo super bien, el perfume lleg en perfecto estado. Solo demor un poquito ms de lo esperado la coordinacin, pero la atencin un 7.",date:"Hace 1 mes"}];var un={},cs={},yu=function(t,e){return yu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},yu(t,e)};function Bm(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");yu(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var bs=function(){return bs=Object.assign||function(e){for(var n,o=1,s=arguments.length;o<s;o++){n=arguments[o];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},bs.apply(this,arguments)};function jr(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}function Gm(t,e,n,o){var s=arguments.length,l=s<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,n):o,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,n,o);else for(var f=t.length-1;f>=0;f--)(a=t[f])&&(l=(s<3?a(l):s>3?a(e,n,l):a(e,n))||l);return s>3&&l&&Object.defineProperty(e,n,l),l}function qm(t,e){return function(n,o){e(n,o,t)}}function Hm(t,e,n,o,s,l){function a(P){if(P!==void 0&&typeof P!="function")throw new TypeError("Function expected");return P}for(var f=o.kind,p=f==="getter"?"get":f==="setter"?"set":"value",m=!e&&t?o.static?t:t.prototype:null,g=e||(m?Object.getOwnPropertyDescriptor(m,o.name):{}),w,_=!1,S=n.length-1;S>=0;S--){var x={};for(var A in o)x[A]=A==="access"?{}:o[A];for(var A in o.access)x.access[A]=o.access[A];x.addInitializer=function(P){if(_)throw new TypeError("Cannot add initializers after decoration has completed");l.push(a(P||null))};var C=(0,n[S])(f==="accessor"?{get:g.get,set:g.set}:g[p],x);if(f==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(w=a(C.get))&&(g.get=w),(w=a(C.set))&&(g.set=w),(w=a(C.init))&&s.unshift(w)}else(w=a(C))&&(f==="field"?s.unshift(w):g[p]=w)}m&&Object.defineProperty(m,o.name,g),_=!0}function zm(t,e,n){for(var o=arguments.length>2,s=0;s<e.length;s++)n=o?e[s].call(t,n):e[s].call(t);return o?n:void 0}function Jm(t){return typeof t=="symbol"?t:"".concat(t)}function Wm(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function jm(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ee(t,e,n,o){function s(l){return l instanceof n?l:new n(function(a){a(l)})}return new(n||(n=Promise))(function(l,a){function f(g){try{m(o.next(g))}catch(w){a(w)}}function p(g){try{m(o.throw(g))}catch(w){a(w)}}function m(g){g.done?l(g.value):s(g.value).then(f,p)}m((o=o.apply(t,e||[])).next())})}function Km(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},o,s,l,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=f(0),a.throw=f(1),a.return=f(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function f(m){return function(g){return p([m,g])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;a&&(a=0,m[0]&&(n=0)),n;)try{if(o=1,s&&(l=m[0]&2?s.return:m[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,m[1])).done)return l;switch(s=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(g){m=[6,g],s=0}finally{o=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var js=Object.create?(function(t,e,n,o){o===void 0&&(o=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,s)}):(function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]});function Ym(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&js(e,t,n)}function Ms(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zu(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var o=n.call(t),s,l=[],a;try{for(;(e===void 0||e-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(f){a={error:f}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return l}function Qm(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Zu(arguments[e]));return t}function Xm(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var o=Array(t),s=0,e=0;e<n;e++)for(var l=arguments[e],a=0,f=l.length;a<f;a++,s++)o[s]=l[a];return o}function Zm(t,e,n){if(n||arguments.length===2)for(var o=0,s=e.length,l;o<s;o++)(l||!(o in e))&&(l||(l=Array.prototype.slice.call(e,0,o)),l[o]=e[o]);return t.concat(l||Array.prototype.slice.call(e))}function Jr(t){return this instanceof Jr?(this.v=t,this):new Jr(t)}function eg(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(S){return function(x){return Promise.resolve(x).then(S,w)}}function f(S,x){o[S]&&(s[S]=function(A){return new Promise(function(C,P){l.push([S,A,C,P])>1||p(S,A)})},x&&(s[S]=x(s[S])))}function p(S,x){try{m(o[S](x))}catch(A){_(l[0][3],A)}}function m(S){S.value instanceof Jr?Promise.resolve(S.value.v).then(g,w):_(l[0][2],S)}function g(S){p("next",S)}function w(S){p("throw",S)}function _(S,x){S(x),l.shift(),l.length&&p(l[0][0],l[0][1])}}function tg(t){var e,n;return e={},o("next"),o("throw",function(s){throw s}),o("return"),e[Symbol.iterator]=function(){return this},e;function o(s,l){e[s]=t[s]?function(a){return(n=!n)?{value:Jr(t[s](a)),done:!1}:l?l(a):a}:l}}function ng(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ms=="function"?Ms(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(a){return new Promise(function(f,p){a=t[l](a),s(f,p,a.done,a.value)})}}function s(l,a,f,p){Promise.resolve(p).then(function(m){l({value:m,done:f})},a)}}function rg(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var U_=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},_u=function(t){return _u=Object.getOwnPropertyNames||function(e){var n=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[n.length]=o);return n},_u(t)};function og(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=_u(t),o=0;o<n.length;o++)n[o]!=="default"&&js(e,t,n[o]);return U_(e,t),e}function ig(t){return t&&t.__esModule?t:{default:t}}function sg(t,e,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(t):o?o.value:e.get(t)}function lg(t,e,n,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}function ag(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function ug(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var o,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=e[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=e[Symbol.dispose],n&&(s=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");s&&(o=function(){try{s.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:o,async:n})}else n&&t.stack.push({async:!0});return e}var O_=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var o=new Error(n);return o.name="SuppressedError",o.error=t,o.suppressed=e,o};function cg(t){function e(l){t.error=t.hasError?new O_(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var n,o=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&o===1)return o=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(l).then(s,function(a){return e(a),s()})}else o|=1}catch(a){e(a)}if(o===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function dg(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,o,s,l,a){return o?e?".jsx":".js":s&&(!l||!a)?n:s+l+"."+a.toLowerCase()+"js"}):t}const F_={__extends:Bm,__assign:bs,__rest:jr,__decorate:Gm,__param:qm,__esDecorate:Hm,__runInitializers:zm,__propKey:Jm,__setFunctionName:Wm,__metadata:jm,__awaiter:ee,__generator:Km,__createBinding:js,__exportStar:Ym,__values:Ms,__read:Zu,__spread:Qm,__spreadArrays:Xm,__spreadArray:Zm,__await:Jr,__asyncGenerator:eg,__asyncDelegator:tg,__asyncValues:ng,__makeTemplateObject:rg,__importStar:og,__importDefault:ig,__classPrivateFieldGet:sg,__classPrivateFieldSet:lg,__classPrivateFieldIn:ag,__addDisposableResource:ug,__disposeResources:cg,__rewriteRelativeImportExtension:dg},$_=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:ug,get __assign(){return bs},__asyncDelegator:tg,__asyncGenerator:eg,__asyncValues:ng,__await:Jr,__awaiter:ee,__classPrivateFieldGet:sg,__classPrivateFieldIn:ag,__classPrivateFieldSet:lg,__createBinding:js,__decorate:Gm,__disposeResources:cg,__esDecorate:Hm,__exportStar:Ym,__extends:Bm,__generator:Km,__importDefault:ig,__importStar:og,__makeTemplateObject:rg,__metadata:jm,__param:qm,__propKey:Jm,__read:Zu,__rest:jr,__rewriteRelativeImportExtension:dg,__runInitializers:zm,__setFunctionName:Wm,__spread:Qm,__spreadArray:Zm,__spreadArrays:Xm,__values:Ms,default:F_},Symbol.toStringTag,{value:"Module"})),V_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Ks=class extends Error{constructor(e,n="FunctionsError",o){super(e),this.name=n,this.context=o}},fg=class extends Ks{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},wu=class extends Ks{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Eu=class extends Ks{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Ds;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ds||(Ds={}));class B_{constructor(e,{headers:n={},customFetch:o,region:s=Ds.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=V_(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ee(this,arguments,void 0,function*(n,o={}){var s;let l,a;try{const{headers:f,method:p,body:m,signal:g,timeout:w}=o;let _={},{region:S}=o;S||(S=this.region);const x=new URL(`${this.url}/${n}`);S&&S!=="any"&&(_["x-region"]=S,x.searchParams.set("forceFunctionRegion",S));let A;m&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",A=m):typeof m=="string"?(_["Content-Type"]="text/plain",A=m):typeof FormData<"u"&&m instanceof FormData?A=m:(_["Content-Type"]="application/json",A=JSON.stringify(m)):A=m;let C=g;w&&(a=new AbortController,l=setTimeout(()=>a.abort(),w),g?(C=a.signal,g.addEventListener("abort",()=>a.abort())):C=a.signal);const P=yield this.fetch(x.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),f),body:A,signal:C}).catch(H=>{throw new fg(H)}),U=P.headers.get("x-relay-error");if(U&&U==="true")throw new wu(P);if(!P.ok)throw new Eu(P);let b=((s=P.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),O;return b==="application/json"?O=yield P.json():b==="application/octet-stream"||b==="application/pdf"?O=yield P.blob():b==="text/event-stream"?O=P:b==="multipart/form-data"?O=yield P.formData():O=yield P.text(),{data:O,error:null,response:P}}catch(f){return{data:null,error:f,response:f instanceof Eu||f instanceof wu?f.context:void 0}}finally{l&&clearTimeout(l)}})}}const G_=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Ds},FunctionsClient:B_,FunctionsError:Ks,FunctionsFetchError:fg,FunctionsHttpError:Eu,FunctionsRelayError:wu},Symbol.toStringTag,{value:"Module"})),hg=Yo(G_);var st={};const Kr=Yo($_);var ds={},fs={},hs={},ps={},ms={},gs={},Th;function pg(){if(Th)return gs;Th=1,Object.defineProperty(gs,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return gs.default=t,gs}var xh;function mg(){if(xh)return ms;xh=1,Object.defineProperty(ms,"__esModule",{value:!0});const e=Kr.__importDefault(pg());let n=class{constructor(s){var l,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(l=s.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,l){return this.headers=new Headers(this.headers),this.headers.set(s,l),this}then(s,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let f=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var m,g,w,_;let S=null,x=null,A=null,C=p.status,P=p.statusText;if(p.ok){if(this.method!=="HEAD"){const H=await p.text();H===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?x=H:x=JSON.parse(H))}const b=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),O=(w=p.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");b&&O&&O.length>1&&(A=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(S={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,A=null,C=406,P="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const b=await p.text();try{S=JSON.parse(b),Array.isArray(S)&&p.status===404&&(x=[],S=null,C=200,P="OK")}catch{p.status===404&&b===""?(C=204,P="No Content"):S={message:b}}if(S&&this.isMaybeSingle&&(!((_=S?.details)===null||_===void 0)&&_.includes("0 rows"))&&(S=null,C=200,P="OK"),S&&this.shouldThrowOnError)throw new e.default(S)}return{error:S,data:x,count:A,status:C,statusText:P}});return this.shouldThrowOnError||(f=f.catch(p=>{var m,g,w,_,S,x;let A="";const C=p?.cause;if(C){const P=(m=C?.message)!==null&&m!==void 0?m:"",U=(g=C?.code)!==null&&g!==void 0?g:"";A=`${(w=p?.name)!==null&&w!==void 0?w:"FetchError"}: ${p?.message}`,A+=`

Caused by: ${(_=C?.name)!==null&&_!==void 0?_:"Error"}: ${P}`,U&&(A+=` (${U})`),C?.stack&&(A+=`
${C.stack}`)}else A=(S=p?.stack)!==null&&S!==void 0?S:"";return{error:{message:`${(x=p?.name)!==null&&x!==void 0?x:"FetchError"}: ${p?.message}`,details:A,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(s,l)}returns(){return this}overrideTypes(){return this}};return ms.default=n,ms}var Ch;function gg(){if(Ch)return ps;Ch=1,Object.defineProperty(ps,"__esModule",{value:!0});const e=Kr.__importDefault(mg());let n=class extends e.default{select(s){let l=!1;const a=(s??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:l=!0,nullsFirst:a,foreignTable:f,referencedTable:p=f}={}){const m=p?`${p}.order`:"order",g=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${g?`${g},`:""}${s}.${l?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:l,referencedTable:a=l}={}){const f=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(f,`${s}`),this}range(s,l,{foreignTable:a,referencedTable:f=a}={}){const p=typeof f>"u"?"offset":`${f}.offset`,m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${s}`),this.url.searchParams.set(m,`${l-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:l=!1,settings:a=!1,buffers:f=!1,wal:p=!1,format:m="text"}={}){var g;const w=[s?"analyze":null,l?"verbose":null,a?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),_=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${_}"; options=${w};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};return ps.default=n,ps}var Ah;function ec(){if(Ah)return hs;Ah=1,Object.defineProperty(hs,"__esModule",{value:!0});const e=Kr.__importDefault(gg()),n=new RegExp("[,()]");let o=class extends e.default{eq(l,a){return this.url.searchParams.append(l,`eq.${a}`),this}neq(l,a){return this.url.searchParams.append(l,`neq.${a}`),this}gt(l,a){return this.url.searchParams.append(l,`gt.${a}`),this}gte(l,a){return this.url.searchParams.append(l,`gte.${a}`),this}lt(l,a){return this.url.searchParams.append(l,`lt.${a}`),this}lte(l,a){return this.url.searchParams.append(l,`lte.${a}`),this}like(l,a){return this.url.searchParams.append(l,`like.${a}`),this}likeAllOf(l,a){return this.url.searchParams.append(l,`like(all).{${a.join(",")}}`),this}likeAnyOf(l,a){return this.url.searchParams.append(l,`like(any).{${a.join(",")}}`),this}ilike(l,a){return this.url.searchParams.append(l,`ilike.${a}`),this}ilikeAllOf(l,a){return this.url.searchParams.append(l,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(l,a){return this.url.searchParams.append(l,`ilike(any).{${a.join(",")}}`),this}regexMatch(l,a){return this.url.searchParams.append(l,`match.${a}`),this}regexIMatch(l,a){return this.url.searchParams.append(l,`imatch.${a}`),this}is(l,a){return this.url.searchParams.append(l,`is.${a}`),this}isDistinct(l,a){return this.url.searchParams.append(l,`isdistinct.${a}`),this}in(l,a){const f=Array.from(new Set(a)).map(p=>typeof p=="string"&&n.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,a){return typeof a=="string"?this.url.searchParams.append(l,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(l,`cs.{${a.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(a)}`),this}containedBy(l,a){return typeof a=="string"?this.url.searchParams.append(l,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(l,`cd.{${a.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(a)}`),this}rangeGt(l,a){return this.url.searchParams.append(l,`sr.${a}`),this}rangeGte(l,a){return this.url.searchParams.append(l,`nxl.${a}`),this}rangeLt(l,a){return this.url.searchParams.append(l,`sl.${a}`),this}rangeLte(l,a){return this.url.searchParams.append(l,`nxr.${a}`),this}rangeAdjacent(l,a){return this.url.searchParams.append(l,`adj.${a}`),this}overlaps(l,a){return typeof a=="string"?this.url.searchParams.append(l,`ov.${a}`):this.url.searchParams.append(l,`ov.{${a.join(",")}}`),this}textSearch(l,a,{config:f,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const g=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${m}fts${g}.${a}`),this}match(l){return Object.entries(l).forEach(([a,f])=>{this.url.searchParams.append(a,`eq.${f}`)}),this}not(l,a,f){return this.url.searchParams.append(l,`not.${a}.${f}`),this}or(l,{foreignTable:a,referencedTable:f=a}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,a,f){return this.url.searchParams.append(l,`${a}.${f}`),this}};return hs.default=o,hs}var Ih;function vg(){if(Ih)return fs;Ih=1,Object.defineProperty(fs,"__esModule",{value:!0});const e=Kr.__importDefault(ec());let n=class{constructor(s,{headers:l={},schema:a,fetch:f}){this.url=s,this.headers=new Headers(l),this.schema=a,this.fetch=f}select(s,l){const{head:a=!1,count:f}=l??{},p=a?"HEAD":"GET";let m=!1;const g=(s??"*").split("").map(w=>/\s/.test(w)&&!m?"":(w==='"'&&(m=!m),w)).join("");return this.url.searchParams.set("select",g),f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:l,defaultToNull:a=!0}={}){var f;const p="POST";if(l&&this.headers.append("Prefer",`count=${l}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((g,w)=>g.concat(Object.keys(w)),[]);if(m.length>0){const g=[...new Set(m)].map(w=>`"${w}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(s,{onConflict:l,ignoreDuplicates:a=!1,count:f,defaultToNull:p=!0}={}){var m;const g="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const w=s.reduce((_,S)=>_.concat(Object.keys(S)),[]);if(w.length>0){const _=[...new Set(w)].map(S=>`"${S}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:l}={}){var a;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var l;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};return fs.default=n,fs}var Rh;function q_(){if(Rh)return ds;Rh=1,Object.defineProperty(ds,"__esModule",{value:!0});const t=Kr,e=t.__importDefault(vg()),n=t.__importDefault(ec());let o=class yg{constructor(l,{headers:a={},schema:f,fetch:p}={}){this.url=l,this.headers=new Headers(a),this.schemaName=f,this.fetch=p}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${l}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new yg(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,a={},{head:f=!1,get:p=!1,count:m}={}){var g;let w;const _=new URL(`${this.url}/rpc/${l}`);let S;f||p?(w=f?"HEAD":"GET",Object.entries(a).filter(([A,C])=>C!==void 0).map(([A,C])=>[A,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([A,C])=>{_.searchParams.append(A,C)})):(w="POST",S=a);const x=new Headers(this.headers);return m&&x.set("Prefer",`count=${m}`),new n.default({method:w,url:_,headers:x,schema:this.schemaName,body:S,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}};return ds.default=o,ds}var kh;function _g(){if(kh)return st;kh=1,Object.defineProperty(st,"__esModule",{value:!0}),st.PostgrestError=st.PostgrestBuilder=st.PostgrestTransformBuilder=st.PostgrestFilterBuilder=st.PostgrestQueryBuilder=st.PostgrestClient=void 0;const t=Kr,e=t.__importDefault(q_());st.PostgrestClient=e.default;const n=t.__importDefault(vg());st.PostgrestQueryBuilder=n.default;const o=t.__importDefault(ec());st.PostgrestFilterBuilder=o.default;const s=t.__importDefault(gg());st.PostgrestTransformBuilder=s.default;const l=t.__importDefault(mg());st.PostgrestBuilder=l.default;const a=t.__importDefault(pg());return st.PostgrestError=a.default,st.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:l.default,PostgrestError:a.default},st}class wg{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,s=parseInt(o.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const o=this.getWebSocketConstructor();return new o(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const H_="2.87.1",z_=`realtime-js/${H_}`,Eg="1.0.0",J_="2.0.0",Nh=Eg,Su=1e4,W_=1e3,j_=100;var or;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(or||(or={}));var He;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(He||(He={}));var Ht;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ht||(Ht={}));var Tu;(function(t){t.websocket="websocket"})(Tu||(Tu={}));var ir;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ir||(ir={}));class K_{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let o=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,o;const s=(o=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,o;const s=(o=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,o){var s,l;const a=e.topic,f=(s=e.ref)!==null&&s!==void 0?s:"",p=(l=e.join_ref)!==null&&l!==void 0?l:"",m=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},w=Object.keys(g).length===0?"":JSON.stringify(g);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+f.length+a.length+m.length+w.length,S=new ArrayBuffer(this.HEADER_LENGTH+_);let x=new DataView(S),A=0;x.setUint8(A++,this.KINDS.userBroadcastPush),x.setUint8(A++,p.length),x.setUint8(A++,f.length),x.setUint8(A++,a.length),x.setUint8(A++,m.length),x.setUint8(A++,w.length),x.setUint8(A++,n),Array.from(p,P=>x.setUint8(A++,P.charCodeAt(0))),Array.from(f,P=>x.setUint8(A++,P.charCodeAt(0))),Array.from(a,P=>x.setUint8(A++,P.charCodeAt(0))),Array.from(m,P=>x.setUint8(A++,P.charCodeAt(0))),Array.from(w,P=>x.setUint8(A++,P.charCodeAt(0)));var C=new Uint8Array(S.byteLength+o.byteLength);return C.set(new Uint8Array(S),0),C.set(new Uint8Array(o),S.byteLength),C.buffer}decode(e,n){if(this._isArrayBuffer(e)){let o=this._binaryDecode(e);return n(o)}if(typeof e=="string"){const o=JSON.parse(e),[s,l,a,f,p]=o;return n({join_ref:s,ref:l,topic:a,event:f,payload:p})}return n({})}_binaryDecode(e){const n=new DataView(e),o=n.getUint8(0),s=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,o){const s=n.getUint8(1),l=n.getUint8(2),a=n.getUint8(3),f=n.getUint8(4);let p=this.HEADER_LENGTH+4;const m=o.decode(e.slice(p,p+s));p=p+s;const g=o.decode(e.slice(p,p+l));p=p+l;const w=o.decode(e.slice(p,p+a));p=p+a;const _=e.slice(p,e.byteLength),S=f===this.JSON_ENCODING?JSON.parse(o.decode(_)):_,x={type:this.BROADCAST_EVENT,event:g,payload:S};return a>0&&(x.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([o])=>n.includes(o)))}}class Sg{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ne||(Ne={}));const Ph=(t,e,n={})=>{var o;const s=(o=n.skipTypes)!==null&&o!==void 0?o:[];return e?Object.keys(e).reduce((l,a)=>(l[a]=Y_(a,t,e,s),l),{}):{}},Y_=(t,e,n,o)=>{const s=e.find(f=>f.name===t),l=s?.type,a=n[t];return l&&!o.includes(l)?Tg(l,a):xu(a)},Tg=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return ew(e,n)}switch(t){case Ne.bool:return Q_(e);case Ne.float4:case Ne.float8:case Ne.int2:case Ne.int4:case Ne.int8:case Ne.numeric:case Ne.oid:return X_(e);case Ne.json:case Ne.jsonb:return Z_(e);case Ne.timestamp:return tw(e);case Ne.abstime:case Ne.date:case Ne.daterange:case Ne.int4range:case Ne.int8range:case Ne.money:case Ne.reltime:case Ne.text:case Ne.time:case Ne.timestamptz:case Ne.timetz:case Ne.tsrange:case Ne.tstzrange:return xu(e);default:return xu(e)}},xu=t=>t,Q_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},X_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Z_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ew=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,o=t[n];if(t[0]==="{"&&o==="}"){let l;const a=t.slice(1,n);try{l=JSON.parse("["+a+"]")}catch{l=a?a.split(","):[]}return l.map(f=>Tg(e,f))}return t},tw=t=>typeof t=="string"?t.replace(" ","T"):t,xg=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ru{constructor(e,n,o={},s=Su){this.channel=e,this.event=n,this.payload=o,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var o;return this._hasReceived(e)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Cu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Cu||(Cu={}));let Cg=class xs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},s=>{const{onJoin:l,onLeave:a,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xs.syncState(this.state,s,l,a),this.pendingDiffs.forEach(p=>{this.state=xs.syncDiff(this.state,p,l,a)}),this.pendingDiffs=[],f()}),this.channel._on(o.diff,{},s=>{const{onJoin:l,onLeave:a,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=xs.syncDiff(this.state,s,l,a),f())}),this.onJoin((s,l,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:l,newPresences:a})}),this.onLeave((s,l,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:l,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,o,s){const l=this.cloneDeep(e),a=this.transformState(n),f={},p={};return this.map(l,(m,g)=>{a[m]||(p[m]=g)}),this.map(a,(m,g)=>{const w=l[m];if(w){const _=g.map(C=>C.presence_ref),S=w.map(C=>C.presence_ref),x=g.filter(C=>S.indexOf(C.presence_ref)<0),A=w.filter(C=>_.indexOf(C.presence_ref)<0);x.length>0&&(f[m]=x),A.length>0&&(p[m]=A)}else f[m]=g}),this.syncDiff(l,{joins:f,leaves:p},o,s)}static syncDiff(e,n,o,s){const{joins:l,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),s||(s=()=>{}),this.map(l,(f,p)=>{var m;const g=(m=e[f])!==null&&m!==void 0?m:[];if(e[f]=this.cloneDeep(p),g.length>0){const w=e[f].map(S=>S.presence_ref),_=g.filter(S=>w.indexOf(S.presence_ref)<0);e[f].unshift(..._)}o(f,g,p)}),this.map(a,(f,p)=>{let m=e[f];if(!m)return;const g=p.map(w=>w.presence_ref);m=m.filter(w=>g.indexOf(w.presence_ref)<0),e[f]=m,s(f,m,p),m.length===0&&delete e[f]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(o=>n(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,o)=>{const s=e[o];return"metas"in s?n[o]=s.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[o]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Au;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Au||(Au={}));var Gr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Gr||(Gr={}));var Zt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Zt||(Zt={}));const nw=He;let Ag=class Ho{constructor(e,n={config:{}},o){var s,l;if(this.topic=e,this.params=n,this.socket=o,this.bindings={},this.state=He.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ru(this,Ht.join,this.params,this.timeout),this.rejoinTimer=new Sg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=He.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=He.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=He.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=He.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=He.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ht.reply,{},(a,f)=>{this._trigger(this._replyEventName(f),a)}),this.presence=new Cg(this),this.broadcastEndpointURL=xg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var o,s,l;if(this.socket.isConnected()||this.socket.connect(),this.state==He.closed){const{config:{broadcast:a,presence:f,private:p}}=this.params,m=(s=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(S=>S.filter))!==null&&s!==void 0?s:[],g=!!this.bindings[Gr.PRESENCE]&&this.bindings[Gr.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,w={},_={broadcast:a,presence:Object.assign(Object.assign({},f),{enabled:g}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(S=>e?.(Zt.CHANNEL_ERROR,S)),this._onClose(()=>e?.(Zt.CLOSED)),this.updateJoinPayload(Object.assign({config:_},w)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){e?.(Zt.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,C=(x=A?.length)!==null&&x!==void 0?x:0,P=[];for(let U=0;U<C;U++){const b=A[U],{filter:{event:O,schema:H,table:z,filter:W}}=b,he=S&&S[U];if(he&&he.event===O&&Ho.isFilterValueEqual(he.schema,H)&&Ho.isFilterValueEqual(he.table,z)&&Ho.isFilterValueEqual(he.filter,W))P.push(Object.assign(Object.assign({},b),{id:he.id}));else{this.unsubscribe(),this.state=He.errored,e?.(Zt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,e&&e(Zt.SUBSCRIBED);return}}).receive("error",S=>{this.state=He.errored,e?.(Zt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{e?.(Zt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,o){return this.state===He.joined&&e===Gr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,o)}async httpSend(e,n,o={}){var s;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=o.timeout)!==null&&s!==void 0?s:this.timeout);if(f.status===202)return{success:!0};let p=f.statusText;try{const m=await f.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(e,n={}){var o,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:a}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:a,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var a,f,p;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(f=(a=this.params)===null||a===void 0?void 0:a.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=He.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ht.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(s=>{o=new ru(this,Ht.leave,{},e),o.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=He.closed,this.bindings={}}async _fetchWithTimeout(e,n,o){const s=new AbortController,l=setTimeout(()=>s.abort(),o),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(l),a}_push(e,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ru(this,e,n,o);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>j_){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,o){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,o){var s,l;const a=e.toLocaleLowerCase(),{close:f,error:p,leave:m,join:g}=Ht;if(o&&[f,p,m,g].indexOf(a)>=0&&o!==this._joinRef())return;let _=this._onMessage(a,n,o);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(S=>{var x,A,C;return((x=S.filter)===null||x===void 0?void 0:x.event)==="*"||((C=(A=S.filter)===null||A===void 0?void 0:A.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===a}).map(S=>S.callback(_,o)):(l=this.bindings[a])===null||l===void 0||l.filter(S=>{var x,A,C,P,U,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in S){const O=S.id,H=(x=S.filter)===null||x===void 0?void 0:x.event;return O&&((A=n.ids)===null||A===void 0?void 0:A.includes(O))&&(H==="*"||H?.toLocaleLowerCase()===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const O=(U=(P=S?.filter)===null||P===void 0?void 0:P.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return O==="*"||O===((b=n?.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===a}).map(S=>{if(typeof _=="object"&&"ids"in _){const x=_.data,{schema:A,table:C,commit_timestamp:P,type:U,errors:b}=x;_=Object.assign(Object.assign({},{schema:A,table:C,commit_timestamp:P,eventType:U,new:{},old:{},errors:b}),this._getPayloadRecords(x))}S.callback(_,o)})}_isClosed(){return this.state===He.closed}_isJoined(){return this.state===He.joined}_isJoining(){return this.state===He.joining}_isLeaving(){return this.state===He.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,o){const s=e.toLocaleLowerCase(),l={type:s,filter:n,callback:o};return this.bindings[s]?this.bindings[s].push(l):this.bindings[s]=[l],this}_off(e,n){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(s=>{var l;return!(((l=s.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===o&&Ho.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const o in e)if(e[o]!==n[o])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ht.close,{},e)}_onError(e){this._on(Ht.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=He.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Ph(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Ph(e.columns,e.old_record)),n}};const ou=()=>{},vs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},rw=[1e3,2e3,5e3,1e4],ow=1e4,iw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let sw=class{constructor(e,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Su,this.transport=null,this.heartbeatIntervalMs=vs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ou,this.ref=0,this.reconnectTimer=null,this.vsn=Nh,this.logger=ou,this.conn=null,this.sendBuffer=[],this.serializer=new K_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...l)=>s(...l):(...l)=>fetch(...l),!(!((o=n?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Tu.websocket}`,this.httpEndpoint=xg(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=wg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,o){this.logger(e,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case or.connecting:return ir.Connecting;case or.open:return ir.Open;case or.closing:return ir.Closing;default:return ir.Closed}}isConnected(){return this.connectionState()===ir.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const o=`realtime:${e}`,s=this.getChannels().find(l=>l.topic===o);if(s)return s;{const l=new Ag(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:o,payload:s,ref:l}=e,a=()=>{this.encode(e,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${n} ${o} (${l})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(W_,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},vs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:s,payload:l,ref:a}=n,f=a?`(${a})`:"",p=l.status||"";this.log("receive",`${p} ${o} ${s} ${f}`.trim(),l),this.channels.filter(m=>m._isMember(o)).forEach(m=>m._trigger(s,l,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===or.open||this.conn.readyState===or.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ht.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const o=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${o}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const o=new Blob([iw],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,o=!1;if(e)n=e,o=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const l={access_token:n,version:z_};n&&s.updateJoinPayload(l),s.joinedOnce&&s._isJoined()&&s._push(Ht.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Sg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,o,s,l,a,f,p,m,g,w,_,S;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(o=e?.timeout)!==null&&o!==void 0?o:Su,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:vs.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(f=e?.heartbeatCallback)!==null&&f!==void 0?f:ou,this.vsn=(p=e?.vsn)!==null&&p!==void 0?p:Nh,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e?.reconnectAfterMs)!==null&&m!==void 0?m:(x=>rw[x-1]||ow),this.vsn){case Eg:this.encode=(g=e?.encode)!==null&&g!==void 0?g:((x,A)=>A(JSON.stringify(x))),this.decode=(w=e?.decode)!==null&&w!==void 0?w:((x,A)=>A(JSON.parse(x)));break;case J_:this.encode=(_=e?.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(S=e?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};const lw=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:nw,get REALTIME_LISTEN_TYPES(){return Gr},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Au},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Cu},get REALTIME_SUBSCRIBE_STATES(){return Zt},RealtimeChannel:Ag,RealtimeClient:sw,RealtimePresence:Cg,WebSocketFactory:wg},Symbol.toStringTag,{value:"Module"})),Ig=Yo(lw);class Qo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ue(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Rg extends Qo{constructor(e,n,o){super(e),this.name="StorageApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ls extends Qo{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const tc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),aw=()=>Response,Iu=t=>{if(Array.isArray(t))return t.map(n=>Iu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,o])=>{const s=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[s]=Iu(o)}),e},uw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},cw=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),iu=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},dw=(t,e,n)=>ee(void 0,void 0,void 0,function*(){const o=yield aw();t instanceof o&&!n?.noResolveJson?t.json().then(s=>{const l=t.status||500,a=s?.statusCode||l+"";e(new Rg(iu(s),l,a))}).catch(s=>{e(new Ls(iu(s),s))}):e(new Ls(iu(t),t))}),fw=(t,e,n,o)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"||!o?s:(uw(o)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(o)):s.body=o,e?.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function Xo(t,e,n,o,s,l){return ee(this,void 0,void 0,function*(){return new Promise((a,f)=>{t(n,fw(e,o,s,l)).then(p=>{if(!p.ok)throw p;return o?.noResolveJson?p:p.json()}).then(p=>a(p)).catch(p=>dw(p,f,o))})})}function jo(t,e,n,o){return ee(this,void 0,void 0,function*(){return Xo(t,"GET",e,n,o)})}function qt(t,e,n,o,s){return ee(this,void 0,void 0,function*(){return Xo(t,"POST",e,o,s,n)})}function Ru(t,e,n,o,s){return ee(this,void 0,void 0,function*(){return Xo(t,"PUT",e,o,s,n)})}function hw(t,e,n,o){return ee(this,void 0,void 0,function*(){return Xo(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),o)})}function nc(t,e,n,o,s){return ee(this,void 0,void 0,function*(){return Xo(t,"DELETE",e,o,s,n)})}class pw{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ee(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ue(e))return{data:null,error:e};throw e}})}}var kg;class mw{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[kg]="BlobDownloadBuilder",this.promise=null}asStream(){return new pw(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ee(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ue(e))return{data:null,error:e};throw e}})}}kg=Symbol.toStringTag;const gw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vw{constructor(e,n={},o,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=o,this.fetch=tc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,o,s){return ee(this,void 0,void 0,function*(){try{let l;const a=Object.assign(Object.assign({},bh),s);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const p=a.metadata;typeof Blob<"u"&&o instanceof Blob?(l=new FormData,l.append("cacheControl",a.cacheControl),p&&l.append("metadata",this.encodeMetadata(p)),l.append("",o)):typeof FormData<"u"&&o instanceof FormData?(l=o,l.has("cacheControl")||l.append("cacheControl",a.cacheControl),p&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(p))):(l=o,f["cache-control"]=`max-age=${a.cacheControl}`,f["content-type"]=a.contentType,p&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!a.duplex&&(a.duplex="half")),s?.headers&&(f=Object.assign(Object.assign({},f),s.headers));const m=this._removeEmptyFolders(n),g=this._getFinalPath(m),w=yield(e=="PUT"?Ru:qt)(this.fetch,`${this.url}/object/${g}`,l,Object.assign({headers:f},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:m,id:w.Id,fullPath:w.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ue(l))return{data:null,error:l};throw l}})}upload(e,n,o){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,o)})}uploadToSignedUrl(e,n,o,s){return ee(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),a=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${a}`);f.searchParams.set("token",n);try{let p;const m=Object.assign({upsert:bh.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&o instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",o)):typeof FormData<"u"&&o instanceof FormData?(p=o,p.append("cacheControl",m.cacheControl)):(p=o,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType);const w=yield Ru(this.fetch,f.toString(),p,{headers:g});return{data:{path:l,fullPath:w.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Ue(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,n){return ee(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e);const s=Object.assign({},this.headers);n?.upsert&&(s["x-upsert"]="true");const l=yield qt(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:s}),a=new URL(this.url+l.url),f=a.searchParams.get("token");if(!f)throw new Qo("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:f},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ue(o))return{data:null,error:o};throw o}})}update(e,n,o){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,o)})}move(e,n,o){return ee(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}copy(e,n,o){return ee(this,void 0,void 0,function*(){try{return{data:{path:(yield qt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,o){return ee(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),l=yield qt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const a=o?.download?`&download=${o.download===!0?"":o.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${a}`)},{data:l,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,o){return ee(this,void 0,void 0,function*(){try{const s=yield qt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${l}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),a=l?`?${l}`:"",f=this._getFinalPath(e),p=()=>jo(this.fetch,`${this.url}/${s}/${f}${a}`,{headers:this.headers,noResolveJson:!0});return new mw(p,this.shouldThrowOnError)}info(e){return ee(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const o=yield jo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Iu(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ue(o))return{data:null,error:o};throw o}})}exists(e){return ee(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield hw(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ue(o)&&o instanceof Ls){const s=o.originalError;if([400,404].includes(s?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(e,n){const o=this._getFinalPath(e),s=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&s.push(l);const f=typeof n?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(n?.transform||{});p!==""&&s.push(p);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${o}${m}`)}}}remove(e){return ee(this,void 0,void 0,function*(){try{return{data:yield nc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}list(e,n,o){return ee(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},gw),n),{prefix:e||""});return{data:yield qt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},o),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}listV2(e,n){return ee(this,void 0,void 0,function*(){try{const o=Object.assign({},e);return{data:yield qt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ue(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Ng="2.87.1",Pg={"X-Client-Info":`storage-js/${Ng}`};class yw{constructor(e,n={},o,s){this.shouldThrowOnError=!1;const l=new URL(e);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Pg),n),this.fetch=tc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ee(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield jo(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}getBucket(e){return ee(this,void 0,void 0,function*(){try{return{data:yield jo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}createBucket(e){return ee(this,arguments,void 0,function*(n,o={public:!1}){try{return{data:yield qt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return ee(this,void 0,void 0,function*(){try{return{data:yield Ru(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ue(o))return{data:null,error:o};throw o}})}emptyBucket(e){return ee(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ee(this,void 0,void 0,function*(){try{return{data:yield nc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var Ko=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function _w(t,e,n){const o=new URL(e,t);if(n)for(const[s,l]of Object.entries(n))l!==void 0&&o.searchParams.set(s,l);return o.toString()}async function ww(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Ew(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:o,query:s,body:l,headers:a}){const f=_w(t.baseUrl,o,s),p=await ww(t.auth),m=await e(f,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...p,...a},body:l?JSON.stringify(l):void 0}),g=await m.text(),w=(m.headers.get("content-type")||"").includes("application/json"),_=w&&g?JSON.parse(g):g;if(!m.ok){const S=w?_:void 0,x=S?.error;throw new Ko(x?.message??`Request failed with status ${m.status}`,{status:m.status,icebergType:x?.type,icebergCode:x?.code,details:S})}return{status:m.status,headers:m.headers,data:_}}}}function ys(t){return t.join("")}var Sw=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ys(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ys(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ys(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ys(t.namespace)}`}),!0}catch(e){if(e instanceof Ko&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Ko&&n.status===409)return;throw n}}};function Mr(t){return t.join("")}var Tw=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Ko&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Ko&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},xw=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Ew({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new Sw(this.client,e),this.tableOps=new Tw(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class bg{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Pg),n),this.fetch=tc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ee(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}listBuckets(e){return ee(this,void 0,void 0,function*(){try{const n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const o=n.toString(),s=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield jo(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ee(this,void 0,void 0,function*(){try{return{data:yield nc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}from(e){if(!cw(e))throw new Qo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new xw({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>ee(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(n,{get(l,a){const f=l[a];return typeof f!="function"?f:(...p)=>ee(this,void 0,void 0,function*(){try{return{data:yield f.apply(l,p),error:null}}catch(m){if(o)throw m;return{data:null,error:m}}})}})}}const rc={"X-Client-Info":`storage-js/${Ng}`,"Content-Type":"application/json"};class oc extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function wt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Cs extends oc{constructor(e,n,o){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Mg extends oc{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var ku;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(ku||(ku={}));const Ys=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Cw=()=>Response,Dg=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Aw=t=>Array.from(new Float32Array(t)),Iw=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},Mh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Rw=(t,e,n)=>ee(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const s=t.status||500,l=t;if(typeof l.json=="function")l.json().then(a=>{const f=a?.statusCode||a?.code||s+"";e(new Cs(Mh(a),s,f))}).catch(()=>{const a=s+"",f=l.statusText||`HTTP ${s} error`;e(new Cs(f,s,a))});else{const a=s+"",f=l.statusText||`HTTP ${s} error`;e(new Cs(f,s,a))}}else e(new Mg(Mh(t),t))}),kw=(t,e,n,o)=>{const s={method:t,headers:e?.headers||{}};return o?(Dg(o)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(o)):s.body=o,Object.assign(Object.assign({},s),n)):s};function Nw(t,e,n,o,s,l){return ee(this,void 0,void 0,function*(){return new Promise((a,f)=>{t(n,kw(e,o,s,l)).then(p=>{if(!p.ok)throw p;if(o?.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>a(p)).catch(p=>Rw(p,f,o))})})}function At(t,e,n,o,s){return ee(this,void 0,void 0,function*(){return Nw(t,"POST",e,o,s,n)})}class Lg{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},rc),n),this.fetch=Ys(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ee(this,void 0,void 0,function*(){try{return{data:(yield At(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ee(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(wt(o))return{data:null,error:o};throw o}})}listIndexes(e){return ee(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ee(this,void 0,void 0,function*(){try{return{data:(yield At(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(wt(o))return{data:null,error:o};throw o}})}}class Ug{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},rc),n),this.fetch=Ys(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ee(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield At(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}getVectors(e){return ee(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}listVectors(e){return ee(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield At(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}queryVectors(e){return ee(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ee(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield At(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}}class Og{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},rc),n),this.fetch=Ys(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ee(this,void 0,void 0,function*(){try{return{data:(yield At(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}getBucket(e){return ee(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}listBuckets(){return ee(this,arguments,void 0,function*(e={}){try{return{data:yield At(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ee(this,void 0,void 0,function*(){try{return{data:(yield At(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}}class Fg extends Og{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new $g(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ee(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ee(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ee(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ee(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class $g extends Lg{constructor(e,n,o,s){super(e,n,s),this.vectorBucketName=o}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ee(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ee(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ee(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ee(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Vg(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Vg extends Ug{constructor(e,n,o,s,l){super(e,n,l),this.vectorBucketName=o,this.indexName=s}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ee(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ee(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ee(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ee(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ee(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Pw extends yw{constructor(e,n={},o,s){super(e,n,o,s)}from(e){return new vw(this.url,this.headers,e,this.fetch)}get vectors(){return new Fg(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new bg(this.url+"/iceberg",this.headers,this.fetch)}}const bw=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:bg,StorageApiError:Rg,StorageClient:Pw,StorageError:Qo,StorageUnknownError:Ls,StorageVectorsApiError:Cs,StorageVectorsClient:Fg,StorageVectorsError:oc,get StorageVectorsErrorCode(){return ku},StorageVectorsUnknownError:Mg,VectorBucketApi:Og,VectorBucketScope:$g,VectorDataApi:Ug,VectorIndexApi:Lg,VectorIndexScope:Vg,isPlainObject:Dg,isStorageError:Ue,isStorageVectorsError:wt,normalizeToFloat32:Aw,resolveFetch:Ys,resolveResponse:Cw,validateVectorDimension:Iw},Symbol.toStringTag,{value:"Module"})),Mw=Yo(bw);var su={},Vo={},Dh;function Dw(){return Dh||(Dh=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.version=void 0,Vo.version="2.87.1"),Vo}var Lh;function Lw(){return Lh||(Lh=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=Dw();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(su)),su}var lu={},Uh;function Uw(){return Uh||(Uh=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=s=>s?(...l)=>s(...l):(...l)=>fetch(...l);t.resolveFetch=e;const n=()=>Headers;t.resolveHeadersConstructor=n;const o=(s,l,a)=>{const f=(0,t.resolveFetch)(a),p=(0,t.resolveHeadersConstructor)();return async(m,g)=>{var w;const _=(w=await l())!==null&&w!==void 0?w:s;let S=new p(g?.headers);return S.has("apikey")||S.set("apikey",s),S.has("Authorization")||S.set("Authorization",`Bearer ${_}`),f(m,Object.assign(Object.assign({},g),{headers:S}))}};t.fetchWithAuth=o})(lu)),lu}var cn={},Oh;function Ow(){if(Oh)return cn;Oh=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.isBrowser=void 0,cn.uuid=t,cn.ensureTrailingSlash=e,cn.applySettingDefaults=o,cn.validateSupabaseUrl=s;function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var a=Math.random()*16|0,f=l=="x"?a:a&3|8;return f.toString(16)})}function e(l){return l.endsWith("/")?l:l+"/"}const n=()=>typeof window<"u";cn.isBrowser=n;function o(l,a){var f,p;const{db:m,auth:g,realtime:w,global:_}=l,{db:S,auth:x,realtime:A,global:C}=a,P={db:Object.assign(Object.assign({},S),m),auth:Object.assign(Object.assign({},x),g),realtime:Object.assign(Object.assign({},A),w),storage:{},global:Object.assign(Object.assign(Object.assign({},C),_),{headers:Object.assign(Object.assign({},(f=C?.headers)!==null&&f!==void 0?f:{}),(p=_?.headers)!==null&&p!==void 0?p:{})}),accessToken:async()=>""};return l.accessToken?P.accessToken=l.accessToken:delete P.accessToken,P}function s(l){const a=l?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return cn}var Bo={};const Bg="2.87.1",Or=30*1e3,Nu=3,au=Nu*Or,Fw="http://localhost:9999",$w="supabase.auth.token",Vw={"X-Client-Info":`gotrue-js/${Bg}`},Pu="X-Supabase-Api-Version",Gg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Bw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Gw=600*1e3;let Wr=class extends Error{constructor(e,n,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}};function oe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let qg=class extends Wr{constructor(e,n,o){super(e,n,o),this.name="AuthApiError",this.status=n,this.code=o}};function Hg(t){return oe(t)&&t.name==="AuthApiError"}let Ln=class extends Wr{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},hn=class extends Wr{constructor(e,n,o,s){super(e,o,s),this.name=n,this.status=o}},_t=class extends hn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function zg(t){return oe(t)&&t.name==="AuthSessionMissingError"}let er=class extends hn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},zo=class extends hn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Jo=class extends hn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Jg(t){return oe(t)&&t.name==="AuthImplicitGrantRedirectError"}let bu=class extends hn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Us=class extends hn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function As(t){return oe(t)&&t.name==="AuthRetryableFetchError"}let Mu=class extends hn{constructor(e,n,o){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}};function qw(t){return oe(t)&&t.name==="AuthWeakPasswordError"}let Os=class extends hn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Fs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fh=` 	
\r=`.split(""),Hw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Fh.length;e+=1)t[Fh[e].charCodeAt(0)]=-2;for(let e=0;e<Fs.length;e+=1)t[Fs[e].charCodeAt(0)]=e;return t})();function $h(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;n(Fs[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;n(Fs[o]),e.queuedBits-=6}}function Wg(t,e,n){const o=Hw[t];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Vh(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},o={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},l=a=>{Ww(a,o,n)};for(let a=0;a<t.length;a+=1)Wg(t.charCodeAt(a),s,l);return e.join("")}function zw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Jw(t,e){for(let n=0;n<t.length;n+=1){let o=t.charCodeAt(n);if(o>55295&&o<=56319){const s=(o-55296)*1024&65535;o=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}zw(o,e)}}function Ww(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let o=1;o<6;o+=1)if((t>>7-o&1)===0){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function qr(t){const e=[],n={queue:0,queuedBits:0},o=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Wg(t.charCodeAt(s),n,o);return new Uint8Array(e)}function jw(t){const e=[];return Jw(t,n=>e.push(n)),new Uint8Array(e)}function sr(t){const e=[],n={queue:0,queuedBits:0},o=s=>{e.push(s)};return t.forEach(s=>$h(s,n,o)),$h(null,n,o),e.join("")}function Kw(t){return Math.round(Date.now()/1e3)+t}function Yw(){return Symbol("auth-callback")}const tt=()=>typeof window<"u"&&typeof document<"u",Xn={tested:!1,writable:!1},jg=()=>{if(!tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xn.tested)return Xn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Xn.tested=!0,Xn.writable=!0}catch{Xn.tested=!0,Xn.writable=!1}return Xn.writable};function Qw(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,l)=>{e[l]=s})}catch{}return n.searchParams.forEach((o,s)=>{e[s]=o}),e}const Kg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Xw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Fr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Zn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},et=async(t,e)=>{await t.removeItem(e)};class Qs{constructor(){this.promise=new Qs.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Qs.promiseConstructor=Promise;function uu(t){const e=t.split(".");if(e.length!==3)throw new Os("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!Bw.test(e[o]))throw new Os("JWT not in base64url format");return{header:JSON.parse(Vh(e[0])),payload:JSON.parse(Vh(e[1])),signature:qr(e[2]),raw:{header:e[0],payload:e[1]}}}async function Zw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function eE(t,e){return new Promise((o,s)=>{(async()=>{for(let l=0;l<1/0;l++)try{const a=await t(l);if(!e(l,null,a)){o(a);return}}catch(a){if(!e(l,a)){s(a);return}}})()})}function tE(t){return("0"+t.toString(16)).substr(-2)}function nE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let s="";for(let l=0;l<56;l++)s+=n.charAt(Math.floor(Math.random()*o));return s}return crypto.getRandomValues(e),Array.from(e,tE).join("")}async function rE(t){const n=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(o);return Array.from(s).map(l=>String.fromCharCode(l)).join("")}async function oE(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await rE(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dr(t,e,n=!1){const o=nE();let s=o;n&&(s+="/PASSWORD_RECOVERY"),await Fr(t,`${e}-code-verifier`,s);const l=await oE(o);return[l,o===l?"plain":"s256"]}const iE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sE(t){const e=t.headers.get(Pu);if(!e||!e.match(iE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function lE(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function aE(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Lr(t){if(!uE.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function cu(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cE(t,e){return new Proxy(t,{get:(n,o,s)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const l=o.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,s)}return!e.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,o,s)}})}function Bh(t){return JSON.parse(JSON.stringify(t))}const tr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dE=[502,503,504];async function Gh(t){var e;if(!Xw(t))throw new Us(tr(t),0);if(dE.includes(t.status))throw new Us(tr(t),t.status);let n;try{n=await t.json()}catch(l){throw new Ln(tr(l),l)}let o;const s=sE(t);if(s&&s.getTime()>=Gg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new Mu(tr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new _t}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,a)=>l&&typeof a=="string",!0))throw new Mu(tr(n),t.status,n.weak_password.reasons);throw new qg(tr(n),t.status||500,o)}const fE=(t,e,n,o)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(o),Object.assign(Object.assign({},s),n))};async function ae(t,e,n,o){var s;const l=Object.assign({},o?.headers);l[Pu]||(l[Pu]=Gg["2024-01-01"].name),o?.jwt&&(l.Authorization=`Bearer ${o.jwt}`);const a=(s=o?.query)!==null&&s!==void 0?s:{};o?.redirectTo&&(a.redirect_to=o.redirectTo);const f=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",p=await hE(t,e,n+f,{headers:l,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(p):{data:Object.assign({},p),error:null}}async function hE(t,e,n,o,s,l){const a=fE(e,o,s,l);let f;try{f=await t(n,Object.assign({},a))}catch(p){throw console.error(p),new Us(tr(p),0)}if(f.ok||await Gh(f),o?.noResolveJson)return f;try{return await f.json()}catch(p){await Gh(p)}}function Gt(t){var e;let n=null;gE(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Kw(t.expires_in)));const o=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:o},error:null}}function qh(t){const e=Gt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Un(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function pE(t){return{data:t,error:null}}function mE(t){const{action_link:e,email_otp:n,hashed_token:o,redirect_to:s,verification_type:l}=t,a=jr(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:n,hashed_token:o,redirect_to:s,verification_type:l},p=Object.assign({},a);return{data:{properties:f,user:p},error:null}}function Hh(t){return t}function gE(t){return t.access_token&&t.refresh_token&&t.expires_in}const Is=["global","local","others"];let ic=class{constructor({url:e="",headers:n={},fetch:o}){this.url=e,this.headers=n,this.fetch=Kg(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Is[0]){if(Is.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Is.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(oe(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,n={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Un})}catch(o){if(oe(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:n}=e,o=jr(e,["options"]),s=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(s.new_email=o?.newEmail,delete s.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:mE,redirectTo:n?.redirectTo})}catch(n){if(oe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Un})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,o,s,l,a,f,p;try{const m={nextPage:null,lastPage:0,total:0},g=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(l=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:""},xform:Hh});if(g.error)throw g.error;const w=await g.json(),_=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,S=(p=(f=g.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return S.length>0&&(S.forEach(x=>{const A=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(x.split(";")[1].split("=")[1]);m[`${C}Page`]=A}),m.total=parseInt(_)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(oe(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){Lr(e);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Un})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Lr(e);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Un})}catch(o){if(oe(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,n=!1){Lr(e);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Un})}catch(o){if(oe(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){Lr(e.userId);try{const{data:n,error:o}=await ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:o}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Lr(e.userId),Lr(e.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,o,s,l,a,f,p;try{const m={nextPage:null,lastPage:0,total:0},g=await ae(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(l=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:""},xform:Hh});if(g.error)throw g.error;const w=await g.json(),_=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,S=(p=(f=g.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return S.length>0&&(S.forEach(x=>{const A=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(x.split(";")[1].split("=")[1]);m[`${C}Page`]=A}),m.total=parseInt(_)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(oe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ae(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ae(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(oe(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(e){try{return await ae(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}};function zh(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const nr={debug:!!(globalThis&&jg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let Yg=class extends sc{};class vE extends sc{}async function Qg(t,e,n){nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),nr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async s=>{if(s){nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Yg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(nr.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const Jh={};async function yE(t,e,n){var o;const s=(o=Jh[t])!==null&&o!==void 0?o:Promise.resolve(),l=Promise.race([s.catch(()=>null),e>=0?new Promise((a,f)=>{setTimeout(()=>{f(new vE(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(a=>a)).catch(a=>{if(a&&a.isAcquireTimeout)throw a;return null}).then(async()=>await n());return Jh[t]=l.catch(async a=>{if(a&&a.isAcquireTimeout)return await s,null;throw a}),await l}function _E(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Xg(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function wE(t){return parseInt(t,16)}function EE(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,o=>o.toString(16).padStart(2,"0")).join("")}function SE(t){var e;const{chainId:n,domain:o,expirationTime:s,issuedAt:l=new Date,nonce:a,notBefore:f,requestId:p,resources:m,scheme:g,uri:w,version:_}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const S=Xg(t.address),x=g?`${g}://${o}`:o,A=t.statement?`${t.statement}
`:"",C=`${x} wants you to sign in with your Ethereum account:
${S}

${A}`;let P=`URI: ${w}
Version: ${_}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${l.toISOString()}`;if(s&&(P+=`
Expiration Time: ${s.toISOString()}`),f&&(P+=`
Not Before: ${f.toISOString()}`),p&&(P+=`
Request ID: ${p}`),m){let U=`
Resources:`;for(const b of m){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);U+=`
- ${b}`}P+=U}return`${C}
${P}`}class ze extends Error{constructor({message:e,code:n,cause:o,name:s}){var l;super(e,{cause:o}),this.__isWebAuthnError=!0,this.name=(l=s??(o instanceof Error?o.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class $s extends ze{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function TE({error:t,options:e}){var n,o,s;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ze({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ze({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ze({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ze({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ze({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ze({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new ze({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ze({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Zg(a)){if(l.rp.id!==a)return new ze({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new ze({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ze({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function xE({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ze({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ze({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Zg(o)){if(n.rpId!==o)return new ze({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ze({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class CE{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const AE=new CE;function IE(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:o}=t,s=jr(t,["challenge","user","excludeCredentials"]),l=qr(e).buffer,a=Object.assign(Object.assign({},n),{id:qr(n.id).buffer}),f=Object.assign(Object.assign({},s),{challenge:l,user:a});if(o&&o.length>0){f.excludeCredentials=new Array(o.length);for(let p=0;p<o.length;p++){const m=o[p];f.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:qr(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return f}function RE(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,o=jr(t,["challenge","allowCredentials"]),s=qr(e).buffer,l=Object.assign(Object.assign({},o),{challenge:s});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const f=n[a];l.allowCredentials[a]=Object.assign(Object.assign({},f),{id:qr(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function kE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:sr(new Uint8Array(t.response.attestationObject)),clientDataJSON:sr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function NE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,o=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:sr(new Uint8Array(s.authenticatorData)),clientDataJSON:sr(new Uint8Array(s.clientDataJSON)),signature:sr(new Uint8Array(s.signature)),userHandle:s.userHandle?sr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Zg(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Wh(){var t,e;return!!(tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function PE(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new $s("Browser returned unexpected credential type",e)}:{data:null,error:new $s("Empty credential response",e)}}catch(e){return{data:null,error:TE({error:e,options:t})}}}async function bE(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new $s("Browser returned unexpected credential type",e)}:{data:null,error:new $s("Empty credential response",e)}}catch(e){return{data:null,error:xE({error:e,options:t})}}}const ME={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},DE={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Vs(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),o={};for(const s of t)if(s)for(const l in s){const a=s[l];if(a!==void 0)if(Array.isArray(a))o[l]=a;else if(n(a))o[l]=a;else if(e(a)){const f=o[l];e(f)?o[l]=Vs(f,a):o[l]=Vs(a)}else o[l]=a}return o}function LE(t,e){return Vs(ME,t,e||{})}function UE(t,e){return Vs(DE,t,e||{})}class OE{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:o,signal:s},l){try{const{data:a,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:f};const p=s??AE.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:m}=a.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${o}`),m.displayName||(m.displayName=m.name)}switch(a.webauthn.type){case"create":{const m=LE(a.webauthn.credential_options.publicKey,l?.create),{data:g,error:w}=await PE({publicKey:m,signal:p});return g?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:g}},error:null}:{data:null,error:w}}case"request":{const m=UE(a.webauthn.credential_options.publicKey,l?.request),{data:g,error:w}=await bE(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:m,signal:p}));return g?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:g}},error:null}:{data:null,error:w}}}}catch(a){return oe(a)?{data:null,error:a}:{data:null,error:new Ln("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:o})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},l){if(!n)return{data:null,error:new Wr("rpId is required for WebAuthn authentication")};try{if(!Wh())return{data:null,error:new Ln("Browser does not support WebAuthn",null)};const{data:a,error:f}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:o},signal:s},{request:l});if(!a)return{data:null,error:f};const{webauthn:p}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:p.type,rpId:n,rpOrigins:o,credential_response:p.credential_response}})}catch(a){return oe(a)?{data:null,error:a}:{data:null,error:new Ln("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},l){if(!n)return{data:null,error:new Wr("rpId is required for WebAuthn registration")};try{if(!Wh())return{data:null,error:new Ln("Browser does not support WebAuthn",null)};const{data:a,error:f}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(g=>{var w;return(w=g.data)===null||w===void 0?void 0:w.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:f};const{data:p,error:m}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:s},{create:l});return p?this._verify({factorId:a.id,challengeId:p.challengeId,webauthn:{rpId:n,rpOrigins:o,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(a){return oe(a)?{data:null,error:a}:{data:null,error:new Ln("Unexpected error in register",a)}}}}_E();const FE={url:Fw,storageKey:$w,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function jh(t,e,n){return await n()}const Ur={};let lc=class Du{get jwks(){var e,n;return(n=(e=Ur[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ur[this.storageKey]=Object.assign(Object.assign({},Ur[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ur[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ur[this.storageKey]=Object.assign(Object.assign({},Ur[this.storageKey]),{cachedAt:e})}constructor(e){var n,o,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},FE),e);if(this.storageKey=l.storageKey,this.instanceID=(n=Du.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Du.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&tt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new ic({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Kg(l.fetch),this.lock=l.lock||jh,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&tt()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=Qg:this.lock=jh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new OE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:jg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zh(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=zh(this.memoryStorage)),tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Bg}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},o="none";if(tt()&&(n=Qw(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),tt()&&this.detectSessionInUrl&&o!=="none"){const{data:s,error:l}=await this._getSessionFromURL(n,o);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Jg(l)){const p=(e=l.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:a,redirectType:f}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",f),await this._saveSession(a),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return oe(n)?this._returnResult({error:n}):this._returnResult({error:new Ln("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,o,s;try{const l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:Gt}),{data:a,error:f}=l;if(f||!a)return this._returnResult({data:{user:null,session:null},error:f});const p=a.session,m=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(l){if(oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,o,s;try{let l;if("email"in e){const{email:g,password:w,options:_}=e;let S=null,x=null;this.flowType==="pkce"&&([S,x]=await Dr(this.storage,this.storageKey)),l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:g,password:w,data:(n=_?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:S,code_challenge_method:x},xform:Gt})}else if("phone"in e){const{phone:g,password:w,options:_}=e;l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:w,data:(o=_?.data)!==null&&o!==void 0?o:{},channel:(s=_?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:Gt})}else throw new zo("You must provide either an email or phone number and a password");const{data:a,error:f}=l;if(f||!a)return await et(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const p=a.session,m=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(l){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:a,options:f}=e;n=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:a,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:qh})}else if("phone"in e){const{phone:l,password:a,options:f}=e;n=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:a,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:qh})}else throw new zo("You must provide either an email or phone number and a password");const{data:o,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!o||!o.session||!o.user){const l=new er;return this._returnResult({data:{user:null,session:null},error:l})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:s})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,o,s,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,o,s,l,a,f,p,m,g,w,_;let S,x;if("message"in e)S=e.message,x=e.signature;else{const{chain:A,wallet:C,statement:P,options:U}=e;let b;if(tt())if(typeof C=="object")b=C;else{const j=window;if("ethereum"in j&&typeof j.ethereum=="object"&&"request"in j.ethereum&&typeof j.ethereum.request=="function")b=j.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=C}const O=new URL((n=U?.url)!==null&&n!==void 0?n:window.location.href),H=await b.request({method:"eth_requestAccounts"}).then(j=>j).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=Xg(H[0]);let W=(o=U?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!W){const j=await b.request({method:"eth_chainId"});W=wE(j)}const he={domain:O.host,address:z,statement:P,uri:O.href,version:"1",chainId:W,nonce:(s=U?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(l=U?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(f=U?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(p=U?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=U?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(g=U?.signInWithEthereum)===null||g===void 0?void 0:g.resources};S=SE(he),x=await b.request({method:"personal_sign",params:[EE(S),z]})}try{const{data:A,error:C}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:x},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Gt});if(C)throw C;if(!A||!A.session||!A.user){const P=new er;return this._returnResult({data:{user:null,session:null},error:P})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:C})}catch(A){if(oe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var n,o,s,l,a,f,p,m,g,w,_,S;let x,A;if("message"in e)x=e.message,A=e.signature;else{const{chain:C,wallet:P,statement:U,options:b}=e;let O;if(tt())if(typeof P=="object")O=P;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))O=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=P}const H=new URL((n=b?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const z=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b?.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),U?{statement:U}:null));let W;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")W=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)W=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)x=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),A=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${H.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(s=(o=b?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((l=b?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((f=b?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((p=b?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((m=b?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((w=(g=b?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||w===void 0)&&w.length?["Resources",...b.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const z=await O.signMessage(new TextEncoder().encode(x),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=z}}try{const{data:C,error:P}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:sr(A)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Gt});if(P)throw P;if(!C||!C.session||!C.user){const U=new er;return this._returnResult({data:{user:null,session:null},error:U})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:P})}catch(C){if(oe(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const n=await Zn(this.storage,`${this.storageKey}-code-verifier`),[o,s]=(n??"").split("/");try{const{data:l,error:a}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:Gt});if(await et(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!l||!l.session||!l.user){const f=new er;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:s??null}),error:a})}catch(l){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:o,token:s,access_token:l,nonce:a}=e,f=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:s,access_token:l,nonce:a,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Gt}),{data:p,error:m}=f;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const g=new er;return this._returnResult({data:{user:null,session:null},error:g})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,o,s,l,a;try{if("email"in e){const{email:f,options:p}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Dr(this.storage,this.storageKey));const{error:w}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=p?.data)!==null&&n!==void 0?n:{},create_user:(o=p?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in e){const{phone:f,options:p}=e,{data:m,error:g}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(s=p?.data)!==null&&s!==void 0?s:{},create_user:(l=p?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(a=p?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:g})}throw new zo("You must provide either an email or phone number.")}catch(f){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var n,o;try{let s,l;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:a,error:f}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:s,xform:Gt});if(f)throw f;if(!a)throw new Error("An error occurred on token verification.");const p=a.session,m=a.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(s){if(oe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,o,s,l,a;try{let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Dr(this.storage,this.storageKey));const m=await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:p}),headers:this.headers,xform:pE});return!((l=m.data)===null||l===void 0)&&l.url&&tt()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(f){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:o}=e;if(o)throw o;if(!n)throw new _t;const{error:s}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(oe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:o,type:s,options:l}=e,{error:a}=await ae(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:s,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:o,type:s,options:l}=e,{data:a,error:f}=await ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:s,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:f})}throw new zo("You must provide either an email or phone number and a type")}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Zn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<au:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const a=await Zn(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=cu()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=cE(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Un}):await this._useSession(async n=>{var o,s,l;const{data:a,error:f}=n;if(f)throw f;return!(!((o=a.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _t}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&l!==void 0?l:void 0,xform:Un})})}catch(n){if(oe(n))return zg(n)&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async o=>{const{data:s,error:l}=o;if(l)throw l;if(!s.session)throw new _t;const a=s.session;let f=null,p=null;this.flowType==="pkce"&&e.email!=null&&([f,p]=await Dr(this.storage,this.storageKey));const{data:m,error:g}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:p}),jwt:a.access_token,xform:Un});if(g)throw g;return a.user=m.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(o){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new _t;const n=Date.now()/1e3;let o=n,s=!0,l=null;const{payload:a}=uu(e.access_token);if(a.exp&&(o=a.exp,s=o<=n),s){const{data:f,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:p}=await this._getUser(e.access_token);if(p)throw p;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(oe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var o;if(!e){const{data:a,error:f}=n;if(f)throw f;e=(o=a.session)!==null&&o!==void 0?o:void 0}if(!e?.refresh_token)throw new _t;const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!tt())throw new Jo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new bu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new bu("No code detected.");const{data:U,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:s,access_token:l,refresh_token:a,expires_in:f,expires_at:p,token_type:m}=e;if(!l||!f||!a||!m)throw new Jo("No session defined in URL");const g=Math.round(Date.now()/1e3),w=parseInt(f);let _=g+w;p&&(_=parseInt(p));const S=_-g;S*1e3<=Or&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${w}s`);const x=_-w;g-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,_,g):g-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,_,g);const{data:A,error:C}=await this._getUser(l);if(C)throw C;const P={provider_token:o,provider_refresh_token:s,access_token:l,expires_in:w,expires_at:_,refresh_token:a,token_type:m,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:P,redirectType:e.type},error:null})}catch(o){if(oe(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Zn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:s,error:l}=n;if(l)return this._returnResult({error:l});const a=(o=s.session)===null||o===void 0?void 0:o.access_token;if(a){const{error:f}=await this.admin.signOut(a,e);if(f&&!(Hg(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=Yw(),o={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async n=>{var o,s;try{const{data:{session:l},error:a}=n;if(a)throw a;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let o=null,s=null;this.flowType==="pkce"&&([o,s]=await Dr(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:o,error:s}=await this._useSession(async l=>{var a,f,p,m,g;const{data:w,error:_}=l;if(_)throw _;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",S,{headers:this.headers,jwt:(g=(m=w.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return tt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:e.provider,url:o?.url},error:null})}catch(o){if(oe(o))return this._returnResult({data:{provider:e.provider,url:null},error:o});throw o}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var o;try{const{error:s,data:{session:l}}=n;if(s)throw s;const{options:a,provider:f,token:p,access_token:m,nonce:g}=e,w=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=l?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:f,id_token:p,access_token:m,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Gt}),{data:_,error:S}=w;return S?this._returnResult({data:{user:null,session:null},error:S}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new er}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:S}))}catch(s){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var o,s;const{data:l,error:a}=n;if(a)throw a;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(o=l.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await eE(async s=>(s>0&&await Zw(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gt})),(s,l)=>{const a=200*Math.pow(2,s);return l&&As(l)&&Date.now()+a-o<Or})}catch(o){if(this._debug(n,"error",o),oe(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",o),tt()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const s=await Zn(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Zn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Fr(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a?.user)!==null&&e!==void 0?e:cu()}else if(s&&!s.user&&!s.user){const a=await Zn(this.storage,this.storageKey+"-user");a&&a?.user?(s.user=a.user,await et(this.storage,this.storageKey+"-user"),await Fr(this.storage,this.storageKey,s)):s.user=cu()}if(this._debug(o,"session from storage",s),!this._isValidSession(s)){this._debug(o,"session is not valid"),s!==null&&await this._removeSession();return}const l=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<au;if(this._debug(o,`session has${l?"":" not"} expired with margin of ${au}s`),l){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),As(a)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:f}=await this._getUser(s.access_token);!f&&a?.user?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(o,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(o,"error",s),console.error(s);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var n,o;if(!e)throw new _t;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Qs;const{data:l,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!l.session)throw new _t;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(s,"error",l),oe(l)){const a={data:null,error:l};return As(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(l),l}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,o=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],a=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,n)}catch(p){l.push(p)}});if(await Promise.all(a),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await et(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await Fr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const l=Bh(s);await Fr(this.storage,this.storageKey,l)}else{const s=Bh(n);await Fr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await et(this.storage,this.storageKey),await et(this.storage,this.storageKey+"-code-verifier"),await et(this.storage,this.storageKey+"-user"),this.userStorage&&await et(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&tt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Or);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((o.expires_at*1e3-e)/Or);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Or}ms, refresh threshold is ${Nu} ticks`),s<=Nu&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,o){const s=[`provider=${encodeURIComponent(n)}`];if(o?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[l,a]=await Dr(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(f.toString())}if(o?.queryParams){const l=new URLSearchParams(o.queryParams);s.push(l.toString())}return o?.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var o;const{data:s,error:l}=n;return l?this._returnResult({data:null,error:l}):await ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=s?.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var o,s;const{data:l,error:a}=n;if(a)return this._returnResult({data:null,error:a});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:m}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&p.type==="totp"&&(!((s=p?.totp)===null||s===void 0)&&s.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:s,error:l}=n;if(l)return this._returnResult({data:null,error:l});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?kE(e.webauthn.credential_response):NE(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:p}=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(o=s?.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:p}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:s,error:l}=n;if(l)return this._returnResult({data:null,error:l});const a=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(o=s?.session)===null||o===void 0?void 0:o.access_token});if(a.error)return a;const{data:f}=a;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:IE(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:RE(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:o}=await this._challenge({factorId:e.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const s={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n?.factors)!==null&&e!==void 0?e:[])s.all.push(l),l.status==="verified"&&s[l.factor_type].push(l);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:o},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=uu(o.access_token);let a=null;l.aal&&(a=l.aal);let f=a;((n=(e=o.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(f="aal2");const m=l.amr||[];return{data:{currentLevel:a,nextLevel:f,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:o},error:s}=n;return s?this._returnResult({data:null,error:s}):o?await ae(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:o.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new _t})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async o=>{const{data:{session:s},error:l}=o;if(l)return this._returnResult({data:null,error:l});if(!s)return this._returnResult({data:null,error:new _t});const a=await ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return a.data&&a.data.redirect_url&&tt()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(o){if(oe(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(e,n){try{return await this._useSession(async o=>{const{data:{session:s},error:l}=o;if(l)return this._returnResult({data:null,error:l});if(!s)return this._returnResult({data:null,error:new _t});const a=await ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return a.data&&a.data.redirect_url&&tt()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(o){if(oe(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:o}=e;return o?this._returnResult({data:null,error:o}):n?await ae(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new _t})})}catch(e){if(oe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:o},error:s}=n;return s?this._returnResult({data:null,error:s}):o?(await ae(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new _t})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let o=n.keys.find(f=>f.kid===e);if(o)return o;const s=Date.now();if(o=this.jwks.keys.find(f=>f.kid===e),o&&this.jwks_cached_at+Gw>s)return o;const{data:l,error:a}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=s,o=l.keys.find(f=>f.kid===e),!o)?null:o}async getClaims(e,n={}){try{let o=e;if(!o){const{data:S,error:x}=await this.getSession();if(x||!S.session)return this._returnResult({data:null,error:x});o=S.session.access_token}const{header:s,payload:l,signature:a,raw:{header:f,payload:p}}=uu(o);n?.allowExpired||lE(l.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!m){const{error:S}=await this.getUser(o);if(S)throw S;return{data:{claims:l,header:s,signature:a},error:null}}const g=aE(s.alg),w=await crypto.subtle.importKey("jwk",m,g,!0,["verify"]);if(!await crypto.subtle.verify(g,w,a,jw(`${f}.${p}`)))throw new Os("Invalid JWT signature");return{data:{claims:l,header:s,signature:a},error:null}}catch(o){if(oe(o))return this._returnResult({data:null,error:o});throw o}}};lc.nextInstanceID={};const $E=ic,VE=lc,BE=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:$E,AuthApiError:qg,AuthClient:VE,AuthError:Wr,AuthImplicitGrantRedirectError:Jo,AuthInvalidCredentialsError:zo,AuthInvalidJwtError:Os,AuthInvalidTokenResponseError:er,AuthPKCEGrantCodeExchangeError:bu,AuthRetryableFetchError:Us,AuthSessionMissingError:_t,AuthUnknownError:Ln,AuthWeakPasswordError:Mu,CustomAuthError:hn,GoTrueAdminApi:ic,GoTrueClient:lc,NavigatorLockAcquireTimeoutError:Yg,SIGN_OUT_SCOPES:Is,isAuthApiError:Hg,isAuthError:oe,isAuthImplicitGrantRedirectError:Jg,isAuthRetryableFetchError:As,isAuthSessionMissingError:zg,isAuthWeakPasswordError:qw,lockInternals:nr,navigatorLock:Qg,processLock:yE},Symbol.toStringTag,{value:"Module"})),ev=Yo(BE);var Kh;function GE(){if(Kh)return Bo;Kh=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.SupabaseAuthClient=void 0;const t=ev;let e=class extends t.AuthClient{constructor(o){super(o)}};return Bo.SupabaseAuthClient=e,Bo}var Yh;function Qh(){if(Yh)return cs;Yh=1,Object.defineProperty(cs,"__esModule",{value:!0});const t=hg,e=_g(),n=Ig,o=Mw,s=Lw(),l=Uw(),a=Ow(),f=GE();class p{constructor(g,w,_){var S,x,A;this.supabaseUrl=g,this.supabaseKey=w;const C=(0,a.validateSupabaseUrl)(g);if(!w)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",C),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",C),this.storageUrl=new URL("storage/v1",C),this.functionsUrl=new URL("functions/v1",C);const P=`sb-${C.hostname.split(".")[0]}-auth-token`,U={db:s.DEFAULT_DB_OPTIONS,realtime:s.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},s.DEFAULT_AUTH_OPTIONS),{storageKey:P}),global:s.DEFAULT_GLOBAL_OPTIONS},b=(0,a.applySettingDefaults)(_??{},U);this.storageKey=(S=b.auth.storageKey)!==null&&S!==void 0?S:"",this.headers=(x=b.global.headers)!==null&&x!==void 0?x:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(O,H)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(H)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((A=b.auth)!==null&&A!==void 0?A:{},this.headers,b.global.fetch),this.fetch=(0,l.fetchWithAuth)(w,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.accessToken&&this.accessToken().then(O=>this.realtime.setAuth(O)).catch(O=>console.warn("Failed to set initial Realtime auth token:",O)),this.rest=new e.PostgrestClient(new URL("rest/v1",C).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new o.StorageClient(this.storageUrl.href,this.headers,this.fetch,_?.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new t.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(g){return this.rest.from(g)}schema(g){return this.rest.schema(g)}rpc(g,w={},_={head:!1,get:!1,count:void 0}){return this.rest.rpc(g,w,_)}channel(g,w={config:{}}){return this.realtime.channel(g,w)}getChannels(){return this.realtime.getChannels()}removeChannel(g){return this.realtime.removeChannel(g)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var g,w;if(this.accessToken)return await this.accessToken();const{data:_}=await this.auth.getSession();return(w=(g=_.session)===null||g===void 0?void 0:g.access_token)!==null&&w!==void 0?w:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:g,persistSession:w,detectSessionInUrl:_,storage:S,userStorage:x,storageKey:A,flowType:C,lock:P,debug:U,throwOnError:b},O,H){const z={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},z),O),storageKey:A,autoRefreshToken:g,persistSession:w,detectSessionInUrl:_,storage:S,userStorage:x,flowType:C,lock:P,debug:U,throwOnError:b,fetch:H,hasCustomAuthorizationHeader:Object.keys(this.headers).some(W=>W.toLowerCase()==="authorization")})}_initRealtimeClient(g){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},g),{params:Object.assign({apikey:this.supabaseKey},g?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((w,_)=>{this._handleTokenChanged(w,"CLIENT",_?.access_token)})}_handleTokenChanged(g,w,_){(g==="TOKEN_REFRESHED"||g==="SIGNED_IN")&&this.changedAccessToken!==_?(this.changedAccessToken=_,this.realtime.setAuth(_)):g==="SIGNED_OUT"&&(this.realtime.setAuth(),w=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return cs.default=p,cs}var Xh;function qE(){return Xh||(Xh=1,(function(t){var e=un&&un.__createBinding||(Object.create?(function(g,w,_,S){S===void 0&&(S=_);var x=Object.getOwnPropertyDescriptor(w,_);(!x||("get"in x?!w.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return w[_]}}),Object.defineProperty(g,S,x)}):(function(g,w,_,S){S===void 0&&(S=_),g[S]=w[_]})),n=un&&un.__exportStar||function(g,w){for(var _ in g)_!=="default"&&!Object.prototype.hasOwnProperty.call(w,_)&&e(w,g,_)},o=un&&un.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const s=o(Qh());n(ev,t);var l=_g();Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return l.PostgrestError}});var a=hg;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return a.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return a.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return a.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return a.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return a.FunctionRegion}}),n(Ig,t);var f=Qh();Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return o(f).default}});const p=(g,w,_)=>new s.default(g,w,_);t.createClient=p;function m(){if(typeof window<"u"||typeof process>"u")return!1;const g=process.version;if(g==null)return!1;const w=g.match(/^v(\d+)\./);return w?parseInt(w[1],10)<=18:!1}m()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(un)),un}var tv=qE();const nv=Yu(tv),HE=Y0({__proto__:null,default:nv},[tv]),{PostgrestError:Vk,FunctionsHttpError:Bk,FunctionsFetchError:Gk,FunctionsRelayError:qk,FunctionsError:Hk,FunctionRegion:zk,SupabaseClient:Jk,createClient:zE,GoTrueAdminApi:Wk,GoTrueClient:jk,AuthAdminApi:Kk,AuthClient:Yk,navigatorLock:Qk,NavigatorLockAcquireTimeoutError:Xk,lockInternals:Zk,processLock:eN,SIGN_OUT_SCOPES:tN,AuthError:nN,AuthApiError:rN,AuthUnknownError:oN,CustomAuthError:iN,AuthSessionMissingError:sN,AuthInvalidTokenResponseError:lN,AuthInvalidCredentialsError:aN,AuthImplicitGrantRedirectError:uN,AuthPKCEGrantCodeExchangeError:cN,AuthRetryableFetchError:dN,AuthWeakPasswordError:fN,AuthInvalidJwtError:hN,isAuthError:pN,isAuthApiError:mN,isAuthSessionMissingError:gN,isAuthImplicitGrantRedirectError:vN,isAuthRetryableFetchError:yN,isAuthWeakPasswordError:_N,RealtimePresence:wN,RealtimeChannel:EN,RealtimeClient:SN,REALTIME_LISTEN_TYPES:TN,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:xN,REALTIME_PRESENCE_LISTEN_EVENTS:CN,REALTIME_SUBSCRIBE_STATES:AN,REALTIME_CHANNEL_STATES:IN}=nv||HE,du={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GEMINI_API_KEY:"",VITE_SUPABASE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hYmpsaGpsa2VlaGFjenhyZ2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4Mzg5MDMsImV4cCI6MjA4MTQxNDkwM30.eHuUAZMQ9eGffxCwYwOczhzZuRksv41QoUaIulebpT4",VITE_SUPABASE_URL:"https://mabjlhjlkeehaczxrgcy.supabase.co"},rv=t=>du&&du[t]?du[t]:"",fu=rv("VITE_SUPABASE_URL"),Zh=rv("VITE_SUPABASE_KEY");let ov=null;if(fu&&Zh&&fu!=="https://placeholder.supabase.co")try{ov=zE(fu,Zh)}catch(t){console.error("Error initializing Supabase:",t)}else console.warn("VITE_SUPABASE_URL o VITE_SUPABASE_KEY no configuradas. El backend funcionar en modo MOCK (sin persistencia).");const dn=ov,JE=({onSuccess:t})=>{const[e,n]=pe.useState(qo[0].id),o=qo.find(Y=>Y.id===e)||qo[0],[s,l]=pe.useState({name:"",email:"",phone:"+569 ",date:"",time:"",isHomeService:!1,address:"",serviceId:o.id,serviceName:o.name,referral:""}),[a,f]=pe.useState(!1),[p,m]=pe.useState(!1),[g,w]=pe.useState([]),[_,S]=pe.useState([]),[x,A]=pe.useState({}),[C,P]=pe.useState(null),[U,b]=pe.useState(!1);pe.useEffect(()=>{l(Y=>({...Y,serviceId:o.id,serviceName:o.name,isHomeService:o.homeServiceOnly?!0:Y.isHomeService}))},[o]);const O=o.durationMin+(s.isHomeService?M_:0),H=o.price+(s.isHomeService?b_:0);pe.useEffect(()=>{s.date&&z(s.date)},[s.date]),pe.useEffect(()=>{s.date&&W()},[s.date,_,O]),pe.useEffect(()=>{const ue=setTimeout(()=>{if(s.name.length>3&&s.phone.length>8){const X=JSON.parse(localStorage.getItem("mock_bookings")||"[]").find(J=>J.phone.replace(/\s/g,"")===s.phone.replace(/\s/g,"")&&J.name.toLowerCase()===s.name.toLowerCase());X&&(P(X),b(!0))}},1e3);return()=>clearTimeout(ue)},[s.name,s.phone]);const z=async Y=>{m(!0);try{let ue=[];if(dn){const{data:N,error:F}=await dn.from("bookings").select("time, duration_minutes").eq("date",Y);!F&&N&&(ue=N.map(de=>{const[le,ye]=de.time.split(":").map(Number),_e=le*60+ye;return{start:_e,end:_e+de.duration_minutes}}))}const J=JSON.parse(localStorage.getItem("mock_bookings")||"[]").filter(N=>N.date===Y).map(N=>{const[F,de]=N.time.split(":").map(Number),le=F*60+de,ye=N.duration_minutes||60;return{start:le,end:le+ye}});S([...ue,...J])}catch(ue){console.warn("Error fetching slots",ue),S([])}finally{m(!1)}},W=()=>{const G=[];for(let X=9;X<20;X++)for(let J=0;J<60;J+=30){const N=X*60+J,F=N+O;if(F>1200)continue;if(!_.some(le=>N>=le.start&&N<le.end||F>le.start&&F<=le.end||N<=le.start&&F>=le.end)){const le=`${X.toString().padStart(2,"0")}:${J.toString().padStart(2,"0")}`;G.push(le)}}w(G),s.time&&!G.includes(s.time)&&l(X=>({...X,time:""}))},he=()=>{const Y={};return s.name||(Y.name="El nombre es obligatorio"),(!s.phone||s.phone.trim()==="+569")&&(Y.phone="El telfono es obligatorio"),s.email?/\S+@\S+\.\S+/.test(s.email)||(Y.email="El formato del email no es vlido"):Y.email="El email es obligatorio",s.date||(Y.date="Selecciona una fecha"),s.time||(Y.time="Selecciona una hora"),s.isHomeService&&!s.address&&(Y.address="La direccin es obligatoria para servicio a domicilio"),A(Y),Object.keys(Y).length===0},j=Y=>{const{name:ue,value:G,type:X}=Y.target,J=Y.target.checked;l(N=>({...N,[ue]:X==="checkbox"?J:G})),x[ue]&&A(N=>{const F={...N};return delete F[ue],F})},me=Y=>{l(ue=>({...ue,time:Y})),x.time&&A(ue=>{const G={...ue};return delete G.time,G})},Ie=async()=>{const Y=JSON.parse(localStorage.getItem("mock_bookings")||"[]"),ue={id:Date.now(),...s,duration_minutes:O,created_at:new Date().toISOString()};if(Y.push(ue),localStorage.setItem("mock_bookings",JSON.stringify(Y)),dn)try{const{error:G}=await dn.from("leads").upsert({phone:s.phone,name:s.name,email:s.email,last_booking_date:s.date},{onConflict:"phone"});G&&console.warn("Error saving lead:",G),await dn.from("bookings").insert([{name:s.name,email:s.email,phone:s.phone,date:s.date,time:s.time,is_home_service:s.isHomeService,address:s.address||null,duration_minutes:O}])}catch(G){console.warn("Supabase save failed, relying on local:",G)}},Ve=Y=>{const G=JSON.parse(localStorage.getItem("mock_bookings")||"[]").filter(X=>X.id!==Y);localStorage.setItem("mock_bookings",JSON.stringify(G))},ge=()=>{C&&(Ve(C.id),P(null),b(!1))},Me=()=>{b(!1),l(Y=>({...Y,name:"",phone:"+569 "})),alert(`Entendido. Tu cita anterior (${C.date} a las ${C.time}) se mantiene. Gracias!`)},at=async Y=>{if(!he())return;f(!0),await Ie();const ue=`${o.name}${s.isHomeService?" + Domicilio":" (En Studio)"}`,G=new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(H),X=`
Hola Tus3B Style, acabo de reservar en la web.
--------------------------------
*Cliente:* ${s.name}
*Telfono:* ${s.phone}
*Servicio:* ${ue}
*Fecha:* ${s.date}
*Hora:* ${s.time}
*Duracin:* ${O} min
${s.isHomeService?`*Direccin:* ${s.address}`:""}
${s.referral?`*Referido por:* ${s.referral}`:""}
*Total:* ${G}
--------------------------------
Espero su confirmacin final. Gracias.
    `.trim();await new Promise(J=>setTimeout(J,800)),f(!1),t&&t(s);{const J=`https://wa.me/${Ps}?text=${encodeURIComponent(X)}`;window.open(J,"_blank")}};return E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start fade-in pb-12 relative",children:[U&&C&&E.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 bg-white/95 backdrop-blur-sm rounded-2xl animate-in fade-in zoom-in-95",children:E.jsxs("div",{className:"bg-white border border-stone-200 shadow-2xl p-8 rounded-2xl max-w-sm text-center",children:[E.jsx(c_,{className:"mx-auto text-amber-500 mb-4 h-12 w-12"}),E.jsx("h3",{className:"serif text-2xl font-bold text-stone-900 mb-2",children:"Ya tienes una reserva"}),E.jsxs("p",{className:"text-stone-600 mb-6 text-sm",children:["Hemos encontrado una cita para ",E.jsx("strong",{children:C.name})," el da ",E.jsx("strong",{children:C.date})," a las ",E.jsx("strong",{children:C.time}),"."]}),E.jsx("p",{className:"font-bold text-stone-900 mb-6 text-lg",children:"Deseas cambiar tu reserva?"}),E.jsxs("div",{className:"space-y-3",children:[E.jsx("button",{onClick:ge,className:"w-full bg-stone-900 text-white py-3 rounded-xl font-bold hover:bg-stone-700 transition",children:"S, cambiar cita"}),E.jsx("button",{onClick:Me,className:"w-full bg-stone-100 text-stone-600 py-3 rounded-xl font-bold hover:bg-stone-200 transition",children:"No, mantener la anterior"})]})]})}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 relative",children:[!dn&&E.jsxs("div",{className:"absolute top-0 right-0 bg-amber-100 text-amber-800 text-[10px] font-bold px-3 py-1 rounded-bl-lg flex items-center gap-1 z-10",children:[E.jsx(g_,{size:12})," MODO DEMO"]}),E.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Elige tu Servicio"}),E.jsxs("div",{className:"relative mb-6",children:[E.jsx("select",{value:e,onChange:Y=>n(Y.target.value),className:"w-full p-4 rounded-xl bg-stone-50 border border-stone-200 text-stone-900 font-serif text-lg focus:ring-2 focus:ring-stone-900 outline-none appearance-none",children:qo.map(Y=>E.jsxs("option",{value:Y.id,children:[Y.name," - $",Y.price.toLocaleString("es-CL")]},Y.id))}),E.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:E.jsx("svg",{className:"w-5 h-5 text-stone-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),E.jsx("p",{className:"text-stone-500 font-light text-sm mb-4",children:o.description}),E.jsxs("div",{className:"flex justify-between items-center bg-stone-50 p-4 rounded-xl mb-4",children:[E.jsxs("div",{children:[E.jsx("span",{className:"block text-2xl font-semibold text-stone-900",children:new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(H)}),E.jsx("span",{className:"text-xs text-stone-500 uppercase tracking-wide",children:"Precio Estimado"})]}),E.jsxs("div",{className:"text-right",children:[E.jsxs("span",{className:"block text-lg font-medium text-stone-900",children:[O," min"]}),E.jsx("span",{className:"text-xs text-stone-500 uppercase tracking-wide",children:"Duracin"})]})]}),E.jsx("div",{className:"mb-4",children:E.jsxs("div",{className:`flex items-start p-3 rounded-lg border relative transition-colors ${o.homeServiceOnly?"bg-amber-50 border-amber-200":"bg-blue-50/50 border-blue-100"}`,children:[E.jsx("div",{className:"flex items-center h-5 mt-0.5",children:E.jsx("input",{id:"isHomeService",name:"isHomeService",type:"checkbox",checked:s.isHomeService,onChange:j,disabled:o.homeServiceOnly,className:"focus:ring-stone-500 h-5 w-5 text-stone-900 border-gray-300 rounded cursor-pointer disabled:opacity-50"})}),E.jsxs("div",{className:"ml-3",children:[E.jsx("label",{htmlFor:"isHomeService",className:"font-bold text-stone-900 cursor-pointer",children:o.homeServiceOnly?"Servicio Exclusivo a Domicilio":"Servicio a Domicilio? (+ $3.000)"}),E.jsxs("p",{className:"text-xs text-stone-500 mt-1 leading-relaxed",children:["Vamos a tu casa en ",D_.join(", "),". ",E.jsx("br",{}),E.jsx("span",{className:"text-blue-600 font-medium",children:"Incluye +30 min de traslado."})]})]})]})}),E.jsx("h4",{className:"text-xs uppercase tracking-widest text-stone-400 mb-3 font-bold mt-6",children:"Incluye"}),E.jsx("ul",{className:"space-y-2",children:o.includes.map((Y,ue)=>E.jsxs("li",{className:"flex items-center text-sm text-stone-700",children:[E.jsx(Dm,{size:14,className:"text-stone-900 mr-2"}),Y]},ue))})]}),E.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[E.jsxs("h3",{className:"serif text-xl text-stone-900 mb-4 flex items-center gap-2",children:[E.jsx("span",{className:"bg-stone-900 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center font-sans",children:"1"}),"Tus Datos"]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Nombre y Apellido"}),E.jsx("input",{type:"text",name:"name",value:s.name,onChange:j,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${x.name?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"Ej: Mara Prez"}),x.name&&E.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.name})]}),E.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Telfono"}),E.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:j,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${x.phone?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"+569...",inputMode:"numeric"}),x.phone&&E.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.phone})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Email"}),E.jsx("input",{type:"email",name:"email",value:s.email,onChange:j,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${x.email?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"correo@ejemplo.com"}),x.email&&E.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.email})]})]}),E.jsxs("div",{className:"animate-in fade-in pt-2",children:[E.jsxs("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1 flex items-center gap-1",children:[E.jsx(R_,{size:12})," Quin te recomend? (Opcional)"]}),E.jsx("input",{type:"text",name:"referral",value:s.referral,onChange:j,className:"w-full px-4 py-3 rounded-lg bg-purple-50 border border-purple-100 focus:border-purple-300 focus:ring-1 outline-none transition-all placeholder-purple-300 text-purple-900",placeholder:"Nombre o Telfono de tu amiga"})]}),s.isHomeService&&E.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 pt-2",children:[E.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Direccin (Comuna y Calle)"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"text",name:"address",value:s.address,onChange:j,className:`w-full px-4 py-3 rounded-lg bg-amber-50 border ${x.address?"border-red-300 focus:border-red-500":"border-amber-200 focus:border-amber-500"} focus:ring-1 pl-10 outline-none transition-all`,placeholder:"Av. Irarrzaval 1234, uoa"}),E.jsx(Um,{size:18,className:"absolute left-3 top-3.5 text-amber-500"})]}),x.address&&E.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.address})]})]})]})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[E.jsxs("h3",{className:"serif text-xl text-stone-900 mb-4 flex items-center gap-2",children:[E.jsx("span",{className:"bg-stone-900 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center font-sans",children:"2"}),"Fecha y Hora"]}),E.jsxs("div",{className:"mb-6",children:[E.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Selecciona un da"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"date",name:"date",min:new Date().toISOString().split("T")[0],value:s.date,onChange:j,className:`w-full px-4 py-4 rounded-xl bg-stone-50 border ${x.date?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} text-lg font-medium shadow-sm outline-none`}),E.jsx(f_,{size:20,className:"absolute right-4 top-4.5 text-stone-400 pointer-events-none"})]}),x.date&&E.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.date})]}),s.date&&E.jsxs("div",{className:"animate-in fade-in",children:[E.jsxs("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-3 flex justify-between",children:[E.jsx("span",{children:"Horas Disponibles"}),p&&E.jsxs("span",{className:"flex items-center text-stone-400",children:[E.jsx(Ns,{size:12,className:"animate-spin mr-1"})," Buscando..."]})]}),g.length>0?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-4 gap-3",children:g.map(Y=>E.jsx("button",{onClick:()=>me(Y),className:`py-3 px-2 rounded-lg text-sm font-bold transition-all transform active:scale-95 ${s.time===Y?"bg-stone-900 text-white shadow-md scale-105 ring-2 ring-offset-2 ring-stone-900":"bg-white border border-stone-200 text-stone-600 hover:border-stone-900 hover:bg-stone-50"}`,children:Y},Y))}),x.time&&E.jsx("p",{className:"text-red-500 text-xs mt-2 text-center bg-red-50 p-2 rounded",children:x.time})]}):E.jsx("div",{className:"bg-stone-50 p-4 rounded-lg text-center text-stone-500 text-sm",children:p?"Cargando...":"No hay horas disponibles para este da. Intenta otra fecha."})]}),!s.date&&E.jsxs("div",{className:"text-center py-8 text-stone-400 text-sm italic",children:[E.jsx(h_,{size:32,className:"mx-auto mb-2 opacity-20"}),"Selecciona una fecha para ver disponibilidad"]})]}),E.jsxs("div",{className:"pt-2 sticky bottom-4 z-10",children:[E.jsxs("button",{onClick:()=>at(),disabled:a,className:"w-full flex justify-center items-center space-x-2 bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-xl shadow-xl transition-all transform hover:-translate-y-1 disabled:opacity-75 disabled:cursor-not-allowed disabled:transform-none",children:[a?E.jsx(Ns,{className:"animate-spin"}):E.jsx(A_,{size:22}),E.jsx("span",{className:"text-lg",children:a?"Procesando...":"Confirmar y Enviar WhatsApp"})]}),E.jsx("p",{className:"text-xs text-center text-stone-400 mt-3 px-4",children:"Al confirmar, volvers al inicio y se abrir WhatsApp."})]})]})]})},WE=()=>{const[t,e]=pe.useState(""),[n,o]=pe.useState(null),s=pe.useMemo(()=>{const w=new Set;return vu.forEach(_=>_.notes.forEach(S=>w.add(S))),Array.from(w).sort()},[]),l=pe.useMemo(()=>vu.filter(w=>{const _=w.name.toLowerCase().includes(t.toLowerCase())||w.brand.toLowerCase().includes(t.toLowerCase()),S=n?w.notes.includes(n):!0;return _&&S}),[t,n]),a=l.filter(w=>w.category==="classic"),f=l.filter(w=>w.category==="arab"),p=(w,_)=>{const S=_==="5ml"?w.price5ml:w.price10ml,x=`Hola Tus3B Style, quiero comprar el decant de *${w.brand} - ${w.name}* en formato *${_}* por $${S}. Tienen disponibilidad?`,A=`https://wa.me/${Ps}?text=${encodeURIComponent(x)}`;window.open(A,"_blank")},m=()=>{window.open(`https://wa.me/${Ps}?text=${encodeURIComponent("Hola Tus3B Style, me gustara cotizar/encargar un perfume que no veo en el catlogo.")}`,"_blank")},g=w=>E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12",children:w.map((_,S)=>E.jsxs("div",{className:"group flex flex-col h-full",children:[E.jsxs("div",{className:"relative aspect-[4/5] overflow-hidden bg-white rounded-2xl mb-5 shadow-[0_2px_10px_-4px_rgba(0,0,0,0.05)] border border-stone-100 transition-all duration-300 group-hover:shadow-[0_8px_30px_-4px_rgba(0,0,0,0.1)]",children:[!t&&!n&&E.jsx("div",{className:"absolute top-0 left-0 bg-stone-900 text-white w-8 h-8 flex items-center justify-center font-serif text-sm border-br-xl z-10",children:S+1}),E.jsx("img",{src:_.image,alt:_.name,className:"w-full h-full object-contain p-8 transition-transform duration-700 ease-out group-hover:scale-110"}),E.jsx("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity bg-stone-900/90 text-white text-[10px] uppercase font-bold px-2 py-1 rounded",children:"Original"})]}),E.jsxs("div",{className:"flex-1 flex flex-col",children:[E.jsx("h4",{className:"text-xs uppercase tracking-wider text-stone-500 font-bold mb-1",children:_.brand}),E.jsx("h3",{className:"serif text-2xl text-stone-900 mb-2 group-hover:text-stone-700 transition-colors",children:_.name}),E.jsx("p",{className:"text-stone-600 text-sm mb-4 line-clamp-3 leading-relaxed flex-grow",children:_.description}),E.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:_.notes.slice(0,3).map(x=>E.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-stone-50 text-stone-500 px-2 py-1 rounded border border-stone-100",children:x},x))}),E.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-auto",children:[E.jsxs("button",{onClick:()=>p(_,"5ml"),className:"group/btn flex flex-col items-center justify-center p-2.5 border border-stone-200 rounded-lg hover:border-stone-900 hover:bg-stone-900 transition-all duration-300",children:[E.jsx("span",{className:"text-[10px] font-bold text-stone-500 uppercase mb-0.5 group-hover/btn:text-stone-400",children:"5 ML"}),E.jsxs("span",{className:"text-stone-900 font-semibold group-hover/btn:text-white",children:["$",_.price5ml.toLocaleString("es-CL")]})]}),E.jsxs("button",{onClick:()=>p(_,"10ml"),className:"group/btn flex flex-col items-center justify-center p-2.5 border border-stone-200 rounded-lg hover:border-stone-900 hover:bg-stone-900 transition-all duration-300",children:[E.jsx("span",{className:"text-[10px] font-bold text-stone-500 uppercase mb-0.5 group-hover/btn:text-stone-400",children:"10 ML"}),E.jsxs("span",{className:"text-stone-900 font-semibold group-hover/btn:text-white",children:["$",_.price10ml.toLocaleString("es-CL")]})]})]})]})]},_.id))});return E.jsxs("div",{className:"space-y-16 fade-in",children:[E.jsxs("div",{className:"flex flex-col border-b border-stone-200 pb-8 gap-6",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"serif text-4xl text-stone-900",children:"Catlogo de Decants"}),E.jsx("p",{className:"text-stone-500 mt-2 max-w-xl",children:"Descubre tu firma olfativa con nuestra curadura de perfumes 100% originales."})]}),E.jsxs("div",{className:"relative w-full md:w-72",children:[E.jsx("input",{type:"text",placeholder:"Buscar marca o nombre...",className:"pl-10 pr-4 py-3 border border-stone-300 rounded-xl focus:ring-stone-900 focus:border-stone-900 w-full transition-shadow hover:shadow-sm",value:t,onChange:w=>e(w.target.value)}),E.jsx($m,{size:18,className:"absolute left-3 top-3.5 text-stone-400"})]})]}),E.jsx("div",{className:"w-full overflow-x-auto pb-2 -mx-4 px-4 md:mx-0 md:px-0 scrollbar-hide",children:E.jsxs("div",{className:"flex flex-nowrap md:flex-wrap gap-2 items-center min-w-max",children:[E.jsx("span",{className:"text-xs font-bold uppercase text-stone-400 mr-2 sticky left-0 bg-white pl-2 md:pl-0",children:"Filtrar:"}),s.map(w=>E.jsx("button",{onClick:()=>o(n===w?null:w),className:`text-xs px-4 py-2 rounded-full border transition-all duration-200 whitespace-nowrap ${n===w?"bg-stone-900 text-white border-stone-900 shadow-md":"bg-white text-stone-600 border-stone-200 active:bg-stone-100"}`,children:w},w))]})})]}),a.length>0&&E.jsxs("section",{children:[E.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[E.jsx("div",{className:"bg-stone-100 p-2 rounded-full",children:E.jsx(p_,{size:24,className:"text-stone-800"})}),E.jsxs("div",{children:[E.jsx("h2",{className:"serif text-3xl text-stone-900",children:"Clsicos del Lujo"}),E.jsx("p",{className:"text-sm text-stone-500 uppercase tracking-widest font-bold mt-1",children:"Ranking de Tendencia 2025-26"})]})]}),g(a)]}),a.length>0&&f.length>0&&E.jsx("div",{className:"border-t border-stone-100"}),f.length>0&&E.jsxs("section",{children:[E.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[E.jsx("div",{className:"bg-amber-50 p-2 rounded-full",children:E.jsx(gu,{size:24,className:"text-amber-600"})}),E.jsxs("div",{children:[E.jsx("h2",{className:"serif text-3xl text-stone-900",children:"Tendencia rabe"}),E.jsx("p",{className:"text-sm text-amber-600/80 uppercase tracking-widest font-bold mt-1",children:"Exclusividad & Notas Gourmand"})]})]}),g(f)]}),l.length===0&&E.jsxs("div",{className:"text-center py-24 bg-stone-50 rounded-2xl border border-dashed border-stone-200",children:[E.jsx(Ws,{size:48,className:"mx-auto text-stone-300 mb-4"}),E.jsx("h4",{className:"text-stone-900 font-bold text-lg mb-1",children:"No encontramos resultados"}),E.jsx("p",{className:"text-stone-500 text-sm",children:"Prueba ajustando tus filtros de bsqueda."})]}),E.jsxs("div",{className:"mt-20 bg-stone-900 rounded-3xl p-8 md:p-14 text-center text-white relative overflow-hidden shadow-2xl ring-1 ring-white/10",children:[E.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[E.jsx("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-full mb-6 ring-1 ring-white/20",children:E.jsx(__,{size:32,className:"text-yellow-200"})}),E.jsx("h3",{className:"serif text-3xl md:text-5xl mb-6",children:"Buscas algo exclusivo?"}),E.jsx("p",{className:"text-stone-300 mb-10 max-w-2xl mx-auto text-lg font-light leading-relaxed",children:"Si no encuentras tu fragancia favorita en nuestro catlogo, contctanos. Hacemos encargos especiales para que encuentres tu firma olfativa perfecta."}),E.jsxs("button",{onClick:m,className:"group inline-flex items-center bg-white text-stone-900 px-8 py-4 rounded-full font-bold uppercase tracking-widest hover:bg-stone-100 transition-all transform hover:-translate-y-1 shadow-[0_10px_20px_-10px_rgba(255,255,255,0.3)]",children:[E.jsx(Om,{className:"mr-3 group-hover:text-amber-600 transition-colors",size:20}),"Cotizar Encargo"]})]}),E.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://images.unsplash.com/photo-1541643600914-78b084683601?auto=format&fit=crop&q=80')] opacity-20 bg-cover bg-center mix-blend-overlay grayscale"})]})]})},jE=()=>E.jsx("footer",{className:"bg-stone-900 text-white py-12 md:py-16",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 text-center md:text-left",children:[E.jsxs("div",{children:[E.jsxs("span",{className:"serif text-3xl font-bold italic tracking-tighter block mb-4",children:["Tus3B ",E.jsx("span",{className:"text-stone-400 not-italic font-light text-xl ml-1",children:"Style"})]}),E.jsx("p",{className:"text-stone-400 font-light max-w-xs mx-auto md:mx-0",children:"Elevando tu estilo con servicios de peluquera premium a domicilio y lo mejor de la perfumera internacional."})]}),E.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[E.jsx("h4",{className:"uppercase tracking-widest text-xs font-bold text-stone-500 mb-4",children:"Contacto"}),E.jsxs("a",{href:`https://wa.me/${Ps}`,className:"text-stone-300 hover:text-white mb-2 transition flex items-center gap-2",children:[E.jsx(Om,{size:16})," WhatsApp: +56 9 8452 4774"]}),E.jsx("span",{className:"text-stone-300 mb-2",children:"Santiago, Chile"}),E.jsx("span",{className:"text-stone-300",children:"contacto@tus3b.cl"})]}),E.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[E.jsx("h4",{className:"uppercase tracking-widest text-xs font-bold text-stone-500 mb-4",children:"Sguenos"}),E.jsx("div",{className:"flex space-x-4",children:E.jsx("a",{href:"#",className:"p-2 bg-stone-800 rounded-full hover:bg-stone-700 transition",children:E.jsx(v_,{size:20})})})]})]}),E.jsxs("div",{className:"border-t border-stone-800 mt-12 pt-8 text-center text-stone-500 text-sm font-light",children:[" ",new Date().getFullYear()," Tus3B Style. Todos los derechos reservados."]})]})});var KE={};let YE,QE;function XE(){return{geminiUrl:YE,vertexUrl:QE}}function ZE(t,e,n,o){var s,l;if(!t?.baseUrl){const a=XE();return e?(s=a.vertexUrl)!==null&&s!==void 0?s:n:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}class pn{}function K(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function d(t,e,n){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const f=a.slice(0,-2);if(!(f in t))if(Array.isArray(n))t[f]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[f])){const p=t[f];if(Array.isArray(n))for(let m=0;m<p.length;m++){const g=p[m];d(g,e.slice(l+1),n[m])}else for(const m of p)d(m,e.slice(l+1),n)}return}else if(a.endsWith("[0]")){const f=a.slice(0,-3);f in t||(t[f]=[{}]);const p=t[f];d(p[0],e.slice(l+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(l in t){const a=t[l];return Array.isArray(a)?a.map(f=>c(f,e.slice(o+1),n)):n}else return n}else t=t[s]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function eS(t,e){for(const[n,o]of Object.entries(e)){const s=n.split("."),l=o.split("."),a=new Set;let f=-1;for(let p=0;p<s.length;p++)if(s[p]==="*"){f=p;break}if(f!==-1&&l.length>f)for(let p=f;p<l.length;p++){const m=l[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&a.add(m)}Lu(t,s,l,0,a)}}function Lu(t,e,n,o,s){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const a=l.slice(0,-2),f=t;if(a in f&&Array.isArray(f[a]))for(const p of f[a])Lu(p,e,n,o+1,s)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,f=Object.keys(a).filter(m=>!m.startsWith("_")&&!s.has(m)),p={};for(const m of f)p[m]=a[m];for(const[m,g]of Object.entries(p)){const w=[];for(const _ of n.slice(o))_==="*"?w.push(m):w.push(_);d(a,w,g)}for(const m of f)delete a[m]}}else{const a=t;l in a&&Lu(a[l],e,n,o+1,s)}}function ac(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function tS(t){const e={},n=c(t,["operationName"]);n!=null&&d(e,["operationName"],n);const o=c(t,["resourceName"]);return o!=null&&d(e,["_url","resourceName"],o),e}function nS(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=c(t,["done"]);s!=null&&d(e,["done"],s);const l=c(t,["error"]);l!=null&&d(e,["error"],l);const a=c(t,["response","generateVideoResponse"]);return a!=null&&d(e,["response"],oS(a)),e}function rS(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=c(t,["done"]);s!=null&&d(e,["done"],s);const l=c(t,["error"]);l!=null&&d(e,["error"],l);const a=c(t,["response"]);return a!=null&&d(e,["response"],iS(a)),e}function oS(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>sS(a))),d(e,["generatedVideos"],l)}const o=c(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const s=c(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function iS(t){const e={},n=c(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>lS(a))),d(e,["generatedVideos"],l)}const o=c(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const s=c(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function sS(t){const e={},n=c(t,["video"]);return n!=null&&d(e,["video"],hS(n)),e}function lS(t){const e={},n=c(t,["_self"]);return n!=null&&d(e,["video"],pS(n)),e}function aS(t){const e={},n=c(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function uS(t){const e={},n=c(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function cS(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=c(t,["done"]);s!=null&&d(e,["done"],s);const l=c(t,["error"]);l!=null&&d(e,["error"],l);const a=c(t,["response"]);return a!=null&&d(e,["response"],dS(a)),e}function dS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["parent"]);o!=null&&d(e,["parent"],o);const s=c(t,["documentName"]);return s!=null&&d(e,["documentName"],s),e}function iv(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=c(t,["done"]);s!=null&&d(e,["done"],s);const l=c(t,["error"]);l!=null&&d(e,["error"],l);const a=c(t,["response"]);return a!=null&&d(e,["response"],fS(a)),e}function fS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["parent"]);o!=null&&d(e,["parent"],o);const s=c(t,["documentName"]);return s!=null&&d(e,["documentName"],s),e}function hS(t){const e={},n=c(t,["uri"]);n!=null&&d(e,["uri"],n);const o=c(t,["encodedVideo"]);o!=null&&d(e,["videoBytes"],ac(o));const s=c(t,["encoding"]);return s!=null&&d(e,["mimeType"],s),e}function pS(t){const e={},n=c(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const o=c(t,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],ac(o));const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}var ep;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ep||(ep={}));var tp;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(tp||(tp={}));var np;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(np||(np={}));var On;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(On||(On={}));var rp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(rp||(rp={}));var op;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(op||(op={}));var ip;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ip||(ip={}));var sp;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(sp||(sp={}));var lp;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(lp||(lp={}));var ap;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(ap||(ap={}));var up;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(up||(up={}));var cp;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(cp||(cp={}));var dp;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(dp||(dp={}));var fp;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(fp||(fp={}));var hp;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(hp||(hp={}));var pp;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(pp||(pp={}));var mp;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(mp||(mp={}));var gp;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(gp||(gp={}));var vp;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(vp||(vp={}));var Bs;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Bs||(Bs={}));var yp;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(yp||(yp={}));var _p;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(_p||(_p={}));var wp;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(wp||(wp={}));var Uu;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Uu||(Uu={}));var Ep;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ep||(Ep={}));var Sp;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Sp||(Sp={}));var Tp;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Tp||(Tp={}));var xp;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(xp||(xp={}));var Cp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Cp||(Cp={}));var Ap;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ap||(Ap={}));var Ip;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Ip||(Ip={}));var Rp;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Rp||(Rp={}));var kp;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(kp||(kp={}));var Np;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Np||(Np={}));var Pp;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Pp||(Pp={}));var bp;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(bp||(bp={}));var Mp;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Mp||(Mp={}));var Dp;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Dp||(Dp={}));var Lp;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Lp||(Lp={}));var Up;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Up||(Up={}));var Op;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Op||(Op={}));var Fp;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Fp||(Fp={}));var $p;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})($p||($p={}));var Vp;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Vp||(Vp={}));var Bp;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Bp||(Bp={}));var Gp;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Gp||(Gp={}));var qp;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(qp||(qp={}));var Hp;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Hp||(Hp={}));var zp;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(zp||(zp={}));var Jp;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Jp||(Jp={}));var Wp;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Wp||(Wp={}));var jp;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(jp||(jp={}));var Kp;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Kp||(Kp={}));var Yp;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Yp||(Yp={}));var Qp;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Qp||(Qp={}));var Vr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Vr||(Vr={}));class Ou{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Go{get text(){var e,n,o,s,l,a,f,p;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",g=!1;const w=[];for(const _ of(p=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[S,x]of Object.entries(_))S!=="text"&&S!=="thought"&&S!=="thoughtSignature"&&(x!==null||x!==void 0)&&w.push(S);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;g=!0,m+=_.text}}return w.length>0&&console.warn(`there are non-text parts ${w} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?m:void 0}get data(){var e,n,o,s,l,a,f,p;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const g=[];for(const w of(p=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[_,S]of Object.entries(w))_!=="inlineData"&&(S!==null||S!==void 0)&&g.push(_);w.inlineData&&typeof w.inlineData.data=="string"&&(m+=atob(w.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,o,s,l,a,f,p;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if(m?.length!==0)return m}get executableCode(){var e,n,o,s,l,a,f,p,m;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(p=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(w=>w.executableCode).map(w=>w.executableCode).filter(w=>w!==void 0);if(g?.length!==0)return(m=g?.[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,o,s,l,a,f,p,m;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(p=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(w=>w.codeExecutionResult).map(w=>w.codeExecutionResult).filter(w=>w!==void 0);if(g?.length!==0)return(m=g?.[0])===null||m===void 0?void 0:m.output}}class Xp{}class Zp{}class mS{}class gS{}class vS{}class yS{}class em{}class tm{}class nm{}class _S{}class Gs{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Gs;let s;const l=e;return n?s=rS(l):s=nS(l),Object.assign(o,s),o}}class rm{}class om{}class im{}class sm{}class wS{}class ES{}class SS{}class uc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new uc,l=cS(e);return Object.assign(o,l),o}}class TS{}class xS{}class CS{}class lm{}class AS{get text(){var e,n,o;let s="",l=!1;const a=[];for(const f of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[p,m]of Object.entries(f))p!=="text"&&p!=="thought"&&m!==null&&a.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,s+=f.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,n,o;let s="";const l=[];for(const a of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[f,p]of Object.entries(a))f!=="inlineData"&&p!==null&&l.push(f);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class IS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class cc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new cc,l=iv(e);return Object.assign(o,l),o}}function Se(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function sv(t,e){const n=Se(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function lv(t){return Array.isArray(t)?t.map(e=>qs(e)):[qs(t)]}function qs(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function av(t){const e=qs(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function uv(t){const e=qs(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function am(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function cv(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>am(e)):[am(t)]}function Fu(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function um(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function cm(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function lt(t){if(t==null)throw new Error("ContentUnion is required");return Fu(t)?t:{role:"user",parts:cv(t)}}function dc(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=lt(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=lt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>lt(n)):[lt(e)]}function Mt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(um(t)||cm(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[lt(t)]}const e=[],n=[],o=Fu(t[0]);for(const s of t){const l=Fu(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(um(s)||cm(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:cv(n)}),e}function RS(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(On).includes(n[0].toUpperCase())?n[0].toUpperCase():On.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(On).includes(o.toUpperCase())?o.toUpperCase():On.TYPE_UNSPECIFIED})}}function Hr(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&RS(t.type,e);for(const[a,f]of Object.entries(t))if(f!=null)if(a=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(On).includes(f.toUpperCase())?f.toUpperCase():On.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Hr(f);else if(o.includes(a)){const p=[];for(const m of f){if(m.type=="null"){e.nullable=!0;continue}p.push(Hr(m))}e[a]=p}else if(s.includes(a)){const p={};for(const[m,g]of Object.entries(f))p[m]=Hr(g);e[a]=p}else{if(a==="additionalProperties")continue;e[a]=f}return e}function fc(t){return Hr(t)}function hc(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function pc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Yr(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Hr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Hr(e.response));return t}function Qr(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function kS(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function mn(t,e){if(typeof e!="string")throw new Error("name must be a string");return kS(t,e,"cachedContents")}function dv(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Fn(t){return ac(t)}function NS(t){return t!=null&&typeof t=="object"&&"name"in t}function PS(t){return t!=null&&typeof t=="object"&&"video"in t}function bS(t){return t!=null&&typeof t=="object"&&"uri"in t}function fv(t){var e;let n;if(NS(t)&&(n=t.name),!(bS(t)&&(n=t.uri,n===void 0))&&!(PS(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function hv(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function pv(t){for(const e of["models","tunedModels","publisherModels"])if(MS(t,e))return t[e];return[]}function MS(t,e){return t!==null&&typeof t=="object"&&e in t}function DS(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function LS(t,e={}){const n=[],o=new Set;for(const s of t){const l=s.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=DS(s,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function mv(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function US(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function gv(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let l=!1;for(const a of s){if(typeof a!="object"||a===null)continue;const p=a.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Xr(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function vv(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function OS(t){const e={},n=c(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const o=c(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>vT(a))),d(e,["inlinedResponses"],l)}const s=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),d(e,["inlinedEmbedContentResponses"],l)}return e}function FS(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const o=c(t,["gcsDestination","outputUriPrefix"]);o!=null&&d(e,["gcsUri"],o);const s=c(t,["bigqueryDestination","outputUri"]);return s!=null&&d(e,["bigqueryUri"],s),e}function $S(t){const e={},n=c(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const o=c(t,["gcsUri"]);o!=null&&d(e,["gcsDestination","outputUriPrefix"],o);const s=c(t,["bigqueryUri"]);if(s!=null&&d(e,["bigqueryDestination","outputUri"],s),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Rs(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const o=c(t,["metadata","displayName"]);o!=null&&d(e,["displayName"],o);const s=c(t,["metadata","state"]);s!=null&&d(e,["state"],vv(s));const l=c(t,["metadata","createTime"]);l!=null&&d(e,["createTime"],l);const a=c(t,["metadata","endTime"]);a!=null&&d(e,["endTime"],a);const f=c(t,["metadata","updateTime"]);f!=null&&d(e,["updateTime"],f);const p=c(t,["metadata","model"]);p!=null&&d(e,["model"],p);const m=c(t,["metadata","output"]);return m!=null&&d(e,["dest"],OS(gv(m))),e}function $u(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const o=c(t,["displayName"]);o!=null&&d(e,["displayName"],o);const s=c(t,["state"]);s!=null&&d(e,["state"],vv(s));const l=c(t,["error"]);l!=null&&d(e,["error"],l);const a=c(t,["createTime"]);a!=null&&d(e,["createTime"],a);const f=c(t,["startTime"]);f!=null&&d(e,["startTime"],f);const p=c(t,["endTime"]);p!=null&&d(e,["endTime"],p);const m=c(t,["updateTime"]);m!=null&&d(e,["updateTime"],m);const g=c(t,["model"]);g!=null&&d(e,["model"],g);const w=c(t,["inputConfig"]);w!=null&&d(e,["src"],VS(w));const _=c(t,["outputConfig"]);_!=null&&d(e,["dest"],FS(gv(_)));const S=c(t,["completionStats"]);return S!=null&&d(e,["completionStats"],S),e}function VS(t){const e={},n=c(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const o=c(t,["gcsSource","uris"]);o!=null&&d(e,["gcsUri"],o);const s=c(t,["bigquerySource","inputUri"]);return s!=null&&d(e,["bigqueryUri"],s),e}function BS(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=c(e,["fileName"]);o!=null&&d(n,["fileName"],o);const s=c(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>gT(t,a))),d(n,["requests","requests"],l)}return n}function GS(t){const e={},n=c(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const o=c(t,["gcsUri"]);o!=null&&d(e,["gcsSource","uris"],o);const s=c(t,["bigqueryUri"]);if(s!=null&&d(e,["bigquerySource","inputUri"],s),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function qS(t){const e={},n=c(t,["data"]);if(n!=null&&d(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function HS(t,e){const n={},o=c(e,["name"]);return o!=null&&d(n,["_url","name"],Xr(t,o)),n}function zS(t,e){const n={},o=c(e,["name"]);return o!=null&&d(n,["_url","name"],Xr(t,o)),n}function JS(t){const e={},n=c(t,["content"]);n!=null&&d(e,["content"],n);const o=c(t,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],WS(o));const s=c(t,["tokenCount"]);s!=null&&d(e,["tokenCount"],s);const l=c(t,["finishReason"]);l!=null&&d(e,["finishReason"],l);const a=c(t,["avgLogprobs"]);a!=null&&d(e,["avgLogprobs"],a);const f=c(t,["groundingMetadata"]);f!=null&&d(e,["groundingMetadata"],f);const p=c(t,["index"]);p!=null&&d(e,["index"],p);const m=c(t,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const g=c(t,["safetyRatings"]);if(g!=null){let _=g;Array.isArray(_)&&(_=_.map(S=>S)),d(e,["safetyRatings"],_)}const w=c(t,["urlContextMetadata"]);return w!=null&&d(e,["urlContextMetadata"],w),e}function WS(t){const e={},n=c(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["citations"],o)}return e}function yv(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>xT(l))),d(e,["parts"],s)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function jS(t,e){const n={},o=c(t,["displayName"]);if(e!==void 0&&o!=null&&d(e,["batch","displayName"],o),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function KS(t,e){const n={},o=c(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=c(t,["dest"]);return e!==void 0&&s!=null&&d(e,["outputConfig"],$S(US(s))),n}function dm(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["src"]);s!=null&&d(n,["batch","inputConfig"],BS(t,mv(t,s)));const l=c(e,["config"]);return l!=null&&jS(l,n),n}function YS(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["model"],Se(t,o));const s=c(e,["src"]);s!=null&&d(n,["inputConfig"],GS(mv(t,s)));const l=c(e,["config"]);return l!=null&&KS(l,n),n}function QS(t,e){const n={},o=c(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["batch","displayName"],o),n}function XS(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["src"]);s!=null&&d(n,["batch","inputConfig"],iT(t,s));const l=c(e,["config"]);return l!=null&&QS(l,n),n}function ZS(t,e){const n={},o=c(e,["name"]);return o!=null&&d(n,["_url","name"],Xr(t,o)),n}function eT(t,e){const n={},o=c(e,["name"]);return o!=null&&d(n,["_url","name"],Xr(t,o)),n}function tT(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["done"]);s!=null&&d(e,["done"],s);const l=c(t,["error"]);return l!=null&&d(e,["error"],l),e}function nT(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["done"]);s!=null&&d(e,["done"],s);const l=c(t,["error"]);return l!=null&&d(e,["error"],l),e}function rT(t,e){const n={},o=c(e,["contents"]);if(o!=null){let l=dc(t,o);Array.isArray(l)&&(l=l.map(a=>a)),d(n,["requests[]","request","content"],l)}const s=c(e,["config"]);return s!=null&&(d(n,["_self"],oT(s,n)),eS(n,{"requests[].*":"requests[].request.*"})),n}function oT(t,e){const n={},o=c(t,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const s=c(t,["title"]);e!==void 0&&s!=null&&d(e,["requests[]","title"],s);const l=c(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function iT(t,e){const n={},o=c(e,["fileName"]);o!=null&&d(n,["file_name"],o);const s=c(e,["inlinedRequests"]);return s!=null&&d(n,["requests"],rT(t,s)),n}function sT(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function lT(t){const e={},n=c(t,["id"]);n!=null&&d(e,["id"],n);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const s=c(t,["name"]);if(s!=null&&d(e,["name"],s),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function aT(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const o=c(t,["allowedFunctionNames"]);if(o!=null&&d(e,["allowedFunctionNames"],o),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function uT(t,e,n){const o={},s=c(e,["systemInstruction"]);n!==void 0&&s!=null&&d(n,["systemInstruction"],yv(lt(s)));const l=c(e,["temperature"]);l!=null&&d(o,["temperature"],l);const a=c(e,["topP"]);a!=null&&d(o,["topP"],a);const f=c(e,["topK"]);f!=null&&d(o,["topK"],f);const p=c(e,["candidateCount"]);p!=null&&d(o,["candidateCount"],p);const m=c(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const g=c(e,["stopSequences"]);g!=null&&d(o,["stopSequences"],g);const w=c(e,["responseLogprobs"]);w!=null&&d(o,["responseLogprobs"],w);const _=c(e,["logprobs"]);_!=null&&d(o,["logprobs"],_);const S=c(e,["presencePenalty"]);S!=null&&d(o,["presencePenalty"],S);const x=c(e,["frequencyPenalty"]);x!=null&&d(o,["frequencyPenalty"],x);const A=c(e,["seed"]);A!=null&&d(o,["seed"],A);const C=c(e,["responseMimeType"]);C!=null&&d(o,["responseMimeType"],C);const P=c(e,["responseSchema"]);P!=null&&d(o,["responseSchema"],fc(P));const U=c(e,["responseJsonSchema"]);if(U!=null&&d(o,["responseJsonSchema"],U),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=c(e,["safetySettings"]);if(n!==void 0&&b!=null){let ge=b;Array.isArray(ge)&&(ge=ge.map(Me=>CT(Me))),d(n,["safetySettings"],ge)}const O=c(e,["tools"]);if(n!==void 0&&O!=null){let ge=Qr(O);Array.isArray(ge)&&(ge=ge.map(Me=>IT(Yr(Me)))),d(n,["tools"],ge)}const H=c(e,["toolConfig"]);if(n!==void 0&&H!=null&&d(n,["toolConfig"],AT(H)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=c(e,["cachedContent"]);n!==void 0&&z!=null&&d(n,["cachedContent"],mn(t,z));const W=c(e,["responseModalities"]);W!=null&&d(o,["responseModalities"],W);const he=c(e,["mediaResolution"]);he!=null&&d(o,["mediaResolution"],he);const j=c(e,["speechConfig"]);if(j!=null&&d(o,["speechConfig"],hc(j)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const me=c(e,["thinkingConfig"]);me!=null&&d(o,["thinkingConfig"],me);const Ie=c(e,["imageConfig"]);Ie!=null&&d(o,["imageConfig"],mT(Ie));const Ve=c(e,["enableEnhancedCivicAnswers"]);return Ve!=null&&d(o,["enableEnhancedCivicAnswers"],Ve),o}function cT(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>JS(m))),d(e,["candidates"],p)}const s=c(t,["modelVersion"]);s!=null&&d(e,["modelVersion"],s);const l=c(t,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const a=c(t,["responseId"]);a!=null&&d(e,["responseId"],a);const f=c(t,["usageMetadata"]);return f!=null&&d(e,["usageMetadata"],f),e}function dT(t,e){const n={},o=c(e,["name"]);return o!=null&&d(n,["_url","name"],Xr(t,o)),n}function fT(t,e){const n={},o=c(e,["name"]);return o!=null&&d(n,["_url","name"],Xr(t,o)),n}function hT(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function pT(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function mT(t){const e={},n=c(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const o=c(t,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function gT(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["request","model"],Se(t,o));const s=c(e,["contents"]);if(s!=null){let f=Mt(s);Array.isArray(f)&&(f=f.map(p=>yv(p))),d(n,["request","contents"],f)}const l=c(e,["metadata"]);l!=null&&d(n,["metadata"],l);const a=c(e,["config"]);return a!=null&&d(n,["request","generationConfig"],uT(t,a,c(n,["request"],{}))),n}function vT(t){const e={},n=c(t,["response"]);n!=null&&d(e,["response"],cT(n));const o=c(t,["error"]);return o!=null&&d(e,["error"],o),e}function yT(t,e){const n={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=c(t,["pageToken"]);if(e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function _T(t,e){const n={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&d(e,["_query","pageToken"],s);const l=c(t,["filter"]);return e!==void 0&&l!=null&&d(e,["_query","filter"],l),n}function wT(t){const e={},n=c(t,["config"]);return n!=null&&yT(n,e),e}function ET(t){const e={},n=c(t,["config"]);return n!=null&&_T(n,e),e}function ST(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=c(t,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Rs(a))),d(e,["batchJobs"],l)}return e}function TT(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=c(t,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>$u(a))),d(e,["batchJobs"],l)}return e}function xT(t){const e={},n=c(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const s=c(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],sT(l));const a=c(t,["functionCall"]);a!=null&&d(e,["functionCall"],lT(a));const f=c(t,["functionResponse"]);f!=null&&d(e,["functionResponse"],f);const p=c(t,["inlineData"]);p!=null&&d(e,["inlineData"],qS(p));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const g=c(t,["thought"]);g!=null&&d(e,["thought"],g);const w=c(t,["thoughtSignature"]);w!=null&&d(e,["thoughtSignature"],w);const _=c(t,["videoMetadata"]);return _!=null&&d(e,["videoMetadata"],_),e}function CT(t){const e={},n=c(t,["category"]);if(n!=null&&d(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=c(t,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function AT(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],aT(n));const o=c(t,["retrievalConfig"]);return o!=null&&d(e,["retrievalConfig"],o),e}function IT(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(w=>w)),d(e,["functionDeclarations"],g)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(t,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const s=c(t,["computerUse"]);s!=null&&d(e,["computerUse"],s);const l=c(t,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],hT(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],pT(p));const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}var fn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(fn||(fn={}));class lr{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class RT extends pn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new lr(fn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=dm(this.apiClient,e),o=n._url,s=K("{model}:batchGenerateContent",o),f=n.batch.inputConfig.requests,p=f.requests,m=[];for(const g of p){const w=Object.assign({},g);if(w.systemInstruction){const _=w.systemInstruction;delete w.systemInstruction;const S=w.request;S.systemInstruction=_,w.request=S}m.push(w)}return f.requests=m,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const l=this.getGcsUri(e),a=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${s}`;else if(a)o.dest=`${a}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=YS(this.apiClient,e);return f=K("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>$u(g))}else{const m=dm(this.apiClient,e);return f=K("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),a.then(g=>Rs(g))}}async createEmbeddingsInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=XS(this.apiClient,e);return l=K("{model}:asyncBatchEmbedContent",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>Rs(p))}}async get(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=fT(this.apiClient,e);return f=K("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>$u(g))}else{const m=dT(this.apiClient,e);return f=K("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),a.then(g=>Rs(g))}}async cancel(e){var n,o,s,l;let a="",f={};if(this.apiClient.isVertexAI()){const p=zS(this.apiClient,e);a=K("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=HS(this.apiClient,e);a=K("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=ET(e);return f=K("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=TT(g),_=new lm;return Object.assign(_,w),_})}else{const m=wT(e);return f=K("batches",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=ST(g),_=new lm;return Object.assign(_,w),_})}}async delete(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=eT(this.apiClient,e);return f=K("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>nT(g))}else{const m=ZS(this.apiClient,e);return f=K("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>tT(g))}}}function kT(t){const e={},n=c(t,["data"]);if(n!=null&&d(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function fm(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>XT(l))),d(e,["parts"],s)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function NT(t,e){const n={},o=c(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const s=c(t,["expireTime"]);e!==void 0&&s!=null&&d(e,["expireTime"],s);const l=c(t,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let g=Mt(a);Array.isArray(g)&&(g=g.map(w=>fm(w))),d(e,["contents"],g)}const f=c(t,["systemInstruction"]);e!==void 0&&f!=null&&d(e,["systemInstruction"],fm(lt(f)));const p=c(t,["tools"]);if(e!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(w=>ex(w))),d(e,["tools"],g)}const m=c(t,["toolConfig"]);if(e!==void 0&&m!=null&&d(e,["toolConfig"],ZT(m)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function PT(t,e){const n={},o=c(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const s=c(t,["expireTime"]);e!==void 0&&s!=null&&d(e,["expireTime"],s);const l=c(t,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let w=Mt(a);Array.isArray(w)&&(w=w.map(_=>_)),d(e,["contents"],w)}const f=c(t,["systemInstruction"]);e!==void 0&&f!=null&&d(e,["systemInstruction"],lt(f));const p=c(t,["tools"]);if(e!==void 0&&p!=null){let w=p;Array.isArray(w)&&(w=w.map(_=>tx(_))),d(e,["tools"],w)}const m=c(t,["toolConfig"]);e!==void 0&&m!=null&&d(e,["toolConfig"],m);const g=c(t,["kmsKeyName"]);return e!==void 0&&g!=null&&d(e,["encryption_spec","kmsKeyName"],g),n}function bT(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["model"],sv(t,o));const s=c(e,["config"]);return s!=null&&NT(s,n),n}function MT(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["model"],sv(t,o));const s=c(e,["config"]);return s!=null&&PT(s,n),n}function DT(t,e){const n={},o=c(e,["name"]);return o!=null&&d(n,["_url","name"],mn(t,o)),n}function LT(t,e){const n={},o=c(e,["name"]);return o!=null&&d(n,["_url","name"],mn(t,o)),n}function UT(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function OT(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function FT(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function $T(t){const e={},n=c(t,["id"]);n!=null&&d(e,["id"],n);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const s=c(t,["name"]);if(s!=null&&d(e,["name"],s),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function VT(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const o=c(t,["allowedFunctionNames"]);if(o!=null&&d(e,["allowedFunctionNames"],o),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function BT(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&d(e,["description"],n);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["parameters"]);s!=null&&d(e,["parameters"],s);const l=c(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const a=c(t,["response"]);a!=null&&d(e,["response"],a);const f=c(t,["responseJsonSchema"]);return f!=null&&d(e,["responseJsonSchema"],f),e}function GT(t,e){const n={},o=c(e,["name"]);return o!=null&&d(n,["_url","name"],mn(t,o)),n}function qT(t,e){const n={},o=c(e,["name"]);return o!=null&&d(n,["_url","name"],mn(t,o)),n}function HT(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function zT(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function JT(t,e){const n={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function WT(t,e){const n={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function jT(t){const e={},n=c(t,["config"]);return n!=null&&JT(n,e),e}function KT(t){const e={},n=c(t,["config"]);return n!=null&&WT(n,e),e}function YT(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=c(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),d(e,["cachedContents"],l)}return e}function QT(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=c(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),d(e,["cachedContents"],l)}return e}function XT(t){const e={},n=c(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const s=c(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],FT(l));const a=c(t,["functionCall"]);a!=null&&d(e,["functionCall"],$T(a));const f=c(t,["functionResponse"]);f!=null&&d(e,["functionResponse"],f);const p=c(t,["inlineData"]);p!=null&&d(e,["inlineData"],kT(p));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const g=c(t,["thought"]);g!=null&&d(e,["thought"],g);const w=c(t,["thoughtSignature"]);w!=null&&d(e,["thoughtSignature"],w);const _=c(t,["videoMetadata"]);return _!=null&&d(e,["videoMetadata"],_),e}function ZT(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],VT(n));const o=c(t,["retrievalConfig"]);return o!=null&&d(e,["retrievalConfig"],o),e}function ex(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(w=>w)),d(e,["functionDeclarations"],g)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(t,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const s=c(t,["computerUse"]);s!=null&&d(e,["computerUse"],s);const l=c(t,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],HT(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],zT(p));const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function tx(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(_=>BT(_))),d(e,["functionDeclarations"],w)}const o=c(t,["retrieval"]);o!=null&&d(e,["retrieval"],o);const s=c(t,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const l=c(t,["computerUse"]);if(l!=null&&d(e,["computerUse"],l),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&d(e,["codeExecution"],a);const f=c(t,["enterpriseWebSearch"]);f!=null&&d(e,["enterpriseWebSearch"],f);const p=c(t,["googleMaps"]);p!=null&&d(e,["googleMaps"],p);const m=c(t,["googleSearch"]);m!=null&&d(e,["googleSearch"],m);const g=c(t,["urlContext"]);return g!=null&&d(e,["urlContext"],g),e}function nx(t,e){const n={},o=c(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const s=c(t,["expireTime"]);return e!==void 0&&s!=null&&d(e,["expireTime"],s),n}function rx(t,e){const n={},o=c(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const s=c(t,["expireTime"]);return e!==void 0&&s!=null&&d(e,["expireTime"],s),n}function ox(t,e){const n={},o=c(e,["name"]);o!=null&&d(n,["_url","name"],mn(t,o));const s=c(e,["config"]);return s!=null&&nx(s,n),n}function ix(t,e){const n={},o=c(e,["name"]);o!=null&&d(n,["_url","name"],mn(t,o));const s=c(e,["config"]);return s!=null&&rx(s,n),n}class sx extends pn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new lr(fn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=MT(this.apiClient,e);return f=K("cachedContents",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const m=bT(this.apiClient,e);return f=K("cachedContents",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=qT(this.apiClient,e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const m=GT(this.apiClient,e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=LT(this.apiClient,e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=OT(g),_=new im;return Object.assign(_,w),_})}else{const m=DT(this.apiClient,e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=UT(g),_=new im;return Object.assign(_,w),_})}}async update(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=ix(this.apiClient,e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const m=ox(this.apiClient,e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async listInternal(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=KT(e);return f=K("cachedContents",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=QT(g),_=new sm;return Object.assign(_,w),_})}else{const m=jT(e);return f=K("cachedContents",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=YT(g),_=new sm;return Object.assign(_,w),_})}}}function Hs(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}function hm(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(t){return this instanceof fe?(this.v=t,this):new fe(t)}function zt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(S){return function(x){return Promise.resolve(x).then(S,w)}}function f(S,x){o[S]&&(s[S]=function(A){return new Promise(function(C,P){l.push([S,A,C,P])>1||p(S,A)})},x&&(s[S]=x(s[S])))}function p(S,x){try{m(o[S](x))}catch(A){_(l[0][3],A)}}function m(S){S.value instanceof fe?Promise.resolve(S.value.v).then(g,w):_(l[0][2],S)}function g(S){p("next",S)}function w(S){p("throw",S)}function _(S,x){S(x),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Jt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof hm=="function"?hm(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(a){return new Promise(function(f,p){a=t[l](a),s(f,p,a.done,a.value)})}}function s(l,a,f,p){Promise.resolve(p).then(function(m){l({value:m,done:f})},a)}}function lx(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:_v(n)}function _v(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ax(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function pm(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let l=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),l&&!_v(t[o])&&(l=!1),o++;l?e.push(...s):e.pop()}return e}class ux{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new cx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class cx{constructor(e,n,o,s={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),ax(l)}async sendMessage(e){var n;await this.sendPromise;const o=lt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,a,f;const p=await s,m=(a=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,g=p.automaticFunctionCallingHistory,w=this.getHistory(!0).length;let _=[];g!=null&&(_=(f=g.slice(w))!==null&&f!==void 0?f:[]);const S=m?[m]:[];this.recordHistory(o,S,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=lt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?pm(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return zt(this,arguments,function*(){var s,l,a,f,p,m;const g=[];try{for(var w=!0,_=Jt(e),S;S=yield fe(_.next()),s=S.done,!s;w=!0){f=S.value,w=!1;const x=f;if(lx(x)){const A=(m=(p=x.candidates)===null||p===void 0?void 0:p[0])===null||m===void 0?void 0:m.content;A!==void 0&&g.push(A)}yield yield fe(x)}}catch(x){l={error:x}}finally{try{!w&&!s&&(a=_.return)&&(yield fe(a.call(_)))}finally{if(l)throw l.error}}this.recordHistory(n,g)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(l=>l.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...pm(o)):this.history.push(e),this.history.push(...s)}}class Xs extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Xs.prototype)}}function dx(t){const e={},n=c(t,["file"]);return n!=null&&d(e,["file"],n),e}function fx(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function hx(t){const e={},n=c(t,["name"]);return n!=null&&d(e,["_url","file"],fv(n)),e}function px(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function mx(t){const e={},n=c(t,["name"]);return n!=null&&d(e,["_url","file"],fv(n)),e}function gx(t,e){const n={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function vx(t){const e={},n=c(t,["config"]);return n!=null&&gx(n,e),e}function yx(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=c(t,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),d(e,["files"],l)}return e}class _x extends pn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new lr(fn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=vx(e);return l=K("files",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),s.then(p=>{const m=yx(p),g=new TS;return Object.assign(g,m),g})}}async createInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=dx(e);return l=K("upload/v1beta/files",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=fx(p),g=new xS;return Object.assign(g,m),g})}}async get(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=mx(e);return l=K("files/{file}",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=hx(e);return l=K("files/{file}",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),s.then(p=>{const m=px(p),g=new CS;return Object.assign(g,m),g})}}}function ks(t){const e={},n=c(t,["data"]);if(n!=null&&d(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function wx(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Ux(l))),d(e,["parts"],s)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function Ex(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Sx(t){const e={},n=c(t,["id"]);n!=null&&d(e,["id"],n);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const s=c(t,["name"]);if(s!=null&&d(e,["name"],s),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Tx(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&d(e,["description"],n);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["parameters"]);s!=null&&d(e,["parameters"],s);const l=c(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const a=c(t,["response"]);a!=null&&d(e,["response"],a);const f=c(t,["responseJsonSchema"]);return f!=null&&d(e,["responseJsonSchema"],f),e}function xx(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const o=c(t,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const s=c(t,["audioTimestamp"]);s!=null&&d(e,["audioTimestamp"],s);const l=c(t,["candidateCount"]);l!=null&&d(e,["candidateCount"],l);const a=c(t,["enableAffectiveDialog"]);a!=null&&d(e,["enableAffectiveDialog"],a);const f=c(t,["frequencyPenalty"]);f!=null&&d(e,["frequencyPenalty"],f);const p=c(t,["logprobs"]);p!=null&&d(e,["logprobs"],p);const m=c(t,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const g=c(t,["mediaResolution"]);g!=null&&d(e,["mediaResolution"],g);const w=c(t,["presencePenalty"]);w!=null&&d(e,["presencePenalty"],w);const _=c(t,["responseLogprobs"]);_!=null&&d(e,["responseLogprobs"],_);const S=c(t,["responseMimeType"]);S!=null&&d(e,["responseMimeType"],S);const x=c(t,["responseModalities"]);x!=null&&d(e,["responseModalities"],x);const A=c(t,["responseSchema"]);A!=null&&d(e,["responseSchema"],A);const C=c(t,["routingConfig"]);C!=null&&d(e,["routingConfig"],C);const P=c(t,["seed"]);P!=null&&d(e,["seed"],P);const U=c(t,["speechConfig"]);U!=null&&d(e,["speechConfig"],wv(U));const b=c(t,["stopSequences"]);b!=null&&d(e,["stopSequences"],b);const O=c(t,["temperature"]);O!=null&&d(e,["temperature"],O);const H=c(t,["thinkingConfig"]);H!=null&&d(e,["thinkingConfig"],H);const z=c(t,["topK"]);z!=null&&d(e,["topK"],z);const W=c(t,["topP"]);if(W!=null&&d(e,["topP"],W),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Cx(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function Ax(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function Ix(t,e){const n={},o=c(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const s=c(t,["responseModalities"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","responseModalities"],s);const l=c(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const a=c(t,["topP"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topP"],a);const f=c(t,["topK"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topK"],f);const p=c(t,["maxOutputTokens"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","maxOutputTokens"],p);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const g=c(t,["seed"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","seed"],g);const w=c(t,["speechConfig"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","speechConfig"],pc(w));const _=c(t,["thinkingConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","thinkingConfig"],_);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],S);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],wx(lt(x)));const A=c(t,["tools"]);if(e!==void 0&&A!=null){let z=Qr(A);Array.isArray(z)&&(z=z.map(W=>Fx(Yr(W)))),d(e,["setup","tools"],z)}const C=c(t,["sessionResumption"]);e!==void 0&&C!=null&&d(e,["setup","sessionResumption"],Ox(C));const P=c(t,["inputAudioTranscription"]);e!==void 0&&P!=null&&d(e,["setup","inputAudioTranscription"],P);const U=c(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&d(e,["setup","outputAudioTranscription"],U);const b=c(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&d(e,["setup","realtimeInputConfig"],b);const O=c(t,["contextWindowCompression"]);e!==void 0&&O!=null&&d(e,["setup","contextWindowCompression"],O);const H=c(t,["proactivity"]);if(e!==void 0&&H!=null&&d(e,["setup","proactivity"],H),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Rx(t,e){const n={},o=c(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],xx(o));const s=c(t,["responseModalities"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","responseModalities"],s);const l=c(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const a=c(t,["topP"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topP"],a);const f=c(t,["topK"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topK"],f);const p=c(t,["maxOutputTokens"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","maxOutputTokens"],p);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const g=c(t,["seed"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","seed"],g);const w=c(t,["speechConfig"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","speechConfig"],wv(pc(w)));const _=c(t,["thinkingConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","thinkingConfig"],_);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],S);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],lt(x));const A=c(t,["tools"]);if(e!==void 0&&A!=null){let W=Qr(A);Array.isArray(W)&&(W=W.map(he=>$x(Yr(he)))),d(e,["setup","tools"],W)}const C=c(t,["sessionResumption"]);e!==void 0&&C!=null&&d(e,["setup","sessionResumption"],C);const P=c(t,["inputAudioTranscription"]);e!==void 0&&P!=null&&d(e,["setup","inputAudioTranscription"],P);const U=c(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&d(e,["setup","outputAudioTranscription"],U);const b=c(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&d(e,["setup","realtimeInputConfig"],b);const O=c(t,["contextWindowCompression"]);e!==void 0&&O!=null&&d(e,["setup","contextWindowCompression"],O);const H=c(t,["proactivity"]);e!==void 0&&H!=null&&d(e,["setup","proactivity"],H);const z=c(t,["explicitVadSignal"]);return e!==void 0&&z!=null&&d(e,["setup","explicitVadSignal"],z),n}function kx(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["setup","model"],Se(t,o));const s=c(e,["config"]);return s!=null&&d(n,["config"],Ix(s,n)),n}function Nx(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["setup","model"],Se(t,o));const s=c(e,["config"]);return s!=null&&d(n,["config"],Rx(s,n)),n}function Px(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function bx(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["weightedPrompts"],o)}return e}function Mx(t){const e={},n=c(t,["media"]);if(n!=null){let m=lv(n);Array.isArray(m)&&(m=m.map(g=>ks(g))),d(e,["mediaChunks"],m)}const o=c(t,["audio"]);o!=null&&d(e,["audio"],ks(uv(o)));const s=c(t,["audioStreamEnd"]);s!=null&&d(e,["audioStreamEnd"],s);const l=c(t,["video"]);l!=null&&d(e,["video"],ks(av(l)));const a=c(t,["text"]);a!=null&&d(e,["text"],a);const f=c(t,["activityStart"]);f!=null&&d(e,["activityStart"],f);const p=c(t,["activityEnd"]);return p!=null&&d(e,["activityEnd"],p),e}function Dx(t){const e={},n=c(t,["media"]);if(n!=null){let m=lv(n);Array.isArray(m)&&(m=m.map(g=>g)),d(e,["mediaChunks"],m)}const o=c(t,["audio"]);o!=null&&d(e,["audio"],uv(o));const s=c(t,["audioStreamEnd"]);s!=null&&d(e,["audioStreamEnd"],s);const l=c(t,["video"]);l!=null&&d(e,["video"],av(l));const a=c(t,["text"]);a!=null&&d(e,["text"],a);const f=c(t,["activityStart"]);f!=null&&d(e,["activityStart"],f);const p=c(t,["activityEnd"]);return p!=null&&d(e,["activityEnd"],p),e}function Lx(t){const e={},n=c(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);const o=c(t,["serverContent"]);o!=null&&d(e,["serverContent"],o);const s=c(t,["toolCall"]);s!=null&&d(e,["toolCall"],s);const l=c(t,["toolCallCancellation"]);l!=null&&d(e,["toolCallCancellation"],l);const a=c(t,["usageMetadata"]);a!=null&&d(e,["usageMetadata"],Vx(a));const f=c(t,["goAway"]);f!=null&&d(e,["goAway"],f);const p=c(t,["sessionResumptionUpdate"]);p!=null&&d(e,["sessionResumptionUpdate"],p);const m=c(t,["voiceActivityDetectionSignal"]);return m!=null&&d(e,["voiceActivityDetectionSignal"],m),e}function Ux(t){const e={},n=c(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const s=c(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],Ex(l));const a=c(t,["functionCall"]);a!=null&&d(e,["functionCall"],Sx(a));const f=c(t,["functionResponse"]);f!=null&&d(e,["functionResponse"],f);const p=c(t,["inlineData"]);p!=null&&d(e,["inlineData"],ks(p));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const g=c(t,["thought"]);g!=null&&d(e,["thought"],g);const w=c(t,["thoughtSignature"]);w!=null&&d(e,["thoughtSignature"],w);const _=c(t,["videoMetadata"]);return _!=null&&d(e,["videoMetadata"],_),e}function Ox(t){const e={},n=c(t,["handle"]);if(n!=null&&d(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wv(t){const e={},n=c(t,["voiceConfig"]);n!=null&&d(e,["voiceConfig"],n);const o=c(t,["languageCode"]);if(o!=null&&d(e,["languageCode"],o),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Fx(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(w=>w)),d(e,["functionDeclarations"],g)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(t,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const s=c(t,["computerUse"]);s!=null&&d(e,["computerUse"],s);const l=c(t,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],Cx(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],Ax(p));const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function $x(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(_=>Tx(_))),d(e,["functionDeclarations"],w)}const o=c(t,["retrieval"]);o!=null&&d(e,["retrieval"],o);const s=c(t,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const l=c(t,["computerUse"]);if(l!=null&&d(e,["computerUse"],l),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&d(e,["codeExecution"],a);const f=c(t,["enterpriseWebSearch"]);f!=null&&d(e,["enterpriseWebSearch"],f);const p=c(t,["googleMaps"]);p!=null&&d(e,["googleMaps"],p);const m=c(t,["googleSearch"]);m!=null&&d(e,["googleSearch"],m);const g=c(t,["urlContext"]);return g!=null&&d(e,["urlContext"],g),e}function Vx(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const o=c(t,["cachedContentTokenCount"]);o!=null&&d(e,["cachedContentTokenCount"],o);const s=c(t,["candidatesTokenCount"]);s!=null&&d(e,["responseTokenCount"],s);const l=c(t,["toolUsePromptTokenCount"]);l!=null&&d(e,["toolUsePromptTokenCount"],l);const a=c(t,["thoughtsTokenCount"]);a!=null&&d(e,["thoughtsTokenCount"],a);const f=c(t,["totalTokenCount"]);f!=null&&d(e,["totalTokenCount"],f);const p=c(t,["promptTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(x=>x)),d(e,["promptTokensDetails"],S)}const m=c(t,["cacheTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(x=>x)),d(e,["cacheTokensDetails"],S)}const g=c(t,["candidatesTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(x=>x)),d(e,["responseTokensDetails"],S)}const w=c(t,["toolUsePromptTokensDetails"]);if(w!=null){let S=w;Array.isArray(S)&&(S=S.map(x=>x)),d(e,["toolUsePromptTokensDetails"],S)}const _=c(t,["trafficType"]);return _!=null&&d(e,["trafficType"],_),e}function Bx(t){const e={},n=c(t,["data"]);if(n!=null&&d(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Gx(t){const e={},n=c(t,["content"]);n!=null&&d(e,["content"],n);const o=c(t,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],qx(o));const s=c(t,["tokenCount"]);s!=null&&d(e,["tokenCount"],s);const l=c(t,["finishReason"]);l!=null&&d(e,["finishReason"],l);const a=c(t,["avgLogprobs"]);a!=null&&d(e,["avgLogprobs"],a);const f=c(t,["groundingMetadata"]);f!=null&&d(e,["groundingMetadata"],f);const p=c(t,["index"]);p!=null&&d(e,["index"],p);const m=c(t,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const g=c(t,["safetyRatings"]);if(g!=null){let _=g;Array.isArray(_)&&(_=_.map(S=>S)),d(e,["safetyRatings"],_)}const w=c(t,["urlContextMetadata"]);return w!=null&&d(e,["urlContextMetadata"],w),e}function qx(t){const e={},n=c(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["citations"],o)}return e}function Hx(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["contents"]);if(s!=null){let l=Mt(s);Array.isArray(l)&&(l=l.map(a=>a)),d(n,["contents"],l)}return n}function zx(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["tokensInfo"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),d(e,["tokensInfo"],s)}return e}function Jx(t){const e={},n=c(t,["values"]);n!=null&&d(e,["values"],n);const o=c(t,["statistics"]);return o!=null&&d(e,["statistics"],Wx(o)),e}function Wx(t){const e={},n=c(t,["truncated"]);n!=null&&d(e,["truncated"],n);const o=c(t,["token_count"]);return o!=null&&d(e,["tokenCount"],o),e}function Zs(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>nA(l))),d(e,["parts"],s)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function jx(t){const e={},n=c(t,["controlType"]);n!=null&&d(e,["controlType"],n);const o=c(t,["enableControlImageComputation"]);return o!=null&&d(e,["computeControl"],o),e}function Kx(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Yx(t,e){const n={},o=c(t,["systemInstruction"]);e!==void 0&&o!=null&&d(e,["systemInstruction"],lt(o));const s=c(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(f=>Cv(f))),d(e,["tools"],a)}const l=c(t,["generationConfig"]);return e!==void 0&&l!=null&&d(e,["generationConfig"],BC(l)),n}function Qx(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["contents"]);if(s!=null){let a=Mt(s);Array.isArray(a)&&(a=a.map(f=>Zs(f))),d(n,["contents"],a)}const l=c(e,["config"]);return l!=null&&Kx(l),n}function Xx(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["contents"]);if(s!=null){let a=Mt(s);Array.isArray(a)&&(a=a.map(f=>f)),d(n,["contents"],a)}const l=c(e,["config"]);return l!=null&&Yx(l,n),n}function Zx(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["totalTokens"]);o!=null&&d(e,["totalTokens"],o);const s=c(t,["cachedContentTokenCount"]);return s!=null&&d(e,["cachedContentTokenCount"],s),e}function eC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["totalTokens"]);return o!=null&&d(e,["totalTokens"],o),e}function tC(t,e){const n={},o=c(e,["model"]);return o!=null&&d(n,["_url","name"],Se(t,o)),n}function nC(t,e){const n={},o=c(e,["model"]);return o!=null&&d(n,["_url","name"],Se(t,o)),n}function rC(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function oC(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function iC(t,e){const n={},o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const s=c(t,["negativePrompt"]);e!==void 0&&s!=null&&d(e,["parameters","negativePrompt"],s);const l=c(t,["numberOfImages"]);e!==void 0&&l!=null&&d(e,["parameters","sampleCount"],l);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);const f=c(t,["guidanceScale"]);e!==void 0&&f!=null&&d(e,["parameters","guidanceScale"],f);const p=c(t,["seed"]);e!==void 0&&p!=null&&d(e,["parameters","seed"],p);const m=c(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g);const w=c(t,["includeSafetyAttributes"]);e!==void 0&&w!=null&&d(e,["parameters","includeSafetyAttributes"],w);const _=c(t,["includeRaiReason"]);e!==void 0&&_!=null&&d(e,["parameters","includeRaiReason"],_);const S=c(t,["language"]);e!==void 0&&S!=null&&d(e,["parameters","language"],S);const x=c(t,["outputMimeType"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","mimeType"],x);const A=c(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&d(e,["parameters","outputOptions","compressionQuality"],A);const C=c(t,["addWatermark"]);e!==void 0&&C!=null&&d(e,["parameters","addWatermark"],C);const P=c(t,["labels"]);e!==void 0&&P!=null&&d(e,["labels"],P);const U=c(t,["editMode"]);e!==void 0&&U!=null&&d(e,["parameters","editMode"],U);const b=c(t,["baseSteps"]);return e!==void 0&&b!=null&&d(e,["parameters","editConfig","baseSteps"],b),n}function sC(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["prompt"]);s!=null&&d(n,["instances[0]","prompt"],s);const l=c(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>aA(p))),d(n,["instances[0]","referenceImages"],f)}const a=c(e,["config"]);return a!=null&&iC(a,n),n}function lC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>el(l))),d(e,["generatedImages"],s)}return e}function aC(t,e){const n={},o=c(t,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const s=c(t,["title"]);e!==void 0&&s!=null&&d(e,["requests[]","title"],s);const l=c(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uC(t,e){const n={},o=c(t,["taskType"]);e!==void 0&&o!=null&&d(e,["instances[]","task_type"],o);const s=c(t,["title"]);e!==void 0&&s!=null&&d(e,["instances[]","title"],s);const l=c(t,["outputDimensionality"]);e!==void 0&&l!=null&&d(e,["parameters","outputDimensionality"],l);const a=c(t,["mimeType"]);e!==void 0&&a!=null&&d(e,["instances[]","mimeType"],a);const f=c(t,["autoTruncate"]);return e!==void 0&&f!=null&&d(e,["parameters","autoTruncate"],f),n}function cC(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["contents"]);if(s!=null){let f=dc(t,s);Array.isArray(f)&&(f=f.map(p=>p)),d(n,["requests[]","content"],f)}const l=c(e,["config"]);l!=null&&aC(l,n);const a=c(e,["model"]);return a!==void 0&&d(n,["requests[]","model"],Se(t,a)),n}function dC(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["contents"]);if(s!=null){let a=dc(t,s);Array.isArray(a)&&(a=a.map(f=>f)),d(n,["instances[]","content"],a)}const l=c(e,["config"]);return l!=null&&uC(l,n),n}function fC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),d(e,["embeddings"],l)}const s=c(t,["metadata"]);return s!=null&&d(e,["metadata"],s),e}function hC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Jx(a))),d(e,["embeddings"],l)}const s=c(t,["metadata"]);return s!=null&&d(e,["metadata"],s),e}function pC(t){const e={},n=c(t,["endpoint"]);n!=null&&d(e,["name"],n);const o=c(t,["deployedModelId"]);return o!=null&&d(e,["deployedModelId"],o),e}function mC(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function gC(t){const e={},n=c(t,["id"]);n!=null&&d(e,["id"],n);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const s=c(t,["name"]);if(s!=null&&d(e,["name"],s),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vC(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const o=c(t,["allowedFunctionNames"]);if(o!=null&&d(e,["allowedFunctionNames"],o),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function yC(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&d(e,["description"],n);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["parameters"]);s!=null&&d(e,["parameters"],s);const l=c(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const a=c(t,["response"]);a!=null&&d(e,["response"],a);const f=c(t,["responseJsonSchema"]);return f!=null&&d(e,["responseJsonSchema"],f),e}function _C(t,e,n){const o={},s=c(e,["systemInstruction"]);n!==void 0&&s!=null&&d(n,["systemInstruction"],Zs(lt(s)));const l=c(e,["temperature"]);l!=null&&d(o,["temperature"],l);const a=c(e,["topP"]);a!=null&&d(o,["topP"],a);const f=c(e,["topK"]);f!=null&&d(o,["topK"],f);const p=c(e,["candidateCount"]);p!=null&&d(o,["candidateCount"],p);const m=c(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const g=c(e,["stopSequences"]);g!=null&&d(o,["stopSequences"],g);const w=c(e,["responseLogprobs"]);w!=null&&d(o,["responseLogprobs"],w);const _=c(e,["logprobs"]);_!=null&&d(o,["logprobs"],_);const S=c(e,["presencePenalty"]);S!=null&&d(o,["presencePenalty"],S);const x=c(e,["frequencyPenalty"]);x!=null&&d(o,["frequencyPenalty"],x);const A=c(e,["seed"]);A!=null&&d(o,["seed"],A);const C=c(e,["responseMimeType"]);C!=null&&d(o,["responseMimeType"],C);const P=c(e,["responseSchema"]);P!=null&&d(o,["responseSchema"],fc(P));const U=c(e,["responseJsonSchema"]);if(U!=null&&d(o,["responseJsonSchema"],U),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=c(e,["safetySettings"]);if(n!==void 0&&b!=null){let ge=b;Array.isArray(ge)&&(ge=ge.map(Me=>uA(Me))),d(n,["safetySettings"],ge)}const O=c(e,["tools"]);if(n!==void 0&&O!=null){let ge=Qr(O);Array.isArray(ge)&&(ge=ge.map(Me=>gA(Yr(Me)))),d(n,["tools"],ge)}const H=c(e,["toolConfig"]);if(n!==void 0&&H!=null&&d(n,["toolConfig"],mA(H)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=c(e,["cachedContent"]);n!==void 0&&z!=null&&d(n,["cachedContent"],mn(t,z));const W=c(e,["responseModalities"]);W!=null&&d(o,["responseModalities"],W);const he=c(e,["mediaResolution"]);he!=null&&d(o,["mediaResolution"],he);const j=c(e,["speechConfig"]);if(j!=null&&d(o,["speechConfig"],hc(j)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const me=c(e,["thinkingConfig"]);me!=null&&d(o,["thinkingConfig"],me);const Ie=c(e,["imageConfig"]);Ie!=null&&d(o,["imageConfig"],JC(Ie));const Ve=c(e,["enableEnhancedCivicAnswers"]);return Ve!=null&&d(o,["enableEnhancedCivicAnswers"],Ve),o}function wC(t,e,n){const o={},s=c(e,["systemInstruction"]);n!==void 0&&s!=null&&d(n,["systemInstruction"],lt(s));const l=c(e,["temperature"]);l!=null&&d(o,["temperature"],l);const a=c(e,["topP"]);a!=null&&d(o,["topP"],a);const f=c(e,["topK"]);f!=null&&d(o,["topK"],f);const p=c(e,["candidateCount"]);p!=null&&d(o,["candidateCount"],p);const m=c(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const g=c(e,["stopSequences"]);g!=null&&d(o,["stopSequences"],g);const w=c(e,["responseLogprobs"]);w!=null&&d(o,["responseLogprobs"],w);const _=c(e,["logprobs"]);_!=null&&d(o,["logprobs"],_);const S=c(e,["presencePenalty"]);S!=null&&d(o,["presencePenalty"],S);const x=c(e,["frequencyPenalty"]);x!=null&&d(o,["frequencyPenalty"],x);const A=c(e,["seed"]);A!=null&&d(o,["seed"],A);const C=c(e,["responseMimeType"]);C!=null&&d(o,["responseMimeType"],C);const P=c(e,["responseSchema"]);P!=null&&d(o,["responseSchema"],fc(P));const U=c(e,["responseJsonSchema"]);U!=null&&d(o,["responseJsonSchema"],U);const b=c(e,["routingConfig"]);b!=null&&d(o,["routingConfig"],b);const O=c(e,["modelSelectionConfig"]);O!=null&&d(o,["modelConfig"],O);const H=c(e,["safetySettings"]);if(n!==void 0&&H!=null){let Y=H;Array.isArray(Y)&&(Y=Y.map(ue=>ue)),d(n,["safetySettings"],Y)}const z=c(e,["tools"]);if(n!==void 0&&z!=null){let Y=Qr(z);Array.isArray(Y)&&(Y=Y.map(ue=>Cv(Yr(ue)))),d(n,["tools"],Y)}const W=c(e,["toolConfig"]);n!==void 0&&W!=null&&d(n,["toolConfig"],W);const he=c(e,["labels"]);n!==void 0&&he!=null&&d(n,["labels"],he);const j=c(e,["cachedContent"]);n!==void 0&&j!=null&&d(n,["cachedContent"],mn(t,j));const me=c(e,["responseModalities"]);me!=null&&d(o,["responseModalities"],me);const Ie=c(e,["mediaResolution"]);Ie!=null&&d(o,["mediaResolution"],Ie);const Ve=c(e,["speechConfig"]);Ve!=null&&d(o,["speechConfig"],xv(hc(Ve)));const ge=c(e,["audioTimestamp"]);ge!=null&&d(o,["audioTimestamp"],ge);const Me=c(e,["thinkingConfig"]);Me!=null&&d(o,["thinkingConfig"],Me);const at=c(e,["imageConfig"]);if(at!=null&&d(o,["imageConfig"],WC(at)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function mm(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["contents"]);if(s!=null){let a=Mt(s);Array.isArray(a)&&(a=a.map(f=>Zs(f))),d(n,["contents"],a)}const l=c(e,["config"]);return l!=null&&d(n,["generationConfig"],_C(t,l,n)),n}function gm(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["contents"]);if(s!=null){let a=Mt(s);Array.isArray(a)&&(a=a.map(f=>f)),d(n,["contents"],a)}const l=c(e,["config"]);return l!=null&&d(n,["generationConfig"],wC(t,l,n)),n}function vm(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>Gx(m))),d(e,["candidates"],p)}const s=c(t,["modelVersion"]);s!=null&&d(e,["modelVersion"],s);const l=c(t,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const a=c(t,["responseId"]);a!=null&&d(e,["responseId"],a);const f=c(t,["usageMetadata"]);return f!=null&&d(e,["usageMetadata"],f),e}function ym(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>g)),d(e,["candidates"],m)}const s=c(t,["createTime"]);s!=null&&d(e,["createTime"],s);const l=c(t,["modelVersion"]);l!=null&&d(e,["modelVersion"],l);const a=c(t,["promptFeedback"]);a!=null&&d(e,["promptFeedback"],a);const f=c(t,["responseId"]);f!=null&&d(e,["responseId"],f);const p=c(t,["usageMetadata"]);return p!=null&&d(e,["usageMetadata"],p),e}function EC(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const s=c(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const l=c(t,["guidanceScale"]);if(e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&d(e,["parameters","safetySetting"],a);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&d(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);const g=c(t,["language"]);e!==void 0&&g!=null&&d(e,["parameters","language"],g);const w=c(t,["outputMimeType"]);e!==void 0&&w!=null&&d(e,["parameters","outputOptions","mimeType"],w);const _=c(t,["outputCompressionQuality"]);if(e!==void 0&&_!=null&&d(e,["parameters","outputOptions","compressionQuality"],_),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=c(t,["imageSize"]);if(e!==void 0&&S!=null&&d(e,["parameters","sampleImageSize"],S),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function SC(t,e){const n={},o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const s=c(t,["negativePrompt"]);e!==void 0&&s!=null&&d(e,["parameters","negativePrompt"],s);const l=c(t,["numberOfImages"]);e!==void 0&&l!=null&&d(e,["parameters","sampleCount"],l);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);const f=c(t,["guidanceScale"]);e!==void 0&&f!=null&&d(e,["parameters","guidanceScale"],f);const p=c(t,["seed"]);e!==void 0&&p!=null&&d(e,["parameters","seed"],p);const m=c(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g);const w=c(t,["includeSafetyAttributes"]);e!==void 0&&w!=null&&d(e,["parameters","includeSafetyAttributes"],w);const _=c(t,["includeRaiReason"]);e!==void 0&&_!=null&&d(e,["parameters","includeRaiReason"],_);const S=c(t,["language"]);e!==void 0&&S!=null&&d(e,["parameters","language"],S);const x=c(t,["outputMimeType"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","mimeType"],x);const A=c(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&d(e,["parameters","outputOptions","compressionQuality"],A);const C=c(t,["addWatermark"]);e!==void 0&&C!=null&&d(e,["parameters","addWatermark"],C);const P=c(t,["labels"]);e!==void 0&&P!=null&&d(e,["labels"],P);const U=c(t,["imageSize"]);e!==void 0&&U!=null&&d(e,["parameters","sampleImageSize"],U);const b=c(t,["enhancePrompt"]);return e!==void 0&&b!=null&&d(e,["parameters","enhancePrompt"],b),n}function TC(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["prompt"]);s!=null&&d(n,["instances[0]","prompt"],s);const l=c(e,["config"]);return l!=null&&EC(l,n),n}function xC(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["prompt"]);s!=null&&d(n,["instances[0]","prompt"],s);const l=c(e,["config"]);return l!=null&&SC(l,n),n}function CC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>OC(a))),d(e,["generatedImages"],l)}const s=c(t,["positivePromptSafetyAttributes"]);return s!=null&&d(e,["positivePromptSafetyAttributes"],Sv(s)),e}function AC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>el(a))),d(e,["generatedImages"],l)}const s=c(t,["positivePromptSafetyAttributes"]);return s!=null&&d(e,["positivePromptSafetyAttributes"],Tv(s)),e}function IC(t,e){const n={},o=c(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=c(t,["durationSeconds"]);if(e!==void 0&&s!=null&&d(e,["parameters","durationSeconds"],s),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=c(t,["aspectRatio"]);e!==void 0&&l!=null&&d(e,["parameters","aspectRatio"],l);const a=c(t,["resolution"]);e!==void 0&&a!=null&&d(e,["parameters","resolution"],a);const f=c(t,["personGeneration"]);if(e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=c(t,["negativePrompt"]);e!==void 0&&p!=null&&d(e,["parameters","negativePrompt"],p);const m=c(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&d(e,["parameters","enhancePrompt"],m),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=c(t,["lastFrame"]);e!==void 0&&g!=null&&d(e,["instances[0]","lastFrame"],tl(g));const w=c(t,["referenceImages"]);if(e!==void 0&&w!=null){let _=w;Array.isArray(_)&&(_=_.map(S=>kA(S))),d(e,["instances[0]","referenceImages"],_)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function RC(t,e){const n={},o=c(t,["numberOfVideos"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const l=c(t,["fps"]);e!==void 0&&l!=null&&d(e,["parameters","fps"],l);const a=c(t,["durationSeconds"]);e!==void 0&&a!=null&&d(e,["parameters","durationSeconds"],a);const f=c(t,["seed"]);e!==void 0&&f!=null&&d(e,["parameters","seed"],f);const p=c(t,["aspectRatio"]);e!==void 0&&p!=null&&d(e,["parameters","aspectRatio"],p);const m=c(t,["resolution"]);e!==void 0&&m!=null&&d(e,["parameters","resolution"],m);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g);const w=c(t,["pubsubTopic"]);e!==void 0&&w!=null&&d(e,["parameters","pubsubTopic"],w);const _=c(t,["negativePrompt"]);e!==void 0&&_!=null&&d(e,["parameters","negativePrompt"],_);const S=c(t,["enhancePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","enhancePrompt"],S);const x=c(t,["generateAudio"]);e!==void 0&&x!=null&&d(e,["parameters","generateAudio"],x);const A=c(t,["lastFrame"]);e!==void 0&&A!=null&&d(e,["instances[0]","lastFrame"],Wt(A));const C=c(t,["referenceImages"]);if(e!==void 0&&C!=null){let b=C;Array.isArray(b)&&(b=b.map(O=>NA(O))),d(e,["instances[0]","referenceImages"],b)}const P=c(t,["mask"]);e!==void 0&&P!=null&&d(e,["instances[0]","mask"],RA(P));const U=c(t,["compressionQuality"]);return e!==void 0&&U!=null&&d(e,["parameters","compressionQuality"],U),n}function kC(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=c(t,["done"]);s!=null&&d(e,["done"],s);const l=c(t,["error"]);l!=null&&d(e,["error"],l);const a=c(t,["response","generateVideoResponse"]);return a!=null&&d(e,["response"],MC(a)),e}function NC(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=c(t,["done"]);s!=null&&d(e,["done"],s);const l=c(t,["error"]);l!=null&&d(e,["error"],l);const a=c(t,["response"]);return a!=null&&d(e,["response"],DC(a)),e}function PC(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["prompt"]);s!=null&&d(n,["instances[0]","prompt"],s);const l=c(e,["image"]);l!=null&&d(n,["instances[0]","image"],tl(l));const a=c(e,["video"]);a!=null&&d(n,["instances[0]","video"],Av(a));const f=c(e,["source"]);f!=null&&LC(f,n);const p=c(e,["config"]);return p!=null&&IC(p,n),n}function bC(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["prompt"]);s!=null&&d(n,["instances[0]","prompt"],s);const l=c(e,["image"]);l!=null&&d(n,["instances[0]","image"],Wt(l));const a=c(e,["video"]);a!=null&&d(n,["instances[0]","video"],Iv(a));const f=c(e,["source"]);f!=null&&UC(f,n);const p=c(e,["config"]);return p!=null&&RC(p,n),n}function MC(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>$C(a))),d(e,["generatedVideos"],l)}const o=c(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const s=c(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function DC(t){const e={},n=c(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>VC(a))),d(e,["generatedVideos"],l)}const o=c(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const s=c(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function LC(t,e){const n={},o=c(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const s=c(t,["image"]);e!==void 0&&s!=null&&d(e,["instances[0]","image"],tl(s));const l=c(t,["video"]);return e!==void 0&&l!=null&&d(e,["instances[0]","video"],Av(l)),n}function UC(t,e){const n={},o=c(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const s=c(t,["image"]);e!==void 0&&s!=null&&d(e,["instances[0]","image"],Wt(s));const l=c(t,["video"]);return e!==void 0&&l!=null&&d(e,["instances[0]","video"],Iv(l)),n}function OC(t){const e={},n=c(t,["_self"]);n!=null&&d(e,["image"],jC(n));const o=c(t,["raiFilteredReason"]);o!=null&&d(e,["raiFilteredReason"],o);const s=c(t,["_self"]);return s!=null&&d(e,["safetyAttributes"],Sv(s)),e}function el(t){const e={},n=c(t,["_self"]);n!=null&&d(e,["image"],Ev(n));const o=c(t,["raiFilteredReason"]);o!=null&&d(e,["raiFilteredReason"],o);const s=c(t,["_self"]);s!=null&&d(e,["safetyAttributes"],Tv(s));const l=c(t,["prompt"]);return l!=null&&d(e,["enhancedPrompt"],l),e}function FC(t){const e={},n=c(t,["_self"]);n!=null&&d(e,["mask"],Ev(n));const o=c(t,["labels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),d(e,["labels"],s)}return e}function $C(t){const e={},n=c(t,["video"]);return n!=null&&d(e,["video"],AA(n)),e}function VC(t){const e={},n=c(t,["_self"]);return n!=null&&d(e,["video"],IA(n)),e}function BC(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const o=c(t,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const s=c(t,["audioTimestamp"]);s!=null&&d(e,["audioTimestamp"],s);const l=c(t,["candidateCount"]);l!=null&&d(e,["candidateCount"],l);const a=c(t,["enableAffectiveDialog"]);a!=null&&d(e,["enableAffectiveDialog"],a);const f=c(t,["frequencyPenalty"]);f!=null&&d(e,["frequencyPenalty"],f);const p=c(t,["logprobs"]);p!=null&&d(e,["logprobs"],p);const m=c(t,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const g=c(t,["mediaResolution"]);g!=null&&d(e,["mediaResolution"],g);const w=c(t,["presencePenalty"]);w!=null&&d(e,["presencePenalty"],w);const _=c(t,["responseLogprobs"]);_!=null&&d(e,["responseLogprobs"],_);const S=c(t,["responseMimeType"]);S!=null&&d(e,["responseMimeType"],S);const x=c(t,["responseModalities"]);x!=null&&d(e,["responseModalities"],x);const A=c(t,["responseSchema"]);A!=null&&d(e,["responseSchema"],A);const C=c(t,["routingConfig"]);C!=null&&d(e,["routingConfig"],C);const P=c(t,["seed"]);P!=null&&d(e,["seed"],P);const U=c(t,["speechConfig"]);U!=null&&d(e,["speechConfig"],xv(U));const b=c(t,["stopSequences"]);b!=null&&d(e,["stopSequences"],b);const O=c(t,["temperature"]);O!=null&&d(e,["temperature"],O);const H=c(t,["thinkingConfig"]);H!=null&&d(e,["thinkingConfig"],H);const z=c(t,["topK"]);z!=null&&d(e,["topK"],z);const W=c(t,["topP"]);if(W!=null&&d(e,["topP"],W),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function GC(t,e){const n={},o=c(e,["model"]);return o!=null&&d(n,["_url","name"],Se(t,o)),n}function qC(t,e){const n={},o=c(e,["model"]);return o!=null&&d(n,["_url","name"],Se(t,o)),n}function HC(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function zC(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function JC(t){const e={},n=c(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const o=c(t,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function WC(t){const e={},n=c(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const o=c(t,["imageSize"]);o!=null&&d(e,["imageSize"],o);const s=c(t,["outputMimeType"]);s!=null&&d(e,["imageOutputOptions","mimeType"],s);const l=c(t,["outputCompressionQuality"]);return l!=null&&d(e,["imageOutputOptions","compressionQuality"],l),e}function jC(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&d(e,["imageBytes"],Fn(n));const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Ev(t){const e={},n=c(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const o=c(t,["bytesBase64Encoded"]);o!=null&&d(e,["imageBytes"],Fn(o));const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function tl(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&d(e,["bytesBase64Encoded"],Fn(n));const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Wt(t){const e={},n=c(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const o=c(t,["imageBytes"]);o!=null&&d(e,["bytesBase64Encoded"],Fn(o));const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function KC(t,e,n){const o={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&d(n,["_query","pageSize"],s);const l=c(e,["pageToken"]);n!==void 0&&l!=null&&d(n,["_query","pageToken"],l);const a=c(e,["filter"]);n!==void 0&&a!=null&&d(n,["_query","filter"],a);const f=c(e,["queryBase"]);return n!==void 0&&f!=null&&d(n,["_url","models_url"],hv(t,f)),o}function YC(t,e,n){const o={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&d(n,["_query","pageSize"],s);const l=c(e,["pageToken"]);n!==void 0&&l!=null&&d(n,["_query","pageToken"],l);const a=c(e,["filter"]);n!==void 0&&a!=null&&d(n,["_query","filter"],a);const f=c(e,["queryBase"]);return n!==void 0&&f!=null&&d(n,["_url","models_url"],hv(t,f)),o}function QC(t,e){const n={},o=c(e,["config"]);return o!=null&&KC(t,o,n),n}function XC(t,e){const n={},o=c(e,["config"]);return o!=null&&YC(t,o,n),n}function ZC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=c(t,["_self"]);if(s!=null){let l=pv(s);Array.isArray(l)&&(l=l.map(a=>Vu(a))),d(e,["models"],l)}return e}function eA(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=c(t,["_self"]);if(s!=null){let l=pv(s);Array.isArray(l)&&(l=l.map(a=>Bu(a))),d(e,["models"],l)}return e}function tA(t){const e={},n=c(t,["maskMode"]);n!=null&&d(e,["maskMode"],n);const o=c(t,["segmentationClasses"]);o!=null&&d(e,["maskClasses"],o);const s=c(t,["maskDilation"]);return s!=null&&d(e,["dilation"],s),e}function Vu(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const o=c(t,["displayName"]);o!=null&&d(e,["displayName"],o);const s=c(t,["description"]);s!=null&&d(e,["description"],s);const l=c(t,["version"]);l!=null&&d(e,["version"],l);const a=c(t,["_self"]);a!=null&&d(e,["tunedModelInfo"],vA(a));const f=c(t,["inputTokenLimit"]);f!=null&&d(e,["inputTokenLimit"],f);const p=c(t,["outputTokenLimit"]);p!=null&&d(e,["outputTokenLimit"],p);const m=c(t,["supportedGenerationMethods"]);m!=null&&d(e,["supportedActions"],m);const g=c(t,["temperature"]);g!=null&&d(e,["temperature"],g);const w=c(t,["maxTemperature"]);w!=null&&d(e,["maxTemperature"],w);const _=c(t,["topP"]);_!=null&&d(e,["topP"],_);const S=c(t,["topK"]);S!=null&&d(e,["topK"],S);const x=c(t,["thinking"]);return x!=null&&d(e,["thinking"],x),e}function Bu(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const o=c(t,["displayName"]);o!=null&&d(e,["displayName"],o);const s=c(t,["description"]);s!=null&&d(e,["description"],s);const l=c(t,["versionId"]);l!=null&&d(e,["version"],l);const a=c(t,["deployedModels"]);if(a!=null){let w=a;Array.isArray(w)&&(w=w.map(_=>pC(_))),d(e,["endpoints"],w)}const f=c(t,["labels"]);f!=null&&d(e,["labels"],f);const p=c(t,["_self"]);p!=null&&d(e,["tunedModelInfo"],yA(p));const m=c(t,["defaultCheckpointId"]);m!=null&&d(e,["defaultCheckpointId"],m);const g=c(t,["checkpoints"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(_=>_)),d(e,["checkpoints"],w)}return e}function nA(t){const e={},n=c(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const s=c(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],mC(l));const a=c(t,["functionCall"]);a!=null&&d(e,["functionCall"],gC(a));const f=c(t,["functionResponse"]);f!=null&&d(e,["functionResponse"],f);const p=c(t,["inlineData"]);p!=null&&d(e,["inlineData"],Bx(p));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const g=c(t,["thought"]);g!=null&&d(e,["thought"],g);const w=c(t,["thoughtSignature"]);w!=null&&d(e,["thoughtSignature"],w);const _=c(t,["videoMetadata"]);return _!=null&&d(e,["videoMetadata"],_),e}function rA(t){const e={},n=c(t,["productImage"]);return n!=null&&d(e,["image"],Wt(n)),e}function oA(t,e){const n={},o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const s=c(t,["baseSteps"]);e!==void 0&&s!=null&&d(e,["parameters","baseSteps"],s);const l=c(t,["outputGcsUri"]);e!==void 0&&l!=null&&d(e,["parameters","storageUri"],l);const a=c(t,["seed"]);e!==void 0&&a!=null&&d(e,["parameters","seed"],a);const f=c(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);const p=c(t,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);const m=c(t,["addWatermark"]);e!==void 0&&m!=null&&d(e,["parameters","addWatermark"],m);const g=c(t,["outputMimeType"]);e!==void 0&&g!=null&&d(e,["parameters","outputOptions","mimeType"],g);const w=c(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&d(e,["parameters","outputOptions","compressionQuality"],w);const _=c(t,["enhancePrompt"]);e!==void 0&&_!=null&&d(e,["parameters","enhancePrompt"],_);const S=c(t,["labels"]);return e!==void 0&&S!=null&&d(e,["labels"],S),n}function iA(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["source"]);s!=null&&lA(s,n);const l=c(e,["config"]);return l!=null&&oA(l,n),n}function sA(t){const e={},n=c(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>el(s))),d(e,["generatedImages"],o)}return e}function lA(t,e){const n={},o=c(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const s=c(t,["personImage"]);e!==void 0&&s!=null&&d(e,["instances[0]","personImage","image"],Wt(s));const l=c(t,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(f=>rA(f))),d(e,["instances[0]","productImages"],a)}return n}function aA(t){const e={},n=c(t,["referenceImage"]);n!=null&&d(e,["referenceImage"],Wt(n));const o=c(t,["referenceId"]);o!=null&&d(e,["referenceId"],o);const s=c(t,["referenceType"]);s!=null&&d(e,["referenceType"],s);const l=c(t,["maskImageConfig"]);l!=null&&d(e,["maskImageConfig"],tA(l));const a=c(t,["controlImageConfig"]);a!=null&&d(e,["controlImageConfig"],jx(a));const f=c(t,["styleImageConfig"]);f!=null&&d(e,["styleImageConfig"],f);const p=c(t,["subjectImageConfig"]);return p!=null&&d(e,["subjectImageConfig"],p),e}function Sv(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const o=c(t,["safetyAttributes","scores"]);o!=null&&d(e,["scores"],o);const s=c(t,["contentType"]);return s!=null&&d(e,["contentType"],s),e}function Tv(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const o=c(t,["safetyAttributes","scores"]);o!=null&&d(e,["scores"],o);const s=c(t,["contentType"]);return s!=null&&d(e,["contentType"],s),e}function uA(t){const e={},n=c(t,["category"]);if(n!=null&&d(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=c(t,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function cA(t){const e={},n=c(t,["image"]);return n!=null&&d(e,["image"],Wt(n)),e}function dA(t,e){const n={},o=c(t,["mode"]);e!==void 0&&o!=null&&d(e,["parameters","mode"],o);const s=c(t,["maxPredictions"]);e!==void 0&&s!=null&&d(e,["parameters","maxPredictions"],s);const l=c(t,["confidenceThreshold"]);e!==void 0&&l!=null&&d(e,["parameters","confidenceThreshold"],l);const a=c(t,["maskDilation"]);e!==void 0&&a!=null&&d(e,["parameters","maskDilation"],a);const f=c(t,["binaryColorThreshold"]);e!==void 0&&f!=null&&d(e,["parameters","binaryColorThreshold"],f);const p=c(t,["labels"]);return e!==void 0&&p!=null&&d(e,["labels"],p),n}function fA(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["source"]);s!=null&&pA(s,n);const l=c(e,["config"]);return l!=null&&dA(l,n),n}function hA(t){const e={},n=c(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>FC(s))),d(e,["generatedMasks"],o)}return e}function pA(t,e){const n={},o=c(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const s=c(t,["image"]);e!==void 0&&s!=null&&d(e,["instances[0]","image"],Wt(s));const l=c(t,["scribbleImage"]);return e!==void 0&&l!=null&&d(e,["instances[0]","scribble"],cA(l)),n}function xv(t){const e={},n=c(t,["voiceConfig"]);n!=null&&d(e,["voiceConfig"],n);const o=c(t,["languageCode"]);if(o!=null&&d(e,["languageCode"],o),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function mA(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],vC(n));const o=c(t,["retrievalConfig"]);return o!=null&&d(e,["retrievalConfig"],o),e}function gA(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(w=>w)),d(e,["functionDeclarations"],g)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(t,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const s=c(t,["computerUse"]);s!=null&&d(e,["computerUse"],s);const l=c(t,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],HC(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],zC(p));const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function Cv(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(_=>yC(_))),d(e,["functionDeclarations"],w)}const o=c(t,["retrieval"]);o!=null&&d(e,["retrieval"],o);const s=c(t,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const l=c(t,["computerUse"]);if(l!=null&&d(e,["computerUse"],l),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&d(e,["codeExecution"],a);const f=c(t,["enterpriseWebSearch"]);f!=null&&d(e,["enterpriseWebSearch"],f);const p=c(t,["googleMaps"]);p!=null&&d(e,["googleMaps"],p);const m=c(t,["googleSearch"]);m!=null&&d(e,["googleSearch"],m);const g=c(t,["urlContext"]);return g!=null&&d(e,["urlContext"],g),e}function vA(t){const e={},n=c(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const o=c(t,["createTime"]);o!=null&&d(e,["createTime"],o);const s=c(t,["updateTime"]);return s!=null&&d(e,["updateTime"],s),e}function yA(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(e,["baseModel"],n);const o=c(t,["createTime"]);o!=null&&d(e,["createTime"],o);const s=c(t,["updateTime"]);return s!=null&&d(e,["updateTime"],s),e}function _A(t,e){const n={},o=c(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=c(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);const l=c(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&d(e,["defaultCheckpointId"],l),n}function wA(t,e){const n={},o=c(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=c(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);const l=c(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&d(e,["defaultCheckpointId"],l),n}function EA(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","name"],Se(t,o));const s=c(e,["config"]);return s!=null&&_A(s,n),n}function SA(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["config"]);return s!=null&&wA(s,n),n}function TA(t,e){const n={},o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const s=c(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&d(e,["parameters","safetySetting"],s);const l=c(t,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);const a=c(t,["includeRaiReason"]);e!==void 0&&a!=null&&d(e,["parameters","includeRaiReason"],a);const f=c(t,["outputMimeType"]);e!==void 0&&f!=null&&d(e,["parameters","outputOptions","mimeType"],f);const p=c(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","compressionQuality"],p);const m=c(t,["enhanceInputImage"]);e!==void 0&&m!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],m);const g=c(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const w=c(t,["labels"]);e!==void 0&&w!=null&&d(e,["labels"],w);const _=c(t,["numberOfImages"]);e!==void 0&&_!=null&&d(e,["parameters","sampleCount"],_);const S=c(t,["mode"]);return e!==void 0&&S!=null&&d(e,["parameters","mode"],S),n}function xA(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["_url","model"],Se(t,o));const s=c(e,["image"]);s!=null&&d(n,["instances[0]","image"],Wt(s));const l=c(e,["upscaleFactor"]);l!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],l);const a=c(e,["config"]);return a!=null&&TA(a,n),n}function CA(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>el(l))),d(e,["generatedImages"],s)}return e}function AA(t){const e={},n=c(t,["uri"]);n!=null&&d(e,["uri"],n);const o=c(t,["encodedVideo"]);o!=null&&d(e,["videoBytes"],Fn(o));const s=c(t,["encoding"]);return s!=null&&d(e,["mimeType"],s),e}function IA(t){const e={},n=c(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const o=c(t,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],Fn(o));const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function RA(t){const e={},n=c(t,["image"]);n!=null&&d(e,["_self"],Wt(n));const o=c(t,["maskMode"]);return o!=null&&d(e,["maskMode"],o),e}function kA(t){const e={},n=c(t,["image"]);n!=null&&d(e,["image"],tl(n));const o=c(t,["referenceType"]);return o!=null&&d(e,["referenceType"],o),e}function NA(t){const e={},n=c(t,["image"]);n!=null&&d(e,["image"],Wt(n));const o=c(t,["referenceType"]);return o!=null&&d(e,["referenceType"],o),e}function Av(t){const e={},n=c(t,["uri"]);n!=null&&d(e,["uri"],n);const o=c(t,["videoBytes"]);o!=null&&d(e,["encodedVideo"],Fn(o));const s=c(t,["mimeType"]);return s!=null&&d(e,["encoding"],s),e}function Iv(t){const e={},n=c(t,["uri"]);n!=null&&d(e,["gcsUri"],n);const o=c(t,["videoBytes"]);o!=null&&d(e,["bytesBase64Encoded"],Fn(o));const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function PA(t,e){const n={},o=c(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["displayName"],o),n}function bA(t){const e={},n=c(t,["config"]);return n!=null&&PA(n,e),e}function MA(t,e){const n={},o=c(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),n}function DA(t){const e={},n=c(t,["name"]);n!=null&&d(e,["_url","name"],n);const o=c(t,["config"]);return o!=null&&MA(o,e),e}function LA(t){const e={},n=c(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function UA(t,e){const n={},o=c(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),d(e,["customMetadata"],l)}const s=c(t,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),n}function OA(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=c(t,["done"]);s!=null&&d(e,["done"],s);const l=c(t,["error"]);l!=null&&d(e,["error"],l);const a=c(t,["response"]);return a!=null&&d(e,["response"],$A(a)),e}function FA(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const o=c(t,["fileName"]);o!=null&&d(e,["fileName"],o);const s=c(t,["config"]);return s!=null&&UA(s,e),e}function $A(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["parent"]);o!=null&&d(e,["parent"],o);const s=c(t,["documentName"]);return s!=null&&d(e,["documentName"],s),e}function VA(t,e){const n={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function BA(t){const e={},n=c(t,["config"]);return n!=null&&VA(n,e),e}function GA(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=c(t,["fileSearchStores"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),d(e,["fileSearchStores"],l)}return e}function Rv(t,e){const n={},o=c(t,["mimeType"]);e!==void 0&&o!=null&&d(e,["mimeType"],o);const s=c(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const l=c(t,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>p)),d(e,["customMetadata"],f)}const a=c(t,["chunkingConfig"]);return e!==void 0&&a!=null&&d(e,["chunkingConfig"],a),n}function qA(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const o=c(t,["config"]);return o!=null&&Rv(o,e),e}function HA(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}const zA="Content-Type",JA="X-Server-Timeout",WA="User-Agent",Gu="x-goog-api-client",jA="1.33.0",KA=`google-genai-sdk/${jA}`,YA="v1beta1",QA="v1beta";class XA{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:YA,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:QA,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[a,f]of Object.entries(e.queryParams))s.searchParams.append(a,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,s.toString(),e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(n))typeof l=="object"?o[s]=Object.assign(Object.assign({},o[s]),l):l!==void 0&&(o[s]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,s.toString(),e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,s){if(n&&n.timeout||s){const l=new AbortController,a=l.signal;if(n.timeout&&n?.timeout>0){const f=setTimeout(()=>l.abort(),n.timeout);f&&typeof f.unref=="function"&&f.unref()}s&&s.addEventListener("abort",()=>{l.abort()}),e.signal=a}return n&&n.extraBody!==null&&ZA(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await _m(s),new Ou(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await _m(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return zt(this,arguments,function*(){var o;const s=(o=e?.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";const f="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:g}=yield fe(s.read());if(m){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const w=l.decode(g,{stream:!0});try{const x=JSON.parse(w);if("error"in x){const A=JSON.parse(JSON.stringify(x.error)),C=A.status,P=A.code,U=`got status: ${C}. ${JSON.stringify(x)}`;if(P>=400&&P<600)throw new Xs({message:U,status:P})}}catch(x){if(x.name==="ApiError")throw x}a+=w;let _=-1,S=0;for(;;){_=-1,S=0;for(const C of p){const P=a.indexOf(C);P!==-1&&(_===-1||P<_)&&(_=P,S=C.length)}if(_===-1)break;const x=a.substring(0,_);a=a.substring(_+S);const A=x.trim();if(A.startsWith(f)){const C=A.substring(f.length).trim();try{const P=new Response(C,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield fe(new Ou(P))}catch(P){throw new Error(`exception parsing stream chunk ${C}. ${P}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=KA+" "+this.clientOptions.userAgentExtra;return e[WA]=n,e[Gu]=n,e[zA]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[s,l]of Object.entries(e.headers))o.append(s,l);e.timeout&&e.timeout>0&&o.append(JA,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);s.sizeBytes=String(a.size);const f=(o=n?.mimeType)!==null&&o!==void 0?o:a.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=f;const p={file:s},m=this.getFileName(e),g=K("upload/v1beta/files",p._url),w=await this.fetchUploadUrl(g,s.sizeBytes,s.mimeType,m,p,n?.httpOptions);return l.upload(e,w,this)}async uploadFileToFileSearchStore(e,n,o){var s;const l=this.clientOptions.uploader,a=await l.stat(n),f=String(a.size),p=(s=o?.mimeType)!==null&&s!==void 0?s:a.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(n),w={};o!=null&&Rv(o,w);const _=await this.fetchUploadUrl(m,f,p,g,w,o?.httpOptions);return l.uploadToFileSearchStore(n,_,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,s,l,a){var f;let p={};a?p=a:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!m||!m?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(f=m?.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function _m(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new Xs({message:s,status:n}):new Error(s)}}function ZA(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const f=Object.assign({},l);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=a[p],g=f[p];m&&typeof m=="object"&&!Array.isArray(m)&&g&&typeof g=="object"&&!Array.isArray(g)?f[p]=o(g,m):(g&&m&&typeof g!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof g}, New type: ${typeof m}. Overwriting.`),f[p]=m)}return f}const s=o(n,e);t.body=JSON.stringify(s)}const eI="mcp_used/unknown";let tI=!1;function kv(t){for(const e of t)if(nI(e)||typeof e=="object"&&"inputSchema"in e)return!0;return tI}function Nv(t){var e;const n=(e=t[Gu])!==null&&e!==void 0?e:"";t[Gu]=(n+` ${eI}`).trimStart()}function nI(t){return t!==null&&typeof t=="object"&&t instanceof mc}function rI(t){return zt(this,arguments,function*(n,o=100){let s,l=0;for(;l<o;){const a=yield fe(n.listTools({cursor:s}));for(const f of a.tools)yield yield fe(f),l++;if(!a.nextCursor)break;s=a.nextCursor}})}class mc{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new mc(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const l={},a=[];for(const g of this.mcpClients)try{for(var f=!0,p=(n=void 0,Jt(rI(g))),m;m=await p.next(),e=m.done,!e;f=!0){s=m.value,f=!1;const w=s;a.push(w);const _=w.name;if(l[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);l[_]=g}}catch(w){n={error:w}}finally{try{!f&&!e&&(o=p.return)&&await o.call(p)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),LS(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await s.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n}}async function oI(t,e,n){const o=new IS;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(o,s),e(o)}class iI{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=aI(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let m=()=>{};const g=new Promise(b=>{m=b}),w=e.callbacks,_=function(){m({})},S=this.apiClient,x={onopen:_,onmessage:b=>{oI(S,w.onmessage,b)},onerror:(n=w?.onerror)!==null&&n!==void 0?n:function(b){},onclose:(o=w?.onclose)!==null&&o!==void 0?o:function(b){}},A=this.webSocketFactory.create(p,lI(a),x);A.connect(),await g;const U={setup:{model:Se(this.apiClient,e.model)}};return A.send(JSON.stringify(U)),new sI(A,this.apiClient)}}class sI{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=bx(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Px(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Vr.PLAY)}pause(){this.sendPlaybackControl(Vr.PAUSE)}stop(){this.sendPlaybackControl(Vr.STOP)}resetContext(){this.sendPlaybackControl(Vr.RESET_CONTEXT)}close(){this.conn.close()}}function lI(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function aI(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}const uI="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function cI(t,e,n){const o=new AS;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const l=JSON.parse(s);if(t.isVertexAI()){const a=Lx(l);Object.assign(o,a)}else Object.assign(o,l);e(o)}class dI{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new iI(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,l,a,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let g;const w=this.apiClient.getHeaders();e.config&&e.config.tools&&kv(e.config.tools)&&Nv(w);const _=mI(w);if(this.apiClient.isVertexAI())g=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_,g);else{const j=this.apiClient.getApiKey();let me="BidiGenerateContent",Ie="key";j?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),me="BidiGenerateContentConstrained",Ie="access_token"),g=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${me}?${Ie}=${j}`}let S=()=>{};const x=new Promise(j=>{S=j}),A=e.callbacks,C=function(){var j;(j=A?.onopen)===null||j===void 0||j.call(A),S({})},P=this.apiClient,U={onopen:C,onmessage:j=>{cI(P,A.onmessage,j)},onerror:(n=A?.onerror)!==null&&n!==void 0?n:function(j){},onclose:(o=A?.onclose)!==null&&o!==void 0?o:function(j){}},b=this.webSocketFactory.create(g,pI(_),U);b.connect(),await x;let O=Se(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const j=this.apiClient.getProject(),me=this.apiClient.getLocation();O=`projects/${j}/locations/${me}/`+O}let H={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Bs.AUDIO]}:e.config.responseModalities=[Bs.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const z=(f=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&f!==void 0?f:[],W=[];for(const j of z)if(this.isCallableTool(j)){const me=j;W.push(await me.tool())}else W.push(j);W.length>0&&(e.config.tools=W);const he={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?H=Nx(this.apiClient,he):H=kx(this.apiClient,he),delete H.config,b.send(JSON.stringify(H)),new hI(b,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const fI={turnComplete:!0};class hI{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Mt(n.turns),e.isVertexAI()||(o=o.map(s=>Zs(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(uI)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},fI),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Dx(e)}:n={realtimeInput:Mx(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function pI(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function mI(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}const wm=10;function Em(t){var e,n,o;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(n=t?.tools)!==null&&n!==void 0?n:[])if(zr(a)){s=!0;break}if(!s)return!0;const l=(o=t?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function zr(t){return"callTool"in t&&typeof t.callTool=="function"}function gI(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>zr(s)))!==null&&o!==void 0?o:!1}function Sm(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,s)=>{if(zr(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(s)}),n}function Tm(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class vI extends pn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,l,a,f;const p=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!gI(n)||Em(n.config))return await this.generateContentInternal(p);const m=Sm(n);if(m.length>0){const A=m.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let g,w;const _=Mt(p.contents),S=(l=(s=(o=p.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:wm;let x=0;for(;x<S&&(g=await this.generateContentInternal(p),!(!g.functionCalls||g.functionCalls.length===0));){const A=g.candidates[0].content,C=[];for(const P of(f=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&f!==void 0?f:[])if(zr(P)){const b=await P.callTool(g.functionCalls);C.push(...b)}x++,w={role:"user",parts:C},p.contents=Mt(p.contents),p.contents.push(A),p.contents.push(w),Tm(p.config)&&(_.push(A),_.push(w))}return Tm(p.config)&&(g.automaticFunctionCallingHistory=_),g},this.generateContentStream=async n=>{var o,s,l,a,f;if(this.maybeMoveToResponseJsonSchem(n),Em(n.config)){const w=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(w)}const p=Sm(n);if(p.length>0){const w=p.map(_=>`tools[${_}]`).join(", ");throw new Error(`Incompatible tools found at ${w}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(s=(o=n?.config)===null||o===void 0?void 0:o.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,g=(f=(a=n?.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(m&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let l;const a=[];if(o?.generatedImages)for(const p of o.generatedImages)p&&p?.safetyAttributes&&((s=p?.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=p?.safetyAttributes:a.push(p);let f;return l?f={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:f={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},f}),this.list=async n=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new lr(fn.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(a),a)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var o,s,l,a,f,p;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(l=n.source)===null||l===void 0?void 0:l.video)===null||a===void 0)&&a.uri&&(!((p=(f=n.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,s;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const a=await Promise.all(l.map(async p=>zr(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(f.config.tools=a,e.config&&e.config.tools&&kv(e.config.tools)){const p=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Nv(m),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return f}async initAfcToolsMap(e){var n,o,s;const l=new Map;for(const a of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(zr(a)){const f=a,p=await f.tool();for(const m of(s=p.functionDeclarations)!==null&&s!==void 0?s:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,f)}}return l}async processAfcStream(e){var n,o,s;const l=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:wm;let a=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(m,g,w){return zt(this,arguments,function*(){for(var _,S,x,A,C,P;f<l;){a&&(f++,a=!1);const H=yield fe(m.processParamsMaybeAddMcpUsage(w)),z=yield fe(m.generateContentStreamInternal(H)),W=[],he=[];try{for(var U=!0,b=(S=void 0,Jt(z)),O;O=yield fe(b.next()),_=O.done,!_;U=!0){A=O.value,U=!1;const j=A;if(yield yield fe(j),j.candidates&&(!((C=j.candidates[0])===null||C===void 0)&&C.content)){he.push(j.candidates[0].content);for(const me of(P=j.candidates[0].content.parts)!==null&&P!==void 0?P:[])if(f<l&&me.functionCall){if(!me.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(me.functionCall.name)){const Ie=yield fe(g.get(me.functionCall.name).callTool([me.functionCall]));W.push(...Ie)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${me.functionCall.name}`)}}}}catch(j){S={error:j}}finally{try{!U&&!_&&(x=b.return)&&(yield fe(x.call(b)))}finally{if(S)throw S.error}}if(W.length>0){a=!0;const j=new Go;j.candidates=[{content:{role:"user",parts:W}}],yield yield fe(j);const me=[];me.push(...he),me.push({role:"user",parts:W});const Ie=Mt(w.contents).concat(me);w.contents=Ie}else break}})})(this,p,e)}async generateContentInternal(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=gm(this.apiClient,e);return f=K("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=ym(g),_=new Go;return Object.assign(_,w),_})}else{const m=mm(this.apiClient,e);return f=K("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=vm(g),_=new Go;return Object.assign(_,w),_})}}async generateContentStreamInternal(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=gm(this.apiClient,e);return f=K("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(w){return zt(this,arguments,function*(){var _,S,x,A;try{for(var C=!0,P=Jt(w),U;U=yield fe(P.next()),_=U.done,!_;C=!0){A=U.value,C=!1;const b=A,O=ym(yield fe(b.json()));O.sdkHttpResponse={headers:b.headers};const H=new Go;Object.assign(H,O),yield yield fe(H)}}catch(b){S={error:b}}finally{try{!C&&!_&&(x=P.return)&&(yield fe(x.call(P)))}finally{if(S)throw S.error}}})})}else{const m=mm(this.apiClient,e);return f=K("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(w){return zt(this,arguments,function*(){var _,S,x,A;try{for(var C=!0,P=Jt(w),U;U=yield fe(P.next()),_=U.done,!_;C=!0){A=U.value,C=!1;const b=A,O=vm(yield fe(b.json()));O.sdkHttpResponse={headers:b.headers};const H=new Go;Object.assign(H,O),yield yield fe(H)}}catch(b){S={error:b}}finally{try{!C&&!_&&(x=P.return)&&(yield fe(x.call(P)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=dC(this.apiClient,e);return f=K("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=hC(g),_=new Xp;return Object.assign(_,w),_})}else{const m=cC(this.apiClient,e);return f=K("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=fC(g),_=new Xp;return Object.assign(_,w),_})}}async generateImagesInternal(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=xC(this.apiClient,e);return f=K("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=AC(g),_=new Zp;return Object.assign(_,w),_})}else{const m=TC(this.apiClient,e);return f=K("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=CC(g),_=new Zp;return Object.assign(_,w),_})}}async editImageInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const f=sC(this.apiClient,e);return l=K("{model}:predict",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),s.then(p=>{const m=lC(p),g=new mS;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const f=xA(this.apiClient,e);return l=K("{model}:predict",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),s.then(p=>{const m=CA(p),g=new gS;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const f=iA(this.apiClient,e);return l=K("{model}:predict",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=sA(p),g=new vS;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const f=fA(this.apiClient,e);return l=K("{model}:predict",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=hA(p),g=new yS;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=qC(this.apiClient,e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Bu(g))}else{const m=GC(this.apiClient,e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),a.then(g=>Vu(g))}}async listInternal(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=XC(this.apiClient,e);return f=K("{models_url}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=eA(g),_=new em;return Object.assign(_,w),_})}else{const m=QC(this.apiClient,e);return f=K("{models_url}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=ZC(g),_=new em;return Object.assign(_,w),_})}}async update(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=SA(this.apiClient,e);return f=K("{model}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Bu(g))}else{const m=EA(this.apiClient,e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),a.then(g=>Vu(g))}}async delete(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=nC(this.apiClient,e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=oC(g),_=new tm;return Object.assign(_,w),_})}else{const m=tC(this.apiClient,e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=rC(g),_=new tm;return Object.assign(_,w),_})}}async countTokens(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=Xx(this.apiClient,e);return f=K("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=eC(g),_=new nm;return Object.assign(_,w),_})}else{const m=Qx(this.apiClient,e);return f=K("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=Zx(g),_=new nm;return Object.assign(_,w),_})}}async computeTokens(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const f=Hx(this.apiClient,e);return l=K("{model}:computeTokens",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),s.then(p=>{const m=zx(p),g=new _S;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=bC(this.apiClient,e);return f=K("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const w=NC(g),_=new Gs;return Object.assign(_,w),_})}else{const m=PC(this.apiClient,e);return f=K("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),a.then(g=>{const w=kC(g),_=new Gs;return Object.assign(_,w),_})}}}class yI extends pn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=uS(e);return f=K("{operationName}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a}else{const m=aS(e);return f=K("{operationName}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),a}}async fetchPredictVideosOperationInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const f=tS(e);return l=K("{resourceName}:fetchPredictOperation",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}function _I(t){const e={},n=c(t,["data"]);if(n!=null&&d(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function wI(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>kI(l))),d(e,["parts"],s)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function EI(t,e,n){const o={},s=c(e,["expireTime"]);n!==void 0&&s!=null&&d(n,["expireTime"],s);const l=c(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&d(n,["newSessionExpireTime"],l);const a=c(e,["uses"]);n!==void 0&&a!=null&&d(n,["uses"],a);const f=c(e,["liveConnectConstraints"]);n!==void 0&&f!=null&&d(n,["bidiGenerateContentSetup"],RI(t,f));const p=c(e,["lockAdditionalFields"]);return n!==void 0&&p!=null&&d(n,["fieldMask"],p),o}function SI(t,e){const n={},o=c(e,["config"]);return o!=null&&d(n,["config"],EI(t,o,n)),n}function TI(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function xI(t){const e={},n=c(t,["id"]);n!=null&&d(e,["id"],n);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const s=c(t,["name"]);if(s!=null&&d(e,["name"],s),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CI(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function AI(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function II(t,e){const n={},o=c(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const s=c(t,["responseModalities"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","responseModalities"],s);const l=c(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const a=c(t,["topP"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topP"],a);const f=c(t,["topK"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topK"],f);const p=c(t,["maxOutputTokens"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","maxOutputTokens"],p);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const g=c(t,["seed"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","seed"],g);const w=c(t,["speechConfig"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","speechConfig"],pc(w));const _=c(t,["thinkingConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","thinkingConfig"],_);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],S);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],wI(lt(x)));const A=c(t,["tools"]);if(e!==void 0&&A!=null){let z=Qr(A);Array.isArray(z)&&(z=z.map(W=>PI(Yr(W)))),d(e,["setup","tools"],z)}const C=c(t,["sessionResumption"]);e!==void 0&&C!=null&&d(e,["setup","sessionResumption"],NI(C));const P=c(t,["inputAudioTranscription"]);e!==void 0&&P!=null&&d(e,["setup","inputAudioTranscription"],P);const U=c(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&d(e,["setup","outputAudioTranscription"],U);const b=c(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&d(e,["setup","realtimeInputConfig"],b);const O=c(t,["contextWindowCompression"]);e!==void 0&&O!=null&&d(e,["setup","contextWindowCompression"],O);const H=c(t,["proactivity"]);if(e!==void 0&&H!=null&&d(e,["setup","proactivity"],H),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function RI(t,e){const n={},o=c(e,["model"]);o!=null&&d(n,["setup","model"],Se(t,o));const s=c(e,["config"]);return s!=null&&d(n,["config"],II(s,n)),n}function kI(t){const e={},n=c(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const s=c(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],TI(l));const a=c(t,["functionCall"]);a!=null&&d(e,["functionCall"],xI(a));const f=c(t,["functionResponse"]);f!=null&&d(e,["functionResponse"],f);const p=c(t,["inlineData"]);p!=null&&d(e,["inlineData"],_I(p));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const g=c(t,["thought"]);g!=null&&d(e,["thought"],g);const w=c(t,["thoughtSignature"]);w!=null&&d(e,["thoughtSignature"],w);const _=c(t,["videoMetadata"]);return _!=null&&d(e,["videoMetadata"],_),e}function NI(t){const e={},n=c(t,["handle"]);if(n!=null&&d(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function PI(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(w=>w)),d(e,["functionDeclarations"],g)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(t,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const s=c(t,["computerUse"]);s!=null&&d(e,["computerUse"],s);const l=c(t,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],CI(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],AI(p));const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function bI(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(l=>`${n}.${l}`);e.push(...s)}else e.push(n)}return e.join(",")}function MI(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const l=bI(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?t.fieldMask=l:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];s.length>0&&(f=s.map(m=>a.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),f.length>0&&p.push(...f),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class DI extends pn{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=SI(this.apiClient,e);l=K("auth_tokens",f._url),a=f._query,delete f.config,delete f._url,delete f._query;const p=MI(f,e.config);return s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>m)}}}function LI(t,e){const n={},o=c(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),n}function UI(t){const e={},n=c(t,["name"]);n!=null&&d(e,["_url","name"],n);const o=c(t,["config"]);return o!=null&&LI(o,e),e}function OI(t){const e={},n=c(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function FI(t,e){const n={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function $I(t){const e={},n=c(t,["parent"]);n!=null&&d(e,["_url","parent"],n);const o=c(t,["config"]);return o!=null&&FI(o,e),e}function VI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=c(t,["documents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),d(e,["documents"],l)}return e}class BI extends pn{constructor(e){super(),this.apiClient=e,this.list=async n=>new lr(fn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=OI(e);return l=K("{name}",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var n,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=UI(e);s=K("{name}",a._url),l=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$I(e);return l=K("{parent}/documents",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=VI(p),g=new wS;return Object.assign(g,m),g})}}}class GI extends pn{constructor(e,n=new BI(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new lr(fn.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=bA(e);return l=K("fileSearchStores",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async get(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=LA(e);return l=K("{name}",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var n,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=DA(e);s=K("{name}",a._url),l=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=BA(e);return l=K("fileSearchStores",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=GA(p),g=new ES;return Object.assign(g,m),g})}}async uploadToFileSearchStoreInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=qA(e);return l=K("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=HA(p),g=new SS;return Object.assign(g,m),g})}}async importFile(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=FA(e);return l=K("{file_search_store_name}:importFile",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=OA(p),g=new uc;return Object.assign(g,m),g})}}}let Pv=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return Pv=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const qI=()=>Pv();function qu(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Hu=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Dt extends Error{}class ft extends Dt{constructor(e,n,o,s){super(`${ft.makeMessage(e,n,o)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,o){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,o,s){if(!e||!s)return new nl({message:o,cause:Hu(n)});const l=n;return e===400?new Mv(e,l,o,s):e===401?new Dv(e,l,o,s):e===403?new Lv(e,l,o,s):e===404?new Uv(e,l,o,s):e===409?new Ov(e,l,o,s):e===422?new Fv(e,l,o,s):e===429?new $v(e,l,o,s):e>=500?new Vv(e,l,o,s):new ft(e,l,o,s)}}class zu extends ft{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class nl extends ft{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class bv extends nl{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Mv extends ft{}class Dv extends ft{}class Lv extends ft{}class Uv extends ft{}class Ov extends ft{}class Fv extends ft{}class $v extends ft{}class Vv extends ft{}const HI=/^[a-z][a-z0-9+.-]*:/i,zI=t=>HI.test(t);let Ju=t=>(Ju=Array.isArray,Ju(t));const JI=Ju;let WI=JI;const xm=WI;function jI(t){if(!t)return!0;for(const e in t)return!1;return!0}function KI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const YI=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Dt(`${t} must be an integer`);if(e<0)throw new Dt(`${t} must be a positive integer`);return e},QI=t=>{try{return JSON.parse(t)}catch{return}};const XI=t=>new Promise(e=>setTimeout(e,t));const $r="0.0.1";function ZI(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const eR=()=>{var t,e,n,o,s;const l=ZI();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":Am(Deno.build.os),"X-Stainless-Arch":Cm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":Am((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Cm((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const a=tR();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function tR(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const s=o[1]||0,l=o[2]||0,a=o[3]||0;return{browser:e,version:`${s}.${l}.${a}`}}}return null}const Cm=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Am=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let _s;const nR=()=>_s??(_s=eR());function rR(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Bv(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function oR(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Bv({start(){},async pull(n){const{done:o,value:s}=await e.next();o?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Gv(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function iR(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),s=o.cancel();o.releaseLock(),await s}const sR=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const qv=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function hu(t,e,n){return qv(),new File(t,e??"unknown_file",n)}function lR(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const aR=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const Hv=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",uR=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Hv(t),cR=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function dR(t,e,n){if(qv(),t=await t,uR(t))return t instanceof File?t:hu([await t.arrayBuffer()],t.name);if(cR(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),hu(await Wu(s),e,n)}const o=await Wu(t);if(e||(e=lR(t)),!n?.type){const s=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return hu(o,e,n)}async function Wu(t){var e,n,o,s,l;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(Hv(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(aR(t))try{for(var f=!0,p=Jt(t),m;m=await p.next(),e=m.done,!e;f=!0){s=m.value,f=!1;const g=s;a.push(...await Wu(g))}}catch(g){n={error:g}}finally{try{!f&&!e&&(o=p.return)&&await o.call(p)}finally{if(n)throw n.error}}else{const g=(l=t?.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${g?`; constructor: ${g}`:""}${fR(t)}`)}return a}function fR(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class zv{constructor(e){this._client=e}}zv._key=[];function Jv(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Im=Object.freeze(Object.create(null)),hR=(t=Jv)=>(function(n,...o){if(n.length===1)return n[0];let s=!1;const l=[],a=n.reduce((g,w,_)=>{var S,x,A;/[?#]/.test(w)&&(s=!0);const C=o[_];let P=(s?encodeURIComponent:t)(""+C);return _!==o.length&&(C==null||typeof C=="object"&&C.toString===((A=Object.getPrototypeOf((x=Object.getPrototypeOf((S=C.hasOwnProperty)!==null&&S!==void 0?S:Im))!==null&&x!==void 0?x:Im))===null||A===void 0?void 0:A.toString))&&(P=C+"",l.push({start:g.length+w.length,length:P.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),g+w+(_===o.length?"":P)},""),f=a.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=p.exec(f))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((g,w)=>g.start-w.start),l.length>0){let g=0;const w=l.reduce((_,S)=>{const x=" ".repeat(S.start-g),A="^".repeat(S.length);return g=S.start+S.length,_+x+A},"");throw new Dt(`Path parameters result in path with invalid segments:
${l.map(_=>_.error).join(`
`)}
${a}
${w}`)}return a}),ws=hR(Jv);class Wv extends zv{create(e,n){var o;const{api_version:s=this._client.apiVersion}=e,l=Hs(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Dt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Dt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ws`/${s}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(ws`/${s}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(ws`/${s}/interactions/${e}/cancel`,o)}get(e,n={},o){var s;const l=n??{},{api_version:a=this._client.apiVersion}=l,f=Hs(l,["api_version"]);return this._client.get(ws`/${a}/interactions/${e}`,Object.assign(Object.assign({query:f},o),{stream:(s=n?.stream)!==null&&s!==void 0?s:!1}))}}Wv._key=Object.freeze(["interactions"]);class jv extends Wv{}function pR(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let o=0;for(const s of t)n.set(s,o),o+=s.length;return n}let Es;function gc(t){let e;return(Es??(e=new globalThis.TextEncoder,Es=e.encode.bind(e)))(t)}let Ss;function Rm(t){let e;return(Ss??(e=new globalThis.TextDecoder,Ss=e.decode.bind(e)))(t)}class rl{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?gc(e):e;this.buffer=pR([this.buffer,n]);const o=[];let s;for(;(s=mR(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){o.push(Rm(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,a=Rm(this.buffer.subarray(0,l));o.push(a),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}rl.NEWLINE_CHARS=new Set([`
`,"\r"]);rl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function mR(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function gR(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}const zs={off:0,error:200,warn:300,info:400,debug:500},km=(t,e,n)=>{if(t){if(KI(zs,t))return t;dt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(zs))}`)}};function Wo(){}function Ts(t,e,n){return!e||zs[t]>zs[n]?Wo:e[t].bind(e)}const vR={error:Wo,warn:Wo,info:Wo,debug:Wo};let Nm=new WeakMap;function dt(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return vR;const s=Nm.get(n);if(s&&s[0]===o)return s[1];const l={error:Ts("error",n,o),warn:Ts("warn",n,o),info:Ts("info",n,o),debug:Ts("debug",n,o)};return Nm.set(n,[o,l]),l}const rr=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);class Br{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let s=!1;const l=o?dt(o):console;function a(){return zt(this,arguments,function*(){var p,m,g,w;if(s)throw new Dt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let _=!1;try{try{for(var S=!0,x=Jt(yR(e,n)),A;A=yield fe(x.next()),p=A.done,!p;S=!0){w=A.value,S=!1;const C=w;if(!_)if(C.data.startsWith("[DONE]")){_=!0;continue}else try{yield yield fe(JSON.parse(C.data))}catch(P){throw l.error("Could not parse message into JSON:",C.data),l.error("From chunk:",C.raw),P}}}catch(C){m={error:C}}finally{try{!S&&!p&&(g=x.return)&&(yield fe(g.call(x)))}finally{if(m)throw m.error}}_=!0}catch(C){if(qu(C))return yield fe(void 0);throw C}finally{_||n.abort()}})}return new Br(a,n,o)}static fromReadableStream(e,n,o){let s=!1;function l(){return zt(this,arguments,function*(){var p,m,g,w;const _=new rl,S=Gv(e);try{for(var x=!0,A=Jt(S),C;C=yield fe(A.next()),p=C.done,!p;x=!0){w=C.value,x=!1;const P=w;for(const U of _.decode(P))yield yield fe(U)}}catch(P){m={error:P}}finally{try{!x&&!p&&(g=A.return)&&(yield fe(g.call(A)))}finally{if(m)throw m.error}}for(const P of _.flush())yield yield fe(P)})}function a(){return zt(this,arguments,function*(){var p,m,g,w;if(s)throw new Dt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let _=!1;try{try{for(var S=!0,x=Jt(l()),A;A=yield fe(x.next()),p=A.done,!p;S=!0){w=A.value,S=!1;const C=w;_||C&&(yield yield fe(JSON.parse(C)))}}catch(C){m={error:C}}finally{try{!S&&!p&&(g=x.return)&&(yield fe(g.call(x)))}finally{if(m)throw m.error}}_=!0}catch(C){if(qu(C))return yield fe(void 0);throw C}finally{_||n.abort()}})}return new Br(a,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),s=l=>({next:()=>{if(l.length===0){const a=o.next();e.push(a),n.push(a)}return l.shift()}});return[new Br(()=>s(e),this.controller,this.client),new Br(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Bv({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:s,done:l}=await n.next();if(l)return o.close();const a=gc(JSON.stringify(s)+`
`);o.enqueue(a)}catch(s){o.error(s)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function yR(t,e){return zt(this,arguments,function*(){var o,s,l,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Dt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Dt("Attempted to iterate over a response with no body");const f=new wR,p=new rl,m=Gv(t.body);try{for(var g=!0,w=Jt(_R(m)),_;_=yield fe(w.next()),o=_.done,!o;g=!0){a=_.value,g=!1;const S=a;for(const x of p.decode(S)){const A=f.decode(x);A&&(yield yield fe(A))}}}catch(S){s={error:S}}finally{try{!g&&!o&&(l=w.return)&&(yield fe(l.call(w)))}finally{if(s)throw s.error}}for(const S of p.flush()){const x=f.decode(S);x&&(yield yield fe(x))}})}function _R(t){return zt(this,arguments,function*(){var n,o,s,l;let a=new Uint8Array;try{for(var f=!0,p=Jt(t),m;m=yield fe(p.next()),n=m.done,!n;f=!0){l=m.value,f=!1;const g=l;if(g==null)continue;const w=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?gc(g):g;let _=new Uint8Array(a.length+w.length);_.set(a),_.set(w,a.length),a=_;let S;for(;(S=gR(a))!==-1;)yield yield fe(a.slice(0,S)),a=a.slice(S)}}catch(g){o={error:g}}finally{try{!f&&!n&&(s=p.return)&&(yield fe(s.call(p)))}finally{if(o)throw o.error}}a.length>0&&(yield yield fe(a))})}class wR{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,s]=ER(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function ER(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function SR(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:s,startTime:l}=e,a=await(async()=>{var f;if(e.options.stream)return dt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Br.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const p=n.headers.get("content-type"),m=(f=p?.split(";")[0])===null||f===void 0?void 0:f.trim();return m?.includes("application/json")||m?.endsWith("+json")?await n.json():await n.text()})();return dt(t).debug(`[${o}] response parsed`,rr({retryOfRequestLogID:s,url:n.url,status:n.status,body:a,durationMs:Date.now()-l})),a}class vc extends Promise{constructor(e,n,o=SR){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new vc(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const Kv=Symbol("brand.privateNullableHeaders");function*TR(t){if(!t)return;if(Kv in t){const{values:o,nulls:s}=t;yield*o.entries();for(const l of s)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():xm(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const s=o[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const l=xm(o[1])?o[1]:[o[1]];let a=!1;for(const f of l)f!==void 0&&(e&&!a&&(a=!0,yield[s,null]),yield[s,f])}}const pu=t=>{const e=new Headers,n=new Set;for(const o of t){const s=new Set;for(const[l,a]of TR(o)){const f=l.toLowerCase();s.has(f)||(e.delete(l),s.add(f)),a===null?(e.delete(l),n.add(f)):(e.append(l,a),n.delete(f))}}return{[Kv]:!0,values:e,nulls:n}};const mu=t=>{var e,n,o,s,l,a;if(typeof globalThis.process<"u")return(o=(n=(e=KE)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(a=(l=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||l===void 0?void 0:l.call(s,t))===null||a===void 0?void 0:a.trim()};var Yv;class ol{constructor(e){var n,o,s,l,a,f,p,m=e===void 0?{}:e,{baseURL:g=mu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:w=(n=mu("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:_="v1beta"}=m,S=Hs(m,["baseURL","apiKey","apiVersion"]);const x=Object.assign(Object.assign({apiKey:w,apiVersion:_},S),{baseURL:g||"https://generativelanguage.googleapis.com"});this.baseURL=x.baseURL,this.timeout=(o=x.timeout)!==null&&o!==void 0?o:ol.DEFAULT_TIMEOUT,this.logger=(s=x.logger)!==null&&s!==void 0?s:console;const A="warn";this.logLevel=A,this.logLevel=(a=(l=km(x.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:km(mu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:A,this.fetchOptions=x.fetchOptions,this.maxRetries=(f=x.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(p=x.fetch)!==null&&p!==void 0?p:rR(),this.encoder=sR,this._options=x,this.apiKey=w,this.apiVersion=_}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return pu([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new Dt(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${$r}`}defaultIdempotencyKey(){return`stainless-node-retry-${qI()}`}makeStatusError(e,n,o,s){return ft.generate(e,n,o,s)}buildURL(e,n,o){const s=!this.baseURLOverridden()&&o||this.baseURL,l=zI(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return jI(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new vc(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var s,l,a;const f=await e,p=(s=f.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=p),await this.prepareOptions(f);const{req:m,url:g,timeout:w}=await this.buildRequest(f,{retryCount:p-n});await this.prepareRequest(m,{url:g,options:f});const _="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),S=o===void 0?"":`, retryOf: ${o}`,x=Date.now();if(dt(this).debug(`[${_}] sending request`,rr({retryOfRequestLogID:o,method:f.method,url:g,options:f,headers:m.headers})),!((l=f.signal)===null||l===void 0)&&l.aborted)throw new zu;const A=new AbortController,C=await this.fetchWithTimeout(g,m,w,A).catch(Hu),P=Date.now();if(C instanceof globalThis.Error){const b=`retrying, ${n} attempts remaining`;if(!((a=f.signal)===null||a===void 0)&&a.aborted)throw new zu;const O=qu(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(n)return dt(this).info(`[${_}] connection ${O?"timed out":"failed"} - ${b}`),dt(this).debug(`[${_}] connection ${O?"timed out":"failed"} (${b})`,rr({retryOfRequestLogID:o,url:g,durationMs:P-x,message:C.message})),this.retryRequest(f,n,o??_);throw dt(this).info(`[${_}] connection ${O?"timed out":"failed"} - error; no more retries left`),dt(this).debug(`[${_}] connection ${O?"timed out":"failed"} (error; no more retries left)`,rr({retryOfRequestLogID:o,url:g,durationMs:P-x,message:C.message})),O?new bv:new nl({cause:C})}const U=`[${_}${S}] ${m.method} ${g} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${P-x}ms`;if(!C.ok){const b=await this.shouldRetry(C);if(n&&b){const j=`retrying, ${n} attempts remaining`;return await iR(C.body),dt(this).info(`${U} - ${j}`),dt(this).debug(`[${_}] response error (${j})`,rr({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:P-x})),this.retryRequest(f,n,o??_,C.headers)}const O=b?"error; no more retries left":"error; not retryable";dt(this).info(`${U} - ${O}`);const H=await C.text().catch(j=>Hu(j).message),z=QI(H),W=z?void 0:H;throw dt(this).debug(`[${_}] response error (${O})`,rr({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,message:W,durationMs:Date.now()-x})),this.makeStatusError(C.status,z,W,C.headers)}return dt(this).info(U),dt(this).debug(`[${_}] response start`,rr({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:P-x})),{response:C,options:f,controller:A,requestLogID:_,retryOfRequestLogID:o,startTime:x}}async fetchWithTimeout(e,n,o,s){const l=n||{},{signal:a,method:f}=l,p=Hs(l,["signal","method"]);a&&a.addEventListener("abort",()=>s.abort());const m=setTimeout(()=>s.abort(),o),g=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,w=Object.assign(Object.assign(Object.assign({signal:s.signal},g?{duplex:"half"}:{}),{method:"GET"}),p);f&&(w.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,w)}finally{clearTimeout(m)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,s){var l;let a;const f=s?.get("retry-after-ms");if(f){const m=parseFloat(f);Number.isNaN(m)||(a=m)}const p=s?.get("retry-after");if(p&&!a){const m=parseFloat(p);Number.isNaN(m)?a=Date.parse(p)-Date.now():a=m*1e3}if(!(a&&0<=a&&a<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,m)}return await XI(a),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,a=Math.min(.5*Math.pow(2,l),8),f=1-Math.random()*.25;return a*f*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,s,l;const a=Object.assign({},e),{method:f,path:p,query:m,defaultBaseURL:g}=a,w=this.buildURL(p,m,g);"timeout"in a&&YI("timeout",a.timeout),a.timeout=(o=a.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:_,body:S}=this.buildBody({options:a}),x=await this.buildHeaders({options:e,method:f,bodyHeaders:_,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:x},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&S instanceof globalThis.ReadableStream&&{duplex:"half"}),S&&{body:S}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(l=a.fetchOptions)!==null&&l!==void 0?l:{}),url:w,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:s}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const a=pu([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),nR()),await this.authHeaders(e),this._options.defaultHeaders,o,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=pu([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:oR(e)}:this.encoder({body:e,headers:o})}}ol.DEFAULT_TIMEOUT=6e4;class Qe extends ol{constructor(){super(...arguments),this.interactions=new jv(this)}}Yv=Qe;Qe.GeminiNextGenAPIClient=Yv;Qe.GeminiNextGenAPIClientError=Dt;Qe.APIError=ft;Qe.APIConnectionError=nl;Qe.APIConnectionTimeoutError=bv;Qe.APIUserAbortError=zu;Qe.NotFoundError=Uv;Qe.ConflictError=Ov;Qe.RateLimitError=$v;Qe.BadRequestError=Mv;Qe.AuthenticationError=Dv;Qe.InternalServerError=Vv;Qe.PermissionDeniedError=Lv;Qe.UnprocessableEntityError=Fv;Qe.toFile=dR;Qe.Interactions=jv;function xR(t,e){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function CR(t,e){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function AR(t,e){const n={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function IR(t,e){const n={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function RR(t,e,n){const o={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=c(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&d(e,["displayName"],s),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=c(t,["epochCount"]);e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","epochCount"],l);const a=c(t,["learningRateMultiplier"]);if(a!=null&&d(o,["tuningTask","hyperparameters","learningRateMultiplier"],a),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=c(t,["batchSize"]);e!==void 0&&f!=null&&d(e,["tuningTask","hyperparameters","batchSize"],f);const p=c(t,["learningRate"]);if(e!==void 0&&p!=null&&d(e,["tuningTask","hyperparameters","learningRate"],p),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function kR(t,e,n){const o={};let s=c(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const S=c(t,["validationDataset"]);e!==void 0&&S!=null&&d(e,["supervisedTuningSpec"],Pm(S))}else if(s==="PREFERENCE_TUNING"){const S=c(t,["validationDataset"]);e!==void 0&&S!=null&&d(e,["preferenceOptimizationSpec"],Pm(S))}const l=c(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&d(e,["tunedModelDisplayName"],l);const a=c(t,["description"]);e!==void 0&&a!=null&&d(e,["description"],a);let f=c(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const S=c(t,["epochCount"]);e!==void 0&&S!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(f==="PREFERENCE_TUNING"){const S=c(t,["epochCount"]);e!==void 0&&S!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}let p=c(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const S=c(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(p==="PREFERENCE_TUNING"){const S=c(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}let m=c(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const S=c(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(m==="PREFERENCE_TUNING"){const S=c(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}let g=c(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const S=c(t,["adapterSize"]);e!==void 0&&S!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(g==="PREFERENCE_TUNING"){const S=c(t,["adapterSize"]);e!==void 0&&S!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const w=c(t,["labels"]);e!==void 0&&w!=null&&d(e,["labels"],w);const _=c(t,["beta"]);return e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],_),o}function NR(t,e){const n={},o=c(t,["baseModel"]);o!=null&&d(n,["baseModel"],o);const s=c(t,["preTunedModel"]);s!=null&&d(n,["preTunedModel"],s);const l=c(t,["trainingDataset"]);l!=null&&BR(l);const a=c(t,["config"]);return a!=null&&RR(a,n),n}function PR(t,e){const n={},o=c(t,["baseModel"]);o!=null&&d(n,["baseModel"],o);const s=c(t,["preTunedModel"]);s!=null&&d(n,["preTunedModel"],s);const l=c(t,["trainingDataset"]);l!=null&&GR(l,n,e);const a=c(t,["config"]);return a!=null&&kR(a,n,e),n}function bR(t,e){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function MR(t,e){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function DR(t,e,n){const o={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const l=c(t,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const a=c(t,["filter"]);return e!==void 0&&a!=null&&d(e,["_query","filter"],a),o}function LR(t,e,n){const o={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const l=c(t,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const a=c(t,["filter"]);return e!==void 0&&a!=null&&d(e,["_query","filter"],a),o}function UR(t,e){const n={},o=c(t,["config"]);return o!=null&&DR(o,n),n}function OR(t,e){const n={},o=c(t,["config"]);return o!=null&&LR(o,n),n}function FR(t,e){const n={},o=c(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=c(t,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const l=c(t,["tunedModels"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(f=>Qv(f))),d(n,["tuningJobs"],a)}return n}function $R(t,e){const n={},o=c(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=c(t,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const l=c(t,["tuningJobs"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(f=>ju(f))),d(n,["tuningJobs"],a)}return n}function VR(t,e){const n={},o=c(t,["name"]);o!=null&&d(n,["model"],o);const s=c(t,["name"]);return s!=null&&d(n,["endpoint"],s),n}function BR(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=c(t,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),d(n,["examples","examples"],s)}return n}function GR(t,e,n){const o={};let s=c(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let l=c(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(l==="PREFERENCE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Qv(t,e){const n={},o=c(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=c(t,["name"]);s!=null&&d(n,["name"],s);const l=c(t,["state"]);l!=null&&d(n,["state"],dv(l));const a=c(t,["createTime"]);a!=null&&d(n,["createTime"],a);const f=c(t,["tuningTask","startTime"]);f!=null&&d(n,["startTime"],f);const p=c(t,["tuningTask","completeTime"]);p!=null&&d(n,["endTime"],p);const m=c(t,["updateTime"]);m!=null&&d(n,["updateTime"],m);const g=c(t,["description"]);g!=null&&d(n,["description"],g);const w=c(t,["baseModel"]);w!=null&&d(n,["baseModel"],w);const _=c(t,["_self"]);return _!=null&&d(n,["tunedModel"],VR(_)),n}function ju(t,e){const n={},o=c(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=c(t,["name"]);s!=null&&d(n,["name"],s);const l=c(t,["state"]);l!=null&&d(n,["state"],dv(l));const a=c(t,["createTime"]);a!=null&&d(n,["createTime"],a);const f=c(t,["startTime"]);f!=null&&d(n,["startTime"],f);const p=c(t,["endTime"]);p!=null&&d(n,["endTime"],p);const m=c(t,["updateTime"]);m!=null&&d(n,["updateTime"],m);const g=c(t,["error"]);g!=null&&d(n,["error"],g);const w=c(t,["description"]);w!=null&&d(n,["description"],w);const _=c(t,["baseModel"]);_!=null&&d(n,["baseModel"],_);const S=c(t,["tunedModel"]);S!=null&&d(n,["tunedModel"],S);const x=c(t,["preTunedModel"]);x!=null&&d(n,["preTunedModel"],x);const A=c(t,["supervisedTuningSpec"]);A!=null&&d(n,["supervisedTuningSpec"],A);const C=c(t,["preferenceOptimizationSpec"]);C!=null&&d(n,["preferenceOptimizationSpec"],C);const P=c(t,["tuningDataStats"]);P!=null&&d(n,["tuningDataStats"],P);const U=c(t,["encryptionSpec"]);U!=null&&d(n,["encryptionSpec"],U);const b=c(t,["partnerModelTuningSpec"]);b!=null&&d(n,["partnerModelTuningSpec"],b);const O=c(t,["customBaseModel"]);O!=null&&d(n,["customBaseModel"],O);const H=c(t,["experiment"]);H!=null&&d(n,["experiment"],H);const z=c(t,["labels"]);z!=null&&d(n,["labels"],z);const W=c(t,["outputUri"]);W!=null&&d(n,["outputUri"],W);const he=c(t,["pipelineJob"]);he!=null&&d(n,["pipelineJob"],he);const j=c(t,["serviceAccount"]);j!=null&&d(n,["serviceAccount"],j);const me=c(t,["tunedModelDisplayName"]);me!=null&&d(n,["tunedModelDisplayName"],me);const Ie=c(t,["veoTuningSpec"]);return Ie!=null&&d(n,["veoTuningSpec"],Ie),n}function qR(t,e){const n={},o=c(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=c(t,["name"]);s!=null&&d(n,["name"],s);const l=c(t,["metadata"]);l!=null&&d(n,["metadata"],l);const a=c(t,["done"]);a!=null&&d(n,["done"],a);const f=c(t,["error"]);return f!=null&&d(n,["error"],f),n}function Pm(t,e){const n={},o=c(t,["gcsUri"]);o!=null&&d(n,["validationDatasetUri"],o);const s=c(t,["vertexDatasetResource"]);return s!=null&&d(n,["validationDatasetUri"],s),n}class HR extends pn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new lr(fn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:s});return l.baseModel=void 0,await this.tuneInternal(l)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),l=await this.tuneMldevInternal(s);let a="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?a=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(a=l.name.split("/operations/")[0]),{name:a,state:Uu.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=MR(e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>ju(g))}else{const m=bR(e);return f=K("{name}",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>Qv(g))}}async listInternal(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=OR(e);return f=K("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=$R(g),_=new rm;return Object.assign(_,w),_})}else{const m=UR(e);return f=K("tunedModels",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=FR(g),_=new rm;return Object.assign(_,w),_})}}async cancel(e){var n,o,s,l;let a,f="",p={};if(this.apiClient.isVertexAI()){const m=CR(e);return f=K("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=IR(g),_=new om;return Object.assign(_,w),_})}else{const m=xR(e);return f=K("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const w=AR(g),_=new om;return Object.assign(_,w),_})}}async tuneInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const f=PR(e,e);return l=K("tuningJobs",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),s.then(p=>ju(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=NR(e);return l=K("tunedModels",f._url),a=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),s.then(p=>qR(p))}}}class zR{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const JR=1024*1024*8,WR=3,jR=1e3,KR=2,Js="x-goog-upload-status";async function YR(t,e,n){var o;const s=await Xv(t,e,n),l=await s?.json();if(((o=s?.headers)===null||o===void 0?void 0:o[Js])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function QR(t,e,n){var o;const s=await Xv(t,e,n),l=await s?.json();if(((o=s?.headers)===null||o===void 0?void 0:o[Js])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=iv(l),f=new cc;return Object.assign(f,a),f}async function Xv(t,e,n){var o,s;let l=0,a=0,f=new Ou(new Response),p="upload";for(l=t.size;a<l;){const m=Math.min(JR,l-a),g=t.slice(a,a+m);a+m>=l&&(p+=", finalize");let w=0,_=jR;for(;w<WR&&(f=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(a),"Content-Length":String(m)}}}),!(!((o=f?.headers)===null||o===void 0)&&o[Js]));)w++,await ZR(_),_=_*KR;if(a+=m,((s=f?.headers)===null||s===void 0?void 0:s[Js])!=="active")break;if(l<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function XR(t){return{size:t.size,type:t.type}}function ZR(t){return new Promise(e=>setTimeout(e,t))}class ek{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YR(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await QR(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await XR(e)}}class tk{create(e,n,o){return new nk(e,n,o)}}class nk{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const bm="x-goog-api-key";class rk{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(bm)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(bm,this.apiKey)}}}const ok="gl-node/";class ik{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Qe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=ZE(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new rk(this.apiKey);this.apiClient=new XA({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:ok+"web",uploader:new ek,downloader:new zR}),this.models=new vI(this.apiClient),this.live=new dI(this.apiClient,s,new tk),this.batches=new RT(this.apiClient),this.chats=new ux(this.models,this.apiClient),this.caches=new sx(this.apiClient),this.files=new _x(this.apiClient),this.operations=new yI(this.apiClient),this.authTokens=new DI(this.apiClient),this.tunings=new HR(this.apiClient),this.fileSearchStores=new GI(this.apiClient)}}const sk={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GEMINI_API_KEY:"",VITE_SUPABASE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hYmpsaGpsa2VlaGFjenhyZ2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4Mzg5MDMsImV4cCI6MjA4MTQxNDkwM30.eHuUAZMQ9eGffxCwYwOczhzZuRksv41QoUaIulebpT4",VITE_SUPABASE_URL:"https://mabjlhjlkeehaczxrgcy.supabase.co"},lk=()=>{},Mm=lk();let Ku=null;if(Mm)try{Ku=new ik({apiKey:Mm})}catch(t){console.error("Error initializing Gemini:",t)}else console.warn("VITE_GEMINI_API_KEY no encontrada. El chat funcionar en modo DEMO.");const ak=async(t,e)=>{if(!Ku)return await new Promise(l=>setTimeout(l,800)),t.toLowerCase().includes("precio")||t.toLowerCase().includes("valor")?"Nuestros cortes parten desde $19.990. Los decants de perfumes tienen precios variados, por ejemplo Good Girl 5ml a $8.990. Te gustara ver el catlogo completo?":t.toLowerCase().includes("domicilio")||t.toLowerCase().includes("casa")?"S! Vamos a tu domicilio en Santiago Centro y uoa por un recargo de $3.000 adicional. Llevamos todo lo necesario para tu cambio de look.":t.toLowerCase().includes("hola")||t.toLowerCase().includes("buenos")?"Hola! Bienvenid@ a Tus3B Style. Soy tu asistente virtual (Modo Demo). Puedo ayudarte con precios, zonas de cobertura y recomendaciones de perfumes.":"Gracias por tu mensaje. Como estoy en Modo Demo (sin API Key configurada), mis respuestas son limitadas. Te sugiero contactarnos directamente por WhatsApp para una atencin personalizada.";const n=vu.map(l=>`- ${l.brand} ${l.name}: ${l.description}. Notas: ${l.notes.join(", ")}. Precio 5ml: ${l.price5ml}, 10ml: ${l.price10ml}.`).join(`
`),o=qo.map(l=>`- ${l.name}: ${l.description}. Precio: ${l.price}. Incluye: ${l.includes.join(", ")}.`).join(`
`),s=`
    Eres "StyleBot", un asistente experto en belleza y perfumera para la tienda "Tus3B Style" en Chile.
    
    Tus objetivos:
    1. Recomendar perfumes de nuestro catlogo basndote en los gustos del usuario (dulce, fresco, para noche, etc).
    2. Informar sobre nuestro servicio de corte y brushing ($19.990) y el recargo a domicilio ($3.000 para Santiago/uoa).
    
    Contexto del Catlogo de Perfumes:
    ${n}

    Contexto de Servicios de Peluquera:
    ${o}

    Reglas:
    - S amable, sofisticado pero cercano.
    - Responde en espaol de Chile.
    - Si te preguntan por un perfume que NO est en la lista, di amablemente que no lo tienes pero sugiere uno similar del catlogo.
    - Mantn las respuestas breves (mximo 3 oraciones).
    - Anima al usuario a reservar o comprar.
  `;try{return(await Ku.models.generateContent({model:"gemini-1.5-flash",contents:[{role:"user",parts:[{text:s+`

 Historial de chat:
`+e.join(`
`)+`

Usuario: `+t}]}]})).text||"Lo siento, no pude procesar tu solicitud."}catch(l){return console.error("Error calling Gemini:",l),"Hubo un error al conectar con el asistente. Por favor intenta ms tarde."}},uk=()=>{const[t,e]=pe.useState(!1),[n,o]=pe.useState([{role:"bot",text:"Hola! Soy tu asistente de estilo. Buscas un perfume especial o tienes dudas sobre el corte a domicilio?"}]),[s,l]=pe.useState(""),[a,f]=pe.useState(!1),p=pe.useRef(null),m=()=>{p.current?.scrollIntoView({behavior:"smooth"})};pe.useEffect(()=>{m()},[n,t]);const g=async()=>{if(!s.trim()||a)return;const _=s;o(A=>[...A,{role:"user",text:_}]),l(""),f(!0);const S=n.map(A=>`${A.role==="user"?"Usuario":"Bot"}: ${A.text}`),x=await ak(_,S);o(A=>[...A,{role:"bot",text:x}]),f(!1)},w=_=>{_.key==="Enter"&&g()};return E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:()=>e(!t),className:`fixed bottom-6 right-6 z-50 p-4 rounded-full shadow-2xl transition-all duration-300 hover:scale-110 flex items-center justify-center ${t?"bg-stone-800 rotate-90":"bg-stone-900 rotate-0"}`,children:t?E.jsx(Xu,{color:"white"}):E.jsx(gu,{color:"white"})}),t&&E.jsxs("div",{className:"fixed bottom-24 right-6 w-80 sm:w-96 bg-white rounded-2xl shadow-2xl border border-stone-200 z-50 flex flex-col overflow-hidden animate-in slide-in-from-bottom-10 fade-in duration-300 h-[500px]",children:[E.jsxs("div",{className:"bg-stone-900 p-4 flex items-center space-x-3",children:[E.jsx("div",{className:"bg-stone-700 p-2 rounded-full",children:E.jsx(gu,{size:16,className:"text-yellow-400"})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-white font-serif font-bold",children:"Asistente Tus3B"}),E.jsx("p",{className:"text-stone-400 text-xs",children:"Te ayudo a elegir tu estilo"})]})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-stone-50",children:[n.map((_,S)=>E.jsx("div",{className:`flex ${_.role==="user"?"justify-end":"justify-start"}`,children:E.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-sm ${_.role==="user"?"bg-stone-800 text-white rounded-br-none":"bg-white text-stone-800 border border-stone-200 rounded-bl-none shadow-sm"}`,children:_.text})},S)),a&&E.jsx("div",{className:"flex justify-start",children:E.jsxs("div",{className:"bg-white p-3 rounded-2xl rounded-bl-none border border-stone-200 shadow-sm flex items-center space-x-2",children:[E.jsx(Ns,{size:16,className:"animate-spin text-stone-400"}),E.jsx("span",{className:"text-xs text-stone-400",children:"Escribiendo..."})]})}),E.jsx("div",{ref:p})]}),E.jsxs("div",{className:"p-3 bg-white border-t border-stone-100 flex items-center gap-2",children:[E.jsx("input",{type:"text",value:s,onChange:_=>l(_.target.value),onKeyDown:w,placeholder:"Pregunta por perfumes o cortes...",className:"flex-1 text-sm border-none focus:ring-0 bg-stone-100 rounded-full px-4 py-2 text-stone-800 placeholder-stone-400"}),E.jsx("button",{onClick:g,disabled:a||!s.trim(),className:"p-2 bg-stone-900 text-white rounded-full hover:bg-stone-700 disabled:opacity-50 transition",children:E.jsx(T_,{size:16})})]})]})]})},ck=({isHomeService:t,onGoHome:e,onGoCatalog:n})=>(pe.useEffect(()=>{window.scrollTo(0,0)},[]),E.jsx("div",{className:"min-h-[70vh] flex items-center justify-center p-4 fade-in",children:E.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-3xl shadow-2xl border border-stone-100 max-w-2xl w-full text-center relative overflow-hidden",children:[E.jsx("div",{className:"absolute -top-20 -right-20 w-64 h-64 bg-green-50 rounded-full opacity-50 blur-3xl pointer-events-none"}),E.jsx("div",{className:"absolute -bottom-20 -left-20 w-64 h-64 bg-amber-50 rounded-full opacity-50 blur-3xl pointer-events-none"}),E.jsxs("div",{className:"relative z-10",children:[E.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 text-green-600 rounded-full mb-6 shadow-sm animate-in zoom-in spin-in-12 duration-700",children:E.jsx(Dm,{size:40,strokeWidth:2.5})}),E.jsx("h2",{className:"serif text-4xl text-stone-900 mb-3",children:"Reserva Confirmada!"}),E.jsx("p",{className:"text-xl text-stone-600 font-light mb-8",children:"Gracias por tu confianza!"}),!t&&E.jsxs("div",{className:"bg-stone-50 p-6 rounded-2xl mb-8 border border-stone-100 transform transition hover:scale-105 duration-300",children:[E.jsxs("h3",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-3 flex items-center justify-center gap-2",children:[E.jsx(Um,{size:14})," Direccin del Servicio"]}),E.jsx("p",{className:"text-xl font-medium text-stone-800",children:"Diagonal Vicua Mackenna 2004"}),E.jsx("p",{className:"text-lg text-stone-600",children:"Torre B, Santiago"})]}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-8",children:[E.jsxs("button",{onClick:e,className:"flex items-center justify-center gap-2 px-8 py-4 bg-stone-100 text-stone-700 rounded-xl font-bold hover:bg-stone-200 transition-colors w-full sm:w-auto",children:[E.jsx(m_,{size:20}),"Regresar al Inicio"]}),E.jsxs("button",{onClick:n,className:"flex items-center justify-center gap-2 px-8 py-4 bg-stone-900 text-white rounded-xl font-bold hover:bg-stone-800 transition-transform hover:-translate-y-1 shadow-lg w-full sm:w-auto",children:[E.jsx(Ws,{size:20}),E.jsxs("span",{children:["Venta de Perfumes ",E.jsx("span",{className:"block text-[10px] font-normal opacity-80 leading-none mt-0.5",children:"Formatos 5ml y 10ml"})]})]})]})]})]})})),dk=()=>E.jsx("section",{className:"py-24 bg-white",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"text-center mb-16",children:[E.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Testimonios"}),E.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Lo que dicen nuestras clientas"})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:L_.map(t=>E.jsxs("div",{className:"bg-stone-50 p-8 rounded-sm hover:shadow-lg transition-shadow duration-300 relative",children:[E.jsx(E_,{className:"absolute top-6 right-6 text-stone-200",size:40}),E.jsx("div",{className:"flex space-x-1 mb-4 text-amber-500",children:[...Array(5)].map((e,n)=>E.jsx(Vm,{size:16,fill:n<t.rating?"currentColor":"none",className:n<t.rating?"text-amber-500":"text-stone-300"},n))}),E.jsxs("p",{className:"text-stone-600 italic mb-6 leading-relaxed relative z-10",children:['"',t.comment,'"']}),E.jsxs("div",{className:"flex justify-between items-end border-t border-stone-200 pt-4",children:[E.jsxs("div",{children:[E.jsx("h4",{className:"font-bold text-stone-900",children:t.name}),E.jsx("span",{className:"text-xs text-stone-400 font-medium",children:"Cliente Verificado"})]}),E.jsx("span",{className:"text-xs text-stone-400",children:t.date})]})]},t.id))})]})}),fk=()=>{const[t,e]=pe.useState(""),[n,o]=pe.useState(!1),[s,l]=pe.useState(null),a=async f=>{if(f.preventDefault(),!(t.length<8)){o(!0);try{const{data:p,error:m}=await dn.from("clients").select("*").eq("phone",t).single();if(m&&m.code!=="PGRST116"){console.error("Error fetching loyalty:",m),alert("Hubo un error al consultar. Intenta de nuevo."),o(!1);return}l(p?{visits:p.visits,referrals:p.referrals,nextReward:5}:{visits:0,referrals:0,nextReward:5})}catch(p){console.error("Unexpected error:",p),alert("Error de conexin.")}finally{o(!1)}}};return E.jsxs("div",{className:"bg-gradient-to-br from-stone-900 to-stone-800 rounded-3xl p-8 text-white relative overflow-hidden shadow-2xl",children:[E.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-purple-500 rounded-full blur-[60px] opacity-30"}),E.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-amber-500 rounded-full blur-[60px] opacity-30"}),E.jsxs("div",{className:"relative z-10 text-center",children:[E.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-2xl mb-6 backdrop-blur-sm border border-white/10",children:E.jsx(Lm,{size:32,className:"text-amber-400"})}),E.jsx("h3",{className:"serif text-3xl mb-2",children:"Club Fidelidad"}),E.jsx("p",{className:"text-stone-300 font-light mb-8 max-w-sm mx-auto",children:"Tu preferencia tiene recompensas. Acumula visitas y gana descuentos exclusivos."}),s?E.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-500",children:[E.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[E.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 border border-white/5",children:[E.jsx("span",{className:"block text-3xl font-bold text-amber-400 mb-1",children:s.visits}),E.jsx("span",{className:"text-xs uppercase tracking-widest text-stone-400 font-bold",children:"Visitas"})]}),E.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 border border-white/5",children:[E.jsx("span",{className:"block text-3xl font-bold text-purple-400 mb-1",children:s.referrals}),E.jsx("span",{className:"text-xs uppercase tracking-widest text-stone-400 font-bold",children:"Referidos"})]})]}),E.jsx("div",{className:"bg-white/5 rounded-full h-4 mb-2 overflow-hidden relative",children:E.jsx("div",{className:"absolute left-0 top-0 bottom-0 bg-gradient-to-r from-amber-400 to-amber-600 transition-all duration-1000 ease-out",style:{width:`${s.visits/5*100}%`}})}),E.jsx("p",{className:"text-sm text-stone-300 mb-6",children:s.visits>=5?"Felicidades! Tienes un descuento disponible para tu prxima cita.":`Te faltan ${5-s.visits} visitas para tu recompensa.`}),E.jsx("button",{onClick:()=>l(null),className:"text-sm text-stone-400 hover:text-white underline decoration-stone-600 underline-offset-4",children:"Consultar otro nmero"})]}):E.jsxs("form",{onSubmit:a,className:"max-w-xs mx-auto",children:[E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"tel",value:t,onChange:f=>e(f.target.value),placeholder:"Ingresa tu telfono...",className:"w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 pl-10 text-white placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-amber-400 transition"}),E.jsx($m,{size:18,className:"absolute left-3 top-3.5 text-stone-400"})]}),E.jsx("button",{type:"submit",disabled:n||t.length<8,className:"w-full mt-4 bg-white text-stone-900 font-bold py-3 rounded-xl hover:bg-amber-50 transition flex justify-center items-center disabled:opacity-50 disabled:cursor-not-allowed",children:n?E.jsx(Ns,{className:"animate-spin"}):"Consultar Puntos"})]}),E.jsxs("div",{className:"mt-8 pt-8 border-t border-white/10 text-left space-y-3",children:[E.jsxs("div",{className:"flex items-start gap-4",children:[E.jsx("div",{className:"bg-amber-500/20 p-2 rounded-lg text-amber-400 mt-1",children:E.jsx(Vm,{size:16})}),E.jsxs("div",{children:[E.jsx("h4",{className:"font-bold text-white text-sm",children:"5ta Visita con Descuento"}),E.jsx("p",{className:"text-xs text-stone-400 mt-0.5",children:"Completa 4 visitas y la 5ta tiene un precio especial."})]})]}),E.jsxs("div",{className:"flex items-start gap-4",children:[E.jsx("div",{className:"bg-purple-500/20 p-2 rounded-lg text-purple-400 mt-1",children:E.jsx(I_,{size:16})}),E.jsxs("div",{children:[E.jsx("h4",{className:"font-bold text-white text-sm",children:"Programa de Referidos"}),E.jsx("p",{className:"text-xs text-stone-400 mt-0.5",children:"Dile a tus amigas que indiquen tu nmero al agendar."})]})]})]})]})]})},hk=()=>{const[t,e]=pe.useState(!1),[n,o]=pe.useState(""),[s,l]=pe.useState(""),[a,f]=pe.useState(""),p=g=>{g.preventDefault(),n==="admin2026"?e(!0):alert("Contrasea incorrecta")},m=async()=>{if(!(s.length<8))try{const{data:g,error:w}=await dn.from("clients").select("*").eq("phone",s).single();if(w&&w.code!=="PGRST116"){alert("Error al buscar cliente");return}const S=(g?g.visits:0)+1,{error:x}=await dn.from("clients").upsert({phone:s,visits:S,last_visit:new Date().toISOString()},{onConflict:"phone"});if(x){console.error(x),alert("Error al actualizar visita");return}f(`Visita registrada para ${s}. Total visitas: ${S}`),l(""),setTimeout(()=>f(""),3e3)}catch(g){console.error(g),alert("Error de conexin")}};return t?E.jsxs("div",{className:"max-w-2xl mx-auto p-4 py-12",children:[E.jsx("h2",{className:"text-3xl serif text-stone-900 mb-8 border-b pb-4",children:"Panel de Control"}),E.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 mb-8",children:[E.jsxs("h3",{className:"text-xl font-bold text-stone-900 mb-4 flex items-center gap-2",children:[E.jsx(w_,{className:"text-green-600"}),"Registrar Visita Manual"]}),E.jsx("p",{className:"text-sm text-stone-500 mb-6",children:"Usa esto para clientes que agendaron por WhatsApp o en persona."}),E.jsxs("div",{className:"flex gap-4",children:[E.jsx("input",{type:"tel",value:s,onChange:g=>l(g.target.value),placeholder:"+569...",className:"flex-1 px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-green-600 outline-none"}),E.jsxs("button",{onClick:m,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition flex items-center gap-2",children:[E.jsx(S_,{size:18}),"Registrar"]})]}),a&&E.jsx("div",{className:"mt-4 p-3 bg-green-50 text-green-800 rounded-lg text-sm font-medium animate-in fade-in",children:a})]}),E.jsxs("div",{className:"bg-stone-50 p-6 rounded-2xl border border-stone-200",children:[E.jsx("h3",{className:"text-lg font-bold text-stone-700 mb-2",children:"Estadsticas Rpidas"}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm",children:[E.jsx("span",{className:"block text-2xl font-bold text-stone-900",children:"12"}),E.jsx("span",{className:"text-xs text-stone-500 uppercase",children:"Visitas Hoy"})]}),E.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm",children:[E.jsx("span",{className:"block text-2xl font-bold text-purple-600",children:"3"}),E.jsx("span",{className:"text-xs text-stone-500 uppercase",children:"Nuevos Referidos"})]})]})]})]}):E.jsx("div",{className:"flex flex-col items-center justify-center min-h-[50vh] bg-stone-50 p-4",children:E.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-stone-100 max-w-sm w-full text-center",children:[E.jsx(C_,{className:"w-12 h-12 text-stone-900 mx-auto mb-4"}),E.jsx("h2",{className:"text-xl font-bold text-stone-900 mb-6",children:"Acceso Administrativo"}),E.jsxs("form",{onSubmit:p,className:"space-y-4",children:[E.jsx("input",{type:"password",value:n,onChange:g=>o(g.target.value),placeholder:"Contrasea",className:"w-full px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-stone-900 outline-none"}),E.jsx("button",{type:"submit",className:"w-full bg-stone-900 text-white py-3 rounded-lg font-bold",children:"Ingresar"})]})]})})},pk=()=>{const[t,e]=pe.useState("Todos"),[n,o]=pe.useState(null),s=["Todos","Cortes","Color","Peinados"],l=t==="Todos"?Sh:Sh.filter(a=>a.category===t);return E.jsxs("div",{className:"animate-in fade-in duration-700",children:[E.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:s.map(a=>E.jsx("button",{onClick:()=>e(a),className:`px-6 py-2 rounded-full text-sm font-bold uppercase tracking-widest transition-all ${t===a?"bg-stone-900 text-white shadow-lg scale-105":"bg-stone-100 text-stone-500 hover:bg-stone-200"}`,children:a},a))}),E.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-8 space-y-8 px-4",children:l.map((a,f)=>E.jsxs("div",{className:"break-inside-avoid relative group cursor-zoom-in overflow-hidden rounded-xl shadow-md bg-stone-100",onClick:()=>o(a.url),children:[E.jsx("img",{src:a.url,alt:a.description,className:"w-full h-auto object-cover transform transition duration-700 group-hover:scale-110",loading:"lazy"}),E.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:E.jsxs("div",{className:"text-white text-center p-4 transform translate-y-4 group-hover:translate-y-0 transition duration-300",children:[E.jsx(k_,{className:"mx-auto mb-2 opacity-80"}),E.jsx("p",{className:"font-serif italic text-lg",children:a.description})]})})]},f))}),n&&E.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:()=>o(null),children:[E.jsx("button",{className:"absolute top-6 right-6 text-white/50 hover:text-white transition",onClick:()=>o(null),children:E.jsx(Xu,{size:32})}),E.jsx("img",{src:n,alt:"Zoom",className:"max-w-full max-h-[90vh] object-contain rounded-sm shadow-2xl scale-in-95 animate-in duration-300"})]})]})},mk=()=>{const[t,e]=pe.useState(Ae.HOME),[n,o]=pe.useState(null),s=()=>{switch(t){case Ae.ADMIN:return E.jsx(hk,{});case Ae.GALLERY:return E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[E.jsxs("div",{className:"text-center mb-16",children:[E.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Nuestro Arte"}),E.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Galera de Trabajos"}),E.jsx("p",{className:"text-stone-500 mt-4 max-w-2xl mx-auto",children:"Resultados reales de clientas felices. Insprate para tu prximo cambio de look."})]}),E.jsx(pk,{})]});case Ae.LOYALTY:return E.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 min-h-[60vh] flex flex-col justify-center items-center",children:E.jsx(fk,{})});case Ae.BOOKING:return E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[E.jsxs("div",{className:"text-center mb-16",children:[E.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Reserva tu momento"}),E.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Agenda tu Cita"})]}),E.jsx(JE,{onSuccess:l=>{o(l),e(Ae.CONFIRMATION)}})]});case Ae.CONFIRMATION:return E.jsx(ck,{isHomeService:n?.isHomeService||!1,onGoHome:()=>e(Ae.HOME),onGoCatalog:()=>e(Ae.CATALOG)});case Ae.CATALOG:return E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[E.jsxs("div",{className:"text-center mb-16",children:[E.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Aromas Exclusivos"}),E.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Nuestra Coleccin"})]}),E.jsx(WE,{})]});case Ae.HOME:default:return E.jsxs(E.Fragment,{children:[E.jsx(P_,{onCtaClick:()=>e(Ae.BOOKING)}),E.jsx("section",{className:"py-24 bg-white",children:E.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[E.jsx("div",{children:E.jsx("img",{src:"/images/gallery/work_1.png",alt:"Hair Styling",className:"rounded-sm shadow-xl",onError:l=>{l.target.src="https://images.unsplash.com/photo-1560869713-7d0a29430803?auto=format&fit=crop&q=80&w=800"}})}),E.jsxs("div",{className:"space-y-6",children:[E.jsx("h3",{className:"serif text-4xl text-stone-900",children:"Corte, Color & Styling"}),E.jsx("p",{className:"text-stone-600 font-light text-lg leading-relaxed",children:"Desde cortes de puntas esenciales hasta cambios de look completos con coloracin. Descubre nuestros nuevos servicios de verano 2026."}),E.jsxs("div",{className:"flex items-center space-x-4 pt-2",children:[E.jsx("button",{onClick:()=>e(Ae.GALLERY),className:"px-6 py-2 bg-stone-100 text-stone-900 rounded-full font-bold text-sm hover:bg-stone-200 transition",children:"Ver Galera"}),E.jsxs("div",{className:"flex items-center space-x-2 text-stone-900 font-medium",children:[E.jsx(Fm,{size:20}),E.jsx("span",{children:"Desde $7.000"})]})]})]})]})})}),E.jsxs("section",{className:"py-16 bg-stone-900 text-white relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-amber-500 rounded-full blur-[100px] opacity-20 transform translate-x-1/2 -translate-y-1/2"}),E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10",children:[E.jsx(Lm,{className:"mx-auto text-amber-400 mb-4 h-12 w-12"}),E.jsx("h2",{className:"serif text-3xl md:text-4xl mb-4",children:"Ya eres Clienta?"}),E.jsx("p",{className:"text-stone-300 max-w-lg mx-auto mb-8",children:"Revisa tus puntos acumulados y descubre cunto te falta para tu **Descuento de la 5ta Visita**."}),E.jsx("button",{onClick:()=>e(Ae.LOYALTY),className:"bg-white text-stone-900 px-8 py-3 rounded-full font-bold hover:bg-amber-50 transition shadow-lg",children:"Revisar mis Puntos"})]})]}),E.jsx("section",{className:"py-24 bg-stone-50",children:E.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center flex-row-reverse",children:[E.jsxs("div",{className:"order-2 md:order-1 space-y-6",children:[E.jsxs("h3",{className:"serif text-4xl text-stone-900",children:["Alta Perfumera ",E.jsx("br",{})," en Decants"]}),E.jsx("p",{className:"text-stone-600 font-light text-lg leading-relaxed",children:"Accede a las fragancias ms deseadas del mundo en formatos de 5 y 10 ml. La forma inteligente de coleccionar aromas y descubrir tu nueva firma olfativa."}),E.jsxs("div",{className:"flex items-center space-x-2 text-stone-900 font-medium pt-2",children:[E.jsx(Ws,{size:20}),E.jsx("span",{children:"100% Originales"})]}),E.jsxs("button",{onClick:()=>e(Ae.CATALOG),className:"inline-flex items-center text-stone-900 border-b border-stone-900 pb-1 hover:text-stone-600 hover:border-stone-600 transition mt-4",children:["Explorar Catlogo ",E.jsx(d_,{size:16,className:"ml-2"})]})]}),E.jsx("div",{className:"order-1 md:order-2",children:E.jsx("img",{src:"https://images.unsplash.com/photo-1615634260167-c8cdede054de?auto=format&fit=crop&q=80&w=800",alt:"Perfumes",className:"rounded-sm shadow-xl"})})]})})}),E.jsx(dk,{}),E.jsx("div",{className:"bg-white py-4 text-center",children:E.jsxs("button",{onClick:()=>e(Ae.ADMIN),className:"text-[10px] text-stone-300 hover:text-stone-500 flex items-center justify-center gap-1 mx-auto transition",children:[E.jsx(x_,{size:10})," Admin"]})})]})}};return E.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[E.jsx(N_,{currentView:t,onChangeView:e}),E.jsx("main",{className:"flex-grow pt-16 md:pt-0",children:s()}),E.jsx(jE,{}),E.jsx(uk,{})]})};console.log("Iniciando aplicacin React...");const Zv=document.getElementById("root");if(!Zv)throw new Error("Could not find root element to mount to");try{l_.createRoot(Zv).render(E.jsx(e_.StrictMode,{children:E.jsx(mk,{})})),console.log("Aplicacin montada correctamente.")}catch(t){console.error("Error al montar la aplicacin:",t);const e=document.getElementById("app-error");e&&(e.style.display="block",e.innerHTML="Error crtico al iniciar React: "+t.message)}
