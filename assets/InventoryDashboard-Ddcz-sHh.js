import{c as x,r,s as y,j as e,C as le,S as K,X as V,P as ce,H as q}from"./index-DvOGGKQd.js";const R=x("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ie=x("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),de=x("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),xe=x("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ue=x("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),T=x("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),he=x("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),me=x("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),W=x("PackageMinus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),X=x("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),S=x("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),je=({onLogout:z})=>{const[u,c]=r.useState("scan"),[v,M]=r.useState(""),[o,N]=r.useState(null),[w,h]=r.useState(!1),[be,ge]=r.useState(1),[k,m]=r.useState(null),[p,Z]=r.useState([]),[i,F]=r.useState("in"),[l,j]=r.useState(1),[b,Q]=r.useState(""),[H,P]=r.useState(!1),[_,$]=r.useState(null),[n,g]=r.useState({category:"perfume",gender:"unisex",cost_price:0,sale_price:0,stock:0}),D=r.useRef(null),d=r.useRef(null),L=r.useRef(!1),[I,G]=r.useState(!1);r.useEffect(()=>()=>{d.current&&d.current.isScanning&&d.current.stop().catch(t=>console.error(t))},[]),r.useEffect(()=>{u==="list"&&E()},[u]);const E=async()=>{h(!0);try{const{data:t,error:s}=await y.from("products").select("*").order("name",{ascending:!0});if(s)throw s;Z(t||[])}catch(t){console.error("Error fetching inventory",t)}finally{h(!1)}},B=async()=>{$(null);try{d.current||(d.current=new q("reader"));const t=await q.getCameras();if(t&&t.length){const s=t.length>1?t[1].id:t[0].id;await d.current.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},a=>{Y(a)},a=>{}),P(!0)}else $("No se encontraron cámaras.")}catch(t){console.error(t),$("Error al iniciar cámara: "+t.message),P(!1)}},J=async()=>{if(d.current&&H)try{await d.current.stop(),P(!1)}catch(t){console.error("Failed to stop scanner",t)}},Y=async t=>{L.current||(L.current=!0,await J(),await C(t),setTimeout(()=>{L.current=!1},1e3))},ee=t=>{if(t.target.files&&t.target.files.length>0){const s=t.target.files[0];d.current||(d.current=new q("reader")),d.current.scanFile(s,!0).then(a=>{C(a)}).catch(a=>{m({type:"error",text:"No se pudo leer el código de la imagen."})})}},C=async t=>{if(t.trim()){h(!0),m(null),M(t);try{let{data:s,error:a}=await y.from("products").select("*").eq("barcode",t).single();if(a&&a.code==="PGRST116"){const{data:f,error:A}=await y.from("products").select("*").ilike("name",`%${t}%`).limit(1).single();!A&&f&&(s=f,a=null)}if(a&&a.code!=="PGRST116")throw a;s?(N(s),c("product_details")):(N(null),g(f=>({...f,barcode:t,name:"",stock:0})),c("new_product"))}catch(s){m({type:"error",text:s.message})}finally{h(!1)}}},te=t=>{N(t),M(t.barcode||""),j(1),c("product_details")},O=b?p.filter(t=>t.name.toLowerCase().includes(b.toLowerCase())||t.barcode&&t.barcode.includes(b)):p,se=async t=>{if(t.preventDefault(),t.stopPropagation(),!I){G(!0),h(!0);try{if(!n.name||!n.sale_price)throw new Error("Faltan datos obligatorios");const{data:s,error:a}=await y.from("products").insert([n]).select().single();if(a)throw a;N(s),c("product_details"),m({type:"success",text:"Producto registrado correctamente"})}catch(s){m({type:"error",text:s.message})}finally{h(!1),G(!1)}}},ne=async()=>{if(o){h(!0);try{const t=i==="in"?l:-l,s=o.stock+t;if(s<0)throw new Error("Stock insuficiente para esta operación");const{error:a}=await y.from("products").update({stock:s}).eq("id",o.id);if(a)throw a;const{error:f}=await y.from("inventory_logs").insert({product_id:o.id,quantity_change:t,reason:i==="in"?"Ingreso de mercadería":"Venta registrada",previous_stock:o.stock,new_stock:s});f&&console.warn("Could not log inventory change:",f);const A=i==="in"?`+${l} unidades ingresadas`:`-${l} unidades vendidas`;m({type:"success",text:`${A}. Stock actualizado: ${s}`}),N({...o,stock:s}),j(1),setTimeout(()=>{m(null)},3e3)}catch(t){m({type:"error",text:t.message})}finally{h(!1)}}},U=n.sale_price&&n.cost_price?((n.sale_price-n.cost_price)/n.sale_price*100).toFixed(1):"0.0",re=p.reduce((t,s)=>t+(s.stock||0),0),ae=p.reduce((t,s)=>t+(s.stock||0)*(s.cost_price||0),0),oe=p.reduce((t,s)=>t+(s.stock||0)*(s.sale_price||0),0);return e.jsxs("div",{className:"min-h-screen bg-stone-100 pb-40",children:[e.jsxs("div",{className:"bg-stone-900 text-white p-4 flex justify-between items-center shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[u!=="scan"?e.jsx("button",{onClick:()=>c("scan"),className:"bg-stone-800 p-2 rounded-full hover:bg-stone-700 transition",children:e.jsx(de,{size:20,className:"text-white"})}):e.jsx("div",{className:"bg-amber-500/20 p-2 rounded-lg",children:e.jsx(S,{className:"text-amber-500",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg leading-none",children:"Inventario"}),e.jsx("p",{className:"text-[10px] text-stone-400",children:"Scanner & Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u!=="list"&&e.jsx("button",{onClick:()=>c("list"),className:"text-stone-400 hover:text-white p-2",children:e.jsx(T,{size:24})}),e.jsx("button",{onClick:z,className:"text-stone-400 hover:text-white p-2",children:e.jsx(he,{size:20})})]})]}),e.jsxs("div",{className:"max-w-md mx-auto p-4 space-y-4",children:[k&&e.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-3 ${k.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[k.type==="success"?e.jsx(le,{size:20}):e.jsx(R,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:k.text})]}),u==="scan"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex rounded-xl overflow-hidden border border-stone-200 bg-white",children:[e.jsxs("button",{onClick:()=>c("scan"),className:"flex-1 py-3 px-4 flex items-center justify-center gap-2 font-bold bg-stone-900 text-white",children:[e.jsx(S,{size:18}),"Escanear"]}),e.jsxs("button",{onClick:()=>{c("list"),E()},className:"flex-1 py-3 px-4 flex items-center justify-center gap-2 font-bold bg-white text-stone-600 hover:bg-stone-50 transition",children:[e.jsx(T,{size:18}),"Listado (",p.length,")"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-lg border border-stone-200 text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(S,{size:32,className:"text-stone-400"})}),e.jsx("h2",{className:"text-xl font-bold text-stone-800",children:"Escanear Producto"}),e.jsxs("div",{className:"relative overflow-hidden rounded-xl border-2 border-dashed border-stone-300 bg-black min-h-[300px] flex flex-col justify-center",children:[e.jsx("div",{id:"reader",className:"w-full h-full"}),!H&&!_&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-stone-300/10 backdrop-blur-sm z-10",children:[e.jsxs("button",{onClick:B,className:"bg-amber-500 hover:bg-amber-600 text-white px-8 py-3 rounded-full font-bold shadow-lg flex items-center gap-2 transition transform hover:scale-105",children:[e.jsx(xe,{size:20})," Activar Cámara"]}),e.jsx("p",{className:"mt-4 text-xs text-white bg-black/50 px-3 py-1 rounded-full",children:"Permite el acceso a tu cámara"})]}),_&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50 p-4 z-10",children:[e.jsx(R,{className:"text-red-500 w-12 h-12 mb-2"}),e.jsx("p",{className:"text-red-600 text-center text-sm font-bold",children:_}),e.jsx("button",{onClick:B,className:"mt-4 text-stone-600 underline text-sm",children:"Intentar de nuevo"})]})]}),e.jsxs("div",{className:"flex justify-center",children:[e.jsx("input",{type:"file",ref:D,className:"hidden",accept:"image/*",onChange:ee}),e.jsxs("button",{onClick:()=>D.current?.click(),className:"text-stone-400 text-xs flex items-center gap-1 hover:text-stone-600 transition",children:[e.jsx(ue,{size:14})," ¿Problemas con la cámara? ",e.jsx("span",{className:"underline",children:"Subir una foto del código"})]})]}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-stone-200"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-white px-2 text-stone-400",children:"O ingresar manual"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Código o nombre del producto...",value:v,onChange:t=>M(t.target.value),className:"flex-1 bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 text-center font-medium outline-none focus:ring-2 focus:ring-black",onKeyDown:t=>t.key==="Enter"&&C(v)}),e.jsx("button",{onClick:()=>C(v),disabled:w||!v.trim(),className:"bg-stone-900 text-white p-3 rounded-xl hover:bg-black transition disabled:opacity-50",children:e.jsx(K,{size:24})})]}),e.jsx("p",{className:"text-xs text-stone-400",children:"Busca por código de barras o nombre del producto"})]})]}),u==="new_product"&&e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-amber-500 p-6 text-white text-center relative",children:[e.jsx("button",{onClick:()=>c("scan"),className:"absolute left-4 top-4 p-2 bg-black/10 rounded-full hover:bg-black/20 transition",children:e.jsx(V,{size:20})}),e.jsx(pe,{className:"mx-auto w-12 h-12 mb-2 text-white/90"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Nuevo Producto"}),e.jsxs("p",{className:"text-amber-100 text-sm",children:["Código: ",v]})]}),e.jsxs("form",{onSubmit:se,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Nombre Producto"}),e.jsx("input",{className:"w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 font-medium outline-none focus:border-amber-500",value:n.name||"",onChange:t=>g({...n,name:t.target.value}),placeholder:"Ej: Lattafa Asad 100ml",required:!0,autoComplete:"off"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Categoría"}),e.jsxs("select",{className:"w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 outline-none",value:n.category,onChange:t=>g({...n,category:t.target.value}),children:[e.jsx("option",{value:"perfume",children:"Perfume"}),e.jsx("option",{value:"desodorante",children:"Desodorante"}),e.jsx("option",{value:"capilar",children:"Capilar"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Stock Inicial"}),e.jsx("input",{type:"number",className:"w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 outline-none font-bold text-stone-800",value:n.stock||0,onChange:t=>g({...n,stock:Number(t.target.value)}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Costo ($)"}),e.jsx("input",{type:"number",className:"w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 outline-none",value:n.cost_price||"",onChange:t=>g({...n,cost_price:Number(t.target.value)}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Venta ($)"}),e.jsx("input",{type:"number",className:"w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 outline-none font-bold text-stone-800",value:n.sale_price||"",onChange:t=>g({...n,sale_price:Number(t.target.value)}),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Género"}),e.jsxs("select",{className:"w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 outline-none",value:n.gender,onChange:t=>g({...n,gender:t.target.value}),children:[e.jsx("option",{value:"unisex",children:"Unisex"}),e.jsx("option",{value:"hombre",children:"Hombre"}),e.jsx("option",{value:"mujer",children:"Mujer"})]})]}),e.jsxs("div",{className:"bg-stone-50 p-4 rounded-xl flex justify-between items-center border border-stone-100",children:[e.jsx("span",{className:"text-xs font-bold text-stone-500 uppercase",children:"Margen Calculado"}),e.jsxs("span",{className:`font-bold text-lg ${Number(U)>30?"text-green-600":"text-orange-500"}`,children:[U,"%"]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",disabled:w||I,className:"w-full bg-stone-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-black transition shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:w||I?"Guardando...":"Guardar Producto"})})]})]}),u==="product_details"&&o&&e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"h-40 bg-stone-900 relative",children:[e.jsx("button",{onClick:()=>c("scan"),className:"absolute left-4 top-4 p-2 bg-white/10 rounded-full hover:bg-white/20 text-white transition",children:e.jsx(V,{size:20})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(ie,{size:64,className:"text-stone-700"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/80 to-transparent text-white",children:[e.jsx("span",{className:"inline-block px-2 py-1 bg-amber-500 text-[10px] font-bold uppercase rounded mb-2 text-black",children:o.category}),e.jsx("h2",{className:"text-2xl font-bold leading-tight",children:o.name})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-stone-50 p-4 rounded-xl border border-stone-100",children:[e.jsx("div",{className:"text-xs text-stone-400 uppercase font-bold mb-1",children:"Precio"}),e.jsxs("div",{className:"text-xl font-bold text-stone-900",children:["$",o.sale_price.toLocaleString()]})]}),e.jsxs("div",{className:"bg-stone-50 p-4 rounded-xl border border-stone-100",children:[e.jsx("div",{className:"text-xs text-stone-400 uppercase font-bold mb-1",children:"Stock Actual"}),e.jsxs("div",{className:`text-xl font-bold ${o.stock>0?"text-green-600":"text-red-600"}`,children:[o.stock," unidades"]})]})]}),e.jsxs("div",{className:"border-t border-stone-100 pt-6",children:[e.jsxs("div",{className:"flex rounded-xl overflow-hidden border border-stone-200 mb-4",children:[e.jsxs("button",{onClick:()=>F("in"),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 font-bold transition ${i==="in"?"bg-green-600 text-white":"bg-stone-50 text-stone-600 hover:bg-stone-100"}`,children:[e.jsx(X,{size:18}),"Ingresar"]}),e.jsxs("button",{onClick:()=>F("out"),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 font-bold transition ${i==="out"?"bg-red-600 text-white":"bg-stone-50 text-stone-600 hover:bg-stone-100"}`,children:[e.jsx(W,{size:18}),"Vender"]})]}),e.jsx("h3",{className:"font-bold text-stone-800 mb-4 flex items-center gap-2",children:i==="in"?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:18,className:"text-green-600"})," Ingresar Mercadería"]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{size:18,className:"text-red-600"})," Registrar Venta"]})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>j(Math.max(1,l-1)),className:"w-12 h-12 rounded-xl border-2 border-stone-200 flex items-center justify-center hover:bg-stone-50 text-xl font-bold",children:e.jsx(me,{size:20})}),e.jsx("input",{type:"number",value:l,onChange:t=>j(Math.max(1,parseInt(t.target.value)||1)),className:"w-20 h-12 text-center text-2xl font-bold border-2 border-stone-200 rounded-xl outline-none focus:border-amber-500",min:"1"}),e.jsx("button",{onClick:()=>j(l+1),className:"w-12 h-12 rounded-xl border-2 border-stone-200 flex items-center justify-center hover:bg-stone-50 text-xl font-bold",children:e.jsx(ce,{size:20})})]}),e.jsx("div",{className:"flex justify-center gap-2 mb-4",children:[1,5,10,20].map(t=>e.jsx("button",{onClick:()=>j(t),className:`px-3 py-1 rounded-lg text-sm font-medium transition ${l===t?"bg-stone-900 text-white":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,children:t},t))}),e.jsx("button",{onClick:ne,disabled:w||i==="out"&&l>o.stock,className:`w-full py-4 rounded-xl font-bold text-lg transition shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${i==="in"?"bg-green-600 text-white hover:bg-green-700 shadow-green-200":"bg-red-600 text-white hover:bg-red-700 shadow-red-200"}`,children:w?"Procesando...":i==="in"?`Ingresar +${l} unidades`:`Registrar Venta -${l} ($${(o.sale_price*l).toLocaleString()})`}),i==="out"&&l>o.stock&&e.jsxs("p",{className:"text-xs text-red-500 text-center mt-2 flex items-center justify-center gap-1",children:[e.jsx(R,{size:12})," Stock insuficiente"]}),e.jsx("p",{className:"text-xs text-stone-400 text-center mt-3",children:i==="in"?"El stock se actualizará automáticamente al confirmar.":`Stock después de venta: ${o.stock-l}`})]})]})]}),u==="list"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex rounded-xl overflow-hidden border border-stone-200 bg-white",children:[e.jsxs("button",{onClick:()=>c("scan"),className:"flex-1 py-3 px-4 flex items-center justify-center gap-2 font-bold bg-white text-stone-600 hover:bg-stone-50 transition",children:[e.jsx(S,{size:18}),"Escanear"]}),e.jsxs("button",{onClick:()=>{c("list"),E()},className:"flex-1 py-3 px-4 flex items-center justify-center gap-2 font-bold bg-stone-900 text-white",children:[e.jsx(T,{size:18}),"Listado (",p.length,")"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-stone-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o código...",value:b,onChange:t=>Q(t.target.value),className:"w-full bg-white border border-stone-200 rounded-xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-black shadow-sm"}),b&&e.jsx("button",{onClick:()=>Q(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-stone-400 hover:text-stone-600",children:e.jsx(V,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-sm border border-stone-100 text-center",children:[e.jsx("div",{className:"text-[10px] text-stone-400 uppercase font-bold",children:"Unidades"}),e.jsx("div",{className:"text-lg font-bold text-stone-900",children:re})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-sm border border-stone-100 text-center",children:[e.jsx("div",{className:"text-[10px] text-stone-400 uppercase font-bold",children:"Costo"}),e.jsxs("div",{className:"text-lg font-bold text-stone-900",children:["$",ae.toLocaleString()]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-sm border border-stone-100 text-center",children:[e.jsx("div",{className:"text-[10px] text-stone-400 uppercase font-bold",children:"Venta"}),e.jsxs("div",{className:"text-lg font-bold text-stone-900",children:["$",oe.toLocaleString()]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-stone-100",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-stone-50 text-stone-500 font-bold uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Precio"})]})}),e.jsxs("tbody",{className:"divide-y divide-stone-100",children:[O.map(t=>e.jsxs("tr",{className:"hover:bg-amber-50 cursor-pointer transition",onClick:()=>te(t),children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-bold text-stone-800",children:t.name}),e.jsx("div",{className:"text-[10px] text-stone-400",children:t.barcode||"Sin código"})]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-bold ${t.stock>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.stock})}),e.jsxs("td",{className:"px-4 py-3 text-right font-medium",children:["$",t.sale_price.toLocaleString()]})]},t.id)),O.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-stone-400",children:b?`No se encontraron productos para "${b}"`:"No hay productos registrados"})})]})]})})]})]})]})},pe=({className:z})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:z,children:[e.jsx("path",{d:"M16.5 9.4 7.5 4.21"}),e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("polyline",{points:"3.29 7 12 12 20.71 7"}),e.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"12"})]});export{je as default};
