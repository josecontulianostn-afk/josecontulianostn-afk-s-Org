function Zv(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function da(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ed(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Tg={exports:{}},ju={},kg={exports:{}},It={};var sE;function h8(){if(sE)return It;sE=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function S(J){return J===null||typeof J!="object"?null:(J=b&&J[b]||J["@@iterator"],typeof J=="function"?J:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,I={};function P(J,de,$e){this.props=J,this.context=de,this.refs=I,this.updater=$e||A}P.prototype.isReactComponent={},P.prototype.setState=function(J,de){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,de,"setState")},P.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function M(){}M.prototype=P.prototype;function L(J,de,$e){this.props=J,this.context=de,this.refs=I,this.updater=$e||A}var R=L.prototype=new M;R.constructor=L,O(R,P.prototype),R.isPureReactComponent=!0;var U=Array.isArray,W=Object.prototype.hasOwnProperty,V={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function X(J,de,$e){var Ue,Xe={},Z=null,_e=null;if(de!=null)for(Ue in de.ref!==void 0&&(_e=de.ref),de.key!==void 0&&(Z=""+de.key),de)W.call(de,Ue)&&!H.hasOwnProperty(Ue)&&(Xe[Ue]=de[Ue]);var fe=arguments.length-2;if(fe===1)Xe.children=$e;else if(1<fe){for(var ae=Array(fe),je=0;je<fe;je++)ae[je]=arguments[je+2];Xe.children=ae}if(J&&J.defaultProps)for(Ue in fe=J.defaultProps,fe)Xe[Ue]===void 0&&(Xe[Ue]=fe[Ue]);return{$$typeof:e,type:J,key:Z,ref:_e,props:Xe,_owner:V.current}}function Y(J,de){return{$$typeof:e,type:J.type,key:de,ref:J.ref,props:J.props,_owner:J._owner}}function we(J){return typeof J=="object"&&J!==null&&J.$$typeof===e}function se(J){var de={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function($e){return de[$e]})}var ie=/\/+/g;function be(J,de){return typeof J=="object"&&J!==null&&J.key!=null?se(""+J.key):de.toString(36)}function Ce(J,de,$e,Ue,Xe){var Z=typeof J;(Z==="undefined"||Z==="boolean")&&(J=null);var _e=!1;if(J===null)_e=!0;else switch(Z){case"string":case"number":_e=!0;break;case"object":switch(J.$$typeof){case e:case t:_e=!0}}if(_e)return _e=J,Xe=Xe(_e),J=Ue===""?"."+be(_e,0):Ue,U(Xe)?($e="",J!=null&&($e=J.replace(ie,"$&/")+"/"),Ce(Xe,de,$e,"",function(je){return je})):Xe!=null&&(we(Xe)&&(Xe=Y(Xe,$e+(!Xe.key||_e&&_e.key===Xe.key?"":(""+Xe.key).replace(ie,"$&/")+"/")+J)),de.push(Xe)),1;if(_e=0,Ue=Ue===""?".":Ue+":",U(J))for(var fe=0;fe<J.length;fe++){Z=J[fe];var ae=Ue+be(Z,fe);_e+=Ce(Z,de,$e,ae,Xe)}else if(ae=S(J),typeof ae=="function")for(J=ae.call(J),fe=0;!(Z=J.next()).done;)Z=Z.value,ae=Ue+be(Z,fe++),_e+=Ce(Z,de,$e,ae,Xe);else if(Z==="object")throw de=String(J),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.");return _e}function re(J,de,$e){if(J==null)return J;var Ue=[],Xe=0;return Ce(J,Ue,"","",function(Z){return de.call($e,Z,Xe++)}),Ue}function ze(J){if(J._status===-1){var de=J._result;de=de(),de.then(function($e){(J._status===0||J._status===-1)&&(J._status=1,J._result=$e)},function($e){(J._status===0||J._status===-1)&&(J._status=2,J._result=$e)}),J._status===-1&&(J._status=0,J._result=de)}if(J._status===1)return J._result.default;throw J._result}var le={current:null},me={transition:null},Ee={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:me,ReactCurrentOwner:V};function Ae(){throw Error("act(...) is not supported in production builds of React.")}return It.Children={map:re,forEach:function(J,de,$e){re(J,function(){de.apply(this,arguments)},$e)},count:function(J){var de=0;return re(J,function(){de++}),de},toArray:function(J){return re(J,function(de){return de})||[]},only:function(J){if(!we(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},It.Component=P,It.Fragment=r,It.Profiler=i,It.PureComponent=L,It.StrictMode=n,It.Suspense=p,It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ee,It.act=Ae,It.cloneElement=function(J,de,$e){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var Ue=O({},J.props),Xe=J.key,Z=J.ref,_e=J._owner;if(de!=null){if(de.ref!==void 0&&(Z=de.ref,_e=V.current),de.key!==void 0&&(Xe=""+de.key),J.type&&J.type.defaultProps)var fe=J.type.defaultProps;for(ae in de)W.call(de,ae)&&!H.hasOwnProperty(ae)&&(Ue[ae]=de[ae]===void 0&&fe!==void 0?fe[ae]:de[ae])}var ae=arguments.length-2;if(ae===1)Ue.children=$e;else if(1<ae){fe=Array(ae);for(var je=0;je<ae;je++)fe[je]=arguments[je+2];Ue.children=fe}return{$$typeof:e,type:J.type,key:Xe,ref:Z,props:Ue,_owner:_e}},It.createContext=function(J){return J={$$typeof:c,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:s,_context:J},J.Consumer=J},It.createElement=X,It.createFactory=function(J){var de=X.bind(null,J);return de.type=J,de},It.createRef=function(){return{current:null}},It.forwardRef=function(J){return{$$typeof:f,render:J}},It.isValidElement=we,It.lazy=function(J){return{$$typeof:v,_payload:{_status:-1,_result:J},_init:ze}},It.memo=function(J,de){return{$$typeof:m,type:J,compare:de===void 0?null:de}},It.startTransition=function(J){var de=me.transition;me.transition={};try{J()}finally{me.transition=de}},It.unstable_act=Ae,It.useCallback=function(J,de){return le.current.useCallback(J,de)},It.useContext=function(J){return le.current.useContext(J)},It.useDebugValue=function(){},It.useDeferredValue=function(J){return le.current.useDeferredValue(J)},It.useEffect=function(J,de){return le.current.useEffect(J,de)},It.useId=function(){return le.current.useId()},It.useImperativeHandle=function(J,de,$e){return le.current.useImperativeHandle(J,de,$e)},It.useInsertionEffect=function(J,de){return le.current.useInsertionEffect(J,de)},It.useLayoutEffect=function(J,de){return le.current.useLayoutEffect(J,de)},It.useMemo=function(J,de){return le.current.useMemo(J,de)},It.useReducer=function(J,de,$e){return le.current.useReducer(J,de,$e)},It.useRef=function(J){return le.current.useRef(J)},It.useState=function(J){return le.current.useState(J)},It.useSyncExternalStore=function(J,de,$e){return le.current.useSyncExternalStore(J,de,$e)},It.useTransition=function(){return le.current.useTransition()},It.version="18.3.1",It}var oE;function Mc(){return oE||(oE=1,kg.exports=h8()),kg.exports}var lE;function p8(){if(lE)return ju;lE=1;var e=Mc(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,m){var v,b={},S=null,A=null;m!==void 0&&(S=""+m),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(A=p.ref);for(v in p)n.call(p,v)&&!s.hasOwnProperty(v)&&(b[v]=p[v]);if(f&&f.defaultProps)for(v in p=f.defaultProps,p)b[v]===void 0&&(b[v]=p[v]);return{$$typeof:t,type:f,key:S,ref:A,props:b,_owner:i.current}}return ju.Fragment=r,ju.jsx=c,ju.jsxs=c,ju}var cE;function m8(){return cE||(cE=1,Tg.exports=p8()),Tg.exports}var g=m8(),N=Mc();const Nr=da(N),g8=Zv({__proto__:null,default:Nr},[N]);var nh={},Pg={exports:{}},gi={},jg={exports:{}},Rg={};var uE;function x8(){return uE||(uE=1,(function(e){function t(me,Ee){var Ae=me.length;me.push(Ee);e:for(;0<Ae;){var J=Ae-1>>>1,de=me[J];if(0<i(de,Ee))me[J]=Ee,me[Ae]=de,Ae=J;else break e}}function r(me){return me.length===0?null:me[0]}function n(me){if(me.length===0)return null;var Ee=me[0],Ae=me.pop();if(Ae!==Ee){me[0]=Ae;e:for(var J=0,de=me.length,$e=de>>>1;J<$e;){var Ue=2*(J+1)-1,Xe=me[Ue],Z=Ue+1,_e=me[Z];if(0>i(Xe,Ae))Z<de&&0>i(_e,Xe)?(me[J]=_e,me[Z]=Ae,J=Z):(me[J]=Xe,me[Ue]=Ae,J=Ue);else if(Z<de&&0>i(_e,Ae))me[J]=_e,me[Z]=Ae,J=Z;else break e}}return Ee}function i(me,Ee){var Ae=me.sortIndex-Ee.sortIndex;return Ae!==0?Ae:me.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var p=[],m=[],v=1,b=null,S=3,A=!1,O=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(me){for(var Ee=r(m);Ee!==null;){if(Ee.callback===null)n(m);else if(Ee.startTime<=me)n(m),Ee.sortIndex=Ee.expirationTime,t(p,Ee);else break;Ee=r(m)}}function U(me){if(I=!1,R(me),!O)if(r(p)!==null)O=!0,ze(W);else{var Ee=r(m);Ee!==null&&le(U,Ee.startTime-me)}}function W(me,Ee){O=!1,I&&(I=!1,M(X),X=-1),A=!0;var Ae=S;try{for(R(Ee),b=r(p);b!==null&&(!(b.expirationTime>Ee)||me&&!se());){var J=b.callback;if(typeof J=="function"){b.callback=null,S=b.priorityLevel;var de=J(b.expirationTime<=Ee);Ee=e.unstable_now(),typeof de=="function"?b.callback=de:b===r(p)&&n(p),R(Ee)}else n(p);b=r(p)}if(b!==null)var $e=!0;else{var Ue=r(m);Ue!==null&&le(U,Ue.startTime-Ee),$e=!1}return $e}finally{b=null,S=Ae,A=!1}}var V=!1,H=null,X=-1,Y=5,we=-1;function se(){return!(e.unstable_now()-we<Y)}function ie(){if(H!==null){var me=e.unstable_now();we=me;var Ee=!0;try{Ee=H(!0,me)}finally{Ee?be():(V=!1,H=null)}}else V=!1}var be;if(typeof L=="function")be=function(){L(ie)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,re=Ce.port2;Ce.port1.onmessage=ie,be=function(){re.postMessage(null)}}else be=function(){P(ie,0)};function ze(me){H=me,V||(V=!0,be())}function le(me,Ee){X=P(function(){me(e.unstable_now())},Ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(me){me.callback=null},e.unstable_continueExecution=function(){O||A||(O=!0,ze(W))},e.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<me?Math.floor(1e3/me):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return r(p)},e.unstable_next=function(me){switch(S){case 1:case 2:case 3:var Ee=3;break;default:Ee=S}var Ae=S;S=Ee;try{return me()}finally{S=Ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(me,Ee){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var Ae=S;S=me;try{return Ee()}finally{S=Ae}},e.unstable_scheduleCallback=function(me,Ee,Ae){var J=e.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?J+Ae:J):Ae=J,me){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Ae+de,me={id:v++,callback:Ee,priorityLevel:me,startTime:Ae,expirationTime:de,sortIndex:-1},Ae>J?(me.sortIndex=Ae,t(m,me),r(p)===null&&me===r(m)&&(I?(M(X),X=-1):I=!0,le(U,Ae-J))):(me.sortIndex=de,t(p,me),O||A||(O=!0,ze(W))),me},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(me){var Ee=S;return function(){var Ae=S;S=Ee;try{return me.apply(this,arguments)}finally{S=Ae}}}})(Rg)),Rg}var dE;function v8(){return dE||(dE=1,jg.exports=x8()),jg.exports}var fE;function y8(){if(fE)return gi;fE=1;var e=Mc(),t=v8();function r(o){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+o,w=1;w<arguments.length;w++)d+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+o+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(o,d){c(o,d),c(o+"Capture",d)}function c(o,d){for(i[o]=d,o=0;o<d.length;o++)n.add(d[o])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},b={};function S(o){return p.call(b,o)?!0:p.call(v,o)?!1:m.test(o)?b[o]=!0:(v[o]=!0,!1)}function A(o,d,w,C){if(w!==null&&w.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return C?!1:w!==null?!w.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function O(o,d,w,C){if(d===null||typeof d>"u"||A(o,d,w,C))return!0;if(C)return!1;if(w!==null)switch(w.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function I(o,d,w,C,k,j,z){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=C,this.attributeNamespace=k,this.mustUseProperty=w,this.propertyName=o,this.type=d,this.sanitizeURL=j,this.removeEmptyString=z}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){P[o]=new I(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var d=o[0];P[d]=new I(d,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){P[o]=new I(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){P[o]=new I(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){P[o]=new I(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){P[o]=new I(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){P[o]=new I(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){P[o]=new I(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){P[o]=new I(o,5,!1,o.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function L(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var d=o.replace(M,L);P[d]=new I(d,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var d=o.replace(M,L);P[d]=new I(d,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var d=o.replace(M,L);P[d]=new I(d,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){P[o]=new I(o,1,!1,o.toLowerCase(),null,!1,!1)}),P.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){P[o]=new I(o,1,!1,o.toLowerCase(),null,!0,!0)});function R(o,d,w,C){var k=P.hasOwnProperty(d)?P[d]:null;(k!==null?k.type!==0:C||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(O(d,w,k,C)&&(w=null),C||k===null?S(d)&&(w===null?o.removeAttribute(d):o.setAttribute(d,""+w)):k.mustUseProperty?o[k.propertyName]=w===null?k.type===3?!1:"":w:(d=k.attributeName,C=k.attributeNamespace,w===null?o.removeAttribute(d):(k=k.type,w=k===3||k===4&&w===!0?"":""+w,C?o.setAttributeNS(C,d,w):o.setAttribute(d,w))))}var U=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),V=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),we=Symbol.for("react.provider"),se=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),ze=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),me=Symbol.iterator;function Ee(o){return o===null||typeof o!="object"?null:(o=me&&o[me]||o["@@iterator"],typeof o=="function"?o:null)}var Ae=Object.assign,J;function de(o){if(J===void 0)try{throw Error()}catch(w){var d=w.stack.trim().match(/\n( *(at )?)/);J=d&&d[1]||""}return`
`+J+o}var $e=!1;function Ue(o,d){if(!o||$e)return"";$e=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ve){var C=ve}Reflect.construct(o,[],d)}else{try{d.call()}catch(ve){C=ve}o.call(d.prototype)}else{try{throw Error()}catch(ve){C=ve}o()}}catch(ve){if(ve&&C&&typeof ve.stack=="string"){for(var k=ve.stack.split(`
`),j=C.stack.split(`
`),z=k.length-1,K=j.length-1;1<=z&&0<=K&&k[z]!==j[K];)K--;for(;1<=z&&0<=K;z--,K--)if(k[z]!==j[K]){if(z!==1||K!==1)do if(z--,K--,0>K||k[z]!==j[K]){var ee=`
`+k[z].replace(" at new "," at ");return o.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",o.displayName)),ee}while(1<=z&&0<=K);break}}}finally{$e=!1,Error.prepareStackTrace=w}return(o=o?o.displayName||o.name:"")?de(o):""}function Xe(o){switch(o.tag){case 5:return de(o.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 2:case 15:return o=Ue(o.type,!1),o;case 11:return o=Ue(o.type.render,!1),o;case 1:return o=Ue(o.type,!0),o;default:return""}}function Z(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case H:return"Fragment";case V:return"Portal";case Y:return"Profiler";case X:return"StrictMode";case be:return"Suspense";case Ce:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case se:return(o.displayName||"Context")+".Consumer";case we:return(o._context.displayName||"Context")+".Provider";case ie:var d=o.render;return o=o.displayName,o||(o=d.displayName||d.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case re:return d=o.displayName||null,d!==null?d:Z(o.type)||"Memo";case ze:d=o._payload,o=o._init;try{return Z(o(d))}catch{}}return null}function _e(o){var d=o.type;switch(o.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=d.render,o=o.displayName||o.name||"",d.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(d);case 8:return d===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function fe(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ae(o){var d=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function je(o){var d=ae(o)?"checked":"value",w=Object.getOwnPropertyDescriptor(o.constructor.prototype,d),C=""+o[d];if(!o.hasOwnProperty(d)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var k=w.get,j=w.set;return Object.defineProperty(o,d,{configurable:!0,get:function(){return k.call(this)},set:function(z){C=""+z,j.call(this,z)}}),Object.defineProperty(o,d,{enumerable:w.enumerable}),{getValue:function(){return C},setValue:function(z){C=""+z},stopTracking:function(){o._valueTracker=null,delete o[d]}}}}function De(o){o._valueTracker||(o._valueTracker=je(o))}function ye(o){if(!o)return!1;var d=o._valueTracker;if(!d)return!0;var w=d.getValue(),C="";return o&&(C=ae(o)?o.checked?"true":"false":o.value),o=C,o!==w?(d.setValue(o),!0):!1}function Be(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Qe(o,d){var w=d.checked;return Ae({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??o._wrapperState.initialChecked})}function _t(o,d){var w=d.defaultValue==null?"":d.defaultValue,C=d.checked!=null?d.checked:d.defaultChecked;w=fe(d.value!=null?d.value:w),o._wrapperState={initialChecked:C,initialValue:w,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Ft(o,d){d=d.checked,d!=null&&R(o,"checked",d,!1)}function Pt(o,d){Ft(o,d);var w=fe(d.value),C=d.type;if(w!=null)C==="number"?(w===0&&o.value===""||o.value!=w)&&(o.value=""+w):o.value!==""+w&&(o.value=""+w);else if(C==="submit"||C==="reset"){o.removeAttribute("value");return}d.hasOwnProperty("value")?At(o,d.type,w):d.hasOwnProperty("defaultValue")&&At(o,d.type,fe(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(o.defaultChecked=!!d.defaultChecked)}function Ct(o,d,w){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var C=d.type;if(!(C!=="submit"&&C!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+o._wrapperState.initialValue,w||d===o.value||(o.value=d),o.defaultValue=d}w=o.name,w!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,w!==""&&(o.name=w)}function At(o,d,w){(d!=="number"||Be(o.ownerDocument)!==o)&&(w==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+w&&(o.defaultValue=""+w))}var Ci=Array.isArray;function He(o,d,w,C){if(o=o.options,d){d={};for(var k=0;k<w.length;k++)d["$"+w[k]]=!0;for(w=0;w<o.length;w++)k=d.hasOwnProperty("$"+o[w].value),o[w].selected!==k&&(o[w].selected=k),k&&C&&(o[w].defaultSelected=!0)}else{for(w=""+fe(w),d=null,k=0;k<o.length;k++){if(o[k].value===w){o[k].selected=!0,C&&(o[k].defaultSelected=!0);return}d!==null||o[k].disabled||(d=o[k])}d!==null&&(d.selected=!0)}}function ha(o,d){if(d.dangerouslySetInnerHTML!=null)throw Error(r(91));return Ae({},d,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Ne(o,d){var w=d.value;if(w==null){if(w=d.children,d=d.defaultValue,w!=null){if(d!=null)throw Error(r(92));if(Ci(w)){if(1<w.length)throw Error(r(93));w=w[0]}d=w}d==null&&(d=""),w=d}o._wrapperState={initialValue:fe(w)}}function ut(o,d){var w=fe(d.value),C=fe(d.defaultValue);w!=null&&(w=""+w,w!==o.value&&(o.value=w),d.defaultValue==null&&o.defaultValue!==w&&(o.defaultValue=w)),C!=null&&(o.defaultValue=""+C)}function Jt(o){var d=o.textContent;d===o._wrapperState.initialValue&&d!==""&&d!==null&&(o.value=d)}function Dt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ht(o,d){return o==null||o==="http://www.w3.org/1999/xhtml"?Dt(d):o==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ot,wr=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,w,C,k){MSApp.execUnsafeLocalFunction(function(){return o(d,w,C,k)})}:o})(function(o,d){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=d;else{for(Ot=Ot||document.createElement("div"),Ot.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Ot.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;d.firstChild;)o.appendChild(d.firstChild)}});function Ai(o,d){if(d){var w=o.firstChild;if(w&&w===o.lastChild&&w.nodeType===3){w.nodeValue=d;return}}o.textContent=d}var $n={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wn=["Webkit","ms","Moz","O"];Object.keys($n).forEach(function(o){Wn.forEach(function(d){d=d+o.charAt(0).toUpperCase()+o.substring(1),$n[d]=$n[o]})});function er(o,d,w){return d==null||typeof d=="boolean"||d===""?"":w||typeof d!="number"||d===0||$n.hasOwnProperty(o)&&$n[o]?(""+d).trim():d+"px"}function Fe(o,d){o=o.style;for(var w in d)if(d.hasOwnProperty(w)){var C=w.indexOf("--")===0,k=er(w,d[w],C);w==="float"&&(w="cssFloat"),C?o.setProperty(w,k):o[w]=k}}var mr=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jt(o,d){if(d){if(mr[o]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(r(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(r(61))}if(d.style!=null&&typeof d.style!="object")throw Error(r(62))}}function qt(o,d){if(o.indexOf("-")===-1)return typeof d.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vn=null;function pa(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var vt=null,qe=null,Yt=null;function kn(o){if(o=vu(o)){if(typeof vt!="function")throw Error(r(280));var d=o.stateNode;d&&(d=xf(d),vt(o.stateNode,o.type,d))}}function Gi(o){qe?Yt?Yt.push(o):Yt=[o]:qe=o}function ri(){if(qe){var o=qe,d=Yt;if(Yt=qe=null,kn(o),d)for(o=0;o<d.length;o++)kn(d[o])}}function Ao(o,d){return o(d)}function Qr(){}var ni=!1;function Ja(o,d,w){if(ni)return o(d,w);ni=!0;try{return Ao(o,d,w)}finally{ni=!1,(qe!==null||Yt!==null)&&(Qr(),ri())}}function wn(o,d){var w=o.stateNode;if(w===null)return null;var C=xf(w);if(C===null)return null;w=C[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(o=o.type,C=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!C;break e;default:o=!1}if(o)return null;if(w&&typeof w!="function")throw Error(r(231,d,typeof w));return w}var _o=!1;if(f)try{var Hn={};Object.defineProperty(Hn,"passive",{get:function(){_o=!0}}),window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch{_o=!1}function No(o,d,w,C,k,j,z,K,ee){var ve=Array.prototype.slice.call(arguments,3);try{d.apply(w,ve)}catch(ke){this.onError(ke)}}var br=!1,ui=null,ln=!1,Ve=null,Ra={onError:function(o){br=!0,ui=o}};function Se(o,d,w,C,k,j,z,K,ee){br=!1,ui=null,No.apply(Ra,arguments)}function Ge(o,d,w,C,k,j,z,K,ee){if(Se.apply(this,arguments),br){if(br){var ve=ui;br=!1,ui=null}else throw Error(r(198));ln||(ln=!0,Ve=ve)}}function lt(o){var d=o,w=o;if(o.alternate)for(;d.return;)d=d.return;else{o=d;do d=o,(d.flags&4098)!==0&&(w=d.return),o=d.return;while(o)}return d.tag===3?w:null}function Er(o){if(o.tag===13){var d=o.memoizedState;if(d===null&&(o=o.alternate,o!==null&&(d=o.memoizedState)),d!==null)return d.dehydrated}return null}function Sr(o){if(lt(o)!==o)throw Error(r(188))}function Lr(o){var d=o.alternate;if(!d){if(d=lt(o),d===null)throw Error(r(188));return d!==o?null:o}for(var w=o,C=d;;){var k=w.return;if(k===null)break;var j=k.alternate;if(j===null){if(C=k.return,C!==null){w=C;continue}break}if(k.child===j.child){for(j=k.child;j;){if(j===w)return Sr(k),o;if(j===C)return Sr(k),d;j=j.sibling}throw Error(r(188))}if(w.return!==C.return)w=k,C=j;else{for(var z=!1,K=k.child;K;){if(K===w){z=!0,w=k,C=j;break}if(K===C){z=!0,C=k,w=j;break}K=K.sibling}if(!z){for(K=j.child;K;){if(K===w){z=!0,w=j,C=k;break}if(K===C){z=!0,C=j,w=k;break}K=K.sibling}if(!z)throw Error(r(189))}}if(w.alternate!==C)throw Error(r(190))}if(w.tag!==3)throw Error(r(188));return w.stateNode.current===w?o:d}function es(o){return o=Lr(o),o!==null?Yd(o):null}function Yd(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var d=Yd(o);if(d!==null)return d;o=o.sibling}return null}var _i=t.unstable_scheduleCallback,bn=t.unstable_cancelCallback,lr=t.unstable_shouldYield,Zd=t.unstable_requestPaint,Gt=t.unstable_now,Qc=t.unstable_getCurrentPriorityLevel,Oe=t.unstable_ImmediatePriority,Qd=t.unstable_UserBlockingPriority,nr=t.unstable_NormalPriority,Us=t.unstable_LowPriority,Jd=t.unstable_IdlePriority,Mt=null,Et=null;function Tt(o){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Mt,o,void 0,(o.current.flags&128)===128)}catch{}}var ii=Math.clz32?Math.clz32:Hr,Jc=Math.log,eu=Math.LN2;function Hr(o){return o>>>=0,o===0?32:31-(Jc(o)/eu|0)|0}var Ni=64,kl=4194304;function ir(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Oi(o,d){var w=o.pendingLanes;if(w===0)return 0;var C=0,k=o.suspendedLanes,j=o.pingedLanes,z=w&268435455;if(z!==0){var K=z&~k;K!==0?C=ir(K):(j&=z,j!==0&&(C=ir(j)))}else z=w&~k,z!==0?C=ir(z):j!==0&&(C=ir(j));if(C===0)return 0;if(d!==0&&d!==C&&(d&k)===0&&(k=C&-C,j=d&-d,k>=j||k===16&&(j&4194240)!==0))return d;if((C&4)!==0&&(C|=w&16),d=o.entangledLanes,d!==0)for(o=o.entanglements,d&=C;0<d;)w=31-ii(d),k=1<<w,C|=o[w],d&=~k;return C}function um(o,d){switch(o){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zs(o,d){for(var w=o.suspendedLanes,C=o.pingedLanes,k=o.expirationTimes,j=o.pendingLanes;0<j;){var z=31-ii(j),K=1<<z,ee=k[z];ee===-1?((K&w)===0||(K&C)!==0)&&(k[z]=um(K,d)):ee<=d&&(o.expiredLanes|=K),j&=~K}}function Kt(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function cn(){var o=Ni;return Ni<<=1,(Ni&4194240)===0&&(Ni=64),o}function ce(o){for(var d=[],w=0;31>w;w++)d.push(o);return d}function q(o,d,w){o.pendingLanes|=d,d!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,d=31-ii(d),o[d]=w}function ct(o,d){var w=o.pendingLanes&~d;o.pendingLanes=d,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=d,o.mutableReadLanes&=d,o.entangledLanes&=d,d=o.entanglements;var C=o.eventTimes;for(o=o.expirationTimes;0<w;){var k=31-ii(w),j=1<<k;d[k]=0,C[k]=-1,o[k]=-1,w&=~j}}function Br(o,d){var w=o.entangledLanes|=d;for(o=o.entanglements;w;){var C=31-ii(w),k=1<<C;k&d|o[C]&d&&(o[C]|=d),w&=~k}}var St=0;function ef(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Pl,qn,dt,cr,tu,ru=!1,$s=[],Ii=null,Ki=null,Ma=null,Cr=new Map,ma=new Map,Pn=[],mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tf(o,d){switch(o){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Ki=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":Cr.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(d.pointerId)}}function yt(o,d,w,C,k,j){return o===null||o.nativeEvent!==j?(o={blockedOn:d,domEventName:w,eventSystemFlags:C,nativeEvent:j,targetContainers:[k]},d!==null&&(d=vu(d),d!==null&&qn(d)),o):(o.eventSystemFlags|=C,d=o.targetContainers,k!==null&&d.indexOf(k)===-1&&d.push(k),o)}function un(o,d,w,C,k){switch(d){case"focusin":return Ii=yt(Ii,o,d,w,C,k),!0;case"dragenter":return Ki=yt(Ki,o,d,w,C,k),!0;case"mouseover":return Ma=yt(Ma,o,d,w,C,k),!0;case"pointerover":var j=k.pointerId;return Cr.set(j,yt(Cr.get(j)||null,o,d,w,C,k)),!0;case"gotpointercapture":return j=k.pointerId,ma.set(j,yt(ma.get(j)||null,o,d,w,C,k)),!0}return!1}function rf(o){var d=Lo(o.target);if(d!==null){var w=lt(d);if(w!==null){if(d=w.tag,d===13){if(d=Er(w),d!==null){o.blockedOn=d,tu(o.priority,function(){dt(w)});return}}else if(d===3&&w.stateNode.current.memoizedState.isDehydrated){o.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ws(o){if(o.blockedOn!==null)return!1;for(var d=o.targetContainers;0<d.length;){var w=jl(o.domEventName,o.eventSystemFlags,d[0],o.nativeEvent);if(w===null){w=o.nativeEvent;var C=new w.constructor(w.type,w);Vn=C,w.target.dispatchEvent(C),Vn=null}else return d=vu(w),d!==null&&qn(d),o.blockedOn=w,!1;d.shift()}return!0}function nu(o,d,w){Ws(o)&&w.delete(d)}function ts(){ru=!1,Ii!==null&&Ws(Ii)&&(Ii=null),Ki!==null&&Ws(Ki)&&(Ki=null),Ma!==null&&Ws(Ma)&&(Ma=null),Cr.forEach(nu),ma.forEach(nu)}function Oo(o,d){o.blockedOn===d&&(o.blockedOn=null,ru||(ru=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ts)))}function ga(o){function d(k){return Oo(k,o)}if(0<$s.length){Oo($s[0],o);for(var w=1;w<$s.length;w++){var C=$s[w];C.blockedOn===o&&(C.blockedOn=null)}}for(Ii!==null&&Oo(Ii,o),Ki!==null&&Oo(Ki,o),Ma!==null&&Oo(Ma,o),Cr.forEach(d),ma.forEach(d),w=0;w<Pn.length;w++)C=Pn[w],C.blockedOn===o&&(C.blockedOn=null);for(;0<Pn.length&&(w=Pn[0],w.blockedOn===null);)rf(w),w.blockedOn===null&&Pn.shift()}var Xi=U.ReactCurrentBatchConfig,Da=!0;function nf(o,d,w,C){var k=St,j=Xi.transition;Xi.transition=null;try{St=1,rs(o,d,w,C)}finally{St=k,Xi.transition=j}}function Io(o,d,w,C){var k=St,j=Xi.transition;Xi.transition=null;try{St=4,rs(o,d,w,C)}finally{St=k,Xi.transition=j}}function rs(o,d,w,C){if(Da){var k=jl(o,d,w,C);if(k===null)wm(o,d,C,dn,w),tf(o,C);else if(un(k,o,d,w,C))C.stopPropagation();else if(tf(o,C),d&4&&-1<mt.indexOf(o)){for(;k!==null;){var j=vu(k);if(j!==null&&Pl(j),j=jl(o,d,w,C),j===null&&wm(o,d,C,dn,w),j===k)break;k=j}k!==null&&C.stopPropagation()}else wm(o,d,C,null,w)}}var dn=null;function jl(o,d,w,C){if(dn=null,o=pa(C),o=Lo(o),o!==null)if(d=lt(o),d===null)o=null;else if(w=d.tag,w===13){if(o=Er(d),o!==null)return o;o=null}else if(w===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;o=null}else d!==o&&(o=null);return dn=o,null}function iu(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qc()){case Oe:return 1;case Qd:return 4;case nr:case Us:return 16;case Jd:return 536870912;default:return 16}default:return 16}}var xa=null,au=null,Rl=null;function af(){if(Rl)return Rl;var o,d=au,w=d.length,C,k="value"in xa?xa.value:xa.textContent,j=k.length;for(o=0;o<w&&d[o]===k[o];o++);var z=w-o;for(C=1;C<=z&&d[w-C]===k[j-C];C++);return Rl=k.slice(o,1<C?1-C:void 0)}function Lt(o){var d=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&d===13&&(o=13)):o=d,o===10&&(o=13),32<=o||o===13?o:0}function To(){return!0}function ko(){return!1}function Fr(o){function d(w,C,k,j,z){this._reactName=w,this._targetInst=k,this.type=C,this.nativeEvent=j,this.target=z,this.currentTarget=null;for(var K in o)o.hasOwnProperty(K)&&(w=o[K],this[K]=w?w(j):j[K]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?To:ko,this.isPropagationStopped=ko,this}return Ae(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=To)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=To)},persist:function(){},isPersistent:To}),d}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xe=Fr(Vs),bt=Ae({},Vs,{view:0,detail:0}),fn=Fr(bt),Hs,Ml,Po,Dl=Ae({},bt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Po&&(Po&&o.type==="mousemove"?(Hs=o.screenX-Po.screenX,Ml=o.screenY-Po.screenY):Ml=Hs=0,Po=o),Hs)},movementY:function(o){return"movementY"in o?o.movementY:Ml}}),sf=Fr(Dl),su=Ae({},Dl,{dataTransfer:0}),qr=Fr(su),ou=Ae({},bt,{relatedTarget:0}),ur=Fr(ou),Ll=Ae({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),ns=Fr(Ll),Zt=Ae({},Vs,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ft=Fr(Zt),dm=Ae({},Vs,{data:0}),tr=Fr(dm),is={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yi(o){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(o):(o=fm[o])?!!d[o]:!1}function jo(){return Yi}var of=Ae({},bt,{key:function(o){if(o.key){var d=is[o.key]||o.key;if(d!=="Unidentified")return d}return o.type==="keypress"?(o=Lt(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?qs[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jo,charCode:function(o){return o.type==="keypress"?Lt(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Lt(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),lu=Fr(of),lf=Ae({},Dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cu=Fr(lf),hm=Ae({},bt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jo}),Gs=Fr(hm),uu=Ae({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),pm=Fr(uu),Ro=Ae({},Dl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),mm=Fr(Ro),La=[9,13,27,32],Ks=f&&"CompositionEvent"in window,En=null;f&&"documentMode"in document&&(En=document.documentMode);var cf=f&&"TextEvent"in window&&!En,Ti=f&&(!Ks||En&&8<En&&11>=En),uf=" ",Bl=!1;function df(o,d){switch(o){case"keyup":return La.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function du(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var jn=!1;function gm(o,d){switch(o){case"compositionend":return du(d);case"keypress":return d.which!==32?null:(Bl=!0,uf);case"textInput":return o=d.data,o===uf&&Bl?null:o;default:return null}}function fu(o,d){if(jn)return o==="compositionend"||!Ks&&df(o,d)?(o=af(),Rl=au=xa=null,jn=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Ti&&d.locale!=="ko"?null:d.data;default:return null}}var Mo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rt(o){var d=o&&o.nodeName&&o.nodeName.toLowerCase();return d==="input"?!!Mo[o.type]:d==="textarea"}function Do(o,d,w,C){Gi(C),d=pf(d,"onChange"),0<d.length&&(w=new xe("onChange","change",null,w,C),o.push({event:w,listeners:d}))}var B=null,a=null;function l(o){Eb(o,0)}function u(o){var d=zl(o);if(ye(d))return o}function h(o,d){if(o==="change")return d}var x=!1;if(f){var y;if(f){var E="oninput"in document;if(!E){var _=document.createElement("div");_.setAttribute("oninput","return;"),E=typeof _.oninput=="function"}y=E}else y=!1;x=y&&(!document.documentMode||9<document.documentMode)}function T(){B&&(B.detachEvent("onpropertychange",D),a=B=null)}function D(o){if(o.propertyName==="value"&&u(a)){var d=[];Do(d,a,o,pa(o)),Ja(l,d)}}function F(o,d,w){o==="focusin"?(T(),B=d,a=w,B.attachEvent("onpropertychange",D)):o==="focusout"&&T()}function $(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return u(a)}function G(o,d){if(o==="click")return u(d)}function Q(o,d){if(o==="input"||o==="change")return u(d)}function te(o,d){return o===d&&(o!==0||1/o===1/d)||o!==o&&d!==d}var oe=typeof Object.is=="function"?Object.is:te;function ge(o,d){if(oe(o,d))return!0;if(typeof o!="object"||o===null||typeof d!="object"||d===null)return!1;var w=Object.keys(o),C=Object.keys(d);if(w.length!==C.length)return!1;for(C=0;C<w.length;C++){var k=w[C];if(!p.call(d,k)||!oe(o[k],d[k]))return!1}return!0}function Re(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Me(o,d){var w=Re(o);o=0;for(var C;w;){if(w.nodeType===3){if(C=o+w.textContent.length,o<=d&&C>=d)return{node:w,offset:d-o};o=C}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Re(w)}}function Te(o,d){return o&&d?o===d?!0:o&&o.nodeType===3?!1:d&&d.nodeType===3?Te(o,d.parentNode):"contains"in o?o.contains(d):o.compareDocumentPosition?!!(o.compareDocumentPosition(d)&16):!1:!1}function Nt(){for(var o=window,d=Be();d instanceof o.HTMLIFrameElement;){try{var w=typeof d.contentWindow.location.href=="string"}catch{w=!1}if(w)o=d.contentWindow;else break;d=Be(o.document)}return d}function wt(o){var d=o&&o.nodeName&&o.nodeName.toLowerCase();return d&&(d==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||d==="textarea"||o.contentEditable==="true")}function Gn(o){var d=Nt(),w=o.focusedElem,C=o.selectionRange;if(d!==w&&w&&w.ownerDocument&&Te(w.ownerDocument.documentElement,w)){if(C!==null&&wt(w)){if(d=C.start,o=C.end,o===void 0&&(o=d),"selectionStart"in w)w.selectionStart=d,w.selectionEnd=Math.min(o,w.value.length);else if(o=(d=w.ownerDocument||document)&&d.defaultView||window,o.getSelection){o=o.getSelection();var k=w.textContent.length,j=Math.min(C.start,k);C=C.end===void 0?j:Math.min(C.end,k),!o.extend&&j>C&&(k=C,C=j,j=k),k=Me(w,j);var z=Me(w,C);k&&z&&(o.rangeCount!==1||o.anchorNode!==k.node||o.anchorOffset!==k.offset||o.focusNode!==z.node||o.focusOffset!==z.offset)&&(d=d.createRange(),d.setStart(k.node,k.offset),o.removeAllRanges(),j>C?(o.addRange(d),o.extend(z.node,z.offset)):(d.setEnd(z.node,z.offset),o.addRange(d)))}}for(d=[],o=w;o=o.parentNode;)o.nodeType===1&&d.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<d.length;w++)o=d[w],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var ki=f&&"documentMode"in document&&11>=document.documentMode,Gr=null,Wt=null,Pr=null,Rn=!1;function as(o,d,w){var C=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;Rn||Gr==null||Gr!==Be(C)||(C=Gr,"selectionStart"in C&&wt(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Pr&&ge(Pr,C)||(Pr=C,C=pf(Wt,"onSelect"),0<C.length&&(d=new xe("onSelect","select",null,d,w),o.push({event:d,listeners:C}),d.target=Gr)))}function va(o,d){var w={};return w[o.toLowerCase()]=d.toLowerCase(),w["Webkit"+o]="webkit"+d,w["Moz"+o]="moz"+d,w}var Xs={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionend:va("Transition","TransitionEnd")},hu={},pb={};f&&(pb=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function ff(o){if(hu[o])return hu[o];if(!Xs[o])return o;var d=Xs[o],w;for(w in d)if(d.hasOwnProperty(w)&&w in pb)return hu[o]=d[w];return o}var mb=ff("animationend"),gb=ff("animationiteration"),xb=ff("animationstart"),vb=ff("transitionend"),yb=new Map,wb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ys(o,d){yb.set(o,d),s(d,[o])}for(var xm=0;xm<wb.length;xm++){var vm=wb[xm],Ej=vm.toLowerCase(),Sj=vm[0].toUpperCase()+vm.slice(1);Ys(Ej,"on"+Sj)}Ys(mb,"onAnimationEnd"),Ys(gb,"onAnimationIteration"),Ys(xb,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(vb,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cj=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function bb(o,d,w){var C=o.type||"unknown-event";o.currentTarget=w,Ge(C,d,void 0,o),o.currentTarget=null}function Eb(o,d){d=(d&4)!==0;for(var w=0;w<o.length;w++){var C=o[w],k=C.event;C=C.listeners;e:{var j=void 0;if(d)for(var z=C.length-1;0<=z;z--){var K=C[z],ee=K.instance,ve=K.currentTarget;if(K=K.listener,ee!==j&&k.isPropagationStopped())break e;bb(k,K,ve),j=ee}else for(z=0;z<C.length;z++){if(K=C[z],ee=K.instance,ve=K.currentTarget,K=K.listener,ee!==j&&k.isPropagationStopped())break e;bb(k,K,ve),j=ee}}}if(ln)throw o=Ve,ln=!1,Ve=null,o}function gr(o,d){var w=d[_m];w===void 0&&(w=d[_m]=new Set);var C=o+"__bubble";w.has(C)||(Sb(d,o,2,!1),w.add(C))}function ym(o,d,w){var C=0;d&&(C|=4),Sb(w,o,C,d)}var hf="_reactListening"+Math.random().toString(36).slice(2);function mu(o){if(!o[hf]){o[hf]=!0,n.forEach(function(w){w!=="selectionchange"&&(Cj.has(w)||ym(w,!1,o),ym(w,!0,o))});var d=o.nodeType===9?o:o.ownerDocument;d===null||d[hf]||(d[hf]=!0,ym("selectionchange",!1,d))}}function Sb(o,d,w,C){switch(iu(d)){case 1:var k=nf;break;case 4:k=Io;break;default:k=rs}w=k.bind(null,d,w,o),k=void 0,!_o||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(k=!0),C?k!==void 0?o.addEventListener(d,w,{capture:!0,passive:k}):o.addEventListener(d,w,!0):k!==void 0?o.addEventListener(d,w,{passive:k}):o.addEventListener(d,w,!1)}function wm(o,d,w,C,k){var j=C;if((d&1)===0&&(d&2)===0&&C!==null)e:for(;;){if(C===null)return;var z=C.tag;if(z===3||z===4){var K=C.stateNode.containerInfo;if(K===k||K.nodeType===8&&K.parentNode===k)break;if(z===4)for(z=C.return;z!==null;){var ee=z.tag;if((ee===3||ee===4)&&(ee=z.stateNode.containerInfo,ee===k||ee.nodeType===8&&ee.parentNode===k))return;z=z.return}for(;K!==null;){if(z=Lo(K),z===null)return;if(ee=z.tag,ee===5||ee===6){C=j=z;continue e}K=K.parentNode}}C=C.return}Ja(function(){var ve=j,ke=pa(w),Pe=[];e:{var Ie=yb.get(o);if(Ie!==void 0){var Ke=xe,rt=o;switch(o){case"keypress":if(Lt(w)===0)break e;case"keydown":case"keyup":Ke=lu;break;case"focusin":rt="focus",Ke=ur;break;case"focusout":rt="blur",Ke=ur;break;case"beforeblur":case"afterblur":Ke=ur;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=qr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=Gs;break;case mb:case gb:case xb:Ke=ns;break;case vb:Ke=pm;break;case"scroll":Ke=fn;break;case"wheel":Ke=mm;break;case"copy":case"cut":case"paste":Ke=ft;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=cu}var it=(d&4)!==0,Kr=!it&&o==="scroll",ue=it?Ie!==null?Ie+"Capture":null:Ie;it=[];for(var ne=ve,he;ne!==null;){he=ne;var Le=he.stateNode;if(he.tag===5&&Le!==null&&(he=Le,ue!==null&&(Le=wn(ne,ue),Le!=null&&it.push(gu(ne,Le,he)))),Kr)break;ne=ne.return}0<it.length&&(Ie=new Ke(Ie,rt,null,w,ke),Pe.push({event:Ie,listeners:it}))}}if((d&7)===0){e:{if(Ie=o==="mouseover"||o==="pointerover",Ke=o==="mouseout"||o==="pointerout",Ie&&w!==Vn&&(rt=w.relatedTarget||w.fromElement)&&(Lo(rt)||rt[ss]))break e;if((Ke||Ie)&&(Ie=ke.window===ke?ke:(Ie=ke.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,Ke?(rt=w.relatedTarget||w.toElement,Ke=ve,rt=rt?Lo(rt):null,rt!==null&&(Kr=lt(rt),rt!==Kr||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(Ke=null,rt=ve),Ke!==rt)){if(it=sf,Le="onMouseLeave",ue="onMouseEnter",ne="mouse",(o==="pointerout"||o==="pointerover")&&(it=cu,Le="onPointerLeave",ue="onPointerEnter",ne="pointer"),Kr=Ke==null?Ie:zl(Ke),he=rt==null?Ie:zl(rt),Ie=new it(Le,ne+"leave",Ke,w,ke),Ie.target=Kr,Ie.relatedTarget=he,Le=null,Lo(ke)===ve&&(it=new it(ue,ne+"enter",rt,w,ke),it.target=he,it.relatedTarget=Kr,Le=it),Kr=Le,Ke&&rt)t:{for(it=Ke,ue=rt,ne=0,he=it;he;he=Fl(he))ne++;for(he=0,Le=ue;Le;Le=Fl(Le))he++;for(;0<ne-he;)it=Fl(it),ne--;for(;0<he-ne;)ue=Fl(ue),he--;for(;ne--;){if(it===ue||ue!==null&&it===ue.alternate)break t;it=Fl(it),ue=Fl(ue)}it=null}else it=null;Ke!==null&&Cb(Pe,Ie,Ke,it,!1),rt!==null&&Kr!==null&&Cb(Pe,Kr,rt,it,!0)}}e:{if(Ie=ve?zl(ve):window,Ke=Ie.nodeName&&Ie.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&Ie.type==="file")var st=h;else if(Rt(Ie))if(x)st=Q;else{st=$;var ht=F}else(Ke=Ie.nodeName)&&Ke.toLowerCase()==="input"&&(Ie.type==="checkbox"||Ie.type==="radio")&&(st=G);if(st&&(st=st(o,ve))){Do(Pe,st,w,ke);break e}ht&&ht(o,Ie,ve),o==="focusout"&&(ht=Ie._wrapperState)&&ht.controlled&&Ie.type==="number"&&At(Ie,"number",Ie.value)}switch(ht=ve?zl(ve):window,o){case"focusin":(Rt(ht)||ht.contentEditable==="true")&&(Gr=ht,Wt=ve,Pr=null);break;case"focusout":Pr=Wt=Gr=null;break;case"mousedown":Rn=!0;break;case"contextmenu":case"mouseup":case"dragend":Rn=!1,as(Pe,w,ke);break;case"selectionchange":if(ki)break;case"keydown":case"keyup":as(Pe,w,ke)}var pt;if(Ks)e:{switch(o){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else jn?df(o,w)&&(xt="onCompositionEnd"):o==="keydown"&&w.keyCode===229&&(xt="onCompositionStart");xt&&(Ti&&w.locale!=="ko"&&(jn||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&jn&&(pt=af()):(xa=ke,au="value"in xa?xa.value:xa.textContent,jn=!0)),ht=pf(ve,xt),0<ht.length&&(xt=new tr(xt,o,null,w,ke),Pe.push({event:xt,listeners:ht}),pt?xt.data=pt:(pt=du(w),pt!==null&&(xt.data=pt)))),(pt=cf?gm(o,w):fu(o,w))&&(ve=pf(ve,"onBeforeInput"),0<ve.length&&(ke=new tr("onBeforeInput","beforeinput",null,w,ke),Pe.push({event:ke,listeners:ve}),ke.data=pt))}Eb(Pe,d)})}function gu(o,d,w){return{instance:o,listener:d,currentTarget:w}}function pf(o,d){for(var w=d+"Capture",C=[];o!==null;){var k=o,j=k.stateNode;k.tag===5&&j!==null&&(k=j,j=wn(o,w),j!=null&&C.unshift(gu(o,j,k)),j=wn(o,d),j!=null&&C.push(gu(o,j,k))),o=o.return}return C}function Fl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Cb(o,d,w,C,k){for(var j=d._reactName,z=[];w!==null&&w!==C;){var K=w,ee=K.alternate,ve=K.stateNode;if(ee!==null&&ee===C)break;K.tag===5&&ve!==null&&(K=ve,k?(ee=wn(w,j),ee!=null&&z.unshift(gu(w,ee,K))):k||(ee=wn(w,j),ee!=null&&z.push(gu(w,ee,K)))),w=w.return}z.length!==0&&o.push({event:d,listeners:z})}var Aj=/\r\n?/g,_j=/\u0000|\uFFFD/g;function Ab(o){return(typeof o=="string"?o:""+o).replace(Aj,`
`).replace(_j,"")}function mf(o,d,w){if(d=Ab(d),Ab(o)!==d&&w)throw Error(r(425))}function gf(){}var bm=null,Em=null;function Sm(o,d){return o==="textarea"||o==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Cm=typeof setTimeout=="function"?setTimeout:void 0,Nj=typeof clearTimeout=="function"?clearTimeout:void 0,_b=typeof Promise=="function"?Promise:void 0,Oj=typeof queueMicrotask=="function"?queueMicrotask:typeof _b<"u"?function(o){return _b.resolve(null).then(o).catch(Ij)}:Cm;function Ij(o){setTimeout(function(){throw o})}function Am(o,d){var w=d,C=0;do{var k=w.nextSibling;if(o.removeChild(w),k&&k.nodeType===8)if(w=k.data,w==="/$"){if(C===0){o.removeChild(k),ga(d);return}C--}else w!=="$"&&w!=="$?"&&w!=="$!"||C++;w=k}while(w);ga(d)}function Zs(o){for(;o!=null;o=o.nextSibling){var d=o.nodeType;if(d===1||d===3)break;if(d===8){if(d=o.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return o}function Nb(o){o=o.previousSibling;for(var d=0;o;){if(o.nodeType===8){var w=o.data;if(w==="$"||w==="$!"||w==="$?"){if(d===0)return o;d--}else w==="/$"&&d++}o=o.previousSibling}return null}var Ul=Math.random().toString(36).slice(2),Ba="__reactFiber$"+Ul,xu="__reactProps$"+Ul,ss="__reactContainer$"+Ul,_m="__reactEvents$"+Ul,Tj="__reactListeners$"+Ul,kj="__reactHandles$"+Ul;function Lo(o){var d=o[Ba];if(d)return d;for(var w=o.parentNode;w;){if(d=w[ss]||w[Ba]){if(w=d.alternate,d.child!==null||w!==null&&w.child!==null)for(o=Nb(o);o!==null;){if(w=o[Ba])return w;o=Nb(o)}return d}o=w,w=o.parentNode}return null}function vu(o){return o=o[Ba]||o[ss],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function zl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function xf(o){return o[xu]||null}var Nm=[],$l=-1;function Qs(o){return{current:o}}function xr(o){0>$l||(o.current=Nm[$l],Nm[$l]=null,$l--)}function dr(o,d){$l++,Nm[$l]=o.current,o.current=d}var Js={},Kn=Qs(Js),di=Qs(!1),Bo=Js;function Wl(o,d){var w=o.type.contextTypes;if(!w)return Js;var C=o.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===d)return C.__reactInternalMemoizedMaskedChildContext;var k={},j;for(j in w)k[j]=d[j];return C&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=d,o.__reactInternalMemoizedMaskedChildContext=k),k}function fi(o){return o=o.childContextTypes,o!=null}function vf(){xr(di),xr(Kn)}function Ob(o,d,w){if(Kn.current!==Js)throw Error(r(168));dr(Kn,d),dr(di,w)}function Ib(o,d,w){var C=o.stateNode;if(d=d.childContextTypes,typeof C.getChildContext!="function")return w;C=C.getChildContext();for(var k in C)if(!(k in d))throw Error(r(108,_e(o)||"Unknown",k));return Ae({},w,C)}function yf(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Js,Bo=Kn.current,dr(Kn,o),dr(di,di.current),!0}function Tb(o,d,w){var C=o.stateNode;if(!C)throw Error(r(169));w?(o=Ib(o,d,Bo),C.__reactInternalMemoizedMergedChildContext=o,xr(di),xr(Kn),dr(Kn,o)):xr(di),dr(di,w)}var os=null,wf=!1,Om=!1;function kb(o){os===null?os=[o]:os.push(o)}function Pj(o){wf=!0,kb(o)}function eo(){if(!Om&&os!==null){Om=!0;var o=0,d=St;try{var w=os;for(St=1;o<w.length;o++){var C=w[o];do C=C(!0);while(C!==null)}os=null,wf=!1}catch(k){throw os!==null&&(os=os.slice(o+1)),_i(Oe,eo),k}finally{St=d,Om=!1}}return null}var Vl=[],Hl=0,bf=null,Ef=0,Zi=[],Qi=0,Fo=null,ls=1,cs="";function Uo(o,d){Vl[Hl++]=Ef,Vl[Hl++]=bf,bf=o,Ef=d}function Pb(o,d,w){Zi[Qi++]=ls,Zi[Qi++]=cs,Zi[Qi++]=Fo,Fo=o;var C=ls;o=cs;var k=32-ii(C)-1;C&=~(1<<k),w+=1;var j=32-ii(d)+k;if(30<j){var z=k-k%5;j=(C&(1<<z)-1).toString(32),C>>=z,k-=z,ls=1<<32-ii(d)+k|w<<k|C,cs=j+o}else ls=1<<j|w<<k|C,cs=o}function Im(o){o.return!==null&&(Uo(o,1),Pb(o,1,0))}function Tm(o){for(;o===bf;)bf=Vl[--Hl],Vl[Hl]=null,Ef=Vl[--Hl],Vl[Hl]=null;for(;o===Fo;)Fo=Zi[--Qi],Zi[Qi]=null,cs=Zi[--Qi],Zi[Qi]=null,ls=Zi[--Qi],Zi[Qi]=null}var Pi=null,ji=null,Ar=!1,ya=null;function jb(o,d){var w=ra(5,null,null,0);w.elementType="DELETED",w.stateNode=d,w.return=o,d=o.deletions,d===null?(o.deletions=[w],o.flags|=16):d.push(w)}function Rb(o,d){switch(o.tag){case 5:var w=o.type;return d=d.nodeType!==1||w.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(o.stateNode=d,Pi=o,ji=Zs(d.firstChild),!0):!1;case 6:return d=o.pendingProps===""||d.nodeType!==3?null:d,d!==null?(o.stateNode=d,Pi=o,ji=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(w=Fo!==null?{id:ls,overflow:cs}:null,o.memoizedState={dehydrated:d,treeContext:w,retryLane:1073741824},w=ra(18,null,null,0),w.stateNode=d,w.return=o,o.child=w,Pi=o,ji=null,!0):!1;default:return!1}}function km(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Pm(o){if(Ar){var d=ji;if(d){var w=d;if(!Rb(o,d)){if(km(o))throw Error(r(418));d=Zs(w.nextSibling);var C=Pi;d&&Rb(o,d)?jb(C,w):(o.flags=o.flags&-4097|2,Ar=!1,Pi=o)}}else{if(km(o))throw Error(r(418));o.flags=o.flags&-4097|2,Ar=!1,Pi=o}}}function Mb(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Pi=o}function Sf(o){if(o!==Pi)return!1;if(!Ar)return Mb(o),Ar=!0,!1;var d;if((d=o.tag!==3)&&!(d=o.tag!==5)&&(d=o.type,d=d!=="head"&&d!=="body"&&!Sm(o.type,o.memoizedProps)),d&&(d=ji)){if(km(o))throw Db(),Error(r(418));for(;d;)jb(o,d),d=Zs(d.nextSibling)}if(Mb(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,d=0;o;){if(o.nodeType===8){var w=o.data;if(w==="/$"){if(d===0){ji=Zs(o.nextSibling);break e}d--}else w!=="$"&&w!=="$!"&&w!=="$?"||d++}o=o.nextSibling}ji=null}}else ji=Pi?Zs(o.stateNode.nextSibling):null;return!0}function Db(){for(var o=ji;o;)o=Zs(o.nextSibling)}function ql(){ji=Pi=null,Ar=!1}function jm(o){ya===null?ya=[o]:ya.push(o)}var jj=U.ReactCurrentBatchConfig;function yu(o,d,w){if(o=w.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(r(309));var C=w.stateNode}if(!C)throw Error(r(147,o));var k=C,j=""+o;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===j?d.ref:(d=function(z){var K=k.refs;z===null?delete K[j]:K[j]=z},d._stringRef=j,d)}if(typeof o!="string")throw Error(r(284));if(!w._owner)throw Error(r(290,o))}return o}function Cf(o,d){throw o=Object.prototype.toString.call(d),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":o))}function Lb(o){var d=o._init;return d(o._payload)}function Bb(o){function d(ue,ne){if(o){var he=ue.deletions;he===null?(ue.deletions=[ne],ue.flags|=16):he.push(ne)}}function w(ue,ne){if(!o)return null;for(;ne!==null;)d(ue,ne),ne=ne.sibling;return null}function C(ue,ne){for(ue=new Map;ne!==null;)ne.key!==null?ue.set(ne.key,ne):ue.set(ne.index,ne),ne=ne.sibling;return ue}function k(ue,ne){return ue=lo(ue,ne),ue.index=0,ue.sibling=null,ue}function j(ue,ne,he){return ue.index=he,o?(he=ue.alternate,he!==null?(he=he.index,he<ne?(ue.flags|=2,ne):he):(ue.flags|=2,ne)):(ue.flags|=1048576,ne)}function z(ue){return o&&ue.alternate===null&&(ue.flags|=2),ue}function K(ue,ne,he,Le){return ne===null||ne.tag!==6?(ne=Cg(he,ue.mode,Le),ne.return=ue,ne):(ne=k(ne,he),ne.return=ue,ne)}function ee(ue,ne,he,Le){var st=he.type;return st===H?ke(ue,ne,he.props.children,Le,he.key):ne!==null&&(ne.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===ze&&Lb(st)===ne.type)?(Le=k(ne,he.props),Le.ref=yu(ue,ne,he),Le.return=ue,Le):(Le=Kf(he.type,he.key,he.props,null,ue.mode,Le),Le.ref=yu(ue,ne,he),Le.return=ue,Le)}function ve(ue,ne,he,Le){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==he.containerInfo||ne.stateNode.implementation!==he.implementation?(ne=Ag(he,ue.mode,Le),ne.return=ue,ne):(ne=k(ne,he.children||[]),ne.return=ue,ne)}function ke(ue,ne,he,Le,st){return ne===null||ne.tag!==7?(ne=Ko(he,ue.mode,Le,st),ne.return=ue,ne):(ne=k(ne,he),ne.return=ue,ne)}function Pe(ue,ne,he){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=Cg(""+ne,ue.mode,he),ne.return=ue,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case W:return he=Kf(ne.type,ne.key,ne.props,null,ue.mode,he),he.ref=yu(ue,null,ne),he.return=ue,he;case V:return ne=Ag(ne,ue.mode,he),ne.return=ue,ne;case ze:var Le=ne._init;return Pe(ue,Le(ne._payload),he)}if(Ci(ne)||Ee(ne))return ne=Ko(ne,ue.mode,he,null),ne.return=ue,ne;Cf(ue,ne)}return null}function Ie(ue,ne,he,Le){var st=ne!==null?ne.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return st!==null?null:K(ue,ne,""+he,Le);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case W:return he.key===st?ee(ue,ne,he,Le):null;case V:return he.key===st?ve(ue,ne,he,Le):null;case ze:return st=he._init,Ie(ue,ne,st(he._payload),Le)}if(Ci(he)||Ee(he))return st!==null?null:ke(ue,ne,he,Le,null);Cf(ue,he)}return null}function Ke(ue,ne,he,Le,st){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return ue=ue.get(he)||null,K(ne,ue,""+Le,st);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case W:return ue=ue.get(Le.key===null?he:Le.key)||null,ee(ne,ue,Le,st);case V:return ue=ue.get(Le.key===null?he:Le.key)||null,ve(ne,ue,Le,st);case ze:var ht=Le._init;return Ke(ue,ne,he,ht(Le._payload),st)}if(Ci(Le)||Ee(Le))return ue=ue.get(he)||null,ke(ne,ue,Le,st,null);Cf(ne,Le)}return null}function rt(ue,ne,he,Le){for(var st=null,ht=null,pt=ne,xt=ne=0,An=null;pt!==null&&xt<he.length;xt++){pt.index>xt?(An=pt,pt=null):An=pt.sibling;var Ut=Ie(ue,pt,he[xt],Le);if(Ut===null){pt===null&&(pt=An);break}o&&pt&&Ut.alternate===null&&d(ue,pt),ne=j(Ut,ne,xt),ht===null?st=Ut:ht.sibling=Ut,ht=Ut,pt=An}if(xt===he.length)return w(ue,pt),Ar&&Uo(ue,xt),st;if(pt===null){for(;xt<he.length;xt++)pt=Pe(ue,he[xt],Le),pt!==null&&(ne=j(pt,ne,xt),ht===null?st=pt:ht.sibling=pt,ht=pt);return Ar&&Uo(ue,xt),st}for(pt=C(ue,pt);xt<he.length;xt++)An=Ke(pt,ue,xt,he[xt],Le),An!==null&&(o&&An.alternate!==null&&pt.delete(An.key===null?xt:An.key),ne=j(An,ne,xt),ht===null?st=An:ht.sibling=An,ht=An);return o&&pt.forEach(function(co){return d(ue,co)}),Ar&&Uo(ue,xt),st}function it(ue,ne,he,Le){var st=Ee(he);if(typeof st!="function")throw Error(r(150));if(he=st.call(he),he==null)throw Error(r(151));for(var ht=st=null,pt=ne,xt=ne=0,An=null,Ut=he.next();pt!==null&&!Ut.done;xt++,Ut=he.next()){pt.index>xt?(An=pt,pt=null):An=pt.sibling;var co=Ie(ue,pt,Ut.value,Le);if(co===null){pt===null&&(pt=An);break}o&&pt&&co.alternate===null&&d(ue,pt),ne=j(co,ne,xt),ht===null?st=co:ht.sibling=co,ht=co,pt=An}if(Ut.done)return w(ue,pt),Ar&&Uo(ue,xt),st;if(pt===null){for(;!Ut.done;xt++,Ut=he.next())Ut=Pe(ue,Ut.value,Le),Ut!==null&&(ne=j(Ut,ne,xt),ht===null?st=Ut:ht.sibling=Ut,ht=Ut);return Ar&&Uo(ue,xt),st}for(pt=C(ue,pt);!Ut.done;xt++,Ut=he.next())Ut=Ke(pt,ue,xt,Ut.value,Le),Ut!==null&&(o&&Ut.alternate!==null&&pt.delete(Ut.key===null?xt:Ut.key),ne=j(Ut,ne,xt),ht===null?st=Ut:ht.sibling=Ut,ht=Ut);return o&&pt.forEach(function(f8){return d(ue,f8)}),Ar&&Uo(ue,xt),st}function Kr(ue,ne,he,Le){if(typeof he=="object"&&he!==null&&he.type===H&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case W:e:{for(var st=he.key,ht=ne;ht!==null;){if(ht.key===st){if(st=he.type,st===H){if(ht.tag===7){w(ue,ht.sibling),ne=k(ht,he.props.children),ne.return=ue,ue=ne;break e}}else if(ht.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===ze&&Lb(st)===ht.type){w(ue,ht.sibling),ne=k(ht,he.props),ne.ref=yu(ue,ht,he),ne.return=ue,ue=ne;break e}w(ue,ht);break}else d(ue,ht);ht=ht.sibling}he.type===H?(ne=Ko(he.props.children,ue.mode,Le,he.key),ne.return=ue,ue=ne):(Le=Kf(he.type,he.key,he.props,null,ue.mode,Le),Le.ref=yu(ue,ne,he),Le.return=ue,ue=Le)}return z(ue);case V:e:{for(ht=he.key;ne!==null;){if(ne.key===ht)if(ne.tag===4&&ne.stateNode.containerInfo===he.containerInfo&&ne.stateNode.implementation===he.implementation){w(ue,ne.sibling),ne=k(ne,he.children||[]),ne.return=ue,ue=ne;break e}else{w(ue,ne);break}else d(ue,ne);ne=ne.sibling}ne=Ag(he,ue.mode,Le),ne.return=ue,ue=ne}return z(ue);case ze:return ht=he._init,Kr(ue,ne,ht(he._payload),Le)}if(Ci(he))return rt(ue,ne,he,Le);if(Ee(he))return it(ue,ne,he,Le);Cf(ue,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,ne!==null&&ne.tag===6?(w(ue,ne.sibling),ne=k(ne,he),ne.return=ue,ue=ne):(w(ue,ne),ne=Cg(he,ue.mode,Le),ne.return=ue,ue=ne),z(ue)):w(ue,ne)}return Kr}var Gl=Bb(!0),Fb=Bb(!1),Af=Qs(null),_f=null,Kl=null,Rm=null;function Mm(){Rm=Kl=_f=null}function Dm(o){var d=Af.current;xr(Af),o._currentValue=d}function Lm(o,d,w){for(;o!==null;){var C=o.alternate;if((o.childLanes&d)!==d?(o.childLanes|=d,C!==null&&(C.childLanes|=d)):C!==null&&(C.childLanes&d)!==d&&(C.childLanes|=d),o===w)break;o=o.return}}function Xl(o,d){_f=o,Rm=Kl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&d)!==0&&(hi=!0),o.firstContext=null)}function Ji(o){var d=o._currentValue;if(Rm!==o)if(o={context:o,memoizedValue:d,next:null},Kl===null){if(_f===null)throw Error(r(308));Kl=o,_f.dependencies={lanes:0,firstContext:o}}else Kl=Kl.next=o;return d}var zo=null;function Bm(o){zo===null?zo=[o]:zo.push(o)}function Ub(o,d,w,C){var k=d.interleaved;return k===null?(w.next=w,Bm(d)):(w.next=k.next,k.next=w),d.interleaved=w,us(o,C)}function us(o,d){o.lanes|=d;var w=o.alternate;for(w!==null&&(w.lanes|=d),w=o,o=o.return;o!==null;)o.childLanes|=d,w=o.alternate,w!==null&&(w.childLanes|=d),w=o,o=o.return;return w.tag===3?w.stateNode:null}var to=!1;function Fm(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zb(o,d){o=o.updateQueue,d.updateQueue===o&&(d.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ds(o,d){return{eventTime:o,lane:d,tag:0,payload:null,callback:null,next:null}}function ro(o,d,w){var C=o.updateQueue;if(C===null)return null;if(C=C.shared,(Bt&2)!==0){var k=C.pending;return k===null?d.next=d:(d.next=k.next,k.next=d),C.pending=d,us(o,w)}return k=C.interleaved,k===null?(d.next=d,Bm(C)):(d.next=k.next,k.next=d),C.interleaved=d,us(o,w)}function Nf(o,d,w){if(d=d.updateQueue,d!==null&&(d=d.shared,(w&4194240)!==0)){var C=d.lanes;C&=o.pendingLanes,w|=C,d.lanes=w,Br(o,w)}}function $b(o,d){var w=o.updateQueue,C=o.alternate;if(C!==null&&(C=C.updateQueue,w===C)){var k=null,j=null;if(w=w.firstBaseUpdate,w!==null){do{var z={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};j===null?k=j=z:j=j.next=z,w=w.next}while(w!==null);j===null?k=j=d:j=j.next=d}else k=j=d;w={baseState:C.baseState,firstBaseUpdate:k,lastBaseUpdate:j,shared:C.shared,effects:C.effects},o.updateQueue=w;return}o=w.lastBaseUpdate,o===null?w.firstBaseUpdate=d:o.next=d,w.lastBaseUpdate=d}function Of(o,d,w,C){var k=o.updateQueue;to=!1;var j=k.firstBaseUpdate,z=k.lastBaseUpdate,K=k.shared.pending;if(K!==null){k.shared.pending=null;var ee=K,ve=ee.next;ee.next=null,z===null?j=ve:z.next=ve,z=ee;var ke=o.alternate;ke!==null&&(ke=ke.updateQueue,K=ke.lastBaseUpdate,K!==z&&(K===null?ke.firstBaseUpdate=ve:K.next=ve,ke.lastBaseUpdate=ee))}if(j!==null){var Pe=k.baseState;z=0,ke=ve=ee=null,K=j;do{var Ie=K.lane,Ke=K.eventTime;if((C&Ie)===Ie){ke!==null&&(ke=ke.next={eventTime:Ke,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var rt=o,it=K;switch(Ie=d,Ke=w,it.tag){case 1:if(rt=it.payload,typeof rt=="function"){Pe=rt.call(Ke,Pe,Ie);break e}Pe=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=it.payload,Ie=typeof rt=="function"?rt.call(Ke,Pe,Ie):rt,Ie==null)break e;Pe=Ae({},Pe,Ie);break e;case 2:to=!0}}K.callback!==null&&K.lane!==0&&(o.flags|=64,Ie=k.effects,Ie===null?k.effects=[K]:Ie.push(K))}else Ke={eventTime:Ke,lane:Ie,tag:K.tag,payload:K.payload,callback:K.callback,next:null},ke===null?(ve=ke=Ke,ee=Pe):ke=ke.next=Ke,z|=Ie;if(K=K.next,K===null){if(K=k.shared.pending,K===null)break;Ie=K,K=Ie.next,Ie.next=null,k.lastBaseUpdate=Ie,k.shared.pending=null}}while(!0);if(ke===null&&(ee=Pe),k.baseState=ee,k.firstBaseUpdate=ve,k.lastBaseUpdate=ke,d=k.shared.interleaved,d!==null){k=d;do z|=k.lane,k=k.next;while(k!==d)}else j===null&&(k.shared.lanes=0);Vo|=z,o.lanes=z,o.memoizedState=Pe}}function Wb(o,d,w){if(o=d.effects,d.effects=null,o!==null)for(d=0;d<o.length;d++){var C=o[d],k=C.callback;if(k!==null){if(C.callback=null,C=w,typeof k!="function")throw Error(r(191,k));k.call(C)}}}var wu={},Fa=Qs(wu),bu=Qs(wu),Eu=Qs(wu);function $o(o){if(o===wu)throw Error(r(174));return o}function Um(o,d){switch(dr(Eu,d),dr(bu,o),dr(Fa,wu),o=d.nodeType,o){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Ht(null,"");break;default:o=o===8?d.parentNode:d,d=o.namespaceURI||null,o=o.tagName,d=Ht(d,o)}xr(Fa),dr(Fa,d)}function Yl(){xr(Fa),xr(bu),xr(Eu)}function Vb(o){$o(Eu.current);var d=$o(Fa.current),w=Ht(d,o.type);d!==w&&(dr(bu,o),dr(Fa,w))}function zm(o){bu.current===o&&(xr(Fa),xr(bu))}var jr=Qs(0);function If(o){for(var d=o;d!==null;){if(d.tag===13){var w=d.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var $m=[];function Wm(){for(var o=0;o<$m.length;o++)$m[o]._workInProgressVersionPrimary=null;$m.length=0}var Tf=U.ReactCurrentDispatcher,Vm=U.ReactCurrentBatchConfig,Wo=0,Rr=null,hn=null,Sn=null,kf=!1,Su=!1,Cu=0,Rj=0;function Xn(){throw Error(r(321))}function Hm(o,d){if(d===null)return!1;for(var w=0;w<d.length&&w<o.length;w++)if(!oe(o[w],d[w]))return!1;return!0}function qm(o,d,w,C,k,j){if(Wo=j,Rr=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Tf.current=o===null||o.memoizedState===null?Bj:Fj,o=w(C,k),Su){j=0;do{if(Su=!1,Cu=0,25<=j)throw Error(r(301));j+=1,Sn=hn=null,d.updateQueue=null,Tf.current=Uj,o=w(C,k)}while(Su)}if(Tf.current=Rf,d=hn!==null&&hn.next!==null,Wo=0,Sn=hn=Rr=null,kf=!1,d)throw Error(r(300));return o}function Gm(){var o=Cu!==0;return Cu=0,o}function Ua(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?Rr.memoizedState=Sn=o:Sn=Sn.next=o,Sn}function ea(){if(hn===null){var o=Rr.alternate;o=o!==null?o.memoizedState:null}else o=hn.next;var d=Sn===null?Rr.memoizedState:Sn.next;if(d!==null)Sn=d,hn=o;else{if(o===null)throw Error(r(310));hn=o,o={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},Sn===null?Rr.memoizedState=Sn=o:Sn=Sn.next=o}return Sn}function Au(o,d){return typeof d=="function"?d(o):d}function Km(o){var d=ea(),w=d.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=o;var C=hn,k=C.baseQueue,j=w.pending;if(j!==null){if(k!==null){var z=k.next;k.next=j.next,j.next=z}C.baseQueue=k=j,w.pending=null}if(k!==null){j=k.next,C=C.baseState;var K=z=null,ee=null,ve=j;do{var ke=ve.lane;if((Wo&ke)===ke)ee!==null&&(ee=ee.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),C=ve.hasEagerState?ve.eagerState:o(C,ve.action);else{var Pe={lane:ke,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};ee===null?(K=ee=Pe,z=C):ee=ee.next=Pe,Rr.lanes|=ke,Vo|=ke}ve=ve.next}while(ve!==null&&ve!==j);ee===null?z=C:ee.next=K,oe(C,d.memoizedState)||(hi=!0),d.memoizedState=C,d.baseState=z,d.baseQueue=ee,w.lastRenderedState=C}if(o=w.interleaved,o!==null){k=o;do j=k.lane,Rr.lanes|=j,Vo|=j,k=k.next;while(k!==o)}else k===null&&(w.lanes=0);return[d.memoizedState,w.dispatch]}function Xm(o){var d=ea(),w=d.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=o;var C=w.dispatch,k=w.pending,j=d.memoizedState;if(k!==null){w.pending=null;var z=k=k.next;do j=o(j,z.action),z=z.next;while(z!==k);oe(j,d.memoizedState)||(hi=!0),d.memoizedState=j,d.baseQueue===null&&(d.baseState=j),w.lastRenderedState=j}return[j,C]}function Hb(){}function qb(o,d){var w=Rr,C=ea(),k=d(),j=!oe(C.memoizedState,k);if(j&&(C.memoizedState=k,hi=!0),C=C.queue,Ym(Xb.bind(null,w,C,o),[o]),C.getSnapshot!==d||j||Sn!==null&&Sn.memoizedState.tag&1){if(w.flags|=2048,_u(9,Kb.bind(null,w,C,k,d),void 0,null),Cn===null)throw Error(r(349));(Wo&30)!==0||Gb(w,d,k)}return k}function Gb(o,d,w){o.flags|=16384,o={getSnapshot:d,value:w},d=Rr.updateQueue,d===null?(d={lastEffect:null,stores:null},Rr.updateQueue=d,d.stores=[o]):(w=d.stores,w===null?d.stores=[o]:w.push(o))}function Kb(o,d,w,C){d.value=w,d.getSnapshot=C,Yb(d)&&Zb(o)}function Xb(o,d,w){return w(function(){Yb(d)&&Zb(o)})}function Yb(o){var d=o.getSnapshot;o=o.value;try{var w=d();return!oe(o,w)}catch{return!0}}function Zb(o){var d=us(o,1);d!==null&&Sa(d,o,1,-1)}function Qb(o){var d=Ua();return typeof o=="function"&&(o=o()),d.memoizedState=d.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:o},d.queue=o,o=o.dispatch=Lj.bind(null,Rr,o),[d.memoizedState,o]}function _u(o,d,w,C){return o={tag:o,create:d,destroy:w,deps:C,next:null},d=Rr.updateQueue,d===null?(d={lastEffect:null,stores:null},Rr.updateQueue=d,d.lastEffect=o.next=o):(w=d.lastEffect,w===null?d.lastEffect=o.next=o:(C=w.next,w.next=o,o.next=C,d.lastEffect=o)),o}function Jb(){return ea().memoizedState}function Pf(o,d,w,C){var k=Ua();Rr.flags|=o,k.memoizedState=_u(1|d,w,void 0,C===void 0?null:C)}function jf(o,d,w,C){var k=ea();C=C===void 0?null:C;var j=void 0;if(hn!==null){var z=hn.memoizedState;if(j=z.destroy,C!==null&&Hm(C,z.deps)){k.memoizedState=_u(d,w,j,C);return}}Rr.flags|=o,k.memoizedState=_u(1|d,w,j,C)}function e2(o,d){return Pf(8390656,8,o,d)}function Ym(o,d){return jf(2048,8,o,d)}function t2(o,d){return jf(4,2,o,d)}function r2(o,d){return jf(4,4,o,d)}function n2(o,d){if(typeof d=="function")return o=o(),d(o),function(){d(null)};if(d!=null)return o=o(),d.current=o,function(){d.current=null}}function i2(o,d,w){return w=w!=null?w.concat([o]):null,jf(4,4,n2.bind(null,d,o),w)}function Zm(){}function a2(o,d){var w=ea();d=d===void 0?null:d;var C=w.memoizedState;return C!==null&&d!==null&&Hm(d,C[1])?C[0]:(w.memoizedState=[o,d],o)}function s2(o,d){var w=ea();d=d===void 0?null:d;var C=w.memoizedState;return C!==null&&d!==null&&Hm(d,C[1])?C[0]:(o=o(),w.memoizedState=[o,d],o)}function o2(o,d,w){return(Wo&21)===0?(o.baseState&&(o.baseState=!1,hi=!0),o.memoizedState=w):(oe(w,d)||(w=cn(),Rr.lanes|=w,Vo|=w,o.baseState=!0),d)}function Mj(o,d){var w=St;St=w!==0&&4>w?w:4,o(!0);var C=Vm.transition;Vm.transition={};try{o(!1),d()}finally{St=w,Vm.transition=C}}function l2(){return ea().memoizedState}function Dj(o,d,w){var C=so(o);if(w={lane:C,action:w,hasEagerState:!1,eagerState:null,next:null},c2(o))u2(d,w);else if(w=Ub(o,d,w,C),w!==null){var k=si();Sa(w,o,C,k),d2(w,d,C)}}function Lj(o,d,w){var C=so(o),k={lane:C,action:w,hasEagerState:!1,eagerState:null,next:null};if(c2(o))u2(d,k);else{var j=o.alternate;if(o.lanes===0&&(j===null||j.lanes===0)&&(j=d.lastRenderedReducer,j!==null))try{var z=d.lastRenderedState,K=j(z,w);if(k.hasEagerState=!0,k.eagerState=K,oe(K,z)){var ee=d.interleaved;ee===null?(k.next=k,Bm(d)):(k.next=ee.next,ee.next=k),d.interleaved=k;return}}catch{}finally{}w=Ub(o,d,k,C),w!==null&&(k=si(),Sa(w,o,C,k),d2(w,d,C))}}function c2(o){var d=o.alternate;return o===Rr||d!==null&&d===Rr}function u2(o,d){Su=kf=!0;var w=o.pending;w===null?d.next=d:(d.next=w.next,w.next=d),o.pending=d}function d2(o,d,w){if((w&4194240)!==0){var C=d.lanes;C&=o.pendingLanes,w|=C,d.lanes=w,Br(o,w)}}var Rf={readContext:Ji,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useInsertionEffect:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useSyncExternalStore:Xn,useId:Xn,unstable_isNewReconciler:!1},Bj={readContext:Ji,useCallback:function(o,d){return Ua().memoizedState=[o,d===void 0?null:d],o},useContext:Ji,useEffect:e2,useImperativeHandle:function(o,d,w){return w=w!=null?w.concat([o]):null,Pf(4194308,4,n2.bind(null,d,o),w)},useLayoutEffect:function(o,d){return Pf(4194308,4,o,d)},useInsertionEffect:function(o,d){return Pf(4,2,o,d)},useMemo:function(o,d){var w=Ua();return d=d===void 0?null:d,o=o(),w.memoizedState=[o,d],o},useReducer:function(o,d,w){var C=Ua();return d=w!==void 0?w(d):d,C.memoizedState=C.baseState=d,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:d},C.queue=o,o=o.dispatch=Dj.bind(null,Rr,o),[C.memoizedState,o]},useRef:function(o){var d=Ua();return o={current:o},d.memoizedState=o},useState:Qb,useDebugValue:Zm,useDeferredValue:function(o){return Ua().memoizedState=o},useTransition:function(){var o=Qb(!1),d=o[0];return o=Mj.bind(null,o[1]),Ua().memoizedState=o,[d,o]},useMutableSource:function(){},useSyncExternalStore:function(o,d,w){var C=Rr,k=Ua();if(Ar){if(w===void 0)throw Error(r(407));w=w()}else{if(w=d(),Cn===null)throw Error(r(349));(Wo&30)!==0||Gb(C,d,w)}k.memoizedState=w;var j={value:w,getSnapshot:d};return k.queue=j,e2(Xb.bind(null,C,j,o),[o]),C.flags|=2048,_u(9,Kb.bind(null,C,j,w,d),void 0,null),w},useId:function(){var o=Ua(),d=Cn.identifierPrefix;if(Ar){var w=cs,C=ls;w=(C&~(1<<32-ii(C)-1)).toString(32)+w,d=":"+d+"R"+w,w=Cu++,0<w&&(d+="H"+w.toString(32)),d+=":"}else w=Rj++,d=":"+d+"r"+w.toString(32)+":";return o.memoizedState=d},unstable_isNewReconciler:!1},Fj={readContext:Ji,useCallback:a2,useContext:Ji,useEffect:Ym,useImperativeHandle:i2,useInsertionEffect:t2,useLayoutEffect:r2,useMemo:s2,useReducer:Km,useRef:Jb,useState:function(){return Km(Au)},useDebugValue:Zm,useDeferredValue:function(o){var d=ea();return o2(d,hn.memoizedState,o)},useTransition:function(){var o=Km(Au)[0],d=ea().memoizedState;return[o,d]},useMutableSource:Hb,useSyncExternalStore:qb,useId:l2,unstable_isNewReconciler:!1},Uj={readContext:Ji,useCallback:a2,useContext:Ji,useEffect:Ym,useImperativeHandle:i2,useInsertionEffect:t2,useLayoutEffect:r2,useMemo:s2,useReducer:Xm,useRef:Jb,useState:function(){return Xm(Au)},useDebugValue:Zm,useDeferredValue:function(o){var d=ea();return hn===null?d.memoizedState=o:o2(d,hn.memoizedState,o)},useTransition:function(){var o=Xm(Au)[0],d=ea().memoizedState;return[o,d]},useMutableSource:Hb,useSyncExternalStore:qb,useId:l2,unstable_isNewReconciler:!1};function wa(o,d){if(o&&o.defaultProps){d=Ae({},d),o=o.defaultProps;for(var w in o)d[w]===void 0&&(d[w]=o[w]);return d}return d}function Qm(o,d,w,C){d=o.memoizedState,w=w(C,d),w=w==null?d:Ae({},d,w),o.memoizedState=w,o.lanes===0&&(o.updateQueue.baseState=w)}var Mf={isMounted:function(o){return(o=o._reactInternals)?lt(o)===o:!1},enqueueSetState:function(o,d,w){o=o._reactInternals;var C=si(),k=so(o),j=ds(C,k);j.payload=d,w!=null&&(j.callback=w),d=ro(o,j,k),d!==null&&(Sa(d,o,k,C),Nf(d,o,k))},enqueueReplaceState:function(o,d,w){o=o._reactInternals;var C=si(),k=so(o),j=ds(C,k);j.tag=1,j.payload=d,w!=null&&(j.callback=w),d=ro(o,j,k),d!==null&&(Sa(d,o,k,C),Nf(d,o,k))},enqueueForceUpdate:function(o,d){o=o._reactInternals;var w=si(),C=so(o),k=ds(w,C);k.tag=2,d!=null&&(k.callback=d),d=ro(o,k,C),d!==null&&(Sa(d,o,C,w),Nf(d,o,C))}};function f2(o,d,w,C,k,j,z){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(C,j,z):d.prototype&&d.prototype.isPureReactComponent?!ge(w,C)||!ge(k,j):!0}function h2(o,d,w){var C=!1,k=Js,j=d.contextType;return typeof j=="object"&&j!==null?j=Ji(j):(k=fi(d)?Bo:Kn.current,C=d.contextTypes,j=(C=C!=null)?Wl(o,k):Js),d=new d(w,j),o.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Mf,o.stateNode=d,d._reactInternals=o,C&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=k,o.__reactInternalMemoizedMaskedChildContext=j),d}function p2(o,d,w,C){o=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(w,C),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(w,C),d.state!==o&&Mf.enqueueReplaceState(d,d.state,null)}function Jm(o,d,w,C){var k=o.stateNode;k.props=w,k.state=o.memoizedState,k.refs={},Fm(o);var j=d.contextType;typeof j=="object"&&j!==null?k.context=Ji(j):(j=fi(d)?Bo:Kn.current,k.context=Wl(o,j)),k.state=o.memoizedState,j=d.getDerivedStateFromProps,typeof j=="function"&&(Qm(o,d,j,w),k.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(d=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),d!==k.state&&Mf.enqueueReplaceState(k,k.state,null),Of(o,w,k,C),k.state=o.memoizedState),typeof k.componentDidMount=="function"&&(o.flags|=4194308)}function Zl(o,d){try{var w="",C=d;do w+=Xe(C),C=C.return;while(C);var k=w}catch(j){k=`
Error generating stack: `+j.message+`
`+j.stack}return{value:o,source:d,stack:k,digest:null}}function eg(o,d,w){return{value:o,source:null,stack:w??null,digest:d??null}}function tg(o,d){try{console.error(d.value)}catch(w){setTimeout(function(){throw w})}}var zj=typeof WeakMap=="function"?WeakMap:Map;function m2(o,d,w){w=ds(-1,w),w.tag=3,w.payload={element:null};var C=d.value;return w.callback=function(){$f||($f=!0,gg=C),tg(o,d)},w}function g2(o,d,w){w=ds(-1,w),w.tag=3;var C=o.type.getDerivedStateFromError;if(typeof C=="function"){var k=d.value;w.payload=function(){return C(k)},w.callback=function(){tg(o,d)}}var j=o.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(w.callback=function(){tg(o,d),typeof C!="function"&&(io===null?io=new Set([this]):io.add(this));var z=d.stack;this.componentDidCatch(d.value,{componentStack:z!==null?z:""})}),w}function x2(o,d,w){var C=o.pingCache;if(C===null){C=o.pingCache=new zj;var k=new Set;C.set(d,k)}else k=C.get(d),k===void 0&&(k=new Set,C.set(d,k));k.has(w)||(k.add(w),o=t8.bind(null,o,d,w),d.then(o,o))}function v2(o){do{var d;if((d=o.tag===13)&&(d=o.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return o;o=o.return}while(o!==null);return null}function y2(o,d,w,C,k){return(o.mode&1)===0?(o===d?o.flags|=65536:(o.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(d=ds(-1,1),d.tag=2,ro(w,d,1))),w.lanes|=1),o):(o.flags|=65536,o.lanes=k,o)}var $j=U.ReactCurrentOwner,hi=!1;function ai(o,d,w,C){d.child=o===null?Fb(d,null,w,C):Gl(d,o.child,w,C)}function w2(o,d,w,C,k){w=w.render;var j=d.ref;return Xl(d,k),C=qm(o,d,w,C,j,k),w=Gm(),o!==null&&!hi?(d.updateQueue=o.updateQueue,d.flags&=-2053,o.lanes&=~k,fs(o,d,k)):(Ar&&w&&Im(d),d.flags|=1,ai(o,d,C,k),d.child)}function b2(o,d,w,C,k){if(o===null){var j=w.type;return typeof j=="function"&&!Sg(j)&&j.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(d.tag=15,d.type=j,E2(o,d,j,C,k)):(o=Kf(w.type,null,C,d,d.mode,k),o.ref=d.ref,o.return=d,d.child=o)}if(j=o.child,(o.lanes&k)===0){var z=j.memoizedProps;if(w=w.compare,w=w!==null?w:ge,w(z,C)&&o.ref===d.ref)return fs(o,d,k)}return d.flags|=1,o=lo(j,C),o.ref=d.ref,o.return=d,d.child=o}function E2(o,d,w,C,k){if(o!==null){var j=o.memoizedProps;if(ge(j,C)&&o.ref===d.ref)if(hi=!1,d.pendingProps=C=j,(o.lanes&k)!==0)(o.flags&131072)!==0&&(hi=!0);else return d.lanes=o.lanes,fs(o,d,k)}return rg(o,d,w,C,k)}function S2(o,d,w){var C=d.pendingProps,k=C.children,j=o!==null?o.memoizedState:null;if(C.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},dr(Jl,Ri),Ri|=w;else{if((w&1073741824)===0)return o=j!==null?j.baseLanes|w:w,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:o,cachePool:null,transitions:null},d.updateQueue=null,dr(Jl,Ri),Ri|=o,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=j!==null?j.baseLanes:w,dr(Jl,Ri),Ri|=C}else j!==null?(C=j.baseLanes|w,d.memoizedState=null):C=w,dr(Jl,Ri),Ri|=C;return ai(o,d,k,w),d.child}function C2(o,d){var w=d.ref;(o===null&&w!==null||o!==null&&o.ref!==w)&&(d.flags|=512,d.flags|=2097152)}function rg(o,d,w,C,k){var j=fi(w)?Bo:Kn.current;return j=Wl(d,j),Xl(d,k),w=qm(o,d,w,C,j,k),C=Gm(),o!==null&&!hi?(d.updateQueue=o.updateQueue,d.flags&=-2053,o.lanes&=~k,fs(o,d,k)):(Ar&&C&&Im(d),d.flags|=1,ai(o,d,w,k),d.child)}function A2(o,d,w,C,k){if(fi(w)){var j=!0;yf(d)}else j=!1;if(Xl(d,k),d.stateNode===null)Lf(o,d),h2(d,w,C),Jm(d,w,C,k),C=!0;else if(o===null){var z=d.stateNode,K=d.memoizedProps;z.props=K;var ee=z.context,ve=w.contextType;typeof ve=="object"&&ve!==null?ve=Ji(ve):(ve=fi(w)?Bo:Kn.current,ve=Wl(d,ve));var ke=w.getDerivedStateFromProps,Pe=typeof ke=="function"||typeof z.getSnapshotBeforeUpdate=="function";Pe||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(K!==C||ee!==ve)&&p2(d,z,C,ve),to=!1;var Ie=d.memoizedState;z.state=Ie,Of(d,C,z,k),ee=d.memoizedState,K!==C||Ie!==ee||di.current||to?(typeof ke=="function"&&(Qm(d,w,ke,C),ee=d.memoizedState),(K=to||f2(d,w,K,C,Ie,ee,ve))?(Pe||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(d.flags|=4194308)):(typeof z.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=C,d.memoizedState=ee),z.props=C,z.state=ee,z.context=ve,C=K):(typeof z.componentDidMount=="function"&&(d.flags|=4194308),C=!1)}else{z=d.stateNode,zb(o,d),K=d.memoizedProps,ve=d.type===d.elementType?K:wa(d.type,K),z.props=ve,Pe=d.pendingProps,Ie=z.context,ee=w.contextType,typeof ee=="object"&&ee!==null?ee=Ji(ee):(ee=fi(w)?Bo:Kn.current,ee=Wl(d,ee));var Ke=w.getDerivedStateFromProps;(ke=typeof Ke=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(K!==Pe||Ie!==ee)&&p2(d,z,C,ee),to=!1,Ie=d.memoizedState,z.state=Ie,Of(d,C,z,k);var rt=d.memoizedState;K!==Pe||Ie!==rt||di.current||to?(typeof Ke=="function"&&(Qm(d,w,Ke,C),rt=d.memoizedState),(ve=to||f2(d,w,ve,C,Ie,rt,ee)||!1)?(ke||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(C,rt,ee),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(C,rt,ee)),typeof z.componentDidUpdate=="function"&&(d.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof z.componentDidUpdate!="function"||K===o.memoizedProps&&Ie===o.memoizedState||(d.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&Ie===o.memoizedState||(d.flags|=1024),d.memoizedProps=C,d.memoizedState=rt),z.props=C,z.state=rt,z.context=ee,C=ve):(typeof z.componentDidUpdate!="function"||K===o.memoizedProps&&Ie===o.memoizedState||(d.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&Ie===o.memoizedState||(d.flags|=1024),C=!1)}return ng(o,d,w,C,j,k)}function ng(o,d,w,C,k,j){C2(o,d);var z=(d.flags&128)!==0;if(!C&&!z)return k&&Tb(d,w,!1),fs(o,d,j);C=d.stateNode,$j.current=d;var K=z&&typeof w.getDerivedStateFromError!="function"?null:C.render();return d.flags|=1,o!==null&&z?(d.child=Gl(d,o.child,null,j),d.child=Gl(d,null,K,j)):ai(o,d,K,j),d.memoizedState=C.state,k&&Tb(d,w,!0),d.child}function _2(o){var d=o.stateNode;d.pendingContext?Ob(o,d.pendingContext,d.pendingContext!==d.context):d.context&&Ob(o,d.context,!1),Um(o,d.containerInfo)}function N2(o,d,w,C,k){return ql(),jm(k),d.flags|=256,ai(o,d,w,C),d.child}var ig={dehydrated:null,treeContext:null,retryLane:0};function ag(o){return{baseLanes:o,cachePool:null,transitions:null}}function O2(o,d,w){var C=d.pendingProps,k=jr.current,j=!1,z=(d.flags&128)!==0,K;if((K=z)||(K=o!==null&&o.memoizedState===null?!1:(k&2)!==0),K?(j=!0,d.flags&=-129):(o===null||o.memoizedState!==null)&&(k|=1),dr(jr,k&1),o===null)return Pm(d),o=d.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((d.mode&1)===0?d.lanes=1:o.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(z=C.children,o=C.fallback,j?(C=d.mode,j=d.child,z={mode:"hidden",children:z},(C&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=z):j=Xf(z,C,0,null),o=Ko(o,C,w,null),j.return=d,o.return=d,j.sibling=o,d.child=j,d.child.memoizedState=ag(w),d.memoizedState=ig,o):sg(d,z));if(k=o.memoizedState,k!==null&&(K=k.dehydrated,K!==null))return Wj(o,d,z,C,K,k,w);if(j){j=C.fallback,z=d.mode,k=o.child,K=k.sibling;var ee={mode:"hidden",children:C.children};return(z&1)===0&&d.child!==k?(C=d.child,C.childLanes=0,C.pendingProps=ee,d.deletions=null):(C=lo(k,ee),C.subtreeFlags=k.subtreeFlags&14680064),K!==null?j=lo(K,j):(j=Ko(j,z,w,null),j.flags|=2),j.return=d,C.return=d,C.sibling=j,d.child=C,C=j,j=d.child,z=o.child.memoizedState,z=z===null?ag(w):{baseLanes:z.baseLanes|w,cachePool:null,transitions:z.transitions},j.memoizedState=z,j.childLanes=o.childLanes&~w,d.memoizedState=ig,C}return j=o.child,o=j.sibling,C=lo(j,{mode:"visible",children:C.children}),(d.mode&1)===0&&(C.lanes=w),C.return=d,C.sibling=null,o!==null&&(w=d.deletions,w===null?(d.deletions=[o],d.flags|=16):w.push(o)),d.child=C,d.memoizedState=null,C}function sg(o,d){return d=Xf({mode:"visible",children:d},o.mode,0,null),d.return=o,o.child=d}function Df(o,d,w,C){return C!==null&&jm(C),Gl(d,o.child,null,w),o=sg(d,d.pendingProps.children),o.flags|=2,d.memoizedState=null,o}function Wj(o,d,w,C,k,j,z){if(w)return d.flags&256?(d.flags&=-257,C=eg(Error(r(422))),Df(o,d,z,C)):d.memoizedState!==null?(d.child=o.child,d.flags|=128,null):(j=C.fallback,k=d.mode,C=Xf({mode:"visible",children:C.children},k,0,null),j=Ko(j,k,z,null),j.flags|=2,C.return=d,j.return=d,C.sibling=j,d.child=C,(d.mode&1)!==0&&Gl(d,o.child,null,z),d.child.memoizedState=ag(z),d.memoizedState=ig,j);if((d.mode&1)===0)return Df(o,d,z,null);if(k.data==="$!"){if(C=k.nextSibling&&k.nextSibling.dataset,C)var K=C.dgst;return C=K,j=Error(r(419)),C=eg(j,C,void 0),Df(o,d,z,C)}if(K=(z&o.childLanes)!==0,hi||K){if(C=Cn,C!==null){switch(z&-z){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(C.suspendedLanes|z))!==0?0:k,k!==0&&k!==j.retryLane&&(j.retryLane=k,us(o,k),Sa(C,o,k,-1))}return Eg(),C=eg(Error(r(421))),Df(o,d,z,C)}return k.data==="$?"?(d.flags|=128,d.child=o.child,d=r8.bind(null,o),k._reactRetry=d,null):(o=j.treeContext,ji=Zs(k.nextSibling),Pi=d,Ar=!0,ya=null,o!==null&&(Zi[Qi++]=ls,Zi[Qi++]=cs,Zi[Qi++]=Fo,ls=o.id,cs=o.overflow,Fo=d),d=sg(d,C.children),d.flags|=4096,d)}function I2(o,d,w){o.lanes|=d;var C=o.alternate;C!==null&&(C.lanes|=d),Lm(o.return,d,w)}function og(o,d,w,C,k){var j=o.memoizedState;j===null?o.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:C,tail:w,tailMode:k}:(j.isBackwards=d,j.rendering=null,j.renderingStartTime=0,j.last=C,j.tail=w,j.tailMode=k)}function T2(o,d,w){var C=d.pendingProps,k=C.revealOrder,j=C.tail;if(ai(o,d,C.children,w),C=jr.current,(C&2)!==0)C=C&1|2,d.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=d.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&I2(o,w,d);else if(o.tag===19)I2(o,w,d);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===d)break e;for(;o.sibling===null;){if(o.return===null||o.return===d)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}C&=1}if(dr(jr,C),(d.mode&1)===0)d.memoizedState=null;else switch(k){case"forwards":for(w=d.child,k=null;w!==null;)o=w.alternate,o!==null&&If(o)===null&&(k=w),w=w.sibling;w=k,w===null?(k=d.child,d.child=null):(k=w.sibling,w.sibling=null),og(d,!1,k,w,j);break;case"backwards":for(w=null,k=d.child,d.child=null;k!==null;){if(o=k.alternate,o!==null&&If(o)===null){d.child=k;break}o=k.sibling,k.sibling=w,w=k,k=o}og(d,!0,w,null,j);break;case"together":og(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Lf(o,d){(d.mode&1)===0&&o!==null&&(o.alternate=null,d.alternate=null,d.flags|=2)}function fs(o,d,w){if(o!==null&&(d.dependencies=o.dependencies),Vo|=d.lanes,(w&d.childLanes)===0)return null;if(o!==null&&d.child!==o.child)throw Error(r(153));if(d.child!==null){for(o=d.child,w=lo(o,o.pendingProps),d.child=w,w.return=d;o.sibling!==null;)o=o.sibling,w=w.sibling=lo(o,o.pendingProps),w.return=d;w.sibling=null}return d.child}function Vj(o,d,w){switch(d.tag){case 3:_2(d),ql();break;case 5:Vb(d);break;case 1:fi(d.type)&&yf(d);break;case 4:Um(d,d.stateNode.containerInfo);break;case 10:var C=d.type._context,k=d.memoizedProps.value;dr(Af,C._currentValue),C._currentValue=k;break;case 13:if(C=d.memoizedState,C!==null)return C.dehydrated!==null?(dr(jr,jr.current&1),d.flags|=128,null):(w&d.child.childLanes)!==0?O2(o,d,w):(dr(jr,jr.current&1),o=fs(o,d,w),o!==null?o.sibling:null);dr(jr,jr.current&1);break;case 19:if(C=(w&d.childLanes)!==0,(o.flags&128)!==0){if(C)return T2(o,d,w);d.flags|=128}if(k=d.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),dr(jr,jr.current),C)break;return null;case 22:case 23:return d.lanes=0,S2(o,d,w)}return fs(o,d,w)}var k2,lg,P2,j2;k2=function(o,d){for(var w=d.child;w!==null;){if(w.tag===5||w.tag===6)o.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===d)break;for(;w.sibling===null;){if(w.return===null||w.return===d)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},lg=function(){},P2=function(o,d,w,C){var k=o.memoizedProps;if(k!==C){o=d.stateNode,$o(Fa.current);var j=null;switch(w){case"input":k=Qe(o,k),C=Qe(o,C),j=[];break;case"select":k=Ae({},k,{value:void 0}),C=Ae({},C,{value:void 0}),j=[];break;case"textarea":k=ha(o,k),C=ha(o,C),j=[];break;default:typeof k.onClick!="function"&&typeof C.onClick=="function"&&(o.onclick=gf)}jt(w,C);var z;w=null;for(ve in k)if(!C.hasOwnProperty(ve)&&k.hasOwnProperty(ve)&&k[ve]!=null)if(ve==="style"){var K=k[ve];for(z in K)K.hasOwnProperty(z)&&(w||(w={}),w[z]="")}else ve!=="dangerouslySetInnerHTML"&&ve!=="children"&&ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(i.hasOwnProperty(ve)?j||(j=[]):(j=j||[]).push(ve,null));for(ve in C){var ee=C[ve];if(K=k?.[ve],C.hasOwnProperty(ve)&&ee!==K&&(ee!=null||K!=null))if(ve==="style")if(K){for(z in K)!K.hasOwnProperty(z)||ee&&ee.hasOwnProperty(z)||(w||(w={}),w[z]="");for(z in ee)ee.hasOwnProperty(z)&&K[z]!==ee[z]&&(w||(w={}),w[z]=ee[z])}else w||(j||(j=[]),j.push(ve,w)),w=ee;else ve==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,K=K?K.__html:void 0,ee!=null&&K!==ee&&(j=j||[]).push(ve,ee)):ve==="children"?typeof ee!="string"&&typeof ee!="number"||(j=j||[]).push(ve,""+ee):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&(i.hasOwnProperty(ve)?(ee!=null&&ve==="onScroll"&&gr("scroll",o),j||K===ee||(j=[])):(j=j||[]).push(ve,ee))}w&&(j=j||[]).push("style",w);var ve=j;(d.updateQueue=ve)&&(d.flags|=4)}},j2=function(o,d,w,C){w!==C&&(d.flags|=4)};function Nu(o,d){if(!Ar)switch(o.tailMode){case"hidden":d=o.tail;for(var w=null;d!==null;)d.alternate!==null&&(w=d),d=d.sibling;w===null?o.tail=null:w.sibling=null;break;case"collapsed":w=o.tail;for(var C=null;w!==null;)w.alternate!==null&&(C=w),w=w.sibling;C===null?d||o.tail===null?o.tail=null:o.tail.sibling=null:C.sibling=null}}function Yn(o){var d=o.alternate!==null&&o.alternate.child===o.child,w=0,C=0;if(d)for(var k=o.child;k!==null;)w|=k.lanes|k.childLanes,C|=k.subtreeFlags&14680064,C|=k.flags&14680064,k.return=o,k=k.sibling;else for(k=o.child;k!==null;)w|=k.lanes|k.childLanes,C|=k.subtreeFlags,C|=k.flags,k.return=o,k=k.sibling;return o.subtreeFlags|=C,o.childLanes=w,d}function Hj(o,d,w){var C=d.pendingProps;switch(Tm(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(d),null;case 1:return fi(d.type)&&vf(),Yn(d),null;case 3:return C=d.stateNode,Yl(),xr(di),xr(Kn),Wm(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(o===null||o.child===null)&&(Sf(d)?d.flags|=4:o===null||o.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,ya!==null&&(yg(ya),ya=null))),lg(o,d),Yn(d),null;case 5:zm(d);var k=$o(Eu.current);if(w=d.type,o!==null&&d.stateNode!=null)P2(o,d,w,C,k),o.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!C){if(d.stateNode===null)throw Error(r(166));return Yn(d),null}if(o=$o(Fa.current),Sf(d)){C=d.stateNode,w=d.type;var j=d.memoizedProps;switch(C[Ba]=d,C[xu]=j,o=(d.mode&1)!==0,w){case"dialog":gr("cancel",C),gr("close",C);break;case"iframe":case"object":case"embed":gr("load",C);break;case"video":case"audio":for(k=0;k<pu.length;k++)gr(pu[k],C);break;case"source":gr("error",C);break;case"img":case"image":case"link":gr("error",C),gr("load",C);break;case"details":gr("toggle",C);break;case"input":_t(C,j),gr("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!j.multiple},gr("invalid",C);break;case"textarea":Ne(C,j),gr("invalid",C)}jt(w,j),k=null;for(var z in j)if(j.hasOwnProperty(z)){var K=j[z];z==="children"?typeof K=="string"?C.textContent!==K&&(j.suppressHydrationWarning!==!0&&mf(C.textContent,K,o),k=["children",K]):typeof K=="number"&&C.textContent!==""+K&&(j.suppressHydrationWarning!==!0&&mf(C.textContent,K,o),k=["children",""+K]):i.hasOwnProperty(z)&&K!=null&&z==="onScroll"&&gr("scroll",C)}switch(w){case"input":De(C),Ct(C,j,!0);break;case"textarea":De(C),Jt(C);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(C.onclick=gf)}C=k,d.updateQueue=C,C!==null&&(d.flags|=4)}else{z=k.nodeType===9?k:k.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Dt(w)),o==="http://www.w3.org/1999/xhtml"?w==="script"?(o=z.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof C.is=="string"?o=z.createElement(w,{is:C.is}):(o=z.createElement(w),w==="select"&&(z=o,C.multiple?z.multiple=!0:C.size&&(z.size=C.size))):o=z.createElementNS(o,w),o[Ba]=d,o[xu]=C,k2(o,d,!1,!1),d.stateNode=o;e:{switch(z=qt(w,C),w){case"dialog":gr("cancel",o),gr("close",o),k=C;break;case"iframe":case"object":case"embed":gr("load",o),k=C;break;case"video":case"audio":for(k=0;k<pu.length;k++)gr(pu[k],o);k=C;break;case"source":gr("error",o),k=C;break;case"img":case"image":case"link":gr("error",o),gr("load",o),k=C;break;case"details":gr("toggle",o),k=C;break;case"input":_t(o,C),k=Qe(o,C),gr("invalid",o);break;case"option":k=C;break;case"select":o._wrapperState={wasMultiple:!!C.multiple},k=Ae({},C,{value:void 0}),gr("invalid",o);break;case"textarea":Ne(o,C),k=ha(o,C),gr("invalid",o);break;default:k=C}jt(w,k),K=k;for(j in K)if(K.hasOwnProperty(j)){var ee=K[j];j==="style"?Fe(o,ee):j==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&wr(o,ee)):j==="children"?typeof ee=="string"?(w!=="textarea"||ee!=="")&&Ai(o,ee):typeof ee=="number"&&Ai(o,""+ee):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?ee!=null&&j==="onScroll"&&gr("scroll",o):ee!=null&&R(o,j,ee,z))}switch(w){case"input":De(o),Ct(o,C,!1);break;case"textarea":De(o),Jt(o);break;case"option":C.value!=null&&o.setAttribute("value",""+fe(C.value));break;case"select":o.multiple=!!C.multiple,j=C.value,j!=null?He(o,!!C.multiple,j,!1):C.defaultValue!=null&&He(o,!!C.multiple,C.defaultValue,!0);break;default:typeof k.onClick=="function"&&(o.onclick=gf)}switch(w){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Yn(d),null;case 6:if(o&&d.stateNode!=null)j2(o,d,o.memoizedProps,C);else{if(typeof C!="string"&&d.stateNode===null)throw Error(r(166));if(w=$o(Eu.current),$o(Fa.current),Sf(d)){if(C=d.stateNode,w=d.memoizedProps,C[Ba]=d,(j=C.nodeValue!==w)&&(o=Pi,o!==null))switch(o.tag){case 3:mf(C.nodeValue,w,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&mf(C.nodeValue,w,(o.mode&1)!==0)}j&&(d.flags|=4)}else C=(w.nodeType===9?w:w.ownerDocument).createTextNode(C),C[Ba]=d,d.stateNode=C}return Yn(d),null;case 13:if(xr(jr),C=d.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ar&&ji!==null&&(d.mode&1)!==0&&(d.flags&128)===0)Db(),ql(),d.flags|=98560,j=!1;else if(j=Sf(d),C!==null&&C.dehydrated!==null){if(o===null){if(!j)throw Error(r(318));if(j=d.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(r(317));j[Ba]=d}else ql(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Yn(d),j=!1}else ya!==null&&(yg(ya),ya=null),j=!0;if(!j)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=w,d):(C=C!==null,C!==(o!==null&&o.memoizedState!==null)&&C&&(d.child.flags|=8192,(d.mode&1)!==0&&(o===null||(jr.current&1)!==0?pn===0&&(pn=3):Eg())),d.updateQueue!==null&&(d.flags|=4),Yn(d),null);case 4:return Yl(),lg(o,d),o===null&&mu(d.stateNode.containerInfo),Yn(d),null;case 10:return Dm(d.type._context),Yn(d),null;case 17:return fi(d.type)&&vf(),Yn(d),null;case 19:if(xr(jr),j=d.memoizedState,j===null)return Yn(d),null;if(C=(d.flags&128)!==0,z=j.rendering,z===null)if(C)Nu(j,!1);else{if(pn!==0||o!==null&&(o.flags&128)!==0)for(o=d.child;o!==null;){if(z=If(o),z!==null){for(d.flags|=128,Nu(j,!1),C=z.updateQueue,C!==null&&(d.updateQueue=C,d.flags|=4),d.subtreeFlags=0,C=w,w=d.child;w!==null;)j=w,o=C,j.flags&=14680066,z=j.alternate,z===null?(j.childLanes=0,j.lanes=o,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=z.childLanes,j.lanes=z.lanes,j.child=z.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=z.memoizedProps,j.memoizedState=z.memoizedState,j.updateQueue=z.updateQueue,j.type=z.type,o=z.dependencies,j.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),w=w.sibling;return dr(jr,jr.current&1|2),d.child}o=o.sibling}j.tail!==null&&Gt()>ec&&(d.flags|=128,C=!0,Nu(j,!1),d.lanes=4194304)}else{if(!C)if(o=If(z),o!==null){if(d.flags|=128,C=!0,w=o.updateQueue,w!==null&&(d.updateQueue=w,d.flags|=4),Nu(j,!0),j.tail===null&&j.tailMode==="hidden"&&!z.alternate&&!Ar)return Yn(d),null}else 2*Gt()-j.renderingStartTime>ec&&w!==1073741824&&(d.flags|=128,C=!0,Nu(j,!1),d.lanes=4194304);j.isBackwards?(z.sibling=d.child,d.child=z):(w=j.last,w!==null?w.sibling=z:d.child=z,j.last=z)}return j.tail!==null?(d=j.tail,j.rendering=d,j.tail=d.sibling,j.renderingStartTime=Gt(),d.sibling=null,w=jr.current,dr(jr,C?w&1|2:w&1),d):(Yn(d),null);case 22:case 23:return bg(),C=d.memoizedState!==null,o!==null&&o.memoizedState!==null!==C&&(d.flags|=8192),C&&(d.mode&1)!==0?(Ri&1073741824)!==0&&(Yn(d),d.subtreeFlags&6&&(d.flags|=8192)):Yn(d),null;case 24:return null;case 25:return null}throw Error(r(156,d.tag))}function qj(o,d){switch(Tm(d),d.tag){case 1:return fi(d.type)&&vf(),o=d.flags,o&65536?(d.flags=o&-65537|128,d):null;case 3:return Yl(),xr(di),xr(Kn),Wm(),o=d.flags,(o&65536)!==0&&(o&128)===0?(d.flags=o&-65537|128,d):null;case 5:return zm(d),null;case 13:if(xr(jr),o=d.memoizedState,o!==null&&o.dehydrated!==null){if(d.alternate===null)throw Error(r(340));ql()}return o=d.flags,o&65536?(d.flags=o&-65537|128,d):null;case 19:return xr(jr),null;case 4:return Yl(),null;case 10:return Dm(d.type._context),null;case 22:case 23:return bg(),null;case 24:return null;default:return null}}var Bf=!1,Zn=!1,Gj=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Ql(o,d){var w=o.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(C){Ur(o,d,C)}else w.current=null}function cg(o,d,w){try{w()}catch(C){Ur(o,d,C)}}var R2=!1;function Kj(o,d){if(bm=Da,o=Nt(),wt(o)){if("selectionStart"in o)var w={start:o.selectionStart,end:o.selectionEnd};else e:{w=(w=o.ownerDocument)&&w.defaultView||window;var C=w.getSelection&&w.getSelection();if(C&&C.rangeCount!==0){w=C.anchorNode;var k=C.anchorOffset,j=C.focusNode;C=C.focusOffset;try{w.nodeType,j.nodeType}catch{w=null;break e}var z=0,K=-1,ee=-1,ve=0,ke=0,Pe=o,Ie=null;t:for(;;){for(var Ke;Pe!==w||k!==0&&Pe.nodeType!==3||(K=z+k),Pe!==j||C!==0&&Pe.nodeType!==3||(ee=z+C),Pe.nodeType===3&&(z+=Pe.nodeValue.length),(Ke=Pe.firstChild)!==null;)Ie=Pe,Pe=Ke;for(;;){if(Pe===o)break t;if(Ie===w&&++ve===k&&(K=z),Ie===j&&++ke===C&&(ee=z),(Ke=Pe.nextSibling)!==null)break;Pe=Ie,Ie=Pe.parentNode}Pe=Ke}w=K===-1||ee===-1?null:{start:K,end:ee}}else w=null}w=w||{start:0,end:0}}else w=null;for(Em={focusedElem:o,selectionRange:w},Da=!1,Je=d;Je!==null;)if(d=Je,o=d.child,(d.subtreeFlags&1028)!==0&&o!==null)o.return=d,Je=o;else for(;Je!==null;){d=Je;try{var rt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(rt!==null){var it=rt.memoizedProps,Kr=rt.memoizedState,ue=d.stateNode,ne=ue.getSnapshotBeforeUpdate(d.elementType===d.type?it:wa(d.type,it),Kr);ue.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var he=d.stateNode.containerInfo;he.nodeType===1?he.textContent="":he.nodeType===9&&he.documentElement&&he.removeChild(he.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Le){Ur(d,d.return,Le)}if(o=d.sibling,o!==null){o.return=d.return,Je=o;break}Je=d.return}return rt=R2,R2=!1,rt}function Ou(o,d,w){var C=d.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var k=C=C.next;do{if((k.tag&o)===o){var j=k.destroy;k.destroy=void 0,j!==void 0&&cg(d,w,j)}k=k.next}while(k!==C)}}function Ff(o,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var w=d=d.next;do{if((w.tag&o)===o){var C=w.create;w.destroy=C()}w=w.next}while(w!==d)}}function ug(o){var d=o.ref;if(d!==null){var w=o.stateNode;switch(o.tag){case 5:o=w;break;default:o=w}typeof d=="function"?d(o):d.current=o}}function M2(o){var d=o.alternate;d!==null&&(o.alternate=null,M2(d)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(d=o.stateNode,d!==null&&(delete d[Ba],delete d[xu],delete d[_m],delete d[Tj],delete d[kj])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function D2(o){return o.tag===5||o.tag===3||o.tag===4}function L2(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||D2(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function dg(o,d,w){var C=o.tag;if(C===5||C===6)o=o.stateNode,d?w.nodeType===8?w.parentNode.insertBefore(o,d):w.insertBefore(o,d):(w.nodeType===8?(d=w.parentNode,d.insertBefore(o,w)):(d=w,d.appendChild(o)),w=w._reactRootContainer,w!=null||d.onclick!==null||(d.onclick=gf));else if(C!==4&&(o=o.child,o!==null))for(dg(o,d,w),o=o.sibling;o!==null;)dg(o,d,w),o=o.sibling}function fg(o,d,w){var C=o.tag;if(C===5||C===6)o=o.stateNode,d?w.insertBefore(o,d):w.appendChild(o);else if(C!==4&&(o=o.child,o!==null))for(fg(o,d,w),o=o.sibling;o!==null;)fg(o,d,w),o=o.sibling}var Mn=null,ba=!1;function no(o,d,w){for(w=w.child;w!==null;)B2(o,d,w),w=w.sibling}function B2(o,d,w){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Mt,w)}catch{}switch(w.tag){case 5:Zn||Ql(w,d);case 6:var C=Mn,k=ba;Mn=null,no(o,d,w),Mn=C,ba=k,Mn!==null&&(ba?(o=Mn,w=w.stateNode,o.nodeType===8?o.parentNode.removeChild(w):o.removeChild(w)):Mn.removeChild(w.stateNode));break;case 18:Mn!==null&&(ba?(o=Mn,w=w.stateNode,o.nodeType===8?Am(o.parentNode,w):o.nodeType===1&&Am(o,w),ga(o)):Am(Mn,w.stateNode));break;case 4:C=Mn,k=ba,Mn=w.stateNode.containerInfo,ba=!0,no(o,d,w),Mn=C,ba=k;break;case 0:case 11:case 14:case 15:if(!Zn&&(C=w.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){k=C=C.next;do{var j=k,z=j.destroy;j=j.tag,z!==void 0&&((j&2)!==0||(j&4)!==0)&&cg(w,d,z),k=k.next}while(k!==C)}no(o,d,w);break;case 1:if(!Zn&&(Ql(w,d),C=w.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=w.memoizedProps,C.state=w.memoizedState,C.componentWillUnmount()}catch(K){Ur(w,d,K)}no(o,d,w);break;case 21:no(o,d,w);break;case 22:w.mode&1?(Zn=(C=Zn)||w.memoizedState!==null,no(o,d,w),Zn=C):no(o,d,w);break;default:no(o,d,w)}}function F2(o){var d=o.updateQueue;if(d!==null){o.updateQueue=null;var w=o.stateNode;w===null&&(w=o.stateNode=new Gj),d.forEach(function(C){var k=n8.bind(null,o,C);w.has(C)||(w.add(C),C.then(k,k))})}}function Ea(o,d){var w=d.deletions;if(w!==null)for(var C=0;C<w.length;C++){var k=w[C];try{var j=o,z=d,K=z;e:for(;K!==null;){switch(K.tag){case 5:Mn=K.stateNode,ba=!1;break e;case 3:Mn=K.stateNode.containerInfo,ba=!0;break e;case 4:Mn=K.stateNode.containerInfo,ba=!0;break e}K=K.return}if(Mn===null)throw Error(r(160));B2(j,z,k),Mn=null,ba=!1;var ee=k.alternate;ee!==null&&(ee.return=null),k.return=null}catch(ve){Ur(k,d,ve)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)U2(d,o),d=d.sibling}function U2(o,d){var w=o.alternate,C=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ea(d,o),za(o),C&4){try{Ou(3,o,o.return),Ff(3,o)}catch(it){Ur(o,o.return,it)}try{Ou(5,o,o.return)}catch(it){Ur(o,o.return,it)}}break;case 1:Ea(d,o),za(o),C&512&&w!==null&&Ql(w,w.return);break;case 5:if(Ea(d,o),za(o),C&512&&w!==null&&Ql(w,w.return),o.flags&32){var k=o.stateNode;try{Ai(k,"")}catch(it){Ur(o,o.return,it)}}if(C&4&&(k=o.stateNode,k!=null)){var j=o.memoizedProps,z=w!==null?w.memoizedProps:j,K=o.type,ee=o.updateQueue;if(o.updateQueue=null,ee!==null)try{K==="input"&&j.type==="radio"&&j.name!=null&&Ft(k,j),qt(K,z);var ve=qt(K,j);for(z=0;z<ee.length;z+=2){var ke=ee[z],Pe=ee[z+1];ke==="style"?Fe(k,Pe):ke==="dangerouslySetInnerHTML"?wr(k,Pe):ke==="children"?Ai(k,Pe):R(k,ke,Pe,ve)}switch(K){case"input":Pt(k,j);break;case"textarea":ut(k,j);break;case"select":var Ie=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!j.multiple;var Ke=j.value;Ke!=null?He(k,!!j.multiple,Ke,!1):Ie!==!!j.multiple&&(j.defaultValue!=null?He(k,!!j.multiple,j.defaultValue,!0):He(k,!!j.multiple,j.multiple?[]:"",!1))}k[xu]=j}catch(it){Ur(o,o.return,it)}}break;case 6:if(Ea(d,o),za(o),C&4){if(o.stateNode===null)throw Error(r(162));k=o.stateNode,j=o.memoizedProps;try{k.nodeValue=j}catch(it){Ur(o,o.return,it)}}break;case 3:if(Ea(d,o),za(o),C&4&&w!==null&&w.memoizedState.isDehydrated)try{ga(d.containerInfo)}catch(it){Ur(o,o.return,it)}break;case 4:Ea(d,o),za(o);break;case 13:Ea(d,o),za(o),k=o.child,k.flags&8192&&(j=k.memoizedState!==null,k.stateNode.isHidden=j,!j||k.alternate!==null&&k.alternate.memoizedState!==null||(mg=Gt())),C&4&&F2(o);break;case 22:if(ke=w!==null&&w.memoizedState!==null,o.mode&1?(Zn=(ve=Zn)||ke,Ea(d,o),Zn=ve):Ea(d,o),za(o),C&8192){if(ve=o.memoizedState!==null,(o.stateNode.isHidden=ve)&&!ke&&(o.mode&1)!==0)for(Je=o,ke=o.child;ke!==null;){for(Pe=Je=ke;Je!==null;){switch(Ie=Je,Ke=Ie.child,Ie.tag){case 0:case 11:case 14:case 15:Ou(4,Ie,Ie.return);break;case 1:Ql(Ie,Ie.return);var rt=Ie.stateNode;if(typeof rt.componentWillUnmount=="function"){C=Ie,w=Ie.return;try{d=C,rt.props=d.memoizedProps,rt.state=d.memoizedState,rt.componentWillUnmount()}catch(it){Ur(C,w,it)}}break;case 5:Ql(Ie,Ie.return);break;case 22:if(Ie.memoizedState!==null){W2(Pe);continue}}Ke!==null?(Ke.return=Ie,Je=Ke):W2(Pe)}ke=ke.sibling}e:for(ke=null,Pe=o;;){if(Pe.tag===5){if(ke===null){ke=Pe;try{k=Pe.stateNode,ve?(j=k.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(K=Pe.stateNode,ee=Pe.memoizedProps.style,z=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,K.style.display=er("display",z))}catch(it){Ur(o,o.return,it)}}}else if(Pe.tag===6){if(ke===null)try{Pe.stateNode.nodeValue=ve?"":Pe.memoizedProps}catch(it){Ur(o,o.return,it)}}else if((Pe.tag!==22&&Pe.tag!==23||Pe.memoizedState===null||Pe===o)&&Pe.child!==null){Pe.child.return=Pe,Pe=Pe.child;continue}if(Pe===o)break e;for(;Pe.sibling===null;){if(Pe.return===null||Pe.return===o)break e;ke===Pe&&(ke=null),Pe=Pe.return}ke===Pe&&(ke=null),Pe.sibling.return=Pe.return,Pe=Pe.sibling}}break;case 19:Ea(d,o),za(o),C&4&&F2(o);break;case 21:break;default:Ea(d,o),za(o)}}function za(o){var d=o.flags;if(d&2){try{e:{for(var w=o.return;w!==null;){if(D2(w)){var C=w;break e}w=w.return}throw Error(r(160))}switch(C.tag){case 5:var k=C.stateNode;C.flags&32&&(Ai(k,""),C.flags&=-33);var j=L2(o);fg(o,j,k);break;case 3:case 4:var z=C.stateNode.containerInfo,K=L2(o);dg(o,K,z);break;default:throw Error(r(161))}}catch(ee){Ur(o,o.return,ee)}o.flags&=-3}d&4096&&(o.flags&=-4097)}function Xj(o,d,w){Je=o,z2(o)}function z2(o,d,w){for(var C=(o.mode&1)!==0;Je!==null;){var k=Je,j=k.child;if(k.tag===22&&C){var z=k.memoizedState!==null||Bf;if(!z){var K=k.alternate,ee=K!==null&&K.memoizedState!==null||Zn;K=Bf;var ve=Zn;if(Bf=z,(Zn=ee)&&!ve)for(Je=k;Je!==null;)z=Je,ee=z.child,z.tag===22&&z.memoizedState!==null?V2(k):ee!==null?(ee.return=z,Je=ee):V2(k);for(;j!==null;)Je=j,z2(j),j=j.sibling;Je=k,Bf=K,Zn=ve}$2(o)}else(k.subtreeFlags&8772)!==0&&j!==null?(j.return=k,Je=j):$2(o)}}function $2(o){for(;Je!==null;){var d=Je;if((d.flags&8772)!==0){var w=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Zn||Ff(5,d);break;case 1:var C=d.stateNode;if(d.flags&4&&!Zn)if(w===null)C.componentDidMount();else{var k=d.elementType===d.type?w.memoizedProps:wa(d.type,w.memoizedProps);C.componentDidUpdate(k,w.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var j=d.updateQueue;j!==null&&Wb(d,j,C);break;case 3:var z=d.updateQueue;if(z!==null){if(w=null,d.child!==null)switch(d.child.tag){case 5:w=d.child.stateNode;break;case 1:w=d.child.stateNode}Wb(d,z,w)}break;case 5:var K=d.stateNode;if(w===null&&d.flags&4){w=K;var ee=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&w.focus();break;case"img":ee.src&&(w.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ve=d.alternate;if(ve!==null){var ke=ve.memoizedState;if(ke!==null){var Pe=ke.dehydrated;Pe!==null&&ga(Pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Zn||d.flags&512&&ug(d)}catch(Ie){Ur(d,d.return,Ie)}}if(d===o){Je=null;break}if(w=d.sibling,w!==null){w.return=d.return,Je=w;break}Je=d.return}}function W2(o){for(;Je!==null;){var d=Je;if(d===o){Je=null;break}var w=d.sibling;if(w!==null){w.return=d.return,Je=w;break}Je=d.return}}function V2(o){for(;Je!==null;){var d=Je;try{switch(d.tag){case 0:case 11:case 15:var w=d.return;try{Ff(4,d)}catch(ee){Ur(d,w,ee)}break;case 1:var C=d.stateNode;if(typeof C.componentDidMount=="function"){var k=d.return;try{C.componentDidMount()}catch(ee){Ur(d,k,ee)}}var j=d.return;try{ug(d)}catch(ee){Ur(d,j,ee)}break;case 5:var z=d.return;try{ug(d)}catch(ee){Ur(d,z,ee)}}}catch(ee){Ur(d,d.return,ee)}if(d===o){Je=null;break}var K=d.sibling;if(K!==null){K.return=d.return,Je=K;break}Je=d.return}}var Yj=Math.ceil,Uf=U.ReactCurrentDispatcher,hg=U.ReactCurrentOwner,ta=U.ReactCurrentBatchConfig,Bt=0,Cn=null,Jr=null,Dn=0,Ri=0,Jl=Qs(0),pn=0,Iu=null,Vo=0,zf=0,pg=0,Tu=null,pi=null,mg=0,ec=1/0,hs=null,$f=!1,gg=null,io=null,Wf=!1,ao=null,Vf=0,ku=0,xg=null,Hf=-1,qf=0;function si(){return(Bt&6)!==0?Gt():Hf!==-1?Hf:Hf=Gt()}function so(o){return(o.mode&1)===0?1:(Bt&2)!==0&&Dn!==0?Dn&-Dn:jj.transition!==null?(qf===0&&(qf=cn()),qf):(o=St,o!==0||(o=window.event,o=o===void 0?16:iu(o.type)),o)}function Sa(o,d,w,C){if(50<ku)throw ku=0,xg=null,Error(r(185));q(o,w,C),((Bt&2)===0||o!==Cn)&&(o===Cn&&((Bt&2)===0&&(zf|=w),pn===4&&oo(o,Dn)),mi(o,C),w===1&&Bt===0&&(d.mode&1)===0&&(ec=Gt()+500,wf&&eo()))}function mi(o,d){var w=o.callbackNode;zs(o,d);var C=Oi(o,o===Cn?Dn:0);if(C===0)w!==null&&bn(w),o.callbackNode=null,o.callbackPriority=0;else if(d=C&-C,o.callbackPriority!==d){if(w!=null&&bn(w),d===1)o.tag===0?Pj(q2.bind(null,o)):kb(q2.bind(null,o)),Oj(function(){(Bt&6)===0&&eo()}),w=null;else{switch(ef(C)){case 1:w=Oe;break;case 4:w=Qd;break;case 16:w=nr;break;case 536870912:w=Jd;break;default:w=nr}w=eE(w,H2.bind(null,o))}o.callbackPriority=d,o.callbackNode=w}}function H2(o,d){if(Hf=-1,qf=0,(Bt&6)!==0)throw Error(r(327));var w=o.callbackNode;if(tc()&&o.callbackNode!==w)return null;var C=Oi(o,o===Cn?Dn:0);if(C===0)return null;if((C&30)!==0||(C&o.expiredLanes)!==0||d)d=Gf(o,C);else{d=C;var k=Bt;Bt|=2;var j=K2();(Cn!==o||Dn!==d)&&(hs=null,ec=Gt()+500,qo(o,d));do try{Jj();break}catch(K){G2(o,K)}while(!0);Mm(),Uf.current=j,Bt=k,Jr!==null?d=0:(Cn=null,Dn=0,d=pn)}if(d!==0){if(d===2&&(k=Kt(o),k!==0&&(C=k,d=vg(o,k))),d===1)throw w=Iu,qo(o,0),oo(o,C),mi(o,Gt()),w;if(d===6)oo(o,C);else{if(k=o.current.alternate,(C&30)===0&&!Zj(k)&&(d=Gf(o,C),d===2&&(j=Kt(o),j!==0&&(C=j,d=vg(o,j))),d===1))throw w=Iu,qo(o,0),oo(o,C),mi(o,Gt()),w;switch(o.finishedWork=k,o.finishedLanes=C,d){case 0:case 1:throw Error(r(345));case 2:Go(o,pi,hs);break;case 3:if(oo(o,C),(C&130023424)===C&&(d=mg+500-Gt(),10<d)){if(Oi(o,0)!==0)break;if(k=o.suspendedLanes,(k&C)!==C){si(),o.pingedLanes|=o.suspendedLanes&k;break}o.timeoutHandle=Cm(Go.bind(null,o,pi,hs),d);break}Go(o,pi,hs);break;case 4:if(oo(o,C),(C&4194240)===C)break;for(d=o.eventTimes,k=-1;0<C;){var z=31-ii(C);j=1<<z,z=d[z],z>k&&(k=z),C&=~j}if(C=k,C=Gt()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*Yj(C/1960))-C,10<C){o.timeoutHandle=Cm(Go.bind(null,o,pi,hs),C);break}Go(o,pi,hs);break;case 5:Go(o,pi,hs);break;default:throw Error(r(329))}}}return mi(o,Gt()),o.callbackNode===w?H2.bind(null,o):null}function vg(o,d){var w=Tu;return o.current.memoizedState.isDehydrated&&(qo(o,d).flags|=256),o=Gf(o,d),o!==2&&(d=pi,pi=w,d!==null&&yg(d)),o}function yg(o){pi===null?pi=o:pi.push.apply(pi,o)}function Zj(o){for(var d=o;;){if(d.flags&16384){var w=d.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var C=0;C<w.length;C++){var k=w[C],j=k.getSnapshot;k=k.value;try{if(!oe(j(),k))return!1}catch{return!1}}}if(w=d.child,d.subtreeFlags&16384&&w!==null)w.return=d,d=w;else{if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function oo(o,d){for(d&=~pg,d&=~zf,o.suspendedLanes|=d,o.pingedLanes&=~d,o=o.expirationTimes;0<d;){var w=31-ii(d),C=1<<w;o[w]=-1,d&=~C}}function q2(o){if((Bt&6)!==0)throw Error(r(327));tc();var d=Oi(o,0);if((d&1)===0)return mi(o,Gt()),null;var w=Gf(o,d);if(o.tag!==0&&w===2){var C=Kt(o);C!==0&&(d=C,w=vg(o,C))}if(w===1)throw w=Iu,qo(o,0),oo(o,d),mi(o,Gt()),w;if(w===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=d,Go(o,pi,hs),mi(o,Gt()),null}function wg(o,d){var w=Bt;Bt|=1;try{return o(d)}finally{Bt=w,Bt===0&&(ec=Gt()+500,wf&&eo())}}function Ho(o){ao!==null&&ao.tag===0&&(Bt&6)===0&&tc();var d=Bt;Bt|=1;var w=ta.transition,C=St;try{if(ta.transition=null,St=1,o)return o()}finally{St=C,ta.transition=w,Bt=d,(Bt&6)===0&&eo()}}function bg(){Ri=Jl.current,xr(Jl)}function qo(o,d){o.finishedWork=null,o.finishedLanes=0;var w=o.timeoutHandle;if(w!==-1&&(o.timeoutHandle=-1,Nj(w)),Jr!==null)for(w=Jr.return;w!==null;){var C=w;switch(Tm(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&vf();break;case 3:Yl(),xr(di),xr(Kn),Wm();break;case 5:zm(C);break;case 4:Yl();break;case 13:xr(jr);break;case 19:xr(jr);break;case 10:Dm(C.type._context);break;case 22:case 23:bg()}w=w.return}if(Cn=o,Jr=o=lo(o.current,null),Dn=Ri=d,pn=0,Iu=null,pg=zf=Vo=0,pi=Tu=null,zo!==null){for(d=0;d<zo.length;d++)if(w=zo[d],C=w.interleaved,C!==null){w.interleaved=null;var k=C.next,j=w.pending;if(j!==null){var z=j.next;j.next=k,C.next=z}w.pending=C}zo=null}return o}function G2(o,d){do{var w=Jr;try{if(Mm(),Tf.current=Rf,kf){for(var C=Rr.memoizedState;C!==null;){var k=C.queue;k!==null&&(k.pending=null),C=C.next}kf=!1}if(Wo=0,Sn=hn=Rr=null,Su=!1,Cu=0,hg.current=null,w===null||w.return===null){pn=1,Iu=d,Jr=null;break}e:{var j=o,z=w.return,K=w,ee=d;if(d=Dn,K.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var ve=ee,ke=K,Pe=ke.tag;if((ke.mode&1)===0&&(Pe===0||Pe===11||Pe===15)){var Ie=ke.alternate;Ie?(ke.updateQueue=Ie.updateQueue,ke.memoizedState=Ie.memoizedState,ke.lanes=Ie.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var Ke=v2(z);if(Ke!==null){Ke.flags&=-257,y2(Ke,z,K,j,d),Ke.mode&1&&x2(j,ve,d),d=Ke,ee=ve;var rt=d.updateQueue;if(rt===null){var it=new Set;it.add(ee),d.updateQueue=it}else rt.add(ee);break e}else{if((d&1)===0){x2(j,ve,d),Eg();break e}ee=Error(r(426))}}else if(Ar&&K.mode&1){var Kr=v2(z);if(Kr!==null){(Kr.flags&65536)===0&&(Kr.flags|=256),y2(Kr,z,K,j,d),jm(Zl(ee,K));break e}}j=ee=Zl(ee,K),pn!==4&&(pn=2),Tu===null?Tu=[j]:Tu.push(j),j=z;do{switch(j.tag){case 3:j.flags|=65536,d&=-d,j.lanes|=d;var ue=m2(j,ee,d);$b(j,ue);break e;case 1:K=ee;var ne=j.type,he=j.stateNode;if((j.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(io===null||!io.has(he)))){j.flags|=65536,d&=-d,j.lanes|=d;var Le=g2(j,K,d);$b(j,Le);break e}}j=j.return}while(j!==null)}Y2(w)}catch(st){d=st,Jr===w&&w!==null&&(Jr=w=w.return);continue}break}while(!0)}function K2(){var o=Uf.current;return Uf.current=Rf,o===null?Rf:o}function Eg(){(pn===0||pn===3||pn===2)&&(pn=4),Cn===null||(Vo&268435455)===0&&(zf&268435455)===0||oo(Cn,Dn)}function Gf(o,d){var w=Bt;Bt|=2;var C=K2();(Cn!==o||Dn!==d)&&(hs=null,qo(o,d));do try{Qj();break}catch(k){G2(o,k)}while(!0);if(Mm(),Bt=w,Uf.current=C,Jr!==null)throw Error(r(261));return Cn=null,Dn=0,pn}function Qj(){for(;Jr!==null;)X2(Jr)}function Jj(){for(;Jr!==null&&!lr();)X2(Jr)}function X2(o){var d=J2(o.alternate,o,Ri);o.memoizedProps=o.pendingProps,d===null?Y2(o):Jr=d,hg.current=null}function Y2(o){var d=o;do{var w=d.alternate;if(o=d.return,(d.flags&32768)===0){if(w=Hj(w,d,Ri),w!==null){Jr=w;return}}else{if(w=qj(w,d),w!==null){w.flags&=32767,Jr=w;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{pn=6,Jr=null;return}}if(d=d.sibling,d!==null){Jr=d;return}Jr=d=o}while(d!==null);pn===0&&(pn=5)}function Go(o,d,w){var C=St,k=ta.transition;try{ta.transition=null,St=1,e8(o,d,w,C)}finally{ta.transition=k,St=C}return null}function e8(o,d,w,C){do tc();while(ao!==null);if((Bt&6)!==0)throw Error(r(327));w=o.finishedWork;var k=o.finishedLanes;if(w===null)return null;if(o.finishedWork=null,o.finishedLanes=0,w===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var j=w.lanes|w.childLanes;if(ct(o,j),o===Cn&&(Jr=Cn=null,Dn=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||Wf||(Wf=!0,eE(nr,function(){return tc(),null})),j=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||j){j=ta.transition,ta.transition=null;var z=St;St=1;var K=Bt;Bt|=4,hg.current=null,Kj(o,w),U2(w,o),Gn(Em),Da=!!bm,Em=bm=null,o.current=w,Xj(w),Zd(),Bt=K,St=z,ta.transition=j}else o.current=w;if(Wf&&(Wf=!1,ao=o,Vf=k),j=o.pendingLanes,j===0&&(io=null),Tt(w.stateNode),mi(o,Gt()),d!==null)for(C=o.onRecoverableError,w=0;w<d.length;w++)k=d[w],C(k.value,{componentStack:k.stack,digest:k.digest});if($f)throw $f=!1,o=gg,gg=null,o;return(Vf&1)!==0&&o.tag!==0&&tc(),j=o.pendingLanes,(j&1)!==0?o===xg?ku++:(ku=0,xg=o):ku=0,eo(),null}function tc(){if(ao!==null){var o=ef(Vf),d=ta.transition,w=St;try{if(ta.transition=null,St=16>o?16:o,ao===null)var C=!1;else{if(o=ao,ao=null,Vf=0,(Bt&6)!==0)throw Error(r(331));var k=Bt;for(Bt|=4,Je=o.current;Je!==null;){var j=Je,z=j.child;if((Je.flags&16)!==0){var K=j.deletions;if(K!==null){for(var ee=0;ee<K.length;ee++){var ve=K[ee];for(Je=ve;Je!==null;){var ke=Je;switch(ke.tag){case 0:case 11:case 15:Ou(8,ke,j)}var Pe=ke.child;if(Pe!==null)Pe.return=ke,Je=Pe;else for(;Je!==null;){ke=Je;var Ie=ke.sibling,Ke=ke.return;if(M2(ke),ke===ve){Je=null;break}if(Ie!==null){Ie.return=Ke,Je=Ie;break}Je=Ke}}}var rt=j.alternate;if(rt!==null){var it=rt.child;if(it!==null){rt.child=null;do{var Kr=it.sibling;it.sibling=null,it=Kr}while(it!==null)}}Je=j}}if((j.subtreeFlags&2064)!==0&&z!==null)z.return=j,Je=z;else e:for(;Je!==null;){if(j=Je,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:Ou(9,j,j.return)}var ue=j.sibling;if(ue!==null){ue.return=j.return,Je=ue;break e}Je=j.return}}var ne=o.current;for(Je=ne;Je!==null;){z=Je;var he=z.child;if((z.subtreeFlags&2064)!==0&&he!==null)he.return=z,Je=he;else e:for(z=ne;Je!==null;){if(K=Je,(K.flags&2048)!==0)try{switch(K.tag){case 0:case 11:case 15:Ff(9,K)}}catch(st){Ur(K,K.return,st)}if(K===z){Je=null;break e}var Le=K.sibling;if(Le!==null){Le.return=K.return,Je=Le;break e}Je=K.return}}if(Bt=k,eo(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Mt,o)}catch{}C=!0}return C}finally{St=w,ta.transition=d}}return!1}function Z2(o,d,w){d=Zl(w,d),d=m2(o,d,1),o=ro(o,d,1),d=si(),o!==null&&(q(o,1,d),mi(o,d))}function Ur(o,d,w){if(o.tag===3)Z2(o,o,w);else for(;d!==null;){if(d.tag===3){Z2(d,o,w);break}else if(d.tag===1){var C=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(io===null||!io.has(C))){o=Zl(w,o),o=g2(d,o,1),d=ro(d,o,1),o=si(),d!==null&&(q(d,1,o),mi(d,o));break}}d=d.return}}function t8(o,d,w){var C=o.pingCache;C!==null&&C.delete(d),d=si(),o.pingedLanes|=o.suspendedLanes&w,Cn===o&&(Dn&w)===w&&(pn===4||pn===3&&(Dn&130023424)===Dn&&500>Gt()-mg?qo(o,0):pg|=w),mi(o,d)}function Q2(o,d){d===0&&((o.mode&1)===0?d=1:(d=kl,kl<<=1,(kl&130023424)===0&&(kl=4194304)));var w=si();o=us(o,d),o!==null&&(q(o,d,w),mi(o,w))}function r8(o){var d=o.memoizedState,w=0;d!==null&&(w=d.retryLane),Q2(o,w)}function n8(o,d){var w=0;switch(o.tag){case 13:var C=o.stateNode,k=o.memoizedState;k!==null&&(w=k.retryLane);break;case 19:C=o.stateNode;break;default:throw Error(r(314))}C!==null&&C.delete(d),Q2(o,w)}var J2;J2=function(o,d,w){if(o!==null)if(o.memoizedProps!==d.pendingProps||di.current)hi=!0;else{if((o.lanes&w)===0&&(d.flags&128)===0)return hi=!1,Vj(o,d,w);hi=(o.flags&131072)!==0}else hi=!1,Ar&&(d.flags&1048576)!==0&&Pb(d,Ef,d.index);switch(d.lanes=0,d.tag){case 2:var C=d.type;Lf(o,d),o=d.pendingProps;var k=Wl(d,Kn.current);Xl(d,w),k=qm(null,d,C,o,k,w);var j=Gm();return d.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,fi(C)?(j=!0,yf(d)):j=!1,d.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Fm(d),k.updater=Mf,d.stateNode=k,k._reactInternals=d,Jm(d,C,o,w),d=ng(null,d,C,!0,j,w)):(d.tag=0,Ar&&j&&Im(d),ai(null,d,k,w),d=d.child),d;case 16:C=d.elementType;e:{switch(Lf(o,d),o=d.pendingProps,k=C._init,C=k(C._payload),d.type=C,k=d.tag=a8(C),o=wa(C,o),k){case 0:d=rg(null,d,C,o,w);break e;case 1:d=A2(null,d,C,o,w);break e;case 11:d=w2(null,d,C,o,w);break e;case 14:d=b2(null,d,C,wa(C.type,o),w);break e}throw Error(r(306,C,""))}return d;case 0:return C=d.type,k=d.pendingProps,k=d.elementType===C?k:wa(C,k),rg(o,d,C,k,w);case 1:return C=d.type,k=d.pendingProps,k=d.elementType===C?k:wa(C,k),A2(o,d,C,k,w);case 3:e:{if(_2(d),o===null)throw Error(r(387));C=d.pendingProps,j=d.memoizedState,k=j.element,zb(o,d),Of(d,C,null,w);var z=d.memoizedState;if(C=z.element,j.isDehydrated)if(j={element:C,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},d.updateQueue.baseState=j,d.memoizedState=j,d.flags&256){k=Zl(Error(r(423)),d),d=N2(o,d,C,w,k);break e}else if(C!==k){k=Zl(Error(r(424)),d),d=N2(o,d,C,w,k);break e}else for(ji=Zs(d.stateNode.containerInfo.firstChild),Pi=d,Ar=!0,ya=null,w=Fb(d,null,C,w),d.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(ql(),C===k){d=fs(o,d,w);break e}ai(o,d,C,w)}d=d.child}return d;case 5:return Vb(d),o===null&&Pm(d),C=d.type,k=d.pendingProps,j=o!==null?o.memoizedProps:null,z=k.children,Sm(C,k)?z=null:j!==null&&Sm(C,j)&&(d.flags|=32),C2(o,d),ai(o,d,z,w),d.child;case 6:return o===null&&Pm(d),null;case 13:return O2(o,d,w);case 4:return Um(d,d.stateNode.containerInfo),C=d.pendingProps,o===null?d.child=Gl(d,null,C,w):ai(o,d,C,w),d.child;case 11:return C=d.type,k=d.pendingProps,k=d.elementType===C?k:wa(C,k),w2(o,d,C,k,w);case 7:return ai(o,d,d.pendingProps,w),d.child;case 8:return ai(o,d,d.pendingProps.children,w),d.child;case 12:return ai(o,d,d.pendingProps.children,w),d.child;case 10:e:{if(C=d.type._context,k=d.pendingProps,j=d.memoizedProps,z=k.value,dr(Af,C._currentValue),C._currentValue=z,j!==null)if(oe(j.value,z)){if(j.children===k.children&&!di.current){d=fs(o,d,w);break e}}else for(j=d.child,j!==null&&(j.return=d);j!==null;){var K=j.dependencies;if(K!==null){z=j.child;for(var ee=K.firstContext;ee!==null;){if(ee.context===C){if(j.tag===1){ee=ds(-1,w&-w),ee.tag=2;var ve=j.updateQueue;if(ve!==null){ve=ve.shared;var ke=ve.pending;ke===null?ee.next=ee:(ee.next=ke.next,ke.next=ee),ve.pending=ee}}j.lanes|=w,ee=j.alternate,ee!==null&&(ee.lanes|=w),Lm(j.return,w,d),K.lanes|=w;break}ee=ee.next}}else if(j.tag===10)z=j.type===d.type?null:j.child;else if(j.tag===18){if(z=j.return,z===null)throw Error(r(341));z.lanes|=w,K=z.alternate,K!==null&&(K.lanes|=w),Lm(z,w,d),z=j.sibling}else z=j.child;if(z!==null)z.return=j;else for(z=j;z!==null;){if(z===d){z=null;break}if(j=z.sibling,j!==null){j.return=z.return,z=j;break}z=z.return}j=z}ai(o,d,k.children,w),d=d.child}return d;case 9:return k=d.type,C=d.pendingProps.children,Xl(d,w),k=Ji(k),C=C(k),d.flags|=1,ai(o,d,C,w),d.child;case 14:return C=d.type,k=wa(C,d.pendingProps),k=wa(C.type,k),b2(o,d,C,k,w);case 15:return E2(o,d,d.type,d.pendingProps,w);case 17:return C=d.type,k=d.pendingProps,k=d.elementType===C?k:wa(C,k),Lf(o,d),d.tag=1,fi(C)?(o=!0,yf(d)):o=!1,Xl(d,w),h2(d,C,k),Jm(d,C,k,w),ng(null,d,C,!0,o,w);case 19:return T2(o,d,w);case 22:return S2(o,d,w)}throw Error(r(156,d.tag))};function eE(o,d){return _i(o,d)}function i8(o,d,w,C){this.tag=o,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(o,d,w,C){return new i8(o,d,w,C)}function Sg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function a8(o){if(typeof o=="function")return Sg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===ie)return 11;if(o===re)return 14}return 2}function lo(o,d){var w=o.alternate;return w===null?(w=ra(o.tag,d,o.key,o.mode),w.elementType=o.elementType,w.type=o.type,w.stateNode=o.stateNode,w.alternate=o,o.alternate=w):(w.pendingProps=d,w.type=o.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=o.flags&14680064,w.childLanes=o.childLanes,w.lanes=o.lanes,w.child=o.child,w.memoizedProps=o.memoizedProps,w.memoizedState=o.memoizedState,w.updateQueue=o.updateQueue,d=o.dependencies,w.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},w.sibling=o.sibling,w.index=o.index,w.ref=o.ref,w}function Kf(o,d,w,C,k,j){var z=2;if(C=o,typeof o=="function")Sg(o)&&(z=1);else if(typeof o=="string")z=5;else e:switch(o){case H:return Ko(w.children,k,j,d);case X:z=8,k|=8;break;case Y:return o=ra(12,w,d,k|2),o.elementType=Y,o.lanes=j,o;case be:return o=ra(13,w,d,k),o.elementType=be,o.lanes=j,o;case Ce:return o=ra(19,w,d,k),o.elementType=Ce,o.lanes=j,o;case le:return Xf(w,k,j,d);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case we:z=10;break e;case se:z=9;break e;case ie:z=11;break e;case re:z=14;break e;case ze:z=16,C=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return d=ra(z,w,d,k),d.elementType=o,d.type=C,d.lanes=j,d}function Ko(o,d,w,C){return o=ra(7,o,C,d),o.lanes=w,o}function Xf(o,d,w,C){return o=ra(22,o,C,d),o.elementType=le,o.lanes=w,o.stateNode={isHidden:!1},o}function Cg(o,d,w){return o=ra(6,o,null,d),o.lanes=w,o}function Ag(o,d,w){return d=ra(4,o.children!==null?o.children:[],o.key,d),d.lanes=w,d.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},d}function s8(o,d,w,C,k){this.tag=d,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ce(0),this.expirationTimes=ce(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ce(0),this.identifierPrefix=C,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function _g(o,d,w,C,k,j,z,K,ee){return o=new s8(o,d,w,K,ee),d===1?(d=1,j===!0&&(d|=8)):d=0,j=ra(3,null,null,d),o.current=j,j.stateNode=o,j.memoizedState={element:C,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fm(j),o}function o8(o,d,w){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:C==null?null:""+C,children:o,containerInfo:d,implementation:w}}function tE(o){if(!o)return Js;o=o._reactInternals;e:{if(lt(o)!==o||o.tag!==1)throw Error(r(170));var d=o;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(fi(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(r(171))}if(o.tag===1){var w=o.type;if(fi(w))return Ib(o,w,d)}return d}function rE(o,d,w,C,k,j,z,K,ee){return o=_g(w,C,!0,o,k,j,z,K,ee),o.context=tE(null),w=o.current,C=si(),k=so(w),j=ds(C,k),j.callback=d??null,ro(w,j,k),o.current.lanes=k,q(o,k,C),mi(o,C),o}function Yf(o,d,w,C){var k=d.current,j=si(),z=so(k);return w=tE(w),d.context===null?d.context=w:d.pendingContext=w,d=ds(j,z),d.payload={element:o},C=C===void 0?null:C,C!==null&&(d.callback=C),o=ro(k,d,z),o!==null&&(Sa(o,k,z,j),Nf(o,k,z)),z}function Zf(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function nE(o,d){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var w=o.retryLane;o.retryLane=w!==0&&w<d?w:d}}function Ng(o,d){nE(o,d),(o=o.alternate)&&nE(o,d)}function l8(){return null}var iE=typeof reportError=="function"?reportError:function(o){console.error(o)};function Og(o){this._internalRoot=o}Qf.prototype.render=Og.prototype.render=function(o){var d=this._internalRoot;if(d===null)throw Error(r(409));Yf(o,d,null,null)},Qf.prototype.unmount=Og.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var d=o.containerInfo;Ho(function(){Yf(null,o,null,null)}),d[ss]=null}};function Qf(o){this._internalRoot=o}Qf.prototype.unstable_scheduleHydration=function(o){if(o){var d=cr();o={blockedOn:null,target:o,priority:d};for(var w=0;w<Pn.length&&d!==0&&d<Pn[w].priority;w++);Pn.splice(w,0,o),w===0&&rf(o)}};function Ig(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Jf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function aE(){}function c8(o,d,w,C,k){if(k){if(typeof C=="function"){var j=C;C=function(){var ve=Zf(z);j.call(ve)}}var z=rE(d,C,o,0,null,!1,!1,"",aE);return o._reactRootContainer=z,o[ss]=z.current,mu(o.nodeType===8?o.parentNode:o),Ho(),z}for(;k=o.lastChild;)o.removeChild(k);if(typeof C=="function"){var K=C;C=function(){var ve=Zf(ee);K.call(ve)}}var ee=_g(o,0,!1,null,null,!1,!1,"",aE);return o._reactRootContainer=ee,o[ss]=ee.current,mu(o.nodeType===8?o.parentNode:o),Ho(function(){Yf(d,ee,w,C)}),ee}function eh(o,d,w,C,k){var j=w._reactRootContainer;if(j){var z=j;if(typeof k=="function"){var K=k;k=function(){var ee=Zf(z);K.call(ee)}}Yf(d,z,o,k)}else z=c8(w,d,o,k,C);return Zf(z)}Pl=function(o){switch(o.tag){case 3:var d=o.stateNode;if(d.current.memoizedState.isDehydrated){var w=ir(d.pendingLanes);w!==0&&(Br(d,w|1),mi(d,Gt()),(Bt&6)===0&&(ec=Gt()+500,eo()))}break;case 13:Ho(function(){var C=us(o,1);if(C!==null){var k=si();Sa(C,o,1,k)}}),Ng(o,1)}},qn=function(o){if(o.tag===13){var d=us(o,134217728);if(d!==null){var w=si();Sa(d,o,134217728,w)}Ng(o,134217728)}},dt=function(o){if(o.tag===13){var d=so(o),w=us(o,d);if(w!==null){var C=si();Sa(w,o,d,C)}Ng(o,d)}},cr=function(){return St},tu=function(o,d){var w=St;try{return St=o,d()}finally{St=w}},vt=function(o,d,w){switch(d){case"input":if(Pt(o,w),d=w.name,w.type==="radio"&&d!=null){for(w=o;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<w.length;d++){var C=w[d];if(C!==o&&C.form===o.form){var k=xf(C);if(!k)throw Error(r(90));ye(C),Pt(C,k)}}}break;case"textarea":ut(o,w);break;case"select":d=w.value,d!=null&&He(o,!!w.multiple,d,!1)}},Ao=wg,Qr=Ho;var u8={usingClientEntryPoint:!1,Events:[vu,zl,xf,Gi,ri,wg]},Pu={findFiberByHostInstance:Lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},d8={bundleType:Pu.bundleType,version:Pu.version,rendererPackageName:Pu.rendererPackageName,rendererConfig:Pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=es(o),o===null?null:o.stateNode},findFiberByHostInstance:Pu.findFiberByHostInstance||l8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{Mt=th.inject(d8),Et=th}catch{}}return gi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u8,gi.createPortal=function(o,d){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ig(d))throw Error(r(200));return o8(o,d,null,w)},gi.createRoot=function(o,d){if(!Ig(o))throw Error(r(299));var w=!1,C="",k=iE;return d!=null&&(d.unstable_strictMode===!0&&(w=!0),d.identifierPrefix!==void 0&&(C=d.identifierPrefix),d.onRecoverableError!==void 0&&(k=d.onRecoverableError)),d=_g(o,1,!1,null,null,w,!1,C,k),o[ss]=d.current,mu(o.nodeType===8?o.parentNode:o),new Og(d)},gi.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var d=o._reactInternals;if(d===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=es(d),o=o===null?null:o.stateNode,o},gi.flushSync=function(o){return Ho(o)},gi.hydrate=function(o,d,w){if(!Jf(d))throw Error(r(200));return eh(null,o,d,!0,w)},gi.hydrateRoot=function(o,d,w){if(!Ig(o))throw Error(r(405));var C=w!=null&&w.hydratedSources||null,k=!1,j="",z=iE;if(w!=null&&(w.unstable_strictMode===!0&&(k=!0),w.identifierPrefix!==void 0&&(j=w.identifierPrefix),w.onRecoverableError!==void 0&&(z=w.onRecoverableError)),d=rE(d,null,o,1,w??null,k,!1,j,z),o[ss]=d.current,mu(o),C)for(o=0;o<C.length;o++)w=C[o],k=w._getVersion,k=k(w._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[w,k]:d.mutableSourceEagerHydrationData.push(w,k);return new Qf(d)},gi.render=function(o,d,w){if(!Jf(d))throw Error(r(200));return eh(null,o,d,!1,w)},gi.unmountComponentAtNode=function(o){if(!Jf(o))throw Error(r(40));return o._reactRootContainer?(Ho(function(){eh(null,null,o,!1,function(){o._reactRootContainer=null,o[ss]=null})}),!0):!1},gi.unstable_batchedUpdates=wg,gi.unstable_renderSubtreeIntoContainer=function(o,d,w,C){if(!Jf(w))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return eh(o,d,w,!1,C)},gi.version="18.3.1-next-f1338f8080-20240426",gi}var hE;function lN(){if(hE)return Pg.exports;hE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Pg.exports=y8(),Pg.exports}var pE;function w8(){if(pE)return nh;pE=1;var e=lN();return nh.createRoot=e.createRoot,nh.hydrateRoot=e.hydrateRoot,nh}var b8=w8();const E8=da(b8);var mE="popstate";function S8(e={}){function t(i,s){let{pathname:c="/",search:f="",hash:p=""}=Al(i.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Nx("",{pathname:c,search:f,hash:p},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(i,s){let c=i.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let p=i.location.href,m=p.indexOf("#");f=m===-1?p:p.slice(0,m)}return f+"#"+(typeof s=="string"?s:td(s))}function n(i,s){zi(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return A8(t,r,n,e)}function Tr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function C8(){return Math.random().toString(36).substring(2,10)}function gE(e,t){return{usr:e.state,key:e.key,idx:t}}function Nx(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Al(t):t,state:r,key:t&&t.key||n||C8()}}function td({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Al(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function A8(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,c=i.history,f="POP",p=null,m=v();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function v(){return(c.state||{idx:null}).idx}function b(){f="POP";let P=v(),M=P==null?null:P-m;m=P,p&&p({action:f,location:I.location,delta:M})}function S(P,M){f="PUSH";let L=Nx(I.location,P,M);r&&r(L,P),m=v()+1;let R=gE(L,m),U=I.createHref(L);try{c.pushState(R,"",U)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;i.location.assign(U)}s&&p&&p({action:f,location:I.location,delta:1})}function A(P,M){f="REPLACE";let L=Nx(I.location,P,M);r&&r(L,P),m=v();let R=gE(L,m),U=I.createHref(L);c.replaceState(R,"",U),s&&p&&p({action:f,location:I.location,delta:0})}function O(P){return _8(P)}let I={get action(){return f},get location(){return e(i,c)},listen(P){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(mE,b),p=P,()=>{i.removeEventListener(mE,b),p=null}},createHref(P){return t(i,P)},createURL:O,encodeLocation(P){let M=O(P);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:S,replace:A,go(P){return c.go(P)}};return I}function _8(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Tr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:td(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function cN(e,t,r="/"){return N8(e,t,r,!1)}function N8(e,t,r,n){let i=typeof t=="string"?Al(t):t,s=_s(i.pathname||"/",r);if(s==null)return null;let c=uN(e);O8(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let m=F8(s);f=L8(c[p],m,n)}return f}function uN(e,t=[],r=[],n="",i=!1){let s=(c,f,p=i,m)=>{let v={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(n)&&p)return;Tr(v.relativePath.startsWith(n),`Absolute route path "${v.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(n.length)}let b=Ss([n,v.relativePath]),S=r.concat(v);c.children&&c.children.length>0&&(Tr(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),uN(c.children,t,S,b,p)),!(c.path==null&&!c.index)&&t.push({path:b,score:M8(b,c.index),routesMeta:S})};return e.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))s(c,f);else for(let p of dN(c.path))s(c,f,!0,p)}),t}function dN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let c=dN(n.join("/")),f=[];return f.push(...c.map(p=>p===""?s:[s,p].join("/"))),i&&f.push(...c),f.map(p=>e.startsWith("/")&&p===""?"/":p)}function O8(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:D8(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var I8=/^:[\w-]+$/,T8=3,k8=2,P8=1,j8=10,R8=-2,xE=e=>e==="*";function M8(e,t){let r=e.split("/"),n=r.length;return r.some(xE)&&(n+=R8),t&&(n+=k8),r.filter(i=>!xE(i)).reduce((i,s)=>i+(I8.test(s)?T8:s===""?P8:j8),n)}function D8(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function L8(e,t,r=!1){let{routesMeta:n}=e,i={},s="/",c=[];for(let f=0;f<n.length;++f){let p=n[f],m=f===n.length-1,v=s==="/"?t:t.slice(s.length)||"/",b=Hh({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},v),S=p.route;if(!b&&m&&r&&!n[n.length-1].route.index&&(b=Hh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!b)return null;Object.assign(i,b.params),c.push({params:i,pathname:Ss([s,b.pathname]),pathnameBase:W8(Ss([s,b.pathnameBase])),route:S}),b.pathnameBase!=="/"&&(s=Ss([s,b.pathnameBase]))}return c}function Hh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=B8(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],c=s.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:n.reduce((m,{paramName:v,isOptional:b},S)=>{if(v==="*"){let O=f[S]||"";c=s.slice(0,s.length-O.length).replace(/(.)\/+$/,"$1")}const A=f[S];return b&&!A?m[v]=void 0:m[v]=(A||"").replace(/%2F/g,"/"),m},{}),pathname:s,pathnameBase:c,pattern:e}}function B8(e,t=!1,r=!0){zi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(n.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function F8(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function _s(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var fN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,U8=e=>fN.test(e);function z8(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Al(e):e,s;if(r)if(U8(r))s=r;else{if(r.includes("//")){let c=r;r=r.replace(/\/\/+/g,"/"),zi(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${r}`)}r.startsWith("/")?s=vE(r.substring(1),"/"):s=vE(r,t)}else s=t;return{pathname:s,search:V8(n),hash:H8(i)}}function vE(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Mg(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $8(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Qv(e){let t=$8(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Jv(e,t,r,n=!1){let i;typeof e=="string"?i=Al(e):(i={...e},Tr(!i.pathname||!i.pathname.includes("?"),Mg("?","pathname","search",i)),Tr(!i.pathname||!i.pathname.includes("#"),Mg("#","pathname","hash",i)),Tr(!i.search||!i.search.includes("#"),Mg("#","search","hash",i)));let s=e===""||i.pathname==="",c=s?"/":i.pathname,f;if(c==null)f=r;else{let b=t.length-1;if(!n&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),b-=1;i.pathname=S.join("/")}f=b>=0?t[b]:"/"}let p=z8(i,f),m=c&&c!=="/"&&c.endsWith("/"),v=(s||c===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(m||v)&&(p.pathname+="/"),p}var Ss=e=>e.join("/").replace(/\/\/+/g,"/"),W8=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V8=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,H8=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,q8=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function G8(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function K8(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var hN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function pN(e,t){let r=e;if(typeof r!="string"||!fN.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,i=!1;if(hN)try{let s=new URL(window.location.href),c=r.startsWith("//")?new URL(s.protocol+r):new URL(r),f=_s(c.pathname,t);c.origin===s.origin&&f!=null?r=f+c.search+c.hash:i=!0}catch{zi(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mN=["POST","PUT","PATCH","DELETE"];new Set(mN);var X8=["GET",...mN];new Set(X8);var Dc=N.createContext(null);Dc.displayName="DataRouter";var np=N.createContext(null);np.displayName="DataRouterState";var Y8=N.createContext(!1),gN=N.createContext({isTransitioning:!1});gN.displayName="ViewTransition";var Z8=N.createContext(new Map);Z8.displayName="Fetchers";var Q8=N.createContext(null);Q8.displayName="Await";var qi=N.createContext(null);qi.displayName="Navigation";var Sd=N.createContext(null);Sd.displayName="Location";var Ya=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ya.displayName="Route";var ey=N.createContext(null);ey.displayName="RouteError";var xN="REACT_ROUTER_ERROR",J8="REDIRECT",eR="ROUTE_ERROR_RESPONSE";function tR(e){if(e.startsWith(`${xN}:${J8}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function rR(e){if(e.startsWith(`${xN}:${eR}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new q8(t.status,t.statusText,t.data)}catch{}}function nR(e,{relative:t}={}){Tr(Lc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=N.useContext(qi),{hash:i,pathname:s,search:c}=Cd(e,{relative:t}),f=s;return r!=="/"&&(f=s==="/"?r:Ss([r,s])),n.createHref({pathname:f,search:c,hash:i})}function Lc(){return N.useContext(Sd)!=null}function Pa(){return Tr(Lc(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Sd).location}var vN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yN(e){N.useContext(qi).static||N.useLayoutEffect(e)}function ip(){let{isDataRoute:e}=N.useContext(Ya);return e?gR():iR()}function iR(){Tr(Lc(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(Dc),{basename:t,navigator:r}=N.useContext(qi),{matches:n}=N.useContext(Ya),{pathname:i}=Pa(),s=JSON.stringify(Qv(n)),c=N.useRef(!1);return yN(()=>{c.current=!0}),N.useCallback((p,m={})=>{if(zi(c.current,vN),!c.current)return;if(typeof p=="number"){r.go(p);return}let v=Jv(p,JSON.parse(s),i,m.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:Ss([t,v.pathname])),(m.replace?r.replace:r.push)(v,m.state,m)},[t,r,s,i,e])}N.createContext(null);function Cd(e,{relative:t}={}){let{matches:r}=N.useContext(Ya),{pathname:n}=Pa(),i=JSON.stringify(Qv(r));return N.useMemo(()=>Jv(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function aR(e,t){return wN(e,t)}function wN(e,t,r,n,i){Tr(Lc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=N.useContext(qi),{matches:c}=N.useContext(Ya),f=c[c.length-1],p=f?f.params:{},m=f?f.pathname:"/",v=f?f.pathnameBase:"/",b=f&&f.route;{let L=b&&b.path||"";EN(m,!b||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let S=Pa(),A;if(t){let L=typeof t=="string"?Al(t):t;Tr(v==="/"||L.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${L.pathname}" was given in the \`location\` prop.`),A=L}else A=S;let O=A.pathname||"/",I=O;if(v!=="/"){let L=v.replace(/^\//,"").split("/");I="/"+O.replace(/^\//,"").split("/").slice(L.length).join("/")}let P=cN(e,{pathname:I});zi(b||P!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),zi(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=uR(P&&P.map(L=>Object.assign({},L,{params:Object.assign({},p,L.params),pathname:Ss([v,s.encodeLocation?s.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?v:Ss([v,s.encodeLocation?s.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),c,r,n,i);return t&&M?N.createElement(Sd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},M):M}function sR(){let e=mR(),t=G8(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:s},"ErrorBoundary")," or"," ",N.createElement("code",{style:s},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:i},r):null,c)}var oR=N.createElement(sR,null),bN=class extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=rR(e.digest);r&&(e=r)}let t=e!==void 0?N.createElement(Ya.Provider,{value:this.props.routeContext},N.createElement(ey.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?N.createElement(lR,{error:e},t):t}};bN.contextType=Y8;var Dg=new WeakMap;function lR({children:e,error:t}){let{basename:r}=N.useContext(qi);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=tR(t.digest);if(n){let i=Dg.get(t);if(i)throw i;let s=pN(n.location,r);if(hN&&!Dg.get(t))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw Dg.set(t,c),c}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function cR({routeContext:e,match:t,children:r}){let n=N.useContext(Dc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(Ya.Provider,{value:e},r)}function uR(e,t=[],r=null,n=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,c=r?.errors;if(c!=null){let v=s.findIndex(b=>b.route.id&&c?.[b.route.id]!==void 0);Tr(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),s=s.slice(0,Math.min(s.length,v+1))}let f=!1,p=-1;if(r)for(let v=0;v<s.length;v++){let b=s[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(p=v),b.route.id){let{loaderData:S,errors:A}=r,O=b.route.loader&&!S.hasOwnProperty(b.route.id)&&(!A||A[b.route.id]===void 0);if(b.route.lazy||O){f=!0,p>=0?s=s.slice(0,p+1):s=[s[0]];break}}}let m=r&&n?(v,b)=>{n(v,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:K8(r.matches),errorInfo:b})}:void 0;return s.reduceRight((v,b,S)=>{let A,O=!1,I=null,P=null;r&&(A=c&&b.route.id?c[b.route.id]:void 0,I=b.route.errorElement||oR,f&&(p<0&&S===0?(EN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,P=null):p===S&&(O=!0,P=b.route.hydrateFallbackElement||null)));let M=t.concat(s.slice(0,S+1)),L=()=>{let R;return A?R=I:O?R=P:b.route.Component?R=N.createElement(b.route.Component,null):b.route.element?R=b.route.element:R=v,N.createElement(cR,{match:b,routeContext:{outlet:v,matches:M,isDataRoute:r!=null},children:R})};return r&&(b.route.ErrorBoundary||b.route.errorElement||S===0)?N.createElement(bN,{location:r.location,revalidation:r.revalidation,component:I,error:A,children:L(),routeContext:{outlet:null,matches:M,isDataRoute:!0},onError:m}):L()},null)}function ty(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dR(e){let t=N.useContext(Dc);return Tr(t,ty(e)),t}function fR(e){let t=N.useContext(np);return Tr(t,ty(e)),t}function hR(e){let t=N.useContext(Ya);return Tr(t,ty(e)),t}function ry(e){let t=hR(e),r=t.matches[t.matches.length-1];return Tr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function pR(){return ry("useRouteId")}function mR(){let e=N.useContext(ey),t=fR("useRouteError"),r=ry("useRouteError");return e!==void 0?e:t.errors?.[r]}function gR(){let{router:e}=dR("useNavigate"),t=ry("useNavigate"),r=N.useRef(!1);return yN(()=>{r.current=!0}),N.useCallback(async(i,s={})=>{zi(r.current,vN),r.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var yE={};function EN(e,t,r){!t&&!yE[e]&&(yE[e]=!0,zi(!1,r))}N.memo(xR);function xR({routes:e,future:t,state:r,onError:n}){return wN(e,void 0,r,n,t)}function vR({to:e,replace:t,state:r,relative:n}){Tr(Lc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=N.useContext(qi);zi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=N.useContext(Ya),{pathname:c}=Pa(),f=ip(),p=Jv(e,Qv(s),c,n==="path"),m=JSON.stringify(p);return N.useEffect(()=>{f(JSON.parse(m),{replace:t,state:r,relative:n})},[f,m,n,t,r]),null}function Wa(e){Tr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yR({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:s=!1,unstable_useTransitions:c}){Tr(!Lc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),p=N.useMemo(()=>({basename:f,navigator:i,static:s,unstable_useTransitions:c,future:{}}),[f,i,s,c]);typeof r=="string"&&(r=Al(r));let{pathname:m="/",search:v="",hash:b="",state:S=null,key:A="default"}=r,O=N.useMemo(()=>{let I=_s(m,f);return I==null?null:{location:{pathname:I,search:v,hash:b,state:S,key:A},navigationType:n}},[f,m,v,b,S,A,n]);return zi(O!=null,`<Router basename="${f}"> is not able to match the URL "${m}${v}${b}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:N.createElement(qi.Provider,{value:p},N.createElement(Sd.Provider,{children:t,value:O}))}function wR({children:e,location:t}){return aR(Ox(e),t)}function Ox(e,t=[]){let r=[];return N.Children.forEach(e,(n,i)=>{if(!N.isValidElement(n))return;let s=[...t,i];if(n.type===N.Fragment){r.push.apply(r,Ox(n.props.children,s));return}Tr(n.type===Wa,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Ox(n.props.children,s)),r.push(c)}),r}var Ph="get",jh="application/x-www-form-urlencoded";function ap(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function bR(e){return ap(e)&&e.tagName.toLowerCase()==="button"}function ER(e){return ap(e)&&e.tagName.toLowerCase()==="form"}function SR(e){return ap(e)&&e.tagName.toLowerCase()==="input"}function CR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function AR(e,t){return e.button===0&&(!t||t==="_self")&&!CR(e)}var ih=null;function _R(){if(ih===null)try{new FormData(document.createElement("form"),0),ih=!1}catch{ih=!0}return ih}var NR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lg(e){return e!=null&&!NR.has(e)?(zi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jh}"`),null):e}function OR(e,t){let r,n,i,s,c;if(ER(e)){let f=e.getAttribute("action");n=f?_s(f,t):null,r=e.getAttribute("method")||Ph,i=Lg(e.getAttribute("enctype"))||jh,s=new FormData(e)}else if(bR(e)||SR(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||f.getAttribute("action");if(n=p?_s(p,t):null,r=e.getAttribute("formmethod")||f.getAttribute("method")||Ph,i=Lg(e.getAttribute("formenctype"))||Lg(f.getAttribute("enctype"))||jh,s=new FormData(f,e),!_R()){let{name:m,type:v,value:b}=e;if(v==="image"){let S=m?`${m}.`:"";s.append(`${S}x`,"0"),s.append(`${S}y`,"0")}else m&&s.append(m,b)}}else{if(ap(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ph,n=null,i=jh,c=e}return s&&i==="text/plain"&&(c=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ny(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function IR(e,t,r,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:t&&_s(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function TR(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kR(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function PR(e,t,r){let n=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let c=await TR(s,r);return c.links?c.links():[]}return[]}));return DR(n.flat(1).filter(kR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function wE(e,t,r,n,i,s){let c=(p,m)=>r[m]?p.route.id!==r[m].route.id:!0,f=(p,m)=>r[m].pathname!==p.pathname||r[m].route.path?.endsWith("*")&&r[m].params["*"]!==p.params["*"];return s==="assets"?t.filter((p,m)=>c(p,m)||f(p,m)):s==="data"?t.filter((p,m)=>{let v=n.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,m)||f(p,m))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function jR(e,t,{includeHydrateFallback:r}={}){return RR(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function RR(e){return[...new Set(e)]}function MR(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function DR(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let s=JSON.stringify(MR(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function SN(){let e=N.useContext(Dc);return ny(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function LR(){let e=N.useContext(np);return ny(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var iy=N.createContext(void 0);iy.displayName="FrameworkContext";function CN(){let e=N.useContext(iy);return ny(e,"You must render this element inside a <HydratedRouter> element"),e}function BR(e,t){let r=N.useContext(iy),[n,i]=N.useState(!1),[s,c]=N.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:m,onMouseLeave:v,onTouchStart:b}=t,S=N.useRef(null);N.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let I=M=>{M.forEach(L=>{c(L.isIntersecting)})},P=new IntersectionObserver(I,{threshold:.5});return S.current&&P.observe(S.current),()=>{P.disconnect()}}},[e]),N.useEffect(()=>{if(n){let I=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(I)}}},[n]);let A=()=>{i(!0)},O=()=>{i(!1),c(!1)};return r?e!=="intent"?[s,S,{}]:[s,S,{onFocus:Ru(f,A),onBlur:Ru(p,O),onMouseEnter:Ru(m,A),onMouseLeave:Ru(v,O),onTouchStart:Ru(b,A)}]:[!1,S,{}]}function Ru(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function FR({page:e,...t}){let{router:r}=SN(),n=N.useMemo(()=>cN(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?N.createElement(zR,{page:e,matches:n,...t}):null}function UR(e){let{manifest:t,routeModules:r}=CN(),[n,i]=N.useState([]);return N.useEffect(()=>{let s=!1;return PR(e,t,r).then(c=>{s||i(c)}),()=>{s=!0}},[e,t,r]),n}function zR({page:e,matches:t,...r}){let n=Pa(),{future:i,manifest:s,routeModules:c}=CN(),{basename:f}=SN(),{loaderData:p,matches:m}=LR(),v=N.useMemo(()=>wE(e,t,m,s,n,"data"),[e,t,m,s,n]),b=N.useMemo(()=>wE(e,t,m,s,n,"assets"),[e,t,m,s,n]),S=N.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let I=new Set,P=!1;if(t.forEach(L=>{let R=s.routes[L.route.id];!R||!R.hasLoader||(!v.some(U=>U.route.id===L.route.id)&&L.route.id in p&&c[L.route.id]?.shouldRevalidate||R.hasClientLoader?P=!0:I.add(L.route.id))}),I.size===0)return[];let M=IR(e,f,i.unstable_trailingSlashAwareDataRequests,"data");return P&&I.size>0&&M.searchParams.set("_routes",t.filter(L=>I.has(L.route.id)).map(L=>L.route.id).join(",")),[M.pathname+M.search]},[f,i.unstable_trailingSlashAwareDataRequests,p,n,s,v,t,e,c]),A=N.useMemo(()=>jR(b,s),[b,s]),O=UR(b);return N.createElement(N.Fragment,null,S.map(I=>N.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...r})),A.map(I=>N.createElement("link",{key:I,rel:"modulepreload",href:I,...r})),O.map(({key:I,link:P})=>N.createElement("link",{key:I,nonce:r.nonce,...P})))}function $R(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var WR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{WR&&(window.__reactRouterVersion="7.12.0")}catch{}function VR({basename:e,children:t,unstable_useTransitions:r,window:n}){let i=N.useRef();i.current==null&&(i.current=S8({window:n,v5Compat:!0}));let s=i.current,[c,f]=N.useState({action:s.action,location:s.location}),p=N.useCallback(m=>{r===!1?f(m):N.startTransition(()=>f(m))},[r]);return N.useLayoutEffect(()=>s.listen(p),[s,p]),N.createElement(yR,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:s,unstable_useTransitions:r})}var AN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rn=N.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:c,state:f,target:p,to:m,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:S,...A},O){let{basename:I,unstable_useTransitions:P}=N.useContext(qi),M=typeof m=="string"&&AN.test(m),L=pN(m,I);m=L.to;let R=nR(m,{relative:i}),[U,W,V]=BR(n,A),H=KR(m,{replace:c,state:f,target:p,preventScrollReset:v,relative:i,viewTransition:b,unstable_defaultShouldRevalidate:S,unstable_useTransitions:P});function X(we){t&&t(we),we.defaultPrevented||H(we)}let Y=N.createElement("a",{...A,...V,href:L.absoluteURL||R,onClick:L.isExternal||s?t:X,ref:$R(O,W),target:p,"data-discover":!M&&r==="render"?"true":void 0});return U&&!M?N.createElement(N.Fragment,null,Y,N.createElement(FR,{page:R})):Y});rn.displayName="Link";var HR=N.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:c,viewTransition:f,children:p,...m},v){let b=Cd(c,{relative:m.relative}),S=Pa(),A=N.useContext(np),{navigator:O,basename:I}=N.useContext(qi),P=A!=null&&JR(b)&&f===!0,M=O.encodeLocation?O.encodeLocation(b).pathname:b.pathname,L=S.pathname,R=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;r||(L=L.toLowerCase(),R=R?R.toLowerCase():null,M=M.toLowerCase()),R&&I&&(R=_s(R,I)||R);const U=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let W=L===M||!i&&L.startsWith(M)&&L.charAt(U)==="/",V=R!=null&&(R===M||!i&&R.startsWith(M)&&R.charAt(M.length)==="/"),H={isActive:W,isPending:V,isTransitioning:P},X=W?t:void 0,Y;typeof n=="function"?Y=n(H):Y=[n,W?"active":null,V?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let we=typeof s=="function"?s(H):s;return N.createElement(rn,{...m,"aria-current":X,className:Y,ref:v,style:we,to:c,viewTransition:f},typeof p=="function"?p(H):p)});HR.displayName="NavLink";var qR=N.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:s,method:c=Ph,action:f,onSubmit:p,relative:m,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:S,...A},O)=>{let{unstable_useTransitions:I}=N.useContext(qi),P=ZR(),M=QR(f,{relative:m}),L=c.toLowerCase()==="get"?"get":"post",R=typeof f=="string"&&AN.test(f),U=W=>{if(p&&p(W),W.defaultPrevented)return;W.preventDefault();let V=W.nativeEvent.submitter,H=V?.getAttribute("formmethod")||c,X=()=>P(V||W.currentTarget,{fetcherKey:t,method:H,navigate:r,replace:i,state:s,relative:m,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:S});I&&r!==!1?N.startTransition(()=>X()):X()};return N.createElement("form",{ref:O,method:L,action:M,onSubmit:n?p:U,...A,"data-discover":!R&&e==="render"?"true":void 0})});qR.displayName="Form";function GR(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _N(e){let t=N.useContext(Dc);return Tr(t,GR(e)),t}function KR(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:s,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:p}={}){let m=ip(),v=Pa(),b=Cd(e,{relative:s});return N.useCallback(S=>{if(AR(S,t)){S.preventDefault();let A=r!==void 0?r:td(v)===td(b),O=()=>m(e,{replace:A,state:n,preventScrollReset:i,relative:s,viewTransition:c,unstable_defaultShouldRevalidate:f});p?N.startTransition(()=>O()):O()}},[v,m,b,r,n,t,e,i,s,c,f,p])}var XR=0,YR=()=>`__${String(++XR)}__`;function ZR(){let{router:e}=_N("useSubmit"),{basename:t}=N.useContext(qi),r=pR(),n=e.fetch,i=e.navigate;return N.useCallback(async(s,c={})=>{let{action:f,method:p,encType:m,formData:v,body:b}=OR(s,t);if(c.navigate===!1){let S=c.fetcherKey||YR();await n(S,r,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:b,formMethod:c.method||p,formEncType:c.encType||m,flushSync:c.flushSync})}else await i(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:b,formMethod:c.method||p,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,i,t,r])}function QR(e,{relative:t}={}){let{basename:r}=N.useContext(qi),n=N.useContext(Ya);Tr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...Cd(e||".",{relative:t})},c=Pa();if(e==null){s.search=c.search;let f=new URLSearchParams(s.search),p=f.getAll("index");if(p.some(v=>v==="")){f.delete("index"),p.filter(b=>b).forEach(b=>f.append("index",b));let v=f.toString();s.search=v?`?${v}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:Ss([r,s.pathname])),td(s)}function JR(e,{relative:t}={}){let r=N.useContext(gN);Tr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=_N("useViewTransitionState"),i=Cd(e,{relative:t});if(!r.isTransitioning)return!1;let s=_s(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=_s(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Hh(i.pathname,c)!=null||Hh(i.pathname,s)!=null}var ay=lN(),e6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const t6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nt=(e,t)=>{const r=N.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:c,children:f,...p},m)=>N.createElement("svg",{ref:m,...e6,width:i,height:i,stroke:n,strokeWidth:c?Number(s)*24/Number(i):s,className:`lucide lucide-${t6(e)}`,...p},[...t.map(([v,b])=>N.createElement(v,b)),...(Array.isArray(f)?f:[f])||[]]));return r.displayName=`${e}`,r},r6=nt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),sy=nt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Zu=nt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),n6=nt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),NN=nt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),sp=nt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),xc=nt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),i6=nt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),a6=nt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),s6=nt("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),ON=nt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),o6=nt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),l6=nt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),c6=nt("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),IN=nt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Bg=nt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),u6=nt("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),d6=nt("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),TN=nt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),oy=nt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),f6=nt("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]),h6=nt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),kN=nt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),p6=nt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),m6=nt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),g6=nt("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),rd=nt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),bE=nt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),PN=nt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),x6=nt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ly=nt("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),v6=nt("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),jN=nt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),RN=nt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),MN=nt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),EE=nt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),SE=nt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),op=nt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),y6=nt("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),DN=nt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),w6=nt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),LN=nt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),b6=nt("ScatterChart",[["circle",{cx:"7.5",cy:"7.5",r:".5",key:"1x97lo"}],["circle",{cx:"18.5",cy:"5.5",r:".5",key:"56iowl"}],["circle",{cx:"11.5",cy:"11.5",r:".5",key:"m9xkw9"}],["circle",{cx:"7.5",cy:"16.5",r:".5",key:"14ln9z"}],["circle",{cx:"17.5",cy:"14.5",r:".5",key:"14qxqt"}],["path",{d:"M3 3v18h18",key:"1s2lah"}]]),lp=nt("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),Sc=nt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),BN=nt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),E6=nt("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),S6=nt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),hl=nt("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),C6=nt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),FN=nt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Cc=nt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),UN=nt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),A6=nt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),nd=nt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ix=nt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),id=nt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),_6=nt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),zN=nt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),N6=nt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),O6=nt("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),yi=nt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),I6=nt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),T6=()=>{const[e,t]=N.useState(!1),[r,n]=N.useState(!1),i=Pa(),s=ip();N.useEffect(()=>{const v=()=>{t(window.scrollY>50)};return window.addEventListener("scroll",v),()=>window.removeEventListener("scroll",v)},[]);const c=`fixed w-full z-50 transition-all duration-300 ${e||i.pathname==="/"?"bg-white/90 backdrop-blur-md shadow-sm py-2":"bg-transparent py-4"}`,f=v=>`cursor-pointer font-medium tracking-wide transition-colors ${i.pathname===v?"text-stone-900 border-b-2 border-stone-800":e?"text-stone-600 hover:text-stone-900":"text-stone-800 hover:text-stone-600"}`,p=v=>{s(v),n(!1)},m=()=>{const v=i.pathname;return v==="/"?g.jsxs("div",{className:"flex items-center gap-2 md:gap-6",children:[g.jsx("div",{className:"w-10 h-10 md:w-16 md:h-16 rounded-full p-0.5 bg-gradient-to-tr from-amber-200 via-rose-200 to-amber-200 shadow-lg shrink-0",children:g.jsx("img",{src:"/images/logo-hub.jpg",alt:"Logo",className:"w-full h-full object-cover rounded-full border-2 border-white/10"})}),g.jsx(rn,{to:"/style",className:"flex flex-col items-center leading-none hover:opacity-70 transition-opacity cursor-pointer",children:g.jsx("span",{className:"serif text-base md:text-xl font-bold italic tracking-tighter text-stone-900 whitespace-nowrap",children:"Style"})}),g.jsx("div",{className:"h-4 w-px bg-stone-200 block md:h-6"}),g.jsx(rn,{to:"/perfum",className:"flex flex-col items-center leading-none hover:opacity-70 transition-opacity cursor-pointer",children:g.jsx("span",{className:"serif text-base md:text-xl font-bold tracking-tight text-amber-500 whitespace-nowrap",children:"Perfum"})}),g.jsx("div",{className:"h-4 w-px bg-stone-200 block md:h-6"}),g.jsx(rn,{to:"/regalos",className:"flex flex-col items-center leading-none hover:opacity-70 transition-opacity cursor-pointer",children:g.jsx("span",{className:"serif text-base md:text-xl font-bold tracking-tight text-rose-500 whitespace-nowrap",children:"Amor Amor"})})]}):v.startsWith("/perfum")?g.jsxs(rn,{to:"/perfum",className:"flex flex-col items-start leading-none hover:opacity-80 transition-opacity",children:[g.jsx("span",{className:"serif text-2xl md:text-4xl font-bold tracking-tight text-amber-500",children:"Perfum"}),g.jsx("span",{className:"text-stone-600 text-[10px] md:text-xs font-medium tracking-[0.2em] uppercase mt-1",children:"by tus3b"})]}):v.startsWith("/regalos")?g.jsxs(rn,{to:"/regalos",className:"flex flex-col items-start leading-none hover:opacity-80 transition-opacity",children:[g.jsx("span",{className:"serif text-2xl md:text-3xl font-bold tracking-tight text-rose-500",children:"Amor Amor"}),g.jsx("span",{className:"text-stone-600 text-[10px] md:text-xs font-medium tracking-[0.2em] uppercase mt-1",children:"by tus3b"})]}):g.jsxs(rn,{to:"/style",className:"flex flex-col items-start leading-none hover:opacity-80 transition-opacity",children:[g.jsx("span",{className:"serif text-xl md:text-4xl font-bold italic tracking-tighter text-stone-900",children:"Style"}),g.jsx("span",{className:"text-stone-500 text-[8px] md:text-xs font-medium tracking-[0.15em] md:tracking-[0.2em] uppercase",children:"by tus3b"})]})};return g.jsxs("nav",{className:c,children:[g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex justify-between items-center h-16",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[i.pathname!=="/"&&g.jsx(rn,{to:"/",className:"text-white bg-stone-900 p-2 rounded-full hover:bg-stone-700 transition z-10 shrink-0",title:"Volver al Hub",children:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),g.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]})}),g.jsx("div",{className:"flex items-center",children:m()})]}),g.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[i.pathname!=="/"&&g.jsxs(g.Fragment,{children:[g.jsx(rn,{to:"/style",className:f("/style"),children:"Style"}),g.jsx(rn,{to:"/perfum",className:f("/perfum"),children:"Perfum"}),g.jsx(rn,{to:"/regalos",className:f("/regalos"),children:"Amor Amor"})]}),g.jsx("button",{onClick:()=>{i.pathname==="/style"?document.getElementById("booking-section")?.scrollIntoView({behavior:"smooth"}):s("/style")},className:"bg-stone-900 text-white px-6 py-2 rounded-full text-sm uppercase tracking-wider hover:bg-stone-800 transition shadow-lg",children:"Reservar"})]}),g.jsx("div",{className:"md:hidden flex items-center",children:g.jsx("button",{onClick:()=>n(!r),className:"text-stone-800 focus:outline-none",children:r?g.jsx(yi,{size:28}):g.jsx(x6,{size:28})})})]})}),r&&g.jsxs("div",{className:"md:hidden fixed inset-0 top-16 bg-white z-40 flex flex-col p-6 space-y-8 animate-in slide-in-from-right-10",children:[g.jsxs("button",{onClick:()=>p("/style"),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[g.jsx(lp,{size:24}),g.jsx("span",{children:"Style (Inicio)"})]}),g.jsxs("button",{onClick:()=>p("/perfum"),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[g.jsx(hl,{size:24}),g.jsx("span",{children:"Perfumes"})]}),g.jsxs("button",{onClick:()=>p("/regalos"),className:"flex items-center space-x-4 text-xl font-medium text-stone-700 p-2 active:bg-stone-50 rounded-lg",children:[g.jsx(oy,{size:24}),g.jsx("span",{children:"Regalos"})]}),g.jsx("div",{className:"mt-auto pb-8",children:g.jsx("button",{onClick:()=>p("/booking"),className:"w-full bg-stone-900 text-white py-4 rounded-xl text-center uppercase tracking-widest font-bold shadow-lg active:scale-95 transition-transform",children:"Agendar Cita"})})]})]})},k6=({onCtaClick:e})=>g.jsxs("div",{className:"relative h-screen min-h-[600px] w-full overflow-hidden",children:[g.jsxs("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/images/greici/greici-main-new.jpg')"},children:[g.jsx("div",{className:"absolute inset-0 bg-black/20 mix-blend-multiply"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-stone-900/60 via-transparent to-transparent"})]}),g.jsxs("div",{className:"relative h-full flex flex-col justify-center items-center text-center px-4",children:[g.jsx("h2",{className:"text-white text-base md:text-xl uppercase tracking-[0.3em] mb-4 font-light",children:"Belleza & Elegancia"}),g.jsxs("h1",{className:"text-white text-4xl md:text-7xl lg:text-8xl serif font-light mb-6 md:mb-8 max-w-4xl leading-tight",children:["Redefine Tu Estilo ",g.jsx("br",{})," ",g.jsx("span",{className:"italic",children:"Tu Esencia"})]}),g.jsxs("p",{className:"text-stone-200 max-w-lg mx-auto text-lg mb-10 font-light",children:["Experiencia exclusiva en nuestro Studio. Cortes y tratamientos personalizados.",g.jsx("br",{className:"hidden md:block"}),g.jsx("span",{className:"text-sm opacity-80",children:"(Servicio a domicilio disponible con recargo)"})]}),g.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:g.jsx("button",{onClick:e,className:"px-8 py-4 bg-white text-stone-900 rounded-full font-bold uppercase tracking-widest hover:bg-stone-100 transition shadow-lg",children:"Reserva Tu Cita"})}),g.jsxs("div",{className:"mt-12 flex items-center justify-center space-x-8 text-white/90 text-sm font-medium",children:[g.jsxs("div",{className:"flex items-center bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10",children:[g.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),"Disponible Hoy"]}),g.jsxs("div",{className:"flex items-center bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10",children:[g.jsx("span",{className:"mr-1",children:"Desde"}),g.jsx("span",{className:"font-bold text-lg",children:"$7.000"})]})]})]})]}),vc="56984524774",P6="https://www.instagram.com/tus3bstyle/?igsh=MWtnc2R5MjQ0c21kOQ%3D%3D#",ws=[{id:"cut-1",name:"Corte de Puntas / Flequillos",description:"Mantenimiento esencial para eliminar horquillas y sanear el cabello.",price:7e3,durationMin:30,includes:["Corte tcnico de puntas o flequillo","Sellado de puntas"]},{id:"cut-2",name:"Corte Bordado",description:"Elimina el frizz y puntas daadas sin afectar el largo de tu cabello.",price:1e4,durationMin:45,includes:["Corte con mquina bordadora","Limpieza de puntas"]},{id:"wash-1",name:"Lavado",description:"Lavado profesional refrescante.",price:5e3,durationMin:20,includes:["Shampoo profesional","Acondicionador"]},{id:"massage-1",name:"Masaje Capilar",description:"Tratamiento profundo para hidratar y revitalizar tu cabello.",price:5e3,durationMin:30,includes:["Ampolla o crema de tratamiento","Masaje craneal"]},{id:"brushing-1",name:"Brushing",description:"Peinado profesional para dar volumen, brillo y movimiento.",price:14e3,durationMin:45,includes:["Secado","Modelado con cepillo"]},{id:"color-1",name:"Aplicacin de Tintura",description:"Aplicacin profesional de tu color (tintura no incluida).",price:1e4,durationMin:60,includes:["Aplicacin uniforme","Lavado final"]}],j6=3e3,R6=30,M6=["Santiago Centro","uoa"],qa=[{id:"l1",brand:"Lancme",name:"La Vie Est Belle EDP",description:"La fragancia de la felicidad. Iris pallida, Jazmn Sambac y Azahar.",price5ml:6990,price10ml:12990,margin5ml:0,margin10ml:0,image:"/images/perfumes/la-vie-est-belle.png",notes:["Iris","Vainilla","Pralin"],category:"classic",stock:!1,priceFullBottle:89990},{id:"l2",brand:"Carolina Herrera",name:"Good Girl EDP",description:"Audaz y sexy, elegante y enigmtica. El famoso tacn.",price5ml:7990,price10ml:14990,margin5ml:0,margin10ml:0,image:"/images/perfumes/good-girl.png",notes:["Tuberosa","Jazmn","Cacao"],category:"classic",stock:!1,priceFullBottle:94990},{id:"l3",brand:"Lancme",name:"Idle EDP",description:"Para la mujer que suea a lo grande. Limpio y luminoso.",price5ml:6990,price10ml:12990,margin5ml:0,margin10ml:0,image:"/images/perfumes/idole.png",notes:["Rosa","Jazmn","Chipre Blanco"],category:"classic",stock:!1,priceFullBottle:84990},{id:"l4",brand:"Giorgio Armani",name:"Acqua Di Gioia EDP",description:"La esencia de la alegra. Fresco, acutico y ctrico.",price5ml:6990,price10ml:12990,margin5ml:0,margin10ml:0,image:"/images/perfumes/acqua-di-gioia.png",notes:["Limn","Menta","Jazmn de Agua"],category:"classic",stock:!1,priceFullBottle:79990},{id:"l5",brand:"Yves Saint Laurent",name:"Black Opium EDP",description:"Adrenalina y energa. Caf negro y flores blancas.",price5ml:7990,price10ml:14990,margin5ml:0,margin10ml:0,image:"/images/perfumes/black-opium.png",notes:["Caf","Vainilla","Flores Blancas"],category:"classic",stock:!1,priceFullBottle:92990},{id:"l6",brand:"Dolce & Gabbana",name:"Light Blue EDT",description:"La alegra de vivir el Mediterrneo. Fresco y frutal.",price5ml:5990,price10ml:9990,margin5ml:0,margin10ml:0,image:"/images/perfumes/light-blue.png",notes:["Limn Siciliano","Manzana","Cedro"],category:"classic",stock:!1,priceFullBottle:74990},{id:"a1",brand:"Lattafa",name:"Lattafa Yara EDP 100 ML Mujer",description:"El viral de TikTok. Dulce, cremoso y adictivo.",price5ml:5990,price10ml:8990,margin5ml:2803,margin10ml:4616,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-yara-rosa.png",secondaryImage:"/images/perfumes/yara-rosa-notes.jpg",notes:["Orqudea","Heliotropo","Frutas Tropicales"],category:"arab"},{id:"a2",brand:"Lattafa",name:"Lattafa Yara Tous EDP 100 ML Mujer",description:"La versin tropical y solar de Yara. Mango y maracuy.",price5ml:5990,price10ml:8990,margin5ml:2850,margin10ml:4711,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-yara-tous.png",secondaryImage:"/images/perfumes/yara-tous-notes.jpg",notes:["Mango","Coco","Vainilla"],category:"arab"},{id:"a3",brand:"Lattafa",name:"Lattafa Rave Now Women EDP 100 ML",description:"Dulce, frutal y vibrante. Energa pura en una botella.",price5ml:4990,price10ml:7990,margin5ml:2040,margin10ml:4091,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-rave-now-women.png",notes:["Frutas Rojas","Malvavisco","Almizcle"],category:"arab"},{id:"a4",brand:"Fragrance World",name:"FW Valentia Rome Intense EDP 100 ML",description:"Inspirada en el lujo italiano. Floral y moderna.",price5ml:5990,price10ml:8990,margin5ml:2898,margin10ml:4806,stock:!0,priceFullBottle:29990,image:"/images/perfumes/fw-valentia-rome.png",notes:["Jazmn","Grosella Negra","Vainilla Bourbon"],category:"arab"},{id:"a5",brand:"Maison Alhambra",name:"Maison Alhambra Leonie EDP 100 ML",description:"Elegancia y sofisticacin. Una fragancia que impone presencia.",price5ml:4990,price10ml:6990,margin5ml:2183,margin10ml:3376,stock:!0,priceFullBottle:27990,image:"/images/perfumes/maison-alhambra-leonie.png",notes:["Floral","mbar","Vainilla"],category:"arab"},{id:"a6",brand:"Lattafa",name:"Lattafa Ana Abiyedh EDP 60 ML",description:"Limpio, almizclado y frutal. Un aroma que dura todo el da.",price5ml:6990,price10ml:9990,margin5ml:3487,margin10ml:4983,stock:!0,priceFullBottle:29990,image:"/images/perfumes/lattafa-ana-abiyedh.png",notes:["Almizcle Blanco","Pera","Bergamota"],category:"arab"},{id:"a7",brand:"Maison Alhambra",name:"Maison Alhambra Bad Femme EDP 100 ML",description:"Atrevida y seductora. Ideal para la noche.",price5ml:4990,price10ml:6990,margin5ml:2135,margin10ml:3281,stock:!0,priceFullBottle:27990,image:"/images/perfumes/maison-alhambra-bad-femme.png",notes:["Tuberosa","Jazmn","Cacao"],category:"arab"},{id:"d1",brand:"Lattafa",name:"Lattafa Yara Spray 200 ML",description:"El complemento perfecto para tu perfume Yara.",price5ml:0,price10ml:0,margin5ml:0,margin10ml:0,stock:!0,priceFullBottle:5990,isSpray:!0,image:"/images/perfumes/yara-spray.png",notes:["Tropical","Dulce","Cremoso"],category:"arab"},{id:"d2",brand:"Lattafa",name:"Lattafa Qaed Al Fursan Spray 200 ML",description:"Fresco, pia ahumada y maderas.",price5ml:0,price10ml:0,margin5ml:0,margin10ml:0,stock:!0,priceFullBottle:5990,isSpray:!0,image:"/images/perfumes/qaed-al-fursan-spray.png",notes:["Pia","Musgo","Azafrn"],category:"arab"},{id:"d3",brand:"Lattafa",name:"Lattafa Yara Tous Spray 200 ML",description:"El complemento tropical para tu perfume Yara Tous.",price5ml:0,price10ml:0,margin5ml:0,margin10ml:0,stock:!0,priceFullBottle:5990,isSpray:!0,image:"/images/perfumes/lattafa-yara-tous-spray.png",notes:["Mango","Coco","Vainilla"],category:"arab"},{id:"a8",brand:"Armaf",name:"Club de Nuit Intense Woman EDP",description:"Un chipre floral intenso y elegante. Misterioso.",price5ml:5990,price10ml:8990,margin5ml:0,margin10ml:0,image:"/images/perfumes/club-de-nuit-intense-woman.png",notes:["Rosa","Azafrn","Geranio"],category:"arab",stock:!1},{id:"a9",brand:"Lattafa",name:"Eclaire EDP",description:"Dulce y envolvente, con notas gourmand irresistibles.",price5ml:5990,price10ml:8990,margin5ml:0,margin10ml:0,image:"/images/perfumes/lattafa-eclaire.png",notes:["Caramelo","Leche","Miel"],category:"arab",stock:!1},{id:"a10",brand:"Armaf",name:"Club de Nuit Untold EDP",description:"El dupe perfecto de Baccarat Rouge 540. Lujoso y dulce.",price5ml:6990,price10ml:9990,margin5ml:0,margin10ml:0,image:"/images/perfumes/club-de-nuit-untold.png",notes:["Azafrn","Jazmn","Amberwood"],category:"arab",stock:!1},{id:"a11",brand:"Lattafa",name:"Khamrah EDP",description:"Clido y especiado. Canela, dtiles y pralin.",price5ml:6990,price10ml:9990,margin5ml:0,margin10ml:0,image:"/images/perfumes/lattafa-khamrah.png",notes:["Canela","Dtiles","Pralin"],category:"arab",stock:!1},{id:"a12",brand:"Armaf",name:"Club de Nuit Imperiale",description:"Floral, fresco y frutal. Elegancia moderna.",price5ml:5990,price10ml:8990,margin5ml:0,margin10ml:0,image:"/images/perfumes/club-de-nuit-imperiale.png",notes:["Litchi","Bergamota","Rosa Turca"],category:"arab",stock:!1}],CE=[{id:"1",url:"/images/greici/greici-portrait.jpg",category:"Cortes",description:"Estilista Greici Nataly"},{id:"2",url:"/images/greici/greici-salon-wide.jpg",category:"Color",description:"Atencin Personalizada"},{id:"3",url:"/images/greici/greici-back-view.jpg",category:"Cortes",description:"Acabados Perfectos"},{id:"4",url:"/images/greici/greici-red-shirt.jpg",category:"Cortes",description:"Precisin y Estilo"},{id:"5",url:"/images/greici/greici-side-work.jpg",category:"Color",description:"Tcnica Profesional"}],D6=[{id:"r1",name:"Maria Paz",rating:5,comment:"Me encant el servicio, muy profesionales y puntuales. El corte que me hicieron fue exactamente lo que peda.",date:"Hace 2 semanas"},{id:"r2",name:"Carla S.",rating:5,comment:"Increble la atencin a domicilio. Todo muy limpio y ordenado, y los perfumes huelen delicioso. Totalmente recomendada.",date:"Hace 1 mes"},{id:"r3",name:"Valentina R.",rating:5,comment:"Compr el Lattafa Yara y es exquisito, lleg super rpido. Adems aprovech de hacerme un masaje capilar y qued como nueva.",date:"Hace 3 semanas"},{id:"r4",name:"Isidora M.",rating:5,comment:"Excelente experiencia con Tus3B. La calidad de los productos y la dedicacin en el servicio se notan. Volver a comprar seguro.",date:"Hace 1 mes"},{id:"r5",name:"Fernanda L.",rating:5,comment:"Muy buena disposicin y asesora para elegir mi perfume. Los precios son muy convenientes para la calidad que ofrecen.",date:"Hace 2 semanas"},{id:"r6",name:"Camila J.",rating:4,comment:"Todo super bien, el perfume lleg en perfecto estado. Solo demor un poquito ms de lo esperado la coordinacin, pero la atencin un 7.",date:"Hace 1 mes"}],L6=[{id:"gift-1",name:"Regalito A",price:19990,includes:["Perfume 10ml","Chocolates Ferrero","Tarjeta Personalizada"]},{id:"gift-2",name:"Regalito B",price:29990,includes:["Perfume 10ml","Crema de Manos","Chocolates Finos","Globo Corazn"]},{id:"gift-custom",name:"Arma tu regalito",price:0,includes:["Chocolates Ferrero Roche","Los Perfumes en Stock","Globo de corazn","Y mucho ms..."]}];var ps={},ah={},Tx=function(e,t){return Tx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Tx(e,t)};function $N(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Tx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var qh=function(){return qh=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},qh.apply(this,arguments)};function Bc(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function WN(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(c=e[f])&&(s=(i<3?c(s):i>3?c(t,r,s):c(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function VN(e,t){return function(r,n){t(r,n,e)}}function HN(e,t,r,n,i,s){function c(M){if(M!==void 0&&typeof M!="function")throw new TypeError("Function expected");return M}for(var f=n.kind,p=f==="getter"?"get":f==="setter"?"set":"value",m=!t&&e?n.static?e:e.prototype:null,v=t||(m?Object.getOwnPropertyDescriptor(m,n.name):{}),b,S=!1,A=r.length-1;A>=0;A--){var O={};for(var I in n)O[I]=I==="access"?{}:n[I];for(var I in n.access)O.access[I]=n.access[I];O.addInitializer=function(M){if(S)throw new TypeError("Cannot add initializers after decoration has completed");s.push(c(M||null))};var P=(0,r[A])(f==="accessor"?{get:v.get,set:v.set}:v[p],O);if(f==="accessor"){if(P===void 0)continue;if(P===null||typeof P!="object")throw new TypeError("Object expected");(b=c(P.get))&&(v.get=b),(b=c(P.set))&&(v.set=b),(b=c(P.init))&&i.unshift(b)}else(b=c(P))&&(f==="field"?i.unshift(b):v[p]=b)}m&&Object.defineProperty(m,n.name,v),S=!0}function qN(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function GN(e){return typeof e=="symbol"?e:"".concat(e)}function KN(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function XN(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function et(e,t,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function f(v){try{m(n.next(v))}catch(b){c(b)}}function p(v){try{m(n.throw(v))}catch(b){c(b)}}function m(v){v.done?s(v.value):i(v.value).then(f,p)}m((n=n.apply(e,t||[])).next())})}function YN(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=f(0),c.throw=f(1),c.return=f(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(m){return function(v){return p([m,v])}}function p(m){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(r=0)),r;)try{if(n=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,i=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){r.label=m[1];break}if(m[0]===6&&r.label<s[1]){r.label=s[1],s=m;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(m);break}s[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(v){m=[6,v],i=0}finally{n=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var cp=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});function ZN(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&cp(t,e,r)}function Gh(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function cy(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],c;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(f){c={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function QN(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(cy(arguments[t]));return e}function JN(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],c=0,f=s.length;c<f;c++,i++)n[i]=s[c];return n}function eO(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function Ac(e){return this instanceof Ac?(this.v=e,this):new Ac(e)}function tO(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(A){return function(O){return Promise.resolve(O).then(A,b)}}function f(A,O){n[A]&&(i[A]=function(I){return new Promise(function(P,M){s.push([A,I,P,M])>1||p(A,I)})},O&&(i[A]=O(i[A])))}function p(A,O){try{m(n[A](O))}catch(I){S(s[0][3],I)}}function m(A){A.value instanceof Ac?Promise.resolve(A.value.v).then(v,b):S(s[0][2],A)}function v(A){p("next",A)}function b(A){p("throw",A)}function S(A,O){A(O),s.shift(),s.length&&p(s[0][0],s[0][1])}}function rO(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,s){t[i]=e[i]?function(c){return(r=!r)?{value:Ac(e[i](c)),done:!1}:s?s(c):c}:s}}function nO(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Gh=="function"?Gh(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(c){return new Promise(function(f,p){c=e[s](c),i(f,p,c.done,c.value)})}}function i(s,c,f,p){Promise.resolve(p).then(function(m){s({value:m,done:f})},c)}}function iO(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var B6=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},kx=function(e){return kx=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},kx(e)};function aO(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=kx(e),n=0;n<r.length;n++)r[n]!=="default"&&cp(t,e,r[n]);return B6(t,e),t}function sO(e){return e&&e.__esModule?e:{default:e}}function oO(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function lO(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function cO(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function uO(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var F6=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function dO(e){function t(s){e.error=e.hasError?new F6(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var r,n=0;function i(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(c){return t(c),i()})}else n|=1}catch(c){t(c)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function fO(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,c){return n?t?".jsx":".js":i&&(!s||!c)?r:i+s+"."+c.toLowerCase()+"js"}):e}const U6={__extends:$N,__assign:qh,__rest:Bc,__decorate:WN,__param:VN,__esDecorate:HN,__runInitializers:qN,__propKey:GN,__setFunctionName:KN,__metadata:XN,__awaiter:et,__generator:YN,__createBinding:cp,__exportStar:ZN,__values:Gh,__read:cy,__spread:QN,__spreadArrays:JN,__spreadArray:eO,__await:Ac,__asyncGenerator:tO,__asyncDelegator:rO,__asyncValues:nO,__makeTemplateObject:iO,__importStar:aO,__importDefault:sO,__classPrivateFieldGet:oO,__classPrivateFieldSet:lO,__classPrivateFieldIn:cO,__addDisposableResource:uO,__disposeResources:dO,__rewriteRelativeImportExtension:fO},z6=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:uO,get __assign(){return qh},__asyncDelegator:rO,__asyncGenerator:tO,__asyncValues:nO,__await:Ac,__awaiter:et,__classPrivateFieldGet:oO,__classPrivateFieldIn:cO,__classPrivateFieldSet:lO,__createBinding:cp,__decorate:WN,__disposeResources:dO,__esDecorate:HN,__exportStar:ZN,__extends:$N,__generator:YN,__importDefault:sO,__importStar:aO,__makeTemplateObject:iO,__metadata:XN,__param:VN,__propKey:GN,__read:cy,__rest:Bc,__rewriteRelativeImportExtension:fO,__runInitializers:qN,__setFunctionName:KN,__spread:QN,__spreadArray:eO,__spreadArrays:JN,__values:Gh,default:U6},Symbol.toStringTag,{value:"Module"})),$6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let up=class extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}},hO=class extends up{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Px=class extends up{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},jx=class extends up{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var Kh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Kh||(Kh={}));class W6{constructor(t,{headers:r={},customFetch:n,region:i=Kh.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=$6(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return et(this,arguments,void 0,function*(r,n={}){var i;let s,c;try{const{headers:f,method:p,body:m,signal:v,timeout:b}=n;let S={},{region:A}=n;A||(A=this.region);const O=new URL(`${this.url}/${r}`);A&&A!=="any"&&(S["x-region"]=A,O.searchParams.set("forceFunctionRegion",A));let I;m&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",I=m):typeof m=="string"?(S["Content-Type"]="text/plain",I=m):typeof FormData<"u"&&m instanceof FormData?I=m:(S["Content-Type"]="application/json",I=JSON.stringify(m)):I=m;let P=v;b&&(c=new AbortController,s=setTimeout(()=>c.abort(),b),v?(P=c.signal,v.addEventListener("abort",()=>c.abort())):P=c.signal);const M=yield this.fetch(O.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),f),body:I,signal:P}).catch(W=>{throw new hO(W)}),L=M.headers.get("x-relay-error");if(L&&L==="true")throw new Px(M);if(!M.ok)throw new jx(M);let R=((i=M.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),U;return R==="application/json"?U=yield M.json():R==="application/octet-stream"||R==="application/pdf"?U=yield M.blob():R==="text/event-stream"?U=M:R==="multipart/form-data"?U=yield M.formData():U=yield M.text(),{data:U,error:null,response:M}}catch(f){return{data:null,error:f,response:f instanceof jx||f instanceof Px?f.context:void 0}}finally{s&&clearTimeout(s)}})}}const V6=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Kh},FunctionsClient:W6,FunctionsError:up,FunctionsFetchError:hO,FunctionsHttpError:jx,FunctionsRelayError:Px},Symbol.toStringTag,{value:"Module"})),pO=Ed(V6);var Qn={};const Fc=Ed(z6);var sh={},oh={},lh={},ch={},uh={},dh={},AE;function mO(){if(AE)return dh;AE=1,Object.defineProperty(dh,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return dh.default=e,dh}var _E;function gO(){if(_E)return uh;_E=1,Object.defineProperty(uh,"__esModule",{value:!0});const t=Fc.__importDefault(mO());let r=class{constructor(i){var s,c;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(c=i.isMaybeSingle)!==null&&c!==void 0?c:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let f=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var m,v,b,S;let A=null,O=null,I=null,P=p.status,M=p.statusText;if(p.ok){if(this.method!=="HEAD"){const W=await p.text();W===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?O=W:O=JSON.parse(W))}const R=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),U=(b=p.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");R&&U&&U.length>1&&(I=parseInt(U[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(A={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,I=null,P=406,M="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const R=await p.text();try{A=JSON.parse(R),Array.isArray(A)&&p.status===404&&(O=[],A=null,P=200,M="OK")}catch{p.status===404&&R===""?(P=204,M="No Content"):A={message:R}}if(A&&this.isMaybeSingle&&(!((S=A?.details)===null||S===void 0)&&S.includes("0 rows"))&&(A=null,P=200,M="OK"),A&&this.shouldThrowOnError)throw new t.default(A)}return{error:A,data:O,count:I,status:P,statusText:M}});return this.shouldThrowOnError||(f=f.catch(p=>{var m,v,b,S,A,O;let I="";const P=p?.cause;if(P){const M=(m=P?.message)!==null&&m!==void 0?m:"",L=(v=P?.code)!==null&&v!==void 0?v:"";I=`${(b=p?.name)!==null&&b!==void 0?b:"FetchError"}: ${p?.message}`,I+=`

Caused by: ${(S=P?.name)!==null&&S!==void 0?S:"Error"}: ${M}`,L&&(I+=` (${L})`),P?.stack&&(I+=`
${P.stack}`)}else I=(A=p?.stack)!==null&&A!==void 0?A:"";return{error:{message:`${(O=p?.name)!==null&&O!==void 0?O:"FetchError"}: ${p?.message}`,details:I,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(i,s)}returns(){return this}overrideTypes(){return this}};return uh.default=r,uh}var NE;function xO(){if(NE)return ch;NE=1,Object.defineProperty(ch,"__esModule",{value:!0});const t=Fc.__importDefault(gO());let r=class extends t.default{select(i){let s=!1;const c=(i??"*").split("").map(f=>/\s/.test(f)&&!s?"":(f==='"'&&(s=!s),f)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:c,foreignTable:f,referencedTable:p=f}={}){const m=p?`${p}.order`:"order",v=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${v?`${v},`:""}${i}.${s?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:c=s}={}){const f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${i}`),this}range(i,s,{foreignTable:c,referencedTable:f=c}={}){const p=typeof f>"u"?"offset":`${f}.offset`,m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${i}`),this.url.searchParams.set(m,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:c=!1,buffers:f=!1,wal:p=!1,format:m="text"}={}){var v;const b=[i?"analyze":null,s?"verbose":null,c?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),S=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${S}"; options=${b};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return ch.default=r,ch}var OE;function uy(){if(OE)return lh;OE=1,Object.defineProperty(lh,"__esModule",{value:!0});const t=Fc.__importDefault(xO()),r=new RegExp("[,()]");let n=class extends t.default{eq(s,c){return this.url.searchParams.append(s,`eq.${c}`),this}neq(s,c){return this.url.searchParams.append(s,`neq.${c}`),this}gt(s,c){return this.url.searchParams.append(s,`gt.${c}`),this}gte(s,c){return this.url.searchParams.append(s,`gte.${c}`),this}lt(s,c){return this.url.searchParams.append(s,`lt.${c}`),this}lte(s,c){return this.url.searchParams.append(s,`lte.${c}`),this}like(s,c){return this.url.searchParams.append(s,`like.${c}`),this}likeAllOf(s,c){return this.url.searchParams.append(s,`like(all).{${c.join(",")}}`),this}likeAnyOf(s,c){return this.url.searchParams.append(s,`like(any).{${c.join(",")}}`),this}ilike(s,c){return this.url.searchParams.append(s,`ilike.${c}`),this}ilikeAllOf(s,c){return this.url.searchParams.append(s,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(s,c){return this.url.searchParams.append(s,`ilike(any).{${c.join(",")}}`),this}regexMatch(s,c){return this.url.searchParams.append(s,`match.${c}`),this}regexIMatch(s,c){return this.url.searchParams.append(s,`imatch.${c}`),this}is(s,c){return this.url.searchParams.append(s,`is.${c}`),this}isDistinct(s,c){return this.url.searchParams.append(s,`isdistinct.${c}`),this}in(s,c){const f=Array.from(new Set(c)).map(p=>typeof p=="string"&&r.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(s,`in.(${f})`),this}contains(s,c){return typeof c=="string"?this.url.searchParams.append(s,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(s,`cs.{${c.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(c)}`),this}containedBy(s,c){return typeof c=="string"?this.url.searchParams.append(s,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(s,`cd.{${c.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(c)}`),this}rangeGt(s,c){return this.url.searchParams.append(s,`sr.${c}`),this}rangeGte(s,c){return this.url.searchParams.append(s,`nxl.${c}`),this}rangeLt(s,c){return this.url.searchParams.append(s,`sl.${c}`),this}rangeLte(s,c){return this.url.searchParams.append(s,`nxr.${c}`),this}rangeAdjacent(s,c){return this.url.searchParams.append(s,`adj.${c}`),this}overlaps(s,c){return typeof c=="string"?this.url.searchParams.append(s,`ov.${c}`):this.url.searchParams.append(s,`ov.{${c.join(",")}}`),this}textSearch(s,c,{config:f,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const v=f===void 0?"":`(${f})`;return this.url.searchParams.append(s,`${m}fts${v}.${c}`),this}match(s){return Object.entries(s).forEach(([c,f])=>{this.url.searchParams.append(c,`eq.${f}`)}),this}not(s,c,f){return this.url.searchParams.append(s,`not.${c}.${f}`),this}or(s,{foreignTable:c,referencedTable:f=c}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${s})`),this}filter(s,c,f){return this.url.searchParams.append(s,`${c}.${f}`),this}};return lh.default=n,lh}var IE;function vO(){if(IE)return oh;IE=1,Object.defineProperty(oh,"__esModule",{value:!0});const t=Fc.__importDefault(uy());let r=class{constructor(i,{headers:s={},schema:c,fetch:f}){this.url=i,this.headers=new Headers(s),this.schema=c,this.fetch=f}select(i,s){const{head:c=!1,count:f}=s??{},p=c?"HEAD":"GET";let m=!1;const v=(i??"*").split("").map(b=>/\s/.test(b)&&!m?"":(b==='"'&&(m=!m),b)).join("");return this.url.searchParams.set("select",v),f&&this.headers.append("Prefer",`count=${f}`),new t.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:c=!0}={}){var f;const p="POST";if(s&&this.headers.append("Prefer",`count=${s}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(m.length>0){const v=[...new Set(m)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:c=!1,count:f,defaultToNull:p=!0}={}){var m;const v="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),f&&this.headers.append("Prefer",`count=${f}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const b=i.reduce((S,A)=>S.concat(Object.keys(A)),[]);if(b.length>0){const S=[...new Set(b)].map(A=>`"${A}"`);this.url.searchParams.set("columns",S.join(","))}}return new t.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(i,{count:s}={}){var c;const f="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:i}={}){var s;const c="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};return oh.default=r,oh}var TE;function H6(){if(TE)return sh;TE=1,Object.defineProperty(sh,"__esModule",{value:!0});const e=Fc,t=e.__importDefault(vO()),r=e.__importDefault(uy());let n=class yO{constructor(s,{headers:c={},schema:f,fetch:p}={}){this.url=s,this.headers=new Headers(c),this.schemaName=f,this.fetch=p}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${s}`);return new t.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new yO(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,c={},{head:f=!1,get:p=!1,count:m}={}){var v;let b;const S=new URL(`${this.url}/rpc/${s}`);let A;f||p?(b=f?"HEAD":"GET",Object.entries(c).filter(([I,P])=>P!==void 0).map(([I,P])=>[I,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([I,P])=>{S.searchParams.append(I,P)})):(b="POST",A=c);const O=new Headers(this.headers);return m&&O.set("Prefer",`count=${m}`),new r.default({method:b,url:S,headers:O,schema:this.schemaName,body:A,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}};return sh.default=n,sh}var kE;function wO(){if(kE)return Qn;kE=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.PostgrestError=Qn.PostgrestBuilder=Qn.PostgrestTransformBuilder=Qn.PostgrestFilterBuilder=Qn.PostgrestQueryBuilder=Qn.PostgrestClient=void 0;const e=Fc,t=e.__importDefault(H6());Qn.PostgrestClient=t.default;const r=e.__importDefault(vO());Qn.PostgrestQueryBuilder=r.default;const n=e.__importDefault(uy());Qn.PostgrestFilterBuilder=n.default;const i=e.__importDefault(xO());Qn.PostgrestTransformBuilder=i.default;const s=e.__importDefault(gO());Qn.PostgrestBuilder=s.default;const c=e.__importDefault(mO());return Qn.PostgrestError=c.default,Qn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:c.default},Qn}class bO{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const q6="2.87.1",G6=`realtime-js/${q6}`,EO="1.0.0",K6="2.0.0",PE=EO,Rx=1e4,X6=1e3,Y6=100;var nl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(nl||(nl={}));var en;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(en||(en={}));var _a;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(_a||(_a={}));var Mx;(function(e){e.websocket="websocket"})(Mx||(Mx={}));var il;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(il||(il={}));class Z6{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const i=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var r,n;const i=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},c=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(t,r,n){var i,s;const c=t.topic,f=(i=t.ref)!==null&&i!==void 0?i:"",p=(s=t.join_ref)!==null&&s!==void 0?s:"",m=t.payload.event,v=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},b=Object.keys(v).length===0?"":JSON.stringify(v);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+f.length+c.length+m.length+b.length,A=new ArrayBuffer(this.HEADER_LENGTH+S);let O=new DataView(A),I=0;O.setUint8(I++,this.KINDS.userBroadcastPush),O.setUint8(I++,p.length),O.setUint8(I++,f.length),O.setUint8(I++,c.length),O.setUint8(I++,m.length),O.setUint8(I++,b.length),O.setUint8(I++,r),Array.from(p,M=>O.setUint8(I++,M.charCodeAt(0))),Array.from(f,M=>O.setUint8(I++,M.charCodeAt(0))),Array.from(c,M=>O.setUint8(I++,M.charCodeAt(0))),Array.from(m,M=>O.setUint8(I++,M.charCodeAt(0))),Array.from(b,M=>O.setUint8(I++,M.charCodeAt(0)));var P=new Uint8Array(A.byteLength+n.byteLength);return P.set(new Uint8Array(A),0),P.set(new Uint8Array(n),A.byteLength),P.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[i,s,c,f,p]=n;return r({join_ref:i,ref:s,topic:c,event:f,payload:p})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,i)}}_decodeUserBroadcast(t,r,n){const i=r.getUint8(1),s=r.getUint8(2),c=r.getUint8(3),f=r.getUint8(4);let p=this.HEADER_LENGTH+4;const m=n.decode(t.slice(p,p+i));p=p+i;const v=n.decode(t.slice(p,p+s));p=p+s;const b=n.decode(t.slice(p,p+c));p=p+c;const S=t.slice(p,t.byteLength),A=f===this.JSON_ENCODING?JSON.parse(n.decode(S)):S,O={type:this.BROADCAST_EVENT,event:v,payload:A};return c>0&&(O.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:O}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class SO{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var fr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(fr||(fr={}));const jE=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((s,c)=>(s[c]=Q6(c,e,t,i),s),{}):{}},Q6=(e,t,r,n)=>{const i=t.find(f=>f.name===e),s=i?.type,c=r[e];return s&&!n.includes(s)?CO(s,c):Dx(c)},CO=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return r5(t,r)}switch(e){case fr.bool:return J6(t);case fr.float4:case fr.float8:case fr.int2:case fr.int4:case fr.int8:case fr.numeric:case fr.oid:return e5(t);case fr.json:case fr.jsonb:return t5(t);case fr.timestamp:return n5(t);case fr.abstime:case fr.date:case fr.daterange:case fr.int4range:case fr.int8range:case fr.money:case fr.reltime:case fr.text:case fr.time:case fr.timestamptz:case fr.timetz:case fr.tsrange:case fr.tstzrange:return Dx(t);default:return Dx(t)}},Dx=e=>e,J6=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},e5=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},t5=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},r5=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const c=e.slice(1,r);try{s=JSON.parse("["+c+"]")}catch{s=c?c.split(","):[]}return s.map(f=>CO(t,f))}return e},n5=e=>typeof e=="string"?e.replace(" ","T"):e,AO=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Fg{constructor(t,r,n={},i=Rx){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Lx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Lx||(Lx={}));let _O=class Rh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rh.syncState(this.state,i,s,c),this.pendingDiffs.forEach(p=>{this.state=Rh.syncDiff(this.state,p,s,c)}),this.pendingDiffs=[],f()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Rh.syncDiff(this.state,i,s,c),f())}),this.onJoin((i,s,c)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:c})}),this.onLeave((i,s,c)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const s=this.cloneDeep(t),c=this.transformState(r),f={},p={};return this.map(s,(m,v)=>{c[m]||(p[m]=v)}),this.map(c,(m,v)=>{const b=s[m];if(b){const S=v.map(P=>P.presence_ref),A=b.map(P=>P.presence_ref),O=v.filter(P=>A.indexOf(P.presence_ref)<0),I=b.filter(P=>S.indexOf(P.presence_ref)<0);O.length>0&&(f[m]=O),I.length>0&&(p[m]=I)}else f[m]=v}),this.syncDiff(s,{joins:f,leaves:p},n,i)}static syncDiff(t,r,n,i){const{joins:s,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(f,p)=>{var m;const v=(m=t[f])!==null&&m!==void 0?m:[];if(t[f]=this.cloneDeep(p),v.length>0){const b=t[f].map(A=>A.presence_ref),S=v.filter(A=>b.indexOf(A.presence_ref)<0);t[f].unshift(...S)}n(f,v,p)}),this.map(c,(f,p)=>{let m=t[f];if(!m)return;const v=p.map(b=>b.presence_ref);m=m.filter(b=>v.indexOf(b.presence_ref)<0),t[f]=m,i(f,m,p),m.length===0&&delete t[f]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Bx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Bx||(Bx={}));var yc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(yc||(yc={}));var Va;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Va||(Va={}));const i5=en;let NO=class Hu{constructor(t,r={config:{}},n){var i,s;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=en.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Fg(this,_a.join,this.params,this.timeout),this.rejoinTimer=new SO(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=en.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=en.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=en.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=en.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=en.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_a.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new _O(this),this.broadcastEndpointURL=AO(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==en.closed){const{config:{broadcast:c,presence:f,private:p}}=this.params,m=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(A=>A.filter))!==null&&i!==void 0?i:[],v=!!this.bindings[yc.PRESENCE]&&this.bindings[yc.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,b={},S={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:v}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(A=>t?.(Va.CHANNEL_ERROR,A)),this._onClose(()=>t?.(Va.CLOSED)),this.updateJoinPayload(Object.assign({config:S},b)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:A})=>{var O;if(this.socket._isManualToken()||this.socket.setAuth(),A===void 0){t?.(Va.SUBSCRIBED);return}else{const I=this.bindings.postgres_changes,P=(O=I?.length)!==null&&O!==void 0?O:0,M=[];for(let L=0;L<P;L++){const R=I[L],{filter:{event:U,schema:W,table:V,filter:H}}=R,X=A&&A[L];if(X&&X.event===U&&Hu.isFilterValueEqual(X.schema,W)&&Hu.isFilterValueEqual(X.table,V)&&Hu.isFilterValueEqual(X.filter,H))M.push(Object.assign(Object.assign({},R),{id:X.id}));else{this.unsubscribe(),this.state=en.errored,t?.(Va.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,t&&t(Va.SUBSCRIBED);return}}).receive("error",A=>{this.state=en.errored,t?.(Va.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{t?.(Va.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===en.joined&&t===yc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(f.status===202)return{success:!0};let p=f.statusText;try{const m=await f.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:c}=t,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=m.body)===null||i===void 0?void 0:i.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var c,f,p;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((p=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&s("ok"),m.receive("ok",()=>s("ok")),m.receive("error",()=>s("error")),m.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=en.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_a.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Fg(this,_a.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=en.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),c=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),c}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Fg(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Y6){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,s;const c=t.toLocaleLowerCase(),{close:f,error:p,leave:m,join:v}=_a;if(n&&[f,p,m,v].indexOf(c)>=0&&n!==this._joinRef())return;let S=this._onMessage(c,r,n);if(r&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(A=>{var O,I,P;return((O=A.filter)===null||O===void 0?void 0:O.event)==="*"||((P=(I=A.filter)===null||I===void 0?void 0:I.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===c}).map(A=>A.callback(S,n)):(s=this.bindings[c])===null||s===void 0||s.filter(A=>{var O,I,P,M,L,R;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in A){const U=A.id,W=(O=A.filter)===null||O===void 0?void 0:O.event;return U&&((I=r.ids)===null||I===void 0?void 0:I.includes(U))&&(W==="*"||W?.toLocaleLowerCase()===((P=r.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const U=(L=(M=A?.filter)===null||M===void 0?void 0:M.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return U==="*"||U===((R=r?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===c}).map(A=>{if(typeof S=="object"&&"ids"in S){const O=S.data,{schema:I,table:P,commit_timestamp:M,type:L,errors:R}=O;S=Object.assign(Object.assign({},{schema:I,table:P,commit_timestamp:M,eventType:L,new:{},old:{},errors:R}),this._getPayloadRecords(O))}A.callback(S,n)})}_isClosed(){return this.state===en.closed}_isJoined(){return this.state===en.joined}_isJoining(){return this.state===en.joining}_isLeaving(){return this.state===en.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&Hu.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(_a.close,{},t)}_onError(t){this._on(_a.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=en.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=jE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=jE(t.columns,t.old_record)),r}};const Ug=()=>{},fh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},a5=[1e3,2e3,5e3,1e4],s5=1e4,o5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let l5=class{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Rx,this.transport=null,this.heartbeatIntervalMs=fh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ug,this.ref=0,this.reconnectTimer=null,this.vsn=PE,this.logger=Ug,this.conn=null,this.sendBuffer=[],this.serializer=new Z6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Mx.websocket}`,this.httpEndpoint=AO(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bO.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case nl.connecting:return il.Connecting;case nl.open:return il.Open;case nl.closing:return il.Closing;default:return il.Closed}}isConnected(){return this.connectionState()===il.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new NO(`realtime:${t}`,r,this);return this.channels.push(s),s}}push(t){const{topic:r,event:n,payload:i,ref:s}=t,c=()=>{this.encode(t,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(X6,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},fh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:c}=r,f=c?`(${c})`:"",p=s.status||"";this.log("receive",`${p} ${n} ${i} ${f}`.trim(),s),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(i,s,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===nl.open||this.conn.readyState===nl.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(_a.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([o5],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const s={access_token:r,version:G6};r&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(_a.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new SO(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,s,c,f,p,m,v,b,S,A;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:Rx,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:fh.HEARTBEAT_INTERVAL,this.worker=(s=t?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(c=t?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:Ug,this.vsn=(p=t?.vsn)!==null&&p!==void 0?p:PE,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=t?.reconnectAfterMs)!==null&&m!==void 0?m:(O=>a5[O-1]||s5),this.vsn){case EO:this.encode=(v=t?.encode)!==null&&v!==void 0?v:((O,I)=>I(JSON.stringify(O))),this.decode=(b=t?.decode)!==null&&b!==void 0?b:((O,I)=>I(JSON.parse(O)));break;case K6:this.encode=(S=t?.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(A=t?.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const c5=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:i5,get REALTIME_LISTEN_TYPES(){return yc},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Bx},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Lx},get REALTIME_SUBSCRIBE_STATES(){return Va},RealtimeChannel:NO,RealtimeClient:l5,RealtimePresence:_O,WebSocketFactory:bO},Symbol.toStringTag,{value:"Module"})),OO=Ed(c5);class Ad extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function _r(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class IO extends Ad{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xh extends Ad{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const dy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),u5=()=>Response,Fx=e=>{if(Array.isArray(e))return e.map(r=>Fx(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Fx(n)}),t},d5=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},f5=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),zg=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},h5=(e,t,r)=>et(void 0,void 0,void 0,function*(){const n=yield u5();e instanceof n&&!r?.noResolveJson?e.json().then(i=>{const s=e.status||500,c=i?.statusCode||s+"";t(new IO(zg(i),s,c))}).catch(i=>{t(new Xh(zg(i),i))}):t(new Xh(zg(e),e))}),p5=(e,t,r,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!n?i:(d5(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(n)):i.body=n,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function _d(e,t,r,n,i,s){return et(this,void 0,void 0,function*(){return new Promise((c,f)=>{e(r,p5(t,n,i,s)).then(p=>{if(!p.ok)throw p;return n?.noResolveJson?p:p.json()}).then(p=>c(p)).catch(p=>h5(p,f,n))})})}function ad(e,t,r,n){return et(this,void 0,void 0,function*(){return _d(e,"GET",t,r,n)})}function Aa(e,t,r,n,i){return et(this,void 0,void 0,function*(){return _d(e,"POST",t,n,i,r)})}function Ux(e,t,r,n,i){return et(this,void 0,void 0,function*(){return _d(e,"PUT",t,n,i,r)})}function m5(e,t,r,n){return et(this,void 0,void 0,function*(){return _d(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function fy(e,t,r,n,i){return et(this,void 0,void 0,function*(){return _d(e,"DELETE",t,n,i,r)})}class g5{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return et(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_r(t))return{data:null,error:t};throw t}})}}var TO;class x5{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[TO]="BlobDownloadBuilder",this.promise=null}asStream(){return new g5(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return et(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_r(t))return{data:null,error:t};throw t}})}}TO=Symbol.toStringTag;const v5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},RE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class y5{constructor(t,r={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=dy(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,i){return et(this,void 0,void 0,function*(){try{let s;const c=Object.assign(Object.assign({},RE),i);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const p=c.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",c.cacheControl),p&&s.append("metadata",this.encodeMetadata(p)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",c.cacheControl),p&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(p))):(s=n,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,p&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!c.duplex&&(c.duplex="half")),i?.headers&&(f=Object.assign(Object.assign({},f),i.headers));const m=this._removeEmptyFolders(r),v=this._getFinalPath(m),b=yield(t=="PUT"?Ux:Aa)(this.fetch,`${this.url}/object/${v}`,s,Object.assign({headers:f},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:m,id:b.Id,fullPath:b.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_r(s))return{data:null,error:s};throw s}})}upload(t,r,n){return et(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return et(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),c=this._getFinalPath(s),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",r);try{let p;const m=Object.assign({upsert:RE.upsert},i),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",n)):typeof FormData<"u"&&n instanceof FormData?(p=n,p.append("cacheControl",m.cacheControl)):(p=n,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType);const b=yield Ux(this.fetch,f.toString(),p,{headers:v});return{data:{path:s,fullPath:b.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(_r(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(t,r){return et(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r?.upsert&&(i["x-upsert"]="true");const s=yield Aa(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),c=new URL(this.url+s.url),f=c.searchParams.get("token");if(!f)throw new Ad("No token returned by API");return{data:{signedUrl:c.toString(),path:t,token:f},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_r(n))return{data:null,error:n};throw n}})}update(t,r,n){return et(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return et(this,void 0,void 0,function*(){try{return{data:yield Aa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_r(i))return{data:null,error:i};throw i}})}copy(t,r,n){return et(this,void 0,void 0,function*(){try{return{data:{path:(yield Aa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_r(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return et(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield Aa(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const c=n?.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${c}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_r(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return et(this,void 0,void 0,function*(){try{const i=yield Aa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_r(i))return{data:null,error:i};throw i}})}download(t,r){const i=typeof r?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(r?.transform||{}),c=s?`?${s}`:"",f=this._getFinalPath(t),p=()=>ad(this.fetch,`${this.url}/${i}/${f}${c}`,{headers:this.headers,noResolveJson:!0});return new x5(p,this.shouldThrowOnError)}info(t){return et(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ad(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Fx(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_r(n))return{data:null,error:n};throw n}})}exists(t){return et(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield m5(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_r(n)&&n instanceof Xh){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],s=r?.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const f=typeof r?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(r?.transform||{});p!==""&&i.push(p);let m=i.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${n}${m}`)}}}remove(t){return et(this,void 0,void 0,function*(){try{return{data:yield fy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}list(t,r,n){return et(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},v5),r),{prefix:t||""});return{data:yield Aa(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_r(i))return{data:null,error:i};throw i}})}listV2(t,r){return et(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Aa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_r(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const kO="2.87.1",PO={"X-Client-Info":`storage-js/${kO}`};class w5{constructor(t,r={},n,i){this.shouldThrowOnError=!1;const s=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},PO),r),this.fetch=dy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return et(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield ad(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}getBucket(t){return et(this,void 0,void 0,function*(){try{return{data:yield ad(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}createBucket(t){return et(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Aa(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_r(i))return{data:null,error:i};throw i}})}updateBucket(t,r){return et(this,void 0,void 0,function*(){try{return{data:yield Ux(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_r(n))return{data:null,error:n};throw n}})}emptyBucket(t){return et(this,void 0,void 0,function*(){try{return{data:yield Aa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}deleteBucket(t){return et(this,void 0,void 0,function*(){try{return{data:yield fy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var sd=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function b5(e,t,r){const n=new URL(t,e);if(r)for(const[i,s]of Object.entries(r))s!==void 0&&n.searchParams.set(i,s);return n.toString()}async function E5(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function S5(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:s,headers:c}){const f=b5(e.baseUrl,n,i),p=await E5(e.auth),m=await t(f,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...p,...c},body:s?JSON.stringify(s):void 0}),v=await m.text(),b=(m.headers.get("content-type")||"").includes("application/json"),S=b&&v?JSON.parse(v):v;if(!m.ok){const A=b?S:void 0,O=A?.error;throw new sd(O?.message??`Request failed with status ${m.status}`,{status:m.status,icebergType:O?.type,icebergCode:O?.code,details:A})}return{status:m.status,headers:m.headers,data:S}}}}function hh(e){return e.join("")}var C5=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:hh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hh(e.namespace)}`}),!0}catch(t){if(t instanceof sd&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof sd&&r.status===409)return;throw r}}};function rc(e){return e.join("")}var A5=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rc(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${rc(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${rc(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${rc(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rc(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${rc(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof sd&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof sd&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},_5=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=S5({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new C5(this.client,t),this.tableOps=new A5(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class jO{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},PO),r),this.fetch=dy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return et(this,void 0,void 0,function*(){try{return{data:yield Aa(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}listBuckets(t){return et(this,void 0,void 0,function*(){try{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield ad(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}deleteBucket(t){return et(this,void 0,void 0,function*(){try{return{data:yield fy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}from(t){if(!f5(t))throw new Ad("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new _5({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>et(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,c){const f=s[c];return typeof f!="function"?f:(...p)=>et(this,void 0,void 0,function*(){try{return{data:yield f.apply(s,p),error:null}}catch(m){if(n)throw m;return{data:null,error:m}}})}})}}const hy={"X-Client-Info":`storage-js/${kO}`,"Content-Type":"application/json"};class py extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function vi(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Mh extends py{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class RO extends py{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var zx;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(zx||(zx={}));const dp=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),N5=()=>Response,MO=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},O5=e=>Array.from(new Float32Array(e)),I5=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},ME=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),T5=(e,t,r)=>et(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const i=e.status||500,s=e;if(typeof s.json=="function")s.json().then(c=>{const f=c?.statusCode||c?.code||i+"";t(new Mh(ME(c),i,f))}).catch(()=>{const c=i+"",f=s.statusText||`HTTP ${i} error`;t(new Mh(f,i,c))});else{const c=i+"",f=s.statusText||`HTTP ${i} error`;t(new Mh(f,i,c))}}else t(new RO(ME(e),e))}),k5=(e,t,r,n)=>{const i={method:e,headers:t?.headers||{}};return n?(MO(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function P5(e,t,r,n,i,s){return et(this,void 0,void 0,function*(){return new Promise((c,f)=>{e(r,k5(t,n,i,s)).then(p=>{if(!p.ok)throw p;if(n?.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>c(p)).catch(p=>T5(p,f,n))})})}function Li(e,t,r,n,i){return et(this,void 0,void 0,function*(){return P5(e,"POST",t,n,i,r)})}class DO{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hy),r),this.fetch=dp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return et(this,void 0,void 0,function*(){try{return{data:(yield Li(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}getIndex(t,r){return et(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vi(n))return{data:null,error:n};throw n}})}listIndexes(t){return et(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return et(this,void 0,void 0,function*(){try{return{data:(yield Li(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vi(n))return{data:null,error:n};throw n}})}}class LO{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hy),r),this.fetch=dp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return et(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Li(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}getVectors(t){return et(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}listVectors(t){return et(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Li(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}queryVectors(t){return et(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}deleteVectors(t){return et(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Li(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}}class BO{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hy),r),this.fetch=dp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return et(this,void 0,void 0,function*(){try{return{data:(yield Li(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}getBucket(t){return et(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}listBuckets(){return et(this,arguments,void 0,function*(t={}){try{return{data:yield Li(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}deleteBucket(t){return et(this,void 0,void 0,function*(){try{return{data:(yield Li(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}}class FO extends BO{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new UO(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return et(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return et(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return et(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return et(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class UO extends DO{constructor(t,r,n,i){super(t,r,i),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return et(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return et(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return et(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return et(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new zO(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class zO extends LO{constructor(t,r,n,i,s){super(t,r,s),this.vectorBucketName=n,this.indexName=i}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return et(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return et(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return et(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return et(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return et(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class j5 extends w5{constructor(t,r={},n,i){super(t,r,n,i)}from(t){return new y5(this.url,this.headers,t,this.fetch)}get vectors(){return new FO(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new jO(this.url+"/iceberg",this.headers,this.fetch)}}const R5=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:jO,StorageApiError:IO,StorageClient:j5,StorageError:Ad,StorageUnknownError:Xh,StorageVectorsApiError:Mh,StorageVectorsClient:FO,StorageVectorsError:py,get StorageVectorsErrorCode(){return zx},StorageVectorsUnknownError:RO,VectorBucketApi:BO,VectorBucketScope:UO,VectorDataApi:LO,VectorIndexApi:DO,VectorIndexScope:zO,isPlainObject:MO,isStorageError:_r,isStorageVectorsError:vi,normalizeToFloat32:O5,resolveFetch:dp,resolveResponse:N5,validateVectorDimension:I5},Symbol.toStringTag,{value:"Module"})),M5=Ed(R5);var $g={},Mu={},DE;function D5(){return DE||(DE=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.version=void 0,Mu.version="2.87.1"),Mu}var LE;function L5(){return LE||(LE=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=D5();let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})($g)),$g}var Wg={},BE;function B5(){return BE||(BE=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=i=>i?(...s)=>i(...s):(...s)=>fetch(...s);e.resolveFetch=t;const r=()=>Headers;e.resolveHeadersConstructor=r;const n=(i,s,c)=>{const f=(0,e.resolveFetch)(c),p=(0,e.resolveHeadersConstructor)();return async(m,v)=>{var b;const S=(b=await s())!==null&&b!==void 0?b:i;let A=new p(v?.headers);return A.has("apikey")||A.set("apikey",i),A.has("Authorization")||A.set("Authorization",`Bearer ${S}`),f(m,Object.assign(Object.assign({},v),{headers:A}))}};e.fetchWithAuth=n})(Wg)),Wg}var ms={},FE;function F5(){if(FE)return ms;FE=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.isBrowser=void 0,ms.uuid=e,ms.ensureTrailingSlash=t,ms.applySettingDefaults=n,ms.validateSupabaseUrl=i;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var c=Math.random()*16|0,f=s=="x"?c:c&3|8;return f.toString(16)})}function t(s){return s.endsWith("/")?s:s+"/"}const r=()=>typeof window<"u";ms.isBrowser=r;function n(s,c){var f,p;const{db:m,auth:v,realtime:b,global:S}=s,{db:A,auth:O,realtime:I,global:P}=c,M={db:Object.assign(Object.assign({},A),m),auth:Object.assign(Object.assign({},O),v),realtime:Object.assign(Object.assign({},I),b),storage:{},global:Object.assign(Object.assign(Object.assign({},P),S),{headers:Object.assign(Object.assign({},(f=P?.headers)!==null&&f!==void 0?f:{}),(p=S?.headers)!==null&&p!==void 0?p:{})}),accessToken:async()=>""};return s.accessToken?M.accessToken=s.accessToken:delete M.accessToken,M}function i(s){const c=s?.trim();if(!c)throw new Error("supabaseUrl is required.");if(!c.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(c))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return ms}var Du={};const $O="2.87.1",uc=30*1e3,$x=3,Vg=$x*uc,U5="http://localhost:9999",z5="supabase.auth.token",$5={"X-Client-Info":`gotrue-js/${$O}`},Wx="X-Supabase-Api-Version",WO={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},W5=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V5=600*1e3;let _c=class extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}};function ot(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let VO=class extends _c{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}};function HO(e){return ot(e)&&e.name==="AuthApiError"}let ho=class extends _c{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}},Rs=class extends _c{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}},xi=class extends Rs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function qO(e){return ot(e)&&e.name==="AuthSessionMissingError"}let Zo=class extends Rs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},qu=class extends Rs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Gu=class extends Rs{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function GO(e){return ot(e)&&e.name==="AuthImplicitGrantRedirectError"}let Vx=class extends Rs{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Yh=class extends Rs{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}};function Dh(e){return ot(e)&&e.name==="AuthRetryableFetchError"}let Hx=class extends Rs{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}};function H5(e){return ot(e)&&e.name==="AuthWeakPasswordError"}let Zh=class extends Rs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const Qh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),UE=` 	
\r=`.split(""),q5=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<UE.length;t+=1)e[UE[t].charCodeAt(0)]=-2;for(let t=0;t<Qh.length;t+=1)e[Qh[t].charCodeAt(0)]=t;return e})();function zE(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Qh[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Qh[n]),t.queuedBits-=6}}function KO(e,t,r){const n=q5[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function $E(e){const t=[],r=c=>{t.push(String.fromCodePoint(c))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=c=>{X5(c,n,r)};for(let c=0;c<e.length;c+=1)KO(e.charCodeAt(c),i,s);return t.join("")}function G5(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function K5(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}G5(n,t)}}function X5(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function wc(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)KO(e.charCodeAt(i),r,n);return new Uint8Array(t)}function Y5(e){const t=[];return K5(e,r=>t.push(r)),new Uint8Array(t)}function al(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>zE(i,r,n)),zE(null,r,n),t.join("")}function Z5(e){return Math.round(Date.now()/1e3)+e}function Q5(){return Symbol("auth-callback")}const Bn=()=>typeof window<"u"&&typeof document<"u",Xo={tested:!1,writable:!1},XO=()=>{if(!Bn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xo.tested)return Xo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Xo.tested=!0,Xo.writable=!0}catch{Xo.tested=!0,Xo.writable=!1}return Xo.writable};function J5(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const YO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),eM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",dc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Yo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ln=async(e,t)=>{await e.removeItem(t)};class fp{constructor(){this.promise=new fp.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}fp.promiseConstructor=Promise;function Hg(e){const t=e.split(".");if(t.length!==3)throw new Zh("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!W5.test(t[n]))throw new Zh("JWT not in base64url format");return{header:JSON.parse($E(t[0])),payload:JSON.parse($E(t[1])),signature:wc(t[2]),raw:{header:t[0],payload:t[1]}}}async function tM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function rM(e,t){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const c=await e(s);if(!t(s,null,c)){n(c);return}}catch(c){if(!t(s,c)){i(c);return}}})()})}function nM(e){return("0"+e.toString(16)).substr(-2)}function iM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,nM).join("")}async function aM(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function sM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await aM(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nc(e,t,r=!1){const n=iM();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await dc(e,`${t}-code-verifier`,i);const s=await sM(n);return[s,n===s?"plain":"s256"]}const oM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lM(e){const t=e.headers.get(Wx);if(!t||!t.match(oM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function cM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function uM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ic(e){if(!dM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qg(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fM(e,t){return new Proxy(e,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,i)}})}function WE(e){return JSON.parse(JSON.stringify(e))}const Qo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),hM=[502,503,504];async function VE(e){var t;if(!eM(e))throw new Yh(Qo(e),0);if(hM.includes(e.status))throw new Yh(Qo(e),e.status);let r;try{r=await e.json()}catch(s){throw new ho(Qo(s),s)}let n;const i=lM(e);if(i&&i.getTime()>=WO["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Hx(Qo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new xi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,c)=>s&&typeof c=="string",!0))throw new Hx(Qo(r),e.status,r.weak_password.reasons);throw new VO(Qo(r),e.status||500,n)}const pM=(e,t,r,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function gt(e,t,r,n){var i;const s=Object.assign({},n?.headers);s[Wx]||(s[Wx]=WO["2024-01-01"].name),n?.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const c=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(c.redirect_to=n.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",p=await mM(e,t,r+f,{headers:s,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(p):{data:Object.assign({},p),error:null}}async function mM(e,t,r,n,i,s){const c=pM(t,n,i,s);let f;try{f=await e(r,Object.assign({},c))}catch(p){throw console.error(p),new Yh(Qo(p),0)}if(f.ok||await VE(f),n?.noResolveJson)return f;try{return await f.json()}catch(p){await VE(p)}}function Ca(e){var t;let r=null;vM(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Z5(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function HE(e){const t=Ca(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function po(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function gM(e){return{data:e,error:null}}function xM(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=e,c=Bc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},p=Object.assign({},c);return{data:{properties:f,user:p},error:null}}function qE(e){return e}function vM(e){return e.access_token&&e.refresh_token&&e.expires_in}const Lh=["global","local","others"];let my=class{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=YO(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Lh[0]){if(Lh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Lh.join(", ")}`);try{return await gt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await gt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:po})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Bc(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await gt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:xM,redirectTo:r?.redirectTo})}catch(r){if(ot(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await gt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:po})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,s,c,f,p;try{const m={nextPage:null,lastPage:0,total:0},v=await gt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:qE});if(v.error)throw v.error;const b=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,A=(p=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return A.length>0&&(A.forEach(O=>{const I=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(O.split(";")[1].split("=")[1]);m[`${P}Page`]=I}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},b),m),error:null}}catch(m){if(ot(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){ic(t);try{return await gt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:po})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ic(t);try{return await gt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:po})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ic(t);try{return await gt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:po})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ic(t.userId);try{const{data:r,error:n}=await gt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ic(t.userId),ic(t.id);try{return{data:await gt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,s,c,f,p;try{const m={nextPage:null,lastPage:0,total:0},v=await gt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:qE});if(v.error)throw v.error;const b=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,A=(p=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return A.length>0&&(A.forEach(O=>{const I=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(O.split(";")[1].split("=")[1]);m[`${P}Page`]=I}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},b),m),error:null}}catch(m){if(ot(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await gt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await gt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await gt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await gt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await gt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}};function GE(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Jo={debug:!!(globalThis&&XO()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let ZO=class extends gy{};class yM extends gy{}async function QO(e,t,r){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ZO(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Jo.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const KE={};async function wM(e,t,r){var n;const i=(n=KE[e])!==null&&n!==void 0?n:Promise.resolve(),s=Promise.race([i.catch(()=>null),t>=0?new Promise((c,f)=>{setTimeout(()=>{f(new yM(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(c=>c)).catch(c=>{if(c&&c.isAcquireTimeout)throw c;return null}).then(async()=>await r());return KE[e]=s.catch(async c=>{if(c&&c.isAcquireTimeout)return await i,null;throw c}),await s}function bM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function JO(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function EM(e){return parseInt(e,16)}function SM(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function CM(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:c,notBefore:f,requestId:p,resources:m,scheme:v,uri:b,version:S}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const A=JO(e.address),O=v?`${v}://${n}`:n,I=e.statement?`${e.statement}
`:"",P=`${O} wants you to sign in with your Ethereum account:
${A}

${I}`;let M=`URI: ${b}
Version: ${S}
Chain ID: ${r}${c?`
Nonce: ${c}`:""}
Issued At: ${s.toISOString()}`;if(i&&(M+=`
Expiration Time: ${i.toISOString()}`),f&&(M+=`
Not Before: ${f.toISOString()}`),p&&(M+=`
Request ID: ${p}`),m){let L=`
Resources:`;for(const R of m){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);L+=`
- ${R}`}M+=L}return`${P}
${M}`}class tn extends Error{constructor({message:t,code:r,cause:n,name:i}){var s;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class Jh extends tn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function AM({error:e,options:t}){var r,n,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new tn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new tn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new tn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new tn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new tn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new tn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new tn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new tn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const c=window.location.hostname;if(e4(c)){if(s.rp.id!==c)return new tn({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new tn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new tn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new tn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new tn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function _M({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new tn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new tn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(e4(n)){if(r.rpId!==n)return new tn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new tn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new tn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new tn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class NM{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const OM=new NM;function IM(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=Bc(e,["challenge","user","excludeCredentials"]),s=wc(t).buffer,c=Object.assign(Object.assign({},r),{id:wc(r.id).buffer}),f=Object.assign(Object.assign({},i),{challenge:s,user:c});if(n&&n.length>0){f.excludeCredentials=new Array(n.length);for(let p=0;p<n.length;p++){const m=n[p];f.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:wc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return f}function TM(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Bc(e,["challenge","allowCredentials"]),i=wc(t).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const f=r[c];s.allowCredentials[c]=Object.assign(Object.assign({},f),{id:wc(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return s}function kM(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:al(new Uint8Array(e.response.attestationObject)),clientDataJSON:al(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function PM(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:al(new Uint8Array(i.authenticatorData)),clientDataJSON:al(new Uint8Array(i.clientDataJSON)),signature:al(new Uint8Array(i.signature)),userHandle:i.userHandle?al(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function e4(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function XE(){var e,t;return!!(Bn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function jM(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Jh("Browser returned unexpected credential type",t)}:{data:null,error:new Jh("Empty credential response",t)}}catch(t){return{data:null,error:AM({error:t,options:e})}}}async function RM(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Jh("Browser returned unexpected credential type",t)}:{data:null,error:new Jh("Empty credential response",t)}}catch(t){return{data:null,error:_M({error:t,options:e})}}}const MM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},DM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function e0(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const s in i){const c=i[s];if(c!==void 0)if(Array.isArray(c))n[s]=c;else if(r(c))n[s]=c;else if(t(c)){const f=n[s];t(f)?n[s]=e0(f,c):n[s]=e0(c)}else n[s]=c}return n}function LM(e,t){return e0(MM,e,t||{})}function BM(e,t){return e0(DM,e,t||{})}class FM{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},s){try{const{data:c,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!c)return{data:null,error:f};const p=i??OM.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=LM(c.webauthn.credential_options.publicKey,s?.create),{data:v,error:b}=await jM({publicKey:m,signal:p});return v?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}case"request":{const m=BM(c.webauthn.credential_options.publicKey,s?.request),{data:v,error:b}=await RM(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:p}));return v?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}}}catch(c){return ot(c)?{data:null,error:c}:{data:null,error:new ho("Unexpected error in challenge",c)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new _c("rpId is required for WebAuthn authentication")};try{if(!XE())return{data:null,error:new ho("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:s});if(!c)return{data:null,error:f};const{webauthn:p}=c;return this._verify({factorId:t,challengeId:c.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:n,credential_response:p.credential_response}})}catch(c){return ot(c)?{data:null,error:c}:{data:null,error:new ho("Unexpected error in authenticate",c)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new _c("rpId is required for WebAuthn registration")};try{if(!XE())return{data:null,error:new ho("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:t});if(!c)return await this.client.mfa.listFactors().then(v=>{var b;return(b=v.data)===null||b===void 0?void 0:b.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===t&&S.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:f};const{data:p,error:m}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:s});return p?this._verify({factorId:c.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:n,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(c){return ot(c)?{data:null,error:c}:{data:null,error:new ho("Unexpected error in register",c)}}}}bM();const UM={url:U5,storageKey:z5,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$5,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function YE(e,t,r){return await r()}const ac={};let xy=class qx{get jwks(){var t,r;return(r=(t=ac[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ac[this.storageKey]=Object.assign(Object.assign({},ac[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ac[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ac[this.storageKey]=Object.assign(Object.assign({},ac[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},UM),t);if(this.storageKey=s.storageKey,this.instanceID=(r=qx.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,qx.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Bn()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new my({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=YO(s.fetch),this.lock=s.lock||YE,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&Bn()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=QO:this.lock=YE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new FM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:XO()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=GE(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=GE(this.memoryStorage)),Bn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${$O}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Bn()&&(r=J5(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Bn()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),GO(s)){const p=(t=s.details)===null||t===void 0?void 0:t.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:c,redirectType:f}=i;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ot(r)?this._returnResult({error:r}):this._returnResult({error:new ho("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const s=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ca}),{data:c,error:f}=s;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const p=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(s){if(ot(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var r,n,i;try{let s;if("email"in t){const{email:v,password:b,options:S}=t;let A=null,O=null;this.flowType==="pkce"&&([A,O]=await nc(this.storage,this.storageKey)),s=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:v,password:b,data:(r=S?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:A,code_challenge_method:O},xform:Ca})}else if("phone"in t){const{phone:v,password:b,options:S}=t;s=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:b,data:(n=S?.data)!==null&&n!==void 0?n:{},channel:(i=S?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:Ca})}else throw new qu("You must provide either an email or phone number and a password");const{data:c,error:f}=s;if(f||!c)return await Ln(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const p=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(s){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),ot(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let r;if("email"in t){const{email:s,password:c,options:f}=t;r=await gt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:HE})}else if("phone"in t){const{phone:s,password:c,options:f}=t;r=await gt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:HE})}else throw new qu("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const s=new Zo;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(ot(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,s,c,f,p,m,v,b,S;let A,O;if("message"in t)A=t.message,O=t.signature;else{const{chain:I,wallet:P,statement:M,options:L}=t;let R;if(Bn())if(typeof P=="object")R=P;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")R=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=P}const U=new URL((r=L?.url)!==null&&r!==void 0?r:window.location.href),W=await R.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!W||W.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const V=JO(W[0]);let H=(n=L?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!H){const Y=await R.request({method:"eth_chainId"});H=EM(Y)}const X={domain:U.host,address:V,statement:M,uri:U.href,version:"1",chainId:H,nonce:(i=L?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(c=(s=L?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=L?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(p=L?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=L?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=L?.signInWithEthereum)===null||v===void 0?void 0:v.resources};A=CM(X),O=await R.request({method:"personal_sign",params:[SM(A),V]})}try{const{data:I,error:P}=await gt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:O},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Ca});if(P)throw P;if(!I||!I.session||!I.user){const M=new Zo;return this._returnResult({data:{user:null,session:null},error:M})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:P})}catch(I){if(ot(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async signInWithSolana(t){var r,n,i,s,c,f,p,m,v,b,S,A;let O,I;if("message"in t)O=t.message,I=t.signature;else{const{chain:P,wallet:M,statement:L,options:R}=t;let U;if(Bn())if(typeof M=="object")U=M;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))U=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=M}const W=new URL((r=R?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in U&&U.signIn){const V=await U.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),L?{statement:L}:null));let H;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")H=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)H=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)O=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),I=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in U)||typeof U.signMessage!="function"||!("publicKey"in U)||typeof U!="object"||!U.publicKey||!("toBase58"in U.publicKey)||typeof U.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${W.host} wants you to sign in with your Solana account:`,U.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${W.href}`,`Issued At: ${(i=(n=R?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=R?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((c=R?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((f=R?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((p=R?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((m=R?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((b=(v=R?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||b===void 0)&&b.length?["Resources",...R.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const V=await U.signMessage(new TextEncoder().encode(O),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");I=V}}try{const{data:P,error:M}=await gt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:al(I)},!((S=t.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(A=t.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:Ca});if(M)throw M;if(!P||!P.session||!P.user){const L=new Zo;return this._returnResult({data:{user:null,session:null},error:L})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:M})}catch(P){if(ot(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async _exchangeCodeForSession(t){const r=await Yo(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:c}=await gt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ca});if(await Ln(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!s||!s.session||!s.user){const f=new Zo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:c})}catch(s){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),ot(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:s,nonce:c}=t,f=await gt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:c,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ca}),{data:p,error:m}=f;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const v=new Zo;return this._returnResult({data:{user:null,session:null},error:v})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(r){if(ot(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,i,s,c;try{if("email"in t){const{email:f,options:p}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await nc(this.storage,this.storageKey));const{error:b}=await gt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(r=p?.data)!==null&&r!==void 0?r:{},create_user:(n=p?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in t){const{phone:f,options:p}=t,{data:m,error:v}=await gt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(i=p?.data)!==null&&i!==void 0?i:{},create_user:(s=p?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(c=p?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:v})}throw new qu("You must provide either an email or phone number.")}catch(f){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),ot(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(t){var r,n;try{let i,s;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:c,error:f}=await gt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Ca});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const p=c.session,m=c.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(i){if(ot(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var r,n,i,s,c;try{let f=null,p=null;this.flowType==="pkce"&&([f,p]=await nc(this.storage,this.storageKey));const m=await gt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:p}),headers:this.headers,xform:gM});return!((s=m.data)===null||s===void 0)&&s.url&&Bn()&&!(!((c=t.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(f){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),ot(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new xi;const{error:i}=await gt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(ot(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:s}=t,{error:c}=await gt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in t){const{phone:n,type:i,options:s}=t,{data:c,error:f}=await gt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:f})}throw new qu("You must provide either an email or phone number and a type")}catch(r){if(ot(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Yo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Vg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const c=await Yo(this.userStorage,this.storageKey+"-user");c?.user?t.user=c.user:t.user=qg()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};t.user=fM(t.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await gt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:po}):await this._useSession(async r=>{var n,i,s;const{data:c,error:f}=r;if(f)throw f;return!(!((n=c.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xi}:await gt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:po})})}catch(r){if(ot(r))return qO(r)&&(await this._removeSession(),await Ln(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new xi;const c=i.session;let f=null,p=null;this.flowType==="pkce"&&t.email!=null&&([f,p]=await nc(this.storage,this.storageKey));const{data:m,error:v}=await gt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:p}),jwt:c.access_token,xform:po});if(v)throw v;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(n){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),ot(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new xi;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:c}=Hg(t.access_token);if(c.exp&&(n=c.exp,i=n<=r),i){const{data:f,error:p}=await this._callRefreshToken(t.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f)return{data:{user:null,session:null},error:null};s=f}else{const{data:f,error:p}=await this._getUser(t.access_token);if(p)throw p;s={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(ot(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:c,error:f}=r;if(f)throw f;t=(n=c.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new xi;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ot(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Bn())throw new Gu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Gu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Vx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Vx("No code detected.");const{data:L,error:R}=await this._exchangeCodeForSession(t.code);if(R)throw R;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:c,expires_in:f,expires_at:p,token_type:m}=t;if(!s||!f||!c||!m)throw new Gu("No session defined in URL");const v=Math.round(Date.now()/1e3),b=parseInt(f);let S=v+b;p&&(S=parseInt(p));const A=S-v;A*1e3<=uc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${b}s`);const O=S-b;v-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,S,v):v-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,S,v);const{data:I,error:P}=await this._getUser(s);if(P)throw P;const M={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:b,expires_at:S,refresh_token:c,token_type:m,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:M,redirectType:t.type},error:null})}catch(n){if(ot(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Yo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({error:s});const c=(n=i.session)===null||n===void 0?void 0:n.access_token;if(c){const{error:f}=await this.admin.signOut(c,t);if(f&&!(HO(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return t!=="others"&&(await this._removeSession(),await Ln(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Q5(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:c}=r;if(c)throw c;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await nc(this.storage,this.storageKey,!0));try{return await gt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),ot(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var c,f,p,m,v;const{data:b,error:S}=s;if(S)throw S;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(c=t.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=t.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await gt(this.fetch,"GET",A,{headers:this.headers,jwt:(v=(m=b.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(i)throw i;return Bn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:t.provider,url:n?.url},error:null})}catch(n){if(ot(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:s}}=r;if(i)throw i;const{options:c,provider:f,token:p,access_token:m,nonce:v}=t,b=await gt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:f,id_token:p,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Ca}),{data:S,error:A}=b;return A?this._returnResult({data:{user:null,session:null},error:A}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new Zo}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:A}))}catch(i){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),ot(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:s,error:c}=r;if(c)throw c;return await gt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await rM(async i=>(i>0&&await tM(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await gt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ca})),(i,s)=>{const c=200*Math.pow(2,i);return s&&Dh(s)&&Date.now()+c-n<uc})}catch(n){if(this._debug(r,"error",n),ot(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Bn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Yo(this.storage,this.storageKey);if(i&&this.userStorage){let c=await Yo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:i.user},await dc(this.userStorage,this.storageKey+"-user",c)),i.user=(t=c?.user)!==null&&t!==void 0?t:qg()}else if(i&&!i.user&&!i.user){const c=await Yo(this.storage,this.storageKey+"-user");c&&c?.user?(i.user=c.user,await Ln(this.storage,this.storageKey+"-user"),await dc(this.storage,this.storageKey,i)):i.user=qg()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Vg;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Vg}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:c}=await this._callRefreshToken(i.refresh_token);c&&(console.error(c),Dh(c)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(i.access_token);!f&&c?.user?(i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(n,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new xi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new fp;const{data:s,error:c}=await this._refreshAccessToken(t);if(c)throw c;if(!s.session)throw new xi;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const f={data:s.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(s){if(this._debug(i,"error",s),ot(s)){const c={data:null,error:s};return Dh(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,r)}catch(p){s.push(p)}});if(await Promise.all(c),s.length>0){for(let f=0;f<s.length;f+=1)console.error(s[f]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ln(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await dc(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=WE(i);await dc(this.storage,this.storageKey,s)}else{const i=WE(r);await dc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ln(this.storage,this.storageKey),await Ln(this.storage,this.storageKey+"-code-verifier"),await Ln(this.storage,this.storageKey+"-user"),this.userStorage&&await Ln(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Bn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),uc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/uc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${uc}ms, refresh threshold is ${$x} ticks`),i<=$x&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof gy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,c]=await nc(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(c)}`});i.push(f.toString())}if(n?.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?this._returnResult({data:null,error:s}):await gt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:s,error:c}=r;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:p,error:m}=await gt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return m?this._returnResult({data:null,error:m}):(t.factorType==="totp"&&p.type==="totp"&&(!((i=p?.totp)===null||i===void 0)&&i.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const c=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?kM(t.webauthn.credential_response):PM(t.webauthn.credential_response)})}:{code:t.code}),{data:f,error:p}=await gt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:c,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:p}))})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const c=await gt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:IM(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:TM(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=r?.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Hg(n.access_token);let c=null;s.aal&&(c=s.aal);let f=c;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const m=s.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await gt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new xi})})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new xi});const c=await gt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&Bn()&&!r?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new xi});const c=await gt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&Bn()&&!r?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await gt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new xi})})}catch(t){if(ot(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await gt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new xi})})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(f=>f.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(f=>f.kid===t),n&&this.jwks_cached_at+V5>i)return n;const{data:s,error:c}=await gt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(f=>f.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:A,error:O}=await this.getSession();if(O||!A.session)return this._returnResult({data:null,error:O});n=A.session.access_token}const{header:i,payload:s,signature:c,raw:{header:f,payload:p}}=Hg(n);r?.allowExpired||cM(s.exp);const m=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!m){const{error:A}=await this.getUser(n);if(A)throw A;return{data:{claims:s,header:i,signature:c},error:null}}const v=uM(i.alg),b=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,b,c,Y5(`${f}.${p}`)))throw new Zh("Invalid JWT signature");return{data:{claims:s,header:i,signature:c},error:null}}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}};xy.nextInstanceID={};const zM=my,$M=xy,WM=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:zM,AuthApiError:VO,AuthClient:$M,AuthError:_c,AuthImplicitGrantRedirectError:Gu,AuthInvalidCredentialsError:qu,AuthInvalidJwtError:Zh,AuthInvalidTokenResponseError:Zo,AuthPKCEGrantCodeExchangeError:Vx,AuthRetryableFetchError:Yh,AuthSessionMissingError:xi,AuthUnknownError:ho,AuthWeakPasswordError:Hx,CustomAuthError:Rs,GoTrueAdminApi:my,GoTrueClient:xy,NavigatorLockAcquireTimeoutError:ZO,SIGN_OUT_SCOPES:Lh,isAuthApiError:HO,isAuthError:ot,isAuthImplicitGrantRedirectError:GO,isAuthRetryableFetchError:Dh,isAuthSessionMissingError:qO,isAuthWeakPasswordError:H5,lockInternals:Jo,navigatorLock:QO,processLock:wM},Symbol.toStringTag,{value:"Module"})),t4=Ed(WM);var ZE;function VM(){if(ZE)return Du;ZE=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.SupabaseAuthClient=void 0;const e=t4;let t=class extends e.AuthClient{constructor(n){super(n)}};return Du.SupabaseAuthClient=t,Du}var QE;function JE(){if(QE)return ah;QE=1,Object.defineProperty(ah,"__esModule",{value:!0});const e=pO,t=wO(),r=OO,n=M5,i=L5(),s=B5(),c=F5(),f=VM();class p{constructor(v,b,S){var A,O,I;this.supabaseUrl=v,this.supabaseKey=b;const P=(0,c.validateSupabaseUrl)(v);if(!b)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",P),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",P),this.storageUrl=new URL("storage/v1",P),this.functionsUrl=new URL("functions/v1",P);const M=`sb-${P.hostname.split(".")[0]}-auth-token`,L={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:M}),global:i.DEFAULT_GLOBAL_OPTIONS},R=(0,c.applySettingDefaults)(S??{},L);this.storageKey=(A=R.auth.storageKey)!==null&&A!==void 0?A:"",this.headers=(O=R.global.headers)!==null&&O!==void 0?O:{},R.accessToken?(this.accessToken=R.accessToken,this.auth=new Proxy({},{get:(U,W)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(W)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((I=R.auth)!==null&&I!==void 0?I:{},this.headers,R.global.fetch),this.fetch=(0,s.fetchWithAuth)(b,this._getAccessToken.bind(this),R.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},R.realtime)),this.accessToken&&this.accessToken().then(U=>this.realtime.setAuth(U)).catch(U=>console.warn("Failed to set initial Realtime auth token:",U)),this.rest=new t.PostgrestClient(new URL("rest/v1",P).href,{headers:this.headers,schema:R.db.schema,fetch:this.fetch}),this.storage=new n.StorageClient(this.storageUrl.href,this.headers,this.fetch,S?.storage),R.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(v){return this.rest.from(v)}schema(v){return this.rest.schema(v)}rpc(v,b={},S={head:!1,get:!1,count:void 0}){return this.rest.rpc(v,b,S)}channel(v,b={config:{}}){return this.realtime.channel(v,b)}getChannels(){return this.realtime.getChannels()}removeChannel(v){return this.realtime.removeChannel(v)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var v,b;if(this.accessToken)return await this.accessToken();const{data:S}=await this.auth.getSession();return(b=(v=S.session)===null||v===void 0?void 0:v.access_token)!==null&&b!==void 0?b:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:v,persistSession:b,detectSessionInUrl:S,storage:A,userStorage:O,storageKey:I,flowType:P,lock:M,debug:L,throwOnError:R},U,W){const V={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},V),U),storageKey:I,autoRefreshToken:v,persistSession:b,detectSessionInUrl:S,storage:A,userStorage:O,flowType:P,lock:M,debug:L,throwOnError:R,fetch:W,hasCustomAuthorizationHeader:Object.keys(this.headers).some(H=>H.toLowerCase()==="authorization")})}_initRealtimeClient(v){return new r.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},v),{params:Object.assign({apikey:this.supabaseKey},v?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((b,S)=>{this._handleTokenChanged(b,"CLIENT",S?.access_token)})}_handleTokenChanged(v,b,S){(v==="TOKEN_REFRESHED"||v==="SIGNED_IN")&&this.changedAccessToken!==S?(this.changedAccessToken=S,this.realtime.setAuth(S)):v==="SIGNED_OUT"&&(this.realtime.setAuth(),b=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return ah.default=p,ah}var eS;function HM(){return eS||(eS=1,(function(e){var t=ps&&ps.__createBinding||(Object.create?(function(v,b,S,A){A===void 0&&(A=S);var O=Object.getOwnPropertyDescriptor(b,S);(!O||("get"in O?!b.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return b[S]}}),Object.defineProperty(v,A,O)}):(function(v,b,S,A){A===void 0&&(A=S),v[A]=b[S]})),r=ps&&ps.__exportStar||function(v,b){for(var S in v)S!=="default"&&!Object.prototype.hasOwnProperty.call(b,S)&&t(b,v,S)},n=ps&&ps.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const i=n(JE());r(t4,e);var s=wO();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return s.PostgrestError}});var c=pO;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return c.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return c.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return c.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return c.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return c.FunctionRegion}}),r(OO,e);var f=JE();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return n(f).default}});const p=(v,b,S)=>new i.default(v,b,S);e.createClient=p;function m(){if(typeof window<"u"||typeof process>"u")return!1;const v=process.version;if(v==null)return!1;const b=v.match(/^v(\d+)\./);return b?parseInt(b[1],10)<=18:!1}m()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(ps)),ps}var r4=HM();const n4=da(r4),qM=Zv({__proto__:null,default:n4},[r4]),{PostgrestError:ote,FunctionsHttpError:lte,FunctionsFetchError:cte,FunctionsRelayError:ute,FunctionsError:dte,FunctionRegion:fte,SupabaseClient:hte,createClient:GM,GoTrueAdminApi:pte,GoTrueClient:mte,AuthAdminApi:gte,AuthClient:xte,navigatorLock:vte,NavigatorLockAcquireTimeoutError:yte,lockInternals:wte,processLock:bte,SIGN_OUT_SCOPES:Ete,AuthError:Ste,AuthApiError:Cte,AuthUnknownError:Ate,CustomAuthError:_te,AuthSessionMissingError:Nte,AuthInvalidTokenResponseError:Ote,AuthInvalidCredentialsError:Ite,AuthImplicitGrantRedirectError:Tte,AuthPKCEGrantCodeExchangeError:kte,AuthRetryableFetchError:Pte,AuthWeakPasswordError:jte,AuthInvalidJwtError:Rte,isAuthError:Mte,isAuthApiError:Dte,isAuthSessionMissingError:Lte,isAuthImplicitGrantRedirectError:Bte,isAuthRetryableFetchError:Fte,isAuthWeakPasswordError:Ute,RealtimePresence:zte,RealtimeChannel:$te,RealtimeClient:Wte,REALTIME_LISTEN_TYPES:Vte,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:Hte,REALTIME_PRESENCE_LISTEN_EVENTS:qte,REALTIME_SUBSCRIBE_STATES:Gte,REALTIME_CHANNEL_STATES:Kte}=n4||qM,Gg={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GEMINI_API_KEY:"AIzaSyBZfTYTu4PTBrJ0apswyVHkF-HJiNbJG80",VITE_SUPABASE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hYmpsaGpsa2VlaGFjenhyZ2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4Mzg5MDMsImV4cCI6MjA4MTQxNDkwM30.eHuUAZMQ9eGffxCwYwOczhzZuRksv41QoUaIulebpT4",VITE_SUPABASE_URL:"https://mabjlhjlkeehaczxrgcy.supabase.co"},i4=e=>Gg&&Gg[e]?Gg[e]:"",Kg=i4("VITE_SUPABASE_URL"),tS=i4("VITE_SUPABASE_KEY");let a4=null;if(Kg&&tS&&Kg!=="https://placeholder.supabase.co")try{a4=GM(Kg,tS)}catch(e){console.error("Error initializing Supabase:",e)}else console.warn("VITE_SUPABASE_URL o VITE_SUPABASE_KEY no configuradas. El backend funcionar en modo MOCK (sin persistencia).");const We=a4,KM=({onSuccess:e})=>{const[t,r]=N.useState(ws[0].id),n=ws.find(le=>le.id===t)||ws[0],[i,s]=N.useState({name:"",email:"",phone:"+569 ",date:"",time:"",isHomeService:!1,address:"",serviceId:n.id,serviceName:n.name,referral:""}),[c,f]=N.useState(!1),[p,m]=N.useState(!1),[v,b]=N.useState([]),[S,A]=N.useState([]),[O,I]=N.useState({}),[P,M]=N.useState(null),[L,R]=N.useState(!1);N.useEffect(()=>{s(le=>({...le,serviceId:n.id,serviceName:n.name,isHomeService:n.homeServiceOnly?!0:le.isHomeService}))},[n]);const U=n.durationMin+(i.isHomeService?R6:0),W=n.price+(i.isHomeService?j6:0);N.useEffect(()=>{i.date&&V(i.date)},[i.date]),N.useEffect(()=>{i.date&&H()},[i.date,S,U]),N.useEffect(()=>{const me=setTimeout(()=>{if(i.name.length>3&&i.phone.length>8){const Ae=JSON.parse(localStorage.getItem("mock_bookings")||"[]").find(J=>J.phone.replace(/\s/g,"")===i.phone.replace(/\s/g,"")&&J.name.toLowerCase()===i.name.toLowerCase());Ae&&(M(Ae),R(!0))}},1e3);return()=>clearTimeout(me)},[i.name,i.phone]);const V=async le=>{m(!0);try{let me=[];if(We){const{data:de,error:$e}=await We.from("bookings").select("time, duration_minutes").eq("date",le);!$e&&de&&(me=de.map(Ue=>{const[Xe,Z]=Ue.time.split(":").map(Number),_e=Xe*60+Z;return{start:_e,end:_e+Ue.duration_minutes}}))}const J=JSON.parse(localStorage.getItem("mock_bookings")||"[]").filter(de=>de.date===le).map(de=>{const[$e,Ue]=de.time.split(":").map(Number),Xe=$e*60+Ue,Z=de.duration_minutes||60;return{start:Xe,end:Xe+Z}});A([...me,...J])}catch(me){console.warn("Error fetching slots",me),A([])}finally{m(!1)}},H=()=>{const Ee=[];for(let Ae=9;Ae<20;Ae++)for(let J=0;J<60;J+=30){const de=Ae*60+J,$e=de+U;if($e>1200)continue;if(!S.some(Xe=>de>=Xe.start&&de<Xe.end||$e>Xe.start&&$e<=Xe.end||de<=Xe.start&&$e>=Xe.end)){const Xe=`${Ae.toString().padStart(2,"0")}:${J.toString().padStart(2,"0")}`;Ee.push(Xe)}}b(Ee),i.time&&!Ee.includes(i.time)&&s(Ae=>({...Ae,time:""}))},X=()=>{const le={};return i.name||(le.name="El nombre es obligatorio"),(!i.phone||i.phone.trim()==="+569")&&(le.phone="El telfono es obligatorio"),i.email?/\S+@\S+\.\S+/.test(i.email)||(le.email="El formato del email no es vlido"):le.email="El email es obligatorio",i.date||(le.date="Selecciona una fecha"),i.time||(le.time="Selecciona una hora"),i.isHomeService&&!i.address&&(le.address="La direccin es obligatoria para servicio a domicilio"),I(le),Object.keys(le).length===0},Y=le=>{const{name:me,value:Ee,type:Ae}=le.target,J=le.target.checked;s(de=>({...de,[me]:Ae==="checkbox"?J:Ee})),O[me]&&I(de=>{const $e={...de};return delete $e[me],$e})},we=le=>{s(me=>({...me,time:le})),O.time&&I(me=>{const Ee={...me};return delete Ee.time,Ee})},se=async()=>{const le=JSON.parse(localStorage.getItem("mock_bookings")||"[]"),me={id:Date.now(),...i,duration_minutes:U,created_at:new Date().toISOString()};if(le.push(me),localStorage.setItem("mock_bookings",JSON.stringify(le)),We)try{const{error:Ee}=await We.from("leads").upsert({phone:i.phone,name:i.name,email:i.email,last_booking_date:i.date},{onConflict:"phone"});Ee&&console.warn("Error saving lead:",Ee),await We.from("bookings").insert([{name:i.name,email:i.email,phone:i.phone,date:i.date,time:i.time,is_home_service:i.isHomeService,address:i.address||null,duration_minutes:U}])}catch(Ee){console.warn("Supabase save failed, relying on local:",Ee)}},ie=le=>{const Ee=JSON.parse(localStorage.getItem("mock_bookings")||"[]").filter(Ae=>Ae.id!==le);localStorage.setItem("mock_bookings",JSON.stringify(Ee))},be=()=>{P&&(ie(P.id),M(null),R(!1))},Ce=()=>{R(!1),s(le=>({...le,name:"",phone:"+569 "})),alert(`Entendido. Tu cita anterior (${P.date} a las ${P.time}) se mantiene. Gracias!`)},re=ip(),ze=async le=>{if(!X())return;f(!0),await se();const me=`${n.name}${i.isHomeService?" + Domicilio":" (En Studio)"}`,Ee=new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(W),Ae=`
Hola Tus3B Style, acabo de reservar en la web.
--------------------------------
*Cliente:* ${i.name}
*Telfono:* ${i.phone}
*Servicio:* ${me}
*Fecha:* ${i.date}
*Hora:* ${i.time}
*Duracin:* ${U} min
${i.isHomeService?`*Direccin:* ${i.address}`:""}
${i.referral?`*Referido por:* ${i.referral}`:""}
*Total:* ${Ee}
--------------------------------
Espero su confirmacin final. Gracias.
    `.trim();await new Promise(J=>setTimeout(J,800)),f(!1),e&&e(i),re("/confirmation",{state:{booking:i,totalPrice:W,duration:U}});{const J=`https://wa.me/${vc}?text=${encodeURIComponent(Ae)}`;window.open(J,"_blank")}};return g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start fade-in pb-12 relative",children:[L&&P&&g.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 bg-white/95 backdrop-blur-sm rounded-2xl animate-in fade-in zoom-in-95",children:g.jsxs("div",{className:"bg-white border border-stone-200 shadow-2xl p-8 rounded-2xl max-w-sm text-center",children:[g.jsx(sy,{className:"mx-auto text-amber-500 mb-4 h-12 w-12"}),g.jsx("h3",{className:"serif text-2xl font-bold text-stone-900 mb-2",children:"Ya tienes una reserva"}),g.jsxs("p",{className:"text-stone-600 mb-6 text-sm",children:["Hemos encontrado una cita para ",g.jsx("strong",{children:P.name})," el da ",g.jsx("strong",{children:P.date})," a las ",g.jsx("strong",{children:P.time}),"."]}),g.jsx("p",{className:"font-bold text-stone-900 mb-6 text-lg",children:"Deseas cambiar tu reserva?"}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("button",{onClick:be,className:"w-full bg-stone-900 text-white py-3 rounded-xl font-bold hover:bg-stone-700 transition",children:"S, cambiar cita"}),g.jsx("button",{onClick:Ce,className:"w-full bg-stone-100 text-stone-600 py-3 rounded-xl font-bold hover:bg-stone-200 transition",children:"No, mantener la anterior"})]})]})}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 relative",children:[!We&&g.jsxs("div",{className:"absolute top-0 right-0 bg-amber-100 text-amber-800 text-[10px] font-bold px-3 py-1 rounded-bl-lg flex items-center gap-1 z-10",children:[g.jsx(m6,{size:12})," MODO DEMO"]}),g.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Elige tu Servicio"}),g.jsxs("div",{className:"relative mb-6",children:[g.jsx("select",{value:t,onChange:le=>r(le.target.value),className:"w-full p-4 rounded-xl bg-stone-50 border border-stone-200 text-stone-900 font-serif text-lg focus:ring-2 focus:ring-stone-900 outline-none appearance-none",children:ws.map(le=>g.jsxs("option",{value:le.id,children:[le.name," - $",le.price.toLocaleString("es-CL")]},le.id))}),g.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:g.jsx("svg",{className:"w-5 h-5 text-stone-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),g.jsx("p",{className:"text-stone-500 font-light text-sm mb-4",children:n.description}),g.jsxs("div",{className:"flex justify-between items-center bg-stone-50 p-4 rounded-xl mb-4",children:[g.jsxs("div",{children:[g.jsx("span",{className:"block text-2xl font-semibold text-stone-900",children:new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(W)}),g.jsx("span",{className:"text-xs text-stone-500 uppercase tracking-wide",children:"Precio Estimado"})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("span",{className:"block text-lg font-medium text-stone-900",children:[U," min"]}),g.jsx("span",{className:"text-xs text-stone-500 uppercase tracking-wide",children:"Duracin"})]})]}),g.jsx("div",{className:"mb-4",children:g.jsxs("div",{className:`flex items-start p-3 rounded-lg border relative transition-colors ${n.homeServiceOnly?"bg-amber-50 border-amber-200":"bg-blue-50/50 border-blue-100"}`,children:[g.jsx("div",{className:"flex items-center h-5 mt-0.5",children:g.jsx("input",{id:"isHomeService",name:"isHomeService",type:"checkbox",checked:i.isHomeService,onChange:Y,disabled:n.homeServiceOnly,className:"focus:ring-stone-500 h-5 w-5 text-stone-900 border-gray-300 rounded cursor-pointer disabled:opacity-50"})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("label",{htmlFor:"isHomeService",className:"font-bold text-stone-900 cursor-pointer",children:n.homeServiceOnly?"Servicio Exclusivo a Domicilio":"Servicio a Domicilio? (+ $3.000)"}),g.jsxs("p",{className:"text-xs text-stone-500 mt-1 leading-relaxed",children:["Vamos a tu casa en ",M6.join(", "),". ",g.jsx("br",{}),g.jsx("span",{className:"text-blue-600 font-medium",children:"Incluye +30 min de traslado."})]})]})]})}),g.jsx("h4",{className:"text-xs uppercase tracking-widest text-stone-400 mb-3 font-bold mt-6",children:"Incluye"}),g.jsx("ul",{className:"space-y-2",children:n.includes.map((le,me)=>g.jsxs("li",{className:"flex items-center text-sm text-stone-700",children:[g.jsx(sp,{size:14,className:"text-stone-900 mr-2"}),le]},me))})]}),g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("h3",{className:"serif text-xl text-stone-900 mb-4 flex items-center gap-2",children:[g.jsx("span",{className:"bg-stone-900 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center font-sans",children:"1"}),"Tus Datos"]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Nombre y Apellido"}),g.jsx("input",{type:"text",name:"name",value:i.name,onChange:Y,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${O.name?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"Ej: Mara Prez"}),O.name&&g.jsx("p",{className:"text-red-500 text-xs mt-1",children:O.name})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Telfono"}),g.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:Y,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${O.phone?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"+569...",inputMode:"numeric"}),O.phone&&g.jsx("p",{className:"text-red-500 text-xs mt-1",children:O.phone})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Email"}),g.jsx("input",{type:"email",name:"email",value:i.email,onChange:Y,className:`w-full px-4 py-3 rounded-lg bg-stone-50 border ${O.email?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} focus:ring-1 outline-none transition-all`,placeholder:"correo@ejemplo.com"}),O.email&&g.jsx("p",{className:"text-red-500 text-xs mt-1",children:O.email})]})]}),g.jsxs("div",{className:"animate-in fade-in pt-2",children:[g.jsxs("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1 flex items-center gap-1",children:[g.jsx(id,{size:12})," Quin te recomend? (Opcional)"]}),g.jsx("input",{type:"text",name:"referral",value:i.referral,onChange:Y,className:"w-full px-4 py-3 rounded-lg bg-purple-50 border border-purple-100 focus:border-purple-300 focus:ring-1 outline-none transition-all placeholder-purple-300 text-purple-900",placeholder:"Nombre o Telfono de tu amiga"})]}),i.isHomeService&&g.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 pt-2",children:[g.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Direccin (Comuna y Calle)"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",name:"address",value:i.address,onChange:Y,className:`w-full px-4 py-3 rounded-lg bg-amber-50 border ${O.address?"border-red-300 focus:border-red-500":"border-amber-200 focus:border-amber-500"} focus:ring-1 pl-10 outline-none transition-all`,placeholder:"Av. Irarrzaval 1234, uoa"}),g.jsx(PN,{size:18,className:"absolute left-3 top-3.5 text-amber-500"})]}),O.address&&g.jsx("p",{className:"text-red-500 text-xs mt-1",children:O.address})]})]})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("h3",{className:"serif text-xl text-stone-900 mb-4 flex items-center gap-2",children:[g.jsx("span",{className:"bg-stone-900 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center font-sans",children:"2"}),"Fecha y Hora"]}),g.jsxs("div",{className:"mb-6",children:[g.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Selecciona un da"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"date",name:"date",min:new Date().toISOString().split("T")[0],value:i.date,onChange:Y,className:`w-full px-4 py-4 rounded-xl bg-stone-50 border ${O.date?"border-red-300 focus:border-red-500":"border-stone-200 focus:border-stone-900"} text-lg font-medium shadow-sm outline-none`}),g.jsx(NN,{size:20,className:"absolute right-4 top-4.5 text-stone-400 pointer-events-none"})]}),O.date&&g.jsx("p",{className:"text-red-500 text-xs mt-1",children:O.date})]}),i.date&&g.jsxs("div",{className:"animate-in fade-in",children:[g.jsxs("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-3 flex justify-between",children:[g.jsx("span",{children:"Horas Disponibles"}),p&&g.jsxs("span",{className:"flex items-center text-stone-400",children:[g.jsx(rd,{size:12,className:"animate-spin mr-1"})," Buscando..."]})]}),v.length>0?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-4 gap-3",children:v.map(le=>g.jsx("button",{onClick:()=>we(le),className:`py-3 px-2 rounded-lg text-sm font-bold transition-all transform active:scale-95 ${i.time===le?"bg-stone-900 text-white shadow-md scale-105 ring-2 ring-offset-2 ring-stone-900":"bg-white border border-stone-200 text-stone-600 hover:border-stone-900 hover:bg-stone-50"}`,children:le},le))}),O.time&&g.jsx("p",{className:"text-red-500 text-xs mt-2 text-center bg-red-50 p-2 rounded",children:O.time})]}):g.jsx("div",{className:"bg-stone-50 p-4 rounded-lg text-center text-stone-500 text-sm",children:p?"Cargando...":"No hay horas disponibles para este da. Intenta otra fecha."})]}),!i.date&&g.jsxs("div",{className:"text-center py-8 text-stone-400 text-sm italic",children:[g.jsx(ON,{size:32,className:"mx-auto mb-2 opacity-20"}),"Selecciona una fecha para ver disponibilidad"]})]}),g.jsxs("div",{className:"pt-2 sticky bottom-4 z-10",children:[g.jsxs("button",{onClick:()=>ze(),disabled:c,className:"w-full flex justify-center items-center space-x-2 bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-xl shadow-xl transition-all transform hover:-translate-y-1 disabled:opacity-75 disabled:cursor-not-allowed disabled:transform-none",children:[c?g.jsx(rd,{className:"animate-spin"}):g.jsx(FN,{size:22}),g.jsx("span",{className:"text-lg",children:c?"Procesando...":"Confirmar y Enviar WhatsApp"})]}),g.jsx("p",{className:"text-xs text-center text-stone-400 mt-3 px-4",children:"Al confirmar, volvers al inicio y se abrir WhatsApp."})]})]})]})},XM=({onSelectPerfume:e})=>{const[t,r]=N.useState(!1),[n,i]=N.useState(""),[s,c]=N.useState([]),[f,p]=N.useState(!1),m=b=>{if(b.preventDefault(),!n.trim())return;const S=n.toLowerCase().split(/[\s,]+/).filter(I=>I.length>2),O=qa.map(I=>{let P=0;const M=[],L=(R,U)=>{S.forEach(W=>{R.toLowerCase().includes(W)&&(P+=U,M.includes(W)||M.push(W))})};return L(I.name,3),L(I.description,1),L(I.brand,2),I.notes.forEach(R=>L(R,2)),L(I.category==="arab"?"arabe":"clasico",2),{perfume:I,score:P,matches:M}}).filter(I=>I.score>0).sort((I,P)=>P.score-I.score).slice(0,3);c(O),p(!0)},v=()=>{i(""),c([]),p(!1)};return g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:()=>r(!0),className:"fixed bottom-6 right-6 z-40 bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-4 rounded-full shadow-2xl hover:scale-105 transition-transform flex items-center gap-2",children:[g.jsx(Cc,{size:24,className:"animate-pulse"}),g.jsx("span",{className:"font-bold pr-1 hidden md:block",children:"Asesor IA"})]}),t&&g.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[g.jsxs("div",{className:"bg-gradient-to-r from-purple-700 to-indigo-800 p-6 text-white relative",children:[g.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 text-white/80 hover:text-white",children:g.jsx(yi,{size:24})}),g.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2 mb-1",children:[g.jsx(Cc,{className:"text-yellow-300"})," Asesor de Aromas"]}),g.jsx("p",{className:"text-white/80 text-sm",children:"Cuntame qu te gusta y te recomendar tu perfume ideal."})]}),g.jsx("div",{className:"p-6 flex-1 overflow-y-auto",children:f?g.jsx("div",{className:"space-y-4",children:s.length>0?g.jsxs(g.Fragment,{children:[g.jsx("h3",{className:"font-bold text-stone-700 text-sm uppercase tracking-wider mb-2",children:"Mejores Coincidencias:"}),s.map(({perfume:b,matches:S},A)=>g.jsxs("div",{onClick:()=>{e(b.id),r(!1)},className:"border border-stone-200 rounded-xl p-3 flex gap-3 hover:border-purple-500 hover:shadow-md transition cursor-pointer bg-white group",children:[g.jsxs("div",{className:"w-16 h-16 bg-stone-100 rounded-lg flex-shrink-0 overflow-hidden relative",children:[A===0&&g.jsx("div",{className:"absolute top-0 left-0 bg-yellow-400 text-yellow-900 text-[10px] font-bold px-1.5 py-0.5 rounded-br",children:"#1"}),g.jsx("img",{src:b.image,alt:b.name,className:"w-full h-full object-cover"})]}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h4",{className:"font-bold text-stone-900 truncate group-hover:text-purple-700",children:b.name}),g.jsx("p",{className:"text-xs text-stone-500 mb-2 truncate",children:b.brand}),g.jsx("div",{className:"flex flex-wrap gap-1",children:S.map(O=>g.jsxs("span",{className:"bg-purple-100 text-purple-700 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:[" ",O]},O))})]})]},b.id)),g.jsx("button",{onClick:v,className:"w-full text-center text-sm text-stone-400 hover:text-stone-600 mt-4 underline",children:"Probar otra bsqueda"})]}):g.jsxs("div",{className:"text-center py-8",children:[g.jsx("p",{className:"text-stone-500 mb-4",children:"No encontr coincidencias exactas. "}),g.jsx("button",{onClick:v,className:"bg-stone-100 text-stone-700 px-4 py-2 rounded-lg font-bold",children:"Intentar de nuevo"})]})}):g.jsxs("div",{className:"text-center py-8",children:[g.jsx("div",{className:"bg-purple-50 inline-flex p-4 rounded-full mb-4",children:g.jsx(ly,{size:48,className:"text-purple-400"})}),g.jsx("h3",{className:"font-bold text-stone-700 mb-2",children:"Qu buscas hoy?"}),g.jsxs("p",{className:"text-stone-500 text-sm mb-6",children:["Ejemplos: ",g.jsx("br",{}),'"Algo dulce con vainilla"',g.jsx("br",{}),'"Fresco y ctrico para el da"',g.jsx("br",{}),'"Intenso y sexy para fiesta"']})]})}),g.jsx("form",{onSubmit:m,className:"p-4 border-t border-stone-100 bg-stone-50",children:g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",value:n,onChange:b=>i(b.target.value),placeholder:"Escribe aqu...",className:"w-full pl-4 pr-12 py-3 rounded-xl border border-stone-300 focus:ring-2 focus:ring-purple-500 outline-none shadow-sm",autoFocus:!0}),g.jsx("button",{type:"submit",disabled:!n.trim(),className:"absolute right-2 top-2 p-1.5 bg-purple-600 text-white rounded-lg disabled:bg-stone-300 disabled:cursor-not-allowed transition",children:f?g.jsx(Sc,{size:20}):g.jsx(BN,{size:20})})]})})]})})]})},YM=()=>{const[e,t]=N.useState(""),[r,n]=N.useState(null),[i,s]=N.useState("all"),[c,f]=N.useState({});N.useEffect(()=>{p()},[]);const p=async()=>{const{data:L}=await We.from("inventory").select("product_id, quantity");if(L){const R={};L.forEach(U=>{R[U.product_id]=U.quantity}),f(R)}},m=L=>{t("");const R=qa.find(U=>U.id===L);R&&(s(R.category),setTimeout(()=>{const U=document.getElementById(`perfume-${L}`);U&&U.scrollIntoView({behavior:"smooth",block:"center"}),U?.classList.add("ring-4","ring-purple-500","ring-opacity-50"),setTimeout(()=>U?.classList.remove("ring-4","ring-purple-500","ring-opacity-50"),2e3)},100))},v=N.useMemo(()=>{const L=new Set;return qa.forEach(R=>R.notes.forEach(U=>L.add(U))),Array.from(L).sort()},[]),b=N.useMemo(()=>qa.filter(L=>{const R=L.name.toLowerCase().includes(e.toLowerCase())||L.brand.toLowerCase().includes(e.toLowerCase()),U=r?L.notes.includes(r):!0,W=i==="all"||L.category===i;return R&&U&&W}).sort((L,R)=>{const U=c[L.id]!==void 0?c[L.id]>0:L.stock,W=c[R.id]!==void 0?c[R.id]>0:R.stock;return U===W?0:U?-1:1}),[e,r,i,c]),S=b.filter(L=>L.category==="classic"),A=b.filter(L=>L.category==="arab"),O=(L,R)=>{const U=R==="5ml"?L.price5ml:L.price10ml,W=`Hola Tus3B Style, quiero comprar el decant de *${L.brand} - ${L.name}* en formato *${R}* por $${U}. Tienen disponibilidad?`,V=`https://wa.me/${vc}?text=${encodeURIComponent(W)}`;window.open(V,"_blank")},I=L=>{if(!L.priceFullBottle)return;const R=`Hola Tus3B Style, quiero comprar la botella completa de *${L.brand} - ${L.name}* por $${L.priceFullBottle.toLocaleString("es-CL")}. Tienen disponibilidad?`,U=`https://wa.me/${vc}?text=${encodeURIComponent(R)}`;window.open(U,"_blank")},P=()=>{window.open(`https://wa.me/${vc}?text=${encodeURIComponent("Hola Tus3B Style, me gustara cotizar/encargar un perfume que no veo en el catlogo.")}`,"_blank")},M=L=>g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12",children:L.map((R,U)=>g.jsxs("div",{className:"group flex flex-col h-full",children:[g.jsxs("div",{className:"relative aspect-[4/5] overflow-hidden bg-white rounded-2xl mb-5 shadow-[0_2px_10px_-4px_rgba(0,0,0,0.05)] border border-stone-100 transition-all duration-300 group-hover:shadow-[0_8px_30px_-4px_rgba(0,0,0,0.1)]",children:[!e&&!r&&g.jsx("div",{className:"absolute top-0 left-0 bg-stone-900 text-white w-8 h-8 flex items-center justify-center font-serif text-sm border-br-xl z-10",children:U+1}),g.jsxs("div",{className:"relative w-full h-full p-8 transition-transform duration-700 ease-out group-hover:scale-105",children:[g.jsx("img",{src:R.image,alt:R.name,className:`w-full h-full object-contain ${R.secondaryImage?"transition-opacity duration-500 group-hover:opacity-0":""}`}),R.secondaryImage&&g.jsx("img",{src:R.secondaryImage,alt:`${R.name} detalle`,className:"absolute inset-0 w-full h-full object-contain p-0 transition-opacity duration-500 opacity-0 group-hover:opacity-100"})]}),g.jsx("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity bg-stone-900/90 text-white text-[10px] uppercase font-bold px-2 py-1 rounded",children:"Original"}),!R.stock&&g.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-[1px] flex items-center justify-center z-20",children:g.jsx("span",{className:"bg-stone-900 text-white px-4 py-2 rounded-lg font-bold uppercase tracking-widest text-xs shadow-lg",children:"Agotado"})})]}),g.jsxs("div",{className:"flex-1 flex flex-col",children:[g.jsx("h4",{className:"text-xs uppercase tracking-wider text-stone-500 font-bold mb-1",children:R.brand}),g.jsx("h3",{className:"serif text-2xl text-stone-900 mb-2 group-hover:text-stone-700 transition-colors",children:R.name}),g.jsx("p",{className:"text-stone-600 text-sm mb-4 line-clamp-3 leading-relaxed flex-grow",children:R.description}),g.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:R.notes.slice(0,3).map(W=>g.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-stone-50 text-stone-500 px-2 py-1 rounded border border-stone-100",children:W},W))}),g.jsxs("div",{className:"mt-auto space-y-3",children:[!R.isSpray&&g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("button",{onClick:()=>O(R,"5ml"),disabled:!R.stock,className:`group/btn flex flex-col items-center justify-center p-2.5 border rounded-lg transition-all duration-300 ${R.stock?"border-stone-200 hover:border-stone-900 hover:bg-stone-900":"border-stone-100 bg-stone-50 opacity-50 cursor-not-allowed"}`,children:[g.jsx("span",{className:"text-[10px] font-bold text-stone-500 uppercase mb-0.5 group-hover/btn:text-stone-400",children:"5 ML"}),g.jsxs("span",{className:"text-stone-900 font-semibold group-hover/btn:text-white",children:["$",R.price5ml.toLocaleString("es-CL")]})]}),g.jsxs("button",{onClick:()=>O(R,"10ml"),disabled:!R.stock,className:`group/btn flex flex-col items-center justify-center p-2.5 border rounded-lg transition-all duration-300 ${R.stock?"border-stone-200 hover:border-stone-900 hover:bg-stone-900":"border-stone-100 bg-stone-50 opacity-50 cursor-not-allowed"}`,children:[g.jsx("span",{className:"text-[10px] font-bold text-stone-500 uppercase mb-0.5 group-hover/btn:text-stone-400",children:"10 ML"}),g.jsxs("span",{className:"text-stone-900 font-semibold group-hover/btn:text-white",children:["$",R.price10ml.toLocaleString("es-CL")]})]})]}),R.priceFullBottle&&g.jsxs("button",{onClick:()=>I(R),disabled:!(c[R.id]!==void 0?c[R.id]>0:R.stock),className:`w-full flex items-center justify-center gap-2 p-3 rounded-lg font-bold uppercase text-xs tracking-wider transition-all ${(c[R.id]!==void 0?c[R.id]>0:R.stock)?"bg-stone-900 text-white hover:bg-stone-800 shadow-md hover:shadow-lg":"bg-stone-100 text-stone-400 cursor-not-allowed"}`,children:[g.jsx(hl,{size:14}),g.jsxs("span",{children:["Botella ",R.isSpray?"200ml":"100ml"," - $",R.priceFullBottle.toLocaleString("es-CL")]})]})]})]})]},R.id))});return g.jsxs("div",{className:"space-y-16 fade-in",children:[g.jsxs("div",{className:"flex flex-col border-b border-stone-200 pb-8 gap-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"serif text-4xl text-stone-900",children:"Catlogo de Decants"}),g.jsx("p",{className:"text-stone-500 mt-2 max-w-xl",children:"Descubre tu firma olfativa con nuestra curadura de perfumes 100% originales."})]}),g.jsxs("div",{className:"relative w-full md:w-72",children:[g.jsx("input",{type:"text",placeholder:"Buscar marca o nombre...",className:"pl-10 pr-4 py-3 border border-stone-300 rounded-xl focus:ring-stone-900 focus:border-stone-900 w-full transition-shadow hover:shadow-sm",value:e,onChange:L=>t(L.target.value)}),g.jsx(Sc,{size:18,className:"absolute left-3 top-3.5 text-stone-400"})]})]}),g.jsx("div",{className:"w-full overflow-x-auto pb-2 -mx-4 px-4 md:mx-0 md:px-0 scrollbar-hide",children:g.jsxs("div",{className:"flex flex-nowrap md:flex-wrap gap-2 items-center min-w-max",children:[g.jsx("span",{className:"text-xs font-bold uppercase text-stone-400 mr-2 sticky left-0 bg-white pl-2 md:pl-0",children:"Filtrar:"}),v.map(L=>g.jsx("button",{onClick:()=>n(r===L?null:L),className:`text-xs px-4 py-2 rounded-full border transition-all duration-200 whitespace-nowrap ${r===L?"bg-stone-900 text-white border-stone-900 shadow-md":"bg-white text-stone-600 border-stone-200 active:bg-stone-100"}`,children:L},L))]})})]}),g.jsxs("section",{className:"bg-stone-50 rounded-3xl p-8 md:p-12 relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-purple-100 rounded-full blur-[80px] opacity-60 mix-blend-multiply"}),g.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-amber-100 rounded-full blur-[60px] opacity-60 mix-blend-multiply"}),g.jsxs("div",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[g.jsxs("div",{className:"space-y-6",children:[g.jsx("span",{className:"inline-block px-3 py-1 bg-stone-900 text-white text-[10px] font-bold uppercase tracking-widest rounded-full",children:"Sabas que..."}),g.jsxs("h3",{className:"serif text-3xl md:text-4xl text-stone-900 leading-tight",children:["Por qu elegir ",g.jsx("span",{className:"italic text-stone-500",children:"Decants"}),"?"]}),g.jsx("p",{className:"text-stone-600 text-lg font-light leading-relaxed",children:"No necesitas gastar una fortuna para oler increble. Los decants son la forma inteligente de construir tu coleccin de perfumes."}),g.jsxs("ul",{className:"space-y-4 pt-2",children:[g.jsxs("li",{className:"flex items-start gap-3",children:[g.jsx("div",{className:"bg-white p-1.5 rounded-full shadow-sm mt-0.5",children:g.jsx(xc,{size:14,className:"text-green-500"})}),g.jsxs("span",{className:"text-stone-700 text-sm",children:[g.jsx("strong",{className:"text-stone-900",children:"Variedad vs. Monotona:"})," Por el precio de 1 botella llena, puedes tener 5 fragancias diferentes para cada ocasin."]})]}),g.jsxs("li",{className:"flex items-start gap-3",children:[g.jsx("div",{className:"bg-white p-1.5 rounded-full shadow-sm mt-0.5",children:g.jsx(xc,{size:14,className:"text-green-500"})}),g.jsxs("span",{className:"text-stone-700 text-sm",children:[g.jsx("strong",{className:"text-stone-900",children:"Portabilidad Total:"})," Llvalos en tu cartera, auto o viaje. El formato perfecto para reaplicar durante el da."]})]}),g.jsxs("li",{className:"flex items-start gap-3",children:[g.jsx("div",{className:"bg-white p-1.5 rounded-full shadow-sm mt-0.5",children:g.jsx(xc,{size:14,className:"text-green-500"})}),g.jsxs("span",{className:"text-stone-700 text-sm",children:[g.jsx("strong",{className:"text-stone-900",children:"Prueba Real:"})," salo por semanas antes de comprometerte con la botella grande (que tambin vendemos!)."]})]})]})]}),g.jsxs("div",{className:"relative",children:[g.jsx("img",{src:"/images/perfumes/decant-showcase.png",alt:"Coleccin de Decants",className:"rounded-2xl shadow-xl w-full object-cover h-80 rotate-2 hover:rotate-0 transition-transform duration-500",onError:L=>L.target.src="https://images.unsplash.com/photo-1592914610354-fd354ea45e48?auto=format&fit=crop&q=80&w=800"}),g.jsxs("div",{className:"absolute -bottom-6 -left-6 bg-white p-4 rounded-xl shadow-lg border border-stone-100 max-w-[200px]",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx(UN,{fill:"#fbbf24",className:"text-amber-400",size:16}),g.jsx("span",{className:"text-xs font-bold text-stone-900",children:"100% Originales"})]}),g.jsx("p",{className:"text-[10px] text-stone-500 leading-tight",children:"Nunca rellenamos con imitaciones. Solo extraemos el perfume directo de la botella original."})]})]})]})]}),(()=>{const L=W=>W.some(V=>c[V.id]!==void 0?c[V.id]>0:V.stock),U=[{id:"arab",hasStock:L(A),items:A,render:()=>g.jsxs("section",{children:[g.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[g.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:g.jsx(Cc,{size:24,className:"text-purple-600"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"serif text-3xl text-stone-900",children:"Joyas rabes"}),g.jsx("p",{className:"text-sm text-stone-500 uppercase tracking-widest font-bold mt-1",children:"Virales del Momento"})]})]}),M(A)]},"arab")},{id:"classic",hasStock:L(S),items:S,render:()=>g.jsxs("section",{children:[g.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[g.jsx("div",{className:"bg-stone-100 p-2 rounded-full",children:g.jsx(c6,{size:24,className:"text-stone-800"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"serif text-3xl text-stone-900",children:"Clsicos del Lujo"}),g.jsx("p",{className:"text-sm text-stone-500 uppercase tracking-widest font-bold mt-1",children:"Ranking de Tendencia 2025-26"})]})]}),M(S)]},"classic")}].sort((W,V)=>W.hasStock===V.hasStock?W.id==="arab"?-1:1:W.hasStock?-1:1);return U.map((W,V)=>g.jsxs(Nr.Fragment,{children:[W.items.length>0&&W.render(),V===0&&U.length>1&&U[1].items.length>0&&U[0].items.length>0&&g.jsx("div",{className:"border-t border-stone-100 my-16"})]},W.id))})(),b.length===0&&g.jsxs("div",{className:"text-center py-24 bg-stone-50 rounded-2xl border border-dashed border-stone-200",children:[g.jsx(hl,{size:48,className:"mx-auto text-stone-300 mb-4"}),g.jsx("h4",{className:"text-stone-900 font-bold text-lg mb-1",children:"No encontramos resultados"}),g.jsx("p",{className:"text-stone-500 text-sm",children:"Prueba ajustando tus filtros de bsqueda."})]}),g.jsxs("div",{className:"mt-20 bg-stone-900 rounded-3xl p-8 md:p-14 text-center text-white relative overflow-hidden shadow-2xl ring-1 ring-white/10",children:[g.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[g.jsx("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-full mb-6 ring-1 ring-white/20",children:g.jsx(v6,{size:32,className:"text-yellow-200"})}),g.jsx("h3",{className:"serif text-3xl md:text-5xl mb-6",children:"Buscas algo exclusivo?"}),g.jsx("p",{className:"text-stone-300 mb-10 max-w-2xl mx-auto text-lg font-light leading-relaxed",children:"Si no encuentras tu fragancia favorita en nuestro catlogo, contctanos. Hacemos encargos especiales para que encuentres tu firma olfativa perfecta."}),g.jsxs("button",{onClick:P,className:"group inline-flex items-center bg-white text-stone-900 px-8 py-4 rounded-full font-bold uppercase tracking-widest hover:bg-stone-100 transition-all transform hover:-translate-y-1 shadow-[0_10px_20px_-10px_rgba(255,255,255,0.3)]",children:[g.jsx(ly,{className:"mr-3 group-hover:text-amber-600 transition-colors",size:20}),"Cotizar Encargo"]})]}),g.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://images.unsplash.com/photo-1541643600914-78b084683601?auto=format&fit=crop&q=80')] opacity-20 bg-cover bg-center mix-blend-overlay grayscale"})]}),g.jsx(XM,{onSelectPerfume:m})]})},ZM=()=>g.jsx("footer",{className:"bg-stone-900 text-white py-12 md:py-16",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 text-center md:text-left",children:[g.jsxs("div",{children:[g.jsxs("span",{className:"serif text-3xl font-bold italic tracking-tighter block mb-4",children:["Tus3B ",g.jsx("span",{className:"text-stone-400 not-italic font-light text-xl ml-1",children:"Style"})]}),g.jsx("p",{className:"text-stone-400 font-light max-w-xs mx-auto md:mx-0",children:"Elevando tu estilo con servicios de peluquera premium a domicilio y lo mejor de la perfumera internacional."})]}),g.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[g.jsx("h4",{className:"uppercase tracking-widest text-xs font-bold text-stone-500 mb-4",children:"Contacto"}),g.jsxs("a",{href:`https://wa.me/${vc}`,className:"text-stone-300 hover:text-white mb-2 transition flex items-center gap-2",children:[g.jsx(ly,{size:16})," WhatsApp: +56 9 8452 4774"]}),g.jsx("span",{className:"text-stone-300 mb-2",children:"Santiago, Chile"}),g.jsx("span",{className:"text-stone-300",children:"contacto@tus3b.cl"})]}),g.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[g.jsx("h4",{className:"uppercase tracking-widest text-xs font-bold text-stone-500 mb-4",children:"Sguenos"}),g.jsx("div",{className:"flex space-x-4",children:g.jsx("a",{href:P6,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-stone-800 rounded-full hover:bg-stone-700 transition",children:g.jsx(g6,{size:20})})})]})]}),g.jsxs("div",{className:"border-t border-stone-800 mt-12 pt-8 text-center text-stone-500 text-sm font-light",children:[" ",new Date().getFullYear()," Tus3B Style. Todos los derechos reservados."]})]})}),QM=[{name:"Lattafa Teriaq",brand:"Lattafa",inspiration:"Creacin original de Quentin Bisch (estilo La Belle JPG)",profile:"Gourmand, dulce y acuerado (caramelo, almendra, chabacano, miel, cuero, vainilla).",performance:"Beast Mode! +8-10 horas. Proyeccin notable.",target:"Mujer audaz, sexy, misteriosa. Climas fros/noche.",keywords:["teriaq","quentin bisch","la belle","jpg","cuero","miel","beast mode","dulce","sexy"],details:"Obra maestra de Quentin Bisch. Un perfume polarizante que mezcla dulzura gourmand con cuero. Una declaracin de intenciones para 'arrasar'."},{name:"Lattafa Pride Wujood",brand:"Lattafa Pride",inspiration:"Kenzo Homme Eau de Toilette Intense (con giro propio)",profile:"Marino, especiado y amaderado. Sin la nota de higo de Kenzo, destaca el sndalo.",performance:"Muy buen rendimiento.",target:"Hombre que busca alternativa a Kenzo pero distintiva. Uso diario.",keywords:["wujood","wajood","kenzo","marino","intense","sandalo","especiado"],details:"Una inspiracin con identidad propia. Evoca a Kenzo pero sin la nota frutal de higo, ofreciendo una firma amaderada y especiada nica."},{name:"Lattafa Pride Masa",brand:"Lattafa Pride",inspiration:"Ganymede de Marc-Antoine Barrois",profile:"Mineral, 'acerado', con giro tropical de MANGO en la salida.",performance:"Muy buen rendimiento.",target:"Sofisticado, audaz, moderno. Nicho usable.",keywords:["masa","ganymede","mineral","mango","nicho","ropical"],details:"Exclusividad nicho con un giro tropical. Mantiene los toques minerales de Ganymede pero aade mango jugoso para hacerlo ms vibrante y usable."},{name:"Lattafa Khamrah Qahwa",brand:"Lattafa",inspiration:"Angel's Share de Kilian (con giro de caf)",profile:"Gourmand, dulce, cremoso (CAF, canela, cardamomo, pralin, frutas confitadas).",performance:"Muy bueno, empalagoso y potente.",target:"Amantes de lo gourmand extremo, invierno, citas.",keywords:["khamrah","qahwa","angel","kilian","cafe","coffee","dulce","canela","gourmand"],details:"Una 'Inspiracin' con personalidad marcada. Aade una nota prominente de caf ('Qahwa') y frutas confitadas, diferencindose de Angel's Share."},{name:"Lattafa Pride La Collection D'antiquites 1886",brand:"Lattafa Pride",inspiration:"Dior Homme Intense",profile:"Atalcado, especiado, cremoso (iris, chocolate blanco, tabaco, yerba mate).",performance:"Rinde muy bien.",target:"Semiformal a formal, elegante, refinado.",keywords:["1886","antiquites","dior homme","iris","atalcado","chocolate","elegante","formal"],details:"Personalidad propia muy marcada. Comparte el iris de Dior pero lo eleva con chocolate blanco y tabaco, ofreciendo un refinamiento nico."},{name:"Maison Alhambra Immortal",brand:"Maison Alhambra",inspiration:"L'Immensit de Louis Vuitton",profile:"Ctrico, aromtico y acutico (pomelo, jengibre, ambroxan).",performance:"Buen rendimiento para ser fresca.",target:"Hombre que busca lujo fresco para verano y diario.",keywords:["immortal","jean lowe","immensite","louis vuitton","lv","citrico","fresco","verano","acuatico"],details:"Un 'Clonazo' de L'Immensit. Frescura ctrica y lujo a un precio accesible. Ideal para el verano."},{name:"Maison Alhambra Jean Lowe Noir",brand:"Maison Alhambra",inspiration:"Ombre Nomade de Louis Vuitton",profile:"Oscuro, ahumado, terroso, resinoso (incienso, oud, abedul).",performance:"Muy bueno, potente y opulento.",target:"Amante de fragancias oscuras y potentes. Invierno/Noche.",keywords:["jean lowe noir","ombre nomade","louis vuitton","lv","oscuro","oud","incienso","fuerte"],details:"Captura la esencia oscura y opulenta de Ombre Nomade (que cuesta 10 veces ms). Perfume con mucho carcter."},{name:"Armaf Odyssey Mega",brand:"Armaf",inspiration:"Y Eau de Parfum de Yves Saint Laurent",profile:"Ctrico, afrutado (naranja, menta, jengibre, pia), fondo amaderado.",performance:"6-7 horas, sper verstil ('perfume azul').",target:"Juvenil, verstil, diario.",keywords:["odyssey mega","y edp","ysl","yves saint laurent","azul","versatil","citrico","afrutado"],details:"El 'Caballo de batalla' diario. Un clonazo de Y EDP con rendimiento slido, a veces superior a las formulaciones actuales del original."},{name:"Armaf Odyssey Mandarin Sky",brand:"Armaf",inspiration:"Scandal Eau de Toilette de Jean Paul Gaultier",profile:"Cremosa, dulce, caramelizada (mandarina, azafrn, caramelo, haba tonka).",performance:"Buen rendimiento, dulce y nocturna.",target:"Juvenil, salidas, fiesta. xito de ventas.",keywords:["odyssey mandarin","mandarin sky","scandal","jpg","jean paul gaultier","dulce","caramelo","noche"],details:"Un 'clonazo descarado' de Scandal. Sper ventas reciente, combo adictivo de mandarina y caramelo."},{name:"Armaf Odyssey Dubai Chocolat",brand:"Armaf",inspiration:"Aroma Gourmand Original (Galleta de Chocolate)",profile:"Gourmand (galleta chocolate, pralin, vainilla, pistacho).",performance:"Normal (6-7h), proyeccin moderada.",target:"Citas, encuentros cercanos, amantes del chocolate.",keywords:["dubai chocolat","chocolate","galleta","gourmand","pistacho","cita"],details:"Arma secreta para citas. Aroma realista a galleta de chocolate para una impresin memorable."},{name:"Armaf Midnight Dubai Nights",brand:"Armaf",inspiration:"MYSLF de Yves Saint Laurent",profile:"Limpio, ctrico, fresco y floral masculino.",performance:"Potencia muy importante, gran proyeccin inicial.",target:"Da a da, oficina, verstil elegante.",keywords:["midnight","dubai nights","myslf","ysl","floral","limpio","oficina"],details:"Mejora estratgica de MYSLF con mayor potencia y proyeccin en las primeras horas."},{name:"Armaf Club De Nuit Iconic",brand:"Armaf",inspiration:"Bleu de Chanel Eau de Parfum",profile:"Azul elctrico, ctrico, incienso, sndalo.",performance:"Slido y confiable.",target:"Elegante, verstil, formal e informal. Clsico moderno.",keywords:["iconic","bleu de chanel","chanel","azul","elegante","incienso"],details:"Elegancia atemporal reinventada. Ms vibrante y elctrico que el clsico Bleu."},{name:"Armaf Aura Fresh",brand:"Armaf",inspiration:"Versace Man Eau Fraiche + Montblanc Starwalker",profile:"Fresco, alimonado, amaderado, oznico.",performance:"Mejor que Starwalker, ideal para calor.",target:"Verano, calor, da a da, ultra verstil.",keywords:["aura fresh","versace","eau fraiche","starwalker","fresco","verano","limon"],details:"El 'dos en uno' del frescor. Fusin de Starwalker y Versace Eau Fraiche."},{name:"Armaf Checkmate King",brand:"Armaf",inspiration:"Scandal Absolu de Jean Paul Gaultier",profile:"Dulce oscuro, concentrado (ADN Mandarin Sky pero ms maduro).",performance:"Excelente duracin y proyeccin.",target:"Noche sofisticada, alegre pero maduro.",keywords:["checkmate king","scandal absolu","jpg","oscuro","maduro","noche"],details:"Evolucin natural de Mandarin Sky. Ms oscuro y sofisticado."},{name:"Armaf Beach Party",brand:"Armaf",inspiration:"Summerhammer (Nicho)",profile:"Fresco, frutal tropical (guayaba, ctricos). Unisex.",performance:"Buena duracin y muy buena proyeccin.",target:"Verano, vacaciones, playa, relax. Unisex.",keywords:["beach party","summerhammer","tropical","frutal","guayaba","unisex","playa"],details:"Cctel de frutas tropicales vibrante. Escapada instantnea a la playa."},{name:"Armaf Club de Nuit Precioso",brand:"Armaf",inspiration:"Creed Aventus Absolu",profile:"Frutal maduro, especiado (pia, maderas, musgo).",performance:"Potente, +8 horas.",target:"Hombre maduro, conocedor, calidad y potencia.",keywords:["precioso","aventus absolu","creed","pia","especiado","maduro"],details:"Alternativa inteligente a Aventus Absolu. Ms maduro y especiado."},{name:"Armaf Club de Nuit Intense Man",brand:"Armaf",inspiration:"Creed Aventus (El Rey de los Clones)",profile:"Ctrico, ahumado, frutal (pia/limn), amaderado.",performance:"Beast Mode (sobre todo Parfum/Extrait).",target:"Todo uso. La leyenda.",keywords:["club de nuit intense","cdnim","aventus","creed","limon","ahumado","beast"],details:"La leyenda de Armaf. EDT proyecta mucho (salida fuerte), Parfum es ms equilibrado."},{name:"Armaf Club de Nuit Urban Man Elixir",brand:"Armaf",inspiration:"Dior Sauvage + Hacivat (Toque frutal)",profile:"Fresco, especiado (ambroxan) y frutal.",performance:"Excelente (8-10 horas), generador de cumplidos.",target:"Verstil, fiesta, diario. El que ms gusta.",keywords:["urban man elixir","sauvage","dior","hacivat","frutal","ambroxan","elixir"],details:"El 'dos por uno' de los cumplidos: Sauvage con toque nicho frutal."},{name:"Armaf Infinity",brand:"Armaf",inspiration:"L'Homme Ultime de YSL (Descontinuado)",profile:"Fresco, especiado, floral (rosa, jengibre).",performance:"Superior al original.",target:"Oficina, formal, hombre elegante que busca rosa masculina.",keywords:["infinity","l'homme ultime","ysl","rosa","jengibre","oficina","elegante"],details:"Joya para quienes extraan L'Homme Ultime. Elegancia floral masculina."},{name:"Armaf Odyssey Vamas",brand:"Armaf",inspiration:"L'Eau d'Issey Pour Homme (con giro frutal)",profile:"Frutal, salado, marino, ahumado (meln, incienso).",performance:"Buena duracin (hasta 7h).",target:"Juvenil, casual, verano, playa.",keywords:["vamas","issey miyake","l'eau d'issey","marino","melon","salado"],details:"Giro tropical de un clsico marino. Meln + notas saladas."},{name:"Armaf Odyssey Go Mango",brand:"Armaf",inspiration:"Original centrada en Mango",profile:"Ctrico, frutal dulce (MANGO jugoso).",performance:"Por confirmar (se espera bueno).",target:"Amantes del mango y frutas. Verano, casual.",keywords:["go mango","mango","frutal","verano","jugoso"],details:"Mango realista y jugoso. Pura felicidad de verano."},{name:"9pm",brand:"Afnan",inspiration:"Ultramale de Jean Paul Gaultier",profile:"Dulce, fiestero (manzana, vainilla, canela).",performance:"Modo Bestia. Proyeccin nuclear.",target:"Juvenil, fiesta, noche.",keywords:["9pm","ultramale","jpg","fiesta","noche","dulce","vainilla"],details:"xito de ventas para la fiesta. Proyeccin 'Modo Bestia'."},{name:"Fattan",brand:"Rasasi",inspiration:"Terre d'Herms EDT",profile:"Ctrico, terroso, vetiver, MUSGO (ms verde y hmedo).",performance:"Muy buen rendimiento y versatilidad.",target:"Maduro, elegante, terroso.",keywords:["fattan","terre","hermes","vetiver","musgo","verde","tierra"],details:"Inspiracin con identidad propia: aade una base potente de musgo que lo hace ms verde que Terre d'Herms."}],sc={greeting:"Hola! Bienvenid@ a Tus3B Style. Soy tu experto en perfumera rabe. Pregntame por una fragancia, una nota (ej: 'mango', 'caf') o una inspiracin (ej: 'tipo Sauvage').",default:"No estoy seguro de entender tu consulta. Puedo recomendarte perfumes (ej: 'algo fresco', 'algo dulce'), explicarte conceptos como **Clon vs Inspiracin**, **Maceracin**, o sugerirte combinaciones.",shipping:"Atendemos en nuestro **Studio** (Santiago Centro/uoa). Tambin vamos a domicilio por +$3.000.",prices:"Perfumes disponibles en Decants (5ml/10ml) y Botella. Servicios de peluquera desde $7.000.",arab_info:`**Perfumera rabe:** Lujo democratizado.

 **Ingrediente Clave**: OUD (resina amaderada/ahumada de lujo).
 **Rendimiento**: Alta concentracin, buscan durar todo el da.
 **Ciencia**: Uso experto de qumica para garantizar consistencia y precios accesibles.`,concepts:` **Clon o Inspiracin?**

 **Clonazo**: Rplica directa (Ej: *Jean Lowe Immortal* = *L'Immensit*).
 **Inspiracin**: Toma un ADN conocido pero aade un giro propio (Ej: *Teriaq* de Quentin Bisch o *Fattan* con ms musgo).

 **Maceracin**: Proceso de reposo donde el alcohol se estabiliza y la fragancia gana cuerpo.`},JM=e=>{const t=e.toLowerCase();return QM.filter(r=>r.name.toLowerCase().includes(t)||r.brand.toLowerCase().includes(t)||r.keywords.some(n=>t.includes(n))||r.profile.toLowerCase().includes(t)||r.inspiration.toLowerCase().includes(t))},eD=async(e,t)=>{await new Promise(i=>setTimeout(i,600));const r=e.toLowerCase();if(r.includes("maceracion")||r.includes("oxigenacion"))return` **Maceracin vs Oxigenacin**:

 **Maceracin**: Es bueno. El perfume reposa, gana cuerpo y calidad.

 **Oxigenacin**: Es malo. El aire degrada el aroma con el tiempo (el enemigo del perfume).`;if(r.includes("clon")||r.includes("inspiracion")||r.includes("diferencia"))return sc.concepts;if(r.includes("oud")||r.includes("arabe"))return sc.arab_info;if(r.includes("layering")||r.includes("mezclar"))return` **Layering (Capas)**: Mezcla fragancias para crear algo nico.

 **Combo Sugerido**: *Armaf Kayaan Toffee* + *Paris Corner Khair Pistachio* = Moderno, Chic y Gourmand.`;if(r.match(/\b(hola|buenos|buenas|hi)\b/))return sc.greeting;if(r.includes("precio")||r.includes("valor"))return sc.prices;if(r.includes("domicilio")||r.includes("ubicacion"))return sc.shipping;const n=JM(r);if(n.length>0)if(n.length===1){const i=n[0];return`Te recomiendo **${i.name}** de ${i.brand}.

 **Inspiracin**: ${i.inspiration}.
 **Perfil**: ${i.profile}
 **Detalle**: ${i.details||""}
 **Rendimiento**: ${i.performance}
 **Para**: ${i.target}`}else{const s=n.slice(0,5).map(c=>` **${c.name}**: ${c.profile.split("(")[0]}`).join(`
`);return`Encontr estas opciones para "${e}":

${s}

Quieres detalles de alguno?`}return sc.default},tD=e=>{const t=e.toLowerCase();return t.match(/(tijera|maquina|secador|peine|cepillo|navaja|capa|guia|patillera)/)?"Herramientas":t.match(/(silla|sillon|espejo|mueble|lavacabeza|estante|mesa|camilla|vitrina|aro de luz|lampara)/)?"Mobiliario":t.match(/(shampoo|acondicionador|tinte|color|oxidanta|crema|keratina|botox|mascara|aceite|alcohol|algodon|guantes|papel aluminio|decolorante)/)?"Materiales":t.match(/(cafe|te|azucar|agua|galletas|jugo|limpieza|confort|papel|toalla|aromatizante|basura)/)?"Insumos Recepcin":"Otros"},rD=()=>{const[e,t]=N.useState(!1),[r,n]=N.useState([{role:"bot",text:'Hola! Soy tu asistente experto en perfumes rabes. Pregntame por "recomendaciones dulces", "algo tipo YSL" o por nuestros servicios.'}]),[i,s]=N.useState(""),[c,f]=N.useState(!1),p=N.useRef(null),m=()=>{p.current?.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{m()},[r,e]);const v=async()=>{if(!i.trim()||c)return;const S=i;n(O=>[...O,{role:"user",text:S}]),s(""),f(!0);const A=r.map(O=>`${O.role==="user"?"Usuario":"Bot"}: ${O.text}`);try{const O=await eD(S,A);n(I=>[...I,{role:"bot",text:O}])}catch{n(I=>[...I,{role:"bot",text:"Lo siento, tuve un problema procesando tu mensaje."}])}f(!1)},b=S=>{S.key==="Enter"&&v()};return g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>t(!e),className:`fixed bottom-6 right-6 z-50 p-4 rounded-full shadow-2xl transition-all duration-300 hover:scale-110 flex items-center justify-center ${e?"bg-stone-800 rotate-90":"bg-stone-900 rotate-0"}`,children:e?g.jsx(yi,{color:"white"}):g.jsx(Cc,{color:"white"})}),e&&g.jsxs("div",{className:"fixed bottom-24 right-6 w-80 sm:w-96 bg-white rounded-2xl shadow-2xl border border-stone-200 z-50 flex flex-col overflow-hidden animate-in slide-in-from-bottom-10 fade-in duration-300 h-[500px]",children:[g.jsxs("div",{className:"bg-stone-900 p-4 flex items-center space-x-3",children:[g.jsx("div",{className:"bg-stone-700 p-2 rounded-full",children:g.jsx(Cc,{size:16,className:"text-yellow-400"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-white font-serif font-bold",children:"Asistente Tus3B"}),g.jsx("p",{className:"text-stone-400 text-xs",children:"Experto en Perfumes rabes"})]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-stone-50",children:[r.map((S,A)=>g.jsx("div",{className:`flex ${S.role==="user"?"justify-end":"justify-start"}`,children:g.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-sm whitespace-pre-line ${S.role==="user"?"bg-stone-800 text-white rounded-br-none":"bg-white text-stone-800 border border-stone-200 rounded-bl-none shadow-sm"}`,children:S.text})},A)),c&&g.jsx("div",{className:"flex justify-start",children:g.jsxs("div",{className:"bg-white p-3 rounded-2xl rounded-bl-none border border-stone-200 shadow-sm flex items-center space-x-2",children:[g.jsx(rd,{size:16,className:"animate-spin text-stone-400"}),g.jsx("span",{className:"text-xs text-stone-400",children:"Consultando catlogo..."})]})}),g.jsx("div",{ref:p})]}),g.jsxs("div",{className:"p-3 bg-white border-t border-stone-100 flex items-center gap-2",children:[g.jsx("input",{type:"text",value:i,onChange:S=>s(S.target.value),onKeyDown:b,placeholder:"Busca por perfume, nota o inspiracin...",className:"flex-1 text-sm border-none focus:ring-0 bg-stone-100 rounded-full px-4 py-2 text-stone-800 placeholder-stone-400"}),g.jsx("button",{onClick:v,disabled:c||!i.trim(),className:"p-2 bg-stone-900 text-white rounded-full hover:bg-stone-700 disabled:opacity-50 transition",children:g.jsx(BN,{size:16})})]})]})]})},nD=({isHomeService:e,onGoHome:t,onGoCatalog:r})=>(N.useEffect(()=>{window.scrollTo(0,0)},[]),g.jsx("div",{className:"min-h-[70vh] flex items-center justify-center p-4 fade-in",children:g.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-3xl shadow-2xl border border-stone-100 max-w-2xl w-full text-center relative overflow-hidden",children:[g.jsx("div",{className:"absolute -top-20 -right-20 w-64 h-64 bg-green-50 rounded-full opacity-50 blur-3xl pointer-events-none"}),g.jsx("div",{className:"absolute -bottom-20 -left-20 w-64 h-64 bg-amber-50 rounded-full opacity-50 blur-3xl pointer-events-none"}),g.jsxs("div",{className:"relative z-10",children:[g.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 text-green-600 rounded-full mb-6 shadow-sm animate-in zoom-in spin-in-12 duration-700",children:g.jsx(sp,{size:40,strokeWidth:2.5})}),g.jsx("h2",{className:"serif text-4xl text-stone-900 mb-3",children:"Reserva Confirmada!"}),g.jsx("p",{className:"text-xl text-stone-600 font-light mb-8",children:"Gracias por tu confianza!"}),!e&&g.jsxs("div",{className:"bg-stone-50 p-6 rounded-2xl mb-8 border border-stone-100 transform transition hover:scale-105 duration-300",children:[g.jsxs("h3",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-3 flex items-center justify-center gap-2",children:[g.jsx(PN,{size:14})," Direccin del Servicio"]}),g.jsx("p",{className:"text-xl font-medium text-stone-800",children:"Diagonal Vicua Mackenna 2004"}),g.jsx("p",{className:"text-lg text-stone-600",children:"Torre B, Santiago"})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-8",children:[g.jsxs("button",{onClick:t,className:"flex items-center justify-center gap-2 px-8 py-4 bg-stone-100 text-stone-700 rounded-xl font-bold hover:bg-stone-200 transition-colors w-full sm:w-auto",children:[g.jsx(p6,{size:20}),"Regresar al Inicio"]}),g.jsxs("button",{onClick:r,className:"flex items-center justify-center gap-2 px-8 py-4 bg-stone-900 text-white rounded-xl font-bold hover:bg-stone-800 transition-transform hover:-translate-y-1 shadow-lg w-full sm:w-auto",children:[g.jsx(hl,{size:20}),g.jsxs("span",{children:["Venta de Perfumes ",g.jsx("span",{className:"block text-[10px] font-normal opacity-80 leading-none mt-0.5",children:"Formatos 5ml y 10ml"})]})]})]})]})]})})),iD=()=>g.jsx("section",{className:"py-24 bg-white",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Testimonios"}),g.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Lo que dicen nuestras clientas"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:D6.map(e=>g.jsxs("div",{className:"bg-stone-50 p-8 rounded-sm hover:shadow-lg transition-shadow duration-300 relative",children:[g.jsx(y6,{className:"absolute top-6 right-6 text-stone-200",size:40}),g.jsx("div",{className:"flex space-x-1 mb-4 text-amber-500",children:[...Array(5)].map((t,r)=>g.jsx(UN,{size:16,fill:r<e.rating?"currentColor":"none",className:r<e.rating?"text-amber-500":"text-stone-300"},r))}),g.jsxs("p",{className:"text-stone-600 italic mb-6 leading-relaxed relative z-10",children:['"',e.comment,'"']}),g.jsxs("div",{className:"flex justify-between items-end border-t border-stone-200 pt-4",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-stone-900",children:e.name}),g.jsx("span",{className:"text-xs text-stone-400 font-medium",children:"Cliente Verificado"})]}),g.jsx("span",{className:"text-xs text-stone-400",children:e.date})]})]},e.id))})]})});var aD=Object.defineProperty,t0=Object.getOwnPropertySymbols,s4=Object.prototype.hasOwnProperty,o4=Object.prototype.propertyIsEnumerable,rS=(e,t,r)=>t in e?aD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Gx=(e,t)=>{for(var r in t||(t={}))s4.call(t,r)&&rS(e,r,t[r]);if(t0)for(var r of t0(t))o4.call(t,r)&&rS(e,r,t[r]);return e},Kx=(e,t)=>{var r={};for(var n in e)s4.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&t0)for(var n of t0(e))t.indexOf(n)<0&&o4.call(e,n)&&(r[n]=e[n]);return r};var pl;(e=>{const t=class kt{constructor(p,m,v,b){if(this.version=p,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],p<kt.MIN_VERSION||p>kt.MAX_VERSION)throw new RangeError("Version value out of range");if(b<-1||b>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let S=[];for(let O=0;O<this.size;O++)S.push(!1);for(let O=0;O<this.size;O++)this.modules.push(S.slice()),this.isFunction.push(S.slice());this.drawFunctionPatterns();const A=this.addEccAndInterleave(v);if(this.drawCodewords(A),b==-1){let O=1e9;for(let I=0;I<8;I++){this.applyMask(I),this.drawFormatBits(I);const P=this.getPenaltyScore();P<O&&(b=I,O=P),this.applyMask(I)}}i(0<=b&&b<=7),this.mask=b,this.applyMask(b),this.drawFormatBits(b),this.isFunction=[]}static encodeText(p,m){const v=e.QrSegment.makeSegments(p);return kt.encodeSegments(v,m)}static encodeBinary(p,m){const v=e.QrSegment.makeBytes(p);return kt.encodeSegments([v],m)}static encodeSegments(p,m,v=1,b=40,S=-1,A=!0){if(!(kt.MIN_VERSION<=v&&v<=b&&b<=kt.MAX_VERSION)||S<-1||S>7)throw new RangeError("Invalid value");let O,I;for(O=v;;O++){const R=kt.getNumDataCodewords(O,m)*8,U=c.getTotalBits(p,O);if(U<=R){I=U;break}if(O>=b)throw new RangeError("Data too long")}for(const R of[kt.Ecc.MEDIUM,kt.Ecc.QUARTILE,kt.Ecc.HIGH])A&&I<=kt.getNumDataCodewords(O,R)*8&&(m=R);let P=[];for(const R of p){r(R.mode.modeBits,4,P),r(R.numChars,R.mode.numCharCountBits(O),P);for(const U of R.getData())P.push(U)}i(P.length==I);const M=kt.getNumDataCodewords(O,m)*8;i(P.length<=M),r(0,Math.min(4,M-P.length),P),r(0,(8-P.length%8)%8,P),i(P.length%8==0);for(let R=236;P.length<M;R^=253)r(R,8,P);let L=[];for(;L.length*8<P.length;)L.push(0);return P.forEach((R,U)=>L[U>>>3]|=R<<7-(U&7)),new kt(O,m,L,S)}getModule(p,m){return 0<=p&&p<this.size&&0<=m&&m<this.size&&this.modules[m][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let v=0;v<this.size;v++)this.setFunctionModule(6,v,v%2==0),this.setFunctionModule(v,6,v%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),m=p.length;for(let v=0;v<m;v++)for(let b=0;b<m;b++)v==0&&b==0||v==0&&b==m-1||v==m-1&&b==0||this.drawAlignmentPattern(p[v],p[b]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const m=this.errorCorrectionLevel.formatBits<<3|p;let v=m;for(let S=0;S<10;S++)v=v<<1^(v>>>9)*1335;const b=(m<<10|v)^21522;i(b>>>15==0);for(let S=0;S<=5;S++)this.setFunctionModule(8,S,n(b,S));this.setFunctionModule(8,7,n(b,6)),this.setFunctionModule(8,8,n(b,7)),this.setFunctionModule(7,8,n(b,8));for(let S=9;S<15;S++)this.setFunctionModule(14-S,8,n(b,S));for(let S=0;S<8;S++)this.setFunctionModule(this.size-1-S,8,n(b,S));for(let S=8;S<15;S++)this.setFunctionModule(8,this.size-15+S,n(b,S));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let v=0;v<12;v++)p=p<<1^(p>>>11)*7973;const m=this.version<<12|p;i(m>>>18==0);for(let v=0;v<18;v++){const b=n(m,v),S=this.size-11+v%3,A=Math.floor(v/3);this.setFunctionModule(S,A,b),this.setFunctionModule(A,S,b)}}drawFinderPattern(p,m){for(let v=-4;v<=4;v++)for(let b=-4;b<=4;b++){const S=Math.max(Math.abs(b),Math.abs(v)),A=p+b,O=m+v;0<=A&&A<this.size&&0<=O&&O<this.size&&this.setFunctionModule(A,O,S!=2&&S!=4)}}drawAlignmentPattern(p,m){for(let v=-2;v<=2;v++)for(let b=-2;b<=2;b++)this.setFunctionModule(p+b,m+v,Math.max(Math.abs(b),Math.abs(v))!=1)}setFunctionModule(p,m,v){this.modules[m][p]=v,this.isFunction[m][p]=!0}addEccAndInterleave(p){const m=this.version,v=this.errorCorrectionLevel;if(p.length!=kt.getNumDataCodewords(m,v))throw new RangeError("Invalid argument");const b=kt.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][m],S=kt.ECC_CODEWORDS_PER_BLOCK[v.ordinal][m],A=Math.floor(kt.getNumRawDataModules(m)/8),O=b-A%b,I=Math.floor(A/b);let P=[];const M=kt.reedSolomonComputeDivisor(S);for(let R=0,U=0;R<b;R++){let W=p.slice(U,U+I-S+(R<O?0:1));U+=W.length;const V=kt.reedSolomonComputeRemainder(W,M);R<O&&W.push(0),P.push(W.concat(V))}let L=[];for(let R=0;R<P[0].length;R++)P.forEach((U,W)=>{(R!=I-S||W>=O)&&L.push(U[R])});return i(L.length==A),L}drawCodewords(p){if(p.length!=Math.floor(kt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let v=this.size-1;v>=1;v-=2){v==6&&(v=5);for(let b=0;b<this.size;b++)for(let S=0;S<2;S++){const A=v-S,I=(v+1&2)==0?this.size-1-b:b;!this.isFunction[I][A]&&m<p.length*8&&(this.modules[I][A]=n(p[m>>>3],7-(m&7)),m++)}}i(m==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let v=0;v<this.size;v++){let b;switch(p){case 0:b=(v+m)%2==0;break;case 1:b=m%2==0;break;case 2:b=v%3==0;break;case 3:b=(v+m)%3==0;break;case 4:b=(Math.floor(v/3)+Math.floor(m/2))%2==0;break;case 5:b=v*m%2+v*m%3==0;break;case 6:b=(v*m%2+v*m%3)%2==0;break;case 7:b=((v+m)%2+v*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][v]&&b&&(this.modules[m][v]=!this.modules[m][v])}}getPenaltyScore(){let p=0;for(let S=0;S<this.size;S++){let A=!1,O=0,I=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[S][P]==A?(O++,O==5?p+=kt.PENALTY_N1:O>5&&p++):(this.finderPenaltyAddHistory(O,I),A||(p+=this.finderPenaltyCountPatterns(I)*kt.PENALTY_N3),A=this.modules[S][P],O=1);p+=this.finderPenaltyTerminateAndCount(A,O,I)*kt.PENALTY_N3}for(let S=0;S<this.size;S++){let A=!1,O=0,I=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[P][S]==A?(O++,O==5?p+=kt.PENALTY_N1:O>5&&p++):(this.finderPenaltyAddHistory(O,I),A||(p+=this.finderPenaltyCountPatterns(I)*kt.PENALTY_N3),A=this.modules[P][S],O=1);p+=this.finderPenaltyTerminateAndCount(A,O,I)*kt.PENALTY_N3}for(let S=0;S<this.size-1;S++)for(let A=0;A<this.size-1;A++){const O=this.modules[S][A];O==this.modules[S][A+1]&&O==this.modules[S+1][A]&&O==this.modules[S+1][A+1]&&(p+=kt.PENALTY_N2)}let m=0;for(const S of this.modules)m=S.reduce((A,O)=>A+(O?1:0),m);const v=this.size*this.size,b=Math.ceil(Math.abs(m*20-v*10)/v)-1;return i(0<=b&&b<=9),p+=b*kt.PENALTY_N4,i(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let v=[6];for(let b=this.size-7;v.length<p;b-=m)v.splice(1,0,b);return v}}static getNumRawDataModules(p){if(p<kt.MIN_VERSION||p>kt.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*p+128)*p+64;if(p>=2){const v=Math.floor(p/7)+2;m-=(25*v-10)*v-55,p>=7&&(m-=36)}return i(208<=m&&m<=29648),m}static getNumDataCodewords(p,m){return Math.floor(kt.getNumRawDataModules(p)/8)-kt.ECC_CODEWORDS_PER_BLOCK[m.ordinal][p]*kt.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let m=[];for(let b=0;b<p-1;b++)m.push(0);m.push(1);let v=1;for(let b=0;b<p;b++){for(let S=0;S<m.length;S++)m[S]=kt.reedSolomonMultiply(m[S],v),S+1<m.length&&(m[S]^=m[S+1]);v=kt.reedSolomonMultiply(v,2)}return m}static reedSolomonComputeRemainder(p,m){let v=m.map(b=>0);for(const b of p){const S=b^v.shift();v.push(0),m.forEach((A,O)=>v[O]^=kt.reedSolomonMultiply(A,S))}return v}static reedSolomonMultiply(p,m){if(p>>>8||m>>>8)throw new RangeError("Byte out of range");let v=0;for(let b=7;b>=0;b--)v=v<<1^(v>>>7)*285,v^=(m>>>b&1)*p;return i(v>>>8==0),v}finderPenaltyCountPatterns(p){const m=p[1];i(m<=this.size*3);const v=m>0&&p[2]==m&&p[3]==m*3&&p[4]==m&&p[5]==m;return(v&&p[0]>=m*4&&p[6]>=m?1:0)+(v&&p[6]>=m*4&&p[0]>=m?1:0)}finderPenaltyTerminateAndCount(p,m,v){return p&&(this.finderPenaltyAddHistory(m,v),m=0),m+=this.size,this.finderPenaltyAddHistory(m,v),this.finderPenaltyCountPatterns(v)}finderPenaltyAddHistory(p,m){m[0]==0&&(p+=this.size),m.pop(),m.unshift(p)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function r(f,p,m){if(p<0||p>31||f>>>p)throw new RangeError("Value out of range");for(let v=p-1;v>=0;v--)m.push(f>>>v&1)}function n(f,p){return(f>>>p&1)!=0}function i(f){if(!f)throw new Error("Assertion error")}const s=class zr{constructor(p,m,v){if(this.mode=p,this.numChars=m,this.bitData=v,m<0)throw new RangeError("Invalid argument");this.bitData=v.slice()}static makeBytes(p){let m=[];for(const v of p)r(v,8,m);return new zr(zr.Mode.BYTE,p.length,m)}static makeNumeric(p){if(!zr.isNumeric(p))throw new RangeError("String contains non-numeric characters");let m=[];for(let v=0;v<p.length;){const b=Math.min(p.length-v,3);r(parseInt(p.substring(v,v+b),10),b*3+1,m),v+=b}return new zr(zr.Mode.NUMERIC,p.length,m)}static makeAlphanumeric(p){if(!zr.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],v;for(v=0;v+2<=p.length;v+=2){let b=zr.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v))*45;b+=zr.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v+1)),r(b,11,m)}return v<p.length&&r(zr.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v)),6,m),new zr(zr.Mode.ALPHANUMERIC,p.length,m)}static makeSegments(p){return p==""?[]:zr.isNumeric(p)?[zr.makeNumeric(p)]:zr.isAlphanumeric(p)?[zr.makeAlphanumeric(p)]:[zr.makeBytes(zr.toUtf8ByteArray(p))]}static makeEci(p){let m=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)r(p,8,m);else if(p<16384)r(2,2,m),r(p,14,m);else if(p<1e6)r(6,3,m),r(p,21,m);else throw new RangeError("ECI assignment value out of range");return new zr(zr.Mode.ECI,0,m)}static isNumeric(p){return zr.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return zr.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,m){let v=0;for(const b of p){const S=b.mode.numCharCountBits(m);if(b.numChars>=1<<S)return 1/0;v+=4+S+b.bitData.length}return v}static toUtf8ByteArray(p){p=encodeURI(p);let m=[];for(let v=0;v<p.length;v++)p.charAt(v)!="%"?m.push(p.charCodeAt(v)):(m.push(parseInt(p.substring(v+1,v+3),16)),v+=2);return m}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=s;e.QrSegment=s})(pl||(pl={}));(e=>{(t=>{const r=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})(pl||(pl={}));(e=>{(t=>{const r=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})(pl||(pl={}));var hc=pl;var sD={L:hc.QrCode.Ecc.LOW,M:hc.QrCode.Ecc.MEDIUM,Q:hc.QrCode.Ecc.QUARTILE,H:hc.QrCode.Ecc.HIGH},l4=128,c4="L",u4="#FFFFFF",d4="#000000",f4=!1,h4=1,oD=4,lD=0,cD=.1;function p4(e,t=0){const r=[];return e.forEach(function(n,i){let s=null;n.forEach(function(c,f){if(!c&&s!==null){r.push(`M${s+t} ${i+t}h${f-s}v1H${s+t}z`),s=null;return}if(f===n.length-1){if(!c)return;s===null?r.push(`M${f+t},${i+t} h1v1H${f+t}z`):r.push(`M${s+t},${i+t} h${f+1-s}v1H${s+t}z`);return}c&&s===null&&(s=f)})}),r.join("")}function m4(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((i,s)=>s<t.x||s>=t.x+t.w?i:!1))}function uD(e,t,r,n){if(n==null)return null;const i=e.length+r*2,s=Math.floor(t*cD),c=i/t,f=(n.width||s)*c,p=(n.height||s)*c,m=n.x==null?e.length/2-f/2:n.x*c,v=n.y==null?e.length/2-p/2:n.y*c,b=n.opacity==null?1:n.opacity;let S=null;if(n.excavate){let O=Math.floor(m),I=Math.floor(v),P=Math.ceil(f+m-O),M=Math.ceil(p+v-I);S={x:O,y:I,w:P,h:M}}const A=n.crossOrigin;return{x:m,y:v,h:p,w:f,excavation:S,opacity:b,crossOrigin:A}}function dD(e,t){return t!=null?Math.max(Math.floor(t),0):e?oD:lD}function g4({value:e,level:t,minVersion:r,includeMargin:n,marginSize:i,imageSettings:s,size:c,boostLevel:f}){let p=Nr.useMemo(()=>{const O=(Array.isArray(e)?e:[e]).reduce((I,P)=>(I.push(...hc.QrSegment.makeSegments(P)),I),[]);return hc.QrCode.encodeSegments(O,sD[t],r,void 0,void 0,f)},[e,t,r,f]);const{cells:m,margin:v,numCells:b,calculatedImageSettings:S}=Nr.useMemo(()=>{let A=p.getModules();const O=dD(n,i),I=A.length+O*2,P=uD(A,c,O,s);return{cells:A,margin:O,numCells:I,calculatedImageSettings:P}},[p,c,s,n,i]);return{qrcode:p,margin:v,cells:m,numCells:b,calculatedImageSettings:S}}var fD=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),hD=Nr.forwardRef(function(t,r){const n=t,{value:i,size:s=l4,level:c=c4,bgColor:f=u4,fgColor:p=d4,includeMargin:m=f4,minVersion:v=h4,boostLevel:b,marginSize:S,imageSettings:A}=n,I=Kx(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:P}=I,M=Kx(I,["style"]),L=A?.src,R=Nr.useRef(null),U=Nr.useRef(null),W=Nr.useCallback(Ce=>{R.current=Ce,typeof r=="function"?r(Ce):r&&(r.current=Ce)},[r]),[V,H]=Nr.useState(!1),{margin:X,cells:Y,numCells:we,calculatedImageSettings:se}=g4({value:i,level:c,minVersion:v,boostLevel:b,includeMargin:m,marginSize:S,imageSettings:A,size:s});Nr.useEffect(()=>{if(R.current!=null){const Ce=R.current,re=Ce.getContext("2d");if(!re)return;let ze=Y;const le=U.current,me=se!=null&&le!==null&&le.complete&&le.naturalHeight!==0&&le.naturalWidth!==0;me&&se.excavation!=null&&(ze=m4(Y,se.excavation));const Ee=window.devicePixelRatio||1;Ce.height=Ce.width=s*Ee;const Ae=s/we*Ee;re.scale(Ae,Ae),re.fillStyle=f,re.fillRect(0,0,we,we),re.fillStyle=p,fD?re.fill(new Path2D(p4(ze,X))):Y.forEach(function(J,de){J.forEach(function($e,Ue){$e&&re.fillRect(Ue+X,de+X,1,1)})}),se&&(re.globalAlpha=se.opacity),me&&re.drawImage(le,se.x+X,se.y+X,se.w,se.h)}}),Nr.useEffect(()=>{H(!1)},[L]);const ie=Gx({height:s,width:s},P);let be=null;return L!=null&&(be=Nr.createElement("img",{src:L,key:L,style:{display:"none"},onLoad:()=>{H(!0)},ref:U,crossOrigin:se?.crossOrigin})),Nr.createElement(Nr.Fragment,null,Nr.createElement("canvas",Gx({style:ie,height:s,width:s,ref:W,role:"img"},M)),be)});hD.displayName="QRCodeCanvas";var vy=Nr.forwardRef(function(t,r){const n=t,{value:i,size:s=l4,level:c=c4,bgColor:f=u4,fgColor:p=d4,includeMargin:m=f4,minVersion:v=h4,boostLevel:b,title:S,marginSize:A,imageSettings:O}=n,I=Kx(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:P,cells:M,numCells:L,calculatedImageSettings:R}=g4({value:i,level:c,minVersion:v,boostLevel:b,includeMargin:m,marginSize:A,imageSettings:O,size:s});let U=M,W=null;O!=null&&R!=null&&(R.excavation!=null&&(U=m4(M,R.excavation)),W=Nr.createElement("image",{href:O.src,height:R.h,width:R.w,x:R.x+P,y:R.y+P,preserveAspectRatio:"none",opacity:R.opacity,crossOrigin:R.crossOrigin}));const V=p4(U,P);return Nr.createElement("svg",Gx({height:s,width:s,viewBox:`0 0 ${L} ${L}`,ref:r,role:"img"},I),!!S&&Nr.createElement("title",null,S),Nr.createElement("path",{fill:f,d:`M0,0 h${L}v${L}H0z`,shapeRendering:"crispEdges"}),Nr.createElement("path",{fill:p,d:V,shapeRendering:"crispEdges"}),W)});vy.displayName="QRCodeSVG";const pD=()=>{const e=navigator.userAgent||navigator.vendor||window.opera;return/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"ios":/android/i.test(e)?"android":"other"},mD=e=>{const t={Bronce:"",Plata:"",Gold:""};return{formatVersion:1,passTypeIdentifier:"pass.cl.tus3b.loyalty",serialNumber:e.token,teamIdentifier:"TUS3BSTYLE",organizationName:"Tus3B Style",description:"Tarjeta de Fidelidad Tus3B Style",logoText:"Tus3B Style",foregroundColor:"rgb(255, 255, 255)",backgroundColor:e.tier==="Gold"?"rgb(245, 158, 11)":e.tier==="Plata"?"rgb(148, 163, 184)":"rgb(28, 25, 23)",storeCard:{headerFields:[{key:"tier",label:"NIVEL",value:`${t[e.tier]} ${e.tier}`}],primaryFields:[{key:"name",label:"CLIENTE",value:e.clientName}],secondaryFields:[{key:"visits",label:"VISITAS",value:e.visits.toString()},{key:"next",label:"PRXIMO NIVEL",value:e.tier==="Bronce"?"5 visitas":e.tier==="Plata"?"10 visitas":"Eres VIP!"}],auxiliaryFields:[{key:"id",label:"ID MIEMBRO",value:e.token.substring(0,8).toUpperCase()}],backFields:[{key:"website",label:"Sitio Web",value:"https://tus3b.cl"},{key:"benefits",label:"Beneficios",value:e.tier==="Gold"?"30% OFF en servicios + Trato VIP":e.tier==="Plata"?"15% OFF en servicios":"5% OFF en productos"},{key:"howto",label:"Cmo usar",value:"Muestra este cdigo QR en cada visita para acumular puntos."}]},barcode:{message:e.token,format:"PKBarcodeFormatQR",messageEncoding:"iso-8859-1"}}},gD=e=>{const t=mD(e);sessionStorage.setItem("tus3b_wallet_pass",JSON.stringify({...t,_instructions:`
Para agregar tu tarjeta a Apple Wallet:

1. Visita: https://walletwallet.alen.ro/
2. Selecciona "Store Card" como tipo
3. Completa los campos:
   - Organization: Tus3B Style
   - Header: Nivel ${e.tier}
   - Primary: ${e.clientName}
   - Secondary: ${e.visits} Visitas
   - Barcode: QR con valor "${e.token}"
4. Descarga el pass y brelo en tu iPhone
        `.trim()})),window.open("https://walletwallet.alen.ro/","_blank")},xD=({clientName:e,token:t,visits:r,tier:n})=>{const[i,s]=N.useState(!1),[c,f]=N.useState("apple"),[p,m]=N.useState(!1),v=pD(),b=()=>{f("apple"),s(!0)},S=()=>{f("google"),s(!0)},A=async()=>{try{await navigator.clipboard.writeText(t),m(!0),setTimeout(()=>m(!1),2e3)}catch(L){console.error("Error copying:",L)}},O=()=>{c==="apple"?gD({clientName:e,token:t,visits:r,tier:n}):window.open("https://99minds.io/wallet-pass-creator","_blank")},I={Bronce:"",Plata:"",Gold:""},P=v==="ios"||v==="other",M=v==="android"||v==="other";return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[P&&g.jsxs("button",{onClick:b,className:"flex items-center justify-center gap-2 bg-black hover:bg-gray-900 text-white py-3 px-4 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl group w-full",children:[g.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),g.jsx("span",{className:"font-medium",children:"Agregar a Apple Wallet"})]}),M&&g.jsxs("button",{onClick:S,className:"flex items-center justify-center gap-2 bg-white hover:bg-gray-100 text-gray-800 py-3 px-4 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl group w-full border border-gray-200",children:[g.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",children:[g.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),g.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),g.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),g.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),g.jsx("span",{className:"font-medium",children:"Agregar a Google Wallet"})]}),g.jsx("p",{className:"text-[10px] text-stone-500 text-center",children:v==="ios"?"Disponible para iPhone  Gratis":v==="android"?"Disponible para Android  Gratis":"Disponible para iPhone y Android  Gratis"})]}),i&&g.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:g.jsxs("div",{className:"bg-stone-900 border border-stone-800 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-stone-800",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${c==="apple"?"bg-gradient-to-br from-amber-500 to-amber-600":"bg-gradient-to-br from-blue-500 to-green-500"}`,children:g.jsx(N6,{className:"w-5 h-5 text-white"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-white",children:c==="apple"?"Apple Wallet":"Google Wallet"}),g.jsx("p",{className:"text-xs text-stone-400",children:"Agregar tarjeta"})]})]}),g.jsx("button",{onClick:()=>s(!1),className:"w-8 h-8 rounded-full bg-stone-800 hover:bg-stone-700 flex items-center justify-center text-stone-400 hover:text-white transition-colors",children:g.jsx(yi,{size:18})})]}),g.jsx("div",{className:"p-4",children:g.jsxs("div",{className:`rounded-xl p-4 ${n==="Gold"?"bg-gradient-to-br from-amber-500 to-amber-600":n==="Plata"?"bg-gradient-to-br from-slate-400 to-slate-500":"bg-gradient-to-br from-stone-700 to-stone-800"}`,children:[g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-[10px] uppercase tracking-wider opacity-70",children:"Tus3B Style"}),g.jsx("p",{className:"font-bold text-lg",children:e.split(" ")[0]})]}),g.jsx("span",{className:"text-2xl",children:I[n]})]}),g.jsxs("div",{className:"flex justify-between items-end",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-[10px] uppercase opacity-70",children:"Visitas"}),g.jsx("p",{className:"text-2xl font-bold",children:r})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:"text-[10px] uppercase opacity-70",children:"Nivel"}),g.jsx("p",{className:"font-bold",children:n})]})]})]})}),g.jsxs("div",{className:"p-4 pt-0 space-y-3",children:[g.jsxs("div",{className:"bg-stone-950 rounded-xl p-4 border border-stone-800",children:[g.jsxs("h4",{className:`font-bold text-sm mb-3 flex items-center gap-2 ${c==="apple"?"text-amber-400":"text-blue-400"}`,children:[g.jsx(FN,{size:16}),c==="apple"?"Pasos para agregar a Apple Wallet":"Pasos para agregar a Google Wallet"]}),g.jsxs("ol",{className:"space-y-2 text-sm text-stone-300",children:[g.jsxs("li",{className:"flex gap-2",children:[g.jsx("span",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ${c==="apple"?"bg-amber-500 text-black":"bg-blue-500 text-white"}`,children:"1"}),g.jsx("span",{children:'Haz clic en "Crear Pass" abajo'})]}),g.jsxs("li",{className:"flex gap-2",children:[g.jsx("span",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ${c==="apple"?"bg-amber-500 text-black":"bg-blue-500 text-white"}`,children:"2"}),g.jsx("span",{children:c==="apple"?'Selecciona "Store Card" como tipo':'Selecciona "Loyalty Card"'})]}),g.jsxs("li",{className:"flex gap-2",children:[g.jsx("span",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ${c==="apple"?"bg-amber-500 text-black":"bg-blue-500 text-white"}`,children:"3"}),g.jsx("span",{children:"Copia los datos mostrados abajo"})]}),g.jsxs("li",{className:"flex gap-2",children:[g.jsx("span",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ${c==="apple"?"bg-amber-500 text-black":"bg-blue-500 text-white"}`,children:"4"}),g.jsx("span",{children:'En "Barcode", pega tu cdigo QR'})]}),g.jsxs("li",{className:"flex gap-2",children:[g.jsx("span",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ${c==="apple"?"bg-amber-500 text-black":"bg-blue-500 text-white"}`,children:"5"}),g.jsx("span",{children:c==="apple"?"Descarga y abre en tu iPhone":"Guarda en tu Google Wallet"})]})]})]}),g.jsxs("div",{className:"bg-stone-950 rounded-xl p-4 border border-stone-800",children:[g.jsx("h4",{className:"text-xs font-bold text-stone-400 uppercase mb-2",children:"Tus Datos"}),g.jsxs("div",{className:"space-y-2 text-sm",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-stone-500",children:"Organizacin:"}),g.jsx("span",{className:"text-white font-mono",children:"Tus3B Style"})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-stone-500",children:"Nombre:"}),g.jsx("span",{className:"text-white font-mono",children:e})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-stone-500",children:"Nivel:"}),g.jsx("span",{className:"text-white font-mono",children:n})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-stone-500",children:"Visitas:"}),g.jsx("span",{className:"text-white font-mono",children:r})]}),g.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-stone-800",children:[g.jsx("span",{className:"text-stone-500",children:"Cdigo QR:"}),g.jsxs("button",{onClick:A,className:"flex items-center gap-1 bg-stone-800 hover:bg-stone-700 px-2 py-1 rounded text-xs font-mono text-amber-400 transition-colors",children:[p?g.jsx(xc,{size:12,className:"text-green-400"}):g.jsx(o6,{size:12}),t.substring(0,12),"..."]})]})]})]})]}),g.jsxs("div",{className:"p-4 pt-0 space-y-2",children:[g.jsxs("button",{onClick:O,className:`w-full font-bold py-3 px-4 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg ${c==="apple"?"bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-400 hover:to-amber-500 text-black shadow-amber-500/20":"bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-400 hover:to-green-400 text-white shadow-blue-500/20"}`,children:[g.jsx(d6,{size:18}),"Crear Pass Gratis"]}),g.jsx("button",{onClick:()=>s(!1),className:"w-full bg-stone-800 hover:bg-stone-700 text-stone-300 py-3 px-4 rounded-xl transition-colors",children:"Cerrar"})]})]})})]})},vD=({clientName:e,token:t,visits:r,nextReward:n,tier:i="Bronce"})=>{const[s,c]=N.useState(!1),p=(v=>{switch(v==="Silver"&&(v="Bronce"),v){case"Gold":return{name:"NIVEL GOLD",bgGradient:"bg-gradient-to-br from-amber-500 to-yellow-600",stampColor:"bg-amber-100 text-amber-700",benefit:"30% OFF"};case"Plata":return{name:"NIVEL PLATA",bgGradient:"bg-gradient-to-br from-slate-400 to-stone-400",stampColor:"bg-slate-50 text-slate-900",benefit:"15% OFF"};case"Bronce":default:return{name:"NIVEL BRONCE",bgGradient:"bg-gradient-to-br from-stone-800 to-stone-950",stampColor:"bg-white text-stone-950",benefit:"5% OFF"}}})(i||"Bronce");return g.jsxs("div",{className:"w-full max-w-sm mx-auto perspective-1000 group cursor-pointer",onClick:()=>c(!s),children:[g.jsxs("div",{className:`relative transition-transform duration-700 preserve-3d ${s?"rotate-y-180":""}`,children:[g.jsxs("div",{className:"backface-hidden w-full bg-stone-950 rounded-[24px] overflow-hidden shadow-2xl flex flex-col relative h-[680px] border border-stone-800",children:[g.jsxs("div",{className:"p-6 pb-2 flex justify-between items-start z-10",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"font-serif italic text-2xl text-white tracking-tight",children:["Tus3B ",g.jsx("span",{className:"text-amber-500",children:"Style"})]}),g.jsx("span",{className:"text-[9px] uppercase tracking-[0.3em] text-stone-400 font-bold block mt-1",children:p.name})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:"text-[10px] text-stone-500 uppercase font-bold mb-0.5",children:"Cliente"}),g.jsx("p",{className:"text-white font-bold text-lg leading-none",children:e.split(" ")[0]})]})]}),g.jsxs("div",{className:"px-6 py-4 z-10",children:[g.jsx("div",{className:"grid grid-cols-5 gap-3 mb-2",children:[...Array(10)].map((v,b)=>g.jsx("div",{className:`aspect-square rounded-full flex items-center justify-center border-2 transition-all duration-500 ${b<r?"bg-white border-white scale-100 shadow-[0_0_10px_rgba(255,255,255,0.5)]":"bg-stone-900/50 border-stone-700 scale-90"}`,children:b<r&&g.jsx(xc,{size:20,className:"text-stone-950 stroke-[4]"})},b))}),g.jsxs("div",{className:"flex justify-between text-[10px] text-stone-500 font-mono mt-2 px-1",children:[g.jsx("span",{className:r>=5?"text-slate-400 font-bold":"",children:"PLATA (5)"}),g.jsx("span",{className:r>=10?"text-amber-500 font-bold":"",children:"GOLD (10)"})]})]}),g.jsxs("div",{className:"px-8 py-2 flex justify-between items-center z-10 mt-2",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-[10px] uppercase font-bold text-stone-400 tracking-wider mb-1",children:"Total Servicios"}),g.jsx("p",{className:"text-4xl font-black text-white",children:r})]}),g.jsx("div",{className:"w-px h-10 bg-stone-800"}),g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:"text-[10px] uppercase font-bold text-stone-400 tracking-wider mb-1",children:"Nivel Actual"}),g.jsx("p",{className:"text-xl font-black text-white",children:i||"Bronce"})]})]}),g.jsxs("div",{className:"flex-grow flex items-center justify-center p-6 relative",children:[g.jsxs("div",{className:"absolute top-0 left-0 w-full flex justify-between items-center",children:[g.jsx("div",{className:"w-6 h-6 bg-[#1c1917] rounded-r-full -ml-3"}),g.jsx("div",{className:"w-full border-t-2 border-dashed border-stone-800 mx-2"}),g.jsx("div",{className:"w-6 h-6 bg-[#1c1917] rounded-l-full -mr-3"})]}),g.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg relative group-hover:scale-105 transition-transform duration-300",children:[g.jsx(vy,{value:t,size:160,level:"M"}),g.jsx("p",{className:"text-center text-[9px] font-mono mt-2 text-stone-500 tracking-widest",children:t})]}),g.jsx("div",{className:"mt-4 w-full",onClick:v=>v.stopPropagation(),children:g.jsx(xD,{clientName:e,token:t,visits:r,tier:i||"Bronce"})})]}),g.jsx("div",{className:`absolute top-0 left-0 w-full h-full opacity-20 ${p.bgGradient} z-0`})]}),g.jsxs("div",{className:"absolute top-0 left-0 backface-hidden w-full h-[680px] bg-stone-900 rounded-[24px] shadow-2xl rotate-y-180 p-8 text-white flex flex-col justify-between border border-stone-800",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-white/10 pb-4",children:[g.jsx("h3",{className:"font-serif italic text-2xl",children:"Beneficios"}),g.jsx(f6,{className:"text-stone-500"})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:`p-3 rounded-2xl border ${i==="Bronce"?"border-stone-500 bg-stone-800":"border-stone-800 bg-stone-900/50 opacity-50"} flex gap-4 items-center`,children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-stone-700 flex items-center justify-center font-bold text-stone-400",children:"0"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-stone-300",children:"Nivel Bronce"}),g.jsx("p",{className:"text-[10px] text-stone-500",children:"0 - 4 visitas"}),g.jsx("span",{className:"text-[10px] text-stone-400",children:"5% OFF en productos"})]})]}),g.jsxs("div",{className:`p-3 rounded-2xl border ${i==="Plata"?"border-slate-400 bg-slate-800":"border-stone-800 bg-stone-900/50 opacity-50"} flex gap-4 items-center`,children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-500 text-white flex items-center justify-center font-bold shadow-lg shadow-slate-500/20",children:"5"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-slate-200",children:"Nivel Plata"}),g.jsx("p",{className:"text-[10px] text-stone-400",children:"5 - 9 visitas"}),g.jsx("span",{className:"text-[10px] text-slate-300 font-bold",children:"15% OFF en servicios"})]})]}),g.jsxs("div",{className:`p-3 rounded-2xl border ${i==="Gold"?"border-amber-500 bg-amber-900/20":"border-stone-800 bg-stone-900/50 opacity-50"} flex gap-4 items-center`,children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500 text-stone-900 flex items-center justify-center font-bold shadow-lg shadow-amber-500/40",children:"10"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-amber-500",children:"Nivel Gold"}),g.jsx("p",{className:"text-[10px] text-stone-400",children:"10+ visitas"}),g.jsx("span",{className:"text-[10px] text-amber-400 font-bold",children:"30% OFF + VIP"})]})]})]})]}),g.jsx("div",{className:"text-center",children:g.jsx("p",{className:"text-[10px] text-stone-500",children:"Muestra tu cdigo QR para desbloquear niveles."})})]})]}),g.jsx("style",{children:`
                .perspective-1000 { perspective: 1000px; }
                .preserve-3d { transform-style: preserve-3d; }
                .backface-hidden { backface-visibility: hidden; }
                .rotate-y-180 { transform: rotateY(180deg); }
            `})]})},yD=()=>{const[e,t]=N.useState(""),[r,n]=N.useState(!1),[i,s]=N.useState(null),[c,f]=N.useState(null),[p,m]=N.useState(!1),[v,b]=N.useState(""),[S,A]=N.useState(""),[O,I]=N.useState(""),P=U=>{let W=U.replace(/[^0-9kK]/g,"").toUpperCase();return W=W.replace("K","0"),W},M=U=>{const W=U.target.value.replace(/[^0-9]/g,"");W.length<=8&&t(W)},L=async U=>{U&&U.preventDefault();const V=new URLSearchParams(window.location.search).get("token");if(!(!V&&e.length<8)){n(!0);try{let H=We.from("clients").select("*");V?H=H.eq("member_token",V):H=H.eq("phone","+569"+e);const{data:X,error:Y}=await H.single();if(X){const we=X.visits||0;let se="Bronce";we>=10?se="Gold":we>=5&&(se="Plata"),f({name:X.name,visits:we,referrals:X.referrals,nextReward:we<5?5:we<10?10:15,token:X.member_token,tier:se,hair_service_count:X.hair_service_count||0}),m(!1)}else V||m(!0)}catch(H){console.error("Error checking loyalty:",H)}finally{n(!1)}}},R=async U=>{U.preventDefault(),n(!0);try{if(!We)throw new Error("Sistema no disponible. Contacta al administrador.");if(!v.trim()||!S.trim())throw new Error("Por favor completa nombre y apellido");const W=P(O),V="+569"+e,X="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(se){const ie=Math.random()*16|0;return(se==="x"?ie:ie&3|8).toString(16)});console.log("Registrando cliente:",{fullPhone:V,name:`${v} ${S}`,token:X});const{data:Y,error:we}=await We.from("clients").insert([{name:`${v} ${S}`,phone:V,rut:W,visits:0,referrals:0,hair_service_count:0,member_token:X}]).select();if(console.log("Resultado insert:",{data:Y,error:we}),we)throw console.error("Error de Supabase:",we),new Error(we.message||"Error al registrar");if(Y&&Y[0]){const se=Y[0];console.log("Cliente creado:",se),f({name:se.name,visits:0,referrals:0,nextReward:5,token:se.member_token||X,tier:"Bronce",hair_service_count:0}),m(!1)}else throw new Error("No se recibieron datos del servidor")}catch(W){console.error("Error registering:",W),s(W.message||"No se pudo registrar. Verifica si ya existe el nmero o RUT.")}finally{n(!1)}};return Nr.useEffect(()=>{new URLSearchParams(window.location.search).get("token")&&L()},[]),g.jsxs("div",{className:"bg-stone-950 rounded-3xl p-8 text-white relative overflow-hidden shadow-2xl min-h-[600px] flex flex-col items-center",children:[g.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-amber-500/10 rounded-full blur-[80px]"}),g.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("span",{className:"text-[10px] uppercase tracking-[0.3em] text-amber-500 font-bold",children:"Bienvenida a tu"}),g.jsx("h3",{className:"serif text-4xl mt-2 text-white",children:"Wallet Clientes"})]}),!c&&!p&&g.jsxs("div",{className:"bg-stone-900/50 backdrop-blur-md p-8 rounded-2xl border border-white/5 shadow-xl",children:[g.jsx("p",{className:"text-stone-400 text-center mb-6 text-sm",children:"Consulta tus puntos, beneficios y acceso a tu tarjeta digital."}),g.jsxs("form",{onSubmit:L,className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center gap-2 group",children:[g.jsx("span",{className:"bg-stone-800/50 text-stone-400 font-mono text-sm px-3 py-4 rounded-xl border border-stone-700 whitespace-nowrap",children:"+569"}),g.jsxs("div",{className:"relative flex-1",children:[g.jsx("input",{type:"tel",value:e,onChange:M,placeholder:"87654321",maxLength:8,className:"w-full bg-stone-950 border border-stone-800 rounded-xl py-4 px-4 pr-10 text-white placeholder-stone-600 focus:outline-none focus:border-amber-500/50 transition duration-300 font-mono text-lg tracking-wider"}),g.jsx(Sc,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-stone-600 group-focus-within:text-amber-500 transition-colors pointer-events-none"})]})]}),g.jsx("button",{type:"submit",disabled:r||e.length<8,className:"w-full bg-gradient-to-r from-amber-200 to-amber-500 text-stone-900 font-bold py-4 rounded-xl hover:shadow-[0_0_20px_rgba(245,158,11,0.3)] transition-shadow flex justify-center items-center disabled:opacity-50 disabled:cursor-not-allowed",children:r?g.jsx(rd,{className:"animate-spin"}):"Entrar a mi Wallet"})]})]}),!c&&p&&g.jsxs("div",{className:"bg-stone-900/50 backdrop-blur-md p-8 rounded-2xl border border-amber-500/20 shadow-xl animate-in slide-in-from-right-8",children:[g.jsxs("div",{className:"text-center mb-6",children:[g.jsx("div",{className:"bg-amber-500/20 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3 text-amber-500",children:g.jsx(id,{size:24})}),g.jsx("h4",{className:"text-xl font-bold text-white",children:"Crear Cuenta"}),g.jsxs("p",{className:"text-stone-400 text-xs mt-1",children:["No encontramos el nmero ",g.jsxs("span",{className:"text-amber-400 font-mono",children:["+569 ",e]}),". Regstrate para acumular puntos."]})]}),g.jsxs("form",{onSubmit:R,className:"space-y-4",children:[i&&g.jsxs("div",{className:"bg-red-500/20 border border-red-500/50 rounded-xl p-4 flex items-center gap-3",children:[g.jsx(sy,{className:"text-red-400 shrink-0",size:20}),g.jsx("p",{className:"text-red-300 text-sm",children:i})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx("input",{type:"text",placeholder:"Nombre",required:!0,value:v,onChange:U=>{b(U.target.value),s(null)},className:"bg-stone-950 border border-stone-800 rounded-xl px-4 py-3 text-white focus:border-amber-500/50 focus:outline-none"}),g.jsx("input",{type:"text",placeholder:"Apellido",required:!0,value:S,onChange:U=>{A(U.target.value),s(null)},className:"bg-stone-950 border border-stone-800 rounded-xl px-4 py-3 text-white focus:border-amber-500/50 focus:outline-none"})]}),g.jsx("input",{type:"text",placeholder:"RUT (Sin puntos ni guin)",required:!0,value:O,onChange:U=>{I(U.target.value),s(null)},className:"w-full bg-stone-950 border border-stone-800 rounded-xl px-4 py-3 text-white focus:border-amber-500/50 focus:outline-none"}),g.jsx("button",{type:"submit",disabled:r,className:"w-full bg-white text-stone-900 font-bold py-4 rounded-xl hover:bg-stone-100 transition-colors flex justify-center items-center mt-4",children:r?g.jsx(rd,{className:"animate-spin"}):"Registrarme"}),g.jsx("button",{type:"button",onClick:()=>m(!1),className:"w-full text-stone-500 text-xs hover:text-white transition-colors py-2",children:"Volver / Usar otro nmero"})]})]}),c&&g.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-700",children:[g.jsx("div",{className:"mb-8 transform hover:scale-[1.02] transition-transform duration-500",children:g.jsx(vD,{clientName:c.name||"Miembro Exclusivo",token:c.token||"pending-token",visits:c.visits,nextReward:5,tier:c.tier})}),g.jsxs("div",{className:"text-center space-y-4",children:[g.jsx("p",{className:"text-sm text-stone-400",children:c.visits>=5?" Tienes una recompensa disponible":"Sigue sumando para desbloquear beneficios"}),g.jsx("button",{onClick:()=>{f(null),t(""),m(!1)},className:"text-xs text-stone-500 hover:text-stone-300 transition",children:"Cerrar sesin"})]})]})]})]})},wD=({onLogin:e})=>{const[t,r]=N.useState(""),[n,i]=N.useState(""),[s,c]=N.useState(""),[f,p]=N.useState(!1),m=async v=>{v.preventDefault(),c(""),p(!0);try{if(await new Promise(b=>setTimeout(b,800)),n==="jacontulianoc@gmail.com")if(t==="Chile2026#")console.log("ACCESO AUTORIZADO: Credenciales vlidas"),e("management",n);else throw new Error("Invalid login credentials");else throw n.includes("@")?new Error("Usuario no autorizado para bypass"):new Error("Email invlido")}catch(b){console.error(b),c("Error local simulado")}finally{p(!1)}};return g.jsx("div",{className:"flex flex-col items-center justify-center min-h-[50vh] bg-stone-50 p-4",children:g.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-stone-100 max-w-sm w-full text-center",children:[g.jsx(S6,{className:"w-12 h-12 text-stone-900 mx-auto mb-4"}),g.jsx("h2",{className:"text-xl font-bold text-stone-900 mb-6",children:"Acceso Seguro"}),g.jsxs("form",{onSubmit:m,className:"space-y-4",children:[g.jsx("input",{type:"email",value:n,onChange:v=>i(v.target.value),placeholder:"Correo (@tus3b.cl)",className:"w-full px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-stone-900 outline-none"}),g.jsx("input",{type:"password",value:t,onChange:v=>r(v.target.value),placeholder:"Contrasea",className:"w-full px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-stone-900 outline-none"}),s&&g.jsx("p",{className:"text-red-500 text-sm",children:s}),g.jsx("button",{type:"submit",disabled:f,className:"w-full bg-stone-900 text-white py-3 rounded-lg font-bold disabled:bg-stone-500",children:f?"Verificando...":"Ingresar"}),g.jsx("p",{className:"text-xs text-stone-400 mt-4",children:"* Sistema protegido con Supabase Auth"})]})]})})};var Ye;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var nS=new Map([[Ye.QR_CODE,"QR_CODE"],[Ye.AZTEC,"AZTEC"],[Ye.CODABAR,"CODABAR"],[Ye.CODE_39,"CODE_39"],[Ye.CODE_93,"CODE_93"],[Ye.CODE_128,"CODE_128"],[Ye.DATA_MATRIX,"DATA_MATRIX"],[Ye.MAXICODE,"MAXICODE"],[Ye.ITF,"ITF"],[Ye.EAN_13,"EAN_13"],[Ye.EAN_8,"EAN_8"],[Ye.PDF_417,"PDF_417"],[Ye.RSS_14,"RSS_14"],[Ye.RSS_EXPANDED,"RSS_EXPANDED"],[Ye.UPC_A,"UPC_A"],[Ye.UPC_E,"UPC_E"],[Ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),iS;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(iS||(iS={}));function bD(e){return Object.values(Ye).includes(e)}var r0;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(r0||(r0={}));var ED=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[r0.SCAN_TYPE_CAMERA,r0.SCAN_TYPE_FILE],e})(),x4=(function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!nS.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,nS.get(t))},e})(),aS=(function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),Xx;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Xx||(Xx={}));var SD=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Xx.UNKWOWN_ERROR}},e})(),CD=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function gs(e){return typeof e>"u"||e===null}var pc=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),v4=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(i),c=Object.keys(t),f=0,p=c;f<p.length;f++){var m=p[f];if(s.has(m))return r.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},e})(),Ku={exports:{}},AD=Ku.exports,sS;function _D(){return sS||(sS=1,(function(e,t){(function(r,n){n(t)})(AD,(function(r){function n(B){return B==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,a){B.__proto__=a}||function(B,a){for(var l in a)a.hasOwnProperty(l)&&(B[l]=a[l])};function s(B,a){i(B,a);function l(){this.constructor=B}B.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}function c(B,a){var l=Object.setPrototypeOf;l?l(B,a):B.__proto__=a}function f(B,a){a===void 0&&(a=B.constructor);var l=Error.captureStackTrace;l&&l(B,a)}var p=(function(B){s(a,B);function a(l){var u=this.constructor,h=B.call(this,l)||this;return Object.defineProperty(h,"name",{value:u.name,enumerable:!1}),c(h,u.prototype),f(h),h}return a})(Error);class m extends p{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}m.kind="Exception";class v extends m{}v.kind="ArgumentException";class b extends m{}b.kind="IllegalArgumentException";class S{constructor(a){if(this.binarizer=a,a===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(a,l){return this.binarizer.getBlackRow(a,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(a,l,u,h){const x=this.binarizer.getLuminanceSource().crop(a,l,u,h);return new S(this.binarizer.createBinarizer(x))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(a))}rotateCounterClockwise45(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(a))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class A extends m{static getChecksumInstance(){return new A}}A.kind="ChecksumException";class O{constructor(a){this.source=a}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class I{static arraycopy(a,l,u,h,x){for(;x--;)u[h++]=a[l++]}static currentTimeMillis(){return Date.now()}}class P extends m{}P.kind="IndexOutOfBoundsException";class M extends P{constructor(a=void 0,l=void 0){super(l),this.index=a,this.message=l}}M.kind="ArrayIndexOutOfBoundsException";class L{static fill(a,l){for(let u=0,h=a.length;u<h;u++)a[u]=l}static fillWithin(a,l,u,h){L.rangeCheck(a.length,l,u);for(let x=l;x<u;x++)a[x]=h}static rangeCheck(a,l,u){if(l>u)throw new b("fromIndex("+l+") > toIndex("+u+")");if(l<0)throw new M(l);if(u>a)throw new M(u)}static asList(...a){return a}static create(a,l,u){return Array.from({length:a}).map(x=>Array.from({length:l}).fill(u))}static createInt32Array(a,l,u){return Array.from({length:a}).map(x=>Int32Array.from({length:l}).fill(u))}static equals(a,l){if(!a||!l||!a.length||!l.length||a.length!==l.length)return!1;for(let u=0,h=a.length;u<h;u++)if(a[u]!==l[u])return!1;return!0}static hashCode(a){if(a===null)return 0;let l=1;for(const u of a)l=31*l+u;return l}static fillUint8Array(a,l){for(let u=0;u!==a.length;u++)a[u]=l}static copyOf(a,l){return a.slice(0,l)}static copyOfUint8Array(a,l){if(a.length<=l){const u=new Uint8Array(l);return u.set(a),u}return a.slice(0,l)}static copyOfRange(a,l,u){const h=u-l,x=new Int32Array(h);return I.arraycopy(a,l,x,0,h),x}static binarySearch(a,l,u){u===void 0&&(u=L.numberComparator);let h=0,x=a.length-1;for(;h<=x;){const y=x+h>>1,E=u(l,a[y]);if(E>0)h=y+1;else if(E<0)x=y-1;else return y}return-h-1}static numberComparator(a,l){return a-l}}class R{static numberOfTrailingZeros(a){let l;if(a===0)return 32;let u=31;return l=a<<16,l!==0&&(u-=16,a=l),l=a<<8,l!==0&&(u-=8,a=l),l=a<<4,l!==0&&(u-=4,a=l),l=a<<2,l!==0&&(u-=2,a=l),u-(a<<1>>>31)}static numberOfLeadingZeros(a){if(a===0)return 32;let l=1;return a>>>16||(l+=16,a<<=16),a>>>24||(l+=8,a<<=8),a>>>28||(l+=4,a<<=4),a>>>30||(l+=2,a<<=2),l-=a>>>31,l}static toHexString(a){return a.toString(16)}static toBinaryString(a){return String(parseInt(String(a),2))}static bitCount(a){return a=a-(a>>>1&1431655765),a=(a&858993459)+(a>>>2&858993459),a=a+(a>>>4)&252645135,a=a+(a>>>8),a=a+(a>>>16),a&63}static truncDivision(a,l){return Math.trunc(a/l)}static parseInt(a,l=void 0){return parseInt(a,l)}}R.MIN_VALUE_32_BITS=-2147483648,R.MAX_VALUE=Number.MAX_SAFE_INTEGER;class U{constructor(a,l){a===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=a,l==null?this.bits=U.makeArray(a):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(a){if(a>this.bits.length*32){const l=U.makeArray(a);I.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(a){return(this.bits[Math.floor(a/32)]&1<<(a&31))!==0}set(a){this.bits[Math.floor(a/32)]|=1<<(a&31)}flip(a){this.bits[Math.floor(a/32)]^=1<<(a&31)}getNextSet(a){const l=this.size;if(a>=l)return l;const u=this.bits;let h=Math.floor(a/32),x=u[h];x&=~((1<<(a&31))-1);const y=u.length;for(;x===0;){if(++h===y)return l;x=u[h]}const E=h*32+R.numberOfTrailingZeros(x);return E>l?l:E}getNextUnset(a){const l=this.size;if(a>=l)return l;const u=this.bits;let h=Math.floor(a/32),x=~u[h];x&=~((1<<(a&31))-1);const y=u.length;for(;x===0;){if(++h===y)return l;x=~u[h]}const E=h*32+R.numberOfTrailingZeros(x);return E>l?l:E}setBulk(a,l){this.bits[Math.floor(a/32)]=l}setRange(a,l){if(l<a||a<0||l>this.size)throw new b;if(l===a)return;l--;const u=Math.floor(a/32),h=Math.floor(l/32),x=this.bits;for(let y=u;y<=h;y++){const E=y>u?0:a&31,T=(2<<(y<h?31:l&31))-(1<<E);x[y]|=T}}clear(){const a=this.bits.length,l=this.bits;for(let u=0;u<a;u++)l[u]=0}isRange(a,l,u){if(l<a||a<0||l>this.size)throw new b;if(l===a)return!0;l--;const h=Math.floor(a/32),x=Math.floor(l/32),y=this.bits;for(let E=h;E<=x;E++){const _=E>h?0:a&31,D=(2<<(E<x?31:l&31))-(1<<_)&4294967295;if((y[E]&D)!==(u?D:0))return!1}return!0}appendBit(a){this.ensureCapacity(this.size+1),a&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(a,l){if(l<0||l>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let u=l;u>0;u--)this.appendBit((a>>u-1&1)===1)}appendBitArray(a){const l=a.size;this.ensureCapacity(this.size+l);for(let u=0;u<l;u++)this.appendBit(a.get(u))}xor(a){if(this.size!==a.size)throw new b("Sizes don't match");const l=this.bits;for(let u=0,h=l.length;u<h;u++)l[u]^=a.bits[u]}toBytes(a,l,u,h){for(let x=0;x<h;x++){let y=0;for(let E=0;E<8;E++)this.get(a)&&(y|=1<<7-E),a++;l[u+x]=y}}getBitArray(){return this.bits}reverse(){const a=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),u=l+1,h=this.bits;for(let x=0;x<u;x++){let y=h[x];y=y>>1&1431655765|(y&1431655765)<<1,y=y>>2&858993459|(y&858993459)<<2,y=y>>4&252645135|(y&252645135)<<4,y=y>>8&16711935|(y&16711935)<<8,y=y>>16&65535|(y&65535)<<16,a[l-x]=y}if(this.size!==u*32){const x=u*32-this.size;let y=a[0]>>>x;for(let E=1;E<u;E++){const _=a[E];y|=_<<32-x,a[E-1]=y,y=_>>>x}a[u-1]=y}this.bits=a}static makeArray(a){return new Int32Array(Math.floor((a+31)/32))}equals(a){if(!(a instanceof U))return!1;const l=a;return this.size===l.size&&L.equals(this.bits,l.bits)}hashCode(){return 31*this.size+L.hashCode(this.bits)}toString(){let a="";for(let l=0,u=this.size;l<u;l++)(l&7)===0&&(a+=" "),a+=this.get(l)?"X":".";return a}clone(){return new U(this.size,this.bits.slice())}}var W;(function(B){B[B.OTHER=0]="OTHER",B[B.PURE_BARCODE=1]="PURE_BARCODE",B[B.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",B[B.TRY_HARDER=3]="TRY_HARDER",B[B.CHARACTER_SET=4]="CHARACTER_SET",B[B.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",B[B.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",B[B.ASSUME_GS1=7]="ASSUME_GS1",B[B.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",B[B.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",B[B.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(W||(W={}));var V=W;class H extends m{static getFormatInstance(){return new H}}H.kind="FormatException";var X;(function(B){B[B.Cp437=0]="Cp437",B[B.ISO8859_1=1]="ISO8859_1",B[B.ISO8859_2=2]="ISO8859_2",B[B.ISO8859_3=3]="ISO8859_3",B[B.ISO8859_4=4]="ISO8859_4",B[B.ISO8859_5=5]="ISO8859_5",B[B.ISO8859_6=6]="ISO8859_6",B[B.ISO8859_7=7]="ISO8859_7",B[B.ISO8859_8=8]="ISO8859_8",B[B.ISO8859_9=9]="ISO8859_9",B[B.ISO8859_10=10]="ISO8859_10",B[B.ISO8859_11=11]="ISO8859_11",B[B.ISO8859_13=12]="ISO8859_13",B[B.ISO8859_14=13]="ISO8859_14",B[B.ISO8859_15=14]="ISO8859_15",B[B.ISO8859_16=15]="ISO8859_16",B[B.SJIS=16]="SJIS",B[B.Cp1250=17]="Cp1250",B[B.Cp1251=18]="Cp1251",B[B.Cp1252=19]="Cp1252",B[B.Cp1256=20]="Cp1256",B[B.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",B[B.UTF8=22]="UTF8",B[B.ASCII=23]="ASCII",B[B.Big5=24]="Big5",B[B.GB18030=25]="GB18030",B[B.EUC_KR=26]="EUC_KR"})(X||(X={}));class Y{constructor(a,l,u,...h){this.valueIdentifier=a,this.name=u,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=h,Y.VALUE_IDENTIFIER_TO_ECI.set(a,this),Y.NAME_TO_ECI.set(u,this);const x=this.values;for(let y=0,E=x.length;y!==E;y++){const _=x[y];Y.VALUES_TO_ECI.set(_,this)}for(const y of h)Y.NAME_TO_ECI.set(y,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(a){if(a<0||a>=900)throw new H("incorect value");const l=Y.VALUES_TO_ECI.get(a);if(l===void 0)throw new H("incorect value");return l}static getCharacterSetECIByName(a){const l=Y.NAME_TO_ECI.get(a);if(l===void 0)throw new H("incorect value");return l}equals(a){if(!(a instanceof Y))return!1;const l=a;return this.getName()===l.getName()}}Y.VALUE_IDENTIFIER_TO_ECI=new Map,Y.VALUES_TO_ECI=new Map,Y.NAME_TO_ECI=new Map,Y.Cp437=new Y(X.Cp437,Int32Array.from([0,2]),"Cp437"),Y.ISO8859_1=new Y(X.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Y.ISO8859_2=new Y(X.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Y.ISO8859_3=new Y(X.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Y.ISO8859_4=new Y(X.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Y.ISO8859_5=new Y(X.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Y.ISO8859_6=new Y(X.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Y.ISO8859_7=new Y(X.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Y.ISO8859_8=new Y(X.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Y.ISO8859_9=new Y(X.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Y.ISO8859_10=new Y(X.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Y.ISO8859_11=new Y(X.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Y.ISO8859_13=new Y(X.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Y.ISO8859_14=new Y(X.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Y.ISO8859_15=new Y(X.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Y.ISO8859_16=new Y(X.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Y.SJIS=new Y(X.SJIS,20,"SJIS","Shift_JIS"),Y.Cp1250=new Y(X.Cp1250,21,"Cp1250","windows-1250"),Y.Cp1251=new Y(X.Cp1251,22,"Cp1251","windows-1251"),Y.Cp1252=new Y(X.Cp1252,23,"Cp1252","windows-1252"),Y.Cp1256=new Y(X.Cp1256,24,"Cp1256","windows-1256"),Y.UnicodeBigUnmarked=new Y(X.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Y.UTF8=new Y(X.UTF8,26,"UTF8","UTF-8"),Y.ASCII=new Y(X.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Y.Big5=new Y(X.Big5,28,"Big5"),Y.GB18030=new Y(X.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Y.EUC_KR=new Y(X.EUC_KR,30,"EUC_KR","EUC-KR");class we extends m{}we.kind="UnsupportedOperationException";class se{static decode(a,l){const u=this.encodingName(l);return this.customDecoder?this.customDecoder(a,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(a,u):new TextDecoder(u).decode(a)}static shouldDecodeOnFallback(a){return!se.isBrowser()&&a==="ISO-8859-1"}static encode(a,l){const u=this.encodingName(l);return this.customEncoder?this.customEncoder(a,u):typeof TextEncoder>"u"?this.encodeFallback(a):new TextEncoder().encode(a)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(a){return typeof a=="string"?a:a.getName()}static encodingCharacterSet(a){return a instanceof Y?a:Y.getCharacterSetECIByName(a)}static decodeFallback(a,l){const u=this.encodingCharacterSet(l);if(se.isDecodeFallbackSupported(u)){let h="";for(let x=0,y=a.length;x<y;x++){let E=a[x].toString(16);E.length<2&&(E="0"+E),h+="%"+E}return decodeURIComponent(h)}if(u.equals(Y.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(a.buffer));throw new we(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(a){return a.equals(Y.UTF8)||a.equals(Y.ISO8859_1)||a.equals(Y.ASCII)}static encodeFallback(a){const u=btoa(unescape(encodeURIComponent(a))).split(""),h=[];for(let x=0;x<u.length;x++)h.push(u[x].charCodeAt(0));return new Uint8Array(h)}}class ie{static castAsNonUtf8Char(a,l=null){const u=l?l.getName():this.ISO88591;return se.decode(new Uint8Array([a]),u)}static guessEncoding(a,l){if(l!=null&&l.get(V.CHARACTER_SET)!==void 0)return l.get(V.CHARACTER_SET).toString();const u=a.length;let h=!0,x=!0,y=!0,E=0,_=0,T=0,D=0,F=0,$=0,G=0,Q=0,te=0,oe=0,ge=0;const Re=a.length>3&&a[0]===239&&a[1]===187&&a[2]===191;for(let Me=0;Me<u&&(h||x||y);Me++){const Te=a[Me]&255;y&&(E>0?(Te&128)===0?y=!1:E--:(Te&128)!==0&&((Te&64)===0?y=!1:(E++,(Te&32)===0?_++:(E++,(Te&16)===0?T++:(E++,(Te&8)===0?D++:y=!1))))),h&&(Te>127&&Te<160?h=!1:Te>159&&(Te<192||Te===215||Te===247)&&ge++),x&&(F>0?Te<64||Te===127||Te>252?x=!1:F--:Te===128||Te===160||Te>239?x=!1:Te>160&&Te<224?($++,Q=0,G++,G>te&&(te=G)):Te>127?(F++,G=0,Q++,Q>oe&&(oe=Q)):(G=0,Q=0))}return y&&E>0&&(y=!1),x&&F>0&&(x=!1),y&&(Re||_+T+D>0)?ie.UTF8:x&&(ie.ASSUME_SHIFT_JIS||te>=3||oe>=3)?ie.SHIFT_JIS:h&&x?te===2&&$===2||ge*10>=u?ie.SHIFT_JIS:ie.ISO88591:h?ie.ISO88591:x?ie.SHIFT_JIS:y?ie.UTF8:ie.PLATFORM_DEFAULT_ENCODING}static format(a,...l){let u=-1;function h(y,E,_,T,D,F){if(y==="%%")return"%";if(l[++u]===void 0)return;y=T?parseInt(T.substr(1)):void 0;let $=D?parseInt(D.substr(1)):void 0,G;switch(F){case"s":G=l[u];break;case"c":G=l[u][0];break;case"f":G=parseFloat(l[u]).toFixed(y);break;case"p":G=parseFloat(l[u]).toPrecision(y);break;case"e":G=parseFloat(l[u]).toExponential(y);break;case"x":G=parseInt(l[u]).toString($||16);break;case"d":G=parseFloat(parseInt(l[u],$||10).toPrecision(y)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString($);let Q=parseInt(_),te=_&&_[0]+""=="0"?"0":" ";for(;G.length<Q;)G=E!==void 0?G+te:te+G;return G}let x=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(x,h)}static getBytes(a,l){return se.encode(a,l)}static getCharCode(a,l=0){return a.charCodeAt(l)}static getCharAt(a){return String.fromCharCode(a)}}ie.SHIFT_JIS=Y.SJIS.getName(),ie.GB2312="GB2312",ie.ISO88591=Y.ISO8859_1.getName(),ie.EUC_JP="EUC_JP",ie.UTF8=Y.UTF8.getName(),ie.PLATFORM_DEFAULT_ENCODING=ie.UTF8,ie.ASSUME_SHIFT_JIS=!1;class be{constructor(a=""){this.value=a}enableDecoding(a){return this.encoding=a,this}append(a){return typeof a=="string"?this.value+=a.toString():this.encoding?this.value+=ie.castAsNonUtf8Char(a,this.encoding):this.value+=String.fromCharCode(a),this}appendChars(a,l,u){for(let h=l;l<l+u;h++)this.append(a[h]);return this}length(){return this.value.length}charAt(a){return this.value.charAt(a)}deleteCharAt(a){this.value=this.value.substr(0,a)+this.value.substring(a+1)}setCharAt(a,l){this.value=this.value.substr(0,a)+l+this.value.substr(a+1)}substring(a,l){return this.value.substring(a,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(a,l){this.value=this.value.substr(0,a)+l+this.value.substr(a+l.length)}}class Ce{constructor(a,l,u,h){if(this.width=a,this.height=l,this.rowSize=u,this.bits=h,l==null&&(l=a),this.height=l,a<1||l<1)throw new b("Both dimensions must be greater than 0");u==null&&(u=Math.floor((a+31)/32)),this.rowSize=u,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(a){const l=a.length,u=a[0].length,h=new Ce(u,l);for(let x=0;x<l;x++){const y=a[x];for(let E=0;E<u;E++)y[E]&&h.set(E,x)}return h}static parseFromString(a,l,u){if(a===null)throw new b("stringRepresentation cannot be null");const h=new Array(a.length);let x=0,y=0,E=-1,_=0,T=0;for(;T<a.length;)if(a.charAt(T)===`
`||a.charAt(T)==="\r"){if(x>y){if(E===-1)E=x-y;else if(x-y!==E)throw new b("row lengths do not match");y=x,_++}T++}else if(a.substring(T,T+l.length)===l)T+=l.length,h[x]=!0,x++;else if(a.substring(T,T+u.length)===u)T+=u.length,h[x]=!1,x++;else throw new b("illegal character encountered: "+a.substring(T));if(x>y){if(E===-1)E=x-y;else if(x-y!==E)throw new b("row lengths do not match");_++}const D=new Ce(E,_);for(let F=0;F<x;F++)h[F]&&D.set(Math.floor(F%E),Math.floor(F/E));return D}get(a,l){const u=l*this.rowSize+Math.floor(a/32);return(this.bits[u]>>>(a&31)&1)!==0}set(a,l){const u=l*this.rowSize+Math.floor(a/32);this.bits[u]|=1<<(a&31)&4294967295}unset(a,l){const u=l*this.rowSize+Math.floor(a/32);this.bits[u]&=~(1<<(a&31)&4294967295)}flip(a,l){const u=l*this.rowSize+Math.floor(a/32);this.bits[u]^=1<<(a&31)&4294967295}xor(a){if(this.width!==a.getWidth()||this.height!==a.getHeight()||this.rowSize!==a.getRowSize())throw new b("input matrix dimensions do not match");const l=new U(Math.floor(this.width/32)+1),u=this.rowSize,h=this.bits;for(let x=0,y=this.height;x<y;x++){const E=x*u,_=a.getRow(x,l).getBitArray();for(let T=0;T<u;T++)h[E+T]^=_[T]}}clear(){const a=this.bits,l=a.length;for(let u=0;u<l;u++)a[u]=0}setRegion(a,l,u,h){if(l<0||a<0)throw new b("Left and top must be nonnegative");if(h<1||u<1)throw new b("Height and width must be at least 1");const x=a+u,y=l+h;if(y>this.height||x>this.width)throw new b("The region must fit inside the matrix");const E=this.rowSize,_=this.bits;for(let T=l;T<y;T++){const D=T*E;for(let F=a;F<x;F++)_[D+Math.floor(F/32)]|=1<<(F&31)&4294967295}}getRow(a,l){l==null||l.getSize()<this.width?l=new U(this.width):l.clear();const u=this.rowSize,h=this.bits,x=a*u;for(let y=0;y<u;y++)l.setBulk(y*32,h[x+y]);return l}setRow(a,l){I.arraycopy(l.getBitArray(),0,this.bits,a*this.rowSize,this.rowSize)}rotate180(){const a=this.getWidth(),l=this.getHeight();let u=new U(a),h=new U(a);for(let x=0,y=Math.floor((l+1)/2);x<y;x++)u=this.getRow(x,u),h=this.getRow(l-1-x,h),u.reverse(),h.reverse(),this.setRow(x,h),this.setRow(l-1-x,u)}getEnclosingRectangle(){const a=this.width,l=this.height,u=this.rowSize,h=this.bits;let x=a,y=l,E=-1,_=-1;for(let T=0;T<l;T++)for(let D=0;D<u;D++){const F=h[T*u+D];if(F!==0){if(T<y&&(y=T),T>_&&(_=T),D*32<x){let $=0;for(;(F<<31-$&4294967295)===0;)$++;D*32+$<x&&(x=D*32+$)}if(D*32+31>E){let $=31;for(;!(F>>>$);)$--;D*32+$>E&&(E=D*32+$)}}}return E<x||_<y?null:Int32Array.from([x,y,E-x+1,_-y+1])}getTopLeftOnBit(){const a=this.rowSize,l=this.bits;let u=0;for(;u<l.length&&l[u]===0;)u++;if(u===l.length)return null;const h=u/a;let x=u%a*32;const y=l[u];let E=0;for(;(y<<31-E&4294967295)===0;)E++;return x+=E,Int32Array.from([x,h])}getBottomRightOnBit(){const a=this.rowSize,l=this.bits;let u=l.length-1;for(;u>=0&&l[u]===0;)u--;if(u<0)return null;const h=Math.floor(u/a);let x=Math.floor(u%a)*32;const y=l[u];let E=31;for(;!(y>>>E);)E--;return x+=E,Int32Array.from([x,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(a){if(!(a instanceof Ce))return!1;const l=a;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&L.equals(this.bits,l.bits)}hashCode(){let a=this.width;return a=31*a+this.width,a=31*a+this.height,a=31*a+this.rowSize,a=31*a+L.hashCode(this.bits),a}toString(a="X ",l="  ",u=`
`){return this.buildToString(a,l,u)}buildToString(a,l,u){let h=new be;for(let x=0,y=this.height;x<y;x++){for(let E=0,_=this.width;E<_;E++)h.append(this.get(E,x)?a:l);h.append(u)}return h.toString()}clone(){return new Ce(this.width,this.height,this.rowSize,this.bits.slice())}}class re extends m{static getNotFoundInstance(){return new re}}re.kind="NotFoundException";class ze extends O{constructor(a){super(a),this.luminances=ze.EMPTY,this.buckets=new Int32Array(ze.LUMINANCE_BUCKETS)}getBlackRow(a,l){const u=this.getLuminanceSource(),h=u.getWidth();l==null||l.getSize()<h?l=new U(h):l.clear(),this.initArrays(h);const x=u.getRow(a,this.luminances),y=this.buckets;for(let _=0;_<h;_++)y[(x[_]&255)>>ze.LUMINANCE_SHIFT]++;const E=ze.estimateBlackPoint(y);if(h<3)for(let _=0;_<h;_++)(x[_]&255)<E&&l.set(_);else{let _=x[0]&255,T=x[1]&255;for(let D=1;D<h-1;D++){const F=x[D+1]&255;(T*4-_-F)/2<E&&l.set(D),_=T,T=F}}return l}getBlackMatrix(){const a=this.getLuminanceSource(),l=a.getWidth(),u=a.getHeight(),h=new Ce(l,u);this.initArrays(l);const x=this.buckets;for(let _=1;_<5;_++){const T=Math.floor(u*_/5),D=a.getRow(T,this.luminances),F=Math.floor(l*4/5);for(let $=Math.floor(l/5);$<F;$++){const G=D[$]&255;x[G>>ze.LUMINANCE_SHIFT]++}}const y=ze.estimateBlackPoint(x),E=a.getMatrix();for(let _=0;_<u;_++){const T=_*l;for(let D=0;D<l;D++)(E[T+D]&255)<y&&h.set(D,_)}return h}createBinarizer(a){return new ze(a)}initArrays(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));const l=this.buckets;for(let u=0;u<ze.LUMINANCE_BUCKETS;u++)l[u]=0}static estimateBlackPoint(a){const l=a.length;let u=0,h=0,x=0;for(let D=0;D<l;D++)a[D]>x&&(h=D,x=a[D]),a[D]>u&&(u=a[D]);let y=0,E=0;for(let D=0;D<l;D++){const F=D-h,$=a[D]*F*F;$>E&&(y=D,E=$)}if(h>y){const D=h;h=y,y=D}if(y-h<=l/16)throw new re;let _=y-1,T=-1;for(let D=y-1;D>h;D--){const F=D-h,$=F*F*(y-D)*(u-a[D]);$>T&&(_=D,T=$)}return _<<ze.LUMINANCE_SHIFT}}ze.LUMINANCE_BITS=5,ze.LUMINANCE_SHIFT=8-ze.LUMINANCE_BITS,ze.LUMINANCE_BUCKETS=1<<ze.LUMINANCE_BITS,ze.EMPTY=Uint8ClampedArray.from([0]);class le extends ze{constructor(a){super(a),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const a=this.getLuminanceSource(),l=a.getWidth(),u=a.getHeight();if(l>=le.MINIMUM_DIMENSION&&u>=le.MINIMUM_DIMENSION){const h=a.getMatrix();let x=l>>le.BLOCK_SIZE_POWER;(l&le.BLOCK_SIZE_MASK)!==0&&x++;let y=u>>le.BLOCK_SIZE_POWER;(u&le.BLOCK_SIZE_MASK)!==0&&y++;const E=le.calculateBlackPoints(h,x,y,l,u),_=new Ce(l,u);le.calculateThresholdForBlock(h,x,y,l,u,E,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(a){return new le(a)}static calculateThresholdForBlock(a,l,u,h,x,y,E){const _=x-le.BLOCK_SIZE,T=h-le.BLOCK_SIZE;for(let D=0;D<u;D++){let F=D<<le.BLOCK_SIZE_POWER;F>_&&(F=_);const $=le.cap(D,2,u-3);for(let G=0;G<l;G++){let Q=G<<le.BLOCK_SIZE_POWER;Q>T&&(Q=T);const te=le.cap(G,2,l-3);let oe=0;for(let Re=-2;Re<=2;Re++){const Me=y[$+Re];oe+=Me[te-2]+Me[te-1]+Me[te]+Me[te+1]+Me[te+2]}const ge=oe/25;le.thresholdBlock(a,Q,F,ge,h,E)}}}static cap(a,l,u){return a<l?l:a>u?u:a}static thresholdBlock(a,l,u,h,x,y){for(let E=0,_=u*x+l;E<le.BLOCK_SIZE;E++,_+=x)for(let T=0;T<le.BLOCK_SIZE;T++)(a[_+T]&255)<=h&&y.set(l+T,u+E)}static calculateBlackPoints(a,l,u,h,x){const y=x-le.BLOCK_SIZE,E=h-le.BLOCK_SIZE,_=new Array(u);for(let T=0;T<u;T++){_[T]=new Int32Array(l);let D=T<<le.BLOCK_SIZE_POWER;D>y&&(D=y);for(let F=0;F<l;F++){let $=F<<le.BLOCK_SIZE_POWER;$>E&&($=E);let G=0,Q=255,te=0;for(let ge=0,Re=D*h+$;ge<le.BLOCK_SIZE;ge++,Re+=h){for(let Me=0;Me<le.BLOCK_SIZE;Me++){const Te=a[Re+Me]&255;G+=Te,Te<Q&&(Q=Te),Te>te&&(te=Te)}if(te-Q>le.MIN_DYNAMIC_RANGE)for(ge++,Re+=h;ge<le.BLOCK_SIZE;ge++,Re+=h)for(let Me=0;Me<le.BLOCK_SIZE;Me++)G+=a[Re+Me]&255}let oe=G>>le.BLOCK_SIZE_POWER*2;if(te-Q<=le.MIN_DYNAMIC_RANGE&&(oe=Q/2,T>0&&F>0)){const ge=(_[T-1][F]+2*_[T][F-1]+_[T-1][F-1])/4;Q<ge&&(oe=ge)}_[T][F]=oe}}return _}}le.BLOCK_SIZE_POWER=3,le.BLOCK_SIZE=1<<le.BLOCK_SIZE_POWER,le.BLOCK_SIZE_MASK=le.BLOCK_SIZE-1,le.MINIMUM_DIMENSION=le.BLOCK_SIZE*5,le.MIN_DYNAMIC_RANGE=24;class me{constructor(a,l){this.width=a,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(a,l,u,h){throw new we("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new we("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new we("This luminance source does not support rotation by 45 degrees.")}toString(){const a=new Uint8ClampedArray(this.width);let l=new be;for(let u=0;u<this.height;u++){const h=this.getRow(u,a);for(let x=0;x<this.width;x++){const y=h[x]&255;let E;y<64?E="#":y<128?E="+":y<192?E=".":E=" ",l.append(E)}l.append(`
`)}return l.toString()}}class Ee extends me{constructor(a){super(a.getWidth(),a.getHeight()),this.delegate=a}getRow(a,l){const u=this.delegate.getRow(a,l),h=this.getWidth();for(let x=0;x<h;x++)u[x]=255-(u[x]&255);return u}getMatrix(){const a=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(l);for(let h=0;h<l;h++)u[h]=255-(a[h]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(a,l,u,h){return new Ee(this.delegate.crop(a,l,u,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ee(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ee(this.delegate.rotateCounterClockwise45())}}class Ae extends me{constructor(a){super(a.width,a.height),this.canvas=a,this.tempCanvasElement=null,this.buffer=Ae.makeBufferFromCanvasImageData(a)}static makeBufferFromCanvasImageData(a){const l=a.getContext("2d").getImageData(0,0,a.width,a.height);return Ae.toGrayscaleBuffer(l.data,a.width,a.height)}static toGrayscaleBuffer(a,l,u){const h=new Uint8ClampedArray(l*u);for(let x=0,y=0,E=a.length;x<E;x+=4,y++){let _;if(a[x+3]===0)_=255;else{const D=a[x],F=a[x+1],$=a[x+2];_=306*D+601*F+117*$+512>>10}h[y]=_}return h}getRow(a,l){if(a<0||a>=this.getHeight())throw new b("Requested row is outside the image: "+a);const u=this.getWidth(),h=a*u;return l===null?l=this.buffer.slice(h,h+u):(l.length<u&&(l=new Uint8ClampedArray(u)),l.set(this.buffer.slice(h,h+u))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(a,l,u,h){return super.crop(a,l,u,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement}rotate(a){const l=this.getTempCanvasElement(),u=l.getContext("2d"),h=a*Ae.DEGREE_TO_RADIANS,x=this.canvas.width,y=this.canvas.height,E=Math.ceil(Math.abs(Math.cos(h))*x+Math.abs(Math.sin(h))*y),_=Math.ceil(Math.abs(Math.sin(h))*x+Math.abs(Math.cos(h))*y);return l.width=E,l.height=_,u.translate(E/2,_/2),u.rotate(h),u.drawImage(this.canvas,x/-2,y/-2),this.buffer=Ae.makeBufferFromCanvasImageData(l),this}invert(){return new Ee(this)}}Ae.DEGREE_TO_RADIANS=Math.PI/180;class J{constructor(a,l,u){this.deviceId=a,this.label=l,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var de=(globalThis||rh||self||window||void 0)&&(globalThis||rh||self||window||void 0).__awaiter||function(B,a,l,u){function h(x){return x instanceof l?x:new l(function(y){y(x)})}return new(l||(l=Promise))(function(x,y){function E(D){try{T(u.next(D))}catch(F){y(F)}}function _(D){try{T(u.throw(D))}catch(F){y(F)}}function T(D){D.done?x(D.value):h(D.value).then(E,_)}T((u=u.apply(B,a||[])).next())})};class $e{constructor(a,l=500,u){this.reader=a,this.timeBetweenScansMillis=l,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(a){this._timeBetweenDecodingAttempts=a<0?0:a}set hints(a){this._hints=a||null}get hints(){return this._hints}listVideoInputDevices(){return de(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const a=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const u of a){const h=u.kind==="video"?"videoinput":u.kind;if(h!=="videoinput")continue;const x=u.deviceId||u.id,y=u.label||`Video device ${l.length+1}`,E=u.groupId,_={deviceId:x,label:y,kind:h,groupId:E};l.push(_)}return l})}getVideoInputDevices(){return de(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new J(l.deviceId,l.label))})}findDeviceById(a){return de(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(u=>u.deviceId===a):null})}decodeFromInputVideoDevice(a,l){return de(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(a,l)})}decodeOnceFromVideoDevice(a,l){return de(this,void 0,void 0,function*(){this.reset();let u;a?u={deviceId:{exact:a}}:u={facingMode:"environment"};const h={video:u};return yield this.decodeOnceFromConstraints(h,l)})}decodeOnceFromConstraints(a,l){return de(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeOnceFromStream(u,l)})}decodeOnceFromStream(a,l){return de(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(a,l);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(a,l,u){return de(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(a,l,u)})}decodeFromVideoDevice(a,l,u){return de(this,void 0,void 0,function*(){let h;a?h={deviceId:{exact:a}}:h={facingMode:"environment"};const x={video:h};return yield this.decodeFromConstraints(x,l,u)})}decodeFromConstraints(a,l,u){return de(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeFromStream(h,l,u)})}decodeFromStream(a,l,u){return de(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(a,l);return yield this.decodeContinuously(h,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(a,l){return de(this,void 0,void 0,function*(){const u=this.prepareVideoElement(l);return this.addVideoSource(u,a),this.videoElement=u,this.stream=a,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(a){return new Promise((l,u)=>this.playVideoOnLoad(a,()=>l()))}playVideoOnLoad(a,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(a),a.addEventListener("ended",this.videoEndedListener),a.addEventListener("canplay",this.videoCanPlayListener),a.addEventListener("playing",l),this.tryPlayVideo(a)}isVideoPlaying(a){return a.currentTime>0&&!a.paused&&!a.ended&&a.readyState>2}tryPlayVideo(a){return de(this,void 0,void 0,function*(){if(this.isVideoPlaying(a)){console.warn("Trying to play video that is already playing.");return}try{yield a.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(a,l){const u=document.getElementById(a);if(!u)throw new v(`element with id '${a}' not found`);if(u.nodeName.toLowerCase()!==l.toLowerCase())throw new v(`element with id '${a}' must be an ${l} element`);return u}decodeFromImage(a,l){if(!a&&!l)throw new v("either imageElement with a src set or an url must be provided");return l&&!a?this.decodeFromImageUrl(l):this.decodeFromImageElement(a)}decodeFromVideo(a,l){if(!a&&!l)throw new v("Either an element with a src set or an URL must be provided");return l&&!a?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(a)}decodeFromVideoContinuously(a,l,u){if(a===void 0&&l===void 0)throw new v("Either an element with a src set or an URL must be provided");return l&&!a?this.decodeFromVideoUrlContinuously(l,u):this.decodeFromVideoElementContinuously(a,u)}decodeFromImageElement(a){if(!a)throw new v("An image element must be provided.");this.reset();const l=this.prepareImageElement(a);this.imageElement=l;let u;return this.isImageLoaded(l)?u=this.decodeOnce(l,!1,!0):u=this._decodeOnLoadImage(l),u}decodeFromVideoElement(a){const l=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(a,l){const u=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideoContinuously(u,l)}_decodeFromVideoElementSetup(a){if(!a)throw new v("A video element must be provided.");this.reset();const l=this.prepareVideoElement(a);return this.videoElement=l,l}decodeFromImageUrl(a){if(!a)throw new v("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const u=this._decodeOnLoadImage(l);return l.src=a,u}decodeFromVideoUrl(a){if(!a)throw new v("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElement(l);return l.src=a,u}decodeFromVideoUrlContinuously(a,l){if(!a)throw new v("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(u,l);return u.src=a,h}_decodeOnLoadImage(a){return new Promise((l,u)=>{this.imageLoadedListener=()=>this.decodeOnce(a,!1,!0).then(l,u),a.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(a){return de(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(a),yield this.decodeOnce(a)})}_decodeOnLoadVideoContinuously(a,l){return de(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(a),this.decodeContinuously(a,l)})}isImageLoaded(a){return!(!a.complete||a.naturalWidth===0)}prepareImageElement(a){let l;return typeof a>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof a=="string"&&(l=this.getMediaElement(a,"img")),a instanceof HTMLImageElement&&(l=a),l}prepareVideoElement(a){let l;return!a&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof a=="string"&&(l=this.getMediaElement(a,"video")),a instanceof HTMLVideoElement&&(l=a),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(a,l=!0,u=!0){this._stopAsyncDecode=!1;const h=(x,y)=>{if(this._stopAsyncDecode){y(new re("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const E=this.decode(a);x(E)}catch(E){const _=l&&E instanceof re,D=(E instanceof A||E instanceof H)&&u;if(_||D)return setTimeout(h,this._timeBetweenDecodingAttempts,x,y);y(E)}};return new Promise((x,y)=>h(x,y))}decodeContinuously(a,l){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(a);l(h,null),setTimeout(u,this.timeBetweenScansMillis)}catch(h){l(null,h);const x=h instanceof A||h instanceof H,y=h instanceof re;(x||y)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(a){const l=this.createBinaryBitmap(a);return this.decodeBitmap(l)}_isHTMLVideoElement(a){return a.videoWidth!==0}drawFrameOnCanvas(a,l,u){l||(l={sx:0,sy:0,sWidth:a.videoWidth,sHeight:a.videoHeight,dx:0,dy:0,dWidth:a.videoWidth,dHeight:a.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(a,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(a,l,u=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:a.naturalWidth,sHeight:a.naturalHeight,dx:0,dy:0,dWidth:a.naturalWidth,dHeight:a.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(a,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(a){this.getCaptureCanvasContext(a),this._isHTMLVideoElement(a)?this.drawFrameOnCanvas(a):this.drawImageOnCanvas(a);const l=this.getCaptureCanvas(a),u=new Ae(l),h=new le(u);return new S(h)}getCaptureCanvasContext(a){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(a).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(a){if(!this.captureCanvas){const l=this.createCaptureCanvas(a);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(a){return this.reader.decode(a,this._hints)}createCaptureCanvas(a){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let u,h;return typeof a<"u"&&(a instanceof HTMLVideoElement?(u=a.videoWidth,h=a.videoHeight):a instanceof HTMLImageElement&&(u=a.naturalWidth||a.width,h=a.naturalHeight||a.height)),l.style.width=u+"px",l.style.height=h+"px",l.width=u,l.height=h,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(a=>a.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(a,l){try{a.srcObject=l}catch{a.src=URL.createObjectURL(l)}}cleanVideoSource(a){try{a.srcObject=null}catch{a.src=""}this.videoElement.removeAttribute("src")}}class Ue{constructor(a,l,u=l==null?0:8*l.length,h,x,y=I.currentTimeMillis()){this.text=a,this.rawBytes=l,this.numBits=u,this.resultPoints=h,this.format=x,this.timestamp=y,this.text=a,this.rawBytes=l,u==null?this.numBits=l==null?0:8*l.length:this.numBits=u,this.resultPoints=h,this.format=x,this.resultMetadata=null,y==null?this.timestamp=I.currentTimeMillis():this.timestamp=y}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(a,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(a,l)}putAllMetadata(a){a!==null&&(this.resultMetadata===null?this.resultMetadata=a:this.resultMetadata=new Map(a))}addResultPoints(a){const l=this.resultPoints;if(l===null)this.resultPoints=a;else if(a!==null&&a.length>0){const u=new Array(l.length+a.length);I.arraycopy(l,0,u,0,l.length),I.arraycopy(a,0,u,l.length,a.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Xe;(function(B){B[B.AZTEC=0]="AZTEC",B[B.CODABAR=1]="CODABAR",B[B.CODE_39=2]="CODE_39",B[B.CODE_93=3]="CODE_93",B[B.CODE_128=4]="CODE_128",B[B.DATA_MATRIX=5]="DATA_MATRIX",B[B.EAN_8=6]="EAN_8",B[B.EAN_13=7]="EAN_13",B[B.ITF=8]="ITF",B[B.MAXICODE=9]="MAXICODE",B[B.PDF_417=10]="PDF_417",B[B.QR_CODE=11]="QR_CODE",B[B.RSS_14=12]="RSS_14",B[B.RSS_EXPANDED=13]="RSS_EXPANDED",B[B.UPC_A=14]="UPC_A",B[B.UPC_E=15]="UPC_E",B[B.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xe||(Xe={}));var Z=Xe,_e;(function(B){B[B.OTHER=0]="OTHER",B[B.ORIENTATION=1]="ORIENTATION",B[B.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",B[B.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",B[B.ISSUE_NUMBER=4]="ISSUE_NUMBER",B[B.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",B[B.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",B[B.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",B[B.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",B[B.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",B[B.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(_e||(_e={}));var fe=_e;class ae{constructor(a,l,u,h,x=-1,y=-1){this.rawBytes=a,this.text=l,this.byteSegments=u,this.ecLevel=h,this.structuredAppendSequenceNumber=x,this.structuredAppendParity=y,this.numBits=a==null?0:8*a.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(a){this.numBits=a}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(a){this.errorsCorrected=a}getErasures(){return this.erasures}setErasures(a){this.erasures=a}getOther(){return this.other}setOther(a){this.other=a}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class je{exp(a){return this.expTable[a]}log(a){if(a===0)throw new b;return this.logTable[a]}static addOrSubtract(a,l){return a^l}}class De{constructor(a,l){if(l.length===0)throw new b;this.field=a;const u=l.length;if(u>1&&l[0]===0){let h=1;for(;h<u&&l[h]===0;)h++;h===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-h),I.arraycopy(l,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);const l=this.coefficients;let u;if(a===1){u=0;for(let y=0,E=l.length;y!==E;y++){const _=l[y];u=je.addOrSubtract(u,_)}return u}u=l[0];const h=l.length,x=this.field;for(let y=1;y<h;y++)u=je.addOrSubtract(x.multiply(a,u),l[y]);return u}addOrSubtract(a){if(!this.field.equals(a.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return a;if(a.isZero())return this;let l=this.coefficients,u=a.coefficients;if(l.length>u.length){const y=l;l=u,u=y}let h=new Int32Array(u.length);const x=u.length-l.length;I.arraycopy(u,0,h,0,x);for(let y=x;y<u.length;y++)h[y]=je.addOrSubtract(l[y-x],u[y]);return new De(this.field,h)}multiply(a){if(!this.field.equals(a.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||a.isZero())return this.field.getZero();const l=this.coefficients,u=l.length,h=a.coefficients,x=h.length,y=new Int32Array(u+x-1),E=this.field;for(let _=0;_<u;_++){const T=l[_];for(let D=0;D<x;D++)y[_+D]=je.addOrSubtract(y[_+D],E.multiply(T,h[D]))}return new De(E,y)}multiplyScalar(a){if(a===0)return this.field.getZero();if(a===1)return this;const l=this.coefficients.length,u=this.field,h=new Int32Array(l),x=this.coefficients;for(let y=0;y<l;y++)h[y]=u.multiply(x[y],a);return new De(u,h)}multiplyByMonomial(a,l){if(a<0)throw new b;if(l===0)return this.field.getZero();const u=this.coefficients,h=u.length,x=new Int32Array(h+a),y=this.field;for(let E=0;E<h;E++)x[E]=y.multiply(u[E],l);return new De(y,x)}divide(a){if(!this.field.equals(a.field))throw new b("GenericGFPolys do not have same GenericGF field");if(a.isZero())throw new b("Divide by 0");const l=this.field;let u=l.getZero(),h=this;const x=a.getCoefficient(a.getDegree()),y=l.inverse(x);for(;h.getDegree()>=a.getDegree()&&!h.isZero();){const E=h.getDegree()-a.getDegree(),_=l.multiply(h.getCoefficient(h.getDegree()),y),T=a.multiplyByMonomial(E,_),D=l.buildMonomial(E,_);u=u.addOrSubtract(D),h=h.addOrSubtract(T)}return[u,h]}toString(){let a="";for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);if(u!==0){if(u<0?(a+=" - ",u=-u):a.length>0&&(a+=" + "),l===0||u!==1){const h=this.field.log(u);h===0?a+="1":h===1?a+="a":(a+="a^",a+=h)}l!==0&&(l===1?a+="x":(a+="x^",a+=l))}}return a}}class ye extends m{}ye.kind="ArithmeticException";class Be extends je{constructor(a,l,u){super(),this.primitive=a,this.size=l,this.generatorBase=u;const h=new Int32Array(l);let x=1;for(let E=0;E<l;E++)h[E]=x,x*=2,x>=l&&(x^=a,x&=l-1);this.expTable=h;const y=new Int32Array(l);for(let E=0;E<l-1;E++)y[h[E]]=E;this.logTable=y,this.zero=new De(this,Int32Array.from([0])),this.one=new De(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,l){if(a<0)throw new b;if(l===0)return this.zero;const u=new Int32Array(a+1);return u[0]=l,new De(this,u)}inverse(a){if(a===0)throw new ye;return this.expTable[this.size-this.logTable[a]-1]}multiply(a,l){return a===0||l===0?0:this.expTable[(this.logTable[a]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+R.toHexString(this.primitive)+","+this.size+")"}equals(a){return a===this}}Be.AZTEC_DATA_12=new Be(4201,4096,1),Be.AZTEC_DATA_10=new Be(1033,1024,1),Be.AZTEC_DATA_6=new Be(67,64,1),Be.AZTEC_PARAM=new Be(19,16,1),Be.QR_CODE_FIELD_256=new Be(285,256,0),Be.DATA_MATRIX_FIELD_256=new Be(301,256,1),Be.AZTEC_DATA_8=Be.DATA_MATRIX_FIELD_256,Be.MAXICODE_FIELD_64=Be.AZTEC_DATA_6;class Qe extends m{}Qe.kind="ReedSolomonException";class _t extends m{}_t.kind="IllegalStateException";class Ft{constructor(a){this.field=a}decode(a,l){const u=this.field,h=new De(u,a),x=new Int32Array(l);let y=!0;for(let G=0;G<l;G++){const Q=h.evaluateAt(u.exp(G+u.getGeneratorBase()));x[x.length-1-G]=Q,Q!==0&&(y=!1)}if(y)return;const E=new De(u,x),_=this.runEuclideanAlgorithm(u.buildMonomial(l,1),E,l),T=_[0],D=_[1],F=this.findErrorLocations(T),$=this.findErrorMagnitudes(D,F);for(let G=0;G<F.length;G++){const Q=a.length-1-u.log(F[G]);if(Q<0)throw new Qe("Bad error location");a[Q]=Be.addOrSubtract(a[Q],$[G])}}runEuclideanAlgorithm(a,l,u){if(a.getDegree()<l.getDegree()){const G=a;a=l,l=G}const h=this.field;let x=a,y=l,E=h.getZero(),_=h.getOne();for(;y.getDegree()>=(u/2|0);){let G=x,Q=E;if(x=y,E=_,x.isZero())throw new Qe("r_{i-1} was zero");y=G;let te=h.getZero();const oe=x.getCoefficient(x.getDegree()),ge=h.inverse(oe);for(;y.getDegree()>=x.getDegree()&&!y.isZero();){const Re=y.getDegree()-x.getDegree(),Me=h.multiply(y.getCoefficient(y.getDegree()),ge);te=te.addOrSubtract(h.buildMonomial(Re,Me)),y=y.addOrSubtract(x.multiplyByMonomial(Re,Me))}if(_=te.multiply(E).addOrSubtract(Q),y.getDegree()>=x.getDegree())throw new _t("Division algorithm failed to reduce polynomial?")}const T=_.getCoefficient(0);if(T===0)throw new Qe("sigmaTilde(0) was zero");const D=h.inverse(T),F=_.multiplyScalar(D),$=y.multiplyScalar(D);return[F,$]}findErrorLocations(a){const l=a.getDegree();if(l===1)return Int32Array.from([a.getCoefficient(1)]);const u=new Int32Array(l);let h=0;const x=this.field;for(let y=1;y<x.getSize()&&h<l;y++)a.evaluateAt(y)===0&&(u[h]=x.inverse(y),h++);if(h!==l)throw new Qe("Error locator degree does not match number of roots");return u}findErrorMagnitudes(a,l){const u=l.length,h=new Int32Array(u),x=this.field;for(let y=0;y<u;y++){const E=x.inverse(l[y]);let _=1;for(let T=0;T<u;T++)if(y!==T){const D=x.multiply(l[T],E),F=(D&1)===0?D|1:D&-2;_=x.multiply(_,F)}h[y]=x.multiply(a.evaluateAt(E),x.inverse(_)),x.getGeneratorBase()!==0&&(h[y]=x.multiply(h[y],E))}return h}}var Pt;(function(B){B[B.UPPER=0]="UPPER",B[B.LOWER=1]="LOWER",B[B.MIXED=2]="MIXED",B[B.DIGIT=3]="DIGIT",B[B.PUNCT=4]="PUNCT",B[B.BINARY=5]="BINARY"})(Pt||(Pt={}));class Ct{decode(a){this.ddata=a;let l=a.getBits(),u=this.extractBits(l),h=this.correctBits(u),x=Ct.convertBoolArrayToByteArray(h),y=Ct.getEncodedData(h),E=new ae(x,y,null,null);return E.setNumBits(h.length),E}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let l=a.length,u=Pt.UPPER,h=Pt.UPPER,x="",y=0;for(;y<l;)if(h===Pt.BINARY){if(l-y<5)break;let E=Ct.readCode(a,y,5);if(y+=5,E===0){if(l-y<11)break;E=Ct.readCode(a,y,11)+31,y+=11}for(let _=0;_<E;_++){if(l-y<8){y=l;break}const T=Ct.readCode(a,y,8);x+=ie.castAsNonUtf8Char(T),y+=8}h=u}else{let E=h===Pt.DIGIT?4:5;if(l-y<E)break;let _=Ct.readCode(a,y,E);y+=E;let T=Ct.getCharacter(h,_);T.startsWith("CTRL_")?(u=h,h=Ct.getTable(T.charAt(5)),T.charAt(6)==="L"&&(u=h)):(x+=T,h=u)}return x}static getTable(a){switch(a){case"L":return Pt.LOWER;case"P":return Pt.PUNCT;case"M":return Pt.MIXED;case"D":return Pt.DIGIT;case"B":return Pt.BINARY;case"U":default:return Pt.UPPER}}static getCharacter(a,l){switch(a){case Pt.UPPER:return Ct.UPPER_TABLE[l];case Pt.LOWER:return Ct.LOWER_TABLE[l];case Pt.MIXED:return Ct.MIXED_TABLE[l];case Pt.PUNCT:return Ct.PUNCT_TABLE[l];case Pt.DIGIT:return Ct.DIGIT_TABLE[l];default:throw new _t("Bad table")}}correctBits(a){let l,u;this.ddata.getNbLayers()<=2?(u=6,l=Be.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,l=Be.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,l=Be.AZTEC_DATA_10):(u=12,l=Be.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),x=a.length/u;if(x<h)throw new H;let y=a.length%u,E=new Int32Array(x);for(let $=0;$<x;$++,y+=u)E[$]=Ct.readCode(a,y,u);try{new Ft(l).decode(E,x-h)}catch($){throw new H($)}let _=(1<<u)-1,T=0;for(let $=0;$<h;$++){let G=E[$];if(G===0||G===_)throw new H;(G===1||G===_-1)&&T++}let D=new Array(h*u-T),F=0;for(let $=0;$<h;$++){let G=E[$];if(G===1||G===_-1)D.fill(G>1,F,F+u-1),F+=u-1;else for(let Q=u-1;Q>=0;--Q)D[F++]=(G&1<<Q)!==0}return D}extractBits(a){let l=this.ddata.isCompact(),u=this.ddata.getNbLayers(),h=(l?11:14)+u*4,x=new Int32Array(h),y=new Array(this.totalBitsInLayer(u,l));if(l)for(let E=0;E<x.length;E++)x[E]=E;else{let E=h+1+2*R.truncDivision(R.truncDivision(h,2)-1,15),_=h/2,T=R.truncDivision(E,2);for(let D=0;D<_;D++){let F=D+R.truncDivision(D,15);x[_-D-1]=T-F-1,x[_+D]=T+F+1}}for(let E=0,_=0;E<u;E++){let T=(u-E)*4+(l?9:12),D=E*2,F=h-1-D;for(let $=0;$<T;$++){let G=$*2;for(let Q=0;Q<2;Q++)y[_+G+Q]=a.get(x[D+Q],x[D+$]),y[_+2*T+G+Q]=a.get(x[D+$],x[F-Q]),y[_+4*T+G+Q]=a.get(x[F-Q],x[F-$]),y[_+6*T+G+Q]=a.get(x[F-$],x[D+Q])}_+=T*8}return y}static readCode(a,l,u){let h=0;for(let x=l;x<l+u;x++)h<<=1,a[x]&&(h|=1);return h}static readByte(a,l){let u=a.length-l;return u>=8?Ct.readCode(a,l,8):Ct.readCode(a,l,u)<<8-u}static convertBoolArrayToByteArray(a){let l=new Uint8Array((a.length+7)/8);for(let u=0;u<l.length;u++)l[u]=Ct.readByte(a,8*u);return l}totalBitsInLayer(a,l){return((l?88:112)+16*a)*a}}Ct.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ct.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ct.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ct.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ct.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class At{constructor(){}static round(a){return a===NaN?0:a<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:a>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a+(a<0?-.5:.5)|0}static distance(a,l,u,h){const x=a-u,y=l-h;return Math.sqrt(x*x+y*y)}static sum(a){let l=0;for(let u=0,h=a.length;u!==h;u++){const x=a[u];l+=x}return l}}class Ci{static floatToIntBits(a){return a}}Ci.MAX_VALUE=Number.MAX_SAFE_INTEGER;class He{constructor(a,l){this.x=a,this.y=l}getX(){return this.x}getY(){return this.y}equals(a){if(a instanceof He){const l=a;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*Ci.floatToIntBits(this.x)+Ci.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(a){const l=this.distance(a[0],a[1]),u=this.distance(a[1],a[2]),h=this.distance(a[0],a[2]);let x,y,E;if(u>=l&&u>=h?(y=a[0],x=a[1],E=a[2]):h>=u&&h>=l?(y=a[1],x=a[0],E=a[2]):(y=a[2],x=a[0],E=a[1]),this.crossProductZ(x,y,E)<0){const _=x;x=E,E=_}a[0]=x,a[1]=y,a[2]=E}static distance(a,l){return At.distance(a.x,a.y,l.x,l.y)}static crossProductZ(a,l,u){const h=l.x,x=l.y;return(u.x-h)*(a.y-x)-(u.y-x)*(a.x-h)}}class ha{constructor(a,l){this.bits=a,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class Ne extends ha{constructor(a,l,u,h,x){super(a,l),this.compact=u,this.nbDatablocks=h,this.nbLayers=x}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ut{constructor(a,l,u,h){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),l==null&&(l=ut.INIT_SIZE),u==null&&(u=a.getWidth()/2|0),h==null&&(h=a.getHeight()/2|0);const x=l/2|0;if(this.leftInit=u-x,this.rightInit=u+x,this.upInit=h-x,this.downInit=h+x,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}detect(){let a=this.leftInit,l=this.rightInit,u=this.upInit,h=this.downInit,x=!1,y=!0,E=!1,_=!1,T=!1,D=!1,F=!1;const $=this.width,G=this.height;for(;y;){y=!1;let Q=!0;for(;(Q||!_)&&l<$;)Q=this.containsBlackPoint(u,h,l,!1),Q?(l++,y=!0,_=!0):_||l++;if(l>=$){x=!0;break}let te=!0;for(;(te||!T)&&h<G;)te=this.containsBlackPoint(a,l,h,!0),te?(h++,y=!0,T=!0):T||h++;if(h>=G){x=!0;break}let oe=!0;for(;(oe||!D)&&a>=0;)oe=this.containsBlackPoint(u,h,a,!1),oe?(a--,y=!0,D=!0):D||a--;if(a<0){x=!0;break}let ge=!0;for(;(ge||!F)&&u>=0;)ge=this.containsBlackPoint(a,l,u,!0),ge?(u--,y=!0,F=!0):F||u--;if(u<0){x=!0;break}y&&(E=!0)}if(!x&&E){const Q=l-a;let te=null;for(let Me=1;te===null&&Me<Q;Me++)te=this.getBlackPointOnSegment(a,h-Me,a+Me,h);if(te==null)throw new re;let oe=null;for(let Me=1;oe===null&&Me<Q;Me++)oe=this.getBlackPointOnSegment(a,u+Me,a+Me,u);if(oe==null)throw new re;let ge=null;for(let Me=1;ge===null&&Me<Q;Me++)ge=this.getBlackPointOnSegment(l,u+Me,l-Me,u);if(ge==null)throw new re;let Re=null;for(let Me=1;Re===null&&Me<Q;Me++)Re=this.getBlackPointOnSegment(l,h-Me,l-Me,h);if(Re==null)throw new re;return this.centerEdges(Re,te,ge,oe)}else throw new re}getBlackPointOnSegment(a,l,u,h){const x=At.round(At.distance(a,l,u,h)),y=(u-a)/x,E=(h-l)/x,_=this.image;for(let T=0;T<x;T++){const D=At.round(a+T*y),F=At.round(l+T*E);if(_.get(D,F))return new He(D,F)}return null}centerEdges(a,l,u,h){const x=a.getX(),y=a.getY(),E=l.getX(),_=l.getY(),T=u.getX(),D=u.getY(),F=h.getX(),$=h.getY(),G=ut.CORR;return x<this.width/2?[new He(F-G,$+G),new He(E+G,_+G),new He(T-G,D-G),new He(x+G,y-G)]:[new He(F+G,$+G),new He(E+G,_-G),new He(T-G,D+G),new He(x-G,y-G)]}containsBlackPoint(a,l,u,h){const x=this.image;if(h){for(let y=a;y<=l;y++)if(x.get(y,u))return!0}else for(let y=a;y<=l;y++)if(x.get(u,y))return!0;return!1}}ut.INIT_SIZE=10,ut.CORR=1;class Jt{static checkAndNudgePoints(a,l){const u=a.getWidth(),h=a.getHeight();let x=!0;for(let y=0;y<l.length&&x;y+=2){const E=Math.floor(l[y]),_=Math.floor(l[y+1]);if(E<-1||E>u||_<-1||_>h)throw new re;x=!1,E===-1?(l[y]=0,x=!0):E===u&&(l[y]=u-1,x=!0),_===-1?(l[y+1]=0,x=!0):_===h&&(l[y+1]=h-1,x=!0)}x=!0;for(let y=l.length-2;y>=0&&x;y-=2){const E=Math.floor(l[y]),_=Math.floor(l[y+1]);if(E<-1||E>u||_<-1||_>h)throw new re;x=!1,E===-1?(l[y]=0,x=!0):E===u&&(l[y]=u-1,x=!0),_===-1?(l[y+1]=0,x=!0):_===h&&(l[y+1]=h-1,x=!0)}}}class Dt{constructor(a,l,u,h,x,y,E,_,T){this.a11=a,this.a21=l,this.a31=u,this.a12=h,this.a22=x,this.a32=y,this.a13=E,this.a23=_,this.a33=T}static quadrilateralToQuadrilateral(a,l,u,h,x,y,E,_,T,D,F,$,G,Q,te,oe){const ge=Dt.quadrilateralToSquare(a,l,u,h,x,y,E,_);return Dt.squareToQuadrilateral(T,D,F,$,G,Q,te,oe).times(ge)}transformPoints(a){const l=a.length,u=this.a11,h=this.a12,x=this.a13,y=this.a21,E=this.a22,_=this.a23,T=this.a31,D=this.a32,F=this.a33;for(let $=0;$<l;$+=2){const G=a[$],Q=a[$+1],te=x*G+_*Q+F;a[$]=(u*G+y*Q+T)/te,a[$+1]=(h*G+E*Q+D)/te}}transformPointsWithValues(a,l){const u=this.a11,h=this.a12,x=this.a13,y=this.a21,E=this.a22,_=this.a23,T=this.a31,D=this.a32,F=this.a33,$=a.length;for(let G=0;G<$;G++){const Q=a[G],te=l[G],oe=x*Q+_*te+F;a[G]=(u*Q+y*te+T)/oe,l[G]=(h*Q+E*te+D)/oe}}static squareToQuadrilateral(a,l,u,h,x,y,E,_){const T=a-u+x-E,D=l-h+y-_;if(T===0&&D===0)return new Dt(u-a,x-u,a,h-l,y-h,l,0,0,1);{const F=u-x,$=E-x,G=h-y,Q=_-y,te=F*Q-$*G,oe=(T*Q-$*D)/te,ge=(F*D-T*G)/te;return new Dt(u-a+oe*u,E-a+ge*E,a,h-l+oe*h,_-l+ge*_,l,oe,ge,1)}}static quadrilateralToSquare(a,l,u,h,x,y,E,_){return Dt.squareToQuadrilateral(a,l,u,h,x,y,E,_).buildAdjoint()}buildAdjoint(){return new Dt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(a){return new Dt(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}class Ht extends Jt{sampleGrid(a,l,u,h,x,y,E,_,T,D,F,$,G,Q,te,oe,ge,Re,Me){const Te=Dt.quadrilateralToQuadrilateral(h,x,y,E,_,T,D,F,$,G,Q,te,oe,ge,Re,Me);return this.sampleGridWithTransform(a,l,u,Te)}sampleGridWithTransform(a,l,u,h){if(l<=0||u<=0)throw new re;const x=new Ce(l,u),y=new Float32Array(2*l);for(let E=0;E<u;E++){const _=y.length,T=E+.5;for(let D=0;D<_;D+=2)y[D]=D/2+.5,y[D+1]=T;h.transformPoints(y),Jt.checkAndNudgePoints(a,y);try{for(let D=0;D<_;D+=2)a.get(Math.floor(y[D]),Math.floor(y[D+1]))&&x.set(D/2,E)}catch{throw new re}}return x}}class Ot{static setGridSampler(a){Ot.gridSampler=a}static getInstance(){return Ot.gridSampler}}Ot.gridSampler=new Ht;class wr{constructor(a,l){this.x=a,this.y=l}toResultPoint(){return new He(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ai{constructor(a){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=a}detect(){return this.detectMirror(!1)}detectMirror(a){let l=this.getMatrixCenter(),u=this.getBullsEyeCorners(l);if(a){let y=u[0];u[0]=u[2],u[2]=y}this.extractParameters(u);let h=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),x=this.getMatrixCornerPoints(u);return new Ne(h,x,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(a){if(!this.isValidPoint(a[0])||!this.isValidPoint(a[1])||!this.isValidPoint(a[2])||!this.isValidPoint(a[3]))throw new re;let l=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(a[0],a[1],l),this.sampleLine(a[1],a[2],l),this.sampleLine(a[2],a[3],l),this.sampleLine(a[3],a[0],l)]);this.shift=this.getRotation(u,l);let h=0;for(let y=0;y<4;y++){let E=u[(this.shift+y)%4];this.compact?(h<<=7,h+=E>>1&127):(h<<=10,h+=(E>>2&992)+(E>>1&31))}let x=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(x>>6)+1,this.nbDataBlocks=(x&63)+1):(this.nbLayers=(x>>11)+1,this.nbDataBlocks=(x&2047)+1)}getRotation(a,l){let u=0;a.forEach((h,x,y)=>{let E=(h>>l-2<<1)+(h&1);u=(u<<3)+E}),u=((u&1)<<11)+(u>>1);for(let h=0;h<4;h++)if(R.bitCount(u^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new re}getCorrectedParameterData(a,l){let u,h;l?(u=7,h=2):(u=10,h=4);let x=u-h,y=new Int32Array(u);for(let _=u-1;_>=0;--_)y[_]=a&15,a>>=4;try{new Ft(Be.AZTEC_PARAM).decode(y,x)}catch{throw new re}let E=0;for(let _=0;_<h;_++)E=(E<<4)+y[_];return E}getBullsEyeCorners(a){let l=a,u=a,h=a,x=a,y=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let F=this.getFirstDifferent(l,y,1,-1),$=this.getFirstDifferent(u,y,1,1),G=this.getFirstDifferent(h,y,-1,1),Q=this.getFirstDifferent(x,y,-1,-1);if(this.nbCenterLayers>2){let te=this.distancePoint(Q,F)*this.nbCenterLayers/(this.distancePoint(x,l)*(this.nbCenterLayers+2));if(te<.75||te>1.25||!this.isWhiteOrBlackRectangle(F,$,G,Q))break}l=F,u=$,h=G,x=Q,y=!y}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;let E=new He(l.getX()+.5,l.getY()-.5),_=new He(u.getX()+.5,u.getY()+.5),T=new He(h.getX()-.5,h.getY()+.5),D=new He(x.getX()-.5,x.getY()-.5);return this.expandSquare([E,_,T,D],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let a,l,u,h;try{let E=new ut(this.image).detect();a=E[0],l=E[1],u=E[2],h=E[3]}catch{let _=this.image.getWidth()/2,T=this.image.getHeight()/2;a=this.getFirstDifferent(new wr(_+7,T-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new wr(_+7,T+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new wr(_-7,T+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new wr(_-7,T-7),!1,-1,-1).toResultPoint()}let x=At.round((a.getX()+h.getX()+l.getX()+u.getX())/4),y=At.round((a.getY()+h.getY()+l.getY()+u.getY())/4);try{let E=new ut(this.image,15,x,y).detect();a=E[0],l=E[1],u=E[2],h=E[3]}catch{a=this.getFirstDifferent(new wr(x+7,y-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new wr(x+7,y+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new wr(x-7,y+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new wr(x-7,y-7),!1,-1,-1).toResultPoint()}return x=At.round((a.getX()+h.getX()+l.getX()+u.getX())/4),y=At.round((a.getY()+h.getY()+l.getY()+u.getY())/4),new wr(x,y)}getMatrixCornerPoints(a){return this.expandSquare(a,2*this.nbCenterLayers,this.getDimension())}sampleGrid(a,l,u,h,x){let y=Ot.getInstance(),E=this.getDimension(),_=E/2-this.nbCenterLayers,T=E/2+this.nbCenterLayers;return y.sampleGrid(a,E,E,_,_,T,_,T,T,_,T,l.getX(),l.getY(),u.getX(),u.getY(),h.getX(),h.getY(),x.getX(),x.getY())}sampleLine(a,l,u){let h=0,x=this.distanceResultPoint(a,l),y=x/u,E=a.getX(),_=a.getY(),T=y*(l.getX()-a.getX())/x,D=y*(l.getY()-a.getY())/x;for(let F=0;F<u;F++)this.image.get(At.round(E+F*T),At.round(_+F*D))&&(h|=1<<u-F-1);return h}isWhiteOrBlackRectangle(a,l,u,h){let x=3;a=new wr(a.getX()-x,a.getY()+x),l=new wr(l.getX()-x,l.getY()-x),u=new wr(u.getX()+x,u.getY()-x),h=new wr(h.getX()+x,h.getY()+x);let y=this.getColor(h,a);if(y===0)return!1;let E=this.getColor(a,l);return E!==y||(E=this.getColor(l,u),E!==y)?!1:(E=this.getColor(u,h),E===y)}getColor(a,l){let u=this.distancePoint(a,l),h=(l.getX()-a.getX())/u,x=(l.getY()-a.getY())/u,y=0,E=a.getX(),_=a.getY(),T=this.image.get(a.getX(),a.getY()),D=Math.ceil(u);for(let $=0;$<D;$++)E+=h,_+=x,this.image.get(At.round(E),At.round(_))!==T&&y++;let F=y/u;return F>.1&&F<.9?0:F<=.1===T?1:-1}getFirstDifferent(a,l,u,h){let x=a.getX()+u,y=a.getY()+h;for(;this.isValid(x,y)&&this.image.get(x,y)===l;)x+=u,y+=h;for(x-=u,y-=h;this.isValid(x,y)&&this.image.get(x,y)===l;)x+=u;for(x-=u;this.isValid(x,y)&&this.image.get(x,y)===l;)y+=h;return y-=h,new wr(x,y)}expandSquare(a,l,u){let h=u/(2*l),x=a[0].getX()-a[2].getX(),y=a[0].getY()-a[2].getY(),E=(a[0].getX()+a[2].getX())/2,_=(a[0].getY()+a[2].getY())/2,T=new He(E+h*x,_+h*y),D=new He(E-h*x,_-h*y);x=a[1].getX()-a[3].getX(),y=a[1].getY()-a[3].getY(),E=(a[1].getX()+a[3].getX())/2,_=(a[1].getY()+a[3].getY())/2;let F=new He(E+h*x,_+h*y),$=new He(E-h*x,_-h*y);return[T,F,D,$]}isValid(a,l){return a>=0&&a<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(a){let l=At.round(a.getX()),u=At.round(a.getY());return this.isValid(l,u)}distancePoint(a,l){return At.distance(a.getX(),a.getY(),l.getX(),l.getY())}distanceResultPoint(a,l){return At.distance(a.getX(),a.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(R.truncDivision(this.nbLayers-4,8)+1)+15}}class $n{decode(a,l=null){let u=null,h=new Ai(a.getBlackMatrix()),x=null,y=null;try{let D=h.detectMirror(!1);x=D.getPoints(),this.reportFoundResultPoints(l,x),y=new Ct().decode(D)}catch(D){u=D}if(y==null)try{let D=h.detectMirror(!0);x=D.getPoints(),this.reportFoundResultPoints(l,x),y=new Ct().decode(D)}catch(D){throw u??D}let E=new Ue(y.getText(),y.getRawBytes(),y.getNumBits(),x,Z.AZTEC,I.currentTimeMillis()),_=y.getByteSegments();_!=null&&E.putMetadata(fe.BYTE_SEGMENTS,_);let T=y.getECLevel();return T!=null&&E.putMetadata(fe.ERROR_CORRECTION_LEVEL,T),E}reportFoundResultPoints(a,l){if(a!=null){let u=a.get(V.NEED_RESULT_POINT_CALLBACK);u!=null&&l.forEach((h,x,y)=>{u.foundPossibleResultPoint(h)})}}reset(){}}class Wn extends $e{constructor(a=500){super(new $n,a)}}class er{decode(a,l){try{return this.doDecode(a,l)}catch{if(l&&l.get(V.TRY_HARDER)===!0&&a.isRotateSupported()){const x=a.rotateCounterClockwise(),y=this.doDecode(x,l),E=y.getResultMetadata();let _=270;E!==null&&E.get(fe.ORIENTATION)===!0&&(_=_+E.get(fe.ORIENTATION)%360),y.putMetadata(fe.ORIENTATION,_);const T=y.getResultPoints();if(T!==null){const D=x.getHeight();for(let F=0;F<T.length;F++)T[F]=new He(D-T[F].getY()-1,T[F].getX())}return y}else throw new re}}reset(){}doDecode(a,l){const u=a.getWidth(),h=a.getHeight();let x=new U(u);const y=l&&l.get(V.TRY_HARDER)===!0,E=Math.max(1,h>>(y?8:5));let _;y?_=h:_=15;const T=Math.trunc(h/2);for(let D=0;D<_;D++){const F=Math.trunc((D+1)/2),$=(D&1)===0,G=T+E*($?F:-F);if(G<0||G>=h)break;try{x=a.getBlackRow(G,x)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(x.reverse(),l&&l.get(V.NEED_RESULT_POINT_CALLBACK)===!0)){const te=new Map;l.forEach((oe,ge)=>te.set(ge,oe)),te.delete(V.NEED_RESULT_POINT_CALLBACK),l=te}try{const te=this.decodeRow(G,x,l);if(Q===1){te.putMetadata(fe.ORIENTATION,180);const oe=te.getResultPoints();oe!==null&&(oe[0]=new He(u-oe[0].getX()-1,oe[0].getY()),oe[1]=new He(u-oe[1].getX()-1,oe[1].getY()))}return te}catch{}}}throw new re}static recordPattern(a,l,u){const h=u.length;for(let T=0;T<h;T++)u[T]=0;const x=a.getSize();if(l>=x)throw new re;let y=!a.get(l),E=0,_=l;for(;_<x;){if(a.get(_)!==y)u[E]++;else{if(++E===h)break;u[E]=1,y=!y}_++}if(!(E===h||E===h-1&&_===x))throw new re}static recordPatternInReverse(a,l,u){let h=u.length,x=a.get(l);for(;l>0&&h>=0;)a.get(--l)!==x&&(h--,x=!x);if(h>=0)throw new re;er.recordPattern(a,l+1,u)}static patternMatchVariance(a,l,u){const h=a.length;let x=0,y=0;for(let T=0;T<h;T++)x+=a[T],y+=l[T];if(x<y)return Number.POSITIVE_INFINITY;const E=x/y;u*=E;let _=0;for(let T=0;T<h;T++){const D=a[T],F=l[T]*E,$=D>F?D-F:F-D;if($>u)return Number.POSITIVE_INFINITY;_+=$}return _/x}}class Fe extends er{static findStartPattern(a){const l=a.getSize(),u=a.getNextSet(0);let h=0,x=Int32Array.from([0,0,0,0,0,0]),y=u,E=!1;const _=6;for(let T=u;T<l;T++)if(a.get(T)!==E)x[h]++;else{if(h===_-1){let D=Fe.MAX_AVG_VARIANCE,F=-1;for(let $=Fe.CODE_START_A;$<=Fe.CODE_START_C;$++){const G=er.patternMatchVariance(x,Fe.CODE_PATTERNS[$],Fe.MAX_INDIVIDUAL_VARIANCE);G<D&&(D=G,F=$)}if(F>=0&&a.isRange(Math.max(0,y-(T-y)/2),y,!1))return Int32Array.from([y,T,F]);y+=x[0]+x[1],x=x.slice(2,x.length-1),x[h-1]=0,x[h]=0,h--}else h++;x[h]=1,E=!E}throw new re}static decodeCode(a,l,u){er.recordPattern(a,u,l);let h=Fe.MAX_AVG_VARIANCE,x=-1;for(let y=0;y<Fe.CODE_PATTERNS.length;y++){const E=Fe.CODE_PATTERNS[y],_=this.patternMatchVariance(l,E,Fe.MAX_INDIVIDUAL_VARIANCE);_<h&&(h=_,x=y)}if(x>=0)return x;throw new re}decodeRow(a,l,u){const h=u&&u.get(V.ASSUME_GS1)===!0,x=Fe.findStartPattern(l),y=x[2];let E=0;const _=new Uint8Array(20);_[E++]=y;let T;switch(y){case Fe.CODE_START_A:T=Fe.CODE_CODE_A;break;case Fe.CODE_START_B:T=Fe.CODE_CODE_B;break;case Fe.CODE_START_C:T=Fe.CODE_CODE_C;break;default:throw new H}let D=!1,F=!1,$="",G=x[0],Q=x[1];const te=Int32Array.from([0,0,0,0,0,0]);let oe=0,ge=0,Re=y,Me=0,Te=!0,Nt=!1,wt=!1;for(;!D;){const va=F;switch(F=!1,oe=ge,ge=Fe.decodeCode(l,te,Q),_[E++]=ge,ge!==Fe.CODE_STOP&&(Te=!0),ge!==Fe.CODE_STOP&&(Me++,Re+=Me*ge),G=Q,Q+=te.reduce((Xs,hu)=>Xs+hu,0),ge){case Fe.CODE_START_A:case Fe.CODE_START_B:case Fe.CODE_START_C:throw new H}switch(T){case Fe.CODE_CODE_A:if(ge<64)wt===Nt?$+=String.fromCharCode(32+ge):$+=String.fromCharCode(32+ge+128),wt=!1;else if(ge<96)wt===Nt?$+=String.fromCharCode(ge-64):$+=String.fromCharCode(ge+64),wt=!1;else switch(ge!==Fe.CODE_STOP&&(Te=!1),ge){case Fe.CODE_FNC_1:h&&($.length===0?$+="]C1":$+="");break;case Fe.CODE_FNC_2:case Fe.CODE_FNC_3:break;case Fe.CODE_FNC_4_A:!Nt&&wt?(Nt=!0,wt=!1):Nt&&wt?(Nt=!1,wt=!1):wt=!0;break;case Fe.CODE_SHIFT:F=!0,T=Fe.CODE_CODE_B;break;case Fe.CODE_CODE_B:T=Fe.CODE_CODE_B;break;case Fe.CODE_CODE_C:T=Fe.CODE_CODE_C;break;case Fe.CODE_STOP:D=!0;break}break;case Fe.CODE_CODE_B:if(ge<96)wt===Nt?$+=String.fromCharCode(32+ge):$+=String.fromCharCode(32+ge+128),wt=!1;else switch(ge!==Fe.CODE_STOP&&(Te=!1),ge){case Fe.CODE_FNC_1:h&&($.length===0?$+="]C1":$+="");break;case Fe.CODE_FNC_2:case Fe.CODE_FNC_3:break;case Fe.CODE_FNC_4_B:!Nt&&wt?(Nt=!0,wt=!1):Nt&&wt?(Nt=!1,wt=!1):wt=!0;break;case Fe.CODE_SHIFT:F=!0,T=Fe.CODE_CODE_A;break;case Fe.CODE_CODE_A:T=Fe.CODE_CODE_A;break;case Fe.CODE_CODE_C:T=Fe.CODE_CODE_C;break;case Fe.CODE_STOP:D=!0;break}break;case Fe.CODE_CODE_C:if(ge<100)ge<10&&($+="0"),$+=ge;else switch(ge!==Fe.CODE_STOP&&(Te=!1),ge){case Fe.CODE_FNC_1:h&&($.length===0?$+="]C1":$+="");break;case Fe.CODE_CODE_A:T=Fe.CODE_CODE_A;break;case Fe.CODE_CODE_B:T=Fe.CODE_CODE_B;break;case Fe.CODE_STOP:D=!0;break}break}va&&(T=T===Fe.CODE_CODE_A?Fe.CODE_CODE_B:Fe.CODE_CODE_A)}const Gn=Q-G;if(Q=l.getNextUnset(Q),!l.isRange(Q,Math.min(l.getSize(),Q+(Q-G)/2),!1))throw new re;if(Re-=Me*oe,Re%103!==oe)throw new A;const ki=$.length;if(ki===0)throw new re;ki>0&&Te&&(T===Fe.CODE_CODE_C?$=$.substring(0,ki-2):$=$.substring(0,ki-1));const Gr=(x[1]+x[0])/2,Wt=G+Gn/2,Pr=_.length,Rn=new Uint8Array(Pr);for(let va=0;va<Pr;va++)Rn[va]=_[va];const as=[new He(Gr,a),new He(Wt,a)];return new Ue($,Rn,0,as,Z.CODE_128,new Date().getTime())}}Fe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Fe.MAX_AVG_VARIANCE=.25,Fe.MAX_INDIVIDUAL_VARIANCE=.7,Fe.CODE_SHIFT=98,Fe.CODE_CODE_C=99,Fe.CODE_CODE_B=100,Fe.CODE_CODE_A=101,Fe.CODE_FNC_1=102,Fe.CODE_FNC_2=97,Fe.CODE_FNC_3=96,Fe.CODE_FNC_4_A=101,Fe.CODE_FNC_4_B=100,Fe.CODE_START_A=103,Fe.CODE_START_B=104,Fe.CODE_START_C=105,Fe.CODE_STOP=106;class mr extends er{constructor(a=!1,l=!1){super(),this.usingCheckDigit=a,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,l,u){let h=this.counters;h.fill(0),this.decodeRowResult="";let x=mr.findAsteriskPattern(l,h),y=l.getNextSet(x[1]),E=l.getSize(),_,T;do{mr.recordPattern(l,y,h);let te=mr.toNarrowWidePattern(h);if(te<0)throw new re;_=mr.patternToChar(te),this.decodeRowResult+=_,T=y;for(let oe of h)y+=oe;y=l.getNextSet(y)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let D=0;for(let te of h)D+=te;let F=y-T-D;if(y!==E&&F*2<D)throw new re;if(this.usingCheckDigit){let te=this.decodeRowResult.length-1,oe=0;for(let ge=0;ge<te;ge++)oe+=mr.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ge));if(this.decodeRowResult.charAt(te)!==mr.ALPHABET_STRING.charAt(oe%43))throw new A;this.decodeRowResult=this.decodeRowResult.substring(0,te)}if(this.decodeRowResult.length===0)throw new re;let $;this.extendedMode?$=mr.decodeExtended(this.decodeRowResult):$=this.decodeRowResult;let G=(x[1]+x[0])/2,Q=T+D/2;return new Ue($,null,0,[new He(G,a),new He(Q,a)],Z.CODE_39,new Date().getTime())}static findAsteriskPattern(a,l){let u=a.getSize(),h=a.getNextSet(0),x=0,y=h,E=!1,_=l.length;for(let T=h;T<u;T++)if(a.get(T)!==E)l[x]++;else{if(x===_-1){if(this.toNarrowWidePattern(l)===mr.ASTERISK_ENCODING&&a.isRange(Math.max(0,y-Math.floor((T-y)/2)),y,!1))return[y,T];y+=l[0]+l[1],l.copyWithin(0,2,2+x-1),l[x-1]=0,l[x]=0,x--}else x++;l[x]=1,E=!E}throw new re}static toNarrowWidePattern(a){let l=a.length,u=0,h;do{let x=2147483647;for(let _ of a)_<x&&_>u&&(x=_);u=x,h=0;let y=0,E=0;for(let _=0;_<l;_++){let T=a[_];T>u&&(E|=1<<l-1-_,h++,y+=T)}if(h===3){for(let _=0;_<l&&h>0;_++){let T=a[_];if(T>u&&(h--,T*2>=y))return-1}return E}}while(h>3);return-1}static patternToChar(a){for(let l=0;l<mr.CHARACTER_ENCODINGS.length;l++)if(mr.CHARACTER_ENCODINGS[l]===a)return mr.ALPHABET_STRING.charAt(l);if(a===mr.ASTERISK_ENCODING)return"*";throw new re}static decodeExtended(a){let l=a.length,u="";for(let h=0;h<l;h++){let x=a.charAt(h);if(x==="+"||x==="$"||x==="%"||x==="/"){let y=a.charAt(h+1),E="\0";switch(x){case"+":if(y>="A"&&y<="Z")E=String.fromCharCode(y.charCodeAt(0)+32);else throw new H;break;case"$":if(y>="A"&&y<="Z")E=String.fromCharCode(y.charCodeAt(0)-64);else throw new H;break;case"%":if(y>="A"&&y<="E")E=String.fromCharCode(y.charCodeAt(0)-38);else if(y>="F"&&y<="J")E=String.fromCharCode(y.charCodeAt(0)-11);else if(y>="K"&&y<="O")E=String.fromCharCode(y.charCodeAt(0)+16);else if(y>="P"&&y<="T")E=String.fromCharCode(y.charCodeAt(0)+43);else if(y==="U")E="\0";else if(y==="V")E="@";else if(y==="W")E="`";else if(y==="X"||y==="Y"||y==="Z")E="";else throw new H;break;case"/":if(y>="A"&&y<="O")E=String.fromCharCode(y.charCodeAt(0)-32);else if(y==="Z")E=":";else throw new H;break}u+=E,h++}else u+=x}return u}}mr.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",mr.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],mr.ASTERISK_ENCODING=148;class jt extends er{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(a,l,u){let h=this.decodeStart(l),x=this.decodeEnd(l),y=new be;jt.decodeMiddle(l,h[1],x[0],y);let E=y.toString(),_=null;u!=null&&(_=u.get(V.ALLOWED_LENGTHS)),_==null&&(_=jt.DEFAULT_ALLOWED_LENGTHS);let T=E.length,D=!1,F=0;for(let Q of _){if(T===Q){D=!0;break}Q>F&&(F=Q)}if(!D&&T>F&&(D=!0),!D)throw new H;const $=[new He(h[1],a),new He(x[0],a)];return new Ue(E,null,0,$,Z.ITF,new Date().getTime())}static decodeMiddle(a,l,u,h){let x=new Int32Array(10),y=new Int32Array(5),E=new Int32Array(5);for(x.fill(0),y.fill(0),E.fill(0);l<u;){er.recordPattern(a,l,x);for(let T=0;T<5;T++){let D=2*T;y[T]=x[D],E[T]=x[D+1]}let _=jt.decodeDigit(y);h.append(_.toString()),_=this.decodeDigit(E),h.append(_.toString()),x.forEach(function(T){l+=T})}}decodeStart(a){let l=jt.skipWhiteSpace(a),u=jt.findGuardPattern(a,l,jt.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(a,u[0]),u}validateQuietZone(a,l){let u=this.narrowLineWidth*10;u=u<l?u:l;for(let h=l-1;u>0&&h>=0&&!a.get(h);h--)u--;if(u!==0)throw new re}static skipWhiteSpace(a){const l=a.getSize(),u=a.getNextSet(0);if(u===l)throw new re;return u}decodeEnd(a){a.reverse();try{let l=jt.skipWhiteSpace(a),u;try{u=jt.findGuardPattern(a,l,jt.END_PATTERN_REVERSED[0])}catch(x){x instanceof re&&(u=jt.findGuardPattern(a,l,jt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,u[0]);let h=u[0];return u[0]=a.getSize()-u[1],u[1]=a.getSize()-h,u}finally{a.reverse()}}static findGuardPattern(a,l,u){let h=u.length,x=new Int32Array(h),y=a.getSize(),E=!1,_=0,T=l;x.fill(0);for(let D=l;D<y;D++)if(a.get(D)!==E)x[_]++;else{if(_===h-1){if(er.patternMatchVariance(x,u,jt.MAX_INDIVIDUAL_VARIANCE)<jt.MAX_AVG_VARIANCE)return[T,D];T+=x[0]+x[1],I.arraycopy(x,2,x,0,_-1),x[_-1]=0,x[_]=0,_--}else _++;x[_]=1,E=!E}throw new re}static decodeDigit(a){let l=jt.MAX_AVG_VARIANCE,u=-1,h=jt.PATTERNS.length;for(let x=0;x<h;x++){let y=jt.PATTERNS[x],E=er.patternMatchVariance(a,y,jt.MAX_INDIVIDUAL_VARIANCE);E<l?(l=E,u=x):E===l&&(u=-1)}if(u>=0)return u%10;throw new re}}jt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],jt.MAX_AVG_VARIANCE=.38,jt.MAX_INDIVIDUAL_VARIANCE=.5,jt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],jt.START_PATTERN=Int32Array.from([1,1,1,1]),jt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class qt extends er{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(a){let l=!1,u,h=0,x=Int32Array.from([0,0,0]);for(;!l;){x=Int32Array.from([0,0,0]),u=qt.findGuardPattern(a,h,!1,this.START_END_PATTERN,x);let y=u[0];h=u[1];let E=y-(h-y);E>=0&&(l=a.isRange(E,y,!1))}return u}static checkChecksum(a){return qt.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let l=a.length;if(l===0)return!1;let u=parseInt(a.charAt(l-1),10);return qt.getStandardUPCEANChecksum(a.substring(0,l-1))===u}static getStandardUPCEANChecksum(a){let l=a.length,u=0;for(let h=l-1;h>=0;h-=2){let x=a.charAt(h).charCodeAt(0)-48;if(x<0||x>9)throw new H;u+=x}u*=3;for(let h=l-2;h>=0;h-=2){let x=a.charAt(h).charCodeAt(0)-48;if(x<0||x>9)throw new H;u+=x}return(1e3-u)%10}static decodeEnd(a,l){return qt.findGuardPattern(a,l,!1,qt.START_END_PATTERN,new Int32Array(qt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(a,l,u,h){return this.findGuardPattern(a,l,u,h,new Int32Array(h.length))}static findGuardPattern(a,l,u,h,x){let y=a.getSize();l=u?a.getNextUnset(l):a.getNextSet(l);let E=0,_=l,T=h.length,D=u;for(let F=l;F<y;F++)if(a.get(F)!==D)x[E]++;else{if(E===T-1){if(er.patternMatchVariance(x,h,qt.MAX_INDIVIDUAL_VARIANCE)<qt.MAX_AVG_VARIANCE)return Int32Array.from([_,F]);_+=x[0]+x[1];let $=x.slice(2,x.length-1);for(let G=0;G<E-1;G++)x[G]=$[G];x[E-1]=0,x[E]=0,E--}else E++;x[E]=1,D=!D}throw new re}static decodeDigit(a,l,u,h){this.recordPattern(a,u,l);let x=this.MAX_AVG_VARIANCE,y=-1,E=h.length;for(let _=0;_<E;_++){let T=h[_],D=er.patternMatchVariance(l,T,qt.MAX_INDIVIDUAL_VARIANCE);D<x&&(x=D,y=_)}if(y>=0)return y;throw new re}}qt.MAX_AVG_VARIANCE=.48,qt.MAX_INDIVIDUAL_VARIANCE=.7,qt.START_END_PATTERN=Int32Array.from([1,1,1]),qt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),qt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),qt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Vn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,l,u){let h=this.decodeRowStringBuffer,x=this.decodeMiddle(l,u,h),y=h.toString(),E=Vn.parseExtensionString(y),_=[new He((u[0]+u[1])/2,a),new He(x,a)],T=new Ue(y,null,0,_,Z.UPC_EAN_EXTENSION,new Date().getTime());return E!=null&&T.putAllMetadata(E),T}decodeMiddle(a,l,u){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let x=a.getSize(),y=l[1],E=0;for(let T=0;T<5&&y<x;T++){let D=qt.decodeDigit(a,h,y,qt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+D%10);for(let F of h)y+=F;D>=10&&(E|=1<<4-T),T!==4&&(y=a.getNextSet(y),y=a.getNextUnset(y))}if(u.length!==5)throw new re;let _=this.determineCheckDigit(E);if(Vn.extensionChecksum(u.toString())!==_)throw new re;return y}static extensionChecksum(a){let l=a.length,u=0;for(let h=l-2;h>=0;h-=2)u+=a.charAt(h).charCodeAt(0)-48;u*=3;for(let h=l-1;h>=0;h-=2)u+=a.charAt(h).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(a){for(let l=0;l<10;l++)if(a===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new re}static parseExtensionString(a){if(a.length!==5)return null;let l=Vn.parseExtension5String(a);return l==null?null:new Map([[fe.SUGGESTED_PRICE,l]])}static parseExtension5String(a){let l;switch(a.charAt(0)){case"0":l="";break;case"5":l="$";break;case"9":switch(a){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let u=parseInt(a.substring(1)),h=(u/100).toString(),x=u%100,y=x<10?"0"+x:x.toString();return l+h+"."+y}}class pa{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,l,u){let h=this.decodeRowStringBuffer,x=this.decodeMiddle(l,u,h),y=h.toString(),E=pa.parseExtensionString(y),_=[new He((u[0]+u[1])/2,a),new He(x,a)],T=new Ue(y,null,0,_,Z.UPC_EAN_EXTENSION,new Date().getTime());return E!=null&&T.putAllMetadata(E),T}decodeMiddle(a,l,u){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let x=a.getSize(),y=l[1],E=0;for(let _=0;_<2&&y<x;_++){let T=qt.decodeDigit(a,h,y,qt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+T%10);for(let D of h)y+=D;T>=10&&(E|=1<<1-_),_!==1&&(y=a.getNextSet(y),y=a.getNextUnset(y))}if(u.length!==2)throw new re;if(parseInt(u.toString())%4!==E)throw new re;return y}static parseExtensionString(a){return a.length!==2?null:new Map([[fe.ISSUE_NUMBER,parseInt(a)]])}}class vt{static decodeRow(a,l,u){let h=qt.findGuardPattern(l,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Vn().decodeRow(a,l,h)}catch{return new pa().decodeRow(a,l,h)}}}vt.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class qe extends qt{constructor(){super(),this.decodeRowStringBuffer="",qe.L_AND_G_PATTERNS=qe.L_PATTERNS.map(a=>Int32Array.from(a));for(let a=10;a<20;a++){let l=qe.L_PATTERNS[a-10],u=new Int32Array(l.length);for(let h=0;h<l.length;h++)u[h]=l[l.length-h-1];qe.L_AND_G_PATTERNS[a]=u}}decodeRow(a,l,u){let h=qe.findStartGuardPattern(l),x=u==null?null:u.get(V.NEED_RESULT_POINT_CALLBACK);if(x!=null){const Te=new He((h[0]+h[1])/2,a);x.foundPossibleResultPoint(Te)}let y=this.decodeMiddle(l,h,this.decodeRowStringBuffer),E=y.rowOffset,_=y.resultString;if(x!=null){const Te=new He(E,a);x.foundPossibleResultPoint(Te)}let T=this.decodeEnd(l,E);if(x!=null){const Te=new He((T[0]+T[1])/2,a);x.foundPossibleResultPoint(Te)}let D=T[1],F=D+(D-T[0]);if(F>=l.getSize()||!l.isRange(D,F,!1))throw new re;let $=_.toString();if($.length<8)throw new H;if(!qe.checkChecksum($))throw new A;let G=(h[1]+h[0])/2,Q=(T[1]+T[0])/2,te=this.getBarcodeFormat(),oe=[new He(G,a),new He(Q,a)],ge=new Ue($,null,0,oe,te,new Date().getTime()),Re=0;try{let Te=vt.decodeRow(a,l,T[1]);ge.putMetadata(fe.UPC_EAN_EXTENSION,Te.getText()),ge.putAllMetadata(Te.getResultMetadata()),ge.addResultPoints(Te.getResultPoints()),Re=Te.getText().length}catch{}let Me=u==null?null:u.get(V.ALLOWED_EAN_EXTENSIONS);if(Me!=null){let Te=!1;for(let Nt in Me)if(Re.toString()===Nt){Te=!0;break}if(!Te)throw new re}return ge}decodeEnd(a,l){return qe.findGuardPattern(a,l,!1,qe.START_END_PATTERN,new Int32Array(qe.START_END_PATTERN.length).fill(0))}static checkChecksum(a){return qe.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let l=a.length;if(l===0)return!1;let u=parseInt(a.charAt(l-1),10);return qe.getStandardUPCEANChecksum(a.substring(0,l-1))===u}static getStandardUPCEANChecksum(a){let l=a.length,u=0;for(let h=l-1;h>=0;h-=2){let x=a.charAt(h).charCodeAt(0)-48;if(x<0||x>9)throw new H;u+=x}u*=3;for(let h=l-2;h>=0;h-=2){let x=a.charAt(h).charCodeAt(0)-48;if(x<0||x>9)throw new H;u+=x}return(1e3-u)%10}}class Yt extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,l,u){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let x=a.getSize(),y=l[1],E=0;for(let T=0;T<6&&y<x;T++){let D=qe.decodeDigit(a,h,y,qe.L_AND_G_PATTERNS);u+=String.fromCharCode(48+D%10);for(let F of h)y+=F;D>=10&&(E|=1<<5-T)}u=Yt.determineFirstDigit(u,E),y=qe.findGuardPattern(a,y,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&y<x;T++){let D=qe.decodeDigit(a,h,y,qe.L_PATTERNS);u+=String.fromCharCode(48+D);for(let F of h)y+=F}return{rowOffset:y,resultString:u}}getBarcodeFormat(){return Z.EAN_13}static determineFirstDigit(a,l){for(let u=0;u<10;u++)if(l===this.FIRST_DIGIT_ENCODINGS[u])return a=String.fromCharCode(48+u)+a,a;throw new re}}Yt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class kn extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,l,u){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let x=a.getSize(),y=l[1];for(let _=0;_<4&&y<x;_++){let T=qe.decodeDigit(a,h,y,qe.L_PATTERNS);u+=String.fromCharCode(48+T);for(let D of h)y+=D}y=qe.findGuardPattern(a,y,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&y<x;_++){let T=qe.decodeDigit(a,h,y,qe.L_PATTERNS);u+=String.fromCharCode(48+T);for(let D of h)y+=D}return{rowOffset:y,resultString:u}}getBarcodeFormat(){return Z.EAN_8}}class Gi extends qe{constructor(){super(...arguments),this.ean13Reader=new Yt}getBarcodeFormat(){return Z.UPC_A}decode(a,l){return this.maybeReturnResult(this.ean13Reader.decode(a))}decodeRow(a,l,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,l,u))}decodeMiddle(a,l,u){return this.ean13Reader.decodeMiddle(a,l,u)}maybeReturnResult(a){let l=a.getText();if(l.charAt(0)==="0"){let u=new Ue(l.substring(1),null,null,a.getResultPoints(),Z.UPC_A);return a.getResultMetadata()!=null&&u.putAllMetadata(a.getResultMetadata()),u}else throw new re}reset(){this.ean13Reader.reset()}}class ri extends qe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(a,l,u){const h=this.decodeMiddleCounters.map(T=>T);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const x=a.getSize();let y=l[1],E=0;for(let T=0;T<6&&y<x;T++){const D=ri.decodeDigit(a,h,y,ri.L_AND_G_PATTERNS);u+=String.fromCharCode(48+D%10);for(let F of h)y+=F;D>=10&&(E|=1<<5-T)}let _=ri.determineNumSysAndCheckDigit(u,E);return{rowOffset:y,resultString:_}}decodeEnd(a,l){return ri.findGuardPatternWithoutCounters(a,l,!0,ri.MIDDLE_END_PATTERN)}checkChecksum(a){return qe.checkChecksum(ri.convertUPCEtoUPCA(a))}static determineNumSysAndCheckDigit(a,l){for(let u=0;u<=1;u++)for(let h=0;h<10;h++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][h]){let x=String.fromCharCode(48+u),y=String.fromCharCode(48+h);return x+a+y}throw re.getNotFoundInstance()}getBarcodeFormat(){return Z.UPC_E}static convertUPCEtoUPCA(a){const l=a.slice(1,7).split("").map(x=>x.charCodeAt(0)),u=new be;u.append(a.charAt(0));let h=l[5];switch(h){case 0:case 1:case 2:u.appendChars(l,0,2),u.append(h),u.append("0000"),u.appendChars(l,2,3);break;case 3:u.appendChars(l,0,3),u.append("00000"),u.appendChars(l,3,2);break;case 4:u.appendChars(l,0,4),u.append("00000"),u.append(l[4]);break;default:u.appendChars(l,0,5),u.append("0000"),u.append(h);break}return a.length>=8&&u.append(a.charAt(7)),u.toString()}}ri.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ri.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ao extends er{constructor(a){super();let l=a==null?null:a.get(V.POSSIBLE_FORMATS),u=[];n(l)?(u.push(new Yt),u.push(new Gi),u.push(new kn),u.push(new ri)):(l.indexOf(Z.EAN_13)>-1&&u.push(new Yt),l.indexOf(Z.UPC_A)>-1&&u.push(new Gi),l.indexOf(Z.EAN_8)>-1&&u.push(new kn),l.indexOf(Z.UPC_E)>-1&&u.push(new ri)),this.readers=u}decodeRow(a,l,u){for(let h of this.readers)try{const x=h.decodeRow(a,l,u),y=x.getBarcodeFormat()===Z.EAN_13&&x.getText().charAt(0)==="0",E=u==null?null:u.get(V.POSSIBLE_FORMATS),_=E==null||E.includes(Z.UPC_A);if(y&&_){const T=x.getRawBytes(),D=new Ue(x.getText().substring(1),T,T?T.length:null,x.getResultPoints(),Z.UPC_A);return D.putAllMetadata(x.getResultMetadata()),D}return x}catch{}throw new re}reset(){for(let a of this.readers)a.reset()}}class Qr extends er{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,l){for(let u=0;u<l.length;u++)if(er.patternMatchVariance(a,l[u],Qr.MAX_INDIVIDUAL_VARIANCE)<Qr.MAX_AVG_VARIANCE)return u;throw new re}static count(a){return At.sum(new Int32Array(a))}static increment(a,l){let u=0,h=l[0];for(let x=1;x<a.length;x++)l[x]>h&&(h=l[x],u=x);a[u]++}static decrement(a,l){let u=0,h=l[0];for(let x=1;x<a.length;x++)l[x]<h&&(h=l[x],u=x);a[u]--}static isFinderPattern(a){let l=a[0]+a[1],u=l+a[2]+a[3],h=l/u;if(h>=Qr.MIN_FINDER_PATTERN_RATIO&&h<=Qr.MAX_FINDER_PATTERN_RATIO){let x=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;for(let E of a)E>y&&(y=E),E<x&&(x=E);return y<10*x}return!1}}Qr.MAX_AVG_VARIANCE=.2,Qr.MAX_INDIVIDUAL_VARIANCE=.45,Qr.MIN_FINDER_PATTERN_RATIO=9.5/12,Qr.MAX_FINDER_PATTERN_RATIO=12.5/14;class ni{constructor(a,l){this.value=a,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(a){if(!(a instanceof ni))return!1;const l=a;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ja{constructor(a,l,u,h,x){this.value=a,this.startEnd=l,this.value=a,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new He(u,x)),this.resultPoints.push(new He(h,x))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(a){if(!(a instanceof Ja))return!1;const l=a;return this.value===l.value}hashCode(){return this.value}}class wn{constructor(){}static getRSSvalue(a,l,u){let h=0;for(let _ of a)h+=_;let x=0,y=0,E=a.length;for(let _=0;_<E-1;_++){let T;for(T=1,y|=1<<_;T<a[_];T++,y&=~(1<<_)){let D=wn.combins(h-T-1,E-_-2);if(u&&y===0&&h-T-(E-_-1)>=E-_-1&&(D-=wn.combins(h-T-(E-_),E-_-2)),E-_-1>1){let F=0;for(let $=h-T-(E-_-2);$>l;$--)F+=wn.combins(h-T-$-1,E-_-3);D-=F*(E-1-_)}else h-T>l&&D--;x+=D}h-=T}return x}static combins(a,l){let u,h;a-l>l?(h=l,u=a-l):(h=a-l,u=l);let x=1,y=1;for(let E=a;E>u;E--)x*=E,y<=h&&(x/=y,y++);for(;y<=h;)x/=y,y++;return x}}class _o{static buildBitArray(a){let l=a.length*2-1;a[a.length-1].getRightChar()==null&&(l-=1);let u=12*l,h=new U(u),x=0,E=a[0].getRightChar().getValue();for(let _=11;_>=0;--_)(E&1<<_)!=0&&h.set(x),x++;for(let _=1;_<a.length;++_){let T=a[_],D=T.getLeftChar().getValue();for(let F=11;F>=0;--F)(D&1<<F)!=0&&h.set(x),x++;if(T.getRightChar()!=null){let F=T.getRightChar().getValue();for(let $=11;$>=0;--$)(F&1<<$)!=0&&h.set(x),x++}}return h}}class Hn{constructor(a,l){l?this.decodedInformation=null:(this.finished=a,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class No{constructor(a){this.newPosition=a}getNewPosition(){return this.newPosition}}class br extends No{constructor(a,l){super(a),this.value=l}getValue(){return this.value}isFNC1(){return this.value===br.FNC1}}br.FNC1="$";class ui extends No{constructor(a,l,u){super(a),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ln extends No{constructor(a,l,u){if(super(a),l<0||l>10||u<0||u>10)throw new H;this.firstDigit=l,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ln.FNC1}isSecondDigitFNC1(){return this.secondDigit===ln.FNC1}isAnyFNC1(){return this.firstDigit===ln.FNC1||this.secondDigit===ln.FNC1}}ln.FNC1=10;class Ve{constructor(){}static parseFieldsInGeneralPurpose(a){if(!a)return null;if(a.length<2)throw new re;let l=a.substring(0,2);for(let x of Ve.TWO_DIGIT_DATA_LENGTH)if(x[0]===l)return x[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(2,x[2],a):Ve.processFixedAI(2,x[1],a);if(a.length<3)throw new re;let u=a.substring(0,3);for(let x of Ve.THREE_DIGIT_DATA_LENGTH)if(x[0]===u)return x[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(3,x[2],a):Ve.processFixedAI(3,x[1],a);for(let x of Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(x[0]===u)return x[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,x[2],a):Ve.processFixedAI(4,x[1],a);if(a.length<4)throw new re;let h=a.substring(0,4);for(let x of Ve.FOUR_DIGIT_DATA_LENGTH)if(x[0]===h)return x[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,x[2],a):Ve.processFixedAI(4,x[1],a);throw new re}static processFixedAI(a,l,u){if(u.length<a)throw new re;let h=u.substring(0,a);if(u.length<a+l)throw new re;let x=u.substring(a,a+l),y=u.substring(a+l),E="("+h+")"+x,_=Ve.parseFieldsInGeneralPurpose(y);return _==null?E:E+_}static processVariableAI(a,l,u){let h=u.substring(0,a),x;u.length<a+l?x=u.length:x=a+l;let y=u.substring(a,x),E=u.substring(x),_="("+h+")"+y,T=Ve.parseFieldsInGeneralPurpose(E);return T==null?_:_+T}}Ve.VARIABLE_LENGTH=[],Ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ve.VARIABLE_LENGTH,20],["22",Ve.VARIABLE_LENGTH,29],["30",Ve.VARIABLE_LENGTH,8],["37",Ve.VARIABLE_LENGTH,8],["90",Ve.VARIABLE_LENGTH,30],["91",Ve.VARIABLE_LENGTH,30],["92",Ve.VARIABLE_LENGTH,30],["93",Ve.VARIABLE_LENGTH,30],["94",Ve.VARIABLE_LENGTH,30],["95",Ve.VARIABLE_LENGTH,30],["96",Ve.VARIABLE_LENGTH,30],["97",Ve.VARIABLE_LENGTH,3],["98",Ve.VARIABLE_LENGTH,30],["99",Ve.VARIABLE_LENGTH,30]],Ve.THREE_DIGIT_DATA_LENGTH=[["240",Ve.VARIABLE_LENGTH,30],["241",Ve.VARIABLE_LENGTH,30],["242",Ve.VARIABLE_LENGTH,6],["250",Ve.VARIABLE_LENGTH,30],["251",Ve.VARIABLE_LENGTH,30],["253",Ve.VARIABLE_LENGTH,17],["254",Ve.VARIABLE_LENGTH,20],["400",Ve.VARIABLE_LENGTH,30],["401",Ve.VARIABLE_LENGTH,30],["402",17],["403",Ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ve.VARIABLE_LENGTH,20],["421",Ve.VARIABLE_LENGTH,15],["422",3],["423",Ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ve.VARIABLE_LENGTH,15],["391",Ve.VARIABLE_LENGTH,18],["392",Ve.VARIABLE_LENGTH,15],["393",Ve.VARIABLE_LENGTH,18],["703",Ve.VARIABLE_LENGTH,30]],Ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ve.VARIABLE_LENGTH,20],["8003",Ve.VARIABLE_LENGTH,30],["8004",Ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ve.VARIABLE_LENGTH,30],["8008",Ve.VARIABLE_LENGTH,12],["8018",18],["8020",Ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ve.VARIABLE_LENGTH,70],["8200",Ve.VARIABLE_LENGTH,70]];class Ra{constructor(a){this.buffer=new be,this.information=a}decodeAllCodes(a,l){let u=l,h=null;do{let x=this.decodeGeneralPurposeField(u,h),y=Ve.parseFieldsInGeneralPurpose(x.getNewString());if(y!=null&&a.append(y),x.isRemaining()?h=""+x.getRemainingValue():h=null,u===x.getNewPosition())break;u=x.getNewPosition()}while(!0);return a.toString()}isStillNumeric(a){if(a+7>this.information.getSize())return a+4<=this.information.getSize();for(let l=a;l<a+3;++l)if(this.information.get(l))return!0;return this.information.get(a+3)}decodeNumeric(a){if(a+7>this.information.getSize()){let x=this.extractNumericValueFromBitArray(a,4);return x===0?new ln(this.information.getSize(),ln.FNC1,ln.FNC1):new ln(this.information.getSize(),x-1,ln.FNC1)}let l=this.extractNumericValueFromBitArray(a,7),u=(l-8)/11,h=(l-8)%11;return new ln(a+7,u,h)}extractNumericValueFromBitArray(a,l){return Ra.extractNumericValueFromBitArray(this.information,a,l)}static extractNumericValueFromBitArray(a,l,u){let h=0;for(let x=0;x<u;++x)a.get(l+x)&&(h|=1<<u-x-1);return h}decodeGeneralPurposeField(a,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(a);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new ui(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new ui(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let a,l;do{let u=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),a=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),a=l.isFinished()):(l=this.parseNumericBlock(),a=l.isFinished()),!(u!==this.current.getPosition())&&!a)break}while(!a);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let a=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFirstDigitFNC1()){let l;return a.isSecondDigitFNC1()?l=new ui(this.current.getPosition(),this.buffer.toString()):l=new ui(this.current.getPosition(),this.buffer.toString(),a.getSecondDigit()),new Hn(!0,l)}if(this.buffer.append(a.getFirstDigit()),a.isSecondDigitFNC1()){let l=new ui(this.current.getPosition(),this.buffer.toString());return new Hn(!0,l)}this.buffer.append(a.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Hn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let a=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let l=new ui(this.current.getPosition(),this.buffer.toString());return new Hn(!0,l)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Hn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let a=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let l=new ui(this.current.getPosition(),this.buffer.toString());return new Hn(!0,l)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Hn(!1)}isStillIsoIec646(a){if(a+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(a,5);if(l>=5&&l<16)return!0;if(a+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(a,7);if(u>=64&&u<116)return!0;if(a+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(a,8);return h>=232&&h<253}decodeIsoIec646(a){let l=this.extractNumericValueFromBitArray(a,5);if(l===15)return new br(a+5,br.FNC1);if(l>=5&&l<15)return new br(a+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(a,7);if(u>=64&&u<90)return new br(a+7,""+(u+1));if(u>=90&&u<116)return new br(a+7,""+(u+7));let h=this.extractNumericValueFromBitArray(a,8),x;switch(h){case 232:x="!";break;case 233:x='"';break;case 234:x="%";break;case 235:x="&";break;case 236:x="'";break;case 237:x="(";break;case 238:x=")";break;case 239:x="*";break;case 240:x="+";break;case 241:x=",";break;case 242:x="-";break;case 243:x=".";break;case 244:x="/";break;case 245:x=":";break;case 246:x=";";break;case 247:x="<";break;case 248:x="=";break;case 249:x=">";break;case 250:x="?";break;case 251:x="_";break;case 252:x=" ";break;default:throw new H}return new br(a+8,x)}isStillAlpha(a){if(a+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(a,5);if(l>=5&&l<16)return!0;if(a+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(a,6);return u>=16&&u<63}decodeAlphanumeric(a){let l=this.extractNumericValueFromBitArray(a,5);if(l===15)return new br(a+5,br.FNC1);if(l>=5&&l<15)return new br(a+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(a,6);if(u>=32&&u<58)return new br(a+6,""+(u+33));let h;switch(u){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new _t("Decoding invalid alphanumeric value: "+u)}return new br(a+6,h)}isAlphaTo646ToAlphaLatch(a){if(a+1>this.information.getSize())return!1;for(let l=0;l<5&&l+a<this.information.getSize();++l)if(l===2){if(!this.information.get(a+2))return!1}else if(this.information.get(a+l))return!1;return!0}isAlphaOr646ToNumericLatch(a){if(a+3>this.information.getSize())return!1;for(let l=a;l<a+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(a){if(a+1>this.information.getSize())return!1;for(let l=0;l<4&&l+a<this.information.getSize();++l)if(this.information.get(a+l))return!1;return!0}}class Se{constructor(a){this.information=a,this.generalDecoder=new Ra(a)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ge extends Se{constructor(a){super(a)}encodeCompressedGtin(a,l){a.append("(01)");let u=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,l,u)}encodeCompressedGtinWithoutAI(a,l,u){for(let h=0;h<4;++h){let x=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*h,10);x/100===0&&a.append("0"),x/10===0&&a.append("0"),a.append(x)}Ge.appendCheckDigit(a,u)}static appendCheckDigit(a,l){let u=0;for(let h=0;h<13;h++){let x=a.charAt(h+l).charCodeAt(0)-48;u+=(h&1)===0?3*x:x}u=10-u%10,u===10&&(u=0),a.append(u)}}Ge.GTIN_SIZE=40;class lt extends Ge{constructor(a){super(a)}parseInformation(){let a=new be;a.append("(01)");let l=a.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(lt.HEADER_SIZE,4);return a.append(u),this.encodeCompressedGtinWithoutAI(a,lt.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(a,lt.HEADER_SIZE+44)}}lt.HEADER_SIZE=4;class Er extends Se{constructor(a){super(a)}parseInformation(){let a=new be;return this.getGeneralDecoder().decodeAllCodes(a,Er.HEADER_SIZE)}}Er.HEADER_SIZE=5;class Sr extends Ge{constructor(a){super(a)}encodeCompressedWeight(a,l,u){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(l,u);this.addWeightCode(a,h);let x=this.checkWeight(h),y=1e5;for(let E=0;E<5;++E)x/y===0&&a.append("0"),y/=10;a.append(x)}}class Lr extends Sr{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=Lr.HEADER_SIZE+Sr.GTIN_SIZE+Lr.WEIGHT_SIZE)throw new re;let a=new be;return this.encodeCompressedGtin(a,Lr.HEADER_SIZE),this.encodeCompressedWeight(a,Lr.HEADER_SIZE+Sr.GTIN_SIZE,Lr.WEIGHT_SIZE),a.toString()}}Lr.HEADER_SIZE=5,Lr.WEIGHT_SIZE=15;class es extends Lr{constructor(a){super(a)}addWeightCode(a,l){a.append("(3103)")}checkWeight(a){return a}}class Yd extends Lr{constructor(a){super(a)}addWeightCode(a,l){l<1e4?a.append("(3202)"):a.append("(3203)")}checkWeight(a){return a<1e4?a:a-1e4}}class _i extends Ge{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<_i.HEADER_SIZE+Ge.GTIN_SIZE)throw new re;let a=new be;this.encodeCompressedGtin(a,_i.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(_i.HEADER_SIZE+Ge.GTIN_SIZE,_i.LAST_DIGIT_SIZE);a.append("(392"),a.append(l),a.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(_i.HEADER_SIZE+Ge.GTIN_SIZE+_i.LAST_DIGIT_SIZE,null);return a.append(u.getNewString()),a.toString()}}_i.HEADER_SIZE=8,_i.LAST_DIGIT_SIZE=2;class bn extends Ge{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<bn.HEADER_SIZE+Ge.GTIN_SIZE)throw new re;let a=new be;this.encodeCompressedGtin(a,bn.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(bn.HEADER_SIZE+Ge.GTIN_SIZE,bn.LAST_DIGIT_SIZE);a.append("(393"),a.append(l),a.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(bn.HEADER_SIZE+Ge.GTIN_SIZE+bn.LAST_DIGIT_SIZE,bn.FIRST_THREE_DIGITS_SIZE);u/100==0&&a.append("0"),u/10==0&&a.append("0"),a.append(u);let h=this.getGeneralDecoder().decodeGeneralPurposeField(bn.HEADER_SIZE+Ge.GTIN_SIZE+bn.LAST_DIGIT_SIZE+bn.FIRST_THREE_DIGITS_SIZE,null);return a.append(h.getNewString()),a.toString()}}bn.HEADER_SIZE=8,bn.LAST_DIGIT_SIZE=2,bn.FIRST_THREE_DIGITS_SIZE=10;class lr extends Sr{constructor(a,l,u){super(a),this.dateCode=u,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=lr.HEADER_SIZE+lr.GTIN_SIZE+lr.WEIGHT_SIZE+lr.DATE_SIZE)throw new re;let a=new be;return this.encodeCompressedGtin(a,lr.HEADER_SIZE),this.encodeCompressedWeight(a,lr.HEADER_SIZE+lr.GTIN_SIZE,lr.WEIGHT_SIZE),this.encodeCompressedDate(a,lr.HEADER_SIZE+lr.GTIN_SIZE+lr.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(l,lr.DATE_SIZE);if(u==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let h=u%32;u/=32;let x=u%12+1;u/=12;let y=u;y/10==0&&a.append("0"),a.append(y),x/10==0&&a.append("0"),a.append(x),h/10==0&&a.append("0"),a.append(h)}addWeightCode(a,l){a.append("("),a.append(this.firstAIdigits),a.append(l/1e5),a.append(")")}checkWeight(a){return a%1e5}}lr.HEADER_SIZE=8,lr.WEIGHT_SIZE=20,lr.DATE_SIZE=16;function Zd(B){try{if(B.get(1))return new lt(B);if(!B.get(2))return new Er(B);switch(Ra.extractNumericValueFromBitArray(B,1,4)){case 4:return new es(B);case 5:return new Yd(B)}switch(Ra.extractNumericValueFromBitArray(B,1,5)){case 12:return new _i(B);case 13:return new bn(B)}switch(Ra.extractNumericValueFromBitArray(B,1,7)){case 56:return new lr(B,"310","11");case 57:return new lr(B,"320","11");case 58:return new lr(B,"310","13");case 59:return new lr(B,"320","13");case 60:return new lr(B,"310","15");case 61:return new lr(B,"320","15");case 62:return new lr(B,"310","17");case 63:return new lr(B,"320","17")}}catch(a){throw console.log(a),new _t("unknown decoder: "+B)}}class Gt{constructor(a,l,u,h){this.leftchar=a,this.rightchar=l,this.finderpattern=u,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(a,l){return a instanceof Gt?Gt.equalsOrNull(a.leftchar,l.leftchar)&&Gt.equalsOrNull(a.rightchar,l.rightchar)&&Gt.equalsOrNull(a.finderpattern,l.finderpattern):!1}static equalsOrNull(a,l){return a===null?l===null:Gt.equals(a,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Qc{constructor(a,l,u){this.pairs=a,this.rowNumber=l,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(a){return this.checkEqualitity(this,a)}toString(){return"{ "+this.pairs+" }"}equals(a,l){return a instanceof Qc?this.checkEqualitity(a,l)&&a.wasReversed===l.wasReversed:!1}checkEqualitity(a,l){if(!a||!l)return;let u;return a.forEach((h,x)=>{l.forEach(y=>{h.getLeftChar().getValue()===y.getLeftChar().getValue()&&h.getRightChar().getValue()===y.getRightChar().getValue()&&h.getFinderPatter().getValue()===y.getFinderPatter().getValue()&&(u=!0)})}),u}}class Oe extends Qr{constructor(a){super(...arguments),this.pairs=new Array(Oe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=a===!0}decodeRow(a,l,u){this.pairs.length=0,this.startFromEven=!1;try{return Oe.constructResult(this.decodeRow2pairs(a,l))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,Oe.constructResult(this.decodeRow2pairs(a,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(a,l){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,a))}catch(x){if(x instanceof re){if(!this.pairs.length)throw new re;u=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(a,!1),h){let x=this.checkRowsBoolean(!1);if(x!=null||(x=this.checkRowsBoolean(!0),x!=null))return x}throw new re}checkRowsBoolean(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return a&&(this.rows=this.rows.reverse()),l}checkRows(a,l){for(let u=l;u<this.rows.length;u++){let h=this.rows[u];this.pairs.length=0;for(let y of a)this.pairs.push(y.getPairs());if(this.pairs.push(h.getPairs()),!Oe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let x=new Array(a);x.push(h);try{return this.checkRows(x,u+1)}catch(y){this.verbose&&console.log(y)}}throw new re}static isValidSequence(a){for(let l of Oe.FINDER_PATTERN_SEQUENCES){if(a.length>l.length)continue;let u=!0;for(let h=0;h<a.length;h++)if(a[h].getFinderPattern().getValue()!=l[h]){u=!1;break}if(u)return!0}return!1}storeRow(a,l){let u=0,h=!1,x=!1;for(;u<this.rows.length;){let y=this.rows[u];if(y.getRowNumber()>a){x=y.isEquivalent(this.pairs);break}h=y.isEquivalent(this.pairs),u++}x||h||Oe.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new Qc(this.pairs,a,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(a,l){for(let u of l)if(u.getPairs().length!==a.length){for(let h of u.getPairs())for(let x of a)if(Gt.equals(h,x))break}}static isPartialRow(a,l){for(let u of l){let h=!0;for(let x of a){let y=!1;for(let E of u.getPairs())if(x.equals(E)){y=!0;break}if(!y){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(a){let l=_o.buildBitArray(a),h=Zd(l).parseInformation(),x=a[0].getFinderPattern().getResultPoints(),y=a[a.length-1].getFinderPattern().getResultPoints(),E=[x[0],x[1],y[0],y[1]];return new Ue(h,null,null,E,Z.RSS_EXPANDED,null)}checkChecksum(){let a=this.pairs.get(0),l=a.getLeftChar(),u=a.getRightChar();if(u==null)return!1;let h=u.getChecksumPortion(),x=2;for(let E=1;E<this.pairs.size();++E){let _=this.pairs.get(E);h+=_.getLeftChar().getChecksumPortion(),x++;let T=_.getRightChar();T!=null&&(h+=T.getChecksumPortion(),x++)}return h%=211,211*(x-4)+h==l.getValue()}static getNextSecondBar(a,l){let u;return a.get(l)?(u=a.getNextUnset(l),u=a.getNextSet(u)):(u=a.getNextSet(l),u=a.getNextUnset(u)),u}retrieveNextPair(a,l,u){let h=l.length%2==0;this.startFromEven&&(h=!h);let x,y=!0,E=-1;do this.findNextPair(a,l,E),x=this.parseFoundFinderPattern(a,u,h),x==null?E=Oe.getNextSecondBar(a,this.startEnd[0]):y=!1;while(y);let _=this.decodeDataCharacter(a,x,h,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new re;let T;try{T=this.decodeDataCharacter(a,x,h,!1)}catch(D){T=null,this.verbose&&console.log(D)}return new Gt(_,T,x,!0)}isEmptyPair(a){return a.length===0}findNextPair(a,l,u){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let x=a.getSize(),y;u>=0?y=u:this.isEmptyPair(l)?y=0:y=l[l.length-1].getFinderPattern().getStartEnd()[1];let E=l.length%2!=0;this.startFromEven&&(E=!E);let _=!1;for(;y<x&&(_=!a.get(y),!!_);)y++;let T=0,D=y;for(let F=y;F<x;F++)if(a.get(F)!=_)h[T]++;else{if(T==3){if(E&&Oe.reverseCounters(h),Oe.isFinderPattern(h)){this.startEnd[0]=D,this.startEnd[1]=F;return}E&&Oe.reverseCounters(h),D+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,T--}else T++;h[T]=1,_=!_}throw new re}static reverseCounters(a){let l=a.length;for(let u=0;u<l/2;++u){let h=a[u];a[u]=a[l-u-1],a[l-u-1]=h}}parseFoundFinderPattern(a,l,u){let h,x,y;if(u){let T=this.startEnd[0]-1;for(;T>=0&&!a.get(T);)T--;T++,h=this.startEnd[0]-T,x=T,y=this.startEnd[1]}else x=this.startEnd[0],y=a.getNextUnset(this.startEnd[1]+1),h=y-this.startEnd[1];let E=this.getDecodeFinderCounters();I.arraycopy(E,0,E,1,E.length-1),E[0]=h;let _;try{_=this.parseFinderValue(E,Oe.FINDER_PATTERNS)}catch{return null}return new Ja(_,[x,y],x,y,l)}decodeDataCharacter(a,l,u,h){let x=this.getDataCharacterCounters();for(let Wt=0;Wt<x.length;Wt++)x[Wt]=0;if(h)Oe.recordPatternInReverse(a,l.getStartEnd()[0],x);else{Oe.recordPattern(a,l.getStartEnd()[1],x);for(let Wt=0,Pr=x.length-1;Wt<Pr;Wt++,Pr--){let Rn=x[Wt];x[Wt]=x[Pr],x[Pr]=Rn}}let y=17,E=At.sum(new Int32Array(x))/y,_=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(E-_)/_>.3)throw new re;let T=this.getOddCounts(),D=this.getEvenCounts(),F=this.getOddRoundingErrors(),$=this.getEvenRoundingErrors();for(let Wt=0;Wt<x.length;Wt++){let Pr=1*x[Wt]/E,Rn=Pr+.5;if(Rn<1){if(Pr<.3)throw new re;Rn=1}else if(Rn>8){if(Pr>8.7)throw new re;Rn=8}let as=Wt/2;(Wt&1)==0?(T[as]=Rn,F[as]=Pr-Rn):(D[as]=Rn,$[as]=Pr-Rn)}this.adjustOddEvenCounts(y);let G=4*l.getValue()+(u?0:2)+(h?0:1)-1,Q=0,te=0;for(let Wt=T.length-1;Wt>=0;Wt--){if(Oe.isNotA1left(l,u,h)){let Pr=Oe.WEIGHTS[G][2*Wt];te+=T[Wt]*Pr}Q+=T[Wt]}let oe=0;for(let Wt=D.length-1;Wt>=0;Wt--)if(Oe.isNotA1left(l,u,h)){let Pr=Oe.WEIGHTS[G][2*Wt+1];oe+=D[Wt]*Pr}let ge=te+oe;if((Q&1)!=0||Q>13||Q<4)throw new re;let Re=(13-Q)/2,Me=Oe.SYMBOL_WIDEST[Re],Te=9-Me,Nt=wn.getRSSvalue(T,Me,!0),wt=wn.getRSSvalue(D,Te,!1),Gn=Oe.EVEN_TOTAL_SUBSET[Re],ki=Oe.GSUM[Re],Gr=Nt*Gn+wt+ki;return new ni(Gr,ge)}static isNotA1left(a,l,u){return!(a.getValue()==0&&l&&u)}adjustOddEvenCounts(a){let l=At.sum(new Int32Array(this.getOddCounts())),u=At.sum(new Int32Array(this.getEvenCounts())),h=!1,x=!1;l>13?x=!0:l<4&&(h=!0);let y=!1,E=!1;u>13?E=!0:u<4&&(y=!0);let _=l+u-a,T=(l&1)==1,D=(u&1)==0;if(_==1)if(T){if(D)throw new re;x=!0}else{if(!D)throw new re;E=!0}else if(_==-1)if(T){if(D)throw new re;h=!0}else{if(!D)throw new re;y=!0}else if(_==0){if(T){if(!D)throw new re;l<u?(h=!0,E=!0):(x=!0,y=!0)}else if(D)throw new re}else throw new re;if(h){if(x)throw new re;Oe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&Oe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(E)throw new re;Oe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}E&&Oe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Oe.SYMBOL_WIDEST=[7,5,4,3,1],Oe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Oe.GSUM=[0,348,1388,2948,3988],Oe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Oe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Oe.FINDER_PAT_A=0,Oe.FINDER_PAT_B=1,Oe.FINDER_PAT_C=2,Oe.FINDER_PAT_D=3,Oe.FINDER_PAT_E=4,Oe.FINDER_PAT_F=5,Oe.FINDER_PATTERN_SEQUENCES=[[Oe.FINDER_PAT_A,Oe.FINDER_PAT_A],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_B,Oe.FINDER_PAT_B],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_C,Oe.FINDER_PAT_B,Oe.FINDER_PAT_D],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_E,Oe.FINDER_PAT_B,Oe.FINDER_PAT_D,Oe.FINDER_PAT_C],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_E,Oe.FINDER_PAT_B,Oe.FINDER_PAT_D,Oe.FINDER_PAT_D,Oe.FINDER_PAT_F],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_E,Oe.FINDER_PAT_B,Oe.FINDER_PAT_D,Oe.FINDER_PAT_E,Oe.FINDER_PAT_F,Oe.FINDER_PAT_F],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_A,Oe.FINDER_PAT_B,Oe.FINDER_PAT_B,Oe.FINDER_PAT_C,Oe.FINDER_PAT_C,Oe.FINDER_PAT_D,Oe.FINDER_PAT_D],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_A,Oe.FINDER_PAT_B,Oe.FINDER_PAT_B,Oe.FINDER_PAT_C,Oe.FINDER_PAT_C,Oe.FINDER_PAT_D,Oe.FINDER_PAT_E,Oe.FINDER_PAT_E],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_A,Oe.FINDER_PAT_B,Oe.FINDER_PAT_B,Oe.FINDER_PAT_C,Oe.FINDER_PAT_C,Oe.FINDER_PAT_D,Oe.FINDER_PAT_E,Oe.FINDER_PAT_F,Oe.FINDER_PAT_F],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_A,Oe.FINDER_PAT_B,Oe.FINDER_PAT_B,Oe.FINDER_PAT_C,Oe.FINDER_PAT_D,Oe.FINDER_PAT_D,Oe.FINDER_PAT_E,Oe.FINDER_PAT_E,Oe.FINDER_PAT_F,Oe.FINDER_PAT_F]],Oe.MAX_PAIRS=11;class Qd extends ni{constructor(a,l,u){super(a,l),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class nr extends Qr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(a,l,u){const h=this.decodePair(l,!1,a,u);nr.addOrTally(this.possibleLeftPairs,h),l.reverse();let x=this.decodePair(l,!0,a,u);nr.addOrTally(this.possibleRightPairs,x),l.reverse();for(let y of this.possibleLeftPairs)if(y.getCount()>1){for(let E of this.possibleRightPairs)if(E.getCount()>1&&nr.checkChecksum(y,E))return nr.constructResult(y,E)}throw new re}static addOrTally(a,l){if(l==null)return;let u=!1;for(let h of a)if(h.getValue()===l.getValue()){h.incrementCount(),u=!0;break}u||a.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(a,l){let u=4537077*a.getValue()+l.getValue(),h=new String(u).toString(),x=new be;for(let T=13-h.length;T>0;T--)x.append("0");x.append(h);let y=0;for(let T=0;T<13;T++){let D=x.charAt(T).charCodeAt(0)-48;y+=(T&1)===0?3*D:D}y=10-y%10,y===10&&(y=0),x.append(y.toString());let E=a.getFinderPattern().getResultPoints(),_=l.getFinderPattern().getResultPoints();return new Ue(x.toString(),null,0,[E[0],E[1],_[0],_[1]],Z.RSS_14,new Date().getTime())}static checkChecksum(a,l){let u=(a.getChecksumPortion()+16*l.getChecksumPortion())%79,h=9*a.getFinderPattern().getValue()+l.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,u===h}decodePair(a,l,u,h){try{let x=this.findFinderPattern(a,l),y=this.parseFoundFinderPattern(a,u,l,x),E=h==null?null:h.get(V.NEED_RESULT_POINT_CALLBACK);if(E!=null){let D=(x[0]+x[1])/2;l&&(D=a.getSize()-1-D),E.foundPossibleResultPoint(new He(D,u))}let _=this.decodeDataCharacter(a,y,!0),T=this.decodeDataCharacter(a,y,!1);return new Qd(1597*_.getValue()+T.getValue(),_.getChecksumPortion()+4*T.getChecksumPortion(),y)}catch{return null}}decodeDataCharacter(a,l,u){let h=this.getDataCharacterCounters();for(let oe=0;oe<h.length;oe++)h[oe]=0;if(u)er.recordPatternInReverse(a,l.getStartEnd()[0],h);else{er.recordPattern(a,l.getStartEnd()[1]+1,h);for(let oe=0,ge=h.length-1;oe<ge;oe++,ge--){let Re=h[oe];h[oe]=h[ge],h[ge]=Re}}let x=u?16:15,y=At.sum(new Int32Array(h))/x,E=this.getOddCounts(),_=this.getEvenCounts(),T=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let oe=0;oe<h.length;oe++){let ge=h[oe]/y,Re=Math.floor(ge+.5);Re<1?Re=1:Re>8&&(Re=8);let Me=Math.floor(oe/2);(oe&1)===0?(E[Me]=Re,T[Me]=ge-Re):(_[Me]=Re,D[Me]=ge-Re)}this.adjustOddEvenCounts(u,x);let F=0,$=0;for(let oe=E.length-1;oe>=0;oe--)$*=9,$+=E[oe],F+=E[oe];let G=0,Q=0;for(let oe=_.length-1;oe>=0;oe--)G*=9,G+=_[oe],Q+=_[oe];let te=$+3*G;if(u){if((F&1)!==0||F>12||F<4)throw new re;let oe=(12-F)/2,ge=nr.OUTSIDE_ODD_WIDEST[oe],Re=9-ge,Me=wn.getRSSvalue(E,ge,!1),Te=wn.getRSSvalue(_,Re,!0),Nt=nr.OUTSIDE_EVEN_TOTAL_SUBSET[oe],wt=nr.OUTSIDE_GSUM[oe];return new ni(Me*Nt+Te+wt,te)}else{if((Q&1)!==0||Q>10||Q<4)throw new re;let oe=(10-Q)/2,ge=nr.INSIDE_ODD_WIDEST[oe],Re=9-ge,Me=wn.getRSSvalue(E,ge,!0),Te=wn.getRSSvalue(_,Re,!1),Nt=nr.INSIDE_ODD_TOTAL_SUBSET[oe],wt=nr.INSIDE_GSUM[oe];return new ni(Te*Nt+Me+wt,te)}}findFinderPattern(a,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=a.getSize(),x=!1,y=0;for(;y<h&&(x=!a.get(y),l!==x);)y++;let E=0,_=y;for(let T=y;T<h;T++)if(a.get(T)!==x)u[E]++;else{if(E===3){if(Qr.isFinderPattern(u))return[_,T];_+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,E--}else E++;u[E]=1,x=!x}throw new re}parseFoundFinderPattern(a,l,u,h){let x=a.get(h[0]),y=h[0]-1;for(;y>=0&&x!==a.get(y);)y--;y++;const E=h[0]-y,_=this.getDecodeFinderCounters(),T=new Int32Array(_.length);I.arraycopy(_,0,T,1,_.length-1),T[0]=E;const D=this.parseFinderValue(T,nr.FINDER_PATTERNS);let F=y,$=h[1];return u&&(F=a.getSize()-1-F,$=a.getSize()-1-$),new Ja(D,[y,h[1]],F,$,l)}adjustOddEvenCounts(a,l){let u=At.sum(new Int32Array(this.getOddCounts())),h=At.sum(new Int32Array(this.getEvenCounts())),x=!1,y=!1,E=!1,_=!1;a?(u>12?y=!0:u<4&&(x=!0),h>12?_=!0:h<4&&(E=!0)):(u>11?y=!0:u<5&&(x=!0),h>10?_=!0:h<4&&(E=!0));let T=u+h-l,D=(u&1)===(a?1:0),F=(h&1)===1;if(T===1)if(D){if(F)throw new re;y=!0}else{if(!F)throw new re;_=!0}else if(T===-1)if(D){if(F)throw new re;x=!0}else{if(!F)throw new re;E=!0}else if(T===0){if(D){if(!F)throw new re;u<h?(x=!0,_=!0):(y=!0,E=!0)}else if(F)throw new re}else throw new re;if(x){if(y)throw new re;Qr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&Qr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(_)throw new re;Qr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Qr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}nr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],nr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],nr.OUTSIDE_GSUM=[0,161,961,2015,2715],nr.INSIDE_GSUM=[0,336,1036,1516],nr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],nr.INSIDE_ODD_WIDEST=[2,4,6,8],nr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Us extends er{constructor(a,l){super(),this.readers=[],this.verbose=l===!0;const u=a?a.get(V.POSSIBLE_FORMATS):null,h=a&&a.get(V.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(Z.EAN_13)||u.includes(Z.UPC_A)||u.includes(Z.EAN_8)||u.includes(Z.UPC_E))&&this.readers.push(new Ao(a)),u.includes(Z.CODE_39)&&this.readers.push(new mr(h)),u.includes(Z.CODE_128)&&this.readers.push(new Fe),u.includes(Z.ITF)&&this.readers.push(new jt),u.includes(Z.RSS_14)&&this.readers.push(new nr),u.includes(Z.RSS_EXPANDED)&&this.readers.push(new Oe(this.verbose))):(this.readers.push(new Ao(a)),this.readers.push(new mr),this.readers.push(new Ao(a)),this.readers.push(new Fe),this.readers.push(new jt),this.readers.push(new nr),this.readers.push(new Oe(this.verbose)))}decodeRow(a,l,u){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(a,l,u)}catch{}throw new re}reset(){this.readers.forEach(a=>a.reset())}}class Jd extends $e{constructor(a=500,l){super(new Us(l),a,l)}}class Mt{constructor(a,l,u){this.ecCodewords=a,this.ecBlocks=[l],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Et{constructor(a,l){this.count=a,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Tt{constructor(a,l,u,h,x,y){this.versionNumber=a,this.symbolSizeRows=l,this.symbolSizeColumns=u,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=x,this.ecBlocks=y;let E=0;const _=y.getECCodewords(),T=y.getECBlocks();for(let D of T)E+=D.getCount()*(D.getDataCodewords()+_);this.totalCodewords=E}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(a,l){if((a&1)!==0||(l&1)!==0)throw new H;for(let u of Tt.VERSIONS)if(u.symbolSizeRows===a&&u.symbolSizeColumns===l)return u;throw new H}toString(){return""+this.versionNumber}static buildVersions(){return[new Tt(1,10,10,8,8,new Mt(5,new Et(1,3))),new Tt(2,12,12,10,10,new Mt(7,new Et(1,5))),new Tt(3,14,14,12,12,new Mt(10,new Et(1,8))),new Tt(4,16,16,14,14,new Mt(12,new Et(1,12))),new Tt(5,18,18,16,16,new Mt(14,new Et(1,18))),new Tt(6,20,20,18,18,new Mt(18,new Et(1,22))),new Tt(7,22,22,20,20,new Mt(20,new Et(1,30))),new Tt(8,24,24,22,22,new Mt(24,new Et(1,36))),new Tt(9,26,26,24,24,new Mt(28,new Et(1,44))),new Tt(10,32,32,14,14,new Mt(36,new Et(1,62))),new Tt(11,36,36,16,16,new Mt(42,new Et(1,86))),new Tt(12,40,40,18,18,new Mt(48,new Et(1,114))),new Tt(13,44,44,20,20,new Mt(56,new Et(1,144))),new Tt(14,48,48,22,22,new Mt(68,new Et(1,174))),new Tt(15,52,52,24,24,new Mt(42,new Et(2,102))),new Tt(16,64,64,14,14,new Mt(56,new Et(2,140))),new Tt(17,72,72,16,16,new Mt(36,new Et(4,92))),new Tt(18,80,80,18,18,new Mt(48,new Et(4,114))),new Tt(19,88,88,20,20,new Mt(56,new Et(4,144))),new Tt(20,96,96,22,22,new Mt(68,new Et(4,174))),new Tt(21,104,104,24,24,new Mt(56,new Et(6,136))),new Tt(22,120,120,18,18,new Mt(68,new Et(6,175))),new Tt(23,132,132,20,20,new Mt(62,new Et(8,163))),new Tt(24,144,144,22,22,new Mt(62,new Et(8,156),new Et(2,155))),new Tt(25,8,18,6,16,new Mt(7,new Et(1,5))),new Tt(26,8,32,6,14,new Mt(11,new Et(1,10))),new Tt(27,12,26,10,24,new Mt(14,new Et(1,16))),new Tt(28,12,36,10,16,new Mt(18,new Et(1,22))),new Tt(29,16,36,14,16,new Mt(24,new Et(1,32))),new Tt(30,16,48,14,22,new Mt(28,new Et(1,49)))]}}Tt.VERSIONS=Tt.buildVersions();class ii{constructor(a){const l=a.getHeight();if(l<8||l>144||(l&1)!==0)throw new H;this.version=ii.readVersion(a),this.mappingBitMatrix=this.extractDataRegion(a),this.readMappingMatrix=new Ce(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(a){const l=a.getHeight(),u=a.getWidth();return Tt.getVersionForDimensions(l,u)}readCodewords(){const a=new Int8Array(this.version.getTotalCodewords());let l=0,u=4,h=0;const x=this.mappingBitMatrix.getHeight(),y=this.mappingBitMatrix.getWidth();let E=!1,_=!1,T=!1,D=!1;do if(u===x&&h===0&&!E)a[l++]=this.readCorner1(x,y)&255,u-=2,h+=2,E=!0;else if(u===x-2&&h===0&&(y&3)!==0&&!_)a[l++]=this.readCorner2(x,y)&255,u-=2,h+=2,_=!0;else if(u===x+4&&h===2&&(y&7)===0&&!T)a[l++]=this.readCorner3(x,y)&255,u-=2,h+=2,T=!0;else if(u===x-2&&h===0&&(y&7)===4&&!D)a[l++]=this.readCorner4(x,y)&255,u-=2,h+=2,D=!0;else{do u<x&&h>=0&&!this.readMappingMatrix.get(h,u)&&(a[l++]=this.readUtah(u,h,x,y)&255),u-=2,h+=2;while(u>=0&&h<y);u+=1,h+=3;do u>=0&&h<y&&!this.readMappingMatrix.get(h,u)&&(a[l++]=this.readUtah(u,h,x,y)&255),u+=2,h-=2;while(u<x&&h>=0);u+=3,h+=1}while(u<x||h<y);if(l!==this.version.getTotalCodewords())throw new H;return a}readModule(a,l,u,h){return a<0&&(a+=u,l+=4-(u+4&7)),l<0&&(l+=h,a+=4-(h+4&7)),this.readMappingMatrix.set(l,a),this.mappingBitMatrix.get(l,a)}readUtah(a,l,u,h){let x=0;return this.readModule(a-2,l-2,u,h)&&(x|=1),x<<=1,this.readModule(a-2,l-1,u,h)&&(x|=1),x<<=1,this.readModule(a-1,l-2,u,h)&&(x|=1),x<<=1,this.readModule(a-1,l-1,u,h)&&(x|=1),x<<=1,this.readModule(a-1,l,u,h)&&(x|=1),x<<=1,this.readModule(a,l-2,u,h)&&(x|=1),x<<=1,this.readModule(a,l-1,u,h)&&(x|=1),x<<=1,this.readModule(a,l,u,h)&&(x|=1),x}readCorner1(a,l){let u=0;return this.readModule(a-1,0,a,l)&&(u|=1),u<<=1,this.readModule(a-1,1,a,l)&&(u|=1),u<<=1,this.readModule(a-1,2,a,l)&&(u|=1),u<<=1,this.readModule(0,l-2,a,l)&&(u|=1),u<<=1,this.readModule(0,l-1,a,l)&&(u|=1),u<<=1,this.readModule(1,l-1,a,l)&&(u|=1),u<<=1,this.readModule(2,l-1,a,l)&&(u|=1),u<<=1,this.readModule(3,l-1,a,l)&&(u|=1),u}readCorner2(a,l){let u=0;return this.readModule(a-3,0,a,l)&&(u|=1),u<<=1,this.readModule(a-2,0,a,l)&&(u|=1),u<<=1,this.readModule(a-1,0,a,l)&&(u|=1),u<<=1,this.readModule(0,l-4,a,l)&&(u|=1),u<<=1,this.readModule(0,l-3,a,l)&&(u|=1),u<<=1,this.readModule(0,l-2,a,l)&&(u|=1),u<<=1,this.readModule(0,l-1,a,l)&&(u|=1),u<<=1,this.readModule(1,l-1,a,l)&&(u|=1),u}readCorner3(a,l){let u=0;return this.readModule(a-1,0,a,l)&&(u|=1),u<<=1,this.readModule(a-1,l-1,a,l)&&(u|=1),u<<=1,this.readModule(0,l-3,a,l)&&(u|=1),u<<=1,this.readModule(0,l-2,a,l)&&(u|=1),u<<=1,this.readModule(0,l-1,a,l)&&(u|=1),u<<=1,this.readModule(1,l-3,a,l)&&(u|=1),u<<=1,this.readModule(1,l-2,a,l)&&(u|=1),u<<=1,this.readModule(1,l-1,a,l)&&(u|=1),u}readCorner4(a,l){let u=0;return this.readModule(a-3,0,a,l)&&(u|=1),u<<=1,this.readModule(a-2,0,a,l)&&(u|=1),u<<=1,this.readModule(a-1,0,a,l)&&(u|=1),u<<=1,this.readModule(0,l-2,a,l)&&(u|=1),u<<=1,this.readModule(0,l-1,a,l)&&(u|=1),u<<=1,this.readModule(1,l-1,a,l)&&(u|=1),u<<=1,this.readModule(2,l-1,a,l)&&(u|=1),u<<=1,this.readModule(3,l-1,a,l)&&(u|=1),u}extractDataRegion(a){const l=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(a.getHeight()!==l)throw new b("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),x=this.version.getDataRegionSizeColumns(),y=l/h|0,E=u/x|0,_=y*h,T=E*x,D=new Ce(T,_);for(let F=0;F<y;++F){const $=F*h;for(let G=0;G<E;++G){const Q=G*x;for(let te=0;te<h;++te){const oe=F*(h+2)+1+te,ge=$+te;for(let Re=0;Re<x;++Re){const Me=G*(x+2)+1+Re;if(a.get(Me,oe)){const Te=Q+Re;D.set(Te,ge)}}}}}return D}}class Jc{constructor(a,l){this.numDataCodewords=a,this.codewords=l}static getDataBlocks(a,l){const u=l.getECBlocks();let h=0;const x=u.getECBlocks();for(let te of x)h+=te.getCount();const y=new Array(h);let E=0;for(let te of x)for(let oe=0;oe<te.getCount();oe++){const ge=te.getDataCodewords(),Re=u.getECCodewords()+ge;y[E++]=new Jc(ge,new Uint8Array(Re))}const T=y[0].codewords.length-u.getECCodewords(),D=T-1;let F=0;for(let te=0;te<D;te++)for(let oe=0;oe<E;oe++)y[oe].codewords[te]=a[F++];const $=l.getVersionNumber()===24,G=$?8:E;for(let te=0;te<G;te++)y[te].codewords[T-1]=a[F++];const Q=y[0].codewords.length;for(let te=T;te<Q;te++)for(let oe=0;oe<E;oe++){const ge=$?(oe+8)%E:oe,Re=$&&ge>7?te-1:te;y[ge].codewords[Re]=a[F++]}if(F!==a.length)throw new b;return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class eu{constructor(a){this.bytes=a,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(a){if(a<1||a>32||a>this.available())throw new b(""+a);let l=0,u=this.bitOffset,h=this.byteOffset;const x=this.bytes;if(u>0){const y=8-u,E=a<y?a:y,_=y-E,T=255>>8-E<<_;l=(x[h]&T)>>_,a-=E,u+=E,u===8&&(u=0,h++)}if(a>0){for(;a>=8;)l=l<<8|x[h]&255,h++,a-=8;if(a>0){const y=8-a,E=255>>y<<y;l=l<<a|(x[h]&E)>>y,u+=a}}return this.bitOffset=u,this.byteOffset=h,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Hr;(function(B){B[B.PAD_ENCODE=0]="PAD_ENCODE",B[B.ASCII_ENCODE=1]="ASCII_ENCODE",B[B.C40_ENCODE=2]="C40_ENCODE",B[B.TEXT_ENCODE=3]="TEXT_ENCODE",B[B.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",B[B.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",B[B.BASE256_ENCODE=6]="BASE256_ENCODE"})(Hr||(Hr={}));class Ni{static decode(a){const l=new eu(a),u=new be,h=new be,x=new Array;let y=Hr.ASCII_ENCODE;do if(y===Hr.ASCII_ENCODE)y=this.decodeAsciiSegment(l,u,h);else{switch(y){case Hr.C40_ENCODE:this.decodeC40Segment(l,u);break;case Hr.TEXT_ENCODE:this.decodeTextSegment(l,u);break;case Hr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,u);break;case Hr.EDIFACT_ENCODE:this.decodeEdifactSegment(l,u);break;case Hr.BASE256_ENCODE:this.decodeBase256Segment(l,u,x);break;default:throw new H}y=Hr.ASCII_ENCODE}while(y!==Hr.PAD_ENCODE&&l.available()>0);return h.length()>0&&u.append(h.toString()),new ae(a,u.toString(),x.length===0?null:x,null)}static decodeAsciiSegment(a,l,u){let h=!1;do{let x=a.readBits(8);if(x===0)throw new H;if(x<=128)return h&&(x+=128),l.append(String.fromCharCode(x-1)),Hr.ASCII_ENCODE;if(x===129)return Hr.PAD_ENCODE;if(x<=229){const y=x-130;y<10&&l.append("0"),l.append(""+y)}else switch(x){case 230:return Hr.C40_ENCODE;case 231:return Hr.BASE256_ENCODE;case 232:l.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:l.append("[)>05"),u.insert(0,"");break;case 237:l.append("[)>06"),u.insert(0,"");break;case 238:return Hr.ANSIX12_ENCODE;case 239:return Hr.TEXT_ENCODE;case 240:return Hr.EDIFACT_ENCODE;case 241:break;default:if(x!==254||a.available()!==0)throw new H;break}}while(a.available()>0);return Hr.ASCII_ENCODE}static decodeC40Segment(a,l){let u=!1;const h=[];let x=0;do{if(a.available()===8)return;const y=a.readBits(8);if(y===254)return;this.parseTwoBytes(y,a.readBits(8),h);for(let E=0;E<3;E++){const _=h[E];switch(x){case 0:if(_<3)x=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[_];u?(l.append(String.fromCharCode(T.charCodeAt(0)+128)),u=!1):l.append(T)}else throw new H;break;case 1:u?(l.append(String.fromCharCode(_+128)),u=!1):l.append(String.fromCharCode(_)),x=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[_];u?(l.append(String.fromCharCode(T.charCodeAt(0)+128)),u=!1):l.append(T)}else switch(_){case 27:l.append("");break;case 30:u=!0;break;default:throw new H}x=0;break;case 3:u?(l.append(String.fromCharCode(_+224)),u=!1):l.append(String.fromCharCode(_+96)),x=0;break;default:throw new H}}}while(a.available()>0)}static decodeTextSegment(a,l){let u=!1,h=[],x=0;do{if(a.available()===8)return;const y=a.readBits(8);if(y===254)return;this.parseTwoBytes(y,a.readBits(8),h);for(let E=0;E<3;E++){const _=h[E];switch(x){case 0:if(_<3)x=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[_];u?(l.append(String.fromCharCode(T.charCodeAt(0)+128)),u=!1):l.append(T)}else throw new H;break;case 1:u?(l.append(String.fromCharCode(_+128)),u=!1):l.append(String.fromCharCode(_)),x=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[_];u?(l.append(String.fromCharCode(T.charCodeAt(0)+128)),u=!1):l.append(T)}else switch(_){case 27:l.append("");break;case 30:u=!0;break;default:throw new H}x=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[_];u?(l.append(String.fromCharCode(T.charCodeAt(0)+128)),u=!1):l.append(T),x=0}else throw new H;break;default:throw new H}}}while(a.available()>0)}static decodeAnsiX12Segment(a,l){const u=[];do{if(a.available()===8)return;const h=a.readBits(8);if(h===254)return;this.parseTwoBytes(h,a.readBits(8),u);for(let x=0;x<3;x++){const y=u[x];switch(y){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(y<14)l.append(String.fromCharCode(y+44));else if(y<40)l.append(String.fromCharCode(y+51));else throw new H;break}}}while(a.available()>0)}static parseTwoBytes(a,l,u){let h=(a<<8)+l-1,x=Math.floor(h/1600);u[0]=x,h-=x*1600,x=Math.floor(h/40),u[1]=x,u[2]=h-x*40}static decodeEdifactSegment(a,l){do{if(a.available()<=16)return;for(let u=0;u<4;u++){let h=a.readBits(6);if(h===31){const x=8-a.getBitOffset();x!==8&&a.readBits(x);return}(h&32)===0&&(h|=64),l.append(String.fromCharCode(h))}}while(a.available()>0)}static decodeBase256Segment(a,l,u){let h=1+a.getByteOffset();const x=this.unrandomize255State(a.readBits(8),h++);let y;if(x===0?y=a.available()/8|0:x<250?y=x:y=250*(x-249)+this.unrandomize255State(a.readBits(8),h++),y<0)throw new H;const E=new Uint8Array(y);for(let _=0;_<y;_++){if(a.available()<8)throw new H;E[_]=this.unrandomize255State(a.readBits(8),h++)}u.push(E);try{l.append(se.decode(E,ie.ISO88591))}catch(_){throw new _t("Platform does not support required encoding: "+_.message)}}static unrandomize255State(a,l){const u=149*l%255+1,h=a-u;return h>=0?h:h+256}}Ni.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ni.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ni.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ni.TEXT_SHIFT2_SET_CHARS=Ni.C40_SHIFT2_SET_CHARS,Ni.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class kl{constructor(){this.rsDecoder=new Ft(Be.DATA_MATRIX_FIELD_256)}decode(a){const l=new ii(a),u=l.getVersion(),h=l.readCodewords(),x=Jc.getDataBlocks(h,u);let y=0;for(let T of x)y+=T.getNumDataCodewords();const E=new Uint8Array(y),_=x.length;for(let T=0;T<_;T++){const D=x[T],F=D.getCodewords(),$=D.getNumDataCodewords();this.correctErrors(F,$);for(let G=0;G<$;G++)E[G*_+T]=F[G]}return Ni.decode(E)}correctErrors(a,l){const u=new Int32Array(a);try{this.rsDecoder.decode(u,a.length-l)}catch{throw new A}for(let h=0;h<l;h++)a[h]=u[h]}}class ir{constructor(a){this.image=a,this.rectangleDetector=new ut(this.image)}detect(){const a=this.rectangleDetector.detect();let l=this.detectSolid1(a);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new re;l=this.shiftToModuleCenter(l);const u=l[0],h=l[1],x=l[2],y=l[3];let E=this.transitionsBetween(u,y)+1,_=this.transitionsBetween(x,y)+1;(E&1)===1&&(E+=1),(_&1)===1&&(_+=1),4*E<7*_&&4*_<7*E&&(E=_=Math.max(E,_));let T=ir.sampleGrid(this.image,u,h,x,y,E,_);return new ha(T,[u,h,x,y])}static shiftPoint(a,l,u){let h=(l.getX()-a.getX())/(u+1),x=(l.getY()-a.getY())/(u+1);return new He(a.getX()+h,a.getY()+x)}static moveAway(a,l,u){let h=a.getX(),x=a.getY();return h<l?h-=1:h+=1,x<u?x-=1:x+=1,new He(h,x)}detectSolid1(a){let l=a[0],u=a[1],h=a[3],x=a[2],y=this.transitionsBetween(l,u),E=this.transitionsBetween(u,h),_=this.transitionsBetween(h,x),T=this.transitionsBetween(x,l),D=y,F=[x,l,u,h];return D>E&&(D=E,F[0]=l,F[1]=u,F[2]=h,F[3]=x),D>_&&(D=_,F[0]=u,F[1]=h,F[2]=x,F[3]=l),D>T&&(F[0]=h,F[1]=x,F[2]=l,F[3]=u),F}detectSolid2(a){let l=a[0],u=a[1],h=a[2],x=a[3],y=this.transitionsBetween(l,x),E=ir.shiftPoint(u,h,(y+1)*4),_=ir.shiftPoint(h,u,(y+1)*4),T=this.transitionsBetween(E,l),D=this.transitionsBetween(_,x);return T<D?(a[0]=l,a[1]=u,a[2]=h,a[3]=x):(a[0]=u,a[1]=h,a[2]=x,a[3]=l),a}correctTopRight(a){let l=a[0],u=a[1],h=a[2],x=a[3],y=this.transitionsBetween(l,x),E=this.transitionsBetween(u,x),_=ir.shiftPoint(l,u,(E+1)*4),T=ir.shiftPoint(h,u,(y+1)*4);y=this.transitionsBetween(_,x),E=this.transitionsBetween(T,x);let D=new He(x.getX()+(h.getX()-u.getX())/(y+1),x.getY()+(h.getY()-u.getY())/(y+1)),F=new He(x.getX()+(l.getX()-u.getX())/(E+1),x.getY()+(l.getY()-u.getY())/(E+1));if(!this.isValid(D))return this.isValid(F)?F:null;if(!this.isValid(F))return D;let $=this.transitionsBetween(_,D)+this.transitionsBetween(T,D),G=this.transitionsBetween(_,F)+this.transitionsBetween(T,F);return $>G?D:F}shiftToModuleCenter(a){let l=a[0],u=a[1],h=a[2],x=a[3],y=this.transitionsBetween(l,x)+1,E=this.transitionsBetween(h,x)+1,_=ir.shiftPoint(l,u,E*4),T=ir.shiftPoint(h,u,y*4);y=this.transitionsBetween(_,x)+1,E=this.transitionsBetween(T,x)+1,(y&1)===1&&(y+=1),(E&1)===1&&(E+=1);let D=(l.getX()+u.getX()+h.getX()+x.getX())/4,F=(l.getY()+u.getY()+h.getY()+x.getY())/4;l=ir.moveAway(l,D,F),u=ir.moveAway(u,D,F),h=ir.moveAway(h,D,F),x=ir.moveAway(x,D,F);let $,G;return _=ir.shiftPoint(l,u,E*4),_=ir.shiftPoint(_,x,y*4),$=ir.shiftPoint(u,l,E*4),$=ir.shiftPoint($,h,y*4),T=ir.shiftPoint(h,x,E*4),T=ir.shiftPoint(T,u,y*4),G=ir.shiftPoint(x,h,E*4),G=ir.shiftPoint(G,l,y*4),[_,$,T,G]}isValid(a){return a.getX()>=0&&a.getX()<this.image.getWidth()&&a.getY()>0&&a.getY()<this.image.getHeight()}static sampleGrid(a,l,u,h,x,y,E){return Ot.getInstance().sampleGrid(a,y,E,.5,.5,y-.5,.5,y-.5,E-.5,.5,E-.5,l.getX(),l.getY(),x.getX(),x.getY(),h.getX(),h.getY(),u.getX(),u.getY())}transitionsBetween(a,l){let u=Math.trunc(a.getX()),h=Math.trunc(a.getY()),x=Math.trunc(l.getX()),y=Math.trunc(l.getY()),E=Math.abs(y-h)>Math.abs(x-u);if(E){let te=u;u=h,h=te,te=x,x=y,y=te}let _=Math.abs(x-u),T=Math.abs(y-h),D=-_/2,F=h<y?1:-1,$=u<x?1:-1,G=0,Q=this.image.get(E?h:u,E?u:h);for(let te=u,oe=h;te!==x;te+=$){let ge=this.image.get(E?oe:te,E?te:oe);if(ge!==Q&&(G++,Q=ge),D+=T,D>0){if(oe===y)break;oe+=F,D-=_}}return G}}class Oi{constructor(){this.decoder=new kl}decode(a,l=null){let u,h;if(l!=null&&l.has(V.PURE_BARCODE)){const T=Oi.extractPureBits(a.getBlackMatrix());u=this.decoder.decode(T),h=Oi.NO_POINTS}else{const T=new ir(a.getBlackMatrix()).detect();u=this.decoder.decode(T.getBits()),h=T.getPoints()}const x=u.getRawBytes(),y=new Ue(u.getText(),x,8*x.length,h,Z.DATA_MATRIX,I.currentTimeMillis()),E=u.getByteSegments();E!=null&&y.putMetadata(fe.BYTE_SEGMENTS,E);const _=u.getECLevel();return _!=null&&y.putMetadata(fe.ERROR_CORRECTION_LEVEL,_),y}reset(){}static extractPureBits(a){const l=a.getTopLeftOnBit(),u=a.getBottomRightOnBit();if(l==null||u==null)throw new re;const h=this.moduleSize(l,a);let x=l[1];const y=u[1];let E=l[0];const T=(u[0]-E+1)/h,D=(y-x+1)/h;if(T<=0||D<=0)throw new re;const F=h/2;x+=F,E+=F;const $=new Ce(T,D);for(let G=0;G<D;G++){const Q=x+G*h;for(let te=0;te<T;te++)a.get(E+te*h,Q)&&$.set(te,G)}return $}static moduleSize(a,l){const u=l.getWidth();let h=a[0];const x=a[1];for(;h<u&&l.get(h,x);)h++;if(h===u)throw new re;const y=h-a[0];if(y===0)throw new re;return y}}Oi.NO_POINTS=[];class um extends $e{constructor(a=500){super(new Oi,a)}}var zs;(function(B){B[B.L=0]="L",B[B.M=1]="M",B[B.Q=2]="Q",B[B.H=3]="H"})(zs||(zs={}));class Kt{constructor(a,l,u){this.value=a,this.stringValue=l,this.bits=u,Kt.FOR_BITS.set(u,this),Kt.FOR_VALUE.set(a,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(a){switch(a){case"L":return Kt.L;case"M":return Kt.M;case"Q":return Kt.Q;case"H":return Kt.H;default:throw new v(a+"not available")}}toString(){return this.stringValue}equals(a){if(!(a instanceof Kt))return!1;const l=a;return this.value===l.value}static forBits(a){if(a<0||a>=Kt.FOR_BITS.size)throw new b;return Kt.FOR_BITS.get(a)}}Kt.FOR_BITS=new Map,Kt.FOR_VALUE=new Map,Kt.L=new Kt(zs.L,"L",1),Kt.M=new Kt(zs.M,"M",0),Kt.Q=new Kt(zs.Q,"Q",3),Kt.H=new Kt(zs.H,"H",2);class cn{constructor(a){this.errorCorrectionLevel=Kt.forBits(a>>3&3),this.dataMask=a&7}static numBitsDiffering(a,l){return R.bitCount(a^l)}static decodeFormatInformation(a,l){const u=cn.doDecodeFormatInformation(a,l);return u!==null?u:cn.doDecodeFormatInformation(a^cn.FORMAT_INFO_MASK_QR,l^cn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(a,l){let u=Number.MAX_SAFE_INTEGER,h=0;for(const x of cn.FORMAT_INFO_DECODE_LOOKUP){const y=x[0];if(y===a||y===l)return new cn(x[1]);let E=cn.numBitsDiffering(a,y);E<u&&(h=x[1],u=E),a!==l&&(E=cn.numBitsDiffering(l,y),E<u&&(h=x[1],u=E))}return u<=3?new cn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(a){if(!(a instanceof cn))return!1;const l=a;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}cn.FORMAT_INFO_MASK_QR=21522,cn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ce{constructor(a,...l){this.ecCodewordsPerBlock=a,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let a=0;const l=this.ecBlocks;for(const u of l)a+=u.getCount();return a}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class q{constructor(a,l){this.count=a,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ct{constructor(a,l,...u){this.versionNumber=a,this.alignmentPatternCenters=l,this.ecBlocks=u;let h=0;const x=u[0].getECCodewordsPerBlock(),y=u[0].getECBlocks();for(const E of y)h+=E.getCount()*(E.getDataCodewords()+x);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(a){return this.ecBlocks[a.getValue()]}static getProvisionalVersionForDimension(a){if(a%4!==1)throw new H;try{return this.getVersionForNumber((a-17)/4)}catch{throw new H}}static getVersionForNumber(a){if(a<1||a>40)throw new b;return ct.VERSIONS[a-1]}static decodeVersionInformation(a){let l=Number.MAX_SAFE_INTEGER,u=0;for(let h=0;h<ct.VERSION_DECODE_INFO.length;h++){const x=ct.VERSION_DECODE_INFO[h];if(x===a)return ct.getVersionForNumber(h+7);const y=cn.numBitsDiffering(a,x);y<l&&(u=h+7,l=y)}return l<=3?ct.getVersionForNumber(u):null}buildFunctionPattern(){const a=this.getDimensionForVersion(),l=new Ce(a);l.setRegion(0,0,9,9),l.setRegion(a-8,0,8,9),l.setRegion(0,a-8,9,8);const u=this.alignmentPatternCenters.length;for(let h=0;h<u;h++){const x=this.alignmentPatternCenters[h]-2;for(let y=0;y<u;y++)h===0&&(y===0||y===u-1)||h===u-1&&y===0||l.setRegion(this.alignmentPatternCenters[y]-2,x,5,5)}return l.setRegion(6,9,1,a-17),l.setRegion(9,6,a-17,1),this.versionNumber>6&&(l.setRegion(a-11,0,3,6),l.setRegion(0,a-11,6,3)),l}toString(){return""+this.versionNumber}}ct.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ct.VERSIONS=[new ct(1,new Int32Array(0),new ce(7,new q(1,19)),new ce(10,new q(1,16)),new ce(13,new q(1,13)),new ce(17,new q(1,9))),new ct(2,Int32Array.from([6,18]),new ce(10,new q(1,34)),new ce(16,new q(1,28)),new ce(22,new q(1,22)),new ce(28,new q(1,16))),new ct(3,Int32Array.from([6,22]),new ce(15,new q(1,55)),new ce(26,new q(1,44)),new ce(18,new q(2,17)),new ce(22,new q(2,13))),new ct(4,Int32Array.from([6,26]),new ce(20,new q(1,80)),new ce(18,new q(2,32)),new ce(26,new q(2,24)),new ce(16,new q(4,9))),new ct(5,Int32Array.from([6,30]),new ce(26,new q(1,108)),new ce(24,new q(2,43)),new ce(18,new q(2,15),new q(2,16)),new ce(22,new q(2,11),new q(2,12))),new ct(6,Int32Array.from([6,34]),new ce(18,new q(2,68)),new ce(16,new q(4,27)),new ce(24,new q(4,19)),new ce(28,new q(4,15))),new ct(7,Int32Array.from([6,22,38]),new ce(20,new q(2,78)),new ce(18,new q(4,31)),new ce(18,new q(2,14),new q(4,15)),new ce(26,new q(4,13),new q(1,14))),new ct(8,Int32Array.from([6,24,42]),new ce(24,new q(2,97)),new ce(22,new q(2,38),new q(2,39)),new ce(22,new q(4,18),new q(2,19)),new ce(26,new q(4,14),new q(2,15))),new ct(9,Int32Array.from([6,26,46]),new ce(30,new q(2,116)),new ce(22,new q(3,36),new q(2,37)),new ce(20,new q(4,16),new q(4,17)),new ce(24,new q(4,12),new q(4,13))),new ct(10,Int32Array.from([6,28,50]),new ce(18,new q(2,68),new q(2,69)),new ce(26,new q(4,43),new q(1,44)),new ce(24,new q(6,19),new q(2,20)),new ce(28,new q(6,15),new q(2,16))),new ct(11,Int32Array.from([6,30,54]),new ce(20,new q(4,81)),new ce(30,new q(1,50),new q(4,51)),new ce(28,new q(4,22),new q(4,23)),new ce(24,new q(3,12),new q(8,13))),new ct(12,Int32Array.from([6,32,58]),new ce(24,new q(2,92),new q(2,93)),new ce(22,new q(6,36),new q(2,37)),new ce(26,new q(4,20),new q(6,21)),new ce(28,new q(7,14),new q(4,15))),new ct(13,Int32Array.from([6,34,62]),new ce(26,new q(4,107)),new ce(22,new q(8,37),new q(1,38)),new ce(24,new q(8,20),new q(4,21)),new ce(22,new q(12,11),new q(4,12))),new ct(14,Int32Array.from([6,26,46,66]),new ce(30,new q(3,115),new q(1,116)),new ce(24,new q(4,40),new q(5,41)),new ce(20,new q(11,16),new q(5,17)),new ce(24,new q(11,12),new q(5,13))),new ct(15,Int32Array.from([6,26,48,70]),new ce(22,new q(5,87),new q(1,88)),new ce(24,new q(5,41),new q(5,42)),new ce(30,new q(5,24),new q(7,25)),new ce(24,new q(11,12),new q(7,13))),new ct(16,Int32Array.from([6,26,50,74]),new ce(24,new q(5,98),new q(1,99)),new ce(28,new q(7,45),new q(3,46)),new ce(24,new q(15,19),new q(2,20)),new ce(30,new q(3,15),new q(13,16))),new ct(17,Int32Array.from([6,30,54,78]),new ce(28,new q(1,107),new q(5,108)),new ce(28,new q(10,46),new q(1,47)),new ce(28,new q(1,22),new q(15,23)),new ce(28,new q(2,14),new q(17,15))),new ct(18,Int32Array.from([6,30,56,82]),new ce(30,new q(5,120),new q(1,121)),new ce(26,new q(9,43),new q(4,44)),new ce(28,new q(17,22),new q(1,23)),new ce(28,new q(2,14),new q(19,15))),new ct(19,Int32Array.from([6,30,58,86]),new ce(28,new q(3,113),new q(4,114)),new ce(26,new q(3,44),new q(11,45)),new ce(26,new q(17,21),new q(4,22)),new ce(26,new q(9,13),new q(16,14))),new ct(20,Int32Array.from([6,34,62,90]),new ce(28,new q(3,107),new q(5,108)),new ce(26,new q(3,41),new q(13,42)),new ce(30,new q(15,24),new q(5,25)),new ce(28,new q(15,15),new q(10,16))),new ct(21,Int32Array.from([6,28,50,72,94]),new ce(28,new q(4,116),new q(4,117)),new ce(26,new q(17,42)),new ce(28,new q(17,22),new q(6,23)),new ce(30,new q(19,16),new q(6,17))),new ct(22,Int32Array.from([6,26,50,74,98]),new ce(28,new q(2,111),new q(7,112)),new ce(28,new q(17,46)),new ce(30,new q(7,24),new q(16,25)),new ce(24,new q(34,13))),new ct(23,Int32Array.from([6,30,54,78,102]),new ce(30,new q(4,121),new q(5,122)),new ce(28,new q(4,47),new q(14,48)),new ce(30,new q(11,24),new q(14,25)),new ce(30,new q(16,15),new q(14,16))),new ct(24,Int32Array.from([6,28,54,80,106]),new ce(30,new q(6,117),new q(4,118)),new ce(28,new q(6,45),new q(14,46)),new ce(30,new q(11,24),new q(16,25)),new ce(30,new q(30,16),new q(2,17))),new ct(25,Int32Array.from([6,32,58,84,110]),new ce(26,new q(8,106),new q(4,107)),new ce(28,new q(8,47),new q(13,48)),new ce(30,new q(7,24),new q(22,25)),new ce(30,new q(22,15),new q(13,16))),new ct(26,Int32Array.from([6,30,58,86,114]),new ce(28,new q(10,114),new q(2,115)),new ce(28,new q(19,46),new q(4,47)),new ce(28,new q(28,22),new q(6,23)),new ce(30,new q(33,16),new q(4,17))),new ct(27,Int32Array.from([6,34,62,90,118]),new ce(30,new q(8,122),new q(4,123)),new ce(28,new q(22,45),new q(3,46)),new ce(30,new q(8,23),new q(26,24)),new ce(30,new q(12,15),new q(28,16))),new ct(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new q(3,117),new q(10,118)),new ce(28,new q(3,45),new q(23,46)),new ce(30,new q(4,24),new q(31,25)),new ce(30,new q(11,15),new q(31,16))),new ct(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new q(7,116),new q(7,117)),new ce(28,new q(21,45),new q(7,46)),new ce(30,new q(1,23),new q(37,24)),new ce(30,new q(19,15),new q(26,16))),new ct(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new q(5,115),new q(10,116)),new ce(28,new q(19,47),new q(10,48)),new ce(30,new q(15,24),new q(25,25)),new ce(30,new q(23,15),new q(25,16))),new ct(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new q(13,115),new q(3,116)),new ce(28,new q(2,46),new q(29,47)),new ce(30,new q(42,24),new q(1,25)),new ce(30,new q(23,15),new q(28,16))),new ct(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new q(17,115)),new ce(28,new q(10,46),new q(23,47)),new ce(30,new q(10,24),new q(35,25)),new ce(30,new q(19,15),new q(35,16))),new ct(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new q(17,115),new q(1,116)),new ce(28,new q(14,46),new q(21,47)),new ce(30,new q(29,24),new q(19,25)),new ce(30,new q(11,15),new q(46,16))),new ct(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new q(13,115),new q(6,116)),new ce(28,new q(14,46),new q(23,47)),new ce(30,new q(44,24),new q(7,25)),new ce(30,new q(59,16),new q(1,17))),new ct(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new q(12,121),new q(7,122)),new ce(28,new q(12,47),new q(26,48)),new ce(30,new q(39,24),new q(14,25)),new ce(30,new q(22,15),new q(41,16))),new ct(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new q(6,121),new q(14,122)),new ce(28,new q(6,47),new q(34,48)),new ce(30,new q(46,24),new q(10,25)),new ce(30,new q(2,15),new q(64,16))),new ct(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new q(17,122),new q(4,123)),new ce(28,new q(29,46),new q(14,47)),new ce(30,new q(49,24),new q(10,25)),new ce(30,new q(24,15),new q(46,16))),new ct(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new q(4,122),new q(18,123)),new ce(28,new q(13,46),new q(32,47)),new ce(30,new q(48,24),new q(14,25)),new ce(30,new q(42,15),new q(32,16))),new ct(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new q(20,117),new q(4,118)),new ce(28,new q(40,47),new q(7,48)),new ce(30,new q(43,24),new q(22,25)),new ce(30,new q(10,15),new q(67,16))),new ct(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new q(19,118),new q(6,119)),new ce(28,new q(18,47),new q(31,48)),new ce(30,new q(34,24),new q(34,25)),new ce(30,new q(20,15),new q(61,16)))];var Br;(function(B){B[B.DATA_MASK_000=0]="DATA_MASK_000",B[B.DATA_MASK_001=1]="DATA_MASK_001",B[B.DATA_MASK_010=2]="DATA_MASK_010",B[B.DATA_MASK_011=3]="DATA_MASK_011",B[B.DATA_MASK_100=4]="DATA_MASK_100",B[B.DATA_MASK_101=5]="DATA_MASK_101",B[B.DATA_MASK_110=6]="DATA_MASK_110",B[B.DATA_MASK_111=7]="DATA_MASK_111"})(Br||(Br={}));class St{constructor(a,l){this.value=a,this.isMasked=l}unmaskBitMatrix(a,l){for(let u=0;u<l;u++)for(let h=0;h<l;h++)this.isMasked(u,h)&&a.flip(h,u)}}St.values=new Map([[Br.DATA_MASK_000,new St(Br.DATA_MASK_000,(B,a)=>(B+a&1)===0)],[Br.DATA_MASK_001,new St(Br.DATA_MASK_001,(B,a)=>(B&1)===0)],[Br.DATA_MASK_010,new St(Br.DATA_MASK_010,(B,a)=>a%3===0)],[Br.DATA_MASK_011,new St(Br.DATA_MASK_011,(B,a)=>(B+a)%3===0)],[Br.DATA_MASK_100,new St(Br.DATA_MASK_100,(B,a)=>(Math.floor(B/2)+Math.floor(a/3)&1)===0)],[Br.DATA_MASK_101,new St(Br.DATA_MASK_101,(B,a)=>B*a%6===0)],[Br.DATA_MASK_110,new St(Br.DATA_MASK_110,(B,a)=>B*a%6<3)],[Br.DATA_MASK_111,new St(Br.DATA_MASK_111,(B,a)=>(B+a+B*a%3&1)===0)]]);class ef{constructor(a){const l=a.getHeight();if(l<21||(l&3)!==1)throw new H;this.bitMatrix=a}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let a=0;for(let x=0;x<6;x++)a=this.copyBit(x,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(let x=5;x>=0;x--)a=this.copyBit(8,x,a);const l=this.bitMatrix.getHeight();let u=0;const h=l-7;for(let x=l-1;x>=h;x--)u=this.copyBit(8,x,u);for(let x=l-8;x<l;x++)u=this.copyBit(x,8,u);if(this.parsedFormatInfo=cn.decodeFormatInformation(a,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const a=this.bitMatrix.getHeight(),l=Math.floor((a-17)/4);if(l<=6)return ct.getVersionForNumber(l);let u=0;const h=a-11;for(let y=5;y>=0;y--)for(let E=a-9;E>=h;E--)u=this.copyBit(E,y,u);let x=ct.decodeVersionInformation(u);if(x!==null&&x.getDimensionForVersion()===a)return this.parsedVersion=x,x;u=0;for(let y=5;y>=0;y--)for(let E=a-9;E>=h;E--)u=this.copyBit(y,E,u);if(x=ct.decodeVersionInformation(u),x!==null&&x.getDimensionForVersion()===a)return this.parsedVersion=x,x;throw new H}copyBit(a,l,u){return(this.isMirror?this.bitMatrix.get(l,a):this.bitMatrix.get(a,l))?u<<1|1:u<<1}readCodewords(){const a=this.readFormatInformation(),l=this.readVersion(),u=St.values.get(a.getDataMask()),h=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,h);const x=l.buildFunctionPattern();let y=!0;const E=new Uint8Array(l.getTotalCodewords());let _=0,T=0,D=0;for(let F=h-1;F>0;F-=2){F===6&&F--;for(let $=0;$<h;$++){const G=y?h-1-$:$;for(let Q=0;Q<2;Q++)x.get(F-Q,G)||(D++,T<<=1,this.bitMatrix.get(F-Q,G)&&(T|=1),D===8&&(E[_++]=T,D=0,T=0))}y=!y}if(_!==l.getTotalCodewords())throw new H;return E}remask(){if(this.parsedFormatInfo===null)return;const a=St.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,l)}setMirror(a){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=a}mirror(){const a=this.bitMatrix;for(let l=0,u=a.getWidth();l<u;l++)for(let h=l+1,x=a.getHeight();h<x;h++)a.get(l,h)!==a.get(h,l)&&(a.flip(h,l),a.flip(l,h))}}class Pl{constructor(a,l){this.numDataCodewords=a,this.codewords=l}static getDataBlocks(a,l,u){if(a.length!==l.getTotalCodewords())throw new b;const h=l.getECBlocksForLevel(u);let x=0;const y=h.getECBlocks();for(const Q of y)x+=Q.getCount();const E=new Array(x);let _=0;for(const Q of y)for(let te=0;te<Q.getCount();te++){const oe=Q.getDataCodewords(),ge=h.getECCodewordsPerBlock()+oe;E[_++]=new Pl(oe,new Uint8Array(ge))}const T=E[0].codewords.length;let D=E.length-1;for(;D>=0&&E[D].codewords.length!==T;)D--;D++;const F=T-h.getECCodewordsPerBlock();let $=0;for(let Q=0;Q<F;Q++)for(let te=0;te<_;te++)E[te].codewords[Q]=a[$++];for(let Q=D;Q<_;Q++)E[Q].codewords[F]=a[$++];const G=E[0].codewords.length;for(let Q=F;Q<G;Q++)for(let te=0;te<_;te++){const oe=te<D?Q:Q+1;E[te].codewords[oe]=a[$++]}return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var qn;(function(B){B[B.TERMINATOR=0]="TERMINATOR",B[B.NUMERIC=1]="NUMERIC",B[B.ALPHANUMERIC=2]="ALPHANUMERIC",B[B.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",B[B.BYTE=4]="BYTE",B[B.ECI=5]="ECI",B[B.KANJI=6]="KANJI",B[B.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",B[B.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",B[B.HANZI=9]="HANZI"})(qn||(qn={}));class dt{constructor(a,l,u,h){this.value=a,this.stringValue=l,this.characterCountBitsForVersions=u,this.bits=h,dt.FOR_BITS.set(h,this),dt.FOR_VALUE.set(a,this)}static forBits(a){const l=dt.FOR_BITS.get(a);if(l===void 0)throw new b;return l}getCharacterCountBits(a){const l=a.getVersionNumber();let u;return l<=9?u=0:l<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(a){if(!(a instanceof dt))return!1;const l=a;return this.value===l.value}toString(){return this.stringValue}}dt.FOR_BITS=new Map,dt.FOR_VALUE=new Map,dt.TERMINATOR=new dt(qn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),dt.NUMERIC=new dt(qn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),dt.ALPHANUMERIC=new dt(qn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),dt.STRUCTURED_APPEND=new dt(qn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),dt.BYTE=new dt(qn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),dt.ECI=new dt(qn.ECI,"ECI",Int32Array.from([0,0,0]),7),dt.KANJI=new dt(qn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),dt.FNC1_FIRST_POSITION=new dt(qn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),dt.FNC1_SECOND_POSITION=new dt(qn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),dt.HANZI=new dt(qn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class cr{static decode(a,l,u,h){const x=new eu(a);let y=new be;const E=new Array;let _=-1,T=-1;try{let D=null,F=!1,$;do{if(x.available()<4)$=dt.TERMINATOR;else{const G=x.readBits(4);$=dt.forBits(G)}switch($){case dt.TERMINATOR:break;case dt.FNC1_FIRST_POSITION:case dt.FNC1_SECOND_POSITION:F=!0;break;case dt.STRUCTURED_APPEND:if(x.available()<16)throw new H;_=x.readBits(8),T=x.readBits(8);break;case dt.ECI:const G=cr.parseECIValue(x);if(D=Y.getCharacterSetECIByValue(G),D===null)throw new H;break;case dt.HANZI:const Q=x.readBits(4),te=x.readBits($.getCharacterCountBits(l));Q===cr.GB2312_SUBSET&&cr.decodeHanziSegment(x,y,te);break;default:const oe=x.readBits($.getCharacterCountBits(l));switch($){case dt.NUMERIC:cr.decodeNumericSegment(x,y,oe);break;case dt.ALPHANUMERIC:cr.decodeAlphanumericSegment(x,y,oe,F);break;case dt.BYTE:cr.decodeByteSegment(x,y,oe,D,E,h);break;case dt.KANJI:cr.decodeKanjiSegment(x,y,oe);break;default:throw new H}break}}while($!==dt.TERMINATOR)}catch{throw new H}return new ae(a,y.toString(),E.length===0?null:E,u===null?null:u.toString(),_,T)}static decodeHanziSegment(a,l,u){if(u*13>a.available())throw new H;const h=new Uint8Array(2*u);let x=0;for(;u>0;){const y=a.readBits(13);let E=y/96<<8&4294967295|y%96;E<959?E+=41377:E+=42657,h[x]=E>>8&255,h[x+1]=E&255,x+=2,u--}try{l.append(se.decode(h,ie.GB2312))}catch(y){throw new H(y)}}static decodeKanjiSegment(a,l,u){if(u*13>a.available())throw new H;const h=new Uint8Array(2*u);let x=0;for(;u>0;){const y=a.readBits(13);let E=y/192<<8&4294967295|y%192;E<7936?E+=33088:E+=49472,h[x]=E>>8,h[x+1]=E,x+=2,u--}try{l.append(se.decode(h,ie.SHIFT_JIS))}catch(y){throw new H(y)}}static decodeByteSegment(a,l,u,h,x,y){if(8*u>a.available())throw new H;const E=new Uint8Array(u);for(let T=0;T<u;T++)E[T]=a.readBits(8);let _;h===null?_=ie.guessEncoding(E,y):_=h.getName();try{l.append(se.decode(E,_))}catch(T){throw new H(T)}x.push(E)}static toAlphaNumericChar(a){if(a>=cr.ALPHANUMERIC_CHARS.length)throw new H;return cr.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,l,u,h){const x=l.length();for(;u>1;){if(a.available()<11)throw new H;const y=a.readBits(11);l.append(cr.toAlphaNumericChar(Math.floor(y/45))),l.append(cr.toAlphaNumericChar(y%45)),u-=2}if(u===1){if(a.available()<6)throw new H;l.append(cr.toAlphaNumericChar(a.readBits(6)))}if(h)for(let y=x;y<l.length();y++)l.charAt(y)==="%"&&(y<l.length()-1&&l.charAt(y+1)==="%"?l.deleteCharAt(y+1):l.setCharAt(y,""))}static decodeNumericSegment(a,l,u){for(;u>=3;){if(a.available()<10)throw new H;const h=a.readBits(10);if(h>=1e3)throw new H;l.append(cr.toAlphaNumericChar(Math.floor(h/100))),l.append(cr.toAlphaNumericChar(Math.floor(h/10)%10)),l.append(cr.toAlphaNumericChar(h%10)),u-=3}if(u===2){if(a.available()<7)throw new H;const h=a.readBits(7);if(h>=100)throw new H;l.append(cr.toAlphaNumericChar(Math.floor(h/10))),l.append(cr.toAlphaNumericChar(h%10))}else if(u===1){if(a.available()<4)throw new H;const h=a.readBits(4);if(h>=10)throw new H;l.append(cr.toAlphaNumericChar(h))}}static parseECIValue(a){const l=a.readBits(8);if((l&128)===0)return l&127;if((l&192)===128){const u=a.readBits(8);return(l&63)<<8&4294967295|u}if((l&224)===192){const u=a.readBits(16);return(l&31)<<16&4294967295|u}throw new H}}cr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",cr.GB2312_SUBSET=1;class tu{constructor(a){this.mirrored=a}isMirrored(){return this.mirrored}applyMirroredCorrection(a){if(!this.mirrored||a===null||a.length<3)return;const l=a[0];a[0]=a[2],a[2]=l}}class ru{constructor(){this.rsDecoder=new Ft(Be.QR_CODE_FIELD_256)}decodeBooleanArray(a,l){return this.decodeBitMatrix(Ce.parseFromBooleanArray(a),l)}decodeBitMatrix(a,l){const u=new ef(a);let h=null;try{return this.decodeBitMatrixParser(u,l)}catch(x){h=x}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const x=this.decodeBitMatrixParser(u,l);return x.setOther(new tu(!0)),x}catch(x){throw h!==null?h:x}}decodeBitMatrixParser(a,l){const u=a.readVersion(),h=a.readFormatInformation().getErrorCorrectionLevel(),x=a.readCodewords(),y=Pl.getDataBlocks(x,u,h);let E=0;for(const D of y)E+=D.getNumDataCodewords();const _=new Uint8Array(E);let T=0;for(const D of y){const F=D.getCodewords(),$=D.getNumDataCodewords();this.correctErrors(F,$);for(let G=0;G<$;G++)_[T++]=F[G]}return cr.decode(_,u,h,l)}correctErrors(a,l){const u=new Int32Array(a);try{this.rsDecoder.decode(u,a.length-l)}catch{throw new A}for(let h=0;h<l;h++)a[h]=u[h]}}class $s extends He{constructor(a,l,u){super(a,l),this.estimatedModuleSize=u}aboutEquals(a,l,u){if(Math.abs(l-this.getY())<=a&&Math.abs(u-this.getX())<=a){const h=Math.abs(a-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(a,l,u){const h=(this.getX()+l)/2,x=(this.getY()+a)/2,y=(this.estimatedModuleSize+u)/2;return new $s(h,x,y)}}class Ii{constructor(a,l,u,h,x,y,E){this.image=a,this.startX=l,this.startY=u,this.width=h,this.height=x,this.moduleSize=y,this.resultPointCallback=E,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const a=this.startX,l=this.height,u=this.width,h=a+u,x=this.startY+l/2,y=new Int32Array(3),E=this.image;for(let _=0;_<l;_++){const T=x+((_&1)===0?Math.floor((_+1)/2):-Math.floor((_+1)/2));y[0]=0,y[1]=0,y[2]=0;let D=a;for(;D<h&&!E.get(D,T);)D++;let F=0;for(;D<h;){if(E.get(D,T))if(F===1)y[1]++;else if(F===2){if(this.foundPatternCross(y)){const $=this.handlePossibleCenter(y,T,D);if($!==null)return $}y[0]=y[2],y[1]=1,y[2]=0,F=1}else y[++F]++;else F===1&&F++,y[F]++;D++}if(this.foundPatternCross(y)){const $=this.handlePossibleCenter(y,T,h);if($!==null)return $}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re}static centerFromEnd(a,l){return l-a[2]-a[1]/2}foundPatternCross(a){const l=this.moduleSize,u=l/2;for(let h=0;h<3;h++)if(Math.abs(l-a[h])>=u)return!1;return!0}crossCheckVertical(a,l,u,h){const x=this.image,y=x.getHeight(),E=this.crossCheckStateCount;E[0]=0,E[1]=0,E[2]=0;let _=a;for(;_>=0&&x.get(l,_)&&E[1]<=u;)E[1]++,_--;if(_<0||E[1]>u)return NaN;for(;_>=0&&!x.get(l,_)&&E[0]<=u;)E[0]++,_--;if(E[0]>u)return NaN;for(_=a+1;_<y&&x.get(l,_)&&E[1]<=u;)E[1]++,_++;if(_===y||E[1]>u)return NaN;for(;_<y&&!x.get(l,_)&&E[2]<=u;)E[2]++,_++;if(E[2]>u)return NaN;const T=E[0]+E[1]+E[2];return 5*Math.abs(T-h)>=2*h?NaN:this.foundPatternCross(E)?Ii.centerFromEnd(E,_):NaN}handlePossibleCenter(a,l,u){const h=a[0]+a[1]+a[2],x=Ii.centerFromEnd(a,u),y=this.crossCheckVertical(l,x,2*a[1],h);if(!isNaN(y)){const E=(a[0]+a[1]+a[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(E,y,x))return T.combineEstimate(y,x,E);const _=new $s(x,y,E);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class Ki extends He{constructor(a,l,u,h){super(a,l),this.estimatedModuleSize=u,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(a,l,u){if(Math.abs(l-this.getY())<=a&&Math.abs(u-this.getX())<=a){const h=Math.abs(a-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(a,l,u){const h=this.count+1,x=(this.count*this.getX()+l)/h,y=(this.count*this.getY()+a)/h,E=(this.count*this.estimatedModuleSize+u)/h;return new Ki(x,y,E,h)}}class Ma{constructor(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Cr{constructor(a,l){this.image=a,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){const l=a!=null&&a.get(V.TRY_HARDER)!==void 0,u=a!=null&&a.get(V.PURE_BARCODE)!==void 0,h=this.image,x=h.getHeight(),y=h.getWidth();let E=Math.floor(3*x/(4*Cr.MAX_MODULES));(E<Cr.MIN_SKIP||l)&&(E=Cr.MIN_SKIP);let _=!1;const T=new Int32Array(5);for(let F=E-1;F<x&&!_;F+=E){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let $=0;for(let G=0;G<y;G++)if(h.get(G,F))($&1)===1&&$++,T[$]++;else if(($&1)===0)if($===4)if(Cr.foundPatternCross(T)){if(this.handlePossibleCenter(T,F,G,u)===!0)if(E=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const te=this.findRowSkip();te>T[2]&&(F+=te-T[2]-E,G=y-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,$=3;continue}$=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,$=3;else T[++$]++;else T[$]++;Cr.foundPatternCross(T)&&this.handlePossibleCenter(T,F,y,u)===!0&&(E=T[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const D=this.selectBestPatterns();return He.orderBestPatterns(D),new Ma(D)}static centerFromEnd(a,l){return l-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let l=0;for(let x=0;x<5;x++){const y=a[x];if(y===0)return!1;l+=y}if(l<7)return!1;const u=l/7,h=u/2;return Math.abs(u-a[0])<h&&Math.abs(u-a[1])<h&&Math.abs(3*u-a[2])<3*h&&Math.abs(u-a[3])<h&&Math.abs(u-a[4])<h}getCrossCheckStateCount(){const a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,l,u,h){const x=this.getCrossCheckStateCount();let y=0;const E=this.image;for(;a>=y&&l>=y&&E.get(l-y,a-y);)x[2]++,y++;if(a<y||l<y)return!1;for(;a>=y&&l>=y&&!E.get(l-y,a-y)&&x[1]<=u;)x[1]++,y++;if(a<y||l<y||x[1]>u)return!1;for(;a>=y&&l>=y&&E.get(l-y,a-y)&&x[0]<=u;)x[0]++,y++;if(x[0]>u)return!1;const _=E.getHeight(),T=E.getWidth();for(y=1;a+y<_&&l+y<T&&E.get(l+y,a+y);)x[2]++,y++;if(a+y>=_||l+y>=T)return!1;for(;a+y<_&&l+y<T&&!E.get(l+y,a+y)&&x[3]<u;)x[3]++,y++;if(a+y>=_||l+y>=T||x[3]>=u)return!1;for(;a+y<_&&l+y<T&&E.get(l+y,a+y)&&x[4]<u;)x[4]++,y++;if(x[4]>=u)return!1;const D=x[0]+x[1]+x[2]+x[3]+x[4];return Math.abs(D-h)<2*h&&Cr.foundPatternCross(x)}crossCheckVertical(a,l,u,h){const x=this.image,y=x.getHeight(),E=this.getCrossCheckStateCount();let _=a;for(;_>=0&&x.get(l,_);)E[2]++,_--;if(_<0)return NaN;for(;_>=0&&!x.get(l,_)&&E[1]<=u;)E[1]++,_--;if(_<0||E[1]>u)return NaN;for(;_>=0&&x.get(l,_)&&E[0]<=u;)E[0]++,_--;if(E[0]>u)return NaN;for(_=a+1;_<y&&x.get(l,_);)E[2]++,_++;if(_===y)return NaN;for(;_<y&&!x.get(l,_)&&E[3]<u;)E[3]++,_++;if(_===y||E[3]>=u)return NaN;for(;_<y&&x.get(l,_)&&E[4]<u;)E[4]++,_++;if(E[4]>=u)return NaN;const T=E[0]+E[1]+E[2]+E[3]+E[4];return 5*Math.abs(T-h)>=2*h?NaN:Cr.foundPatternCross(E)?Cr.centerFromEnd(E,_):NaN}crossCheckHorizontal(a,l,u,h){const x=this.image,y=x.getWidth(),E=this.getCrossCheckStateCount();let _=a;for(;_>=0&&x.get(_,l);)E[2]++,_--;if(_<0)return NaN;for(;_>=0&&!x.get(_,l)&&E[1]<=u;)E[1]++,_--;if(_<0||E[1]>u)return NaN;for(;_>=0&&x.get(_,l)&&E[0]<=u;)E[0]++,_--;if(E[0]>u)return NaN;for(_=a+1;_<y&&x.get(_,l);)E[2]++,_++;if(_===y)return NaN;for(;_<y&&!x.get(_,l)&&E[3]<u;)E[3]++,_++;if(_===y||E[3]>=u)return NaN;for(;_<y&&x.get(_,l)&&E[4]<u;)E[4]++,_++;if(E[4]>=u)return NaN;const T=E[0]+E[1]+E[2]+E[3]+E[4];return 5*Math.abs(T-h)>=h?NaN:Cr.foundPatternCross(E)?Cr.centerFromEnd(E,_):NaN}handlePossibleCenter(a,l,u,h){const x=a[0]+a[1]+a[2]+a[3]+a[4];let y=Cr.centerFromEnd(a,u),E=this.crossCheckVertical(l,Math.floor(y),a[2],x);if(!isNaN(E)&&(y=this.crossCheckHorizontal(Math.floor(y),Math.floor(E),a[2],x),!isNaN(y)&&(!h||this.crossCheckDiagonal(Math.floor(E),Math.floor(y),a[2],x)))){const _=x/7;let T=!1;const D=this.possibleCenters;for(let F=0,$=D.length;F<$;F++){const G=D[F];if(G.aboutEquals(_,E,y)){D[F]=G.combineEstimate(E,y,_),T=!0;break}}if(!T){const F=new Ki(y,E,_);D.push(F),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(F)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const u of this.possibleCenters)if(u.getCount()>=Cr.CENTER_QUORUM)if(l==null)l=u;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-u.getX())-Math.abs(l.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,l=0;const u=this.possibleCenters.length;for(const y of this.possibleCenters)y.getCount()>=Cr.CENTER_QUORUM&&(a++,l+=y.getEstimatedModuleSize());if(a<3)return!1;const h=l/u;let x=0;for(const y of this.possibleCenters)x+=Math.abs(y.getEstimatedModuleSize()-h);return x<=.05*l}selectBestPatterns(){const a=this.possibleCenters.length;if(a<3)throw new re;const l=this.possibleCenters;let u;if(a>3){let h=0,x=0;for(const _ of this.possibleCenters){const T=_.getEstimatedModuleSize();h+=T,x+=T*T}u=h/a;let y=Math.sqrt(x/a-u*u);l.sort((_,T)=>{const D=Math.abs(T.getEstimatedModuleSize()-u),F=Math.abs(_.getEstimatedModuleSize()-u);return D<F?-1:D>F?1:0});const E=Math.max(.2*u,y);for(let _=0;_<l.length&&l.length>3;_++){const T=l[_];Math.abs(T.getEstimatedModuleSize()-u)>E&&(l.splice(_,1),_--)}}if(l.length>3){let h=0;for(const x of l)h+=x.getEstimatedModuleSize();u=h/l.length,l.sort((x,y)=>{if(y.getCount()===x.getCount()){const E=Math.abs(y.getEstimatedModuleSize()-u),_=Math.abs(x.getEstimatedModuleSize()-u);return E<_?1:E>_?-1:0}else return y.getCount()-x.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Cr.CENTER_QUORUM=2,Cr.MIN_SKIP=3,Cr.MAX_MODULES=57;class ma{constructor(a){this.image=a}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(a){this.resultPointCallback=a==null?null:a.get(V.NEED_RESULT_POINT_CALLBACK);const u=new Cr(this.image,this.resultPointCallback).find(a);return this.processFinderPatternInfo(u)}processFinderPatternInfo(a){const l=a.getTopLeft(),u=a.getTopRight(),h=a.getBottomLeft(),x=this.calculateModuleSize(l,u,h);if(x<1)throw new re("No pattern found in proccess finder.");const y=ma.computeDimension(l,u,h,x),E=ct.getProvisionalVersionForDimension(y),_=E.getDimensionForVersion()-7;let T=null;if(E.getAlignmentPatternCenters().length>0){const G=u.getX()-l.getX()+h.getX(),Q=u.getY()-l.getY()+h.getY(),te=1-3/_,oe=Math.floor(l.getX()+te*(G-l.getX())),ge=Math.floor(l.getY()+te*(Q-l.getY()));for(let Re=4;Re<=16;Re<<=1)try{T=this.findAlignmentInRegion(x,oe,ge,Re);break}catch(Me){if(!(Me instanceof re))throw Me}}const D=ma.createTransform(l,u,h,T,y),F=ma.sampleGrid(this.image,D,y);let $;return T===null?$=[h,l,u]:$=[h,l,u,T],new ha(F,$)}static createTransform(a,l,u,h,x){const y=x-3.5;let E,_,T,D;return h!==null?(E=h.getX(),_=h.getY(),T=y-3,D=T):(E=l.getX()-a.getX()+u.getX(),_=l.getY()-a.getY()+u.getY(),T=y,D=y),Dt.quadrilateralToQuadrilateral(3.5,3.5,y,3.5,T,D,3.5,y,a.getX(),a.getY(),l.getX(),l.getY(),E,_,u.getX(),u.getY())}static sampleGrid(a,l,u){return Ot.getInstance().sampleGridWithTransform(a,u,u,l)}static computeDimension(a,l,u,h){const x=At.round(He.distance(a,l)/h),y=At.round(He.distance(a,u)/h);let E=Math.floor((x+y)/2)+7;switch(E&3){case 0:E++;break;case 2:E--;break;case 3:throw new re("Dimensions could be not found.")}return E}calculateModuleSize(a,l,u){return(this.calculateModuleSizeOneWay(a,l)+this.calculateModuleSizeOneWay(a,u))/2}calculateModuleSizeOneWay(a,l){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(l.getX()),Math.floor(l.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(a.getX()),Math.floor(a.getY()));return isNaN(u)?h/7:isNaN(h)?u/7:(u+h)/14}sizeOfBlackWhiteBlackRunBothWays(a,l,u,h){let x=this.sizeOfBlackWhiteBlackRun(a,l,u,h),y=1,E=a-(u-a);E<0?(y=a/(a-E),E=0):E>=this.image.getWidth()&&(y=(this.image.getWidth()-1-a)/(E-a),E=this.image.getWidth()-1);let _=Math.floor(l-(h-l)*y);return y=1,_<0?(y=l/(l-_),_=0):_>=this.image.getHeight()&&(y=(this.image.getHeight()-1-l)/(_-l),_=this.image.getHeight()-1),E=Math.floor(a+(E-a)*y),x+=this.sizeOfBlackWhiteBlackRun(a,l,E,_),x-1}sizeOfBlackWhiteBlackRun(a,l,u,h){const x=Math.abs(h-l)>Math.abs(u-a);if(x){let G=a;a=l,l=G,G=u,u=h,h=G}const y=Math.abs(u-a),E=Math.abs(h-l);let _=-y/2;const T=a<u?1:-1,D=l<h?1:-1;let F=0;const $=u+T;for(let G=a,Q=l;G!==$;G+=T){const te=x?Q:G,oe=x?G:Q;if(F===1===this.image.get(te,oe)){if(F===2)return At.distance(G,Q,a,l);F++}if(_+=E,_>0){if(Q===h)break;Q+=D,_-=y}}return F===2?At.distance(u+T,h,a,l):NaN}findAlignmentInRegion(a,l,u,h){const x=Math.floor(h*a),y=Math.max(0,l-x),E=Math.min(this.image.getWidth()-1,l+x);if(E-y<a*3)throw new re("Alignment top exceeds estimated module size.");const _=Math.max(0,u-x),T=Math.min(this.image.getHeight()-1,u+x);if(T-_<a*3)throw new re("Alignment bottom exceeds estimated module size.");return new Ii(this.image,y,_,E-y,T-_,a,this.resultPointCallback).find()}}class Pn{constructor(){this.decoder=new ru}getDecoder(){return this.decoder}decode(a,l){let u,h;if(l!=null&&l.get(V.PURE_BARCODE)!==void 0){const _=Pn.extractPureBits(a.getBlackMatrix());u=this.decoder.decodeBitMatrix(_,l),h=Pn.NO_POINTS}else{const _=new ma(a.getBlackMatrix()).detect(l);u=this.decoder.decodeBitMatrix(_.getBits(),l),h=_.getPoints()}u.getOther()instanceof tu&&u.getOther().applyMirroredCorrection(h);const x=new Ue(u.getText(),u.getRawBytes(),void 0,h,Z.QR_CODE,void 0),y=u.getByteSegments();y!==null&&x.putMetadata(fe.BYTE_SEGMENTS,y);const E=u.getECLevel();return E!==null&&x.putMetadata(fe.ERROR_CORRECTION_LEVEL,E),u.hasStructuredAppend()&&(x.putMetadata(fe.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),x.putMetadata(fe.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),x}reset(){}static extractPureBits(a){const l=a.getTopLeftOnBit(),u=a.getBottomRightOnBit();if(l===null||u===null)throw new re;const h=this.moduleSize(l,a);let x=l[1],y=u[1],E=l[0],_=u[0];if(E>=_||x>=y)throw new re;if(y-x!==_-E&&(_=E+(y-x),_>=a.getWidth()))throw new re;const T=Math.round((_-E+1)/h),D=Math.round((y-x+1)/h);if(T<=0||D<=0)throw new re;if(D!==T)throw new re;const F=Math.floor(h/2);x+=F,E+=F;const $=E+Math.floor((T-1)*h)-_;if($>0){if($>F)throw new re;E-=$}const G=x+Math.floor((D-1)*h)-y;if(G>0){if(G>F)throw new re;x-=G}const Q=new Ce(T,D);for(let te=0;te<D;te++){const oe=x+Math.floor(te*h);for(let ge=0;ge<T;ge++)a.get(E+Math.floor(ge*h),oe)&&Q.set(ge,te)}return Q}static moduleSize(a,l){const u=l.getHeight(),h=l.getWidth();let x=a[0],y=a[1],E=!0,_=0;for(;x<h&&y<u;){if(E!==l.get(x,y)){if(++_===5)break;E=!E}x++,y++}if(x===h||y===u)throw new re;return(x-a[0])/7}}Pn.NO_POINTS=new Array;class mt{PDF417Common(){}static getBitCountSum(a){return At.sum(a)}static toIntArray(a){if(a==null||!a.length)return mt.EMPTY_INT_ARRAY;const l=new Int32Array(a.length);let u=0;for(const h of a)l[u++]=h;return l}static getCodeword(a){const l=L.binarySearch(mt.SYMBOL_TABLE,a&262143);return l<0?-1:(mt.CODEWORD_TABLE[l]-1)%mt.NUMBER_OF_CODEWORDS}}mt.NUMBER_OF_CODEWORDS=929,mt.MAX_CODEWORDS_IN_BARCODE=mt.NUMBER_OF_CODEWORDS-1,mt.MIN_ROWS_IN_BARCODE=3,mt.MAX_ROWS_IN_BARCODE=90,mt.MODULES_IN_CODEWORD=17,mt.MODULES_IN_STOP_PATTERN=18,mt.BARS_IN_MODULE=8,mt.EMPTY_INT_ARRAY=new Int32Array([]),mt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),mt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class tf{constructor(a,l){this.bits=a,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class yt{static detectMultiple(a,l,u){let h=a.getBlackMatrix(),x=yt.detect(u,h);return x.length||(h=h.clone(),h.rotate180(),x=yt.detect(u,h)),new tf(h,x)}static detect(a,l){const u=new Array;let h=0,x=0,y=!1;for(;h<l.getHeight();){const E=yt.findVertices(l,h,x);if(E[0]==null&&E[3]==null){if(!y)break;y=!1,x=0;for(const _ of u)_[1]!=null&&(h=Math.trunc(Math.max(h,_[1].getY()))),_[3]!=null&&(h=Math.max(h,Math.trunc(_[3].getY())));h+=yt.ROW_STEP;continue}if(y=!0,u.push(E),!a)break;E[2]!=null?(x=Math.trunc(E[2].getX()),h=Math.trunc(E[2].getY())):(x=Math.trunc(E[4].getX()),h=Math.trunc(E[4].getY()))}return u}static findVertices(a,l,u){const h=a.getHeight(),x=a.getWidth(),y=new Array(8);return yt.copyToResult(y,yt.findRowsWithPattern(a,h,x,l,u,yt.START_PATTERN),yt.INDEXES_START_PATTERN),y[4]!=null&&(u=Math.trunc(y[4].getX()),l=Math.trunc(y[4].getY())),yt.copyToResult(y,yt.findRowsWithPattern(a,h,x,l,u,yt.STOP_PATTERN),yt.INDEXES_STOP_PATTERN),y}static copyToResult(a,l,u){for(let h=0;h<u.length;h++)a[u[h]]=l[h]}static findRowsWithPattern(a,l,u,h,x,y){const E=new Array(4);let _=!1;const T=new Int32Array(y.length);for(;h<l;h+=yt.ROW_STEP){let F=yt.findGuardPattern(a,x,h,u,!1,y,T);if(F!=null){for(;h>0;){const $=yt.findGuardPattern(a,x,--h,u,!1,y,T);if($!=null)F=$;else{h++;break}}E[0]=new He(F[0],h),E[1]=new He(F[1],h),_=!0;break}}let D=h+1;if(_){let F=0,$=Int32Array.from([Math.trunc(E[0].getX()),Math.trunc(E[1].getX())]);for(;D<l;D++){const G=yt.findGuardPattern(a,$[0],D,u,!1,y,T);if(G!=null&&Math.abs($[0]-G[0])<yt.MAX_PATTERN_DRIFT&&Math.abs($[1]-G[1])<yt.MAX_PATTERN_DRIFT)$=G,F=0;else{if(F>yt.SKIPPED_ROW_COUNT_MAX)break;F++}}D-=F+1,E[2]=new He($[0],D),E[3]=new He($[1],D)}return D-h<yt.BARCODE_MIN_HEIGHT&&L.fill(E,null),E}static findGuardPattern(a,l,u,h,x,y,E){L.fillWithin(E,0,E.length,0);let _=l,T=0;for(;a.get(_,u)&&_>0&&T++<yt.MAX_PIXEL_DRIFT;)_--;let D=_,F=0,$=y.length;for(let G=x;D<h;D++)if(a.get(D,u)!==G)E[F]++;else{if(F===$-1){if(yt.patternMatchVariance(E,y,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return new Int32Array([_,D]);_+=E[0]+E[1],I.arraycopy(E,2,E,0,F-1),E[F-1]=0,E[F]=0,F--}else F++;E[F]=1,G=!G}return F===$-1&&yt.patternMatchVariance(E,y,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE?new Int32Array([_,D-1]):null}static patternMatchVariance(a,l,u){let h=a.length,x=0,y=0;for(let T=0;T<h;T++)x+=a[T],y+=l[T];if(x<y)return 1/0;let E=x/y;u*=E;let _=0;for(let T=0;T<h;T++){let D=a[T],F=l[T]*E,$=D>F?D-F:F-D;if($>u)return 1/0;_+=$}return _/x}}yt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),yt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),yt.MAX_AVG_VARIANCE=.42,yt.MAX_INDIVIDUAL_VARIANCE=.8,yt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),yt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),yt.MAX_PIXEL_DRIFT=3,yt.MAX_PATTERN_DRIFT=5,yt.SKIPPED_ROW_COUNT_MAX=25,yt.ROW_STEP=5,yt.BARCODE_MIN_HEIGHT=10;class un{constructor(a,l){if(l.length===0)throw new b;this.field=a;let u=l.length;if(u>1&&l[0]===0){let h=1;for(;h<u&&l[h]===0;)h++;h===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-h),I.arraycopy(l,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);if(a===1){let h=0;for(let x of this.coefficients)h=this.field.add(h,x);return h}let l=this.coefficients[0],u=this.coefficients.length;for(let h=1;h<u;h++)l=this.field.add(this.field.multiply(a,l),this.coefficients[h]);return l}add(a){if(!this.field.equals(a.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return a;if(a.isZero())return this;let l=this.coefficients,u=a.coefficients;if(l.length>u.length){let y=l;l=u,u=y}let h=new Int32Array(u.length),x=u.length-l.length;I.arraycopy(u,0,h,0,x);for(let y=x;y<u.length;y++)h[y]=this.field.add(l[y-x],u[y]);return new un(this.field,h)}subtract(a){if(!this.field.equals(a.field))throw new b("ModulusPolys do not have same ModulusGF field");return a.isZero()?this:this.add(a.negative())}multiply(a){return a instanceof un?this.multiplyOther(a):this.multiplyScalar(a)}multiplyOther(a){if(!this.field.equals(a.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||a.isZero())return new un(this.field,new Int32Array([0]));let l=this.coefficients,u=l.length,h=a.coefficients,x=h.length,y=new Int32Array(u+x-1);for(let E=0;E<u;E++){let _=l[E];for(let T=0;T<x;T++)y[E+T]=this.field.add(y[E+T],this.field.multiply(_,h[T]))}return new un(this.field,y)}negative(){let a=this.coefficients.length,l=new Int32Array(a);for(let u=0;u<a;u++)l[u]=this.field.subtract(0,this.coefficients[u]);return new un(this.field,l)}multiplyScalar(a){if(a===0)return new un(this.field,new Int32Array([0]));if(a===1)return this;let l=this.coefficients.length,u=new Int32Array(l);for(let h=0;h<l;h++)u[h]=this.field.multiply(this.coefficients[h],a);return new un(this.field,u)}multiplyByMonomial(a,l){if(a<0)throw new b;if(l===0)return new un(this.field,new Int32Array([0]));let u=this.coefficients.length,h=new Int32Array(u+a);for(let x=0;x<u;x++)h[x]=this.field.multiply(this.coefficients[x],l);return new un(this.field,h)}toString(){let a=new be;for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);u!==0&&(u<0?(a.append(" - "),u=-u):a.length()>0&&a.append(" + "),(l===0||u!==1)&&a.append(u),l!==0&&(l===1?a.append("x"):(a.append("x^"),a.append(l))))}return a.toString()}}class rf{add(a,l){return(a+l)%this.modulus}subtract(a,l){return(this.modulus+a-l)%this.modulus}exp(a){return this.expTable[a]}log(a){if(a===0)throw new b;return this.logTable[a]}inverse(a){if(a===0)throw new ye;return this.expTable[this.modulus-this.logTable[a]-1]}multiply(a,l){return a===0||l===0?0:this.expTable[(this.logTable[a]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(a){return a===this}}class Ws extends rf{constructor(a,l){super(),this.modulus=a,this.expTable=new Int32Array(a),this.logTable=new Int32Array(a);let u=1;for(let h=0;h<a;h++)this.expTable[h]=u,u=u*l%a;for(let h=0;h<a-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new un(this,new Int32Array([0])),this.one=new un(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,l){if(a<0)throw new b;if(l===0)return this.zero;let u=new Int32Array(a+1);return u[0]=l,new un(this,u)}}Ws.PDF417_GF=new Ws(mt.NUMBER_OF_CODEWORDS,3);class nu{constructor(){this.field=Ws.PDF417_GF}decode(a,l,u){let h=new un(this.field,a),x=new Int32Array(l),y=!1;for(let Q=l;Q>0;Q--){let te=h.evaluateAt(this.field.exp(Q));x[l-Q]=te,te!==0&&(y=!0)}if(!y)return 0;let E=this.field.getOne();if(u!=null)for(const Q of u){let te=this.field.exp(a.length-1-Q),oe=new un(this.field,new Int32Array([this.field.subtract(0,te),1]));E=E.multiply(oe)}let _=new un(this.field,x),T=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),_,l),D=T[0],F=T[1],$=this.findErrorLocations(D),G=this.findErrorMagnitudes(F,D,$);for(let Q=0;Q<$.length;Q++){let te=a.length-1-this.field.log($[Q]);if(te<0)throw A.getChecksumInstance();a[te]=this.field.subtract(a[te],G[Q])}return $.length}runEuclideanAlgorithm(a,l,u){if(a.getDegree()<l.getDegree()){let $=a;a=l,l=$}let h=a,x=l,y=this.field.getZero(),E=this.field.getOne();for(;x.getDegree()>=Math.round(u/2);){let $=h,G=y;if(h=x,y=E,h.isZero())throw A.getChecksumInstance();x=$;let Q=this.field.getZero(),te=h.getCoefficient(h.getDegree()),oe=this.field.inverse(te);for(;x.getDegree()>=h.getDegree()&&!x.isZero();){let ge=x.getDegree()-h.getDegree(),Re=this.field.multiply(x.getCoefficient(x.getDegree()),oe);Q=Q.add(this.field.buildMonomial(ge,Re)),x=x.subtract(h.multiplyByMonomial(ge,Re))}E=Q.multiply(y).subtract(G).negative()}let _=E.getCoefficient(0);if(_===0)throw A.getChecksumInstance();let T=this.field.inverse(_),D=E.multiply(T),F=x.multiply(T);return[D,F]}findErrorLocations(a){let l=a.getDegree(),u=new Int32Array(l),h=0;for(let x=1;x<this.field.getSize()&&h<l;x++)a.evaluateAt(x)===0&&(u[h]=this.field.inverse(x),h++);if(h!==l)throw A.getChecksumInstance();return u}findErrorMagnitudes(a,l,u){let h=l.getDegree(),x=new Int32Array(h);for(let T=1;T<=h;T++)x[h-T]=this.field.multiply(T,l.getCoefficient(T));let y=new un(this.field,x),E=u.length,_=new Int32Array(E);for(let T=0;T<E;T++){let D=this.field.inverse(u[T]),F=this.field.subtract(0,a.evaluateAt(D)),$=this.field.inverse(y.evaluateAt(D));_[T]=this.field.multiply(F,$)}return _}}class ts{constructor(a,l,u,h,x){a instanceof ts?this.constructor_2(a):this.constructor_1(a,l,u,h,x)}constructor_1(a,l,u,h,x){const y=l==null||u==null,E=h==null||x==null;if(y&&E)throw new re;y?(l=new He(0,h.getY()),u=new He(0,x.getY())):E&&(h=new He(a.getWidth()-1,l.getY()),x=new He(a.getWidth()-1,u.getY())),this.image=a,this.topLeft=l,this.bottomLeft=u,this.topRight=h,this.bottomRight=x,this.minX=Math.trunc(Math.min(l.getX(),u.getX())),this.maxX=Math.trunc(Math.max(h.getX(),x.getX())),this.minY=Math.trunc(Math.min(l.getY(),h.getY())),this.maxY=Math.trunc(Math.max(u.getY(),x.getY()))}constructor_2(a){this.image=a.image,this.topLeft=a.getTopLeft(),this.bottomLeft=a.getBottomLeft(),this.topRight=a.getTopRight(),this.bottomRight=a.getBottomRight(),this.minX=a.getMinX(),this.maxX=a.getMaxX(),this.minY=a.getMinY(),this.maxY=a.getMaxY()}static merge(a,l){return a==null?l:l==null?a:new ts(a.image,a.topLeft,a.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(a,l,u){let h=this.topLeft,x=this.bottomLeft,y=this.topRight,E=this.bottomRight;if(a>0){let _=u?this.topLeft:this.topRight,T=Math.trunc(_.getY()-a);T<0&&(T=0);let D=new He(_.getX(),T);u?h=D:y=D}if(l>0){let _=u?this.bottomLeft:this.bottomRight,T=Math.trunc(_.getY()+l);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let D=new He(_.getX(),T);u?x=D:E=D}return new ts(this.image,h,x,y,E)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Oo{constructor(a,l,u,h){this.columnCount=a,this.errorCorrectionLevel=h,this.rowCountUpperPart=l,this.rowCountLowerPart=u,this.rowCount=l+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ga{constructor(){this.buffer=""}static form(a,l){let u=-1;function h(y,E,_,T,D,F){if(y==="%%")return"%";if(l[++u]===void 0)return;y=T?parseInt(T.substr(1)):void 0;let $=D?parseInt(D.substr(1)):void 0,G;switch(F){case"s":G=l[u];break;case"c":G=l[u][0];break;case"f":G=parseFloat(l[u]).toFixed(y);break;case"p":G=parseFloat(l[u]).toPrecision(y);break;case"e":G=parseFloat(l[u]).toExponential(y);break;case"x":G=parseInt(l[u]).toString($||16);break;case"d":G=parseFloat(parseInt(l[u],$||10).toPrecision(y)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString($);let Q=parseInt(_),te=_&&_[0]+""=="0"?"0":" ";for(;G.length<Q;)G=E!==void 0?G+te:te+G;return G}let x=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(x,h)}format(a,...l){this.buffer+=ga.form(a,l)}toString(){return this.buffer}}class Xi{constructor(a){this.boundingBox=new ts(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let l=this.getCodeword(a);if(l!=null)return l;for(let u=1;u<Xi.MAX_NEARBY_DISTANCE;u++){let h=this.imageRowToCodewordIndex(a)-u;if(h>=0&&(l=this.codewords[h],l!=null)||(h=this.imageRowToCodewordIndex(a)+u,h<this.codewords.length&&(l=this.codewords[h],l!=null)))return l}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,l){this.codewords[this.imageRowToCodewordIndex(a)]=l}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const a=new ga;let l=0;for(const u of this.codewords){if(u==null){a.format("%3d:    |   %n",l++);continue}a.format("%3d: %3d|%3d%n",l++,u.getRowNumber(),u.getValue())}return a.toString()}}Xi.MAX_NEARBY_DISTANCE=5;class Da{constructor(){this.values=new Map}setValue(a){a=Math.trunc(a);let l=this.values.get(a);l==null&&(l=0),l++,this.values.set(a,l)}getValue(){let a=-1,l=new Array;for(const[u,h]of this.values.entries()){const x={getKey:()=>u,getValue:()=>h};x.getValue()>a?(a=x.getValue(),l=[],l.push(x.getKey())):x.getValue()===a&&l.push(x.getKey())}return mt.toIntArray(l)}getConfidence(a){return this.values.get(a)}}class nf extends Xi{constructor(a,l){super(a),this._isLeft=l}setRowNumbers(){for(let a of this.getCodewords())a?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(a){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,a);let u=this.getBoundingBox(),h=this._isLeft?u.getTopLeft():u.getTopRight(),x=this._isLeft?u.getBottomLeft():u.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(h.getY())),E=this.imageRowToCodewordIndex(Math.trunc(x.getY())),_=-1,T=1,D=0;for(let F=y;F<E;F++){if(l[F]==null)continue;let $=l[F],G=$.getRowNumber()-_;if(G===0)D++;else if(G===1)T=Math.max(T,D),D=1,_=$.getRowNumber();else if(G<0||$.getRowNumber()>=a.getRowCount()||G>F)l[F]=null;else{let Q;T>2?Q=(T-2)*G:Q=G;let te=Q>=F;for(let oe=1;oe<=Q&&!te;oe++)te=l[F-oe]!=null;te?l[F]=null:(_=$.getRowNumber(),D=1)}}}getRowHeights(){let a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);let l=new Int32Array(a.getRowCount());for(let u of this.getCodewords())if(u!=null){let h=u.getRowNumber();if(h>=l.length)continue;l[h]++}return l}adjustIncompleteIndicatorColumnRowNumbers(a){let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),h=this._isLeft?l.getBottomLeft():l.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(h.getY())),E=this.getCodewords(),_=-1;for(let T=x;T<y;T++){if(E[T]==null)continue;let D=E[T];D.setRowNumberAsRowIndicatorColumn();let F=D.getRowNumber()-_;F===0||(F===1?_=D.getRowNumber():D.getRowNumber()>=a.getRowCount()?E[T]=null:_=D.getRowNumber())}}getBarcodeMetadata(){let a=this.getCodewords(),l=new Da,u=new Da,h=new Da,x=new Da;for(let E of a){if(E==null)continue;E.setRowNumberAsRowIndicatorColumn();let _=E.getValue()%30,T=E.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:u.setValue(_*3+1);break;case 1:x.setValue(_/3),h.setValue(_%3);break;case 2:l.setValue(_+1);break}}if(l.getValue().length===0||u.getValue().length===0||h.getValue().length===0||x.getValue().length===0||l.getValue()[0]<1||u.getValue()[0]+h.getValue()[0]<mt.MIN_ROWS_IN_BARCODE||u.getValue()[0]+h.getValue()[0]>mt.MAX_ROWS_IN_BARCODE)return null;let y=new Oo(l.getValue()[0],u.getValue()[0],h.getValue()[0],x.getValue()[0]);return this.removeIncorrectCodewords(a,y),y}removeIncorrectCodewords(a,l){for(let u=0;u<a.length;u++){let h=a[u];if(a[u]==null)continue;let x=h.getValue()%30,y=h.getRowNumber();if(y>l.getRowCount()){a[u]=null;continue}switch(this._isLeft||(y+=2),y%3){case 0:x*3+1!==l.getRowCountUpperPart()&&(a[u]=null);break;case 1:(Math.trunc(x/3)!==l.getErrorCorrectionLevel()||x%3!==l.getRowCountLowerPart())&&(a[u]=null);break;case 2:x+1!==l.getColumnCount()&&(a[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Io{constructor(a,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=a,this.barcodeColumnCount=a.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let a=mt.MAX_CODEWORDS_IN_BARCODE,l;do l=a,a=this.adjustRowNumbersAndGetCount();while(a>0&&a<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(a){a?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let a=this.adjustRowNumbersByRow();if(a===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let u=this.detectionResultColumns[l].getCodewords();for(let h=0;h<u.length;h++)u[h]!=null&&(u[h].hasValidRowNumber()||this.adjustRowNumbers(l,h,u))}return a}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let a=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<a.length;u++)if(a[u]!=null&&l[u]!=null&&a[u].getRowNumber()===l[u].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let x=this.detectionResultColumns[h].getCodewords()[u];x!=null&&(x.setRowNumber(a[u].getRowNumber()),x.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let a=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let h=l[u].getRowNumber(),x=0;for(let y=this.barcodeColumnCount+1;y>0&&x<this.ADJUST_ROW_NUMBER_SKIP;y--){let E=this.detectionResultColumns[y].getCodewords()[u];E!=null&&(x=Io.adjustRowNumberIfValid(h,x,E),E.hasValidRowNumber()||a++)}}return a}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let a=0,l=this.detectionResultColumns[0].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let h=l[u].getRowNumber(),x=0;for(let y=1;y<this.barcodeColumnCount+1&&x<this.ADJUST_ROW_NUMBER_SKIP;y++){let E=this.detectionResultColumns[y].getCodewords()[u];E!=null&&(x=Io.adjustRowNumberIfValid(h,x,E),E.hasValidRowNumber()||a++)}}return a}static adjustRowNumberIfValid(a,l,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(a)?(u.setRowNumber(a),l=0):++l),l}adjustRowNumbers(a,l,u){if(!this.detectionResultColumns[a-1])return;let h=u[l],x=this.detectionResultColumns[a-1].getCodewords(),y=x;this.detectionResultColumns[a+1]!=null&&(y=this.detectionResultColumns[a+1].getCodewords());let E=new Array(14);E[2]=x[l],E[3]=y[l],l>0&&(E[0]=u[l-1],E[4]=x[l-1],E[5]=y[l-1]),l>1&&(E[8]=u[l-2],E[10]=x[l-2],E[11]=y[l-2]),l<u.length-1&&(E[1]=u[l+1],E[6]=x[l+1],E[7]=y[l+1]),l<u.length-2&&(E[9]=u[l+2],E[12]=x[l+2],E[13]=y[l+2]);for(let _ of E)if(Io.adjustRowNumber(h,_))return}static adjustRowNumber(a,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===a.getBucket()?(a.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(a){this.boundingBox=a}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(a,l){this.detectionResultColumns[a]=l}getDetectionResultColumn(a){return this.detectionResultColumns[a]}toString(){let a=this.detectionResultColumns[0];a==null&&(a=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new ga;for(let u=0;u<a.getCodewords().length;u++){l.format("CW %3d:",u);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){l.format("    |   ");continue}let x=this.detectionResultColumns[h].getCodewords()[u];if(x==null){l.format("    |   ");continue}l.format(" %3d|%3d",x.getRowNumber(),x.getValue())}l.format("%n")}return l.toString()}}class rs{constructor(a,l,u,h){this.rowNumber=rs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(l),this.bucket=Math.trunc(u),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==rs.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}rs.BARCODE_ROW_UNKNOWN=-1;class dn{static initialize(){for(let a=0;a<mt.SYMBOL_TABLE.length;a++){let l=mt.SYMBOL_TABLE[a],u=l&1;for(let h=0;h<mt.BARS_IN_MODULE;h++){let x=0;for(;(l&1)===u;)x+=1,l>>=1;u=l&1,dn.RATIOS_TABLE[a]||(dn.RATIOS_TABLE[a]=new Array(mt.BARS_IN_MODULE)),dn.RATIOS_TABLE[a][mt.BARS_IN_MODULE-h-1]=Math.fround(x/mt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(a){let l=dn.getDecodedCodewordValue(dn.sampleBitCounts(a));return l!==-1?l:dn.getClosestDecodedValue(a)}static sampleBitCounts(a){let l=At.sum(a),u=new Int32Array(mt.BARS_IN_MODULE),h=0,x=0;for(let y=0;y<mt.MODULES_IN_CODEWORD;y++){let E=l/(2*mt.MODULES_IN_CODEWORD)+y*l/mt.MODULES_IN_CODEWORD;x+a[h]<=E&&(x+=a[h],h++),u[h]++}return u}static getDecodedCodewordValue(a){let l=dn.getBitValue(a);return mt.getCodeword(l)===-1?-1:l}static getBitValue(a){let l=0;for(let u=0;u<a.length;u++)for(let h=0;h<a[u];h++)l=l<<1|(u%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(a){let l=At.sum(a),u=new Array(mt.BARS_IN_MODULE);if(l>1)for(let y=0;y<u.length;y++)u[y]=Math.fround(a[y]/l);let h=Ci.MAX_VALUE,x=-1;this.bSymbolTableReady||dn.initialize();for(let y=0;y<dn.RATIOS_TABLE.length;y++){let E=0,_=dn.RATIOS_TABLE[y];for(let T=0;T<mt.BARS_IN_MODULE;T++){let D=Math.fround(_[T]-u[T]);if(E+=Math.fround(D*D),E>=h)break}E<h&&(h=E,x=mt.SYMBOL_TABLE[y])}return x}}dn.bSymbolTableReady=!1,dn.RATIOS_TABLE=new Array(mt.SYMBOL_TABLE.length).map(B=>new Array(mt.BARS_IN_MODULE));class jl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(a){this.segmentIndex=a}getFileId(){return this.fileId}setFileId(a){this.fileId=a}getOptionalData(){return this.optionalData}setOptionalData(a){this.optionalData=a}isLastSegment(){return this.lastSegment}setLastSegment(a){this.lastSegment=a}getSegmentCount(){return this.segmentCount}setSegmentCount(a){this.segmentCount=a}getSender(){return this.sender||null}setSender(a){this.sender=a}getAddressee(){return this.addressee||null}setAddressee(a){this.addressee=a}getFileName(){return this.fileName}setFileName(a){this.fileName=a}getFileSize(){return this.fileSize}setFileSize(a){this.fileSize=a}getChecksum(){return this.checksum}setChecksum(a){this.checksum=a}getTimestamp(){return this.timestamp}setTimestamp(a){this.timestamp=a}}class iu{static parseLong(a,l=void 0){return parseInt(a,l)}}class xa extends m{}xa.kind="NullPointerException";class au{writeBytes(a){this.writeBytesOffset(a,0,a.length)}writeBytesOffset(a,l,u){if(a==null)throw new xa;if(l<0||l>a.length||u<0||l+u>a.length||l+u<0)throw new P;if(u===0)return;for(let h=0;h<u;h++)this.write(a[l+h])}flush(){}close(){}}class Rl extends m{}class af extends au{constructor(a=32){if(super(),this.count=0,a<0)throw new b("Negative initial size: "+a);this.buf=new Uint8Array(a)}ensureCapacity(a){a-this.buf.length>0&&this.grow(a)}grow(a){let u=this.buf.length<<1;if(u-a<0&&(u=a),u<0){if(a<0)throw new Rl;u=R.MAX_VALUE}this.buf=L.copyOfUint8Array(this.buf,u)}write(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1}writeBytesOffset(a,l,u){if(l<0||l>a.length||u<0||l+u-a.length>0)throw new P;this.ensureCapacity(this.count+u),I.arraycopy(a,l,this.buf,this.count,u),this.count+=u}writeTo(a){a.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return L.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(a){return a?typeof a=="string"?this.toString_string(a):this.toString_number(a):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(a){return new String(this.buf).toString()}toString_number(a){return new String(this.buf).toString()}close(){}}var Lt;(function(B){B[B.ALPHA=0]="ALPHA",B[B.LOWER=1]="LOWER",B[B.MIXED=2]="MIXED",B[B.PUNCT=3]="PUNCT",B[B.ALPHA_SHIFT=4]="ALPHA_SHIFT",B[B.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Lt||(Lt={}));function To(){if(typeof window<"u")return window.BigInt||null;if(typeof rh<"u")return rh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ko;function Fr(B){if(typeof ko>"u"&&(ko=To()),ko===null)throw new Error("BigInt is not supported!");return ko(B)}function Vs(){let B=[];B[0]=Fr(1);let a=Fr(900);B[1]=a;for(let l=2;l<16;l++)B[l]=B[l-1]*a;return B}class xe{static decode(a,l){let u=new be(""),h=Y.ISO8859_1;u.enableDecoding(h);let x=1,y=a[x++],E=new jl;for(;x<a[0];){switch(y){case xe.TEXT_COMPACTION_MODE_LATCH:x=xe.textCompaction(a,x,u);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:x=xe.byteCompaction(y,a,h,x,u);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[x++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:x=xe.numericCompaction(a,x,u);break;case xe.ECI_CHARSET:Y.getCharacterSetECIByValue(a[x++]);break;case xe.ECI_GENERAL_PURPOSE:x+=2;break;case xe.ECI_USER_DEFINED:x++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:x=xe.decodeMacroBlock(a,x,E);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new H;default:x--,x=xe.textCompaction(a,x,u);break}if(x<a.length)y=a[x++];else throw H.getFormatInstance()}if(u.length()===0)throw H.getFormatInstance();let _=new ae(null,u.toString(),null,l);return _.setOther(E),_}static decodeMacroBlock(a,l,u){if(l+xe.NUMBER_OF_SEQUENCE_CODEWORDS>a[0])throw H.getFormatInstance();let h=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let E=0;E<xe.NUMBER_OF_SEQUENCE_CODEWORDS;E++,l++)h[E]=a[l];u.setSegmentIndex(R.parseInt(xe.decodeBase900toBase10(h,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let x=new be;l=xe.textCompaction(a,l,x),u.setFileId(x.toString());let y=-1;for(a[l]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(y=l+1);l<a[0];)switch(a[l]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,a[l]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let E=new be;l=xe.textCompaction(a,l+1,E),u.setFileName(E.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new be;l=xe.textCompaction(a,l+1,_),u.setSender(_.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new be;l=xe.textCompaction(a,l+1,T),u.setAddressee(T.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let D=new be;l=xe.numericCompaction(a,l+1,D),u.setSegmentCount(R.parseInt(D.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let F=new be;l=xe.numericCompaction(a,l+1,F),u.setTimestamp(iu.parseLong(F.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let $=new be;l=xe.numericCompaction(a,l+1,$),u.setChecksum(R.parseInt($.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let G=new be;l=xe.numericCompaction(a,l+1,G),u.setFileSize(iu.parseLong(G.toString()));break;default:throw H.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:l++,u.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(y!==-1){let E=l-y;u.isLastSegment()&&E--,u.setOptionalData(L.copyOfRange(a,y,y+E))}return l}static textCompaction(a,l,u){let h=new Int32Array((a[0]-l)*2),x=new Int32Array((a[0]-l)*2),y=0,E=!1;for(;l<a[0]&&!E;){let _=a[l++];if(_<xe.TEXT_COMPACTION_MODE_LATCH)h[y]=_/30,h[y+1]=_%30,y+=2;else switch(_){case xe.TEXT_COMPACTION_MODE_LATCH:h[y++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:l--,E=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[y]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=a[l++],x[y]=_,y++;break}}return xe.decodeTextCompaction(h,x,y,u),l}static decodeTextCompaction(a,l,u,h){let x=Lt.ALPHA,y=Lt.ALPHA,E=0;for(;E<u;){let _=a[E],T="";switch(x){case Lt.ALPHA:if(_<26)T=String.fromCharCode(65+_);else switch(_){case 26:T=" ";break;case xe.LL:x=Lt.LOWER;break;case xe.ML:x=Lt.MIXED;break;case xe.PS:y=x,x=Lt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[E]);break;case xe.TEXT_COMPACTION_MODE_LATCH:x=Lt.ALPHA;break}break;case Lt.LOWER:if(_<26)T=String.fromCharCode(97+_);else switch(_){case 26:T=" ";break;case xe.AS:y=x,x=Lt.ALPHA_SHIFT;break;case xe.ML:x=Lt.MIXED;break;case xe.PS:y=x,x=Lt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[E]);break;case xe.TEXT_COMPACTION_MODE_LATCH:x=Lt.ALPHA;break}break;case Lt.MIXED:if(_<xe.PL)T=xe.MIXED_CHARS[_];else switch(_){case xe.PL:x=Lt.PUNCT;break;case 26:T=" ";break;case xe.LL:x=Lt.LOWER;break;case xe.AL:x=Lt.ALPHA;break;case xe.PS:y=x,x=Lt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[E]);break;case xe.TEXT_COMPACTION_MODE_LATCH:x=Lt.ALPHA;break}break;case Lt.PUNCT:if(_<xe.PAL)T=xe.PUNCT_CHARS[_];else switch(_){case xe.PAL:x=Lt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[E]);break;case xe.TEXT_COMPACTION_MODE_LATCH:x=Lt.ALPHA;break}break;case Lt.ALPHA_SHIFT:if(x=y,_<26)T=String.fromCharCode(65+_);else switch(_){case 26:T=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:x=Lt.ALPHA;break}break;case Lt.PUNCT_SHIFT:if(x=y,_<xe.PAL)T=xe.PUNCT_CHARS[_];else switch(_){case xe.PAL:x=Lt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[E]);break;case xe.TEXT_COMPACTION_MODE_LATCH:x=Lt.ALPHA;break}break}T!==""&&h.append(T),E++}}static byteCompaction(a,l,u,h,x){let y=new af,E=0,_=0,T=!1;switch(a){case xe.BYTE_COMPACTION_MODE_LATCH:let D=new Int32Array(6),F=l[h++];for(;h<l[0]&&!T;)switch(D[E++]=F,_=900*_+F,F=l[h++],F){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,T=!0;break;default:if(E%5===0&&E>0){for(let $=0;$<6;++$)y.write(Number(Fr(_)>>Fr(8*(5-$))));_=0,E=0}break}h===l[0]&&F<xe.TEXT_COMPACTION_MODE_LATCH&&(D[E++]=F);for(let $=0;$<E;$++)y.write(D[$]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;h<l[0]&&!T;){let $=l[h++];if($<xe.TEXT_COMPACTION_MODE_LATCH)E++,_=900*_+$;else switch($){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,T=!0;break}if(E%5===0&&E>0){for(let G=0;G<6;++G)y.write(Number(Fr(_)>>Fr(8*(5-G))));_=0,E=0}}break}return x.append(se.decode(y.toByteArray(),u)),h}static numericCompaction(a,l,u){let h=0,x=!1,y=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;l<a[0]&&!x;){let E=a[l++];if(l===a[0]&&(x=!0),E<xe.TEXT_COMPACTION_MODE_LATCH)y[h]=E,h++;else switch(E){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:l--,x=!0;break}(h%xe.MAX_NUMERIC_CODEWORDS===0||E===xe.NUMERIC_COMPACTION_MODE_LATCH||x)&&h>0&&(u.append(xe.decodeBase900toBase10(y,h)),h=0)}return l}static decodeBase900toBase10(a,l){let u=Fr(0);for(let x=0;x<l;x++)u+=xe.EXP900[l-x-1]*Fr(a[x]);let h=u.toString();if(h.charAt(0)!=="1")throw new H;return h.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=To()?Vs():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class bt{constructor(){}static decode(a,l,u,h,x,y,E){let _=new ts(a,l,u,h,x),T=null,D=null,F;for(let Q=!0;;Q=!1){if(l!=null&&(T=bt.getRowIndicatorColumn(a,_,l,!0,y,E)),h!=null&&(D=bt.getRowIndicatorColumn(a,_,h,!1,y,E)),F=bt.merge(T,D),F==null)throw re.getNotFoundInstance();let te=F.getBoundingBox();if(Q&&te!=null&&(te.getMinY()<_.getMinY()||te.getMaxY()>_.getMaxY()))_=te;else break}F.setBoundingBox(_);let $=F.getBarcodeColumnCount()+1;F.setDetectionResultColumn(0,T),F.setDetectionResultColumn($,D);let G=T!=null;for(let Q=1;Q<=$;Q++){let te=G?Q:$-Q;if(F.getDetectionResultColumn(te)!==void 0)continue;let oe;te===0||te===$?oe=new nf(_,te===0):oe=new Xi(_),F.setDetectionResultColumn(te,oe);let ge=-1,Re=ge;for(let Me=_.getMinY();Me<=_.getMaxY();Me++){if(ge=bt.getStartColumn(F,te,Me,G),ge<0||ge>_.getMaxX()){if(Re===-1)continue;ge=Re}let Te=bt.detectCodeword(a,_.getMinX(),_.getMaxX(),G,ge,Me,y,E);Te!=null&&(oe.setCodeword(Me,Te),Re=ge,y=Math.min(y,Te.getWidth()),E=Math.max(E,Te.getWidth()))}}return bt.createDecoderResult(F)}static merge(a,l){if(a==null&&l==null)return null;let u=bt.getBarcodeMetadata(a,l);if(u==null)return null;let h=ts.merge(bt.adjustBoundingBox(a),bt.adjustBoundingBox(l));return new Io(u,h)}static adjustBoundingBox(a){if(a==null)return null;let l=a.getRowHeights();if(l==null)return null;let u=bt.getMax(l),h=0;for(let E of l)if(h+=u-E,E>0)break;let x=a.getCodewords();for(let E=0;h>0&&x[E]==null;E++)h--;let y=0;for(let E=l.length-1;E>=0&&(y+=u-l[E],!(l[E]>0));E--);for(let E=x.length-1;y>0&&x[E]==null;E--)y--;return a.getBoundingBox().addMissingRows(h,y,a.isLeft())}static getMax(a){let l=-1;for(let u of a)l=Math.max(l,u);return l}static getBarcodeMetadata(a,l){let u;if(a==null||(u=a.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let h;return l==null||(h=l.getBarcodeMetadata())==null?u:u.getColumnCount()!==h.getColumnCount()&&u.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&u.getRowCount()!==h.getRowCount()?null:u}static getRowIndicatorColumn(a,l,u,h,x,y){let E=new nf(l,h);for(let _=0;_<2;_++){let T=_===0?1:-1,D=Math.trunc(Math.trunc(u.getX()));for(let F=Math.trunc(Math.trunc(u.getY()));F<=l.getMaxY()&&F>=l.getMinY();F+=T){let $=bt.detectCodeword(a,0,a.getWidth(),h,D,F,x,y);$!=null&&(E.setCodeword(F,$),h?D=$.getStartX():D=$.getEndX())}}return E}static adjustCodewordCount(a,l){let u=l[0][1],h=u.getValue(),x=a.getBarcodeColumnCount()*a.getBarcodeRowCount()-bt.getNumberOfECCodeWords(a.getBarcodeECLevel());if(h.length===0){if(x<1||x>mt.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();u.setValue(x)}else h[0]!==x&&u.setValue(x)}static createDecoderResult(a){let l=bt.createBarcodeMatrix(a);bt.adjustCodewordCount(a,l);let u=new Array,h=new Int32Array(a.getBarcodeRowCount()*a.getBarcodeColumnCount()),x=[],y=new Array;for(let _=0;_<a.getBarcodeRowCount();_++)for(let T=0;T<a.getBarcodeColumnCount();T++){let D=l[_][T+1].getValue(),F=_*a.getBarcodeColumnCount()+T;D.length===0?u.push(F):D.length===1?h[F]=D[0]:(y.push(F),x.push(D))}let E=new Array(x.length);for(let _=0;_<E.length;_++)E[_]=x[_];return bt.createDecoderResultFromAmbiguousValues(a.getBarcodeECLevel(),h,mt.toIntArray(u),mt.toIntArray(y),E)}static createDecoderResultFromAmbiguousValues(a,l,u,h,x){let y=new Int32Array(h.length),E=100;for(;E-- >0;){for(let _=0;_<y.length;_++)l[h[_]]=x[_][y[_]];try{return bt.decodeCodewords(l,a,u)}catch(_){if(!(_ instanceof A))throw _}if(y.length===0)throw A.getChecksumInstance();for(let _=0;_<y.length;_++)if(y[_]<x[_].length-1){y[_]++;break}else if(y[_]=0,_===y.length-1)throw A.getChecksumInstance()}throw A.getChecksumInstance()}static createBarcodeMatrix(a){let l=Array.from({length:a.getBarcodeRowCount()},()=>new Array(a.getBarcodeColumnCount()+2));for(let h=0;h<l.length;h++)for(let x=0;x<l[h].length;x++)l[h][x]=new Da;let u=0;for(let h of a.getDetectionResultColumns()){if(h!=null){for(let x of h.getCodewords())if(x!=null){let y=x.getRowNumber();if(y>=0){if(y>=l.length)continue;l[y][u].setValue(x.getValue())}}}u++}return l}static isValidBarcodeColumn(a,l){return l>=0&&l<=a.getBarcodeColumnCount()+1}static getStartColumn(a,l,u,h){let x=h?1:-1,y=null;if(bt.isValidBarcodeColumn(a,l-x)&&(y=a.getDetectionResultColumn(l-x).getCodeword(u)),y!=null)return h?y.getEndX():y.getStartX();if(y=a.getDetectionResultColumn(l).getCodewordNearby(u),y!=null)return h?y.getStartX():y.getEndX();if(bt.isValidBarcodeColumn(a,l-x)&&(y=a.getDetectionResultColumn(l-x).getCodewordNearby(u)),y!=null)return h?y.getEndX():y.getStartX();let E=0;for(;bt.isValidBarcodeColumn(a,l-x);){l-=x;for(let _ of a.getDetectionResultColumn(l).getCodewords())if(_!=null)return(h?_.getEndX():_.getStartX())+x*E*(_.getEndX()-_.getStartX());E++}return h?a.getBoundingBox().getMinX():a.getBoundingBox().getMaxX()}static detectCodeword(a,l,u,h,x,y,E,_){x=bt.adjustCodewordStartColumn(a,l,u,h,x,y);let T=bt.getModuleBitCount(a,l,u,h,x,y);if(T==null)return null;let D,F=At.sum(T);if(h)D=x+F;else{for(let Q=0;Q<T.length/2;Q++){let te=T[Q];T[Q]=T[T.length-1-Q],T[T.length-1-Q]=te}D=x,x=D-F}if(!bt.checkCodewordSkew(F,E,_))return null;let $=dn.getDecodedValue(T),G=mt.getCodeword($);return G===-1?null:new rs(x,D,bt.getCodewordBucketNumber($),G)}static getModuleBitCount(a,l,u,h,x,y){let E=x,_=new Int32Array(8),T=0,D=h?1:-1,F=h;for(;(h?E<u:E>=l)&&T<_.length;)a.get(E,y)===F?(_[T]++,E+=D):(T++,F=!F);return T===_.length||E===(h?u:l)&&T===_.length-1?_:null}static getNumberOfECCodeWords(a){return 2<<a}static adjustCodewordStartColumn(a,l,u,h,x,y){let E=x,_=h?-1:1;for(let T=0;T<2;T++){for(;(h?E>=l:E<u)&&h===a.get(E,y);){if(Math.abs(x-E)>bt.CODEWORD_SKEW_SIZE)return x;E+=_}_=-_,h=!h}return E}static checkCodewordSkew(a,l,u){return l-bt.CODEWORD_SKEW_SIZE<=a&&a<=u+bt.CODEWORD_SKEW_SIZE}static decodeCodewords(a,l,u){if(a.length===0)throw H.getFormatInstance();let h=1<<l+1,x=bt.correctErrors(a,u,h);bt.verifyCodewordCount(a,h);let y=xe.decode(a,""+l);return y.setErrorsCorrected(x),y.setErasures(u.length),y}static correctErrors(a,l,u){if(l!=null&&l.length>u/2+bt.MAX_ERRORS||u<0||u>bt.MAX_EC_CODEWORDS)throw A.getChecksumInstance();return bt.errorCorrection.decode(a,u,l)}static verifyCodewordCount(a,l){if(a.length<4)throw H.getFormatInstance();let u=a[0];if(u>a.length)throw H.getFormatInstance();if(u===0)if(l<a.length)a[0]=a.length-l;else throw H.getFormatInstance()}static getBitCountForCodeword(a){let l=new Int32Array(8),u=0,h=l.length-1;for(;!((a&1)!==u&&(u=a&1,h--,h<0));)l[h]++,a>>=1;return l}static getCodewordBucketNumber(a){return a instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(a):this.getCodewordBucketNumber_number(a)}static getCodewordBucketNumber_number(a){return bt.getCodewordBucketNumber(bt.getBitCountForCodeword(a))}static getCodewordBucketNumber_Int32Array(a){return(a[0]-a[2]+a[4]-a[6]+9)%9}static toString(a){let l=new ga;for(let u=0;u<a.length;u++){l.format("Row %2d: ",u);for(let h=0;h<a[u].length;h++){let x=a[u][h];x.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",x.getValue()[0],x.getConfidence(x.getValue()[0]))}l.format("%n")}return l.toString()}}bt.CODEWORD_SKEW_SIZE=2,bt.MAX_ERRORS=3,bt.MAX_EC_CODEWORDS=512,bt.errorCorrection=new nu;class fn{decode(a,l=null){let u=fn.decode(a,l,!1);if(u==null||u.length===0||u[0]==null)throw re.getNotFoundInstance();return u[0]}decodeMultiple(a,l=null){try{return fn.decode(a,l,!0)}catch(u){throw u instanceof H||u instanceof A?re.getNotFoundInstance():u}}static decode(a,l,u){const h=new Array,x=yt.detectMultiple(a,l,u);for(const y of x.getPoints()){const E=bt.decode(x.getBits(),y[4],y[5],y[6],y[7],fn.getMinCodewordWidth(y),fn.getMaxCodewordWidth(y)),_=new Ue(E.getText(),E.getRawBytes(),void 0,y,Z.PDF_417);_.putMetadata(fe.ERROR_CORRECTION_LEVEL,E.getECLevel());const T=E.getOther();T!=null&&_.putMetadata(fe.PDF417_EXTRA_METADATA,T),h.push(_)}return h.map(y=>y)}static getMaxWidth(a,l){return a==null||l==null?0:Math.trunc(Math.abs(a.getX()-l.getX()))}static getMinWidth(a,l){return a==null||l==null?R.MAX_VALUE:Math.trunc(Math.abs(a.getX()-l.getX()))}static getMaxCodewordWidth(a){return Math.floor(Math.max(Math.max(fn.getMaxWidth(a[0],a[4]),fn.getMaxWidth(a[6],a[2])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN),Math.max(fn.getMaxWidth(a[1],a[5]),fn.getMaxWidth(a[7],a[3])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(a){return Math.floor(Math.min(Math.min(fn.getMinWidth(a[0],a[4]),fn.getMinWidth(a[6],a[2])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN),Math.min(fn.getMinWidth(a[1],a[5]),fn.getMinWidth(a[7],a[3])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Hs extends m{}Hs.kind="ReaderException";class Ml{constructor(a,l){this.verbose=a===!0,l&&this.setHints(l)}decode(a,l){return l&&this.setHints(l),this.decodeInternal(a)}decodeWithState(a){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(a)}setHints(a){this.hints=a;const l=!n(a)&&a.get(V.TRY_HARDER)===!0,u=n(a)?null:a.get(V.POSSIBLE_FORMATS),h=new Array;if(!n(u)){const x=u.some(y=>y===Z.UPC_A||y===Z.UPC_E||y===Z.EAN_13||y===Z.EAN_8||y===Z.CODABAR||y===Z.CODE_39||y===Z.CODE_93||y===Z.CODE_128||y===Z.ITF||y===Z.RSS_14||y===Z.RSS_EXPANDED);x&&!l&&h.push(new Us(a,this.verbose)),u.includes(Z.QR_CODE)&&h.push(new Pn),u.includes(Z.DATA_MATRIX)&&h.push(new Oi),u.includes(Z.AZTEC)&&h.push(new $n),u.includes(Z.PDF_417)&&h.push(new fn),x&&l&&h.push(new Us(a,this.verbose))}h.length===0&&(l||h.push(new Us(a,this.verbose)),h.push(new Pn),h.push(new Oi),h.push(new $n),h.push(new fn),l&&h.push(new Us(a,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const a of this.readers)a.reset()}decodeInternal(a){if(this.readers===null)throw new Hs("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(a,this.hints)}catch(u){if(u instanceof Hs)continue}throw new re("No MultiFormat Readers were able to detect the code.")}}class Po extends $e{constructor(a=null,l=500){const u=new Ml;u.setHints(a),super(u,l)}decodeBitmap(a){return this.reader.decodeWithState(a)}}class Dl extends $e{constructor(a=500){super(new fn,a)}}class sf extends $e{constructor(a=500){super(new Pn,a)}}var su;(function(B){B[B.ERROR_CORRECTION=0]="ERROR_CORRECTION",B[B.CHARACTER_SET=1]="CHARACTER_SET",B[B.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",B[B.MIN_SIZE=3]="MIN_SIZE",B[B.MAX_SIZE=4]="MAX_SIZE",B[B.MARGIN=5]="MARGIN",B[B.PDF417_COMPACT=6]="PDF417_COMPACT",B[B.PDF417_COMPACTION=7]="PDF417_COMPACTION",B[B.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",B[B.AZTEC_LAYERS=9]="AZTEC_LAYERS",B[B.QR_VERSION=10]="QR_VERSION"})(su||(su={}));var qr=su;class ou{constructor(a){this.field=a,this.cachedGenerators=[],this.cachedGenerators.push(new De(a,Int32Array.from([1])))}buildGenerator(a){const l=this.cachedGenerators;if(a>=l.length){let u=l[l.length-1];const h=this.field;for(let x=l.length;x<=a;x++){const y=u.multiply(new De(h,Int32Array.from([1,h.exp(x-1+h.getGeneratorBase())])));l.push(y),u=y}}return l[a]}encode(a,l){if(l===0)throw new b("No error correction bytes");const u=a.length-l;if(u<=0)throw new b("No data bytes provided");const h=this.buildGenerator(l),x=new Int32Array(u);I.arraycopy(a,0,x,0,u);let y=new De(this.field,x);y=y.multiplyByMonomial(l,1);const _=y.divide(h)[1].getCoefficients(),T=l-_.length;for(let D=0;D<T;D++)a[u+D]=0;I.arraycopy(_,0,a,u+T,_.length)}}class ur{constructor(){}static applyMaskPenaltyRule1(a){return ur.applyMaskPenaltyRule1Internal(a,!0)+ur.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let l=0;const u=a.getArray(),h=a.getWidth(),x=a.getHeight();for(let y=0;y<x-1;y++){const E=u[y];for(let _=0;_<h-1;_++){const T=E[_];T===E[_+1]&&T===u[y+1][_]&&T===u[y+1][_+1]&&l++}}return ur.N2*l}static applyMaskPenaltyRule3(a){let l=0;const u=a.getArray(),h=a.getWidth(),x=a.getHeight();for(let y=0;y<x;y++)for(let E=0;E<h;E++){const _=u[y];E+6<h&&_[E]===1&&_[E+1]===0&&_[E+2]===1&&_[E+3]===1&&_[E+4]===1&&_[E+5]===0&&_[E+6]===1&&(ur.isWhiteHorizontal(_,E-4,E)||ur.isWhiteHorizontal(_,E+7,E+11))&&l++,y+6<x&&u[y][E]===1&&u[y+1][E]===0&&u[y+2][E]===1&&u[y+3][E]===1&&u[y+4][E]===1&&u[y+5][E]===0&&u[y+6][E]===1&&(ur.isWhiteVertical(u,E,y-4,y)||ur.isWhiteVertical(u,E,y+7,y+11))&&l++}return l*ur.N3}static isWhiteHorizontal(a,l,u){l=Math.max(l,0),u=Math.min(u,a.length);for(let h=l;h<u;h++)if(a[h]===1)return!1;return!0}static isWhiteVertical(a,l,u,h){u=Math.max(u,0),h=Math.min(h,a.length);for(let x=u;x<h;x++)if(a[x][l]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let l=0;const u=a.getArray(),h=a.getWidth(),x=a.getHeight();for(let _=0;_<x;_++){const T=u[_];for(let D=0;D<h;D++)T[D]===1&&l++}const y=a.getHeight()*a.getWidth();return Math.floor(Math.abs(l*2-y)*10/y)*ur.N4}static getDataMaskBit(a,l,u){let h,x;switch(a){case 0:h=u+l&1;break;case 1:h=u&1;break;case 2:h=l%3;break;case 3:h=(u+l)%3;break;case 4:h=Math.floor(u/2)+Math.floor(l/3)&1;break;case 5:x=u*l,h=(x&1)+x%3;break;case 6:x=u*l,h=(x&1)+x%3&1;break;case 7:x=u*l,h=x%3+(u+l&1)&1;break;default:throw new b("Invalid mask pattern: "+a)}return h===0}static applyMaskPenaltyRule1Internal(a,l){let u=0;const h=l?a.getHeight():a.getWidth(),x=l?a.getWidth():a.getHeight(),y=a.getArray();for(let E=0;E<h;E++){let _=0,T=-1;for(let D=0;D<x;D++){const F=l?y[E][D]:y[D][E];F===T?_++:(_>=5&&(u+=ur.N1+(_-5)),_=1,T=F)}_>=5&&(u+=ur.N1+(_-5))}return u}}ur.N1=3,ur.N2=3,ur.N3=40,ur.N4=10;class Ll{constructor(a,l){this.width=a,this.height=l;const u=new Array(l);for(let h=0;h!==l;h++)u[h]=new Uint8Array(a);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(a,l){return this.bytes[l][a]}getArray(){return this.bytes}setNumber(a,l,u){this.bytes[l][a]=u}setBoolean(a,l,u){this.bytes[l][a]=u?1:0}clear(a){for(const l of this.bytes)L.fill(l,a)}equals(a){if(!(a instanceof Ll))return!1;const l=a;if(this.width!==l.width||this.height!==l.height)return!1;for(let u=0,h=this.height;u<h;++u){const x=this.bytes[u],y=l.bytes[u];for(let E=0,_=this.width;E<_;++E)if(x[E]!==y[E])return!1}return!0}toString(){const a=new be;for(let l=0,u=this.height;l<u;++l){const h=this.bytes[l];for(let x=0,y=this.width;x<y;++x)switch(h[x]){case 0:a.append(" 0");break;case 1:a.append(" 1");break;default:a.append("  ");break}a.append(`
`)}return a.toString()}}class ns{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const a=new be;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<ns.NUM_MASK_PATTERNS}}ns.NUM_MASK_PATTERNS=8;class Zt extends m{}Zt.kind="WriterException";class ft{constructor(){}static clearMatrix(a){a.clear(255)}static buildMatrix(a,l,u,h,x){ft.clearMatrix(x),ft.embedBasicPatterns(u,x),ft.embedTypeInfo(l,h,x),ft.maybeEmbedVersionInfo(u,x),ft.embedDataBits(a,h,x)}static embedBasicPatterns(a,l){ft.embedPositionDetectionPatternsAndSeparators(l),ft.embedDarkDotAtLeftBottomCorner(l),ft.maybeEmbedPositionAdjustmentPatterns(a,l),ft.embedTimingPatterns(l)}static embedTypeInfo(a,l,u){const h=new U;ft.makeTypeInfoBits(a,l,h);for(let x=0,y=h.getSize();x<y;++x){const E=h.get(h.getSize()-1-x),_=ft.TYPE_INFO_COORDINATES[x],T=_[0],D=_[1];if(u.setBoolean(T,D,E),x<8){const F=u.getWidth()-x-1;u.setBoolean(F,8,E)}else{const $=u.getHeight()-7+(x-8);u.setBoolean(8,$,E)}}}static maybeEmbedVersionInfo(a,l){if(a.getVersionNumber()<7)return;const u=new U;ft.makeVersionInfoBits(a,u);let h=17;for(let x=0;x<6;++x)for(let y=0;y<3;++y){const E=u.get(h);h--,l.setBoolean(x,l.getHeight()-11+y,E),l.setBoolean(l.getHeight()-11+y,x,E)}}static embedDataBits(a,l,u){let h=0,x=-1,y=u.getWidth()-1,E=u.getHeight()-1;for(;y>0;){for(y===6&&(y-=1);E>=0&&E<u.getHeight();){for(let _=0;_<2;++_){const T=y-_;if(!ft.isEmpty(u.get(T,E)))continue;let D;h<a.getSize()?(D=a.get(h),++h):D=!1,l!==255&&ur.getDataMaskBit(l,T,E)&&(D=!D),u.setBoolean(T,E,D)}E+=x}x=-x,E+=x,y-=2}if(h!==a.getSize())throw new Zt("Not all bits consumed: "+h+"/"+a.getSize())}static findMSBSet(a){return 32-R.numberOfLeadingZeros(a)}static calculateBCHCode(a,l){if(l===0)throw new b("0 polynomial");const u=ft.findMSBSet(l);for(a<<=u-1;ft.findMSBSet(a)>=u;)a^=l<<ft.findMSBSet(a)-u;return a}static makeTypeInfoBits(a,l,u){if(!ns.isValidMaskPattern(l))throw new Zt("Invalid mask pattern");const h=a.getBits()<<3|l;u.appendBits(h,5);const x=ft.calculateBCHCode(h,ft.TYPE_INFO_POLY);u.appendBits(x,10);const y=new U;if(y.appendBits(ft.TYPE_INFO_MASK_PATTERN,15),u.xor(y),u.getSize()!==15)throw new Zt("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(a,l){l.appendBits(a.getVersionNumber(),6);const u=ft.calculateBCHCode(a.getVersionNumber(),ft.VERSION_INFO_POLY);if(l.appendBits(u,12),l.getSize()!==18)throw new Zt("should not happen but we got: "+l.getSize())}static isEmpty(a){return a===255}static embedTimingPatterns(a){for(let l=8;l<a.getWidth()-8;++l){const u=(l+1)%2;ft.isEmpty(a.get(l,6))&&a.setNumber(l,6,u),ft.isEmpty(a.get(6,l))&&a.setNumber(6,l,u)}}static embedDarkDotAtLeftBottomCorner(a){if(a.get(8,a.getHeight()-8)===0)throw new Zt;a.setNumber(8,a.getHeight()-8,1)}static embedHorizontalSeparationPattern(a,l,u){for(let h=0;h<8;++h){if(!ft.isEmpty(u.get(a+h,l)))throw new Zt;u.setNumber(a+h,l,0)}}static embedVerticalSeparationPattern(a,l,u){for(let h=0;h<7;++h){if(!ft.isEmpty(u.get(a,l+h)))throw new Zt;u.setNumber(a,l+h,0)}}static embedPositionAdjustmentPattern(a,l,u){for(let h=0;h<5;++h){const x=ft.POSITION_ADJUSTMENT_PATTERN[h];for(let y=0;y<5;++y)u.setNumber(a+y,l+h,x[y])}}static embedPositionDetectionPattern(a,l,u){for(let h=0;h<7;++h){const x=ft.POSITION_DETECTION_PATTERN[h];for(let y=0;y<7;++y)u.setNumber(a+y,l+h,x[y])}}static embedPositionDetectionPatternsAndSeparators(a){const l=ft.POSITION_DETECTION_PATTERN[0].length;ft.embedPositionDetectionPattern(0,0,a),ft.embedPositionDetectionPattern(a.getWidth()-l,0,a),ft.embedPositionDetectionPattern(0,a.getWidth()-l,a);const u=8;ft.embedHorizontalSeparationPattern(0,u-1,a),ft.embedHorizontalSeparationPattern(a.getWidth()-u,u-1,a),ft.embedHorizontalSeparationPattern(0,a.getWidth()-u,a);const h=7;ft.embedVerticalSeparationPattern(h,0,a),ft.embedVerticalSeparationPattern(a.getHeight()-h-1,0,a),ft.embedVerticalSeparationPattern(h,a.getHeight()-h,a)}static maybeEmbedPositionAdjustmentPatterns(a,l){if(a.getVersionNumber()<2)return;const u=a.getVersionNumber()-1,h=ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let x=0,y=h.length;x!==y;x++){const E=h[x];if(E>=0)for(let _=0;_!==y;_++){const T=h[_];T>=0&&ft.isEmpty(l.get(T,E))&&ft.embedPositionAdjustmentPattern(T-2,E-2,l)}}}}ft.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ft.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ft.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ft.VERSION_INFO_POLY=7973,ft.TYPE_INFO_POLY=1335,ft.TYPE_INFO_MASK_PATTERN=21522;class dm{constructor(a,l){this.dataBytes=a,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class tr{constructor(){}static calculateMaskPenalty(a){return ur.applyMaskPenaltyRule1(a)+ur.applyMaskPenaltyRule2(a)+ur.applyMaskPenaltyRule3(a)+ur.applyMaskPenaltyRule4(a)}static encode(a,l,u=null){let h=tr.DEFAULT_BYTE_MODE_ENCODING;const x=u!==null&&u.get(qr.CHARACTER_SET)!==void 0;x&&(h=u.get(qr.CHARACTER_SET).toString());const y=this.chooseMode(a,h),E=new U;if(y===dt.BYTE&&(x||tr.DEFAULT_BYTE_MODE_ENCODING!==h)){const Me=Y.getCharacterSetECIByName(h);Me!==void 0&&this.appendECI(Me,E)}this.appendModeInfo(y,E);const _=new U;this.appendBytes(a,y,_,h);let T;if(u!==null&&u.get(qr.QR_VERSION)!==void 0){const Me=Number.parseInt(u.get(qr.QR_VERSION).toString(),10);T=ct.getVersionForNumber(Me);const Te=this.calculateBitsNeeded(y,E,_,T);if(!this.willFit(Te,T,l))throw new Zt("Data too big for requested version")}else T=this.recommendVersion(l,y,E,_);const D=new U;D.appendBitArray(E);const F=y===dt.BYTE?_.getSizeInBytes():a.length;this.appendLengthInfo(F,T,y,D),D.appendBitArray(_);const $=T.getECBlocksForLevel(l),G=T.getTotalCodewords()-$.getTotalECCodewords();this.terminateBits(G,D);const Q=this.interleaveWithECBytes(D,T.getTotalCodewords(),G,$.getNumBlocks()),te=new ns;te.setECLevel(l),te.setMode(y),te.setVersion(T);const oe=T.getDimensionForVersion(),ge=new Ll(oe,oe),Re=this.chooseMaskPattern(Q,l,T,ge);return te.setMaskPattern(Re),ft.buildMatrix(Q,l,T,Re,ge),te.setMatrix(ge),te}static recommendVersion(a,l,u,h){const x=this.calculateBitsNeeded(l,u,h,ct.getVersionForNumber(1)),y=this.chooseVersion(x,a),E=this.calculateBitsNeeded(l,u,h,y);return this.chooseVersion(E,a)}static calculateBitsNeeded(a,l,u,h){return l.getSize()+a.getCharacterCountBits(h)+u.getSize()}static getAlphanumericCode(a){return a<tr.ALPHANUMERIC_TABLE.length?tr.ALPHANUMERIC_TABLE[a]:-1}static chooseMode(a,l=null){if(Y.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(a))return dt.KANJI;let u=!1,h=!1;for(let x=0,y=a.length;x<y;++x){const E=a.charAt(x);if(tr.isDigit(E))u=!0;else if(this.getAlphanumericCode(E.charCodeAt(0))!==-1)h=!0;else return dt.BYTE}return h?dt.ALPHANUMERIC:u?dt.NUMERIC:dt.BYTE}static isOnlyDoubleByteKanji(a){let l;try{l=se.encode(a,Y.SJIS)}catch{return!1}const u=l.length;if(u%2!==0)return!1;for(let h=0;h<u;h+=2){const x=l[h]&255;if((x<129||x>159)&&(x<224||x>235))return!1}return!0}static chooseMaskPattern(a,l,u,h){let x=Number.MAX_SAFE_INTEGER,y=-1;for(let E=0;E<ns.NUM_MASK_PATTERNS;E++){ft.buildMatrix(a,l,u,E,h);let _=this.calculateMaskPenalty(h);_<x&&(x=_,y=E)}return y}static chooseVersion(a,l){for(let u=1;u<=40;u++){const h=ct.getVersionForNumber(u);if(tr.willFit(a,h,l))return h}throw new Zt("Data too big")}static willFit(a,l,u){const h=l.getTotalCodewords(),y=l.getECBlocksForLevel(u).getTotalECCodewords(),E=h-y,_=(a+7)/8;return E>=_}static terminateBits(a,l){const u=a*8;if(l.getSize()>u)throw new Zt("data bits cannot fit in the QR Code"+l.getSize()+" > "+u);for(let y=0;y<4&&l.getSize()<u;++y)l.appendBit(!1);const h=l.getSize()&7;if(h>0)for(let y=h;y<8;y++)l.appendBit(!1);const x=a-l.getSizeInBytes();for(let y=0;y<x;++y)l.appendBits((y&1)===0?236:17,8);if(l.getSize()!==u)throw new Zt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(a,l,u,h,x,y){if(h>=u)throw new Zt("Block ID too large");const E=a%u,_=u-E,T=Math.floor(a/u),D=T+1,F=Math.floor(l/u),$=F+1,G=T-F,Q=D-$;if(G!==Q)throw new Zt("EC bytes mismatch");if(u!==_+E)throw new Zt("RS blocks mismatch");if(a!==(F+G)*_+($+Q)*E)throw new Zt("Total bytes mismatch");h<_?(x[0]=F,y[0]=G):(x[0]=$,y[0]=Q)}static interleaveWithECBytes(a,l,u,h){if(a.getSizeInBytes()!==u)throw new Zt("Number of bits and data bytes does not match");let x=0,y=0,E=0;const _=new Array;for(let D=0;D<h;++D){const F=new Int32Array(1),$=new Int32Array(1);tr.getNumDataBytesAndNumECBytesForBlockID(l,u,h,D,F,$);const G=F[0],Q=new Uint8Array(G);a.toBytes(8*x,Q,0,G);const te=tr.generateECBytes(Q,$[0]);_.push(new dm(Q,te)),y=Math.max(y,G),E=Math.max(E,te.length),x+=F[0]}if(u!==x)throw new Zt("Data bytes does not match offset");const T=new U;for(let D=0;D<y;++D)for(const F of _){const $=F.getDataBytes();D<$.length&&T.appendBits($[D],8)}for(let D=0;D<E;++D)for(const F of _){const $=F.getErrorCorrectionBytes();D<$.length&&T.appendBits($[D],8)}if(l!==T.getSizeInBytes())throw new Zt("Interleaving error: "+l+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(a,l){const u=a.length,h=new Int32Array(u+l);for(let y=0;y<u;y++)h[y]=a[y]&255;new ou(Be.QR_CODE_FIELD_256).encode(h,l);const x=new Uint8Array(l);for(let y=0;y<l;y++)x[y]=h[u+y];return x}static appendModeInfo(a,l){l.appendBits(a.getBits(),4)}static appendLengthInfo(a,l,u,h){const x=u.getCharacterCountBits(l);if(a>=1<<x)throw new Zt(a+" is bigger than "+((1<<x)-1));h.appendBits(a,x)}static appendBytes(a,l,u,h){switch(l){case dt.NUMERIC:tr.appendNumericBytes(a,u);break;case dt.ALPHANUMERIC:tr.appendAlphanumericBytes(a,u);break;case dt.BYTE:tr.append8BitBytes(a,u,h);break;case dt.KANJI:tr.appendKanjiBytes(a,u);break;default:throw new Zt("Invalid mode: "+l)}}static getDigit(a){return a.charCodeAt(0)-48}static isDigit(a){const l=tr.getDigit(a);return l>=0&&l<=9}static appendNumericBytes(a,l){const u=a.length;let h=0;for(;h<u;){const x=tr.getDigit(a.charAt(h));if(h+2<u){const y=tr.getDigit(a.charAt(h+1)),E=tr.getDigit(a.charAt(h+2));l.appendBits(x*100+y*10+E,10),h+=3}else if(h+1<u){const y=tr.getDigit(a.charAt(h+1));l.appendBits(x*10+y,7),h+=2}else l.appendBits(x,4),h++}}static appendAlphanumericBytes(a,l){const u=a.length;let h=0;for(;h<u;){const x=tr.getAlphanumericCode(a.charCodeAt(h));if(x===-1)throw new Zt;if(h+1<u){const y=tr.getAlphanumericCode(a.charCodeAt(h+1));if(y===-1)throw new Zt;l.appendBits(x*45+y,11),h+=2}else l.appendBits(x,6),h++}}static append8BitBytes(a,l,u){let h;try{h=se.encode(a,u)}catch(x){throw new Zt(x)}for(let x=0,y=h.length;x!==y;x++){const E=h[x];l.appendBits(E,8)}}static appendKanjiBytes(a,l){let u;try{u=se.encode(a,Y.SJIS)}catch(x){throw new Zt(x)}const h=u.length;for(let x=0;x<h;x+=2){const y=u[x]&255,E=u[x+1]&255,_=y<<8&4294967295|E;let T=-1;if(_>=33088&&_<=40956?T=_-33088:_>=57408&&_<=60351&&(T=_-49472),T===-1)throw new Zt("Invalid byte sequence");const D=(T>>8)*192+(T&255);l.appendBits(D,13)}}static appendECI(a,l){l.appendBits(dt.ECI.getBits(),4),l.appendBits(a.getValue(),8)}}tr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),tr.DEFAULT_BYTE_MODE_ENCODING=Y.UTF8.getName();class is{write(a,l,u,h=null){if(a.length===0)throw new b("Found empty contents");if(l<0||u<0)throw new b("Requested dimensions are too small: "+l+"x"+u);let x=Kt.L,y=is.QUIET_ZONE_SIZE;h!==null&&(h.get(qr.ERROR_CORRECTION)!==void 0&&(x=Kt.fromString(h.get(qr.ERROR_CORRECTION).toString())),h.get(qr.MARGIN)!==void 0&&(y=Number.parseInt(h.get(qr.MARGIN).toString(),10)));const E=tr.encode(a,x,h);return this.renderResult(E,l,u,y)}writeToDom(a,l,u,h,x=null){typeof a=="string"&&(a=document.querySelector(a));const y=this.write(l,u,h,x);a&&a.appendChild(y)}renderResult(a,l,u,h){const x=a.getMatrix();if(x===null)throw new _t;const y=x.getWidth(),E=x.getHeight(),_=y+h*2,T=E+h*2,D=Math.max(l,_),F=Math.max(u,T),$=Math.min(Math.floor(D/_),Math.floor(F/T)),G=Math.floor((D-y*$)/2),Q=Math.floor((F-E*$)/2),te=this.createSVGElement(D,F);for(let oe=0,ge=Q;oe<E;oe++,ge+=$)for(let Re=0,Me=G;Re<y;Re++,Me+=$)if(x.get(Re,oe)===1){const Te=this.createSvgRectElement(Me,ge,$,$);te.appendChild(Te)}return te}createSVGElement(a,l){const u=document.createElementNS(is.SVG_NS,"svg");return u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",l.toString()),u}createSvgRectElement(a,l,u,h){const x=document.createElementNS(is.SVG_NS,"rect");return x.setAttributeNS(null,"x",a.toString()),x.setAttributeNS(null,"y",l.toString()),x.setAttributeNS(null,"height",u.toString()),x.setAttributeNS(null,"width",h.toString()),x.setAttributeNS(null,"fill","#000000"),x}}is.QUIET_ZONE_SIZE=4,is.SVG_NS="http://www.w3.org/2000/svg";class qs{encode(a,l,u,h,x){if(a.length===0)throw new b("Found empty contents");if(l!==Z.QR_CODE)throw new b("Can only encode QR_CODE, but got "+l);if(u<0||h<0)throw new b(`Requested dimensions are too small: ${u}x${h}`);let y=Kt.L,E=qs.QUIET_ZONE_SIZE;x!==null&&(x.get(qr.ERROR_CORRECTION)!==void 0&&(y=Kt.fromString(x.get(qr.ERROR_CORRECTION).toString())),x.get(qr.MARGIN)!==void 0&&(E=Number.parseInt(x.get(qr.MARGIN).toString(),10)));const _=tr.encode(a,y,x);return qs.renderResult(_,u,h,E)}static renderResult(a,l,u,h){const x=a.getMatrix();if(x===null)throw new _t;const y=x.getWidth(),E=x.getHeight(),_=y+h*2,T=E+h*2,D=Math.max(l,_),F=Math.max(u,T),$=Math.min(Math.floor(D/_),Math.floor(F/T)),G=Math.floor((D-y*$)/2),Q=Math.floor((F-E*$)/2),te=new Ce(D,F);for(let oe=0,ge=Q;oe<E;oe++,ge+=$)for(let Re=0,Me=G;Re<y;Re++,Me+=$)x.get(Re,oe)===1&&te.setRegion(Me,ge,$,$);return te}}qs.QUIET_ZONE_SIZE=4;class fm{encode(a,l,u,h,x){let y;switch(l){case Z.QR_CODE:y=new qs;break;default:throw new b("No encoder available for format "+l)}return y.encode(a,l,u,h,x)}}class Yi extends me{constructor(a,l,u,h,x,y,E,_){if(super(y,E),this.yuvData=a,this.dataWidth=l,this.dataHeight=u,this.left=h,this.top=x,h+y>l||x+E>u)throw new b("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(y,E)}getRow(a,l){if(a<0||a>=this.getHeight())throw new b("Requested row is outside the image: "+a);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const h=(a+this.top)*this.dataWidth+this.left;return I.arraycopy(this.yuvData,h,l,0,u),l}getMatrix(){const a=this.getWidth(),l=this.getHeight();if(a===this.dataWidth&&l===this.dataHeight)return this.yuvData;const u=a*l,h=new Uint8ClampedArray(u);let x=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return I.arraycopy(this.yuvData,x,h,0,u),h;for(let y=0;y<l;y++){const E=y*a;I.arraycopy(this.yuvData,x,h,E,a),x+=this.dataWidth}return h}isCropSupported(){return!0}crop(a,l,u,h){return new Yi(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+l,u,h,!1)}renderThumbnail(){const a=this.getWidth()/Yi.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/Yi.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(a*l),h=this.yuvData;let x=this.top*this.dataWidth+this.left;for(let y=0;y<l;y++){const E=y*a;for(let _=0;_<a;_++){const T=h[x+_*Yi.THUMBNAIL_SCALE_FACTOR]&255;u[E+_]=4278190080|T*65793}x+=this.dataWidth*Yi.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/Yi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Yi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,l){const u=this.yuvData;for(let h=0,x=this.top*this.dataWidth+this.left;h<l;h++,x+=this.dataWidth){const y=x+a/2;for(let E=x,_=x+a-1;E<y;E++,_--){const T=u[E];u[E]=u[_],u[_]=T}}}invert(){return new Ee(this)}}Yi.THUMBNAIL_SCALE_FACTOR=2;class jo extends me{constructor(a,l,u,h,x,y,E){if(super(l,u),this.dataWidth=h,this.dataHeight=x,this.left=y,this.top=E,a.BYTES_PER_ELEMENT===4){const _=l*u,T=new Uint8ClampedArray(_);for(let D=0;D<_;D++){const F=a[D],$=F>>16&255,G=F>>7&510,Q=F&255;T[D]=($+G+Q)/4&255}this.luminances=T}else this.luminances=a;if(h===void 0&&(this.dataWidth=l),x===void 0&&(this.dataHeight=u),y===void 0&&(this.left=0),E===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+u>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(a,l){if(a<0||a>=this.getHeight())throw new b("Requested row is outside the image: "+a);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const h=(a+this.top)*this.dataWidth+this.left;return I.arraycopy(this.luminances,h,l,0,u),l}getMatrix(){const a=this.getWidth(),l=this.getHeight();if(a===this.dataWidth&&l===this.dataHeight)return this.luminances;const u=a*l,h=new Uint8ClampedArray(u);let x=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return I.arraycopy(this.luminances,x,h,0,u),h;for(let y=0;y<l;y++){const E=y*a;I.arraycopy(this.luminances,x,h,E,a),x+=this.dataWidth}return h}isCropSupported(){return!0}crop(a,l,u,h){return new jo(this.luminances,u,h,this.dataWidth,this.dataHeight,this.left+a,this.top+l)}invert(){return new Ee(this)}}class of extends Y{static forName(a){return this.getCharacterSetECIByName(a)}}class lu{}lu.ISO_8859_1=Y.ISO8859_1;class lf{isCompact(){return this.compact}setCompact(a){this.compact=a}getSize(){return this.size}setSize(a){this.size=a}getLayers(){return this.layers}setLayers(a){this.layers=a}getCodeWords(){return this.codeWords}setCodeWords(a){this.codeWords=a}getMatrix(){return this.matrix}setMatrix(a){this.matrix=a}}class cu{static singletonList(a){return[a]}static min(a,l){return a.sort(l)[0]}}class hm{constructor(a){this.previous=a}getPrevious(){return this.previous}}class Gs extends hm{constructor(a,l,u){super(a),this.value=l,this.bitCount=u}appendTo(a,l){a.appendBits(this.value,this.bitCount)}add(a,l){return new Gs(this,a,l)}addBinaryShift(a,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Gs(this,a,l)}toString(){let a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+R.toBinaryString(a|1<<this.bitCount).substring(1)+">"}}class uu extends Gs{constructor(a,l,u){super(a,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=u}appendTo(a,l){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):u===0?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(l[this.binaryShiftStart+u],8)}addBinaryShift(a,l){return new uu(this,a,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function pm(B,a,l){return new uu(B,a,l)}function Ro(B,a,l){return new Gs(B,a,l)}const mm=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],La=0,Ks=1,En=2,cf=3,Ti=4,uf=new Gs(null,0,0),Bl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function df(B){for(let a of B)L.fill(a,-1);return B[La][Ti]=0,B[Ks][Ti]=0,B[Ks][La]=28,B[cf][Ti]=0,B[En][Ti]=0,B[En][La]=15,B}const du=df(L.createInt32Array(6,6));class jn{constructor(a,l,u,h){this.token=a,this.mode=l,this.binaryShiftByteCount=u,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(a,l){let u=this.bitCount,h=this.token;if(a!==this.mode){let y=Bl[this.mode][a];h=Ro(h,y&65535,y>>16),u+=y>>16}let x=a===En?4:5;return h=Ro(h,l,x),new jn(h,a,0,u+x)}shiftAndAppend(a,l){let u=this.token,h=this.mode===En?4:5;return u=Ro(u,du[this.mode][a],h),u=Ro(u,l,5),new jn(u,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(a){let l=this.token,u=this.mode,h=this.bitCount;if(this.mode===Ti||this.mode===En){let E=Bl[u][La];l=Ro(l,E&65535,E>>16),h+=E>>16,u=La}let x=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,y=new jn(l,u,this.binaryShiftByteCount+1,h+x);return y.binaryShiftByteCount===2078&&(y=y.endBinaryShift(a+1)),y}endBinaryShift(a){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=pm(l,a-this.binaryShiftByteCount,this.binaryShiftByteCount),new jn(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(a){let l=this.bitCount+(Bl[this.mode][a.mode]>>16);return this.binaryShiftByteCount<a.binaryShiftByteCount?l+=jn.calculateBinaryShiftCost(a)-jn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>a.binaryShiftByteCount&&a.binaryShiftByteCount>0&&(l+=10),l<=a.bitCount}toBitArray(a){let l=[];for(let h=this.endBinaryShift(a.length).token;h!==null;h=h.getPrevious())l.unshift(h);let u=new U;for(const h of l)h.appendTo(u,a);return u}toString(){return ie.format("%s bits=%d bytes=%d",mm[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(a){return a.binaryShiftByteCount>62?21:a.binaryShiftByteCount>31?20:a.binaryShiftByteCount>0?10:0}}jn.INITIAL_STATE=new jn(uf,La,0,0);function gm(B){const a=ie.getCharCode(" "),l=ie.getCharCode("."),u=ie.getCharCode(",");B[La][a]=1;const h=ie.getCharCode("Z"),x=ie.getCharCode("A");for(let $=x;$<=h;$++)B[La][$]=$-x+2;B[Ks][a]=1;const y=ie.getCharCode("z"),E=ie.getCharCode("a");for(let $=E;$<=y;$++)B[Ks][$]=$-E+2;B[En][a]=1;const _=ie.getCharCode("9"),T=ie.getCharCode("0");for(let $=T;$<=_;$++)B[En][$]=$-T+2;B[En][u]=12,B[En][l]=13;const D=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let $=0;$<D.length;$++)B[cf][ie.getCharCode(D[$])]=$;const F=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let $=0;$<F.length;$++)ie.getCharCode(F[$])>0&&(B[Ti][ie.getCharCode(F[$])]=$);return B}const fu=gm(L.createInt32Array(5,256));class Mo{constructor(a){this.text=a}encode(){const a=ie.getCharCode(" "),l=ie.getCharCode(`
`);let u=cu.singletonList(jn.INITIAL_STATE);for(let x=0;x<this.text.length;x++){let y,E=x+1<this.text.length?this.text[x+1]:0;switch(this.text[x]){case ie.getCharCode("\r"):y=E===l?2:0;break;case ie.getCharCode("."):y=E===a?3:0;break;case ie.getCharCode(","):y=E===a?4:0;break;case ie.getCharCode(":"):y=E===a?5:0;break;default:y=0}y>0?(u=Mo.updateStateListForPair(u,x,y),x++):u=this.updateStateListForChar(u,x)}return cu.min(u,(x,y)=>x.getBitCount()-y.getBitCount()).toBitArray(this.text)}updateStateListForChar(a,l){const u=[];for(let h of a)this.updateStateForChar(h,l,u);return Mo.simplifyStates(u)}updateStateForChar(a,l,u){let h=this.text[l]&255,x=fu[a.getMode()][h]>0,y=null;for(let E=0;E<=Ti;E++){let _=fu[E][h];if(_>0){if(y==null&&(y=a.endBinaryShift(l)),!x||E===a.getMode()||E===En){const T=y.latchAndAppend(E,_);u.push(T)}if(!x&&du[a.getMode()][E]>=0){const T=y.shiftAndAppend(E,_);u.push(T)}}}if(a.getBinaryShiftByteCount()>0||fu[a.getMode()][h]===0){let E=a.addBinaryShiftChar(l);u.push(E)}}static updateStateListForPair(a,l,u){const h=[];for(let x of a)this.updateStateForPair(x,l,u,h);return this.simplifyStates(h)}static updateStateForPair(a,l,u,h){let x=a.endBinaryShift(l);if(h.push(x.latchAndAppend(Ti,u)),a.getMode()!==Ti&&h.push(x.shiftAndAppend(Ti,u)),u===3||u===4){let y=x.latchAndAppend(En,16-u).latchAndAppend(En,1);h.push(y)}if(a.getBinaryShiftByteCount()>0){let y=a.addBinaryShiftChar(l).addBinaryShiftChar(l+1);h.push(y)}}static simplifyStates(a){let l=[];for(const u of a){let h=!0;for(const x of l){if(x.isBetterThanOrEqualTo(u)){h=!1;break}u.isBetterThanOrEqualTo(x)&&(l=l.filter(y=>y!==x))}h&&l.push(u)}return l}}class Rt{constructor(){}static encodeBytes(a){return Rt.encode(a,Rt.DEFAULT_EC_PERCENT,Rt.DEFAULT_AZTEC_LAYERS)}static encode(a,l,u){let h=new Mo(a).encode(),x=R.truncDivision(h.getSize()*l,100)+11,y=h.getSize()+x,E,_,T,D,F;if(u!==Rt.DEFAULT_AZTEC_LAYERS){if(E=u<0,_=Math.abs(u),_>(E?Rt.MAX_NB_BITS_COMPACT:Rt.MAX_NB_BITS))throw new b(ie.format("Illegal value %s for layers",u));T=Rt.totalBitsInLayer(_,E),D=Rt.WORD_SIZE[_];let Te=T-T%D;if(F=Rt.stuffBits(h,D),F.getSize()+x>Te)throw new b("Data to large for user specified layer");if(E&&F.getSize()>D*64)throw new b("Data to large for user specified layer")}else{D=0,F=null;for(let Te=0;;Te++){if(Te>Rt.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(E=Te<=3,_=E?Te+1:Te,T=Rt.totalBitsInLayer(_,E),y>T)continue;(F==null||D!==Rt.WORD_SIZE[_])&&(D=Rt.WORD_SIZE[_],F=Rt.stuffBits(h,D));let Nt=T-T%D;if(!(E&&F.getSize()>D*64)&&F.getSize()+x<=Nt)break}}let $=Rt.generateCheckWords(F,T,D),G=F.getSize()/D,Q=Rt.generateModeMessage(E,_,G),te=(E?11:14)+_*4,oe=new Int32Array(te),ge;if(E){ge=te;for(let Te=0;Te<oe.length;Te++)oe[Te]=Te}else{ge=te+1+2*R.truncDivision(R.truncDivision(te,2)-1,15);let Te=R.truncDivision(te,2),Nt=R.truncDivision(ge,2);for(let wt=0;wt<Te;wt++){let Gn=wt+R.truncDivision(wt,15);oe[Te-wt-1]=Nt-Gn-1,oe[Te+wt]=Nt+Gn+1}}let Re=new Ce(ge);for(let Te=0,Nt=0;Te<_;Te++){let wt=(_-Te)*4+(E?9:12);for(let Gn=0;Gn<wt;Gn++){let ki=Gn*2;for(let Gr=0;Gr<2;Gr++)$.get(Nt+ki+Gr)&&Re.set(oe[Te*2+Gr],oe[Te*2+Gn]),$.get(Nt+wt*2+ki+Gr)&&Re.set(oe[Te*2+Gn],oe[te-1-Te*2-Gr]),$.get(Nt+wt*4+ki+Gr)&&Re.set(oe[te-1-Te*2-Gr],oe[te-1-Te*2-Gn]),$.get(Nt+wt*6+ki+Gr)&&Re.set(oe[te-1-Te*2-Gn],oe[Te*2+Gr])}Nt+=wt*8}if(Rt.drawModeMessage(Re,E,ge,Q),E)Rt.drawBullsEye(Re,R.truncDivision(ge,2),5);else{Rt.drawBullsEye(Re,R.truncDivision(ge,2),7);for(let Te=0,Nt=0;Te<R.truncDivision(te,2)-1;Te+=15,Nt+=16)for(let wt=R.truncDivision(ge,2)&1;wt<ge;wt+=2)Re.set(R.truncDivision(ge,2)-Nt,wt),Re.set(R.truncDivision(ge,2)+Nt,wt),Re.set(wt,R.truncDivision(ge,2)-Nt),Re.set(wt,R.truncDivision(ge,2)+Nt)}let Me=new lf;return Me.setCompact(E),Me.setSize(ge),Me.setLayers(_),Me.setCodeWords(G),Me.setMatrix(Re),Me}static drawBullsEye(a,l,u){for(let h=0;h<u;h+=2)for(let x=l-h;x<=l+h;x++)a.set(x,l-h),a.set(x,l+h),a.set(l-h,x),a.set(l+h,x);a.set(l-u,l-u),a.set(l-u+1,l-u),a.set(l-u,l-u+1),a.set(l+u,l-u),a.set(l+u,l-u+1),a.set(l+u,l+u-1)}static generateModeMessage(a,l,u){let h=new U;return a?(h.appendBits(l-1,2),h.appendBits(u-1,6),h=Rt.generateCheckWords(h,28,4)):(h.appendBits(l-1,5),h.appendBits(u-1,11),h=Rt.generateCheckWords(h,40,4)),h}static drawModeMessage(a,l,u,h){let x=R.truncDivision(u,2);if(l)for(let y=0;y<7;y++){let E=x-3+y;h.get(y)&&a.set(E,x-5),h.get(y+7)&&a.set(x+5,E),h.get(20-y)&&a.set(E,x+5),h.get(27-y)&&a.set(x-5,E)}else for(let y=0;y<10;y++){let E=x-5+y+R.truncDivision(y,5);h.get(y)&&a.set(E,x-7),h.get(y+10)&&a.set(x+7,E),h.get(29-y)&&a.set(E,x+7),h.get(39-y)&&a.set(x-7,E)}}static generateCheckWords(a,l,u){let h=a.getSize()/u,x=new ou(Rt.getGF(u)),y=R.truncDivision(l,u),E=Rt.bitsToWords(a,u,y);x.encode(E,y-h);let _=l%u,T=new U;T.appendBits(0,_);for(const D of Array.from(E))T.appendBits(D,u);return T}static bitsToWords(a,l,u){let h=new Int32Array(u),x,y;for(x=0,y=a.getSize()/l;x<y;x++){let E=0;for(let _=0;_<l;_++)E|=a.get(x*l+_)?1<<l-_-1:0;h[x]=E}return h}static getGF(a){switch(a){case 4:return Be.AZTEC_PARAM;case 6:return Be.AZTEC_DATA_6;case 8:return Be.AZTEC_DATA_8;case 10:return Be.AZTEC_DATA_10;case 12:return Be.AZTEC_DATA_12;default:throw new b("Unsupported word size "+a)}}static stuffBits(a,l){let u=new U,h=a.getSize(),x=(1<<l)-2;for(let y=0;y<h;y+=l){let E=0;for(let _=0;_<l;_++)(y+_>=h||a.get(y+_))&&(E|=1<<l-1-_);(E&x)===x?(u.appendBits(E&x,l),y--):(E&x)===0?(u.appendBits(E|1,l),y--):u.appendBits(E,l)}return u}static totalBitsInLayer(a,l){return((l?88:112)+16*a)*a}}Rt.DEFAULT_EC_PERCENT=33,Rt.DEFAULT_AZTEC_LAYERS=0,Rt.MAX_NB_BITS=32,Rt.MAX_NB_BITS_COMPACT=4,Rt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Do{encode(a,l,u,h){return this.encodeWithHints(a,l,u,h,null)}encodeWithHints(a,l,u,h,x){let y=lu.ISO_8859_1,E=Rt.DEFAULT_EC_PERCENT,_=Rt.DEFAULT_AZTEC_LAYERS;return x!=null&&(x.has(qr.CHARACTER_SET)&&(y=of.forName(x.get(qr.CHARACTER_SET).toString())),x.has(qr.ERROR_CORRECTION)&&(E=R.parseInt(x.get(qr.ERROR_CORRECTION).toString())),x.has(qr.AZTEC_LAYERS)&&(_=R.parseInt(x.get(qr.AZTEC_LAYERS).toString()))),Do.encodeLayers(a,l,u,h,y,E,_)}static encodeLayers(a,l,u,h,x,y,E){if(l!==Z.AZTEC)throw new b("Can only encode AZTEC, but got "+l);let _=Rt.encode(ie.getBytes(a,x),y,E);return Do.renderResult(_,u,h)}static renderResult(a,l,u){let h=a.getMatrix();if(h==null)throw new _t;let x=h.getWidth(),y=h.getHeight(),E=Math.max(l,x),_=Math.max(u,y),T=Math.min(E/x,_/y),D=(E-x*T)/2,F=(_-y*T)/2,$=new Ce(E,_);for(let G=0,Q=F;G<y;G++,Q+=T)for(let te=0,oe=D;te<x;te++,oe+=T)h.get(te,G)&&$.setRegion(oe,Q,T,T);return $}}r.AbstractExpandedDecoder=Se,r.ArgumentException=v,r.ArithmeticException=ye,r.AztecCode=lf,r.AztecCodeReader=$n,r.AztecCodeWriter=Do,r.AztecDecoder=Ct,r.AztecDetector=Ai,r.AztecDetectorResult=Ne,r.AztecEncoder=Rt,r.AztecHighLevelEncoder=Mo,r.AztecPoint=wr,r.BarcodeFormat=Z,r.Binarizer=O,r.BinaryBitmap=S,r.BitArray=U,r.BitMatrix=Ce,r.BitSource=eu,r.BrowserAztecCodeReader=Wn,r.BrowserBarcodeReader=Jd,r.BrowserCodeReader=$e,r.BrowserDatamatrixCodeReader=um,r.BrowserMultiFormatReader=Po,r.BrowserPDF417Reader=Dl,r.BrowserQRCodeReader=sf,r.BrowserQRCodeSvgWriter=is,r.CharacterSetECI=Y,r.ChecksumException=A,r.Code128Reader=Fe,r.Code39Reader=mr,r.DataMatrixDecodedBitStreamParser=Ni,r.DataMatrixReader=Oi,r.DecodeHintType=V,r.DecoderResult=ae,r.DefaultGridSampler=Ht,r.DetectorResult=ha,r.EAN13Reader=Yt,r.EncodeHintType=qr,r.Exception=m,r.FormatException=H,r.GenericGF=Be,r.GenericGFPoly=De,r.GlobalHistogramBinarizer=ze,r.GridSampler=Jt,r.GridSamplerInstance=Ot,r.HTMLCanvasElementLuminanceSource=Ae,r.HybridBinarizer=le,r.ITFReader=jt,r.IllegalArgumentException=b,r.IllegalStateException=_t,r.InvertedLuminanceSource=Ee,r.LuminanceSource=me,r.MathUtils=At,r.MultiFormatOneDReader=Us,r.MultiFormatReader=Ml,r.MultiFormatWriter=fm,r.NotFoundException=re,r.OneDReader=er,r.PDF417DecodedBitStreamParser=xe,r.PDF417DecoderErrorCorrection=nu,r.PDF417Reader=fn,r.PDF417ResultMetadata=jl,r.PerspectiveTransform=Dt,r.PlanarYUVLuminanceSource=Yi,r.QRCodeByteMatrix=Ll,r.QRCodeDataMask=St,r.QRCodeDecodedBitStreamParser=cr,r.QRCodeDecoderErrorCorrectionLevel=Kt,r.QRCodeDecoderFormatInformation=cn,r.QRCodeEncoder=tr,r.QRCodeEncoderQRCode=ns,r.QRCodeMaskUtil=ur,r.QRCodeMatrixUtil=ft,r.QRCodeMode=dt,r.QRCodeReader=Pn,r.QRCodeVersion=ct,r.QRCodeWriter=qs,r.RGBLuminanceSource=jo,r.RSS14Reader=nr,r.RSSExpandedReader=Oe,r.ReaderException=Hs,r.ReedSolomonDecoder=Ft,r.ReedSolomonEncoder=ou,r.ReedSolomonException=Qe,r.Result=Ue,r.ResultMetadataType=fe,r.ResultPoint=He,r.StringUtils=ie,r.UnsupportedOperationException=we,r.VideoInputDevice=J,r.WhiteRectangleDetector=ut,r.WriterException=Zt,r.ZXingArrays=L,r.ZXingCharset=of,r.ZXingInteger=R,r.ZXingStandardCharsets=lu,r.ZXingStringBuilder=be,r.ZXingStringEncoding=se,r.ZXingSystem=I,r.createAbstractExpandedDecoder=Zd,Object.defineProperty(r,"__esModule",{value:!0})}))})(Ku,Ku.exports)),Ku.exports}var vr=_D();const ND=da(vr),OD=Zv({__proto__:null,default:ND},[vr]);var oS=(function(){function e(t,r,n){if(this.formatMap=new Map([[Ye.QR_CODE,vr.BarcodeFormat.QR_CODE],[Ye.AZTEC,vr.BarcodeFormat.AZTEC],[Ye.CODABAR,vr.BarcodeFormat.CODABAR],[Ye.CODE_39,vr.BarcodeFormat.CODE_39],[Ye.CODE_93,vr.BarcodeFormat.CODE_93],[Ye.CODE_128,vr.BarcodeFormat.CODE_128],[Ye.DATA_MATRIX,vr.BarcodeFormat.DATA_MATRIX],[Ye.MAXICODE,vr.BarcodeFormat.MAXICODE],[Ye.ITF,vr.BarcodeFormat.ITF],[Ye.EAN_13,vr.BarcodeFormat.EAN_13],[Ye.EAN_8,vr.BarcodeFormat.EAN_8],[Ye.PDF_417,vr.BarcodeFormat.PDF_417],[Ye.RSS_14,vr.BarcodeFormat.RSS_14],[Ye.RSS_EXPANDED,vr.BarcodeFormat.RSS_EXPANDED],[Ye.UPC_A,vr.BarcodeFormat.UPC_A],[Ye.UPC_E,vr.BarcodeFormat.UPC_E],[Ye.UPC_EAN_EXTENSION,vr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!OD)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var i=this.createZXingFormats(t),s=new Map;s.set(vr.DecodeHintType.POSSIBLE_FORMATS,i),s.set(vr.DecodeHintType.TRY_HARDER,!1),this.hints=s}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,i){try{n(r.decode(t))}catch(s){i(s)}})},e.prototype.decode=function(t){var r=new vr.MultiFormatReader(this.verbose,this.hints),n=new vr.HTMLCanvasElementLuminanceSource(t),i=new vr.BinaryBitmap(new vr.HybridBinarizer(n)),s=r.decode(i);return{text:s.text,format:x4.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,i){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,i=t;n<i.length;n++){var s=i[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),ID=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function f(v){try{m(n.next(v))}catch(b){c(b)}}function p(v){try{m(n.throw(v))}catch(b){c(b)}}function m(v){v.done?s(v.value):i(v.value).then(f,p)}m((n=n.apply(e,t||[])).next())})},TD=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(m){return function(v){return p([m,v])}}function p(m){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(r=0)),r;)try{if(n=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,i=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){r.label=m[1];break}if(m[0]===6&&r.label<s[1]){r.label=s[1],s=m;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(m);break}s[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(v){m=[6,v],i=0}finally{n=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},lS=(function(){function e(t,r,n){if(this.formatMap=new Map([[Ye.QR_CODE,"qr_code"],[Ye.AZTEC,"aztec"],[Ye.CODABAR,"codabar"],[Ye.CODE_39,"code_39"],[Ye.CODE_93,"code_93"],[Ye.CODE_128,"code_128"],[Ye.DATA_MATRIX,"data_matrix"],[Ye.ITF,"itf"],[Ye.EAN_13,"ean_13"],[Ye.EAN_8,"ean_8"],[Ye.PDF_417,"pdf417"],[Ye.UPC_A,"upc_a"],[Ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return ID(this,void 0,void 0,function(){var r,n;return TD(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=i.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:x4.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,i=0,s=t;i<s.length;i++){var c=s[i],f=c.boundingBox.width*c.boundingBox.height;f>n&&(n=f,r=c)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,i=t;n<i.length;n++){var s=i[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,i){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),cS=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function f(v){try{m(n.next(v))}catch(b){c(b)}}function p(v){try{m(n.throw(v))}catch(b){c(b)}}function m(v){v.done?s(v.value):i(v.value).then(f,p)}m((n=n.apply(e,t||[])).next())})},uS=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(m){return function(v){return p([m,v])}}function p(m){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(r=0)),r;)try{if(n=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,i=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){r.label=m[1];break}if(m[0]===6&&r.label<s[1]){r.label=s[1],s=m;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(m);break}s[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(v){m=[6,v],i=0}finally{n=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},kD=(function(){function e(t,r,n,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&lS.isSupported()?(this.primaryDecoder=new lS(t,n,i),this.secondaryDecoder=new oS(t,n,i)):this.primaryDecoder=new oS(t,n,i)}return e.prototype.decodeAsync=function(t){return cS(this,void 0,void 0,function(){var r;return uS(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return cS(this,void 0,void 0,function(){var r,n;return uS(this,function(i){switch(i.label){case 0:r=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(n=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var i=n[r];t+=i}var s=t/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),yy=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),n0=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function f(v){try{m(n.next(v))}catch(b){c(b)}}function p(v){try{m(n.throw(v))}catch(b){c(b)}}function m(v){v.done?s(v.value):i(v.value).then(f,p)}m((n=n.apply(e,t||[])).next())})},i0=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(m){return function(v){return p([m,v])}}function p(m){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(r=0)),r;)try{if(n=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,i=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){r.label=m[1];break}if(m[0]===6&&r.label<s[1]){r.label=s[1],s=m;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(m);break}s[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(v){m=[6,v],i=0}finally{n=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},y4=(function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e})(),PD=(function(e){yy(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(y4),jD=(function(e){yy(t,e);function t(r){return e.call(this,"zoom",r)||this}return t})(PD),RD=(function(e){yy(t,e);function t(r){return e.call(this,"torch",r)||this}return t})(y4),MD=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new jD(this.track)},e.prototype.torchFeature=function(){return new RD(this.track)},e})(),DD=(function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,i=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,i),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,i){return n0(this,void 0,void 0,function(){var s,c;return i0(this,function(f){switch(f.label){case 0:return s=new e(t,r,i),n.aspectRatio?(c={aspectRatio:n.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:f.sent(),f.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return n0(this,void 0,void 0,function(){return i0(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var i=t.mediaStream.getVideoTracks(),s=i.length,c=0;t.mediaStream.getVideoTracks().forEach(function(f){t.mediaStream.removeTrack(f),f.stop(),++c,c>=s&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new MD(this.getFirstTrackOrFail())},e})(),LD=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return n0(this,void 0,void 0,function(){return i0(this,function(i){return[2,DD.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return n0(this,void 0,void 0,function(){var r,n;return i0(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=i.sent(),[2,new e(n)]}})})},e})(),dS=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function f(v){try{m(n.next(v))}catch(b){c(b)}}function p(v){try{m(n.throw(v))}catch(b){c(b)}}function m(v){v.done?s(v.value):i(v.value).then(f,p)}m((n=n.apply(e,t||[])).next())})},fS=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(m){return function(v){return p([m,v])}}function p(m){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(r=0)),r;)try{if(n=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,i=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){r.label=m[1];break}if(m[0]===6&&r.label<s[1]){r.label=s[1],s=m;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(m);break}s[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(v){m=[6,v],i=0}finally{n=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},BD=(function(){function e(){}return e.failIfNotSupported=function(){return dS(this,void 0,void 0,function(){return fS(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return dS(this,void 0,void 0,function(){return fS(this,function(r){return[2,LD.create(t)]})})},e})(),FD=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function f(v){try{m(n.next(v))}catch(b){c(b)}}function p(v){try{m(n.throw(v))}catch(b){c(b)}}function m(v){v.done?s(v.value):i(v.value).then(f,p)}m((n=n.apply(e,t||[])).next())})},UD=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(m){return function(v){return p([m,v])}}function p(m){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(r=0)),r;)try{if(n=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,i=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){r.label=m[1];break}if(m[0]===6&&r.label<s[1]){r.label=s[1],s=m;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(m);break}s[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(v){m=[6,v],i=0}finally{n=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},zD=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=pc.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=pc.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return FD(this,void 0,void 0,function(){var t,r,n,i,s,c,f;return UD(this,function(p){switch(p.label){case 0:return t=function(m){for(var v=m.getVideoTracks(),b=0,S=v;b<S.length;b++){var A=S[b];A.enabled=!1,A.stop(),m.removeTrack(A)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=p.sent(),i=[],s=0,c=n;s<c.length;s++)f=c[s],f.kind==="videoinput"&&i.push({id:f.deviceId,label:f.label});return t(r),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(s){for(var c=[],f=0,p=s;f<p.length;f++){var m=p[f];m.kind==="video"&&c.push({id:m.id,label:m.label})}t(c)},i=MediaStreamTrack;i.getSources(n)})},e})(),$r;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})($r||($r={}));var $D=(function(){function e(){this.state=$r.NOT_STARTED,this.onGoingTransactionNewState=$r.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===$r.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=$r.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===$r.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=$r.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==$r.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case $r.UNKNOWN:throw"Transition from unknown is not allowed";case $r.NOT_STARTED:this.failIfNewStateIs(t,[$r.PAUSED]);break;case $r.SCANNING:break;case $r.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,i=r;n<i.length;n++){var s=i[n];if(t===s)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),WD=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===$r.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==$r.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===$r.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===$r.PAUSED},e})(),VD=(function(){function e(){}return e.create=function(){return new WD(new $D)},e})(),HD=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Mi=(function(e){HD(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(ED),qD=(function(){function e(t,r){this.logger=r,this.fps=Mi.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Mi.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?v4.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!gs(this.qrbox)},e.create=function(t,r){return new e(t,r)},e})(),GD=(function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new CD(this.verbose),this.qrcode=new kD(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=VD.create()}return e.prototype.start=function(t,r,n,i){var s=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var f=qD.create(r,this.logger);this.clearElement();var p=!1;f.videoConstraints&&(f.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=p,v=document.getElementById(this.elementId);v.clientWidth?v.clientWidth:Mi.DEFAULT_WIDTH,v.style.position="relative",this.shouldScan=!0,this.element=v;var b=this,S=this.stateManagerProxy.startTransition($r.SCANNING);return new Promise(function(A,O){var I=m?f.videoConstraints:b.createVideoConstraints(t);if(!I){S.cancel(),O("videoConstraints should be defined");return}var P={};(!m||f.aspectRatio)&&(P.aspectRatio=f.aspectRatio);var M={onRenderSurfaceReady:function(L,R){b.setupUi(L,R,f),b.isScanning=!0,b.foreverScan(f,n,c)}};BD.failIfNotSupported().then(function(L){L.create(I).then(function(R){return R.render(s.element,P,M).then(function(U){b.renderedCamera=U,S.execute(),A(null)}).catch(function(U){S.cancel(),O(U)})}).catch(function(R){S.cancel(),O(pc.errorGettingUserMedia(R))})}).catch(function(L){S.cancel(),O(pc.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition($r.PAUSED),this.showPausedState(),(gs(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition($r.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition($r.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var s=document.getElementById(Mi.SHADED_REGION_ELEMENT_ID);s&&t.element.removeChild(s)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),n(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),r.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(gs(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,s){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var c=new Image;c.onload=function(){var f=c.width,p=c.height,m=document.getElementById(n.elementId),v=m.clientWidth?m.clientWidth:Mi.DEFAULT_WIDTH,b=Math.max(m.clientHeight?m.clientHeight:p,Mi.FILE_SCAN_MIN_HEIGHT),S=n.computeCanvasDrawConfig(f,p,v,b);if(r){var A=n.createCanvasElement(v,b,"qr-canvas-visible");A.style.display="inline-block",m.appendChild(A);var O=A.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=v,O.canvas.height=b,O.drawImage(c,0,0,f,p,S.x,S.y,S.width,S.height)}var I=Mi.FILE_SCAN_HIDDEN_CANVAS_PADDING,P=Math.max(c.width,S.width),M=Math.max(c.height,S.height),L=P+2*I,R=M+2*I,U=n.createCanvasElement(L,R);m.appendChild(U);var W=U.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=L,W.canvas.height=R,W.drawImage(c,0,0,f,p,I,I,P,M);try{n.qrcode.decodeRobustlyAsync(U).then(function(V){i(aS.createFromQrcodeResult(V))}).catch(s)}catch(V){s("QR code parse error, error = ".concat(V))}},c.onerror=s,c.onabort=s,c.onstalled=s,c.onsuspend=s,c.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return zD.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!v4.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[Ye.QR_CODE,Ye.AZTEC,Ye.CODABAR,Ye.CODE_39,Ye.CODE_93,Ye.CODE_128,Ye.DATA_MATRIX,Ye.MAXICODE,Ye.ITF,Ye.EAN_13,Ye.EAN_8,Ye.PDF_417,Ye.RSS_14,Ye.RSS_EXPANDED,Ye.UPC_A,Ye.UPC_E,Ye.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,s=t.formatsToSupport;i<s.length;i++){var c=s[i];bD(c)?n.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(gs(t))return!0;if(!gs(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(gs(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return gs(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var i=this,s=n.qrbox;this.validateQrboxConfig(s);var c=this.toQrdimensions(t,r,s),f=function(m){if(m<Mi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Mi.MIN_QR_BOX_SIZE,"px.")},p=function(m){return m>t&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=t),m};f(c.width),f(c.height),c.width=p(c.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var i=gs(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(i);var s=this.toQrdimensions(t,r,i);s.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=n.isShadedBoxEnabled()&&s.height<=r,f={x:0,y:0,width:t,height:r},p=c?this.getShadedRegionBounds(t,r,s):f,m=this.createCanvasElement(p.width,p.height),v={willReadFrequently:!0},b=m.getContext("2d",v);b.canvas.width=p.width,b.canvas.height=p.height,this.element.append(m),c&&this.possiblyInsertShadingElement(this.element,t,r,s),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=b,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=pc.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,aS.createFromQrcodeResult(i)),n.possiblyUpdateShaders(!0),!0}).catch(function(i){n.possiblyUpdateShaders(!1);var s=pc.codeParseError(i);return r(s,SD.createFrom(s)),!1})},e.prototype.foreverScan=function(t,r,n){var i=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),c=s.videoWidth/s.clientWidth,f=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*c,m=this.qrRegion.height*f,v=this.qrRegion.x*c,b=this.qrRegion.y*f;this.context.drawImage(s,v,b,p,m,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,r,n)},i.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(A){!A&&t.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(r,n).finally(function(){S()})):S()}).catch(function(A){i.logger.logError("Error happend while scanning context",A),S()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",i={user:!0,environment:!0},s="exact",c=function(O){if(O in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},f=Object.keys(t);if(f.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(f.length," keys");var p=Object.keys(t)[0];if(p!==r&&p!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(p===r){var m=t.facingMode;if(typeof m=="string"){if(c(m))return{facingMode:m}}else if(typeof m=="object")if(s in m){if(c(m["".concat(s)]))return{facingMode:{exact:m["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var v=typeof m;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var b=t.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(s in b)return{deviceId:{exact:b["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var S=typeof b;throw"Invalid type of 'deviceId' = ".concat(S)}}}var A=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(A)},e.prototype.computeCanvasDrawConfig=function(t,r,n,i){if(t<=n&&r<=i){var s=(n-t)/2,c=(i-r)/2;return{x:s,y:c,width:t,height:r}}else{var f=t,p=r;return t>n&&(r=n/t*r,t=n),r>i&&(t=i/r*t,r=i),this.logger.log("Image downsampled from "+"".concat(f,"X").concat(p)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?Mi.BORDER_SHADER_MATCH_COLOR:Mi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var i=t,s=r,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(s,"px"),c.style.display="none",c.id=gs(n)?"qr-canvas":n,c},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,i){if(!(r-i.width<1||n-i.height<1)){var s=document.createElement("div");s.style.position="absolute";var c=(r-i.width)/2,f=(n-i.height)/2;if(s.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(Mi.SHADED_REGION_ELEMENT_ID),r-i.width<11||n-i.height<11)this.hasBorderShaders=!1;else{var p=5,m=40;this.insertShaderBorders(s,m,p,-p,null,0,!0),this.insertShaderBorders(s,m,p,-p,null,0,!1),this.insertShaderBorders(s,m,p,null,-p,0,!0),this.insertShaderBorders(s,m,p,null,-p,0,!1),this.insertShaderBorders(s,p,m+p,-p,null,-p,!0),this.insertShaderBorders(s,p,m+p,null,-p,-p,!0),this.insertShaderBorders(s,p,m+p,-p,null,-p,!1),this.insertShaderBorders(s,p,m+p,null,-p,-p,!1),this.hasBorderShaders=!0}t.append(s)}},e.prototype.insertShaderBorders=function(t,r,n,i,s,c,f){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=Mi.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(r,"px"),p.style.height="".concat(n,"px"),i!==null&&(p.style.top="".concat(i,"px")),s!==null&&(p.style.bottom="".concat(s,"px")),f?p.style.left="".concat(c,"px"):p.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),t.appendChild(p)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),hS;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(hS||(hS={}));const KD=({perfume:e,onSell:t})=>{const[r,n]=N.useState(null);N.useEffect(()=>{i()},[]);const i=async()=>{const{data:c}=await We.from("inventory").select("quantity").eq("product_id",e.id).single();n(c?c.quantity:e.stock?5:0)},s=async()=>{if(!window.confirm(`Confirmar venta de ${e.name}?`))return;const{data:c,error:f}=await We.rpc("adjust_inventory",{p_product_id:e.id,p_delta:-1,p_reason:"sale"});f?alert("Error: "+f.message):c.success?(n(c.new_quantity),t(e.price10ml,`Venta: ${e.name}`),alert("Venta exitosa. Nuevo stock: "+c.new_quantity)):alert("Error: "+c.message)};return g.jsxs("tr",{className:"border-b border-stone-700 hover:bg-stone-700/20",children:[g.jsx("td",{className:"px-3 py-2 font-medium text-white",children:e.name}),g.jsx("td",{className:"px-3 py-2 text-center",children:g.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${r!==null&&r>0?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:r!==null?r:"..."})}),g.jsxs("td",{className:"px-3 py-2 text-center text-green-400",children:["$",e.price10ml.toLocaleString()]}),g.jsx("td",{className:"px-3 py-2 text-right",children:g.jsx("button",{onClick:s,disabled:r!==null&&r<=0,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-stone-600 disabled:cursor-not-allowed text-white px-3 py-1 rounded text-xs font-bold shadow-lg",children:"Vender"})})]})},XD=({onLogout:e})=>{const[t,r]=N.useState(""),[n,i]=N.useState(""),[s,c]=N.useState(!1),[f,p]=N.useState(null),[m,v]=N.useState("loyalty"),[b,S]=N.useState("Corte"),[A,O]=N.useState("7000"),[I,P]=N.useState(""),[M,L]=N.useState(""),[R,U]=N.useState("0"),[W,V]=N.useState([]),[H,X]=N.useState(null);N.useEffect(()=>{m==="agenda"&&Wn()},[m]);const[Y,we]=N.useState([]),[se,ie]=N.useState(""),[be,Ce]=N.useState(!1),[re,ze]=N.useState(""),[le,me]=N.useState(""),[Ee,Ae]=N.useState(null),[J,de]=N.useState([]),[$e,Ue]=N.useState(null),[Xe,Z]=N.useState(!1),[_e,fe]=N.useState([]),[ae,je]=N.useState(""),[De,ye]=N.useState(""),[Be,Qe]=N.useState(!1),[_t,Ft]=N.useState([]),[Pt,Ct]=N.useState(null),[At,Ci]=N.useState(""),[He,ha]=N.useState(""),[Ne,ut]=N.useState(!1),[Jt,Dt]=N.useState(""),[Ht,Ot]=N.useState("");N.useEffect(()=>{m==="agenda"?Wn():m==="clients"?ni():m==="expenses"&&wr()},[m]);const wr=async()=>{const{data:Se,error:Ge}=await We.from("expenses").select("*").order("date",{ascending:!1}).order("created_at",{ascending:!1});Ge?console.error("Error fetching expenses:",Ge):fe(Se||[])},Ai=async()=>{if(!ae||!De){alert("Ingrese descripcin y monto");return}Qe(!0);try{const Se=tD(ae),{error:Ge}=await We.from("expenses").insert({description:ae,amount:parseInt(De),category:Se,date:new Date});if(Ge)throw Ge;alert(`Gasto registrado como: ${Se}`),je(""),ye(""),wr()}catch(Se){alert("Error: "+Se.message)}finally{Qe(!1)}},$n=async Se=>{if(!window.confirm("Eliminar este gasto?"))return;const{error:Ge}=await We.from("expenses").delete().eq("id",Se);Ge||wr()},Wn=async()=>{const{data:Se,error:Ge}=await We.from("bookings").select("*").order("date",{ascending:!0}).order("time",{ascending:!0});Ge?console.error("Error fetching bookings:",Ge):V(Se||[])},[er,Fe]=N.useState(new Date),[mr,jt]=N.useState(null),[qt,Vn]=N.useState(!1),[pa,vt]=N.useState(""),[qe,Yt]=N.useState(""),[kn,Gi]=N.useState("Corte"),[ri,Ao]=N.useState("salon");(Se=>{const Ge=[],lt=Se.getDay(),Er=Se.getDate()-lt+(lt===0?-6:1),Sr=new Date(Se);Sr.setDate(Er);for(let Lr=0;Lr<7;Lr++){const es=new Date(Sr);es.setDate(Sr.getDate()+Lr),Ge.push(es)}return Ge})(er),Array.from({length:13},(Se,Ge)=>`${Ge+9}:00`);const ni=async()=>{let Se=We.from("clients").select("*").order("created_at",{ascending:!1}).limit(50);se&&(Se=Se.ilike("phone",`%${se}%`));const{data:Ge,error:lt}=await Se;lt?console.error("Error fetching clients:",lt):we(Ge||[])};N.useEffect(()=>{if(m==="clients"){const Se=setTimeout(()=>{ni()},500);return()=>clearTimeout(Se)}},[se]);const Ja=async(Se,Ge)=>{if(window.confirm(`ESTS SEGURO? Esto eliminar al cliente ${Ge} y todo su historial. Esta accin no se puede deshacer.`))try{await We.from("hair_service_log").delete().eq("client_id",Se),await We.from("transactions").delete().eq("client_id",Se),await We.from("visit_registrations").delete().eq("client_id",Se);const{error:lt}=await We.from("clients").delete().eq("id",Se);if(lt)throw lt;alert("Cliente eliminado correctamente."),ni()}catch(lt){alert("Error al eliminar: "+lt.message)}},wn=async Se=>{Z(!0),Ue(Se);const{data:Ge,error:lt}=await We.from("transactions").select("*").eq("client_id",Se.id).order("created_at",{ascending:!1});lt?console.error("Error fetching history:",lt):de(Ge||[]),Z(!1)},_o=async Se=>{if(!window.confirm("Eliminar esta transaccin?"))return;const{error:Ge}=await We.from("transactions").delete().eq("id",Se);Ge?alert("Error: "+Ge.message):de(lt=>lt.filter(Er=>Er.id!==Se))},Hn=(Se=null)=>{Se?(Ae(Se),ze(Se.name||""),me(Se.phone||"")):(Ae(null),ze(""),me("")),Ce(!0)},No=async()=>{if(!le)return alert("El telfono es obligatorio");const Se=le.trim();try{if(Ee){const{error:Ge}=await We.from("clients").update({name:re,phone:Se}).eq("id",Ee.id);if(Ge)throw Ge;alert("Cliente actualizado")}else{const{error:Ge}=await We.from("clients").insert({name:re,phone:Se,member_token:"manual-"+Date.now(),visits:0});if(Ge)throw Ge;alert("Cliente creado")}Ce(!1),ni()}catch(Ge){alert("Error al guardar cliente: "+Ge.message)}};N.useEffect(()=>{if(s&&!f){const Se=new GD("reader"),Ge={fps:10,qrbox:{width:250,height:250}};return Se.start({facingMode:"environment"},Ge,ui,ln).catch(lt=>{console.error("Error starting scanner:",lt),i("Error iniciando cmara: "+lt)}),()=>{Se.stop().then(()=>Se.clear()).catch(console.error)}}},[s,f]);const br=async(Se,Ge,lt,Er)=>{if(Ge<=0)return;const{error:Sr}=await We.from("transactions").insert({client_id:Se,amount:Ge,type:lt,description:Er});Sr&&console.error("Error recording transaction:",Sr)},ui=async(Se,Ge)=>{if(!f){p(Se),c(!1);try{i("Procesando...");const{data:lt,error:Er}=await We.rpc("register_visit",{token_input:Se});if(Er)throw Er;if(lt.success){if(i("OK: "+lt.message+" Visitas: "+lt.new_visits),m==="hair"){const Sr=parseInt(A)||0,{data:Lr}=await We.from("clients").select("id").eq("member_token",Se).single();Lr&&await br(Lr.id,Sr,"service",`Servicio: ${b}`)}else if(m==="ventas"){const{data:Sr}=await We.from("clients").select("*").eq("member_token",Se).single();Sr&&Ct(Sr)}}else i("Error: "+lt.message);setTimeout(()=>{p(null),i("")},4e3)}catch(lt){console.error(lt),i("Error al procesar el cdigo."),p(null)}}},ln=Se=>{console.warn(Se)},Ve=async()=>{if(!H||!window.confirm("Confirmar canje del 10% de Descuento?"))return;const{data:Se,error:Ge}=await We.rpc("redeem_discount_5th",{token_input:H.member_token});if(Ge)i("Error: "+Ge.message);else if(i(Se.message),Se.success){const{data:lt}=await We.from("clients").select("*").eq("id",H.id).single();X(lt)}},Ra=async()=>{if(t.length<8){alert("Ingrese un nmero vlido (ej: +569...)");return}try{if(i("Procesando..."),m==="hair"){const Se=parseInt(A)||0,Ge=parseInt(I)||0,{data:lt,error:Er}=await We.rpc("add_hair_service_by_phone",{phone_input:t,service_type:b,service_price:Se,notes_input:`Ingreso Manual. Extras: ${M} ($${Ge})`});if(Er)throw Er;if(lt.success){const{data:Sr}=await We.from("clients").select("id").eq("phone",t).single();Sr&&await We.from("transactions").insert({client_id:Sr.id,amount:Se,type:"service",description:`Servicio: ${b}`,additional_cost:Ge,additional_cost_detail:M}),i(` Servicio registrado. Total: ${lt.new_total_services}. ${lt.discount_5th_unlocked?"DESCUENTO 10% DESBLOQUEADO!":""} ${lt.free_cut_unlocked?"CORTE GRATIS DESBLOQUEADO!":""}`),r(""),P(""),L("")}else i("Error: "+lt.message)}else{const{data:Se,error:Ge}=await We.from("clients").select("*").eq("phone",t).single();let lt=0;Se&&(lt=Se.visits);const Er=lt+1,{data:Sr,error:Lr}=await We.from("clients").upsert({phone:t,visits:Er,last_visit:new Date().toISOString()},{onConflict:"phone"}).select().single();if(Lr)throw Lr;const es=parseInt(R)||0;await br(Sr.id,es,"service","Manual: Visita"),i("Visita registrada para "+t+". Total: "+Er),r("")}}catch(Se){console.error(Se),i("Error: "+(Se.message||"Error desconocido"))}};return g.jsxs("div",{className:"max-w-2xl mx-auto p-4 py-12 md:pt-24",children:[g.jsxs("h2",{className:"text-3xl serif text-stone-900 mb-8 border-b pb-4 flex justify-between items-center",children:[g.jsx("span",{children:"Panel de Atencin"}),g.jsx("button",{onClick:e,className:"text-sm bg-stone-200 px-3 py-1 rounded hover:bg-stone-300 transition",children:"Salir"})]}),g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 mb-8",children:[g.jsxs("h3",{className:"text-xl font-bold text-stone-900 mb-4 flex items-center gap-2",children:[g.jsx(EE,{className:"text-green-600"}),"Registrar Visita Manual"]}),g.jsx("p",{className:"text-sm text-stone-500 mb-6",children:"Ingrese nmero y monto para registrar."}),g.jsxs("div",{className:"flex gap-4 mb-4 flex-wrap",children:[g.jsx("input",{type:"tel",value:t,onChange:Se=>r(Se.target.value),placeholder:"+569...",className:"flex-1 min-w-[150px] px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-green-600 outline-none"}),m==="loyalty"&&g.jsx("input",{type:"number",value:R,onChange:Se=>U(Se.target.value),placeholder:"Monto ($)",className:"w-32 px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-green-600 outline-none"}),g.jsxs("button",{onClick:Ra,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition flex items-center gap-2",children:[g.jsx(LN,{size:18}),"Registrar"]})]}),g.jsx("div",{className:"flex justify-center mb-6",children:g.jsxs("div",{className:"bg-stone-800 p-1 rounded-xl inline-flex",children:[g.jsx("button",{onClick:()=>v("loyalty"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${m==="loyalty"?"bg-amber-500 text-stone-900":"text-stone-400 hover:text-white"}`,children:"Visitas"}),g.jsx("button",{onClick:()=>v("hair"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${m==="hair"?"bg-purple-500 text-white":"text-stone-400 hover:text-white"}`,children:"Peluquera"}),g.jsx("button",{onClick:()=>v("inventory"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${m==="inventory"?"bg-blue-500 text-white":"text-stone-400 hover:text-white"}`,children:"Inventario"}),g.jsx("button",{onClick:()=>v("clients"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${m==="clients"?"bg-red-500 text-white":"text-stone-400 hover:text-white"}`,children:"Clientes"}),g.jsx("button",{onClick:()=>v("expenses"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${m==="expenses"?"bg-emerald-600 text-white":"text-stone-400 hover:text-white"}`,children:"Compras"})]})}),g.jsxs("div",{className:"bg-stone-800 p-6 rounded-2xl shadow-xl border border-white/5",children:[g.jsx("h3",{className:"serif text-xl mb-4 text-center text-white",children:m==="loyalty"?"Registrar Visita":m==="hair"?"Registrar Servicio Peluquera":m==="inventory"?"Gestin de Inventario":m==="clients"?"Gestin de Clientes":"Control de Inversin y Compras"}),m==="expenses"&&g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-stone-700/50 p-4 rounded-xl space-y-3",children:[g.jsx("h4",{className:"text-white font-bold text-sm",children:"Registrar Nueva Compra"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:ae,onChange:Se=>je(Se.target.value),placeholder:"Descripcin (ej: Tijeras, Sillas...)",className:"flex-1 bg-stone-900 border border-white/10 rounded px-3 py-2 text-white text-sm"}),g.jsx("input",{type:"number",value:De,onChange:Se=>ye(Se.target.value),placeholder:"Monto",className:"w-24 bg-stone-900 border border-white/10 rounded px-3 py-2 text-white text-sm"}),g.jsx("button",{onClick:Ai,disabled:Be,className:"bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded font-bold text-sm disabled:opacity-50",children:Be?"...":"Guardar"})]}),g.jsx("p",{className:"text-[10px] text-stone-400 italic",children:"* La categora se asigna automticamente con IA."})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[["Materiales","Herramientas","Mobiliario","Insumos Recepcin","Otros"].map(Se=>{const Ge=_e.filter(lt=>lt.category===Se).reduce((lt,Er)=>lt+Er.amount,0);return g.jsxs("div",{className:"bg-stone-900 p-3 rounded-lg border border-white/5",children:[g.jsx("div",{className:"text-stone-400 text-[10px] uppercase font-bold",children:Se}),g.jsxs("div",{className:"text-emerald-400 font-mono text-lg font-bold",children:["$",Ge.toLocaleString()]})]},Se)}),g.jsxs("div",{className:"bg-emerald-900/30 p-3 rounded-lg border border-emerald-500/30 col-span-2",children:[g.jsx("div",{className:"text-emerald-200 text-xs uppercase font-bold",children:"Inversin Total"}),g.jsxs("div",{className:"text-white font-mono text-2xl font-bold",children:["$",_e.reduce((Se,Ge)=>Se+Ge.amount,0).toLocaleString()]})]})]}),g.jsx("div",{className:"max-h-60 overflow-y-auto",children:g.jsxs("table",{className:"w-full text-xs text-left text-stone-300",children:[g.jsx("thead",{className:"sticky top-0 bg-stone-800",children:g.jsxs("tr",{className:"text-stone-500 border-b border-stone-700",children:[g.jsx("th",{className:"pb-2",children:"Desc"}),g.jsx("th",{className:"pb-2",children:"Cat"}),g.jsx("th",{className:"pb-2 text-right",children:"Monto"}),g.jsx("th",{className:"pb-2 w-8"})]})}),g.jsx("tbody",{className:"divide-y divide-stone-700",children:_e.map(Se=>g.jsxs("tr",{children:[g.jsx("td",{className:"py-2",children:Se.description}),g.jsx("td",{className:"py-2",children:g.jsx("span",{className:"bg-stone-700 px-1 rounded text-[10px]",children:Se.category})}),g.jsxs("td",{className:"py-2 text-right text-emerald-400",children:["$",Se.amount.toLocaleString()]}),g.jsx("td",{className:"py-2 text-right",children:g.jsx("button",{onClick:()=>$n(Se.id),className:"text-red-500 hover:text-red-400",children:g.jsx(yi,{size:12})})})]},Se.id))})]})})]}),m==="clients"&&g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",placeholder:"Buscar por telfono...",value:se,onChange:Se=>ie(Se.target.value),className:"flex-1 bg-stone-900 border border-white/10 rounded-lg px-4 py-2 text-white"}),g.jsxs("button",{onClick:()=>Hn(),className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2",children:[g.jsx(EE,{size:16})," Nuevo"]})]}),g.jsxs("div",{className:"overflow-x-auto max-h-96",children:[g.jsxs("table",{className:"w-full text-xs text-left text-stone-300",children:[g.jsx("thead",{className:"text-xs text-stone-400 uppercase bg-stone-700/50 sticky top-0",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-3 py-2",children:"Nombre"}),g.jsx("th",{className:"px-3 py-2",children:"Telfono"}),g.jsx("th",{className:"px-3 py-2 text-center",children:"Visitas"}),g.jsx("th",{className:"px-3 py-2 text-center",children:"Peluquera"}),g.jsx("th",{className:"px-3 py-2 text-right",children:"Acciones"})]})}),g.jsx("tbody",{children:Y.map(Se=>g.jsxs("tr",{className:"border-b border-stone-700 hover:bg-stone-700/20",children:[g.jsx("td",{className:"px-3 py-2 text-white font-medium",children:Se.name||"Sin nombre"}),g.jsx("td",{className:"px-3 py-2 text-stone-300 font-mono",children:Se.phone}),g.jsx("td",{className:"px-3 py-2 text-center",children:Se.visits}),g.jsx("td",{className:"px-3 py-2 text-center text-purple-400 font-bold",children:Se.hair_service_count||0}),g.jsxs("td",{className:"px-3 py-2 text-right flex justify-end gap-1",children:[g.jsx("button",{onClick:()=>wn(Se),className:"bg-purple-600/20 hover:bg-purple-600 hover:text-white text-purple-400 p-1.5 rounded transition",title:"Ver Historial",children:g.jsx(TN,{size:14})}),g.jsx("button",{onClick:()=>Hn(Se),className:"bg-blue-600/20 hover:bg-blue-600 hover:text-white text-blue-500 p-1.5 rounded transition",title:"Editar Cliente",children:g.jsx(lp,{size:14,className:"rotate-90"})}),g.jsx("button",{onClick:()=>Ja(Se.id,Se.phone),className:"bg-red-600/20 hover:bg-red-600 hover:text-white text-red-500 p-1.5 rounded transition",title:"Eliminar Cliente",children:g.jsx(yi,{size:14})})]})]},Se.id))})]}),Y.length===0&&g.jsx("p",{className:"text-center text-stone-500 py-4",children:"No se encontraron clientes."})]}),be&&g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-stone-800 p-6 rounded-2xl w-full max-w-sm border border-stone-600 shadow-2xl",children:[g.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:Ee?"Editar Cliente":"Nuevo Cliente"}),g.jsxs("div",{className:"space-y-3 mb-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-stone-500 mb-1 block",children:"Telfono (ID nico)"}),g.jsx("input",{className:"w-full bg-stone-900 border border-stone-700 rounded p-2 text-white text-sm disabled:opacity-50",placeholder:"+569...",value:le,onChange:Se=>me(Se.target.value),disabled:!!Ee}),Ee&&g.jsx("p",{className:"text-[10px] text-stone-500 mt-1",children:"El telfono no se puede cambiar."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-stone-500 mb-1 block",children:"Nombre"}),g.jsx("input",{className:"w-full bg-stone-900 border border-stone-700 rounded p-2 text-white text-sm",placeholder:"Nombre Cliente",value:re,onChange:Se=>ze(Se.target.value)})]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>Ce(!1),className:"flex-1 py-2 rounded bg-stone-700 text-white text-sm hover:bg-stone-600",children:"Cancelar"}),g.jsx("button",{onClick:No,className:"flex-1 py-2 rounded bg-green-600 text-white font-bold text-sm hover:bg-green-500",children:"Guardar"})]})]})}),$e&&g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-stone-800 p-6 rounded-2xl w-full max-w-lg max-h-[80vh] overflow-hidden flex flex-col border border-stone-600 shadow-2xl",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-bold text-white",children:"Historial de Servicios"}),g.jsxs("p",{className:"text-sm text-stone-400",children:[$e.name||"Cliente"," - ",$e.phone]})]}),g.jsx("button",{onClick:()=>{Ue(null),de([])},className:"p-2 hover:bg-stone-700 rounded-full text-stone-400",children:g.jsx(yi,{size:20})})]}),Xe?g.jsx("div",{className:"py-12 text-center text-stone-400",children:"Cargando historial..."}):J.length===0?g.jsx("div",{className:"py-12 text-center text-stone-500 bg-stone-900 rounded-lg border border-stone-700",children:g.jsx("p",{children:"Este cliente no tiene transacciones registradas."})}):g.jsx("div",{className:"overflow-y-auto flex-1",children:g.jsxs("table",{className:"w-full text-xs text-left text-stone-300",children:[g.jsx("thead",{className:"text-xs uppercase bg-stone-700 text-stone-400 sticky top-0",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-3 py-2",children:"Fecha"}),g.jsx("th",{className:"px-3 py-2",children:"Descripcin"}),g.jsx("th",{className:"px-3 py-2 text-right",children:"Monto"}),g.jsx("th",{className:"px-3 py-2 w-8"})]})}),g.jsx("tbody",{children:J.map(Se=>g.jsxs("tr",{className:"border-b border-stone-700 hover:bg-stone-700/30",children:[g.jsx("td",{className:"px-3 py-2 text-stone-500 text-[10px]",children:new Date(Se.created_at).toLocaleDateString("es-CL")}),g.jsx("td",{className:"px-3 py-2 text-white",children:Se.description||(Se.type==="service"?"Servicio":"Producto")}),g.jsxs("td",{className:"px-3 py-2 text-right text-emerald-400 font-bold",children:["$",Se.amount.toLocaleString()]}),g.jsx("td",{className:"px-3 py-2 text-right",children:g.jsx("button",{onClick:()=>_o(Se.id),className:"text-red-500 hover:text-red-400 p-1",title:"Eliminar",children:g.jsx(nd,{size:12})})})]},Se.id))}),g.jsx("tfoot",{className:"bg-stone-900 font-bold text-white",children:g.jsxs("tr",{children:[g.jsx("td",{colSpan:2,className:"px-3 py-2",children:"Total"}),g.jsxs("td",{className:"px-3 py-2 text-right text-emerald-400",children:["$",J.reduce((Se,Ge)=>Se+Ge.amount,0).toLocaleString()]}),g.jsx("td",{})]})})]})}),g.jsx("div",{className:"mt-4 pt-4 border-t border-stone-700",children:g.jsx("button",{onClick:()=>{Ue(null),de([])},className:"w-full py-2 bg-stone-700 hover:bg-stone-600 text-white rounded font-bold text-sm",children:"Cerrar"})})]})})]}),m==="inventory"&&g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-xs text-left text-stone-300",children:[g.jsx("thead",{className:"text-xs text-stone-400 uppercase bg-stone-700/50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-3 py-2",children:"Perfume"}),g.jsx("th",{className:"px-3 py-2 text-center",children:"Stock"}),g.jsx("th",{className:"px-3 py-2 text-center",children:"Precio 10ml"}),g.jsx("th",{className:"px-3 py-2 text-right",children:"Accin"})]})}),g.jsx("tbody",{children:qa.map(Se=>g.jsx(KD,{perfume:Se,onSell:(Ge,lt)=>br(H?.id||"anon",Ge,"product",lt)},Se.id))})]})}),m==="hair"&&g.jsxs("div",{className:"mb-4 space-y-3",children:[g.jsxs("select",{value:b,onChange:Se=>S(Se.target.value),className:"w-full bg-stone-900 border border-white/10 rounded-lg px-3 py-2 text-white",children:[g.jsx("option",{value:"Corte",children:"Corte ($7.000+)"}),g.jsx("option",{value:"Lavado",children:"Lavado ($5.000)"}),g.jsx("option",{value:"Tintura",children:"Tintura ($10.000+)"}),g.jsx("option",{value:"Masaje",children:"Masaje ($5.000)"})]}),g.jsx("input",{type:"number",value:A,onChange:Se=>O(Se.target.value),placeholder:"Precio Real",className:"w-full bg-stone-900 border border-white/10 rounded-lg px-3 py-2 text-white"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"number",value:I,onChange:Se=>P(Se.target.value),placeholder:"Costo Extra ($)",className:"w-1/3 bg-stone-900 border border-white/10 rounded-lg px-3 py-2 text-white text-sm"}),g.jsx("input",{type:"text",value:M,onChange:Se=>L(Se.target.value),placeholder:"Detalle (ej: Luz, Caf)",className:"w-2/3 bg-stone-900 border border-white/10 rounded-lg px-3 py-2 text-white text-sm"})]})]}),m!=="inventory"&&m!=="clients"&&m!=="expenses"&&g.jsxs("button",{onClick:()=>c(!0),className:`w-full py-4 rounded-xl flex items-center justify-center gap-2 font-bold text-lg transition ${m==="hair"?"bg-purple-600 hover:bg-purple-500 text-white":"bg-amber-500 hover:bg-amber-400 text-stone-900"}`,children:[g.jsx(op,{size:24}),m==="hair"?"Escanear para Servicio":"Escanear Tarjeta"]}),n&&g.jsx("div",{className:"mt-4 p-3 bg-green-500/20 text-green-400 rounded-lg text-sm font-medium whitespace-pre-wrap",children:n}),H&&g.jsxs("div",{className:"mt-6 border-t border-white/10 pt-4",children:[g.jsxs("h3",{className:"font-bold text-white mb-3",children:["Cliente: ",H.phone]}),g.jsx("div",{className:"space-y-3",children:H.discount_5th_visit_available?g.jsx("button",{onClick:Ve,className:"w-full bg-purple-600 text-white py-2 rounded",children:"Canjear 10%"}):g.jsx("div",{className:"text-stone-500 text-xs text-center",children:"Sin descuento disponible"})})]})]}),s&&g.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center p-4",children:g.jsxs("div",{className:"bg-white p-4 rounded-2xl w-full max-w-sm relative",children:[g.jsx("button",{onClick:()=>c(!1),className:"absolute -top-12 right-0 text-white p-2",children:g.jsx(yi,{size:32})}),g.jsx("h3",{className:"text-center font-bold mb-4",children:"Escanea el Cdigo del Cliente"}),g.jsx("div",{id:"reader",className:"w-full bg-stone-100 rounded-lg overflow-hidden"})]})})]})]})},YD=({visit:e,onClose:t,onSuccess:r})=>{const[n,i]=N.useState(!1),[s,c]=N.useState(""),[f,p]=N.useState(!0),[m,v]=N.useState(""),b=async()=>{if(!s.trim()){v("Debes ingresar qu servicio o producto se realiz.");return}i(!0),v("");try{const{data:A,error:O}=await We.rpc("process_visit_validation",{registration_id:e.id,new_status:"approved",notes:s,count_as_loyalty:f});if(O)throw O;if(!A.success)throw new Error(A.message);r(),t()}catch(A){v(A.message||"Error al validar visita")}finally{i(!1)}},S=async()=>{if(window.confirm("Seguro que quieres rechazar/eliminar esta visita?")){i(!0);try{const{error:A}=await We.rpc("process_visit_validation",{registration_id:e.id,new_status:"rejected",notes:"Rechazada por admin",count_as_loyalty:!1});if(A)throw A;r(),t()}catch(A){alert(A.message)}finally{i(!1)}}};return g.jsx("div",{className:"fixed inset-0 bg-stone-950/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full overflow-hidden animate-fade-in-up",children:[g.jsxs("div",{className:"bg-stone-900 px-6 py-4 flex justify-between items-center",children:[g.jsx("h3",{className:"text-amber-100 font-serif text-lg",children:"Validar Visita"}),g.jsx("button",{onClick:t,className:"text-stone-400 hover:text-white transition",children:g.jsx(yi,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-6 bg-stone-50 p-3 rounded-lg border border-stone-200",children:[g.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center text-amber-700 font-bold",children:e.client?.name.charAt(0)}),g.jsxs("div",{children:[g.jsx("p",{className:"font-bold text-stone-800",children:e.client?.name}),g.jsx("p",{className:"text-xs text-stone-500",children:e.client?.phone})]}),g.jsx("div",{className:"ml-auto text-xs text-stone-400",children:new Date(e.check_in_time).toLocaleTimeString()})]}),m&&g.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg text-sm border border-red-100 flex items-center gap-2",children:[g.jsx(sy,{className:"w-4 h-4"}),m]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase tracking-wider mb-1",children:"Servicio Realizado / Compra"}),g.jsx("textarea",{value:s,onChange:A=>c(A.target.value),placeholder:"Ej: Corte Bob + Braiding o Compra Perfume Yara",className:"w-full border border-stone-300 rounded-lg px-3 py-2 text-stone-800 focus:ring-2 focus:ring-amber-500 outline-none h-24 resize-none",autoFocus:!0})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"cntLoyalty",checked:f,onChange:A=>p(A.target.checked),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500 border-stone-300"}),g.jsx("label",{htmlFor:"cntLoyalty",className:"text-sm text-stone-700 cursor-pointer select-none",children:"Contar como visita vlida para premios"})]})]}),g.jsxs("div",{className:"mt-8 flex gap-3",children:[g.jsx("button",{onClick:S,disabled:n,className:"px-4 py-3 border border-stone-300 text-stone-500 rounded-lg hover:bg-stone-100 transition font-medium text-sm",children:"Rechazar"}),g.jsx("button",{onClick:b,disabled:n,className:"flex-1 py-3 bg-stone-900 text-white rounded-lg hover:bg-stone-800 transition font-bold shadow-lg flex items-center justify-center gap-2",children:n?g.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):g.jsxs(g.Fragment,{children:[g.jsx(xc,{className:"w-4 h-4"}),"Validar y Sumar Puntos"]})})]})]})]})})};function w4(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=w4(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Vt(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=w4(e))&&(n&&(n+=" "),n+=t);return n}var ZD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function wy(e){if(typeof e!="string")return!1;var t=ZD;return t.includes(e)}var QD=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],JD=new Set(QD);function b4(e){return typeof e!="string"?!1:JD.has(e)}function E4(e){return typeof e=="string"&&e.startsWith("data-")}function $i(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(b4(r)||E4(r))&&(t[r]=e[r]);return t}function Nc(e){if(e==null)return null;if(N.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return $i(t)}return typeof e=="object"&&!Array.isArray(e)?$i(e):null}function Wi(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(b4(r)||E4(r)||wy(r))&&(t[r]=e[r]);return t}var e9=["children","width","height","viewBox","className","style","title","desc"];function Yx(){return Yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yx.apply(null,arguments)}function t9(e,t){if(e==null)return{};var r,n,i=r9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function r9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var by=N.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:s,className:c,style:f,title:p,desc:m}=e,v=t9(e,e9),b=s||{width:n,height:i,x:0,y:0},S=Vt("recharts-surface",c);return N.createElement("svg",Yx({},Wi(v),{className:S,width:n,height:i,style:f,viewBox:"".concat(b.x," ").concat(b.y," ").concat(b.width," ").concat(b.height),ref:t}),N.createElement("title",null,p),N.createElement("desc",null,m),r)}),n9=["children","className"];function Zx(){return Zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zx.apply(null,arguments)}function i9(e,t){if(e==null)return{};var r,n,i=a9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function a9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Yr=N.forwardRef((e,t)=>{var{children:r,className:n}=e,i=i9(e,n9),s=Vt("recharts-layer",n);return N.createElement("g",Zx({className:s},Wi(i),{ref:t}),r)}),S4=N.createContext(null),s9=()=>N.useContext(S4);function hr(e){return function(){return e}}const C4=Math.cos,a0=Math.sin,ja=Math.sqrt,s0=Math.PI,hp=2*s0,Qx=Math.PI,Jx=2*Qx,el=1e-6,o9=Jx-el;function A4(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function l9(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return A4;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class c9{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?A4:l9(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,c){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+c}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let c=this._x1,f=this._y1,p=n-t,m=i-r,v=c-t,b=f-r,S=v*v+b*b;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(S>el)if(!(Math.abs(b*p-m*v)>el)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let A=n-c,O=i-f,I=p*p+m*m,P=A*A+O*O,M=Math.sqrt(I),L=Math.sqrt(S),R=s*Math.tan((Qx-Math.acos((I+S-P)/(2*M*L)))/2),U=R/L,W=R/M;Math.abs(U-1)>el&&this._append`L${t+U*v},${r+U*b}`,this._append`A${s},${s},0,0,${+(b*A>v*O)},${this._x1=t+W*p},${this._y1=r+W*m}`}}arc(t,r,n,i,s,c){if(t=+t,r=+r,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let f=n*Math.cos(i),p=n*Math.sin(i),m=t+f,v=r+p,b=1^c,S=c?i-s:s-i;this._x1===null?this._append`M${m},${v}`:(Math.abs(this._x1-m)>el||Math.abs(this._y1-v)>el)&&this._append`L${m},${v}`,n&&(S<0&&(S=S%Jx+Jx),S>o9?this._append`A${n},${n},0,1,${b},${t-f},${r-p}A${n},${n},0,1,${b},${this._x1=m},${this._y1=v}`:S>el&&this._append`A${n},${n},0,${+(S>=Qx)},${b},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Ey(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new c9(t)}function Sy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _4(e){this._context=e}_4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function pp(e){return new _4(e)}function N4(e){return e[0]}function O4(e){return e[1]}function I4(e,t){var r=hr(!0),n=null,i=pp,s=null,c=Ey(f);e=typeof e=="function"?e:e===void 0?N4:hr(e),t=typeof t=="function"?t:t===void 0?O4:hr(t);function f(p){var m,v=(p=Sy(p)).length,b,S=!1,A;for(n==null&&(s=i(A=c())),m=0;m<=v;++m)!(m<v&&r(b=p[m],m,p))===S&&((S=!S)?s.lineStart():s.lineEnd()),S&&s.point(+e(b,m,p),+t(b,m,p));if(A)return s=null,A+""||null}return f.x=function(p){return arguments.length?(e=typeof p=="function"?p:hr(+p),f):e},f.y=function(p){return arguments.length?(t=typeof p=="function"?p:hr(+p),f):t},f.defined=function(p){return arguments.length?(r=typeof p=="function"?p:hr(!!p),f):r},f.curve=function(p){return arguments.length?(i=p,n!=null&&(s=i(n)),f):i},f.context=function(p){return arguments.length?(p==null?n=s=null:s=i(n=p),f):n},f}function ph(e,t,r){var n=null,i=hr(!0),s=null,c=pp,f=null,p=Ey(m);e=typeof e=="function"?e:e===void 0?N4:hr(+e),t=typeof t=="function"?t:hr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?O4:hr(+r);function m(b){var S,A,O,I=(b=Sy(b)).length,P,M=!1,L,R=new Array(I),U=new Array(I);for(s==null&&(f=c(L=p())),S=0;S<=I;++S){if(!(S<I&&i(P=b[S],S,b))===M)if(M=!M)A=S,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),O=S-1;O>=A;--O)f.point(R[O],U[O]);f.lineEnd(),f.areaEnd()}M&&(R[S]=+e(P,S,b),U[S]=+t(P,S,b),f.point(n?+n(P,S,b):R[S],r?+r(P,S,b):U[S]))}if(L)return f=null,L+""||null}function v(){return I4().defined(i).curve(c).context(s)}return m.x=function(b){return arguments.length?(e=typeof b=="function"?b:hr(+b),n=null,m):e},m.x0=function(b){return arguments.length?(e=typeof b=="function"?b:hr(+b),m):e},m.x1=function(b){return arguments.length?(n=b==null?null:typeof b=="function"?b:hr(+b),m):n},m.y=function(b){return arguments.length?(t=typeof b=="function"?b:hr(+b),r=null,m):t},m.y0=function(b){return arguments.length?(t=typeof b=="function"?b:hr(+b),m):t},m.y1=function(b){return arguments.length?(r=b==null?null:typeof b=="function"?b:hr(+b),m):r},m.lineX0=m.lineY0=function(){return v().x(e).y(t)},m.lineY1=function(){return v().x(e).y(r)},m.lineX1=function(){return v().x(n).y(t)},m.defined=function(b){return arguments.length?(i=typeof b=="function"?b:hr(!!b),m):i},m.curve=function(b){return arguments.length?(c=b,s!=null&&(f=c(s)),m):c},m.context=function(b){return arguments.length?(b==null?s=f=null:f=c(s=b),m):s},m}class T4{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function u9(e){return new T4(e,!0)}function d9(e){return new T4(e,!1)}const Cy={draw(e,t){const r=ja(t/s0);e.moveTo(r,0),e.arc(0,0,r,0,hp)}},f9={draw(e,t){const r=ja(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},k4=ja(1/3),h9=k4*2,p9={draw(e,t){const r=ja(t/h9),n=r*k4;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},m9={draw(e,t){const r=ja(t),n=-r/2;e.rect(n,n,r,r)}},g9=.8908130915292852,P4=a0(s0/10)/a0(7*s0/10),x9=a0(hp/10)*P4,v9=-C4(hp/10)*P4,y9={draw(e,t){const r=ja(t*g9),n=x9*r,i=v9*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const c=hp*s/5,f=C4(c),p=a0(c);e.lineTo(p*r,-f*r),e.lineTo(f*n-p*i,p*n+f*i)}e.closePath()}},Xg=ja(3),w9={draw(e,t){const r=-ja(t/(Xg*3));e.moveTo(0,r*2),e.lineTo(-Xg*r,-r),e.lineTo(Xg*r,-r),e.closePath()}},na=-.5,ia=ja(3)/2,ev=1/ja(12),b9=(ev/2+1)*3,E9={draw(e,t){const r=ja(t/b9),n=r/2,i=r*ev,s=n,c=r*ev+r,f=-s,p=c;e.moveTo(n,i),e.lineTo(s,c),e.lineTo(f,p),e.lineTo(na*n-ia*i,ia*n+na*i),e.lineTo(na*s-ia*c,ia*s+na*c),e.lineTo(na*f-ia*p,ia*f+na*p),e.lineTo(na*n+ia*i,na*i-ia*n),e.lineTo(na*s+ia*c,na*c-ia*s),e.lineTo(na*f+ia*p,na*p-ia*f),e.closePath()}};function S9(e,t){let r=null,n=Ey(i);e=typeof e=="function"?e:hr(e||Cy),t=typeof t=="function"?t:hr(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:hr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:hr(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function o0(){}function l0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function j4(e){this._context=e}j4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:l0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:l0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C9(e){return new j4(e)}function R4(e){this._context=e}R4.prototype={areaStart:o0,areaEnd:o0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:l0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function A9(e){return new R4(e)}function M4(e){this._context=e}M4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:l0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _9(e){return new M4(e)}function D4(e){this._context=e}D4.prototype={areaStart:o0,areaEnd:o0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function N9(e){return new D4(e)}function pS(e){return e<0?-1:1}function mS(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),c=(r-e._y1)/(i||n<0&&-0),f=(s*i+c*n)/(n+i);return(pS(s)+pS(c))*Math.min(Math.abs(s),Math.abs(c),.5*Math.abs(f))||0}function gS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Yg(e,t,r){var n=e._x0,i=e._y0,s=e._x1,c=e._y1,f=(s-n)/3;e._context.bezierCurveTo(n+f,i+f*t,s-f,c-f*r,s,c)}function c0(e){this._context=e}c0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Yg(this,this._t0,gS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Yg(this,gS(this,r=mS(this,e,t)),r);break;default:Yg(this,this._t0,r=mS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function L4(e){this._context=new B4(e)}(L4.prototype=Object.create(c0.prototype)).point=function(e,t){c0.prototype.point.call(this,t,e)};function B4(e){this._context=e}B4.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function O9(e){return new c0(e)}function I9(e){return new L4(e)}function F4(e){this._context=e}F4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=xS(e),i=xS(t),s=0,c=1;c<r;++s,++c)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[c],t[c]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function xS(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),c=new Array(r);for(i[0]=0,s[0]=2,c[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,c[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,c[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,c[t]-=n*c[t-1];for(i[r-1]=c[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(c[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function T9(e){return new F4(e)}function mp(e,t){this._context=e,this._t=t}mp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function k9(e){return new mp(e,.5)}function P9(e){return new mp(e,0)}function j9(e){return new mp(e,1)}function ml(e,t){if((c=e.length)>1)for(var r=1,n,i,s=e[t[0]],c,f=s.length;r<c;++r)for(i=s,s=e[t[r]],n=0;n<f;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function tv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function R9(e,t){return e[t]}function M9(e){const t=[];return t.key=e,t}function D9(){var e=hr([]),t=tv,r=ml,n=R9;function i(s){var c=Array.from(e.apply(this,arguments),M9),f,p=c.length,m=-1,v;for(const b of s)for(f=0,++m;f<p;++f)(c[f][m]=[0,+n(b,c[f].key,m,s)]).data=b;for(f=0,v=Sy(t(c));f<p;++f)c[v[f]].index=f;return r(c,v),c}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:hr(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:hr(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?tv:typeof s=="function"?s:hr(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??ml,i):r},i}function L9(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,c;i<s;++i){for(c=r=0;r<n;++r)c+=e[r][i][1]||0;if(c)for(r=0;r<n;++r)e[r][i][1]/=c}ml(e,t)}}function B9(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var c=0,f=0;c<i;++c)f+=e[c][r][1]||0;n[r][1]+=n[r][0]=-f/2}ml(e,t)}}function F9(e,t){if(!(!((c=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,c;n<s;++n){for(var f=0,p=0,m=0;f<c;++f){for(var v=e[t[f]],b=v[n][1]||0,S=v[n-1][1]||0,A=(b-S)/2,O=0;O<f;++O){var I=e[t[O]],P=I[n][1]||0,M=I[n-1][1]||0;A+=P-M}p+=b,m+=A*b}i[n-1][1]+=i[n-1][0]=r,p&&(r-=m/p)}i[n-1][1]+=i[n-1][0]=r,ml(e,t)}}var Zg={},Qg={},vS;function U9(){return vS||(vS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Qg)),Qg}var Jg={},yS;function U4(){return yS||(yS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Jg)),Jg}var e1={},wS;function Ay(){return wS||(wS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(e1)),e1}var t1={},r1={},bS;function z9(){return bS||(bS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(r1)),r1}var ES;function _y(){return ES||(ES=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z9(),r=Ay();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const s=[],c=i.length;if(c===0)return s;let f=0,p="",m="",v=!1;for(i.charCodeAt(0)===46&&(s.push(""),f++);f<c;){const b=i[f];m?b==="\\"&&f+1<c?(f++,p+=i[f]):b===m?m="":p+=b:v?b==='"'||b==="'"?m=b:b==="]"?(v=!1,s.push(p),p=""):p+=b:b==="["?(v=!0,p&&(s.push(p),p="")):b==="."?p&&(s.push(p),p=""):p+=b,f++}return p&&s.push(p),s}e.toPath=n})(t1)),t1}var SS;function Ny(){return SS||(SS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U9(),r=U4(),n=Ay(),i=_y();function s(f,p,m){if(f==null)return m;switch(typeof p){case"string":{if(t.isUnsafeProperty(p))return m;const v=f[p];return v===void 0?r.isDeepKey(p)?s(f,i.toPath(p),m):m:v}case"number":case"symbol":{typeof p=="number"&&(p=n.toKey(p));const v=f[p];return v===void 0?m:v}default:{if(Array.isArray(p))return c(f,p,m);if(Object.is(p?.valueOf(),-0)?p="-0":p=String(p),t.isUnsafeProperty(p))return m;const v=f[p];return v===void 0?m:v}}}function c(f,p,m){if(p.length===0)return m;let v=f;for(let b=0;b<p.length;b++){if(v==null||t.isUnsafeProperty(p[b]))return m;v=v[p[b]]}return v===void 0?m:v}e.get=s})(Zg)),Zg}var n1,CS;function $9(){return CS||(CS=1,n1=Ny().get),n1}var W9=$9();const gl=da(W9);var V9=4;function go(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V9,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Wr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((i,s,c)=>{var f=r[c-1];return typeof f=="string"?i+f+s:f!==void 0?i+go(f)+s:i+s},"")}var In=e=>e===0?0:e>0?1:-1,Vi=e=>typeof e=="number"&&e!=+e,Ns=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,at=e=>(typeof e=="number"||e instanceof Number)&&!Vi(e),la=e=>at(e)||typeof e=="string",H9=0,od=e=>{var t=++H9;return"".concat(e||"").concat(t)},ti=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!at(t)&&typeof t!="string")return n;var s;if(Ns(t)){if(r==null)return n;var c=t.indexOf("%");s=r*parseFloat(t.slice(0,c))/100}else s=+t;return Vi(s)&&(s=n),i&&r!=null&&s>r&&(s=r),s},z4=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Mr(e,t,r){return at(e)&&at(t)?go(e+r*(t-e)):t}function $4(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):gl(n,t))===r)}var q9=e=>{for(var t=e.length,r=0,n=0,i=0,s=0,c=1/0,f=-1/0,p=0,m=0,v=0;v<t;v++){var b,S;p=((b=e[v])===null||b===void 0?void 0:b.cx)||0,m=((S=e[v])===null||S===void 0?void 0:S.cy)||0,r+=p,n+=m,i+=p*m,s+=p*p,c=Math.min(c,p),f=Math.max(f,p)}var A=t*s!==r*r?(t*i-r*n)/(t*s-r*r):0;return{xmin:c,xmax:f,a:A,b:(n-A*r)/t}},pr=e=>e===null||typeof e>"u",Nd=e=>pr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function G9(e){return e!=null}function Od(){}var K9=["type","size","sizeType"];function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rv.apply(null,arguments)}function AS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _S(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AS(Object(r),!0).forEach(function(n){X9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X9(e,t,r){return(t=Y9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y9(e){var t=Z9(e,"string");return typeof t=="symbol"?t:t+""}function Z9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q9(e,t){if(e==null)return{};var r,n,i=J9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function J9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var W4={symbolCircle:Cy,symbolCross:f9,symbolDiamond:p9,symbolSquare:m9,symbolStar:y9,symbolTriangle:w9,symbolWye:E9},e7=Math.PI/180,t7=e=>{var t="symbol".concat(Nd(e));return W4[t]||Cy},r7=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*e7;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},n7=(e,t)=>{W4["symbol".concat(Nd(e))]=t},gp=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=Q9(e,K9),s=_S(_S({},i),{},{type:t,size:r,sizeType:n}),c="circle";typeof t=="string"&&(c=t);var f=()=>{var S=t7(c),A=S9().type(S).size(r7(r,n,c)),O=A();if(O!==null)return O},{className:p,cx:m,cy:v}=s,b=Wi(s);return at(m)&&at(v)&&at(r)?N.createElement("path",rv({},b,{className:Vt("recharts-symbols",p),transform:"translate(".concat(m,", ").concat(v,")"),d:f()})):null};gp.registerSymbol=n7;var V4=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,i7=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{wy(i)&&(n[i]=(s=>r[i](r,s)))}),n},a7=(e,t,r)=>n=>(e(t,r,n),null),Uc=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var s=e[i];wy(i)&&typeof s=="function"&&(n||(n={}),n[i]=a7(s,t,r))}),n},s7=e=>Array.isArray(e)&&e.length>0;function NS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function o7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NS(Object(r),!0).forEach(function(n){l7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l7(e,t,r){return(t=c7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c7(e){var t=u7(e,"string");return typeof t=="symbol"?t:t+""}function u7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zr(e,t){var r=o7({},e),n=t,i=Object.keys(t),s=i.reduce((c,f)=>(c[f]===void 0&&n[f]!==void 0&&(c[f]=n[f]),c),r);return s}function u0(){return u0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u0.apply(null,arguments)}function OS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function d7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OS(Object(r),!0).forEach(function(n){f7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f7(e,t,r){return(t=h7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h7(e){var t=p7(e,"string");return typeof t=="symbol"?t:t+""}function p7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sa=32,m7={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function g7(e){var{data:t,iconType:r,inactiveColor:n}=e,i=sa/2,s=sa/6,c=sa/3,f=t.inactive?n:t.color,p=r??t.type;if(p==="none")return null;if(p==="plainline"){var m;return N.createElement("line",{strokeWidth:4,fill:"none",stroke:f,strokeDasharray:(m=t.payload)===null||m===void 0?void 0:m.strokeDasharray,x1:0,y1:i,x2:sa,y2:i,className:"recharts-legend-icon"})}if(p==="line")return N.createElement("path",{strokeWidth:4,fill:"none",stroke:f,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(sa,"M").concat(2*c,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(p==="rect")return N.createElement("path",{stroke:"none",fill:f,d:"M0,".concat(sa/8,"h").concat(sa,"v").concat(sa*3/4,"h").concat(-sa,"z"),className:"recharts-legend-icon"});if(N.isValidElement(t.legendIcon)){var v=d7({},t);return delete v.legendIcon,N.cloneElement(t.legendIcon,v)}return N.createElement(gp,{fill:f,cx:i,cy:i,size:sa,sizeType:"diameter",type:p})}function x7(e){var{payload:t,iconSize:r,layout:n,formatter:i,inactiveColor:s,iconType:c}=e,f={x:0,y:0,width:sa,height:sa},p={display:n==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((v,b)=>{var S=v.formatter||i,A=Vt({"recharts-legend-item":!0,["legend-item-".concat(b)]:!0,inactive:v.inactive});if(v.type==="none")return null;var O=v.inactive?s:v.color,I=S?S(v.value,v,b):v.value;return N.createElement("li",u0({className:A,style:p,key:"legend-item-".concat(b)},Uc(e,v,b)),N.createElement(by,{width:r,height:r,viewBox:f,style:m,"aria-label":"".concat(I," legend icon")},N.createElement(g7,{data:v,iconType:c,inactiveColor:s})),N.createElement("span",{className:"recharts-legend-item-text",style:{color:O}},I))})}var v7=e=>{var t=Zr(e,m7),{payload:r,layout:n,align:i}=t;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return N.createElement("ul",{className:"recharts-default-legend",style:s},N.createElement(x7,u0({},t,{payload:r})))},i1={},a1={},IS;function y7(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let s=0;s<r.length;s++){const c=r[s],f=n(c);i.has(f)||i.set(f,c)}return Array.from(i.values())}e.uniqBy=t})(a1)),a1}var s1={},TS;function H4(){return TS||(TS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(s1)),s1}var o1={},l1={},c1={},kS;function w7(){return kS||(kS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(c1)),c1}var PS;function Oy(){return PS||(PS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w7();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(l1)),l1}var u1={},jS;function b7(){return jS||(jS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(u1)),u1}var RS;function E7(){return RS||(RS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Oy(),r=b7();function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(o1)),o1}var d1={},f1={},MS;function S7(){return MS||(MS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ny();function r(n){return function(i){return t.get(i,n)}}e.property=r})(f1)),f1}var h1={},p1={},m1={},g1={},DS;function q4(){return DS||(DS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(g1)),g1}var x1={},LS;function G4(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(x1)),x1}var v1={},BS;function K4(){return BS||(BS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(v1)),v1}var FS;function C7(){return FS||(FS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q4(),r=G4(),n=K4();function i(v,b,S){return typeof S!="function"?i(v,b,()=>{}):s(v,b,function A(O,I,P,M,L,R){const U=S(O,I,P,M,L,R);return U!==void 0?!!U:s(O,I,A,R)},new Map)}function s(v,b,S,A){if(b===v)return!0;switch(typeof b){case"object":return c(v,b,S,A);case"function":return Object.keys(b).length>0?s(v,{...b},S,A):n.eq(v,b);default:return t.isObject(v)?typeof b=="string"?b==="":!0:n.eq(v,b)}}function c(v,b,S,A){if(b==null)return!0;if(Array.isArray(b))return p(v,b,S,A);if(b instanceof Map)return f(v,b,S,A);if(b instanceof Set)return m(v,b,S,A);const O=Object.keys(b);if(v==null||r.isPrimitive(v))return O.length===0;if(O.length===0)return!0;if(A?.has(b))return A.get(b)===v;A?.set(b,v);try{for(let I=0;I<O.length;I++){const P=O[I];if(!r.isPrimitive(v)&&!(P in v)||b[P]===void 0&&v[P]!==void 0||b[P]===null&&v[P]!==null||!S(v[P],b[P],P,v,b,A))return!1}return!0}finally{A?.delete(b)}}function f(v,b,S,A){if(b.size===0)return!0;if(!(v instanceof Map))return!1;for(const[O,I]of b.entries()){const P=v.get(O);if(S(P,I,O,v,b,A)===!1)return!1}return!0}function p(v,b,S,A){if(b.length===0)return!0;if(!Array.isArray(v))return!1;const O=new Set;for(let I=0;I<b.length;I++){const P=b[I];let M=!1;for(let L=0;L<v.length;L++){if(O.has(L))continue;const R=v[L];let U=!1;if(S(R,P,I,v,b,A)&&(U=!0),U){O.add(L),M=!0;break}}if(!M)return!1}return!0}function m(v,b,S,A){return b.size===0?!0:v instanceof Set?p([...v],[...b],S,A):!1}e.isMatchWith=i,e.isSetMatch=m})(m1)),m1}var US;function X4(){return US||(US=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C7();function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(p1)),p1}var y1={},w1={},b1={},zS;function A7(){return zS||(zS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(b1)),b1}var E1={},$S;function Y4(){return $S||($S=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(E1)),E1}var S1={},WS;function Z4(){return WS||(WS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",s="[object Arguments]",c="[object Symbol]",f="[object Date]",p="[object Map]",m="[object Set]",v="[object Array]",b="[object Function]",S="[object ArrayBuffer]",A="[object Object]",O="[object Error]",I="[object DataView]",P="[object Uint8Array]",M="[object Uint8ClampedArray]",L="[object Uint16Array]",R="[object Uint32Array]",U="[object BigUint64Array]",W="[object Int8Array]",V="[object Int16Array]",H="[object Int32Array]",X="[object BigInt64Array]",Y="[object Float32Array]",we="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=S,e.arrayTag=v,e.bigInt64ArrayTag=X,e.bigUint64ArrayTag=U,e.booleanTag=i,e.dataViewTag=I,e.dateTag=f,e.errorTag=O,e.float32ArrayTag=Y,e.float64ArrayTag=we,e.functionTag=b,e.int16ArrayTag=V,e.int32ArrayTag=H,e.int8ArrayTag=W,e.mapTag=p,e.numberTag=n,e.objectTag=A,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=c,e.uint16ArrayTag=L,e.uint32ArrayTag=R,e.uint8ArrayTag=P,e.uint8ClampedArrayTag=M})(S1)),S1}var C1={},VS;function _7(){return VS||(VS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(C1)),C1}var HS;function Q4(){return HS||(HS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A7(),r=Y4(),n=Z4(),i=G4(),s=_7();function c(v,b){return f(v,void 0,v,new Map,b)}function f(v,b,S,A=new Map,O=void 0){const I=O?.(v,b,S,A);if(I!==void 0)return I;if(i.isPrimitive(v))return v;if(A.has(v))return A.get(v);if(Array.isArray(v)){const P=new Array(v.length);A.set(v,P);for(let M=0;M<v.length;M++)P[M]=f(v[M],M,S,A,O);return Object.hasOwn(v,"index")&&(P.index=v.index),Object.hasOwn(v,"input")&&(P.input=v.input),P}if(v instanceof Date)return new Date(v.getTime());if(v instanceof RegExp){const P=new RegExp(v.source,v.flags);return P.lastIndex=v.lastIndex,P}if(v instanceof Map){const P=new Map;A.set(v,P);for(const[M,L]of v)P.set(M,f(L,M,S,A,O));return P}if(v instanceof Set){const P=new Set;A.set(v,P);for(const M of v)P.add(f(M,void 0,S,A,O));return P}if(typeof Buffer<"u"&&Buffer.isBuffer(v))return v.subarray();if(s.isTypedArray(v)){const P=new(Object.getPrototypeOf(v)).constructor(v.length);A.set(v,P);for(let M=0;M<v.length;M++)P[M]=f(v[M],M,S,A,O);return P}if(v instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&v instanceof SharedArrayBuffer)return v.slice(0);if(v instanceof DataView){const P=new DataView(v.buffer.slice(0),v.byteOffset,v.byteLength);return A.set(v,P),p(P,v,S,A,O),P}if(typeof File<"u"&&v instanceof File){const P=new File([v],v.name,{type:v.type});return A.set(v,P),p(P,v,S,A,O),P}if(typeof Blob<"u"&&v instanceof Blob){const P=new Blob([v],{type:v.type});return A.set(v,P),p(P,v,S,A,O),P}if(v instanceof Error){const P=new v.constructor;return A.set(v,P),P.message=v.message,P.name=v.name,P.stack=v.stack,P.cause=v.cause,p(P,v,S,A,O),P}if(v instanceof Boolean){const P=new Boolean(v.valueOf());return A.set(v,P),p(P,v,S,A,O),P}if(v instanceof Number){const P=new Number(v.valueOf());return A.set(v,P),p(P,v,S,A,O),P}if(v instanceof String){const P=new String(v.valueOf());return A.set(v,P),p(P,v,S,A,O),P}if(typeof v=="object"&&m(v)){const P=Object.create(Object.getPrototypeOf(v));return A.set(v,P),p(P,v,S,A,O),P}return v}function p(v,b,S=v,A,O){const I=[...Object.keys(b),...t.getSymbols(b)];for(let P=0;P<I.length;P++){const M=I[P],L=Object.getOwnPropertyDescriptor(v,M);(L==null||L.writable)&&(v[M]=f(b[M],M,S,A,O))}}function m(v){switch(r.getTag(v)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=c,e.cloneDeepWithImpl=f,e.copyProperties=p})(w1)),w1}var qS;function N7(){return qS||(qS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Q4();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(y1)),y1}var GS;function O7(){return GS||(GS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X4(),r=N7();function n(i){return i=r.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=n})(h1)),h1}var A1={},_1={},N1={},KS;function I7(){return KS||(KS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Q4(),r=Z4();function n(i,s){return t.cloneDeepWith(i,(c,f,p,m)=>{const v=s?.(c,f,p,m);if(v!==void 0)return v;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const b=new i.constructor(i?.valueOf());return t.copyProperties(b,i),b}case r.argumentsTag:{const b={};return t.copyProperties(b,i),b.length=i.length,b[Symbol.iterator]=i[Symbol.iterator],b}default:return}})}e.cloneDeepWith=n})(N1)),N1}var XS;function T7(){return XS||(XS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I7();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(_1)),_1}var O1={},I1={},YS;function J4(){return YS||(YS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(I1)),I1}var T1={},ZS;function k7(){return ZS||(ZS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y4();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(T1)),T1}var QS;function P7(){return QS||(QS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U4(),r=J4(),n=k7(),i=_y();function s(c,f){let p;if(Array.isArray(f)?p=f:typeof f=="string"&&t.isDeepKey(f)&&c?.[f]==null?p=i.toPath(f):p=[f],p.length===0)return!1;let m=c;for(let v=0;v<p.length;v++){const b=p[v];if((m==null||!Object.hasOwn(m,b))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(b)&&b<m.length))return!1;m=m[b]}return!0}e.has=s})(O1)),O1}var JS;function j7(){return JS||(JS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X4(),r=Ay(),n=T7(),i=Ny(),s=P7();function c(f,p){switch(typeof f){case"object":{Object.is(f?.valueOf(),-0)&&(f="-0");break}case"number":{f=r.toKey(f);break}}return p=n.cloneDeep(p),function(m){const v=i.get(m,f);return v===void 0?s.has(m,f):p===void 0?v===void 0:t.isMatch(v,p)}}e.matchesProperty=c})(A1)),A1}var eC;function R7(){return eC||(eC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H4(),r=S7(),n=O7(),i=j7();function s(c){if(c==null)return t.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):n.matches(c);case"string":case"symbol":case"number":return r.property(c)}}e.iteratee=s})(d1)),d1}var tC;function M7(){return tC||(tC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y7(),r=H4(),n=E7(),i=R7();function s(c,f=r.identity){return n.isArrayLikeObject(c)?t.uniqBy(Array.from(c),i.iteratee(f)):[]}e.uniqBy=s})(i1)),i1}var k1,rC;function D7(){return rC||(rC=1,k1=M7().uniqBy),k1}var L7=D7();const nC=da(L7);function eI(e,t,r){return t===!0?nC(e,r):typeof t=="function"?nC(e,t):e}var P1={exports:{}},j1={},R1={exports:{}},M1={};var iC;function B7(){if(iC)return M1;iC=1;var e=Mc();function t(b,S){return b===S&&(b!==0||1/b===1/S)||b!==b&&S!==S}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,s=e.useLayoutEffect,c=e.useDebugValue;function f(b,S){var A=S(),O=n({inst:{value:A,getSnapshot:S}}),I=O[0].inst,P=O[1];return s(function(){I.value=A,I.getSnapshot=S,p(I)&&P({inst:I})},[b,A,S]),i(function(){return p(I)&&P({inst:I}),b(function(){p(I)&&P({inst:I})})},[b]),c(A),A}function p(b){var S=b.getSnapshot;b=b.value;try{var A=S();return!r(b,A)}catch{return!0}}function m(b,S){return S()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:f;return M1.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:v,M1}var aC;function F7(){return aC||(aC=1,R1.exports=B7()),R1.exports}var sC;function U7(){if(sC)return j1;sC=1;var e=Mc(),t=F7();function r(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,s=e.useRef,c=e.useEffect,f=e.useMemo,p=e.useDebugValue;return j1.useSyncExternalStoreWithSelector=function(m,v,b,S,A){var O=s(null);if(O.current===null){var I={hasValue:!1,value:null};O.current=I}else I=O.current;O=f(function(){function M(V){if(!L){if(L=!0,R=V,V=S(V),A!==void 0&&I.hasValue){var H=I.value;if(A(H,V))return U=H}return U=V}if(H=U,n(R,V))return H;var X=S(V);return A!==void 0&&A(H,X)?(R=V,H):(R=V,U=X)}var L=!1,R,U,W=b===void 0?null:b;return[function(){return M(v())},W===null?void 0:function(){return M(W())}]},[v,b,S,A]);var P=i(m,O[0],O[1]);return c(function(){I.hasValue=!0,I.value=P},[P]),p(P),P},j1}var oC;function z7(){return oC||(oC=1,P1.exports=U7()),P1.exports}var $7=z7(),Iy=N.createContext(null),W7=e=>e,or=()=>{var e=N.useContext(Iy);return e?e.store.dispatch:W7},Bh=()=>{},V7=()=>Bh,H7=(e,t)=>e===t;function Ze(e){var t=N.useContext(Iy);return $7.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:V7,t?t.store.getState:Bh,t?t.store.getState:Bh,t?e:Bh,H7)}function q7(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function G7(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function K7(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var lC=e=>Array.isArray(e)?e:[e];function X7(e){const t=Array.isArray(e[0])?e[0]:e;return K7(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Y7(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var Z7=class{constructor(e){this.value=e}deref(){return this.value}},Q7=typeof WeakRef<"u"?WeakRef:Z7,J7=0,cC=1;function mh(){return{s:J7,v:void 0,o:null,p:null}}function tI(e,t={}){let r=mh();const{resultEqualityCheck:n}=t;let i,s=0;function c(){let f=r;const{length:p}=arguments;for(let b=0,S=p;b<S;b++){const A=arguments[b];if(typeof A=="function"||typeof A=="object"&&A!==null){let O=f.o;O===null&&(f.o=O=new WeakMap);const I=O.get(A);I===void 0?(f=mh(),O.set(A,f)):f=I}else{let O=f.p;O===null&&(f.p=O=new Map);const I=O.get(A);I===void 0?(f=mh(),O.set(A,f)):f=I}}const m=f;let v;if(f.s===cC)v=f.v;else if(v=e.apply(null,arguments),s++,n){const b=i?.deref?.()??i;b!=null&&n(b,v)&&(v=b,s!==0&&s--),i=typeof v=="object"&&v!==null||typeof v=="function"?new Q7(v):v}return m.s=cC,m.v=v,v}return c.clearCache=()=>{r=mh(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}function eL(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let s=0,c=0,f,p={},m=i.pop();typeof m=="object"&&(p=m,m=i.pop()),q7(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const v={...r,...p},{memoize:b,memoizeOptions:S=[],argsMemoize:A=tI,argsMemoizeOptions:O=[]}=v,I=lC(S),P=lC(O),M=X7(i),L=b(function(){return s++,m.apply(null,arguments)},...I),R=A(function(){c++;const W=Y7(M,arguments);return f=L.apply(null,W),f},...P);return Object.assign(R,{resultFunc:m,memoizedResultFunc:L,dependencies:M,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>f,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:b,argsMemoize:A})};return Object.assign(n,{withTypes:()=>n}),n}var pe=eL(tI),tL=Object.assign((e,t=pe)=>{G7(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((c,f,p)=>(c[r[p]]=f,c),{}))},{withTypes:()=>tL}),D1={},L1={},B1={},uC;function rL(){return uC||(uC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,s)=>{if(n!==i){const c=t(n),f=t(i);if(c===f&&c===0){if(n<i)return s==="desc"?1:-1;if(n>i)return s==="desc"?-1:1}return s==="desc"?f-c:c-f}return 0};e.compareValues=r})(B1)),B1}var F1={},U1={},dC;function rI(){return dC||(dC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(U1)),U1}var fC;function nL(){return fC||(fC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rI(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,c){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||c!=null&&Object.hasOwn(c,s)}e.isKey=i})(F1)),F1}var hC;function iL(){return hC||(hC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rL(),r=nL(),n=_y();function i(s,c,f,p){if(s==null)return[];f=p?void 0:f,Array.isArray(s)||(s=Object.values(s)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(f)||(f=f==null?[]:[f]),f=f.map(A=>String(A));const m=(A,O)=>{let I=A;for(let P=0;P<O.length&&I!=null;++P)I=I[O[P]];return I},v=(A,O)=>O==null||A==null?O:typeof A=="object"&&"key"in A?Object.hasOwn(O,A.key)?O[A.key]:m(O,A.path):typeof A=="function"?A(O):Array.isArray(A)?m(O,A):typeof O=="object"?O[A]:O,b=c.map(A=>(Array.isArray(A)&&A.length===1&&(A=A[0]),A==null||typeof A=="function"||Array.isArray(A)||r.isKey(A)?A:{key:A,path:n.toPath(A)}));return s.map(A=>({original:A,criteria:b.map(O=>v(O,A))})).slice().sort((A,O)=>{for(let I=0;I<b.length;I++){const P=t.compareValues(A.criteria[I],O.criteria[I],f[I]);if(P!==0)return P}return 0}).map(A=>A.original)}e.orderBy=i})(L1)),L1}var z1={},pC;function aL(){return pC||(pC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],s=Math.floor(n),c=(f,p)=>{for(let m=0;m<f.length;m++){const v=f[m];Array.isArray(v)&&p<s?c(v,p+1):i.push(v)}};return c(r,0),i}e.flatten=t})(z1)),z1}var $1={},mC;function nI(){return mC||(mC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J4(),r=Oy(),n=q4(),i=K4();function s(c,f,p){return n.isObject(p)&&(typeof f=="number"&&r.isArrayLike(p)&&t.isIndex(f)&&f<p.length||typeof f=="string"&&f in p)?i.eq(p[f],c):!1}e.isIterateeCall=s})($1)),$1}var gC;function sL(){return gC||(gC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iL(),r=aL(),n=nI();function i(s,...c){const f=c.length;return f>1&&n.isIterateeCall(s,c[0],c[1])?c=[]:f>2&&n.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),t.orderBy(s,r.flatten(c),["asc"])}e.sortBy=i})(D1)),D1}var W1,xC;function oL(){return xC||(xC=1,W1=sL().sortBy),W1}var lL=oL();const xp=da(lL);var iI=e=>e.legend.settings,cL=e=>e.legend.size,uL=e=>e.legend.payload,dL=pe([uL,iI],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?xp(n,r):n});function fL(){return Ze(dL)}var gh=1;function aI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=N.useState({height:0,left:0,top:0,width:0}),n=N.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),c={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(c.height-t.height)>gh||Math.abs(c.left-t.left)>gh||Math.abs(c.top-t.top)>gh||Math.abs(c.width-t.width)>gh)&&r({height:c.height,left:c.left,top:c.top,width:c.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Fn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var hL=typeof Symbol=="function"&&Symbol.observable||"@@observable",vC=hL,V1=()=>Math.random().toString(36).substring(7).split("").join("."),pL={INIT:`@@redux/INIT${V1()}`,REPLACE:`@@redux/REPLACE${V1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${V1()}`},d0=pL;function Ty(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function sI(e,t,r){if(typeof e!="function")throw new Error(Fn(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Fn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Fn(1));return r(sI)(e,t)}let n=e,i=t,s=new Map,c=s,f=0,p=!1;function m(){c===s&&(c=new Map,s.forEach((P,M)=>{c.set(M,P)}))}function v(){if(p)throw new Error(Fn(3));return i}function b(P){if(typeof P!="function")throw new Error(Fn(4));if(p)throw new Error(Fn(5));let M=!0;m();const L=f++;return c.set(L,P),function(){if(M){if(p)throw new Error(Fn(6));M=!1,m(),c.delete(L),s=null}}}function S(P){if(!Ty(P))throw new Error(Fn(7));if(typeof P.type>"u")throw new Error(Fn(8));if(typeof P.type!="string")throw new Error(Fn(17));if(p)throw new Error(Fn(9));try{p=!0,i=n(i,P)}finally{p=!1}return(s=c).forEach(L=>{L()}),P}function A(P){if(typeof P!="function")throw new Error(Fn(10));n=P,S({type:d0.REPLACE})}function O(){const P=b;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(Fn(11));function L(){const U=M;U.next&&U.next(v())}return L(),{unsubscribe:P(L)}},[vC](){return this}}}return S({type:d0.INIT}),{dispatch:S,subscribe:b,getState:v,replaceReducer:A,[vC]:O}}function mL(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:d0.INIT})>"u")throw new Error(Fn(12));if(typeof r(void 0,{type:d0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Fn(13))})}function oI(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const c=t[s];typeof e[c]=="function"&&(r[c]=e[c])}const n=Object.keys(r);let i;try{mL(r)}catch(s){i=s}return function(c={},f){if(i)throw i;let p=!1;const m={};for(let v=0;v<n.length;v++){const b=n[v],S=r[b],A=c[b],O=S(A,f);if(typeof O>"u")throw f&&f.type,new Error(Fn(14));m[b]=O,p=p||O!==A}return p=p||n.length!==Object.keys(c).length,p?m:c}}function f0(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function gL(...e){return t=>(r,n)=>{const i=t(r,n);let s=()=>{throw new Error(Fn(15))};const c={getState:i.getState,dispatch:(p,...m)=>s(p,...m)},f=e.map(p=>p(c));return s=f0(...f)(i.dispatch),{...i,dispatch:s}}}function lI(e){return Ty(e)&&"type"in e&&typeof e.type=="string"}var cI=Symbol.for("immer-nothing"),yC=Symbol.for("immer-draftable"),ci=Symbol.for("immer-state");function Na(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Fi=Object,Oc=Fi.getPrototypeOf,h0="constructor",vp="prototype",nv="configurable",p0="enumerable",Fh="writable",ld="value",Os=e=>!!e&&!!e[ci];function ka(e){return e?uI(e)||wp(e)||!!e[yC]||!!e[h0]?.[yC]||bp(e)||Ep(e):!1}var xL=Fi[vp][h0].toString(),wC=new WeakMap;function uI(e){if(!e||!ky(e))return!1;const t=Oc(e);if(t===null||t===Fi[vp])return!0;const r=Fi.hasOwnProperty.call(t,h0)&&t[h0];if(r===Object)return!0;if(!fc(r))return!1;let n=wC.get(r);return n===void 0&&(n=Function.toString.call(r),wC.set(r,n)),n===xL}function yp(e,t,r=!0){Id(e)===0?(r?Reflect.ownKeys(e):Fi.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Id(e){const t=e[ci];return t?t.type_:wp(e)?1:bp(e)?2:Ep(e)?3:0}var bC=(e,t,r=Id(e))=>r===2?e.has(t):Fi[vp].hasOwnProperty.call(e,t),iv=(e,t,r=Id(e))=>r===2?e.get(t):e[t],m0=(e,t,r,n=Id(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function vL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var wp=Array.isArray,bp=e=>e instanceof Map,Ep=e=>e instanceof Set,ky=e=>typeof e=="object",fc=e=>typeof e=="function",H1=e=>typeof e=="boolean";function yL(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var xs=e=>e.copy_||e.base_,Py=e=>e.modified_?e.copy_:e.base_;function av(e,t){if(bp(e))return new Map(e);if(Ep(e))return new Set(e);if(wp(e))return Array[vp].slice.call(e);const r=uI(e);if(t===!0||t==="class_only"&&!r){const n=Fi.getOwnPropertyDescriptors(e);delete n[ci];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],f=n[c];f[Fh]===!1&&(f[Fh]=!0,f[nv]=!0),(f.get||f.set)&&(n[c]={[nv]:!0,[Fh]:!0,[p0]:f[p0],[ld]:e[c]})}return Fi.create(Oc(e),n)}else{const n=Oc(e);if(n!==null&&r)return{...e};const i=Fi.create(n);return Fi.assign(i,e)}}function jy(e,t=!1){return Sp(e)||Os(e)||!ka(e)||(Id(e)>1&&Fi.defineProperties(e,{set:xh,add:xh,clear:xh,delete:xh}),Fi.freeze(e),t&&yp(e,(r,n)=>{jy(n,!0)},!1)),e}function wL(){Na(2)}var xh={[ld]:wL};function Sp(e){return e===null||!ky(e)?!0:Fi.isFrozen(e)}var g0="MapSet",sv="Patches",EC="ArrayMethods",dI={};function xl(e){const t=dI[e];return t||Na(0,e),t}var SC=e=>!!dI[e],cd,fI=()=>cd,bL=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:SC(g0)?xl(g0):void 0,arrayMethodsPlugin_:SC(EC)?xl(EC):void 0});function CC(e,t){t&&(e.patchPlugin_=xl(sv),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ov(e){lv(e),e.drafts_.forEach(EL),e.drafts_=null}function lv(e){e===cd&&(cd=e.parent_)}var AC=e=>cd=bL(cd,e);function EL(e){const t=e[ci];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function _C(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[ci].modified_&&(ov(t),Na(4)),ka(e)&&(e=NC(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[ci].base_,e,t)}else e=NC(t,r);return SL(t,e,!0),ov(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cI?e:void 0}function NC(e,t){if(Sp(t))return t;const r=t[ci];if(!r)return x0(t,e.handledSet_,e);if(!Cp(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);mI(r,e)}return r.copy_}function SL(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jy(t,r)}function hI(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Cp=(e,t)=>e.scope_===t,CL=[];function pI(e,t,r,n){const i=xs(e),s=e.type_;if(n!==void 0&&iv(i,n,s)===t){m0(i,n,r,s);return}if(!e.draftLocations_){const f=e.draftLocations_=new Map;yp(i,(p,m)=>{if(Os(m)){const v=f.get(m)||[];v.push(p),f.set(m,v)}})}const c=e.draftLocations_.get(t)??CL;for(const f of c)m0(i,f,r,s)}function AL(e,t,r){e.callbacks_.push(function(i){const s=t;if(!s||!Cp(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const c=Py(s);pI(e,s.draft_??s,c,r),mI(s,i)})}function mI(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const i=n.getPath(e);i&&n.generatePatches_(e,i,t)}hI(e)}}function _L(e,t,r){const{scope_:n}=e;if(Os(r)){const i=r[ci];Cp(i,n)&&i.callbacks_.push(function(){Uh(e);const c=Py(i);pI(e,r,c,t)})}else ka(r)&&e.callbacks_.push(function(){const s=xs(e);e.type_===3?s.has(r)&&x0(r,n.handledSet_,n):iv(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&x0(iv(e.copy_,t,e.type_),n.handledSet_,n)})}function x0(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Os(e)||t.has(e)||!ka(e)||Sp(e)||(t.add(e),yp(e,(n,i)=>{if(Os(i)){const s=i[ci];if(Cp(s,r)){const c=Py(s);m0(e,n,c,e.type_),hI(s)}}else ka(i)&&x0(i,t,r)})),e}function NL(e,t){const r=wp(e),n={type_:r?1:0,scope_:t?t.scope_:fI(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=v0;r&&(i=[n],s=ud);const{revoke:c,proxy:f}=Proxy.revocable(i,s);return n.draft_=f,n.revoke_=c,[f,n]}var v0={get(e,t){if(t===ci)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const i=xs(e);if(!bC(i,t,e.type_))return OL(e,i,t);const s=i[t];if(e.finalized_||!ka(s)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&yL(t))return s;if(s===q1(e.base_,t)){Uh(e);const c=e.type_===1?+t:t,f=uv(e.scope_,s,e,c);return e.copy_[c]=f}return s},has(e,t){return t in xs(e)},ownKeys(e){return Reflect.ownKeys(xs(e))},set(e,t,r){const n=gI(xs(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=q1(xs(e),t),s=i?.[ci];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(vL(r,i)&&(r!==void 0||bC(e.base_,t,e.type_)))return!0;Uh(e),cv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),_L(e,t,r)),!0},deleteProperty(e,t){return Uh(e),q1(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),cv(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=xs(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[Fh]:!0,[nv]:e.type_!==1||t!=="length",[p0]:n[p0],[ld]:r[t]}},defineProperty(){Na(11)},getPrototypeOf(e){return Oc(e.base_)},setPrototypeOf(){Na(12)}},ud={};for(let e in v0){let t=v0[e];ud[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}ud.deleteProperty=function(e,t){return ud.set.call(this,e,t,void 0)};ud.set=function(e,t,r){return v0.set.call(this,e[0],t,r,e[0])};function q1(e,t){const r=e[ci];return(r?xs(r):e)[t]}function OL(e,t,r){const n=gI(t,r);return n?ld in n?n[ld]:n.get?.call(e.draft_):void 0}function gI(e,t){if(!(t in e))return;let r=Oc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Oc(r)}}function cv(e){e.modified_||(e.modified_=!0,e.parent_&&cv(e.parent_))}function Uh(e){e.copy_||(e.assigned_=new Map,e.copy_=av(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var IL=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(fc(r)&&!fc(n)){const c=n;n=r;const f=this;return function(m=c,...v){return f.produce(m,b=>n.call(this,b,...v))}}fc(n)||Na(6),i!==void 0&&!fc(i)&&Na(7);let s;if(ka(r)){const c=AC(this),f=uv(c,r,void 0);let p=!0;try{s=n(f),p=!1}finally{p?ov(c):lv(c)}return CC(c,i),_C(s,c)}else if(!r||!ky(r)){if(s=n(r),s===void 0&&(s=r),s===cI&&(s=void 0),this.autoFreeze_&&jy(s,!0),i){const c=[],f=[];xl(sv).generateReplacementPatches_(r,s,{patches_:c,inversePatches_:f}),i(c,f)}return s}else Na(1,r)},this.produceWithPatches=(r,n)=>{if(fc(r))return(f,...p)=>this.produceWithPatches(f,m=>r(m,...p));let i,s;return[this.produce(r,n,(f,p)=>{i=f,s=p}),i,s]},H1(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),H1(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),H1(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ka(t)||Na(8),Os(t)&&(t=Ta(t));const r=AC(this),n=uv(r,t,void 0);return n[ci].isManual_=!0,lv(r),n}finishDraft(t,r){const n=t&&t[ci];(!n||!n.isManual_)&&Na(9);const{scope_:i}=n;return CC(i,r),_C(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(r=r.slice(n+1));const i=xl(sv).applyPatches_;return Os(t)?i(t,r):this.produce(t,s=>i(s,r))}};function uv(e,t,r,n){const[i,s]=bp(t)?xl(g0).proxyMap_(t,r):Ep(t)?xl(g0).proxySet_(t,r):NL(t,r);return(r?.scope_??fI()).drafts_.push(i),s.callbacks_=r?.callbacks_??[],s.key_=n,r&&n!==void 0?AL(r,s,n):s.callbacks_.push(function(p){p.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:m}=p;s.modified_&&m&&m.generatePatches_(s,[],p)}),i}function Ta(e){return Os(e)||Na(10,e),xI(e)}function xI(e){if(!ka(e)||Sp(e))return e;const t=e[ci];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=av(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=av(e,!0);return yp(r,(i,s)=>{m0(r,i,xI(s))},n),t&&(t.finalized_=!1),r}var TL=new IL,vI=TL.produce;function yI(e){return({dispatch:r,getState:n})=>i=>s=>typeof s=="function"?s(r,n,e):i(s)}var kL=yI(),PL=yI,jL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?f0:f0.apply(null,arguments)};function ca(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(Ui(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>lI(n)&&n.type===e,r}var wI=class Xu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Xu.prototype)}static get[Symbol.species](){return Xu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Xu(...t[0].concat(this)):new Xu(...t.concat(this))}};function OC(e){return ka(e)?vI(e,()=>{}):e}function vh(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function RL(e){return typeof e=="boolean"}var ML=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let c=new wI;return r&&(RL(r)?c.push(kL):c.push(PL(r.extraArgument))),c},bI="RTK_autoBatch",Or=()=>e=>({payload:e,meta:{[bI]:!0}}),IC=e=>t=>{setTimeout(t,e)},EI=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,s=!1,c=!1;const f=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:IC(10):e.type==="callback"?e.queueNotification:IC(e.timeout),m=()=>{c=!1,s&&(s=!1,f.forEach(v=>v()))};return Object.assign({},n,{subscribe(v){const b=()=>i&&v(),S=n.subscribe(b);return f.add(v),()=>{S(),f.delete(v)}},dispatch(v){try{return i=!v?.meta?.[bI],s=!i,s&&(c||(c=!0,p(m))),n.dispatch(v)}finally{i=!0}}})},DL=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new wI(e);return n&&i.push(EI(typeof n=="object"?n:void 0)),i};function LL(e){const t=ML(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:c=void 0}=e||{};let f;if(typeof r=="function")f=r;else if(Ty(r))f=oI(r);else throw new Error(Ui(1));let p;typeof n=="function"?p=n(t):p=t();let m=f0;i&&(m=jL({trace:!1,...typeof i=="object"&&i}));const v=gL(...p),b=DL(v);let S=typeof c=="function"?c(b):b();const A=m(...S);return sI(f,s,A)}function SI(e){const t={},r=[];let n;const i={addCase(s,c){const f=typeof s=="string"?s:s.type;if(!f)throw new Error(Ui(28));if(f in t)throw new Error(Ui(29));return t[f]=c,i},addAsyncThunk(s,c){return c.pending&&(t[s.pending.type]=c.pending),c.rejected&&(t[s.rejected.type]=c.rejected),c.fulfilled&&(t[s.fulfilled.type]=c.fulfilled),c.settled&&r.push({matcher:s.settled,reducer:c.settled}),i},addMatcher(s,c){return r.push({matcher:s,reducer:c}),i},addDefaultCase(s){return n=s,i}};return e(i),[t,r,n]}function BL(e){return typeof e=="function"}function FL(e,t){let[r,n,i]=SI(t),s;if(BL(e))s=()=>OC(e());else{const f=OC(e);s=()=>f}function c(f=s(),p){let m=[r[p.type],...n.filter(({matcher:v})=>v(p)).map(({reducer:v})=>v)];return m.filter(v=>!!v).length===0&&(m=[i]),m.reduce((v,b)=>{if(b)if(Os(v)){const A=b(v,p);return A===void 0?v:A}else{if(ka(v))return vI(v,S=>b(S,p));{const S=b(v,p);if(S===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return v},f)}return c.getInitialState=s,c}var UL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",zL=(e=21)=>{let t="",r=e;for(;r--;)t+=UL[Math.random()*64|0];return t},$L=Symbol.for("rtk-slice-createasyncthunk");function WL(e,t){return`${e}/${t}`}function VL({creators:e}={}){const t=e?.asyncThunk?.[$L];return function(n){const{name:i,reducerPath:s=i}=n;if(!i)throw new Error(Ui(11));const c=(typeof n.reducers=="function"?n.reducers(qL()):n.reducers)||{},f=Object.keys(c),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(R,U){const W=typeof R=="string"?R:R.type;if(!W)throw new Error(Ui(12));if(W in p.sliceCaseReducersByType)throw new Error(Ui(13));return p.sliceCaseReducersByType[W]=U,m},addMatcher(R,U){return p.sliceMatchers.push({matcher:R,reducer:U}),m},exposeAction(R,U){return p.actionCreators[R]=U,m},exposeCaseReducer(R,U){return p.sliceCaseReducersByName[R]=U,m}};f.forEach(R=>{const U=c[R],W={reducerName:R,type:WL(i,R),createNotation:typeof n.reducers=="function"};KL(U)?YL(W,U,m,t):GL(W,U,m)});function v(){const[R={},U=[],W=void 0]=typeof n.extraReducers=="function"?SI(n.extraReducers):[n.extraReducers],V={...R,...p.sliceCaseReducersByType};return FL(n.initialState,H=>{for(let X in V)H.addCase(X,V[X]);for(let X of p.sliceMatchers)H.addMatcher(X.matcher,X.reducer);for(let X of U)H.addMatcher(X.matcher,X.reducer);W&&H.addDefaultCase(W)})}const b=R=>R,S=new Map,A=new WeakMap;let O;function I(R,U){return O||(O=v()),O(R,U)}function P(){return O||(O=v()),O.getInitialState()}function M(R,U=!1){function W(H){let X=H[R];return typeof X>"u"&&U&&(X=vh(A,W,P)),X}function V(H=b){const X=vh(S,U,()=>new WeakMap);return vh(X,H,()=>{const Y={};for(const[we,se]of Object.entries(n.selectors??{}))Y[we]=HL(se,H,()=>vh(A,H,P),U);return Y})}return{reducerPath:R,getSelectors:V,get selectors(){return V(W)},selectSlice:W}}const L={name:i,reducer:I,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:P,...M(s),injectInto(R,{reducerPath:U,...W}={}){const V=U??s;return R.inject({reducerPath:V,reducer:I},W),{...L,...M(V,!0)}}};return L}}function HL(e,t,r,n){function i(s,...c){let f=t(s);return typeof f>"u"&&n&&(f=r()),e(f,...c)}return i.unwrapped=e,i}var Ei=VL();function qL(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function GL({type:e,reducerName:t,createNotation:r},n,i){let s,c;if("reducer"in n){if(r&&!XL(n))throw new Error(Ui(17));s=n.reducer,c=n.prepare}else s=n;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,c?ca(e,c):ca(e))}function KL(e){return e._reducerDefinitionType==="asyncThunk"}function XL(e){return e._reducerDefinitionType==="reducerWithPrepare"}function YL({type:e,reducerName:t},r,n,i){if(!i)throw new Error(Ui(18));const{payloadCreator:s,fulfilled:c,pending:f,rejected:p,settled:m,options:v}=r,b=i(e,s,v);n.exposeAction(t,b),c&&n.addCase(b.fulfilled,c),f&&n.addCase(b.pending,f),p&&n.addCase(b.rejected,p),m&&n.addMatcher(b.settled,m),n.exposeCaseReducer(t,{fulfilled:c||yh,pending:f||yh,rejected:p||yh,settled:m||yh})}function yh(){}var ZL="task",CI="listener",AI="completed",Ry="cancelled",QL=`task-${Ry}`,JL=`task-${AI}`,dv=`${CI}-${Ry}`,eB=`${CI}-${AI}`,Ap=class{constructor(e){this.code=e,this.message=`${ZL} ${Ry} (reason: ${e})`}name="TaskAbortError";message},My=(e,t)=>{if(typeof e!="function")throw new TypeError(Ui(32))},y0=()=>{},_I=(e,t=y0)=>(e.catch(t),e),NI=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ul=e=>{if(e.aborted)throw new Ap(e.reason)};function OI(e,t){let r=y0;return new Promise((n,i)=>{const s=()=>i(new Ap(e.reason));if(e.aborted){s();return}r=NI(e,s),t.finally(()=>r()).then(n,i)}).finally(()=>{r=y0})}var tB=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Ap?"cancelled":"rejected",error:r}}finally{t?.()}},w0=e=>t=>_I(OI(e,t).then(r=>(ul(e),r))),II=e=>{const t=w0(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:bc}=Object,TC={},_p="listenerMiddleware",rB=(e,t)=>{const r=n=>NI(e,()=>n.abort(e.reason));return(n,i)=>{My(n);const s=new AbortController;r(s);const c=tB(async()=>{ul(e),ul(s.signal);const f=await n({pause:w0(s.signal),delay:II(s.signal),signal:s.signal});return ul(s.signal),f},()=>s.abort(JL));return i?.autoJoin&&t.push(c.catch(y0)),{result:w0(e)(c),cancel(){s.abort(QL)}}}},nB=(e,t)=>{const r=async(n,i)=>{ul(t);let s=()=>{};const f=[new Promise((p,m)=>{let v=e({predicate:n,effect:(b,S)=>{S.unsubscribe(),p([b,S.getState(),S.getOriginalState()])}});s=()=>{v(),m()}})];i!=null&&f.push(new Promise(p=>setTimeout(p,i,null)));try{const p=await OI(t,Promise.race(f));return ul(t),p}finally{s()}};return(n,i)=>_I(r(n,i))},TI=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:s}=e;if(t)i=ca(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Ui(21));return My(s),{predicate:i,type:t,effect:s}},kI=bc(e=>{const{type:t,predicate:r,effect:n}=TI(e);return{id:zL(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Ui(22))}}},{withTypes:()=>kI}),kC=(e,t)=>{const{type:r,effect:n,predicate:i}=TI(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===i)&&s.effect===n)},fv=e=>{e.pending.forEach(t=>{t.abort(dv)})},iB=(e,t)=>()=>{for(const r of t.keys())fv(r);e.clear()},PC=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},PI=bc(ca(`${_p}/add`),{withTypes:()=>PI}),aB=ca(`${_p}/removeAll`),jI=bc(ca(`${_p}/remove`),{withTypes:()=>jI}),sB=(...e)=>{console.error(`${_p}/error`,...e)},Td=(e={})=>{const t=new Map,r=new Map,n=A=>{const O=r.get(A)??0;r.set(A,O+1)},i=A=>{const O=r.get(A)??1;O===1?r.delete(A):r.set(A,O-1)},{extra:s,onError:c=sB}=e;My(c);const f=A=>(A.unsubscribe=()=>t.delete(A.id),t.set(A.id,A),O=>{A.unsubscribe(),O?.cancelActive&&fv(A)}),p=A=>{const O=kC(t,A)??kI(A);return f(O)};bc(p,{withTypes:()=>p});const m=A=>{const O=kC(t,A);return O&&(O.unsubscribe(),A.cancelActive&&fv(O)),!!O};bc(m,{withTypes:()=>m});const v=async(A,O,I,P)=>{const M=new AbortController,L=nB(p,M.signal),R=[];try{A.pending.add(M),n(A),await Promise.resolve(A.effect(O,bc({},I,{getOriginalState:P,condition:(U,W)=>L(U,W).then(Boolean),take:L,delay:II(M.signal),pause:w0(M.signal),extra:s,signal:M.signal,fork:rB(M.signal,R),unsubscribe:A.unsubscribe,subscribe:()=>{t.set(A.id,A)},cancelActiveListeners:()=>{A.pending.forEach((U,W,V)=>{U!==M&&(U.abort(dv),V.delete(U))})},cancel:()=>{M.abort(dv),A.pending.delete(M)},throwIfCancelled:()=>{ul(M.signal)}})))}catch(U){U instanceof Ap||PC(c,U,{raisedBy:"effect"})}finally{await Promise.all(R),M.abort(eB),i(A),A.pending.delete(M)}},b=iB(t,r);return{middleware:A=>O=>I=>{if(!lI(I))return O(I);if(PI.match(I))return p(I.payload);if(aB.match(I)){b();return}if(jI.match(I))return m(I.payload);let P=A.getState();const M=()=>{if(P===TC)throw new Error(Ui(23));return P};let L;try{if(L=O(I),t.size>0){const R=A.getState(),U=Array.from(t.values());for(const W of U){let V=!1;try{V=W.predicate(I,R,P)}catch(H){V=!1,PC(c,H,{raisedBy:"predicate"})}V&&v(W,I,A,M)}}}finally{P=TC}return L},startListening:p,stopListening:m,clearListeners:b}};function Ui(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var oB={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},RI=Ei({name:"chartLayout",initialState:oB,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:lB,setLayout:cB,setChartSize:uB,setScale:dB}=RI.actions,fB=RI.reducer;function MI(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function ar(e){return Number.isFinite(e)}function Ka(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function jC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jC(Object(r),!0).forEach(function(n){hB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hB(e,t,r){return(t=pB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pB(e){var t=mB(e,"string");return typeof t=="symbol"?t:t+""}function mB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xt(e,t,r){return pr(e)||pr(t)?r:la(t)?gl(e,t,r):typeof t=="function"?t(e):r}var gB=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:s,verticalAlign:c,layout:f}=t;if((f==="vertical"||f==="horizontal"&&c==="middle")&&s!=="center"&&at(e[s]))return mc(mc({},e),{},{[s]:e[s]+(n||0)});if((f==="horizontal"||f==="vertical"&&s==="center")&&c!=="middle"&&at(e[c]))return mc(mc({},e),{},{[c]:e[c]+(i||0)})}return e},_l=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",DI=(e,t,r,n)=>{if(n)return e.map(f=>f.coordinate);var i,s,c=e.map(f=>(f.coordinate===t&&(i=!0),f.coordinate===r&&(s=!0),f.coordinate));return i||c.push(t),s||c.push(r),c},LI=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:s,scale:c,realScaleType:f,isCategorical:p,categoricalDomain:m,tickCount:v,ticks:b,niceTicks:S,axisType:A}=e;if(!c)return null;var O=f==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,I=i==="category"&&c.bandwidth?c.bandwidth()/O:0;if(I=A==="angleAxis"&&s&&s.length>=2?In(s[0]-s[1])*2*I:I,b||S){var P=(b||S||[]).map((M,L)=>{var R=n?n.indexOf(M):M;return{coordinate:c(R)+I,value:M,offset:I,index:L}});return P.filter(M=>!Vi(M.coordinate))}return p&&m?m.map((M,L)=>({coordinate:c(M)+I,value:M,index:L,offset:I})):c.ticks&&v!=null?c.ticks(v).map((M,L)=>({coordinate:c(M)+I,value:M,offset:I,index:L})):c.domain().map((M,L)=>({coordinate:c(M)+I,value:n?n[M]:M,index:L,offset:I}))},RC=1e-4,xB=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-RC,s=Math.max(n[0],n[1])+RC,c=e(t[0]),f=e(t[r-1]);(c<i||c>s||f<i||f>s)&&e.domain([t[0],t[r-1]])}},vB=(e,t)=>{if(!t||t.length!==2||!at(t[0])||!at(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!at(e[0])||e[0]<r)&&(i[0]=r),(!at(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},yB=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0,f=0;f<r;++f){var p=e[f],m=p?.[i];if(m!=null){var v=m[1],b=m[0],S=Vi(v)?b:v;S>=0?(m[0]=s,m[1]=s+S,s=v):(m[0]=c,m[1]=c+S,c=v)}}}},wB=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0;c<r;++c){var f=e[c],p=f?.[i];if(p!=null){var m=Vi(p[1])?p[0]:p[1];m>=0?(p[0]=s,p[1]=s+m,s=p[1]):(p[0]=0,p[1]=0)}}}},bB={sign:yB,expand:L9,none:ml,silhouette:B9,wiggle:F9,positive:wB},EB=(e,t,r)=>{var n,i=(n=bB[r])!==null&&n!==void 0?n:ml,s=D9().keys(t).value((f,p)=>Number(Xt(f,p,0))).order(tv).offset(i),c=s(e);return c.forEach((f,p)=>{f.forEach((m,v)=>{var b=Xt(e[v],t[p],0);Array.isArray(b)&&b.length===2&&at(b[0])&&at(b[1])&&(m[0]=b[0],m[1]=b[1])})}),c};function SB(e){return e==null?void 0:String(e)}function MC(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:s,dataKey:c}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!pr(i[t.dataKey])){var f=$4(r,"value",i[t.dataKey]);if(f)return f.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var p=Xt(i,pr(c)?t.dataKey:c);return pr(p)?null:t.scale(p)}var DC=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:s,index:c}=e;if(t.type==="category")return r[c]?r[c].coordinate+n:null;var f=Xt(s,t.dataKey,t.scale.domain()[c]);return pr(f)?null:t.scale(f)-i/2+n},CB=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},AB=e=>{var t=e.flat(2).filter(at);return[Math.min(...t),Math.max(...t)]},_B=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],NB=(e,t,r)=>{if(e!=null)return _B(Object.keys(e).reduce((n,i)=>{var s=e[i];if(!s)return n;var{stackedData:c}=s,f=c.reduce((p,m)=>{var v=MI(m,t,r),b=AB(v);return!ar(b[0])||!ar(b[1])?p:[Math.min(p[0],b[0]),Math.max(p[1],b[1])]},[1/0,-1/0]);return[Math.min(f[0],n[0]),Math.max(f[1],n[1])]},[1/0,-1/0]))},LC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,BC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,b0=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=xp(t,v=>v.coordinate),s=1/0,c=1,f=i.length;c<f;c++){var p=i[c],m=i[c-1];s=Math.min((p?.coordinate||0)-(m?.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function FC(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:s}=e;return mc(mc({},t),{},{dataKey:r,payload:n,value:i,name:s})}function zc(e,t){if(e)return String(e);if(typeof t=="string")return t}var OB=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},IB=(e,t)=>t==="centric"?e.angle:e.radius,Ms=e=>e.layout.width,Ds=e=>e.layout.height,TB=e=>e.layout.scale,BI=e=>e.layout.margin,Np=pe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Op=pe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Dy="data-recharts-item-index",Ly="data-recharts-item-id",kd=60;function UC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UC(Object(r),!0).forEach(function(n){kB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kB(e,t,r){return(t=PB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PB(e){var t=jB(e,"string");return typeof t=="symbol"?t:t+""}function jB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RB=e=>e.brush.height;function MB(e){var t=Op(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:kd;return r+i}return r},0)}function DB(e){var t=Op(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:kd;return r+i}return r},0)}function LB(e){var t=Np(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function BB(e){var t=Np(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var gn=pe([Ms,Ds,BI,RB,MB,DB,LB,BB,iI,cL],(e,t,r,n,i,s,c,f,p,m)=>{var v={left:(r.left||0)+i,right:(r.right||0)+s},b={top:(r.top||0)+c,bottom:(r.bottom||0)+f},S=wh(wh({},b),v),A=S.bottom;S.bottom+=n,S=gB(S,p,m);var O=e-S.left-S.right,I=t-S.top-S.bottom;return wh(wh({brushBottom:A},S),{},{width:Math.max(O,0),height:Math.max(I,0)})}),FB=pe(gn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),By=pe(Ms,Ds,(e,t)=>({x:0,y:0,width:e,height:t})),UB=N.createContext(null),zn=()=>N.useContext(UB)!=null,Ip=e=>e.brush,Tp=pe([Ip,gn,BI],(e,t,r)=>({height:e.height,x:at(e.x)?e.x:t.left,y:at(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:at(e.width)?e.width:t.width})),G1={},K1={},X1={},zC;function zB(){return zC||(zC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:s}={}){let c,f=null;const p=s!=null&&s.includes("leading"),m=s==null||s.includes("trailing"),v=()=>{f!==null&&(r.apply(c,f),c=void 0,f=null)},b=()=>{m&&v(),I()};let S=null;const A=()=>{S!=null&&clearTimeout(S),S=setTimeout(()=>{S=null,b()},n)},O=()=>{S!==null&&(clearTimeout(S),S=null)},I=()=>{O(),c=void 0,f=null},P=()=>{v()},M=function(...L){if(i?.aborted)return;c=this,f=L;const R=S==null;A(),p&&R&&v()};return M.schedule=A,M.cancel=I,M.flush=P,i?.addEventListener("abort",I,{once:!0}),M}e.debounce=t})(X1)),X1}var $C;function $B(){return $C||($C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zB();function r(n,i=0,s={}){typeof s!="object"&&(s={});const{leading:c=!1,trailing:f=!0,maxWait:p}=s,m=Array(2);c&&(m[0]="leading"),f&&(m[1]="trailing");let v,b=null;const S=t.debounce(function(...I){v=n.apply(this,I),b=null},i,{edges:m}),A=function(...I){return p!=null&&(b===null&&(b=Date.now()),Date.now()-b>=p)?(v=n.apply(this,I),b=Date.now(),S.cancel(),S.schedule(),v):(S.apply(this,I),v)},O=()=>(S.flush(),v);return A.cancel=S.cancel,A.flush=O,A}e.debounce=r})(K1)),K1}var WC;function WB(){return WC||(WC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$B();function r(n,i=0,s={}){const{leading:c=!0,trailing:f=!0}=s;return t.debounce(n,i,{leading:c,maxWait:i,trailing:f})}e.throttle=r})(G1)),G1}var Y1,VC;function VB(){return VC||(VC=1,Y1=WB().throttle),Y1}var HB=VB();const qB=da(HB);var E0=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(r.replace(/%s/g,()=>i[c++]))}},FI=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:s,maxHeight:c}=r,f=Ns(n)?e:Number(n),p=Ns(i)?t:Number(i);return s&&s>0&&(f?p=f/s:p&&(f=p*s),c&&p!=null&&p>c&&(p=c)),{calculatedWidth:f,calculatedHeight:p}},GB={width:0,height:0,overflow:"visible"},KB={width:0,overflowX:"visible"},XB={height:0,overflowY:"visible"},YB={},ZB=e=>{var{width:t,height:r}=e,n=Ns(t),i=Ns(r);return n&&i?GB:n?KB:i?XB:YB};function QB(e){var{width:t,height:r,aspect:n}=e,i=t,s=r;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:i,height:s}}function hv(){return hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hv.apply(null,arguments)}function HC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(r),!0).forEach(function(n){JB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JB(e,t,r){return(t=eF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eF(e){var t=tF(e,"string");return typeof t=="symbol"?t:t+""}function tF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UI=N.createContext({width:-1,height:-1});function rF(e){return Ka(e.width)&&Ka(e.height)}function zI(e){var{children:t,width:r,height:n}=e,i=N.useMemo(()=>({width:r,height:n}),[r,n]);return rF(i)?N.createElement(UI.Provider,{value:i},t):null}var Fy=()=>N.useContext(UI),nF=N.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:s,minWidth:c=0,minHeight:f,maxHeight:p,children:m,debounce:v=0,id:b,className:S,onResize:A,style:O={}}=e,I=N.useRef(null),P=N.useRef();P.current=A,N.useImperativeHandle(t,()=>I.current);var[M,L]=N.useState({containerWidth:n.width,containerHeight:n.height}),R=N.useCallback((X,Y)=>{L(we=>{var se=Math.round(X),ie=Math.round(Y);return we.containerWidth===se&&we.containerHeight===ie?we:{containerWidth:se,containerHeight:ie}})},[]);N.useEffect(()=>{if(I.current==null||typeof ResizeObserver>"u")return Od;var X=ie=>{var be,{width:Ce,height:re}=ie[0].contentRect;R(Ce,re),(be=P.current)===null||be===void 0||be.call(P,Ce,re)};v>0&&(X=qB(X,v,{trailing:!0,leading:!1}));var Y=new ResizeObserver(X),{width:we,height:se}=I.current.getBoundingClientRect();return R(we,se),Y.observe(I.current),()=>{Y.disconnect()}},[R,v]);var{containerWidth:U,containerHeight:W}=M;E0(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:V,calculatedHeight:H}=FI(U,W,{width:i,height:s,aspect:r,maxHeight:p});return E0(V!=null&&V>0||H!=null&&H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,V,H,i,s,c,f,r),N.createElement("div",{id:b?"".concat(b):void 0,className:Vt("recharts-responsive-container",S),style:qC(qC({},O),{},{width:i,height:s,minWidth:c,minHeight:f,maxHeight:p}),ref:I},N.createElement("div",{style:ZB({width:i,height:s})},N.createElement(zI,{width:V,height:H},m)))}),zh=N.forwardRef((e,t)=>{var r=Fy();if(Ka(r.width)&&Ka(r.height))return e.children;var{width:n,height:i}=QB({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:c}=FI(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return at(s)&&at(c)?N.createElement(zI,{width:s,height:c},e.children):N.createElement(nF,hv({},e,{width:n,height:i,ref:t}))});function $I(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var $c=()=>{var e,t=zn(),r=Ze(FB),n=Ze(Tp),i=(e=Ze(Ip))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},iF={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},WI=()=>{var e;return(e=Ze(gn))!==null&&e!==void 0?e:iF},Uy=()=>Ze(Ms),zy=()=>Ze(Ds),aF=()=>Ze(e=>e.layout.margin),$t=e=>e.layout.layoutType,Pd=()=>Ze($t),sF=()=>{var e=Pd();return e!==void 0},kp=e=>{var t=or(),r=zn(),{width:n,height:i}=e,s=Fy(),c=n,f=i;return s&&(c=s.width>0?s.width:n,f=s.height>0?s.height:i),N.useEffect(()=>{!r&&Ka(c)&&Ka(f)&&t(uB({width:c,height:f}))},[t,r,c,f]),null},VI=Symbol.for("immer-nothing"),GC=Symbol.for("immer-draftable"),Hi=Symbol.for("immer-state");function Oa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var dd=Object.getPrototypeOf;function Ic(e){return!!e&&!!e[Hi]}function vl(e){return e?HI(e)||Array.isArray(e)||!!e[GC]||!!e.constructor?.[GC]||jd(e)||jp(e):!1}var oF=Object.prototype.constructor.toString(),KC=new WeakMap;function HI(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=KC.get(r);return n===void 0&&(n=Function.toString.call(r),KC.set(r,n)),n===oF}function S0(e,t,r=!0){Pp(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Pp(e){const t=e[Hi];return t?t.type_:Array.isArray(e)?1:jd(e)?2:jp(e)?3:0}function pv(e,t){return Pp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function qI(e,t,r){const n=Pp(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function lF(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function jd(e){return e instanceof Map}function jp(e){return e instanceof Set}function tl(e){return e.copy_||e.base_}function mv(e,t){if(jd(e))return new Map(e);if(jp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=HI(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Hi];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],f=n[c];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(n[c]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[c]})}return Object.create(dd(e),n)}else{const n=dd(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function $y(e,t=!1){return Rp(e)||Ic(e)||!vl(e)||(Pp(e)>1&&Object.defineProperties(e,{set:bh,add:bh,clear:bh,delete:bh}),Object.freeze(e),t&&Object.values(e).forEach(r=>$y(r,!0))),e}function cF(){Oa(2)}var bh={value:cF};function Rp(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var uF={};function yl(e){const t=uF[e];return t||Oa(0,e),t}var fd;function GI(){return fd}function dF(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function XC(e,t){t&&(yl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function gv(e){xv(e),e.drafts_.forEach(fF),e.drafts_=null}function xv(e){e===fd&&(fd=e.parent_)}function YC(e){return fd=dF(fd,e)}function fF(e){const t=e[Hi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ZC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Hi].modified_&&(gv(t),Oa(4)),vl(e)&&(e=C0(t,e),t.parent_||A0(t,e)),t.patches_&&yl("Patches").generateReplacementPatches_(r[Hi].base_,e,t.patches_,t.inversePatches_)):e=C0(t,r,[]),gv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==VI?e:void 0}function C0(e,t,r){if(Rp(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[Hi];if(!i)return S0(t,(s,c)=>QC(e,i,t,s,c,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return A0(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let c=s,f=!1;i.type_===3&&(c=new Set(s),s.clear(),f=!0),S0(c,(p,m)=>QC(e,i,s,p,m,r,f),n),A0(e,s,!1),r&&e.patches_&&yl("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function QC(e,t,r,n,i,s,c){if(i==null||typeof i!="object"&&!c)return;const f=Rp(i);if(!(f&&!c)){if(Ic(i)){const p=s&&t&&t.type_!==3&&!pv(t.assigned_,n)?s.concat(n):void 0,m=C0(e,i,p);if(qI(r,n,m),Ic(m))e.canAutoFreeze_=!1;else return}else c&&r.add(i);if(vl(i)&&!f){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&f)return;C0(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(jd(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&A0(e,i)}}}function A0(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$y(t,r)}function hF(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:GI(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=Wy;r&&(i=[n],s=hd);const{revoke:c,proxy:f}=Proxy.revocable(i,s);return n.draft_=f,n.revoke_=c,f}var Wy={get(e,t){if(t===Hi)return e;const r=tl(e);if(!pv(r,t))return pF(e,r,t);const n=r[t];return e.finalized_||!vl(n)?n:n===Z1(e.base_,t)?(Q1(e),e.copy_[t]=yv(n,e)):n},has(e,t){return t in tl(e)},ownKeys(e){return Reflect.ownKeys(tl(e))},set(e,t,r){const n=KI(tl(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Z1(tl(e),t),s=i?.[Hi];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(lF(r,i)&&(r!==void 0||pv(e.base_,t)))return!0;Q1(e),vv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Z1(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Q1(e),vv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=tl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Oa(11)},getPrototypeOf(e){return dd(e.base_)},setPrototypeOf(){Oa(12)}},hd={};S0(Wy,(e,t)=>{hd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});hd.deleteProperty=function(e,t){return hd.set.call(this,e,t,void 0)};hd.set=function(e,t,r){return Wy.set.call(this,e[0],t,r,e[0])};function Z1(e,t){const r=e[Hi];return(r?tl(r):e)[t]}function pF(e,t,r){const n=KI(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function KI(e,t){if(!(t in e))return;let r=dd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=dd(r)}}function vv(e){e.modified_||(e.modified_=!0,e.parent_&&vv(e.parent_))}function Q1(e){e.copy_||(e.copy_=mv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var mF=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const c=this;return function(p=s,...m){return c.produce(p,v=>r.call(this,v,...m))}}typeof r!="function"&&Oa(6),n!==void 0&&typeof n!="function"&&Oa(7);let i;if(vl(t)){const s=YC(this),c=yv(t,void 0);let f=!0;try{i=r(c),f=!1}finally{f?gv(s):xv(s)}return XC(s,n),ZC(i,s)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===VI&&(i=void 0),this.autoFreeze_&&$y(i,!0),n){const s=[],c=[];yl("Patches").generateReplacementPatches_(t,i,s,c),n(s,c)}return i}else Oa(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(c,...f)=>this.produceWithPatches(c,p=>t(p,...f));let n,i;return[this.produce(t,r,(c,f)=>{n=c,i=f}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){vl(e)||Oa(8),Ic(e)&&(e=gF(e));const t=YC(this),r=yv(e,void 0);return r[Hi].isManual_=!0,xv(t),r}finishDraft(e,t){const r=e&&e[Hi];(!r||!r.isManual_)&&Oa(9);const{scope_:n}=r;return XC(n,t),ZC(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=yl("Patches").applyPatches_;return Ic(e)?n(e,t):this.produce(e,i=>n(i,t))}};function yv(e,t){const r=jd(e)?yl("MapSet").proxyMap_(e,t):jp(e)?yl("MapSet").proxySet_(e,t):hF(e,t);return(t?t.scope_:GI()).drafts_.push(r),r}function gF(e){return Ic(e)||Oa(10,e),XI(e)}function XI(e){if(!vl(e)||Rp(e))return e;const t=e[Hi];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=mv(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=mv(e,!0);return S0(r,(i,s)=>{qI(r,i,XI(s))},n),t&&(t.finalized_=!1),r}var xF=new mF;xF.produce;var vF={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},YI=Ei({name:"legend",initialState:vF,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Or()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Ta(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Or()},removeLegendPayload:{reducer(e,t){var r=Ta(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Or()}}}),{setLegendSize:JC,setLegendSettings:yF,addLegendPayload:ZI,replaceLegendPayload:QI,removeLegendPayload:JI}=YI.actions,wF=YI.reducer,bF=["contextPayload"];function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wv.apply(null,arguments)}function eA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Tc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eA(Object(r),!0).forEach(function(n){EF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EF(e,t,r){return(t=SF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SF(e){var t=CF(e,"string");return typeof t=="symbol"?t:t+""}function CF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AF(e,t){if(e==null)return{};var r,n,i=_F(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _F(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function NF(e){return e.value}function OF(e){var{contextPayload:t}=e,r=AF(e,bF),n=eI(t,e.payloadUniqBy,NF),i=Tc(Tc({},r),{},{payload:n});return N.isValidElement(e.content)?N.cloneElement(e.content,i):typeof e.content=="function"?N.createElement(e.content,i):N.createElement(v7,i)}function IF(e,t,r,n,i,s){var{layout:c,align:f,verticalAlign:p}=t,m,v;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(f==="center"&&c==="vertical"?m={left:((n||0)-s.width)/2}:m=f==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(p==="middle"?v={top:((i||0)-s.height)/2}:v=p==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Tc(Tc({},m),v)}function TF(e){var t=or();return N.useEffect(()=>{t(yF(e))},[t,e]),null}function kF(e){var t=or();return N.useEffect(()=>(t(JC(e)),()=>{t(JC({width:0,height:0}))}),[t,e]),null}function PF(e,t,r,n){return e==="vertical"&&at(t)?{height:t}:e==="horizontal"?{width:r||n}:null}var jF={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Vy(e){var t=Zr(e,jF),r=fL(),n=s9(),i=aF(),{width:s,height:c,wrapperStyle:f,portal:p}=t,[m,v]=aI([r]),b=Uy(),S=zy();if(b==null||S==null)return null;var A=b-(i?.left||0)-(i?.right||0),O=PF(t.layout,c,s,A),I=p?f:Tc(Tc({position:"absolute",width:O?.width||s||"auto",height:O?.height||c||"auto"},IF(f,t,i,b,S,m)),f),P=p??n;if(P==null||r==null)return null;var M=N.createElement("div",{className:"recharts-legend-wrapper",style:I,ref:v},N.createElement(TF,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!p&&N.createElement(kF,{width:m.width,height:m.height}),N.createElement(OF,wv({},t,O,{margin:i,chartWidth:b,chartHeight:S,contextPayload:r})));return ay.createPortal(M,P)}Vy.displayName="Legend";function bv(){return bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bv.apply(null,arguments)}function tA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function J1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tA(Object(r),!0).forEach(function(n){RF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RF(e,t,r){return(t=MF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MF(e){var t=DF(e,"string");return typeof t=="symbol"?t:t+""}function DF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LF(e){return Array.isArray(e)&&la(e[0])&&la(e[1])?e.join(" ~ "):e}var BF=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:s,formatter:c,itemSorter:f,wrapperClassName:p,labelClassName:m,label:v,labelFormatter:b,accessibilityLayer:S=!1}=e,A=()=>{if(s&&s.length){var W={padding:0,margin:0},V=(f?xp(s,f):s).map((H,X)=>{if(H.type==="none")return null;var Y=H.formatter||c||LF,{value:we,name:se}=H,ie=we,be=se;if(Y){var Ce=Y(we,se,H,X,s);if(Array.isArray(Ce))[ie,be]=Ce;else if(Ce!=null)ie=Ce;else return null}var re=J1({display:"block",paddingTop:4,paddingBottom:4,color:H.color||"#000"},n);return N.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(X),style:re},la(be)?N.createElement("span",{className:"recharts-tooltip-item-name"},be):null,la(be)?N.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,N.createElement("span",{className:"recharts-tooltip-item-value"},ie),N.createElement("span",{className:"recharts-tooltip-item-unit"},H.unit||""))});return N.createElement("ul",{className:"recharts-tooltip-item-list",style:W},V)}return null},O=J1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),I=J1({margin:0},i),P=!pr(v),M=P?v:"",L=Vt("recharts-default-tooltip",p),R=Vt("recharts-tooltip-label",m);P&&b&&s!==void 0&&s!==null&&(M=b(v,s));var U=S?{role:"status","aria-live":"assertive"}:{};return N.createElement("div",bv({className:L,style:O},U),N.createElement("p",{className:R,style:I},N.isValidElement(M)?M:"".concat(M)),A())},Lu="recharts-tooltip-wrapper",FF={visibility:"hidden"};function UF(e){var{coordinate:t,translateX:r,translateY:n}=e;return Vt(Lu,{["".concat(Lu,"-right")]:at(r)&&t&&at(t.x)&&r>=t.x,["".concat(Lu,"-left")]:at(r)&&t&&at(t.x)&&r<t.x,["".concat(Lu,"-bottom")]:at(n)&&t&&at(t.y)&&n>=t.y,["".concat(Lu,"-top")]:at(n)&&t&&at(t.y)&&n<t.y})}function rA(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:s,reverseDirection:c,tooltipDimension:f,viewBox:p,viewBoxDimension:m}=e;if(s&&at(s[n]))return s[n];var v=r[n]-f-(i>0?i:0),b=r[n]+i;if(t[n])return c[n]?v:b;var S=p[n];if(S==null)return 0;if(c[n]){var A=v,O=S;return A<O?Math.max(b,S):Math.max(v,S)}if(m==null)return 0;var I=b+f,P=S+m;return I>P?Math.max(v,S):Math.max(b,S)}function zF(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function $F(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:s,tooltipBox:c,useTranslate3d:f,viewBox:p}=e,m,v,b;return c.height>0&&c.width>0&&r?(v=rA({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.width,viewBox:p,viewBoxDimension:p.width}),b=rA({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.height,viewBox:p,viewBoxDimension:p.height}),m=zF({translateX:v,translateY:b,useTranslate3d:f})):m=FF,{cssProperties:m,cssClasses:UF({translateX:v,translateY:b,coordinate:r})}}function nA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Eh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nA(Object(r),!0).forEach(function(n){Ev(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ev(e,t,r){return(t=WF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WF(e){var t=VF(e,"string");return typeof t=="symbol"?t:t+""}function VF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class HF extends N.PureComponent{constructor(){super(...arguments),Ev(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Ev(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:s,coordinate:c,hasPayload:f,isAnimationActive:p,offset:m,position:v,reverseDirection:b,useTranslate3d:S,viewBox:A,wrapperStyle:O,lastBoundingBox:I,innerRef:P,hasPortalFromProps:M}=this.props,{cssClasses:L,cssProperties:R}=$F({allowEscapeViewBox:r,coordinate:c,offsetTopLeft:m,position:v,reverseDirection:b,tooltipBox:{height:I.height,width:I.width},useTranslate3d:S,viewBox:A}),U=M?{}:Eh(Eh({transition:p&&t?"transform ".concat(n,"ms ").concat(i):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&f?"visible":"hidden",position:"absolute",top:0,left:0}),W=Eh(Eh({},U),{},{visibility:!this.state.dismissed&&t&&f?"visible":"hidden"},O);return N.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:L,style:W,ref:P},s)}}var eT=()=>{var e;return(e=Ze(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sv.apply(null,arguments)}function iA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function aA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iA(Object(r),!0).forEach(function(n){qF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qF(e,t,r){return(t=GF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GF(e){var t=KF(e,"string");return typeof t=="symbol"?t:t+""}function KF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sA={curveBasisClosed:A9,curveBasisOpen:_9,curveBasis:C9,curveBumpX:u9,curveBumpY:d9,curveLinearClosed:N9,curveLinear:pp,curveMonotoneX:O9,curveMonotoneY:I9,curveNatural:T9,curveStep:k9,curveStepAfter:j9,curveStepBefore:P9},_0=e=>ar(e.x)&&ar(e.y),oA=e=>e.base!=null&&_0(e.base)&&_0(e),Bu=e=>e.x,Fu=e=>e.y,XF=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Nd(e));return(r==="curveMonotone"||r==="curveBump")&&t?sA["".concat(r).concat(t==="vertical"?"Y":"X")]:sA[r]||pp},YF=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:s=!1}=e,c=XF(t,i),f=s?r.filter(_0):r,p;if(Array.isArray(n)){var m=r.map((A,O)=>aA(aA({},A),{},{base:n[O]}));i==="vertical"?p=ph().y(Fu).x1(Bu).x0(A=>A.base.x):p=ph().x(Bu).y1(Fu).y0(A=>A.base.y);var v=p.defined(oA).curve(c),b=s?m.filter(oA):m;return v(b)}i==="vertical"&&at(n)?p=ph().y(Fu).x1(Bu).x0(n):at(n)?p=ph().x(Bu).y1(Fu).y0(n):p=I4().x(Bu).y(Fu);var S=p.defined(_0).curve(c);return S(f)},Mp=e=>{var{className:t,points:r,path:n,pathRef:i}=e,s=Pd();if((!r||!r.length)&&!n)return null;var c={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},f=r&&r.length?YF(c):n;return N.createElement("path",Sv({},$i(e),i7(e),{className:Vt("recharts-curve",t),d:f===null?void 0:f,ref:i}))},ZF=["x","y","top","left","width","height","className"];function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cv.apply(null,arguments)}function lA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function QF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lA(Object(r),!0).forEach(function(n){JF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JF(e,t,r){return(t=eU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eU(e){var t=tU(e,"string");return typeof t=="symbol"?t:t+""}function tU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rU(e,t){if(e==null)return{};var r,n,i=nU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function nU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iU=(e,t,r,n,i,s)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),aU=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:s=0,height:c=0,className:f}=e,p=rU(e,ZF),m=QF({x:t,y:r,top:n,left:i,width:s,height:c},p);return!at(t)||!at(r)||!at(s)||!at(c)||!at(n)||!at(i)?null:N.createElement("path",Cv({},Wi(m),{className:Vt("recharts-cross",f),d:iU(t,r,s,c,n,i)}))};function sU(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function cA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cA(Object(r),!0).forEach(function(n){oU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oU(e,t,r){return(t=lU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lU(e){var t=cU(e,"string");return typeof t=="symbol"?t:t+""}function cU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uU=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),tT=(e,t,r)=>e.map(n=>"".concat(uU(n)," ").concat(t,"ms ").concat(r)).join(","),dU=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),pd=(e,t)=>Object.keys(t).reduce((r,n)=>uA(uA({},r),{},{[n]:e(n,t[n])}),{});function dA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dA(Object(r),!0).forEach(function(n){fU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fU(e,t,r){return(t=hU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hU(e){var t=pU(e,"string");return typeof t=="symbol"?t:t+""}function pU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N0=(e,t,r)=>e+(t-e)*r,Av=e=>{var{from:t,to:r}=e;return t!==r},rT=(e,t,r)=>{var n=pd((i,s)=>{if(Av(s)){var[c,f]=e(s.from,s.to,s.velocity);return mn(mn({},s),{},{from:c,velocity:f})}return s},t);return r<1?pd((i,s)=>Av(s)&&n[i]!=null?mn(mn({},s),{},{velocity:N0(s.velocity,n[i].velocity,r),from:N0(s.from,n[i].from,r)}):s,t):rT(e,n,r-1)};function mU(e,t,r,n,i,s){var c,f=n.reduce((S,A)=>mn(mn({},S),{},{[A]:{from:e[A],velocity:0,to:t[A]}}),{}),p=()=>pd((S,A)=>A.from,f),m=()=>!Object.values(f).filter(Av).length,v=null,b=S=>{c||(c=S);var A=S-c,O=A/r.dt;f=rT(r,f,O),i(mn(mn(mn({},e),t),p())),c=S,m()||(v=s.setTimeout(b))};return()=>(v=s.setTimeout(b),()=>{var S;(S=v)===null||S===void 0||S()})}function gU(e,t,r,n,i,s,c){var f=null,p=i.reduce((b,S)=>{var A=e[S],O=t[S];return A==null||O==null?b:mn(mn({},b),{},{[S]:[A,O]})},{}),m,v=b=>{m||(m=b);var S=(b-m)/n,A=pd((I,P)=>N0(...P,r(S)),p);if(s(mn(mn(mn({},e),t),A)),S<1)f=c.setTimeout(v);else{var O=pd((I,P)=>N0(...P,r(1)),p);s(mn(mn(mn({},e),t),O))}};return()=>(f=c.setTimeout(v),()=>{var b;(b=f)===null||b===void 0||b()})}const xU=(e,t,r,n,i,s)=>{var c=dU(e,t);return r==null?()=>(i(mn(mn({},e),t)),()=>{}):r.isStepper===!0?mU(e,t,r,c,i,s):gU(e,t,r,n,c,i,s)};var O0=1e-4,nT=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],iT=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),fA=(e,t)=>r=>{var n=nT(e,t);return iT(n,r)},vU=(e,t)=>r=>{var n=nT(e,t),i=[...n.map((s,c)=>s*c).slice(1),0];return iT(i,r)},yU=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var i=n.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},wU=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=yU(r[0]);if(i)return i}}return r.length===4?r:[0,0,1,1]},bU=(e,t,r,n)=>{var i=fA(e,r),s=fA(t,n),c=vU(e,r),f=m=>m>1?1:m<0?0:m,p=m=>{for(var v=m>1?1:m,b=v,S=0;S<8;++S){var A=i(b)-v,O=c(b);if(Math.abs(A-v)<O0||O<O0)return s(b);b=f(b-A/O)}return s(b)};return p.isStepper=!1,p},hA=function(){return bU(...wU(...arguments))},EU=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,s=(c,f,p)=>{var m=-(c-f)*r,v=p*n,b=p+(m-v)*i/1e3,S=p*i/1e3+c;return Math.abs(S-f)<O0&&Math.abs(b)<O0?[f,0]:[S,b]};return s.isStepper=!0,s.dt=i,s},SU=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return hA(e);case"spring":return EU();default:if(e.split("(")[0]==="cubic-bezier")return hA(e)}return typeof e=="function"?e:null};function CU(e){var t,r=()=>null,n=!1,i=null,s=c=>{if(!n){if(Array.isArray(c)){if(!c.length)return;var f=c,[p,...m]=f;if(typeof p=="number"){i=e.setTimeout(s.bind(null,m),p);return}s(p),i=e.setTimeout(s.bind(null,m));return}typeof c=="string"&&(t=c,r(t)),typeof c=="object"&&(t=c,r(t)),typeof c=="function"&&c()}};return{stop:()=>{n=!0},start:c=>{n=!1,i&&(i(),i=null),s(c)},subscribe:c=>(r=c,()=>{r=()=>null}),getTimeoutController:()=>e}}class AU{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,s=c=>{c-n>=r?t(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function _U(){return CU(new AU)}var NU=N.createContext(_U);function OU(e,t){var r=N.useContext(NU);return N.useMemo(()=>t??r(e),[e,t,r])}var IU=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Dp={isSsr:IU()},TU={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},pA={t:0},ex={t:1};function Rd(e){var t=Zr(e,TU),{isActive:r,canBegin:n,duration:i,easing:s,begin:c,onAnimationEnd:f,onAnimationStart:p,children:m}=t,v=r==="auto"?!Dp.isSsr:r,b=OU(t.animationId,t.animationManager),[S,A]=N.useState(v?pA:ex),O=N.useRef(null);return N.useEffect(()=>{v||A(ex)},[v]),N.useEffect(()=>{if(!v||!n)return Od;var I=xU(pA,ex,SU(s),i,A,b.getTimeoutController()),P=()=>{O.current=I()};return b.start([p,c,P,i,f]),()=>{b.stop(),O.current&&O.current(),f()}},[v,n,i,s,c,p,f,b]),m(S.t)}function Md(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=N.useRef(od(t)),n=N.useRef(e);return n.current!==e&&(r.current=od(t),n.current=e),r.current}var kU=["radius"],PU=["radius"],mA,gA,xA,vA,yA,wA,bA,EA,SA,CA;function AA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _A(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(r),!0).forEach(function(n){jU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jU(e,t,r){return(t=RU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RU(e){var t=MU(e,"string");return typeof t=="symbol"?t:t+""}function MU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I0.apply(null,arguments)}function NA(e,t){if(e==null)return{};var r,n,i=DU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function DU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var OA=(e,t,r,n,i)=>{var s=go(r),c=go(n),f=Math.min(Math.abs(s)/2,Math.abs(c)/2),p=c>=0?1:-1,m=s>=0?1:-1,v=c>=0&&s>=0||c<0&&s<0?1:0,b;if(f>0&&i instanceof Array){for(var S=[0,0,0,0],A=0,O=4;A<O;A++)S[A]=i[A]>f?f:i[A];b=Wr(mA||(mA=$a(["M",",",""])),e,t+p*S[0]),S[0]>0&&(b+=Wr(gA||(gA=$a(["A ",",",",0,0,",",",",",""])),S[0],S[0],v,e+m*S[0],t)),b+=Wr(xA||(xA=$a(["L ",",",""])),e+r-m*S[1],t),S[1]>0&&(b+=Wr(vA||(vA=$a(["A ",",",",0,0,",`,
        `,",",""])),S[1],S[1],v,e+r,t+p*S[1])),b+=Wr(yA||(yA=$a(["L ",",",""])),e+r,t+n-p*S[2]),S[2]>0&&(b+=Wr(wA||(wA=$a(["A ",",",",0,0,",`,
        `,",",""])),S[2],S[2],v,e+r-m*S[2],t+n)),b+=Wr(bA||(bA=$a(["L ",",",""])),e+m*S[3],t+n),S[3]>0&&(b+=Wr(EA||(EA=$a(["A ",",",",0,0,",`,
        `,",",""])),S[3],S[3],v,e,t+n-p*S[3])),b+="Z"}else if(f>0&&i===+i&&i>0){var I=Math.min(f,i);b=Wr(SA||(SA=$a(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+p*I,I,I,v,e+m*I,t,e+r-m*I,t,I,I,v,e+r,t+p*I,e+r,t+n-p*I,I,I,v,e+r-m*I,t+n,e+m*I,t+n,I,I,v,e,t+n-p*I)}else b=Wr(CA||(CA=$a(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return b},IA={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aT=e=>{var t=Zr(e,IA),r=N.useRef(null),[n,i]=N.useState(-1);N.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var le=r.current.getTotalLength();le&&i(le)}catch{}},[]);var{x:s,y:c,width:f,height:p,radius:m,className:v}=t,{animationEasing:b,animationDuration:S,animationBegin:A,isAnimationActive:O,isUpdateAnimationActive:I}=t,P=N.useRef(f),M=N.useRef(p),L=N.useRef(s),R=N.useRef(c),U=N.useMemo(()=>({x:s,y:c,width:f,height:p,radius:m}),[s,c,f,p,m]),W=Md(U,"rectangle-");if(s!==+s||c!==+c||f!==+f||p!==+p||f===0||p===0)return null;var V=Vt("recharts-rectangle",v);if(!I){var H=Wi(t),{radius:X}=H,Y=NA(H,kU);return N.createElement("path",I0({},Y,{x:go(s),y:go(c),width:go(f),height:go(p),radius:typeof m=="number"?m:void 0,className:V,d:OA(s,c,f,p,m)}))}var we=P.current,se=M.current,ie=L.current,be=R.current,Ce="0px ".concat(n===-1?1:n,"px"),re="".concat(n,"px 0px"),ze=tT(["strokeDasharray"],S,typeof b=="string"?b:IA.animationEasing);return N.createElement(Rd,{animationId:W,key:W,canBegin:n>0,duration:S,easing:b,isActive:I,begin:A},le=>{var me=Mr(we,f,le),Ee=Mr(se,p,le),Ae=Mr(ie,s,le),J=Mr(be,c,le);r.current&&(P.current=me,M.current=Ee,L.current=Ae,R.current=J);var de;O?le>0?de={transition:ze,strokeDasharray:re}:de={strokeDasharray:Ce}:de={strokeDasharray:re};var $e=Wi(t),{radius:Ue}=$e,Xe=NA($e,PU);return N.createElement("path",I0({},Xe,{radius:typeof m=="number"?m:void 0,className:V,d:OA(Ae,J,me,Ee,m),ref:r,style:_A(_A({},de),t.style)}))})};function TA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TA(Object(r),!0).forEach(function(n){LU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LU(e,t,r){return(t=BU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BU(e){var t=FU(e,"string");return typeof t=="symbol"?t:t+""}function FU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T0=Math.PI/180,UU=e=>e*180/Math.PI,an=(e,t,r,n)=>({x:e+Math.cos(-T0*n)*r,y:t+Math.sin(-T0*n)*r}),sT=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},zU=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return Math.sqrt((r-i)**2+(n-s)**2)},$U=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:s}=t,c=zU({x:r,y:n},{x:i,y:s});if(c<=0)return{radius:c,angle:0};var f=(r-i)/c,p=Math.acos(f);return n>s&&(p=2*Math.PI-p),{radius:c,angle:UU(p),angleInRadian:p}},WU=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),s=Math.min(n,i);return{startAngle:t-s*360,endAngle:r-s*360}},VU=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),s=Math.floor(n/360),c=Math.min(i,s);return e+c*360},HU=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:s}=$U({x:r,y:n},t),{innerRadius:c,outerRadius:f}=t;if(i<c||i>f||i===0)return null;var{startAngle:p,endAngle:m}=WU(t),v=s,b;if(p<=m){for(;v>m;)v-=360;for(;v<p;)v+=360;b=v>=p&&v<=m}else{for(;v>p;)v-=360;for(;v<m;)v+=360;b=v>=m&&v<=p}return b?kA(kA({},t),{},{radius:i,angle:VU(v,t)}):null};function oT(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:s}=e,c=an(t,r,n,i),f=an(t,r,n,s);return{points:[c,f],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}var PA,jA,RA,MA,DA,LA,BA;function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_v.apply(null,arguments)}function sl(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var qU=(e,t)=>{var r=In(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Sh=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:s,isExternal:c,cornerRadius:f,cornerIsExternal:p}=e,m=f*(c?1:-1)+n,v=Math.asin(f/m)/T0,b=p?i:i+s*v,S=an(t,r,m,b),A=an(t,r,n,b),O=p?i-s*v:i,I=an(t,r,m*Math.cos(v*T0),O);return{center:S,circleTangency:A,lineTangency:I,theta:v}},lT=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:s,endAngle:c}=e,f=qU(s,c),p=s+f,m=an(t,r,i,s),v=an(t,r,i,p),b=Wr(PA||(PA=sl(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),m.x,m.y,i,i,+(Math.abs(f)>180),+(s>p),v.x,v.y);if(n>0){var S=an(t,r,n,s),A=an(t,r,n,p);b+=Wr(jA||(jA=sl(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),A.x,A.y,n,n,+(Math.abs(f)>180),+(s<=p),S.x,S.y)}else b+=Wr(RA||(RA=sl(["L ",","," Z"])),t,r);return b},GU=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:c,cornerIsExternal:f,startAngle:p,endAngle:m}=e,v=In(m-p),{circleTangency:b,lineTangency:S,theta:A}=Sh({cx:t,cy:r,radius:i,angle:p,sign:v,cornerRadius:s,cornerIsExternal:f}),{circleTangency:O,lineTangency:I,theta:P}=Sh({cx:t,cy:r,radius:i,angle:m,sign:-v,cornerRadius:s,cornerIsExternal:f}),M=f?Math.abs(p-m):Math.abs(p-m)-A-P;if(M<0)return c?Wr(MA||(MA=sl(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),S.x,S.y,s,s,s*2,s,s,-s*2):lT({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:p,endAngle:m});var L=Wr(DA||(DA=sl(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),S.x,S.y,s,s,+(v<0),b.x,b.y,i,i,+(M>180),+(v<0),O.x,O.y,s,s,+(v<0),I.x,I.y);if(n>0){var{circleTangency:R,lineTangency:U,theta:W}=Sh({cx:t,cy:r,radius:n,angle:p,sign:v,isExternal:!0,cornerRadius:s,cornerIsExternal:f}),{circleTangency:V,lineTangency:H,theta:X}=Sh({cx:t,cy:r,radius:n,angle:m,sign:-v,isExternal:!0,cornerRadius:s,cornerIsExternal:f}),Y=f?Math.abs(p-m):Math.abs(p-m)-W-X;if(Y<0&&s===0)return"".concat(L,"L").concat(t,",").concat(r,"Z");L+=Wr(LA||(LA=sl(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),H.x,H.y,s,s,+(v<0),V.x,V.y,n,n,+(Y>180),+(v>0),R.x,R.y,s,s,+(v<0),U.x,U.y)}else L+=Wr(BA||(BA=sl(["L",",","Z"])),t,r);return L},KU={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},cT=e=>{var t=Zr(e,KU),{cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:c,forceCornerRadius:f,cornerIsExternal:p,startAngle:m,endAngle:v,className:b}=t;if(s<i||m===v)return null;var S=Vt("recharts-sector",b),A=s-i,O=ti(c,A,0,!0),I;return O>0&&Math.abs(m-v)<360?I=GU({cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(O,A/2),forceCornerRadius:f,cornerIsExternal:p,startAngle:m,endAngle:v}):I=lT({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:m,endAngle:v}),N.createElement("path",_v({},Wi(t),{className:S,d:I}))};function XU(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(V4(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:s,outerRadius:c,angle:f}=t,p=an(n,i,s,f),m=an(n,i,c,f);return[{x:p.x,y:p.y},{x:m.x,y:m.y}]}return oT(t)}}var tx={},rx={},nx={},FA;function YU(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rI();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(nx)),nx}var UA;function ZU(){return UA||(UA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YU();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(rx)),rx}var zA;function QU(){return zA||(zA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nI(),r=ZU();function n(i,s,c){c&&typeof c!="number"&&t.isIterateeCall(i,s,c)&&(s=c=void 0),i=r.toFinite(i),s===void 0?(s=i,i=0):s=r.toFinite(s),c=c===void 0?i<s?1:-1:r.toFinite(c);const f=Math.max(Math.ceil((s-i)/(c||1)),0),p=new Array(f);for(let m=0;m<f;m++)p[m]=i,i+=c;return p}e.range=n})(tx)),tx}var ix,$A;function JU(){return $A||($A=1,ix=QU().range),ix}var ez=JU();const uT=da(ez);function xo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tz(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Hy(e){let t,r,n;e.length!==2?(t=xo,r=(f,p)=>xo(e(f),p),n=(f,p)=>e(f)-p):(t=e===xo||e===tz?e:rz,r=e,n=e);function i(f,p,m=0,v=f.length){if(m<v){if(t(p,p)!==0)return v;do{const b=m+v>>>1;r(f[b],p)<0?m=b+1:v=b}while(m<v)}return m}function s(f,p,m=0,v=f.length){if(m<v){if(t(p,p)!==0)return v;do{const b=m+v>>>1;r(f[b],p)<=0?m=b+1:v=b}while(m<v)}return m}function c(f,p,m=0,v=f.length){const b=i(f,p,m,v-1);return b>m&&n(f[b-1],p)>-n(f[b],p)?b-1:b}return{left:i,center:c,right:s}}function rz(){return 0}function dT(e){return e===null?NaN:+e}function*nz(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const iz=Hy(xo),Dd=iz.right;Hy(dT).center;class WA extends Map{constructor(t,r=oz){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(VA(this,t))}has(t){return super.has(VA(this,t))}set(t,r){return super.set(az(this,t),r)}delete(t){return super.delete(sz(this,t))}}function VA({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function az({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function sz({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function oz(e){return e!==null&&typeof e=="object"?e.valueOf():e}function lz(e=xo){if(e===xo)return fT;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function fT(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const cz=Math.sqrt(50),uz=Math.sqrt(10),dz=Math.sqrt(2);function k0(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),c=s>=cz?10:s>=uz?5:s>=dz?2:1;let f,p,m;return i<0?(m=Math.pow(10,-i)/c,f=Math.round(e*m),p=Math.round(t*m),f/m<e&&++f,p/m>t&&--p,m=-m):(m=Math.pow(10,i)*c,f=Math.round(e/m),p=Math.round(t/m),f*m<e&&++f,p*m>t&&--p),p<f&&.5<=r&&r<2?k0(e,t,r*2):[f,p,m]}function Nv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,c]=n?k0(t,e,r):k0(e,t,r);if(!(s>=i))return[];const f=s-i+1,p=new Array(f);if(n)if(c<0)for(let m=0;m<f;++m)p[m]=(s-m)/-c;else for(let m=0;m<f;++m)p[m]=(s-m)*c;else if(c<0)for(let m=0;m<f;++m)p[m]=(i+m)/-c;else for(let m=0;m<f;++m)p[m]=(i+m)*c;return p}function Ov(e,t,r){return t=+t,e=+e,r=+r,k0(e,t,r)[2]}function Iv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Ov(t,e,r):Ov(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function HA(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function qA(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function hT(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?fT:lz(i);n>r;){if(n-r>600){const p=n-r+1,m=t-r+1,v=Math.log(p),b=.5*Math.exp(2*v/3),S=.5*Math.sqrt(v*b*(p-b)/p)*(m-p/2<0?-1:1),A=Math.max(r,Math.floor(t-m*b/p+S)),O=Math.min(n,Math.floor(t+(p-m)*b/p+S));hT(e,t,A,O,i)}const s=e[t];let c=r,f=n;for(Uu(e,r,t),i(e[n],s)>0&&Uu(e,r,n);c<f;){for(Uu(e,c,f),++c,--f;i(e[c],s)<0;)++c;for(;i(e[f],s)>0;)--f}i(e[r],s)===0?Uu(e,r,f):(++f,Uu(e,f,n)),f<=t&&(r=f+1),t<=f&&(n=f-1)}return e}function Uu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function fz(e,t,r){if(e=Float64Array.from(nz(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return qA(e);if(t>=1)return HA(e);var n,i=(n-1)*t,s=Math.floor(i),c=HA(hT(e,s).subarray(0,s+1)),f=qA(e.subarray(s+1));return c+(f-c)*(i-s)}}function hz(e,t,r=dT){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),c=+r(e[s],s,e),f=+r(e[s+1],s+1,e);return c+(f-c)*(i-s)}}function pz(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function fa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ls(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Tv=Symbol("implicit");function qy(){var e=new WA,t=[],r=[],n=Tv;function i(s){let c=e.get(s);if(c===void 0){if(n!==Tv)return n;e.set(s,c=t.push(s)-1)}return r[c%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new WA;for(const c of s)e.has(c)||e.set(c,t.push(c)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return qy(t,r).unknown(n)},fa.apply(i,arguments),i}function Gy(){var e=qy().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,c,f=!1,p=0,m=0,v=.5;delete e.unknown;function b(){var S=t().length,A=i<n,O=A?i:n,I=A?n:i;s=(I-O)/Math.max(1,S-p+m*2),f&&(s=Math.floor(s)),O+=(I-O-s*(S-p))*v,c=s*(1-p),f&&(O=Math.round(O),c=Math.round(c));var P=pz(S).map(function(M){return O+s*M});return r(A?P.reverse():P)}return e.domain=function(S){return arguments.length?(t(S),b()):t()},e.range=function(S){return arguments.length?([n,i]=S,n=+n,i=+i,b()):[n,i]},e.rangeRound=function(S){return[n,i]=S,n=+n,i=+i,f=!0,b()},e.bandwidth=function(){return c},e.step=function(){return s},e.round=function(S){return arguments.length?(f=!!S,b()):f},e.padding=function(S){return arguments.length?(p=Math.min(1,m=+S),b()):p},e.paddingInner=function(S){return arguments.length?(p=Math.min(1,S),b()):p},e.paddingOuter=function(S){return arguments.length?(m=+S,b()):m},e.align=function(S){return arguments.length?(v=Math.max(0,Math.min(1,S)),b()):v},e.copy=function(){return Gy(t(),[n,i]).round(f).paddingInner(p).paddingOuter(m).align(v)},fa.apply(b(),arguments)}function pT(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pT(t())},e}function mz(){return pT(Gy.apply(null,arguments).paddingInner(1))}function Ky(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function mT(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ld(){}var md=.7,P0=1/md,Ec="\\s*([+-]?\\d+)\\s*",gd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ga="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gz=/^#([0-9a-f]{3,8})$/,xz=new RegExp(`^rgb\\(${Ec},${Ec},${Ec}\\)$`),vz=new RegExp(`^rgb\\(${Ga},${Ga},${Ga}\\)$`),yz=new RegExp(`^rgba\\(${Ec},${Ec},${Ec},${gd}\\)$`),wz=new RegExp(`^rgba\\(${Ga},${Ga},${Ga},${gd}\\)$`),bz=new RegExp(`^hsl\\(${gd},${Ga},${Ga}\\)$`),Ez=new RegExp(`^hsla\\(${gd},${Ga},${Ga},${gd}\\)$`),GA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ky(Ld,xd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:KA,formatHex:KA,formatHex8:Sz,formatHsl:Cz,formatRgb:XA,toString:XA});function KA(){return this.rgb().formatHex()}function Sz(){return this.rgb().formatHex8()}function Cz(){return gT(this).formatHsl()}function XA(){return this.rgb().formatRgb()}function xd(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=gz.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?YA(t):r===3?new wi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ch(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ch(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xz.exec(e))?new wi(t[1],t[2],t[3],1):(t=vz.exec(e))?new wi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yz.exec(e))?Ch(t[1],t[2],t[3],t[4]):(t=wz.exec(e))?Ch(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bz.exec(e))?JA(t[1],t[2]/100,t[3]/100,1):(t=Ez.exec(e))?JA(t[1],t[2]/100,t[3]/100,t[4]):GA.hasOwnProperty(e)?YA(GA[e]):e==="transparent"?new wi(NaN,NaN,NaN,0):null}function YA(e){return new wi(e>>16&255,e>>8&255,e&255,1)}function Ch(e,t,r,n){return n<=0&&(e=t=r=NaN),new wi(e,t,r,n)}function Az(e){return e instanceof Ld||(e=xd(e)),e?(e=e.rgb(),new wi(e.r,e.g,e.b,e.opacity)):new wi}function kv(e,t,r,n){return arguments.length===1?Az(e):new wi(e,t,r,n??1)}function wi(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Ky(wi,kv,mT(Ld,{brighter(e){return e=e==null?P0:Math.pow(P0,e),new wi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?md:Math.pow(md,e),new wi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wi(dl(this.r),dl(this.g),dl(this.b),j0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZA,formatHex:ZA,formatHex8:_z,formatRgb:QA,toString:QA}));function ZA(){return`#${ol(this.r)}${ol(this.g)}${ol(this.b)}`}function _z(){return`#${ol(this.r)}${ol(this.g)}${ol(this.b)}${ol((isNaN(this.opacity)?1:this.opacity)*255)}`}function QA(){const e=j0(this.opacity);return`${e===1?"rgb(":"rgba("}${dl(this.r)}, ${dl(this.g)}, ${dl(this.b)}${e===1?")":`, ${e})`}`}function j0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function dl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ol(e){return e=dl(e),(e<16?"0":"")+e.toString(16)}function JA(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ia(e,t,r,n)}function gT(e){if(e instanceof Ia)return new Ia(e.h,e.s,e.l,e.opacity);if(e instanceof Ld||(e=xd(e)),!e)return new Ia;if(e instanceof Ia)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),c=NaN,f=s-i,p=(s+i)/2;return f?(t===s?c=(r-n)/f+(r<n)*6:r===s?c=(n-t)/f+2:c=(t-r)/f+4,f/=p<.5?s+i:2-s-i,c*=60):f=p>0&&p<1?0:c,new Ia(c,f,p,e.opacity)}function Nz(e,t,r,n){return arguments.length===1?gT(e):new Ia(e,t,r,n??1)}function Ia(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Ky(Ia,Nz,mT(Ld,{brighter(e){return e=e==null?P0:Math.pow(P0,e),new Ia(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?md:Math.pow(md,e),new Ia(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new wi(ax(e>=240?e-240:e+120,i,n),ax(e,i,n),ax(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Ia(e_(this.h),Ah(this.s),Ah(this.l),j0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=j0(this.opacity);return`${e===1?"hsl(":"hsla("}${e_(this.h)}, ${Ah(this.s)*100}%, ${Ah(this.l)*100}%${e===1?")":`, ${e})`}`}}));function e_(e){return e=(e||0)%360,e<0?e+360:e}function Ah(e){return Math.max(0,Math.min(1,e||0))}function ax(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Xy=e=>()=>e;function Oz(e,t){return function(r){return e+r*t}}function Iz(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Tz(e){return(e=+e)==1?xT:function(t,r){return r-t?Iz(t,r,e):Xy(isNaN(t)?r:t)}}function xT(e,t){var r=t-e;return r?Oz(e,r):Xy(isNaN(e)?t:e)}const t_=(function e(t){var r=Tz(t);function n(i,s){var c=r((i=kv(i)).r,(s=kv(s)).r),f=r(i.g,s.g),p=r(i.b,s.b),m=xT(i.opacity,s.opacity);return function(v){return i.r=c(v),i.g=f(v),i.b=p(v),i.opacity=m(v),i+""}}return n.gamma=e,n})(1);function kz(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function Pz(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function jz(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),c;for(c=0;c<n;++c)i[c]=Wc(e[c],t[c]);for(;c<r;++c)s[c]=t[c];return function(f){for(c=0;c<n;++c)s[c]=i[c](f);return s}}function Rz(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function R0(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Mz(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Wc(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var Pv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sx=new RegExp(Pv.source,"g");function Dz(e){return function(){return e}}function Lz(e){return function(t){return e(t)+""}}function Bz(e,t){var r=Pv.lastIndex=sx.lastIndex=0,n,i,s,c=-1,f=[],p=[];for(e=e+"",t=t+"";(n=Pv.exec(e))&&(i=sx.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),f[c]?f[c]+=s:f[++c]=s),(n=n[0])===(i=i[0])?f[c]?f[c]+=i:f[++c]=i:(f[++c]=null,p.push({i:c,x:R0(n,i)})),r=sx.lastIndex;return r<t.length&&(s=t.slice(r),f[c]?f[c]+=s:f[++c]=s),f.length<2?p[0]?Lz(p[0].x):Dz(t):(t=p.length,function(m){for(var v=0,b;v<t;++v)f[(b=p[v]).i]=b.x(m);return f.join("")})}function Wc(e,t){var r=typeof t,n;return t==null||r==="boolean"?Xy(t):(r==="number"?R0:r==="string"?(n=xd(t))?(t=n,t_):Bz:t instanceof xd?t_:t instanceof Date?Rz:Pz(t)?kz:Array.isArray(t)?jz:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Mz:R0)(e,t)}function Yy(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Fz(e,t){t===void 0&&(t=e,e=Wc);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(c){var f=Math.max(0,Math.min(n-1,Math.floor(c*=n)));return s[f](c-f)}}function Uz(e){return function(){return e}}function M0(e){return+e}var r_=[0,1];function li(e){return e}function jv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Uz(isNaN(t)?NaN:.5)}function zz(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function $z(e,t,r){var n=e[0],i=e[1],s=t[0],c=t[1];return i<n?(n=jv(i,n),s=r(c,s)):(n=jv(n,i),s=r(s,c)),function(f){return s(n(f))}}function Wz(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),c=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<n;)i[c]=jv(e[c],e[c+1]),s[c]=r(t[c],t[c+1]);return function(f){var p=Dd(e,f,1,n)-1;return s[p](i[p](f))}}function Bd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Lp(){var e=r_,t=r_,r=Wc,n,i,s,c=li,f,p,m;function v(){var S=Math.min(e.length,t.length);return c!==li&&(c=zz(e[0],e[S-1])),f=S>2?Wz:$z,p=m=null,b}function b(S){return S==null||isNaN(S=+S)?s:(p||(p=f(e.map(n),t,r)))(n(c(S)))}return b.invert=function(S){return c(i((m||(m=f(t,e.map(n),R0)))(S)))},b.domain=function(S){return arguments.length?(e=Array.from(S,M0),v()):e.slice()},b.range=function(S){return arguments.length?(t=Array.from(S),v()):t.slice()},b.rangeRound=function(S){return t=Array.from(S),r=Yy,v()},b.clamp=function(S){return arguments.length?(c=S?!0:li,v()):c!==li},b.interpolate=function(S){return arguments.length?(r=S,v()):r},b.unknown=function(S){return arguments.length?(s=S,b):s},function(S,A){return n=S,i=A,v()}}function Zy(){return Lp()(li,li)}function Vz(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function D0(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function kc(e){return e=D0(Math.abs(e)),e?e[1]:NaN}function Hz(e,t){return function(r,n){for(var i=r.length,s=[],c=0,f=e[0],p=0;i>0&&f>0&&(p+f+1>n&&(f=Math.max(1,n-p)),s.push(r.substring(i-=f,i+f)),!((p+=f+1)>n));)f=e[c=(c+1)%e.length];return s.reverse().join(t)}}function qz(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Gz=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vd(e){if(!(t=Gz.exec(e)))throw new Error("invalid format: "+e);var t;return new Qy({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vd.prototype=Qy.prototype;function Qy(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Qy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Kz(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var vT;function Xz(e,t){var r=D0(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(vT=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=n.length;return s===c?n:s>c?n+new Array(s-c+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+D0(e,Math.max(0,t+s-1))[0]}function n_(e,t){var r=D0(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const i_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Vz,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>n_(e*100,t),r:n_,s:Xz,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function a_(e){return e}var s_=Array.prototype.map,o_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Yz(e){var t=e.grouping===void 0||e.thousands===void 0?a_:Hz(s_.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?a_:qz(s_.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"":e.minus+"",p=e.nan===void 0?"NaN":e.nan+"";function m(b){b=vd(b);var S=b.fill,A=b.align,O=b.sign,I=b.symbol,P=b.zero,M=b.width,L=b.comma,R=b.precision,U=b.trim,W=b.type;W==="n"?(L=!0,W="g"):i_[W]||(R===void 0&&(R=12),U=!0,W="g"),(P||S==="0"&&A==="=")&&(P=!0,S="0",A="=");var V=I==="$"?r:I==="#"&&/[boxX]/.test(W)?"0"+W.toLowerCase():"",H=I==="$"?n:/[%p]/.test(W)?c:"",X=i_[W],Y=/[defgprs%]/.test(W);R=R===void 0?6:/[gprs]/.test(W)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function we(se){var ie=V,be=H,Ce,re,ze;if(W==="c")be=X(se)+be,se="";else{se=+se;var le=se<0||1/se<0;if(se=isNaN(se)?p:X(Math.abs(se),R),U&&(se=Kz(se)),le&&+se==0&&O!=="+"&&(le=!1),ie=(le?O==="("?O:f:O==="-"||O==="("?"":O)+ie,be=(W==="s"?o_[8+vT/3]:"")+be+(le&&O==="("?")":""),Y){for(Ce=-1,re=se.length;++Ce<re;)if(ze=se.charCodeAt(Ce),48>ze||ze>57){be=(ze===46?i+se.slice(Ce+1):se.slice(Ce))+be,se=se.slice(0,Ce);break}}}L&&!P&&(se=t(se,1/0));var me=ie.length+se.length+be.length,Ee=me<M?new Array(M-me+1).join(S):"";switch(L&&P&&(se=t(Ee+se,Ee.length?M-be.length:1/0),Ee=""),A){case"<":se=ie+se+be+Ee;break;case"=":se=ie+Ee+se+be;break;case"^":se=Ee.slice(0,me=Ee.length>>1)+ie+se+be+Ee.slice(me);break;default:se=Ee+ie+se+be;break}return s(se)}return we.toString=function(){return b+""},we}function v(b,S){var A=m((b=vd(b),b.type="f",b)),O=Math.max(-8,Math.min(8,Math.floor(kc(S)/3)))*3,I=Math.pow(10,-O),P=o_[8+O/3];return function(M){return A(I*M)+P}}return{format:m,formatPrefix:v}}var _h,Jy,yT;Zz({thousands:",",grouping:[3],currency:["$",""]});function Zz(e){return _h=Yz(e),Jy=_h.format,yT=_h.formatPrefix,_h}function Qz(e){return Math.max(0,-kc(Math.abs(e)))}function Jz(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(kc(t)/3)))*3-kc(Math.abs(e)))}function e$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,kc(t)-kc(e))+1}function wT(e,t,r,n){var i=Iv(e,t,r),s;switch(n=vd(n??",f"),n.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=Jz(i,c))&&(n.precision=s),yT(n,c)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=e$(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=Qz(i))&&(n.precision=s-(n.type==="%")*2);break}}return Jy(n)}function So(e){var t=e.domain;return e.ticks=function(r){var n=t();return Nv(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return wT(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,c=n[i],f=n[s],p,m,v=10;for(f<c&&(m=c,c=f,f=m,m=i,i=s,s=m);v-- >0;){if(m=Ov(c,f,r),m===p)return n[i]=c,n[s]=f,t(n);if(m>0)c=Math.floor(c/m)*m,f=Math.ceil(f/m)*m;else if(m<0)c=Math.ceil(c*m)/m,f=Math.floor(f*m)/m;else break;p=m}return e},e}function bT(){var e=Zy();return e.copy=function(){return Bd(e,bT())},fa.apply(e,arguments),So(e)}function ET(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,M0),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return ET(e).unknown(t)},e=arguments.length?Array.from(e,M0):[0,1],So(r)}function ST(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],c;return s<i&&(c=r,r=n,n=c,c=i,i=s,s=c),e[r]=t.floor(i),e[n]=t.ceil(s),e}function l_(e){return Math.log(e)}function c_(e){return Math.exp(e)}function t$(e){return-Math.log(-e)}function r$(e){return-Math.exp(-e)}function n$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function i$(e){return e===10?n$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function a$(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function u_(e){return(t,r)=>-e(-t,r)}function ew(e){const t=e(l_,c_),r=t.domain;let n=10,i,s;function c(){return i=a$(n),s=i$(n),r()[0]<0?(i=u_(i),s=u_(s),e(t$,r$)):e(l_,c_),t}return t.base=function(f){return arguments.length?(n=+f,c()):n},t.domain=function(f){return arguments.length?(r(f),c()):r()},t.ticks=f=>{const p=r();let m=p[0],v=p[p.length-1];const b=v<m;b&&([m,v]=[v,m]);let S=i(m),A=i(v),O,I;const P=f==null?10:+f;let M=[];if(!(n%1)&&A-S<P){if(S=Math.floor(S),A=Math.ceil(A),m>0){for(;S<=A;++S)for(O=1;O<n;++O)if(I=S<0?O/s(-S):O*s(S),!(I<m)){if(I>v)break;M.push(I)}}else for(;S<=A;++S)for(O=n-1;O>=1;--O)if(I=S>0?O/s(-S):O*s(S),!(I<m)){if(I>v)break;M.push(I)}M.length*2<P&&(M=Nv(m,v,P))}else M=Nv(S,A,Math.min(A-S,P)).map(s);return b?M.reverse():M},t.tickFormat=(f,p)=>{if(f==null&&(f=10),p==null&&(p=n===10?"s":","),typeof p!="function"&&(!(n%1)&&(p=vd(p)).precision==null&&(p.trim=!0),p=Jy(p)),f===1/0)return p;const m=Math.max(1,n*f/t.ticks().length);return v=>{let b=v/s(Math.round(i(v)));return b*n<n-.5&&(b*=n),b<=m?p(v):""}},t.nice=()=>r(ST(r(),{floor:f=>s(Math.floor(i(f))),ceil:f=>s(Math.ceil(i(f)))})),t}function CT(){const e=ew(Lp()).domain([1,10]);return e.copy=()=>Bd(e,CT()).base(e.base()),fa.apply(e,arguments),e}function d_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function f_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function tw(e){var t=1,r=e(d_(t),f_(t));return r.constant=function(n){return arguments.length?e(d_(t=+n),f_(t)):t},So(r)}function AT(){var e=tw(Lp());return e.copy=function(){return Bd(e,AT()).constant(e.constant())},fa.apply(e,arguments)}function h_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function s$(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function o$(e){return e<0?-e*e:e*e}function rw(e){var t=e(li,li),r=1;function n(){return r===1?e(li,li):r===.5?e(s$,o$):e(h_(r),h_(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},So(t)}function nw(){var e=rw(Lp());return e.copy=function(){return Bd(e,nw()).exponent(e.exponent())},fa.apply(e,arguments),e}function l$(){return nw.apply(null,arguments).exponent(.5)}function p_(e){return Math.sign(e)*e*e}function c$(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function _T(){var e=Zy(),t=[0,1],r=!1,n;function i(s){var c=c$(e(s));return isNaN(c)?n:r?Math.round(c):c}return i.invert=function(s){return e.invert(p_(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,M0)).map(p_)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return _T(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},fa.apply(i,arguments),So(i)}function NT(){var e=[],t=[],r=[],n;function i(){var c=0,f=Math.max(1,t.length);for(r=new Array(f-1);++c<f;)r[c-1]=hz(e,c/f);return s}function s(c){return c==null||isNaN(c=+c)?n:t[Dd(r,c)]}return s.invertExtent=function(c){var f=t.indexOf(c);return f<0?[NaN,NaN]:[f>0?r[f-1]:e[0],f<r.length?r[f]:e[e.length-1]]},s.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let f of c)f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(xo),i()},s.range=function(c){return arguments.length?(t=Array.from(c),i()):t.slice()},s.unknown=function(c){return arguments.length?(n=c,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return NT().domain(e).range(t).unknown(n)},fa.apply(s,arguments)}function OT(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function c(p){return p!=null&&p<=p?i[Dd(n,p,0,r)]:s}function f(){var p=-1;for(n=new Array(r);++p<r;)n[p]=((p+1)*t-(p-r)*e)/(r+1);return c}return c.domain=function(p){return arguments.length?([e,t]=p,e=+e,t=+t,f()):[e,t]},c.range=function(p){return arguments.length?(r=(i=Array.from(p)).length-1,f()):i.slice()},c.invertExtent=function(p){var m=i.indexOf(p);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},c.unknown=function(p){return arguments.length&&(s=p),c},c.thresholds=function(){return n.slice()},c.copy=function(){return OT().domain([e,t]).range(i).unknown(s)},fa.apply(So(c),arguments)}function IT(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[Dd(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var c=t.indexOf(s);return[e[c-1],e[c]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return IT().domain(e).range(t).unknown(r)},fa.apply(i,arguments)}const ox=new Date,lx=new Date;function xn(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const c=i(s),f=i.ceil(s);return s-c<f-s?c:f},i.offset=(s,c)=>(t(s=new Date(+s),c==null?1:Math.floor(c)),s),i.range=(s,c,f)=>{const p=[];if(s=i.ceil(s),f=f==null?1:Math.floor(f),!(s<c)||!(f>0))return p;let m;do p.push(m=new Date(+s)),t(s,f),e(s);while(m<s&&s<c);return p},i.filter=s=>xn(c=>{if(c>=c)for(;e(c),!s(c);)c.setTime(c-1)},(c,f)=>{if(c>=c)if(f<0)for(;++f<=0;)for(;t(c,-1),!s(c););else for(;--f>=0;)for(;t(c,1),!s(c););}),r&&(i.count=(s,c)=>(ox.setTime(+s),lx.setTime(+c),e(ox),e(lx),Math.floor(r(ox,lx))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?c=>n(c)%s===0:c=>i.count(0,c)%s===0):i)),i}const L0=xn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);L0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?xn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):L0);L0.range;const bs=1e3,oa=bs*60,Es=oa*60,Is=Es*24,iw=Is*7,m_=Is*30,cx=Is*365,ll=xn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*bs)},(e,t)=>(t-e)/bs,e=>e.getUTCSeconds());ll.range;const aw=xn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bs)},(e,t)=>{e.setTime(+e+t*oa)},(e,t)=>(t-e)/oa,e=>e.getMinutes());aw.range;const sw=xn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*oa)},(e,t)=>(t-e)/oa,e=>e.getUTCMinutes());sw.range;const ow=xn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bs-e.getMinutes()*oa)},(e,t)=>{e.setTime(+e+t*Es)},(e,t)=>(t-e)/Es,e=>e.getHours());ow.range;const lw=xn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Es)},(e,t)=>(t-e)/Es,e=>e.getUTCHours());lw.range;const Fd=xn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*oa)/Is,e=>e.getDate()-1);Fd.range;const Bp=xn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Is,e=>e.getUTCDate()-1);Bp.range;const TT=xn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Is,e=>Math.floor(e/Is));TT.range;function Nl(e){return xn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*oa)/iw)}const Fp=Nl(0),B0=Nl(1),u$=Nl(2),d$=Nl(3),Pc=Nl(4),f$=Nl(5),h$=Nl(6);Fp.range;B0.range;u$.range;d$.range;Pc.range;f$.range;h$.range;function Ol(e){return xn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/iw)}const Up=Ol(0),F0=Ol(1),p$=Ol(2),m$=Ol(3),jc=Ol(4),g$=Ol(5),x$=Ol(6);Up.range;F0.range;p$.range;m$.range;jc.range;g$.range;x$.range;const cw=xn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());cw.range;const uw=xn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());uw.range;const Ts=xn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ts.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ts.range;const ks=xn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ks.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ks.range;function kT(e,t,r,n,i,s){const c=[[ll,1,bs],[ll,5,5*bs],[ll,15,15*bs],[ll,30,30*bs],[s,1,oa],[s,5,5*oa],[s,15,15*oa],[s,30,30*oa],[i,1,Es],[i,3,3*Es],[i,6,6*Es],[i,12,12*Es],[n,1,Is],[n,2,2*Is],[r,1,iw],[t,1,m_],[t,3,3*m_],[e,1,cx]];function f(m,v,b){const S=v<m;S&&([m,v]=[v,m]);const A=b&&typeof b.range=="function"?b:p(m,v,b),O=A?A.range(m,+v+1):[];return S?O.reverse():O}function p(m,v,b){const S=Math.abs(v-m)/b,A=Hy(([,,P])=>P).right(c,S);if(A===c.length)return e.every(Iv(m/cx,v/cx,b));if(A===0)return L0.every(Math.max(Iv(m,v,b),1));const[O,I]=c[S/c[A-1][2]<c[A][2]/S?A-1:A];return O.every(I)}return[f,p]}const[v$,y$]=kT(ks,uw,Up,TT,lw,sw),[w$,b$]=kT(Ts,cw,Fp,Fd,ow,aw);function ux(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function dx(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function zu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function E$(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,c=e.shortDays,f=e.months,p=e.shortMonths,m=$u(i),v=Wu(i),b=$u(s),S=Wu(s),A=$u(c),O=Wu(c),I=$u(f),P=Wu(f),M=$u(p),L=Wu(p),R={a:le,A:me,b:Ee,B:Ae,c:null,d:b_,e:b_,f:H$,g:tW,G:nW,H:$$,I:W$,j:V$,L:PT,m:q$,M:G$,p:J,q:de,Q:C_,s:A_,S:K$,u:X$,U:Y$,V:Z$,w:Q$,W:J$,x:null,X:null,y:eW,Y:rW,Z:iW,"%":S_},U={a:$e,A:Ue,b:Xe,B:Z,c:null,d:E_,e:E_,f:lW,g:vW,G:wW,H:aW,I:sW,j:oW,L:RT,m:cW,M:uW,p:_e,q:fe,Q:C_,s:A_,S:dW,u:fW,U:hW,V:pW,w:mW,W:gW,x:null,X:null,y:xW,Y:yW,Z:bW,"%":S_},W={a:we,A:se,b:ie,B:be,c:Ce,d:y_,e:y_,f:B$,g:v_,G:x_,H:w_,I:w_,j:R$,L:L$,m:j$,M:M$,p:Y,q:P$,Q:U$,s:z$,S:D$,u:N$,U:O$,V:I$,w:_$,W:T$,x:re,X:ze,y:v_,Y:x_,Z:k$,"%":F$};R.x=V(r,R),R.X=V(n,R),R.c=V(t,R),U.x=V(r,U),U.X=V(n,U),U.c=V(t,U);function V(ae,je){return function(De){var ye=[],Be=-1,Qe=0,_t=ae.length,Ft,Pt,Ct;for(De instanceof Date||(De=new Date(+De));++Be<_t;)ae.charCodeAt(Be)===37&&(ye.push(ae.slice(Qe,Be)),(Pt=g_[Ft=ae.charAt(++Be)])!=null?Ft=ae.charAt(++Be):Pt=Ft==="e"?" ":"0",(Ct=je[Ft])&&(Ft=Ct(De,Pt)),ye.push(Ft),Qe=Be+1);return ye.push(ae.slice(Qe,Be)),ye.join("")}}function H(ae,je){return function(De){var ye=zu(1900,void 0,1),Be=X(ye,ae,De+="",0),Qe,_t;if(Be!=De.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(je&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(Qe=dx(zu(ye.y,0,1)),_t=Qe.getUTCDay(),Qe=_t>4||_t===0?F0.ceil(Qe):F0(Qe),Qe=Bp.offset(Qe,(ye.V-1)*7),ye.y=Qe.getUTCFullYear(),ye.m=Qe.getUTCMonth(),ye.d=Qe.getUTCDate()+(ye.w+6)%7):(Qe=ux(zu(ye.y,0,1)),_t=Qe.getDay(),Qe=_t>4||_t===0?B0.ceil(Qe):B0(Qe),Qe=Fd.offset(Qe,(ye.V-1)*7),ye.y=Qe.getFullYear(),ye.m=Qe.getMonth(),ye.d=Qe.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),_t="Z"in ye?dx(zu(ye.y,0,1)).getUTCDay():ux(zu(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(_t+5)%7:ye.w+ye.U*7-(_t+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,dx(ye)):ux(ye)}}function X(ae,je,De,ye){for(var Be=0,Qe=je.length,_t=De.length,Ft,Pt;Be<Qe;){if(ye>=_t)return-1;if(Ft=je.charCodeAt(Be++),Ft===37){if(Ft=je.charAt(Be++),Pt=W[Ft in g_?je.charAt(Be++):Ft],!Pt||(ye=Pt(ae,De,ye))<0)return-1}else if(Ft!=De.charCodeAt(ye++))return-1}return ye}function Y(ae,je,De){var ye=m.exec(je.slice(De));return ye?(ae.p=v.get(ye[0].toLowerCase()),De+ye[0].length):-1}function we(ae,je,De){var ye=A.exec(je.slice(De));return ye?(ae.w=O.get(ye[0].toLowerCase()),De+ye[0].length):-1}function se(ae,je,De){var ye=b.exec(je.slice(De));return ye?(ae.w=S.get(ye[0].toLowerCase()),De+ye[0].length):-1}function ie(ae,je,De){var ye=M.exec(je.slice(De));return ye?(ae.m=L.get(ye[0].toLowerCase()),De+ye[0].length):-1}function be(ae,je,De){var ye=I.exec(je.slice(De));return ye?(ae.m=P.get(ye[0].toLowerCase()),De+ye[0].length):-1}function Ce(ae,je,De){return X(ae,t,je,De)}function re(ae,je,De){return X(ae,r,je,De)}function ze(ae,je,De){return X(ae,n,je,De)}function le(ae){return c[ae.getDay()]}function me(ae){return s[ae.getDay()]}function Ee(ae){return p[ae.getMonth()]}function Ae(ae){return f[ae.getMonth()]}function J(ae){return i[+(ae.getHours()>=12)]}function de(ae){return 1+~~(ae.getMonth()/3)}function $e(ae){return c[ae.getUTCDay()]}function Ue(ae){return s[ae.getUTCDay()]}function Xe(ae){return p[ae.getUTCMonth()]}function Z(ae){return f[ae.getUTCMonth()]}function _e(ae){return i[+(ae.getUTCHours()>=12)]}function fe(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var je=V(ae+="",R);return je.toString=function(){return ae},je},parse:function(ae){var je=H(ae+="",!1);return je.toString=function(){return ae},je},utcFormat:function(ae){var je=V(ae+="",U);return je.toString=function(){return ae},je},utcParse:function(ae){var je=H(ae+="",!0);return je.toString=function(){return ae},je}}}var g_={"-":"",_:" ",0:"0"},Tn=/^\s*\d+/,S$=/^%/,C$=/[\\^$*+?|[\]().{}]/g;function zt(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function A$(e){return e.replace(C$,"\\$&")}function $u(e){return new RegExp("^(?:"+e.map(A$).join("|")+")","i")}function Wu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function _$(e,t,r){var n=Tn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function N$(e,t,r){var n=Tn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function O$(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function I$(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function T$(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function x_(e,t,r){var n=Tn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function v_(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function k$(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function P$(e,t,r){var n=Tn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function j$(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function y_(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function R$(e,t,r){var n=Tn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function w_(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function M$(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function D$(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function L$(e,t,r){var n=Tn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function B$(e,t,r){var n=Tn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function F$(e,t,r){var n=S$.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function U$(e,t,r){var n=Tn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function z$(e,t,r){var n=Tn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function b_(e,t){return zt(e.getDate(),t,2)}function $$(e,t){return zt(e.getHours(),t,2)}function W$(e,t){return zt(e.getHours()%12||12,t,2)}function V$(e,t){return zt(1+Fd.count(Ts(e),e),t,3)}function PT(e,t){return zt(e.getMilliseconds(),t,3)}function H$(e,t){return PT(e,t)+"000"}function q$(e,t){return zt(e.getMonth()+1,t,2)}function G$(e,t){return zt(e.getMinutes(),t,2)}function K$(e,t){return zt(e.getSeconds(),t,2)}function X$(e){var t=e.getDay();return t===0?7:t}function Y$(e,t){return zt(Fp.count(Ts(e)-1,e),t,2)}function jT(e){var t=e.getDay();return t>=4||t===0?Pc(e):Pc.ceil(e)}function Z$(e,t){return e=jT(e),zt(Pc.count(Ts(e),e)+(Ts(e).getDay()===4),t,2)}function Q$(e){return e.getDay()}function J$(e,t){return zt(B0.count(Ts(e)-1,e),t,2)}function eW(e,t){return zt(e.getFullYear()%100,t,2)}function tW(e,t){return e=jT(e),zt(e.getFullYear()%100,t,2)}function rW(e,t){return zt(e.getFullYear()%1e4,t,4)}function nW(e,t){var r=e.getDay();return e=r>=4||r===0?Pc(e):Pc.ceil(e),zt(e.getFullYear()%1e4,t,4)}function iW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+zt(t/60|0,"0",2)+zt(t%60,"0",2)}function E_(e,t){return zt(e.getUTCDate(),t,2)}function aW(e,t){return zt(e.getUTCHours(),t,2)}function sW(e,t){return zt(e.getUTCHours()%12||12,t,2)}function oW(e,t){return zt(1+Bp.count(ks(e),e),t,3)}function RT(e,t){return zt(e.getUTCMilliseconds(),t,3)}function lW(e,t){return RT(e,t)+"000"}function cW(e,t){return zt(e.getUTCMonth()+1,t,2)}function uW(e,t){return zt(e.getUTCMinutes(),t,2)}function dW(e,t){return zt(e.getUTCSeconds(),t,2)}function fW(e){var t=e.getUTCDay();return t===0?7:t}function hW(e,t){return zt(Up.count(ks(e)-1,e),t,2)}function MT(e){var t=e.getUTCDay();return t>=4||t===0?jc(e):jc.ceil(e)}function pW(e,t){return e=MT(e),zt(jc.count(ks(e),e)+(ks(e).getUTCDay()===4),t,2)}function mW(e){return e.getUTCDay()}function gW(e,t){return zt(F0.count(ks(e)-1,e),t,2)}function xW(e,t){return zt(e.getUTCFullYear()%100,t,2)}function vW(e,t){return e=MT(e),zt(e.getUTCFullYear()%100,t,2)}function yW(e,t){return zt(e.getUTCFullYear()%1e4,t,4)}function wW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?jc(e):jc.ceil(e),zt(e.getUTCFullYear()%1e4,t,4)}function bW(){return"+0000"}function S_(){return"%"}function C_(e){return+e}function A_(e){return Math.floor(+e/1e3)}var oc,DT,LT;EW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function EW(e){return oc=E$(e),DT=oc.format,oc.parse,LT=oc.utcFormat,oc.utcParse,oc}function SW(e){return new Date(e)}function CW(e){return e instanceof Date?+e:+new Date(+e)}function dw(e,t,r,n,i,s,c,f,p,m){var v=Zy(),b=v.invert,S=v.domain,A=m(".%L"),O=m(":%S"),I=m("%I:%M"),P=m("%I %p"),M=m("%a %d"),L=m("%b %d"),R=m("%B"),U=m("%Y");function W(V){return(p(V)<V?A:f(V)<V?O:c(V)<V?I:s(V)<V?P:n(V)<V?i(V)<V?M:L:r(V)<V?R:U)(V)}return v.invert=function(V){return new Date(b(V))},v.domain=function(V){return arguments.length?S(Array.from(V,CW)):S().map(SW)},v.ticks=function(V){var H=S();return e(H[0],H[H.length-1],V??10)},v.tickFormat=function(V,H){return H==null?W:m(H)},v.nice=function(V){var H=S();return(!V||typeof V.range!="function")&&(V=t(H[0],H[H.length-1],V??10)),V?S(ST(H,V)):v},v.copy=function(){return Bd(v,dw(e,t,r,n,i,s,c,f,p,m))},v}function AW(){return fa.apply(dw(w$,b$,Ts,cw,Fp,Fd,ow,aw,ll,DT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _W(){return fa.apply(dw(v$,y$,ks,uw,Up,Bp,lw,sw,ll,LT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zp(){var e=0,t=1,r,n,i,s,c=li,f=!1,p;function m(b){return b==null||isNaN(b=+b)?p:c(i===0?.5:(b=(s(b)-r)*i,f?Math.max(0,Math.min(1,b)):b))}m.domain=function(b){return arguments.length?([e,t]=b,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(b){return arguments.length?(f=!!b,m):f},m.interpolator=function(b){return arguments.length?(c=b,m):c};function v(b){return function(S){var A,O;return arguments.length?([A,O]=S,c=b(A,O),m):[c(0),c(1)]}}return m.range=v(Wc),m.rangeRound=v(Yy),m.unknown=function(b){return arguments.length?(p=b,m):p},function(b){return s=b,r=b(e),n=b(t),i=r===n?0:1/(n-r),m}}function Co(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function BT(){var e=So(zp()(li));return e.copy=function(){return Co(e,BT())},Ls.apply(e,arguments)}function FT(){var e=ew(zp()).domain([1,10]);return e.copy=function(){return Co(e,FT()).base(e.base())},Ls.apply(e,arguments)}function UT(){var e=tw(zp());return e.copy=function(){return Co(e,UT()).constant(e.constant())},Ls.apply(e,arguments)}function fw(){var e=rw(zp());return e.copy=function(){return Co(e,fw()).exponent(e.exponent())},Ls.apply(e,arguments)}function NW(){return fw.apply(null,arguments).exponent(.5)}function zT(){var e=[],t=li;function r(n){if(n!=null&&!isNaN(n=+n))return t((Dd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(xo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>fz(e,s/n))},r.copy=function(){return zT(t).domain(e)},Ls.apply(r,arguments)}function $p(){var e=0,t=.5,r=1,n=1,i,s,c,f,p,m=li,v,b=!1,S;function A(I){return isNaN(I=+I)?S:(I=.5+((I=+v(I))-s)*(n*I<n*s?f:p),m(b?Math.max(0,Math.min(1,I)):I))}A.domain=function(I){return arguments.length?([e,t,r]=I,i=v(e=+e),s=v(t=+t),c=v(r=+r),f=i===s?0:.5/(s-i),p=s===c?0:.5/(c-s),n=s<i?-1:1,A):[e,t,r]},A.clamp=function(I){return arguments.length?(b=!!I,A):b},A.interpolator=function(I){return arguments.length?(m=I,A):m};function O(I){return function(P){var M,L,R;return arguments.length?([M,L,R]=P,m=Fz(I,[M,L,R]),A):[m(0),m(.5),m(1)]}}return A.range=O(Wc),A.rangeRound=O(Yy),A.unknown=function(I){return arguments.length?(S=I,A):S},function(I){return v=I,i=I(e),s=I(t),c=I(r),f=i===s?0:.5/(s-i),p=s===c?0:.5/(c-s),n=s<i?-1:1,A}}function $T(){var e=So($p()(li));return e.copy=function(){return Co(e,$T())},Ls.apply(e,arguments)}function WT(){var e=ew($p()).domain([.1,1,10]);return e.copy=function(){return Co(e,WT()).base(e.base())},Ls.apply(e,arguments)}function VT(){var e=tw($p());return e.copy=function(){return Co(e,VT()).constant(e.constant())},Ls.apply(e,arguments)}function hw(){var e=rw($p());return e.copy=function(){return Co(e,hw()).exponent(e.exponent())},Ls.apply(e,arguments)}function OW(){return hw.apply(null,arguments).exponent(.5)}const Yu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Gy,scaleDiverging:$T,scaleDivergingLog:WT,scaleDivergingPow:hw,scaleDivergingSqrt:OW,scaleDivergingSymlog:VT,scaleIdentity:ET,scaleImplicit:Tv,scaleLinear:bT,scaleLog:CT,scaleOrdinal:qy,scalePoint:mz,scalePow:nw,scaleQuantile:NT,scaleQuantize:OT,scaleRadial:_T,scaleSequential:BT,scaleSequentialLog:FT,scaleSequentialPow:fw,scaleSequentialQuantile:zT,scaleSequentialSqrt:NW,scaleSequentialSymlog:UT,scaleSqrt:l$,scaleSymlog:AT,scaleThreshold:IT,scaleTime:AW,scaleUtc:_W,tickFormat:wT},Symbol.toStringTag,{value:"Module"}));var Bs=e=>e.chartData,Wp=pe([Bs],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),pw=(e,t,r,n)=>n?Wp(e):Bs(e),IW=(e,t,r)=>r?Wp(e):Bs(e);function vo(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(ar(t)&&ar(r))return!0}return!1}function __(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function HT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,s;if(ar(r))i=r;else if(typeof r=="function")return;if(ar(n))s=n;else if(typeof n=="function")return;var c=[i,s];if(vo(c))return c}}function TW(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(vo(n))return __(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,c,f;if(i==="auto")t!=null&&(c=Math.min(...t));else if(at(i))c=i;else if(typeof i=="function")try{t!=null&&(c=i(t?.[0]))}catch{}else if(typeof i=="string"&&LC.test(i)){var p=LC.exec(i);if(p==null||p[1]==null||t==null)c=void 0;else{var m=+p[1];c=t[0]-m}}else c=t?.[0];if(s==="auto")t!=null&&(f=Math.max(...t));else if(at(s))f=s;else if(typeof s=="function")try{t!=null&&(f=s(t?.[1]))}catch{}else if(typeof s=="string"&&BC.test(s)){var v=BC.exec(s);if(v==null||v[1]==null||t==null)f=void 0;else{var b=+v[1];f=t[1]+b}}else f=t?.[1];var S=[c,f];if(vo(S))return t==null?S:__(S,t,r)}}}var Vc=1e9,kW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},gw,Ir=!0,ua="[DecimalError] ",fl=ua+"Invalid argument: ",mw=ua+"Exponent out of range: ",Hc=Math.floor,rl=Math.pow,PW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Bi,On=1e7,yr=7,qT=9007199254740991,U0=Hc(qT/yr),tt={};tt.absoluteValue=tt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};tt.comparedTo=tt.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};tt.decimalPlaces=tt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*yr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};tt.dividedBy=tt.div=function(e){return Cs(this,new this.constructor(e))};tt.dividedToIntegerBy=tt.idiv=function(e){var t=this,r=t.constructor;return sr(Cs(t,new r(e),0,1),r.precision)};tt.equals=tt.eq=function(e){return!this.cmp(e)};tt.exponent=function(){return on(this)};tt.greaterThan=tt.gt=function(e){return this.cmp(e)>0};tt.greaterThanOrEqualTo=tt.gte=function(e){return this.cmp(e)>=0};tt.isInteger=tt.isint=function(){return this.e>this.d.length-2};tt.isNegative=tt.isneg=function(){return this.s<0};tt.isPositive=tt.ispos=function(){return this.s>0};tt.isZero=function(){return this.s===0};tt.lessThan=tt.lt=function(e){return this.cmp(e)<0};tt.lessThanOrEqualTo=tt.lte=function(e){return this.cmp(e)<1};tt.logarithm=tt.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Bi))throw Error(ua+"NaN");if(r.s<1)throw Error(ua+(r.s?"NaN":"-Infinity"));return r.eq(Bi)?new n(0):(Ir=!1,t=Cs(yd(r,s),yd(e,s),s),Ir=!0,sr(t,i))};tt.minus=tt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XT(t,e):GT(t,(e.s=-e.s,e))};tt.modulo=tt.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(ua+"NaN");return r.s?(Ir=!1,t=Cs(r,e,0,1).times(e),Ir=!0,r.minus(t)):sr(new n(r),i)};tt.naturalExponential=tt.exp=function(){return KT(this)};tt.naturalLogarithm=tt.ln=function(){return yd(this)};tt.negated=tt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};tt.plus=tt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?GT(t,e):XT(t,(e.s=-e.s,e))};tt.precision=tt.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(fl+e);if(t=on(i)+1,n=i.d.length-1,r=n*yr+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};tt.squareRoot=tt.sqrt=function(){var e,t,r,n,i,s,c,f=this,p=f.constructor;if(f.s<1){if(!f.s)return new p(0);throw Error(ua+"NaN")}for(e=on(f),Ir=!1,i=Math.sqrt(+f),i==0||i==1/0?(t=Ha(f.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Hc((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new p(t)):n=new p(i.toString()),r=p.precision,i=c=r+3;;)if(s=n,n=s.plus(Cs(f,s,c+2)).times(.5),Ha(s.d).slice(0,c)===(t=Ha(n.d)).slice(0,c)){if(t=t.slice(c-3,c+1),i==c&&t=="4999"){if(sr(s,r+1,0),s.times(s).eq(f)){n=s;break}}else if(t!="9999")break;c+=4}return Ir=!0,sr(n,r)};tt.times=tt.mul=function(e){var t,r,n,i,s,c,f,p,m,v=this,b=v.constructor,S=v.d,A=(e=new b(e)).d;if(!v.s||!e.s)return new b(0);for(e.s*=v.s,r=v.e+e.e,p=S.length,m=A.length,p<m&&(s=S,S=A,A=s,c=p,p=m,m=c),s=[],c=p+m,n=c;n--;)s.push(0);for(n=m;--n>=0;){for(t=0,i=p+n;i>n;)f=s[i]+A[n]*S[i-n-1]+t,s[i--]=f%On|0,t=f/On|0;s[i]=(s[i]+t)%On|0}for(;!s[--c];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Ir?sr(e,b.precision):e};tt.toDecimalPlaces=tt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Xa(e,0,Vc),t===void 0?t=n.rounding:Xa(t,0,8),sr(r,e+on(r)+1,t))};tt.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=wl(n,!0):(Xa(e,0,Vc),t===void 0?t=i.rounding:Xa(t,0,8),n=sr(new i(n),e+1,t),r=wl(n,!0,e+1)),r};tt.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?wl(i):(Xa(e,0,Vc),t===void 0?t=s.rounding:Xa(t,0,8),n=sr(new s(i),e+on(i)+1,t),r=wl(n.abs(),!1,e+on(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};tt.toInteger=tt.toint=function(){var e=this,t=e.constructor;return sr(new t(e),on(e)+1,t.rounding)};tt.toNumber=function(){return+this};tt.toPower=tt.pow=function(e){var t,r,n,i,s,c,f=this,p=f.constructor,m=12,v=+(e=new p(e));if(!e.s)return new p(Bi);if(f=new p(f),!f.s){if(e.s<1)throw Error(ua+"Infinity");return f}if(f.eq(Bi))return f;if(n=p.precision,e.eq(Bi))return sr(f,n);if(t=e.e,r=e.d.length-1,c=t>=r,s=f.s,c){if((r=v<0?-v:v)<=qT){for(i=new p(Bi),t=Math.ceil(n/yr+4),Ir=!1;r%2&&(i=i.times(f),O_(i.d,t)),r=Hc(r/2),r!==0;)f=f.times(f),O_(f.d,t);return Ir=!0,e.s<0?new p(Bi).div(i):sr(i,n)}}else if(s<0)throw Error(ua+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,f.s=1,Ir=!1,i=e.times(yd(f,n+m)),Ir=!0,i=KT(i),i.s=s,i};tt.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=on(i),n=wl(i,r<=s.toExpNeg||r>=s.toExpPos)):(Xa(e,1,Vc),t===void 0?t=s.rounding:Xa(t,0,8),i=sr(new s(i),e,t),r=on(i),n=wl(i,e<=r||r<=s.toExpNeg,e)),n};tt.toSignificantDigits=tt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Xa(e,1,Vc),t===void 0?t=n.rounding:Xa(t,0,8)),sr(new n(r),e,t)};tt.toString=tt.valueOf=tt.val=tt.toJSON=tt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=on(e),r=e.constructor;return wl(e,t<=r.toExpNeg||t>=r.toExpPos)};function GT(e,t){var r,n,i,s,c,f,p,m,v=e.constructor,b=v.precision;if(!e.s||!t.s)return t.s||(t=new v(e)),Ir?sr(t,b):t;if(p=e.d,m=t.d,c=e.e,i=t.e,p=p.slice(),s=c-i,s){for(s<0?(n=p,s=-s,f=m.length):(n=m,i=c,f=p.length),c=Math.ceil(b/yr),f=c>f?c+1:f+1,s>f&&(s=f,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(f=p.length,s=m.length,f-s<0&&(s=f,n=m,m=p,p=n),r=0;s;)r=(p[--s]=p[s]+m[s]+r)/On|0,p[s]%=On;for(r&&(p.unshift(r),++i),f=p.length;p[--f]==0;)p.pop();return t.d=p,t.e=i,Ir?sr(t,b):t}function Xa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(fl+e)}function Ha(e){var t,r,n,i=e.length-1,s="",c=e[0];if(i>0){for(s+=c,t=1;t<i;t++)n=e[t]+"",r=yr-n.length,r&&(s+=uo(r)),s+=n;c=e[t],n=c+"",r=yr-n.length,r&&(s+=uo(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}var Cs=(function(){function e(n,i){var s,c=0,f=n.length;for(n=n.slice();f--;)s=n[f]*i+c,n[f]=s%On|0,c=s/On|0;return c&&n.unshift(c),n}function t(n,i,s,c){var f,p;if(s!=c)p=s>c?1:-1;else for(f=p=0;f<s;f++)if(n[f]!=i[f]){p=n[f]>i[f]?1:-1;break}return p}function r(n,i,s){for(var c=0;s--;)n[s]-=c,c=n[s]<i[s]?1:0,n[s]=c*On+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,c){var f,p,m,v,b,S,A,O,I,P,M,L,R,U,W,V,H,X,Y=n.constructor,we=n.s==i.s?1:-1,se=n.d,ie=i.d;if(!n.s)return new Y(n);if(!i.s)throw Error(ua+"Division by zero");for(p=n.e-i.e,H=ie.length,W=se.length,A=new Y(we),O=A.d=[],m=0;ie[m]==(se[m]||0);)++m;if(ie[m]>(se[m]||0)&&--p,s==null?L=s=Y.precision:c?L=s+(on(n)-on(i))+1:L=s,L<0)return new Y(0);if(L=L/yr+2|0,m=0,H==1)for(v=0,ie=ie[0],L++;(m<W||v)&&L--;m++)R=v*On+(se[m]||0),O[m]=R/ie|0,v=R%ie|0;else{for(v=On/(ie[0]+1)|0,v>1&&(ie=e(ie,v),se=e(se,v),H=ie.length,W=se.length),U=H,I=se.slice(0,H),P=I.length;P<H;)I[P++]=0;X=ie.slice(),X.unshift(0),V=ie[0],ie[1]>=On/2&&++V;do v=0,f=t(ie,I,H,P),f<0?(M=I[0],H!=P&&(M=M*On+(I[1]||0)),v=M/V|0,v>1?(v>=On&&(v=On-1),b=e(ie,v),S=b.length,P=I.length,f=t(b,I,S,P),f==1&&(v--,r(b,H<S?X:ie,S))):(v==0&&(f=v=1),b=ie.slice()),S=b.length,S<P&&b.unshift(0),r(I,b,P),f==-1&&(P=I.length,f=t(ie,I,H,P),f<1&&(v++,r(I,H<P?X:ie,P))),P=I.length):f===0&&(v++,I=[0]),O[m++]=v,f&&I[0]?I[P++]=se[U]||0:(I=[se[U]],P=1);while((U++<W||I[0]!==void 0)&&L--)}return O[0]||O.shift(),A.e=p,sr(A,c?s+on(A)+1:s)}})();function KT(e,t){var r,n,i,s,c,f,p=0,m=0,v=e.constructor,b=v.precision;if(on(e)>16)throw Error(mw+on(e));if(!e.s)return new v(Bi);for(Ir=!1,f=b,c=new v(.03125);e.abs().gte(.1);)e=e.times(c),m+=5;for(n=Math.log(rl(2,m))/Math.LN10*2+5|0,f+=n,r=i=s=new v(Bi),v.precision=f;;){if(i=sr(i.times(e),f),r=r.times(++p),c=s.plus(Cs(i,r,f)),Ha(c.d).slice(0,f)===Ha(s.d).slice(0,f)){for(;m--;)s=sr(s.times(s),f);return v.precision=b,t==null?(Ir=!0,sr(s,b)):s}s=c}}function on(e){for(var t=e.e*yr,r=e.d[0];r>=10;r/=10)t++;return t}function fx(e,t,r){if(t>e.LN10.sd())throw Ir=!0,r&&(e.precision=r),Error(ua+"LN10 precision limit exceeded");return sr(new e(e.LN10),t)}function uo(e){for(var t="";e--;)t+="0";return t}function yd(e,t){var r,n,i,s,c,f,p,m,v,b=1,S=10,A=e,O=A.d,I=A.constructor,P=I.precision;if(A.s<1)throw Error(ua+(A.s?"NaN":"-Infinity"));if(A.eq(Bi))return new I(0);if(t==null?(Ir=!1,m=P):m=t,A.eq(10))return t==null&&(Ir=!0),fx(I,m);if(m+=S,I.precision=m,r=Ha(O),n=r.charAt(0),s=on(A),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)A=A.times(e),r=Ha(A.d),n=r.charAt(0),b++;s=on(A),n>1?(A=new I("0."+r),s++):A=new I(n+"."+r.slice(1))}else return p=fx(I,m+2,P).times(s+""),A=yd(new I(n+"."+r.slice(1)),m-S).plus(p),I.precision=P,t==null?(Ir=!0,sr(A,P)):A;for(f=c=A=Cs(A.minus(Bi),A.plus(Bi),m),v=sr(A.times(A),m),i=3;;){if(c=sr(c.times(v),m),p=f.plus(Cs(c,new I(i),m)),Ha(p.d).slice(0,m)===Ha(f.d).slice(0,m))return f=f.times(2),s!==0&&(f=f.plus(fx(I,m+2,P).times(s+""))),f=Cs(f,new I(b),m),I.precision=P,t==null?(Ir=!0,sr(f,P)):f;f=p,i+=2}}function N_(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=Hc(r/yr),e.d=[],n=(r+1)%yr,r<0&&(n+=yr),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=yr;n<i;)e.d.push(+t.slice(n,n+=yr));t=t.slice(n),n=yr-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Ir&&(e.e>U0||e.e<-U0))throw Error(mw+r)}else e.s=0,e.e=0,e.d=[0];return e}function sr(e,t,r){var n,i,s,c,f,p,m,v,b=e.d;for(c=1,s=b[0];s>=10;s/=10)c++;if(n=t-c,n<0)n+=yr,i=t,m=b[v=0];else{if(v=Math.ceil((n+1)/yr),s=b.length,v>=s)return e;for(m=s=b[v],c=1;s>=10;s/=10)c++;n%=yr,i=n-yr+c}if(r!==void 0&&(s=rl(10,c-i-1),f=m/s%10|0,p=t<0||b[v+1]!==void 0||m%s,p=r<4?(f||p)&&(r==0||r==(e.s<0?3:2)):f>5||f==5&&(r==4||p||r==6&&(n>0?i>0?m/rl(10,c-i):0:b[v-1])%10&1||r==(e.s<0?8:7))),t<1||!b[0])return p?(s=on(e),b.length=1,t=t-s-1,b[0]=rl(10,(yr-t%yr)%yr),e.e=Hc(-t/yr)||0):(b.length=1,b[0]=e.e=e.s=0),e;if(n==0?(b.length=v,s=1,v--):(b.length=v+1,s=rl(10,yr-n),b[v]=i>0?(m/rl(10,c-i)%rl(10,i)|0)*s:0),p)for(;;)if(v==0){(b[0]+=s)==On&&(b[0]=1,++e.e);break}else{if(b[v]+=s,b[v]!=On)break;b[v--]=0,s=1}for(n=b.length;b[--n]===0;)b.pop();if(Ir&&(e.e>U0||e.e<-U0))throw Error(mw+on(e));return e}function XT(e,t){var r,n,i,s,c,f,p,m,v,b,S=e.constructor,A=S.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new S(e),Ir?sr(t,A):t;if(p=e.d,b=t.d,n=t.e,m=e.e,p=p.slice(),c=m-n,c){for(v=c<0,v?(r=p,c=-c,f=b.length):(r=b,n=m,f=p.length),i=Math.max(Math.ceil(A/yr),f)+2,c>i&&(c=i,r.length=1),r.reverse(),i=c;i--;)r.push(0);r.reverse()}else{for(i=p.length,f=b.length,v=i<f,v&&(f=i),i=0;i<f;i++)if(p[i]!=b[i]){v=p[i]<b[i];break}c=0}for(v&&(r=p,p=b,b=r,t.s=-t.s),f=p.length,i=b.length-f;i>0;--i)p[f++]=0;for(i=b.length;i>c;){if(p[--i]<b[i]){for(s=i;s&&p[--s]===0;)p[s]=On-1;--p[s],p[i]+=On}p[i]-=b[i]}for(;p[--f]===0;)p.pop();for(;p[0]===0;p.shift())--n;return p[0]?(t.d=p,t.e=n,Ir?sr(t,A):t):new S(0)}function wl(e,t,r){var n,i=on(e),s=Ha(e.d),c=s.length;return t?(r&&(n=r-c)>0?s=s.charAt(0)+"."+s.slice(1)+uo(n):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+uo(-i-1)+s,r&&(n=r-c)>0&&(s+=uo(n))):i>=c?(s+=uo(i+1-c),r&&(n=r-i-1)>0&&(s=s+"."+uo(n))):((n=i+1)<c&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-c)>0&&(i+1===c&&(s+="."),s+=uo(n))),e.s<0?"-"+s:s}function O_(e,t){if(e.length>t)return e.length=t,!0}function YT(e){var t,r,n;function i(s){var c=this;if(!(c instanceof i))return new i(s);if(c.constructor=i,s instanceof i){c.s=s.s,c.e=s.e,c.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(fl+s);if(s>0)c.s=1;else if(s<0)s=-s,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(s===~~s&&s<1e7){c.e=0,c.d=[s];return}return N_(c,s.toString())}else if(typeof s!="string")throw Error(fl+s);if(s.charCodeAt(0)===45?(s=s.slice(1),c.s=-1):c.s=1,PW.test(s))N_(c,s);else throw Error(fl+s)}if(i.prototype=tt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=YT,i.config=i.set=jW,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function jW(e){if(!e||typeof e!="object")throw Error(ua+"Object expected");var t,r,n,i=["precision",1,Vc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(Hc(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(fl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(fl+r+": "+n);return this}var gw=YT(kW);Bi=new gw(1);const Qt=gw;var RW=e=>e,ZT={},QT=e=>e===ZT,I_=e=>function t(){return arguments.length===0||arguments.length===1&&QT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},JT=(e,t)=>e===1?t:I_(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=n.filter(c=>c!==ZT).length;return s>=e?t(...n):JT(e-s,I_(function(){for(var c=arguments.length,f=new Array(c),p=0;p<c;p++)f[p]=arguments[p];var m=n.map(v=>QT(v)?f.shift():v);return t(...m,...f)}))}),MW=e=>JT(e.length,e),Rv=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},DW=MW((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),LW=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return RW;var i=r.reverse(),s=i[0],c=i.slice(1);return function(){return c.reduce((f,p)=>p(f),s(...arguments))}};function ek(e){var t;return e===0?t=1:t=Math.floor(new Qt(e).abs().log(10).toNumber())+1,t}function tk(e,t,r){for(var n=new Qt(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var rk=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},nk=(e,t,r)=>{if(e.lte(0))return new Qt(0);var n=ek(e.toNumber()),i=new Qt(10).pow(n),s=e.div(i),c=n!==1?.05:.1,f=new Qt(Math.ceil(s.div(c).toNumber())).add(r).mul(c),p=f.mul(i);return t?new Qt(p.toNumber()):new Qt(Math.ceil(p.toNumber()))},BW=(e,t,r)=>{var n=new Qt(1),i=new Qt(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new Qt(10).pow(ek(e)-1),i=new Qt(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new Qt(Math.floor(e)))}else e===0?i=new Qt(Math.floor((t-1)/2)):r||(i=new Qt(Math.floor(e)));var c=Math.floor((t-1)/2),f=LW(DW(p=>i.add(new Qt(p-c).mul(n)).toNumber()),Rv);return f(0,t)},ik=function(t,r,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Qt(0),tickMin:new Qt(0),tickMax:new Qt(0)};var c=nk(new Qt(r).sub(t).div(n-1),i,s),f;t<=0&&r>=0?f=new Qt(0):(f=new Qt(t).add(r).div(2),f=f.sub(new Qt(f).mod(c)));var p=Math.ceil(f.sub(t).div(c).toNumber()),m=Math.ceil(new Qt(r).sub(f).div(c).toNumber()),v=p+m+1;return v>n?ik(t,r,n,i,s+1):(v<n&&(m=r>0?m+(n-v):m,p=r>0?p:p+(n-v)),{step:c,tickMin:f.sub(new Qt(p).mul(c)),tickMax:f.add(new Qt(m).mul(c))})},FW=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),[f,p]=rk([r,n]);if(f===-1/0||p===1/0){var m=p===1/0?[f,...Rv(0,i-1).map(()=>1/0)]:[...Rv(0,i-1).map(()=>-1/0),p];return r>n?m.reverse():m}if(f===p)return BW(f,i,s);var{step:v,tickMin:b,tickMax:S}=ik(f,p,c,s,0),A=tk(b,S.add(new Qt(.1).mul(v)),v);return r>n?A.reverse():A},UW=function(t,r){var[n,i]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,f]=rk([n,i]);if(c===-1/0||f===1/0)return[n,i];if(c===f)return[c];var p=Math.max(r,2),m=nk(new Qt(f).sub(c).div(p-1),s,0),v=[...tk(new Qt(c),new Qt(f),m),f];return s===!1&&(v=v.map(b=>Math.round(b))),n>i?v.reverse():v},ak=e=>e.rootProps.maxBarSize,zW=e=>e.rootProps.barGap,sk=e=>e.rootProps.barCategoryGap,$W=e=>e.rootProps.barSize,Ud=e=>e.rootProps.stackOffset,ok=e=>e.rootProps.reverseStackOrder,xw=e=>e.options.chartName,vw=e=>e.rootProps.syncId,lk=e=>e.rootProps.syncMethod,yw=e=>e.options.eventEmitter,sn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},vs={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Di={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Vp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},WW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:vs.angleAxisId,includeHidden:!1,name:void 0,reversed:vs.reversed,scale:vs.scale,tick:vs.tick,tickCount:void 0,ticks:void 0,type:vs.type,unit:void 0},VW={allowDataOverflow:Di.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Di.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Di.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Di.scale,tick:Di.tick,tickCount:Di.tickCount,ticks:void 0,type:Di.type,unit:void 0},HW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:vs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:vs.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:vs.scale,tick:vs.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},qW={allowDataOverflow:Di.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Di.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Di.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Di.scale,tick:Di.tick,tickCount:Di.tickCount,ticks:void 0,type:"category",unit:void 0},ww=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?HW:WW,bw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?qW:VW,Hp=e=>e.polarOptions,Ew=pe([Ms,Ds,gn],sT),ck=pe([Hp,Ew],(e,t)=>{if(e!=null)return ti(e.innerRadius,t,0)}),uk=pe([Hp,Ew],(e,t)=>{if(e!=null)return ti(e.outerRadius,t,t*.8)}),GW=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},dk=pe([Hp],GW);pe([ww,dk],Vp);var fk=pe([Ew,ck,uk],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});pe([bw,fk],Vp);var hk=pe([$t,Hp,ck,uk,Ms,Ds],(e,t,r,n,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:c,cy:f,startAngle:p,endAngle:m}=t;return{cx:ti(c,i,i/2),cy:ti(f,s,s/2),innerRadius:r,outerRadius:n,startAngle:p,endAngle:m,clockWise:!1}}}),kr=(e,t)=>t,zd=(e,t,r)=>r;function Sw(e){return e?.id}function pk(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=r,c=new Map;return e.forEach(f=>{var p,m=(p=f.data)!==null&&p!==void 0?p:n;if(!(m==null||m.length===0)){var v=Sw(f);m.forEach((b,S)=>{var A=s==null||i?S:String(Xt(b,s,null)),O=Xt(b,f.dataKey,0),I;c.has(A)?I=c.get(A):I={},Object.assign(I,{[v]:O}),c.set(A,I)})}}),Array.from(c.values())}function qp(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Gp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Kp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function KW(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var vn=e=>{var t=$t(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},qc=e=>e.tooltip.settings.axisId;function T_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function z0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T_(Object(r),!0).forEach(function(n){XW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XW(e,t,r){return(t=YW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YW(e){var t=ZW(e,"string");return typeof t=="symbol"?t:t+""}function ZW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mv=[0,"auto"],_n={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},mk=(e,t)=>e.cartesianAxis.xAxis[t],Za=(e,t)=>{var r=mk(e,t);return r??_n},Nn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Mv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:kd},gk=(e,t)=>e.cartesianAxis.yAxis[t],Qa=(e,t)=>{var r=gk(e,t);return r??Nn},xk={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Cw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??xk},Dr=(e,t,r)=>{switch(t){case"xAxis":return Za(e,r);case"yAxis":return Qa(e,r);case"zAxis":return Cw(e,r);case"angleAxis":return ww(e,r);case"radiusAxis":return bw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},QW=(e,t,r)=>{switch(t){case"xAxis":return Za(e,r);case"yAxis":return Qa(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},$d=(e,t,r)=>{switch(t){case"xAxis":return Za(e,r);case"yAxis":return Qa(e,r);case"angleAxis":return ww(e,r);case"radiusAxis":return bw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},vk=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Aw(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Xp=e=>e.graphicalItems.cartesianItems,JW=pe([kr,zd],Aw),_w=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),Wd=pe([Xp,Dr,JW],_w,{memoizeOptions:{resultEqualityCheck:Kp}}),yk=pe([Wd],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(qp)),wk=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),eV=pe([Wd],wk),Nw=e=>e.map(t=>t.data).filter(Boolean).flat(1),tV=pe([Wd],Nw,{memoizeOptions:{resultEqualityCheck:Kp}}),Ow=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},Iw=pe([tV,pw],Ow),Tw=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Xt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:Xt(i,n)}))):e.map(n=>({value:n})),Yp=pe([Iw,Dr,Wd],Tw);function bk(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function $h(e){if(la(e)||e instanceof Date){var t=Number(e);if(ar(t))return t}}function k_(e){if(Array.isArray(e)){var t=[$h(e[0]),$h(e[1])];return vo(t)?t:void 0}var r=$h(e);if(r!=null)return[r,r]}function Ps(e){return e.map($h).filter(G9)}function rV(e,t,r){return!r||typeof t!="number"||Vi(t)?[]:r.length?Ps(r.flatMap(n=>{var i=Xt(e,n.dataKey),s,c;if(Array.isArray(i)?[s,c]=i:s=c=i,!(!ar(s)||!ar(c)))return[t-s,t+c]})):[]}var yn=e=>{var t=vn(e),r=qc(e);return $d(e,t,r)},Vd=pe([yn],e=>e?.dataKey),nV=pe([yk,pw,yn],pk),Ek=(e,t,r,n)=>{var i={},s=t.reduce((c,f)=>{if(f.stackId==null)return c;var p=c[f.stackId];return p==null&&(p=[]),p.push(f),c[f.stackId]=p,c},i);return Object.fromEntries(Object.entries(s).map(c=>{var[f,p]=c,m=n?[...p].reverse():p,v=m.map(Sw);return[f,{stackedData:EB(e,v,r),graphicalItems:m}]}))},Dv=pe([nV,yk,Ud,ok],Ek),Sk=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var c=NB(e,i,s);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},iV=pe([Dr],e=>e.allowDataOverflow),kw=e=>{var t;if(e==null||!("domain"in e))return Mv;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=Ps(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Mv},Pw=pe([Dr],kw),jw=pe([Pw,iV],HT),aV=pe([Dv,Bs,kr,jw],Sk,{memoizeOptions:{resultEqualityCheck:Gp}}),Zp=e=>e.errorBars,sV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>bk(r,n)),$0=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var s=i.flat(),c=Math.min(...s),f=Math.max(...s);return[c,f]}},Rw=(e,t,r,n,i)=>{var s,c;if(r.length>0&&e.forEach(f=>{r.forEach(p=>{var m,v,b=(m=n[p.id])===null||m===void 0?void 0:m.filter(M=>bk(i,M)),S=Xt(f,(v=t.dataKey)!==null&&v!==void 0?v:p.dataKey),A=rV(f,S,b);if(A.length>=2){var O=Math.min(...A),I=Math.max(...A);(s==null||O<s)&&(s=O),(c==null||I>c)&&(c=I)}var P=k_(S);P!=null&&(s=s==null?P[0]:Math.min(s,P[0]),c=c==null?P[1]:Math.max(c,P[1]))})}),t?.dataKey!=null&&e.forEach(f=>{var p=k_(Xt(f,t.dataKey));p!=null&&(s=s==null?p[0]:Math.min(s,p[0]),c=c==null?p[1]:Math.max(c,p[1]))}),ar(s)&&ar(c))return[s,c]},oV=pe([Iw,Dr,eV,Zp,kr],Rw,{memoizeOptions:{resultEqualityCheck:Gp}});function lV(e){var{value:t}=e;if(la(t)||t instanceof Date)return t}var cV=(e,t,r)=>{var n=e.map(lV).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&z4(n))?uT(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Ck=e=>e.referenceElements.dots,Gc=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),uV=pe([Ck,kr,zd],Gc),Ak=e=>e.referenceElements.areas,dV=pe([Ak,kr,zd],Gc),_k=e=>e.referenceElements.lines,fV=pe([_k,kr,zd],Gc),Nk=(e,t)=>{if(e!=null){var r=Ps(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},hV=pe(uV,kr,Nk),Ok=(e,t)=>{if(e!=null){var r=Ps(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},pV=pe([dV,kr],Ok);function mV(e){var t;if(e.x!=null)return Ps([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Ps(r)}function gV(e){var t;if(e.y!=null)return Ps([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Ps(r)}var Ik=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?mV(n):gV(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},xV=pe([fV,kr],Ik),vV=pe(hV,xV,pV,(e,t,r)=>$0(e,r,t)),Mw=(e,t,r,n,i,s,c,f)=>{if(r!=null)return r;var p=c==="vertical"&&f==="xAxis"||c==="horizontal"&&f==="yAxis",m=p?$0(n,s,i):$0(s,i);return TW(t,m,e.allowDataOverflow)},yV=pe([Dr,Pw,jw,aV,oV,vV,$t,kr],Mw,{memoizeOptions:{resultEqualityCheck:Gp}}),wV=[0,1],Dw=(e,t,r,n,i,s,c)=>{if(!((e==null||r==null||r.length===0)&&c===void 0)){var{dataKey:f,type:p}=e,m=_l(t,s);if(m&&f==null){var v;return uT(0,(v=r?.length)!==null&&v!==void 0?v:0)}return p==="category"?cV(n,e,m):i==="expand"?wV:c}},Lw=pe([Dr,$t,Iw,Yp,Ud,kr,yV],Dw),Tk=(e,t,r,n,i)=>{if(e!=null){var{scale:s,type:c}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":c==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":c==="category"?"band":"linear";if(typeof s=="string"){var f="scale".concat(Nd(s));return f in Yu?f:"point"}}},Kc=pe([Dr,$t,vk,xw,kr],Tk);function bV(e){if(e!=null){if(e in Yu)return Yu[e]();var t="scale".concat(Nd(e));if(t in Yu)return Yu[t]()}}function Bw(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=bV(t);if(i!=null){var s=i.domain(r).range(n);return xB(s),s}}}var Fw=(e,t,r)=>{var n=kw(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&vo(e))return FW(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&vo(e))return UW(e,t.tickCount,t.allowDecimals)}},Uw=pe([Lw,$d,Kc],Fw),zw=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&vo(t)&&Array.isArray(r)&&r.length>0){var i=t[0],s=r[0],c=t[1],f=r[r.length-1];return[Math.min(i,s),Math.max(c,f)]}return t},EV=pe([Dr,Lw,Uw,kr],zw),SV=pe(Yp,Dr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Ps(e.map(b=>b.value))).sort((b,S)=>b-S),i=n[0],s=n[n.length-1];if(i==null||s==null)return 1/0;var c=s-i;if(c===0)return 1/0;for(var f=0;f<n.length-1;f++){var p=n[f],m=n[f+1];if(!(p==null||m==null)){var v=m-p;r=Math.min(r,v)}}return r/c}}),kk=pe(SV,$t,sk,gn,(e,t,r,n,i)=>i,(e,t,r,n,i)=>{if(!ar(e))return 0;var s=t==="vertical"?n.height:n.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var c=ti(r,e*s),f=e*s/2;return f-c-(f-c)/s*c}return 0}),CV=(e,t,r)=>{var n=Za(e,t);return n==null||typeof n.padding!="string"?0:kk(e,"xAxis",t,r,n.padding)},AV=(e,t,r)=>{var n=Qa(e,t);return n==null||typeof n.padding!="string"?0:kk(e,"yAxis",t,r,n.padding)},_V=pe(Za,CV,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),NV=pe(Qa,AV,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),OV=pe([gn,_V,Tp,Ip,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:s}=n;return i?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),IV=pe([gn,$t,NV,Tp,Ip,(e,t,r)=>r],(e,t,r,n,i,s)=>{var{padding:c}=i;return s?[n.height-c.bottom,c.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Hd=(e,t,r,n)=>{var i;switch(t){case"xAxis":return OV(e,r,n);case"yAxis":return IV(e,r,n);case"zAxis":return(i=Cw(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return dk(e);case"radiusAxis":return fk(e,r);default:return}},Pk=pe([Dr,Hd],Vp),Rc=pe([Dr,Kc,EV,Pk],Bw);pe([Wd,Zp,kr],sV);function jk(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Qp=(e,t)=>t,Jp=(e,t,r)=>r,TV=pe(Np,Qp,Jp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(jk)),kV=pe(Op,Qp,Jp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(jk)),Rk=(e,t)=>({width:e.width,height:t.height}),PV=(e,t)=>{var r=typeof t.width=="number"?t.width:kd;return{width:r,height:e.height}},Mk=pe(gn,Za,Rk),jV=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},RV=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},MV=pe(Ds,gn,TV,Qp,Jp,(e,t,r,n,i)=>{var s={},c;return r.forEach(f=>{var p=Rk(t,f);c==null&&(c=jV(t,n,e));var m=n==="top"&&!i||n==="bottom"&&i;s[f.id]=c-Number(m)*p.height,c+=(m?-1:1)*p.height}),s}),DV=pe(Ms,gn,kV,Qp,Jp,(e,t,r,n,i)=>{var s={},c;return r.forEach(f=>{var p=PV(t,f);c==null&&(c=RV(t,n,e));var m=n==="left"&&!i||n==="right"&&i;s[f.id]=c-Number(m)*p.width,c+=(m?-1:1)*p.width}),s}),LV=(e,t)=>{var r=Za(e,t);if(r!=null)return MV(e,r.orientation,r.mirror)},BV=pe([gn,Za,LV,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),FV=(e,t)=>{var r=Qa(e,t);if(r!=null)return DV(e,r.orientation,r.mirror)},UV=pe([gn,Qa,FV,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),Dk=pe(gn,Qa,(e,t)=>{var r=typeof t.width=="number"?t.width:kd;return{width:r,height:e.height}}),P_=(e,t,r)=>{switch(t){case"xAxis":return Mk(e,r).width;case"yAxis":return Dk(e,r).height;default:return}},Lk=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:s,dataKey:c}=r,f=_l(e,n),p=t.map(m=>m.value);if(c&&f&&s==="category"&&i&&z4(p))return p}},$w=pe([$t,Yp,Dr,kr],Lk),Bk=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:s}=r,c=_l(e,n);if(c&&(i==="number"||s!=="auto"))return t.map(f=>f.value)}},Ww=pe([$t,Yp,$d,kr],Bk),j_=pe([$t,QW,Kc,Rc,$w,Ww,Hd,Uw,kr],(e,t,r,n,i,s,c,f,p)=>{if(t!=null){var m=_l(e,p);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:p,categoricalDomain:s,duplicateDomain:i,isCategorical:m,niceTicks:f,range:c,realScaleType:r,scale:n}}}),zV=(e,t,r,n,i,s,c,f,p)=>{if(!(t==null||n==null)){var m=_l(e,p),{type:v,ticks:b,tickCount:S}=t,A=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,O=v==="category"&&n.bandwidth?n.bandwidth()/A:0;O=p==="angleAxis"&&s!=null&&s.length>=2?In(s[0]-s[1])*2*O:O;var I=b||i;if(I){var P=I.map((M,L)=>{var R=c?c.indexOf(M):M;return{index:L,coordinate:n(R)+O,value:M,offset:O}});return P.filter(M=>ar(M.coordinate))}return m&&f?f.map((M,L)=>({coordinate:n(M)+O,value:M,index:L,offset:O})).filter(M=>ar(M.coordinate)):n.ticks?n.ticks(S).map(M=>({coordinate:n(M)+O,value:M,offset:O})):n.domain().map((M,L)=>({coordinate:n(M)+O,value:c?c[M]:M,index:L,offset:O}))}},Fk=pe([$t,$d,Kc,Rc,Uw,Hd,$w,Ww,kr],zV),$V=(e,t,r,n,i,s,c)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var f=_l(e,c),{tickCount:p}=t,m=0;return m=c==="angleAxis"&&n?.length>=2?In(n[0]-n[1])*2*m:m,f&&s?s.map((v,b)=>({coordinate:r(v)+m,value:v,index:b,offset:m})):r.ticks?r.ticks(p).map(v=>({coordinate:r(v)+m,value:v,offset:m})):r.domain().map((v,b)=>({coordinate:r(v)+m,value:i?i[v]:v,index:b,offset:m}))}},yo=pe([$t,$d,Rc,Hd,$w,Ww,kr],$V),wo=pe(Dr,Rc,(e,t)=>{if(!(e==null||t==null))return z0(z0({},e),{},{scale:t})}),WV=pe([Dr,Kc,Lw,Pk],Bw),VV=pe((e,t,r)=>Cw(e,r),WV,(e,t)=>{if(!(e==null||t==null))return z0(z0({},e),{},{scale:t})}),HV=pe([$t,Np,Op],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Uk=e=>e.options.defaultTooltipEventType,zk=e=>e.options.validateTooltipEventTypes;function $k(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Vw(e,t){var r=Uk(e),n=zk(e);return $k(t,r,n)}function qV(e){return Ze(t=>Vw(t,e))}var Wk=(e,t)=>{var r,n=Number(t);if(!(Vi(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},GV=e=>e.tooltip.settings,mo={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},KV={itemInteraction:{click:mo,hover:mo},axisInteraction:{click:mo,hover:mo},keyboardInteraction:mo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Vk=Ei({name:"tooltip",initialState:KV,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Or()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Ta(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Or()},removeTooltipEntrySettings:{reducer(e,t){var r=Ta(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Or()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:XV,replaceTooltipEntrySettings:YV,removeTooltipEntrySettings:ZV,setTooltipSettingsState:QV,setActiveMouseOverItemIndex:Hk,mouseLeaveItem:JV,mouseLeaveChart:qk,setActiveClickItemIndex:eH,setMouseOverAxisIndex:Gk,setMouseClickAxisIndex:tH,setSyncInteraction:Lv,setKeyboardInteraction:Bv}=Vk.actions,rH=Vk.reducer;function R_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R_(Object(r),!0).forEach(function(n){nH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nH(e,t,r){return(t=iH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iH(e){var t=aH(e,"string");return typeof t=="symbol"?t:t+""}function aH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sH(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function oH(e){return e.index!=null}var Kk=(e,t,r,n)=>{if(t==null)return mo;var i=sH(e,t,r);if(i==null)return mo;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(oH(i)){if(s)return Nh(Nh({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Nh(Nh({},mo),{},{coordinate:i.coordinate})};function lH(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function cH(e,t){var r=lH(e),n=t[0],i=t[1];if(r===void 0)return!1;var s=Math.min(n,i),c=Math.max(n,i);return r>=s&&r<=c}function uH(e,t,r){if(r==null||t==null)return!0;var n=Xt(e,t);return n==null||!vo(r)?!0:cH(n,r)}var Hw=(e,t,r,n)=>{var i=e?.index;if(i==null)return null;var s=Number(i);if(!ar(s))return i;var c=0,f=1/0;t.length>0&&(f=t.length-1);var p=Math.max(c,Math.min(s,f)),m=t[p];return m==null||uH(m,r,n)?String(p):null},Xk=(e,t,r,n,i,s,c,f)=>{if(!(s==null||f==null)){var p=c[0],m=p==null?void 0:f(p.positions,s);if(m!=null)return m;var v=i?.[Number(s)];if(v)switch(r){case"horizontal":return{x:v.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:v.coordinate}}}},Yk=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(r==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&n!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(c=>{var f;return((f=c.settings)===null||f===void 0?void 0:f.graphicalItemId)===i})},qd=e=>e.options.tooltipPayloadSearcher,Xc=e=>e.tooltip;function M_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function D_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M_(Object(r),!0).forEach(function(n){dH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dH(e,t,r){return(t=fH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fH(e){var t=hH(e,"string");return typeof t=="symbol"?t:t+""}function hH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pH(e,t){return e??t}var Zk=(e,t,r,n,i,s,c)=>{if(!(t==null||s==null)){var{chartData:f,computedData:p,dataStartIndex:m,dataEndIndex:v}=r,b=[];return e.reduce((S,A)=>{var O,{dataDefinedOnItem:I,settings:P}=A,M=pH(I,f),L=Array.isArray(M)?MI(M,m,v):M,R=(O=P?.dataKey)!==null&&O!==void 0?O:n,U=P?.nameKey,W;if(n&&Array.isArray(L)&&!Array.isArray(L[0])&&c==="axis"?W=$4(L,n,i):W=s(L,t,p,U),Array.isArray(W))W.forEach(H=>{var X=D_(D_({},P),{},{name:H.name,unit:H.unit,color:void 0,fill:void 0});S.push(FC({tooltipEntrySettings:X,dataKey:H.dataKey,payload:H.payload,value:Xt(H.payload,H.dataKey),name:H.name}))});else{var V;S.push(FC({tooltipEntrySettings:P,dataKey:R,payload:W,value:Xt(W,R),name:(V=Xt(W,U))!==null&&V!==void 0?V:P?.name}))}return S},b)}},qw=pe([yn,$t,vk,xw,vn],Tk),mH=pe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),gH=pe([vn,qc],Aw),Yc=pe([mH,yn,gH],_w,{memoizeOptions:{resultEqualityCheck:Kp}}),xH=pe([Yc],e=>e.filter(qp)),vH=pe([Yc],Nw,{memoizeOptions:{resultEqualityCheck:Kp}}),Zc=pe([vH,Bs],Ow),yH=pe([xH,Bs,yn],pk),Gw=pe([Zc,yn,Yc],Tw),Qk=pe([yn],kw),wH=pe([yn],e=>e.allowDataOverflow),Jk=pe([Qk,wH],HT),bH=pe([Yc],e=>e.filter(qp)),EH=pe([yH,bH,Ud,ok],Ek),SH=pe([EH,Bs,vn,Jk],Sk),CH=pe([Yc],wk),AH=pe([Zc,yn,CH,Zp,vn],Rw,{memoizeOptions:{resultEqualityCheck:Gp}}),_H=pe([Ck,vn,qc],Gc),NH=pe([_H,vn],Nk),OH=pe([Ak,vn,qc],Gc),IH=pe([OH,vn],Ok),TH=pe([_k,vn,qc],Gc),kH=pe([TH,vn],Ik),PH=pe([NH,kH,IH],$0),jH=pe([yn,Qk,Jk,SH,AH,PH,$t,vn],Mw),Gd=pe([yn,$t,Zc,Gw,Ud,vn,jH],Dw),RH=pe([Gd,yn,qw],Fw),MH=pe([yn,Gd,RH,vn],zw),eP=e=>{var t=vn(e),r=qc(e),n=!1;return Hd(e,t,r,n)},tP=pe([yn,eP],Vp),rP=pe([yn,qw,MH,tP],Bw),DH=pe([$t,Gw,yn,vn],Lk),LH=pe([$t,Gw,yn,vn],Bk),BH=(e,t,r,n,i,s,c,f)=>{if(t){var{type:p}=t,m=_l(e,f);if(n){var v=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,b=p==="category"&&n.bandwidth?n.bandwidth()/v:0;return b=f==="angleAxis"&&i!=null&&i?.length>=2?In(i[0]-i[1])*2*b:b,m&&c?c.map((S,A)=>({coordinate:n(S)+b,value:S,index:A,offset:b})):n.domain().map((S,A)=>({coordinate:n(S)+b,value:s?s[S]:S,index:A,offset:b}))}}},Fs=pe([$t,yn,qw,rP,eP,DH,LH,vn],BH),Kw=pe([Uk,zk,GV],(e,t,r)=>$k(r.shared,e,t)),nP=e=>e.tooltip.settings.trigger,Xw=e=>e.tooltip.settings.defaultIndex,Kd=pe([Xc,Kw,nP,Xw],Kk),bo=pe([Kd,Zc,Vd,Gd],Hw),iP=pe([Fs,bo],Wk),Yw=pe([Kd],e=>{if(e)return e.dataKey}),FH=pe([Kd],e=>{if(e)return e.graphicalItemId}),aP=pe([Xc,Kw,nP,Xw],Yk),UH=pe([Ms,Ds,$t,gn,Fs,Xw,aP,qd],Xk),zH=pe([Kd,UH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),$H=pe([Kd],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),WH=pe([aP,bo,Bs,Vd,iP,qd,Kw],Zk);pe([WH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function L_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function B_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L_(Object(r),!0).forEach(function(n){VH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VH(e,t,r){return(t=HH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HH(e){var t=qH(e,"string");return typeof t=="symbol"?t:t+""}function qH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GH=()=>Ze(yn),KH=()=>{var e=GH(),t=Ze(Fs),r=Ze(rP);return b0(!e||!r?void 0:B_(B_({},e),{},{scale:r}),t)};function F_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F_(Object(r),!0).forEach(function(n){XH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XH(e,t,r){return(t=YH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YH(e){var t=ZH(e,"string");return typeof t=="symbol"?t:t+""}function ZH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QH=(e,t,r,n)=>{var i=t.find(s=>s&&s.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},JH=(e,t,r,n)=>{var i=t.find(m=>m&&m.index===r);if(i){if(e==="centric"){var s=i.coordinate,{radius:c}=n;return lc(lc(lc({},n),an(n.cx,n.cy,c,s)),{},{angle:s,radius:c})}var f=i.coordinate,{angle:p}=n;return lc(lc(lc({},n),an(n.cx,n.cy,f,p)),{},{angle:p,radius:f})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function eq(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var sP=(e,t,r,n,i)=>{var s,c=(s=t?.length)!==null&&s!==void 0?s:0;if(c<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<c;f++){var p,m,v,b,S,A=f>0?(p=r[f-1])===null||p===void 0?void 0:p.coordinate:(m=r[c-1])===null||m===void 0?void 0:m.coordinate,O=(v=r[f])===null||v===void 0?void 0:v.coordinate,I=f>=c-1?(b=r[0])===null||b===void 0?void 0:b.coordinate:(S=r[f+1])===null||S===void 0?void 0:S.coordinate,P=void 0;if(!(A==null||O==null||I==null))if(In(O-A)!==In(I-O)){var M=[];if(In(I-O)===In(i[1]-i[0])){P=I;var L=O+i[1]-i[0];M[0]=Math.min(L,(L+A)/2),M[1]=Math.max(L,(L+A)/2)}else{P=A;var R=I+i[1]-i[0];M[0]=Math.min(O,(R+O)/2),M[1]=Math.max(O,(R+O)/2)}var U=[Math.min(O,(P+O)/2),Math.max(O,(P+O)/2)];if(e>U[0]&&e<=U[1]||e>=M[0]&&e<=M[1]){var W;return(W=r[f])===null||W===void 0?void 0:W.index}}else{var V=Math.min(A,I),H=Math.max(A,I);if(e>(V+O)/2&&e<=(H+O)/2){var X;return(X=r[f])===null||X===void 0?void 0:X.index}}}else if(t)for(var Y=0;Y<c;Y++){var we=t[Y];if(we!=null){var se=t[Y+1],ie=t[Y-1];if(Y===0&&se!=null&&e<=(we.coordinate+se.coordinate)/2||Y===c-1&&ie!=null&&e>(we.coordinate+ie.coordinate)/2||Y>0&&Y<c-1&&ie!=null&&se!=null&&e>(we.coordinate+ie.coordinate)/2&&e<=(we.coordinate+se.coordinate)/2)return we.index}}return-1},tq=()=>Ze(xw),Zw=(e,t)=>t,oP=(e,t,r)=>r,Qw=(e,t,r,n)=>n,rq=pe(Fs,e=>xp(e,t=>t.coordinate)),Jw=pe([Xc,Zw,oP,Qw],Kk),eb=pe([Jw,Zc,Vd,Gd],Hw),nq=(e,t,r)=>{if(t!=null){var n=Xc(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},lP=pe([Xc,Zw,oP,Qw],Yk),W0=pe([Ms,Ds,$t,gn,Fs,Qw,lP,qd],Xk),iq=pe([Jw,W0],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),cP=pe([Fs,eb],Wk),aq=pe([lP,eb,Bs,Vd,cP,qd,Zw],Zk),sq=pe([Jw,eb],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),oq=(e,t,r,n,i,s,c)=>{if(!(!e||!r||!n||!i)&&eq(e,c)){var f=OB(e,t),p=sP(f,s,i,r,n),m=QH(t,i,p,e);return{activeIndex:String(p),activeCoordinate:m}}},lq=(e,t,r,n,i,s,c)=>{if(!(!e||!n||!i||!s||!r)){var f=HU(e,r);if(f){var p=IB(f,t),m=sP(p,c,s,n,i),v=JH(t,s,m,f);return{activeIndex:String(m),activeCoordinate:v}}}},cq=(e,t,r,n,i,s,c,f)=>{if(!(!e||!t||!n||!i||!s))return t==="horizontal"||t==="vertical"?oq(e,t,n,i,s,c,f):lq(e,t,r,n,i,s,c)},uq=pe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),dq=pe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(sn)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:KW}});function U_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function z_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U_(Object(r),!0).forEach(function(n){fq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fq(e,t,r){return(t=hq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hq(e){var t=pq(e,"string");return typeof t=="symbol"?t:t+""}function pq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mq={},gq={zIndexMap:Object.values(sn).reduce((e,t)=>z_(z_({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),mq)},xq=new Set(Object.values(sn));function vq(e){return xq.has(e)}var uP=Ei({name:"zIndex",initialState:gq,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Or()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!vq(r)&&delete e.zIndexMap[r])},prepare:Or()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:Or()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Or()}}}),{registerZIndexPortal:yq,unregisterZIndexPortal:wq,registerZIndexPortalElement:bq,unregisterZIndexPortalElement:Eq}=uP.actions,Sq=uP.reducer;function Si(e){var{zIndex:t,children:r}=e,n=sF(),i=n&&t!==void 0&&t!==0,s=zn(),c=or();N.useLayoutEffect(()=>i?(c(yq({zIndex:t})),()=>{c(wq({zIndex:t}))}):Od,[c,t,i]);var f=Ze(p=>uq(p,t,s));return i?f?ay.createPortal(r,f):null:r}function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fv.apply(null,arguments)}function $_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Oh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$_(Object(r),!0).forEach(function(n){Cq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cq(e,t,r){return(t=Aq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aq(e){var t=_q(e,"string");return typeof t=="symbol"?t:t+""}function _q(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nq(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return N.isValidElement(t)?N.cloneElement(t,n):N.createElement(r,n)}function Oq(e){var t,{coordinate:r,payload:n,index:i,offset:s,tooltipAxisBandSize:c,layout:f,cursor:p,tooltipEventType:m,chartName:v}=e,b=r,S=n,A=i;if(!p||!b||v!=="ScatterChart"&&m!=="axis")return null;var O,I,P;if(v==="ScatterChart")O=b,I=aU,P=sn.cursorLine;else if(v==="BarChart")O=sU(f,b,s,c),I=aT,P=sn.cursorRectangle;else if(f==="radial"&&V4(b)){var{cx:M,cy:L,radius:R,startAngle:U,endAngle:W}=oT(b);O={cx:M,cy:L,startAngle:U,endAngle:W,innerRadius:R,outerRadius:R},I=cT,P=sn.cursorLine}else O={points:XU(f,b,s)},I=Mp,P=sn.cursorLine;var V=typeof p=="object"&&"className"in p?p.className:void 0,H=Oh(Oh(Oh(Oh({stroke:"#ccc",pointerEvents:"none"},s),O),Nc(p)),{},{payload:S,payloadIndex:A,className:Vt("recharts-tooltip-cursor",V)});return N.createElement(Si,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:P},N.createElement(Nq,{cursor:p,cursorComp:I,cursorProps:H}))}function Iq(e){var t=KH(),r=WI(),n=Pd(),i=tq();return t==null||r==null||n==null||i==null?null:N.createElement(Oq,Fv({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var dP=N.createContext(null),Tq=()=>N.useContext(dP),hx={exports:{}},W_;function kq(){return W_||(W_=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(p,m,v){this.fn=p,this.context=m,this.once=v||!1}function s(p,m,v,b,S){if(typeof v!="function")throw new TypeError("The listener must be a function");var A=new i(v,b||p,S),O=r?r+m:m;return p._events[O]?p._events[O].fn?p._events[O]=[p._events[O],A]:p._events[O].push(A):(p._events[O]=A,p._eventsCount++),p}function c(p,m){--p._eventsCount===0?p._events=new n:delete p._events[m]}function f(){this._events=new n,this._eventsCount=0}f.prototype.eventNames=function(){var m=[],v,b;if(this._eventsCount===0)return m;for(b in v=this._events)t.call(v,b)&&m.push(r?b.slice(1):b);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(v)):m},f.prototype.listeners=function(m){var v=r?r+m:m,b=this._events[v];if(!b)return[];if(b.fn)return[b.fn];for(var S=0,A=b.length,O=new Array(A);S<A;S++)O[S]=b[S].fn;return O},f.prototype.listenerCount=function(m){var v=r?r+m:m,b=this._events[v];return b?b.fn?1:b.length:0},f.prototype.emit=function(m,v,b,S,A,O){var I=r?r+m:m;if(!this._events[I])return!1;var P=this._events[I],M=arguments.length,L,R;if(P.fn){switch(P.once&&this.removeListener(m,P.fn,void 0,!0),M){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,v),!0;case 3:return P.fn.call(P.context,v,b),!0;case 4:return P.fn.call(P.context,v,b,S),!0;case 5:return P.fn.call(P.context,v,b,S,A),!0;case 6:return P.fn.call(P.context,v,b,S,A,O),!0}for(R=1,L=new Array(M-1);R<M;R++)L[R-1]=arguments[R];P.fn.apply(P.context,L)}else{var U=P.length,W;for(R=0;R<U;R++)switch(P[R].once&&this.removeListener(m,P[R].fn,void 0,!0),M){case 1:P[R].fn.call(P[R].context);break;case 2:P[R].fn.call(P[R].context,v);break;case 3:P[R].fn.call(P[R].context,v,b);break;case 4:P[R].fn.call(P[R].context,v,b,S);break;default:if(!L)for(W=1,L=new Array(M-1);W<M;W++)L[W-1]=arguments[W];P[R].fn.apply(P[R].context,L)}}return!0},f.prototype.on=function(m,v,b){return s(this,m,v,b,!1)},f.prototype.once=function(m,v,b){return s(this,m,v,b,!0)},f.prototype.removeListener=function(m,v,b,S){var A=r?r+m:m;if(!this._events[A])return this;if(!v)return c(this,A),this;var O=this._events[A];if(O.fn)O.fn===v&&(!S||O.once)&&(!b||O.context===b)&&c(this,A);else{for(var I=0,P=[],M=O.length;I<M;I++)(O[I].fn!==v||S&&!O[I].once||b&&O[I].context!==b)&&P.push(O[I]);P.length?this._events[A]=P.length===1?P[0]:P:c(this,A)}return this},f.prototype.removeAllListeners=function(m){var v;return m?(v=r?r+m:m,this._events[v]&&c(this,v)):(this._events=new n,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=r,f.EventEmitter=f,e.exports=f})(hx)),hx.exports}var Pq=kq();const jq=da(Pq);var wd=new jq,Uv="recharts.syncEvent.tooltip",V_="recharts.syncEvent.brush";function tb(e,t){if(t){var r=Number.parseInt(t,10);if(!Vi(r))return e?.[r]}}var Rq={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},fP=Ei({name:"options",initialState:Rq,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Mq=fP.reducer,{createEventEmitter:Dq}=fP.actions;function Lq(e){return e.tooltip.syncInteraction}var Bq={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},hP=Ei({name:"chartData",initialState:Bq,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:H_,setDataStartEndIndexes:Fq,setComputedData:Qte}=hP.actions,Uq=hP.reducer,zq=["x","y"];function q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q_(Object(r),!0).forEach(function(n){$q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $q(e,t,r){return(t=Wq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wq(e){var t=Vq(e,"string");return typeof t=="symbol"?t:t+""}function Vq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hq(e,t){if(e==null)return{};var r,n,i=qq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function qq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Gq(){var e=Ze(vw),t=Ze(yw),r=or(),n=Ze(lk),i=Ze(Fs),s=Pd(),c=$c(),f=Ze(p=>p.rootProps.className);N.useEffect(()=>{if(e==null)return Od;var p=(m,v,b)=>{if(t!==b&&e===m){if(n==="index"){var S;if(c&&v!==null&&v!==void 0&&(S=v.payload)!==null&&S!==void 0&&S.coordinate&&v.payload.sourceViewBox){var A=v.payload.coordinate,{x:O,y:I}=A,P=Hq(A,zq),{x:M,y:L,width:R,height:U}=v.payload.sourceViewBox,W=cc(cc({},P),{},{x:c.x+(R?(O-M)/R:0)*c.width,y:c.y+(U?(I-L)/U:0)*c.height});r(cc(cc({},v),{},{payload:cc(cc({},v.payload),{},{coordinate:W})}))}else r(v);return}if(i!=null){var V;if(typeof n=="function"){var H={activeTooltipIndex:v.payload.index==null?void 0:Number(v.payload.index),isTooltipActive:v.payload.active,activeIndex:v.payload.index==null?void 0:Number(v.payload.index),activeLabel:v.payload.label,activeDataKey:v.payload.dataKey,activeCoordinate:v.payload.coordinate},X=n(i,H);V=i[X]}else n==="value"&&(V=i.find(ze=>String(ze.value)===v.payload.label));var{coordinate:Y}=v.payload;if(V==null||v.payload.active===!1||Y==null||c==null){r(Lv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:we,y:se}=Y,ie=Math.min(we,c.x+c.width),be=Math.min(se,c.y+c.height),Ce={x:s==="horizontal"?V.coordinate:ie,y:s==="horizontal"?be:V.coordinate},re=Lv({active:v.payload.active,coordinate:Ce,dataKey:v.payload.dataKey,index:String(V.index),label:v.payload.label,sourceViewBox:v.payload.sourceViewBox,graphicalItemId:v.payload.graphicalItemId});r(re)}}};return wd.on(Uv,p),()=>{wd.off(Uv,p)}},[f,r,t,e,n,i,s,c])}function Kq(){var e=Ze(vw),t=Ze(yw),r=or();N.useEffect(()=>{if(e==null)return Od;var n=(i,s,c)=>{t!==c&&e===i&&r(Fq(s))};return wd.on(V_,n),()=>{wd.off(V_,n)}},[r,t,e])}function Xq(){var e=or();N.useEffect(()=>{e(Dq())},[e]),Gq(),Kq()}function Yq(e,t,r,n,i,s){var c=Ze(A=>nq(A,e,t)),f=Ze(yw),p=Ze(vw),m=Ze(lk),v=Ze(Lq),b=v?.active,S=$c();N.useEffect(()=>{if(!b&&p!=null&&f!=null){var A=Lv({active:s,coordinate:r,dataKey:c,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:S,graphicalItemId:void 0});wd.emit(Uv,p,A,f)}},[b,r,c,i,n,f,p,m,s,S])}function G_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function K_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G_(Object(r),!0).forEach(function(n){Zq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zq(e,t,r){return(t=Qq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qq(e){var t=Jq(e,"string");return typeof t=="symbol"?t:t+""}function Jq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eG(e){return e.dataKey}function tG(e,t){return N.isValidElement(e)?N.cloneElement(e,t):typeof e=="function"?N.createElement(e,t):N.createElement(BF,t)}var X_=[],rG={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Wh(e){var t,r,n=Zr(e,rG),{active:i,allowEscapeViewBox:s,animationDuration:c,animationEasing:f,content:p,filterNull:m,isAnimationActive:v,offset:b,payloadUniqBy:S,position:A,reverseDirection:O,useTranslate3d:I,wrapperStyle:P,cursor:M,shared:L,trigger:R,defaultIndex:U,portal:W,axisId:V}=n,H=or(),X=typeof U=="number"?String(U):U;N.useEffect(()=>{H(QV({shared:L,trigger:R,axisId:V,active:i,defaultIndex:X}))},[H,L,R,V,i,X]);var Y=$c(),we=eT(),se=qV(L),{activeIndex:ie,isActive:be}=(t=Ze(_e=>sq(_e,se,R,X)))!==null&&t!==void 0?t:{},Ce=Ze(_e=>aq(_e,se,R,X)),re=Ze(_e=>cP(_e,se,R,X)),ze=Ze(_e=>iq(_e,se,R,X)),le=Ce,me=Tq(),Ee=(r=i??be)!==null&&r!==void 0?r:!1,[Ae,J]=aI([le,Ee]),de=se==="axis"?re:void 0;Yq(se,R,ze,de,ie,Ee);var $e=W??me;if($e==null||Y==null||se==null)return null;var Ue=le??X_;Ee||(Ue=X_),m&&Ue.length&&(Ue=eI(Ue.filter(_e=>_e.value!=null&&(_e.hide!==!0||n.includeHidden)),S,eG));var Xe=Ue.length>0,Z=N.createElement(HF,{allowEscapeViewBox:s,animationDuration:c,animationEasing:f,isAnimationActive:v,active:Ee,coordinate:ze,hasPayload:Xe,offset:b,position:A,reverseDirection:O,useTranslate3d:I,viewBox:Y,wrapperStyle:P,lastBoundingBox:Ae,innerRef:J,hasPortalFromProps:!!W},tG(p,K_(K_({},n),{},{payload:Ue,label:de,active:Ee,activeIndex:ie,coordinate:ze,accessibilityLayer:we})));return N.createElement(N.Fragment,null,ay.createPortal(Z,$e),Ee&&N.createElement(Iq,{cursor:M,tooltipEventType:se,coordinate:ze,payload:Ue,index:ie}))}var bl=e=>null;bl.displayName="Cell";function nG(e,t,r){return(t=iG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iG(e){var t=aG(e,"string");return typeof t=="symbol"?t:t+""}function aG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class sG{constructor(t){nG(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Y_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y_(Object(r),!0).forEach(function(n){lG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lG(e,t,r){return(t=cG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cG(e){var t=uG(e,"string");return typeof t=="symbol"?t:t+""}function uG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dG={cacheSize:2e3,enableCache:!0},pP=oG({},dG),Z_=new sG(pP.cacheSize),fG={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Q_="recharts_measurement_span";function hG(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",c=t.letterSpacing||"",f=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(c,"|").concat(f)}var J_=(e,t)=>{try{var r=document.getElementById(Q_);r||(r=document.createElement("span"),r.setAttribute("id",Q_),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,fG,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Qu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Dp.isSsr)return{width:0,height:0};if(!pP.enableCache)return J_(t,r);var n=hG(t,r),i=Z_.get(n);if(i)return i;var s=J_(t,r);return Z_.set(n,s),s},mP;function pG(e,t,r){return(t=mG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mG(e){var t=gG(e,"string");return typeof t=="symbol"?t:t+""}function gG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,t3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xG=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,vG=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,yG={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wG=["cm","mm","pt","pc","in","Q","px"];function bG(e){return wG.includes(e)}var gc="NaN";function EG(e,t){return e*yG[t]}class Un{static parse(t){var r,[,n,i]=(r=vG.exec(t))!==null&&r!==void 0?r:[];return n==null?Un.NaN:new Un(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Vi(t)&&(this.unit=""),r!==""&&!xG.test(r)&&(this.num=NaN,this.unit=""),bG(r)&&(this.num=EG(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Un(NaN,""):new Un(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Un(NaN,""):new Un(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Un(NaN,""):new Un(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Un(NaN,""):new Un(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Vi(this.num)}}mP=Un;pG(Un,"NaN",new mP(NaN,""));function gP(e){if(e==null||e.includes(gc))return gc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,s]=(r=e3.exec(t))!==null&&r!==void 0?r:[],c=Un.parse(n??""),f=Un.parse(s??""),p=i==="*"?c.multiply(f):c.divide(f);if(p.isNaN())return gc;t=t.replace(e3,p.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,v,b,S]=(m=t3.exec(t))!==null&&m!==void 0?m:[],A=Un.parse(v??""),O=Un.parse(S??""),I=b==="+"?A.add(O):A.subtract(O);if(I.isNaN())return gc;t=t.replace(t3,I.toString())}return t}var r3=/\(([^()]*)\)/;function SG(e){for(var t=e,r;(r=r3.exec(t))!=null;){var[,n]=r;t=t.replace(r3,gP(n))}return t}function CG(e){var t=e.replace(/\s+/g,"");return t=SG(t),t=gP(t),t}function AG(e){try{return CG(e)}catch{return gc}}function px(e){var t=AG(e.slice(5,-1));return t===gc?"":t}var _G=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],NG=["dx","dy","angle","className","breakAll"];function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zv.apply(null,arguments)}function n3(e,t){if(e==null)return{};var r,n,i=OG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function OG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xP=/[ \f\n\r\t\v\u2028\u2029]+/,vP=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];pr(t)||(r?i=t.toString().split(""):i=t.toString().split(xP));var s=i.map(f=>({word:f,width:Qu(f,n).width})),c=r?0:Qu("",n).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}};function IG(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var yP=(e,t,r,n)=>e.reduce((i,s)=>{var{word:c,width:f}=s,p=i[i.length-1];if(p&&f!=null&&(t==null||n||p.width+f+r<Number(t)))p.words.push(c),p.width+=f+r;else{var m={words:[c],width:f};i.push(m)}return i},[]),wP=e=>e.reduce((t,r)=>t.width>r.width?t:r),TG="",i3=(e,t,r,n,i,s,c,f)=>{var p=e.slice(0,t),m=vP({breakAll:r,style:n,children:p+TG});if(!m)return[!1,[]];var v=yP(m.wordsWithComputedWidth,s,c,f),b=v.length>i||wP(v).width>Number(s);return[b,v]},kG=(e,t,r,n,i)=>{var{maxLines:s,children:c,style:f,breakAll:p}=e,m=at(s),v=String(c),b=yP(t,n,r,i);if(!m||i)return b;var S=b.length>s||wP(b).width>Number(n);if(!S)return b;for(var A=0,O=v.length-1,I=0,P;A<=O&&I<=v.length-1;){var M=Math.floor((A+O)/2),L=M-1,[R,U]=i3(v,L,p,f,s,n,r,i),[W]=i3(v,M,p,f,s,n,r,i);if(!R&&!W&&(A=M+1),R&&W&&(O=M-1),!R&&W){P=U;break}I++}return P||b},a3=e=>{var t=pr(e)?[]:e.toString().split(xP);return[{words:t,width:void 0}]},PG=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:s,maxLines:c}=e;if((t||r)&&!Dp.isSsr){var f,p,m=vP({breakAll:s,children:n,style:i});if(m){var{wordsWithComputedWidth:v,spaceWidth:b}=m;f=v,p=b}else return a3(n);return kG({breakAll:s,children:n,maxLines:c,style:i},f,p,t,!!r)}return a3(n)},bP="#808080",jG={angle:0,breakAll:!1,capHeight:"0.71em",fill:bP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},em=N.forwardRef((e,t)=>{var r=Zr(e,jG),{x:n,y:i,lineHeight:s,capHeight:c,fill:f,scaleToFit:p,textAnchor:m,verticalAnchor:v}=r,b=n3(r,_G),S=N.useMemo(()=>PG({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:p,style:b.style,width:b.width}),[b.breakAll,b.children,b.maxLines,p,b.style,b.width]),{dx:A,dy:O,angle:I,className:P,breakAll:M}=b,L=n3(b,NG);if(!la(n)||!la(i)||S.length===0)return null;var R=Number(n)+(at(A)?A:0),U=Number(i)+(at(O)?O:0);if(!ar(R)||!ar(U))return null;var W;switch(v){case"start":W=px("calc(".concat(c,")"));break;case"middle":W=px("calc(".concat((S.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:W=px("calc(".concat(S.length-1," * -").concat(s,")"));break}var V=[];if(p){var H=S[0].width,{width:X}=b;V.push("scale(".concat(at(X)&&at(H)?X/H:1,")"))}return I&&V.push("rotate(".concat(I,", ").concat(R,", ").concat(U,")")),V.length&&(L.transform=V.join(" ")),N.createElement("text",zv({},Wi(L),{ref:t,x:R,y:U,className:Vt("recharts-text",P),textAnchor:m,fill:f.includes("url")?bP:f}),S.map((Y,we)=>{var se=Y.words.join(M?"":" ");return N.createElement("tspan",{x:R,dy:we===0?W:s,key:"".concat(se,"-").concat(we)},se)}))});em.displayName="Text";var RG=["labelRef"],MG=["content"];function s3(e,t){if(e==null)return{};var r,n,i=DG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function DG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function o3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o3(Object(r),!0).forEach(function(n){LG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LG(e,t,r){return(t=BG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BG(e){var t=FG(e,"string");return typeof t=="symbol"?t:t+""}function FG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ys(){return ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ys.apply(null,arguments)}var EP=N.createContext(null),SP=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c,children:f}=e,p=N.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c}),[t,r,n,i,s,c]);return N.createElement(EP.Provider,{value:p},f)},CP=()=>{var e=N.useContext(EP),t=$c();return e||$I(t)},UG=N.createContext(null),zG=()=>{var e=N.useContext(UG),t=Ze(hk);return e||t},$G=e=>{var{value:t,formatter:r}=e,n=pr(e.children)?t:e.children;return typeof r=="function"?r(n):n},rb=e=>e!=null&&typeof e=="function",WG=(e,t)=>{var r=In(t-e),n=Math.min(Math.abs(t-e),360);return r*n},VG=(e,t,r,n,i)=>{var{offset:s,className:c}=e,{cx:f,cy:p,innerRadius:m,outerRadius:v,startAngle:b,endAngle:S,clockWise:A}=i,O=(m+v)/2,I=WG(b,S),P=I>=0?1:-1,M,L;switch(t){case"insideStart":M=b+P*s,L=A;break;case"insideEnd":M=S-P*s,L=!A;break;case"end":M=S+P*s,L=A;break;default:throw new Error("Unsupported position ".concat(t))}L=I<=0?L:!L;var R=an(f,p,O,M),U=an(f,p,O,M+(L?1:-1)*359),W="M".concat(R.x,",").concat(R.y,`
    A`).concat(O,",").concat(O,",0,1,").concat(L?0:1,`,
    `).concat(U.x,",").concat(U.y),V=pr(e.id)?od("recharts-radial-line-"):e.id;return N.createElement("text",ys({},n,{dominantBaseline:"central",className:Vt("recharts-radial-bar-label",c)}),N.createElement("defs",null,N.createElement("path",{id:V,d:W})),N.createElement("textPath",{xlinkHref:"#".concat(V)},r))},HG=(e,t,r)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:c,startAngle:f,endAngle:p}=e,m=(f+p)/2;if(r==="outside"){var{x:v,y:b}=an(n,i,c+t,m);return{x:v,y:b,textAnchor:v>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var S=(s+c)/2,{x:A,y:O}=an(n,i,S,m);return{x:A,y:O,textAnchor:"middle",verticalAnchor:"middle"}},$v=e=>"cx"in e&&at(e.cx),qG=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,s;r!=null&&!$v(r)&&(s=r);var{x:c,y:f,upperWidth:p,lowerWidth:m,height:v}=t,b=c,S=c+(p-m)/2,A=(b+S)/2,O=(p+m)/2,I=b+p/2,P=v>=0?1:-1,M=P*n,L=P>0?"end":"start",R=P>0?"start":"end",U=p>=0?1:-1,W=U*n,V=U>0?"end":"start",H=U>0?"start":"end";if(i==="top"){var X={x:b+p/2,y:f-M,textAnchor:"middle",verticalAnchor:L};return Xr(Xr({},X),s?{height:Math.max(f-s.y,0),width:p}:{})}if(i==="bottom"){var Y={x:S+m/2,y:f+v+M,textAnchor:"middle",verticalAnchor:R};return Xr(Xr({},Y),s?{height:Math.max(s.y+s.height-(f+v),0),width:m}:{})}if(i==="left"){var we={x:A-W,y:f+v/2,textAnchor:V,verticalAnchor:"middle"};return Xr(Xr({},we),s?{width:Math.max(we.x-s.x,0),height:v}:{})}if(i==="right"){var se={x:A+O+W,y:f+v/2,textAnchor:H,verticalAnchor:"middle"};return Xr(Xr({},se),s?{width:Math.max(s.x+s.width-se.x,0),height:v}:{})}var ie=s?{width:O,height:v}:{};return i==="insideLeft"?Xr({x:A+W,y:f+v/2,textAnchor:H,verticalAnchor:"middle"},ie):i==="insideRight"?Xr({x:A+O-W,y:f+v/2,textAnchor:V,verticalAnchor:"middle"},ie):i==="insideTop"?Xr({x:b+p/2,y:f+M,textAnchor:"middle",verticalAnchor:R},ie):i==="insideBottom"?Xr({x:S+m/2,y:f+v-M,textAnchor:"middle",verticalAnchor:L},ie):i==="insideTopLeft"?Xr({x:b+W,y:f+M,textAnchor:H,verticalAnchor:R},ie):i==="insideTopRight"?Xr({x:b+p-W,y:f+M,textAnchor:V,verticalAnchor:R},ie):i==="insideBottomLeft"?Xr({x:S+W,y:f+v-M,textAnchor:H,verticalAnchor:L},ie):i==="insideBottomRight"?Xr({x:S+m-W,y:f+v-M,textAnchor:V,verticalAnchor:L},ie):i&&typeof i=="object"&&(at(i.x)||Ns(i.x))&&(at(i.y)||Ns(i.y))?Xr({x:c+ti(i.x,O),y:f+ti(i.y,v),textAnchor:"end",verticalAnchor:"end"},ie):Xr({x:I,y:f+v/2,textAnchor:"middle",verticalAnchor:"middle"},ie)},GG={angle:0,offset:5,zIndex:sn.label,position:"middle",textBreakAll:!1};function fo(e){var t=Zr(e,GG),{viewBox:r,position:n,value:i,children:s,content:c,className:f="",textBreakAll:p,labelRef:m}=t,v=zG(),b=CP(),S=n==="center"?b:v??b,A,O,I;if(r==null?A=S:$v(r)?A=r:A=$I(r),!A||pr(i)&&pr(s)&&!N.isValidElement(c)&&typeof c!="function")return null;var P=Xr(Xr({},t),{},{viewBox:A});if(N.isValidElement(c)){var{labelRef:M}=P,L=s3(P,RG);return N.cloneElement(c,L)}if(typeof c=="function"){var{content:R}=P,U=s3(P,MG);if(O=N.createElement(c,U),N.isValidElement(O))return O}else O=$G(t);var W=Wi(t);if($v(A)){if(n==="insideStart"||n==="insideEnd"||n==="end")return VG(t,n,O,W,A);I=HG(A,t.offset,t.position)}else I=qG(t,A);return N.createElement(Si,{zIndex:t.zIndex},N.createElement(em,ys({ref:m,className:Vt("recharts-label",f)},W,I,{textAnchor:IG(W.textAnchor)?W.textAnchor:I.textAnchor,breakAll:p}),O))}fo.displayName="Label";var KG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?N.createElement(fo,ys({key:"label-implicit"},n)):la(e)?N.createElement(fo,ys({key:"label-implicit",value:e},n)):N.isValidElement(e)?e.type===fo?N.cloneElement(e,Xr({key:"label-implicit"},n)):N.createElement(fo,ys({key:"label-implicit",content:e},n)):rb(e)?N.createElement(fo,ys({key:"label-implicit",content:e},n)):e&&typeof e=="object"?N.createElement(fo,ys({},e,{key:"label-implicit"},n)):null};function AP(e){var{label:t,labelRef:r}=e,n=CP();return KG(t,n,r)||null}var mx={},gx={},l3;function XG(){return l3||(l3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(gx)),gx}var xx={},c3;function YG(){return c3||(c3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(xx)),xx}var u3;function ZG(){return u3||(u3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XG(),r=YG(),n=Oy();function i(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=i})(mx)),mx}var vx,d3;function QG(){return d3||(d3=1,vx=ZG().last),vx}var JG=QG();const eK=da(JG);var tK=["valueAccessor"],rK=["dataKey","clockWise","id","textBreakAll","zIndex"];function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V0.apply(null,arguments)}function f3(e,t){if(e==null)return{};var r,n,i=nK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function nK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iK=e=>Array.isArray(e.value)?eK(e.value):e.value,_P=N.createContext(void 0),NP=_P.Provider,OP=N.createContext(void 0),aK=OP.Provider;function sK(){return N.useContext(_P)}function oK(){return N.useContext(OP)}function Vh(e){var{valueAccessor:t=iK}=e,r=f3(e,tK),{dataKey:n,clockWise:i,id:s,textBreakAll:c,zIndex:f}=r,p=f3(r,rK),m=sK(),v=oK(),b=m||v;return!b||!b.length?null:N.createElement(Si,{zIndex:f??sn.label},N.createElement(Yr,{className:"recharts-label-list"},b.map((S,A)=>{var O,I=pr(n)?t(S,A):Xt(S&&S.payload,n),P=pr(s)?{}:{id:"".concat(s,"-").concat(A)};return N.createElement(fo,V0({key:"label-".concat(A)},Wi(S),p,P,{fill:(O=r.fill)!==null&&O!==void 0?O:S.fill,parentViewBox:S.parentViewBox,value:I,textBreakAll:c,viewBox:S.viewBox,index:A,zIndex:0}))})))}Vh.displayName="LabelList";function nb(e){var{label:t}=e;return t?t===!0?N.createElement(Vh,{key:"labelList-implicit"}):N.isValidElement(t)||rb(t)?N.createElement(Vh,{key:"labelList-implicit",content:t}):typeof t=="object"?N.createElement(Vh,V0({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var IP=e=>e.graphicalItems.polarItems,lK=pe([kr,zd],Aw),tm=pe([IP,Dr,lK],_w),cK=pe([tm],Nw),rm=pe([cK,Wp],Ow),uK=pe([rm,Dr,tm],Tw);pe([rm,Dr,tm],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var s,c=Xt(n,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:Xt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var h3=()=>{},dK=pe([rm,Dr,tm,Zp,kr],Rw),fK=pe([Dr,Pw,jw,h3,dK,h3,$t,kr],Mw),TP=pe([Dr,$t,rm,uK,Ud,kr,fK],Dw),hK=pe([TP,Dr,Kc],Fw);pe([Dr,TP,hK,kr],zw);var pK={radiusAxis:{},angleAxis:{}},kP=Ei({name:"polarAxis",initialState:pK,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Jte,removeRadiusAxis:ere,addAngleAxis:tre,removeAngleAxis:rre}=kP.actions,mK=kP.reducer;function p3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function m3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p3(Object(r),!0).forEach(function(n){gK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gK(e,t,r){return(t=xK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xK(e){var t=vK(e,"string");return typeof t=="symbol"?t:t+""}function vK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yK=(e,t)=>t,ib=pe([IP,yK],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),wK=[],ab=(e,t,r)=>r?.length===0?wK:r,PP=pe([Wp,ib,ab],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(s=>m3(m3({},t.presentationProps),s.props))),i!=null)return i}}),bK=pe([PP,ib,ab],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var s,c=Xt(n,t.nameKey,t.name),f;return r!=null&&(s=r[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?f=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?f=n.fill:f=t.fill,{value:zc(c,t.dataKey),color:f,payload:n,type:t.legendType}})}),EK=pe([PP,ib,ab,gn],(e,t,r,n)=>{if(!(t==null||e==null))return CX({offset:n,pieSettings:t,displayedData:e,cells:r})}),yx={exports:{}},rr={};var g3;function SK(){if(g3)return rr;g3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.for("react.view_transition"),A=Symbol.for("react.client.reference");function O(I){if(typeof I=="object"&&I!==null){var P=I.$$typeof;switch(P){case e:switch(I=I.type,I){case r:case i:case n:case p:case m:case S:return I;default:switch(I=I&&I.$$typeof,I){case c:case f:case b:case v:return I;case s:return I;default:return P}}case t:return P}}}return rr.ContextConsumer=s,rr.ContextProvider=c,rr.Element=e,rr.ForwardRef=f,rr.Fragment=r,rr.Lazy=b,rr.Memo=v,rr.Portal=t,rr.Profiler=i,rr.StrictMode=n,rr.Suspense=p,rr.SuspenseList=m,rr.isContextConsumer=function(I){return O(I)===s},rr.isContextProvider=function(I){return O(I)===c},rr.isElement=function(I){return typeof I=="object"&&I!==null&&I.$$typeof===e},rr.isForwardRef=function(I){return O(I)===f},rr.isFragment=function(I){return O(I)===r},rr.isLazy=function(I){return O(I)===b},rr.isMemo=function(I){return O(I)===v},rr.isPortal=function(I){return O(I)===t},rr.isProfiler=function(I){return O(I)===i},rr.isStrictMode=function(I){return O(I)===n},rr.isSuspense=function(I){return O(I)===p},rr.isSuspenseList=function(I){return O(I)===m},rr.isValidElementType=function(I){return typeof I=="string"||typeof I=="function"||I===r||I===i||I===n||I===p||I===m||typeof I=="object"&&I!==null&&(I.$$typeof===b||I.$$typeof===v||I.$$typeof===c||I.$$typeof===s||I.$$typeof===f||I.$$typeof===A||I.getModuleId!==void 0)},rr.typeOf=O,rr}var x3;function CK(){return x3||(x3=1,yx.exports=SK()),yx.exports}var AK=CK(),v3=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",y3=null,wx=null,jP=e=>{if(e===y3&&Array.isArray(wx))return wx;var t=[];return N.Children.forEach(e,r=>{pr(r)||(AK.isFragment(r)?t=t.concat(jP(r.props.children)):t.push(r))}),wx=t,y3=e,t};function nm(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>v3(i)):n=[v3(t)],jP(e).forEach(i=>{var s=gl(i,"type.displayName")||gl(i,"type.name");s&&n.indexOf(s)!==-1&&r.push(i)}),r}var bx={},w3;function _K(){return w3||(w3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(bx)),bx}var Ex,b3;function NK(){return b3||(b3=1,Ex=_K().isPlainObject),Ex}var OK=NK();const IK=da(OK);var E3,S3,C3,A3,_3;function N3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function O3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N3(Object(r),!0).forEach(function(n){TK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TK(e,t,r){return(t=kK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kK(e){var t=PK(e,"string");return typeof t=="symbol"?t:t+""}function PK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H0(){return H0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H0.apply(null,arguments)}function Vu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var I3=(e,t,r,n,i)=>{var s=r-n,c;return c=Wr(E3||(E3=Vu(["M ",",",""])),e,t),c+=Wr(S3||(S3=Vu(["L ",",",""])),e+r,t),c+=Wr(C3||(C3=Vu(["L ",",",""])),e+r-s/2,t+i),c+=Wr(A3||(A3=Vu(["L ",",",""])),e+r-s/2-n,t+i),c+=Wr(_3||(_3=Vu(["L ",","," Z"])),e,t),c},jK={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RK=e=>{var t=Zr(e,jK),{x:r,y:n,upperWidth:i,lowerWidth:s,height:c,className:f}=t,{animationEasing:p,animationDuration:m,animationBegin:v,isUpdateAnimationActive:b}=t,S=N.useRef(null),[A,O]=N.useState(-1),I=N.useRef(i),P=N.useRef(s),M=N.useRef(c),L=N.useRef(r),R=N.useRef(n),U=Md(e,"trapezoid-");if(N.useEffect(()=>{if(S.current&&S.current.getTotalLength)try{var Ce=S.current.getTotalLength();Ce&&O(Ce)}catch{}},[]),r!==+r||n!==+n||i!==+i||s!==+s||c!==+c||i===0&&s===0||c===0)return null;var W=Vt("recharts-trapezoid",f);if(!b)return N.createElement("g",null,N.createElement("path",H0({},Wi(t),{className:W,d:I3(r,n,i,s,c)})));var V=I.current,H=P.current,X=M.current,Y=L.current,we=R.current,se="0px ".concat(A===-1?1:A,"px"),ie="".concat(A,"px 0px"),be=tT(["strokeDasharray"],m,p);return N.createElement(Rd,{animationId:U,key:U,canBegin:A>0,duration:m,easing:p,isActive:b,begin:v},Ce=>{var re=Mr(V,i,Ce),ze=Mr(H,s,Ce),le=Mr(X,c,Ce),me=Mr(Y,r,Ce),Ee=Mr(we,n,Ce);S.current&&(I.current=re,P.current=ze,M.current=le,L.current=me,R.current=Ee);var Ae=Ce>0?{transition:be,strokeDasharray:ie}:{strokeDasharray:se};return N.createElement("path",H0({},Wi(t),{className:W,d:I3(me,Ee,re,ze,le),ref:S,style:O3(O3({},Ae),t.style)}))})},MK=["option","shapeType","activeClassName"];function DK(e,t){if(e==null)return{};var r,n,i=LK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function LK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function T3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function q0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T3(Object(r),!0).forEach(function(n){BK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BK(e,t,r){return(t=FK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FK(e){var t=UK(e,"string");return typeof t=="symbol"?t:t+""}function UK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zK(e,t){return q0(q0({},t),e)}function $K(e,t){return e==="symbols"}function k3(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return N.createElement(aT,r);case"trapezoid":return N.createElement(RK,r);case"sector":return N.createElement(cT,r);case"symbols":if($K(t))return N.createElement(gp,r);break;case"curve":return N.createElement(Mp,r);default:return null}}function WK(e){return N.isValidElement(e)?e.props:e}function G0(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,i=DK(e,MK),s;if(N.isValidElement(t))s=N.cloneElement(t,q0(q0({},i),WK(t)));else if(typeof t=="function")s=t(i,i.index);else if(IK(t)&&typeof t!="boolean"){var c=zK(t,i);s=N.createElement(k3,{shapeType:r,elementProps:c})}else{var f=i;s=N.createElement(k3,{shapeType:r,elementProps:f})}return i.isActive?N.createElement(Yr,{className:n},s):s}var im=(e,t,r)=>{var n=or();return(i,s)=>c=>{e?.(i,s,c),n(Hk({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},am=e=>{var t=or();return(r,n)=>i=>{e?.(r,n,i),t(JV())}},sm=(e,t,r)=>{var n=or();return(i,s)=>c=>{e?.(i,s,c),n(eH({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function sb(e){var{tooltipEntrySettings:t}=e,r=or(),n=zn(),i=N.useRef(null);return N.useLayoutEffect(()=>{n||(i.current===null?r(XV(t)):i.current!==t&&r(YV({prev:i.current,next:t})),i.current=t)},[t,r,n]),N.useLayoutEffect(()=>()=>{i.current&&(r(ZV(i.current)),i.current=null)},[r]),null}function RP(e){var{legendPayload:t}=e,r=or(),n=zn(),i=N.useRef(null);return N.useLayoutEffect(()=>{n||(i.current===null?r(ZI(t)):i.current!==t&&r(QI({prev:i.current,next:t})),i.current=t)},[r,n,t]),N.useLayoutEffect(()=>()=>{i.current&&(r(JI(i.current)),i.current=null)},[r]),null}function VK(e){var{legendPayload:t}=e,r=or(),n=Ze($t),i=N.useRef(null);return N.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(ZI(t)):i.current!==t&&r(QI({prev:i.current,next:t})),i.current=t)},[r,n,t]),N.useLayoutEffect(()=>()=>{i.current&&(r(JI(i.current)),i.current=null)},[r]),null}var Sx,HK=()=>{var[e]=N.useState(()=>od("uid-"));return e},qK=(Sx=g8.useId)!==null&&Sx!==void 0?Sx:HK;function GK(e,t){var r=qK();return t||(e?"".concat(e,"-").concat(r):r)}var KK=N.createContext(void 0),ob=e=>{var{id:t,type:r,children:n}=e,i=GK("recharts-".concat(r),t);return N.createElement(KK.Provider,{value:i},n(i))},XK={cartesianItems:[],polarItems:[]},MP=Ei({name:"graphicalItems",initialState:XK,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Or()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Ta(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Or()},removeCartesianGraphicalItem:{reducer(e,t){var r=Ta(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Or()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Or()},removePolarGraphicalItem:{reducer(e,t){var r=Ta(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Or()}}}),{addCartesianGraphicalItem:YK,replaceCartesianGraphicalItem:ZK,removeCartesianGraphicalItem:QK,addPolarGraphicalItem:JK,removePolarGraphicalItem:eX}=MP.actions,tX=MP.reducer,rX=e=>{var t=or(),r=N.useRef(null);return N.useLayoutEffect(()=>{r.current===null?t(YK(e)):r.current!==e&&t(ZK({prev:r.current,next:e})),r.current=e},[t,e]),N.useLayoutEffect(()=>()=>{r.current&&(t(QK(r.current)),r.current=null)},[t]),null},DP=N.memo(rX);function nX(e){var t=or();return N.useLayoutEffect(()=>(t(JK(e)),()=>{t(eX(e))}),[t,e]),null}var iX=["key"],aX=["onMouseEnter","onClick","onMouseLeave"],sX=["id"],oX=["id"];function P3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P3(Object(r),!0).forEach(function(n){lX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lX(e,t,r){return(t=cX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cX(e){var t=uX(e,"string");return typeof t=="symbol"?t:t+""}function uX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eo(){return Eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eo.apply(null,arguments)}function om(e,t){if(e==null)return{};var r,n,i=dX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function dX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fX(e){var t=N.useMemo(()=>nm(e.children,bl),[e.children]),r=Ze(n=>bK(n,e.id,t));return r==null?null:N.createElement(VK,{legendPayload:r})}var hX=N.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:s,fill:c,name:f,hide:p,tooltipType:m,id:v}=e,b={dataDefinedOnItem:n.map(S=>S.tooltipPayload),positions:n.map(S=>S.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:c,dataKey:t,nameKey:r,name:zc(f,t),hide:p,type:m,color:c,unit:"",graphicalItemId:v}};return N.createElement(sb,{tooltipEntrySettings:b})}),pX=(e,t)=>e>t?"start":e<t?"end":"middle",mX=(e,t,r)=>ti(typeof t=="function"?t(e):t,r,r*.8),gX=(e,t,r)=>{var{top:n,left:i,width:s,height:c}=t,f=sT(s,c),p=i+ti(e.cx,s,s/2),m=n+ti(e.cy,c,c/2),v=ti(e.innerRadius,f,0),b=mX(r,e.outerRadius,f),S=e.maxRadius||Math.sqrt(s*s+c*c)/2;return{cx:p,cy:m,innerRadius:v,outerRadius:b,maxRadius:S}},xX=(e,t)=>{var r=In(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function vX(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var yX=(e,t)=>{if(N.isValidElement(e))return N.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Vt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=om(t,iX);return N.createElement(Mp,Eo({},i,{type:"linear",className:r}))},wX=(e,t,r)=>{if(N.isValidElement(e))return N.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),N.isValidElement(n)))return n;var i=Vt("recharts-pie-label-text",vX(e));return N.createElement(em,Eo({},t,{alignmentBaseline:"middle",className:i}),n)};function bX(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:s,dataKey:c}=r;if(!n||!i||!t)return null;var f=$i(r),p=Nc(i),m=Nc(s),v=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,b=t.map((S,A)=>{var O=(S.startAngle+S.endAngle)/2,I=an(S.cx,S.cy,S.outerRadius+v,O),P=Vr(Vr(Vr(Vr({},f),S),{},{stroke:"none"},p),{},{index:A,textAnchor:pX(I.x,S.cx)},I),M=Vr(Vr(Vr(Vr({},f),S),{},{fill:"none",stroke:S.fill},m),{},{index:A,points:[an(S.cx,S.cy,S.outerRadius,O),I],key:"line"});return N.createElement(Si,{zIndex:sn.label,key:"label-".concat(S.startAngle,"-").concat(S.endAngle,"-").concat(S.midAngle,"-").concat(A)},N.createElement(Yr,null,s&&yX(s,M),wX(i,P,Xt(S,c))))});return N.createElement(Yr,{className:"recharts-pie-labels"},b)}function EX(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?N.createElement(nb,{label:i}):N.createElement(bX,{sectors:t,props:r,showLabels:n})}function SX(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:s,id:c}=e,f=Ze(bo),p=Ze(Yw),m=Ze(FH),{onMouseEnter:v,onClick:b,onMouseLeave:S}=i,A=om(i,aX),O=im(v,i.dataKey,c),I=am(S),P=sm(b,i.dataKey,c);return t==null||t.length===0?null:N.createElement(N.Fragment,null,t.map((M,L)=>{if(M?.startAngle===0&&M?.endAngle===0&&t.length!==1)return null;var R=m==null||m===c,U=String(L)===f&&(p==null||i.dataKey===p)&&R,W=f?n:null,V=r&&U?r:W,H=Vr(Vr({},M),{},{stroke:M.stroke,tabIndex:-1,[Dy]:L,[Ly]:c});return N.createElement(Yr,Eo({key:"sector-".concat(M?.startAngle,"-").concat(M?.endAngle,"-").concat(M.midAngle,"-").concat(L),tabIndex:-1,className:"recharts-pie-sector"},Uc(A,M,L),{onMouseEnter:O(M,L),onMouseLeave:I(M,L),onClick:P(M,L)}),N.createElement(G0,Eo({option:s??V,index:L,shapeType:"sector",isActive:U},H)))}))}function CX(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:s}=e,{cornerRadius:c,startAngle:f,endAngle:p,dataKey:m,nameKey:v,tooltipType:b}=r,S=Math.abs(r.minAngle),A=xX(f,p),O=Math.abs(A),I=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,P=n.filter(V=>Xt(V,m,0)!==0).length,M=(O>=360?P:P-1)*I,L=O-P*S-M,R=n.reduce((V,H)=>{var X=Xt(H,m,0);return V+(at(X)?X:0)},0),U;if(R>0){var W;U=n.map((V,H)=>{var X=Xt(V,m,0),Y=Xt(V,v,H),we=gX(r,s,V),se=(at(X)?X:0)/R,ie,be=Vr(Vr({},V),i&&i[H]&&i[H].props);H?ie=W.endAngle+In(A)*I*(X!==0?1:0):ie=f;var Ce=ie+In(A)*((X!==0?S:0)+se*L),re=(ie+Ce)/2,ze=(we.innerRadius+we.outerRadius)/2,le=[{name:Y,value:X,payload:be,dataKey:m,type:b,graphicalItemId:r.id}],me=an(we.cx,we.cy,ze,re);return W=Vr(Vr(Vr(Vr({},r.presentationProps),{},{percent:se,cornerRadius:typeof c=="string"?parseFloat(c):c,name:Y,tooltipPayload:le,midAngle:re,middleRadius:ze,tooltipPosition:me},be),we),{},{value:X,dataKey:m,startAngle:ie,endAngle:Ce,payload:be,paddingAngle:In(A)*I}),W})}return U}function AX(e){var{showLabels:t,sectors:r,children:n}=e,i=N.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return N.createElement(aK,{value:t?i:void 0},n)}function _X(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:i,isAnimationActive:s,animationBegin:c,animationDuration:f,animationEasing:p,activeShape:m,inactiveShape:v,onAnimationStart:b,onAnimationEnd:S}=t,A=Md(t,"recharts-pie-"),O=r.current,[I,P]=N.useState(!1),M=N.useCallback(()=>{typeof S=="function"&&S(),P(!1)},[S]),L=N.useCallback(()=>{typeof b=="function"&&b(),P(!0)},[b]);return N.createElement(AX,{showLabels:!I,sectors:i},N.createElement(Rd,{animationId:A,begin:c,duration:f,isActive:s,easing:p,onAnimationStart:L,onAnimationEnd:M,key:A},R=>{var U=[],W=i&&i[0],V=W?.startAngle;return i?.forEach((H,X)=>{var Y=O&&O[X],we=X>0?gl(H,"paddingAngle",0):0;if(Y){var se=Mr(Y.endAngle-Y.startAngle,H.endAngle-H.startAngle,R),ie=Vr(Vr({},H),{},{startAngle:V+we,endAngle:V+se+we});U.push(ie),V=ie.endAngle}else{var{endAngle:be,startAngle:Ce}=H,re=Mr(0,be-Ce,R),ze=Vr(Vr({},H),{},{startAngle:V+we,endAngle:V+re+we});U.push(ze),V=ze.endAngle}}),r.current=U,N.createElement(Yr,null,N.createElement(SX,{sectors:U,activeShape:m,inactiveShape:v,allOtherPieProps:t,shape:t.shape,id:n}))}),N.createElement(EX,{showLabels:!I,sectors:i,props:t}),t.children)}var NX={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:sn.area};function OX(e){var{id:t}=e,r=om(e,sX),{hide:n,className:i,rootTabIndex:s}=e,c=N.useMemo(()=>nm(e.children,bl),[e.children]),f=Ze(v=>EK(v,t,c)),p=N.useRef(null),m=Vt("recharts-pie",i);return n||f==null?(p.current=null,N.createElement(Yr,{tabIndex:s,className:m})):N.createElement(Si,{zIndex:e.zIndex},N.createElement(hX,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:f,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),N.createElement(Yr,{tabIndex:s,className:m},N.createElement(_X,{props:Vr(Vr({},r),{},{sectors:f}),previousSectorsRef:p,id:t})))}function LP(e){var t=Zr(e,NX),{id:r}=t,n=om(t,oX),i=$i(n);return N.createElement(ob,{id:r,type:"pie"},s=>N.createElement(N.Fragment,null,N.createElement(nX,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),N.createElement(fX,Eo({},n,{id:s})),N.createElement(OX,Eo({},n,{id:s}))))}LP.displayName="Pie";function j3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function R3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j3(Object(r),!0).forEach(function(n){IX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IX(e,t,r){return(t=TX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TX(e){var t=kX(e,"string");return typeof t=="symbol"?t:t+""}function kX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BP=0,PX={xAxis:{},yAxis:{},zAxis:{}},FP=Ei({name:"cartesianAxis",initialState:PX,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Or()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Or()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Or()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Or()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Or()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Or()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Or()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Or()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Or()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-s[0])<=1)return;var c=[...s,n].slice(-3);e.yAxis[r]=R3(R3({},e.yAxis[r]),{},{width:n,widthHistory:c})}}}}),{addXAxis:jX,replaceXAxis:RX,removeXAxis:MX,addYAxis:DX,replaceYAxis:LX,removeYAxis:BX,addZAxis:nre,replaceZAxis:ire,removeZAxis:are,updateYAxisWidth:FX}=FP.actions,UX=FP.reducer,zX=pe([gn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),$X=pe([zX,Ms,Ds],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),UP=()=>Ze($X),M3=(e,t,r)=>{var n=r??e;if(!pr(n))return ti(n,t,0)},WX=(e,t,r)=>{var n={},i=e.filter(qp),s=e.filter(m=>m.stackId==null),c=i.reduce((m,v)=>(m[v.stackId]||(m[v.stackId]=[]),m[v.stackId].push(v),m),n),f=Object.entries(c).map(m=>{var[v,b]=m,S=b.map(O=>O.dataKey),A=M3(t,r,b[0].barSize);return{stackId:v,dataKeys:S,barSize:A}}),p=s.map(m=>{var v=[m.dataKey].filter(S=>S!=null),b=M3(t,r,m.barSize);return{stackId:void 0,dataKeys:v,barSize:b}});return[...f,...p]};function D3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ih(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D3(Object(r),!0).forEach(function(n){VX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VX(e,t,r){return(t=HX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HX(e){var t=qX(e,"string");return typeof t=="symbol"?t:t+""}function qX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GX(e,t,r,n,i){var s=n.length;if(!(s<1)){var c=ti(e,r,0,!0),f,p=[];if(ar(n[0].barSize)){var m=!1,v=r/s,b=n.reduce((M,L)=>M+(L.barSize||0),0);b+=(s-1)*c,b>=r&&(b-=(s-1)*c,c=0),b>=r&&v>0&&(m=!0,v*=.9,b=s*v);var S=(r-b)/2>>0,A={offset:S-c,size:0};f=n.reduce((M,L)=>{var R,U={stackId:L.stackId,dataKeys:L.dataKeys,position:{offset:A.offset+A.size+c,size:m?v:(R=L.barSize)!==null&&R!==void 0?R:0}},W=[...M,U];return A=W[W.length-1].position,W},p)}else{var O=ti(t,r,0,!0);r-2*O-(s-1)*c<=0&&(c=0);var I=(r-2*O-(s-1)*c)/s;I>1&&(I>>=0);var P=ar(i)?Math.min(I,i):I;f=n.reduce((M,L,R)=>[...M,{stackId:L.stackId,dataKeys:L.dataKeys,position:{offset:O+(I+c)*R+(I-P)/2,size:P}}],p)}return f}}var KX=(e,t,r,n,i,s,c)=>{var f=pr(c)?t:c,p=GX(r,n,i!==s?i:s,e,f);return i!==s&&p!=null&&(p=p.map(m=>Ih(Ih({},m),{},{position:Ih(Ih({},m.position),{},{offset:m.position.offset-i/2})}))),p},XX=(e,t)=>{var r=Sw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:s}=i;if(s)return s.find(c=>c.key===r)}}}};function YX(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ar(e.zIndex)?e.zIndex:t}var zP=e=>{var{chartData:t}=e,r=or(),n=zn();return N.useEffect(()=>n?()=>{}:(r(H_(t)),()=>{r(H_(void 0))}),[t,r,n]),null},L3={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},$P=Ei({name:"brush",initialState:L3,reducers:{setBrushSettings(e,t){return t.payload==null?L3:t.payload}}}),{setBrushSettings:sre}=$P.actions,ZX=$P.reducer;function B3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Th(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B3(Object(r),!0).forEach(function(n){WP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WP(e,t,r){return(t=QX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QX(e){var t=JX(e,"string");return typeof t=="symbol"?t:t+""}function JX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eY=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return{x:Math.min(r,i),y:Math.min(n,s),width:Math.abs(i-r),height:Math.abs(s-n)}},tY=e=>{var{x1:t,y1:r,x2:n,y2:i}=e;return eY({x:t,y:r},{x:n,y:i})};class lm{static create(t){return new lm(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}WP(lm,"EPS",1e-4);var rY=e=>{var t=Object.keys(e).reduce((r,n)=>Th(Th({},r),{},{[n]:lm.create(e[n])}),{});return Th(Th({},t),{},{apply(r){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(r).map(s=>{var[c,f]=s;return[c,t[c].apply(f,{bandAware:n,position:i})]}))},isInRange(r){return Object.keys(r).every(n=>t[n].isInRange(r[n]))}})};function nY(e){return(e%180+180)%180}var iY=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=nY(i),c=s*Math.PI/180,f=Math.atan(n/r),p=c>f&&c<Math.PI-f?n/Math.sin(c):r/Math.cos(c);return Math.abs(p)},aY={dots:[],areas:[],lines:[]},VP=Ei({name:"referenceElements",initialState:aY,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ta(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ta(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ta(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:ore,removeDot:lre,addArea:cre,removeArea:ure,addLine:sY,removeLine:oY}=VP.actions,lY=VP.reducer,HP=N.createContext(void 0),cY=e=>{var{children:t}=e,[r]=N.useState("".concat(od("recharts"),"-clip")),n=UP();if(n==null)return null;var{x:i,y:s,width:c,height:f}=n;return N.createElement(HP.Provider,{value:r},N.createElement("defs",null,N.createElement("clipPath",{id:r},N.createElement("rect",{x:i,y:s,height:f,width:c}))),t)},uY=()=>N.useContext(HP);function F3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function U3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F3(Object(r),!0).forEach(function(n){dY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dY(e,t,r){return(t=fY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fY(e){var t=hY(e,"string");return typeof t=="symbol"?t:t+""}function hY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K0.apply(null,arguments)}var pY=(e,t)=>{var r;if(N.isValidElement(e))r=N.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{if(!ar(t.x1)||!ar(t.y1)||!ar(t.x2)||!ar(t.y2))return null;r=N.createElement("line",K0({},t,{className:"recharts-reference-line-line"}))}return r},mY=(e,t,r,n,i,s)=>{var{x:c,width:f}=s,p=i.y.apply(e,{position:r});if(Vi(p)||t==="discard"&&!i.y.isInRange(p))return null;var m=[{x:c+f,y:p},{x:c,y:p}];return n==="left"?m.reverse():m},gY=(e,t,r,n,i,s)=>{var{y:c,height:f}=s,p=i.x.apply(e,{position:r});if(Vi(p)||t==="discard"&&!i.x.isInRange(p))return null;var m=[{x:p,y:c+f},{x:p,y:c}];return n==="top"?m.reverse():m},xY=(e,t,r,n)=>{var i=e.map(s=>n.apply(s,{position:r}));return t==="discard"&&i.some(s=>!n.isInRange(s))?null:i},vY=(e,t,r,n,i,s)=>{var{x:c,y:f,segment:p,ifOverflow:m}=s,v=la(c),b=la(f);return b?mY(f,m,r,i,e,t):v?gY(c,m,r,n,e,t):p!=null&&p.length===2?xY(p,m,r,e):null};function yY(e){var t=or();return N.useEffect(()=>(t(sY(e)),()=>{t(oY(e))})),null}function wY(e){var{xAxisId:t,yAxisId:r,shape:n,className:i,ifOverflow:s}=e,c=zn(),f=uY(),p=Ze(V=>Za(V,t)),m=Ze(V=>Qa(V,r)),v=Ze(V=>Rc(V,"xAxis",t,c)),b=Ze(V=>Rc(V,"yAxis",r,c)),S=$c();if(!f||!S||p==null||m==null||v==null||b==null)return null;var A=rY({x:v,y:b}),O=vY(A,S,e.position,p.orientation,m.orientation,e);if(!O)return null;var[{x:I,y:P},{x:M,y:L}]=O,R=s==="hidden"?"url(#".concat(f,")"):void 0,U=U3(U3({clipPath:R},Wi(e)),{},{x1:I,y1:P,x2:M,y2:L}),W=tY({x1:I,y1:P,x2:M,y2:L});return N.createElement(Si,{zIndex:e.zIndex},N.createElement(Yr,{className:Vt("recharts-reference-line",i)},pY(n,U),N.createElement(SP,K0({},W,{lowerWidth:W.width,upperWidth:W.width}),N.createElement(AP,{label:e.label}),e.children)))}var bY={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:sn.line};function qP(e){var t=Zr(e,bY);return N.createElement(N.Fragment,null,N.createElement(yY,{yAxisId:t.yAxisId,xAxisId:t.xAxisId,ifOverflow:t.ifOverflow,x:t.x,y:t.y,segment:t.segment}),N.createElement(wY,t))}qP.displayName="ReferenceLine";function GP(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var i=e[n];i!==void 0&&r.push(i)}return r}function EY(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return iY(n,r)}function SY(e,t,r){var n=r==="width",{x:i,y:s,width:c,height:f}=e;return t===1?{start:n?i:s,end:n?i+c:s+f}:{start:n?i+c:s+f,end:n?i:s}}function bd(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function CY(e,t){return GP(e,t+1)}function AY(e,t,r,n,i){for(var s=(n||[]).slice(),{start:c,end:f}=t,p=0,m=1,v=c,b=function(){var O=n?.[p];if(O===void 0)return{v:GP(n,m)};var I=p,P,M=()=>(P===void 0&&(P=r(O,I)),P),L=O.coordinate,R=p===0||bd(e,L,M,v,f);R||(p=0,v=c,m+=1),R&&(v=L+e*(M()/2+i),p+=m)},S;m<=s.length;)if(S=b(),S)return S.v;return[]}function _Y(e,t,r,n,i){var s=(n||[]).slice(),c=s.length;if(c===0)return[];for(var{start:f,end:p}=t,m=1;m<=c;m++){for(var v=(c-1)%m,b=f,S=!0,A=function(){var L=n[O],R=O,U,W=()=>(U===void 0&&(U=r(L,R)),U),V=L.coordinate,H=O===v||bd(e,V,W,b,p);if(!H)return S=!1,1;H&&(b=V+e*(W()/2+i))},O=v;O<c&&!A();O+=m);if(S){for(var I=[],P=v;P<c;P+=m)I.push(n[P]);return I}}return[]}function z3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Jn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z3(Object(r),!0).forEach(function(n){NY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NY(e,t,r){return(t=OY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OY(e){var t=IY(e,"string");return typeof t=="symbol"?t:t+""}function IY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TY(e,t,r,n,i){for(var s=(n||[]).slice(),c=s.length,{start:f}=t,{end:p}=t,m=function(S){var A=s[S],O,I=()=>(O===void 0&&(O=r(A,S)),O);if(S===c-1){var P=e*(A.coordinate+e*I()/2-p);s[S]=A=Jn(Jn({},A),{},{tickCoord:P>0?A.coordinate-P*e:A.coordinate})}else s[S]=A=Jn(Jn({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var M=bd(e,A.tickCoord,I,f,p);M&&(p=A.tickCoord-e*(I()/2+i),s[S]=Jn(Jn({},A),{},{isShow:!0}))}},v=c-1;v>=0;v--)m(v);return s}function kY(e,t,r,n,i,s){var c=(n||[]).slice(),f=c.length,{start:p,end:m}=t;if(s){var v=n[f-1],b=r(v,f-1),S=e*(v.coordinate+e*b/2-m);if(c[f-1]=v=Jn(Jn({},v),{},{tickCoord:S>0?v.coordinate-S*e:v.coordinate}),v.tickCoord!=null){var A=bd(e,v.tickCoord,()=>b,p,m);A&&(m=v.tickCoord-e*(b/2+i),c[f-1]=Jn(Jn({},v),{},{isShow:!0}))}}for(var O=s?f-1:f,I=function(L){var R=c[L],U,W=()=>(U===void 0&&(U=r(R,L)),U);if(L===0){var V=e*(R.coordinate-e*W()/2-p);c[L]=R=Jn(Jn({},R),{},{tickCoord:V<0?R.coordinate-V*e:R.coordinate})}else c[L]=R=Jn(Jn({},R),{},{tickCoord:R.coordinate});if(R.tickCoord!=null){var H=bd(e,R.tickCoord,W,p,m);H&&(p=R.tickCoord+e*(W()/2+i),c[L]=Jn(Jn({},R),{},{isShow:!0}))}},P=0;P<O;P++)I(P);return c}function lb(e,t,r){var{tick:n,ticks:i,viewBox:s,minTickGap:c,orientation:f,interval:p,tickFormatter:m,unit:v,angle:b}=e;if(!i||!i.length||!n)return[];if(at(p)||Dp.isSsr){var S;return(S=CY(i,at(p)?p:0))!==null&&S!==void 0?S:[]}var A=[],O=f==="top"||f==="bottom"?"width":"height",I=v&&O==="width"?Qu(v,{fontSize:t,letterSpacing:r}):{width:0,height:0},P=(R,U)=>{var W=typeof m=="function"?m(R.value,U):R.value;return O==="width"?EY(Qu(W,{fontSize:t,letterSpacing:r}),I,b):Qu(W,{fontSize:t,letterSpacing:r})[O]},M=i.length>=2?In(i[1].coordinate-i[0].coordinate):1,L=SY(s,M,O);return p==="equidistantPreserveStart"?AY(M,L,P,i,c):p==="equidistantPreserveEnd"?_Y(M,L,P,i,c):(p==="preserveStart"||p==="preserveStartEnd"?A=kY(M,L,P,i,c,p==="preserveStartEnd"):A=TY(M,L,P,i,c),A.filter(R=>R.isShow))}var PY=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=e,c=0;if(t){Array.from(t).forEach(v=>{if(v){var b=v.getBoundingClientRect();b.width>c&&(c=b.width)}});var f=r?r.getBoundingClientRect().width:0,p=i+s,m=c+p+f+(r?n:0);return Math.round(m)}return 0},jY=["axisLine","width","height","className","hide","ticks","axisType"];function RY(e,t){if(e==null)return{};var r,n,i=MY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function MY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function El(){return El=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},El.apply(null,arguments)}function $3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$3(Object(r),!0).forEach(function(n){DY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DY(e,t,r){return(t=LY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LY(e){var t=BY(e,"string");return typeof t=="symbol"?t:t+""}function BY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var As={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:sn.axis};function FY(e){var{x:t,y:r,width:n,height:i,orientation:s,mirror:c,axisLine:f,otherSvgProps:p}=e;if(!f)return null;var m=nn(nn(nn({},p),$i(f)),{},{fill:"none"});if(s==="top"||s==="bottom"){var v=+(s==="top"&&!c||s==="bottom"&&c);m=nn(nn({},m),{},{x1:t,y1:r+v*i,x2:t+n,y2:r+v*i})}else{var b=+(s==="left"&&!c||s==="right"&&c);m=nn(nn({},m),{},{x1:t+b*n,y1:r,x2:t+b*n,y2:r+i})}return N.createElement("line",El({},m,{className:Vt("recharts-cartesian-axis-line",gl(f,"className"))}))}function UY(e,t,r,n,i,s,c,f,p){var m,v,b,S,A,O,I=f?-1:1,P=e.tickSize||c,M=at(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":m=v=e.coordinate,S=r+ +!f*i,b=S-I*P,O=b-I*p,A=M;break;case"left":b=S=e.coordinate,v=t+ +!f*n,m=v-I*P,A=m-I*p,O=M;break;case"right":b=S=e.coordinate,v=t+ +f*n,m=v+I*P,A=m+I*p,O=M;break;default:m=v=e.coordinate,S=r+ +f*i,b=S+I*P,O=b+I*p,A=M;break}return{line:{x1:m,y1:b,x2:v,y2:S},tick:{x:A,y:O}}}function zY(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function $Y(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function WY(e){var{option:t,tickProps:r,value:n}=e,i,s=Vt(r.className,"recharts-cartesian-axis-tick-value");if(N.isValidElement(t))i=N.cloneElement(t,nn(nn({},r),{},{className:s}));else if(typeof t=="function")i=t(nn(nn({},r),{},{className:s}));else{var c="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(c=Vt(c,t?.className)),i=N.createElement(em,El({},r,{className:c}),n)}return i}var VY=N.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:s,tickFormatter:c,unit:f,padding:p,tickTextProps:m,orientation:v,mirror:b,x:S,y:A,width:O,height:I,tickSize:P,tickMargin:M,fontSize:L,letterSpacing:R,getTicksConfig:U,events:W,axisType:V}=e,H=lb(nn(nn({},U),{},{ticks:r}),L,R),X=zY(v,b),Y=$Y(v,b),we=$i(U),se=Nc(n),ie={};typeof i=="object"&&(ie=i);var be=nn(nn({},we),{},{fill:"none"},ie),Ce=H.map(le=>nn({entry:le},UY(le,S,A,O,I,v,P,b,M))),re=Ce.map(le=>{var{entry:me,line:Ee}=le;return N.createElement(Yr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(me.value,"-").concat(me.coordinate,"-").concat(me.tickCoord)},i&&N.createElement("line",El({},be,Ee,{className:Vt("recharts-cartesian-axis-tick-line",gl(i,"className"))})))}),ze=Ce.map((le,me)=>{var{entry:Ee,tick:Ae}=le,J=nn(nn(nn(nn({textAnchor:X,verticalAnchor:Y},we),{},{stroke:"none",fill:s},se),Ae),{},{index:me,payload:Ee,visibleTicksCount:H.length,tickFormatter:c,padding:p},m);return N.createElement(Yr,El({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Ee.value,"-").concat(Ee.coordinate,"-").concat(Ee.tickCoord)},Uc(W,Ee,me)),n&&N.createElement(WY,{option:n,tickProps:J,value:"".concat(typeof c=="function"?c(Ee.value,me):Ee.value).concat(f||"")}))});return N.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(V,"-ticks")},ze.length>0&&N.createElement(Si,{zIndex:sn.label},N.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(V,"-tick-labels"),ref:t},ze)),re.length>0&&N.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(V,"-tick-lines")},re))}),HY=N.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:s,hide:c,ticks:f,axisType:p}=e,m=RY(e,jY),[v,b]=N.useState(""),[S,A]=N.useState(""),O=N.useRef(null);N.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var P;return PY({ticks:O.current,label:(P=e.labelRef)===null||P===void 0?void 0:P.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var I=N.useCallback(P=>{if(P){var M=P.getElementsByClassName("recharts-cartesian-axis-tick-value");O.current=M;var L=M[0];if(L){var R=window.getComputedStyle(L),U=R.fontSize,W=R.letterSpacing;(U!==v||W!==S)&&(b(U),A(W))}}},[v,S]);return c||n!=null&&n<=0||i!=null&&i<=0?null:N.createElement(Si,{zIndex:e.zIndex},N.createElement(Yr,{className:Vt("recharts-cartesian-axis",s)},N.createElement(FY,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:$i(e)}),N.createElement(VY,{ref:I,axisType:p,events:m,fontSize:v,getTicksConfig:e,height:e.height,letterSpacing:S,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:f,unit:e.unit,width:e.width,x:e.x,y:e.y}),N.createElement(SP,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},N.createElement(AP,{label:e.label,labelRef:e.labelRef}),e.children)))}),cb=N.forwardRef((e,t)=>{var r=Zr(e,As);return N.createElement(HY,El({},r,{ref:t}))});cb.displayName="CartesianAxis";var qY=["x1","y1","x2","y2","key"],GY=["offset"],KY=["xAxisId","yAxisId"],XY=["xAxisId","yAxisId"];function W3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ei(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W3(Object(r),!0).forEach(function(n){YY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YY(e,t,r){return(t=ZY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZY(e){var t=QY(e,"string");return typeof t=="symbol"?t:t+""}function QY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cl.apply(null,arguments)}function X0(e,t){if(e==null)return{};var r,n,i=JY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function JY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var eZ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:s,height:c,ry:f}=e;return N.createElement("rect",{x:n,y:i,ry:f,width:s,height:c,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function KP(e){var{option:t,lineItemProps:r}=e,n;if(N.isValidElement(t))n=N.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:s,y1:c,x2:f,y2:p,key:m}=r,v=X0(r,qY),b=(i=$i(v))!==null&&i!==void 0?i:{},{offset:S}=b,A=X0(b,GY);n=N.createElement("line",cl({},A,{x1:s,y1:c,x2:f,y2:p,fill:"none",key:m}))}return n}function tZ(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,f=X0(e,KY),p=i.map((m,v)=>{var b=ei(ei({},f),{},{x1:t,y1:m,x2:t+r,y2:m,key:"line-".concat(v),index:v});return N.createElement(KP,{key:"line-".concat(v),option:n,lineItemProps:b})});return N.createElement("g",{className:"recharts-cartesian-grid-horizontal"},p)}function rZ(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,f=X0(e,XY),p=i.map((m,v)=>{var b=ei(ei({},f),{},{x1:m,y1:t,x2:m,y2:t+r,key:"line-".concat(v),index:v});return N.createElement(KP,{option:n,lineItemProps:b,key:"line-".concat(v)})});return N.createElement("g",{className:"recharts-cartesian-grid-vertical"},p)}function nZ(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:s,height:c,horizontalPoints:f,horizontal:p=!0}=e;if(!p||!t||!t.length||f==null)return null;var m=f.map(b=>Math.round(b+i-i)).sort((b,S)=>b-S);i!==m[0]&&m.unshift(0);var v=m.map((b,S)=>{var A=!m[S+1],O=A?i+c-b:m[S+1]-b;if(O<=0)return null;var I=S%t.length;return N.createElement("rect",{key:"react-".concat(S),y:b,x:n,height:O,width:s,stroke:"none",fill:t[I],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},v)}function iZ(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:s,width:c,height:f,verticalPoints:p}=e;if(!t||!r||!r.length)return null;var m=p.map(b=>Math.round(b+i-i)).sort((b,S)=>b-S);i!==m[0]&&m.unshift(0);var v=m.map((b,S)=>{var A=!m[S+1],O=A?i+c-b:m[S+1]-b;if(O<=0)return null;var I=S%r.length;return N.createElement("rect",{key:"react-".concat(S),x:b,y:s,width:O,height:f,stroke:"none",fill:r[I],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},v)}var aZ=(e,t)=>{var{xAxis:r,width:n,height:i,offset:s}=e;return DI(lb(ei(ei(ei({},As),r),{},{ticks:LI(r),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,t)},sZ=(e,t)=>{var{yAxis:r,width:n,height:i,offset:s}=e;return DI(lb(ei(ei(ei({},As),r),{},{ticks:LI(r),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,t)},oZ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:sn.grid};function Y0(e){var t=Uy(),r=zy(),n=WI(),i=ei(ei({},Zr(e,oZ)),{},{x:at(e.x)?e.x:n.left,y:at(e.y)?e.y:n.top,width:at(e.width)?e.width:n.width,height:at(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:c,x:f,y:p,width:m,height:v,syncWithTicks:b,horizontalValues:S,verticalValues:A}=i,O=zn(),I=Ze(Y=>j_(Y,"xAxis",s,O)),P=Ze(Y=>j_(Y,"yAxis",c,O));if(!Ka(m)||!Ka(v)||!at(f)||!at(p))return null;var M=i.verticalCoordinatesGenerator||aZ,L=i.horizontalCoordinatesGenerator||sZ,{horizontalPoints:R,verticalPoints:U}=i;if((!R||!R.length)&&typeof L=="function"){var W=S&&S.length,V=L({yAxis:P?ei(ei({},P),{},{ticks:W?S:P.ticks}):void 0,width:t??m,height:r??v,offset:n},W?!0:b);E0(Array.isArray(V),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof V,"]")),Array.isArray(V)&&(R=V)}if((!U||!U.length)&&typeof M=="function"){var H=A&&A.length,X=M({xAxis:I?ei(ei({},I),{},{ticks:H?A:I.ticks}):void 0,width:t??m,height:r??v,offset:n},H?!0:b);E0(Array.isArray(X),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof X,"]")),Array.isArray(X)&&(U=X)}return N.createElement(Si,{zIndex:i.zIndex},N.createElement("g",{className:"recharts-cartesian-grid"},N.createElement(eZ,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),N.createElement(nZ,cl({},i,{horizontalPoints:R})),N.createElement(iZ,cl({},i,{verticalPoints:U})),N.createElement(tZ,cl({},i,{offset:n,horizontalPoints:R,xAxis:I,yAxis:P})),N.createElement(rZ,cl({},i,{offset:n,verticalPoints:U,xAxis:I,yAxis:P}))))}Y0.displayName="CartesianGrid";var lZ={},XP=Ei({name:"errorBars",initialState:lZ,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:dre,replaceErrorBar:fre,removeErrorBar:hre}=XP.actions,cZ=XP.reducer,uZ=["children"];function dZ(e,t){if(e==null)return{};var r,n,i=fZ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hZ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},pZ=N.createContext(hZ);function YP(e){var{children:t}=e,r=dZ(e,uZ);return N.createElement(pZ.Provider,{value:r},t)}function ub(e,t){var r,n,i=Ze(m=>Za(m,e)),s=Ze(m=>Qa(m,t)),c=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:_n.allowDataOverflow,f=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:Nn.allowDataOverflow,p=c||f;return{needClip:p,needClipX:c,needClipY:f}}function ZP(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=UP(),{needClipX:s,needClipY:c,needClip:f}=ub(t,r);if(!f||!i)return null;var{x:p,y:m,width:v,height:b}=i;return N.createElement("clipPath",{id:"clipPath-".concat(n)},N.createElement("rect",{x:s?p:p-v/2,y:c?m:m-b/2,width:s?v:v*2,height:c?b:b*2}))}var Cx={exports:{}},Ax={};var V3;function mZ(){if(V3)return Ax;V3=1;var e=Mc();function t(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,c=e.useMemo,f=e.useDebugValue;return Ax.useSyncExternalStoreWithSelector=function(p,m,v,b,S){var A=i(null);if(A.current===null){var O={hasValue:!1,value:null};A.current=O}else O=A.current;A=c(function(){function P(W){if(!M){if(M=!0,L=W,W=b(W),S!==void 0&&O.hasValue){var V=O.value;if(S(V,W))return R=V}return R=W}if(V=R,r(L,W))return V;var H=b(W);return S!==void 0&&S(V,H)?(L=W,V):(L=W,R=H)}var M=!1,L,R,U=v===void 0?null:v;return[function(){return P(m())},U===null?void 0:function(){return P(U())}]},[m,v,b,S]);var I=n(p,A[0],A[1]);return s(function(){O.hasValue=!0,O.value=I},[I]),f(I),I},Ax}var H3;function gZ(){return H3||(H3=1,Cx.exports=mZ()),Cx.exports}gZ();function xZ(e){e()}function vZ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){xZ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var q3={notify(){},get:()=>[]};function yZ(e,t){let r,n=q3,i=0,s=!1;function c(I){v();const P=n.subscribe(I);let M=!1;return()=>{M||(M=!0,P(),b())}}function f(){n.notify()}function p(){O.onStateChange&&O.onStateChange()}function m(){return s}function v(){i++,r||(r=e.subscribe(p),n=vZ())}function b(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=q3)}function S(){s||(s=!0,v())}function A(){s&&(s=!1,b())}const O={addNestedSub:c,notifyNestedSubs:f,handleChangeWrapper:p,isSubscribed:m,trySubscribe:S,tryUnsubscribe:A,getListeners:()=>n};return O}var wZ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bZ=wZ(),EZ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",SZ=EZ(),CZ=()=>bZ||SZ?N.useLayoutEffect:N.useEffect,AZ=CZ();function G3(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function _Z(e,t){if(G3(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!G3(e[r[i]],t[r[i]]))return!1;return!0}var NZ=Symbol.for("react-redux-context"),OZ=typeof globalThis<"u"?globalThis:{};function IZ(){if(!N.createContext)return{};const e=OZ[NZ]??=new Map;let t=e.get(N.createContext);return t||(t=N.createContext(null),e.set(N.createContext,t)),t}var TZ=IZ();function kZ(e){const{children:t,context:r,serverState:n,store:i}=e,s=N.useMemo(()=>{const p=yZ(i);return{store:i,subscription:p,getServerState:n?()=>n:void 0}},[i,n]),c=N.useMemo(()=>i.getState(),[i]);AZ(()=>{const{subscription:p}=s;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==i.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[s,c]);const f=r||TZ;return N.createElement(f.Provider,{value:s},t)}var PZ=kZ,jZ=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function RZ(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function cm(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(jZ.has(n)){if(e[n]==null&&t[n]==null)continue;if(!_Z(e[n],t[n]))return!1}else if(!RZ(e[n],t[n]))return!1;return!0}function Il(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:BP}function Tl(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:BP}var MZ="Invariant failed";function DZ(e,t){throw new Error(MZ)}function Wv(){return Wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wv.apply(null,arguments)}function Z0(e){return N.createElement(G0,Wv({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var LZ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(at(t))return t;var s=at(n)||pr(n);return s?t(n,i):(s||DZ(),r)}},BZ=(e,t,r)=>r,FZ=(e,t)=>t,Xd=pe([Xp,FZ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),UZ=pe([Xd],e=>e?.maxBarSize),zZ=(e,t,r,n)=>n,$Z=pe([$t,Xp,Il,Tl,BZ],(e,t,r,n,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),WZ=(e,t,r)=>{var n=$t(e),i=Il(e,t),s=Tl(e,t);if(!(i==null||s==null))return n==="horizontal"?Dv(e,"yAxis",s,r):Dv(e,"xAxis",i,r)},VZ=(e,t)=>{var r=$t(e),n=Il(e,t),i=Tl(e,t);if(!(n==null||i==null))return r==="horizontal"?P_(e,"xAxis",n):P_(e,"yAxis",i)},HZ=pe([$Z,$W,VZ],WX),qZ=(e,t,r)=>{var n,i,s=Xd(e,t);if(s!=null){var c=Il(e,t),f=Tl(e,t);if(!(c==null||f==null)){var p=$t(e),m=ak(e),{maxBarSize:v}=s,b=pr(v)?m:v,S,A;return p==="horizontal"?(S=wo(e,"xAxis",c,r),A=yo(e,"xAxis",c,r)):(S=wo(e,"yAxis",f,r),A=yo(e,"yAxis",f,r)),(n=(i=b0(S,A,!0))!==null&&i!==void 0?i:b)!==null&&n!==void 0?n:0}}},QP=(e,t,r)=>{var n=$t(e),i=Il(e,t),s=Tl(e,t);if(!(i==null||s==null)){var c,f;return n==="horizontal"?(c=wo(e,"xAxis",i,r),f=yo(e,"xAxis",i,r)):(c=wo(e,"yAxis",s,r),f=yo(e,"yAxis",s,r)),b0(c,f)}},GZ=pe([HZ,ak,zW,sk,qZ,QP,UZ],KX),KZ=(e,t,r)=>{var n=Il(e,t);if(n!=null)return wo(e,"xAxis",n,r)},XZ=(e,t,r)=>{var n=Tl(e,t);if(n!=null)return wo(e,"yAxis",n,r)},YZ=(e,t,r)=>{var n=Il(e,t);if(n!=null)return yo(e,"xAxis",n,r)},ZZ=(e,t,r)=>{var n=Tl(e,t);if(n!=null)return yo(e,"yAxis",n,r)},QZ=pe([GZ,Xd],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),JZ=pe([WZ,Xd],XX),eQ=pe([gn,By,KZ,XZ,YZ,ZZ,QZ,$t,IW,QP,JZ,Xd,zZ],(e,t,r,n,i,s,c,f,p,m,v,b,S)=>{var{chartData:A,dataStartIndex:O,dataEndIndex:I}=p;if(!(b==null||c==null||t==null||f!=="horizontal"&&f!=="vertical"||r==null||n==null||i==null||s==null||m==null)){var{data:P}=b,M;if(P!=null&&P.length>0?M=P:M=A?.slice(O,I+1),M!=null)return IQ({layout:f,barSettings:b,pos:c,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,stackedData:v,displayedData:M,offset:e,cells:S,dataStartIndex:O})}}),tQ=["index"];function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vv.apply(null,arguments)}function rQ(e,t){if(e==null)return{};var r,n,i=nQ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function nQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var JP=N.createContext(void 0),iQ=e=>{var t=N.useContext(JP);if(t!=null)return t.stackId;if(e!=null)return SB(e)},aQ=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),sQ=e=>{var t=N.useContext(JP);if(t!=null){var{stackId:r}=t;return"url(#".concat(aQ(r,e),")")}},oQ=e=>{var{index:t}=e,r=rQ(e,tQ),n=sQ(t);return N.createElement(Yr,Vv({className:"recharts-bar-stack-layer",clipPath:n},r))},lQ=["onMouseEnter","onMouseLeave","onClick"],cQ=["value","background","tooltipPosition"],uQ=["id"],dQ=["onMouseEnter","onClick","onMouseLeave"];function js(){return js=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},js.apply(null,arguments)}function K3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K3(Object(r),!0).forEach(function(n){fQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fQ(e,t,r){return(t=hQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hQ(e){var t=pQ(e,"string");return typeof t=="symbol"?t:t+""}function pQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q0(e,t){if(e==null)return{};var r,n,i=mQ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function mQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gQ=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:zc(r,t),payload:e}]},xQ=N.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:s,hide:c,unit:f,tooltipType:p,id:m}=e,v={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:zc(s,t),hide:c,type:p,color:i,unit:f,graphicalItemId:m}};return N.createElement(sb,{tooltipEntrySettings:v})});function vQ(e){var t=Ze(bo),{data:r,dataKey:n,background:i,allOtherBarProps:s}=e,{onMouseEnter:c,onMouseLeave:f,onClick:p}=s,m=Q0(s,lQ),v=im(c,n,s.id),b=am(f),S=sm(p,n,s.id);if(!i||r==null)return null;var A=Nc(i);return N.createElement(Si,{zIndex:YX(i,sn.barBackground)},r.map((O,I)=>{var{value:P,background:M,tooltipPosition:L}=O,R=Q0(O,cQ);if(!M)return null;var U=v(O,I),W=b(O,I),V=S(O,I),H=oi(oi(oi(oi(oi({option:i,isActive:String(I)===t},R),{},{fill:"#eee"},M),A),Uc(m,O,I)),{},{onMouseEnter:U,onMouseLeave:W,onClick:V,dataKey:n,index:I,className:"recharts-bar-background-rectangle"});return N.createElement(Z0,js({key:"background-bar-".concat(I)},H))}))}function yQ(e){var{showLabels:t,children:r,rects:n}=e,i=n?.map(s=>{var c={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return oi(oi({},c),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:c,fill:s.fill})});return N.createElement(NP,{value:t?i:void 0},r)}function wQ(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:s,dataKey:c}=e,f=Ze(bo),p=Ze(Yw),m=r&&String(s)===f&&(p==null||c===p),v=m?r:t;return m?N.createElement(Si,{zIndex:sn.activeBar},N.createElement(Z0,js({},n,{name:String(n.name)},i,{isActive:m,option:v,index:s,dataKey:c}))):N.createElement(Z0,js({},n,{name:String(n.name)},i,{isActive:m,option:v,index:s,dataKey:c}))}function bQ(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:s}=e;return N.createElement(Z0,js({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:s}))}function EQ(e){var t,{data:r,props:n}=e,i=(t=$i(n))!==null&&t!==void 0?t:{},{id:s}=i,c=Q0(i,uQ),{shape:f,dataKey:p,activeBar:m}=n,{onMouseEnter:v,onClick:b,onMouseLeave:S}=n,A=Q0(n,dQ),O=im(v,p,s),I=am(S),P=sm(b,p,s);return r?N.createElement(N.Fragment,null,r.map((M,L)=>N.createElement(oQ,js({index:L,key:"rectangle-".concat(M?.x,"-").concat(M?.y,"-").concat(M?.value,"-").concat(L),className:"recharts-bar-rectangle"},Uc(A,M,L),{onMouseEnter:O(M,L),onMouseLeave:I(M,L),onClick:P(M,L)}),m?N.createElement(wQ,{shape:f,activeBar:m,baseProps:c,entry:M,index:L,dataKey:p}):N.createElement(bQ,{shape:f,baseProps:c,entry:M,index:L,dataKey:p})))):null}function SQ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:s,animationBegin:c,animationDuration:f,animationEasing:p,onAnimationEnd:m,onAnimationStart:v}=t,b=r.current,S=Md(t,"recharts-bar-"),[A,O]=N.useState(!1),I=!A,P=N.useCallback(()=>{typeof m=="function"&&m(),O(!1)},[m]),M=N.useCallback(()=>{typeof v=="function"&&v(),O(!0)},[v]);return N.createElement(yQ,{showLabels:I,rects:n},N.createElement(Rd,{animationId:S,begin:c,duration:f,isActive:s,easing:p,onAnimationEnd:P,onAnimationStart:M,key:S},L=>{var R=L===1?n:n?.map((U,W)=>{var V=b&&b[W];if(V)return oi(oi({},U),{},{x:Mr(V.x,U.x,L),y:Mr(V.y,U.y,L),width:Mr(V.width,U.width,L),height:Mr(V.height,U.height,L)});if(i==="horizontal"){var H=Mr(0,U.height,L),X=Mr(U.stackedBarStart,U.y,L);return oi(oi({},U),{},{y:X,height:H})}var Y=Mr(0,U.width,L),we=Mr(U.stackedBarStart,U.x,L);return oi(oi({},U),{},{width:Y,x:we})});return L>0&&(r.current=R??null),R==null?null:N.createElement(Yr,null,N.createElement(EQ,{props:t,data:R}))}),N.createElement(nb,{label:t.label}),t.children)}function CQ(e){var t=N.useRef(null);return N.createElement(SQ,{previousRectanglesRef:t,props:e})}var ej=0,AQ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Xt(e,t)}};class _Q extends N.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:s,yAxisId:c,needClip:f,background:p,id:m}=this.props;if(t||r==null)return null;var v=Vt("recharts-bar",i),b=m;return N.createElement(Yr,{className:v,id:m},f&&N.createElement("defs",null,N.createElement(ZP,{clipPathId:b,xAxisId:s,yAxisId:c})),N.createElement(Yr,{className:"recharts-bar-rectangles",clipPath:f?"url(#clipPath-".concat(b,")"):void 0},N.createElement(vQ,{data:r,dataKey:n,background:p,allOtherBarProps:this.props}),N.createElement(CQ,this.props)))}}var NQ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:ej,xAxisId:0,yAxisId:0,zIndex:sn.bar};function OQ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:f,animationDuration:p,animationEasing:m,isAnimationActive:v}=e,{needClip:b}=ub(t,r),S=Pd(),A=zn(),O=nm(e.children,bl),I=Ze(L=>eQ(L,e.id,A,O));if(S!=="vertical"&&S!=="horizontal")return null;var P,M=I?.[0];return M==null||M.height==null||M.width==null?P=0:P=S==="vertical"?M.height/2:M.width/2,N.createElement(YP,{xAxisId:t,yAxisId:r,data:I,dataPointFormatter:AQ,errorBarOffset:P},N.createElement(_Q,js({},e,{layout:S,needClip:b,data:I,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:f,animationDuration:p,animationEasing:m,isAnimationActive:v})))}function IQ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:s,xAxis:c,yAxis:f,xAxisTicks:p,yAxisTicks:m,stackedData:v,displayedData:b,offset:S,cells:A,parentViewBox:O,dataStartIndex:I}=e,P=t==="horizontal"?f:c,M=v?P.scale.domain():null,L=CB({numericAxis:P}),R=P.scale(L);return b.map((U,W)=>{var V,H,X,Y,we,se;if(v){var ie=v[W+I];if(ie==null)return null;V=vB(ie,M)}else V=Xt(U,r),Array.isArray(V)||(V=[L,V]);var be=LZ(n,ej)(V[1],W);if(t==="horizontal"){var Ce,[re,ze]=[f.scale(V[0]),f.scale(V[1])];H=DC({axis:c,ticks:p,bandSize:s,offset:i.offset,entry:U,index:W}),X=(Ce=ze??re)!==null&&Ce!==void 0?Ce:void 0,Y=i.size;var le=re-ze;if(we=Vi(le)?0:le,se={x:H,y:S.top,width:Y,height:S.height},Math.abs(be)>0&&Math.abs(we)<Math.abs(be)){var me=In(we||be)*(Math.abs(be)-Math.abs(we));X-=me,we+=me}}else{var[Ee,Ae]=[c.scale(V[0]),c.scale(V[1])];if(H=Ee,X=DC({axis:f,ticks:m,bandSize:s,offset:i.offset,entry:U,index:W}),Y=Ae-Ee,we=i.size,se={x:S.left,y:X,width:S.width,height:we},Math.abs(be)>0&&Math.abs(Y)<Math.abs(be)){var J=In(Y||be)*(Math.abs(be)-Math.abs(Y));Y+=J}}if(H==null||X==null||Y==null||we==null)return null;var de=oi(oi({},U),{},{stackedBarStart:R,x:H,y:X,width:Y,height:we,value:v?V:V[1],payload:U,background:se,tooltipPosition:{x:H+Y/2,y:X+we/2},parentViewBox:O},A&&A[W]&&A[W].props);return de}).filter(Boolean)}function TQ(e){var t=Zr(e,NQ),r=iQ(t.stackId),n=zn();return N.createElement(ob,{id:t.id,type:"bar"},i=>N.createElement(N.Fragment,null,N.createElement(RP,{legendPayload:gQ(t)}),N.createElement(xQ,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),N.createElement(DP,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),N.createElement(Si,{zIndex:t.zIndex},N.createElement(OQ,js({},t,{id:i})))))}var Ju=N.memo(TQ,cm);Ju.displayName="Bar";var kQ=["option","isActive"];function ed(){return ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ed.apply(null,arguments)}function PQ(e,t){if(e==null)return{};var r,n,i=jQ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function jQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function RQ(e){var{option:t,isActive:r}=e,n=PQ(e,kQ);return typeof t=="string"?N.createElement(G0,ed({option:N.createElement(gp,ed({type:t},n)),isActive:r,shapeType:"symbols"},n)):N.createElement(G0,ed({option:t,isActive:r,shapeType:"symbols"},n))}var MQ=(e,t,r,n,i,s,c)=>wo(e,"xAxis",t,c),DQ=(e,t,r,n,i,s,c)=>yo(e,"xAxis",t,c),LQ=(e,t,r,n,i,s,c)=>wo(e,"yAxis",r,c),BQ=(e,t,r,n,i,s,c)=>yo(e,"yAxis",r,c),FQ=(e,t,r,n)=>VV(e,"zAxis",n,!1),UQ=(e,t,r,n,i)=>i,zQ=(e,t,r,n,i,s)=>s,$Q=(e,t,r,n,i,s,c)=>pw(e,void 0,void 0,c),WQ=pe([Xp,UQ],(e,t)=>e.filter(r=>r.type==="scatter").find(r=>r.id===t)),VQ=pe([$Q,MQ,DQ,LQ,BQ,FQ,WQ,zQ],(e,t,r,n,i,s,c,f)=>{var{chartData:p,dataStartIndex:m,dataEndIndex:v}=e;if(c!=null){var b;if(c?.data!=null&&c.data.length>0?b=c.data:b=p?.slice(m,v+1),!(b==null||t==null||n==null||r==null||i==null||r?.length===0||i?.length===0))return iJ({displayedData:b,xAxis:t,yAxis:n,zAxis:s,scatterSettings:c,xAxisTicks:r,yAxisTicks:i,cells:f})}}),HQ=["id"],qQ=["onMouseEnter","onClick","onMouseLeave"],GQ=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function Hv(e,t){if(e==null)return{};var r,n,i=KQ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function KQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sl.apply(null,arguments)}function X3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X3(Object(r),!0).forEach(function(n){XQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XQ(e,t,r){return(t=YQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YQ(e){var t=ZQ(e,"string");return typeof t=="symbol"?t:t+""}function ZQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QQ=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:zc(r,t),payload:e}]},JQ=N.memo(e=>{var{dataKey:t,points:r,stroke:n,strokeWidth:i,fill:s,name:c,hide:f,tooltipType:p,id:m}=e,v={dataDefinedOnItem:r?.map(b=>b.tooltipPayload),positions:r?.map(b=>b.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:s,nameKey:void 0,dataKey:t,name:zc(c,t),hide:f,type:p,color:s,unit:"",graphicalItemId:m}};return N.createElement(sb,{tooltipEntrySettings:v})});function eJ(e){var{points:t,props:r}=e,{line:n,lineType:i,lineJointType:s}=r;if(!n)return null;var c=$i(r),f=Nc(n),p,m;if(i==="joint")p=t.map(P=>{var M,L;return{x:(M=P.cx)!==null&&M!==void 0?M:null,y:(L=P.cy)!==null&&L!==void 0?L:null}});else if(i==="fitting"){var{xmin:v,xmax:b,a:S,b:A}=q9(t),O=P=>S*P+A;p=[{x:v,y:O(v)},{x:b,y:O(b)}]}var I=bi(bi(bi({},c),{},{fill:"none",stroke:c&&c.fill},f),{},{points:p});return N.isValidElement(n)?m=N.cloneElement(n,I):typeof n=="function"?m=n(I):m=N.createElement(Mp,Sl({},I,{type:s})),N.createElement(Yr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}function tJ(e){var{showLabels:t,points:r,children:n}=e,i=$c(),s=N.useMemo(()=>r?.map(c=>{var f,p,m={x:(f=c.x)!==null&&f!==void 0?f:0,y:(p=c.y)!==null&&p!==void 0?p:0,width:c.width,height:c.height,lowerWidth:c.width,upperWidth:c.width};return bi(bi({},m),{},{value:void 0,payload:c.payload,viewBox:m,parentViewBox:i,fill:void 0})}),[i,r]);return N.createElement(NP,{value:t?s:void 0},n)}function rJ(e){var{points:t,allOtherScatterProps:r}=e,{shape:n,activeShape:i,dataKey:s}=r,{id:c}=r,f=Hv(r,HQ),p=Ze(bo),{onMouseEnter:m,onClick:v,onMouseLeave:b}=r,S=Hv(r,qQ),A=im(m,s,c),O=am(b),I=sm(v,s,c);if(!s7(t))return null;var P=$i(f);return N.createElement(N.Fragment,null,N.createElement(eJ,{points:t,props:f}),t.map((M,L)=>{var R=i!=null&&i!==!1,U=R&&p===String(L),W=R&&U?i:n,V=bi(bi(bi({},P),M),{},{[Dy]:L,[Ly]:String(c)});return N.createElement(Si,{key:"symbol-".concat(M?.cx,"-").concat(M?.cy,"-").concat(M?.size,"-").concat(L),zIndex:U?sn.activeDot:void 0},N.createElement(Yr,Sl({className:"recharts-scatter-symbol"},Uc(S,M,L),{onMouseEnter:A(M,L),onMouseLeave:O(M,L),onClick:I(M,L)}),N.createElement(RQ,Sl({option:W,isActive:U},V))))}))}function nJ(e){var{previousPointsRef:t,props:r}=e,{points:n,isAnimationActive:i,animationBegin:s,animationDuration:c,animationEasing:f}=r,p=t.current,m=Md(r,"recharts-scatter-"),[v,b]=N.useState(!1),S=N.useCallback(()=>{b(!1)},[]),A=N.useCallback(()=>{b(!0)},[]),O=!v;return N.createElement(tJ,{showLabels:O,points:n},r.children,N.createElement(Rd,{animationId:m,begin:s,duration:c,isActive:i,easing:f,onAnimationEnd:S,onAnimationStart:A,key:m},I=>{var P=I===1?n:n?.map((M,L)=>{var R=p&&p[L];return R?bi(bi({},M),{},{cx:M.cx==null?void 0:Mr(R.cx,M.cx,I),cy:M.cy==null?void 0:Mr(R.cy,M.cy,I),size:Mr(R.size,M.size,I)}):bi(bi({},M),{},{size:Mr(0,M.size,I)})});return I>0&&(t.current=P),N.createElement(Yr,null,N.createElement(rJ,{points:P,allOtherScatterProps:r,showLabels:O}))}),N.createElement(nb,{label:r.label}))}function iJ(e){var{displayedData:t,xAxis:r,yAxis:n,zAxis:i,scatterSettings:s,xAxisTicks:c,yAxisTicks:f,cells:p}=e,m=pr(r.dataKey)?s.dataKey:r.dataKey,v=pr(n.dataKey)?s.dataKey:n.dataKey,b=i&&i.dataKey,S=i?i.range:xk.range,A=S&&S[0],O=r.scale.bandwidth?r.scale.bandwidth():0,I=n.scale.bandwidth?n.scale.bandwidth():0;return t.map((P,M)=>{var L=Xt(P,m),R=Xt(P,v),U=!pr(b)&&Xt(P,b)||"-",W=[{name:pr(r.dataKey)?s.name:r.name||String(r.dataKey),unit:r.unit||"",value:L,payload:P,dataKey:m,type:s.tooltipType},{name:pr(n.dataKey)?s.name:n.name||String(n.dataKey),unit:n.unit||"",value:R,payload:P,dataKey:v,type:s.tooltipType}];U!=="-"&&W.push({name:i.name||i.dataKey,unit:i.unit||"",value:U,payload:P,dataKey:b,type:s.tooltipType});var V=MC({axis:r,ticks:c,bandSize:O,entry:P,index:M,dataKey:m}),H=MC({axis:n,ticks:f,bandSize:I,entry:P,index:M,dataKey:v}),X=U!=="-"?i.scale(U):A,Y=Math.sqrt(Math.max(X,0)/Math.PI);return bi(bi({},P),{},{cx:V,cy:H,x:V==null?void 0:V-Y,y:H==null?void 0:H-Y,width:2*Y,height:2*Y,size:X,node:{x:L,y:R,z:U},tooltipPayload:W,tooltipPosition:{x:V,y:H},payload:P},p&&p[M]&&p[M].props)})}var aJ=(e,t,r)=>({x:e.cx,y:e.cy,value:Number(r==="x"?e.node.x:e.node.y),errorVal:Xt(e,t)});function sJ(e){var{hide:t,points:r,className:n,needClip:i,xAxisId:s,yAxisId:c,id:f}=e,p=N.useRef(null);if(t)return null;var m=Vt("recharts-scatter",n),v=f;return N.createElement(Si,{zIndex:e.zIndex},N.createElement(Yr,{className:m,clipPath:i?"url(#clipPath-".concat(v,")"):void 0,id:f},i&&N.createElement("defs",null,N.createElement(ZP,{clipPathId:v,xAxisId:s,yAxisId:c})),N.createElement(YP,{xAxisId:s,yAxisId:c,data:r,dataPointFormatter:aJ,errorBarOffset:0},N.createElement(Yr,{key:"recharts-scatter-symbols"},N.createElement(nJ,{props:e,previousPointsRef:p})))))}var tj={xAxisId:0,yAxisId:0,zAxisId:0,label:!1,line:!1,legendType:"circle",lineType:"joint",lineJointType:"linear",shape:"circle",hide:!1,isAnimationActive:"auto",animationBegin:0,animationDuration:400,animationEasing:"linear",zIndex:sn.scatter};function oJ(e){var t=Zr(e,tj),{animationBegin:r,animationDuration:n,animationEasing:i,hide:s,isAnimationActive:c,legendType:f,lineJointType:p,lineType:m,shape:v,xAxisId:b,yAxisId:S,zAxisId:A}=t,O=Hv(t,GQ),{needClip:I}=ub(b,S),P=N.useMemo(()=>nm(e.children,bl),[e.children]),M=zn(),L=Ze(R=>VQ(R,b,S,A,e.id,P,M));return I==null||L==null?null:N.createElement(N.Fragment,null,N.createElement(JQ,{dataKey:e.dataKey,points:L,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:e.id}),N.createElement(sJ,Sl({},O,{xAxisId:b,yAxisId:S,zAxisId:A,lineType:m,lineJointType:p,legendType:f,shape:v,hide:s,isAnimationActive:c,animationBegin:r,animationDuration:n,animationEasing:i,points:L,needClip:I})))}function lJ(e){var t=Zr(e,tj),r=zn();return N.createElement(ob,{id:t.id,type:"scatter"},n=>N.createElement(N.Fragment,null,N.createElement(RP,{legendPayload:QQ(t)}),N.createElement(DP,{type:"scatter",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:t.zAxisId,dataKey:t.dataKey,hide:t.hide,name:t.name,tooltipType:t.tooltipType,isPanorama:r}),N.createElement(oJ,Sl({},t,{id:n}))))}var rj=N.memo(lJ,cm);rj.displayName="Scatter";var cJ=["domain","range"],uJ=["domain","range"];function Y3(e,t){if(e==null)return{};var r,n,i=dJ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function dJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Z3(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function nj(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=Y3(e,cJ),{domain:s,range:c}=t,f=Y3(t,uJ);return!Z3(r,s)||!Z3(n,c)?!1:cm(i,f)}var fJ=["dangerouslySetInnerHTML","ticks","scale"],hJ=["id","scale"];function qv(){return qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qv.apply(null,arguments)}function Q3(e,t){if(e==null)return{};var r,n,i=pJ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function pJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mJ(e){var t=or(),r=N.useRef(null);return N.useLayoutEffect(()=>{r.current===null?t(jX(e)):r.current!==e&&t(RX({prev:r.current,next:e})),r.current=e},[e,t]),N.useLayoutEffect(()=>()=>{r.current&&(t(MX(r.current)),r.current=null)},[t]),null}var gJ=e=>{var{xAxisId:t,className:r}=e,n=Ze(By),i=zn(),s="xAxis",c=Ze(M=>Fk(M,s,t,i)),f=Ze(M=>Mk(M,t)),p=Ze(M=>BV(M,t)),m=Ze(M=>mk(M,t));if(f==null||p==null||m==null)return null;var{dangerouslySetInnerHTML:v,ticks:b,scale:S}=e,A=Q3(e,fJ),{id:O,scale:I}=m,P=Q3(m,hJ);return N.createElement(cb,qv({},A,P,{x:p.x,y:p.y,width:f.width,height:f.height,className:Vt("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:c,axisType:s}))},xJ={allowDataOverflow:_n.allowDataOverflow,allowDecimals:_n.allowDecimals,allowDuplicatedCategory:_n.allowDuplicatedCategory,angle:_n.angle,axisLine:As.axisLine,height:_n.height,hide:!1,includeHidden:_n.includeHidden,interval:_n.interval,minTickGap:_n.minTickGap,mirror:_n.mirror,orientation:_n.orientation,padding:_n.padding,reversed:_n.reversed,scale:_n.scale,tick:_n.tick,tickCount:_n.tickCount,tickLine:As.tickLine,tickSize:As.tickSize,type:_n.type,xAxisId:0},vJ=e=>{var t=Zr(e,xJ);return N.createElement(N.Fragment,null,N.createElement(mJ,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),N.createElement(gJ,t))},J0=N.memo(vJ,nj);J0.displayName="XAxis";var yJ=["dangerouslySetInnerHTML","ticks","scale"],wJ=["id","scale"];function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(null,arguments)}function J3(e,t){if(e==null)return{};var r,n,i=bJ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function bJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function EJ(e){var t=or(),r=N.useRef(null);return N.useLayoutEffect(()=>{r.current===null?t(DX(e)):r.current!==e&&t(LX({prev:r.current,next:e})),r.current=e},[e,t]),N.useLayoutEffect(()=>()=>{r.current&&(t(BX(r.current)),r.current=null)},[t]),null}var SJ=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,s=N.useRef(null),c=N.useRef(null),f=Ze(By),p=zn(),m=or(),v="yAxis",b=Ze(V=>Dk(V,t)),S=Ze(V=>UV(V,t)),A=Ze(V=>Fk(V,v,t,p)),O=Ze(V=>gk(V,t));if(N.useLayoutEffect(()=>{if(!(n!=="auto"||!b||rb(i)||N.isValidElement(i)||O==null)){var V=s.current;if(V){var H=V.getCalculatedWidth();Math.round(b.width)!==Math.round(H)&&m(FX({id:t,width:H}))}}},[A,b,m,i,t,n,O]),b==null||S==null||O==null)return null;var{dangerouslySetInnerHTML:I,ticks:P,scale:M}=e,L=J3(e,yJ),{id:R,scale:U}=O,W=J3(O,wJ);return N.createElement(cb,Gv({},L,W,{ref:s,labelRef:c,x:S.x,y:S.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:b.width,height:b.height,className:Vt("recharts-".concat(v," ").concat(v),r),viewBox:f,ticks:A,axisType:v}))},CJ={allowDataOverflow:Nn.allowDataOverflow,allowDecimals:Nn.allowDecimals,allowDuplicatedCategory:Nn.allowDuplicatedCategory,angle:Nn.angle,axisLine:As.axisLine,hide:!1,includeHidden:Nn.includeHidden,interval:Nn.interval,minTickGap:Nn.minTickGap,mirror:Nn.mirror,orientation:Nn.orientation,padding:Nn.padding,reversed:Nn.reversed,scale:Nn.scale,tick:Nn.tick,tickCount:Nn.tickCount,tickLine:As.tickLine,tickSize:As.tickSize,type:Nn.type,width:Nn.width,yAxisId:0},AJ=e=>{var t=Zr(e,CJ);return N.createElement(N.Fragment,null,N.createElement(EJ,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),N.createElement(SJ,t))},ep=N.memo(AJ,nj);ep.displayName="YAxis";var _J=(e,t)=>t,db=pe([_J,$t,hk,vn,tP,Fs,rq,gn],cq),fb=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},ij=ca("mouseClick"),aj=Td();aj.startListening({actionCreator:ij,effect:(e,t)=>{var r=e.payload,n=db(t.getState(),fb(r));n?.activeIndex!=null&&t.dispatch(tH({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Kv=ca("mouseMove"),sj=Td(),kh=null;sj.startListening({actionCreator:Kv,effect:(e,t)=>{var r=e.payload;kh!==null&&cancelAnimationFrame(kh);var n=fb(r);kh=requestAnimationFrame(()=>{var i=t.getState(),s=Vw(i,i.tooltip.settings.shared);if(s==="axis"){var c=db(i,n);c?.activeIndex!=null?t.dispatch(Gk({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):t.dispatch(qk())}kh=null})}});function NJ(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var eN={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},oj=Ei({name:"rootProps",initialState:eN,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:eN.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),OJ=oj.reducer,{updateOptions:IJ}=oj.actions,lj=Ei({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:TJ}=lj.actions,kJ=lj.reducer,cj=ca("keyDown"),uj=ca("focus"),hb=Td();hb.startListening({actionCreator:cj,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var c=Hw(i,Zc(r),Vd(r),Gd(r)),f=c==null?-1:Number(c);if(!(!Number.isFinite(f)||f<0)){var p=Fs(r);if(s==="Enter"){var m=W0(r,"axis","hover",String(i.index));t.dispatch(Bv({active:!i.active,activeIndex:i.index,activeCoordinate:m}));return}var v=HV(r),b=v==="left-to-right"?1:-1,S=s==="ArrowRight"?1:-1,A=f+S*b;if(!(p==null||A>=p.length||A<0)){var O=W0(r,"axis","hover",String(A));t.dispatch(Bv({active:!0,activeIndex:A.toString(),activeCoordinate:O}))}}}}}});hb.startListening({actionCreator:uj,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var s="0",c=W0(r,"axis","hover",String(s));t.dispatch(Bv({active:!0,activeIndex:s,activeCoordinate:c}))}}}});var aa=ca("externalEvent"),dj=Td(),_x=new Map;dj.startListening({actionCreator:aa,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,s=_x.get(i);s!==void 0&&cancelAnimationFrame(s);var c=requestAnimationFrame(()=>{try{var f=t.getState(),p={activeCoordinate:zH(f),activeDataKey:Yw(f),activeIndex:bo(f),activeLabel:iP(f),activeTooltipIndex:bo(f),isTooltipActive:$H(f)};r(p,n)}finally{_x.delete(i)}});_x.set(i,c)}}});var PJ=pe([Xc],e=>e.tooltipItemPayloads),jJ=pe([PJ,qd,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(f=>f.settings.graphicalItemId===n);if(i!=null){var{positions:s}=i;if(s!=null){var c=t(s,r);return c}}}),fj=ca("touchMove"),hj=Td();hj.startListening({actionCreator:fj,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=Vw(n,n.tooltip.settings.shared);if(i==="axis"){var s=r.touches[0];if(s==null)return;var c=db(n,fb({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));c?.activeIndex!=null&&t.dispatch(Gk({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(i==="item"){var f,p=r.touches[0];if(document.elementFromPoint==null||p==null)return;var m=document.elementFromPoint(p.clientX,p.clientY);if(!m||!m.getAttribute)return;var v=m.getAttribute(Dy),b=(f=m.getAttribute(Ly))!==null&&f!==void 0?f:void 0,S=Yc(n).find(I=>I.id===b);if(v==null||S==null||b==null)return;var{dataKey:A}=S,O=jJ(n,v,b);t.dispatch(Hk({activeDataKey:A,activeIndex:v,activeCoordinate:O,activeGraphicalItemId:b}))}}}});var RJ=oI({brush:ZX,cartesianAxis:UX,chartData:Uq,errorBars:cZ,graphicalItems:tX,layout:fB,legend:wF,options:Mq,polarAxis:mK,polarOptions:kJ,referenceElements:lY,rootProps:OJ,tooltip:rH,zIndex:Sq}),MJ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return LL({reducer:RJ,preloadedState:t,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([aj.middleware,sj.middleware,hb.middleware,dj.middleware,hj.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(EI({type:"raf"}))},devTools:{serialize:{replacer:NJ},name:"recharts-".concat(r)}})};function pj(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=zn(),s=N.useRef(null);if(i)return r;s.current==null&&(s.current=MJ(t,n));var c=Iy;return N.createElement(PZ,{context:c,store:s.current},r)}function DJ(e){var{layout:t,margin:r}=e,n=or(),i=zn();return N.useEffect(()=>{i||(n(cB(t)),n(lB(r)))},[n,i,t,r]),null}var mj=N.memo(DJ,cm);function gj(e){var t=or();return N.useEffect(()=>{t(IJ(e))},[t,e]),null}function tN(e){var{zIndex:t,isPanorama:r}=e,n=N.useRef(null),i=or();return N.useLayoutEffect(()=>(n.current&&i(bq({zIndex:t,element:n.current,isPanorama:r})),()=>{i(Eq({zIndex:t,isPanorama:r}))}),[i,t,r]),N.createElement("g",{tabIndex:-1,ref:n})}function rN(e){var{children:t,isPanorama:r}=e,n=Ze(dq);if(!n||n.length===0)return t;var i=n.filter(c=>c<0),s=n.filter(c=>c>0);return N.createElement(N.Fragment,null,i.map(c=>N.createElement(tN,{key:c,zIndex:c,isPanorama:r})),t,s.map(c=>N.createElement(tN,{key:c,zIndex:c,isPanorama:r})))}var LJ=["children"];function BJ(e,t){if(e==null)return{};var r,n,i=FJ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function FJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tp(){return tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tp.apply(null,arguments)}var UJ={width:"100%",height:"100%",display:"block"},zJ=N.forwardRef((e,t)=>{var r=Uy(),n=zy(),i=eT();if(!Ka(r)||!Ka(n))return null;var{children:s,otherAttributes:c,title:f,desc:p}=e,m,v;return c!=null&&(typeof c.tabIndex=="number"?m=c.tabIndex:m=i?0:void 0,typeof c.role=="string"?v=c.role:v=i?"application":void 0),N.createElement(by,tp({},c,{title:f,desc:p,role:v,tabIndex:m,width:r,height:n,style:UJ,ref:t}),s)}),$J=e=>{var{children:t}=e,r=Ze(Tp);if(!r)return null;var{width:n,height:i,y:s,x:c}=r;return N.createElement(by,{width:n,height:i,x:c,y:s},t)},nN=N.forwardRef((e,t)=>{var{children:r}=e,n=BJ(e,LJ),i=zn();return i?N.createElement($J,null,N.createElement(rN,{isPanorama:!0},r)):N.createElement(zJ,tp({ref:t},n),N.createElement(rN,{isPanorama:!1},r))});function WJ(){var e=or(),[t,r]=N.useState(null),n=Ze(TB);return N.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;ar(s)&&s!==n&&e(dB(s))}},[t,e,n]),r}function iN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function VJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iN(Object(r),!0).forEach(function(n){HJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HJ(e,t,r){return(t=qJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qJ(e){var t=GJ(e,"string");return typeof t=="symbol"?t:t+""}function GJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cl(){return Cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cl.apply(null,arguments)}var KJ=()=>(Xq(),null);function rp(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var XJ=N.forwardRef((e,t)=>{var r,n,i=N.useRef(null),[s,c]=N.useState({containerWidth:rp((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:rp((n=e.style)===null||n===void 0?void 0:n.height)}),f=N.useCallback((m,v)=>{c(b=>{var S=Math.round(m),A=Math.round(v);return b.containerWidth===S&&b.containerHeight===A?b:{containerWidth:S,containerHeight:A}})},[]),p=N.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:v,height:b}=m.getBoundingClientRect();f(v,b);var S=O=>{var{width:I,height:P}=O[0].contentRect;f(I,P)},A=new ResizeObserver(S);A.observe(m),i.current=A}},[t,f]);return N.useEffect(()=>()=>{var m=i.current;m?.disconnect()},[f]),N.createElement(N.Fragment,null,N.createElement(kp,{width:s.containerWidth,height:s.containerHeight}),N.createElement("div",Cl({ref:p},e)))}),YJ=N.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,s]=N.useState({containerWidth:rp(r),containerHeight:rp(n)}),c=N.useCallback((p,m)=>{s(v=>{var b=Math.round(p),S=Math.round(m);return v.containerWidth===b&&v.containerHeight===S?v:{containerWidth:b,containerHeight:S}})},[]),f=N.useCallback(p=>{if(typeof t=="function"&&t(p),p!=null){var{width:m,height:v}=p.getBoundingClientRect();c(m,v)}},[t,c]);return N.createElement(N.Fragment,null,N.createElement(kp,{width:i.containerWidth,height:i.containerHeight}),N.createElement("div",Cl({ref:f},e)))}),ZJ=N.forwardRef((e,t)=>{var{width:r,height:n}=e;return N.createElement(N.Fragment,null,N.createElement(kp,{width:r,height:n}),N.createElement("div",Cl({ref:t},e)))}),QJ=N.forwardRef((e,t)=>{var{width:r,height:n}=e;return Ns(r)||Ns(n)?N.createElement(YJ,Cl({},e,{ref:t})):N.createElement(ZJ,Cl({},e,{ref:t}))});function JJ(e){return e===!0?XJ:QJ}var eee=N.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:s,onContextMenu:c,onDoubleClick:f,onMouseDown:p,onMouseEnter:m,onMouseLeave:v,onMouseMove:b,onMouseUp:S,onTouchEnd:A,onTouchMove:O,onTouchStart:I,style:P,width:M,responsive:L,dispatchTouchEvents:R=!0}=e,U=N.useRef(null),W=or(),[V,H]=N.useState(null),[X,Y]=N.useState(null),we=WJ(),se=Fy(),ie=se?.width>0?se.width:M,be=se?.height>0?se.height:i,Ce=N.useCallback(ae=>{we(ae),typeof t=="function"&&t(ae),H(ae),Y(ae),ae!=null&&(U.current=ae)},[we,t,H,Y]),re=N.useCallback(ae=>{W(ij(ae)),W(aa({handler:s,reactEvent:ae}))},[W,s]),ze=N.useCallback(ae=>{W(Kv(ae)),W(aa({handler:m,reactEvent:ae}))},[W,m]),le=N.useCallback(ae=>{W(qk()),W(aa({handler:v,reactEvent:ae}))},[W,v]),me=N.useCallback(ae=>{W(Kv(ae)),W(aa({handler:b,reactEvent:ae}))},[W,b]),Ee=N.useCallback(()=>{W(uj())},[W]),Ae=N.useCallback(ae=>{W(cj(ae.key))},[W]),J=N.useCallback(ae=>{W(aa({handler:c,reactEvent:ae}))},[W,c]),de=N.useCallback(ae=>{W(aa({handler:f,reactEvent:ae}))},[W,f]),$e=N.useCallback(ae=>{W(aa({handler:p,reactEvent:ae}))},[W,p]),Ue=N.useCallback(ae=>{W(aa({handler:S,reactEvent:ae}))},[W,S]),Xe=N.useCallback(ae=>{W(aa({handler:I,reactEvent:ae}))},[W,I]),Z=N.useCallback(ae=>{R&&W(fj(ae)),W(aa({handler:O,reactEvent:ae}))},[W,R,O]),_e=N.useCallback(ae=>{W(aa({handler:A,reactEvent:ae}))},[W,A]),fe=JJ(L);return N.createElement(dP.Provider,{value:V},N.createElement(S4.Provider,{value:X},N.createElement(fe,{width:ie??P?.width,height:be??P?.height,className:Vt("recharts-wrapper",n),style:VJ({position:"relative",cursor:"default",width:ie,height:be},P),onClick:re,onContextMenu:J,onDoubleClick:de,onFocus:Ee,onKeyDown:Ae,onMouseDown:$e,onMouseEnter:ze,onMouseLeave:le,onMouseMove:me,onMouseUp:Ue,onTouchEnd:_e,onTouchMove:Z,onTouchStart:Xe,ref:Ce},N.createElement(KJ,null),r)))}),tee=["width","height","responsive","children","className","style","compact","title","desc"];function ree(e,t){if(e==null)return{};var r,n,i=nee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function nee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xj=N.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:s,className:c,style:f,compact:p,title:m,desc:v}=e,b=ree(e,tee),S=$i(b);return p?N.createElement(N.Fragment,null,N.createElement(kp,{width:r,height:n}),N.createElement(nN,{otherAttributes:S,title:m,desc:v},s)):N.createElement(eee,{className:c,style:f,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},N.createElement(nN,{otherAttributes:S,title:m,desc:v,ref:t},N.createElement(cY,null,s)))});function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xv.apply(null,arguments)}var iee={top:5,right:5,bottom:5,left:5},aee={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:iee,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},vj=N.forwardRef(function(t,r){var n,i=Zr(t.categoricalChartProps,aee),{chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:f,tooltipPayloadSearcher:p,categoricalChartProps:m}=t,v={chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:f,tooltipPayloadSearcher:p,eventEmitter:void 0};return N.createElement(pj,{preloadedState:{options:v},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:s},N.createElement(zP,{chartData:m.data}),N.createElement(mj,{layout:i.layout,margin:i.margin}),N.createElement(gj,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),N.createElement(xj,Xv({},i,{ref:r})))}),see=["axis","item"],yj=N.forwardRef((e,t)=>N.createElement(vj,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:see,tooltipPayloadSearcher:tb,categoricalChartProps:e,ref:t}));function oee(e){var t=or();return N.useEffect(()=>{t(TJ(e))},[t,e]),null}var lee=["layout"];function Yv(){return Yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yv.apply(null,arguments)}function cee(e,t){if(e==null)return{};var r,n,i=uee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function uee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dee={top:5,right:5,bottom:5,left:5},wj={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:dee,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},fee=N.forwardRef(function(t,r){var n,i=Zr(t.categoricalChartProps,wj),{layout:s}=i,c=cee(i,lee),{chartName:f,defaultTooltipEventType:p,validateTooltipEventTypes:m,tooltipPayloadSearcher:v}=t,b={chartName:f,defaultTooltipEventType:p,validateTooltipEventTypes:m,tooltipPayloadSearcher:v,eventEmitter:void 0};return N.createElement(pj,{preloadedState:{options:b},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:f},N.createElement(zP,{chartData:i.data}),N.createElement(mj,{layout:s,margin:i.margin}),N.createElement(gj,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),N.createElement(oee,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),N.createElement(xj,Yv({},c,{ref:r})))});function aN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aN(Object(r),!0).forEach(function(n){hee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hee(e,t,r){return(t=pee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pee(e){var t=mee(e,"string");return typeof t=="symbol"?t:t+""}function mee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gee=["item"],xee=sN(sN({},wj),{},{layout:"centric",startAngle:0,endAngle:360}),vee=N.forwardRef((e,t)=>{var r=Zr(e,xee);return N.createElement(fee,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:gee,tooltipPayloadSearcher:tb,categoricalChartProps:r,ref:t})}),yee=["item"],wee=N.forwardRef((e,t)=>N.createElement(vj,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:yee,tooltipPayloadSearcher:tb,categoricalChartProps:e,ref:t}));const bee=({transactions:e,expenses:t,timeRange:r,onTimeRangeChange:n})=>{const[i,s]=N.useState([]),[c,f]=N.useState({invested:0,recovered:0}),[p,m]=N.useState([]),[v,b]=N.useState({}),[S,A]=N.useState(null),[O,I]=N.useState(""),[P,M]=N.useState([]),[L,R]=N.useState(!1);N.useEffect(()=>{H(),U(),V()},[e,t]);const U=async()=>{try{const{data:X,error:Y}=await We.from("service_costs").select("*");if(X){const we={};ws.forEach(se=>{we[se.id]=0}),X.forEach(se=>{we[se.service_id]=se.cost}),b(we)}Y&&console.error("Error loading service costs:",Y)}catch(X){console.error("Failed to load costs:",X)}},W=async(X,Y)=>{try{const{error:we}=await We.from("service_costs").upsert({service_id:X,cost:Y},{onConflict:"service_id"});if(we)throw we;const se={...v,[X]:Y};b(se),A(null)}catch(we){alert("Error guardando costo: "+we.message)}},V=async()=>{R(!0);try{const{data:X,error:Y}=await We.from("clients").select("id, name, phone, visits, created_at").order("visits",{ascending:!1});if(Y)throw Y;const{data:we,error:se}=await We.from("transactions").select("client_id, amount");if(se)throw se;const ie=new Map;we?.forEach(Ce=>{if(Ce.client_id){const re=ie.get(Ce.client_id)||{total:0,count:0};re.total+=Ce.amount,re.count+=1,ie.set(Ce.client_id,re)}});const be=X?.map(Ce=>({...Ce,totalSpent:ie.get(Ce.id)?.total||0,transactionCount:ie.get(Ce.id)?.count||0,avgTicket:ie.get(Ce.id)?Math.round(ie.get(Ce.id).total/ie.get(Ce.id).count):0}))||[];M(be)}catch(X){console.error("Error loading client stats:",X)}finally{R(!1)}},H=()=>{const X={Style:{sales:0,cost:0,extras:0,count:0},Perfum:{sales:0,cost:0,extras:0,count:0},"Amor Amor":{sales:0,cost:0,extras:0,count:0}};e.forEach(ie=>{let be="Style";if(ie.type==="product"?ie.description?.includes("Regalito")||ie.description?.includes("Amor")?be="Amor Amor":(be="Perfum",qa.find(Ce=>ie.description?.includes(Ce.name))):be="Style",X[be]){const Ce=X[be];Ce.sales+=ie.amount,Ce.extras+=ie.additional_cost||0,Ce.count+=1,Ce.cost+=0}});const Y=Object.keys(X).map(ie=>{const be=X[ie],Ce=be.sales-be.cost-be.extras,re=be.sales>0?Ce/be.sales*100:0;return{name:ie,Ventas:be.sales,"Costo Extra":be.extras,Margen:Ce,"Margen %":Math.round(re)}});s(Y);const we=t.reduce((ie,be)=>ie+be.amount,0),se=e.reduce((ie,be)=>ie+be.amount,0);f({invested:we,recovered:se})};return g.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[g.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl border border-stone-100 shadow-sm",children:[g.jsxs("h2",{className:"text-xl font-bold text-stone-800 flex items-center gap-2",children:[g.jsx(r6,{className:"text-emerald-600"}),"Resumen Financiero"]}),g.jsx("div",{className:"flex gap-2",children:["day","week","month"].map(X=>g.jsx("button",{onClick:()=>n(X),className:`px-4 py-2 rounded-lg text-sm font-bold capitalize transition ${r===X?"bg-stone-900 text-white":"bg-stone-100 text-stone-500 hover:bg-stone-200"}`,children:X==="day"?"Hoy":X==="week"?"Semana":"Mes"},X))})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"bg-stone-900 p-6 rounded-2xl text-white shadow-xl relative overflow-hidden",children:[g.jsxs("div",{className:"relative z-10",children:[g.jsx("p",{className:"text-stone-400 text-sm font-bold uppercase tracking-wider mb-2",children:"Inversin Total (Gastos)"}),g.jsxs("h3",{className:"text-4xl font-mono font-bold text-red-400 mb-1",children:["$",c.invested.toLocaleString()]}),g.jsx("p",{className:"text-xs text-stone-500",children:"Acumulado histrico de compras/gastos"})]}),g.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:g.jsx(IN,{size:120})})]}),g.jsx("div",{className:"bg-emerald-900 p-6 rounded-2xl text-white shadow-xl relative overflow-hidden",children:g.jsxs("div",{className:"relative z-10",children:[g.jsx("p",{className:"text-emerald-200 text-sm font-bold uppercase tracking-wider mb-2",children:"Recuperado (Ventas)"}),g.jsxs("h3",{className:"text-4xl font-mono font-bold text-emerald-400 mb-1",children:["$",c.recovered.toLocaleString()]}),g.jsx("p",{className:"text-xs text-emerald-200/50",children:c.invested>0?`${(c.recovered/c.invested*100).toFixed(1)}% de la inversin recuperada`:"Calculando retorno..."})]})})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[g.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("h3",{className:"font-bold text-lg mb-6 flex items-center gap-2",children:[g.jsx(Ix,{size:20})," Rendimiento por rea"]}),g.jsx("div",{className:"h-[300px] w-full text-xs",children:g.jsx(zh,{width:"100%",height:"100%",children:g.jsxs(yj,{data:i,margin:{top:20,right:30,left:20,bottom:5},children:[g.jsx(Y0,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),g.jsx(J0,{dataKey:"name",axisLine:!1,tickLine:!1}),g.jsx(ep,{axisLine:!1,tickLine:!1,tickFormatter:X=>`$${X/1e3}k`}),g.jsx(Wh,{cursor:{fill:"#f8fafc"},contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),g.jsx(Vy,{}),g.jsx(Ju,{dataKey:"Ventas",fill:"#3b82f6",radius:[4,4,0,0]}),g.jsx(Ju,{dataKey:"Margen",fill:"#10b981",radius:[4,4,0,0]}),g.jsx(Ju,{dataKey:"Costo Extra",fill:"#ef4444",radius:[4,4,0,0]})]})})})]}),g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("h3",{className:"font-bold text-lg mb-6 flex items-center gap-2",children:[g.jsx(MN,{size:20})," Detalle de Mrgenes"]}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{className:"text-xs uppercase text-stone-400 bg-stone-50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-2 py-2 text-left",children:"rea"}),g.jsx("th",{className:"px-2 py-2 text-right",children:"Margen $"}),g.jsx("th",{className:"px-2 py-2 text-right",children:"%"})]})}),g.jsx("tbody",{className:"divide-y divide-stone-100",children:i.map(X=>g.jsxs("tr",{children:[g.jsx("td",{className:"px-2 py-3 font-medium",children:X.name}),g.jsxs("td",{className:`px-2 py-3 text-right font-bold ${X.Margen>0?"text-emerald-600":"text-stone-500"}`,children:["$",X.Margen.toLocaleString()]}),g.jsxs("td",{className:"px-2 py-3 text-right text-stone-500",children:[X["Margen %"],"%"]})]},X.name))})]})}),g.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl text-xs text-blue-700",children:[g.jsx("p",{className:"font-bold mb-1",children:" Tip:"}),g.jsx("p",{children:'El "Margen" descuenta los Costos Extra ingresados (luz, caf, etc). Para aumentar el margen en "Style", asegrate de registrar todos los insumos variables.'})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[g.jsx(RN,{size:20,className:"text-purple-600"})," Costos de Servicios"]}),g.jsx("p",{className:"text-xs text-stone-400 mb-4",children:"Ingresa el costo de insumos por servicio para calcular mrgenes reales."}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{className:"text-xs uppercase text-stone-400 bg-stone-50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-2 py-2 text-left",children:"Servicio"}),g.jsx("th",{className:"px-2 py-2 text-right",children:"Precio"}),g.jsx("th",{className:"px-2 py-2 text-right",children:"Costo"}),g.jsx("th",{className:"px-2 py-2 text-right",children:"Margen"}),g.jsx("th",{className:"px-2 py-2 text-right",children:"%"})]})}),g.jsx("tbody",{className:"divide-y divide-stone-100",children:ws.map(X=>{const Y=v[X.id]||0,we=X.price-Y,se=X.price>0?Math.round(we/X.price*100):0;return g.jsxs("tr",{className:"hover:bg-stone-50",children:[g.jsx("td",{className:"px-2 py-3 font-medium text-stone-700",children:X.name}),g.jsxs("td",{className:"px-2 py-3 text-right text-stone-600",children:["$",X.price.toLocaleString()]}),g.jsx("td",{className:"px-2 py-3 text-right",children:S===X.id?g.jsxs("div",{className:"flex items-center justify-end gap-1",children:[g.jsx("input",{type:"number",value:O,onChange:ie=>I(ie.target.value),className:"w-16 border rounded px-1 py-0.5 text-right text-sm",autoFocus:!0}),g.jsx("button",{onClick:()=>W(X.id,parseInt(O)||0),className:"text-green-600 hover:text-green-700",children:g.jsx(LN,{size:14})})]}):g.jsxs("button",{onClick:()=>{A(X.id),I(Y.toString())},className:"text-red-500 hover:underline",children:["$",Y.toLocaleString()]})}),g.jsxs("td",{className:`px-2 py-3 text-right font-bold ${we>0?"text-emerald-600":"text-red-500"}`,children:["$",we.toLocaleString()]}),g.jsxs("td",{className:"px-2 py-3 text-right text-stone-500",children:[se,"%"]})]},X.id)})})]})})]}),g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[g.jsx(zN,{size:20,className:"text-blue-600"})," Gestin de Clientes"]}),g.jsx("button",{onClick:V,disabled:L,className:"text-stone-400 hover:text-stone-600 p-1",children:g.jsx(DN,{size:16,className:L?"animate-spin":""})})]}),g.jsx("p",{className:"text-xs text-stone-400 mb-4",children:"Retornos y totales acumulados por cliente."}),g.jsx("div",{className:"overflow-x-auto max-h-[400px]",children:g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{className:"text-xs uppercase text-stone-400 bg-stone-50 sticky top-0",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-2 py-2 text-left",children:"Cliente"}),g.jsx("th",{className:"px-2 py-2 text-center",children:"Visitas"}),g.jsx("th",{className:"px-2 py-2 text-right",children:"Total $"}),g.jsx("th",{className:"px-2 py-2 text-right",children:"Ticket Prom."})]})}),g.jsxs("tbody",{className:"divide-y divide-stone-100",children:[P.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:4,className:"text-center py-8 text-stone-400",children:L?"Cargando...":"No hay clientes registrados"})}),P.map(X=>g.jsxs("tr",{className:"hover:bg-stone-50",children:[g.jsxs("td",{className:"px-2 py-3",children:[g.jsx("div",{className:"font-medium text-stone-700",children:X.name||"Sin nombre"}),g.jsx("div",{className:"text-xs text-stone-400",children:X.phone})]}),g.jsx("td",{className:"px-2 py-3 text-center",children:g.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${X.visits>=5?"bg-green-100 text-green-700":X.visits>=2?"bg-blue-100 text-blue-700":"bg-stone-100 text-stone-600"}`,children:X.visits||0})}),g.jsxs("td",{className:"px-2 py-3 text-right font-bold text-emerald-600",children:["$",X.totalSpent.toLocaleString()]}),g.jsxs("td",{className:"px-2 py-3 text-right text-stone-500",children:["$",X.avgTicket.toLocaleString()]})]},X.id))]})]})}),P.length>0&&g.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg text-xs",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("span",{className:"text-stone-600",children:["Total Clientes: ",g.jsx("strong",{children:P.length})]}),g.jsxs("span",{className:"text-emerald-600 font-bold",children:["Ingresos Totales: $",P.reduce((X,Y)=>X+Y.totalSpent,0).toLocaleString()]})]})})]})]})]})},Eee=({initialClient:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState(e||null),[s,c]=N.useState(""),[f,p]=N.useState(""),[m,v]=N.useState("todos"),[b,S]=N.useState(!1),[A,O]=N.useState([]),[I,P]=N.useState(""),[M,L]=N.useState([]),[R,U]=N.useState(""),[W,V]=N.useState(""),[H,X]=N.useState([]),[Y,we]=N.useState(!1);N.useEffect(()=>{e&&i(e),se(),ie()},[e]);const se=async()=>{const{data:Z,error:_e}=await We.from("inventory").select("*").gt("quantity",0).order("name",{ascending:!0});Z&&L(Z)},ie=async()=>{we(!0);const Z=new Date;Z.setDate(Z.getDate()-7);const{data:_e,error:fe}=await We.from("transactions").select("*, clients(name)").gte("created_at",Z.toISOString()).order("created_at",{ascending:!1}).limit(50);!fe&&_e&&X(_e),we(!1)},be=async Z=>{if(!Z||Z.length<2){O([]);return}const{data:_e,error:fe}=await We.from("clients").select("*").or(`phone.ilike.%${Z}%,name.ilike.%${Z}%`).limit(10);_e&&O(_e)};N.useEffect(()=>{const Z=setTimeout(()=>{be(s)},500);return()=>clearTimeout(Z)},[s]);const Ce=(Z,_e,fe,ae)=>{const je=fe||(_e==="product"?"10ml":"standard"),De=`${Z.id}-${je}`;if(t.find(Be=>Be.cartId===De))r(t.map(Be=>Be.cartId===De?{...Be,qty:Be.qty+1}:Be));else{let Be=ae||0;ae||(_e==="product"&&(fe==="5ml"?Be=Z.price5ml||Z.price||0:fe==="10ml"?Be=Z.price10ml||0:fe==="Botella"?Be=Z.priceFullBottle||0:Be=Z.price||0),_e==="gift"&&(Be=Z.price||0),_e==="service"&&(Be=Z.price||0)),r([...t,{...Z,cartId:De,type:_e,qty:1,price:Be,variant:je}])}P(`Agregado: ${Z.name} (${je})`),setTimeout(()=>P(""),2e3)},re=()=>{if(!R||!W){alert("Por favor ingrese nombre y precio del item.");return}const Z=parseInt(W);if(isNaN(Z)){alert("El precio debe ser un nmero vlido.");return}const _e={id:"manual-"+Date.now(),name:R,price:Z,type:"service",qty:1,variant:"manual",stock:!1,cartId:"manual-"+Date.now()};r(fe=>[...fe,_e]),U(""),V(""),P(`Item "${R}" agregado al carrito ($${Z})`),setTimeout(()=>P(""),3e3)},ze=Z=>{r(t.filter(_e=>_e.cartId!==Z))},le=(Z,_e)=>{_e<1||r(t.map(fe=>fe.cartId===Z?{...fe,qty:_e}:fe))},me=(Z,_e)=>{if(_e===""){r(t.map(ae=>ae.cartId===Z?{...ae,price:0}:ae));return}const fe=parseInt(_e);isNaN(fe)||r(t.map(ae=>ae.cartId===Z?{...ae,price:fe}:ae))},Ee=async()=>{const Z=prompt(`Ingresa el telfono para el nuevo cliente "${s}":`,"+569");if(Z)try{const{data:_e}=await We.from("clients").select("id, name, phone").eq("phone",Z).single();if(_e){alert(`El cliente ya existe: ${_e.name}`),i(_e),c("");return}const fe=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,De=>{const ye=Math.random()*16|0;return(De==="x"?ye:ye&3|8).toString(16)}),{data:ae,error:je}=await We.from("clients").insert({name:s,phone:Z,visits:1,member_token:fe()}).select().single();if(je)throw je;alert(` Cliente creado: ${ae.name}`),i(ae),c("")}catch(_e){alert("Error creando cliente: "+_e.message)}},Ae=async Z=>{if(!n||!n.id){alert(` Primero selecciona un cliente en el panel 'Venta Actual' (derecha).

1. Busca y selecciona el cliente arriba a la derecha.
2. Vuelve aqu y presiona este botn para asignarlo a esta venta.`);return}if(confirm(`Asignar cliente "${n.name}" a esta venta?`))try{const{error:_e}=await We.from("transactions").update({client_id:n.id}).eq("id",Z);if(_e)throw _e;alert(" Cliente asignado correctamente."),ie(),i(null)}catch(_e){alert("Error: "+_e.message)}},J=async()=>{if(t.length===0)return alert("El carrito est vaco");if(window.confirm(`Confirmar venta por $${t.reduce((Z,_e)=>Z+_e.price*_e.qty,0).toLocaleString()}?`)){S(!0);try{let Z=n?.id||null;if(n&&!n.id&&n.phone){const _e=n.phone.startsWith("+")?n.phone:"+569"+n.phone,{data:fe}=await We.from("clients").select("id").eq("phone",_e).single();if(fe)Z=fe.id;else{const ae=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ye){const Be=Math.random()*16|0;return(ye==="x"?Be:Be&3|8).toString(16)}),{data:je,error:De}=await We.from("clients").insert({name:n.name||"Cliente",phone:_e,visits:1,member_token:ae()}).select("id").single();De?console.error("Error creando cliente:",De):je&&(Z=je.id)}}for(const _e of t){if(_e.type==="product"&&_e.stock!==!1){const{error:ae}=await We.rpc("adjust_inventory",{p_product_id:_e.id,p_delta:-_e.qty,p_reason:"sale_pos"});ae&&console.error("Inventory error",ae)}const{error:fe}=await We.from("transactions").insert({client_id:Z,amount:_e.price*_e.qty,type:_e.type==="service"?"service":"product",description:`POS: ${_e.name} (${_e.variant}) x${_e.qty}`,additional_cost:0});if(fe)throw fe}alert(" Venta registrada con xito!"),r([]),i(null),c(""),ie()}catch(Z){alert("Error procesando venta: "+Z.message)}finally{S(!1)}}},de=async Z=>{if(confirm(`Eliminar venta de $${Z.amount.toLocaleString()}?

Esta accin eliminar el registro financiero.`)){Z.type==="product"&&confirm(`Deseas intentar devolver el stock automticamente?
(Solo funciona si el sistema puede identificar el producto)`);try{const{error:_e}=await We.from("transactions").delete().eq("id",Z.id);if(_e)throw _e;alert("Venta eliminada correctamente."),ie()}catch(_e){alert("Error al eliminar: "+_e.message)}}},$e=qa.filter(Z=>(m==="todos"||m==="perfumes"||m==="arabes"&&Z.category==="arab")&&Z.name?.toLowerCase().includes(f.toLowerCase())),Ue=ws.filter(Z=>(m==="todos"||m==="servicios")&&Z.name?.toLowerCase().includes(f.toLowerCase())),Xe=M.filter(Z=>(m==="todos"||m==="productos")&&Z.name?.toLowerCase().includes(f.toLowerCase()));return g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 h-full",children:[g.jsxs("div",{className:"lg:col-span-2 space-y-6 overflow-y-auto pr-2 pb-20",children:[I&&g.jsx("div",{className:"bg-green-600 text-white p-2 rounded text-center text-sm font-bold sticky top-0 z-50 animate-in slide-in-from-top duration-300 shadow-lg",children:I}),g.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-stone-100 z-10 sticky top-0",children:[g.jsxs("div",{className:"relative",children:[g.jsx(Sc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400",size:20}),g.jsx("input",{type:"text",placeholder:"Buscar servicio o producto...",value:f,onChange:Z=>p(Z.target.value),className:"w-full pl-10 pr-4 py-3 bg-stone-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-black transition-all"})]}),g.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2 scrollbar-hide",children:["todos","servicios","perfumes","arabes","productos"].map(Z=>g.jsx("button",{onClick:()=>v(Z),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm font-bold transition-all ${m===Z?"bg-black text-white shadow-lg scale-105":"bg-stone-100 text-stone-500 hover:bg-stone-200"}`,children:Z.charAt(0).toUpperCase()+Z.slice(1)},Z))})]}),g.jsxs("div",{className:"bg-stone-50 p-4 rounded-xl border border-stone-200",children:[g.jsxs("h4",{className:"font-bold text-stone-700 mb-2 text-sm flex items-center gap-2",children:[g.jsx(RN,{size:14})," Item Manual"]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{placeholder:"Nombre Item",className:"flex-1 border p-2 rounded text-sm",value:R,onChange:Z=>U(Z.target.value)}),g.jsx("input",{placeholder:"Precio",type:"number",className:"w-24 border p-2 rounded text-sm",value:W,onChange:Z=>V(Z.target.value)}),g.jsxs("button",{onClick:re,className:"bg-stone-800 text-white px-3 rounded-lg font-bold text-sm hover:bg-black transition flex items-center gap-1",children:[g.jsx(SE,{size:16})," Agregar"]})]})]}),g.jsxs("div",{className:"space-y-8",children:[Ue.length>0&&g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-stone-500 mb-3 uppercase text-xs",children:"Servicios"}),g.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:Ue.map(Z=>g.jsxs("button",{onClick:()=>Ce(Z,"service"),className:"bg-white p-4 rounded-xl border border-stone-100 hover:shadow-md hover:border-purple-200 transition-all text-left group relative overflow-hidden",children:[g.jsx("div",{className:"mb-2",children:g.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider px-2 py-1 rounded-full bg-purple-100 text-purple-700",children:"Servicio"})}),g.jsx("h3",{className:"font-bold text-stone-800 leading-tight mb-1",children:Z.name}),g.jsxs("div",{className:"font-mono font-bold text-lg text-emerald-600 mt-2",children:["$",Z.price.toLocaleString()]})]},Z.id))})]}),Xe.length>0&&g.jsxs("div",{children:[g.jsxs("h4",{className:"font-bold text-stone-500 mb-3 uppercase text-xs flex items-center gap-2",children:[g.jsx(jN,{size:14})," Inventario"]}),g.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:Xe.map(Z=>g.jsxs("div",{className:"bg-white p-4 rounded-xl border border-stone-100 hover:shadow-md hover:border-emerald-200 transition-all text-left relative overflow-hidden",children:[g.jsx("div",{className:"font-bold text-stone-800 text-sm mb-1 truncate",children:Z.name}),g.jsxs("div",{className:"text-stone-400 text-[10px] mb-3",children:["Stock: ",Z.quantity]}),g.jsxs("button",{onClick:()=>Ce({...Z,id:Z.product_id},"product","unidad",Z.sale_price||Z.price||0),className:"w-full bg-emerald-600 text-white text-xs py-2 rounded-lg font-bold hover:bg-emerald-700 transition flex items-center justify-center gap-1",children:[g.jsx(SE,{size:14})," $",(Z.sale_price||Z.price||0).toLocaleString()]})]},Z.product_id))})]}),$e.length>0&&g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-stone-500 mb-3 uppercase text-xs",children:"Catlogo de Perfumes"}),g.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:$e.map(Z=>g.jsxs("div",{className:"bg-white p-4 rounded-xl border border-stone-100 hover:shadow-md transition-all",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-stone-800 text-sm",children:Z.name}),g.jsx("p",{className:"text-xs text-stone-400",children:Z.brand})]}),g.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider px-2 py-1 rounded-full bg-orange-100 text-orange-700",children:Z.category})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[g.jsxs("button",{onClick:()=>Ce(Z,"product","5ml",Z.price5ml),className:"bg-stone-50 hover:bg-stone-100 text-stone-700 text-xs py-2 rounded-lg font-bold transition",children:["5ml",g.jsx("br",{}),g.jsxs("span",{className:"text-emerald-600",children:["$",Z.price5ml.toLocaleString()]})]}),g.jsxs("button",{onClick:()=>Ce(Z,"product","10ml",Z.price10ml),className:"bg-stone-50 hover:bg-stone-100 text-stone-700 text-xs py-2 rounded-lg font-bold transition",children:["10ml",g.jsx("br",{}),g.jsxs("span",{className:"text-emerald-600",children:["$",Z.price10ml.toLocaleString()]})]}),Z.priceFullBottle&&g.jsxs("button",{onClick:()=>Ce(Z,"product","Botella",Z.priceFullBottle),className:"bg-stone-50 hover:bg-stone-100 text-stone-700 text-xs py-2 rounded-lg font-bold transition border border-amber-200",children:["Botella",g.jsx("br",{}),g.jsxs("span",{className:"text-emerald-600",children:["$",Z.priceFullBottle.toLocaleString()]})]})]})]},Z.id))})]})]}),g.jsxs("div",{className:"mt-12 pt-8 border-t border-stone-200",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("h3",{className:"font-bold text-stone-800 flex items-center gap-2",children:[g.jsx(w6,{size:18})," ltimas Ventas (24h)"]}),g.jsx("button",{onClick:ie,className:"text-stone-400 hover:text-black p-2 hover:bg-stone-100 rounded-full transition",children:g.jsx(DN,{size:16,className:Y?"animate-spin":""})})]}),g.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-stone-100 overflow-hidden",children:g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{className:"bg-stone-50 text-stone-400 text-xs uppercase",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-3 text-left",children:"Hora"}),g.jsx("th",{className:"px-4 py-3 text-left",children:"Descripcin"}),g.jsx("th",{className:"px-4 py-3 text-right",children:"Monto"}),g.jsx("th",{className:"px-4 py-3 text-right",children:"Accin"})]})}),g.jsx("tbody",{className:"divide-y divide-stone-100",children:H.length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:4,className:"p-8 text-center text-stone-400",children:"No hay ventas recientes hoy."})}):H.map(Z=>g.jsxs("tr",{className:"hover:bg-stone-50 transition-colors",children:[g.jsx("td",{className:"px-4 py-3 text-stone-500 whitespace-nowrap",children:new Date(Z.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),g.jsxs("td",{className:"px-4 py-3",children:[g.jsx("div",{className:"font-medium text-stone-800 line-clamp-1",children:Z.description}),g.jsx("div",{className:"text-xs text-stone-400",children:Z.clients?.name||"Cliente Casual"})]}),g.jsxs("td",{className:"px-4 py-3 text-right font-mono font-medium text-emerald-600",children:["$",Z.amount.toLocaleString()]}),g.jsx("td",{className:"px-4 py-3 text-right",children:g.jsxs("div",{className:"flex justify-end gap-1",children:[!Z.clients&&g.jsx("button",{onClick:()=>Ae(Z.id),className:"p-2 text-stone-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Asignar cliente seleccionado (en panel derecho)",children:g.jsx(id,{size:16})}),g.jsx("button",{onClick:()=>de(Z),className:"p-2 text-stone-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-transparent hover:border-red-100",title:"Eliminar venta",children:g.jsx(nd,{size:16})})]})})]},Z.id))})]})})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-xl h-fit border border-stone-100 lg:sticky lg:top-4 flex flex-col max-h-[90vh]",children:[g.jsxs("h3",{className:"font-bold text-xl mb-6 flex items-center gap-2",children:[g.jsx(hl,{})," Venta Actual"]}),g.jsxs("div",{className:"mb-6 space-y-2",children:[g.jsx("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-wider",children:"Cliente"}),n?g.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 text-emerald-700 rounded-xl border border-emerald-100",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"bg-emerald-100 p-2 rounded-full",children:g.jsx(_6,{size:16})}),g.jsx("span",{className:"font-bold",children:n.name})]}),g.jsx("button",{onClick:()=>i(null),className:"p-1 hover:bg-emerald-100 rounded-full text-emerald-600",children:g.jsx(yi,{size:16})})]}):g.jsxs("div",{className:"relative",children:[g.jsx(Sc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400",size:16}),g.jsx("input",{type:"text",placeholder:"Buscar cliente...",value:s,onChange:Z=>c(Z.target.value),className:"w-full pl-9 pr-4 py-2 bg-stone-50 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-black transition-all border border-transparent focus:border-stone-200"}),!n&&s.length>2&&A.length===0&&g.jsxs("button",{onClick:Ee,className:"absolute top-full left-0 right-0 mt-2 w-full py-2 bg-emerald-600 text-white rounded-xl shadow-lg z-50 text-sm font-bold flex items-center justify-center gap-2 hover:bg-emerald-700 transition animate-in fade-in slide-in-from-top-2",children:[g.jsx(id,{size:16}),' Crear "',s,'"']}),A.length>0&&g.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-stone-100 shadow-xl rounded-xl mt-2 z-50 max-h-48 overflow-y-auto p-2",children:A.map(Z=>g.jsxs("button",{onClick:()=>{i(Z),c(""),O([])},className:"w-full text-left px-3 py-2 hover:bg-stone-50 text-sm rounded-lg flex justify-between items-center group",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-bold text-stone-800",children:Z.name||"Sin Nombre"}),g.jsx("div",{className:"text-xs text-stone-400",children:Z.phone})]}),Z.visits&&g.jsxs("span",{className:"text-[10px] bg-stone-100 px-2 py-1 rounded-full",children:[Z.visits," visitas"]})]},Z.id))})]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-1 mb-6 min-h-[200px]",children:t.length===0?g.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-stone-300 space-y-4",children:[g.jsx(hl,{size:48,strokeWidth:1}),g.jsx("p",{className:"text-sm font-medium",children:"Carrito vaco"})]}):t.map(Z=>g.jsxs("div",{className:"flex justify-between items-center group bg-stone-50 p-3 rounded-xl border border-transparent hover:border-stone-200 transition-all",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-bold text-stone-800 text-sm",children:Z.name}),g.jsx("div",{className:"text-xs text-stone-400 mb-2",children:Z.variant}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>le(Z.cartId,Z.qty-1),className:"w-6 h-6 flex items-center justify-center bg-white border border-stone-200 rounded-lg text-xs hover:bg-stone-100 transition",children:"-"}),g.jsx("span",{className:"text-xs font-bold w-4 text-center",children:Z.qty}),g.jsx("button",{onClick:()=>le(Z.cartId,Z.qty+1),className:"w-6 h-6 flex items-center justify-center bg-white border border-stone-200 rounded-lg text-xs hover:bg-stone-100 transition",children:"+"})]})]}),g.jsxs("div",{className:"text-right flex flex-col items-end gap-1",children:[g.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[g.jsx("span",{className:"text-stone-400 text-xs",children:"$"}),g.jsx("input",{className:"w-20 text-right bg-transparent border-b border-stone-300 font-bold text-stone-800 text-sm focus:outline-none focus:border-black p-0",value:Z.price,onChange:_e=>me(Z.cartId,_e.target.value),title:"Click para editar precio"})]}),g.jsx("button",{onClick:()=>ze(Z.cartId),className:"text-stone-300 hover:text-red-500 transition-colors p-1",children:g.jsx(nd,{size:14})})]})]},Z.cartId||`${Z.id}-${Z.variant}`))}),g.jsxs("div",{className:"space-y-4 pt-6 border-t border-stone-100 mt-auto",children:[g.jsxs("div",{className:"flex justify-between items-end",children:[g.jsx("span",{className:"text-stone-500 font-medium",children:"Total"}),g.jsxs("span",{className:"text-4xl font-bold font-mono text-stone-900 tracking-tight",children:["$",t.reduce((Z,_e)=>Z+_e.price*_e.qty,0).toLocaleString()]})]}),g.jsx("button",{onClick:J,disabled:t.length===0||b,className:"w-full py-4 bg-black text-white font-bold rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50 disabled:hover:scale-100 flex items-center justify-center gap-2 shadow-xl shadow-stone-200",children:b?g.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):g.jsxs(g.Fragment,{children:[g.jsx(l6,{size:20})," Cobrar"]})})]})]})]})},See=({onRegisterService:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState(new Date),[s,c]=N.useState(null),[f,p]=N.useState(!1),[m,v]=N.useState(null),[b,S]=N.useState(""),[A,O]=N.useState(""),[I,P]=N.useState("Corte"),[M,L]=N.useState("salon"),[R,U]=N.useState(1),[W,V]=N.useState(!1),[H,X]=N.useState(!1),[Y,we]=N.useState("9:00"),[se,ie]=N.useState("21:00"),[be,Ce]=N.useState("");N.useEffect(()=>{re()},[n]);const re=async()=>{V(!0);const{data:fe,error:ae}=await We.from("bookings").select("*").order("date",{ascending:!0}).order("time",{ascending:!0});ae?console.error("Error fetching bookings:",ae):r(fe||[]),V(!1)},le=(fe=>{const ae=[],je=fe.getDay(),De=fe.getDate()-je+(je===0?-6:1),ye=new Date(fe);ye.setDate(De);for(let Be=0;Be<7;Be++){const Qe=new Date(ye);Qe.setDate(ye.getDate()+Be),ae.push(Qe)}return ae})(n),me=Array.from({length:13},(fe,ae)=>`${ae+9}:00`),Ee=(fe,ae)=>{const je=new Date,De=parseInt(ae.split(":")[0]),ye=new Date(fe+"T00:00:00");return ye.toDateString()<je.toDateString()?!0:ye.toDateString()===je.toDateString()?De<=je.getHours():!1},Ae=()=>{const fe=new Date(n);fe.setDate(n.getDate()-7),i(fe)},J=()=>{const fe=new Date(n);fe.setDate(n.getDate()+7),i(fe)},de=(fe,ae)=>{const je=t.find(De=>De.date===fe&&De.time===ae);je?v(je):(c({date:fe,time:ae}),L("salon"),S(""),O(""),U(1),p(!0))},$e=async()=>{if(!s)return;const fe=M==="bloqueo",ae=fe?"BLOQUEADO":b;if(!ae&&!fe)return alert("Ingrese nombre");V(!0);try{const je=parseInt(s.time.split(":")[0]),De=[];for(let Qe=0;Qe<R;Qe++){const _t=je+Qe;if(_t>21)break;const Ft=`${_t}:00`;if(t.find(Ct=>Ct.date===s.date&&Ct.time===Ft)){alert(`El horario ${Ft} ya est ocupado`),V(!1);return}De.push({date:s.date,time:Ft,name:ae,phone:A||"00000000",email:"manual@admin.com",service_name:fe?"Bloqueo":`${I} (${R}h)`,is_home_service:M==="domicilio",created_at:new Date().toISOString()})}const{error:ye}=await We.from("bookings").insert(De);if(ye)throw ye;const Be=R>1?` (${R} horas)`:"";alert(fe?"Bloqueo registrado"+Be:"Reserva creada"+Be),p(!1),re()}catch(je){alert("Error: "+je.message)}finally{V(!1)}},Ue=async fe=>{const{error:ae}=await We.from("bookings").delete().eq("id",fe);ae||re()},Xe=async fe=>{if(!window.confirm(`Bloquear todo el da ${fe}?`))return;V(!0);const ae=me.map(ye=>({date:fe,time:ye,name:"BLOQUEADO",phone:"00000000",email:"block@admin.com",service_name:"Bloqueo",is_home_service:!1,created_at:new Date().toISOString()})),je=t.filter(ye=>ye.date===fe).map(ye=>ye.time),De=ae.filter(ye=>!je.includes(ye.time));if(De.length>0){const{error:ye}=await We.from("bookings").insert(De);ye?alert("Error: "+ye.message):re()}V(!1)},Z=async()=>{if(!be)return alert("Selecciona una fecha");const fe=me.indexOf(Y),ae=me.indexOf(se);if(fe>ae)return alert("Hora inicio debe ser menor que fin");const je=me.slice(fe,ae+1),De=t.filter(Qe=>Qe.date===be).map(Qe=>Qe.time),ye=je.filter(Qe=>!De.includes(Qe)).map(Qe=>({date:be,time:Qe,name:"BLOQUEADO",phone:"00000000",email:"block@admin.com",service_name:"Bloqueo",is_home_service:!1,created_at:new Date().toISOString()}));if(ye.length===0)return alert("Todos esos horarios ya estn ocupados");V(!0);const{error:Be}=await We.from("bookings").insert(ye);Be?alert("Error: "+Be.message):(alert(`${ye.length} horarios bloqueados`),X(!1),re()),V(!1)},_e=async fe=>{if(!window.confirm(`Desbloquear todo el da ${fe}?`))return;V(!0);const{error:ae}=await We.from("bookings").delete().eq("date",fe).eq("name","BLOQUEADO");ae||re(),V(!1)};return g.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-stone-200 h-[80vh] flex flex-col",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[g.jsx(NN,{})," Agenda Semanal"]}),g.jsxs("div",{className:"flex items-center bg-stone-100 rounded-lg p-1",children:[g.jsx("button",{onClick:Ae,className:"p-1 hover:bg-stone-200 rounded",children:g.jsx(i6,{size:20})}),g.jsxs("span",{className:"px-3 font-mono text-sm font-bold",children:[le[0].getDate(),"/",le[0].getMonth()+1," - ",le[6].getDate(),"/",le[6].getMonth()+1]}),g.jsx("button",{onClick:J,className:"p-1 hover:bg-stone-200 rounded",children:g.jsx(a6,{size:20})})]})]}),g.jsxs("div",{className:"flex gap-2 text-xs items-center flex-wrap",children:[g.jsxs("button",{onClick:()=>X(!H),className:`px-3 py-1.5 rounded-lg font-bold flex items-center gap-1 transition ${H?"bg-red-600 text-white":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:[g.jsx(bE,{size:14})," ",H?"Cerrar":"Bloqueo Rpido"]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-3 h-3 bg-purple-100 border border-purple-300 rounded"})," Saln"]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-3 h-3 bg-blue-100 border border-blue-300 rounded"})," Domicilio"]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-3 h-3 bg-red-100 border border-red-300 rounded"})," Bloqueado"]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-3 h-3 bg-stone-200 border border-stone-300 rounded"})," Expirado"]})]})]}),H&&g.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4 animate-in slide-in-from-top duration-200",children:g.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-red-600 font-bold block mb-1",children:"Fecha"}),g.jsxs("select",{value:be,onChange:fe=>Ce(fe.target.value),className:"border border-red-300 rounded px-2 py-1 text-sm",children:[g.jsx("option",{value:"",children:"Seleccionar..."}),le.map(fe=>g.jsxs("option",{value:fe.toISOString().split("T")[0],children:[["Dom","Lun","Mar","Mi","Jue","Vie","Sb"][fe.getDay()]," ",fe.getDate(),"/",fe.getMonth()+1]},fe.toISOString()))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-red-600 font-bold block mb-1",children:"Desde"}),g.jsx("select",{value:Y,onChange:fe=>we(fe.target.value),className:"border border-red-300 rounded px-2 py-1 text-sm",children:me.map(fe=>g.jsx("option",{value:fe,children:fe},fe))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-red-600 font-bold block mb-1",children:"Hasta"}),g.jsx("select",{value:se,onChange:fe=>ie(fe.target.value),className:"border border-red-300 rounded px-2 py-1 text-sm",children:me.map(fe=>g.jsx("option",{value:fe,children:fe},fe))})]}),g.jsx("button",{onClick:Z,disabled:W||!be,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-1.5 rounded font-bold text-sm disabled:opacity-50",children:W?"Bloqueando...":"Bloquear Rango"}),g.jsxs("div",{className:"border-l border-red-300 pl-4 ml-2",children:[g.jsx("span",{className:"text-xs text-red-600 mr-2",children:"Da completo:"}),le.map(fe=>{const ae=fe.toISOString().split("T")[0],je=t.some(De=>De.date===ae&&De.name==="BLOQUEADO");return g.jsxs("button",{onClick:()=>je?_e(ae):Xe(ae),className:`px-2 py-0.5 mx-0.5 rounded text-xs font-bold ${je?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700"}`,title:je?"Desbloquear da":"Bloquear da",children:[["D","L","M","X","J","V","S"][fe.getDay()],fe.getDate()]},ae)})]})]})}),g.jsx("div",{className:"flex-1 overflow-auto border border-stone-200 rounded-lg",children:g.jsxs("div",{className:"min-w-[800px]",children:[g.jsxs("div",{className:"grid grid-cols-8 bg-stone-50 border-b border-stone-200 sticky top-0 z-10",children:[g.jsx("div",{className:"p-2 text-center text-stone-500 font-bold text-xs border-r border-stone-200",children:"Hora"}),le.map((fe,ae)=>g.jsxs("div",{className:`p-2 text-center border-r border-stone-200 ${fe.toDateString()===new Date().toDateString()?"bg-amber-50":""}`,children:[g.jsx("div",{className:"text-stone-500 text-[10px] uppercase",children:["Dom","Lun","Mar","Mi","Jue","Vie","Sb"][fe.getDay()]}),g.jsx("div",{className:"font-bold text-stone-900",children:fe.getDate()})]},ae))]}),me.map(fe=>g.jsxs("div",{className:"grid grid-cols-8 border-b border-stone-100 hover:bg-stone-50/50",children:[g.jsx("div",{className:"p-2 text-center text-stone-400 text-xs font-mono border-r border-stone-100",children:fe}),le.map((ae,je)=>{const De=ae.toISOString().split("T")[0],ye=t.find(Pt=>Pt.date===De&&Pt.time===fe),Be=Ee(De,fe);let Qe="transition p-1 border-r border-stone-100 min-h-[50px]",_t=null,Ft=!0;return ye?ye.name==="BLOQUEADO"?(Qe+=" bg-red-100 hover:bg-red-200 border-red-200 cursor-pointer",_t=g.jsx("div",{className:"flex justify-center items-center h-full text-red-400",children:g.jsx(bE,{size:16})})):(Qe+=ye.is_home_service?" bg-blue-100 hover:bg-blue-200 border-blue-200 cursor-pointer":" bg-purple-100 hover:bg-purple-200 border-purple-200 cursor-pointer",_t=g.jsxs("div",{className:"text-[10px] leading-tight p-1 h-full overflow-hidden",children:[g.jsx("div",{className:"font-bold truncate",children:ye.name}),g.jsx("div",{className:"text-stone-500 truncate",children:ye.service_name})]})):Be?(Qe+=" bg-stone-200/50 cursor-not-allowed",_t=g.jsx("div",{className:"flex justify-center items-center h-full text-stone-400",children:g.jsx(ON,{size:14,className:"opacity-50"})}),Ft=!1):Qe+=" cursor-pointer hover:bg-stone-100",g.jsx("div",{className:Qe,onClick:()=>Ft&&de(De,fe),children:_t},`${De}-${fe}`)})]},fe))]})}),f&&s&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-sm shadow-xl animate-in fade-in zoom-in duration-200",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("h3",{className:"text-xl font-bold",children:[s.date," - ",s.time]}),g.jsx("button",{onClick:()=>p(!1),children:g.jsx(yi,{className:"text-stone-400 hover:text-stone-600"})})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[g.jsx("button",{onClick:()=>L("salon"),className:`p-2 rounded border text-sm font-bold ${M==="salon"?"bg-purple-600 text-white border-purple-600":"border-stone-200 text-stone-500"}`,children:"Saln"}),g.jsx("button",{onClick:()=>L("domicilio"),className:`p-2 rounded border text-sm font-bold ${M==="domicilio"?"bg-blue-600 text-white border-blue-600":"border-stone-200 text-stone-500"}`,children:"Domicilio"}),g.jsx("button",{onClick:()=>L("bloqueo"),className:`p-2 rounded border text-sm font-bold ${M==="bloqueo"?"bg-red-600 text-white border-red-600":"border-stone-200 text-stone-500"}`,children:"Bloquear"})]}),M!=="bloqueo"&&g.jsxs(g.Fragment,{children:[g.jsx("input",{className:"w-full border border-stone-300 rounded-lg p-2 text-sm",placeholder:"Nombre Cliente",value:b,onChange:fe=>S(fe.target.value),autoFocus:!0}),g.jsx("input",{className:"w-full border border-stone-300 rounded-lg p-2 text-sm",placeholder:"Telfono (Opcional)",value:A,onChange:fe=>O(fe.target.value)}),g.jsxs("select",{className:"w-full border border-stone-300 rounded-lg p-2 text-sm",value:I,onChange:fe=>P(fe.target.value),children:[g.jsx("option",{value:"Corte",children:"Corte"}),g.jsx("option",{value:"Color",children:"Color"}),g.jsx("option",{value:"Efecto",children:"Efecto"}),g.jsx("option",{value:"Alisado",children:"Alisado"}),g.jsx("option",{value:"Masaje",children:"Masaje"})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-sm text-stone-600 whitespace-nowrap",children:"Duracin:"}),g.jsxs("select",{className:"flex-1 border border-stone-300 rounded-lg p-2 text-sm",value:R,onChange:fe=>U(parseInt(fe.target.value)),children:[g.jsx("option",{value:1,children:"1 hora"}),g.jsx("option",{value:2,children:"2 horas"}),g.jsx("option",{value:3,children:"3 horas"}),g.jsx("option",{value:4,children:"4 horas"}),g.jsx("option",{value:5,children:"5 horas"})]})]}),g.jsx("button",{onClick:$e,disabled:W,className:`w-full py-3 rounded-xl font-bold text-white shadow-lg mt-2 disabled:opacity-50 ${M==="bloqueo"?"bg-red-600 hover:bg-red-700":"bg-stone-900 hover:bg-stone-800"}`,children:W?"Guardando...":M==="bloqueo"?"Bloquear Horario":"Guardar Reserva"})]})]})}),m&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-sm shadow-xl animate-in fade-in zoom-in duration-200",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-xl font-bold",children:m.name==="BLOQUEADO"?"Horario Bloqueado":"Reserva"}),g.jsx("button",{onClick:()=>v(null),children:g.jsx(yi,{className:"text-stone-400 hover:text-stone-600"})})]}),m.name!=="BLOQUEADO"&&g.jsxs("div",{className:"bg-stone-50 rounded-xl p-4 mb-4",children:[g.jsx("p",{className:"font-bold text-lg",children:m.name}),g.jsx("p",{className:"text-stone-500 text-sm",children:m.phone}),g.jsx("p",{className:"text-stone-400 text-xs mt-1",children:m.service_name}),g.jsxs("p",{className:"text-stone-400 text-xs",children:[m.date," - ",m.time]})]}),g.jsxs("div",{className:"space-y-3",children:[m.name!=="BLOQUEADO"&&e&&g.jsxs("button",{onClick:()=>{e({name:m.name,phone:m.phone,service:m.service_name}),v(null)},className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl flex items-center justify-center gap-2 shadow-lg",children:[g.jsx(sp,{size:20})," Registrar Servicio"]}),g.jsxs("button",{onClick:()=>{Ue(m.id),v(null)},className:"w-full py-3 bg-red-500 hover:bg-red-600 text-white font-bold rounded-xl flex items-center justify-center gap-2",children:[g.jsx(nd,{size:18})," ",m.name==="BLOQUEADO"?"Desbloquear":"Eliminar Reserva"]}),g.jsx("button",{onClick:()=>v(null),className:"w-full py-2 bg-stone-100 hover:bg-stone-200 text-stone-600 font-bold rounded-xl",children:"Cancelar"})]})]})})]})},oN=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"],Cee=({perfume:e,inventoryItem:t,onRefresh:r})=>{const[n,i]=N.useState(!1),s=t?.quantity||0,c=t?.last_purchase_price||0,f=e.priceFullBottle||0,p=f-c,m=c>0?p/c*100:0;let v=null;if(t?.last_purchase_date){const S=new Date().getTime()-new Date(t.last_purchase_date).getTime();v=Math.floor(S/(1e3*60*60*24))}const b=async S=>{i(!0);const{data:A,error:O}=await We.rpc("adjust_inventory",{p_product_id:e.id,p_delta:S,p_reason:"manual_adjustment"});O?alert("Error: "+O.message):A.success?r():alert("Error: "+A.message),i(!1)};return g.jsxs("tr",{className:"border-b border-stone-100",children:[g.jsx("td",{className:"px-4 py-2",children:g.jsx("div",{className:"font-medium text-stone-800",children:e.name})}),g.jsxs("td",{className:"px-4 py-2 text-center text-stone-600",children:["$",c.toLocaleString()]}),g.jsxs("td",{className:"px-4 py-2 text-center text-stone-600",children:["$",f.toLocaleString()]}),g.jsxs("td",{className:"px-4 py-2 text-center",children:[g.jsxs("div",{className:`text-xs font-bold ${p>=0?"text-green-600":"text-red-500"}`,children:["$",p.toLocaleString()]}),g.jsxs("div",{className:`text-[10px] ${p>=0?"text-green-500":"text-red-400"}`,children:[m.toFixed(1),"%"]})]}),g.jsx("td",{className:"px-4 py-2 text-center",children:g.jsx("span",{className:`font-bold ${s>2?"text-green-600":"text-red-500"}`,children:s})}),g.jsx("td",{className:"px-4 py-2 text-center text-stone-500",children:v!==null?`${v}d`:"-"}),g.jsxs("td",{className:"px-4 py-2 text-right flex justify-end gap-1",children:[g.jsx("button",{onClick:()=>b(1),disabled:n,className:"bg-stone-200 text-stone-800 px-2 py-1 rounded text-xs font-bold hover:bg-stone-300",children:"+"}),g.jsx("button",{onClick:()=>b(-1),disabled:n||s<=0,className:"bg-stone-200 text-stone-800 px-2 py-1 rounded text-xs font-bold hover:bg-stone-300",children:"-"})]})]})},Aee=({onClose:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState(!0);N.useEffect(()=>{(async()=>{const{data:f,error:p}=await We.from("inventory_logs").select("*").order("created_at",{ascending:!1}).limit(50);p?console.error("Error fetching logs:",p):r(f||[]),i(!1)})()},[]);const s=c=>{const f=qa.find(p=>p.id===c);return f?f.name:c};return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-2xl max-h-[80vh] flex flex-col",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[g.jsx(kN,{})," Historial de Movimientos"]}),g.jsx("button",{onClick:e,className:"text-stone-400 hover:text-stone-600 font-bold text-xl",children:""})]}),g.jsx("div",{className:"overflow-y-auto flex-1",children:n?g.jsx("p",{className:"text-center py-8 text-stone-400",children:"Cargando historial..."}):g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500 sticky top-0",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-2",children:"Fecha"}),g.jsx("th",{className:"px-4 py-2",children:"Producto"}),g.jsx("th",{className:"px-4 py-2 text-right",children:"Cambio"}),g.jsx("th",{className:"px-4 py-2 text-right",children:"Stock Final"}),g.jsx("th",{className:"px-4 py-2",children:"Motivo"})]})}),g.jsxs("tbody",{children:[t.map(c=>g.jsxs("tr",{className:"border-b border-stone-100",children:[g.jsx("td",{className:"px-4 py-2 text-stone-500 text-xs",children:new Date(c.created_at).toLocaleString()}),g.jsx("td",{className:"px-4 py-2 font-medium",children:s(c.product_id)}),g.jsxs("td",{className:`px-4 py-2 text-right font-bold ${c.change_amount>0?"text-green-600":"text-red-500"}`,children:[c.change_amount>0?"+":"",c.change_amount]}),g.jsx("td",{className:"px-4 py-2 text-right text-stone-600",children:c.new_quantity}),g.jsx("td",{className:"px-4 py-2 text-stone-500 text-xs",children:c.reason==="manual_adjustment"?"Ajuste Manual":c.reason})]},c.id)),t.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-stone-400",children:"No hay movimientos registrados."})})]})]})})]})})},_ee=({onLogout:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState(!0),[s,c]=N.useState("month"),[f,p]=N.useState(0),[m,v]=N.useState(0),[b,S]=N.useState([]),[A,O]=N.useState([]),[I,P]=N.useState([]),[M,L]=N.useState([]),[R,U]=N.useState("dashboard"),[W,V]=N.useState([]),[H,X]=N.useState(null),[Y,we]=N.useState(null),[se,ie]=N.useState([]),[be,Ce]=N.useState(null),[re,ze]=N.useState(!1),[le,me]=N.useState([]),[Ee,Ae]=N.useState(null),[J,de]=N.useState(new Map),[$e,Ue]=N.useState(0),[Xe,Z]=N.useState(0),[_e,fe]=N.useState([]),[ae,je]=N.useState(!1);N.useEffect(()=>{R==="dashboard"||R==="finanzas"?(ye(),R==="finanzas"&&De()):R==="clients"?Qe():R==="validaciones"&&_t(),Be()},[R,s]);const De=async()=>{const{data:Ne}=await We.from("expenses").select("*");Ne&&fe(Ne)},ye=async()=>{i(!0);try{const Ne=new Date;s==="week"?Ne.setDate(Ne.getDate()-7):s==="month"?Ne.setDate(Ne.getDate()-30):Ne.setHours(0,0,0,0);const{data:ut,error:Jt}=await We.from("transactions").select("*").gte("created_at",Ne.toISOString());if(Jt)throw Jt;const Dt=ut||[],Ht=new Date(Ne);s==="week"?Ht.setDate(Ht.getDate()-7):s==="month"?Ht.setDate(Ht.getDate()-30):Ht.setDate(Ht.getDate()-1);const{data:Ot}=await We.from("transactions").select("*").gte("created_at",Ht.toISOString()).lt("created_at",Ne.toISOString()),wr=Ot||[];r(Dt);const Ai=Dt.reduce((vt,qe)=>vt+qe.amount,0);p(Ai),v(Dt.length?Math.round(Ai/Dt.length):0);const $n=new Map;Dt.forEach(vt=>{const qe=vt.type==="product"?"Productos":"Servicios";$n.set(qe,($n.get(qe)||0)+vt.amount)}),O(Array.from($n).map(([vt,qe])=>({name:vt,value:qe})));const Wn=new Map,er=(vt,qe)=>{if(qe==="product"){const Yt=qa.find(kn=>kn.price5ml===vt||kn.price10ml===vt||kn.priceFullBottle===vt);return Yt?Yt.name:"Producto Genrico"}else{const Yt=ws.find(kn=>kn.price===vt);return Yt?Yt.name:"Servicio General"}};Dt.forEach(vt=>{const qe=er(vt.amount,vt.type);Wn.has(qe)||Wn.set(qe,{current:0,previous:0}),Wn.get(qe).current++}),wr.forEach(vt=>{const qe=er(vt.amount,vt.type);Wn.has(qe)||Wn.set(qe,{current:0,previous:0}),Wn.get(qe).previous++});const Fe=Array.from(Wn.entries()).map(([vt,qe])=>({name:vt,count:qe.current})).sort((vt,qe)=>qe.count-vt.count).slice(0,5);P(Fe);const mr=Dt.length||1,jt=Dt.length/Wn.size/mr,qt=[];Wn.forEach((vt,qe)=>{if(vt.current===0)return;const Yt=vt.current/mr,kn=vt.previous===0?1:(vt.current-vt.previous)/vt.previous;let Gi="question";Yt>=jt&&kn>=0?Gi="star":Yt>=jt&&kn<0?Gi="cow":Yt<jt&&kn>=0?Gi="question":Gi="dog",qt.push({name:qe,volume:Yt,growth:kn,type:Gi})}),L(qt);const Vn=new Map;Dt.forEach(vt=>{if(!vt.client_id)return;const qe=Vn.get(vt.client_id)||{id:vt.client_id,phone:"Cargando...",total_spent:0,visit_count:0};qe.total_spent+=vt.amount,qe.visit_count+=1,Vn.set(vt.client_id,qe)});const pa=Array.from(Vn.keys());if(pa.length>0){const{data:vt}=await We.from("clients").select("id, phone").in("id",pa);vt?.forEach(qe=>{const Yt=Vn.get(qe.id);Yt&&(Yt.phone=qe.phone)})}S(Array.from(Vn.values()).sort((vt,qe)=>qe.total_spent-vt.total_spent).slice(0,10))}catch(Ne){console.error("Error fetching dashboard data:",Ne)}finally{i(!1)}},Be=async()=>{const{data:Ne,error:ut}=await We.from("inventory").select("*");if(Ne){const Jt=new Map;let Dt=0,Ht=0;Ne.forEach(Ot=>{Jt.set(Ot.product_id,Ot),Dt+=Ot.quantity*(Ot.last_purchase_price||0),Ht+=Ot.quantity}),de(Jt),Ue(Dt),Z(Ht)}ut&&console.error("Error fetching inventory",ut)},Qe=async()=>{i(!0);const{data:Ne,error:ut}=await We.from("clients").select("*").order("last_visit",{ascending:!1});ut?console.error("Error fetching clients",ut):V(Ne||[]),ut?console.error("Error fetching clients",ut):V(Ne||[]),i(!1)},_t=async()=>{i(!0);const{data:Ne,error:ut}=await We.from("visit_registrations").select(`
                *,
                client:clients(name, phone)
            `).eq("status","pending").order("check_in_time",{ascending:!0});ut?console.error("Error fetching visits",ut):me(Ne||[]),i(!1)},Ft=async Ne=>{if(Ne.preventDefault(),!H)return;const{error:ut}=await We.from("clients").update({name:H.name,phone:H.phone,visits:H.visits}).eq("id",H.id);ut?alert("Error al actualizar: "+ut.message):(X(null),Qe())},Pt=async Ne=>{if(window.confirm("Ests seguro de eliminar este cliente? Esta accin no se puede deshacer y borrar su historial."))try{await We.from("hair_service_log").delete().eq("client_id",Ne),await We.from("transactions").delete().eq("client_id",Ne),await We.from("visit_registrations").delete().eq("client_id",Ne);const{error:ut}=await We.from("clients").delete().eq("id",Ne);if(ut)throw ut;Qe()}catch(ut){alert("Error al eliminar: "+ut.message)}},Ct=Ne=>{we(Ne),U("ventas")},At=async Ne=>{ze(!0),Ce(Ne);const{data:ut,error:Jt}=await We.from("transactions").select("*").eq("client_id",Ne.id).order("created_at",{ascending:!1});Jt?console.error("Error fetching history:",Jt):ie(ut||[]),ze(!1)},Ci=async Ne=>{if(!window.confirm("Eliminar esta transaccin? Esta accin no se puede deshacer."))return;const{error:ut}=await We.from("transactions").delete().eq("id",Ne);ut?alert("Error al eliminar: "+ut.message):ie(Jt=>Jt.filter(Dt=>Dt.id!==Ne))},He=()=>{const Ne=["ID Transaccion","Fecha","Monto","Tipo","ID Cliente"],ut=t.map(Ot=>[Ot.id,Ot.created_at,Ot.amount,Ot.type,Ot.client_id||"Annimo"]),Jt="data:text/csv;charset=utf-8,"+Ne.join(",")+`
`+ut.map(Ot=>Ot.join(",")).join(`
`),Dt=encodeURI(Jt),Ht=document.createElement("a");Ht.setAttribute("href",Dt),Ht.setAttribute("download",`reporte_financiero_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(Ht),Ht.click(),document.body.removeChild(Ht)},ha=()=>{const Ne=["Nombre","Telfono","Visitas","ltima Visita"],ut=W.map(Ot=>[Ot.name||"Sin Nombre",Ot.phone,Ot.visits,Ot.last_visit?new Date(Ot.last_visit).toLocaleDateString():"N/A"]),Jt="data:text/csv;charset=utf-8,"+Ne.join(",")+`
`+ut.map(Ot=>Ot.join(",")).join(`
`),Dt=encodeURI(Jt),Ht=document.createElement("a");Ht.setAttribute("href",Dt),Ht.setAttribute("download",`clientes_tus3b_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(Ht),Ht.click(),document.body.removeChild(Ht)};return g.jsxs("div",{className:"max-w-6xl mx-auto p-4 py-8 md:pt-24",children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsx("h1",{className:"text-3xl font-bold text-stone-900 serif",children:"Panel de Gestin"}),g.jsxs("div",{className:"flex gap-4",children:[R==="dashboard"&&g.jsxs("select",{value:s,onChange:Ne=>c(Ne.target.value),className:"bg-white border border-stone-300 rounded-lg px-3 py-2 text-sm",children:[g.jsx("option",{value:"week",children:"ltima Semana"}),g.jsx("option",{value:"month",children:"ltimo Mes"})]}),g.jsx("button",{onClick:e,className:"bg-stone-200 px-4 py-2 rounded-lg text-sm font-bold hover:bg-stone-300",children:"Cerrar Sesin"})]})]}),g.jsxs("div",{className:"flex gap-4 mb-6 border-b border-stone-200 pb-1",children:[g.jsx("button",{onClick:()=>U("dashboard"),className:`px-4 py-2 font-bold transition ${R==="dashboard"?"text-stone-900 border-b-2 border-stone-900":"text-stone-400 hover:text-stone-600"}`,children:"Dashboard"}),g.jsx("button",{onClick:()=>U("clients"),className:`px-4 py-2 font-bold transition ${R==="clients"?"text-stone-900 border-b-2 border-stone-900":"text-stone-400 hover:text-stone-600"}`,children:"Clientes"}),g.jsxs("button",{onClick:()=>U("validaciones"),className:`px-4 py-2 font-bold transition ${R==="validaciones"?"text-stone-900 border-b-2 border-stone-900":"text-stone-400 hover:text-stone-600"}`,children:["Validaciones QR",le.length>0&&g.jsx("span",{className:"ml-2 bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full align-top",children:le.length})]}),g.jsx("button",{onClick:()=>U("finanzas"),className:`px-4 py-2 font-bold transition ${R==="finanzas"?"text-stone-900 border-b-2 border-stone-900":"text-stone-400 hover:text-stone-600"}`,children:"Finanzas"}),g.jsx("button",{onClick:()=>U("ventas"),className:`px-4 py-2 font-bold transition ${R==="ventas"?"text-stone-900 border-b-2 border-stone-900":"text-stone-400 hover:text-stone-600"}`,children:"Ventas (POS)"}),g.jsx("button",{onClick:()=>U("agenda"),className:`px-4 py-2 font-bold transition ${R==="agenda"?"text-stone-900 border-b-2 border-stone-900":"text-stone-400 hover:text-stone-600"}`,children:"Agenda"})]}),R==="validaciones"&&g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[g.jsxs("div",{className:"md:col-span-1 bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex flex-col items-center text-center",children:[g.jsxs("h3",{className:"text-xl font-bold mb-2 flex items-center gap-2",children:[g.jsx(op,{})," QR de Llegada"]}),g.jsx("p",{className:"text-stone-500 text-xs mb-6",children:"Imprime este cdigo y pgalo en la entrada."}),g.jsx("div",{className:"bg-white p-4 rounded-xl border-2 border-stone-900 mb-4",children:g.jsx(vy,{value:"https://tus3b.cl/#/checkin",size:200,level:"H"})}),g.jsx("p",{className:"font-mono text-xs text-stone-400 mb-4",children:"tus3b.cl/#/checkin"}),g.jsxs("button",{onClick:()=>window.print(),className:"w-full py-2 bg-stone-100 text-stone-700 rounded-lg hover:bg-stone-200 text-sm font-bold flex items-center justify-center gap-2",children:[g.jsx(Bg,{size:14})," Imprimir QR"]})]}),g.jsxs("div",{className:"md:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[g.jsx(s6,{})," Visitas Pendientes"]}),le.length===0?g.jsx("div",{className:"py-12 text-center text-stone-400 bg-stone-50 rounded-lg border-2 border-dashed border-stone-100",children:g.jsx("p",{children:"No hay clientes esperando validacin."})}):g.jsx("div",{className:"space-y-4",children:le.map(Ne=>g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-stone-50 border border-stone-100 rounded-xl hover:border-amber-200 transition",children:[g.jsxs("div",{className:"flex items-center gap-4 mb-3 sm:mb-0",children:[g.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center text-amber-800 font-bold text-lg",children:Ne.client?.name?.charAt(0)||"?"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-stone-900",children:Ne.client?.name||"Cliente"}),g.jsx("p",{className:"text-sm text-stone-500",children:Ne.client?.phone}),g.jsxs("p",{className:"text-xs text-stone-400 mt-1",children:["Lleg: ",new Date(Ne.check_in_time).toLocaleTimeString()]})]})]}),g.jsx("button",{onClick:()=>Ae(Ne),className:"w-full sm:w-auto px-6 py-2 bg-stone-900 text-white font-bold rounded-lg shadow hover:bg-stone-800 transition",children:"Validar Visita"})]},Ne.id))})]})]}),R==="finanzas"&&g.jsx(bee,{transactions:t,expenses:_e,timeRange:s,onTimeRangeChange:Ne=>c(Ne)}),R==="ventas"&&g.jsx(Eee,{initialClient:Y},Y?Y.id:"pos-reset"),R==="agenda"&&g.jsx(See,{onRegisterService:Ne=>{const ut={name:Ne.name,phone:Ne.phone,service:Ne.service};we(ut),U("ventas")}}),R==="dashboard"?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-stone-500 text-sm uppercase tracking-wider mb-1",children:"Monto Neto"}),g.jsxs("h3",{className:"text-3xl font-bold text-green-600",children:["$",f.toLocaleString()]})]}),g.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:g.jsx(IN,{className:"text-green-600"})})]}),g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-stone-500 text-sm uppercase tracking-wider mb-1",children:"Ticket Promedio"}),g.jsxs("h3",{className:"text-3xl font-bold text-blue-600",children:["$",m.toLocaleString()]})]}),g.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:g.jsx(Ix,{className:"text-blue-600"})})]}),g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-stone-500 text-sm uppercase tracking-wider mb-1",children:"Transacciones"}),g.jsx("h3",{className:"text-3xl font-bold text-purple-600",children:t.length})]}),g.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:g.jsx(Ix,{className:"text-purple-600"})})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[g.jsx(MN,{size:18})," Origen de Ingresos"]}),g.jsx("div",{className:"h-[250px] w-full",children:g.jsx(zh,{width:"100%",height:"100%",children:g.jsxs(vee,{children:[g.jsx(LP,{data:A,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",children:A.map((Ne,ut)=>g.jsx(bl,{fill:oN[ut%oN.length]},`cell-${ut}`))}),g.jsx(Wh,{formatter:Ne=>`$${Ne.toLocaleString()}`}),g.jsx(Vy,{})]})})})]}),g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[g.jsx(n6,{size:18})," Top Productos/Servicios"]}),g.jsx("div",{className:"h-[250px] w-full",children:g.jsx(zh,{width:"100%",height:"100%",children:g.jsxs(yj,{data:I,layout:"vertical",children:[g.jsx(Y0,{strokeDasharray:"3 3",horizontal:!1}),g.jsx(J0,{type:"number",hide:!0}),g.jsx(ep,{dataKey:"name",type:"category",width:100,style:{fontSize:"10px"}}),g.jsx(Wh,{}),g.jsx(Ju,{dataKey:"count",fill:"#8884d8",radius:[0,4,4,0]})]})})})]}),g.jsxs("div",{className:"md:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[g.jsx(b6,{size:18})," Matriz BCG (Crecimiento vs Participacin)"]}),g.jsxs("div",{className:"h-[300px] w-full relative",children:[g.jsx(zh,{width:"100%",height:"100%",children:g.jsxs(wee,{margin:{top:20,right:20,bottom:20,left:20},children:[g.jsx(Y0,{}),g.jsx(J0,{type:"number",dataKey:"volume",name:"Cuota (Volumen)",unit:"%",domain:[0,"auto"],tickFormatter:Ne=>Math.round(Ne*100)+"%"}),g.jsx(ep,{type:"number",dataKey:"growth",name:"Crecimiento",unit:"%",tickFormatter:Ne=>Math.round(Ne*100)+"%"}),g.jsx(Wh,{cursor:{strokeDasharray:"3 3"},formatter:(Ne,ut)=>[Math.round(Ne*100)+"%",ut==="volume"?"Cuota":"Crecimiento"]}),g.jsx(qP,{y:0,stroke:"#ccc",strokeDasharray:"3 3"}),g.jsx(rj,{name:"Productos",data:M,fill:"#8884d8",children:M.map((Ne,ut)=>{let Jt="#8884d8";return Ne.type==="star"?Jt="#FFBB28":Ne.type==="cow"?Jt="#00C49F":Ne.type==="dog"?Jt="#FF8042":Jt="#999",g.jsx(bl,{fill:Jt},`cell-${ut}`)})})]})}),g.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 p-2 rounded border border-stone-200 text-xs shadow-lg grid grid-cols-2 gap-2",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-3 h-3 bg-[#FFBB28] rounded-full"}),"  Estrella"]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-3 h-3 bg-[#00C49F] rounded-full"}),"  Vaca"]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-3 h-3 bg-[#999] rounded-full"}),"  Interrogante"]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-3 h-3 bg-[#FF8042] rounded-full"}),"  Perro"]})]})]}),g.jsx("p",{className:"text-xs text-stone-400 mt-2 text-center",children:"* Eje X: Cuota de Mercado (Volumen) | Eje Y: Crecimiento respecto al periodo anterior"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[g.jsx(zN,{size:20})," Top 10 Clientes (Gasto)"]}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-2",children:"Cliente"}),g.jsx("th",{className:"px-4 py-2 text-right",children:"Visitas"}),g.jsx("th",{className:"px-4 py-2 text-right",children:"Total Gastado"}),g.jsx("th",{className:"px-4 py-2 text-right",children:"Accin"})]})}),g.jsxs("tbody",{children:[b.map((Ne,ut)=>g.jsxs("tr",{className:"border-b border-stone-100",children:[g.jsxs("td",{className:"px-4 py-3 font-medium",children:[ut+1,". ",Ne.phone]}),g.jsx("td",{className:"px-4 py-3 text-right",children:Ne.visit_count}),g.jsxs("td",{className:"px-4 py-3 text-right font-bold text-green-600",children:["$",Ne.total_spent.toLocaleString()]}),g.jsx("td",{className:"px-4 py-3 text-right",children:g.jsx("button",{onClick:()=>Ct({id:Ne.id,phone:Ne.phone,name:"Cliente"}),className:"text-xs bg-stone-900 text-white px-2 py-1 rounded hover:bg-stone-700",children:"Vender"})})]},Ne.id)),b.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-stone-400",children:"No hay suficientes datos"})})]})]})})]}),g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[g.jsx(jN,{size:20})," Inventario Perfumes"]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>je(!0),className:"text-sm text-stone-500 hover:text-stone-800 font-bold flex items-center gap-1 bg-stone-100 px-2 py-1 rounded",children:[g.jsx(kN,{size:14})," Historial"]}),g.jsxs("button",{onClick:He,className:"text-sm text-blue-600 font-bold hover:underline flex items-center gap-1",children:[g.jsx(Bg,{size:14})," Exportar CSV"]})]})]}),g.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:g.jsxs("table",{className:"w-full text-xs text-left",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"text-stone-500 border-b border-stone-200",children:[g.jsx("th",{className:"px-4 py-2 text-left",children:"Producto"}),g.jsx("th",{className:"px-4 py-2 text-center",children:"Costo"}),g.jsx("th",{className:"px-4 py-2 text-center",children:"Precio Vta"}),g.jsx("th",{className:"px-4 py-2 text-center",children:"Margen"}),g.jsx("th",{className:"px-4 py-2 text-center",children:"Stock"}),g.jsx("th",{className:"px-4 py-2 text-center",children:"Das"}),g.jsx("th",{className:"px-4 py-2 text-right",children:"Accin"})]})}),g.jsx("tbody",{children:qa.map(Ne=>g.jsx(Cee,{perfume:Ne,inventoryItem:J.get(Ne.id),onRefresh:Be},Ne.id))}),g.jsx("tfoot",{className:"bg-stone-100 font-bold text-stone-800 border-t-2 border-stone-200",children:g.jsxs("tr",{children:[g.jsx("td",{className:"px-4 py-3",children:"TOTALES"}),g.jsx("td",{className:"px-4 py-3"}),g.jsx("td",{className:"px-4 py-3"}),g.jsx("td",{className:"px-4 py-3"}),g.jsxs("td",{className:"px-4 py-3 text-center",children:[Xe," un."]}),g.jsx("td",{className:"px-4 py-3 text-center text-xs text-stone-500"}),g.jsxs("td",{className:"px-4 py-3 text-right text-green-700",children:["Inv: $",$e.toLocaleString()]})]})})]})})]})]})]}):g.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-xl font-bold",children:"Gestin de Clientes"}),g.jsxs("button",{onClick:ha,className:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-green-700 flex items-center gap-2",children:[g.jsx(Bg,{size:16})," Exportar Excel"]})]}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3",children:"Nombre"}),g.jsx("th",{className:"px-6 py-3",children:"Telfono"}),g.jsx("th",{className:"px-6 py-3 text-center",children:"Visitas (Lealtad)"}),g.jsx("th",{className:"px-6 py-3",children:"ltima Visita"}),g.jsx("th",{className:"px-6 py-3 text-right",children:"Acciones"})]})}),g.jsx("tbody",{children:W.map(Ne=>g.jsxs("tr",{className:"border-b border-stone-100 hover:bg-stone-50",children:[g.jsx("td",{className:"px-6 py-4 font-bold text-stone-800",children:Ne.name||"Sin nombre"}),g.jsx("td",{className:"px-6 py-4 font-mono text-stone-600",children:Ne.phone}),g.jsx("td",{className:"px-6 py-4 text-center",children:g.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full font-bold",children:Ne.visits})}),g.jsx("td",{className:"px-6 py-4 text-stone-500",children:new Date(Ne.last_visit).toLocaleDateString()}),g.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[g.jsxs("button",{onClick:()=>At(Ne),className:"text-purple-600 hover:text-purple-800 font-medium text-xs px-2 py-1 bg-purple-50 rounded inline-flex items-center gap-1",children:[g.jsx(TN,{size:12})," Historial"]}),g.jsx("button",{onClick:()=>X(Ne),className:"text-blue-600 hover:text-blue-800 font-medium text-xs px-2 py-1 bg-blue-50 rounded",children:"Editar"}),g.jsx("button",{onClick:()=>Pt(Ne.id),className:"text-red-600 hover:text-red-800 font-medium text-xs px-2 py-1 bg-red-50 rounded",children:"Eliminar"})]})]},Ne.id))})]})})]}),H&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-sm",children:[g.jsx("h3",{className:"text-xl font-bold mb-4",children:"Editar Cliente"}),g.jsxs("form",{onSubmit:Ft,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-1",children:"Nombre"}),g.jsx("input",{type:"text",value:H.name||"",onChange:Ne=>X({...H,name:Ne.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-1",children:"Telfono"}),g.jsx("input",{type:"text",value:H.phone,onChange:Ne=>X({...H,phone:Ne.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-1",children:"Visitas (Puntos)"}),g.jsx("input",{type:"number",value:H.visits,onChange:Ne=>X({...H,visits:parseInt(Ne.target.value)}),className:"w-full px-4 py-2 border rounded-lg"})]}),g.jsxs("div",{className:"flex gap-2 mt-6",children:[g.jsx("button",{type:"button",onClick:()=>X(null),className:"flex-1 px-4 py-2 bg-stone-200 text-stone-700 rounded-lg font-bold",children:"Cancelar"}),g.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-stone-900 text-white rounded-lg font-bold",children:"Guardar"})]})]})]})}),be&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-bold",children:"Historial de Servicios"}),g.jsxs("p",{className:"text-sm text-stone-500",children:[be.name||"Cliente"," - ",be.phone]})]}),g.jsx("button",{onClick:()=>{Ce(null),ie([])},className:"p-2 hover:bg-stone-100 rounded-full",children:g.jsx(yi,{size:20})})]}),re?g.jsx("div",{className:"py-12 text-center text-stone-400",children:"Cargando historial..."}):se.length===0?g.jsx("div",{className:"py-12 text-center text-stone-400 bg-stone-50 rounded-lg border-2 border-dashed border-stone-100",children:g.jsx("p",{children:"Este cliente no tiene transacciones registradas."})}):g.jsx("div",{className:"overflow-y-auto flex-1",children:g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"text-xs uppercase bg-stone-50 text-stone-500 sticky top-0",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-3",children:"Fecha"}),g.jsx("th",{className:"px-4 py-3",children:"Descripcin"}),g.jsx("th",{className:"px-4 py-3",children:"Tipo"}),g.jsx("th",{className:"px-4 py-3 text-right",children:"Monto"}),g.jsx("th",{className:"px-4 py-3 text-right",children:"Accin"})]})}),g.jsx("tbody",{children:se.map(Ne=>g.jsxs("tr",{className:"border-b border-stone-100 hover:bg-stone-50",children:[g.jsx("td",{className:"px-4 py-3 text-stone-500 text-xs",children:new Date(Ne.created_at).toLocaleDateString("es-CL",{day:"2-digit",month:"short",year:"numeric"})}),g.jsx("td",{className:"px-4 py-3 font-medium",children:Ne.description||"Sin descripcin"}),g.jsx("td",{className:"px-4 py-3",children:g.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${Ne.type==="service"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:Ne.type==="service"?"Servicio":"Producto"})}),g.jsxs("td",{className:"px-4 py-3 text-right font-bold text-green-600",children:["$",Ne.amount.toLocaleString()]}),g.jsx("td",{className:"px-4 py-3 text-right",children:g.jsx("button",{onClick:()=>Ci(Ne.id),className:"text-red-500 hover:text-red-700 p-1",title:"Eliminar transaccin",children:g.jsx(nd,{size:14})})})]},Ne.id))}),g.jsx("tfoot",{className:"bg-stone-100 font-bold",children:g.jsxs("tr",{children:[g.jsx("td",{colSpan:3,className:"px-4 py-3",children:"Total General"}),g.jsxs("td",{className:"px-4 py-3 text-right text-green-700",children:["$",se.reduce((Ne,ut)=>Ne+ut.amount,0).toLocaleString()]}),g.jsx("td",{})]})})]})}),g.jsxs("div",{className:"mt-4 pt-4 border-t border-stone-200 flex gap-2",children:[g.jsxs("button",{onClick:()=>Ct(be),className:"flex-1 px-4 py-2 bg-stone-900 text-white rounded-lg font-bold flex items-center justify-center gap-2",children:[g.jsx(C6,{size:16})," Registrar Nueva Venta"]}),g.jsx("button",{onClick:()=>{Ce(null),ie([])},className:"px-4 py-2 bg-stone-200 text-stone-700 rounded-lg font-bold",children:"Cerrar"})]})]})}),Ee&&g.jsx(YD,{visit:Ee,onClose:()=>Ae(null),onSuccess:_t}),ae&&g.jsx(Aee,{onClose:()=>je(!1)})]})},Nee=()=>{const[e,t]=N.useState(null),[r,n]=N.useState(""),i=(c,f)=>{t(c),f&&n(f)},s=async()=>{await We.auth.signOut(),t(null),n("")};return e?e==="management"?g.jsx(_ee,{onLogout:s}):g.jsx(XD,{onLogout:s}):g.jsx(wD,{onLogin:i})},Oee=()=>{const[e,t]=N.useState("Todos"),[r,n]=N.useState(null),i=["Todos","Cortes","Color","Peinados"],s=e==="Todos"?CE:CE.filter(c=>c.category===e);return g.jsxs("div",{className:"animate-in fade-in duration-700",children:[g.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:i.map(c=>g.jsx("button",{onClick:()=>t(c),className:`px-6 py-2 rounded-full text-sm font-bold uppercase tracking-widest transition-all ${e===c?"bg-stone-900 text-white shadow-lg scale-105":"bg-stone-100 text-stone-500 hover:bg-stone-200"}`,children:c},c))}),g.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-8 space-y-8 px-4",children:s.map((c,f)=>g.jsxs("div",{className:"break-inside-avoid relative group cursor-zoom-in overflow-hidden rounded-xl shadow-md bg-stone-100",onClick:()=>n(c.url),children:[g.jsx("img",{src:c.url,alt:c.description,className:"w-full h-auto object-cover transform transition duration-700 group-hover:scale-110",loading:"lazy"}),g.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:g.jsxs("div",{className:"text-white text-center p-4 transform translate-y-4 group-hover:translate-y-0 transition duration-300",children:[g.jsx(I6,{className:"mx-auto mb-2 opacity-80"}),g.jsx("p",{className:"font-serif italic text-lg",children:c.description})]})})]},f))}),r&&g.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:()=>n(null),children:[g.jsx("button",{className:"absolute top-6 right-6 text-white/50 hover:text-white transition",onClick:()=>n(null),children:g.jsx(yi,{size:32})}),g.jsx("img",{src:r,alt:"Zoom",className:"max-w-full max-h-[90vh] object-contain rounded-sm shadow-2xl scale-in-95 animate-in duration-300"})]})]})},Iee=()=>{const e=t=>{const r=encodeURIComponent(`Hola, me gustara reservar el "${t}".`);window.open(`https://wa.me/${vc}?text=${r}`,"_blank")};return g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 min-h-[60vh]",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Detalles con Amor"}),g.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-rose-500",children:"Amor Amor"}),g.jsx("p",{className:"text-stone-500 mt-4 max-w-2xl mx-auto",children:"Sorprende a quien ms quieres con nuestra seleccin exclusiva."})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:L6.map(t=>g.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-stone-100 hover:shadow-xl transition-shadow flex flex-col",children:[g.jsxs("div",{className:"bg-amber-50 p-8 flex justify-center items-center h-48 relative overflow-hidden group",children:[g.jsx("div",{className:"absolute inset-0 bg-amber-100 opacity-0 group-hover:opacity-20 transition-opacity"}),g.jsx(oy,{size:64,className:"text-amber-500 relative z-10"})]}),g.jsxs("div",{className:"p-8 flex-grow flex flex-col",children:[g.jsx("h3",{className:"serif text-2xl text-stone-900 mb-2",children:t.name}),g.jsx("div",{className:"text-3xl font-light text-stone-800 mb-6 font-serif",children:t.price>0?`$${t.price.toLocaleString("es-CL")}`:"A medida"}),g.jsx("div",{className:"space-y-3 mb-8 flex-grow",children:t.includes.map((r,n)=>g.jsxs("div",{className:"flex items-start text-stone-600",children:[g.jsx(h6,{size:16,className:"text-amber-400 mt-1 mr-2 flex-shrink-0 fill-current"}),g.jsx("span",{className:"text-sm",children:r})]},n))}),g.jsx("button",{onClick:()=>e(t.name),className:"w-full bg-stone-900 text-white py-3 rounded-full font-bold uppercase tracking-wider text-sm hover:bg-stone-800 transition shadow-md",children:"Reservar"})]})]},t.id))})]})},Tee=()=>{const[e,t]=N.useState(""),[r,n]=N.useState(""),[i,s]=N.useState(!1),[c,f]=N.useState("search"),[p,m]=N.useState(null),[v,b]=N.useState(""),S=async I=>{I.preventDefault(),s(!0),b("");try{const P=e.replace(/\D/g,"");if(P.length<8)throw new Error("Ingresa un nmero vlido (ej: 912345678)");const{data:M,error:L}=await We.from("clients").select("*").eq("phone",P).single();if(L&&L.code!=="PGRST116")throw L;M?(m(M),await O(M.id)):f("register")}catch(P){b(P.message||"Error al buscar cliente")}finally{s(!1)}},A=async I=>{I.preventDefault(),s(!0),b("");try{const P=e.replace(/\D/g,"");if(!r.trim())throw new Error("Ingresa tu nombre");const{data:M,error:L}=await We.from("clients").insert([{name:r,phone:P,visits:0}]).select().single();if(L)throw L;await O(M.id)}catch(P){b(P.message||"Error al registrar")}finally{s(!1)}},O=async I=>{const{error:P}=await We.from("visit_registrations").insert([{client_id:I}]);if(P)throw console.error(P),new Error("Hubo un problema registrando la visita. Intenta de nuevo.");f("success")};return c==="success"?g.jsx("div",{className:"min-h-screen bg-stone-950 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-stone-900 border border-amber-500/30 rounded-2xl p-8 max-w-sm w-full text-center shadow-2xl animate-fade-in-up",children:[g.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:g.jsx(sp,{className:"w-10 h-10 text-green-400"})}),g.jsx("h2",{className:"text-2xl font-serif text-amber-100 mb-2",children:"Llegada Registrada!"}),g.jsx("p",{className:"text-stone-400 mb-6",children:"Tu visita ha quedado en espera. Tu estilista validar tus servicios al finalizar para sumar tus puntos."}),g.jsx(rn,{to:"/",className:"block w-full py-3 bg-stone-800 hover:bg-stone-700 text-amber-100 rounded-lg transition-colors font-medium",children:"Volver al Inicio"})]})}):g.jsxs("div",{className:"min-h-screen bg-stone-950 p-4 flex flex-col items-center justify-center relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-amber-500/10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 pointer-events-none"}),g.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-pink-500/10 rounded-full blur-3xl translate-x-1/3 translate-y-1/3 pointer-events-none"}),g.jsxs("div",{className:"w-full max-w-md bg-stone-900/80 backdrop-blur-md border border-stone-800 rounded-2xl shadow-xl overflow-hidden relative z-10",children:[g.jsxs("div",{className:"bg-gradient-to-r from-stone-900 to-stone-800 p-6 text-center border-b border-stone-800",children:[g.jsx("div",{className:"w-12 h-12 bg-amber-500/20 rounded-xl flex items-center justify-center mx-auto mb-3",children:g.jsx(op,{className:"w-6 h-6 text-amber-400"})}),g.jsx("h1",{className:"text-xl font-serif text-amber-100",children:"Registro de Visita"}),g.jsx("p",{className:"text-sm text-stone-400 mt-1",children:"Escanea al llegar para sumar puntos"})]}),g.jsxs("div",{className:"p-6",children:[v&&g.jsx("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-800 rounded-lg text-red-200 text-sm text-center",children:v}),c==="search"?g.jsxs("form",{onSubmit:S,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase tracking-wider mb-1",children:"Nmero de Telfono"}),g.jsx("input",{type:"tel",placeholder:"Ej: 912345678",value:e,onChange:I=>t(I.target.value),className:"w-full bg-stone-950 border border-stone-800 rounded-lg px-4 py-3 text-white placeholder-stone-600 focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition-all text-lg tracking-widest text-center",autoFocus:!0})]}),g.jsx("button",{type:"submit",disabled:i||e.length<8,className:"w-full py-3.5 bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-500 hover:to-amber-600 text-white font-bold rounded-lg shadow-lg shadow-amber-900/20 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i?g.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):g.jsxs(g.Fragment,{children:[g.jsx(Sc,{className:"w-4 h-4"}),"Buscar / Registrar"]})})]}):g.jsxs("form",{onSubmit:A,className:"space-y-4 animate-fade-in-right",children:[g.jsxs("div",{className:"text-center mb-4",children:[g.jsx("div",{className:"w-12 h-12 bg-stone-800 rounded-full flex items-center justify-center mx-auto mb-2 text-stone-400",children:g.jsx(id,{className:"w-6 h-6"})}),g.jsx("h3",{className:"text-amber-100 font-medium",children:"Primera vez por aqu!"}),g.jsx("p",{className:"text-xs text-stone-400",children:"Crea tu perfil para empezar a sumar."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase tracking-wider mb-1",children:"Tu Nombre"}),g.jsx("input",{type:"text",placeholder:"Nombre y Apellido",value:r,onChange:I=>n(I.target.value),className:"w-full bg-stone-950 border border-stone-800 rounded-lg px-4 py-3 text-white placeholder-stone-600 focus:ring-2 focus:ring-amber-500 outline-none",autoFocus:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase tracking-wider mb-1",children:"Telfono"}),g.jsx("input",{type:"tel",value:e,disabled:!0,className:"w-full bg-stone-950/50 border border-stone-800 rounded-lg px-4 py-3 text-stone-500 cursor-not-allowed"})]}),g.jsxs("div",{className:"pt-2 flex gap-3",children:[g.jsx("button",{type:"button",onClick:()=>f("search"),className:"flex-1 py-3 bg-stone-800 text-stone-300 rounded-lg hover:bg-stone-700 transition",children:"Volver"}),g.jsx("button",{type:"submit",disabled:i,className:"flex-1 py-3 bg-amber-600 text-white font-bold rounded-lg hover:bg-amber-500 transition shadow-lg shadow-amber-900/20",children:i?"Registrando...":"Confirmar"})]})]})]}),g.jsx("div",{className:"bg-stone-950/50 p-4 text-center border-t border-stone-800",children:g.jsx("p",{className:"text-xs text-stone-600",children:"Tus3B Style  Sistema de Lealtad"})})]})]})},kee=()=>g.jsxs("div",{className:"min-h-screen bg-stone-950 text-white flex flex-col relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[600px] h-[600px] bg-rose-500/10 rounded-full blur-[120px] pointer-events-none"}),g.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-amber-500/10 rounded-full blur-[100px] pointer-events-none"}),g.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center px-4 py-8 max-w-lg mx-auto w-full z-10 space-y-8",children:[g.jsxs("div",{className:"text-center space-y-2 mb-4",children:[g.jsxs("h1",{className:"font-serif italic text-5xl md:text-6xl text-white tracking-tighter",children:["Tus3B ",g.jsx("span",{className:"text-amber-500",children:"Hub"})]}),g.jsx("p",{className:"text-stone-400 text-[10px] uppercase tracking-[0.4em] font-medium",children:"Belleza  Aroma  Regalos"})]}),g.jsxs("div",{className:"w-full space-y-4",children:[g.jsxs(rn,{to:"/style",className:"group block relative overflow-hidden rounded-2xl border border-stone-800 bg-stone-900/40 hover:bg-stone-900/60 transition-all duration-300",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),g.jsxs("div",{className:"p-6 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-stone-800 flex items-center justify-center text-white border border-stone-700 group-hover:border-white/50 transition-colors",children:g.jsx(lp,{size:24})}),g.jsxs("div",{children:[g.jsx("h2",{className:"font-serif text-2xl italic",children:"Style"}),g.jsx("p",{className:"text-[10px] text-stone-500 uppercase tracking-widest",children:"Peluquera & Color"})]})]}),g.jsx(Zu,{size:20,className:"text-stone-600 group-hover:text-white transition-colors"})]})]}),g.jsx(rn,{to:"/perfum",className:"group block relative overflow-hidden rounded-2xl border border-amber-900/30 bg-stone-900/40 hover:bg-amber-950/20 transition-all duration-300",children:g.jsxs("div",{className:"p-6 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-900/20 flex items-center justify-center text-amber-500 border border-amber-500/20 group-hover:border-amber-500/50 transition-colors",children:g.jsx(hl,{size:24})}),g.jsxs("div",{children:[g.jsx("h2",{className:"font-serif text-2xl text-amber-500",children:"Perfum"}),g.jsx("p",{className:"text-[10px] text-amber-800/80 uppercase tracking-widest",children:"Decants Exclusivos"})]})]}),g.jsx(Zu,{size:20,className:"text-amber-900/50 group-hover:text-amber-500 transition-colors"})]})}),g.jsx(rn,{to:"/regalos",className:"group block relative overflow-hidden rounded-2xl border border-rose-900/30 bg-stone-900/40 hover:bg-rose-950/20 transition-all duration-300",children:g.jsxs("div",{className:"p-6 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-rose-900/20 flex items-center justify-center text-rose-400 border border-rose-500/20 group-hover:border-rose-500/50 transition-colors",children:g.jsx(oy,{size:24})}),g.jsxs("div",{children:[g.jsx("h2",{className:"font-serif text-2xl text-rose-400",children:"Amor Amor"}),g.jsx("p",{className:"text-[10px] text-rose-800/80 uppercase tracking-widest",children:"Detalles Especiales"})]})]}),g.jsx(Zu,{size:20,className:"text-rose-900/50 group-hover:text-rose-400 transition-colors"})]})})]}),g.jsx("div",{className:"w-full mt-4",children:g.jsxs(rn,{to:"/loyalty",className:"block relative bg-gradient-to-r from-stone-900 to-stone-800 p-1 rounded-2xl shadow-xl group",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500 via-rose-500 to-amber-500 opacity-20 blur-md group-hover:opacity-40 transition-opacity"}),g.jsxs("div",{className:"relative bg-stone-950 rounded-xl p-5 flex items-center justify-between border border-white/5",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"bg-white text-black p-2 rounded-lg",children:g.jsx(op,{size:20})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-stone-400 font-medium",children:"Tus3B Club"}),g.jsx("p",{className:"text-sm font-bold text-white",children:"Mi Tarjeta Digital"})]})]}),g.jsx("span",{className:"text-[10px] bg-stone-800 px-2 py-1 rounded text-stone-300 group-hover:bg-stone-700 transition",children:"Ver Puntos"})]})]})}),g.jsx("div",{className:"w-full pt-4",children:g.jsx("p",{className:"text-center text-[10px] text-stone-600 mt-3",children:"Toca una categora para explorar"})})]}),g.jsx("div",{className:"text-center py-6 z-10",children:g.jsx("p",{className:"text-[9px] text-stone-700 uppercase tracking-widest",children:"Estilo  Confianza  Calidad"})})]}),Pee=[{id:"1",title:"Hidratacin Profunda",preview:"Cabello seco y sin vida? Descubre el secreto de la hidratacin.",icon:g.jsx(u6,{className:"text-blue-400",size:24}),fullTip:"El agua caliente abre la cutcula y reseca tu cabello. Intenta lavar siempre con agua tibia y terminar con un chorro de agua fra para sellar el brillo. Complementa con una mascarilla hidratante una vez a la semana.",relatedProduct:"Masaje Capilar"},{id:"2",title:"Proteccin Trmica",preview:"No quemes tu cabello. Aprende a usar el calor a tu favor.",icon:g.jsx(A6,{className:"text-amber-500",size:24}),fullTip:"Antes de usar secador o plancha, SIEMPRE aplica un protector trmico. Es la diferencia entre un cabello sano y uno quebradizo. Ajusta la temperatura a medio, no mximo.",relatedProduct:"Brushing"},{id:"3",title:"Corte de Puntas",preview:"Mito o realidad? Cortar las puntas hace crecer el pelo.",icon:g.jsx(lp,{className:"text-rose-400",size:24}),fullTip:"Cortar las puntas no hace que crezca ms rpido desde la raz, pero evita que las puntas abiertas se sigan partiendo hacia arriba (tripa). Un corte cada 2-3 meses mantiene tu largo saludable.",relatedProduct:"Corte de Puntas"},{id:"4",title:"Cuidado del Color",preview:"Mantn tu tinte vibrante por mucho ms tiempo.",icon:g.jsx(Cc,{className:"text-purple-400",size:24}),fullTip:"Usa shampoos sin sulfatos para cabellos teidos. El sol oxida el color, as que usa sombreros o productos con filtro UV en verano. Lava tu cabello cada 2-3 das, no a diario.",relatedProduct:"Aplicacin de Tintura"},{id:"5",title:"Frizz Control",preview:"Doma el volumen y luce un cabello suave y ordenado.",icon:g.jsx(O6,{className:"text-teal-400",size:24}),fullTip:"El frizz es falta de hidratacin. No frotes tu cabello con la toalla; presiona suavemente. Usa fundas de almohada de satn o seda para evitar la friccin mientras duermes.",relatedProduct:"Corte Bordado"}],jee=()=>{const[e,t]=N.useState(null);return g.jsx("section",{className:"py-20 bg-stone-50",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx("span",{className:"text-xs font-bold tracking-widest text-stone-500 uppercase",children:"Blog de Expertos"}),g.jsx("h2",{className:"serif text-4xl mt-2 text-stone-900",children:"Secretos de Greici Nataly"}),g.jsx("p",{className:"text-stone-600 mt-4 max-w-2xl mx-auto",children:"Tips profesionales para que mantengas tu cabello radiante entre cada visita al saln."})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Pee.map(r=>g.jsxs("div",{className:`bg-white rounded-2xl p-6 shadow-sm border border-stone-100 transition-all duration-300 ${e===r.id?"row-span-2 shadow-md ring-1 ring-stone-200":"hover:shadow-md"}`,children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsx("div",{className:"bg-stone-50 p-3 rounded-xl",children:r.icon}),r.relatedProduct&&g.jsx("span",{className:"text-[10px] bg-stone-100 px-2 py-1 rounded-full text-stone-500 font-bold uppercase",children:"Recomendado"})]}),g.jsx("h3",{className:"text-xl font-bold text-stone-900 mb-2",children:r.title}),e===r.id?g.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2",children:[g.jsx("p",{className:"text-stone-600 leading-relaxed mb-6 font-light",children:r.fullTip}),g.jsxs("div",{className:"flex justify-between items-center border-t border-stone-100 pt-4",children:[g.jsx("button",{onClick:()=>t(null),className:"text-stone-400 text-sm hover:text-stone-600 font-medium transition",children:"Cerrar"}),g.jsxs("a",{href:"#booking-section",className:"text-stone-900 text-sm font-bold flex items-center gap-1 hover:underline",children:["Agendar ",r.relatedProduct," ",g.jsx(Zu,{size:14})]})]})]}):g.jsxs("div",{children:[g.jsx("p",{className:"text-stone-500 text-sm mb-4",children:r.preview}),g.jsxs("button",{onClick:()=>t(r.id),className:"text-stone-900 font-bold text-sm flex items-center gap-2 hover:gap-3 transition-all group",children:["Leer Tip ",g.jsx(Zu,{size:14,className:"group-hover:text-amber-500 transition-colors"})]})]})]},r.id))}),g.jsx("div",{className:"mt-12 text-center",children:g.jsxs("div",{className:"inline-flex items-center gap-3 bg-white px-4 py-2 rounded-full shadow-sm border border-stone-100",children:[g.jsx("img",{src:"/images/gallery/work_1.png",alt:"Greici",className:"w-8 h-8 rounded-full object-cover",onError:r=>r.target.src="https://ui-avatars.com/api/?name=Greici+Nataly&background=random"}),g.jsxs("span",{className:"text-sm text-stone-600 italic",children:['"Tu cabello es tu corona, cudalo con amor."  ',g.jsx("span",{className:"font-bold text-stone-900",children:"Greici Nataly"})]})]})})]})})},Ree=()=>{const{pathname:e}=Pa();return Nr.useEffect(()=>{window.scrollTo(0,0)},[e]),null},Mee=()=>{const[e,t]=N.useState(null),r=()=>g.jsxs(g.Fragment,{children:[g.jsx(k6,{onCtaClick:()=>{document.getElementById("booking-section")?.scrollIntoView({behavior:"smooth"})}}),g.jsx("section",{className:"py-20 bg-white",children:g.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx("h2",{className:"serif text-4xl text-stone-900",children:"Nuestros Servicios"}),g.jsx("p",{className:"text-stone-500 mt-2",children:"Transparencia y calidad en cada detalle."})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ws.filter(n=>!n.homeServiceOnly).map(n=>g.jsxs("div",{className:"flex justify-between items-center border-b border-stone-100 pb-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-stone-900",children:n.name}),g.jsx("p",{className:"text-xs text-stone-500",children:n.description})]}),g.jsxs("div",{className:"text-right ml-4",children:[g.jsxs("span",{className:"block font-serif font-bold text-lg text-stone-900",children:["$",n.price.toLocaleString("es-CL")]}),g.jsxs("span",{className:"text-[10px] text-stone-400 uppercase",children:[n.durationMin," min"]})]})]},n.id))}),g.jsx("div",{className:"mt-8 text-center",children:g.jsx(rn,{to:"/booking",className:"text-stone-900 font-bold border-b border-stone-900 hover:text-stone-600 hover:border-stone-600 transition",children:"Ver Men Completo"})})]})}),g.jsx("section",{className:"py-24 bg-stone-50 relative overflow-hidden",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute -top-4 -left-4 w-full h-full border-2 border-stone-200 rounded-sm"}),g.jsx("img",{src:"/images/gallery/work_1.png",alt:"Hair Styling",className:"rounded-sm shadow-xl relative z-10 w-full",onError:n=>{n.target.src="https://images.unsplash.com/photo-1560869713-7d0a29430803?auto=format&fit=crop&q=80&w=800"}})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsx("span",{className:"text-xs font-bold tracking-widest text-stone-500 uppercase",children:"Portafolio"}),g.jsx("h3",{className:"serif text-4xl text-stone-900",children:"Experiencia que se nota"}),g.jsx("p",{className:"text-stone-600 font-light text-lg leading-relaxed",children:"Cada corte y color es una obra de arte personalizada. Revisa nuestra galera para encontrar la inspiracin de tu prximo look."}),g.jsx("div",{className:"flex items-center space-x-4 pt-4",children:g.jsx(rn,{to:"/gallery",className:"px-8 py-3 bg-stone-900 text-white rounded-full font-bold text-sm hover:bg-stone-700 transition no-underline flex items-center justify-center shadow-lg",children:"Ver Galera Completa"})})]})]})})}),g.jsx(jee,{}),g.jsx(iD,{}),g.jsxs("div",{id:"booking-section",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Tu momento es ahora"}),g.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Agenda tu Cita"})]}),g.jsx(KM,{onSuccess:n=>{t(n)}})]}),g.jsx("div",{className:"bg-white py-4 text-center",children:g.jsxs(rn,{to:"/admin",className:"text-[10px] text-stone-300 hover:text-stone-500 flex items-center justify-center gap-1 mx-auto transition no-underline",children:[g.jsx(E6,{size:10})," Admin"]})})]});return g.jsx(VR,{children:g.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[g.jsx(Ree,{}),g.jsx(T6,{}),g.jsx("main",{className:"flex-grow pt-16 md:pt-0",children:g.jsxs(wR,{children:[g.jsx(Wa,{path:"/",element:g.jsx(kee,{})}),g.jsx(Wa,{path:"/style",element:g.jsx(r,{})}),g.jsx(Wa,{path:"/perfum",element:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Aromas Exclusivos"}),g.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Nuestra Coleccin"})]}),g.jsx(YM,{})]})}),g.jsx(Wa,{path:"/regalos",element:g.jsx(Iee,{})}),g.jsx(Wa,{path:"/gallery",element:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("span",{className:"text-sm font-bold tracking-widest text-stone-500 uppercase",children:"Nuestro Arte"}),g.jsx("h2",{className:"serif text-4xl md:text-5xl mt-3 text-stone-900",children:"Galera de Trabajos"}),g.jsx("p",{className:"text-stone-500 mt-4 max-w-2xl mx-auto",children:"Resultados reales de clientas felices. Insprate para tu prximo cambio de look."})]}),g.jsx(Oee,{})]})}),g.jsx(Wa,{path:"/loyalty",element:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 min-h-[60vh] flex flex-col justify-center items-center",children:g.jsx(yD,{})})}),g.jsx(Wa,{path:"/admin",element:g.jsx(Nee,{})}),g.jsx(Wa,{path:"/checkin",element:g.jsx(Tee,{})}),g.jsx(Wa,{path:"/confirmation",element:g.jsx(Dee,{})})]})}),g.jsx(ZM,{}),g.jsx(rD,{})]})})},Dee=()=>{const t=Pa().state;return t?g.jsx(nD,{isHomeService:t.booking.isHomeService,onGoHome:()=>window.location.href="/",onGoCatalog:()=>window.location.href="/perfum"}):g.jsx(vR,{to:"/"})};console.log("Iniciando aplicacin React...");const bj=document.getElementById("root");if(!bj)throw new Error("Could not find root element to mount to");try{E8.createRoot(bj).render(g.jsx(Nr.StrictMode,{children:g.jsx(Mee,{})})),console.log("Aplicacin montada correctamente.")}catch(e){console.error("Error al montar la aplicacin:",e);const t=document.getElementById("app-error");t&&(t.style.display="block",t.innerHTML="Error crtico al iniciar React: "+e.message)}
